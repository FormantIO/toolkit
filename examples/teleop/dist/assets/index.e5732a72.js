import{A as e,F as t}from"./vendor.4a465ad9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function i(e){r("#log").innerHTML=e+"<br>"+r("#log").innerHTML}function r(e){return document.querySelector(e)}r("formant-realtime-player").drawer.start(),r("button").addEventListener("click",(async()=>{try{if(r("section").style.display="none",r("#log").style.display="block",i("Waiting for authentication ..."),!(await e.waitTilAuthenticated()))return void i("Not Authenticated");const o=await t.getCurrentDevice();i("Currently looking at <b>"+o.name+"</b>"),i("Getting a realtime connection ... "),await o.startRealtimeConnection(),o.addRealtimeListener(((e,t)=>{r("formant-realtime-player").drawVideoFrame(t.payload.h264VideoFrame)}));let n=await o.getRealtimeVideoStreams();i("Video streams: "+JSON.stringify(n)),i("Starting to listen to video stream "+n[0].name+" ... "),o.startListeningToRealtimeVideo(n[0]),r("formant-realtime-player").style.display="block";let a=await o.createCustomDataChannel("joystick");r("formant-joystick").style.display="block",r("formant-joystick").addEventListener("joystick",(e=>{const t=e;a.send(JSON.stringify(t.detail))}))}catch(o){i(o.message)}})),document.body.style.display="block";
