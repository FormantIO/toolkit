function _mergeNamespaces(i,o){for(var s=0;s<o.length;s++){const _=o[s];if(typeof _!="string"&&!Array.isArray(_)){for(const $ in _)if($!=="default"&&!($ in i)){const et=Object.getOwnPropertyDescriptor(_,$);et&&Object.defineProperty(i,$,et.get?et:{enumerable:!0,get:()=>_[$]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))_($);new MutationObserver($=>{for(const et of $)if(et.type==="childList")for(const tt of et.addedNodes)tt.tagName==="LINK"&&tt.rel==="modulepreload"&&_(tt)}).observe(document,{childList:!0,subtree:!0});function s($){const et={};return $.integrity&&(et.integrity=$.integrity),$.referrerpolicy&&(et.referrerPolicy=$.referrerpolicy),$.crossorigin==="use-credentials"?et.credentials="include":$.crossorigin==="anonymous"?et.credentials="omit":et.credentials="same-origin",et}function _($){if($.ep)return;$.ep=!0;const et=s($);fetch($.href,et)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports(i){jsxRuntimeExports=i}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports(i){reactExports=i}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,o){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,o,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,o,s){var _,$={},et=null,tt=null;if(o!=null)for(_ in o.ref!==void 0&&(tt=o.ref),o.key!==void 0&&(et=""+o.key),o)J.call(o,_)&&!L$1.hasOwnProperty(_)&&($[_]=o[_]);var j=arguments.length-2;if(j===1)$.children=s;else if(1<j){for(var it=Array(j),st=0;st<j;st++)it[st]=arguments[st+2];$.children=it}if(i&&i.defaultProps)for(_ in j=i.defaultProps,j)$[_]===void 0&&($[_]=j[_]);return{$$typeof:l$2,type:i,key:et,ref:tt,props:$,_owner:K$1.current}}function N$1(i,o){return{$$typeof:l$2,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$2}function escape$1(i){var o={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return o[s]})}var P$1=/\/+/g;function Q$1(i,o){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):o.toString(36)}function R$1(i,o,s,_,$){var et=typeof i;(et==="undefined"||et==="boolean")&&(i=null);var tt=!1;if(i===null)tt=!0;else switch(et){case"string":case"number":tt=!0;break;case"object":switch(i.$$typeof){case l$2:case n$2:tt=!0}}if(tt)return tt=i,$=$(tt),i=_===""?"."+Q$1(tt,0):_,I$1($)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$1($,o,s,"",function(st){return st})):$!=null&&(O$1($)&&($=N$1($,s+(!$.key||tt&&tt.key===$.key?"":(""+$.key).replace(P$1,"$&/")+"/")+i)),o.push($)),1;if(tt=0,_=_===""?".":_+":",I$1(i))for(var j=0;j<i.length;j++){et=i[j];var it=_+Q$1(et,j);tt+=R$1(et,o,s,it,$)}else if(it=A$2(i),typeof it=="function")for(i=it.call(i),j=0;!(et=i.next()).done;)et=et.value,it=_+Q$1(et,j++),tt+=R$1(et,o,s,it,$);else if(et==="object")throw o=String(i),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return tt}function S$1(i,o,s){if(i==null)return i;var _=[],$=0;return R$1(i,_,"","",function(et){return o.call(s,et,$++)}),_}function T$1(i){if(i._status===-1){var o=i._result;o=o(),o.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=o)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(i,o,s){S$1(i,function(){o.apply(this,arguments)},s)},count:function(i){var o=0;return S$1(i,function(){o++}),o},toArray:function(i){return S$1(i,function(o){return o})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(i,o,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var _=C$1({},i.props),$=i.key,et=i.ref,tt=i._owner;if(o!=null){if(o.ref!==void 0&&(et=o.ref,tt=K$1.current),o.key!==void 0&&($=""+o.key),i.type&&i.type.defaultProps)var j=i.type.defaultProps;for(it in o)J.call(o,it)&&!L$1.hasOwnProperty(it)&&(_[it]=o[it]===void 0&&j!==void 0?j[it]:o[it])}var it=arguments.length-2;if(it===1)_.children=s;else if(1<it){j=Array(it);for(var st=0;st<it;st++)j[st]=arguments[st+2];_.children=j}return{$$typeof:l$2,type:i.type,key:$,ref:et,props:_,_owner:tt}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t$1,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var o=M$1.bind(null,i);return o.type=i,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$2,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,o){return{$$typeof:x$1,type:i,compare:o===void 0?null:o}};react_production_min.startTransition=function(i){var o=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,o){return U$1.current.useCallback(i,o)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,o){return U$1.current.useEffect(i,o)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,o,s){return U$1.current.useImperativeHandle(i,o,s)};react_production_min.useInsertionEffect=function(i,o){return U$1.current.useInsertionEffect(i,o)};react_production_min.useLayoutEffect=function(i,o){return U$1.current.useLayoutEffect(i,o)};react_production_min.useMemo=function(i,o){return U$1.current.useMemo(i,o)};react_production_min.useReducer=function(i,o,s){return U$1.current.useReducer(i,o,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,o,s){return U$1.current.useSyncExternalStore(i,o,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";(function(i){i.exports=react_production_min})(react);const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(i,o,s){var _,$={},et=null,tt=null;s!==void 0&&(et=""+s),o.key!==void 0&&(et=""+o.key),o.ref!==void 0&&(tt=o.ref);for(_ in o)m$2.call(o,_)&&!p$2.hasOwnProperty(_)&&($[_]=o[_]);if(i&&i.defaultProps)for(_ in o=i.defaultProps,o)$[_]===void 0&&($[_]=o[_]);return{$$typeof:k$1,type:i,key:et,ref:tt,props:$,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;(function(i){i.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(i){reactDomExports=i}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(i){schedulerExports=i}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(qt,Pt){var wt=qt.length;qt.push(Pt);e:for(;0<wt;){var $t=wt-1>>>1,Xt=qt[$t];if(0<$(Xt,Pt))qt[$t]=Pt,qt[wt]=Xt,wt=$t;else break e}}function s(qt){return qt.length===0?null:qt[0]}function _(qt){if(qt.length===0)return null;var Pt=qt[0],wt=qt.pop();if(wt!==Pt){qt[0]=wt;e:for(var $t=0,Xt=qt.length,un=Xt>>>1;$t<un;){var dn=2*($t+1)-1,mn=qt[dn],an=dn+1,en=qt[an];if(0>$(mn,wt))an<Xt&&0>$(en,mn)?(qt[$t]=en,qt[an]=wt,$t=an):(qt[$t]=mn,qt[dn]=wt,$t=dn);else if(an<Xt&&0>$(en,wt))qt[$t]=en,qt[an]=wt,$t=an;else break e}}return Pt}function $(qt,Pt){var wt=qt.sortIndex-Pt.sortIndex;return wt!==0?wt:qt.id-Pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var et=performance;i.unstable_now=function(){return et.now()}}else{var tt=Date,j=tt.now();i.unstable_now=function(){return tt.now()-j}}var it=[],st=[],ht=1,vt=null,ft=3,pt=!1,ct=!1,yt=!1,Et=typeof setTimeout=="function"?setTimeout:null,Ot=typeof clearTimeout=="function"?clearTimeout:null,Lt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Tt(qt){for(var Pt=s(st);Pt!==null;){if(Pt.callback===null)_(st);else if(Pt.startTime<=qt)_(st),Pt.sortIndex=Pt.expirationTime,o(it,Pt);else break;Pt=s(st)}}function It(qt){if(yt=!1,Tt(qt),!ct)if(s(it)!==null)ct=!0,Ut(mt);else{var Pt=s(st);Pt!==null&&Ht(It,Pt.startTime-qt)}}function mt(qt,Pt){ct=!1,yt&&(yt=!1,Ot(sn),sn=-1),pt=!0;var wt=ft;try{for(Tt(Pt),vt=s(it);vt!==null&&(!(vt.expirationTime>Pt)||qt&&!Nt());){var $t=vt.callback;if(typeof $t=="function"){vt.callback=null,ft=vt.priorityLevel;var Xt=$t(vt.expirationTime<=Pt);Pt=i.unstable_now(),typeof Xt=="function"?vt.callback=Xt:vt===s(it)&&_(it),Tt(Pt)}else _(it);vt=s(it)}if(vt!==null)var un=!0;else{var dn=s(st);dn!==null&&Ht(It,dn.startTime-Pt),un=!1}return un}finally{vt=null,ft=wt,pt=!1}}var Bt=!1,nn=null,sn=-1,xt=5,St=-1;function Nt(){return!(i.unstable_now()-St<xt)}function Ct(){if(nn!==null){var qt=i.unstable_now();St=qt;var Pt=!0;try{Pt=nn(!0,qt)}finally{Pt?Vt():(Bt=!1,nn=null)}}else Bt=!1}var Vt;if(typeof Lt=="function")Vt=function(){Lt(Ct)};else if(typeof MessageChannel<"u"){var Kt=new MessageChannel,Gt=Kt.port2;Kt.port1.onmessage=Ct,Vt=function(){Gt.postMessage(null)}}else Vt=function(){Et(Ct,0)};function Ut(qt){nn=qt,Bt||(Bt=!0,Vt())}function Ht(qt,Pt){sn=Et(function(){qt(i.unstable_now())},Pt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(qt){qt.callback=null},i.unstable_continueExecution=function(){ct||pt||(ct=!0,Ut(mt))},i.unstable_forceFrameRate=function(qt){0>qt||125<qt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xt=0<qt?Math.floor(1e3/qt):5},i.unstable_getCurrentPriorityLevel=function(){return ft},i.unstable_getFirstCallbackNode=function(){return s(it)},i.unstable_next=function(qt){switch(ft){case 1:case 2:case 3:var Pt=3;break;default:Pt=ft}var wt=ft;ft=Pt;try{return qt()}finally{ft=wt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(qt,Pt){switch(qt){case 1:case 2:case 3:case 4:case 5:break;default:qt=3}var wt=ft;ft=qt;try{return Pt()}finally{ft=wt}},i.unstable_scheduleCallback=function(qt,Pt,wt){var $t=i.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?$t+wt:$t):wt=$t,qt){case 1:var Xt=-1;break;case 2:Xt=250;break;case 5:Xt=1073741823;break;case 4:Xt=1e4;break;default:Xt=5e3}return Xt=wt+Xt,qt={id:ht++,callback:Pt,priorityLevel:qt,startTime:wt,expirationTime:Xt,sortIndex:-1},wt>$t?(qt.sortIndex=wt,o(st,qt),s(it)===null&&qt===s(st)&&(yt?(Ot(sn),sn=-1):yt=!0,Ht(It,wt-$t))):(qt.sortIndex=Xt,o(it,qt),ct||pt||(ct=!0,Ut(mt))),qt},i.unstable_shouldYield=Nt,i.unstable_wrapCallback=function(qt){var Pt=ft;return function(){var wt=ft;ft=Pt;try{return qt.apply(this,arguments)}finally{ft=wt}}}})(scheduler_production_min);(function(i){i.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,o){ha(i,o),ha(i+"Capture",o)}function ha(i,o){for(ea[i]=o,i=0;i<o.length;i++)da.add(o[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,o,s,_){if(s!==null&&s.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return _?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,o,s,_){if(o===null||typeof o>"u"||pa(i,o,s,_))return!0;if(_)return!1;if(s!==null)switch(s.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$1(i,o,s,_,$,et,tt){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=_,this.attributeNamespace=$,this.mustUseProperty=s,this.propertyName=i,this.type=o,this.sanitizeURL=et,this.removeEmptyString=tt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v$1(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];z$1[o]=new v$1(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v$1(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v$1(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v$1(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v$1(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v$1(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,o,s,_){var $=z$1.hasOwnProperty(o)?z$1[o]:null;($!==null?$.type!==0:_||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,s,$,_)&&(s=null),_||$===null?oa(o)&&(s===null?i.removeAttribute(o):i.setAttribute(o,""+s)):$.mustUseProperty?i[$.propertyName]=s===null?$.type===3?!1:"":s:(o=$.attributeName,_=$.attributeNamespace,s===null?i.removeAttribute(o):($=$.type,s=$===3||$===4&&s===!0?"":""+s,_?i.setAttributeNS(_,o,s):i.setAttribute(o,s))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+i}var Na=!1;function Oa(i,o){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(st){var _=st}Reflect.construct(i,[],o)}else{try{o.call()}catch(st){_=st}i.call(o.prototype)}else{try{throw Error()}catch(st){_=st}i()}}catch(st){if(st&&_&&typeof st.stack=="string"){for(var $=st.stack.split(`
`),et=_.stack.split(`
`),tt=$.length-1,j=et.length-1;1<=tt&&0<=j&&$[tt]!==et[j];)j--;for(;1<=tt&&0<=j;tt--,j--)if($[tt]!==et[j]){if(tt!==1||j!==1)do if(tt--,j--,0>j||$[tt]!==et[j]){var it=`
`+$[tt].replace(" at new "," at ");return i.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",i.displayName)),it}while(1<=tt&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return o=i.displayName||null,o!==null?o:Qa(i.type)||"Memo";case Ha:o=i._payload,i=i._init;try{return Qa(i(o))}catch{}}return null}function Ra(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(i){var o=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),_=""+i[o];if(!i.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var $=s.get,et=s.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return $.call(this)},set:function(tt){_=""+tt,et.call(this,tt)}}),Object.defineProperty(i,o,{enumerable:s.enumerable}),{getValue:function(){return _},setValue:function(tt){_=""+tt},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var s=o.getValue(),_="";return i&&(_=Ta(i)?i.checked?"true":"false":i.value),i=_,i!==s?(o.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,o){var s=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,o){var s=o.defaultValue==null?"":o.defaultValue,_=o.checked!=null?o.checked:o.defaultChecked;s=Sa(o.value!=null?o.value:s),i._wrapperState={initialChecked:_,initialValue:s,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(i,o){o=o.checked,o!=null&&ta(i,"checked",o,!1)}function bb(i,o){ab(i,o);var s=Sa(o.value),_=o.type;if(s!=null)_==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(_==="submit"||_==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?cb(i,o.type,s):o.hasOwnProperty("defaultValue")&&cb(i,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function db(i,o,s){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var _=o.type;if(!(_!=="submit"&&_!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,s||o===i.value||(i.value=o),i.defaultValue=o}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,o,s){(o!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,o,s,_){if(i=i.options,o){o={};for(var $=0;$<s.length;$++)o["$"+s[$]]=!0;for(s=0;s<i.length;s++)$=o.hasOwnProperty("$"+i[s].value),i[s].selected!==$&&(i[s].selected=$),$&&_&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),o=null,$=0;$<i.length;$++){if(i[$].value===s){i[$].selected=!0,_&&(i[$].defaultSelected=!0);return}o!==null||i[$].disabled||(o=i[$])}o!==null&&(o.selected=!0)}}function gb(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,o){var s=o.value;if(s==null){if(s=o.children,o=o.defaultValue,s!=null){if(o!=null)throw Error(p$1(92));if(eb(s)){if(1<s.length)throw Error(p$1(93));s=s[0]}o=s}o==null&&(o=""),s=o}i._wrapperState={initialValue:Sa(s)}}function ib(i,o){var s=Sa(o.value),_=Sa(o.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),o.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),_!=null&&(i.defaultValue=""+_)}function jb(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,s,_,$){MSApp.execUnsafeLocalFunction(function(){return i(o,s,_,$)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ob(i,o){if(o){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=o;return}}i.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),pb[o]=pb[i]})});function rb(i,o,s){return o==null||typeof o=="boolean"||o===""?"":s||typeof o!="number"||o===0||pb.hasOwnProperty(i)&&pb[i]?(""+o).trim():o+"px"}function sb(i,o){i=i.style;for(var s in o)if(o.hasOwnProperty(s)){var _=s.indexOf("--")===0,$=rb(s,o[s],_);s==="float"&&(s="cssFloat"),_?i.setProperty(s,$):i[s]=$}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,o){if(o){if(tb[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$1(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$1(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$1(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$1(62))}}function vb(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p$1(280));var o=i.stateNode;o&&(o=Db(o),yb(i.stateNode,i.type,o))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,o=Ab;if(Ab=zb=null,Bb(i),o)for(i=0;i<o.length;i++)Bb(o[i])}}function Gb(i,o){return i(o)}function Hb(){}var Ib=!1;function Jb(i,o,s){if(Ib)return i(o,s);Ib=!0;try{return Gb(i,o,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,o){var s=i.stateNode;if(s===null)return null;var _=Db(s);if(_===null)return null;s=_[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(i=i.type,_=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!_;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p$1(231,o,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,o,s,_,$,et,tt,j,it){var st=Array.prototype.slice.call(arguments,3);try{o.apply(s,st)}catch(ht){this.onError(ht)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,o,s,_,$,et,tt,j,it){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,o,s,_,$,et,tt,j,it){if(Tb.apply(this,arguments),Ob){if(Ob){var st=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=st)}}function Vb(i){var o=i,s=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(s=o.return),i=o.return;while(i)}return o.tag===3?s:null}function Wb(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p$1(188))}function Yb(i){var o=i.alternate;if(!o){if(o=Vb(i),o===null)throw Error(p$1(188));return o!==i?null:i}for(var s=i,_=o;;){var $=s.return;if($===null)break;var et=$.alternate;if(et===null){if(_=$.return,_!==null){s=_;continue}break}if($.child===et.child){for(et=$.child;et;){if(et===s)return Xb($),i;if(et===_)return Xb($),o;et=et.sibling}throw Error(p$1(188))}if(s.return!==_.return)s=$,_=et;else{for(var tt=!1,j=$.child;j;){if(j===s){tt=!0,s=$,_=et;break}if(j===_){tt=!0,_=$,s=et;break}j=j.sibling}if(!tt){for(j=et.child;j;){if(j===s){tt=!0,s=et,_=$;break}if(j===_){tt=!0,_=et,s=$;break}j=j.sibling}if(!tt)throw Error(p$1(189))}}if(s.alternate!==_)throw Error(p$1(190))}if(s.tag!==3)throw Error(p$1(188));return s.stateNode.current===s?i:o}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=$b(i);if(o!==null)return o;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,o){var s=i.pendingLanes;if(s===0)return 0;var _=0,$=i.suspendedLanes,et=i.pingedLanes,tt=s&268435455;if(tt!==0){var j=tt&~$;j!==0?_=tc(j):(et&=tt,et!==0&&(_=tc(et)))}else tt=s&~$,tt!==0?_=tc(tt):et!==0&&(_=tc(et));if(_===0)return 0;if(o!==0&&o!==_&&!(o&$)&&($=_&-_,et=o&-o,$>=et||$===16&&(et&4194240)!==0))return o;if(_&4&&(_|=s&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=_;0<o;)s=31-oc(o),$=1<<s,_|=i[s],o&=~$;return _}function vc(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,o){for(var s=i.suspendedLanes,_=i.pingedLanes,$=i.expirationTimes,et=i.pendingLanes;0<et;){var tt=31-oc(et),j=1<<tt,it=$[tt];it===-1?(!(j&s)||j&_)&&($[tt]=vc(j,o)):it<=o&&(i.expiredLanes|=j),et&=~j}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var o=[],s=0;31>s;s++)o.push(i);return o}function Ac(i,o,s){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-oc(o),i[o]=s}function Bc(i,o){var s=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var _=i.eventTimes;for(i=i.expirationTimes;0<s;){var $=31-oc(s),et=1<<$;o[$]=0,_[$]=-1,i[$]=-1,s&=~et}}function Cc(i,o){var s=i.entangledLanes|=o;for(i=i.entanglements;s;){var _=31-oc(s),$=1<<_;$&o|i[_]&o&&(i[_]|=o),s&=~$}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,o){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(i,o,s,_,$,et){return i===null||i.nativeEvent!==et?(i={blockedOn:o,domEventName:s,eventSystemFlags:_,nativeEvent:et,targetContainers:[$]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),i):(i.eventSystemFlags|=_,o=i.targetContainers,$!==null&&o.indexOf($)===-1&&o.push($),i)}function Uc(i,o,s,_,$){switch(o){case"focusin":return Lc=Tc(Lc,i,o,s,_,$),!0;case"dragenter":return Mc=Tc(Mc,i,o,s,_,$),!0;case"mouseover":return Nc=Tc(Nc,i,o,s,_,$),!0;case"pointerover":var et=$.pointerId;return Oc.set(et,Tc(Oc.get(et)||null,i,o,s,_,$)),!0;case"gotpointercapture":return et=$.pointerId,Pc.set(et,Tc(Pc.get(et)||null,i,o,s,_,$)),!0}return!1}function Vc(i){var o=Wc(i.target);if(o!==null){var s=Vb(o);if(s!==null){if(o=s.tag,o===13){if(o=Wb(s),o!==null){i.blockedOn=o,Ic(i.priority,function(){Gc(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var s=Yc(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var _=new s.constructor(s.type,s);wb=_,s.target.dispatchEvent(_),wb=null}else return o=Cb(s),o!==null&&Fc(o),i.blockedOn=s,!1;o.shift()}return!0}function Zc(i,o,s){Xc(i)&&s.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,o){i.blockedOn===o&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function o($){return ad($,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var _=Kc[s];_.blockedOn===i&&(_.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(o),Pc.forEach(o),s=0;s<Qc.length;s++)_=Qc[s],_.blockedOn===i&&(_.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(i,o,s,_){var $=C,et=cd.transition;cd.transition=null;try{C=1,fd(i,o,s,_)}finally{C=$,cd.transition=et}}function gd(i,o,s,_){var $=C,et=cd.transition;cd.transition=null;try{C=4,fd(i,o,s,_)}finally{C=$,cd.transition=et}}function fd(i,o,s,_){if(dd){var $=Yc(i,o,s,_);if($===null)hd(i,o,_,id,s),Sc(i,_);else if(Uc($,i,o,s,_))_.stopPropagation();else if(Sc(i,_),o&4&&-1<Rc.indexOf(i)){for(;$!==null;){var et=Cb($);if(et!==null&&Ec(et),et=Yc(i,o,s,_),et===null&&hd(i,o,_,id,s),et===$)break;$=et}$!==null&&_.stopPropagation()}else hd(i,o,_,null,s)}}var id=null;function Yc(i,o,s,_){if(id=null,i=xb(_),i=Wc(i),i!==null)if(o=Vb(i),o===null)i=null;else if(s=o.tag,s===13){if(i=Wb(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,o=ld,s=o.length,_,$="value"in kd?kd.value:kd.textContent,et=$.length;for(i=0;i<s&&o[i]===$[i];i++);var tt=s-i;for(_=1;_<=tt&&o[s-_]===$[et-_];_++);return md=$.slice(i,1<_?1-_:void 0)}function od(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function o(s,_,$,et,tt){this._reactName=s,this._targetInst=$,this.type=_,this.nativeEvent=et,this.target=tt,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(s=i[j],this[j]=s?s(et):et[j]);return this.isDefaultPrevented=(et.defaultPrevented!=null?et.defaultPrevented:et.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Od[i])?!!o[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var o=Md[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(i,o){switch(i){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,o){switch(i){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return i=o.data,i===ee&&fe?null:i;default:return null}}function ke(i,o){if(ie)return i==="compositionend"||!ae&&ge(i,o)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!le[i.type]:o==="textarea"}function ne(i,o,s,_){Eb(_),o=oe(o,"onChange"),0<o.length&&(s=new td("onChange","change",null,s,_),i.push({event:s,listeners:o}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var o=ue(i);if(Wa(o))return i}function ve(i,o){if(i==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,i,xb(i)),Jb(re,o)}}function Ce(i,o,s){i==="focusin"?(Ae(),pe=o,qe=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,o){if(i==="click")return te(o)}function Fe(i,o){if(i==="input"||i==="change")return te(o)}function Ge(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,o){if(He(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var s=Object.keys(i),_=Object.keys(o);if(s.length!==_.length)return!1;for(_=0;_<s.length;_++){var $=s[_];if(!ja.call(o,$)||!He(i[$],o[$]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,o){var s=Je(i);i=0;for(var _;s;){if(s.nodeType===3){if(_=i+s.textContent.length,i<=o&&_>=o)return{node:s,offset:o-i};i=_}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Le(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var i=window,o=Xa();o instanceof i.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)i=o.contentWindow;else break;o=Xa(i.document)}return o}function Ne(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Oe(i){var o=Me(),s=i.focusedElem,_=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(_!==null&&Ne(s)){if(o=_.start,i=_.end,i===void 0&&(i=o),"selectionStart"in s)s.selectionStart=o,s.selectionEnd=Math.min(i,s.value.length);else if(i=(o=s.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var $=s.textContent.length,et=Math.min(_.start,$);_=_.end===void 0?et:Math.min(_.end,$),!i.extend&&et>_&&($=_,_=et,et=$),$=Ke(s,et);var tt=Ke(s,_);$&&tt&&(i.rangeCount!==1||i.anchorNode!==$.node||i.anchorOffset!==$.offset||i.focusNode!==tt.node||i.focusOffset!==tt.offset)&&(o=o.createRange(),o.setStart($.node,$.offset),i.removeAllRanges(),et>_?(i.addRange(o),i.extend(tt.node,tt.offset)):(o.setEnd(tt.node,tt.offset),i.addRange(o)))}}for(o=[],i=s;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<o.length;s++)i=o[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,o,s){var _=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(_)||(_=Qe,"selectionStart"in _&&Ne(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Se&&Ie(Se,_)||(Se=_,_=oe(Re,"onSelect"),0<_.length&&(o=new td("onSelect","select",null,o,s),i.push({event:o,listeners:_}),o.target=Qe)))}function Ve(i,o){var s={};return s[i.toLowerCase()]=o.toLowerCase(),s["Webkit"+i]="webkit"+o,s["Moz"+i]="moz"+o,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var o=We[i],s;for(s in o)if(o.hasOwnProperty(s)&&s in Ye)return Xe[i]=o[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,o){df.set(i,o),fa(o,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,o,s){var _=i.type||"unknown-event";i.currentTarget=s,Ub(_,o,void 0,i),i.currentTarget=null}function se(i,o){o=(o&4)!==0;for(var s=0;s<i.length;s++){var _=i[s],$=_.event;_=_.listeners;e:{var et=void 0;if(o)for(var tt=_.length-1;0<=tt;tt--){var j=_[tt],it=j.instance,st=j.currentTarget;if(j=j.listener,it!==et&&$.isPropagationStopped())break e;nf($,j,st),et=it}else for(tt=0;tt<_.length;tt++){if(j=_[tt],it=j.instance,st=j.currentTarget,j=j.listener,it!==et&&$.isPropagationStopped())break e;nf($,j,st),et=it}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,o){var s=o[of];s===void 0&&(s=o[of]=new Set);var _=i+"__bubble";s.has(_)||(pf(o,i,2,!1),s.add(_))}function qf(i,o,s){var _=0;o&&(_|=4),pf(s,i,_,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(i,o,s,_){switch(jd(o)){case 1:var $=ed;break;case 4:$=gd;break;default:$=fd}s=$.bind(null,o,s,i),$=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||($=!0),_?$!==void 0?i.addEventListener(o,s,{capture:!0,passive:$}):i.addEventListener(o,s,!0):$!==void 0?i.addEventListener(o,s,{passive:$}):i.addEventListener(o,s,!1)}function hd(i,o,s,_,$){var et=_;if(!(o&1)&&!(o&2)&&_!==null)e:for(;;){if(_===null)return;var tt=_.tag;if(tt===3||tt===4){var j=_.stateNode.containerInfo;if(j===$||j.nodeType===8&&j.parentNode===$)break;if(tt===4)for(tt=_.return;tt!==null;){var it=tt.tag;if((it===3||it===4)&&(it=tt.stateNode.containerInfo,it===$||it.nodeType===8&&it.parentNode===$))return;tt=tt.return}for(;j!==null;){if(tt=Wc(j),tt===null)return;if(it=tt.tag,it===5||it===6){_=et=tt;continue e}j=j.parentNode}}_=_.return}Jb(function(){var st=et,ht=xb(s),vt=[];e:{var ft=df.get(i);if(ft!==void 0){var pt=td,ct=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":pt=Rd;break;case"focusin":ct="focus",pt=Fd;break;case"focusout":ct="blur",pt=Fd;break;case"beforeblur":case"afterblur":pt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Vd;break;case $e:case af:case bf:pt=Hd;break;case cf:pt=Xd;break;case"scroll":pt=vd;break;case"wheel":pt=Zd;break;case"copy":case"cut":case"paste":pt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Td}var yt=(o&4)!==0,Et=!yt&&i==="scroll",Ot=yt?ft!==null?ft+"Capture":null:ft;yt=[];for(var Lt=st,Tt;Lt!==null;){Tt=Lt;var It=Tt.stateNode;if(Tt.tag===5&&It!==null&&(Tt=It,Ot!==null&&(It=Kb(Lt,Ot),It!=null&&yt.push(tf(Lt,It,Tt)))),Et)break;Lt=Lt.return}0<yt.length&&(ft=new pt(ft,ct,null,s,ht),vt.push({event:ft,listeners:yt}))}}if(!(o&7)){e:{if(ft=i==="mouseover"||i==="pointerover",pt=i==="mouseout"||i==="pointerout",ft&&s!==wb&&(ct=s.relatedTarget||s.fromElement)&&(Wc(ct)||ct[uf]))break e;if((pt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,pt?(ct=s.relatedTarget||s.toElement,pt=st,ct=ct?Wc(ct):null,ct!==null&&(Et=Vb(ct),ct!==Et||ct.tag!==5&&ct.tag!==6)&&(ct=null)):(pt=null,ct=st),pt!==ct)){if(yt=Bd,It="onMouseLeave",Ot="onMouseEnter",Lt="mouse",(i==="pointerout"||i==="pointerover")&&(yt=Td,It="onPointerLeave",Ot="onPointerEnter",Lt="pointer"),Et=pt==null?ft:ue(pt),Tt=ct==null?ft:ue(ct),ft=new yt(It,Lt+"leave",pt,s,ht),ft.target=Et,ft.relatedTarget=Tt,It=null,Wc(ht)===st&&(yt=new yt(Ot,Lt+"enter",ct,s,ht),yt.target=Tt,yt.relatedTarget=Et,It=yt),Et=It,pt&&ct)t:{for(yt=pt,Ot=ct,Lt=0,Tt=yt;Tt;Tt=vf(Tt))Lt++;for(Tt=0,It=Ot;It;It=vf(It))Tt++;for(;0<Lt-Tt;)yt=vf(yt),Lt--;for(;0<Tt-Lt;)Ot=vf(Ot),Tt--;for(;Lt--;){if(yt===Ot||Ot!==null&&yt===Ot.alternate)break t;yt=vf(yt),Ot=vf(Ot)}yt=null}else yt=null;pt!==null&&wf(vt,ft,pt,yt,!1),ct!==null&&Et!==null&&wf(vt,Et,ct,yt,!0)}}e:{if(ft=st?ue(st):window,pt=ft.nodeName&&ft.nodeName.toLowerCase(),pt==="select"||pt==="input"&&ft.type==="file")var mt=ve;else if(me(ft))if(we)mt=Fe;else{mt=De;var Bt=Ce}else(pt=ft.nodeName)&&pt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(mt=Ee);if(mt&&(mt=mt(i,st))){ne(vt,mt,s,ht);break e}Bt&&Bt(i,ft,st),i==="focusout"&&(Bt=ft._wrapperState)&&Bt.controlled&&ft.type==="number"&&cb(ft,"number",ft.value)}switch(Bt=st?ue(st):window,i){case"focusin":(me(Bt)||Bt.contentEditable==="true")&&(Qe=Bt,Re=st,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(vt,s,ht);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(vt,s,ht)}var nn;if(ae)e:{switch(i){case"compositionstart":var sn="onCompositionStart";break e;case"compositionend":sn="onCompositionEnd";break e;case"compositionupdate":sn="onCompositionUpdate";break e}sn=void 0}else ie?ge(i,s)&&(sn="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(sn="onCompositionStart");sn&&(de&&s.locale!=="ko"&&(ie||sn!=="onCompositionStart"?sn==="onCompositionEnd"&&ie&&(nn=nd()):(kd=ht,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Bt=oe(st,sn),0<Bt.length&&(sn=new Ld(sn,i,null,s,ht),vt.push({event:sn,listeners:Bt}),nn?sn.data=nn:(nn=he(s),nn!==null&&(sn.data=nn)))),(nn=ce?je(i,s):ke(i,s))&&(st=oe(st,"onBeforeInput"),0<st.length&&(ht=new Ld("onBeforeInput","beforeinput",null,s,ht),vt.push({event:ht,listeners:st}),ht.data=nn))}se(vt,o)})}function tf(i,o,s){return{instance:i,listener:o,currentTarget:s}}function oe(i,o){for(var s=o+"Capture",_=[];i!==null;){var $=i,et=$.stateNode;$.tag===5&&et!==null&&($=et,et=Kb(i,s),et!=null&&_.unshift(tf(i,et,$)),et=Kb(i,o),et!=null&&_.push(tf(i,et,$))),i=i.return}return _}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,o,s,_,$){for(var et=o._reactName,tt=[];s!==null&&s!==_;){var j=s,it=j.alternate,st=j.stateNode;if(it!==null&&it===_)break;j.tag===5&&st!==null&&(j=st,$?(it=Kb(s,et),it!=null&&tt.unshift(tf(s,it,j))):$||(it=Kb(s,et),it!=null&&tt.push(tf(s,it,j)))),s=s.return}tt.length!==0&&i.push({event:o,listeners:tt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,o,s){if(o=zf(o),zf(i)!==o&&s)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,o){var s=o,_=0;do{var $=s.nextSibling;if(i.removeChild(s),$&&$.nodeType===8)if(s=$.data,s==="/$"){if(_===0){i.removeChild($),bd(o);return}_--}else s!=="$"&&s!=="$?"&&s!=="$!"||_++;s=$}while(s);bd(o)}function Lf(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return i;o--}else s==="/$"&&o++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var o=i[Of];if(o)return o;for(var s=i.parentNode;s;){if(o=s[uf]||s[Of]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return o}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p$1(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,o){Tf++,Sf[Tf]=i.current,i.current=o}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,o){var s=i.type.contextTypes;if(!s)return Vf;var _=i.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===o)return _.__reactInternalMemoizedMaskedChildContext;var $={},et;for(et in s)$[et]=o[et];return _&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=$),$}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H)}function ag(i,o,s){if(H.current!==Vf)throw Error(p$1(168));G(H,o),G(Wf,s)}function bg(i,o,s){var _=i.stateNode;if(o=o.childContextTypes,typeof _.getChildContext!="function")return s;_=_.getChildContext();for(var $ in _)if(!($ in o))throw Error(p$1(108,Ra(i)||"Unknown",$));return A$1({},s,_)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,o,s){var _=i.stateNode;if(!_)throw Error(p$1(169));s?(i=bg(i,o,Xf),_.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H),G(H,i)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,o=C;try{var s=eg;for(C=1;i<s.length;i++){var _=s[i];do _=_(!0);while(_!==null)}eg=null,fg=!1}catch($){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),$}finally{C=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,o){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=o}function ug(i,o,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var _=rg;i=sg;var $=32-oc(_)-1;_&=~(1<<$),s+=1;var et=32-oc(o)+$;if(30<et){var tt=$-$%5;et=(_&(1<<tt)-1).toString(32),_>>=tt,$-=tt,rg=1<<32-oc(o)+$|s<<$|_,sg=et+i}else rg=1<<et|s<<$|_,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,o){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=o,s.return=i,o=i.deletions,o===null?(i.deletions=[s],i.flags|=16):o.push(s)}function Cg(i,o){switch(i.tag){case 5:var s=i.type;return o=o.nodeType!==1||s.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,xg=i,yg=Lf(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,xg=i,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:o,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=o,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var o=yg;if(o){var s=o;if(!Cg(i,o)){if(Dg(i))throw Error(p$1(418));o=Lf(s.nextSibling);var _=xg;o&&Cg(i,o)?Ag(_,s):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p$1(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ef(i.type,i.memoizedProps)),o&&(o=yg)){if(Dg(i))throw Hg(),Error(p$1(418));for(;o;)Ag(i,o),o=Lf(o.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p$1(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(o===0){yg=Lf(i.nextSibling);break e}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(i,o){if(i&&i.defaultProps){o=A$1({},o),i=i.defaultProps;for(var s in i)o[s]===void 0&&(o[s]=i[s]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var o=Mg.current;E(Mg),i._currentValue=o}function Sg(i,o,s){for(;i!==null;){var _=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,_!==null&&(_.childLanes|=o)):_!==null&&(_.childLanes&o)!==o&&(_.childLanes|=o),i===s)break;i=i.return}}function Tg(i,o){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ug=!0),i.firstContext=null)}function Vg(i){var o=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$1(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return o}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,o,s,_){var $=o.interleaved;return $===null?(s.next=s,Xg(o)):(s.next=$.next,$.next=s),o.interleaved=s,Zg(i,_)}function Zg(i,o){i.lanes|=o;var s=i.alternate;for(s!==null&&(s.lanes|=o),s=i,i=i.return;i!==null;)i.childLanes|=o,s=i.alternate,s!==null&&(s.childLanes|=o),s=i,i=i.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(i,o,s){var _=i.updateQueue;if(_===null)return null;if(_=_.shared,K&2){var $=_.pending;return $===null?o.next=o:(o.next=$.next,$.next=o),_.pending=o,Zg(i,s)}return $=_.interleaved,$===null?(o.next=o,Xg(_)):(o.next=$.next,$.next=o),_.interleaved=o,Zg(i,s)}function eh(i,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194240)!==0)){var _=o.lanes;_&=i.pendingLanes,s|=_,o.lanes=s,Cc(i,s)}}function fh(i,o){var s=i.updateQueue,_=i.alternate;if(_!==null&&(_=_.updateQueue,s===_)){var $=null,et=null;if(s=s.firstBaseUpdate,s!==null){do{var tt={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};et===null?$=et=tt:et=et.next=tt,s=s.next}while(s!==null);et===null?$=et=o:et=et.next=o}else $=et=o;s={baseState:_.baseState,firstBaseUpdate:$,lastBaseUpdate:et,shared:_.shared,effects:_.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=o:i.next=o,s.lastBaseUpdate=o}function gh(i,o,s,_){var $=i.updateQueue;$g=!1;var et=$.firstBaseUpdate,tt=$.lastBaseUpdate,j=$.shared.pending;if(j!==null){$.shared.pending=null;var it=j,st=it.next;it.next=null,tt===null?et=st:tt.next=st,tt=it;var ht=i.alternate;ht!==null&&(ht=ht.updateQueue,j=ht.lastBaseUpdate,j!==tt&&(j===null?ht.firstBaseUpdate=st:j.next=st,ht.lastBaseUpdate=it))}if(et!==null){var vt=$.baseState;tt=0,ht=st=it=null,j=et;do{var ft=j.lane,pt=j.eventTime;if((_&ft)===ft){ht!==null&&(ht=ht.next={eventTime:pt,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ct=i,yt=j;switch(ft=o,pt=s,yt.tag){case 1:if(ct=yt.payload,typeof ct=="function"){vt=ct.call(pt,vt,ft);break e}vt=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=yt.payload,ft=typeof ct=="function"?ct.call(pt,vt,ft):ct,ft==null)break e;vt=A$1({},vt,ft);break e;case 2:$g=!0}}j.callback!==null&&j.lane!==0&&(i.flags|=64,ft=$.effects,ft===null?$.effects=[j]:ft.push(j))}else pt={eventTime:pt,lane:ft,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ht===null?(st=ht=pt,it=vt):ht=ht.next=pt,tt|=ft;if(j=j.next,j===null){if(j=$.shared.pending,j===null)break;ft=j,j=ft.next,ft.next=null,$.lastBaseUpdate=ft,$.shared.pending=null}}while(1);if(ht===null&&(it=vt),$.baseState=it,$.firstBaseUpdate=st,$.lastBaseUpdate=ht,o=$.shared.interleaved,o!==null){$=o;do tt|=$.lane,$=$.next;while($!==o)}else et===null&&($.shared.lanes=0);hh|=tt,i.lanes=tt,i.memoizedState=vt}}function ih(i,o,s){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var _=i[o],$=_.callback;if($!==null){if(_.callback=null,_=s,typeof $!="function")throw Error(p$1(191,$));$.call(_)}}}var jh=new aa.Component().refs;function kh(i,o,s,_){o=i.memoizedState,s=s(_,o),s=s==null?o:A$1({},o,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,o,s){i=i._reactInternals;var _=L(),$=lh(i),et=ch(_,$);et.payload=o,s!=null&&(et.callback=s),o=dh(i,et,$),o!==null&&(mh(o,i,$,_),eh(o,i,$))},enqueueReplaceState:function(i,o,s){i=i._reactInternals;var _=L(),$=lh(i),et=ch(_,$);et.tag=1,et.payload=o,s!=null&&(et.callback=s),o=dh(i,et,$),o!==null&&(mh(o,i,$,_),eh(o,i,$))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var s=L(),_=lh(i),$=ch(s,_);$.tag=2,o!=null&&($.callback=o),o=dh(i,$,_),o!==null&&(mh(o,i,_,s),eh(o,i,_))}};function oh(i,o,s,_,$,et,tt){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(_,et,tt):o.prototype&&o.prototype.isPureReactComponent?!Ie(s,_)||!Ie($,et):!0}function ph(i,o,s){var _=!1,$=Vf,et=o.contextType;return typeof et=="object"&&et!==null?et=Vg(et):($=Zf(o)?Xf:H.current,_=o.contextTypes,et=(_=_!=null)?Yf(i,$):Vf),o=new o(s,et),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,i.stateNode=o,o._reactInternals=i,_&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=$,i.__reactInternalMemoizedMaskedChildContext=et),o}function qh(i,o,s,_){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,_),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,_),o.state!==i&&nh.enqueueReplaceState(o,o.state,null)}function rh(i,o,s,_){var $=i.stateNode;$.props=s,$.state=i.memoizedState,$.refs=jh,ah(i);var et=o.contextType;typeof et=="object"&&et!==null?$.context=Vg(et):(et=Zf(o)?Xf:H.current,$.context=Yf(i,et)),$.state=i.memoizedState,et=o.getDerivedStateFromProps,typeof et=="function"&&(kh(i,o,et,s),$.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(o=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),o!==$.state&&nh.enqueueReplaceState($,$.state,null),gh(i,s,$,_),$.state=i.memoizedState),typeof $.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,o,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$1(309));var _=s.stateNode}if(!_)throw Error(p$1(147,i));var $=_,et=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===et?o.ref:(o=function(tt){var j=$.refs;j===jh&&(j=$.refs={}),tt===null?delete j[et]:j[et]=tt},o._stringRef=et,o)}if(typeof i!="string")throw Error(p$1(284));if(!s._owner)throw Error(p$1(290,i))}return i}function th(i,o){throw i=Object.prototype.toString.call(o),Error(p$1(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function uh(i){var o=i._init;return o(i._payload)}function vh(i){function o(Ot,Lt){if(i){var Tt=Ot.deletions;Tt===null?(Ot.deletions=[Lt],Ot.flags|=16):Tt.push(Lt)}}function s(Ot,Lt){if(!i)return null;for(;Lt!==null;)o(Ot,Lt),Lt=Lt.sibling;return null}function _(Ot,Lt){for(Ot=new Map;Lt!==null;)Lt.key!==null?Ot.set(Lt.key,Lt):Ot.set(Lt.index,Lt),Lt=Lt.sibling;return Ot}function $(Ot,Lt){return Ot=wh(Ot,Lt),Ot.index=0,Ot.sibling=null,Ot}function et(Ot,Lt,Tt){return Ot.index=Tt,i?(Tt=Ot.alternate,Tt!==null?(Tt=Tt.index,Tt<Lt?(Ot.flags|=2,Lt):Tt):(Ot.flags|=2,Lt)):(Ot.flags|=1048576,Lt)}function tt(Ot){return i&&Ot.alternate===null&&(Ot.flags|=2),Ot}function j(Ot,Lt,Tt,It){return Lt===null||Lt.tag!==6?(Lt=xh(Tt,Ot.mode,It),Lt.return=Ot,Lt):(Lt=$(Lt,Tt),Lt.return=Ot,Lt)}function it(Ot,Lt,Tt,It){var mt=Tt.type;return mt===ya?ht(Ot,Lt,Tt.props.children,It,Tt.key):Lt!==null&&(Lt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===Lt.type)?(It=$(Lt,Tt.props),It.ref=sh(Ot,Lt,Tt),It.return=Ot,It):(It=yh(Tt.type,Tt.key,Tt.props,null,Ot.mode,It),It.ref=sh(Ot,Lt,Tt),It.return=Ot,It)}function st(Ot,Lt,Tt,It){return Lt===null||Lt.tag!==4||Lt.stateNode.containerInfo!==Tt.containerInfo||Lt.stateNode.implementation!==Tt.implementation?(Lt=zh(Tt,Ot.mode,It),Lt.return=Ot,Lt):(Lt=$(Lt,Tt.children||[]),Lt.return=Ot,Lt)}function ht(Ot,Lt,Tt,It,mt){return Lt===null||Lt.tag!==7?(Lt=Ah(Tt,Ot.mode,It,mt),Lt.return=Ot,Lt):(Lt=$(Lt,Tt),Lt.return=Ot,Lt)}function vt(Ot,Lt,Tt){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return Lt=xh(""+Lt,Ot.mode,Tt),Lt.return=Ot,Lt;if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case va:return Tt=yh(Lt.type,Lt.key,Lt.props,null,Ot.mode,Tt),Tt.ref=sh(Ot,null,Lt),Tt.return=Ot,Tt;case wa:return Lt=zh(Lt,Ot.mode,Tt),Lt.return=Ot,Lt;case Ha:var It=Lt._init;return vt(Ot,It(Lt._payload),Tt)}if(eb(Lt)||Ka(Lt))return Lt=Ah(Lt,Ot.mode,Tt,null),Lt.return=Ot,Lt;th(Ot,Lt)}return null}function ft(Ot,Lt,Tt,It){var mt=Lt!==null?Lt.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return mt!==null?null:j(Ot,Lt,""+Tt,It);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:return Tt.key===mt?it(Ot,Lt,Tt,It):null;case wa:return Tt.key===mt?st(Ot,Lt,Tt,It):null;case Ha:return mt=Tt._init,ft(Ot,Lt,mt(Tt._payload),It)}if(eb(Tt)||Ka(Tt))return mt!==null?null:ht(Ot,Lt,Tt,It,null);th(Ot,Tt)}return null}function pt(Ot,Lt,Tt,It,mt){if(typeof It=="string"&&It!==""||typeof It=="number")return Ot=Ot.get(Tt)||null,j(Lt,Ot,""+It,mt);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case va:return Ot=Ot.get(It.key===null?Tt:It.key)||null,it(Lt,Ot,It,mt);case wa:return Ot=Ot.get(It.key===null?Tt:It.key)||null,st(Lt,Ot,It,mt);case Ha:var Bt=It._init;return pt(Ot,Lt,Tt,Bt(It._payload),mt)}if(eb(It)||Ka(It))return Ot=Ot.get(Tt)||null,ht(Lt,Ot,It,mt,null);th(Lt,It)}return null}function ct(Ot,Lt,Tt,It){for(var mt=null,Bt=null,nn=Lt,sn=Lt=0,xt=null;nn!==null&&sn<Tt.length;sn++){nn.index>sn?(xt=nn,nn=null):xt=nn.sibling;var St=ft(Ot,nn,Tt[sn],It);if(St===null){nn===null&&(nn=xt);break}i&&nn&&St.alternate===null&&o(Ot,nn),Lt=et(St,Lt,sn),Bt===null?mt=St:Bt.sibling=St,Bt=St,nn=xt}if(sn===Tt.length)return s(Ot,nn),I&&tg(Ot,sn),mt;if(nn===null){for(;sn<Tt.length;sn++)nn=vt(Ot,Tt[sn],It),nn!==null&&(Lt=et(nn,Lt,sn),Bt===null?mt=nn:Bt.sibling=nn,Bt=nn);return I&&tg(Ot,sn),mt}for(nn=_(Ot,nn);sn<Tt.length;sn++)xt=pt(nn,Ot,sn,Tt[sn],It),xt!==null&&(i&&xt.alternate!==null&&nn.delete(xt.key===null?sn:xt.key),Lt=et(xt,Lt,sn),Bt===null?mt=xt:Bt.sibling=xt,Bt=xt);return i&&nn.forEach(function(Nt){return o(Ot,Nt)}),I&&tg(Ot,sn),mt}function yt(Ot,Lt,Tt,It){var mt=Ka(Tt);if(typeof mt!="function")throw Error(p$1(150));if(Tt=mt.call(Tt),Tt==null)throw Error(p$1(151));for(var Bt=mt=null,nn=Lt,sn=Lt=0,xt=null,St=Tt.next();nn!==null&&!St.done;sn++,St=Tt.next()){nn.index>sn?(xt=nn,nn=null):xt=nn.sibling;var Nt=ft(Ot,nn,St.value,It);if(Nt===null){nn===null&&(nn=xt);break}i&&nn&&Nt.alternate===null&&o(Ot,nn),Lt=et(Nt,Lt,sn),Bt===null?mt=Nt:Bt.sibling=Nt,Bt=Nt,nn=xt}if(St.done)return s(Ot,nn),I&&tg(Ot,sn),mt;if(nn===null){for(;!St.done;sn++,St=Tt.next())St=vt(Ot,St.value,It),St!==null&&(Lt=et(St,Lt,sn),Bt===null?mt=St:Bt.sibling=St,Bt=St);return I&&tg(Ot,sn),mt}for(nn=_(Ot,nn);!St.done;sn++,St=Tt.next())St=pt(nn,Ot,sn,St.value,It),St!==null&&(i&&St.alternate!==null&&nn.delete(St.key===null?sn:St.key),Lt=et(St,Lt,sn),Bt===null?mt=St:Bt.sibling=St,Bt=St);return i&&nn.forEach(function(Ct){return o(Ot,Ct)}),I&&tg(Ot,sn),mt}function Et(Ot,Lt,Tt,It){if(typeof Tt=="object"&&Tt!==null&&Tt.type===ya&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:e:{for(var mt=Tt.key,Bt=Lt;Bt!==null;){if(Bt.key===mt){if(mt=Tt.type,mt===ya){if(Bt.tag===7){s(Ot,Bt.sibling),Lt=$(Bt,Tt.props.children),Lt.return=Ot,Ot=Lt;break e}}else if(Bt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===Bt.type){s(Ot,Bt.sibling),Lt=$(Bt,Tt.props),Lt.ref=sh(Ot,Bt,Tt),Lt.return=Ot,Ot=Lt;break e}s(Ot,Bt);break}else o(Ot,Bt);Bt=Bt.sibling}Tt.type===ya?(Lt=Ah(Tt.props.children,Ot.mode,It,Tt.key),Lt.return=Ot,Ot=Lt):(It=yh(Tt.type,Tt.key,Tt.props,null,Ot.mode,It),It.ref=sh(Ot,Lt,Tt),It.return=Ot,Ot=It)}return tt(Ot);case wa:e:{for(Bt=Tt.key;Lt!==null;){if(Lt.key===Bt)if(Lt.tag===4&&Lt.stateNode.containerInfo===Tt.containerInfo&&Lt.stateNode.implementation===Tt.implementation){s(Ot,Lt.sibling),Lt=$(Lt,Tt.children||[]),Lt.return=Ot,Ot=Lt;break e}else{s(Ot,Lt);break}else o(Ot,Lt);Lt=Lt.sibling}Lt=zh(Tt,Ot.mode,It),Lt.return=Ot,Ot=Lt}return tt(Ot);case Ha:return Bt=Tt._init,Et(Ot,Lt,Bt(Tt._payload),It)}if(eb(Tt))return ct(Ot,Lt,Tt,It);if(Ka(Tt))return yt(Ot,Lt,Tt,It);th(Ot,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"?(Tt=""+Tt,Lt!==null&&Lt.tag===6?(s(Ot,Lt.sibling),Lt=$(Lt,Tt),Lt.return=Ot,Ot=Lt):(s(Ot,Lt),Lt=xh(Tt,Ot.mode,It),Lt.return=Ot,Ot=Lt),tt(Ot)):s(Ot,Lt)}return Et}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p$1(174));return i}function Ih(i,o){switch(G(Gh,o),G(Fh,i),G(Eh,Dh),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=lb(o,i)}E(Eh),G(Eh,o)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(i){Hh(Gh.current);var o=Hh(Eh.current),s=lb(o,i.type);o!==s&&(G(Fh,i),G(Eh,s))}function Lh(i){Fh.current===i&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(i){for(var o=i;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$1(321))}function Wh(i,o){if(o===null)return!1;for(var s=0;s<o.length&&s<i.length;s++)if(!He(i[s],o[s]))return!1;return!0}function Xh(i,o,s,_,$,et){if(Rh=et,N=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=s(_,$),Th){et=0;do{if(Th=!1,Uh=0,25<=et)throw Error(p$1(301));et+=1,P=O=null,o.updateQueue=null,Ph.current=$h,i=s(_,$)}while(Th)}if(Ph.current=ai,o=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,o)throw Error(p$1(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=i:P=P.next=i,P}function di(){if(O===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O.next;var o=P===null?N.memoizedState:P.next;if(o!==null)P=o,O=i;else{if(i===null)throw Error(p$1(310));O=i,i={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=i:P=P.next=i}return P}function ei(i,o){return typeof o=="function"?o(i):o}function fi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var _=O,$=_.baseQueue,et=s.pending;if(et!==null){if($!==null){var tt=$.next;$.next=et.next,et.next=tt}_.baseQueue=$=et,s.pending=null}if($!==null){et=$.next,_=_.baseState;var j=tt=null,it=null,st=et;do{var ht=st.lane;if((Rh&ht)===ht)it!==null&&(it=it.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),_=st.hasEagerState?st.eagerState:i(_,st.action);else{var vt={lane:ht,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};it===null?(j=it=vt,tt=_):it=it.next=vt,N.lanes|=ht,hh|=ht}st=st.next}while(st!==null&&st!==et);it===null?tt=_:it.next=j,He(_,o.memoizedState)||(Ug=!0),o.memoizedState=_,o.baseState=tt,o.baseQueue=it,s.lastRenderedState=_}if(i=s.interleaved,i!==null){$=i;do et=$.lane,N.lanes|=et,hh|=et,$=$.next;while($!==i)}else $===null&&(s.lanes=0);return[o.memoizedState,s.dispatch]}function gi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var _=s.dispatch,$=s.pending,et=o.memoizedState;if($!==null){s.pending=null;var tt=$=$.next;do et=i(et,tt.action),tt=tt.next;while(tt!==$);He(et,o.memoizedState)||(Ug=!0),o.memoizedState=et,o.baseQueue===null&&(o.baseState=et),s.lastRenderedState=et}return[et,_]}function hi(){}function ii(i,o){var s=N,_=di(),$=o(),et=!He(_.memoizedState,$);if(et&&(_.memoizedState=$,Ug=!0),_=_.queue,ji(ki.bind(null,s,_,i),[i]),_.getSnapshot!==o||et||P!==null&&P.memoizedState.tag&1){if(s.flags|=2048,li(9,mi.bind(null,s,_,$,o),void 0,null),R===null)throw Error(p$1(349));Rh&30||ni(s,o,$)}return $}function ni(i,o,s){i.flags|=16384,i={getSnapshot:o,value:s},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.stores=[i]):(s=o.stores,s===null?o.stores=[i]:s.push(i))}function mi(i,o,s,_){o.value=s,o.getSnapshot=_,oi(o)&&pi(i)}function ki(i,o,s){return s(function(){oi(o)&&pi(i)})}function oi(i){var o=i.getSnapshot;i=i.value;try{var s=o();return!He(i,s)}catch{return!0}}function pi(i){var o=Zg(i,1);o!==null&&mh(o,i,1,-1)}function qi(i){var o=ci();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},o.queue=i,i=i.dispatch=ri.bind(null,N,i),[o.memoizedState,i]}function li(i,o,s,_){return i={tag:i,create:o,destroy:s,deps:_,next:null},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.lastEffect=i.next=i):(s=o.lastEffect,s===null?o.lastEffect=i.next=i:(_=s.next,s.next=i,i.next=_,o.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,o,s,_){var $=ci();N.flags|=i,$.memoizedState=li(1|o,s,void 0,_===void 0?null:_)}function ui(i,o,s,_){var $=di();_=_===void 0?null:_;var et=void 0;if(O!==null){var tt=O.memoizedState;if(et=tt.destroy,_!==null&&Wh(_,tt.deps)){$.memoizedState=li(o,s,et,_);return}}N.flags|=i,$.memoizedState=li(1|o,s,et,_)}function vi(i,o){return ti(8390656,8,i,o)}function ji(i,o){return ui(2048,8,i,o)}function wi(i,o){return ui(4,2,i,o)}function xi(i,o){return ui(4,4,i,o)}function yi(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function zi(i,o,s){return s=s!=null?s.concat([i]):null,ui(4,4,yi.bind(null,o,i),s)}function Ai(){}function Bi(i,o){var s=di();o=o===void 0?null:o;var _=s.memoizedState;return _!==null&&o!==null&&Wh(o,_[1])?_[0]:(s.memoizedState=[i,o],i)}function Ci(i,o){var s=di();o=o===void 0?null:o;var _=s.memoizedState;return _!==null&&o!==null&&Wh(o,_[1])?_[0]:(i=i(),s.memoizedState=[i,o],i)}function Di(i,o,s){return Rh&21?(He(s,o)||(s=yc(),N.lanes|=s,hh|=s,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=s)}function Ei(i,o){var s=C;C=s!==0&&4>s?s:4,i(!0);var _=Qh.transition;Qh.transition={};try{i(!1),o()}finally{C=s,Qh.transition=_}}function Fi(){return di().memoizedState}function Gi(i,o,s){var _=lh(i);if(s={lane:_,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(o,s);else if(s=Yg(i,o,s,_),s!==null){var $=L();mh(s,i,_,$),Ji(s,o,_)}}function ri(i,o,s){var _=lh(i),$={lane:_,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(o,$);else{var et=i.alternate;if(i.lanes===0&&(et===null||et.lanes===0)&&(et=o.lastRenderedReducer,et!==null))try{var tt=o.lastRenderedState,j=et(tt,s);if($.hasEagerState=!0,$.eagerState=j,He(j,tt)){var it=o.interleaved;it===null?($.next=$,Xg(o)):($.next=it.next,it.next=$),o.interleaved=$;return}}catch{}finally{}s=Yg(i,o,$,_),s!==null&&($=L(),mh(s,i,_,$),Ji(s,o,_))}}function Hi(i){var o=i.alternate;return i===N||o!==null&&o===N}function Ii(i,o){Th=Sh=!0;var s=i.pending;s===null?o.next=o:(o.next=s.next,s.next=o),i.pending=o}function Ji(i,o,s){if(s&4194240){var _=o.lanes;_&=i.pendingLanes,s|=_,o.lanes=s,Cc(i,s)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,o){return ci().memoizedState=[i,o===void 0?null:o],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,o,s){return s=s!=null?s.concat([i]):null,ti(4194308,4,yi.bind(null,o,i),s)},useLayoutEffect:function(i,o){return ti(4194308,4,i,o)},useInsertionEffect:function(i,o){return ti(4,2,i,o)},useMemo:function(i,o){var s=ci();return o=o===void 0?null:o,i=i(),s.memoizedState=[i,o],i},useReducer:function(i,o,s){var _=ci();return o=s!==void 0?s(o):o,_.memoizedState=_.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},_.queue=i,i=i.dispatch=Gi.bind(null,N,i),[_.memoizedState,i]},useRef:function(i){var o=ci();return i={current:i},o.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),o=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,s){var _=N,$=ci();if(I){if(s===void 0)throw Error(p$1(407));s=s()}else{if(s=o(),R===null)throw Error(p$1(349));Rh&30||ni(_,o,s)}$.memoizedState=s;var et={value:s,getSnapshot:o};return $.queue=et,vi(ki.bind(null,_,et,i),[i]),_.flags|=2048,li(9,mi.bind(null,_,et,s,o),void 0,null),s},useId:function(){var i=ci(),o=R.identifierPrefix;if(I){var s=sg,_=rg;s=(_&~(1<<32-oc(_)-1)).toString(32)+s,o=":"+o+"R"+s,s=Uh++,0<s&&(o+="H"+s.toString(32)),o+=":"}else s=Vh++,o=":"+o+"r"+s.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return Di(o,O.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return O===null?o.memoizedState=i:Di(o,O.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,o){try{var s="",_=o;do s+=Pa(_),_=_.return;while(_);var $=s}catch(et){$=`
Error generating stack: `+et.message+`
`+et.stack}return{value:i,source:o,stack:$,digest:null}}function Li(i,o,s){return{value:i,source:null,stack:s??null,digest:o??null}}function Mi(i,o){try{console.error(o.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,o,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var _=o.value;return s.callback=function(){Pi||(Pi=!0,Qi=_),Mi(i,o)},s}function Ri(i,o,s){s=ch(-1,s),s.tag=3;var _=i.type.getDerivedStateFromError;if(typeof _=="function"){var $=o.value;s.payload=function(){return _($)},s.callback=function(){Mi(i,o)}}var et=i.stateNode;return et!==null&&typeof et.componentDidCatch=="function"&&(s.callback=function(){Mi(i,o),typeof _!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var tt=o.stack;this.componentDidCatch(o.value,{componentStack:tt!==null?tt:""})}),s}function Ti(i,o,s){var _=i.pingCache;if(_===null){_=i.pingCache=new Ni;var $=new Set;_.set(o,$)}else $=_.get(o),$===void 0&&($=new Set,_.set(o,$));$.has(s)||($.add(s),i=Ui.bind(null,i,o,s),o.then(i,i))}function Vi(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Wi(i,o,s,_,$){return i.mode&1?(i.flags|=65536,i.lanes=$,i):(i===o?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(o=ch(-1,1),o.tag=2,dh(s,o,1))),s.lanes|=1),i)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(i,o,s,_){o.child=i===null?Ch(o,null,s,_):Bh(o,i.child,s,_)}function Zi(i,o,s,_,$){s=s.render;var et=o.ref;return Tg(o,$),_=Xh(i,o,s,_,et,$),s=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~$,$i(i,o,$)):(I&&s&&vg(o),o.flags|=1,Yi(i,o,_,$),o.child)}function aj(i,o,s,_,$){if(i===null){var et=s.type;return typeof et=="function"&&!bj(et)&&et.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(o.tag=15,o.type=et,cj(i,o,et,_,$)):(i=yh(s.type,null,_,o,o.mode,$),i.ref=o.ref,i.return=o,o.child=i)}if(et=i.child,!(i.lanes&$)){var tt=et.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(tt,_)&&i.ref===o.ref)return $i(i,o,$)}return o.flags|=1,i=wh(et,_),i.ref=o.ref,i.return=o,o.child=i}function cj(i,o,s,_,$){if(i!==null){var et=i.memoizedProps;if(Ie(et,_)&&i.ref===o.ref)if(Ug=!1,o.pendingProps=_=et,(i.lanes&$)!==0)i.flags&131072&&(Ug=!0);else return o.lanes=i.lanes,$i(i,o,$)}return dj(i,o,s,_,$)}function ej(i,o,s){var _=o.pendingProps,$=_.children,et=i!==null?i.memoizedState:null;if(_.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=s;else{if(!(s&1073741824))return i=et!==null?et.baseLanes|s:s,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,G(fj,gj),gj|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=et!==null?et.baseLanes:s,G(fj,gj),gj|=_}else et!==null?(_=et.baseLanes|s,o.memoizedState=null):_=s,G(fj,gj),gj|=_;return Yi(i,o,$,s),o.child}function hj(i,o){var s=o.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(o.flags|=512,o.flags|=2097152)}function dj(i,o,s,_,$){var et=Zf(s)?Xf:H.current;return et=Yf(o,et),Tg(o,$),s=Xh(i,o,s,_,et,$),_=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~$,$i(i,o,$)):(I&&_&&vg(o),o.flags|=1,Yi(i,o,s,$),o.child)}function ij(i,o,s,_,$){if(Zf(s)){var et=!0;cg(o)}else et=!1;if(Tg(o,$),o.stateNode===null)jj(i,o),ph(o,s,_),rh(o,s,_,$),_=!0;else if(i===null){var tt=o.stateNode,j=o.memoizedProps;tt.props=j;var it=tt.context,st=s.contextType;typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(s)?Xf:H.current,st=Yf(o,st));var ht=s.getDerivedStateFromProps,vt=typeof ht=="function"||typeof tt.getSnapshotBeforeUpdate=="function";vt||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(j!==_||it!==st)&&qh(o,tt,_,st),$g=!1;var ft=o.memoizedState;tt.state=ft,gh(o,_,tt,$),it=o.memoizedState,j!==_||ft!==it||Wf.current||$g?(typeof ht=="function"&&(kh(o,s,ht,_),it=o.memoizedState),(j=$g||oh(o,s,j,_,ft,it,st))?(vt||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(o.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=_,o.memoizedState=it),tt.props=_,tt.state=it,tt.context=st,_=j):(typeof tt.componentDidMount=="function"&&(o.flags|=4194308),_=!1)}else{tt=o.stateNode,bh(i,o),j=o.memoizedProps,st=o.type===o.elementType?j:Lg(o.type,j),tt.props=st,vt=o.pendingProps,ft=tt.context,it=s.contextType,typeof it=="object"&&it!==null?it=Vg(it):(it=Zf(s)?Xf:H.current,it=Yf(o,it));var pt=s.getDerivedStateFromProps;(ht=typeof pt=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(j!==vt||ft!==it)&&qh(o,tt,_,it),$g=!1,ft=o.memoizedState,tt.state=ft,gh(o,_,tt,$);var ct=o.memoizedState;j!==vt||ft!==ct||Wf.current||$g?(typeof pt=="function"&&(kh(o,s,pt,_),ct=o.memoizedState),(st=$g||oh(o,s,st,_,ft,ct,it)||!1)?(ht||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(_,ct,it),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(_,ct,it)),typeof tt.componentDidUpdate=="function"&&(o.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof tt.componentDidUpdate!="function"||j===i.memoizedProps&&ft===i.memoizedState||(o.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&ft===i.memoizedState||(o.flags|=1024),o.memoizedProps=_,o.memoizedState=ct),tt.props=_,tt.state=ct,tt.context=it,_=st):(typeof tt.componentDidUpdate!="function"||j===i.memoizedProps&&ft===i.memoizedState||(o.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&ft===i.memoizedState||(o.flags|=1024),_=!1)}return kj(i,o,s,_,et,$)}function kj(i,o,s,_,$,et){hj(i,o);var tt=(o.flags&128)!==0;if(!_&&!tt)return $&&dg(o,s,!1),$i(i,o,et);_=o.stateNode,Xi.current=o;var j=tt&&typeof s.getDerivedStateFromError!="function"?null:_.render();return o.flags|=1,i!==null&&tt?(o.child=Bh(o,i.child,null,et),o.child=Bh(o,null,j,et)):Yi(i,o,j,et),o.memoizedState=_.state,$&&dg(o,s,!0),o.child}function lj(i){var o=i.stateNode;o.pendingContext?ag(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(i,o.context,!1),Ih(i,o.containerInfo)}function mj(i,o,s,_,$){return Ig(),Jg($),o.flags|=256,Yi(i,o,s,_),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,o,s){var _=o.pendingProps,$=M.current,et=!1,tt=(o.flags&128)!==0,j;if((j=tt)||(j=i!==null&&i.memoizedState===null?!1:($&2)!==0),j?(et=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&($|=1),G(M,$&1),i===null)return Eg(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(tt=_.children,i=_.fallback,et?(_=o.mode,et=o.child,tt={mode:"hidden",children:tt},!(_&1)&&et!==null?(et.childLanes=0,et.pendingProps=tt):et=qj(tt,_,0,null),i=Ah(i,_,s,null),et.return=o,i.return=o,et.sibling=i,o.child=et,o.child.memoizedState=oj(s),o.memoizedState=nj,i):rj(o,tt));if($=i.memoizedState,$!==null&&(j=$.dehydrated,j!==null))return sj(i,o,tt,_,j,$,s);if(et){et=_.fallback,tt=o.mode,$=i.child,j=$.sibling;var it={mode:"hidden",children:_.children};return!(tt&1)&&o.child!==$?(_=o.child,_.childLanes=0,_.pendingProps=it,o.deletions=null):(_=wh($,it),_.subtreeFlags=$.subtreeFlags&14680064),j!==null?et=wh(j,et):(et=Ah(et,tt,s,null),et.flags|=2),et.return=o,_.return=o,_.sibling=et,o.child=_,_=et,et=o.child,tt=i.child.memoizedState,tt=tt===null?oj(s):{baseLanes:tt.baseLanes|s,cachePool:null,transitions:tt.transitions},et.memoizedState=tt,et.childLanes=i.childLanes&~s,o.memoizedState=nj,_}return et=i.child,i=et.sibling,_=wh(et,{mode:"visible",children:_.children}),!(o.mode&1)&&(_.lanes=s),_.return=o,_.sibling=null,i!==null&&(s=o.deletions,s===null?(o.deletions=[i],o.flags|=16):s.push(i)),o.child=_,o.memoizedState=null,_}function rj(i,o){return o=qj({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function tj(i,o,s,_){return _!==null&&Jg(_),Bh(o,i.child,null,s),i=rj(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function sj(i,o,s,_,$,et,tt){if(s)return o.flags&256?(o.flags&=-257,_=Li(Error(p$1(422))),tj(i,o,tt,_)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(et=_.fallback,$=o.mode,_=qj({mode:"visible",children:_.children},$,0,null),et=Ah(et,$,tt,null),et.flags|=2,_.return=o,et.return=o,_.sibling=et,o.child=_,o.mode&1&&Bh(o,i.child,null,tt),o.child.memoizedState=oj(tt),o.memoizedState=nj,et);if(!(o.mode&1))return tj(i,o,tt,null);if($.data==="$!"){if(_=$.nextSibling&&$.nextSibling.dataset,_)var j=_.dgst;return _=j,et=Error(p$1(419)),_=Li(et,_,void 0),tj(i,o,tt,_)}if(j=(tt&i.childLanes)!==0,Ug||j){if(_=R,_!==null){switch(tt&-tt){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=$&(_.suspendedLanes|tt)?0:$,$!==0&&$!==et.retryLane&&(et.retryLane=$,Zg(i,$),mh(_,i,$,-1))}return uj(),_=Li(Error(p$1(421))),tj(i,o,tt,_)}return $.data==="$?"?(o.flags|=128,o.child=i.child,o=vj.bind(null,i),$._reactRetry=o,null):(i=et.treeContext,yg=Lf($.nextSibling),xg=o,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=o),o=rj(o,_.children),o.flags|=4096,o)}function wj(i,o,s){i.lanes|=o;var _=i.alternate;_!==null&&(_.lanes|=o),Sg(i.return,o,s)}function xj(i,o,s,_,$){var et=i.memoizedState;et===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:_,tail:s,tailMode:$}:(et.isBackwards=o,et.rendering=null,et.renderingStartTime=0,et.last=_,et.tail=s,et.tailMode=$)}function yj(i,o,s){var _=o.pendingProps,$=_.revealOrder,et=_.tail;if(Yi(i,o,_.children,s),_=M.current,_&2)_=_&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,s,o);else if(i.tag===19)wj(i,s,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}_&=1}if(G(M,_),!(o.mode&1))o.memoizedState=null;else switch($){case"forwards":for(s=o.child,$=null;s!==null;)i=s.alternate,i!==null&&Mh(i)===null&&($=s),s=s.sibling;s=$,s===null?($=o.child,o.child=null):($=s.sibling,s.sibling=null),xj(o,!1,$,s,et);break;case"backwards":for(s=null,$=o.child,o.child=null;$!==null;){if(i=$.alternate,i!==null&&Mh(i)===null){o.child=$;break}i=$.sibling,$.sibling=s,s=$,$=i}xj(o,!0,s,null,et);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function $i(i,o,s){if(i!==null&&(o.dependencies=i.dependencies),hh|=o.lanes,!(s&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(p$1(153));if(o.child!==null){for(i=o.child,s=wh(i,i.pendingProps),o.child=s,s.return=o;i.sibling!==null;)i=i.sibling,s=s.sibling=wh(i,i.pendingProps),s.return=o;s.sibling=null}return o.child}function zj(i,o,s){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var _=o.type._context,$=o.memoizedProps.value;G(Mg,_._currentValue),_._currentValue=$;break;case 13:if(_=o.memoizedState,_!==null)return _.dehydrated!==null?(G(M,M.current&1),o.flags|=128,null):s&o.child.childLanes?pj(i,o,s):(G(M,M.current&1),i=$i(i,o,s),i!==null?i.sibling:null);G(M,M.current&1);break;case 19:if(_=(s&o.childLanes)!==0,i.flags&128){if(_)return yj(i,o,s);o.flags|=128}if($=o.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),G(M,M.current),_)break;return null;case 22:case 23:return o.lanes=0,ej(i,o,s)}return $i(i,o,s)}var Aj,Bj,Cj,Dj;Aj=function(i,o){for(var s=o.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(i,o,s,_){var $=i.memoizedProps;if($!==_){i=o.stateNode,Hh(Eh.current);var et=null;switch(s){case"input":$=Ya(i,$),_=Ya(i,_),et=[];break;case"select":$=A$1({},$,{value:void 0}),_=A$1({},_,{value:void 0}),et=[];break;case"textarea":$=gb(i,$),_=gb(i,_),et=[];break;default:typeof $.onClick!="function"&&typeof _.onClick=="function"&&(i.onclick=Bf)}ub(s,_);var tt;s=null;for(st in $)if(!_.hasOwnProperty(st)&&$.hasOwnProperty(st)&&$[st]!=null)if(st==="style"){var j=$[st];for(tt in j)j.hasOwnProperty(tt)&&(s||(s={}),s[tt]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?et||(et=[]):(et=et||[]).push(st,null));for(st in _){var it=_[st];if(j=$!=null?$[st]:void 0,_.hasOwnProperty(st)&&it!==j&&(it!=null||j!=null))if(st==="style")if(j){for(tt in j)!j.hasOwnProperty(tt)||it&&it.hasOwnProperty(tt)||(s||(s={}),s[tt]="");for(tt in it)it.hasOwnProperty(tt)&&j[tt]!==it[tt]&&(s||(s={}),s[tt]=it[tt])}else s||(et||(et=[]),et.push(st,s)),s=it;else st==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,j=j?j.__html:void 0,it!=null&&j!==it&&(et=et||[]).push(st,it)):st==="children"?typeof it!="string"&&typeof it!="number"||(et=et||[]).push(st,""+it):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ea.hasOwnProperty(st)?(it!=null&&st==="onScroll"&&D("scroll",i),et||j===it||(et=[])):(et=et||[]).push(st,it))}s&&(et=et||[]).push("style",s);var st=et;(o.updateQueue=st)&&(o.flags|=4)}};Dj=function(i,o,s,_){s!==_&&(o.flags|=4)};function Ej(i,o){if(!I)switch(i.tailMode){case"hidden":o=i.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var _=null;s!==null;)s.alternate!==null&&(_=s),s=s.sibling;_===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:_.sibling=null}}function S(i){var o=i.alternate!==null&&i.alternate.child===i.child,s=0,_=0;if(o)for(var $=i.child;$!==null;)s|=$.lanes|$.childLanes,_|=$.subtreeFlags&14680064,_|=$.flags&14680064,$.return=i,$=$.sibling;else for($=i.child;$!==null;)s|=$.lanes|$.childLanes,_|=$.subtreeFlags,_|=$.flags,$.return=i,$=$.sibling;return i.subtreeFlags|=_,i.childLanes=s,o}function Fj(i,o,s){var _=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(o),null;case 1:return Zf(o.type)&&$f(),S(o),null;case 3:return _=o.stateNode,Jh(),E(Wf),E(H),Oh(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(i===null||i.child===null)&&(Gg(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,o),S(o),null;case 5:Lh(o);var $=Hh(Gh.current);if(s=o.type,i!==null&&o.stateNode!=null)Cj(i,o,s,_,$),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!_){if(o.stateNode===null)throw Error(p$1(166));return S(o),null}if(i=Hh(Eh.current),Gg(o)){_=o.stateNode,s=o.type;var et=o.memoizedProps;switch(_[Of]=o,_[Pf]=et,i=(o.mode&1)!==0,s){case"dialog":D("cancel",_),D("close",_);break;case"iframe":case"object":case"embed":D("load",_);break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],_);break;case"source":D("error",_);break;case"img":case"image":case"link":D("error",_),D("load",_);break;case"details":D("toggle",_);break;case"input":Za(_,et),D("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!et.multiple},D("invalid",_);break;case"textarea":hb(_,et),D("invalid",_)}ub(s,et),$=null;for(var tt in et)if(et.hasOwnProperty(tt)){var j=et[tt];tt==="children"?typeof j=="string"?_.textContent!==j&&(et.suppressHydrationWarning!==!0&&Af(_.textContent,j,i),$=["children",j]):typeof j=="number"&&_.textContent!==""+j&&(et.suppressHydrationWarning!==!0&&Af(_.textContent,j,i),$=["children",""+j]):ea.hasOwnProperty(tt)&&j!=null&&tt==="onScroll"&&D("scroll",_)}switch(s){case"input":Va(_),db(_,et,!0);break;case"textarea":Va(_),jb(_);break;case"select":case"option":break;default:typeof et.onClick=="function"&&(_.onclick=Bf)}_=$,o.updateQueue=_,_!==null&&(o.flags|=4)}else{tt=$.nodeType===9?$:$.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=tt.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof _.is=="string"?i=tt.createElement(s,{is:_.is}):(i=tt.createElement(s),s==="select"&&(tt=i,_.multiple?tt.multiple=!0:_.size&&(tt.size=_.size))):i=tt.createElementNS(i,s),i[Of]=o,i[Pf]=_,Aj(i,o,!1,!1),o.stateNode=i;e:{switch(tt=vb(s,_),s){case"dialog":D("cancel",i),D("close",i),$=_;break;case"iframe":case"object":case"embed":D("load",i),$=_;break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],i);$=_;break;case"source":D("error",i),$=_;break;case"img":case"image":case"link":D("error",i),D("load",i),$=_;break;case"details":D("toggle",i),$=_;break;case"input":Za(i,_),$=Ya(i,_),D("invalid",i);break;case"option":$=_;break;case"select":i._wrapperState={wasMultiple:!!_.multiple},$=A$1({},_,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,_),$=gb(i,_),D("invalid",i);break;default:$=_}ub(s,$),j=$;for(et in j)if(j.hasOwnProperty(et)){var it=j[et];et==="style"?sb(i,it):et==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,it!=null&&nb(i,it)):et==="children"?typeof it=="string"?(s!=="textarea"||it!=="")&&ob(i,it):typeof it=="number"&&ob(i,""+it):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(ea.hasOwnProperty(et)?it!=null&&et==="onScroll"&&D("scroll",i):it!=null&&ta(i,et,it,tt))}switch(s){case"input":Va(i),db(i,_,!1);break;case"textarea":Va(i),jb(i);break;case"option":_.value!=null&&i.setAttribute("value",""+Sa(_.value));break;case"select":i.multiple=!!_.multiple,et=_.value,et!=null?fb(i,!!_.multiple,et,!1):_.defaultValue!=null&&fb(i,!!_.multiple,_.defaultValue,!0);break;default:typeof $.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S(o),null;case 6:if(i&&o.stateNode!=null)Dj(i,o,i.memoizedProps,_);else{if(typeof _!="string"&&o.stateNode===null)throw Error(p$1(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(_=o.stateNode,s=o.memoizedProps,_[Of]=o,(et=_.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(_.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(_.nodeValue,s,(i.mode&1)!==0)}et&&(o.flags|=4)}else _=(s.nodeType===9?s:s.ownerDocument).createTextNode(_),_[Of]=o,o.stateNode=_}return S(o),null;case 13:if(E(M),_=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,et=!1;else if(et=Gg(o),_!==null&&_.dehydrated!==null){if(i===null){if(!et)throw Error(p$1(318));if(et=o.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$1(317));et[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S(o),et=!1}else zg!==null&&(Gj(zg),zg=null),et=!0;if(!et)return o.flags&65536?o:null}return o.flags&128?(o.lanes=s,o):(_=_!==null,_!==(i!==null&&i.memoizedState!==null)&&_&&(o.child.flags|=8192,o.mode&1&&(i===null||M.current&1?T===0&&(T=3):uj())),o.updateQueue!==null&&(o.flags|=4),S(o),null);case 4:return Jh(),Bj(i,o),i===null&&sf(o.stateNode.containerInfo),S(o),null;case 10:return Rg(o.type._context),S(o),null;case 17:return Zf(o.type)&&$f(),S(o),null;case 19:if(E(M),et=o.memoizedState,et===null)return S(o),null;if(_=(o.flags&128)!==0,tt=et.rendering,tt===null)if(_)Ej(et,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(tt=Mh(i),tt!==null){for(o.flags|=128,Ej(et,!1),_=tt.updateQueue,_!==null&&(o.updateQueue=_,o.flags|=4),o.subtreeFlags=0,_=s,s=o.child;s!==null;)et=s,i=_,et.flags&=14680066,tt=et.alternate,tt===null?(et.childLanes=0,et.lanes=i,et.child=null,et.subtreeFlags=0,et.memoizedProps=null,et.memoizedState=null,et.updateQueue=null,et.dependencies=null,et.stateNode=null):(et.childLanes=tt.childLanes,et.lanes=tt.lanes,et.child=tt.child,et.subtreeFlags=0,et.deletions=null,et.memoizedProps=tt.memoizedProps,et.memoizedState=tt.memoizedState,et.updateQueue=tt.updateQueue,et.type=tt.type,i=tt.dependencies,et.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(M,M.current&1|2),o.child}i=i.sibling}et.tail!==null&&B()>Hj&&(o.flags|=128,_=!0,Ej(et,!1),o.lanes=4194304)}else{if(!_)if(i=Mh(tt),i!==null){if(o.flags|=128,_=!0,s=i.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),Ej(et,!0),et.tail===null&&et.tailMode==="hidden"&&!tt.alternate&&!I)return S(o),null}else 2*B()-et.renderingStartTime>Hj&&s!==1073741824&&(o.flags|=128,_=!0,Ej(et,!1),o.lanes=4194304);et.isBackwards?(tt.sibling=o.child,o.child=tt):(s=et.last,s!==null?s.sibling=tt:o.child=tt,et.last=tt)}return et.tail!==null?(o=et.tail,et.rendering=o,et.tail=o.sibling,et.renderingStartTime=B(),o.sibling=null,s=M.current,G(M,_?s&1|2:s&1),o):(S(o),null);case 22:case 23:return Ij(),_=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==_&&(o.flags|=8192),_&&o.mode&1?gj&1073741824&&(S(o),o.subtreeFlags&6&&(o.flags|=8192)):S(o),null;case 24:return null;case 25:return null}throw Error(p$1(156,o.tag))}function Jj(i,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Jh(),E(Wf),E(H),Oh(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E(M),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(p$1(340));Ig()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,o){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(_){W(i,o,_)}else s.current=null}function Nj(i,o,s){try{s()}catch(_){W(i,o,_)}}var Oj=!1;function Pj(i,o){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var _=s.getSelection&&s.getSelection();if(_&&_.rangeCount!==0){s=_.anchorNode;var $=_.anchorOffset,et=_.focusNode;_=_.focusOffset;try{s.nodeType,et.nodeType}catch{s=null;break e}var tt=0,j=-1,it=-1,st=0,ht=0,vt=i,ft=null;t:for(;;){for(var pt;vt!==s||$!==0&&vt.nodeType!==3||(j=tt+$),vt!==et||_!==0&&vt.nodeType!==3||(it=tt+_),vt.nodeType===3&&(tt+=vt.nodeValue.length),(pt=vt.firstChild)!==null;)ft=vt,vt=pt;for(;;){if(vt===i)break t;if(ft===s&&++st===$&&(j=tt),ft===et&&++ht===_&&(it=tt),(pt=vt.nextSibling)!==null)break;vt=ft,ft=vt.parentNode}vt=pt}s=j===-1||it===-1?null:{start:j,end:it}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=o;V!==null;)if(o=V,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,V=i;else for(;V!==null;){o=V;try{var ct=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ct!==null){var yt=ct.memoizedProps,Et=ct.memoizedState,Ot=o.stateNode,Lt=Ot.getSnapshotBeforeUpdate(o.elementType===o.type?yt:Lg(o.type,yt),Et);Ot.__reactInternalSnapshotBeforeUpdate=Lt}break;case 3:var Tt=o.stateNode.containerInfo;Tt.nodeType===1?Tt.textContent="":Tt.nodeType===9&&Tt.documentElement&&Tt.removeChild(Tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(It){W(o,o.return,It)}if(i=o.sibling,i!==null){i.return=o.return,V=i;break}V=o.return}return ct=Oj,Oj=!1,ct}function Qj(i,o,s){var _=o.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var $=_=_.next;do{if(($.tag&i)===i){var et=$.destroy;$.destroy=void 0,et!==void 0&&Nj(o,s,et)}$=$.next}while($!==_)}}function Rj(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&i)===i){var _=s.create;s.destroy=_()}s=s.next}while(s!==o)}}function Sj(i){var o=i.ref;if(o!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof o=="function"?o(i):o.current=i}}function Tj(i){var o=i.alternate;o!==null&&(i.alternate=null,Tj(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,o,s){var _=i.tag;if(_===5||_===6)i=i.stateNode,o?s.nodeType===8?s.parentNode.insertBefore(i,o):s.insertBefore(i,o):(s.nodeType===8?(o=s.parentNode,o.insertBefore(i,s)):(o=s,o.appendChild(i)),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=Bf));else if(_!==4&&(i=i.child,i!==null))for(Wj(i,o,s),i=i.sibling;i!==null;)Wj(i,o,s),i=i.sibling}function Xj(i,o,s){var _=i.tag;if(_===5||_===6)i=i.stateNode,o?s.insertBefore(i,o):s.appendChild(i);else if(_!==4&&(i=i.child,i!==null))for(Xj(i,o,s),i=i.sibling;i!==null;)Xj(i,o,s),i=i.sibling}var X=null,Yj=!1;function Zj(i,o,s){for(s=s.child;s!==null;)ak(i,o,s),s=s.sibling}function ak(i,o,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Mj(s,o);case 6:var _=X,$=Yj;X=null,Zj(i,o,s),X=_,Yj=$,X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X,s.stateNode));break;case 4:_=X,$=Yj,X=s.stateNode.containerInfo,Yj=!0,Zj(i,o,s),X=_,Yj=$;break;case 0:case 11:case 14:case 15:if(!U&&(_=s.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){$=_=_.next;do{var et=$,tt=et.destroy;et=et.tag,tt!==void 0&&(et&2||et&4)&&Nj(s,o,tt),$=$.next}while($!==_)}Zj(i,o,s);break;case 1:if(!U&&(Mj(s,o),_=s.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=s.memoizedProps,_.state=s.memoizedState,_.componentWillUnmount()}catch(j){W(s,o,j)}Zj(i,o,s);break;case 21:Zj(i,o,s);break;case 22:s.mode&1?(U=(_=U)||s.memoizedState!==null,Zj(i,o,s),U=_):Zj(i,o,s);break;default:Zj(i,o,s)}}function bk(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Lj),o.forEach(function(_){var $=ck.bind(null,i,_);s.has(_)||(s.add(_),_.then($,$))})}}function dk(i,o){var s=o.deletions;if(s!==null)for(var _=0;_<s.length;_++){var $=s[_];try{var et=i,tt=o,j=tt;e:for(;j!==null;){switch(j.tag){case 5:X=j.stateNode,Yj=!1;break e;case 3:X=j.stateNode.containerInfo,Yj=!0;break e;case 4:X=j.stateNode.containerInfo,Yj=!0;break e}j=j.return}if(X===null)throw Error(p$1(160));ak(et,tt,$),X=null,Yj=!1;var it=$.alternate;it!==null&&(it.return=null),$.return=null}catch(st){W($,o,st)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,i),o=o.sibling}function ek(i,o){var s=i.alternate,_=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(o,i),fk(i),_&4){try{Qj(3,i,i.return),Rj(3,i)}catch(yt){W(i,i.return,yt)}try{Qj(5,i,i.return)}catch(yt){W(i,i.return,yt)}}break;case 1:dk(o,i),fk(i),_&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(o,i),fk(i),_&512&&s!==null&&Mj(s,s.return),i.flags&32){var $=i.stateNode;try{ob($,"")}catch(yt){W(i,i.return,yt)}}if(_&4&&($=i.stateNode,$!=null)){var et=i.memoizedProps,tt=s!==null?s.memoizedProps:et,j=i.type,it=i.updateQueue;if(i.updateQueue=null,it!==null)try{j==="input"&&et.type==="radio"&&et.name!=null&&ab($,et),vb(j,tt);var st=vb(j,et);for(tt=0;tt<it.length;tt+=2){var ht=it[tt],vt=it[tt+1];ht==="style"?sb($,vt):ht==="dangerouslySetInnerHTML"?nb($,vt):ht==="children"?ob($,vt):ta($,ht,vt,st)}switch(j){case"input":bb($,et);break;case"textarea":ib($,et);break;case"select":var ft=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!et.multiple;var pt=et.value;pt!=null?fb($,!!et.multiple,pt,!1):ft!==!!et.multiple&&(et.defaultValue!=null?fb($,!!et.multiple,et.defaultValue,!0):fb($,!!et.multiple,et.multiple?[]:"",!1))}$[Pf]=et}catch(yt){W(i,i.return,yt)}}break;case 6:if(dk(o,i),fk(i),_&4){if(i.stateNode===null)throw Error(p$1(162));$=i.stateNode,et=i.memoizedProps;try{$.nodeValue=et}catch(yt){W(i,i.return,yt)}}break;case 3:if(dk(o,i),fk(i),_&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(yt){W(i,i.return,yt)}break;case 4:dk(o,i),fk(i);break;case 13:dk(o,i),fk(i),$=i.child,$.flags&8192&&(et=$.memoizedState!==null,$.stateNode.isHidden=et,!et||$.alternate!==null&&$.alternate.memoizedState!==null||(gk=B())),_&4&&bk(i);break;case 22:if(ht=s!==null&&s.memoizedState!==null,i.mode&1?(U=(st=U)||ht,dk(o,i),U=st):dk(o,i),fk(i),_&8192){if(st=i.memoizedState!==null,(i.stateNode.isHidden=st)&&!ht&&i.mode&1)for(V=i,ht=i.child;ht!==null;){for(vt=V=ht;V!==null;){switch(ft=V,pt=ft.child,ft.tag){case 0:case 11:case 14:case 15:Qj(4,ft,ft.return);break;case 1:Mj(ft,ft.return);var ct=ft.stateNode;if(typeof ct.componentWillUnmount=="function"){_=ft,s=ft.return;try{o=_,ct.props=o.memoizedProps,ct.state=o.memoizedState,ct.componentWillUnmount()}catch(yt){W(_,s,yt)}}break;case 5:Mj(ft,ft.return);break;case 22:if(ft.memoizedState!==null){hk(vt);continue}}pt!==null?(pt.return=ft,V=pt):hk(vt)}ht=ht.sibling}e:for(ht=null,vt=i;;){if(vt.tag===5){if(ht===null){ht=vt;try{$=vt.stateNode,st?(et=$.style,typeof et.setProperty=="function"?et.setProperty("display","none","important"):et.display="none"):(j=vt.stateNode,it=vt.memoizedProps.style,tt=it!=null&&it.hasOwnProperty("display")?it.display:null,j.style.display=rb("display",tt))}catch(yt){W(i,i.return,yt)}}}else if(vt.tag===6){if(ht===null)try{vt.stateNode.nodeValue=st?"":vt.memoizedProps}catch(yt){W(i,i.return,yt)}}else if((vt.tag!==22&&vt.tag!==23||vt.memoizedState===null||vt===i)&&vt.child!==null){vt.child.return=vt,vt=vt.child;continue}if(vt===i)break e;for(;vt.sibling===null;){if(vt.return===null||vt.return===i)break e;ht===vt&&(ht=null),vt=vt.return}ht===vt&&(ht=null),vt.sibling.return=vt.return,vt=vt.sibling}}break;case 19:dk(o,i),fk(i),_&4&&bk(i);break;case 21:break;default:dk(o,i),fk(i)}}function fk(i){var o=i.flags;if(o&2){try{e:{for(var s=i.return;s!==null;){if(Uj(s)){var _=s;break e}s=s.return}throw Error(p$1(160))}switch(_.tag){case 5:var $=_.stateNode;_.flags&32&&(ob($,""),_.flags&=-33);var et=Vj(i);Xj(i,et,$);break;case 3:case 4:var tt=_.stateNode.containerInfo,j=Vj(i);Wj(i,j,tt);break;default:throw Error(p$1(161))}}catch(it){W(i,i.return,it)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ik(i,o,s){V=i,jk(i)}function jk(i,o,s){for(var _=(i.mode&1)!==0;V!==null;){var $=V,et=$.child;if($.tag===22&&_){var tt=$.memoizedState!==null||Kj;if(!tt){var j=$.alternate,it=j!==null&&j.memoizedState!==null||U;j=Kj;var st=U;if(Kj=tt,(U=it)&&!st)for(V=$;V!==null;)tt=V,it=tt.child,tt.tag===22&&tt.memoizedState!==null?kk($):it!==null?(it.return=tt,V=it):kk($);for(;et!==null;)V=et,jk(et),et=et.sibling;V=$,Kj=j,U=st}lk(i)}else $.subtreeFlags&8772&&et!==null?(et.return=$,V=et):lk(i)}}function lk(i){for(;V!==null;){var o=V;if(o.flags&8772){var s=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U||Rj(5,o);break;case 1:var _=o.stateNode;if(o.flags&4&&!U)if(s===null)_.componentDidMount();else{var $=o.elementType===o.type?s.memoizedProps:Lg(o.type,s.memoizedProps);_.componentDidUpdate($,s.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var et=o.updateQueue;et!==null&&ih(o,et,_);break;case 3:var tt=o.updateQueue;if(tt!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}ih(o,tt,s)}break;case 5:var j=o.stateNode;if(s===null&&o.flags&4){s=j;var it=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":it.autoFocus&&s.focus();break;case"img":it.src&&(s.src=it.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var st=o.alternate;if(st!==null){var ht=st.memoizedState;if(ht!==null){var vt=ht.dehydrated;vt!==null&&bd(vt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||o.flags&512&&Sj(o)}catch(ft){W(o,o.return,ft)}}if(o===i){V=null;break}if(s=o.sibling,s!==null){s.return=o.return,V=s;break}V=o.return}}function hk(i){for(;V!==null;){var o=V;if(o===i){V=null;break}var s=o.sibling;if(s!==null){s.return=o.return,V=s;break}V=o.return}}function kk(i){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var s=o.return;try{Rj(4,o)}catch(it){W(o,s,it)}break;case 1:var _=o.stateNode;if(typeof _.componentDidMount=="function"){var $=o.return;try{_.componentDidMount()}catch(it){W(o,$,it)}}var et=o.return;try{Sj(o)}catch(it){W(o,et,it)}break;case 5:var tt=o.return;try{Sj(o)}catch(it){W(o,tt,it)}}}catch(it){W(o,o.return,it)}if(o===i){V=null;break}var j=o.sibling;if(j!==null){j.return=o.return,V=j;break}V=o.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,o,s,_){if(50<zk)throw zk=0,Ak=null,Error(p$1(185));Ac(i,s,_),(!(K&2)||i!==R)&&(i===R&&(!(K&2)&&(rk|=s),T===4&&Dk(i,Z)),Ek(i,_),s===1&&K===0&&!(o.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(i,o){var s=i.callbackNode;wc(i,o);var _=uc(i,i===R?Z:0);if(_===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(o=_&-_,i.callbackPriority!==o){if(s!=null&&bc(s),o===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(_)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Gk(s,Hk.bind(null,i))}i.callbackPriority=o,i.callbackNode=s}}function Hk(i,o){if(Bk=-1,Ck=0,K&6)throw Error(p$1(327));var s=i.callbackNode;if(Ik()&&i.callbackNode!==s)return null;var _=uc(i,i===R?Z:0);if(_===0)return null;if(_&30||_&i.expiredLanes||o)o=Jk(i,_);else{o=_;var $=K;K|=2;var et=Kk();(R!==i||Z!==o)&&(vk=null,Hj=B()+500,Lk(i,o));do try{Mk();break}catch(j){Nk(i,j)}while(1);Qg(),nk.current=et,K=$,Y!==null?o=0:(R=null,Z=0,o=T)}if(o!==0){if(o===2&&($=xc(i),$!==0&&(_=$,o=Ok(i,$))),o===1)throw s=qk,Lk(i,0),Dk(i,_),Ek(i,B()),s;if(o===6)Dk(i,_);else{if($=i.current.alternate,!(_&30)&&!Pk($)&&(o=Jk(i,_),o===2&&(et=xc(i),et!==0&&(_=et,o=Ok(i,et))),o===1))throw s=qk,Lk(i,0),Dk(i,_),Ek(i,B()),s;switch(i.finishedWork=$,i.finishedLanes=_,o){case 0:case 1:throw Error(p$1(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,_),(_&130023424)===_&&(o=gk+500-B(),10<o)){if(uc(i,0)!==0)break;if($=i.suspendedLanes,($&_)!==_){L(),i.pingedLanes|=i.suspendedLanes&$;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),o);break}Qk(i,uk,vk);break;case 4:if(Dk(i,_),(_&4194240)===_)break;for(o=i.eventTimes,$=-1;0<_;){var tt=31-oc(_);et=1<<tt,tt=o[tt],tt>$&&($=tt),_&=~et}if(_=$,_=B()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*mk(_/1960))-_,10<_){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),_);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p$1(329))}}}return Ek(i,B()),i.callbackNode===s?Hk.bind(null,i):null}function Ok(i,o){var s=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,o).flags|=256),i=Jk(i,o),i!==2&&(o=uk,uk=s,o!==null&&Gj(o)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var o=i;;){if(o.flags&16384){var s=o.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var _=0;_<s.length;_++){var $=s[_],et=$.getSnapshot;$=$.value;try{if(!He(et(),$))return!1}catch{return!1}}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(i,o){for(o&=~sk,o&=~rk,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var s=31-oc(o),_=1<<s;i[s]=-1,o&=~_}}function Fk(i){if(K&6)throw Error(p$1(327));Ik();var o=uc(i,0);if(!(o&1))return Ek(i,B()),null;var s=Jk(i,o);if(i.tag!==0&&s===2){var _=xc(i);_!==0&&(o=_,s=Ok(i,_))}if(s===1)throw s=qk,Lk(i,0),Dk(i,o),Ek(i,B()),s;if(s===6)throw Error(p$1(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Qk(i,uk,vk),Ek(i,B()),null}function Rk(i,o){var s=K;K|=1;try{return i(o)}finally{K=s,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var o=K;K|=1;var s=pk.transition,_=C;try{if(pk.transition=null,C=1,i)return i()}finally{C=_,pk.transition=s,K=o,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(i,o){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var _=s;switch(wg(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(_);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(_.type._context);break;case 22:case 23:Ij()}s=s.return}if(R=i,Y=i=wh(i.current,null),Z=gj=o,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(s=Wg[o],_=s.interleaved,_!==null){s.interleaved=null;var $=_.next,et=s.pending;if(et!==null){var tt=et.next;et.next=$,_.next=tt}s.pending=_}Wg=null}return i}function Nk(i,o){do{var s=Y;try{if(Qg(),Ph.current=ai,Sh){for(var _=N.memoizedState;_!==null;){var $=_.queue;$!==null&&($.pending=null),_=_.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T=1,qk=o,Y=null;break}e:{var et=i,tt=s.return,j=s,it=o;if(o=Z,j.flags|=32768,it!==null&&typeof it=="object"&&typeof it.then=="function"){var st=it,ht=j,vt=ht.tag;if(!(ht.mode&1)&&(vt===0||vt===11||vt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var pt=Vi(tt);if(pt!==null){pt.flags&=-257,Wi(pt,tt,j,et,o),pt.mode&1&&Ti(et,st,o),o=pt,it=st;var ct=o.updateQueue;if(ct===null){var yt=new Set;yt.add(it),o.updateQueue=yt}else ct.add(it);break e}else{if(!(o&1)){Ti(et,st,o),uj();break e}it=Error(p$1(426))}}else if(I&&j.mode&1){var Et=Vi(tt);if(Et!==null){!(Et.flags&65536)&&(Et.flags|=256),Wi(Et,tt,j,et,o),Jg(Ki(it,j));break e}}et=it=Ki(it,j),T!==4&&(T=2),tk===null?tk=[et]:tk.push(et),et=tt;do{switch(et.tag){case 3:et.flags|=65536,o&=-o,et.lanes|=o;var Ot=Oi(et,it,o);fh(et,Ot);break e;case 1:j=it;var Lt=et.type,Tt=et.stateNode;if(!(et.flags&128)&&(typeof Lt.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(Si===null||!Si.has(Tt)))){et.flags|=65536,o&=-o,et.lanes|=o;var It=Ri(et,j,o);fh(et,It);break e}}et=et.return}while(et!==null)}Tk(s)}catch(mt){o=mt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(1)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(i,o){var s=K;K|=2;var _=Kk();(R!==i||Z!==o)&&(vk=null,Lk(i,o));do try{Uk();break}catch($){Nk(i,$)}while(1);if(Qg(),K=s,nk.current=_,Y!==null)throw Error(p$1(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(i){var o=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,o===null?Tk(i):Y=o,ok.current=null}function Tk(i){var o=i;do{var s=o.alternate;if(i=o.return,o.flags&32768){if(s=Jj(s,o),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(s=Fj(s,o,gj),s!==null){Y=s;return}if(o=o.sibling,o!==null){Y=o;return}Y=o=i}while(o!==null);T===0&&(T=5)}function Qk(i,o,s){var _=C,$=pk.transition;try{pk.transition=null,C=1,Xk(i,o,s,_)}finally{pk.transition=$,C=_}return null}function Xk(i,o,s,_){do Ik();while(xk!==null);if(K&6)throw Error(p$1(327));s=i.finishedWork;var $=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p$1(177));i.callbackNode=null,i.callbackPriority=0;var et=s.lanes|s.childLanes;if(Bc(i,et),i===R&&(Y=R=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),et=(s.flags&15990)!==0,s.subtreeFlags&15990||et){et=pk.transition,pk.transition=null;var tt=C;C=1;var j=K;K|=4,ok.current=null,Pj(i,s),ek(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,ik(s),dc(),K=j,C=tt,pk.transition=et}else i.current=s;if(wk&&(wk=!1,xk=i,yk=$),et=i.pendingLanes,et===0&&(Si=null),mc(s.stateNode),Ek(i,B()),o!==null)for(_=i.onRecoverableError,s=0;s<o.length;s++)$=o[s],_($.value,{componentStack:$.stack,digest:$.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),et=i.pendingLanes,et&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),o=pk.transition,s=C;try{if(pk.transition=null,C=16>i?16:i,xk===null)var _=!1;else{if(i=xk,xk=null,yk=0,K&6)throw Error(p$1(331));var $=K;for(K|=4,V=i.current;V!==null;){var et=V,tt=et.child;if(V.flags&16){var j=et.deletions;if(j!==null){for(var it=0;it<j.length;it++){var st=j[it];for(V=st;V!==null;){var ht=V;switch(ht.tag){case 0:case 11:case 15:Qj(8,ht,et)}var vt=ht.child;if(vt!==null)vt.return=ht,V=vt;else for(;V!==null;){ht=V;var ft=ht.sibling,pt=ht.return;if(Tj(ht),ht===st){V=null;break}if(ft!==null){ft.return=pt,V=ft;break}V=pt}}}var ct=et.alternate;if(ct!==null){var yt=ct.child;if(yt!==null){ct.child=null;do{var Et=yt.sibling;yt.sibling=null,yt=Et}while(yt!==null)}}V=et}}if(et.subtreeFlags&2064&&tt!==null)tt.return=et,V=tt;else e:for(;V!==null;){if(et=V,et.flags&2048)switch(et.tag){case 0:case 11:case 15:Qj(9,et,et.return)}var Ot=et.sibling;if(Ot!==null){Ot.return=et.return,V=Ot;break e}V=et.return}}var Lt=i.current;for(V=Lt;V!==null;){tt=V;var Tt=tt.child;if(tt.subtreeFlags&2064&&Tt!==null)Tt.return=tt,V=Tt;else e:for(tt=Lt;V!==null;){if(j=V,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Rj(9,j)}}catch(mt){W(j,j.return,mt)}if(j===tt){V=null;break e}var It=j.sibling;if(It!==null){It.return=j.return,V=It;break e}V=j.return}}if(K=$,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}_=!0}return _}finally{C=s,pk.transition=o}}return!1}function Yk(i,o,s){o=Ki(s,o),o=Oi(i,o,1),i=dh(i,o,1),o=L(),i!==null&&(Ac(i,1,o),Ek(i,o))}function W(i,o,s){if(i.tag===3)Yk(i,i,s);else for(;o!==null;){if(o.tag===3){Yk(o,i,s);break}else if(o.tag===1){var _=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Si===null||!Si.has(_))){i=Ki(s,i),i=Ri(o,i,1),o=dh(o,i,1),i=L(),o!==null&&(Ac(o,1,i),Ek(o,i));break}}o=o.return}}function Ui(i,o,s){var _=i.pingCache;_!==null&&_.delete(o),o=L(),i.pingedLanes|=i.suspendedLanes&s,R===i&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(i,0):sk|=s),Ek(i,o)}function Zk(i,o){o===0&&(i.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var s=L();i=Zg(i,o),i!==null&&(Ac(i,o,s),Ek(i,s))}function vj(i){var o=i.memoizedState,s=0;o!==null&&(s=o.retryLane),Zk(i,s)}function ck(i,o){var s=0;switch(i.tag){case 13:var _=i.stateNode,$=i.memoizedState;$!==null&&(s=$.retryLane);break;case 19:_=i.stateNode;break;default:throw Error(p$1(314))}_!==null&&_.delete(o),Zk(i,s)}var Wk;Wk=function(i,o,s){if(i!==null)if(i.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&s)&&!(o.flags&128))return Ug=!1,zj(i,o,s);Ug=!!(i.flags&131072)}else Ug=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var _=o.type;jj(i,o),i=o.pendingProps;var $=Yf(o,H.current);Tg(o,s),$=Xh(null,o,_,i,$,s);var et=bi();return o.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(_)?(et=!0,cg(o)):et=!1,o.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,ah(o),$.updater=nh,o.stateNode=$,$._reactInternals=o,rh(o,_,i,s),o=kj(null,o,_,!0,et,s)):(o.tag=0,I&&et&&vg(o),Yi(null,o,$,s),o=o.child),o;case 16:_=o.elementType;e:{switch(jj(i,o),i=o.pendingProps,$=_._init,_=$(_._payload),o.type=_,$=o.tag=$k(_),i=Lg(_,i),$){case 0:o=dj(null,o,_,i,s);break e;case 1:o=ij(null,o,_,i,s);break e;case 11:o=Zi(null,o,_,i,s);break e;case 14:o=aj(null,o,_,Lg(_.type,i),s);break e}throw Error(p$1(306,_,""))}return o;case 0:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),dj(i,o,_,$,s);case 1:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),ij(i,o,_,$,s);case 3:e:{if(lj(o),i===null)throw Error(p$1(387));_=o.pendingProps,et=o.memoizedState,$=et.element,bh(i,o),gh(o,_,null,s);var tt=o.memoizedState;if(_=tt.element,et.isDehydrated)if(et={element:_,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},o.updateQueue.baseState=et,o.memoizedState=et,o.flags&256){$=Ki(Error(p$1(423)),o),o=mj(i,o,_,s,$);break e}else if(_!==$){$=Ki(Error(p$1(424)),o),o=mj(i,o,_,s,$);break e}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,s=Ch(o,null,_,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),_===$){o=$i(i,o,s);break e}Yi(i,o,_,s)}o=o.child}return o;case 5:return Kh(o),i===null&&Eg(o),_=o.type,$=o.pendingProps,et=i!==null?i.memoizedProps:null,tt=$.children,Ef(_,$)?tt=null:et!==null&&Ef(_,et)&&(o.flags|=32),hj(i,o),Yi(i,o,tt,s),o.child;case 6:return i===null&&Eg(o),null;case 13:return pj(i,o,s);case 4:return Ih(o,o.stateNode.containerInfo),_=o.pendingProps,i===null?o.child=Bh(o,null,_,s):Yi(i,o,_,s),o.child;case 11:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),Zi(i,o,_,$,s);case 7:return Yi(i,o,o.pendingProps,s),o.child;case 8:return Yi(i,o,o.pendingProps.children,s),o.child;case 12:return Yi(i,o,o.pendingProps.children,s),o.child;case 10:e:{if(_=o.type._context,$=o.pendingProps,et=o.memoizedProps,tt=$.value,G(Mg,_._currentValue),_._currentValue=tt,et!==null)if(He(et.value,tt)){if(et.children===$.children&&!Wf.current){o=$i(i,o,s);break e}}else for(et=o.child,et!==null&&(et.return=o);et!==null;){var j=et.dependencies;if(j!==null){tt=et.child;for(var it=j.firstContext;it!==null;){if(it.context===_){if(et.tag===1){it=ch(-1,s&-s),it.tag=2;var st=et.updateQueue;if(st!==null){st=st.shared;var ht=st.pending;ht===null?it.next=it:(it.next=ht.next,ht.next=it),st.pending=it}}et.lanes|=s,it=et.alternate,it!==null&&(it.lanes|=s),Sg(et.return,s,o),j.lanes|=s;break}it=it.next}}else if(et.tag===10)tt=et.type===o.type?null:et.child;else if(et.tag===18){if(tt=et.return,tt===null)throw Error(p$1(341));tt.lanes|=s,j=tt.alternate,j!==null&&(j.lanes|=s),Sg(tt,s,o),tt=et.sibling}else tt=et.child;if(tt!==null)tt.return=et;else for(tt=et;tt!==null;){if(tt===o){tt=null;break}if(et=tt.sibling,et!==null){et.return=tt.return,tt=et;break}tt=tt.return}et=tt}Yi(i,o,$.children,s),o=o.child}return o;case 9:return $=o.type,_=o.pendingProps.children,Tg(o,s),$=Vg($),_=_($),o.flags|=1,Yi(i,o,_,s),o.child;case 14:return _=o.type,$=Lg(_,o.pendingProps),$=Lg(_.type,$),aj(i,o,_,$,s);case 15:return cj(i,o,o.type,o.pendingProps,s);case 17:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),jj(i,o),o.tag=1,Zf(_)?(i=!0,cg(o)):i=!1,Tg(o,s),ph(o,_,$),rh(o,_,$,s),kj(null,o,_,!0,i,s);case 19:return yj(i,o,s);case 22:return ej(i,o,s)}throw Error(p$1(156,o.tag))};function Gk(i,o){return ac(i,o)}function al(i,o,s,_){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,o,s,_){return new al(i,o,s,_)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,o){var s=i.alternate;return s===null?(s=Bg(i.tag,o,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=o,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,o=i.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function yh(i,o,s,_,$,et){var tt=2;if(_=i,typeof i=="function")bj(i)&&(tt=1);else if(typeof i=="string")tt=5;else e:switch(i){case ya:return Ah(s.children,$,et,o);case za:tt=8,$|=8;break;case Aa:return i=Bg(12,s,o,$|2),i.elementType=Aa,i.lanes=et,i;case Ea:return i=Bg(13,s,o,$),i.elementType=Ea,i.lanes=et,i;case Fa:return i=Bg(19,s,o,$),i.elementType=Fa,i.lanes=et,i;case Ia:return qj(s,$,et,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:tt=10;break e;case Ca:tt=9;break e;case Da:tt=11;break e;case Ga:tt=14;break e;case Ha:tt=16,_=null;break e}throw Error(p$1(130,i==null?i:typeof i,""))}return o=Bg(tt,s,o,$),o.elementType=i,o.type=_,o.lanes=et,o}function Ah(i,o,s,_){return i=Bg(7,i,_,o),i.lanes=s,i}function qj(i,o,s,_){return i=Bg(22,i,_,o),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function xh(i,o,s){return i=Bg(6,i,null,o),i.lanes=s,i}function zh(i,o,s){return o=Bg(4,i.children!==null?i.children:[],i.key,o),o.lanes=s,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function bl(i,o,s,_,$){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=_,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function cl(i,o,s,_,$,et,tt,j,it){return i=new bl(i,o,s,j,it),o===1?(o=1,et===!0&&(o|=8)):o=0,et=Bg(3,null,null,o),i.current=et,et.stateNode=i,et.memoizedState={element:_,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(et),i}function dl(i,o,s){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:_==null?null:""+_,children:i,containerInfo:o,implementation:s}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p$1(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p$1(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,o)}return o}function fl(i,o,s,_,$,et,tt,j,it){return i=cl(s,_,!0,i,$,et,tt,j,it),i.context=el(null),s=i.current,_=L(),$=lh(s),et=ch(_,$),et.callback=o??null,dh(s,et,$),i.current.lanes=$,Ac(i,$,_),Ek(i,_),i}function gl(i,o,s,_){var $=o.current,et=L(),tt=lh($);return s=el(s),o.context===null?o.context=s:o.pendingContext=s,o=ch(et,tt),o.payload={element:i},_=_===void 0?null:_,_!==null&&(o.callback=_),i=dh($,o,tt),i!==null&&(mh(i,$,tt,et),eh(i,$,tt)),tt}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<o?s:o}}function jl(i,o){il(i,o),(i=i.alternate)&&il(i,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(p$1(409));gl(i,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Sk(function(){gl(null,i,null,null)}),o[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var o=Hc();i={blockedOn:null,target:i,priority:o};for(var s=0;s<Qc.length&&o!==0&&o<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,o,s,_,$){if($){if(typeof _=="function"){var et=_;_=function(){var st=hl(tt);et.call(st)}}var tt=fl(o,_,i,0,null,!1,!1,"",ql);return i._reactRootContainer=tt,i[uf]=tt.current,sf(i.nodeType===8?i.parentNode:i),Sk(),tt}for(;$=i.lastChild;)i.removeChild($);if(typeof _=="function"){var j=_;_=function(){var st=hl(it);j.call(st)}}var it=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=it,i[uf]=it.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(o,it,s,_)}),it}function sl(i,o,s,_,$){var et=s._reactRootContainer;if(et){var tt=et;if(typeof $=="function"){var j=$;$=function(){var it=hl(tt);j.call(it)}}gl(o,tt,i,$)}else tt=rl(s,o,i,$,_);return hl(tt)}Ec=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var s=tc(o.pendingLanes);s!==0&&(Cc(o,s|1),Ek(o,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var _=Zg(i,1);if(_!==null){var $=L();mh(_,i,1,$)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var o=Zg(i,134217728);if(o!==null){var s=L();mh(o,i,134217728,s)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var o=lh(i),s=Zg(i,o);if(s!==null){var _=L();mh(s,i,o,_)}jl(i,o)}};Hc=function(){return C};Ic=function(i,o){var s=C;try{return C=i,o()}finally{C=s}};yb=function(i,o,s){switch(o){case"input":if(bb(i,s),o=s.name,s.type==="radio"&&o!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<s.length;o++){var _=s[o];if(_!==i&&_.form===i.form){var $=Db(_);if(!$)throw Error(p$1(90));Wa(_),bb(_,$)}}}break;case"textarea":ib(i,s);break;case"select":o=s.value,o!=null&&fb(i,!!s.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,o){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$1(200));return dl(i,o,null,s)};reactDom_production_min.createRoot=function(i,o){if(!ol(i))throw Error(p$1(299));var s=!1,_="",$=ll;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(_=o.identifierPrefix),o.onRecoverableError!==void 0&&($=o.onRecoverableError)),o=cl(i,1,!1,null,null,s,!1,_,$),i[uf]=o.current,sf(i.nodeType===8?i.parentNode:i),new ml(o)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(p$1(188)):(i=Object.keys(i).join(","),Error(p$1(268,i)));return i=Zb(o),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,o,s){if(!pl(o))throw Error(p$1(200));return sl(null,i,o,!0,s)};reactDom_production_min.hydrateRoot=function(i,o,s){if(!ol(i))throw Error(p$1(405));var _=s!=null&&s.hydratedSources||null,$=!1,et="",tt=ll;if(s!=null&&(s.unstable_strictMode===!0&&($=!0),s.identifierPrefix!==void 0&&(et=s.identifierPrefix),s.onRecoverableError!==void 0&&(tt=s.onRecoverableError)),o=fl(o,null,i,1,s??null,$,!1,et,tt),i[uf]=o.current,sf(i),_)for(i=0;i<_.length;i++)s=_[i],$=s._getVersion,$=$(s._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[s,$]:o.mutableSourceEagerHydrationData.push(s,$);return new nl(o)};reactDom_production_min.render=function(i,o,s){if(!pl(o))throw Error(p$1(200));return sl(null,i,o,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p$1(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,o,s,_){if(!pl(s))throw Error(p$1(200));if(i==null||i._reactInternals===void 0)throw Error(p$1(38));return sl(i,o,s,!1,_)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(i){function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}o(),i.exports=reactDom_production_min})(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var mapboxGlExports={},mapboxGl={get exports(){return mapboxGlExports},set exports(i){mapboxGlExports=i}};(function(i,o){(function(s,_){i.exports=_()})(commonjsGlobal$1,function(){var s,_,$;function et(j,it){if(!s)s=it;else if(!_)_=it;else{var st="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+s+")(sharedChunk); ("+_+")(sharedChunk); self.onerror = null;",ht={};s(ht),$=it(ht),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&($.workerUrl=window.URL.createObjectURL(new Blob([st],{type:"text/javascript"})))}}et(["exports"],function(j){var it=typeof self<"u"?self:{},st="2.11.1";let ht;const vt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(ht==null){const nt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ht={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):nt}catch{ht=nt}}return ht},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ft={supported:!1,testSupport:function(nt){!yt&&ct&&(Et?Ot(nt):pt=nt)}};let pt,ct,yt=!1,Et=!1;function Ot(nt){const _e=nt.createTexture();nt.bindTexture(nt.TEXTURE_2D,_e);try{if(nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,nt.RGBA,nt.UNSIGNED_BYTE,ct),nt.isContextLost())return;ft.supported=!0}catch{}nt.deleteTexture(_e),yt=!0}it.document&&(ct=it.document.createElement("img"),ct.onload=function(){pt&&Ot(pt),pt=null,Et=!0},ct.onerror=function(){yt=!0,pt=null},ct.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Lt="01";var Tt=It;function It(nt,_e,rt,at){this.cx=3*nt,this.bx=3*(rt-nt)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*_e,this.by=3*(at-_e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=nt,this.p1y=_e,this.p2x=rt,this.p2y=at}It.prototype={sampleCurveX:function(nt){return((this.ax*nt+this.bx)*nt+this.cx)*nt},sampleCurveY:function(nt){return((this.ay*nt+this.by)*nt+this.cy)*nt},sampleCurveDerivativeX:function(nt){return(3*this.ax*nt+2*this.bx)*nt+this.cx},solveCurveX:function(nt,_e){if(_e===void 0&&(_e=1e-6),nt<0)return 0;if(nt>1)return 1;for(var rt=nt,at=0;at<8;at++){var ut=this.sampleCurveX(rt)-nt;if(Math.abs(ut)<_e)return rt;var _t=this.sampleCurveDerivativeX(rt);if(Math.abs(_t)<1e-6)break;rt-=ut/_t}var At=0,Dt=1;for(rt=nt,at=0;at<20&&(ut=this.sampleCurveX(rt),!(Math.abs(ut-nt)<_e));at++)nt>ut?At=rt:Dt=rt,rt=.5*(Dt-At)+At;return rt},solve:function(nt,_e){return this.sampleCurveY(this.solveCurveX(nt,_e))}};var mt=Bt;function Bt(nt,_e){this.x=nt,this.y=_e}Bt.prototype={clone:function(){return new Bt(this.x,this.y)},add:function(nt){return this.clone()._add(nt)},sub:function(nt){return this.clone()._sub(nt)},multByPoint:function(nt){return this.clone()._multByPoint(nt)},divByPoint:function(nt){return this.clone()._divByPoint(nt)},mult:function(nt){return this.clone()._mult(nt)},div:function(nt){return this.clone()._div(nt)},rotate:function(nt){return this.clone()._rotate(nt)},rotateAround:function(nt,_e){return this.clone()._rotateAround(nt,_e)},matMult:function(nt){return this.clone()._matMult(nt)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(nt){return this.x===nt.x&&this.y===nt.y},dist:function(nt){return Math.sqrt(this.distSqr(nt))},distSqr:function(nt){var _e=nt.x-this.x,rt=nt.y-this.y;return _e*_e+rt*rt},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(nt){return Math.atan2(this.y-nt.y,this.x-nt.x)},angleWith:function(nt){return this.angleWithSep(nt.x,nt.y)},angleWithSep:function(nt,_e){return Math.atan2(this.x*_e-this.y*nt,this.x*nt+this.y*_e)},_matMult:function(nt){var _e=nt[2]*this.x+nt[3]*this.y;return this.x=nt[0]*this.x+nt[1]*this.y,this.y=_e,this},_add:function(nt){return this.x+=nt.x,this.y+=nt.y,this},_sub:function(nt){return this.x-=nt.x,this.y-=nt.y,this},_mult:function(nt){return this.x*=nt,this.y*=nt,this},_div:function(nt){return this.x/=nt,this.y/=nt,this},_multByPoint:function(nt){return this.x*=nt.x,this.y*=nt.y,this},_divByPoint:function(nt){return this.x/=nt.x,this.y/=nt.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var nt=this.y;return this.y=this.x,this.x=-nt,this},_rotate:function(nt){var _e=Math.cos(nt),rt=Math.sin(nt),at=rt*this.x+_e*this.y;return this.x=_e*this.x-rt*this.y,this.y=at,this},_rotateAround:function(nt,_e){var rt=Math.cos(nt),at=Math.sin(nt),ut=_e.y+at*(this.x-_e.x)+rt*(this.y-_e.y);return this.x=_e.x+rt*(this.x-_e.x)-at*(this.y-_e.y),this.y=ut,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Bt.convert=function(nt){return nt instanceof Bt?nt:Array.isArray(nt)?new Bt(nt[0],nt[1]):nt};const nn=Math.PI/180,sn=180/Math.PI;function xt(nt){return nt*nn}function St(nt){return nt*sn}const Nt=[[0,0],[1,0],[1,1],[0,1]];function Ct(nt){if(nt<=0)return 0;if(nt>=1)return 1;const _e=nt*nt,rt=_e*nt;return 4*(nt<.5?rt:3*(nt-_e)+rt-.75)}function Vt(nt,_e,rt,at){const ut=new Tt(nt,_e,rt,at);return function(_t){return ut.solve(_t)}}const Kt=Vt(.25,.1,.25,1);function Gt(nt,_e,rt){return Math.min(rt,Math.max(_e,nt))}function Ut(nt,_e,rt){return(rt=Gt((rt-nt)/(_e-nt),0,1))*rt*(3-2*rt)}function Ht(nt,_e,rt){const at=rt-_e,ut=((nt-_e)%at+at)%at+_e;return ut===_e?rt:ut}function qt(nt,_e,rt){if(!nt.length)return rt(null,[]);let at=nt.length;const ut=new Array(nt.length);let _t=null;nt.forEach((At,Dt)=>{_e(At,(Wt,Zt)=>{Wt&&(_t=Wt),ut[Dt]=Zt,--at==0&&rt(_t,ut)})})}function Pt(nt){const _e=[];for(const rt in nt)_e.push(nt[rt]);return _e}function wt(nt,..._e){for(const rt of _e)for(const at in rt)nt[at]=rt[at];return nt}let $t=1;function Xt(){return $t++}function un(){return function nt(_e){return _e?(_e^Math.random()*(16>>_e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,nt)}()}function dn(nt){return nt<=1?1:Math.pow(2,Math.ceil(Math.log(nt)/Math.LN2))}function mn(nt){return!!nt&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(nt)}function an(nt,_e){nt.forEach(rt=>{_e[rt]&&(_e[rt]=_e[rt].bind(_e))})}function en(nt,_e){return nt.indexOf(_e,nt.length-_e.length)!==-1}function Mt(nt,_e,rt){const at={};for(const ut in nt)at[ut]=_e.call(rt||this,nt[ut],ut,nt);return at}function jt(nt,_e,rt){const at={};for(const ut in nt)_e.call(rt||this,nt[ut],ut,nt)&&(at[ut]=nt[ut]);return at}function Qt(nt){return Array.isArray(nt)?nt.map(Qt):typeof nt=="object"&&nt?Mt(nt,Qt):nt}const gn={};function hn(nt){gn[nt]||(typeof console<"u"&&console.warn(nt),gn[nt]=!0)}function An(nt,_e,rt){return(rt.y-nt.y)*(_e.x-nt.x)>(_e.y-nt.y)*(rt.x-nt.x)}function Mn(nt){let _e=0;for(let rt,at,ut=0,_t=nt.length,At=_t-1;ut<_t;At=ut++)rt=nt[ut],at=nt[At],_e+=(at.x-rt.x)*(rt.y+at.y);return _e}function Yn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Nr(nt){const _e={};if(nt.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(rt,at,ut,_t)=>{const At=ut||_t;return _e[at]=!At||At.toLowerCase(),""}),_e["max-age"]){const rt=parseInt(_e["max-age"],10);isNaN(rt)?delete _e["max-age"]:_e["max-age"]=rt}return _e}let ro=null;function to(nt){if(ro==null){const _e=nt.navigator?nt.navigator.userAgent:null;ro=!!nt.safari||!(!_e||!(/\b(iPad|iPhone|iPod)\b/.test(_e)||_e.match("Safari")&&!_e.match("Chrome")))}return ro}function zr(nt){try{const _e=it[nt];return _e.setItem("_mapbox_test_",1),_e.removeItem("_mapbox_test_"),!0}catch{return!1}}function In(nt,_e){return[nt[4*_e],nt[4*_e+1],nt[4*_e+2],nt[4*_e+3]]}const kn="mapbox-tiles";let Kn,vr,yr=500,Wr=50;function Hr(){try{return it.caches}catch{}}function Lr(){Hr()&&!Kn&&(Kn=it.caches.open(kn))}function Ir(nt){const _e=nt.indexOf("?");if(_e<0)return nt;const rt=function(ut){const _t=ut.indexOf("?");return _t>0?ut.slice(_t+1).split("&"):[]}(nt),at=rt.filter(ut=>{const _t=ut.split("=");return _t[0]==="language"||_t[0]==="worldview"});return at.length?`${nt.slice(0,_e)}?${at.join("&")}`:nt.slice(0,_e)}let jr=1/0;const Co={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Co);class Jo extends Error{constructor(_e,rt,at){rt===401&&ur(at)&&(_e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(_e),this.status=rt,this.url=at}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ps=Yn()?()=>self.worker&&self.worker.referrer:()=>(it.location.protocol==="blob:"?it.parent:it).location.href,ds=function(nt,_e){if(!(/^file:/.test(rt=nt.url)||/^file:/.test(ps())&&!/^\w+:/.test(rt))){if(it.fetch&&it.Request&&it.AbortController&&it.Request.prototype.hasOwnProperty("signal"))return function(at,ut){const _t=new it.AbortController,At=new it.Request(at.url,{method:at.method||"GET",body:at.body,credentials:at.credentials,headers:at.headers,referrer:ps(),signal:_t.signal});let Dt=!1,Wt=!1;const Zt=(tn=At.url).indexOf("sku=")>0&&ur(tn);var tn;at.type==="json"&&At.headers.set("Accept","application/json");const cn=(wn,xn,On)=>{if(Wt)return;if(wn&&wn.message!=="SecurityError"&&hn(wn),xn&&On)return fn(xn);const Un=Date.now();it.fetch(At).then(nr=>{if(nr.ok){const hr=Zt?nr.clone():null;return fn(nr,hr,Un)}return ut(new Jo(nr.statusText,nr.status,at.url))}).catch(nr=>{nr.code!==20&&ut(new Error(nr.message))})},fn=(wn,xn,On)=>{(at.type==="arrayBuffer"?wn.arrayBuffer():at.type==="json"?wn.json():wn.text()).then(Un=>{Wt||(xn&&On&&function(nr,hr,tr){if(Lr(),!Kn)return;const sr={status:hr.status,statusText:hr.statusText,headers:new it.Headers};hr.headers.forEach((Br,kr)=>sr.headers.set(kr,Br));const mr=Nr(hr.headers.get("Cache-Control")||"");if(mr["no-store"])return;mr["max-age"]&&sr.headers.set("Expires",new Date(tr+1e3*mr["max-age"]).toUTCString());const ar=sr.headers.get("Expires");ar&&(new Date(ar).getTime()-tr<42e4||function(Br,kr){if(vr===void 0)try{new Response(new ReadableStream),vr=!0}catch{vr=!1}vr?kr(Br.body):Br.blob().then(kr)}(hr,Br=>{const kr=new it.Response(Br,sr);Lr(),Kn&&Kn.then(Jr=>Jr.put(Ir(nr.url),kr)).catch(Jr=>hn(Jr.message))}))}(At,xn,On),Dt=!0,ut(null,Un,wn.headers.get("Cache-Control"),wn.headers.get("Expires")))}).catch(Un=>{Wt||ut(new Error(Un.message))})};return Zt?function(wn,xn){if(Lr(),!Kn)return xn(null);const On=Ir(wn.url);Kn.then(Un=>{Un.match(On).then(nr=>{const hr=function(tr){if(!tr)return!1;const sr=new Date(tr.headers.get("Expires")||0),mr=Nr(tr.headers.get("Cache-Control")||"");return sr>Date.now()&&!mr["no-cache"]}(nr);Un.delete(On),hr&&Un.put(On,nr.clone()),xn(null,nr,hr)}).catch(xn)}).catch(xn)}(At,cn):cn(null,null),{cancel:()=>{Wt=!0,Dt||_t.abort()}}}(nt,_e);if(Yn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",nt,_e,void 0,!0)}var rt;return function(at,ut){const _t=new it.XMLHttpRequest;_t.open(at.method||"GET",at.url,!0),at.type==="arrayBuffer"&&(_t.responseType="arraybuffer");for(const At in at.headers)_t.setRequestHeader(At,at.headers[At]);return at.type==="json"&&(_t.responseType="text",_t.setRequestHeader("Accept","application/json")),_t.withCredentials=at.credentials==="include",_t.onerror=()=>{ut(new Error(_t.statusText))},_t.onload=()=>{if((_t.status>=200&&_t.status<300||_t.status===0)&&_t.response!==null){let At=_t.response;if(at.type==="json")try{At=JSON.parse(_t.response)}catch(Dt){return ut(Dt)}ut(null,At,_t.getResponseHeader("Cache-Control"),_t.getResponseHeader("Expires"))}else ut(new Jo(_t.statusText,_t.status,at.url))},_t.send(at.body),{cancel:()=>_t.abort()}}(nt,_e)},Ss=function(nt,_e){return ds(wt(nt,{type:"arrayBuffer"}),_e)};function Al(nt){const _e=it.document.createElement("a");return _e.href=nt,_e.protocol===it.document.location.protocol&&_e.host===it.document.location.host}const qo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let na,Gr;na=[],Gr=0;const bn=function(nt,_e){if(ft.supported&&(nt.headers||(nt.headers={}),nt.headers.accept="image/webp,*/*"),Gr>=vt.MAX_PARALLEL_IMAGE_REQUESTS){const _t={requestParameters:nt,callback:_e,cancelled:!1,cancel(){this.cancelled=!0}};return na.push(_t),_t}Gr++;let rt=!1;const at=()=>{if(!rt)for(rt=!0,Gr--;na.length&&Gr<vt.MAX_PARALLEL_IMAGE_REQUESTS;){const _t=na.shift(),{requestParameters:At,callback:Dt,cancelled:Wt}=_t;Wt||(_t.cancel=bn(At,Dt).cancel)}},ut=Ss(nt,(_t,At,Dt,Wt)=>{at(),_t?_e(_t):At&&(it.createImageBitmap?function(Zt,tn){const cn=new it.Blob([new Uint8Array(Zt)],{type:"image/png"});it.createImageBitmap(cn).then(fn=>{tn(null,fn)}).catch(fn=>{tn(new Error(`Could not load image because of ${fn.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(At,(Zt,tn)=>_e(Zt,tn,Dt,Wt)):function(Zt,tn){const cn=new it.Image,fn=it.URL;cn.onload=()=>{tn(null,cn),fn.revokeObjectURL(cn.src),cn.onload=null,it.requestAnimationFrame(()=>{cn.src=qo})},cn.onerror=()=>tn(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const wn=new it.Blob([new Uint8Array(Zt)],{type:"image/png"});cn.src=Zt.byteLength?fn.createObjectURL(wn):qo}(At,(Zt,tn)=>_e(Zt,tn,Dt,Wt)))});return{cancel:()=>{ut.cancel(),at()}}},En="NO_ACCESS_TOKEN";function Bn(nt){return nt.indexOf("mapbox:")===0}function ur(nt){return vt.API_URL_REGEX.test(nt)}function pr(nt){return vt.API_STYLE_REGEX.test(nt)&&!Zr(nt)}function Zr(nt){return vt.API_SPRITE_REGEX.test(nt)}const Xr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function qr(nt){const _e=nt.match(Xr);if(!_e)throw new Error("Unable to parse URL object");return{protocol:_e[1],authority:_e[2],path:_e[3]||"/",params:_e[4]?_e[4].split("&"):[]}}function Mr(nt){const _e=nt.params.length?`?${nt.params.join("&")}`:"";return`${nt.protocol}://${nt.authority}${nt.path}${_e}`}function Tr(nt){if(!nt)return null;const _e=nt.split(".");if(!_e||_e.length!==3)return null;try{return JSON.parse(decodeURIComponent(it.atob(_e[1]).split("").map(rt=>"%"+("00"+rt.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Wo{constructor(_e){this.type=_e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(_e){const rt=Tr(vt.ACCESS_TOKEN);let at="";return at=rt&&rt.u?it.btoa(encodeURIComponent(rt.u).replace(/%([0-9A-F]{2})/g,(ut,_t)=>String.fromCharCode(Number("0x"+_t)))):vt.ACCESS_TOKEN||"",_e?`mapbox.eventData.${_e}:${at}`:`mapbox.eventData:${at}`}fetchEventData(){const _e=zr("localStorage"),rt=this.getStorageKey(),at=this.getStorageKey("uuid");if(_e)try{const ut=it.localStorage.getItem(rt);ut&&(this.eventData=JSON.parse(ut));const _t=it.localStorage.getItem(at);_t&&(this.anonId=_t)}catch{hn("Unable to read from LocalStorage")}}saveEventData(){const _e=zr("localStorage"),rt=this.getStorageKey(),at=this.getStorageKey("uuid");if(_e)try{it.localStorage.setItem(at,this.anonId),Object.keys(this.eventData).length>=1&&it.localStorage.setItem(rt,JSON.stringify(this.eventData))}catch{hn("Unable to write to LocalStorage")}}processRequests(_e){}postEvent(_e,rt,at,ut){if(!vt.EVENTS_URL)return;const _t=qr(vt.EVENTS_URL);_t.params.push(`access_token=${ut||vt.ACCESS_TOKEN||""}`);const At={event:this.type,created:new Date(_e).toISOString()},Dt=rt?wt(At,rt):At,Wt={url:Mr(_t),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Dt])};this.pendingRequest=function(Zt,tn){return ds(wt(Zt,{method:"POST"}),tn)}(Wt,Zt=>{this.pendingRequest=null,at(Zt),this.saveEventData(),this.processRequests(ut)})}queueRequest(_e,rt){this.queue.push(_e),this.processRequests(rt)}}const Vn=new class extends Wo{constructor(nt){super("appUserTurnstile"),this._customAccessToken=nt}postTurnstileEvent(nt,_e){vt.EVENTS_URL&&vt.ACCESS_TOKEN&&Array.isArray(nt)&&nt.some(rt=>Bn(rt)||ur(rt))&&this.queueRequest(Date.now(),_e)}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const _e=Tr(vt.ACCESS_TOKEN),rt=_e?_e.u:vt.ACCESS_TOKEN;let at=rt!==this.eventData.tokenU;mn(this.anonId)||(this.anonId=un(),at=!0);const ut=this.queue.shift();if(this.eventData.lastSuccess){const _t=new Date(this.eventData.lastSuccess),At=new Date(ut),Dt=(ut-this.eventData.lastSuccess)/864e5;at=at||Dt>=1||Dt<-1||_t.getDate()!==At.getDate()}else at=!0;at?this.postEvent(ut,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:Lt,"enabled.telemetry":!1,userId:this.anonId},_t=>{_t||(this.eventData.lastSuccess=ut,this.eventData.tokenU=rt)},nt):this.processRequests()}},Sn=Vn.postTurnstileEvent.bind(Vn),Cn=new class extends Wo{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(nt,_e,rt,at){this.skuToken=_e,this.errorCb=at,vt.EVENTS_URL&&(rt||vt.ACCESS_TOKEN?this.queueRequest({id:nt,timestamp:Date.now()},rt):this.errorCb(new Error(En)))}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;const{id:_e,timestamp:rt}=this.queue.shift();_e&&this.success[_e]||(this.anonId||this.fetchEventData(),mn(this.anonId)||(this.anonId=un()),this.postEvent(rt,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:Lt,skuToken:this.skuToken,userId:this.anonId},at=>{at?this.errorCb(at):_e&&(this.success[_e]=!0)},nt))}},Hn=Cn.postMapLoadEvent.bind(Cn),Jn=new class extends Wo{constructor(){super("gljs.performance")}postPerformanceEvent(nt,_e){vt.EVENTS_URL&&(nt||vt.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:_e},nt)}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:_e,performanceData:rt}=this.queue.shift(),at=function(ut){const _t=it.performance.getEntriesByType("resource"),At=it.performance.getEntriesByType("mark"),Dt=function(fn){const wn={};if(fn){for(const xn in fn)if(xn!=="other")for(const On of fn[xn]){const Un=`${xn}RequestCount`,nr=`${xn}ResolveRangeMin`,hr=`${xn}ResolveRangeMax`;wn[nr]=Math.min(wn[nr]||1/0,On.startTime),wn[hr]=Math.max(wn[hr]||-1/0,On.responseEnd),wn[Un]===void 0&&(wn[Un]=0),++wn[Un]}}return wn}(function(fn,wn){const xn={};if(fn)for(const On of fn){const Un=wn(On);xn[Un]===void 0&&(xn[Un]=[]),xn[Un].push(On)}return xn}(_t,po)),Wt=it.devicePixelRatio,Zt=it.navigator.connection||it.navigator.mozConnection||it.navigator.webkitConnection,tn={counters:[],metadata:[],attributes:[]},cn=(fn,wn,xn)=>{xn!=null&&fn.push({name:wn,value:xn.toString()})};for(const fn in Dt)cn(tn.counters,fn,Dt[fn]);if(ut.interactionRange[0]!==1/0&&ut.interactionRange[1]!==-1/0&&(cn(tn.counters,"interactionRangeMin",ut.interactionRange[0]),cn(tn.counters,"interactionRangeMax",ut.interactionRange[1])),At)for(const fn of Object.keys(xr)){const wn=xr[fn],xn=At.find(On=>On.name===wn);xn&&cn(tn.counters,wn,xn.startTime)}return cn(tn.counters,"visibilityHidden",ut.visibilityHidden),cn(tn.attributes,"style",function(fn){if(fn)for(const wn of fn){const xn=wn.name.split("?")[0];if(pr(xn)){const On=xn.split("/").slice(-2);if(On.length===2)return`mapbox://styles/${On[0]}/${On[1]}`}}}(_t)),cn(tn.attributes,"terrainEnabled",ut.terrainEnabled?"true":"false"),cn(tn.attributes,"fogEnabled",ut.fogEnabled?"true":"false"),cn(tn.attributes,"projection",ut.projection.name),cn(tn.attributes,"zoom",ut.zoom),cn(tn.metadata,"devicePixelRatio",Wt),cn(tn.metadata,"connectionEffectiveType",Zt?Zt.effectiveType:void 0),cn(tn.metadata,"navigatorUserAgent",it.navigator.userAgent),cn(tn.metadata,"screenWidth",it.screen.width),cn(tn.metadata,"screenHeight",it.screen.height),cn(tn.metadata,"windowWidth",it.innerWidth),cn(tn.metadata,"windowHeight",it.innerHeight),cn(tn.metadata,"mapWidth",ut.width/Wt),cn(tn.metadata,"mapHeight",ut.height/Wt),cn(tn.metadata,"webglRenderer",ut.renderer),cn(tn.metadata,"webglVendor",ut.vendor),cn(tn.metadata,"sdkVersion",st),cn(tn.metadata,"sdkIdentifier","mapbox-gl-js"),tn}(rt);for(const ut of at.metadata);for(const ut of at.counters);for(const ut of at.attributes);this.postEvent(_e,at,()=>{},nt)}},ir=Jn.postPerformanceEvent.bind(Jn),gr=new class extends Wo{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(nt,_e,rt,at){if(!vt.API_URL||!vt.SESSION_PATH)return;const ut=qr(vt.API_URL+vt.SESSION_PATH);ut.params.push(`sku=${_e||""}`),ut.params.push(`access_token=${at||vt.ACCESS_TOKEN||""}`);const _t={url:Mr(ut),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(At,Dt){return ds(wt(At,{method:"GET"}),Dt)}(_t,At=>{this.pendingRequest=null,rt(At),this.saveEventData(),this.processRequests(at)})}getSessionAPI(nt,_e,rt,at){this.skuToken=_e,this.errorCb=at,vt.SESSION_PATH&&vt.API_URL&&(rt||vt.ACCESS_TOKEN?this.queueRequest({id:nt,timestamp:Date.now()},rt):this.errorCb(new Error(En)))}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;const{id:_e,timestamp:rt}=this.queue.shift();_e&&this.success[_e]||this.getSession(rt,this.skuToken,at=>{at?this.errorCb(at):_e&&(this.success[_e]=!0)},nt)}},_r=gr.getSessionAPI.bind(gr),fr=new Set,xr={create:"create",load:"load",fullLoad:"fullLoad"},Yr={mark(nt){it.performance.mark(nt)},measure(nt,_e,rt){it.performance.measure(nt,_e,rt)}};function po(nt){const _e=nt.name.split("?")[0];return _e.includes("mapbox-gl.js")?"javascript":_e.includes("mapbox-gl.css")?"css":function(rt){return vt.API_FONTS_REGEX.test(rt)}(_e)?"fontRange":Zr(_e)?"sprite":pr(_e)?"style":function(rt){return vt.API_TILEJSON_REGEX.test(rt)}(_e)?"tilejson":"other"}const io=it.performance;function ko(nt){const _e=nt?nt.url.toString():void 0;return io.getEntriesByName(_e)}let Do,Lo,zo,ts;const ms={now:()=>zo!==void 0?zo:it.performance.now(),setNow(nt){zo=nt},restoreNow(){zo=void 0},frame(nt){const _e=it.requestAnimationFrame(nt);return{cancel:()=>it.cancelAnimationFrame(_e)}},getImageData(nt,_e=0){const{width:rt,height:at}=nt;ts||(ts=it.document.createElement("canvas"));const ut=ts.getContext("2d");if(!ut)throw new Error("failed to create canvas 2d context");return(rt>ts.width||at>ts.height)&&(ts.width=rt,ts.height=at),ut.clearRect(-_e,-_e,rt+2*_e,at+2*_e),ut.drawImage(nt,0,0,rt,at),ut.getImageData(-_e,-_e,rt+2*_e,at+2*_e)},resolveURL:nt=>(Do||(Do=it.document.createElement("a")),Do.href=nt,Do.href),get devicePixelRatio(){return it.devicePixelRatio},get prefersReducedMotion(){return!!it.matchMedia&&(Lo==null&&(Lo=it.matchMedia("(prefers-reduced-motion: reduce)")),Lo.matches)}};function Eo(nt,_e,rt){rt[nt]&&rt[nt].indexOf(_e)!==-1||(rt[nt]=rt[nt]||[],rt[nt].push(_e))}function Rs(nt,_e,rt){if(rt&&rt[nt]){const at=rt[nt].indexOf(_e);at!==-1&&rt[nt].splice(at,1)}}class As{constructor(_e,rt={}){wt(this,rt),this.type=_e}}class Su extends As{constructor(_e,rt={}){super("error",wt({error:_e},rt))}}class cu{on(_e,rt){return this._listeners=this._listeners||{},Eo(_e,rt,this._listeners),this}off(_e,rt){return Rs(_e,rt,this._listeners),Rs(_e,rt,this._oneTimeListeners),this}once(_e,rt){return rt?(this._oneTimeListeners=this._oneTimeListeners||{},Eo(_e,rt,this._oneTimeListeners),this):new Promise(at=>this.once(_e,at))}fire(_e,rt){typeof _e=="string"&&(_e=new As(_e,rt||{}));const at=_e.type;if(this.listens(at)){_e.target=this;const ut=this._listeners&&this._listeners[at]?this._listeners[at].slice():[];for(const Dt of ut)Dt.call(this,_e);const _t=this._oneTimeListeners&&this._oneTimeListeners[at]?this._oneTimeListeners[at].slice():[];for(const Dt of _t)Rs(at,Dt,this._oneTimeListeners),Dt.call(this,_e);const At=this._eventedParent;At&&(wt(_e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),At.fire(_e))}else _e instanceof Su&&console.error(_e.error);return this}listens(_e){return!!(this._listeners&&this._listeners[_e]&&this._listeners[_e].length>0||this._oneTimeListeners&&this._oneTimeListeners[_e]&&this._oneTimeListeners[_e].length>0||this._eventedParent&&this._eventedParent.listens(_e))}setEventedParent(_e,rt){return this._eventedParent=_e,this._eventedParentData=rt,this}}var $r=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function xa(nt,..._e){for(const rt of _e)for(const at in rt)nt[at]=rt[at];return nt}function Gs(nt){return nt instanceof Number||nt instanceof String||nt instanceof Boolean?nt.valueOf():nt}function hu(nt){if(Array.isArray(nt))return nt.map(hu);if(nt instanceof Object&&!(nt instanceof Number||nt instanceof String||nt instanceof Boolean)){const _e={};for(const rt in nt)_e[rt]=hu(nt[rt]);return _e}return Gs(nt)}class ru extends Error{constructor(_e,rt){super(rt),this.message=rt,this.key=_e}}var Au=ru;class El{constructor(_e,rt=[]){this.parent=_e,this.bindings={};for(const[at,ut]of rt)this.bindings[at]=ut}concat(_e){return new El(this,_e)}get(_e){if(this.bindings[_e])return this.bindings[_e];if(this.parent)return this.parent.get(_e);throw new Error(`${_e} not found in scope.`)}has(_e){return!!this.bindings[_e]||!!this.parent&&this.parent.has(_e)}}var nm=El;const tp={kind:"null"},wo={kind:"number"},as={kind:"string"},us={kind:"boolean"},Eu={kind:"color"},np={kind:"object"},rs={kind:"value"},Uu={kind:"collator"},zu={kind:"formatted"},fu={kind:"resolvedImage"};function Bl(nt,_e){return{kind:"array",itemType:nt,N:_e}}function ys(nt){if(nt.kind==="array"){const _e=ys(nt.itemType);return typeof nt.N=="number"?`array<${_e}, ${nt.N}>`:nt.itemType.kind==="value"?"array":`array<${_e}>`}return nt.kind}const Cm=[tp,wo,as,us,Eu,zu,np,Bl(rs),fu];function Us(nt,_e){if(_e.kind==="error")return null;if(nt.kind==="array"){if(_e.kind==="array"&&(_e.N===0&&_e.itemType.kind==="value"||!Us(nt.itemType,_e.itemType))&&(typeof nt.N!="number"||nt.N===_e.N))return null}else{if(nt.kind===_e.kind)return null;if(nt.kind==="value"){for(const rt of Cm)if(!Us(rt,_e))return null}}return`Expected ${ys(nt)} but found ${ys(_e)} instead.`}function Vu(nt,_e){return _e.some(rt=>rt.kind===nt.kind)}function Qs(nt,_e){return _e.some(rt=>rt==="null"?nt===null:rt==="array"?Array.isArray(nt):rt==="object"?nt&&!Array.isArray(nt)&&typeof nt=="object":rt===typeof nt)}var Wu,rp={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function jp(nt){return(nt=Math.round(nt))<0?0:nt>255?255:nt}function ga(nt){return jp(nt[nt.length-1]==="%"?parseFloat(nt)/100*255:parseInt(nt))}function Xl(nt){return(_e=nt[nt.length-1]==="%"?parseFloat(nt)/100:parseFloat(nt))<0?0:_e>1?1:_e;var _e}function Il(nt,_e,rt){return rt<0?rt+=1:rt>1&&(rt-=1),6*rt<1?nt+(_e-nt)*rt*6:2*rt<1?_e:3*rt<2?nt+(_e-nt)*(2/3-rt)*6:nt}try{Wu={}.parseCSSColor=function(nt){var _e,rt=nt.replace(/ /g,"").toLowerCase();if(rt in rp)return rp[rt].slice();if(rt[0]==="#")return rt.length===4?(_e=parseInt(rt.substr(1),16))>=0&&_e<=4095?[(3840&_e)>>4|(3840&_e)>>8,240&_e|(240&_e)>>4,15&_e|(15&_e)<<4,1]:null:rt.length===7&&(_e=parseInt(rt.substr(1),16))>=0&&_e<=16777215?[(16711680&_e)>>16,(65280&_e)>>8,255&_e,1]:null;var at=rt.indexOf("("),ut=rt.indexOf(")");if(at!==-1&&ut+1===rt.length){var _t=rt.substr(0,at),At=rt.substr(at+1,ut-(at+1)).split(","),Dt=1;switch(_t){case"rgba":if(At.length!==4)return null;Dt=Xl(At.pop());case"rgb":return At.length!==3?null:[ga(At[0]),ga(At[1]),ga(At[2]),Dt];case"hsla":if(At.length!==4)return null;Dt=Xl(At.pop());case"hsl":if(At.length!==3)return null;var Wt=(parseFloat(At[0])%360+360)%360/360,Zt=Xl(At[1]),tn=Xl(At[2]),cn=tn<=.5?tn*(Zt+1):tn+Zt-tn*Zt,fn=2*tn-cn;return[jp(255*Il(fn,cn,Wt+1/3)),jp(255*Il(fn,cn,Wt)),jp(255*Il(fn,cn,Wt-1/3)),Dt];default:return null}}return null}}catch{}class _s{constructor(_e,rt,at,ut=1){this.r=_e,this.g=rt,this.b=at,this.a=ut}static parse(_e){if(!_e)return;if(_e instanceof _s)return _e;if(typeof _e!="string")return;const rt=Wu(_e);return rt?new _s(rt[0]/255*rt[3],rt[1]/255*rt[3],rt[2]/255*rt[3],rt[3]):void 0}toString(){const[_e,rt,at,ut]=this.toArray();return`rgba(${Math.round(_e)},${Math.round(rt)},${Math.round(at)},${ut})`}toArray(){const{r:_e,g:rt,b:at,a:ut}=this;return ut===0?[0,0,0,0]:[255*_e/ut,255*rt/ut,255*at/ut,ut]}toArray01(){const{r:_e,g:rt,b:at,a:ut}=this;return ut===0?[0,0,0,0]:[_e/ut,rt/ut,at/ut,ut]}toArray01PremultipliedAlpha(){const{r:_e,g:rt,b:at,a:ut}=this;return[_e,rt,at,ut]}}_s.black=new _s(0,0,0,1),_s.white=new _s(1,1,1,1),_s.transparent=new _s(0,0,0,0),_s.red=new _s(1,0,0,1),_s.blue=new _s(0,0,1,1);var zs=_s;class Fp{constructor(_e,rt,at){this.sensitivity=_e?rt?"variant":"case":rt?"accent":"base",this.locale=at,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(_e,rt){return this.collator.compare(_e,rt)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ip{constructor(_e,rt,at,ut,_t){this.text=_e.normalize?_e.normalize():_e,this.image=rt,this.scale=at,this.fontStack=ut,this.textColor=_t}}class zt{constructor(_e){this.sections=_e}static fromString(_e){return new zt([new ip(_e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(_e=>_e.text.length!==0||_e.image&&_e.image.name.length!==0)}static factory(_e){return _e instanceof zt?_e:zt.fromString(_e)}toString(){return this.sections.length===0?"":this.sections.map(_e=>_e.text).join("")}serialize(){const _e=["format"];for(const rt of this.sections){if(rt.image){_e.push(["image",rt.image.name]);continue}_e.push(rt.text);const at={};rt.fontStack&&(at["text-font"]=["literal",rt.fontStack.split(",")]),rt.scale&&(at["font-scale"]=rt.scale),rt.textColor&&(at["text-color"]=["rgba"].concat(rt.textColor.toArray())),_e.push(at)}return _e}}class on{constructor(_e){this.name=_e.name,this.available=_e.available}toString(){return this.name}static fromString(_e){return _e?new on({name:_e,available:!1}):null}serialize(){return["image",this.name]}}function _n(nt,_e,rt,at){return typeof nt=="number"&&nt>=0&&nt<=255&&typeof _e=="number"&&_e>=0&&_e<=255&&typeof rt=="number"&&rt>=0&&rt<=255?at===void 0||typeof at=="number"&&at>=0&&at<=1?null:`Invalid rgba value [${[nt,_e,rt,at].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof at=="number"?[nt,_e,rt,at]:[nt,_e,rt]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Rn(nt){if(nt===null||typeof nt=="string"||typeof nt=="boolean"||typeof nt=="number"||nt instanceof zs||nt instanceof Fp||nt instanceof zt||nt instanceof on)return!0;if(Array.isArray(nt)){for(const _e of nt)if(!Rn(_e))return!1;return!0}if(typeof nt=="object"){for(const _e in nt)if(!Rn(nt[_e]))return!1;return!0}return!1}function Nn(nt){if(nt===null)return tp;if(typeof nt=="string")return as;if(typeof nt=="boolean")return us;if(typeof nt=="number")return wo;if(nt instanceof zs)return Eu;if(nt instanceof Fp)return Uu;if(nt instanceof zt)return zu;if(nt instanceof on)return fu;if(Array.isArray(nt)){const _e=nt.length;let rt;for(const at of nt){const ut=Nn(at);if(rt){if(rt===ut)continue;rt=rs;break}rt=ut}return Bl(rt||rs,_e)}return np}function rr(nt){const _e=typeof nt;return nt===null?"":_e==="string"||_e==="number"||_e==="boolean"?String(nt):nt instanceof zs||nt instanceof zt||nt instanceof on?nt.toString():JSON.stringify(nt)}class Ln{constructor(_e,rt){this.type=_e,this.value=rt}static parse(_e,rt){if(_e.length!==2)return rt.error(`'literal' expression requires exactly one argument, but found ${_e.length-1} instead.`);if(!Rn(_e[1]))return rt.error("invalid value");const at=_e[1];let ut=Nn(at);const _t=rt.expectedType;return ut.kind!=="array"||ut.N!==0||!_t||_t.kind!=="array"||typeof _t.N=="number"&&_t.N!==0||(ut=_t),new Ln(ut,at)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zs?["rgba"].concat(this.value.toArray()):this.value instanceof zt?this.value.serialize():this.value}}var Xn=Ln,Er=class{constructor(nt){this.name="ExpressionEvaluationError",this.message=nt}toJSON(){return this.message}};const Cr={string:as,number:wo,boolean:us,object:np};class Qr{constructor(_e,rt){this.type=_e,this.args=rt}static parse(_e,rt){if(_e.length<2)return rt.error("Expected at least one argument.");let at,ut=1;const _t=_e[0];if(_t==="array"){let Dt,Wt;if(_e.length>2){const Zt=_e[1];if(typeof Zt!="string"||!(Zt in Cr)||Zt==="object")return rt.error('The item type argument of "array" must be one of string, number, boolean',1);Dt=Cr[Zt],ut++}else Dt=rs;if(_e.length>3){if(_e[2]!==null&&(typeof _e[2]!="number"||_e[2]<0||_e[2]!==Math.floor(_e[2])))return rt.error('The length argument to "array" must be a positive integer literal',2);Wt=_e[2],ut++}at=Bl(Dt,Wt)}else at=Cr[_t];const At=[];for(;ut<_e.length;ut++){const Dt=rt.parse(_e[ut],ut,rs);if(!Dt)return null;At.push(Dt)}return new Qr(at,At)}evaluate(_e){for(let rt=0;rt<this.args.length;rt++){const at=this.args[rt].evaluate(_e);if(!Us(this.type,Nn(at)))return at;if(rt===this.args.length-1)throw new Er(`Expected value to be of type ${ys(this.type)}, but found ${ys(Nn(at))} instead.`)}return null}eachChild(_e){this.args.forEach(_e)}outputDefined(){return this.args.every(_e=>_e.outputDefined())}serialize(){const _e=this.type,rt=[_e.kind];if(_e.kind==="array"){const at=_e.itemType;if(at.kind==="string"||at.kind==="number"||at.kind==="boolean"){rt.push(at.kind);const ut=_e.N;(typeof ut=="number"||this.args.length>1)&&rt.push(ut)}}return rt.concat(this.args.map(at=>at.serialize()))}}var jo=Qr;class bo{constructor(_e){this.type=zu,this.sections=_e}static parse(_e,rt){if(_e.length<2)return rt.error("Expected at least one argument.");const at=_e[1];if(!Array.isArray(at)&&typeof at=="object")return rt.error("First argument must be an image or text section.");const ut=[];let _t=!1;for(let At=1;At<=_e.length-1;++At){const Dt=_e[At];if(_t&&typeof Dt=="object"&&!Array.isArray(Dt)){_t=!1;let Wt=null;if(Dt["font-scale"]&&(Wt=rt.parse(Dt["font-scale"],1,wo),!Wt))return null;let Zt=null;if(Dt["text-font"]&&(Zt=rt.parse(Dt["text-font"],1,Bl(as)),!Zt))return null;let tn=null;if(Dt["text-color"]&&(tn=rt.parse(Dt["text-color"],1,Eu),!tn))return null;const cn=ut[ut.length-1];cn.scale=Wt,cn.font=Zt,cn.textColor=tn}else{const Wt=rt.parse(_e[At],1,rs);if(!Wt)return null;const Zt=Wt.type.kind;if(Zt!=="string"&&Zt!=="value"&&Zt!=="null"&&Zt!=="resolvedImage")return rt.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_t=!0,ut.push({content:Wt,scale:null,font:null,textColor:null})}}return new bo(ut)}evaluate(_e){return new zt(this.sections.map(rt=>{const at=rt.content.evaluate(_e);return Nn(at)===fu?new ip("",at,null,null,null):new ip(rr(at),null,rt.scale?rt.scale.evaluate(_e):null,rt.font?rt.font.evaluate(_e).join(","):null,rt.textColor?rt.textColor.evaluate(_e):null)}))}eachChild(_e){for(const rt of this.sections)_e(rt.content),rt.scale&&_e(rt.scale),rt.font&&_e(rt.font),rt.textColor&&_e(rt.textColor)}outputDefined(){return!1}serialize(){const _e=["format"];for(const rt of this.sections){_e.push(rt.content.serialize());const at={};rt.scale&&(at["font-scale"]=rt.scale.serialize()),rt.font&&(at["text-font"]=rt.font.serialize()),rt.textColor&&(at["text-color"]=rt.textColor.serialize()),_e.push(at)}return _e}}class Mo{constructor(_e){this.type=fu,this.input=_e}static parse(_e,rt){if(_e.length!==2)return rt.error("Expected two arguments.");const at=rt.parse(_e[1],1,as);return at?new Mo(at):rt.error("No image name provided.")}evaluate(_e){const rt=this.input.evaluate(_e),at=on.fromString(rt);return at&&_e.availableImages&&(at.available=_e.availableImages.indexOf(rt)>-1),at}eachChild(_e){_e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ko={"to-boolean":us,"to-color":Eu,"to-number":wo,"to-string":as};class ns{constructor(_e,rt){this.type=_e,this.args=rt}static parse(_e,rt){if(_e.length<2)return rt.error("Expected at least one argument.");const at=_e[0];if((at==="to-boolean"||at==="to-string")&&_e.length!==2)return rt.error("Expected one argument.");const ut=Ko[at],_t=[];for(let At=1;At<_e.length;At++){const Dt=rt.parse(_e[At],At,rs);if(!Dt)return null;_t.push(Dt)}return new ns(ut,_t)}evaluate(_e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(_e));if(this.type.kind==="color"){let rt,at;for(const ut of this.args){if(rt=ut.evaluate(_e),at=null,rt instanceof zs)return rt;if(typeof rt=="string"){const _t=_e.parseColor(rt);if(_t)return _t}else if(Array.isArray(rt)&&(at=rt.length<3||rt.length>4?`Invalid rbga value ${JSON.stringify(rt)}: expected an array containing either three or four numeric values.`:_n(rt[0],rt[1],rt[2],rt[3]),!at))return new zs(rt[0]/255,rt[1]/255,rt[2]/255,rt[3])}throw new Er(at||`Could not parse color from value '${typeof rt=="string"?rt:String(JSON.stringify(rt))}'`)}if(this.type.kind==="number"){let rt=null;for(const at of this.args){if(rt=at.evaluate(_e),rt===null)return 0;const ut=Number(rt);if(!isNaN(ut))return ut}throw new Er(`Could not convert ${JSON.stringify(rt)} to number.`)}return this.type.kind==="formatted"?zt.fromString(rr(this.args[0].evaluate(_e))):this.type.kind==="resolvedImage"?on.fromString(rr(this.args[0].evaluate(_e))):rr(this.args[0].evaluate(_e))}eachChild(_e){this.args.forEach(_e)}outputDefined(){return this.args.every(_e=>_e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new bo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Mo(this.args[0]).serialize();const _e=[`to-${this.type.kind}`];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}var Io=ns;const Cl=["Unknown","Point","LineString","Polygon"];var iu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const nt=this.featureDistanceData.center,_e=this.featureDistanceData.scale,{x:rt,y:at}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(rt*_e-nt[0])+this.featureDistanceData.bearing[1]*(at*_e-nt[1])}return 0}parseColor(nt){let _e=this._parseColorCache[nt];return _e||(_e=this._parseColorCache[nt]=zs.parse(nt)),_e}};class Rm{constructor(_e,rt,at,ut){this.name=_e,this.type=rt,this._evaluate=at,this.args=ut}evaluate(_e){return this._evaluate(_e,this.args)}eachChild(_e){this.args.forEach(_e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(_e=>_e.serialize()))}static parse(_e,rt){const at=_e[0],ut=Rm.definitions[at];if(!ut)return rt.error(`Unknown expression "${at}". If you wanted a literal array, use ["literal", [...]].`,0);const _t=Array.isArray(ut)?ut[0]:ut.type,At=Array.isArray(ut)?[[ut[1],ut[2]]]:ut.overloads,Dt=At.filter(([Zt])=>!Array.isArray(Zt)||Zt.length===_e.length-1);let Wt=null;for(const[Zt,tn]of Dt){Wt=new Ty(rt.registry,rt.path,null,rt.scope);const cn=[];let fn=!1;for(let wn=1;wn<_e.length;wn++){const xn=_e[wn],On=Array.isArray(Zt)?Zt[wn-1]:Zt.type,Un=Wt.parse(xn,1+cn.length,On);if(!Un){fn=!0;break}cn.push(Un)}if(!fn)if(Array.isArray(Zt)&&Zt.length!==cn.length)Wt.error(`Expected ${Zt.length} arguments, but found ${cn.length} instead.`);else{for(let wn=0;wn<cn.length;wn++){const xn=Array.isArray(Zt)?Zt[wn]:Zt.type,On=cn[wn];Wt.concat(wn+1).checkSubtype(xn,On.type)}if(Wt.errors.length===0)return new Rm(at,_t,tn,cn)}}if(Dt.length===1)rt.errors.push(...Wt.errors);else{const Zt=(Dt.length?Dt:At).map(([cn])=>{return fn=cn,Array.isArray(fn)?`(${fn.map(ys).join(", ")})`:`(${ys(fn.type)}...)`;var fn}).join(" | "),tn=[];for(let cn=1;cn<_e.length;cn++){const fn=rt.parse(_e[cn],1+tn.length);if(!fn)return null;tn.push(ys(fn.type))}rt.error(`Expected arguments of type ${Zt}, but found (${tn.join(", ")}) instead.`)}return null}static register(_e,rt){Rm.definitions=rt;for(const at in rt)_e[at]=Rm}}var Gu=Rm;class e_{constructor(_e,rt,at){this.type=Uu,this.locale=at,this.caseSensitive=_e,this.diacriticSensitive=rt}static parse(_e,rt){if(_e.length!==2)return rt.error("Expected one argument.");const at=_e[1];if(typeof at!="object"||Array.isArray(at))return rt.error("Collator options argument must be an object.");const ut=rt.parse(at["case-sensitive"]!==void 0&&at["case-sensitive"],1,us);if(!ut)return null;const _t=rt.parse(at["diacritic-sensitive"]!==void 0&&at["diacritic-sensitive"],1,us);if(!_t)return null;let At=null;return at.locale&&(At=rt.parse(at.locale,1,as),!At)?null:new e_(ut,_t,At)}evaluate(_e){return new Fp(this.caseSensitive.evaluate(_e),this.diacriticSensitive.evaluate(_e),this.locale?this.locale.evaluate(_e):null)}eachChild(_e){_e(this.caseSensitive),_e(this.diacriticSensitive),this.locale&&_e(this.locale)}outputDefined(){return!1}serialize(){const _e={};return _e["case-sensitive"]=this.caseSensitive.serialize(),_e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(_e.locale=this.locale.serialize()),["collator",_e]}}const Tl=8192;function Ey(nt,_e){nt[0]=Math.min(nt[0],_e[0]),nt[1]=Math.min(nt[1],_e[1]),nt[2]=Math.max(nt[2],_e[0]),nt[3]=Math.max(nt[3],_e[1])}function _p(nt,_e){return!(nt[0]<=_e[0]||nt[2]>=_e[2]||nt[1]<=_e[1]||nt[3]>=_e[3])}function op(nt,_e){const rt=(180+nt[0])/360,at=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+nt[1]*Math.PI/360)))/360,ut=Math.pow(2,_e.z);return[Math.round(rt*ut*Tl),Math.round(at*ut*Tl)]}function t_(nt,_e,rt){const at=nt[0]-_e[0],ut=nt[1]-_e[1],_t=nt[0]-rt[0],At=nt[1]-rt[1];return at*At-_t*ut==0&&at*_t<=0&&ut*At<=0}function du(nt,_e){let rt=!1;for(let At=0,Dt=_e.length;At<Dt;At++){const Wt=_e[At];for(let Zt=0,tn=Wt.length;Zt<tn-1;Zt++){if(t_(nt,Wt[Zt],Wt[Zt+1]))return!1;(ut=Wt[Zt])[1]>(at=nt)[1]!=(_t=Wt[Zt+1])[1]>at[1]&&at[0]<(_t[0]-ut[0])*(at[1]-ut[1])/(_t[1]-ut[1])+ut[0]&&(rt=!rt)}}var at,ut,_t;return rt}function sv(nt,_e){for(let rt=0;rt<_e.length;rt++)if(du(nt,_e[rt]))return!0;return!1}function n_(nt,_e,rt,at){const ut=at[0]-rt[0],_t=at[1]-rt[1],At=(nt[0]-rt[0])*_t-ut*(nt[1]-rt[1]),Dt=(_e[0]-rt[0])*_t-ut*(_e[1]-rt[1]);return At>0&&Dt<0||At<0&&Dt>0}function av(nt,_e,rt){for(const Zt of rt)for(let tn=0;tn<Zt.length-1;++tn)if((Dt=[(At=Zt[tn+1])[0]-(_t=Zt[tn])[0],At[1]-_t[1]])[0]*(Wt=[(ut=_e)[0]-(at=nt)[0],ut[1]-at[1]])[1]-Dt[1]*Wt[0]!=0&&n_(at,ut,_t,At)&&n_(_t,At,at,ut))return!0;var at,ut,_t,At,Dt,Wt;return!1}function r_(nt,_e){for(let rt=0;rt<nt.length;++rt)if(!du(nt[rt],_e))return!1;for(let rt=0;rt<nt.length-1;++rt)if(av(nt[rt],nt[rt+1],_e))return!1;return!0}function i_(nt,_e){for(let rt=0;rt<_e.length;rt++)if(r_(nt,_e[rt]))return!0;return!1}function rm(nt,_e,rt){const at=[];for(let ut=0;ut<nt.length;ut++){const _t=[];for(let At=0;At<nt[ut].length;At++){const Dt=op(nt[ut][At],rt);Ey(_e,Dt),_t.push(Dt)}at.push(_t)}return at}function gu(nt,_e,rt){const at=[];for(let ut=0;ut<nt.length;ut++){const _t=rm(nt[ut],_e,rt);at.push(_t)}return at}function lv(nt,_e,rt,at){if(nt[0]<rt[0]||nt[0]>rt[2]){const ut=.5*at;let _t=nt[0]-rt[0]>ut?-at:rt[0]-nt[0]>ut?at:0;_t===0&&(_t=nt[0]-rt[2]>ut?-at:rt[2]-nt[0]>ut?at:0),nt[0]+=_t}Ey(_e,nt)}function pu(nt,_e,rt,at){const ut=Math.pow(2,at.z)*Tl,_t=[at.x*Tl,at.y*Tl],At=[];if(!nt)return At;for(const Dt of nt)for(const Wt of Dt){const Zt=[Wt.x+_t[0],Wt.y+_t[1]];lv(Zt,_e,rt,ut),At.push(Zt)}return At}function uv(nt,_e,rt,at){const ut=Math.pow(2,at.z)*Tl,_t=[at.x*Tl,at.y*Tl],At=[];if(!nt)return At;for(const Wt of nt){const Zt=[];for(const tn of Wt){const cn=[tn.x+_t[0],tn.y+_t[1]];Ey(_e,cn),Zt.push(cn)}At.push(Zt)}if(_e[2]-_e[0]<=ut/2){(Dt=_e)[0]=Dt[1]=1/0,Dt[2]=Dt[3]=-1/0;for(const Wt of At)for(const Zt of Wt)lv(Zt,_e,rt,ut)}var Dt;return At}class sp{constructor(_e,rt){this.type=us,this.geojson=_e,this.geometries=rt}static parse(_e,rt){if(_e.length!==2)return rt.error(`'within' expression requires exactly one argument, but found ${_e.length-1} instead.`);if(Rn(_e[1])){const at=_e[1];if(at.type==="FeatureCollection")for(let ut=0;ut<at.features.length;++ut){const _t=at.features[ut].geometry.type;if(_t==="Polygon"||_t==="MultiPolygon")return new sp(at,at.features[ut].geometry)}else if(at.type==="Feature"){const ut=at.geometry.type;if(ut==="Polygon"||ut==="MultiPolygon")return new sp(at,at.geometry)}else if(at.type==="Polygon"||at.type==="MultiPolygon")return new sp(at,at)}return rt.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(_e){if(_e.geometry()!=null&&_e.canonicalID()!=null){if(_e.geometryType()==="Point")return function(rt,at){const ut=[1/0,1/0,-1/0,-1/0],_t=[1/0,1/0,-1/0,-1/0],At=rt.canonicalID();if(!At)return!1;if(at.type==="Polygon"){const Dt=rm(at.coordinates,_t,At),Wt=pu(rt.geometry(),ut,_t,At);if(!_p(ut,_t))return!1;for(const Zt of Wt)if(!du(Zt,Dt))return!1}if(at.type==="MultiPolygon"){const Dt=gu(at.coordinates,_t,At),Wt=pu(rt.geometry(),ut,_t,At);if(!_p(ut,_t))return!1;for(const Zt of Wt)if(!sv(Zt,Dt))return!1}return!0}(_e,this.geometries);if(_e.geometryType()==="LineString")return function(rt,at){const ut=[1/0,1/0,-1/0,-1/0],_t=[1/0,1/0,-1/0,-1/0],At=rt.canonicalID();if(!At)return!1;if(at.type==="Polygon"){const Dt=rm(at.coordinates,_t,At),Wt=uv(rt.geometry(),ut,_t,At);if(!_p(ut,_t))return!1;for(const Zt of Wt)if(!r_(Zt,Dt))return!1}if(at.type==="MultiPolygon"){const Dt=gu(at.coordinates,_t,At),Wt=uv(rt.geometry(),ut,_t,At);if(!_p(ut,_t))return!1;for(const Zt of Wt)if(!i_(Zt,Dt))return!1}return!0}(_e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var bs=sp;function im(nt){if(nt instanceof Gu&&(nt.name==="get"&&nt.args.length===1||nt.name==="feature-state"||nt.name==="has"&&nt.args.length===1||nt.name==="properties"||nt.name==="geometry-type"||nt.name==="id"||/^filter-/.test(nt.name))||nt instanceof bs)return!1;let _e=!0;return nt.eachChild(rt=>{_e&&!im(rt)&&(_e=!1)}),_e}function $m(nt){if(nt instanceof Gu&&nt.name==="feature-state")return!1;let _e=!0;return nt.eachChild(rt=>{_e&&!$m(rt)&&(_e=!1)}),_e}function _a(nt,_e){if(nt instanceof Gu&&_e.indexOf(nt.name)>=0)return!1;let rt=!0;return nt.eachChild(at=>{rt&&!_a(at,_e)&&(rt=!1)}),rt}class ap{constructor(_e,rt){this.type=rt.type,this.name=_e,this.boundExpression=rt}static parse(_e,rt){if(_e.length!==2||typeof _e[1]!="string")return rt.error("'var' expression requires exactly one string literal argument.");const at=_e[1];return rt.scope.has(at)?new ap(at,rt.scope.get(at)):rt.error(`Unknown variable "${at}". Make sure "${at}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(_e){return this.boundExpression.evaluate(_e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var o_=ap;class s_{constructor(_e,rt=[],at,ut=new nm,_t=[]){this.registry=_e,this.path=rt,this.key=rt.map(At=>`[${At}]`).join(""),this.scope=ut,this.errors=_t,this.expectedType=at}parse(_e,rt,at,ut,_t={}){return rt?this.concat(rt,at,ut)._parse(_e,_t):this._parse(_e,_t)}_parse(_e,rt){function at(ut,_t,At){return At==="assert"?new jo(_t,[ut]):At==="coerce"?new Io(_t,[ut]):ut}if(_e!==null&&typeof _e!="string"&&typeof _e!="boolean"&&typeof _e!="number"||(_e=["literal",_e]),Array.isArray(_e)){if(_e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ut=_e[0];if(typeof ut!="string")return this.error(`Expression name must be a string, but found ${typeof ut} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _t=this.registry[ut];if(_t){let At=_t.parse(_e,this);if(!At)return null;if(this.expectedType){const Dt=this.expectedType,Wt=At.type;if(Dt.kind!=="string"&&Dt.kind!=="number"&&Dt.kind!=="boolean"&&Dt.kind!=="object"&&Dt.kind!=="array"||Wt.kind!=="value")if(Dt.kind!=="color"&&Dt.kind!=="formatted"&&Dt.kind!=="resolvedImage"||Wt.kind!=="value"&&Wt.kind!=="string"){if(this.checkSubtype(Dt,Wt))return null}else At=at(At,Dt,rt.typeAnnotation||"coerce");else At=at(At,Dt,rt.typeAnnotation||"assert")}if(!(At instanceof Xn)&&At.type.kind!=="resolvedImage"&&a_(At)){const Dt=new iu;try{At=new Xn(At.type,At.evaluate(Dt))}catch(Wt){return this.error(Wt.message),null}}return At}return this.error(`Unknown expression "${ut}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(_e===void 0?"'undefined' value invalid. Use null instead.":typeof _e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof _e} instead.`)}concat(_e,rt,at){const ut=typeof _e=="number"?this.path.concat(_e):this.path,_t=at?this.scope.concat(at):this.scope;return new s_(this.registry,ut,rt||null,_t,this.errors)}error(_e,...rt){const at=`${this.key}${rt.map(ut=>`[${ut}]`).join("")}`;this.errors.push(new Au(at,_e))}checkSubtype(_e,rt){const at=Us(_e,rt);return at&&this.error(at),at}}var Ty=s_;function a_(nt){if(nt instanceof o_)return a_(nt.boundExpression);if(nt instanceof Gu&&nt.name==="error"||nt instanceof e_||nt instanceof bs)return!1;const _e=nt instanceof Io||nt instanceof jo;let rt=!0;return nt.eachChild(at=>{rt=_e?rt&&a_(at):rt&&at instanceof Xn}),!!rt&&im(nt)&&_a(nt,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Cy(nt,_e){const rt=nt.length-1;let at,ut,_t=0,At=rt,Dt=0;for(;_t<=At;)if(Dt=Math.floor((_t+At)/2),at=nt[Dt],ut=nt[Dt+1],at<=_e){if(Dt===rt||_e<ut)return Dt;_t=Dt+1}else{if(!(at>_e))throw new Er("Input is not a number.");At=Dt-1}return 0}class om{constructor(_e,rt,at){this.type=_e,this.input=rt,this.labels=[],this.outputs=[];for(const[ut,_t]of at)this.labels.push(ut),this.outputs.push(_t)}static parse(_e,rt){if(_e.length-1<4)return rt.error(`Expected at least 4 arguments, but found only ${_e.length-1}.`);if((_e.length-1)%2!=0)return rt.error("Expected an even number of arguments.");const at=rt.parse(_e[1],1,wo);if(!at)return null;const ut=[];let _t=null;rt.expectedType&&rt.expectedType.kind!=="value"&&(_t=rt.expectedType);for(let At=1;At<_e.length;At+=2){const Dt=At===1?-1/0:_e[At],Wt=_e[At+1],Zt=At,tn=At+1;if(typeof Dt!="number")return rt.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Zt);if(ut.length&&ut[ut.length-1][0]>=Dt)return rt.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Zt);const cn=rt.parse(Wt,tn,_t);if(!cn)return null;_t=_t||cn.type,ut.push([Dt,cn])}return new om(_t,at,ut)}evaluate(_e){const rt=this.labels,at=this.outputs;if(rt.length===1)return at[0].evaluate(_e);const ut=this.input.evaluate(_e);if(ut<=rt[0])return at[0].evaluate(_e);const _t=rt.length;return ut>=rt[_t-1]?at[_t-1].evaluate(_e):at[Cy(rt,ut)].evaluate(_e)}eachChild(_e){_e(this.input);for(const rt of this.outputs)_e(rt)}outputDefined(){return this.outputs.every(_e=>_e.outputDefined())}serialize(){const _e=["step",this.input.serialize()];for(let rt=0;rt<this.labels.length;rt++)rt>0&&_e.push(this.labels[rt]),_e.push(this.outputs[rt].serialize());return _e}}var Im=om;function Ts(nt,_e,rt){return nt*(1-rt)+_e*rt}var lp=Object.freeze({__proto__:null,number:Ts,color:function(nt,_e,rt){return new zs(Ts(nt.r,_e.r,rt),Ts(nt.g,_e.g,rt),Ts(nt.b,_e.b,rt),Ts(nt.a,_e.a,rt))},array:function(nt,_e,rt){return nt.map((at,ut)=>Ts(at,_e[ut],rt))}});const cv=.95047,hv=1.08883,fv=4/29,qm=6/29,l_=3*qm*qm,dv=Math.PI/180,o0=180/Math.PI;function Ry(nt){return nt>.008856451679035631?Math.pow(nt,1/3):nt/l_+fv}function Zm(nt){return nt>qm?nt*nt*nt:l_*(nt-fv)}function gv(nt){return 255*(nt<=.0031308?12.92*nt:1.055*Math.pow(nt,1/2.4)-.055)}function Iy(nt){return(nt/=255)<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)}function mu(nt){const _e=Iy(nt.r),rt=Iy(nt.g),at=Iy(nt.b),ut=Ry((.4124564*_e+.3575761*rt+.1804375*at)/cv),_t=Ry((.2126729*_e+.7151522*rt+.072175*at)/1);return{l:116*_t-16,a:500*(ut-_t),b:200*(_t-Ry((.0193339*_e+.119192*rt+.9503041*at)/hv)),alpha:nt.a}}function u_(nt){let _e=(nt.l+16)/116,rt=isNaN(nt.a)?_e:_e+nt.a/500,at=isNaN(nt.b)?_e:_e-nt.b/200;return _e=1*Zm(_e),rt=cv*Zm(rt),at=hv*Zm(at),new zs(gv(3.2404542*rt-1.5371385*_e-.4985314*at),gv(-.969266*rt+1.8760108*_e+.041556*at),gv(.0556434*rt-.2040259*_e+1.0572252*at),nt.alpha)}function Oy(nt,_e,rt){const at=_e-nt;return nt+rt*(at>180||at<-180?at-360*Math.round(at/360):at)}const Ym={forward:mu,reverse:u_,interpolate:function(nt,_e,rt){return{l:Ts(nt.l,_e.l,rt),a:Ts(nt.a,_e.a,rt),b:Ts(nt.b,_e.b,rt),alpha:Ts(nt.alpha,_e.alpha,rt)}}},Km={forward:function(nt){const{l:_e,a:rt,b:at}=mu(nt),ut=Math.atan2(at,rt)*o0;return{h:ut<0?ut+360:ut,c:Math.sqrt(rt*rt+at*at),l:_e,alpha:nt.a}},reverse:function(nt){const _e=nt.h*dv,rt=nt.c;return u_({l:nt.l,a:Math.cos(_e)*rt,b:Math.sin(_e)*rt,alpha:nt.alpha})},interpolate:function(nt,_e,rt){return{h:Oy(nt.h,_e.h,rt),c:Ts(nt.c,_e.c,rt),l:Ts(nt.l,_e.l,rt),alpha:Ts(nt.alpha,_e.alpha,rt)}}};var s0=Object.freeze({__proto__:null,lab:Ym,hcl:Km});class c_{constructor(_e,rt,at,ut,_t){this.type=_e,this.operator=rt,this.interpolation=at,this.input=ut,this.labels=[],this.outputs=[];for(const[At,Dt]of _t)this.labels.push(At),this.outputs.push(Dt)}static interpolationFactor(_e,rt,at,ut){let _t=0;if(_e.name==="exponential")_t=h_(rt,_e.base,at,ut);else if(_e.name==="linear")_t=h_(rt,1,at,ut);else if(_e.name==="cubic-bezier"){const At=_e.controlPoints;_t=new Tt(At[0],At[1],At[2],At[3]).solve(h_(rt,1,at,ut))}return _t}static parse(_e,rt){let[at,ut,_t,...At]=_e;if(!Array.isArray(ut)||ut.length===0)return rt.error("Expected an interpolation type expression.",1);if(ut[0]==="linear")ut={name:"linear"};else if(ut[0]==="exponential"){const Zt=ut[1];if(typeof Zt!="number")return rt.error("Exponential interpolation requires a numeric base.",1,1);ut={name:"exponential",base:Zt}}else{if(ut[0]!=="cubic-bezier")return rt.error(`Unknown interpolation type ${String(ut[0])}`,1,0);{const Zt=ut.slice(1);if(Zt.length!==4||Zt.some(tn=>typeof tn!="number"||tn<0||tn>1))return rt.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ut={name:"cubic-bezier",controlPoints:Zt}}}if(_e.length-1<4)return rt.error(`Expected at least 4 arguments, but found only ${_e.length-1}.`);if((_e.length-1)%2!=0)return rt.error("Expected an even number of arguments.");if(_t=rt.parse(_t,2,wo),!_t)return null;const Dt=[];let Wt=null;at==="interpolate-hcl"||at==="interpolate-lab"?Wt=Eu:rt.expectedType&&rt.expectedType.kind!=="value"&&(Wt=rt.expectedType);for(let Zt=0;Zt<At.length;Zt+=2){const tn=At[Zt],cn=At[Zt+1],fn=Zt+3,wn=Zt+4;if(typeof tn!="number")return rt.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fn);if(Dt.length&&Dt[Dt.length-1][0]>=tn)return rt.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',fn);const xn=rt.parse(cn,wn,Wt);if(!xn)return null;Wt=Wt||xn.type,Dt.push([tn,xn])}return Wt.kind==="number"||Wt.kind==="color"||Wt.kind==="array"&&Wt.itemType.kind==="number"&&typeof Wt.N=="number"?new c_(Wt,at,ut,_t,Dt):rt.error(`Type ${ys(Wt)} is not interpolatable.`)}evaluate(_e){const rt=this.labels,at=this.outputs;if(rt.length===1)return at[0].evaluate(_e);const ut=this.input.evaluate(_e);if(ut<=rt[0])return at[0].evaluate(_e);const _t=rt.length;if(ut>=rt[_t-1])return at[_t-1].evaluate(_e);const At=Cy(rt,ut),Dt=c_.interpolationFactor(this.interpolation,ut,rt[At],rt[At+1]),Wt=at[At].evaluate(_e),Zt=at[At+1].evaluate(_e);return this.operator==="interpolate"?lp[this.type.kind.toLowerCase()](Wt,Zt,Dt):this.operator==="interpolate-hcl"?Km.reverse(Km.interpolate(Km.forward(Wt),Km.forward(Zt),Dt)):Ym.reverse(Ym.interpolate(Ym.forward(Wt),Ym.forward(Zt),Dt))}eachChild(_e){_e(this.input);for(const rt of this.outputs)_e(rt)}outputDefined(){return this.outputs.every(_e=>_e.outputDefined())}serialize(){let _e;_e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const rt=[this.operator,_e,this.input.serialize()];for(let at=0;at<this.labels.length;at++)rt.push(this.labels[at],this.outputs[at].serialize());return rt}}function h_(nt,_e,rt,at){const ut=at-rt,_t=nt-rt;return ut===0?0:_e===1?_t/ut:(Math.pow(_e,_t)-1)/(Math.pow(_e,ut)-1)}var vp=c_;class pv{constructor(_e,rt){this.type=_e,this.args=rt}static parse(_e,rt){if(_e.length<2)return rt.error("Expectected at least one argument.");let at=null;const ut=rt.expectedType;ut&&ut.kind!=="value"&&(at=ut);const _t=[];for(const Dt of _e.slice(1)){const Wt=rt.parse(Dt,1+_t.length,at,void 0,{typeAnnotation:"omit"});if(!Wt)return null;at=at||Wt.type,_t.push(Wt)}const At=ut&&_t.some(Dt=>Us(ut,Dt.type));return new pv(At?rs:at,_t)}evaluate(_e){let rt,at=null,ut=0;for(const _t of this.args){if(ut++,at=_t.evaluate(_e),at&&at instanceof on&&!at.available&&(rt||(rt=at),at=null,ut===this.args.length))return rt;if(at!==null)break}return at}eachChild(_e){this.args.forEach(_e)}outputDefined(){return this.args.every(_e=>_e.outputDefined())}serialize(){const _e=["coalesce"];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}var Om=pv;class mv{constructor(_e,rt){this.type=rt.type,this.bindings=[].concat(_e),this.result=rt}evaluate(_e){return this.result.evaluate(_e)}eachChild(_e){for(const rt of this.bindings)_e(rt[1]);_e(this.result)}static parse(_e,rt){if(_e.length<4)return rt.error(`Expected at least 3 arguments, but found ${_e.length-1} instead.`);const at=[];for(let _t=1;_t<_e.length-1;_t+=2){const At=_e[_t];if(typeof At!="string")return rt.error(`Expected string, but found ${typeof At} instead.`,_t);if(/[^a-zA-Z0-9_]/.test(At))return rt.error("Variable names must contain only alphanumeric characters or '_'.",_t);const Dt=rt.parse(_e[_t+1],_t+1);if(!Dt)return null;at.push([At,Dt])}const ut=rt.parse(_e[_e.length-1],_e.length-1,rt.expectedType,at);return ut?new mv(at,ut):null}outputDefined(){return this.result.outputDefined()}serialize(){const _e=["let"];for(const[rt,at]of this.bindings)_e.push(rt,at.serialize());return _e.push(this.result.serialize()),_e}}var yv=mv;class Xm{constructor(_e,rt,at){this.type=_e,this.index=rt,this.input=at}static parse(_e,rt){if(_e.length!==3)return rt.error(`Expected 2 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,wo),ut=rt.parse(_e[2],2,Bl(rt.expectedType||rs));return at&&ut?new Xm(ut.type.itemType,at,ut):null}evaluate(_e){const rt=this.index.evaluate(_e),at=this.input.evaluate(_e);if(rt<0)throw new Er(`Array index out of bounds: ${rt} < 0.`);if(rt>=at.length)throw new Er(`Array index out of bounds: ${rt} > ${at.length-1}.`);if(rt!==Math.floor(rt))throw new Er(`Array index must be an integer, but found ${rt} instead.`);return at[rt]}eachChild(_e){_e(this.index),_e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var _v=Xm;class bp{constructor(_e,rt){this.type=us,this.needle=_e,this.haystack=rt}static parse(_e,rt){if(_e.length!==3)return rt.error(`Expected 2 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,rs),ut=rt.parse(_e[2],2,rs);return at&&ut?Vu(at.type,[us,as,wo,tp,rs])?new bp(at,ut):rt.error(`Expected first argument to be of type boolean, string, number or null, but found ${ys(at.type)} instead`):null}evaluate(_e){const rt=this.needle.evaluate(_e),at=this.haystack.evaluate(_e);if(at==null)return!1;if(!Qs(rt,["boolean","string","number","null"]))throw new Er(`Expected first argument to be of type boolean, string, number or null, but found ${ys(Nn(rt))} instead.`);if(!Qs(at,["string","array"]))throw new Er(`Expected second argument to be of type array or string, but found ${ys(Nn(at))} instead.`);return at.indexOf(rt)>=0}eachChild(_e){_e(this.needle),_e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var f_=bp;class My{constructor(_e,rt,at){this.type=wo,this.needle=_e,this.haystack=rt,this.fromIndex=at}static parse(_e,rt){if(_e.length<=2||_e.length>=5)return rt.error(`Expected 3 or 4 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,rs),ut=rt.parse(_e[2],2,rs);if(!at||!ut)return null;if(!Vu(at.type,[us,as,wo,tp,rs]))return rt.error(`Expected first argument to be of type boolean, string, number or null, but found ${ys(at.type)} instead`);if(_e.length===4){const _t=rt.parse(_e[3],3,wo);return _t?new My(at,ut,_t):null}return new My(at,ut)}evaluate(_e){const rt=this.needle.evaluate(_e),at=this.haystack.evaluate(_e);if(!Qs(rt,["boolean","string","number","null"]))throw new Er(`Expected first argument to be of type boolean, string, number or null, but found ${ys(Nn(rt))} instead.`);if(!Qs(at,["string","array"]))throw new Er(`Expected second argument to be of type array or string, but found ${ys(Nn(at))} instead.`);if(this.fromIndex){const ut=this.fromIndex.evaluate(_e);return at.indexOf(rt,ut)}return at.indexOf(rt)}eachChild(_e){_e(this.needle),_e(this.haystack),this.fromIndex&&_e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const _e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),_e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var a0=My;class d_{constructor(_e,rt,at,ut,_t,At){this.inputType=_e,this.type=rt,this.input=at,this.cases=ut,this.outputs=_t,this.otherwise=At}static parse(_e,rt){if(_e.length<5)return rt.error(`Expected at least 4 arguments, but found only ${_e.length-1}.`);if(_e.length%2!=1)return rt.error("Expected an even number of arguments.");let at,ut;rt.expectedType&&rt.expectedType.kind!=="value"&&(ut=rt.expectedType);const _t={},At=[];for(let Zt=2;Zt<_e.length-1;Zt+=2){let tn=_e[Zt];const cn=_e[Zt+1];Array.isArray(tn)||(tn=[tn]);const fn=rt.concat(Zt);if(tn.length===0)return fn.error("Expected at least one branch label.");for(const xn of tn){if(typeof xn!="number"&&typeof xn!="string")return fn.error("Branch labels must be numbers or strings.");if(typeof xn=="number"&&Math.abs(xn)>Number.MAX_SAFE_INTEGER)return fn.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof xn=="number"&&Math.floor(xn)!==xn)return fn.error("Numeric branch labels must be integer values.");if(at){if(fn.checkSubtype(at,Nn(xn)))return null}else at=Nn(xn);if(_t[String(xn)]!==void 0)return fn.error("Branch labels must be unique.");_t[String(xn)]=At.length}const wn=rt.parse(cn,Zt,ut);if(!wn)return null;ut=ut||wn.type,At.push(wn)}const Dt=rt.parse(_e[1],1,rs);if(!Dt)return null;const Wt=rt.parse(_e[_e.length-1],_e.length-1,ut);return Wt?Dt.type.kind!=="value"&&rt.concat(1).checkSubtype(at,Dt.type)?null:new d_(at,ut,Dt,_t,At,Wt):null}evaluate(_e){const rt=this.input.evaluate(_e);return(Nn(rt)===this.inputType&&this.outputs[this.cases[rt]]||this.otherwise).evaluate(_e)}eachChild(_e){_e(this.input),this.outputs.forEach(_e),_e(this.otherwise)}outputDefined(){return this.outputs.every(_e=>_e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const _e=["match",this.input.serialize()],rt=Object.keys(this.cases).sort(),at=[],ut={};for(const At of rt){const Dt=ut[this.cases[At]];Dt===void 0?(ut[this.cases[At]]=at.length,at.push([this.cases[At],[At]])):at[Dt][1].push(At)}const _t=At=>this.inputType.kind==="number"?Number(At):At;for(const[At,Dt]of at)_e.push(Dt.length===1?_t(Dt[0]):Dt.map(_t)),_e.push(this.outputs[At].serialize());return _e.push(this.otherwise.serialize()),_e}}var Qm=d_;class Pu{constructor(_e,rt,at){this.type=_e,this.branches=rt,this.otherwise=at}static parse(_e,rt){if(_e.length<4)return rt.error(`Expected at least 3 arguments, but found only ${_e.length-1}.`);if(_e.length%2!=0)return rt.error("Expected an odd number of arguments.");let at;rt.expectedType&&rt.expectedType.kind!=="value"&&(at=rt.expectedType);const ut=[];for(let At=1;At<_e.length-1;At+=2){const Dt=rt.parse(_e[At],At,us);if(!Dt)return null;const Wt=rt.parse(_e[At+1],At+1,at);if(!Wt)return null;ut.push([Dt,Wt]),at=at||Wt.type}const _t=rt.parse(_e[_e.length-1],_e.length-1,at);return _t?new Pu(at,ut,_t):null}evaluate(_e){for(const[rt,at]of this.branches)if(rt.evaluate(_e))return at.evaluate(_e);return this.otherwise.evaluate(_e)}eachChild(_e){for(const[rt,at]of this.branches)_e(rt),_e(at);_e(this.otherwise)}outputDefined(){return this.branches.every(([_e,rt])=>rt.outputDefined())&&this.otherwise.outputDefined()}serialize(){const _e=["case"];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}var l0=Pu;class g_{constructor(_e,rt,at,ut){this.type=_e,this.input=rt,this.beginIndex=at,this.endIndex=ut}static parse(_e,rt){if(_e.length<=2||_e.length>=5)return rt.error(`Expected 3 or 4 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,rs),ut=rt.parse(_e[2],2,wo);if(!at||!ut)return null;if(!Vu(at.type,[Bl(rs),as,rs]))return rt.error(`Expected first argument to be of type array or string, but found ${ys(at.type)} instead`);if(_e.length===4){const _t=rt.parse(_e[3],3,wo);return _t?new g_(at.type,at,ut,_t):null}return new g_(at.type,at,ut)}evaluate(_e){const rt=this.input.evaluate(_e),at=this.beginIndex.evaluate(_e);if(!Qs(rt,["string","array"]))throw new Er(`Expected first argument to be of type array or string, but found ${ys(Nn(rt))} instead.`);if(this.endIndex){const ut=this.endIndex.evaluate(_e);return rt.slice(at,ut)}return rt.slice(at)}eachChild(_e){_e(this.input),_e(this.beginIndex),this.endIndex&&_e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const _e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),_e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var p_=g_;function vv(nt,_e){return nt==="=="||nt==="!="?_e.kind==="boolean"||_e.kind==="string"||_e.kind==="number"||_e.kind==="null"||_e.kind==="value":_e.kind==="string"||_e.kind==="number"||_e.kind==="value"}function bv(nt,_e,rt,at){return at.compare(_e,rt)===0}function Jm(nt,_e,rt){const at=nt!=="=="&&nt!=="!=";return class cE{constructor(_t,At,Dt){this.type=us,this.lhs=_t,this.rhs=At,this.collator=Dt,this.hasUntypedArgument=_t.type.kind==="value"||At.type.kind==="value"}static parse(_t,At){if(_t.length!==3&&_t.length!==4)return At.error("Expected two or three arguments.");const Dt=_t[0];let Wt=At.parse(_t[1],1,rs);if(!Wt)return null;if(!vv(Dt,Wt.type))return At.concat(1).error(`"${Dt}" comparisons are not supported for type '${ys(Wt.type)}'.`);let Zt=At.parse(_t[2],2,rs);if(!Zt)return null;if(!vv(Dt,Zt.type))return At.concat(2).error(`"${Dt}" comparisons are not supported for type '${ys(Zt.type)}'.`);if(Wt.type.kind!==Zt.type.kind&&Wt.type.kind!=="value"&&Zt.type.kind!=="value")return At.error(`Cannot compare types '${ys(Wt.type)}' and '${ys(Zt.type)}'.`);at&&(Wt.type.kind==="value"&&Zt.type.kind!=="value"?Wt=new jo(Zt.type,[Wt]):Wt.type.kind!=="value"&&Zt.type.kind==="value"&&(Zt=new jo(Wt.type,[Zt])));let tn=null;if(_t.length===4){if(Wt.type.kind!=="string"&&Zt.type.kind!=="string"&&Wt.type.kind!=="value"&&Zt.type.kind!=="value")return At.error("Cannot use collator to compare non-string types.");if(tn=At.parse(_t[3],3,Uu),!tn)return null}return new cE(Wt,Zt,tn)}evaluate(_t){const At=this.lhs.evaluate(_t),Dt=this.rhs.evaluate(_t);if(at&&this.hasUntypedArgument){const Wt=Nn(At),Zt=Nn(Dt);if(Wt.kind!==Zt.kind||Wt.kind!=="string"&&Wt.kind!=="number")throw new Er(`Expected arguments for "${nt}" to be (string, string) or (number, number), but found (${Wt.kind}, ${Zt.kind}) instead.`)}if(this.collator&&!at&&this.hasUntypedArgument){const Wt=Nn(At),Zt=Nn(Dt);if(Wt.kind!=="string"||Zt.kind!=="string")return _e(_t,At,Dt)}return this.collator?rt(_t,At,Dt,this.collator.evaluate(_t)):_e(_t,At,Dt)}eachChild(_t){_t(this.lhs),_t(this.rhs),this.collator&&_t(this.collator)}outputDefined(){return!0}serialize(){const _t=[nt];return this.eachChild(At=>{_t.push(At.serialize())}),_t}}}const ey=Jm("==",function(nt,_e,rt){return _e===rt},bv),Rr=Jm("!=",function(nt,_e,rt){return _e!==rt},function(nt,_e,rt,at){return!bv(0,_e,rt,at)}),so=Jm("<",function(nt,_e,rt){return _e<rt},function(nt,_e,rt,at){return at.compare(_e,rt)<0}),Kr=Jm(">",function(nt,_e,rt){return _e>rt},function(nt,_e,rt,at){return at.compare(_e,rt)>0}),Uo=Jm("<=",function(nt,_e,rt){return _e<=rt},function(nt,_e,rt,at){return at.compare(_e,rt)<=0}),gs=Jm(">=",function(nt,_e,rt){return _e>=rt},function(nt,_e,rt,at){return at.compare(_e,rt)>=0});class Fs{constructor(_e,rt,at,ut,_t,At){this.type=as,this.number=_e,this.locale=rt,this.currency=at,this.unit=ut,this.minFractionDigits=_t,this.maxFractionDigits=At}static parse(_e,rt){if(_e.length!==3)return rt.error("Expected two arguments.");const at=rt.parse(_e[1],1,wo);if(!at)return null;const ut=_e[2];if(typeof ut!="object"||Array.isArray(ut))return rt.error("NumberFormat options argument must be an object.");let _t=null;if(ut.locale&&(_t=rt.parse(ut.locale,1,as),!_t))return null;let At=null;if(ut.currency&&(At=rt.parse(ut.currency,1,as),!At))return null;let Dt=null;if(ut.unit&&(Dt=rt.parse(ut.unit,1,as),!Dt))return null;let Wt=null;if(ut["min-fraction-digits"]&&(Wt=rt.parse(ut["min-fraction-digits"],1,wo),!Wt))return null;let Zt=null;return ut["max-fraction-digits"]&&(Zt=rt.parse(ut["max-fraction-digits"],1,wo),!Zt)?null:new Fs(at,_t,At,Dt,Wt,Zt)}evaluate(_e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(_e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(_e):void 0,unit:this.unit?this.unit.evaluate(_e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(_e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(_e):void 0}).format(this.number.evaluate(_e))}eachChild(_e){_e(this.number),this.locale&&_e(this.locale),this.currency&&_e(this.currency),this.unit&&_e(this.unit),this.minFractionDigits&&_e(this.minFractionDigits),this.maxFractionDigits&&_e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const _e={};return this.locale&&(_e.locale=this.locale.serialize()),this.currency&&(_e.currency=this.currency.serialize()),this.unit&&(_e.unit=this.unit.serialize()),this.minFractionDigits&&(_e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(_e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),_e]}}class Ml{constructor(_e){this.type=wo,this.input=_e}static parse(_e,rt){if(_e.length!==2)return rt.error(`Expected 1 argument, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1);return at?at.type.kind!=="array"&&at.type.kind!=="string"&&at.type.kind!=="value"?rt.error(`Expected argument of type string or array, but found ${ys(at.type)} instead.`):new Ml(at):null}evaluate(_e){const rt=this.input.evaluate(_e);if(typeof rt=="string"||Array.isArray(rt))return rt.length;throw new Er(`Expected value to be of type string or array, but found ${ys(Nn(rt))} instead.`)}eachChild(_e){_e(this.input)}outputDefined(){return!1}serialize(){const _e=["length"];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}const Js={"==":ey,"!=":Rr,">":Kr,"<":so,">=":gs,"<=":Uo,array:jo,at:_v,boolean:jo,case:l0,coalesce:Om,collator:e_,format:bo,image:Mo,in:f_,"index-of":a0,interpolate:vp,"interpolate-hcl":vp,"interpolate-lab":vp,length:Ml,let:yv,literal:Xn,match:Qm,number:jo,"number-format":Fs,object:jo,slice:p_,step:Im,string:jo,"to-boolean":Io,"to-color":Io,"to-number":Io,"to-string":Io,var:o_,within:bs};function m_(nt,[_e,rt,at,ut]){_e=_e.evaluate(nt),rt=rt.evaluate(nt),at=at.evaluate(nt);const _t=ut?ut.evaluate(nt):1,At=_n(_e,rt,at,_t);if(At)throw new Er(At);return new zs(_e/255*_t,rt/255*_t,at/255*_t,_t)}function u0(nt,_e){return nt in _e}function Tu(nt,_e){const rt=_e[nt];return rt===void 0?null:rt}function wp(nt){return{type:nt}}Gu.register(Js,{error:[{kind:"error"},[as],(nt,[_e])=>{throw new Er(_e.evaluate(nt))}],typeof:[as,[rs],(nt,[_e])=>ys(Nn(_e.evaluate(nt)))],"to-rgba":[Bl(wo,4),[Eu],(nt,[_e])=>_e.evaluate(nt).toArray()],rgb:[Eu,[wo,wo,wo],m_],rgba:[Eu,[wo,wo,wo,wo],m_],has:{type:us,overloads:[[[as],(nt,[_e])=>u0(_e.evaluate(nt),nt.properties())],[[as,np],(nt,[_e,rt])=>u0(_e.evaluate(nt),rt.evaluate(nt))]]},get:{type:rs,overloads:[[[as],(nt,[_e])=>Tu(_e.evaluate(nt),nt.properties())],[[as,np],(nt,[_e,rt])=>Tu(_e.evaluate(nt),rt.evaluate(nt))]]},"feature-state":[rs,[as],(nt,[_e])=>Tu(_e.evaluate(nt),nt.featureState||{})],properties:[np,[],nt=>nt.properties()],"geometry-type":[as,[],nt=>nt.geometryType()],id:[rs,[],nt=>nt.id()],zoom:[wo,[],nt=>nt.globals.zoom],pitch:[wo,[],nt=>nt.globals.pitch||0],"distance-from-center":[wo,[],nt=>nt.distanceFromCenter()],"heatmap-density":[wo,[],nt=>nt.globals.heatmapDensity||0],"line-progress":[wo,[],nt=>nt.globals.lineProgress||0],"sky-radial-progress":[wo,[],nt=>nt.globals.skyRadialProgress||0],accumulated:[rs,[],nt=>nt.globals.accumulated===void 0?null:nt.globals.accumulated],"+":[wo,wp(wo),(nt,_e)=>{let rt=0;for(const at of _e)rt+=at.evaluate(nt);return rt}],"*":[wo,wp(wo),(nt,_e)=>{let rt=1;for(const at of _e)rt*=at.evaluate(nt);return rt}],"-":{type:wo,overloads:[[[wo,wo],(nt,[_e,rt])=>_e.evaluate(nt)-rt.evaluate(nt)],[[wo],(nt,[_e])=>-_e.evaluate(nt)]]},"/":[wo,[wo,wo],(nt,[_e,rt])=>_e.evaluate(nt)/rt.evaluate(nt)],"%":[wo,[wo,wo],(nt,[_e,rt])=>_e.evaluate(nt)%rt.evaluate(nt)],ln2:[wo,[],()=>Math.LN2],pi:[wo,[],()=>Math.PI],e:[wo,[],()=>Math.E],"^":[wo,[wo,wo],(nt,[_e,rt])=>Math.pow(_e.evaluate(nt),rt.evaluate(nt))],sqrt:[wo,[wo],(nt,[_e])=>Math.sqrt(_e.evaluate(nt))],log10:[wo,[wo],(nt,[_e])=>Math.log(_e.evaluate(nt))/Math.LN10],ln:[wo,[wo],(nt,[_e])=>Math.log(_e.evaluate(nt))],log2:[wo,[wo],(nt,[_e])=>Math.log(_e.evaluate(nt))/Math.LN2],sin:[wo,[wo],(nt,[_e])=>Math.sin(_e.evaluate(nt))],cos:[wo,[wo],(nt,[_e])=>Math.cos(_e.evaluate(nt))],tan:[wo,[wo],(nt,[_e])=>Math.tan(_e.evaluate(nt))],asin:[wo,[wo],(nt,[_e])=>Math.asin(_e.evaluate(nt))],acos:[wo,[wo],(nt,[_e])=>Math.acos(_e.evaluate(nt))],atan:[wo,[wo],(nt,[_e])=>Math.atan(_e.evaluate(nt))],min:[wo,wp(wo),(nt,_e)=>Math.min(..._e.map(rt=>rt.evaluate(nt)))],max:[wo,wp(wo),(nt,_e)=>Math.max(..._e.map(rt=>rt.evaluate(nt)))],abs:[wo,[wo],(nt,[_e])=>Math.abs(_e.evaluate(nt))],round:[wo,[wo],(nt,[_e])=>{const rt=_e.evaluate(nt);return rt<0?-Math.round(-rt):Math.round(rt)}],floor:[wo,[wo],(nt,[_e])=>Math.floor(_e.evaluate(nt))],ceil:[wo,[wo],(nt,[_e])=>Math.ceil(_e.evaluate(nt))],"filter-==":[us,[as,rs],(nt,[_e,rt])=>nt.properties()[_e.value]===rt.value],"filter-id-==":[us,[rs],(nt,[_e])=>nt.id()===_e.value],"filter-type-==":[us,[as],(nt,[_e])=>nt.geometryType()===_e.value],"filter-<":[us,[as,rs],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ut=rt.value;return typeof at==typeof ut&&at<ut}],"filter-id-<":[us,[rs],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt<at}],"filter->":[us,[as,rs],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ut=rt.value;return typeof at==typeof ut&&at>ut}],"filter-id->":[us,[rs],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt>at}],"filter-<=":[us,[as,rs],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ut=rt.value;return typeof at==typeof ut&&at<=ut}],"filter-id-<=":[us,[rs],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt<=at}],"filter->=":[us,[as,rs],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ut=rt.value;return typeof at==typeof ut&&at>=ut}],"filter-id->=":[us,[rs],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt>=at}],"filter-has":[us,[rs],(nt,[_e])=>_e.value in nt.properties()],"filter-has-id":[us,[],nt=>nt.id()!==null&&nt.id()!==void 0],"filter-type-in":[us,[Bl(as)],(nt,[_e])=>_e.value.indexOf(nt.geometryType())>=0],"filter-id-in":[us,[Bl(rs)],(nt,[_e])=>_e.value.indexOf(nt.id())>=0],"filter-in-small":[us,[as,Bl(rs)],(nt,[_e,rt])=>rt.value.indexOf(nt.properties()[_e.value])>=0],"filter-in-large":[us,[as,Bl(rs)],(nt,[_e,rt])=>function(at,ut,_t,At){for(;_t<=At;){const Dt=_t+At>>1;if(ut[Dt]===at)return!0;ut[Dt]>at?At=Dt-1:_t=Dt+1}return!1}(nt.properties()[_e.value],rt.value,0,rt.value.length-1)],all:{type:us,overloads:[[[us,us],(nt,[_e,rt])=>_e.evaluate(nt)&&rt.evaluate(nt)],[wp(us),(nt,_e)=>{for(const rt of _e)if(!rt.evaluate(nt))return!1;return!0}]]},any:{type:us,overloads:[[[us,us],(nt,[_e,rt])=>_e.evaluate(nt)||rt.evaluate(nt)],[wp(us),(nt,_e)=>{for(const rt of _e)if(rt.evaluate(nt))return!0;return!1}]]},"!":[us,[us],(nt,[_e])=>!_e.evaluate(nt)],"is-supported-script":[us,[as],(nt,[_e])=>{const rt=nt.globals&&nt.globals.isSupportedScript;return!rt||rt(_e.evaluate(nt))}],upcase:[as,[as],(nt,[_e])=>_e.evaluate(nt).toUpperCase()],downcase:[as,[as],(nt,[_e])=>_e.evaluate(nt).toLowerCase()],concat:[as,wp(rs),(nt,_e)=>_e.map(rt=>rr(rt.evaluate(nt))).join("")],"resolved-locale":[as,[Uu],(nt,[_e])=>_e.evaluate(nt).resolvedLocale()]});var ty=Js;function sm(nt){return{result:"success",value:nt}}function Hu(nt){return{result:"error",value:nt}}function Np(nt){return nt["property-type"]==="data-driven"||nt["property-type"]==="cross-faded-data-driven"}function Hs(nt){return!!nt.expression&&nt.expression.parameters.indexOf("zoom")>-1}function xp(nt){return!!nt.expression&&nt.expression.interpolated}function Ms(nt){return nt instanceof Number?"number":nt instanceof String?"string":nt instanceof Boolean?"boolean":Array.isArray(nt)?"array":nt===null?"null":typeof nt}function $u(nt){return typeof nt=="object"&&nt!==null&&!Array.isArray(nt)}function E1(nt){return nt}function c0(nt,_e){const rt=_e.type==="color",at=nt.stops&&typeof nt.stops[0][0]=="object",ut=at||!(at||nt.property!==void 0),_t=nt.type||(xp(_e)?"exponential":"interval");if(rt&&((nt=xa({},nt)).stops&&(nt.stops=nt.stops.map(Zt=>[Zt[0],zs.parse(Zt[1])])),nt.default=zs.parse(nt.default?nt.default:_e.default)),nt.colorSpace&&nt.colorSpace!=="rgb"&&!s0[nt.colorSpace])throw new Error(`Unknown color space: ${nt.colorSpace}`);let At,Dt,Wt;if(_t==="exponential")At=ry;else if(_t==="interval")At=Sp;else if(_t==="categorical"){At=y_,Dt=Object.create(null);for(const Zt of nt.stops)Dt[Zt[0]]=Zt[1];Wt=typeof nt.stops[0][0]}else{if(_t!=="identity")throw new Error(`Unknown function type "${_t}"`);At=__}if(at){const Zt={},tn=[];for(let wn=0;wn<nt.stops.length;wn++){const xn=nt.stops[wn],On=xn[0].zoom;Zt[On]===void 0&&(Zt[On]={zoom:On,type:nt.type,property:nt.property,default:nt.default,stops:[]},tn.push(On)),Zt[On].stops.push([xn[0].value,xn[1]])}const cn=[];for(const wn of tn)cn.push([Zt[wn].zoom,c0(Zt[wn],_e)]);const fn={name:"linear"};return{kind:"composite",interpolationType:fn,interpolationFactor:vp.interpolationFactor.bind(void 0,fn),zoomStops:cn.map(wn=>wn[0]),evaluate:({zoom:wn},xn)=>ry({stops:cn,base:nt.base},_e,wn).evaluate(wn,xn)}}if(ut){const Zt=_t==="exponential"?{name:"exponential",base:nt.base!==void 0?nt.base:1}:null;return{kind:"camera",interpolationType:Zt,interpolationFactor:vp.interpolationFactor.bind(void 0,Zt),zoomStops:nt.stops.map(tn=>tn[0]),evaluate:({zoom:tn})=>At(nt,_e,tn,Dt,Wt)}}return{kind:"source",evaluate(Zt,tn){const cn=tn&&tn.properties?tn.properties[nt.property]:void 0;return cn===void 0?ny(nt.default,_e.default):At(nt,_e,cn,Dt,Wt)}}}function ny(nt,_e,rt){return nt!==void 0?nt:_e!==void 0?_e:rt!==void 0?rt:void 0}function y_(nt,_e,rt,at,ut){return ny(typeof rt===ut?at[rt]:void 0,nt.default,_e.default)}function Sp(nt,_e,rt){if(Ms(rt)!=="number")return ny(nt.default,_e.default);const at=nt.stops.length;if(at===1||rt<=nt.stops[0][0])return nt.stops[0][1];if(rt>=nt.stops[at-1][0])return nt.stops[at-1][1];const ut=Cy(nt.stops.map(_t=>_t[0]),rt);return nt.stops[ut][1]}function ry(nt,_e,rt){const at=nt.base!==void 0?nt.base:1;if(Ms(rt)!=="number")return ny(nt.default,_e.default);const ut=nt.stops.length;if(ut===1||rt<=nt.stops[0][0])return nt.stops[0][1];if(rt>=nt.stops[ut-1][0])return nt.stops[ut-1][1];const _t=Cy(nt.stops.map(tn=>tn[0]),rt),At=function(tn,cn,fn,wn){const xn=wn-fn,On=tn-fn;return xn===0?0:cn===1?On/xn:(Math.pow(cn,On)-1)/(Math.pow(cn,xn)-1)}(rt,at,nt.stops[_t][0],nt.stops[_t+1][0]),Dt=nt.stops[_t][1],Wt=nt.stops[_t+1][1];let Zt=lp[_e.type]||E1;if(nt.colorSpace&&nt.colorSpace!=="rgb"){const tn=s0[nt.colorSpace];Zt=(cn,fn)=>tn.reverse(tn.interpolate(tn.forward(cn),tn.forward(fn),At))}return typeof Dt.evaluate=="function"?{evaluate(...tn){const cn=Dt.evaluate.apply(void 0,tn),fn=Wt.evaluate.apply(void 0,tn);if(cn!==void 0&&fn!==void 0)return Zt(cn,fn,At)}}:Zt(Dt,Wt,At)}function __(nt,_e,rt){return _e.type==="color"?rt=zs.parse(rt):_e.type==="formatted"?rt=zt.fromString(rt.toString()):_e.type==="resolvedImage"?rt=on.fromString(rt.toString()):Ms(rt)===_e.type||_e.type==="enum"&&_e.values[rt]||(rt=void 0),ny(rt,nt.default,_e.default)}class am{constructor(_e,rt){this.expression=_e,this._warningHistory={},this._evaluator=new iu,this._defaultValue=rt?function(at){return at.type==="color"&&($u(at.default)||Array.isArray(at.default))?new zs(0,0,0,0):at.type==="color"?zs.parse(at.default)||null:at.default===void 0?null:at.default}(rt):null,this._enumValues=rt&&rt.type==="enum"?rt.values:null}evaluateWithoutErrorHandling(_e,rt,at,ut,_t,At,Dt,Wt){return this._evaluator.globals=_e,this._evaluator.feature=rt,this._evaluator.featureState=at,this._evaluator.canonical=ut||null,this._evaluator.availableImages=_t||null,this._evaluator.formattedSection=At,this._evaluator.featureTileCoord=Dt||null,this._evaluator.featureDistanceData=Wt||null,this.expression.evaluate(this._evaluator)}evaluate(_e,rt,at,ut,_t,At,Dt,Wt){this._evaluator.globals=_e,this._evaluator.feature=rt||null,this._evaluator.featureState=at||null,this._evaluator.canonical=ut||null,this._evaluator.availableImages=_t||null,this._evaluator.formattedSection=At||null,this._evaluator.featureTileCoord=Dt||null,this._evaluator.featureDistanceData=Wt||null;try{const Zt=this.expression.evaluate(this._evaluator);if(Zt==null||typeof Zt=="number"&&Zt!=Zt)return this._defaultValue;if(this._enumValues&&!(Zt in this._enumValues))throw new Er(`Expected value to be one of ${Object.keys(this._enumValues).map(tn=>JSON.stringify(tn)).join(", ")}, but found ${JSON.stringify(Zt)} instead.`);return Zt}catch(Zt){return this._warningHistory[Zt.message]||(this._warningHistory[Zt.message]=!0,typeof console<"u"&&console.warn(Zt.message)),this._defaultValue}}}function iy(nt){return Array.isArray(nt)&&nt.length>0&&typeof nt[0]=="string"&&nt[0]in ty}function lm(nt,_e){const rt=new Ty(ty,[],_e?function(ut){const _t={color:Eu,string:as,number:wo,enum:as,boolean:us,formatted:zu,resolvedImage:fu};return ut.type==="array"?Bl(_t[ut.value]||rs,ut.length):_t[ut.type]}(_e):void 0),at=rt.parse(nt,void 0,void 0,void 0,_e&&_e.type==="string"?{typeAnnotation:"coerce"}:void 0);return at?sm(new am(at,_e)):Hu(rt.errors)}class Mm{constructor(_e,rt){this.kind=_e,this._styleExpression=rt,this.isStateDependent=_e!=="constant"&&!$m(rt.expression)}evaluateWithoutErrorHandling(_e,rt,at,ut,_t,At){return this._styleExpression.evaluateWithoutErrorHandling(_e,rt,at,ut,_t,At)}evaluate(_e,rt,at,ut,_t,At){return this._styleExpression.evaluate(_e,rt,at,ut,_t,At)}}class Py{constructor(_e,rt,at,ut){this.kind=_e,this.zoomStops=at,this._styleExpression=rt,this.isStateDependent=_e!=="camera"&&!$m(rt.expression),this.interpolationType=ut}evaluateWithoutErrorHandling(_e,rt,at,ut,_t,At){return this._styleExpression.evaluateWithoutErrorHandling(_e,rt,at,ut,_t,At)}evaluate(_e,rt,at,ut,_t,At){return this._styleExpression.evaluate(_e,rt,at,ut,_t,At)}interpolationFactor(_e,rt,at){return this.interpolationType?vp.interpolationFactor(this.interpolationType,_e,rt,at):0}}function Up(nt,_e){if((nt=lm(nt,_e)).result==="error")return nt;const rt=nt.value.expression,at=im(rt);if(!at&&!Np(_e))return Hu([new Au("","data expressions not supported")]);const ut=_a(rt,["zoom","pitch","distance-from-center"]);if(!ut&&!Hs(_e))return Hu([new Au("","zoom expressions not supported")]);const _t=um(rt);return _t||ut?_t instanceof Au?Hu([_t]):_t instanceof vp&&!xp(_e)?Hu([new Au("",'"interpolate" expressions cannot be used with this property')]):sm(_t?new Py(at?"camera":"composite",nt.value,_t.labels,_t instanceof vp?_t.interpolation:void 0):new Mm(at?"constant":"source",nt.value)):Hu([new Au("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yu{constructor(_e,rt){this._parameters=_e,this._specification=rt,xa(this,c0(this._parameters,this._specification))}static deserialize(_e){return new yu(_e._parameters,_e._specification)}static serialize(_e){return{_parameters:_e._parameters,_specification:_e._specification}}}function um(nt){let _e=null;if(nt instanceof yv)_e=um(nt.result);else if(nt instanceof Om){for(const rt of nt.args)if(_e=um(rt),_e)break}else(nt instanceof Im||nt instanceof vp)&&nt.input instanceof Gu&&nt.input.name==="zoom"&&(_e=nt);return _e instanceof Au||nt.eachChild(rt=>{const at=um(rt);at instanceof Au?_e=at:!_e&&at?_e=new Au("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_e&&at&&_e!==at&&(_e=new Au("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_e}class Ro{constructor(_e,rt,at,ut){this.message=(_e?`${_e}: `:"")+at,ut&&(this.identifier=ut),rt!=null&&rt.__line__&&(this.line=rt.__line__)}}function ku(nt){const _e=nt.key,rt=nt.value,at=nt.valueSpec||{},ut=nt.objectElementValidators||{},_t=nt.style,At=nt.styleSpec;let Dt=[];const Wt=Ms(rt);if(Wt!=="object")return[new Ro(_e,rt,`object expected, ${Wt} found`)];for(const Zt in rt){const tn=Zt.split(".")[0],cn=at[tn]||at["*"];let fn;ut[tn]?fn=ut[tn]:at[tn]?fn=$l:ut["*"]?fn=ut["*"]:at["*"]&&(fn=$l),fn?Dt=Dt.concat(fn({key:(_e&&`${_e}.`)+Zt,value:rt[Zt],valueSpec:cn,style:_t,styleSpec:At,object:rt,objectKey:Zt},rt)):Dt.push(new Ro(_e,rt[Zt],`unknown property "${Zt}"`))}for(const Zt in at)ut[Zt]||at[Zt].required&&at[Zt].default===void 0&&rt[Zt]===void 0&&Dt.push(new Ro(_e,rt,`missing required property "${Zt}"`));return Dt}function wv(nt){const _e=nt.value,rt=nt.valueSpec,at=nt.style,ut=nt.styleSpec,_t=nt.key,At=nt.arrayElementValidator||$l;if(Ms(_e)!=="array")return[new Ro(_t,_e,`array expected, ${Ms(_e)} found`)];if(rt.length&&_e.length!==rt.length)return[new Ro(_t,_e,`array length ${rt.length} expected, length ${_e.length} found`)];if(rt["min-length"]&&_e.length<rt["min-length"])return[new Ro(_t,_e,`array length at least ${rt["min-length"]} expected, length ${_e.length} found`)];let Dt={type:rt.value,values:rt.values,minimum:rt.minimum,maximum:rt.maximum,function:void 0};ut.$version<7&&(Dt.function=rt.function),Ms(rt.value)==="object"&&(Dt=rt.value);let Wt=[];for(let Zt=0;Zt<_e.length;Zt++)Wt=Wt.concat(At({array:_e,arrayIndex:Zt,value:_e[Zt],valueSpec:Dt,style:at,styleSpec:ut,key:`${_t}[${Zt}]`}));return Wt}function ky(nt){const _e=nt.key,rt=nt.value,at=nt.valueSpec;let ut=Ms(rt);if(ut==="number"&&rt!=rt&&(ut="NaN"),ut!=="number")return[new Ro(_e,rt,`number expected, ${ut} found`)];if("minimum"in at){let _t=at.minimum;if(Ms(at.minimum)==="array"&&(_t=at.minimum[nt.arrayIndex]),rt<_t)return[new Ro(_e,rt,`${rt} is less than the minimum value ${_t}`)]}if("maximum"in at){let _t=at.maximum;if(Ms(at.maximum)==="array"&&(_t=at.maximum[nt.arrayIndex]),rt>_t)return[new Ro(_e,rt,`${rt} is greater than the maximum value ${_t}`)]}return[]}function oy(nt){const _e=nt.valueSpec,rt=Gs(nt.value.type);let at,ut,_t,At={};const Dt=rt!=="categorical"&&nt.value.property===void 0,Wt=!Dt,Zt=Ms(nt.value.stops)==="array"&&Ms(nt.value.stops[0])==="array"&&Ms(nt.value.stops[0][0])==="object",tn=ku({key:nt.key,value:nt.value,valueSpec:nt.styleSpec.function,style:nt.style,styleSpec:nt.styleSpec,objectElementValidators:{stops:function(wn){if(rt==="identity")return[new Ro(wn.key,wn.value,'identity function may not have a "stops" property')];let xn=[];const On=wn.value;return xn=xn.concat(wv({key:wn.key,value:On,valueSpec:wn.valueSpec,style:wn.style,styleSpec:wn.styleSpec,arrayElementValidator:cn})),Ms(On)==="array"&&On.length===0&&xn.push(new Ro(wn.key,On,"array must have at least one stop")),xn},default:function(wn){return $l({key:wn.key,value:wn.value,valueSpec:_e,style:wn.style,styleSpec:wn.styleSpec})}}});return rt==="identity"&&Dt&&tn.push(new Ro(nt.key,nt.value,'missing required property "property"')),rt==="identity"||nt.value.stops||tn.push(new Ro(nt.key,nt.value,'missing required property "stops"')),rt==="exponential"&&nt.valueSpec.expression&&!xp(nt.valueSpec)&&tn.push(new Ro(nt.key,nt.value,"exponential functions not supported")),nt.styleSpec.$version>=8&&(Wt&&!Np(nt.valueSpec)?tn.push(new Ro(nt.key,nt.value,"property functions not supported")):Dt&&!Hs(nt.valueSpec)&&tn.push(new Ro(nt.key,nt.value,"zoom functions not supported"))),rt!=="categorical"&&!Zt||nt.value.property!==void 0||tn.push(new Ro(nt.key,nt.value,'"property" property is required')),tn;function cn(wn){let xn=[];const On=wn.value,Un=wn.key;if(Ms(On)!=="array")return[new Ro(Un,On,`array expected, ${Ms(On)} found`)];if(On.length!==2)return[new Ro(Un,On,`array length 2 expected, length ${On.length} found`)];if(Zt){if(Ms(On[0])!=="object")return[new Ro(Un,On,`object expected, ${Ms(On[0])} found`)];if(On[0].zoom===void 0)return[new Ro(Un,On,"object stop key must have zoom")];if(On[0].value===void 0)return[new Ro(Un,On,"object stop key must have value")];const nr=Gs(On[0].zoom);if(typeof nr!="number")return[new Ro(Un,On[0].zoom,"stop zoom values must be numbers")];if(_t&&_t>nr)return[new Ro(Un,On[0].zoom,"stop zoom values must appear in ascending order")];nr!==_t&&(_t=nr,ut=void 0,At={}),xn=xn.concat(ku({key:`${Un}[0]`,value:On[0],valueSpec:{zoom:{}},style:wn.style,styleSpec:wn.styleSpec,objectElementValidators:{zoom:ky,value:fn}}))}else xn=xn.concat(fn({key:`${Un}[0]`,value:On[0],valueSpec:{},style:wn.style,styleSpec:wn.styleSpec},On));return iy(hu(On[1]))?xn.concat([new Ro(`${Un}[1]`,On[1],"expressions are not allowed in function stops.")]):xn.concat($l({key:`${Un}[1]`,value:On[1],valueSpec:_e,style:wn.style,styleSpec:wn.styleSpec}))}function fn(wn,xn){const On=Ms(wn.value),Un=Gs(wn.value),nr=wn.value!==null?wn.value:xn;if(at){if(On!==at)return[new Ro(wn.key,nr,`${On} stop domain type must match previous stop domain type ${at}`)]}else at=On;if(On!=="number"&&On!=="string"&&On!=="boolean"&&typeof Un!="number"&&typeof Un!="string"&&typeof Un!="boolean")return[new Ro(wn.key,nr,"stop domain value must be a number, string, or boolean")];if(On!=="number"&&rt!=="categorical"){let hr=`number expected, ${On} found`;return Np(_e)&&rt===void 0&&(hr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ro(wn.key,nr,hr)]}return rt!=="categorical"||On!=="number"||typeof Un=="number"&&isFinite(Un)&&Math.floor(Un)===Un?rt!=="categorical"&&On==="number"&&typeof Un=="number"&&typeof ut=="number"&&ut!==void 0&&Un<ut?[new Ro(wn.key,nr,"stop domain values must appear in ascending order")]:(ut=Un,rt==="categorical"&&Un in At?[new Ro(wn.key,nr,"stop domain values must be unique")]:(At[Un]=!0,[])):[new Ro(wn.key,nr,`integer expected, found ${String(Un)}`)]}}function up(nt){const _e=(nt.expressionContext==="property"?Up:lm)(hu(nt.value),nt.valueSpec);if(_e.result==="error")return _e.value.map(at=>new Ro(`${nt.key}${at.key}`,nt.value,at.message));const rt=_e.value.expression||_e.value._styleExpression.expression;if(nt.expressionContext==="property"&&nt.propertyKey==="text-font"&&!rt.outputDefined())return[new Ro(nt.key,nt.value,`Invalid data expression for "${nt.propertyKey}". Output values must be contained as literals within the expression.`)];if(nt.expressionContext==="property"&&nt.propertyType==="layout"&&!$m(rt))return[new Ro(nt.key,nt.value,'"feature-state" data expressions are not supported with layout properties.')];if(nt.expressionContext==="filter")return h0(rt,nt);if(nt.expressionContext&&nt.expressionContext.indexOf("cluster")===0){if(!_a(rt,["zoom","feature-state"]))return[new Ro(nt.key,nt.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(nt.expressionContext==="cluster-initial"&&!im(rt))return[new Ro(nt.key,nt.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function h0(nt,_e){const rt=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(_e.valueSpec&&_e.valueSpec.expression)for(const ut of _e.valueSpec.expression.parameters)rt.delete(ut);if(rt.size===0)return[];const at=[];return nt instanceof Gu&&rt.has(nt.name)?[new Ro(_e.key,_e.value,`["${nt.name}"] expression is not supported in a filter for a ${_e.object.type} layer with id: ${_e.object.id}`)]:(nt.eachChild(ut=>{at.push(...h0(ut,_e))}),at)}function Dy(nt){const _e=nt.key,rt=nt.value,at=nt.valueSpec,ut=[];return Array.isArray(at.values)?at.values.indexOf(Gs(rt))===-1&&ut.push(new Ro(_e,rt,`expected one of [${at.values.join(", ")}], ${JSON.stringify(rt)} found`)):Object.keys(at.values).indexOf(Gs(rt))===-1&&ut.push(new Ro(_e,rt,`expected one of [${Object.keys(at.values).join(", ")}], ${JSON.stringify(rt)} found`)),ut}function xv(nt){if(nt===!0||nt===!1)return!0;if(!Array.isArray(nt)||nt.length===0)return!1;switch(nt[0]){case"has":return nt.length>=2&&nt[1]!=="$id"&&nt[1]!=="$type";case"in":return nt.length>=3&&(typeof nt[1]!="string"||Array.isArray(nt[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return nt.length!==3||Array.isArray(nt[1])||Array.isArray(nt[2]);case"any":case"all":for(const _e of nt.slice(1))if(!xv(_e)&&typeof _e!="boolean")return!1;return!0;default:return!0}}function v_(nt,_e="fill"){if(nt==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};xv(nt)||(nt=sy(nt));const rt=nt;let at=!0;try{at=function(Zt){if(!zp(Zt))return Zt;let tn=hu(Zt);return Nl(tn),tn=Fl(tn),tn}(rt)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(rt,null,2)}
        `)}const ut=$r[`filter_${_e}`],_t=lm(at,ut);let At=null;if(_t.result==="error")throw new Error(_t.value.map(Zt=>`${Zt.key}: ${Zt.message}`).join(", "));At=(Zt,tn,cn)=>_t.value.evaluate(Zt,tn,{},cn);let Dt=null,Wt=null;if(at!==rt){const Zt=lm(rt,ut);if(Zt.result==="error")throw new Error(Zt.value.map(tn=>`${tn.key}: ${tn.message}`).join(", "));Dt=(tn,cn,fn,wn,xn)=>Zt.value.evaluate(tn,cn,{},fn,void 0,void 0,wn,xn),Wt=!im(Zt.value.expression)}return{filter:At,dynamicFilter:Dt||void 0,needGeometry:f0(at),needFeature:!!Wt}}function Fl(nt){if(!Array.isArray(nt))return nt;const _e=function(rt){if(Du.has(rt[0])){for(let at=1;at<rt.length;at++)if(zp(rt[at]))return!0}return rt}(nt);return _e===!0?_e:_e.map(rt=>Fl(rt))}function Nl(nt){let _e=!1;const rt=[];if(nt[0]==="case"){for(let at=1;at<nt.length-1;at+=2)_e=_e||zp(nt[at]),rt.push(nt[at+1]);rt.push(nt[nt.length-1])}else if(nt[0]==="match"){_e=_e||zp(nt[1]);for(let at=2;at<nt.length-1;at+=2)rt.push(nt[at+1]);rt.push(nt[nt.length-1])}else if(nt[0]==="step"){_e=_e||zp(nt[1]);for(let at=1;at<nt.length-1;at+=2)rt.push(nt[at+1])}_e&&(nt.length=0,nt.push("any",...rt));for(let at=1;at<nt.length;at++)Nl(nt[at])}function zp(nt){if(!Array.isArray(nt))return!1;if((_e=nt[0])==="pitch"||_e==="distance-from-center")return!0;var _e;for(let rt=1;rt<nt.length;rt++)if(zp(nt[rt]))return!0;return!1}const Du=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ly(nt,_e){return nt<_e?-1:nt>_e?1:0}function f0(nt){if(!Array.isArray(nt))return!1;if(nt[0]==="within")return!0;for(let _e=1;_e<nt.length;_e++)if(f0(nt[_e]))return!0;return!1}function sy(nt){if(!nt)return!0;const _e=nt[0];return nt.length<=1?_e!=="any":_e==="=="?Pm(nt[1],nt[2],"=="):_e==="!="?cm(Pm(nt[1],nt[2],"==")):_e==="<"||_e===">"||_e==="<="||_e===">="?Pm(nt[1],nt[2],_e):_e==="any"?(rt=nt.slice(1),["any"].concat(rt.map(sy))):_e==="all"?["all"].concat(nt.slice(1).map(sy)):_e==="none"?["all"].concat(nt.slice(1).map(sy).map(cm)):_e==="in"?b_(nt[1],nt.slice(2)):_e==="!in"?cm(b_(nt[1],nt.slice(2))):_e==="has"?Vp(nt[1]):_e==="!has"?cm(Vp(nt[1])):_e!=="within"||nt;var rt}function Pm(nt,_e,rt){switch(nt){case"$type":return[`filter-type-${rt}`,_e];case"$id":return[`filter-id-${rt}`,_e];default:return[`filter-${rt}`,nt,_e]}}function b_(nt,_e){if(_e.length===0)return!1;switch(nt){case"$type":return["filter-type-in",["literal",_e]];case"$id":return["filter-id-in",["literal",_e]];default:return _e.length>200&&!_e.some(rt=>typeof rt!=typeof _e[0])?["filter-in-large",nt,["literal",_e.sort(Ly)]]:["filter-in-small",nt,["literal",_e]]}}function Vp(nt){switch(nt){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",nt]}}function cm(nt){return["!",nt]}function Wp(nt){return xv(hu(nt.value))?up(xa({},nt,{expressionContext:"filter",valueSpec:nt.styleSpec[`filter_${nt.layerType||"fill"}`]})):By(nt)}function By(nt){const _e=nt.value,rt=nt.key;if(Ms(_e)!=="array")return[new Ro(rt,_e,`array expected, ${Ms(_e)} found`)];const at=nt.styleSpec;let ut,_t=[];if(_e.length<1)return[new Ro(rt,_e,"filter array must have at least 1 element")];switch(_t=_t.concat(Dy({key:`${rt}[0]`,value:_e[0],valueSpec:at.filter_operator,style:nt.style,styleSpec:nt.styleSpec})),Gs(_e[0])){case"<":case"<=":case">":case">=":_e.length>=2&&Gs(_e[1])==="$type"&&_t.push(new Ro(rt,_e,`"$type" cannot be use with operator "${_e[0]}"`));case"==":case"!=":_e.length!==3&&_t.push(new Ro(rt,_e,`filter array for operator "${_e[0]}" must have 3 elements`));case"in":case"!in":_e.length>=2&&(ut=Ms(_e[1]),ut!=="string"&&_t.push(new Ro(`${rt}[1]`,_e[1],`string expected, ${ut} found`)));for(let At=2;At<_e.length;At++)ut=Ms(_e[At]),Gs(_e[1])==="$type"?_t=_t.concat(Dy({key:`${rt}[${At}]`,value:_e[At],valueSpec:at.geometry_type,style:nt.style,styleSpec:nt.styleSpec})):ut!=="string"&&ut!=="number"&&ut!=="boolean"&&_t.push(new Ro(`${rt}[${At}]`,_e[At],`string, number, or boolean expected, ${ut} found`));break;case"any":case"all":case"none":for(let At=1;At<_e.length;At++)_t=_t.concat(By({key:`${rt}[${At}]`,value:_e[At],style:nt.style,styleSpec:nt.styleSpec}));break;case"has":case"!has":ut=Ms(_e[1]),_e.length!==2?_t.push(new Ro(rt,_e,`filter array for "${_e[0]}" operator must have 2 elements`)):ut!=="string"&&_t.push(new Ro(`${rt}[1]`,_e[1],`string expected, ${ut} found`));break;case"within":ut=Ms(_e[1]),_e.length!==2?_t.push(new Ro(rt,_e,`filter array for "${_e[0]}" operator must have 2 elements`)):ut!=="object"&&_t.push(new Ro(`${rt}[1]`,_e[1],`object expected, ${ut} found`))}return _t}function km(nt,_e){const rt=nt.key,at=nt.style,ut=nt.styleSpec,_t=nt.value,At=nt.objectKey,Dt=ut[`${_e}_${nt.layerType}`];if(!Dt)return[];const Wt=At.match(/^(.*)-transition$/);if(_e==="paint"&&Wt&&Dt[Wt[1]]&&Dt[Wt[1]].transition)return $l({key:rt,value:_t,valueSpec:ut.transition,style:at,styleSpec:ut});const Zt=nt.valueSpec||Dt[At];if(!Zt)return[new Ro(rt,_t,`unknown property "${At}"`)];let tn;if(Ms(_t)==="string"&&Np(Zt)&&!Zt.tokens&&(tn=/^{([^}]+)}$/.exec(_t)))return[new Ro(rt,_t,`"${At}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(tn[1])} }\`.`)];const cn=[];return nt.layerType==="symbol"&&(At==="text-field"&&at&&!at.glyphs&&cn.push(new Ro(rt,_t,'use of "text-field" requires a style "glyphs" property')),At==="text-font"&&$u(hu(_t))&&Gs(_t.type)==="identity"&&cn.push(new Ro(rt,_t,'"text-font" does not support identity functions'))),cn.concat($l({key:nt.key,value:_t,valueSpec:Zt,style:at,styleSpec:ut,expressionContext:"property",propertyType:_e,propertyKey:At}))}function w_(nt){return km(nt,"paint")}function d0(nt){return km(nt,"layout")}function Sv(nt){let _e=[];const rt=nt.value,at=nt.key,ut=nt.style,_t=nt.styleSpec;rt.type||rt.ref||_e.push(new Ro(at,rt,'either "type" or "ref" is required'));let At=Gs(rt.type);const Dt=Gs(rt.ref);if(rt.id){const Wt=Gs(rt.id);for(let Zt=0;Zt<nt.arrayIndex;Zt++){const tn=ut.layers[Zt];Gs(tn.id)===Wt&&_e.push(new Ro(at,rt.id,`duplicate layer id "${rt.id}", previously used at line ${tn.id.__line__}`))}}if("ref"in rt){let Wt;["type","source","source-layer","filter","layout"].forEach(Zt=>{Zt in rt&&_e.push(new Ro(at,rt[Zt],`"${Zt}" is prohibited for ref layers`))}),ut.layers.forEach(Zt=>{Gs(Zt.id)===Dt&&(Wt=Zt)}),Wt?Wt.ref?_e.push(new Ro(at,rt.ref,"ref cannot reference another ref layer")):At=Gs(Wt.type):typeof Dt=="string"&&_e.push(new Ro(at,rt.ref,`ref layer "${Dt}" not found`))}else if(At!=="background"&&At!=="sky")if(rt.source){const Wt=ut.sources&&ut.sources[rt.source],Zt=Wt&&Gs(Wt.type);Wt?Zt==="vector"&&At==="raster"?_e.push(new Ro(at,rt.source,`layer "${rt.id}" requires a raster source`)):Zt==="raster"&&At!=="raster"?_e.push(new Ro(at,rt.source,`layer "${rt.id}" requires a vector source`)):Zt!=="vector"||rt["source-layer"]?Zt==="raster-dem"&&At!=="hillshade"?_e.push(new Ro(at,rt.source,"raster-dem source can only be used with layer type 'hillshade'.")):At!=="line"||!rt.paint||!rt.paint["line-gradient"]&&!rt.paint["line-trim-offset"]||Zt==="geojson"&&Wt.lineMetrics||_e.push(new Ro(at,rt,`layer "${rt.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):_e.push(new Ro(at,rt,`layer "${rt.id}" must specify a "source-layer"`)):_e.push(new Ro(at,rt.source,`source "${rt.source}" not found`))}else _e.push(new Ro(at,rt,'missing required property "source"'));return _e=_e.concat(ku({key:at,value:rt,valueSpec:_t.layer,style:nt.style,styleSpec:nt.styleSpec,objectElementValidators:{"*":()=>[],type:()=>$l({key:`${at}.type`,value:rt.type,valueSpec:_t.layer.type,style:nt.style,styleSpec:nt.styleSpec,object:rt,objectKey:"type"}),filter:Wt=>Wp(xa({layerType:At},Wt)),layout:Wt=>ku({layer:rt,key:Wt.key,value:Wt.value,valueSpec:{},style:Wt.style,styleSpec:Wt.styleSpec,objectElementValidators:{"*":Zt=>d0(xa({layerType:At},Zt))}}),paint:Wt=>ku({layer:rt,key:Wt.key,value:Wt.value,valueSpec:{},style:Wt.style,styleSpec:Wt.styleSpec,objectElementValidators:{"*":Zt=>w_(xa({layerType:At},Zt))}})}})),_e}function Dm(nt){const _e=nt.value,rt=nt.key,at=Ms(_e);return at!=="string"?[new Ro(rt,_e,`string expected, ${at} found`)]:[]}const g0={promoteId:function({key:nt,value:_e}){if(Ms(_e)==="string")return Dm({key:nt,value:_e});{const rt=[];for(const at in _e)rt.push(...Dm({key:`${nt}.${at}`,value:_e[at]}));return rt}}};function Lm(nt){const _e=nt.value,rt=nt.key,at=nt.styleSpec,ut=nt.style;if(!_e.type)return[new Ro(rt,_e,'"type" is required')];const _t=Gs(_e.type);let At;switch(_t){case"vector":case"raster":case"raster-dem":return At=ku({key:rt,value:_e,valueSpec:at[`source_${_t.replace("-","_")}`],style:nt.style,styleSpec:at,objectElementValidators:g0}),At;case"geojson":if(At=ku({key:rt,value:_e,valueSpec:at.source_geojson,style:ut,styleSpec:at,objectElementValidators:g0}),_e.cluster)for(const Dt in _e.clusterProperties){const[Wt,Zt]=_e.clusterProperties[Dt],tn=typeof Wt=="string"?[Wt,["accumulated"],["get",Dt]]:Wt;At.push(...up({key:`${rt}.${Dt}.map`,value:Zt,expressionContext:"cluster-map"})),At.push(...up({key:`${rt}.${Dt}.reduce`,value:tn,expressionContext:"cluster-reduce"}))}return At;case"video":return ku({key:rt,value:_e,valueSpec:at.source_video,style:ut,styleSpec:at});case"image":return ku({key:rt,value:_e,valueSpec:at.source_image,style:ut,styleSpec:at});case"canvas":return[new Ro(rt,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Dy({key:`${rt}.type`,value:_e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ut,styleSpec:at})}}function Gp(nt){const _e=nt.value,rt=nt.styleSpec,at=rt.light,ut=nt.style;let _t=[];const At=Ms(_e);if(_e===void 0)return _t;if(At!=="object")return _t=_t.concat([new Ro("light",_e,`object expected, ${At} found`)]),_t;for(const Dt in _e){const Wt=Dt.match(/^(.*)-transition$/);_t=_t.concat(Wt&&at[Wt[1]]&&at[Wt[1]].transition?$l({key:Dt,value:_e[Dt],valueSpec:rt.transition,style:ut,styleSpec:rt}):at[Dt]?$l({key:Dt,value:_e[Dt],valueSpec:at[Dt],style:ut,styleSpec:rt}):[new Ro(Dt,_e[Dt],`unknown property "${Dt}"`)])}return _t}function x_(nt){const _e=nt.value,rt=nt.key,at=nt.style,ut=nt.styleSpec,_t=ut.terrain;let At=[];const Dt=Ms(_e);if(_e===void 0)return At;if(Dt!=="object")return At=At.concat([new Ro("terrain",_e,`object expected, ${Dt} found`)]),At;for(const Wt in _e){const Zt=Wt.match(/^(.*)-transition$/);At=At.concat(Zt&&_t[Zt[1]]&&_t[Zt[1]].transition?$l({key:Wt,value:_e[Wt],valueSpec:ut.transition,style:at,styleSpec:ut}):_t[Wt]?$l({key:Wt,value:_e[Wt],valueSpec:_t[Wt],style:at,styleSpec:ut}):[new Ro(Wt,_e[Wt],`unknown property "${Wt}"`)])}if(_e.source){const Wt=at.sources&&at.sources[_e.source],Zt=Wt&&Gs(Wt.type);Wt?Zt!=="raster-dem"&&At.push(new Ro(rt,_e.source,`terrain cannot be used with a source of type ${String(Zt)}, it only be used with a "raster-dem" source type`)):At.push(new Ro(rt,_e.source,`source "${_e.source}" not found`))}else At.push(new Ro(rt,_e,'terrain is missing required property "source"'));return At}function zn(nt){const _e=nt.value,rt=nt.style,at=nt.styleSpec,ut=at.fog;let _t=[];const At=Ms(_e);if(_e===void 0)return _t;if(At!=="object")return _t=_t.concat([new Ro("fog",_e,`object expected, ${At} found`)]),_t;for(const Dt in _e){const Wt=Dt.match(/^(.*)-transition$/);_t=_t.concat(Wt&&ut[Wt[1]]&&ut[Wt[1]].transition?$l({key:Dt,value:_e[Dt],valueSpec:at.transition,style:rt,styleSpec:at}):ut[Dt]?$l({key:Dt,value:_e[Dt],valueSpec:ut[Dt],style:rt,styleSpec:at}):[new Ro(Dt,_e[Dt],`unknown property "${Dt}"`)])}return _t}const hm={"*":()=>[],array:wv,boolean:function(nt){const _e=nt.value,rt=nt.key,at=Ms(_e);return at!=="boolean"?[new Ro(rt,_e,`boolean expected, ${at} found`)]:[]},number:ky,color:function(nt){const _e=nt.key,rt=nt.value,at=Ms(rt);return at!=="string"?[new Ro(_e,rt,`color expected, ${at} found`)]:Wu(rt)===null?[new Ro(_e,rt,`color expected, "${rt}" found`)]:[]},enum:Dy,filter:Wp,function:oy,layer:Sv,object:ku,source:Lm,light:Gp,terrain:x_,fog:zn,string:Dm,formatted:function(nt){return Dm(nt).length===0?[]:up(nt)},resolvedImage:function(nt){return Dm(nt).length===0?[]:up(nt)},projection:function(nt){const _e=nt.value,rt=nt.styleSpec,at=rt.projection,ut=nt.style;let _t=[];const At=Ms(_e);if(At==="object")for(const Dt in _e)_t=_t.concat($l({key:Dt,value:_e[Dt],valueSpec:at[Dt],style:ut,styleSpec:rt}));else At!=="string"&&(_t=_t.concat([new Ro("projection",_e,`object or string expected, ${At} found`)]));return _t}};function $l(nt){const _e=nt.value,rt=nt.valueSpec,at=nt.styleSpec;return rt.expression&&$u(Gs(_e))?oy(nt):rt.expression&&iy(hu(_e))?up(nt):rt.type&&hm[rt.type]?hm[rt.type](nt):ku(xa({},nt,{valueSpec:rt.type?at[rt.type]:rt}))}function Cu(nt){const _e=nt.value,rt=nt.key,at=Dm(nt);return at.length||(_e.indexOf("{fontstack}")===-1&&at.push(new Ro(rt,_e,'"glyphs" url must include a "{fontstack}" token')),_e.indexOf("{range}")===-1&&at.push(new Ro(rt,_e,'"glyphs" url must include a "{range}" token'))),at}function Is(nt,_e=$r){return Hp($l({key:"",value:nt,valueSpec:_e.$root,styleSpec:_e,style:nt,objectElementValidators:{glyphs:Cu,"*":()=>[]}}))}const T1=nt=>Hp(w_(nt)),C1=nt=>Hp(d0(nt));function Hp(nt){return nt.slice().sort((_e,rt)=>_e.line&&rt.line?_e.line-rt.line:0)}function $p(nt,_e){let rt=!1;if(_e&&_e.length)for(const at of _e)nt.fire(new Su(new Error(at.message))),rt=!0;return rt}var ay=Ap;function Ap(nt,_e,rt){var at=this.cells=[];if(nt instanceof ArrayBuffer){this.arrayBuffer=nt;var ut=new Int32Array(this.arrayBuffer);nt=ut[0],this.d=(_e=ut[1])+2*(rt=ut[2]);for(var _t=0;_t<this.d*this.d;_t++){var At=ut[3+_t],Dt=ut[3+_t+1];at.push(At===Dt?null:ut.subarray(At,Dt))}var Wt=ut[3+at.length+1];this.keys=ut.subarray(ut[3+at.length],Wt),this.bboxes=ut.subarray(Wt),this.insert=this._insertReadonly}else{this.d=_e+2*rt;for(var Zt=0;Zt<this.d*this.d;Zt++)at.push([]);this.keys=[],this.bboxes=[]}this.n=_e,this.extent=nt,this.padding=rt,this.scale=_e/nt,this.uid=0;var tn=rt/_e*nt;this.min=-tn,this.max=nt+tn}Ap.prototype.insert=function(nt,_e,rt,at,ut){this._forEachCell(_e,rt,at,ut,this._insertCell,this.uid++),this.keys.push(nt),this.bboxes.push(_e),this.bboxes.push(rt),this.bboxes.push(at),this.bboxes.push(ut)},Ap.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ap.prototype._insertCell=function(nt,_e,rt,at,ut,_t){this.cells[ut].push(_t)},Ap.prototype.query=function(nt,_e,rt,at,ut){var _t=this.min,At=this.max;if(nt<=_t&&_e<=_t&&At<=rt&&At<=at&&!ut)return Array.prototype.slice.call(this.keys);var Dt=[];return this._forEachCell(nt,_e,rt,at,this._queryCell,Dt,{},ut),Dt},Ap.prototype._queryCell=function(nt,_e,rt,at,ut,_t,At,Dt){var Wt=this.cells[ut];if(Wt!==null)for(var Zt=this.keys,tn=this.bboxes,cn=0;cn<Wt.length;cn++){var fn=Wt[cn];if(At[fn]===void 0){var wn=4*fn;(Dt?Dt(tn[wn+0],tn[wn+1],tn[wn+2],tn[wn+3]):nt<=tn[wn+2]&&_e<=tn[wn+3]&&rt>=tn[wn+0]&&at>=tn[wn+1])?(At[fn]=!0,_t.push(Zt[fn])):At[fn]=!1}}},Ap.prototype._forEachCell=function(nt,_e,rt,at,ut,_t,At,Dt){for(var Wt=this._convertToCellCoord(nt),Zt=this._convertToCellCoord(_e),tn=this._convertToCellCoord(rt),cn=this._convertToCellCoord(at),fn=Wt;fn<=tn;fn++)for(var wn=Zt;wn<=cn;wn++){var xn=this.d*wn+fn;if((!Dt||Dt(this._convertFromCellCoord(fn),this._convertFromCellCoord(wn),this._convertFromCellCoord(fn+1),this._convertFromCellCoord(wn+1)))&&ut.call(this,nt,_e,rt,at,xn,_t,At,Dt))return}},Ap.prototype._convertFromCellCoord=function(nt){return(nt-this.padding)/this.scale},Ap.prototype._convertToCellCoord=function(nt){return Math.max(0,Math.min(this.d-1,Math.floor(nt*this.scale)+this.padding))},Ap.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var nt=this.cells,_e=3+this.cells.length+1+1,rt=0,at=0;at<this.cells.length;at++)rt+=this.cells[at].length;var ut=new Int32Array(_e+rt+this.keys.length+this.bboxes.length);ut[0]=this.extent,ut[1]=this.n,ut[2]=this.padding;for(var _t=_e,At=0;At<nt.length;At++){var Dt=nt[At];ut[3+At]=_t,ut.set(Dt,_t),_t+=Dt.length}return ut[3+nt.length]=_t,ut.set(this.keys,_t),ut[3+nt.length+1]=_t+=this.keys.length,ut.set(this.bboxes,_t),_t+=this.bboxes.length,ut.buffer};const S_={};function Oo(nt,_e,rt={}){Object.defineProperty(nt,"_classRegistryKey",{value:_e,writeable:!1}),S_[_e]={klass:nt,omit:rt.omit||[]}}Oo(Object,"Object"),ay.serialize=function(nt,_e){const rt=nt.toArrayBuffer();return _e&&_e.push(rt),{buffer:rt}},ay.deserialize=function(nt){return new ay(nt.buffer)},Object.defineProperty(ay,"name",{value:"Grid"}),Oo(ay,"Grid"),Oo(zs,"Color"),Oo(Error,"Error"),Oo(Jo,"AJAXError"),Oo(on,"ResolvedImage"),Oo(yu,"StylePropertyFunction"),Oo(am,"StyleExpression",{omit:["_evaluator"]}),Oo(Py,"ZoomDependentExpression"),Oo(Mm,"ZoomConstantExpression"),Oo(Gu,"CompoundExpression",{omit:["_evaluate"]});for(const nt in ty)S_[ty[nt]._classRegistryKey]||Oo(ty[nt],`Expression${nt}`);function p0(nt){return nt&&typeof ArrayBuffer<"u"&&(nt instanceof ArrayBuffer||nt.constructor&&nt.constructor.name==="ArrayBuffer")}function Ep(nt){return it.ImageBitmap&&nt instanceof it.ImageBitmap}function jy(nt,_e){if(nt==null||typeof nt=="boolean"||typeof nt=="number"||typeof nt=="string"||nt instanceof Boolean||nt instanceof Number||nt instanceof String||nt instanceof Date||nt instanceof RegExp)return nt;if(p0(nt)||Ep(nt))return _e&&_e.push(nt),nt;if(ArrayBuffer.isView(nt)){const rt=nt;return _e&&_e.push(rt.buffer),rt}if(nt instanceof it.ImageData)return _e&&_e.push(nt.data.buffer),nt;if(Array.isArray(nt)){const rt=[];for(const at of nt)rt.push(jy(at,_e));return rt}if(typeof nt=="object"){const rt=nt.constructor,at=rt._classRegistryKey;if(!at)throw new Error(`can't serialize object of unregistered class ${at}`);const ut=rt.serialize?rt.serialize(nt,_e):{};if(!rt.serialize){for(const _t in nt)nt.hasOwnProperty(_t)&&(S_[at].omit.indexOf(_t)>=0||(ut[_t]=jy(nt[_t],_e)));nt instanceof Error&&(ut.message=nt.message)}if(ut.$name)throw new Error("$name property is reserved for worker serialization logic.");return at!=="Object"&&(ut.$name=at),ut}throw new Error("can't serialize object of type "+typeof nt)}function fm(nt){if(nt==null||typeof nt=="boolean"||typeof nt=="number"||typeof nt=="string"||nt instanceof Boolean||nt instanceof Number||nt instanceof String||nt instanceof Date||nt instanceof RegExp||p0(nt)||Ep(nt)||ArrayBuffer.isView(nt)||nt instanceof it.ImageData)return nt;if(Array.isArray(nt))return nt.map(fm);if(typeof nt=="object"){const _e=nt.$name||"Object",{klass:rt}=S_[_e];if(!rt)throw new Error(`can't deserialize unregistered class ${_e}`);if(rt.deserialize)return rt.deserialize(nt);const at=Object.create(rt.prototype);for(const ut of Object.keys(nt))ut!=="$name"&&(at[ut]=fm(nt[ut]));return at}throw new Error("can't deserialize object of type "+typeof nt)}class m0{constructor(){this.first=!0}update(_e,rt){const at=Math.floor(_e);return this.first?(this.first=!1,this.lastIntegerZoom=at,this.lastIntegerZoomTime=0,this.lastZoom=_e,this.lastFloorZoom=at,!0):(this.lastFloorZoom>at?(this.lastIntegerZoom=at+1,this.lastIntegerZoomTime=rt):this.lastFloorZoom<at&&(this.lastIntegerZoom=at,this.lastIntegerZoomTime=rt),_e!==this.lastZoom&&(this.lastZoom=_e,this.lastFloorZoom=at,!0))}}const y0=nt=>nt>=1536&&nt<=1791,Fy=nt=>nt>=1872&&nt<=1919,Tp=nt=>nt>=2208&&nt<=2303,Av=nt=>nt>=11904&&nt<=12031,_0=nt=>nt>=12032&&nt<=12255,Ev=nt=>nt>=12272&&nt<=12287,Ny=nt=>nt>=12288&&nt<=12351,A_=nt=>nt>=12352&&nt<=12447,cp=nt=>nt>=12448&&nt<=12543,E_=nt=>nt>=12544&&nt<=12591,T_=nt=>nt>=12704&&nt<=12735,qu=nt=>nt>=12736&&nt<=12783,v0=nt=>nt>=12784&&nt<=12799,Tv=nt=>nt>=12800&&nt<=13055,b0=nt=>nt>=13056&&nt<=13311,w0=nt=>nt>=13312&&nt<=19903,Cv=nt=>nt>=19968&&nt<=40959,Uy=nt=>nt>=40960&&nt<=42127,Rv=nt=>nt>=42128&&nt<=42191,x0=nt=>nt>=44032&&nt<=55215,S0=nt=>nt>=63744&&nt<=64255,zy=nt=>nt>=64336&&nt<=65023,ly=nt=>nt>=65040&&nt<=65055,Bm=nt=>nt>=65072&&nt<=65103,Vy=nt=>nt>=65104&&nt<=65135,dt=nt=>nt>=65136&&nt<=65279,ot=nt=>nt>=65280&&nt<=65519;function lt(nt){for(const _e of nt)if(Ft(_e.charCodeAt(0)))return!0;return!1}function bt(nt){for(const _e of nt)if(!kt(_e.charCodeAt(0)))return!1;return!0}function kt(nt){return!(y0(nt)||Fy(nt)||Tp(nt)||zy(nt)||dt(nt))}function Ft(nt){return!(nt!==746&&nt!==747&&(nt<4352||!(T_(nt)||E_(nt)||Bm(nt)&&!(nt>=65097&&nt<=65103)||S0(nt)||b0(nt)||Av(nt)||qu(nt)||!(!Ny(nt)||nt>=12296&&nt<=12305||nt>=12308&&nt<=12319||nt===12336)||w0(nt)||Cv(nt)||Tv(nt)||(_e=>_e>=12592&&_e<=12687)(nt)||(_e=>_e>=43360&&_e<=43391)(nt)||(_e=>_e>=55216&&_e<=55295)(nt)||(_e=>_e>=4352&&_e<=4607)(nt)||x0(nt)||A_(nt)||Ev(nt)||(_e=>_e>=12688&&_e<=12703)(nt)||_0(nt)||v0(nt)||cp(nt)&&nt!==12540||!(!ot(nt)||nt===65288||nt===65289||nt===65293||nt>=65306&&nt<=65310||nt===65339||nt===65341||nt===65343||nt>=65371&&nt<=65503||nt===65507||nt>=65512&&nt<=65519)||!(!Vy(nt)||nt>=65112&&nt<=65118||nt>=65123&&nt<=65126)||(_e=>_e>=5120&&_e<=5759)(nt)||(_e=>_e>=6320&&_e<=6399)(nt)||ly(nt)||(_e=>_e>=19904&&_e<=19967)(nt)||Uy(nt)||Rv(nt))))}function Yt(nt){return!(Ft(nt)||function(_e){return!!((rt=>rt>=128&&rt<=255)(_e)&&(_e===167||_e===169||_e===174||_e===177||_e===188||_e===189||_e===190||_e===215||_e===247)||(rt=>rt>=8192&&rt<=8303)(_e)&&(_e===8214||_e===8224||_e===8225||_e===8240||_e===8241||_e===8251||_e===8252||_e===8258||_e===8263||_e===8264||_e===8265||_e===8273)||(rt=>rt>=8448&&rt<=8527)(_e)||(rt=>rt>=8528&&rt<=8591)(_e)||(rt=>rt>=8960&&rt<=9215)(_e)&&(_e>=8960&&_e<=8967||_e>=8972&&_e<=8991||_e>=8996&&_e<=9e3||_e===9003||_e>=9085&&_e<=9114||_e>=9150&&_e<=9165||_e===9167||_e>=9169&&_e<=9179||_e>=9186&&_e<=9215)||(rt=>rt>=9216&&rt<=9279)(_e)&&_e!==9251||(rt=>rt>=9280&&rt<=9311)(_e)||(rt=>rt>=9312&&rt<=9471)(_e)||(rt=>rt>=9632&&rt<=9727)(_e)||(rt=>rt>=9728&&rt<=9983)(_e)&&!(_e>=9754&&_e<=9759)||(rt=>rt>=11008&&rt<=11263)(_e)&&(_e>=11026&&_e<=11055||_e>=11088&&_e<=11097||_e>=11192&&_e<=11243)||Ny(_e)||cp(_e)||(rt=>rt>=57344&&rt<=63743)(_e)||Bm(_e)||Vy(_e)||ot(_e)||_e===8734||_e===8756||_e===8757||_e>=9984&&_e<=10087||_e>=10102&&_e<=10131||_e===65532||_e===65533)}(nt))}function rn(nt){return nt>=1424&&nt<=2303||zy(nt)||dt(nt)}function ln(nt,_e){return!(!_e&&rn(nt)||nt>=2304&&nt<=3583||nt>=3840&&nt<=4255||(rt=>rt>=6016&&rt<=6143)(nt))}function pn(nt){for(const _e of nt)if(rn(_e.charCodeAt(0)))return!0;return!1}const vn="deferred",Tn="loading",Dn="loaded";let $n=null,Wn="unavailable",Zn=null;const Fn=function(nt){nt&&typeof nt=="string"&&nt.indexOf("NetworkError")>-1&&(Wn="error"),$n&&$n(nt)};function jn(){Qn.fire(new As("pluginStateChange",{pluginStatus:Wn,pluginURL:Zn}))}const Qn=new cu,Gn=function(){return Wn},or=function(){if(Wn!==vn||!Zn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Wn=Tn,jn(),Zn&&Ss({url:Zn},nt=>{nt?Fn(nt):(Wn=Dn,jn())})},lr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Wn===Dn||lr.applyArabicShaping!=null,isLoading:()=>Wn===Tn,setState(nt){Wn=nt.pluginStatus,Zn=nt.pluginURL},isParsed:()=>lr.applyArabicShaping!=null&&lr.processBidirectionalText!=null&&lr.processStyledBidirectionalText!=null,getPluginURL:()=>Zn};class er{constructor(_e,rt){this.zoom=_e,rt?(this.now=rt.now,this.fadeDuration=rt.fadeDuration,this.zoomHistory=rt.zoomHistory,this.transition=rt.transition,this.pitch=rt.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new m0,this.transition={},this.pitch=0)}isSupportedScript(_e){return function(rt,at){for(const ut of rt)if(!ln(ut.charCodeAt(0),at))return!1;return!0}(_e,lr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const _e=this.zoom,rt=_e-Math.floor(_e),at=this.crossFadingFactor();return _e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:rt+(1-rt)*at}:{fromScale:.5,toScale:1,t:1-(1-at)*rt}}}class dr{constructor(_e,rt){this.property=_e,this.value=rt,this.expression=function(at,ut){if($u(at))return new yu(at,ut);if(iy(at)){const _t=Up(at,ut);if(_t.result==="error")throw new Error(_t.value.map(At=>`${At.key}: ${At.message}`).join(", "));return _t.value}{let _t=at;return typeof at=="string"&&ut.type==="color"&&(_t=zs.parse(at)),{kind:"constant",evaluate:()=>_t}}}(rt===void 0?_e.specification.default:rt,_e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(_e,rt,at){return this.property.possiblyEvaluate(this,_e,rt,at)}}class Ar{constructor(_e){this.property=_e,this.value=new dr(_e,void 0)}transitioned(_e,rt){return new Dr(this.property,this.value,rt,wt({},_e.transition,this.transition),_e.now)}untransitioned(){return new Dr(this.property,this.value,null,{},0)}}class Fr{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultTransitionablePropertyValues)}getValue(_e){return Qt(this._values[_e].value.value)}setValue(_e,rt){this._values.hasOwnProperty(_e)||(this._values[_e]=new Ar(this._values[_e].property)),this._values[_e].value=new dr(this._values[_e].property,rt===null?void 0:Qt(rt))}getTransition(_e){return Qt(this._values[_e].transition)}setTransition(_e,rt){this._values.hasOwnProperty(_e)||(this._values[_e]=new Ar(this._values[_e].property)),this._values[_e].transition=Qt(rt)||void 0}serialize(){const _e={};for(const rt of Object.keys(this._values)){const at=this.getValue(rt);at!==void 0&&(_e[rt]=at);const ut=this.getTransition(rt);ut!==void 0&&(_e[`${rt}-transition`]=ut)}return _e}transitioned(_e,rt){const at=new co(this._properties);for(const ut of Object.keys(this._values))at._values[ut]=this._values[ut].transitioned(_e,rt._values[ut]);return at}untransitioned(){const _e=new co(this._properties);for(const rt of Object.keys(this._values))_e._values[rt]=this._values[rt].untransitioned();return _e}}class Dr{constructor(_e,rt,at,ut,_t){const At=ut.delay||0,Dt=ut.duration||0;_t=_t||0,this.property=_e,this.value=rt,this.begin=_t+At,this.end=this.begin+Dt,_e.specification.transition&&(ut.delay||ut.duration)&&(this.prior=at)}possiblyEvaluate(_e,rt,at){const ut=_e.now||0,_t=this.value.possiblyEvaluate(_e,rt,at),At=this.prior;if(At){if(ut>this.end)return this.prior=null,_t;if(this.value.isDataDriven())return this.prior=null,_t;if(ut<this.begin)return At.possiblyEvaluate(_e,rt,at);{const Dt=(ut-this.begin)/(this.end-this.begin);return this.property.interpolate(At.possiblyEvaluate(_e,rt,at),_t,Ct(Dt))}}return _t}}class co{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultTransitioningPropertyValues)}possiblyEvaluate(_e,rt,at){const ut=new eo(this._properties);for(const _t of Object.keys(this._values))ut._values[_t]=this._values[_t].possiblyEvaluate(_e,rt,at);return ut}hasTransition(){for(const _e of Object.keys(this._values))if(this._values[_e].prior)return!0;return!1}}class Sr{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultPropertyValues)}getValue(_e){return Qt(this._values[_e].value)}setValue(_e,rt){this._values[_e]=new dr(this._values[_e].property,rt===null?void 0:Qt(rt))}serialize(){const _e={};for(const rt of Object.keys(this._values)){const at=this.getValue(rt);at!==void 0&&(_e[rt]=at)}return _e}possiblyEvaluate(_e,rt,at){const ut=new eo(this._properties);for(const _t of Object.keys(this._values))ut._values[_t]=this._values[_t].possiblyEvaluate(_e,rt,at);return ut}}class _i{constructor(_e,rt,at){this.property=_e,this.value=rt,this.parameters=at}isConstant(){return this.value.kind==="constant"}constantOr(_e){return this.value.kind==="constant"?this.value.value:_e}evaluate(_e,rt,at,ut){return this.property.evaluate(this.value,this.parameters,_e,rt,at,ut)}}class eo{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultPossiblyEvaluatedValues)}get(_e){return this._values[_e]}}class Or{constructor(_e){this.specification=_e}possiblyEvaluate(_e,rt){return _e.expression.evaluate(rt)}interpolate(_e,rt,at){const ut=lp[this.specification.type];return ut?ut(_e,rt,at):_e}}class br{constructor(_e,rt){this.specification=_e,this.overrides=rt}possiblyEvaluate(_e,rt,at,ut){return new _i(this,_e.expression.kind==="constant"||_e.expression.kind==="camera"?{kind:"constant",value:_e.expression.evaluate(rt,null,{},at,ut)}:_e.expression,rt)}interpolate(_e,rt,at){if(_e.value.kind!=="constant"||rt.value.kind!=="constant")return _e;if(_e.value.value===void 0||rt.value.value===void 0)return new _i(this,{kind:"constant",value:void 0},_e.parameters);const ut=lp[this.specification.type];return ut?new _i(this,{kind:"constant",value:ut(_e.value.value,rt.value.value,at)},_e.parameters):_e}evaluate(_e,rt,at,ut,_t,At){return _e.kind==="constant"?_e.value:_e.evaluate(rt,at,ut,_t,At)}}class xo extends br{possiblyEvaluate(_e,rt,at,ut){if(_e.value===void 0)return new _i(this,{kind:"constant",value:void 0},rt);if(_e.expression.kind==="constant"){const _t=_e.expression.evaluate(rt,null,{},at,ut),At=_e.property.specification.type==="resolvedImage"&&typeof _t!="string"?_t.name:_t,Dt=this._calculate(At,At,At,rt);return new _i(this,{kind:"constant",value:Dt},rt)}if(_e.expression.kind==="camera"){const _t=this._calculate(_e.expression.evaluate({zoom:rt.zoom-1}),_e.expression.evaluate({zoom:rt.zoom}),_e.expression.evaluate({zoom:rt.zoom+1}),rt);return new _i(this,{kind:"constant",value:_t},rt)}return new _i(this,_e.expression,rt)}evaluate(_e,rt,at,ut,_t,At){if(_e.kind==="source"){const Dt=_e.evaluate(rt,at,ut,_t,At);return this._calculate(Dt,Dt,Dt,rt)}return _e.kind==="composite"?this._calculate(_e.evaluate({zoom:Math.floor(rt.zoom)-1},at,ut),_e.evaluate({zoom:Math.floor(rt.zoom)},at,ut),_e.evaluate({zoom:Math.floor(rt.zoom)+1},at,ut),rt):_e.value}_calculate(_e,rt,at,ut){return ut.zoom>ut.zoomHistory.lastIntegerZoom?{from:_e,to:rt,other:at}:{from:at,to:rt,other:_e}}interpolate(_e){return _e}}class mo{constructor(_e){this.specification=_e}possiblyEvaluate(_e,rt,at,ut){if(_e.value!==void 0){if(_e.expression.kind==="constant"){const _t=_e.expression.evaluate(rt,null,{},at,ut);return this._calculate(_t,_t,_t,rt)}return this._calculate(_e.expression.evaluate(new er(Math.floor(rt.zoom-1),rt)),_e.expression.evaluate(new er(Math.floor(rt.zoom),rt)),_e.expression.evaluate(new er(Math.floor(rt.zoom+1),rt)),rt)}}_calculate(_e,rt,at,ut){return ut.zoom>ut.zoomHistory.lastIntegerZoom?{from:_e,to:rt}:{from:at,to:rt}}interpolate(_e){return _e}}class vo{constructor(_e){this.specification=_e}possiblyEvaluate(_e,rt,at,ut){return!!_e.expression.evaluate(rt,null,{},at,ut)}interpolate(){return!1}}class yo{constructor(_e){this.properties=_e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const rt=new er(0,{});for(const at in _e){const ut=_e[at];ut.specification.overridable&&this.overridableProperties.push(at);const _t=this.defaultPropertyValues[at]=new dr(ut,void 0),At=this.defaultTransitionablePropertyValues[at]=new Ar(ut);this.defaultTransitioningPropertyValues[at]=At.untransitioned(),this.defaultPossiblyEvaluatedValues[at]=_t.possiblyEvaluate(rt)}}}function Bo(nt,_e){return 256*(nt=Gt(Math.floor(nt),0,255))+Gt(Math.floor(_e),0,255)}Oo(br,"DataDrivenProperty"),Oo(Or,"DataConstantProperty"),Oo(xo,"CrossFadedDataDrivenProperty"),Oo(mo,"CrossFadedProperty"),Oo(vo,"ColorRampProperty");const Ho={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Go{constructor(_e,rt){this._structArray=_e,this._pos1=rt*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class No{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(_e,rt){return _e._trim(),rt&&(_e.isTransferred=!0,rt.push(_e.arrayBuffer)),{length:_e.length,arrayBuffer:_e.arrayBuffer}}static deserialize(_e){const rt=Object.create(this.prototype);return rt.arrayBuffer=_e.arrayBuffer,rt.length=_e.length,rt.capacity=_e.arrayBuffer.byteLength/rt.bytesPerElement,rt._refreshViews(),rt}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(_e){this.reserve(_e),this.length=_e}reserve(_e){if(_e>this.capacity){this.capacity=Math.max(_e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const rt=this.uint8;this._refreshViews(),rt&&this.uint8.set(rt)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function _o(nt,_e=1){let rt=0,at=0;return{members:nt.map(ut=>{const _t=Ho[ut.type].BYTES_PER_ELEMENT,At=rt=es(rt,Math.max(_e,_t)),Dt=ut.components||1;return at=Math.max(at,_t),rt+=_t*Dt,{name:ut.name,type:ut.type,components:Dt,offset:At}}),size:es(rt,Math.max(at,_e)),alignment:_e}}function es(nt,_e){return Math.ceil(nt/_e)*_e}class hs extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt){const at=this.length;return this.resize(at+1),this.emplace(at,_e,rt)}emplace(_e,rt,at){const ut=2*_e;return this.int16[ut+0]=rt,this.int16[ut+1]=at,_e}}hs.prototype.bytesPerElement=4,Oo(hs,"StructArrayLayout2i4");class Ns extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at){const ut=this.length;return this.resize(ut+1),this.emplace(ut,_e,rt,at)}emplace(_e,rt,at,ut){const _t=3*_e;return this.int16[_t+0]=rt,this.int16[_t+1]=at,this.int16[_t+2]=ut,_e}}Ns.prototype.bytesPerElement=6,Oo(Ns,"StructArrayLayout3i6");class Vs extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut){const _t=this.length;return this.resize(_t+1),this.emplace(_t,_e,rt,at,ut)}emplace(_e,rt,at,ut,_t){const At=4*_e;return this.int16[At+0]=rt,this.int16[At+1]=at,this.int16[At+2]=ut,this.int16[At+3]=_t,_e}}Vs.prototype.bytesPerElement=8,Oo(Vs,"StructArrayLayout4i8");class Ds extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,_e,rt,at,ut,_t,At,Dt)}emplace(_e,rt,at,ut,_t,At,Dt,Wt){const Zt=6*_e,tn=12*_e,cn=3*_e;return this.int16[Zt+0]=rt,this.int16[Zt+1]=at,this.uint8[tn+4]=ut,this.uint8[tn+5]=_t,this.uint8[tn+6]=At,this.uint8[tn+7]=Dt,this.float32[cn+2]=Wt,_e}}Ds.prototype.bytesPerElement=12,Oo(Ds,"StructArrayLayout2i4ub1f12");class Ul extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut){const _t=this.length;return this.resize(_t+1),this.emplace(_t,_e,rt,at,ut)}emplace(_e,rt,at,ut,_t){const At=4*_e;return this.float32[At+0]=rt,this.float32[At+1]=at,this.float32[At+2]=ut,this.float32[At+3]=_t,_e}}Ul.prototype.bytesPerElement=16,Oo(Ul,"StructArrayLayout4f16");class ou extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn){const cn=this.length;return this.resize(cn+1),this.emplace(cn,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn)}emplace(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn){const fn=10*_e;return this.uint16[fn+0]=rt,this.uint16[fn+1]=at,this.uint16[fn+2]=ut,this.uint16[fn+3]=_t,this.uint16[fn+4]=At,this.uint16[fn+5]=Dt,this.uint16[fn+6]=Wt,this.uint16[fn+7]=Zt,this.uint16[fn+8]=tn,this.uint16[fn+9]=cn,_e}}ou.prototype.bytesPerElement=20,Oo(ou,"StructArrayLayout10ui20");class hp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt,Wt){const Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,_e,rt,at,ut,_t,At,Dt,Wt)}emplace(_e,rt,at,ut,_t,At,Dt,Wt,Zt){const tn=8*_e;return this.uint16[tn+0]=rt,this.uint16[tn+1]=at,this.uint16[tn+2]=ut,this.uint16[tn+3]=_t,this.uint16[tn+4]=At,this.uint16[tn+5]=Dt,this.uint16[tn+6]=Wt,this.uint16[tn+7]=Zt,_e}}hp.prototype.bytesPerElement=16,Oo(hp,"StructArrayLayout8ui16");class Ws extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,_e,rt,at,ut,_t,At)}emplace(_e,rt,at,ut,_t,At,Dt){const Wt=6*_e;return this.int16[Wt+0]=rt,this.int16[Wt+1]=at,this.int16[Wt+2]=ut,this.int16[Wt+3]=_t,this.int16[Wt+4]=At,this.int16[Wt+5]=Dt,_e}}Ws.prototype.bytesPerElement=12,Oo(Ws,"StructArrayLayout6i12");class _l extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn){const wn=this.length;return this.resize(wn+1),this.emplace(wn,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn)}emplace(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn){const xn=12*_e;return this.int16[xn+0]=rt,this.int16[xn+1]=at,this.int16[xn+2]=ut,this.int16[xn+3]=_t,this.uint16[xn+4]=At,this.uint16[xn+5]=Dt,this.uint16[xn+6]=Wt,this.uint16[xn+7]=Zt,this.int16[xn+8]=tn,this.int16[xn+9]=cn,this.int16[xn+10]=fn,this.int16[xn+11]=wn,_e}}_l.prototype.bytesPerElement=24,Oo(_l,"StructArrayLayout4i4ui4i24");class Ls extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,_e,rt,at,ut,_t,At)}emplace(_e,rt,at,ut,_t,At,Dt){const Wt=10*_e,Zt=5*_e;return this.int16[Wt+0]=rt,this.int16[Wt+1]=at,this.int16[Wt+2]=ut,this.float32[Zt+2]=_t,this.float32[Zt+3]=At,this.float32[Zt+4]=Dt,_e}}Ls.prototype.bytesPerElement=20,Oo(Ls,"StructArrayLayout3i3f20");class Ol extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(_e){const rt=this.length;return this.resize(rt+1),this.emplace(rt,_e)}emplace(_e,rt){return this.uint32[1*_e+0]=rt,_e}}Ol.prototype.bytesPerElement=4,Oo(Ol,"StructArrayLayout1ul4");class su extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn){const xn=this.length;return this.resize(xn+1),this.emplace(xn,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn)}emplace(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn){const On=20*_e,Un=10*_e;return this.int16[On+0]=rt,this.int16[On+1]=at,this.int16[On+2]=ut,this.int16[On+3]=_t,this.int16[On+4]=At,this.float32[Un+3]=Dt,this.float32[Un+4]=Wt,this.float32[Un+5]=Zt,this.float32[Un+6]=tn,this.int16[On+14]=cn,this.uint32[Un+8]=fn,this.uint16[On+18]=wn,this.uint16[On+19]=xn,_e}}su.prototype.bytesPerElement=40,Oo(su,"StructArrayLayout5i4f1i1ul2ui40");class $s extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,_e,rt,at,ut,_t,At,Dt)}emplace(_e,rt,at,ut,_t,At,Dt,Wt){const Zt=8*_e;return this.int16[Zt+0]=rt,this.int16[Zt+1]=at,this.int16[Zt+2]=ut,this.int16[Zt+4]=_t,this.int16[Zt+5]=At,this.int16[Zt+6]=Dt,this.int16[Zt+7]=Wt,_e}}$s.prototype.bytesPerElement=16,Oo($s,"StructArrayLayout3i2i2i16");class Ru extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t){const At=this.length;return this.resize(At+1),this.emplace(At,_e,rt,at,ut,_t)}emplace(_e,rt,at,ut,_t,At){const Dt=4*_e,Wt=8*_e;return this.float32[Dt+0]=rt,this.float32[Dt+1]=at,this.float32[Dt+2]=ut,this.int16[Wt+6]=_t,this.int16[Wt+7]=At,_e}}Ru.prototype.bytesPerElement=16,Oo(Ru,"StructArrayLayout2f1f2i16");class qp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut){const _t=this.length;return this.resize(_t+1),this.emplace(_t,_e,rt,at,ut)}emplace(_e,rt,at,ut,_t){const At=12*_e,Dt=3*_e;return this.uint8[At+0]=rt,this.uint8[At+1]=at,this.float32[Dt+1]=ut,this.float32[Dt+2]=_t,_e}}qp.prototype.bytesPerElement=12,Oo(qp,"StructArrayLayout2ub2f12");class Zu extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at){const ut=this.length;return this.resize(ut+1),this.emplace(ut,_e,rt,at)}emplace(_e,rt,at,ut){const _t=3*_e;return this.float32[_t+0]=rt,this.float32[_t+1]=at,this.float32[_t+2]=ut,_e}}Zu.prototype.bytesPerElement=12,Oo(Zu,"StructArrayLayout3f12");class Jl extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at){const ut=this.length;return this.resize(ut+1),this.emplace(ut,_e,rt,at)}emplace(_e,rt,at,ut){const _t=3*_e;return this.uint16[_t+0]=rt,this.uint16[_t+1]=at,this.uint16[_t+2]=ut,_e}}Jl.prototype.bytesPerElement=6,Oo(Jl,"StructArrayLayout3ui6");class uy extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On,Un,nr,hr,tr,sr,mr){const ar=this.length;return this.resize(ar+1),this.emplace(ar,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On,Un,nr,hr,tr,sr,mr)}emplace(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On,Un,nr,hr,tr,sr,mr,ar){const Br=30*_e,kr=15*_e,Jr=60*_e;return this.int16[Br+0]=rt,this.int16[Br+1]=at,this.int16[Br+2]=ut,this.float32[kr+2]=_t,this.float32[kr+3]=At,this.uint16[Br+8]=Dt,this.uint16[Br+9]=Wt,this.uint32[kr+5]=Zt,this.uint32[kr+6]=tn,this.uint32[kr+7]=cn,this.uint16[Br+16]=fn,this.uint16[Br+17]=wn,this.uint16[Br+18]=xn,this.float32[kr+10]=On,this.float32[kr+11]=Un,this.uint8[Jr+48]=nr,this.uint8[Jr+49]=hr,this.uint8[Jr+50]=tr,this.uint32[kr+13]=sr,this.int16[Br+28]=mr,this.uint8[Jr+58]=ar,_e}}uy.prototype.bytesPerElement=60,Oo(uy,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Cp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On,Un,nr,hr,tr,sr,mr,ar,Br,kr,Jr,ho,Ur,no,oo,lo){const go=this.length;return this.resize(go+1),this.emplace(go,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On,Un,nr,hr,tr,sr,mr,ar,Br,kr,Jr,ho,Ur,no,oo,lo)}emplace(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On,Un,nr,hr,tr,sr,mr,ar,Br,kr,Jr,ho,Ur,no,oo,lo,go){const Vr=38*_e,So=19*_e;return this.int16[Vr+0]=rt,this.int16[Vr+1]=at,this.int16[Vr+2]=ut,this.float32[So+2]=_t,this.float32[So+3]=At,this.int16[Vr+8]=Dt,this.int16[Vr+9]=Wt,this.int16[Vr+10]=Zt,this.int16[Vr+11]=tn,this.int16[Vr+12]=cn,this.int16[Vr+13]=fn,this.uint16[Vr+14]=wn,this.uint16[Vr+15]=xn,this.uint16[Vr+16]=On,this.uint16[Vr+17]=Un,this.uint16[Vr+18]=nr,this.uint16[Vr+19]=hr,this.uint16[Vr+20]=tr,this.uint16[Vr+21]=sr,this.uint16[Vr+22]=mr,this.uint16[Vr+23]=ar,this.uint16[Vr+24]=Br,this.uint16[Vr+25]=kr,this.uint16[Vr+26]=Jr,this.uint16[Vr+27]=ho,this.uint16[Vr+28]=Ur,this.uint32[So+15]=no,this.float32[So+16]=oo,this.float32[So+17]=lo,this.float32[So+18]=go,_e}}Cp.prototype.bytesPerElement=76,Oo(Cp,"StructArrayLayout3i2f6i15ui1ul3f76");class Xo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e){const rt=this.length;return this.resize(rt+1),this.emplace(rt,_e)}emplace(_e,rt){return this.float32[1*_e+0]=rt,_e}}Xo.prototype.bytesPerElement=4,Oo(Xo,"StructArrayLayout1f4");class Rp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut,_t){const At=this.length;return this.resize(At+1),this.emplace(At,_e,rt,at,ut,_t)}emplace(_e,rt,at,ut,_t,At){const Dt=5*_e;return this.float32[Dt+0]=rt,this.float32[Dt+1]=at,this.float32[Dt+2]=ut,this.float32[Dt+3]=_t,this.float32[Dt+4]=At,_e}}Rp.prototype.bytesPerElement=20,Oo(Rp,"StructArrayLayout5f20");class dm extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ut){const _t=this.length;return this.resize(_t+1),this.emplace(_t,_e,rt,at,ut)}emplace(_e,rt,at,ut,_t){const At=6*_e;return this.uint32[3*_e+0]=rt,this.uint16[At+2]=at,this.uint16[At+3]=ut,this.uint16[At+4]=_t,_e}}dm.prototype.bytesPerElement=12,Oo(dm,"StructArrayLayout1ul3ui12");class _u extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt){const at=this.length;return this.resize(at+1),this.emplace(at,_e,rt)}emplace(_e,rt,at){const ut=2*_e;return this.uint16[ut+0]=rt,this.uint16[ut+1]=at,_e}}_u.prototype.bytesPerElement=4,Oo(_u,"StructArrayLayout2ui4");class C_ extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e){const rt=this.length;return this.resize(rt+1),this.emplace(rt,_e)}emplace(_e,rt){return this.uint16[1*_e+0]=rt,_e}}C_.prototype.bytesPerElement=2,Oo(C_,"StructArrayLayout1ui2");class A0 extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt){const at=this.length;return this.resize(at+1),this.emplace(at,_e,rt)}emplace(_e,rt,at){const ut=2*_e;return this.float32[ut+0]=rt,this.float32[ut+1]=at,_e}}A0.prototype.bytesPerElement=8,Oo(A0,"StructArrayLayout2f8");class Bw extends Go{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Bw.prototype.size=12;class fp extends Ws{get(_e){return new Bw(this,_e)}}Oo(fp,"FillExtrusionExtArray");class jw extends Go{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}jw.prototype.size=40;class R_ extends su{get(_e){return new jw(this,_e)}}Oo(R_,"CollisionBoxArray");class E0 extends Go{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(_e){this._structArray.uint8[this._pos1+49]=_e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(_e){this._structArray.uint8[this._pos1+50]=_e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(_e){this._structArray.uint32[this._pos4+13]=_e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(_e){this._structArray.uint8[this._pos1+58]=_e}}E0.prototype.size=60;class R1 extends uy{get(_e){return new E0(this,_e)}}Oo(R1,"PlacedSymbolArray");class I1 extends Go{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(_e){this._structArray.uint32[this._pos4+15]=_e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}I1.prototype.size=76;class Yu extends Cp{get(_e){return new I1(this,_e)}}Oo(Yu,"SymbolInstanceArray");class jm extends Xo{getoffsetX(_e){return this.float32[1*_e+0]}}Oo(jm,"GlyphOffsetArray");class T0 extends Ns{getx(_e){return this.int16[3*_e+0]}gety(_e){return this.int16[3*_e+1]}gettileUnitDistanceFromAnchor(_e){return this.int16[3*_e+2]}}Oo(T0,"SymbolLineVertexArray");class O1 extends Go{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}O1.prototype.size=12;class Iv extends dm{get(_e){return new O1(this,_e)}}Oo(Iv,"FeatureIndexArray");class M1 extends Go{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}M1.prototype.size=4;class C0 extends _u{get(_e){return new M1(this,_e)}}Oo(C0,"FillExtrusionCentroidArray");class P1 extends Go{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}P1.prototype.size=12;class R0 extends Ws{get(_e){return new P1(this,_e)}}Oo(R0,"CircleGlobeExtArray");const k1=_o([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),cy=_o([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var I_={exports:{}},Fm={exports:{}};Fm.exports=function(nt,_e){var rt,at,ut,_t,At,Dt,Wt,Zt;for(at=nt.length-(rt=3&nt.length),ut=_e,At=3432918353,Dt=461845907,Zt=0;Zt<at;)Wt=255&nt.charCodeAt(Zt)|(255&nt.charCodeAt(++Zt))<<8|(255&nt.charCodeAt(++Zt))<<16|(255&nt.charCodeAt(++Zt))<<24,++Zt,ut=27492+(65535&(_t=5*(65535&(ut=(ut^=Wt=(65535&(Wt=(Wt=(65535&Wt)*At+(((Wt>>>16)*At&65535)<<16)&4294967295)<<15|Wt>>>17))*Dt+(((Wt>>>16)*Dt&65535)<<16)&4294967295)<<13|ut>>>19))+((5*(ut>>>16)&65535)<<16)&4294967295))+((58964+(_t>>>16)&65535)<<16);switch(Wt=0,rt){case 3:Wt^=(255&nt.charCodeAt(Zt+2))<<16;case 2:Wt^=(255&nt.charCodeAt(Zt+1))<<8;case 1:ut^=Wt=(65535&(Wt=(Wt=(65535&(Wt^=255&nt.charCodeAt(Zt)))*At+(((Wt>>>16)*At&65535)<<16)&4294967295)<<15|Wt>>>17))*Dt+(((Wt>>>16)*Dt&65535)<<16)&4294967295}return ut^=nt.length,ut=2246822507*(65535&(ut^=ut>>>16))+((2246822507*(ut>>>16)&65535)<<16)&4294967295,ut=3266489909*(65535&(ut^=ut>>>13))+((3266489909*(ut>>>16)&65535)<<16)&4294967295,(ut^=ut>>>16)>>>0};var D1={exports:{}};D1.exports=function(nt,_e){for(var rt,at=nt.length,ut=_e^at,_t=0;at>=4;)rt=1540483477*(65535&(rt=255&nt.charCodeAt(_t)|(255&nt.charCodeAt(++_t))<<8|(255&nt.charCodeAt(++_t))<<16|(255&nt.charCodeAt(++_t))<<24))+((1540483477*(rt>>>16)&65535)<<16),ut=1540483477*(65535&ut)+((1540483477*(ut>>>16)&65535)<<16)^(rt=1540483477*(65535&(rt^=rt>>>24))+((1540483477*(rt>>>16)&65535)<<16)),at-=4,++_t;switch(at){case 3:ut^=(255&nt.charCodeAt(_t+2))<<16;case 2:ut^=(255&nt.charCodeAt(_t+1))<<8;case 1:ut=1540483477*(65535&(ut^=255&nt.charCodeAt(_t)))+((1540483477*(ut>>>16)&65535)<<16)}return ut=1540483477*(65535&(ut^=ut>>>13))+((1540483477*(ut>>>16)&65535)<<16),(ut^=ut>>>15)>>>0};var L1=Fm.exports,B1=D1.exports;I_.exports=L1,I_.exports.murmur3=L1,I_.exports.murmur2=B1;class I0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(_e,rt,at,ut){this.ids.push(Fw(_e)),this.positions.push(rt,at,ut)}getPositions(_e){const rt=Fw(_e);let at=0,ut=this.ids.length-1;for(;at<ut;){const At=at+ut>>1;this.ids[At]>=rt?ut=At:at=At+1}const _t=[];for(;this.ids[at]===rt;)_t.push({index:this.positions[3*at],start:this.positions[3*at+1],end:this.positions[3*at+2]}),at++;return _t}static serialize(_e,rt){const at=new Float64Array(_e.ids),ut=new Uint32Array(_e.positions);return j1(at,ut,0,at.length-1),rt&&rt.push(at.buffer,ut.buffer),{ids:at,positions:ut}}static deserialize(_e){const rt=new I0;return rt.ids=_e.ids,rt.positions=_e.positions,rt.indexed=!0,rt}}function Fw(nt){const _e=+nt;return!isNaN(_e)&&Number.MIN_SAFE_INTEGER<=_e&&_e<=Number.MAX_SAFE_INTEGER?_e:I_.exports(String(nt))}function j1(nt,_e,rt,at){for(;rt<at;){const ut=nt[rt+at>>1];let _t=rt-1,At=at+1;for(;;){do _t++;while(nt[_t]<ut);do At--;while(nt[At]>ut);if(_t>=At)break;Ov(nt,_t,At),Ov(_e,3*_t,3*At),Ov(_e,3*_t+1,3*At+1),Ov(_e,3*_t+2,3*At+2)}At-rt<at-At?(j1(nt,_e,rt,At),rt=At+1):(j1(nt,_e,At+1,at),at=At)}}function Ov(nt,_e,rt){const at=nt[_e];nt[_e]=nt[rt],nt[rt]=at}Oo(I0,"FeaturePositionMap");class gm{constructor(_e){this.gl=_e.gl,this.initialized=!1}fetchUniformLocation(_e,rt){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(_e,rt),this.initialized=!0),!!this.location}}class O0 extends gm{constructor(_e){super(_e),this.current=0}set(_e,rt,at){this.fetchUniformLocation(_e,rt)&&this.current!==at&&(this.current=at,this.gl.uniform1f(this.location,at))}}class F1 extends gm{constructor(_e){super(_e),this.current=[0,0,0,0]}set(_e,rt,at){this.fetchUniformLocation(_e,rt)&&(at[0]===this.current[0]&&at[1]===this.current[1]&&at[2]===this.current[2]&&at[3]===this.current[3]||(this.current=at,this.gl.uniform4f(this.location,at[0],at[1],at[2],at[3])))}}class N1 extends gm{constructor(_e){super(_e),this.current=zs.transparent}set(_e,rt,at){this.fetchUniformLocation(_e,rt)&&(at.r===this.current.r&&at.g===this.current.g&&at.b===this.current.b&&at.a===this.current.a||(this.current=at,this.gl.uniform4f(this.location,at.r,at.g,at.b,at.a)))}}const Ku=new Float32Array(16),pm=new Float32Array(9),hS=new Float32Array(4);function U1(nt){return[Bo(255*nt.r,255*nt.g),Bo(255*nt.b,255*nt.a)]}class hy{constructor(_e,rt,at){this.value=_e,this.uniformNames=rt.map(ut=>`u_${ut}`),this.type=at}setUniform(_e,rt,at,ut,_t){rt.set(_e,_t,ut.constantOr(this.value))}getBinding(_e,rt){return this.type==="color"?new N1(_e):new O0(_e)}}class Zp{constructor(_e,rt){this.uniformNames=rt.map(at=>`u_${at}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(_e,rt){this.pixelRatioFrom=rt.pixelRatio||1,this.pixelRatioTo=_e.pixelRatio||1,this.patternFrom=rt.tl.concat(rt.br),this.patternTo=_e.tl.concat(_e.br)}setUniform(_e,rt,at,ut,_t){const At=_t==="u_pattern_to"||_t==="u_dash_to"?this.patternTo:_t==="u_pattern_from"||_t==="u_dash_from"?this.patternFrom:_t==="u_pixel_ratio_to"?this.pixelRatioTo:_t==="u_pixel_ratio_from"?this.pixelRatioFrom:null;At&&rt.set(_e,_t,At)}getBinding(_e,rt){return rt==="u_pattern_from"||rt==="u_pattern_to"||rt==="u_dash_from"||rt==="u_dash_to"?new F1(_e):new O0(_e)}}class mm{constructor(_e,rt,at,ut){this.expression=_e,this.type=at,this.maxValue=0,this.paintVertexAttributes=rt.map(_t=>({name:`a_${_t}`,type:"Float32",components:at==="color"?2:1,offset:0})),this.paintVertexArray=new ut}populatePaintArray(_e,rt,at,ut,_t,At){const Dt=this.paintVertexArray.length,Wt=this.expression.evaluate(new er(0),rt,{},_t,ut,At);this.paintVertexArray.resize(_e),this._setPaintValue(Dt,_e,Wt)}updatePaintArray(_e,rt,at,ut,_t){const At=this.expression.evaluate({zoom:0},at,ut,void 0,_t);this._setPaintValue(_e,rt,At)}_setPaintValue(_e,rt,at){if(this.type==="color"){const ut=U1(at);for(let _t=_e;_t<rt;_t++)this.paintVertexArray.emplace(_t,ut[0],ut[1])}else{for(let ut=_e;ut<rt;ut++)this.paintVertexArray.emplace(ut,at);this.maxValue=Math.max(this.maxValue,Math.abs(at))}}upload(_e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ip{constructor(_e,rt,at,ut,_t,At){this.expression=_e,this.uniformNames=rt.map(Dt=>`u_${Dt}_t`),this.type=at,this.useIntegerZoom=ut,this.zoom=_t,this.maxValue=0,this.paintVertexAttributes=rt.map(Dt=>({name:`a_${Dt}`,type:"Float32",components:at==="color"?4:2,offset:0})),this.paintVertexArray=new At}populatePaintArray(_e,rt,at,ut,_t,At){const Dt=this.expression.evaluate(new er(this.zoom),rt,{},_t,ut,At),Wt=this.expression.evaluate(new er(this.zoom+1),rt,{},_t,ut,At),Zt=this.paintVertexArray.length;this.paintVertexArray.resize(_e),this._setPaintValue(Zt,_e,Dt,Wt)}updatePaintArray(_e,rt,at,ut,_t){const At=this.expression.evaluate({zoom:this.zoom},at,ut,void 0,_t),Dt=this.expression.evaluate({zoom:this.zoom+1},at,ut,void 0,_t);this._setPaintValue(_e,rt,At,Dt)}_setPaintValue(_e,rt,at,ut){if(this.type==="color"){const _t=U1(at),At=U1(ut);for(let Dt=_e;Dt<rt;Dt++)this.paintVertexArray.emplace(Dt,_t[0],_t[1],At[0],At[1])}else{for(let _t=_e;_t<rt;_t++)this.paintVertexArray.emplace(_t,at,ut);this.maxValue=Math.max(this.maxValue,Math.abs(at),Math.abs(ut))}}upload(_e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(_e,rt,at,ut,_t){const At=this.useIntegerZoom?Math.floor(at.zoom):at.zoom,Dt=Gt(this.expression.interpolationFactor(At,this.zoom,this.zoom+1),0,1);rt.set(_e,_t,Dt)}getBinding(_e,rt){return new O0(_e)}}class fy{constructor(_e,rt,at,ut,_t,At,Dt){this.expression=_e,this.type=at,this.useIntegerZoom=ut,this.zoom=_t,this.layerId=Dt,this.paintVertexAttributes=(at==="array"?cy:k1).members;for(let Wt=0;Wt<rt.length;++Wt);this.zoomInPaintVertexArray=new At,this.zoomOutPaintVertexArray=new At}populatePaintArray(_e,rt,at){const ut=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(_e),this.zoomOutPaintVertexArray.resize(_e),this._setPaintValues(ut,_e,rt.patterns&&rt.patterns[this.layerId],at)}updatePaintArray(_e,rt,at,ut,_t,At){this._setPaintValues(_e,rt,at.patterns&&at.patterns[this.layerId],At)}_setPaintValues(_e,rt,at,ut){if(!ut||!at)return;const{min:_t,mid:At,max:Dt}=at,Wt=ut[_t],Zt=ut[At],tn=ut[Dt];if(Wt&&Zt&&tn)for(let cn=_e;cn<rt;cn++)this._setPaintValue(this.zoomInPaintVertexArray,cn,Zt,Wt),this._setPaintValue(this.zoomOutPaintVertexArray,cn,Zt,tn)}_setPaintValue(_e,rt,at,ut){_e.emplace(rt,at.tl[0],at.tl[1],at.br[0],at.br[1],ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],at.pixelRatio,ut.pixelRatio)}upload(_e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=_e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=_e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Nm{constructor(_e,rt,at=()=>!0){this.binders={},this._buffers=[];const ut=[];for(const _t in _e.paint._values){if(!at(_t))continue;const At=_e.paint.get(_t);if(!(At instanceof _i&&Np(At.property.specification)))continue;const Dt=fS(_t,_e.type),Wt=At.value,Zt=At.property.specification.type,tn=At.property.useIntegerZoom,cn=At.property.specification["property-type"],fn=cn==="cross-faded"||cn==="cross-faded-data-driven",wn=String(_t)==="line-dasharray"&&_e.layout.get("line-cap").value.kind!=="constant";if(Wt.kind!=="constant"||wn)if(Wt.kind==="source"||wn||fn){const xn=Pv(_t,Zt,"source");this.binders[_t]=fn?new fy(Wt,Dt,Zt,tn,rt,xn,_e.id):new mm(Wt,Dt,Zt,xn),ut.push(`/a_${_t}`)}else{const xn=Pv(_t,Zt,"composite");this.binders[_t]=new Ip(Wt,Dt,Zt,tn,rt,xn),ut.push(`/z_${_t}`)}else this.binders[_t]=fn?new Zp(Wt.value,Dt):new hy(Wt.value,Dt,Zt),ut.push(`/u_${_t}`)}this.cacheKey=ut.sort().join("")}getMaxValue(_e){const rt=this.binders[_e];return rt instanceof mm||rt instanceof Ip?rt.maxValue:0}populatePaintArrays(_e,rt,at,ut,_t,At){for(const Dt in this.binders){const Wt=this.binders[Dt];(Wt instanceof mm||Wt instanceof Ip||Wt instanceof fy)&&Wt.populatePaintArray(_e,rt,at,ut,_t,At)}}setConstantPatternPositions(_e,rt){for(const at in this.binders){const ut=this.binders[at];ut instanceof Zp&&ut.setConstantPatternPositions(_e,rt)}}updatePaintArrays(_e,rt,at,ut,_t,At){let Dt=!1;for(const Wt in _e){const Zt=rt.getPositions(Wt);for(const tn of Zt){const cn=at.feature(tn.index);for(const fn in this.binders){const wn=this.binders[fn];if((wn instanceof mm||wn instanceof Ip||wn instanceof fy)&&wn.expression.isStateDependent===!0){const xn=ut.paint.get(fn);wn.expression=xn.value,wn.updatePaintArray(tn.start,tn.end,cn,_e[Wt],_t,At),Dt=!0}}}}return Dt}defines(){const _e=[];for(const rt in this.binders){const at=this.binders[rt];(at instanceof hy||at instanceof Zp)&&_e.push(...at.uniformNames.map(ut=>`#define HAS_UNIFORM_${ut}`))}return _e}getBinderAttributes(){const _e=[];for(const rt in this.binders){const at=this.binders[rt];if(at instanceof mm||at instanceof Ip||at instanceof fy)for(let ut=0;ut<at.paintVertexAttributes.length;ut++)_e.push(at.paintVertexAttributes[ut].name)}return _e}getBinderUniforms(){const _e=[];for(const rt in this.binders){const at=this.binders[rt];if(at instanceof hy||at instanceof Zp||at instanceof Ip)for(const ut of at.uniformNames)_e.push(ut)}return _e}getPaintVertexBuffers(){return this._buffers}getUniforms(_e){const rt=[];for(const at in this.binders){const ut=this.binders[at];if(ut instanceof hy||ut instanceof Zp||ut instanceof Ip)for(const _t of ut.uniformNames)rt.push({name:_t,property:at,binding:ut.getBinding(_e,_t)})}return rt}setUniforms(_e,rt,at,ut,_t){for(const{name:At,property:Dt,binding:Wt}of at)this.binders[Dt].setUniform(_e,Wt,_t,ut.get(Dt),At)}updatePaintBuffers(_e){this._buffers=[];for(const rt in this.binders){const at=this.binders[rt];if(_e&&at instanceof fy){const ut=_e.fromScale===2?at.zoomInPaintVertexBuffer:at.zoomOutPaintVertexBuffer;ut&&this._buffers.push(ut)}else(at instanceof mm||at instanceof Ip)&&at.paintVertexBuffer&&this._buffers.push(at.paintVertexBuffer)}}upload(_e){for(const rt in this.binders){const at=this.binders[rt];(at instanceof mm||at instanceof Ip||at instanceof fy)&&at.upload(_e)}this.updatePaintBuffers()}destroy(){for(const _e in this.binders){const rt=this.binders[_e];(rt instanceof mm||rt instanceof Ip||rt instanceof fy)&&rt.destroy()}}}class Op{constructor(_e,rt,at=()=>!0){this.programConfigurations={};for(const ut of _e)this.programConfigurations[ut.id]=new Nm(ut,rt,at);this.needsUpload=!1,this._featureMap=new I0,this._bufferOffset=0}populatePaintArrays(_e,rt,at,ut,_t,At,Dt){for(const Wt in this.programConfigurations)this.programConfigurations[Wt].populatePaintArrays(_e,rt,ut,_t,At,Dt);rt.id!==void 0&&this._featureMap.add(rt.id,at,this._bufferOffset,_e),this._bufferOffset=_e,this.needsUpload=!0}updatePaintArrays(_e,rt,at,ut,_t){for(const At of at)this.needsUpload=this.programConfigurations[At.id].updatePaintArrays(_e,this._featureMap,rt,At,ut,_t)||this.needsUpload}get(_e){return this.programConfigurations[_e]}upload(_e){if(this.needsUpload){for(const rt in this.programConfigurations)this.programConfigurations[rt].upload(_e);this.needsUpload=!1}}destroy(){for(const _e in this.programConfigurations)this.programConfigurations[_e].destroy()}}const Mv={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function fS(nt,_e){return Mv[nt]||[nt.replace(`${_e}-`,"").replace(/-/g,"_")]}const Nw={"line-pattern":{source:ou,composite:ou},"fill-pattern":{source:ou,composite:ou},"fill-extrusion-pattern":{source:ou,composite:ou},"line-dasharray":{source:hp,composite:hp}},Uw={color:{source:A0,composite:Ul},number:{source:Xo,composite:A0}};function Pv(nt,_e,rt){const at=Nw[nt];return at&&at[rt]||Uw[_e][rt]}Oo(hy,"ConstantBinder"),Oo(Zp,"CrossFadedConstantBinder"),Oo(mm,"SourceExpressionBinder"),Oo(fy,"CrossFadedCompositeBinder"),Oo(Ip,"CompositeExpressionBinder"),Oo(Nm,"ProgramConfiguration",{omit:["_buffers"]}),Oo(Op,"ProgramConfigurationSet");const kv="-transition";class Xu extends cu{constructor(_e,rt){if(super(),this.id=_e.id,this.type=_e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,_e.type!=="custom"&&(this.metadata=_e.metadata,this.minzoom=_e.minzoom,this.maxzoom=_e.maxzoom,_e.type!=="background"&&_e.type!=="sky"&&(this.source=_e.source,this.sourceLayer=_e["source-layer"],this.filter=_e.filter),rt.layout&&(this._unevaluatedLayout=new Sr(rt.layout)),rt.paint)){this._transitionablePaint=new Fr(rt.paint);for(const at in _e.paint)this.setPaintProperty(at,_e.paint[at],{validate:!1});for(const at in _e.layout)this.setLayoutProperty(at,_e.layout[at],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eo(rt.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(_e){return _e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_e)}setLayoutProperty(_e,rt,at={}){rt!=null&&this._validate(C1,`layers.${this.id}.layout.${_e}`,_e,rt,at)||(_e!=="visibility"?this._unevaluatedLayout.setValue(_e,rt):this.visibility=rt)}getPaintProperty(_e){return en(_e,kv)?this._transitionablePaint.getTransition(_e.slice(0,-kv.length)):this._transitionablePaint.getValue(_e)}setPaintProperty(_e,rt,at={}){if(rt!=null&&this._validate(T1,`layers.${this.id}.paint.${_e}`,_e,rt,at))return!1;if(en(_e,kv))return this._transitionablePaint.setTransition(_e.slice(0,-kv.length),rt||void 0),!1;{const ut=this._transitionablePaint._values[_e],_t=ut.property.specification["property-type"]==="cross-faded-data-driven",At=ut.value.isDataDriven(),Dt=ut.value;this._transitionablePaint.setValue(_e,rt),this._handleSpecialPaintPropertyUpdate(_e);const Wt=this._transitionablePaint._values[_e].value;return Wt.isDataDriven()||At||_t||this._handleOverridablePaintPropertyUpdate(_e,Dt,Wt)}}_handleSpecialPaintPropertyUpdate(_e){}getProgramIds(){return null}getProgramConfiguration(_e){return null}_handleOverridablePaintPropertyUpdate(_e,rt,at){return!1}isHidden(_e){return!!(this.minzoom&&_e<this.minzoom)||!!(this.maxzoom&&_e>=this.maxzoom)||this.visibility==="none"}updateTransitions(_e){this._transitioningPaint=this._transitionablePaint.transitioned(_e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(_e,rt){_e.getCrossfadeParameters&&(this._crossfadeParameters=_e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_e,void 0,rt)),this.paint=this._transitioningPaint.possiblyEvaluate(_e,void 0,rt)}serialize(){const _e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_e.layout=_e.layout||{},_e.layout.visibility=this.visibility),jt(_e,(rt,at)=>!(rt===void 0||at==="layout"&&!Object.keys(rt).length||at==="paint"&&!Object.keys(rt).length))}_validate(_e,rt,at,ut,_t={}){return(!_t||_t.validate!==!1)&&$p(this,_e.call(Is,{key:rt,layerType:this.type,objectKey:at,value:ut,styleSpec:$r,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const _e in this.paint._values){const rt=this.paint.get(_e);if(rt instanceof _i&&Np(rt.property.specification)&&(rt.value.kind==="source"||rt.value.kind==="composite")&&rt.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=v_(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const z1=_o([{name:"a_pos",components:2,type:"Int16"}],4),M0=_o([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class zl{constructor(_e=[]){this.segments=_e}prepareSegment(_e,rt,at,ut){let _t=this.segments[this.segments.length-1];return _e>zl.MAX_VERTEX_ARRAY_LENGTH&&hn(`Max vertices per segment is ${zl.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${_e}`),(!_t||_t.vertexLength+_e>zl.MAX_VERTEX_ARRAY_LENGTH||_t.sortKey!==ut)&&(_t={vertexOffset:rt.length,primitiveOffset:at.length,vertexLength:0,primitiveLength:0},ut!==void 0&&(_t.sortKey=ut),this.segments.push(_t)),_t}get(){return this.segments}destroy(){for(const _e of this.segments)for(const rt in _e.vaos)_e.vaos[rt].destroy()}static simpleSegment(_e,rt,at,ut){return new zl([{vertexOffset:_e,primitiveOffset:rt,vertexLength:at,primitiveLength:ut,vaos:{},sortKey:0}])}}zl.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Oo(zl,"SegmentVector");var Zo=8192;class Yp{constructor(_e,rt){_e&&(rt?this.setSouthWest(_e).setNorthEast(rt):_e.length===4?this.setSouthWest([_e[0],_e[1]]).setNorthEast([_e[2],_e[3]]):this.setSouthWest(_e[0]).setNorthEast(_e[1]))}setNorthEast(_e){return this._ne=_e instanceof Os?new Os(_e.lng,_e.lat):Os.convert(_e),this}setSouthWest(_e){return this._sw=_e instanceof Os?new Os(_e.lng,_e.lat):Os.convert(_e),this}extend(_e){const rt=this._sw,at=this._ne;let ut,_t;if(_e instanceof Os)ut=_e,_t=_e;else{if(!(_e instanceof Yp))return Array.isArray(_e)?_e.length===4||_e.every(Array.isArray)?this.extend(Yp.convert(_e)):this.extend(Os.convert(_e)):typeof _e=="object"&&_e!==null&&_e.hasOwnProperty("lat")&&_e.hasOwnProperty("lon")?this.extend(Os.convert(_e)):this;if(ut=_e._sw,_t=_e._ne,!ut||!_t)return this}return rt||at?(rt.lng=Math.min(ut.lng,rt.lng),rt.lat=Math.min(ut.lat,rt.lat),at.lng=Math.max(_t.lng,at.lng),at.lat=Math.max(_t.lat,at.lat)):(this._sw=new Os(ut.lng,ut.lat),this._ne=new Os(_t.lng,_t.lat)),this}getCenter(){return new Os((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Os(this.getWest(),this.getNorth())}getSouthEast(){return new Os(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(_e){const{lng:rt,lat:at}=Os.convert(_e);let ut=this._sw.lng<=rt&&rt<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ut=this._sw.lng>=rt&&rt>=this._ne.lng),this._sw.lat<=at&&at<=this._ne.lat&&ut}static convert(_e){return!_e||_e instanceof Yp?_e:new Yp(_e)}}const Dv=63710088e-1;class Os{constructor(_e,rt){if(isNaN(_e)||isNaN(rt))throw new Error(`Invalid LngLat object: (${_e}, ${rt})`);if(this.lng=+_e,this.lat=+rt,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Os(Ht(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(_e){const rt=Math.PI/180,at=this.lat*rt,ut=_e.lat*rt,_t=Math.sin(at)*Math.sin(ut)+Math.cos(at)*Math.cos(ut)*Math.cos((_e.lng-this.lng)*rt);return Dv*Math.acos(Math.min(_t,1))}toBounds(_e=0){const rt=360*_e/40075017,at=rt/Math.cos(Math.PI/180*this.lat);return new Yp(new Os(this.lng-at,this.lat-rt),new Os(this.lng+at,this.lat+rt))}static convert(_e){if(_e instanceof Os)return _e;if(Array.isArray(_e)&&(_e.length===2||_e.length===3))return new Os(Number(_e[0]),Number(_e[1]));if(!Array.isArray(_e)&&typeof _e=="object"&&_e!==null)return new Os(Number("lng"in _e?_e.lng:_e.lon),Number(_e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const zw=2*Math.PI*Dv;function P0(nt){return zw*Math.cos(nt*Math.PI/180)}function au(nt){return(180+nt)/360}function Kp(nt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+nt*Math.PI/360)))/360}function dp(nt,_e){return nt/P0(_e)}function gp(nt){return 360*nt-180}function eu(nt){return 360/Math.PI*Math.atan(Math.exp((180-360*nt)*Math.PI/180))-90}function Vw(nt,_e){return nt*P0(eu(_e))}const ym=85.051129;function _m(nt){return 1/Math.cos(nt*Math.PI/180)}class dy{constructor(_e,rt,at=0){this.x=+_e,this.y=+rt,this.z=+at}static fromLngLat(_e,rt=0){const at=Os.convert(_e);return new dy(au(at.lng),Kp(at.lat),dp(rt,at.lat))}toLngLat(){return new Os(gp(this.x),eu(this.y))}toAltitude(){return Vw(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/zw*_m(eu(this.y))}}function Lv(nt,_e,rt,at,ut,_t,At,Dt,Wt){const Zt=(_e+at)/2,tn=(rt+ut)/2,cn=new mt(Zt,tn);Dt(cn),function(fn,wn,xn,On,Un,nr){const hr=xn-Un,tr=On-nr;return Math.abs((On-wn)*hr-(xn-fn)*tr)/Math.hypot(hr,tr)}(cn.x,cn.y,_t.x,_t.y,At.x,At.y)>=Wt?(Lv(nt,_e,rt,Zt,tn,_t,cn,Dt,Wt),Lv(nt,Zt,tn,at,ut,cn,At,Dt,Wt)):nt.push(At)}function k0(nt,_e,rt){let at=nt[0],ut=at.x,_t=at.y;_e(at);const At=[at];for(let Dt=1;Dt<nt.length;Dt++){const Wt=nt[Dt],{x:Zt,y:tn}=Wt;_e(Wt),Lv(At,ut,_t,Zt,tn,at,Wt,_e,rt),ut=Zt,_t=tn,at=Wt}return At}function O_(nt,_e,rt,at){if(at(_e,rt)){const ut=_e.add(rt)._mult(.5);O_(nt,_e,ut,at),O_(nt,ut,rt,at)}else nt.push(rt)}function M_(nt,_e){let rt=nt[0];const at=[rt];for(let ut=1;ut<nt.length;ut++){const _t=nt[ut];O_(at,rt,_t,_e),rt=_t}return at}const is=Math.pow(2,14)-1,Bv=-is-1;function V1(nt,_e){const rt=Math.round(nt.x*_e),at=Math.round(nt.y*_e);return nt.x=Gt(rt,Bv,is),nt.y=Gt(at,Bv,is),(rt<nt.x||rt>nt.x+1||at<nt.y||at>nt.y+1)&&hn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),nt}function Lu(nt,_e,rt){const at=nt.loadGeometry(),ut=nt.extent,_t=Zo/ut;if(_e&&rt&&rt.projection.isReprojectedInTileSpace){const At=1<<_e.z,{scale:Dt,x:Wt,y:Zt,projection:tn}=rt,cn=fn=>{const wn=gp((_e.x+fn.x/ut)/At),xn=eu((_e.y+fn.y/ut)/At),On=tn.project(wn,xn);fn.x=(On.x*Dt-Wt)*ut,fn.y=(On.y*Dt-Zt)*ut};for(let fn=0;fn<at.length;fn++)if(nt.type!==1)at[fn]=k0(at[fn],cn,1);else{const wn=[];for(const xn of at[fn])xn.x<0||xn.x>=ut||xn.y<0||xn.y>=ut||(cn(xn),wn.push(xn));at[fn]=wn}}for(const At of at)for(const Dt of At)V1(Dt,_t);return at}function Wy(nt,_e){return{type:nt.type,id:nt.id,properties:nt.properties,geometry:_e?Lu(nt):[]}}function P_(nt,_e,rt,at,ut){nt.emplaceBack(2*_e+(at+1)/2,2*rt+(ut+1)/2)}function jv(nt,_e,rt){nt.emplaceBack(_e.x,_e.y,_e.z,rt[0]*16384,rt[1]*16384,rt[2]*16384)}class lu{constructor(_e){this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.hasPattern=!1,this.projection=_e.projection,this.layoutVertexArray=new hs,this.indexArray=new Jl,this.segments=new zl,this.programConfigurations=new Op(_e.layers,_e.zoom),this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id)}populate(_e,rt,at,ut){const _t=this.layers[0],At=[];let Dt=null;_t.type==="circle"&&(Dt=_t.layout.get("circle-sort-key"));for(const{feature:Zt,id:tn,index:cn,sourceLayerIndex:fn}of _e){const wn=this.layers[0]._featureFilter.needGeometry,xn=Wy(Zt,wn);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),xn,at))continue;const On=Dt?Dt.evaluate(xn,{},at):void 0,Un={id:tn,properties:Zt.properties,type:Zt.type,sourceLayerIndex:fn,index:cn,geometry:wn?xn.geometry:Lu(Zt,at,ut),patterns:{},sortKey:On};At.push(Un)}Dt&&At.sort((Zt,tn)=>Zt.sortKey-tn.sortKey);let Wt=null;ut.projection.name==="globe"&&(this.globeExtVertexArray=new R0,Wt=ut.projection);for(const Zt of At){const{geometry:tn,index:cn,sourceLayerIndex:fn}=Zt,wn=_e[cn].feature;this.addFeature(Zt,tn,cn,rt.availableImages,at,Wt),rt.featureIndex.insert(wn,tn,cn,fn,this.index)}}update(_e,rt,at,ut){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ut)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,z1.members),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=_e.createVertexBuffer(this.globeExtVertexArray,M0.members))),this.programConfigurations.upload(_e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(_e,rt,at,ut,_t,At){for(const Dt of rt)for(const Wt of Dt){const Zt=Wt.x,tn=Wt.y;if(Zt<0||Zt>=Zo||tn<0||tn>=Zo)continue;if(At){const wn=At.projectTilePoint(Zt,tn,_t),xn=At.upVector(_t,Zt,tn),On=this.globeExtVertexArray;jv(On,wn,xn),jv(On,wn,xn),jv(On,wn,xn),jv(On,wn,xn)}const cn=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,_e.sortKey),fn=cn.vertexLength;P_(this.layoutVertexArray,Zt,tn,-1,-1),P_(this.layoutVertexArray,Zt,tn,1,-1),P_(this.layoutVertexArray,Zt,tn,1,1),P_(this.layoutVertexArray,Zt,tn,-1,1),this.indexArray.emplaceBack(fn,fn+1,fn+2),this.indexArray.emplaceBack(fn,fn+2,fn+3),cn.vertexLength+=4,cn.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,{},ut,_t)}}function Ww(nt,_e){for(let rt=0;rt<nt.length;rt++)if(Zl(_e,nt[rt]))return!0;for(let rt=0;rt<_e.length;rt++)if(Zl(nt,_e[rt]))return!0;return!!D0(nt,_e)}function dS(nt,_e,rt){return!!Zl(nt,_e)||!!G1(_e,nt,rt)}function W1(nt,_e){if(nt.length===1)return vm(_e,nt[0]);for(let rt=0;rt<_e.length;rt++){const at=_e[rt];for(let ut=0;ut<at.length;ut++)if(Zl(nt,at[ut]))return!0}for(let rt=0;rt<nt.length;rt++)if(vm(_e,nt[rt]))return!0;for(let rt=0;rt<_e.length;rt++)if(D0(nt,_e[rt]))return!0;return!1}function gS(nt,_e,rt){if(nt.length>1){if(D0(nt,_e))return!0;for(let at=0;at<_e.length;at++)if(G1(_e[at],nt,rt))return!0}for(let at=0;at<nt.length;at++)if(G1(nt[at],_e,rt))return!0;return!1}function D0(nt,_e){if(nt.length===0||_e.length===0)return!1;for(let rt=0;rt<nt.length-1;rt++){const at=nt[rt],ut=nt[rt+1];for(let _t=0;_t<_e.length-1;_t++)if(pS(at,ut,_e[_t],_e[_t+1]))return!0}return!1}function pS(nt,_e,rt,at){return An(nt,rt,at)!==An(_e,rt,at)&&An(nt,_e,rt)!==An(nt,_e,at)}function G1(nt,_e,rt){const at=rt*rt;if(_e.length===1)return nt.distSqr(_e[0])<at;for(let ut=1;ut<_e.length;ut++)if(Gw(nt,_e[ut-1],_e[ut])<at)return!0;return!1}function Gw(nt,_e,rt){const at=_e.distSqr(rt);if(at===0)return nt.distSqr(_e);const ut=((nt.x-_e.x)*(rt.x-_e.x)+(nt.y-_e.y)*(rt.y-_e.y))/at;return nt.distSqr(ut<0?_e:ut>1?rt:rt.sub(_e)._mult(ut)._add(_e))}function vm(nt,_e){let rt,at,ut,_t=!1;for(let At=0;At<nt.length;At++){rt=nt[At];for(let Dt=0,Wt=rt.length-1;Dt<rt.length;Wt=Dt++)at=rt[Dt],ut=rt[Wt],at.y>_e.y!=ut.y>_e.y&&_e.x<(ut.x-at.x)*(_e.y-at.y)/(ut.y-at.y)+at.x&&(_t=!_t)}return _t}function Zl(nt,_e){let rt=!1;for(let at=0,ut=nt.length-1;at<nt.length;ut=at++){const _t=nt[at],At=nt[ut];_t.y>_e.y!=At.y>_e.y&&_e.x<(At.x-_t.x)*(_e.y-_t.y)/(At.y-_t.y)+_t.x&&(rt=!rt)}return rt}function L0(nt,_e,rt,at,ut){for(const At of nt)if(_e<=At.x&&rt<=At.y&&at>=At.x&&ut>=At.y)return!0;const _t=[new mt(_e,rt),new mt(_e,ut),new mt(at,ut),new mt(at,rt)];if(nt.length>2){for(const At of _t)if(Zl(nt,At))return!0}for(let At=0;At<nt.length-1;At++)if(mS(nt[At],nt[At+1],_t))return!0;return!1}function mS(nt,_e,rt){const at=rt[0],ut=rt[2];if(nt.x<at.x&&_e.x<at.x||nt.x>ut.x&&_e.x>ut.x||nt.y<at.y&&_e.y<at.y||nt.y>ut.y&&_e.y>ut.y)return!1;const _t=An(nt,_e,rt[0]);return _t!==An(nt,_e,rt[1])||_t!==An(nt,_e,rt[2])||_t!==An(nt,_e,rt[3])}function gy(nt,_e,rt){const at=_e.paint.get(nt).value;return at.kind==="constant"?at.value:rt.programConfigurations.get(_e.id).getMaxValue(nt)}function B0(nt){return Math.sqrt(nt[0]*nt[0]+nt[1]*nt[1])}function Hw(nt,_e,rt,at,ut){if(!_e[0]&&!_e[1])return nt;const _t=mt.convert(_e)._mult(ut);rt==="viewport"&&_t._rotate(-at);const At=[];for(let Dt=0;Dt<nt.length;Dt++)At.push(nt[Dt].sub(_t));return At}function k_(nt,_e,rt,at){const ut=mt.convert(nt)._mult(at);return _e==="viewport"&&ut._rotate(-rt),ut}Oo(lu,"CircleBucket",{omit:["layers"]});const $w=new yo({"circle-sort-key":new br($r.layout_circle["circle-sort-key"])});var qw={paint:new yo({"circle-radius":new br($r.paint_circle["circle-radius"]),"circle-color":new br($r.paint_circle["circle-color"]),"circle-blur":new br($r.paint_circle["circle-blur"]),"circle-opacity":new br($r.paint_circle["circle-opacity"]),"circle-translate":new Or($r.paint_circle["circle-translate"]),"circle-translate-anchor":new Or($r.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Or($r.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Or($r.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new br($r.paint_circle["circle-stroke-width"]),"circle-stroke-color":new br($r.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new br($r.paint_circle["circle-stroke-opacity"])}),layout:$w},j0=1e-6,Qu=typeof Float32Array<"u"?Float32Array:Array;function Zw(){var nt=new Qu(9);return Qu!=Float32Array&&(nt[1]=0,nt[2]=0,nt[3]=0,nt[5]=0,nt[6]=0,nt[7]=0),nt[0]=1,nt[4]=1,nt[8]=1,nt}function Yw(nt,_e,rt){var at=_e[0],ut=_e[1],_t=_e[2],At=_e[3],Dt=_e[4],Wt=_e[5],Zt=_e[6],tn=_e[7],cn=_e[8],fn=rt[0],wn=rt[1],xn=rt[2],On=rt[3],Un=rt[4],nr=rt[5],hr=rt[6],tr=rt[7],sr=rt[8];return nt[0]=fn*at+wn*At+xn*Zt,nt[1]=fn*ut+wn*Dt+xn*tn,nt[2]=fn*_t+wn*Wt+xn*cn,nt[3]=On*at+Un*At+nr*Zt,nt[4]=On*ut+Un*Dt+nr*tn,nt[5]=On*_t+Un*Wt+nr*cn,nt[6]=hr*at+tr*At+sr*Zt,nt[7]=hr*ut+tr*Dt+sr*tn,nt[8]=hr*_t+tr*Wt+sr*cn,nt}function Xp(nt){return nt[0]=1,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=1,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=1,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt}function F0(nt,_e){var rt=_e[0],at=_e[1],ut=_e[2],_t=_e[3],At=_e[4],Dt=_e[5],Wt=_e[6],Zt=_e[7],tn=_e[8],cn=_e[9],fn=_e[10],wn=_e[11],xn=_e[12],On=_e[13],Un=_e[14],nr=_e[15],hr=rt*Dt-at*At,tr=rt*Wt-ut*At,sr=rt*Zt-_t*At,mr=at*Wt-ut*Dt,ar=at*Zt-_t*Dt,Br=ut*Zt-_t*Wt,kr=tn*On-cn*xn,Jr=tn*Un-fn*xn,ho=tn*nr-wn*xn,Ur=cn*Un-fn*On,no=cn*nr-wn*On,oo=fn*nr-wn*Un,lo=hr*oo-tr*no+sr*Ur+mr*ho-ar*Jr+Br*kr;return lo?(nt[0]=(Dt*oo-Wt*no+Zt*Ur)*(lo=1/lo),nt[1]=(ut*no-at*oo-_t*Ur)*lo,nt[2]=(On*Br-Un*ar+nr*mr)*lo,nt[3]=(fn*ar-cn*Br-wn*mr)*lo,nt[4]=(Wt*ho-At*oo-Zt*Jr)*lo,nt[5]=(rt*oo-ut*ho+_t*Jr)*lo,nt[6]=(Un*sr-xn*Br-nr*tr)*lo,nt[7]=(tn*Br-fn*sr+wn*tr)*lo,nt[8]=(At*no-Dt*ho+Zt*kr)*lo,nt[9]=(at*ho-rt*no-_t*kr)*lo,nt[10]=(xn*ar-On*sr+nr*hr)*lo,nt[11]=(cn*sr-tn*ar-wn*hr)*lo,nt[12]=(Dt*Jr-At*Ur-Wt*kr)*lo,nt[13]=(rt*Ur-at*Jr+ut*kr)*lo,nt[14]=(On*tr-xn*mr-Un*hr)*lo,nt[15]=(tn*mr-cn*tr+fn*hr)*lo,nt):null}function D_(nt,_e,rt){var at=_e[0],ut=_e[1],_t=_e[2],At=_e[3],Dt=_e[4],Wt=_e[5],Zt=_e[6],tn=_e[7],cn=_e[8],fn=_e[9],wn=_e[10],xn=_e[11],On=_e[12],Un=_e[13],nr=_e[14],hr=_e[15],tr=rt[0],sr=rt[1],mr=rt[2],ar=rt[3];return nt[0]=tr*at+sr*Dt+mr*cn+ar*On,nt[1]=tr*ut+sr*Wt+mr*fn+ar*Un,nt[2]=tr*_t+sr*Zt+mr*wn+ar*nr,nt[3]=tr*At+sr*tn+mr*xn+ar*hr,nt[4]=(tr=rt[4])*at+(sr=rt[5])*Dt+(mr=rt[6])*cn+(ar=rt[7])*On,nt[5]=tr*ut+sr*Wt+mr*fn+ar*Un,nt[6]=tr*_t+sr*Zt+mr*wn+ar*nr,nt[7]=tr*At+sr*tn+mr*xn+ar*hr,nt[8]=(tr=rt[8])*at+(sr=rt[9])*Dt+(mr=rt[10])*cn+(ar=rt[11])*On,nt[9]=tr*ut+sr*Wt+mr*fn+ar*Un,nt[10]=tr*_t+sr*Zt+mr*wn+ar*nr,nt[11]=tr*At+sr*tn+mr*xn+ar*hr,nt[12]=(tr=rt[12])*at+(sr=rt[13])*Dt+(mr=rt[14])*cn+(ar=rt[15])*On,nt[13]=tr*ut+sr*Wt+mr*fn+ar*Un,nt[14]=tr*_t+sr*Zt+mr*wn+ar*nr,nt[15]=tr*At+sr*tn+mr*xn+ar*hr,nt}function Gy(nt,_e,rt){var at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On=rt[0],Un=rt[1],nr=rt[2];return _e===nt?(nt[12]=_e[0]*On+_e[4]*Un+_e[8]*nr+_e[12],nt[13]=_e[1]*On+_e[5]*Un+_e[9]*nr+_e[13],nt[14]=_e[2]*On+_e[6]*Un+_e[10]*nr+_e[14],nt[15]=_e[3]*On+_e[7]*Un+_e[11]*nr+_e[15]):(ut=_e[1],_t=_e[2],At=_e[3],Dt=_e[4],Wt=_e[5],Zt=_e[6],tn=_e[7],cn=_e[8],fn=_e[9],wn=_e[10],xn=_e[11],nt[0]=at=_e[0],nt[1]=ut,nt[2]=_t,nt[3]=At,nt[4]=Dt,nt[5]=Wt,nt[6]=Zt,nt[7]=tn,nt[8]=cn,nt[9]=fn,nt[10]=wn,nt[11]=xn,nt[12]=at*On+Dt*Un+cn*nr+_e[12],nt[13]=ut*On+Wt*Un+fn*nr+_e[13],nt[14]=_t*On+Zt*Un+wn*nr+_e[14],nt[15]=At*On+tn*Un+xn*nr+_e[15]),nt}function py(nt,_e,rt){var at=rt[0],ut=rt[1],_t=rt[2];return nt[0]=_e[0]*at,nt[1]=_e[1]*at,nt[2]=_e[2]*at,nt[3]=_e[3]*at,nt[4]=_e[4]*ut,nt[5]=_e[5]*ut,nt[6]=_e[6]*ut,nt[7]=_e[7]*ut,nt[8]=_e[8]*_t,nt[9]=_e[9]*_t,nt[10]=_e[10]*_t,nt[11]=_e[11]*_t,nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15],nt}function Hy(nt,_e,rt){var at=Math.sin(rt),ut=Math.cos(rt),_t=_e[4],At=_e[5],Dt=_e[6],Wt=_e[7],Zt=_e[8],tn=_e[9],cn=_e[10],fn=_e[11];return _e!==nt&&(nt[0]=_e[0],nt[1]=_e[1],nt[2]=_e[2],nt[3]=_e[3],nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15]),nt[4]=_t*ut+Zt*at,nt[5]=At*ut+tn*at,nt[6]=Dt*ut+cn*at,nt[7]=Wt*ut+fn*at,nt[8]=Zt*ut-_t*at,nt[9]=tn*ut-At*at,nt[10]=cn*ut-Dt*at,nt[11]=fn*ut-Wt*at,nt}function L_(nt,_e,rt){var at=Math.sin(rt),ut=Math.cos(rt),_t=_e[0],At=_e[1],Dt=_e[2],Wt=_e[3],Zt=_e[8],tn=_e[9],cn=_e[10],fn=_e[11];return _e!==nt&&(nt[4]=_e[4],nt[5]=_e[5],nt[6]=_e[6],nt[7]=_e[7],nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15]),nt[0]=_t*ut-Zt*at,nt[1]=At*ut-tn*at,nt[2]=Dt*ut-cn*at,nt[3]=Wt*ut-fn*at,nt[8]=_t*at+Zt*ut,nt[9]=At*at+tn*ut,nt[10]=Dt*at+cn*ut,nt[11]=Wt*at+fn*ut,nt}function H1(nt,_e){return nt[0]=_e[0],nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=_e[1],nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=_e[2],nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt}function $1(nt,_e,rt){var at,ut,_t,At=rt[0],Dt=rt[1],Wt=rt[2],Zt=Math.hypot(At,Dt,Wt);return Zt<j0?null:(At*=Zt=1/Zt,Dt*=Zt,Wt*=Zt,at=Math.sin(_e),ut=Math.cos(_e),nt[0]=At*At*(_t=1-ut)+ut,nt[1]=Dt*At*_t+Wt*at,nt[2]=Wt*At*_t-Dt*at,nt[3]=0,nt[4]=At*Dt*_t-Wt*at,nt[5]=Dt*Dt*_t+ut,nt[6]=Wt*Dt*_t+At*at,nt[7]=0,nt[8]=At*Wt*_t+Dt*at,nt[9]=Dt*Wt*_t-At*at,nt[10]=Wt*Wt*_t+ut,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt)}Math.hypot||(Math.hypot=function(){for(var nt=0,_e=arguments.length;_e--;)nt+=arguments[_e]*arguments[_e];return Math.sqrt(nt)});var N0=D_;function U0(){var nt=new Qu(3);return Qu!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0),nt}function Qp(nt){var _e=new Qu(3);return _e[0]=nt[0],_e[1]=nt[1],_e[2]=nt[2],_e}function Jp(nt){return Math.hypot(nt[0],nt[1],nt[2])}function B_(nt,_e,rt){var at=new Qu(3);return at[0]=nt,at[1]=_e,at[2]=rt,at}function bm(nt,_e,rt){return nt[0]=_e[0]+rt[0],nt[1]=_e[1]+rt[1],nt[2]=_e[2]+rt[2],nt}function q1(nt,_e,rt){return nt[0]=_e[0]-rt[0],nt[1]=_e[1]-rt[1],nt[2]=_e[2]-rt[2],nt}function Kw(nt,_e,rt){return nt[0]=_e[0]*rt[0],nt[1]=_e[1]*rt[1],nt[2]=_e[2]*rt[2],nt}function Fv(nt,_e,rt){return nt[0]=Math.min(_e[0],rt[0]),nt[1]=Math.min(_e[1],rt[1]),nt[2]=Math.min(_e[2],rt[2]),nt}function Nv(nt,_e,rt){return nt[0]=Math.max(_e[0],rt[0]),nt[1]=Math.max(_e[1],rt[1]),nt[2]=Math.max(_e[2],rt[2]),nt}function pp(nt,_e,rt){return nt[0]=_e[0]*rt,nt[1]=_e[1]*rt,nt[2]=_e[2]*rt,nt}function Uv(nt,_e,rt,at){return nt[0]=_e[0]+rt[0]*at,nt[1]=_e[1]+rt[1]*at,nt[2]=_e[2]+rt[2]*at,nt}function Iu(nt,_e){var rt=_e[0],at=_e[1],ut=_e[2],_t=rt*rt+at*at+ut*ut;return _t>0&&(_t=1/Math.sqrt(_t)),nt[0]=_e[0]*_t,nt[1]=_e[1]*_t,nt[2]=_e[2]*_t,nt}function Mp(nt,_e){return nt[0]*_e[0]+nt[1]*_e[1]+nt[2]*_e[2]}function Z1(nt,_e,rt){var at=_e[0],ut=_e[1],_t=_e[2],At=rt[0],Dt=rt[1],Wt=rt[2];return nt[0]=ut*Wt-_t*Dt,nt[1]=_t*At-at*Wt,nt[2]=at*Dt-ut*At,nt}function Vl(nt,_e,rt){var at=_e[0],ut=_e[1],_t=_e[2],At=rt[3]*at+rt[7]*ut+rt[11]*_t+rt[15];return nt[0]=(rt[0]*at+rt[4]*ut+rt[8]*_t+rt[12])/(At=At||1),nt[1]=(rt[1]*at+rt[5]*ut+rt[9]*_t+rt[13])/At,nt[2]=(rt[2]*at+rt[6]*ut+rt[10]*_t+rt[14])/At,nt}function Xw(nt,_e,rt){var at=rt[0],ut=rt[1],_t=rt[2],At=_e[0],Dt=_e[1],Wt=_e[2],Zt=ut*Wt-_t*Dt,tn=_t*At-at*Wt,cn=at*Dt-ut*At,fn=ut*cn-_t*tn,wn=_t*Zt-at*cn,xn=at*tn-ut*Zt,On=2*rt[3];return tn*=On,cn*=On,wn*=2,xn*=2,nt[0]=At+(Zt*=On)+(fn*=2),nt[1]=Dt+tn+wn,nt[2]=Wt+cn+xn,nt}var j_,Pp=q1,Qw=Kw,yS=Jp;function Jw(nt,_e,rt){return nt[0]=_e[0]*rt,nt[1]=_e[1]*rt,nt[2]=_e[2]*rt,nt[3]=_e[3]*rt,nt}function ex(nt,_e){var rt=_e[0],at=_e[1],ut=_e[2],_t=_e[3],At=rt*rt+at*at+ut*ut+_t*_t;return At>0&&(At=1/Math.sqrt(At)),nt[0]=rt*At,nt[1]=at*At,nt[2]=ut*At,nt[3]=_t*At,nt}function my(nt,_e,rt){var at=_e[0],ut=_e[1],_t=_e[2],At=_e[3];return nt[0]=rt[0]*at+rt[4]*ut+rt[8]*_t+rt[12]*At,nt[1]=rt[1]*at+rt[5]*ut+rt[9]*_t+rt[13]*At,nt[2]=rt[2]*at+rt[6]*ut+rt[10]*_t+rt[14]*At,nt[3]=rt[3]*at+rt[7]*ut+rt[11]*_t+rt[15]*At,nt}function tx(){var nt=new Qu(4);return Qu!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0),nt[3]=1,nt}function nx(nt){return nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=1,nt}function rx(nt,_e,rt){rt*=.5;var at=_e[0],ut=_e[1],_t=_e[2],At=_e[3],Dt=Math.sin(rt),Wt=Math.cos(rt);return nt[0]=at*Wt+At*Dt,nt[1]=ut*Wt+_t*Dt,nt[2]=_t*Wt-ut*Dt,nt[3]=At*Wt-at*Dt,nt}function ix(nt,_e,rt){rt*=.5;var at=_e[0],ut=_e[1],_t=_e[2],At=_e[3],Dt=Math.sin(rt),Wt=Math.cos(rt);return nt[0]=at*Wt-_t*Dt,nt[1]=ut*Wt+At*Dt,nt[2]=_t*Wt+at*Dt,nt[3]=At*Wt-ut*Dt,nt}U0(),j_=new Qu(4),Qu!=Float32Array&&(j_[0]=0,j_[1]=0,j_[2]=0,j_[3]=0);var _S=ex;U0(),B_(1,0,0),B_(0,1,0),tx(),tx(),Zw();class Y1{constructor(_e,rt){this.pos=_e,this.dir=rt}intersectsPlane(_e,rt,at){const ut=Mp(rt,this.dir);if(Math.abs(ut)<1e-6)return!1;const _t=((_e[0]-this.pos[0])*rt[0]+(_e[1]-this.pos[1])*rt[1]+(_e[2]-this.pos[2])*rt[2])/ut;return at[0]=this.pos[0]+this.dir[0]*_t,at[1]=this.pos[1]+this.dir[1]*_t,at[2]=this.pos[2]+this.dir[2]*_t,!0}closestPointOnSphere(_e,rt,at){if(function(wn,xn){var On=wn[0],Un=wn[1],nr=wn[2],hr=xn[0],tr=xn[1],sr=xn[2];return Math.abs(On-hr)<=j0*Math.max(1,Math.abs(On),Math.abs(hr))&&Math.abs(Un-tr)<=j0*Math.max(1,Math.abs(Un),Math.abs(tr))&&Math.abs(nr-sr)<=j0*Math.max(1,Math.abs(nr),Math.abs(sr))}(this.pos,_e)||rt===0)return at[0]=at[1]=at[2]=0,!1;const[ut,_t,At]=this.dir,Dt=this.pos[0]-_e[0],Wt=this.pos[1]-_e[1],Zt=this.pos[2]-_e[2],tn=ut*ut+_t*_t+At*At,cn=2*(Dt*ut+Wt*_t+Zt*At),fn=cn*cn-4*tn*(Dt*Dt+Wt*Wt+Zt*Zt-rt*rt);if(fn<0){const wn=Math.max(-cn/2,0),xn=Dt+ut*wn,On=Wt+_t*wn,Un=Zt+At*wn,nr=Math.hypot(xn,On,Un);return at[0]=xn*rt/nr,at[1]=On*rt/nr,at[2]=Un*rt/nr,!1}{const wn=(-cn-Math.sqrt(fn))/(2*tn);if(wn<0){const xn=Math.hypot(Dt,Wt,Zt);return at[0]=Dt*rt/xn,at[1]=Wt*rt/xn,at[2]=Zt*rt/xn,!1}return at[0]=Dt+ut*wn,at[1]=Wt+_t*wn,at[2]=Zt+At*wn,!0}}}class Ju{constructor(_e,rt,at,ut,_t){this.TL=_e,this.TR=rt,this.BR=at,this.BL=ut,this.horizon=_t}static fromInvProjectionMatrix(_e,rt,at){const ut=[-1,1,1],_t=[1,1,1],At=[1,-1,1],Dt=[-1,-1,1],Wt=Vl(ut,ut,_e),Zt=Vl(_t,_t,_e),tn=Vl(At,At,_e),cn=Vl(Dt,Dt,_e);return new Ju(Wt,Zt,tn,cn,rt/at)}}class K1{constructor(_e,rt){this.points=_e,this.planes=rt}static fromInvProjectionMatrix(_e,rt,at,ut){const _t=Math.pow(2,at),At=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Wt=>{const Zt=my([],Wt,_e),tn=1/Zt[3]/rt*_t;return function(cn,fn,wn){return cn[0]=fn[0]*wn[0],cn[1]=fn[1]*wn[1],cn[2]=fn[2]*wn[2],cn[3]=fn[3]*wn[3],cn}(Zt,Zt,[tn,tn,ut?1/Zt[3]:tn,tn])}),Dt=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Wt=>{const Zt=Iu([],Z1([],Pp([],At[Wt[0]],At[Wt[1]]),Pp([],At[Wt[2]],At[Wt[1]]))),tn=-Mp(Zt,At[Wt[1]]);return Zt.concat(tn)});return new K1(At,Dt)}}class Ou{static fromPoints(_e){const rt=[1/0,1/0,1/0],at=[-1/0,-1/0,-1/0];for(const ut of _e)Fv(rt,rt,ut),Nv(at,at,ut);return new Ou(rt,at)}static applyTransform(_e,rt){const at=_e.getCorners();for(let ut=0;ut<at.length;++ut)Vl(at[ut],at[ut],rt);return Ou.fromPoints(at)}constructor(_e,rt){this.min=_e,this.max=rt,this.center=pp([],bm([],this.min,this.max),.5)}quadrant(_e){const rt=[_e%2==0,_e<2],at=Qp(this.min),ut=Qp(this.max);for(let _t=0;_t<rt.length;_t++)at[_t]=rt[_t]?this.min[_t]:this.center[_t],ut[_t]=rt[_t]?this.center[_t]:this.max[_t];return ut[2]=this.max[2],new Ou(at,ut)}distanceX(_e){return Math.max(Math.min(this.max[0],_e[0]),this.min[0])-_e[0]}distanceY(_e){return Math.max(Math.min(this.max[1],_e[1]),this.min[1])-_e[1]}distanceZ(_e){return Math.max(Math.min(this.max[2],_e[2]),this.min[2])-_e[2]}getCorners(){const _e=this.min,rt=this.max;return[[_e[0],_e[1],_e[2]],[rt[0],_e[1],_e[2]],[rt[0],rt[1],_e[2]],[_e[0],rt[1],_e[2]],[_e[0],_e[1],rt[2]],[rt[0],_e[1],rt[2]],[rt[0],rt[1],rt[2]],[_e[0],rt[1],rt[2]]]}intersects(_e){const rt=this.getCorners();let at=!0;for(let ut=0;ut<_e.planes.length;ut++){const _t=_e.planes[ut];let At=0;for(let Dt=0;Dt<rt.length;Dt++)At+=Mp(_t,rt[Dt])+_t[3]>=0;if(At===0)return 0;At!==rt.length&&(at=!1)}if(at)return 2;for(let ut=0;ut<3;ut++){let _t=Number.MAX_VALUE,At=-Number.MAX_VALUE;for(let Dt=0;Dt<_e.points.length;Dt++){const Wt=_e.points[Dt][ut]-this.min[ut];_t=Math.min(_t,Wt),At=Math.max(At,Wt)}if(At<0||_t>this.max[ut]-this.min[ut])return 0}return 1}}function ox(nt,_e,rt,at,ut,_t,At,Dt,Wt){if(_t&&nt.queryGeometry.isAboveHorizon)return!1;_t&&(Wt*=nt.pixelToTileUnitsFactor);const Zt=nt.tileID.canonical,tn=rt.projection.upVectorScale(Zt,rt.center.lat,rt.worldSize).metersToTile;for(const cn of _e)for(const fn of cn){const wn=fn.add(Dt),xn=ut&&rt.elevation?rt.elevation.exaggeration()*ut.getElevationAt(wn.x,wn.y,!0):0,On=rt.projection.projectTilePoint(wn.x,wn.y,Zt);if(xn>0){const tr=rt.projection.upVector(Zt,wn.x,wn.y);On.x+=tr[0]*tn*xn,On.y+=tr[1]*tn*xn,On.z+=tr[2]*tn*xn}const Un=_t?wn:sx(On.x,On.y,On.z,at),nr=_t?nt.tilespaceRays.map(tr=>bS(tr,xn)):nt.queryGeometry.screenGeometry,hr=my([],[On.x,On.y,On.z,1],at);if(!At&&_t?Wt*=hr[3]/rt.cameraToCenterDistance:At&&!_t&&(Wt*=rt.cameraToCenterDistance/hr[3]),_t){const tr=eu((fn.y/Zo+Zt.y)/(1<<Zt.z));Wt/=rt.projection.pixelsPerMeter(tr,1)/dp(1,tr)}if(dS(nr,Un,Wt))return!0}return!1}function sx(nt,_e,rt,at){const ut=my([],[nt,_e,rt,1],at);return new mt(ut[0]/ut[3],ut[1]/ut[3])}const ax=B_(0,0,0),vS=B_(0,0,1);function bS(nt,_e){const rt=U0();return ax[2]=_e,nt.intersectsPlane(ax,vS,rt),new mt(rt[0],rt[1])}class lx extends lu{}function z0(nt,{width:_e,height:rt},at,ut){if(ut){if(ut instanceof Uint8ClampedArray)ut=new Uint8Array(ut.buffer);else if(ut.length!==_e*rt*at)throw new RangeError("mismatched image size")}else ut=new Uint8Array(_e*rt*at);return nt.width=_e,nt.height=rt,nt.data=ut,nt}function ux(nt,_e,rt){const{width:at,height:ut}=_e;at===nt.width&&ut===nt.height||(X1(nt,_e,{x:0,y:0},{x:0,y:0},{width:Math.min(nt.width,at),height:Math.min(nt.height,ut)},rt),nt.width=at,nt.height=ut,nt.data=_e.data)}function X1(nt,_e,rt,at,ut,_t){if(ut.width===0||ut.height===0)return _e;if(ut.width>nt.width||ut.height>nt.height||rt.x>nt.width-ut.width||rt.y>nt.height-ut.height)throw new RangeError("out of range source coordinates for image copy");if(ut.width>_e.width||ut.height>_e.height||at.x>_e.width-ut.width||at.y>_e.height-ut.height)throw new RangeError("out of range destination coordinates for image copy");const At=nt.data,Dt=_e.data;for(let Wt=0;Wt<ut.height;Wt++){const Zt=((rt.y+Wt)*nt.width+rt.x)*_t,tn=((at.y+Wt)*_e.width+at.x)*_t;for(let cn=0;cn<ut.width*_t;cn++)Dt[tn+cn]=At[Zt+cn]}return _e}Oo(lx,"HeatmapBucket",{omit:["layers"]});class Um{constructor(_e,rt){z0(this,_e,1,rt)}resize(_e){ux(this,new Um(_e),1)}clone(){return new Um({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(_e,rt,at,ut,_t){X1(_e,rt,at,ut,_t,1)}}class _c{constructor(_e,rt){z0(this,_e,4,rt)}resize(_e){ux(this,new _c(_e),4)}replace(_e,rt){rt?this.data.set(_e):this.data=_e instanceof Uint8ClampedArray?new Uint8Array(_e.buffer):_e}clone(){return new _c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(_e,rt,at,ut,_t){X1(_e,rt,at,ut,_t,4)}}Oo(Um,"AlphaImage"),Oo(_c,"RGBAImage");var wS={paint:new yo({"heatmap-radius":new br($r.paint_heatmap["heatmap-radius"]),"heatmap-weight":new br($r.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Or($r.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vo($r.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Or($r.paint_heatmap["heatmap-opacity"])})};function Q1(nt){const _e={},rt=nt.resolution||256,at=nt.clips?nt.clips.length:1,ut=nt.image||new _c({width:rt,height:at}),_t=(At,Dt,Wt)=>{_e[nt.evaluationKey]=Wt;const Zt=nt.expression.evaluate(_e);ut.data[At+Dt+0]=Math.floor(255*Zt.r/Zt.a),ut.data[At+Dt+1]=Math.floor(255*Zt.g/Zt.a),ut.data[At+Dt+2]=Math.floor(255*Zt.b/Zt.a),ut.data[At+Dt+3]=Math.floor(255*Zt.a)};if(nt.clips)for(let At=0,Dt=0;At<at;++At,Dt+=4*rt)for(let Wt=0,Zt=0;Wt<rt;Wt++,Zt+=4){const tn=Wt/(rt-1),{start:cn,end:fn}=nt.clips[At];_t(Dt,Zt,cn*(1-tn)+fn*tn)}else for(let At=0,Dt=0;At<rt;At++,Dt+=4)_t(0,Dt,At/(rt-1));return ut}var xS={paint:new yo({"hillshade-illumination-direction":new Or($r.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Or($r.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Or($r.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Or($r.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Or($r.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Or($r.paint_hillshade["hillshade-accent-color"])})};const SS=_o([{name:"a_pos",components:2,type:"Int16"}],4),{members:AS}=SS;var zv={exports:{}};function V0(nt,_e,rt){rt=rt||2;var at,ut,_t,At,Dt,Wt,Zt,tn=_e&&_e.length,cn=tn?_e[0]*rt:nt.length,fn=cx(nt,0,cn,rt,!0),wn=[];if(!fn||fn.next===fn.prev)return wn;if(tn&&(fn=function(On,Un,nr,hr){var tr,sr,mr,ar=[];for(tr=0,sr=Un.length;tr<sr;tr++)(mr=cx(On,Un[tr]*hr,tr<sr-1?Un[tr+1]*hr:On.length,hr,!1))===mr.next&&(mr.steiner=!0),ar.push(PS(mr));for(ar.sort(IS),tr=0;tr<ar.length;tr++)nr=OS(ar[tr],nr);return nr}(nt,_e,fn,rt)),nt.length>80*rt){at=_t=nt[0],ut=At=nt[1];for(var xn=rt;xn<cn;xn+=rt)(Dt=nt[xn])<at&&(at=Dt),(Wt=nt[xn+1])<ut&&(ut=Wt),Dt>_t&&(_t=Dt),Wt>At&&(At=Wt);Zt=(Zt=Math.max(_t-at,At-ut))!==0?32767/Zt:0}return Vv(fn,wn,rt,at,ut,Zt,0),wn}function cx(nt,_e,rt,at,ut){var _t,At;if(ut===tw(nt,_e,rt,at)>0)for(_t=_e;_t<rt;_t+=at)At=Wv(_t,nt[_t],nt[_t+1],At);else for(_t=rt-at;_t>=_e;_t-=at)At=Wv(_t,nt[_t],nt[_t+1],At);return At&&G0(At,At.next)&&(Gv(At),At=At.next),At}function $y(nt,_e){if(!nt)return nt;_e||(_e=nt);var rt,at=nt;do if(rt=!1,at.steiner||!G0(at,at.next)&&Pl(at.prev,at,at.next)!==0)at=at.next;else{if(Gv(at),(at=_e=at.prev)===at.next)break;rt=!0}while(rt||at!==_e);return _e}function Vv(nt,_e,rt,at,ut,_t,At){if(nt){!At&&_t&&function(tn,cn,fn,wn){var xn=tn;do xn.z===0&&(xn.z=W0(xn.x,xn.y,cn,fn,wn)),xn.prevZ=xn.prev,xn.nextZ=xn.next,xn=xn.next;while(xn!==tn);xn.prevZ.nextZ=null,xn.prevZ=null,function(On){var Un,nr,hr,tr,sr,mr,ar,Br,kr=1;do{for(nr=On,On=null,sr=null,mr=0;nr;){for(mr++,hr=nr,ar=0,Un=0;Un<kr&&(ar++,hr=hr.nextZ);Un++);for(Br=kr;ar>0||Br>0&&hr;)ar!==0&&(Br===0||!hr||nr.z<=hr.z)?(tr=nr,nr=nr.nextZ,ar--):(tr=hr,hr=hr.nextZ,Br--),sr?sr.nextZ=tr:On=tr,tr.prevZ=sr,sr=tr;nr=hr}sr.nextZ=null,kr*=2}while(mr>1)}(xn)}(nt,at,ut,_t);for(var Dt,Wt,Zt=nt;nt.prev!==nt.next;)if(Dt=nt.prev,Wt=nt.next,_t?TS(nt,at,ut,_t):ES(nt))_e.push(Dt.i/rt|0),_e.push(nt.i/rt|0),_e.push(Wt.i/rt|0),Gv(nt),nt=Wt.next,Zt=Wt.next;else if((nt=Wt)===Zt){At?At===1?Vv(nt=CS($y(nt),_e,rt),_e,rt,at,ut,_t,2):At===2&&RS(nt,_e,rt,at,ut,_t):Vv($y(nt),_e,rt,at,ut,_t,1);break}}}function ES(nt){var _e=nt.prev,rt=nt,at=nt.next;if(Pl(_e,rt,at)>=0)return!1;for(var ut=_e.x,_t=rt.x,At=at.x,Dt=_e.y,Wt=rt.y,Zt=at.y,tn=ut<_t?ut<At?ut:At:_t<At?_t:At,cn=Dt<Wt?Dt<Zt?Dt:Zt:Wt<Zt?Wt:Zt,fn=ut>_t?ut>At?ut:At:_t>At?_t:At,wn=Dt>Wt?Dt>Zt?Dt:Zt:Wt>Zt?Wt:Zt,xn=at.next;xn!==_e;){if(xn.x>=tn&&xn.x<=fn&&xn.y>=cn&&xn.y<=wn&&F_(ut,Dt,_t,Wt,At,Zt,xn.x,xn.y)&&Pl(xn.prev,xn,xn.next)>=0)return!1;xn=xn.next}return!0}function TS(nt,_e,rt,at){var ut=nt.prev,_t=nt,At=nt.next;if(Pl(ut,_t,At)>=0)return!1;for(var Dt=ut.x,Wt=_t.x,Zt=At.x,tn=ut.y,cn=_t.y,fn=At.y,wn=Dt<Wt?Dt<Zt?Dt:Zt:Wt<Zt?Wt:Zt,xn=tn<cn?tn<fn?tn:fn:cn<fn?cn:fn,On=Dt>Wt?Dt>Zt?Dt:Zt:Wt>Zt?Wt:Zt,Un=tn>cn?tn>fn?tn:fn:cn>fn?cn:fn,nr=W0(wn,xn,_e,rt,at),hr=W0(On,Un,_e,rt,at),tr=nt.prevZ,sr=nt.nextZ;tr&&tr.z>=nr&&sr&&sr.z<=hr;){if(tr.x>=wn&&tr.x<=On&&tr.y>=xn&&tr.y<=Un&&tr!==ut&&tr!==At&&F_(Dt,tn,Wt,cn,Zt,fn,tr.x,tr.y)&&Pl(tr.prev,tr,tr.next)>=0||(tr=tr.prevZ,sr.x>=wn&&sr.x<=On&&sr.y>=xn&&sr.y<=Un&&sr!==ut&&sr!==At&&F_(Dt,tn,Wt,cn,Zt,fn,sr.x,sr.y)&&Pl(sr.prev,sr,sr.next)>=0))return!1;sr=sr.nextZ}for(;tr&&tr.z>=nr;){if(tr.x>=wn&&tr.x<=On&&tr.y>=xn&&tr.y<=Un&&tr!==ut&&tr!==At&&F_(Dt,tn,Wt,cn,Zt,fn,tr.x,tr.y)&&Pl(tr.prev,tr,tr.next)>=0)return!1;tr=tr.prevZ}for(;sr&&sr.z<=hr;){if(sr.x>=wn&&sr.x<=On&&sr.y>=xn&&sr.y<=Un&&sr!==ut&&sr!==At&&F_(Dt,tn,Wt,cn,Zt,fn,sr.x,sr.y)&&Pl(sr.prev,sr,sr.next)>=0)return!1;sr=sr.nextZ}return!0}function CS(nt,_e,rt){var at=nt;do{var ut=at.prev,_t=at.next.next;!G0(ut,_t)&&hx(ut,at,at.next,_t)&&N_(ut,_t)&&N_(_t,ut)&&(_e.push(ut.i/rt|0),_e.push(at.i/rt|0),_e.push(_t.i/rt|0),Gv(at),Gv(at.next),at=nt=_t),at=at.next}while(at!==nt);return $y(at)}function RS(nt,_e,rt,at,ut,_t){var At=nt;do{for(var Dt=At.next.next;Dt!==At.prev;){if(At.i!==Dt.i&&kS(At,Dt)){var Wt=fx(At,Dt);return At=$y(At,At.next),Wt=$y(Wt,Wt.next),Vv(At,_e,rt,at,ut,_t,0),void Vv(Wt,_e,rt,at,ut,_t,0)}Dt=Dt.next}At=At.next}while(At!==nt)}function IS(nt,_e){return nt.x-_e.x}function OS(nt,_e){var rt=function(ut,_t){var At,Dt=_t,Wt=ut.x,Zt=ut.y,tn=-1/0;do{if(Zt<=Dt.y&&Zt>=Dt.next.y&&Dt.next.y!==Dt.y){var cn=Dt.x+(Zt-Dt.y)*(Dt.next.x-Dt.x)/(Dt.next.y-Dt.y);if(cn<=Wt&&cn>tn&&(tn=cn,At=Dt.x<Dt.next.x?Dt:Dt.next,cn===Wt))return At}Dt=Dt.next}while(Dt!==_t);if(!At)return null;var fn,wn=At,xn=At.x,On=At.y,Un=1/0;Dt=At;do Wt>=Dt.x&&Dt.x>=xn&&Wt!==Dt.x&&F_(Zt<On?Wt:tn,Zt,xn,On,Zt<On?tn:Wt,Zt,Dt.x,Dt.y)&&(fn=Math.abs(Zt-Dt.y)/(Wt-Dt.x),N_(Dt,ut)&&(fn<Un||fn===Un&&(Dt.x>At.x||Dt.x===At.x&&J1(At,Dt)))&&(At=Dt,Un=fn)),Dt=Dt.next;while(Dt!==wn);return At}(nt,_e);if(!rt)return _e;var at=fx(rt,nt);return $y(at,at.next),$y(rt,rt.next)}function J1(nt,_e){return Pl(nt.prev,nt,_e.prev)<0&&Pl(_e.next,nt,nt.next)<0}function W0(nt,_e,rt,at,ut){return(nt=1431655765&((nt=858993459&((nt=252645135&((nt=16711935&((nt=(nt-rt)*ut|0)|nt<<8))|nt<<4))|nt<<2))|nt<<1))|(_e=1431655765&((_e=858993459&((_e=252645135&((_e=16711935&((_e=(_e-at)*ut|0)|_e<<8))|_e<<4))|_e<<2))|_e<<1))<<1}function PS(nt){var _e=nt,rt=nt;do(_e.x<rt.x||_e.x===rt.x&&_e.y<rt.y)&&(rt=_e),_e=_e.next;while(_e!==nt);return rt}function F_(nt,_e,rt,at,ut,_t,At,Dt){return(ut-At)*(_e-Dt)>=(nt-At)*(_t-Dt)&&(nt-At)*(at-Dt)>=(rt-At)*(_e-Dt)&&(rt-At)*(_t-Dt)>=(ut-At)*(at-Dt)}function kS(nt,_e){return nt.next.i!==_e.i&&nt.prev.i!==_e.i&&!function(rt,at){var ut=rt;do{if(ut.i!==rt.i&&ut.next.i!==rt.i&&ut.i!==at.i&&ut.next.i!==at.i&&hx(ut,ut.next,rt,at))return!0;ut=ut.next}while(ut!==rt);return!1}(nt,_e)&&(N_(nt,_e)&&N_(_e,nt)&&function(rt,at){var ut=rt,_t=!1,At=(rt.x+at.x)/2,Dt=(rt.y+at.y)/2;do ut.y>Dt!=ut.next.y>Dt&&ut.next.y!==ut.y&&At<(ut.next.x-ut.x)*(Dt-ut.y)/(ut.next.y-ut.y)+ut.x&&(_t=!_t),ut=ut.next;while(ut!==rt);return _t}(nt,_e)&&(Pl(nt.prev,nt,_e.prev)||Pl(nt,_e.prev,_e))||G0(nt,_e)&&Pl(nt.prev,nt,nt.next)>0&&Pl(_e.prev,_e,_e.next)>0)}function Pl(nt,_e,rt){return(_e.y-nt.y)*(rt.x-_e.x)-(_e.x-nt.x)*(rt.y-_e.y)}function G0(nt,_e){return nt.x===_e.x&&nt.y===_e.y}function hx(nt,_e,rt,at){var ut=$0(Pl(nt,_e,rt)),_t=$0(Pl(nt,_e,at)),At=$0(Pl(rt,at,nt)),Dt=$0(Pl(rt,at,_e));return ut!==_t&&At!==Dt||!(ut!==0||!H0(nt,rt,_e))||!(_t!==0||!H0(nt,at,_e))||!(At!==0||!H0(rt,nt,at))||!(Dt!==0||!H0(rt,_e,at))}function H0(nt,_e,rt){return _e.x<=Math.max(nt.x,rt.x)&&_e.x>=Math.min(nt.x,rt.x)&&_e.y<=Math.max(nt.y,rt.y)&&_e.y>=Math.min(nt.y,rt.y)}function $0(nt){return nt>0?1:nt<0?-1:0}function N_(nt,_e){return Pl(nt.prev,nt,nt.next)<0?Pl(nt,_e,nt.next)>=0&&Pl(nt,nt.prev,_e)>=0:Pl(nt,_e,nt.prev)<0||Pl(nt,nt.next,_e)<0}function fx(nt,_e){var rt=new ew(nt.i,nt.x,nt.y),at=new ew(_e.i,_e.x,_e.y),ut=nt.next,_t=_e.prev;return nt.next=_e,_e.prev=nt,rt.next=ut,ut.prev=rt,at.next=rt,rt.prev=at,_t.next=at,at.prev=_t,at}function Wv(nt,_e,rt,at){var ut=new ew(nt,_e,rt);return at?(ut.next=at.next,ut.prev=at,at.next.prev=ut,at.next=ut):(ut.prev=ut,ut.next=ut),ut}function Gv(nt){nt.next.prev=nt.prev,nt.prev.next=nt.next,nt.prevZ&&(nt.prevZ.nextZ=nt.nextZ),nt.nextZ&&(nt.nextZ.prevZ=nt.prevZ)}function ew(nt,_e,rt){this.i=nt,this.x=_e,this.y=rt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tw(nt,_e,rt,at){for(var ut=0,_t=_e,At=rt-at;_t<rt;_t+=at)ut+=(nt[At]-nt[_t])*(nt[_t+1]+nt[At+1]),At=_t;return ut}function DS(nt,_e,rt,at,ut){dx(nt,_e,rt||0,at||nt.length-1,ut||LS)}function dx(nt,_e,rt,at,ut){for(;at>rt;){if(at-rt>600){var _t=at-rt+1,At=_e-rt+1,Dt=Math.log(_t),Wt=.5*Math.exp(2*Dt/3),Zt=.5*Math.sqrt(Dt*Wt*(_t-Wt)/_t)*(At-_t/2<0?-1:1);dx(nt,_e,Math.max(rt,Math.floor(_e-At*Wt/_t+Zt)),Math.min(at,Math.floor(_e+(_t-At)*Wt/_t+Zt)),ut)}var tn=nt[_e],cn=rt,fn=at;for(Hv(nt,rt,_e),ut(nt[at],tn)>0&&Hv(nt,rt,at);cn<fn;){for(Hv(nt,cn,fn),cn++,fn--;ut(nt[cn],tn)<0;)cn++;for(;ut(nt[fn],tn)>0;)fn--}ut(nt[rt],tn)===0?Hv(nt,rt,fn):Hv(nt,++fn,at),fn<=_e&&(rt=fn+1),_e<=fn&&(at=fn-1)}}function Hv(nt,_e,rt){var at=nt[_e];nt[_e]=nt[rt],nt[rt]=at}function LS(nt,_e){return nt<_e?-1:nt>_e?1:0}function nw(nt,_e){const rt=nt.length;if(rt<=1)return[nt];const at=[];let ut,_t;for(let At=0;At<rt;At++){const Dt=Mn(nt[At]);Dt!==0&&(nt[At].area=Math.abs(Dt),_t===void 0&&(_t=Dt<0),_t===Dt<0?(ut&&at.push(ut),ut=[nt[At]]):ut.push(nt[At]))}if(ut&&at.push(ut),_e>1)for(let At=0;At<at.length;At++)at[At].length<=_e||(DS(at[At],_e,1,at[At].length-1,BS),at[At]=at[At].slice(0,_e));return at}function BS(nt,_e){return _e.area-nt.area}function rw(nt,_e,rt){const at=rt.patternDependencies;let ut=!1;for(const _t of _e){const At=_t.paint.get(`${nt}-pattern`);At.isConstant()||(ut=!0);const Dt=At.constantOr(null);Dt&&(ut=!0,at[Dt.to]=!0,at[Dt.from]=!0)}return ut}function iw(nt,_e,rt,at,ut){const _t=ut.patternDependencies;for(const At of _e){const Dt=At.paint.get(`${nt}-pattern`).value;if(Dt.kind!=="constant"){let Wt=Dt.evaluate({zoom:at-1},rt,{},ut.availableImages),Zt=Dt.evaluate({zoom:at},rt,{},ut.availableImages),tn=Dt.evaluate({zoom:at+1},rt,{},ut.availableImages);Wt=Wt&&Wt.name?Wt.name:Wt,Zt=Zt&&Zt.name?Zt.name:Zt,tn=tn&&tn.name?tn.name:tn,_t[Wt]=!0,_t[Zt]=!0,_t[tn]=!0,rt.patterns[At.id]={min:Wt,mid:Zt,max:tn}}}return rt}zv.exports=V0,zv.exports.default=V0,V0.deviation=function(nt,_e,rt,at){var ut=_e&&_e.length,_t=Math.abs(tw(nt,0,ut?_e[0]*rt:nt.length,rt));if(ut)for(var At=0,Dt=_e.length;At<Dt;At++)_t-=Math.abs(tw(nt,_e[At]*rt,At<Dt-1?_e[At+1]*rt:nt.length,rt));var Wt=0;for(At=0;At<at.length;At+=3){var Zt=at[At]*rt,tn=at[At+1]*rt,cn=at[At+2]*rt;Wt+=Math.abs((nt[Zt]-nt[cn])*(nt[tn+1]-nt[Zt+1])-(nt[Zt]-nt[tn])*(nt[cn+1]-nt[Zt+1]))}return _t===0&&Wt===0?0:Math.abs((Wt-_t)/_t)},V0.flatten=function(nt){for(var _e=nt[0][0].length,rt={vertices:[],holes:[],dimensions:_e},at=0,ut=0;ut<nt.length;ut++){for(var _t=0;_t<nt[ut].length;_t++)for(var At=0;At<_e;At++)rt.vertices.push(nt[ut][_t][At]);ut>0&&rt.holes.push(at+=nt[ut-1].length)}return rt};class q0{constructor(_e){this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hs,this.indexArray=new Jl,this.indexArray2=new _u,this.programConfigurations=new Op(_e.layers,_e.zoom),this.segments=new zl,this.segments2=new zl,this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id),this.projection=_e.projection}populate(_e,rt,at,ut){this.hasPattern=rw("fill",this.layers,rt);const _t=this.layers[0].layout.get("fill-sort-key"),At=[];for(const{feature:Dt,id:Wt,index:Zt,sourceLayerIndex:tn}of _e){const cn=this.layers[0]._featureFilter.needGeometry,fn=Wy(Dt,cn);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),fn,at))continue;const wn=_t?_t.evaluate(fn,{},at,rt.availableImages):void 0,xn={id:Wt,properties:Dt.properties,type:Dt.type,sourceLayerIndex:tn,index:Zt,geometry:cn?fn.geometry:Lu(Dt,at,ut),patterns:{},sortKey:wn};At.push(xn)}_t&&At.sort((Dt,Wt)=>Dt.sortKey-Wt.sortKey);for(const Dt of At){const{geometry:Wt,index:Zt,sourceLayerIndex:tn}=Dt;if(this.hasPattern){const cn=iw("fill",this.layers,Dt,this.zoom,rt);this.patternFeatures.push(cn)}else this.addFeature(Dt,Wt,Zt,at,{},rt.availableImages);rt.featureIndex.insert(_e[Zt].feature,Wt,Zt,tn,this.index)}}update(_e,rt,at,ut){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ut)}addFeatures(_e,rt,at,ut,_t){for(const At of this.patternFeatures)this.addFeature(At,At.geometry,At.index,rt,at,ut)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,AS),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.indexBuffer2=_e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(_e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(_e,rt,at,ut,_t,At=[]){for(const Dt of nw(rt,500)){let Wt=0;for(const xn of Dt)Wt+=xn.length;const Zt=this.segments.prepareSegment(Wt,this.layoutVertexArray,this.indexArray),tn=Zt.vertexLength,cn=[],fn=[];for(const xn of Dt){if(xn.length===0)continue;xn!==Dt[0]&&fn.push(cn.length/2);const On=this.segments2.prepareSegment(xn.length,this.layoutVertexArray,this.indexArray2),Un=On.vertexLength;this.layoutVertexArray.emplaceBack(xn[0].x,xn[0].y),this.indexArray2.emplaceBack(Un+xn.length-1,Un),cn.push(xn[0].x),cn.push(xn[0].y);for(let nr=1;nr<xn.length;nr++)this.layoutVertexArray.emplaceBack(xn[nr].x,xn[nr].y),this.indexArray2.emplaceBack(Un+nr-1,Un+nr),cn.push(xn[nr].x),cn.push(xn[nr].y);On.vertexLength+=xn.length,On.primitiveLength+=xn.length}const wn=zv.exports(cn,fn);for(let xn=0;xn<wn.length;xn+=3)this.indexArray.emplaceBack(tn+wn[xn],tn+wn[xn+1],tn+wn[xn+2]);Zt.vertexLength+=Wt,Zt.primitiveLength+=wn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,_t,At,ut)}}Oo(q0,"FillBucket",{omit:["layers","patternFeatures"]});const jS=new yo({"fill-sort-key":new br($r.layout_fill["fill-sort-key"])});var FS={paint:new yo({"fill-antialias":new Or($r.paint_fill["fill-antialias"]),"fill-opacity":new br($r.paint_fill["fill-opacity"]),"fill-color":new br($r.paint_fill["fill-color"]),"fill-outline-color":new br($r.paint_fill["fill-outline-color"]),"fill-translate":new Or($r.paint_fill["fill-translate"]),"fill-translate-anchor":new Or($r.paint_fill["fill-translate-anchor"]),"fill-pattern":new xo($r.paint_fill["fill-pattern"])}),layout:jS};const NS=_o([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),US=_o([{name:"a_centroid_pos",components:2,type:"Uint16"}]),gx=_o([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:px}=NS;var Z0={},zS=mt,mx=U_;function U_(nt,_e,rt,at,ut){this.properties={},this.extent=rt,this.type=0,this._pbf=nt,this._geometry=-1,this._keys=at,this._values=ut,nt.readFields(Y0,this,_e)}function Y0(nt,_e,rt){nt==1?_e.id=rt.readVarint():nt==2?function(at,ut){for(var _t=at.readVarint()+at.pos;at.pos<_t;){var At=ut._keys[at.readVarint()],Dt=ut._values[at.readVarint()];ut.properties[At]=Dt}}(rt,_e):nt==3?_e.type=rt.readVarint():nt==4&&(_e._geometry=rt.pos)}function VS(nt){for(var _e,rt,at=0,ut=0,_t=nt.length,At=_t-1;ut<_t;At=ut++)at+=((rt=nt[At]).x-(_e=nt[ut]).x)*(_e.y+rt.y);return at}U_.types=["Unknown","Point","LineString","Polygon"],U_.prototype.loadGeometry=function(){var nt=this._pbf;nt.pos=this._geometry;for(var _e,rt=nt.readVarint()+nt.pos,at=1,ut=0,_t=0,At=0,Dt=[];nt.pos<rt;){if(ut<=0){var Wt=nt.readVarint();at=7&Wt,ut=Wt>>3}if(ut--,at===1||at===2)_t+=nt.readSVarint(),At+=nt.readSVarint(),at===1&&(_e&&Dt.push(_e),_e=[]),_e.push(new zS(_t,At));else{if(at!==7)throw new Error("unknown command "+at);_e&&_e.push(_e[0].clone())}}return _e&&Dt.push(_e),Dt},U_.prototype.bbox=function(){var nt=this._pbf;nt.pos=this._geometry;for(var _e=nt.readVarint()+nt.pos,rt=1,at=0,ut=0,_t=0,At=1/0,Dt=-1/0,Wt=1/0,Zt=-1/0;nt.pos<_e;){if(at<=0){var tn=nt.readVarint();rt=7&tn,at=tn>>3}if(at--,rt===1||rt===2)(ut+=nt.readSVarint())<At&&(At=ut),ut>Dt&&(Dt=ut),(_t+=nt.readSVarint())<Wt&&(Wt=_t),_t>Zt&&(Zt=_t);else if(rt!==7)throw new Error("unknown command "+rt)}return[At,Wt,Dt,Zt]},U_.prototype.toGeoJSON=function(nt,_e,rt){var at,ut,_t=this.extent*Math.pow(2,rt),At=this.extent*nt,Dt=this.extent*_e,Wt=this.loadGeometry(),Zt=U_.types[this.type];function tn(wn){for(var xn=0;xn<wn.length;xn++){var On=wn[xn];wn[xn]=[360*(On.x+At)/_t-180,360/Math.PI*Math.atan(Math.exp((180-360*(On.y+Dt)/_t)*Math.PI/180))-90]}}switch(this.type){case 1:var cn=[];for(at=0;at<Wt.length;at++)cn[at]=Wt[at][0];tn(Wt=cn);break;case 2:for(at=0;at<Wt.length;at++)tn(Wt[at]);break;case 3:for(Wt=function(wn){var xn=wn.length;if(xn<=1)return[wn];for(var On,Un,nr=[],hr=0;hr<xn;hr++){var tr=VS(wn[hr]);tr!==0&&(Un===void 0&&(Un=tr<0),Un===tr<0?(On&&nr.push(On),On=[wn[hr]]):On.push(wn[hr]))}return On&&nr.push(On),nr}(Wt),at=0;at<Wt.length;at++)for(ut=0;ut<Wt[at].length;ut++)tn(Wt[at][ut])}Wt.length===1?Wt=Wt[0]:Zt="Multi"+Zt;var fn={type:"Feature",geometry:{type:Zt,coordinates:Wt},properties:this.properties};return"id"in this&&(fn.id=this.id),fn};var WS=mx,yx=_x;function _x(nt,_e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=nt,this._keys=[],this._values=[],this._features=[],nt.readFields(GS,this,_e),this.length=this._features.length}function GS(nt,_e,rt){nt===15?_e.version=rt.readVarint():nt===1?_e.name=rt.readString():nt===5?_e.extent=rt.readVarint():nt===2?_e._features.push(rt.pos):nt===3?_e._keys.push(rt.readString()):nt===4&&_e._values.push(function(at){for(var ut=null,_t=at.readVarint()+at.pos;at.pos<_t;){var At=at.readVarint()>>3;ut=At===1?at.readString():At===2?at.readFloat():At===3?at.readDouble():At===4?at.readVarint64():At===5?at.readVarint():At===6?at.readSVarint():At===7?at.readBoolean():null}return ut}(rt))}_x.prototype.feature=function(nt){if(nt<0||nt>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[nt];var _e=this._pbf.readVarint()+this._pbf.pos;return new WS(this._pbf,_e,this.extent,this._keys,this._values)};var HS=yx;function $S(nt,_e,rt){if(nt===3){var at=new HS(rt,rt.readVarint()+rt.pos);at.length&&(_e[at.name]=at)}}var ow=Z0.VectorTile=function(nt,_e){this.layers=nt.readFields($S,{},_e)},K0=Z0.VectorTileFeature=mx;function X0(nt,_e,rt,at){const ut=[],_t=at===0?(At,Dt,Wt,Zt,tn,cn)=>{At.push(new mt(cn,Wt+(cn-Dt)/(Zt-Dt)*(tn-Wt)))}:(At,Dt,Wt,Zt,tn,cn)=>{At.push(new mt(Dt+(cn-Wt)/(tn-Wt)*(Zt-Dt),cn))};for(const At of nt){const Dt=[];for(const Wt of At){if(Wt.length<=2)continue;const Zt=[];for(let fn=0;fn<Wt.length-1;fn++){const wn=Wt[fn].x,xn=Wt[fn].y,On=Wt[fn+1].x,Un=Wt[fn+1].y,nr=at===0?wn:xn,hr=at===0?On:Un;nr<_e?hr>_e&&_t(Zt,wn,xn,On,Un,_e):nr>rt?hr<rt&&_t(Zt,wn,xn,On,Un,rt):Zt.push(Wt[fn]),hr<_e&&nr>=_e&&_t(Zt,wn,xn,On,Un,_e),hr>rt&&nr<=rt&&_t(Zt,wn,xn,On,Un,rt)}let tn=Wt[Wt.length-1];const cn=at===0?tn.x:tn.y;cn>=_e&&cn<=rt&&Zt.push(tn),Zt.length&&(tn=Zt[Zt.length-1],Zt[0].x===tn.x&&Zt[0].y===tn.y||Zt.push(Zt[0]),Dt.push(Zt))}Dt.length&&ut.push(Dt)}return ut}Z0.VectorTileLayer=yx;const qS=K0.types,Q0=Math.pow(2,13);function $v(nt,_e,rt,at,ut,_t,At,Dt){nt.emplaceBack((_e<<1)+At,(rt<<1)+_t,(Math.floor(at*Q0)<<1)+ut,Math.round(Dt))}function z_(nt,_e,rt){nt.emplaceBack(_e.x,_e.y,_e.z,rt[0]*16384,rt[1]*16384,rt[2]*16384)}class sw{constructor(){this.acc=new mt(0,0),this.polyCount=[]}startRing(_e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new mt(_e.x,_e.y),this.max=new mt(_e.x,_e.y))}append(_e,rt){this.currentPolyCount.edges++,this.acc._add(_e);const at=this.min,ut=this.max;_e.x<at.x?at.x=_e.x:_e.x>ut.x&&(ut.x=_e.x),_e.y<at.y?at.y=_e.y:_e.y>ut.y&&(ut.y=_e.y),((_e.x===0||_e.x===Zo)&&_e.x===rt.x)!=((_e.y===0||_e.y===Zo)&&_e.y===rt.y)&&this.processBorderOverlap(_e,rt),rt.x<0!=_e.x<0&&this.addBorderIntersection(0,Ts(rt.y,_e.y,(0-rt.x)/(_e.x-rt.x))),rt.x>Zo!=_e.x>Zo&&this.addBorderIntersection(1,Ts(rt.y,_e.y,(Zo-rt.x)/(_e.x-rt.x))),rt.y<0!=_e.y<0&&this.addBorderIntersection(2,Ts(rt.x,_e.x,(0-rt.y)/(_e.y-rt.y))),rt.y>Zo!=_e.y>Zo&&this.addBorderIntersection(3,Ts(rt.x,_e.x,(Zo-rt.y)/(_e.y-rt.y)))}addBorderIntersection(_e,rt){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const at=this.borders[_e];rt<at[0]&&(at[0]=rt),rt>at[1]&&(at[1]=rt)}processBorderOverlap(_e,rt){if(_e.x===rt.x){if(_e.y===rt.y)return;const at=_e.x===0?0:1;this.addBorderIntersection(at,rt.y),this.addBorderIntersection(at,_e.y)}else{const at=_e.y===0?2:3;this.addBorderIntersection(at,rt.x),this.addBorderIntersection(at,_e.x)}}centroid(){const _e=this.polyCount.reduce((rt,at)=>rt+at.edges,0);return _e!==0?this.acc.div(_e)._round():new mt(0,0)}span(){return new mt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((_e,rt)=>_e+ +(rt[0]!==Number.MAX_VALUE),0)}}class qy{constructor(_e){this.zoom=_e.zoom,this.canonical=_e.canonical,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=_e.projection,this.layoutVertexArray=new Vs,this.centroidVertexArray=new C0,this.indexArray=new Jl,this.programConfigurations=new Op(_e.layers,_e.zoom),this.segments=new zl,this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id),this.enableTerrain=_e.enableTerrain}populate(_e,rt,at,ut){this.features=[],this.hasPattern=rw("fill-extrusion",this.layers,rt),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(_t){const At=Math.exp(Math.PI*(1-_t.y/(1<<_t.z)*2));return 80150034*At/(At*At+1)/Zo/(1<<_t.z)}(at),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:_t,id:At,index:Dt,sourceLayerIndex:Wt}of _e){const Zt=this.layers[0]._featureFilter.needGeometry,tn=Wy(_t,Zt);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),tn,at))continue;const cn={id:At,sourceLayerIndex:Wt,index:Dt,geometry:Zt?tn.geometry:Lu(_t,at,ut),properties:_t.properties,type:_t.type,patterns:{}},fn=this.layoutVertexArray.length;this.hasPattern?this.features.push(iw("fill-extrusion",this.layers,cn,this.zoom,rt)):this.addFeature(cn,cn.geometry,Dt,at,{},rt.availableImages,ut),rt.featureIndex.insert(_t,cn.geometry,Dt,Wt,this.index,fn)}this.sortBorders()}addFeatures(_e,rt,at,ut,_t){for(const At of this.features){const{geometry:Dt}=At;this.addFeature(At,Dt,At.index,rt,at,ut,_t)}this.sortBorders()}update(_e,rt,at,ut){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ut)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,px),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=_e.createVertexBuffer(this.layoutVertexExtArray,gx.members,!0))),this.programConfigurations.upload(_e),this.uploaded=!0}uploadCentroid(_e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=_e.createVertexBuffer(this.centroidVertexArray,US.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(_e,rt,at,ut,_t,At,Dt){const Wt=[new mt(0,0),new mt(Zo,Zo)],Zt=Dt.projection,tn=Zt.name==="globe",cn=this.enableTerrain&&!tn?new sw:null,fn=qS[_e.type]==="Polygon";tn&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new fp);const wn=nw(rt,500);for(let nr=wn.length-1;nr>=0;nr--){const hr=wn[nr];(hr.length===0||(xn=hr[0]).every(tr=>tr.x<=0)||xn.every(tr=>tr.x>=Zo)||xn.every(tr=>tr.y<=0)||xn.every(tr=>tr.y>=Zo))&&wn.splice(nr,1)}var xn;let On;if(tn)On=qv(wn,Wt,ut);else{On=[];for(const nr of wn)On.push({polygon:nr,bounds:Wt})}const Un=fn?this.edgeRadius:0;for(const{polygon:nr,bounds:hr}of On){let tr=0,sr=0;for(const ar of nr)fn&&!ar[0].equals(ar[ar.length-1])&&ar.push(ar[0]),sr+=fn?ar.length-1:ar.length;const mr=this.segments.prepareSegment((fn?5:4)*sr,this.layoutVertexArray,this.indexArray);if(fn){const ar=[],Br=[];tr=mr.vertexLength;for(const Jr of nr){let ho,Ur;Jr.length&&Jr!==nr[0]&&Br.push(ar.length/2),ho=Jr[1].sub(Jr[0])._perp()._unit();for(let no=1;no<Jr.length;no++){const oo=Jr[no],lo=Jr[no===Jr.length-1?1:no+1];let{x:go,y:Vr}=oo;if(Un){Ur=lo.sub(oo)._perp()._unit();const So=ho.add(Ur)._unit(),$o=Un*Math.min(4,1/(ho.x*So.x+ho.y*So.y));go+=$o*So.x,Vr+=$o*So.y,ho=Ur}$v(this.layoutVertexArray,go,Vr,0,0,1,1,0),mr.vertexLength++,ar.push(oo.x,oo.y),tn&&z_(this.layoutVertexExtArray,Zt.projectTilePoint(go,Vr,ut),Zt.upVector(ut,go,Vr))}}const kr=zv.exports(ar,Br);for(let Jr=0;Jr<kr.length;Jr+=3)this.indexArray.emplaceBack(tr+kr[Jr],tr+kr[Jr+2],tr+kr[Jr+1]),mr.primitiveLength++}for(const ar of nr){cn&&ar.length&&cn.startRing(ar[0]);let Br,kr,Jr,ho=ar.length>4&&bx(ar[ar.length-2],ar[0],ar[1]),Ur=Un?vx(ar[ar.length-2],ar[0],ar[1],Un):0;kr=ar[1].sub(ar[0])._perp()._unit();let no=!0;for(let oo=1,lo=0;oo<ar.length;oo++){let go=ar[oo-1],Vr=ar[oo];const So=ar[oo===ar.length-1?1:oo+1];if(cn&&fn&&cn.currentPolyCount.top++,uw(Vr,go,hr)){Un&&(kr=So.sub(Vr)._perp()._unit(),no=!no);continue}cn&&cn.append(Vr,go);const $o=Vr.sub(go)._perp(),To=$o.x/(Math.abs($o.x)+Math.abs($o.y)),Fo=$o.y>0?1:0,Ao=go.dist(Vr);if(lo+Ao>32768&&(lo=0),Un){Jr=So.sub(Vr)._perp()._unit();let ks=lw(go,Vr,So,aw(kr,Jr),Un);isNaN(ks)&&(ks=0);const ss=Vr.sub(go)._unit();go=go.add(ss.mult(Ur))._round(),Vr=Vr.add(ss.mult(-ks))._round(),Ur=ks,kr=Jr}const Yo=mr.vertexLength,ls=ar.length>4&&bx(go,Vr,So);let fs=wx(lo,ho,no);if($v(this.layoutVertexArray,go.x,go.y,To,Fo,0,0,fs),$v(this.layoutVertexArray,go.x,go.y,To,Fo,0,1,fs),lo+=Ao,fs=wx(lo,ls,!no),ho=ls,$v(this.layoutVertexArray,Vr.x,Vr.y,To,Fo,0,0,fs),$v(this.layoutVertexArray,Vr.x,Vr.y,To,Fo,0,1,fs),mr.vertexLength+=4,this.indexArray.emplaceBack(Yo+0,Yo+1,Yo+2),this.indexArray.emplaceBack(Yo+1,Yo+3,Yo+2),mr.primitiveLength+=2,Un){const ks=tr+(oo===1?ar.length-2:oo-2),ss=oo===1?tr:ks+1;if(this.indexArray.emplaceBack(Yo+1,ks,Yo+3),this.indexArray.emplaceBack(ks,ss,Yo+3),mr.primitiveLength+=2,Br===void 0&&(Br=Yo),!uw(So,ar[oo],hr)){const xl=oo===ar.length-1?Br:mr.vertexLength;this.indexArray.emplaceBack(Yo+2,Yo+3,xl),this.indexArray.emplaceBack(Yo+3,xl+1,xl),this.indexArray.emplaceBack(Yo+3,ss,xl+1),mr.primitiveLength+=3}no=!no}if(tn){const ks=this.layoutVertexExtArray,ss=Zt.projectTilePoint(go.x,go.y,ut),xl=Zt.projectTilePoint(Vr.x,Vr.y,ut),vs=Zt.upVector(ut,go.x,go.y),Es=Zt.upVector(ut,Vr.x,Vr.y);z_(ks,ss,vs),z_(ks,ss,vs),z_(ks,xl,Es),z_(ks,xl,Es)}}fn&&(tr+=ar.length-1)}}if(cn&&cn.polyCount.length>0){if(cn.borders){cn.vertexArrayOffset=this.centroidVertexArray.length;const nr=cn.borders,hr=this.featuresOnBorder.push(cn)-1;for(let tr=0;tr<4;tr++)nr[tr][0]!==Number.MAX_VALUE&&this.borders[tr].push(hr)}this.encodeCentroid(cn.borders?void 0:cn.centroid(),cn)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,_t,At,ut)}sortBorders(){for(let _e=0;_e<4;_e++)this.borders[_e].sort((rt,at)=>this.featuresOnBorder[rt].borders[_e][0]-this.featuresOnBorder[at].borders[_e][0])}encodeCentroid(_e,rt,at=!0){let ut,_t;if(_e)if(_e.y!==0){const Dt=rt.span()._mult(this.tileToMeter);ut=(Math.max(_e.x,1)<<3)+Math.min(7,Math.round(Dt.x/10)),_t=(Math.max(_e.y,1)<<3)+Math.min(7,Math.round(Dt.y/10))}else ut=Math.ceil(7*(_e.x+450)),_t=0;else ut=0,_t=+at;let At=at?this.centroidVertexArray.length:rt.vertexArrayOffset;for(const Dt of rt.polyCount){at&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Dt.edges+Dt.top);for(let Wt=0;Wt<Dt.top;Wt++)this.centroidVertexArray.emplace(At++,ut,_t);for(let Wt=0;Wt<2*Dt.edges;Wt++)this.centroidVertexArray.emplace(At++,0,_t),this.centroidVertexArray.emplace(At++,ut,_t)}}}function aw(nt,_e){const rt=nt.add(_e)._unit();return nt.x*rt.x+nt.y*rt.y}function vx(nt,_e,rt,at){const ut=_e.sub(nt)._perp()._unit(),_t=rt.sub(_e)._perp()._unit();return lw(nt,_e,rt,aw(ut,_t),at)}function lw(nt,_e,rt,at,ut){const _t=Math.sqrt(1-at*at);return Math.min(nt.dist(_e)/3,_e.dist(rt)/3,ut*_t/at)}function uw(nt,_e,rt){return nt.x<rt[0].x&&_e.x<rt[0].x||nt.x>rt[1].x&&_e.x>rt[1].x||nt.y<rt[0].y&&_e.y<rt[0].y||nt.y>rt[1].y&&_e.y>rt[1].y}function bx(nt,_e,rt){if(nt.x<0||nt.x>=Zo||_e.x<0||_e.x>=Zo||rt.x<0||rt.x>=Zo)return!1;const at=rt.sub(_e),ut=at.perp(),_t=nt.sub(_e);return(at.x*_t.x+at.y*_t.y)/Math.sqrt((at.x*at.x+at.y*at.y)*(_t.x*_t.x+_t.y*_t.y))>-.866&&ut.x*_t.x+ut.y*_t.y<0}function wx(nt,_e,rt){const at=_e?2|nt:-3&nt;return rt?1|at:-2&at}function xx(){const nt=Math.PI/32,_e=Math.tan(nt),rt=Dv;return rt*Math.sqrt(1+2*_e*_e)-rt}function qv(nt,_e,rt){const at=1<<rt.z,ut=gp(rt.x/at),_t=gp((rt.x+1)/at),At=eu(rt.y/at),Dt=eu((rt.y+1)/at);return function(Wt,Zt,tn,cn,fn=0,wn){const xn=[];if(!Wt.length||!tn||!cn)return xn;const On=(ar,Br)=>{for(const kr of ar)xn.push({polygon:kr,bounds:Br})},Un=Math.ceil(Math.log2(tn)),nr=Math.ceil(Math.log2(cn)),hr=Un-nr,tr=[];for(let ar=0;ar<Math.abs(hr);ar++)tr.push(hr>0?0:1);for(let ar=0;ar<Math.min(Un,nr);ar++)tr.push(0),tr.push(1);let sr=Wt;if(sr=X0(sr,Zt[0].y-fn,Zt[1].y+fn,1),sr=X0(sr,Zt[0].x-fn,Zt[1].x+fn,0),!sr.length)return xn;const mr=[];for(tr.length?mr.push({polygons:sr,bounds:Zt,depth:0}):On(sr,Zt);mr.length;){const ar=mr.pop(),Br=ar.depth,kr=tr[Br],Jr=ar.bounds[0],ho=ar.bounds[1],Ur=kr===0?Jr.x:Jr.y,no=kr===0?ho.x:ho.y,oo=wn?wn(kr,Ur,no):.5*(Ur+no),lo=X0(ar.polygons,Ur-fn,oo+fn,kr),go=X0(ar.polygons,oo-fn,no+fn,kr);if(lo.length){const Vr=[Jr,new mt(kr===0?oo:ho.x,kr===1?oo:ho.y)];tr.length>Br+1?mr.push({polygons:lo,bounds:Vr,depth:Br+1}):On(lo,Vr)}if(go.length){const Vr=[new mt(kr===0?oo:Jr.x,kr===1?oo:Jr.y),ho];tr.length>Br+1?mr.push({polygons:go,bounds:Vr,depth:Br+1}):On(go,Vr)}}return xn}(nt,_e,Math.ceil((_t-ut)/11.25),Math.ceil((At-Dt)/11.25),1,(Wt,Zt,tn)=>{if(Wt===0)return .5*(Zt+tn);{const cn=eu((rt.y+Zt/Zo)/at);return(Kp(.5*(eu((rt.y+tn/Zo)/at)+cn))*at-rt.y)*Zo}})}Oo(qy,"FillExtrusionBucket",{omit:["layers","features"]}),Oo(sw,"PartMetadata");const J0=new yo({"fill-extrusion-edge-radius":new Or($r["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ZS={paint:new yo({"fill-extrusion-opacity":new Or($r["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new br($r["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Or($r["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Or($r["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xo($r["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new br($r["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new br($r["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Or($r["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Or($r["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Or($r["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:J0};function Sx(nt,_e,rt){var at=2*Math.PI*6378137/256/Math.pow(2,rt);return[nt*at-2*Math.PI*6378137/2,_e*at-2*Math.PI*6378137/2]}class V_{constructor(_e,rt,at){this.z=_e,this.x=rt,this.y=at,this.key=Zv(0,_e,_e,rt,at)}equals(_e){return this.z===_e.z&&this.x===_e.x&&this.y===_e.y}url(_e,rt){const at=function(_t,At,Dt){var Wt=Sx(256*_t,256*(At=Math.pow(2,Dt)-At-1),Dt),Zt=Sx(256*(_t+1),256*(At+1),Dt);return Wt[0]+","+Wt[1]+","+Zt[0]+","+Zt[1]}(this.x,this.y,this.z),ut=function(_t,At,Dt){let Wt,Zt="";for(let tn=_t;tn>0;tn--)Wt=1<<tn-1,Zt+=(At&Wt?1:0)+(Dt&Wt?2:0);return Zt}(this.z,this.x,this.y);return _e[(this.x+this.y)%_e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(rt==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ut).replace("{bbox-epsg-3857}",at)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cw{constructor(_e,rt){this.wrap=_e,this.canonical=rt,this.key=Zv(_e,rt.z,rt.z,rt.x,rt.y)}}class Mu{constructor(_e,rt,at,ut,_t){this.overscaledZ=_e,this.wrap=rt,this.canonical=new V_(at,+ut,+_t),this.key=rt===0&&_e===at?this.canonical.key:Zv(rt,_e,at,ut,_t)}equals(_e){return this.overscaledZ===_e.overscaledZ&&this.wrap===_e.wrap&&this.canonical.equals(_e.canonical)}scaledTo(_e){const rt=this.canonical.z-_e;return _e>this.canonical.z?new Mu(_e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mu(_e,this.wrap,_e,this.canonical.x>>rt,this.canonical.y>>rt)}calculateScaledKey(_e,rt=!0){if(this.overscaledZ===_e&&rt)return this.key;if(_e>this.canonical.z)return Zv(this.wrap*+rt,_e,this.canonical.z,this.canonical.x,this.canonical.y);{const at=this.canonical.z-_e;return Zv(this.wrap*+rt,_e,_e,this.canonical.x>>at,this.canonical.y>>at)}}isChildOf(_e){if(_e.wrap!==this.wrap)return!1;const rt=this.canonical.z-_e.canonical.z;return _e.overscaledZ===0||_e.overscaledZ<this.overscaledZ&&_e.canonical.x===this.canonical.x>>rt&&_e.canonical.y===this.canonical.y>>rt}children(_e){if(this.overscaledZ>=_e)return[new Mu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const rt=this.canonical.z+1,at=2*this.canonical.x,ut=2*this.canonical.y;return[new Mu(rt,this.wrap,rt,at,ut),new Mu(rt,this.wrap,rt,at+1,ut),new Mu(rt,this.wrap,rt,at,ut+1),new Mu(rt,this.wrap,rt,at+1,ut+1)]}isLessThan(_e){return this.wrap<_e.wrap||!(this.wrap>_e.wrap)&&(this.overscaledZ<_e.overscaledZ||!(this.overscaledZ>_e.overscaledZ)&&(this.canonical.x<_e.canonical.x||!(this.canonical.x>_e.canonical.x)&&this.canonical.y<_e.canonical.y))}wrapped(){return new Mu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(_e){return new Mu(this.overscaledZ,_e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Zv(nt,_e,rt,at,ut){const _t=1<<Math.min(rt,22);let At=_t*(ut%_t)+at%_t;return nt&&rt<22&&(At+=_t*_t*((nt<0?-2*nt-1:2*nt)%(1<<2*(22-rt)))),16*(32*At+rt)+(_e-rt)}Oo(V_,"CanonicalTileID"),Oo(Mu,"OverscaledTileID",{omit:["projMatrix"]});class W_ extends mt{constructor(_e,rt,at){super(_e,rt),this.z=at}}function Yv(nt,_e){return nt.x*_e.x+nt.y*_e.y}function Ax(nt,_e){if(nt.length===1){let rt=0;const at=_e[rt++];let ut;for(;!ut||at.equals(ut);)if(ut=_e[rt++],!ut)return 1/0;for(;rt<_e.length;rt++){const _t=_e[rt],At=nt[0],Dt=ut.sub(at),Wt=_t.sub(at),Zt=At.sub(at),tn=Yv(Dt,Dt),cn=Yv(Dt,Wt),fn=Yv(Wt,Wt),wn=Yv(Zt,Dt),xn=Yv(Zt,Wt),On=tn*fn-cn*cn,Un=(fn*wn-cn*xn)/On,nr=(tn*xn-cn*wn)/On,hr=at.z*(1-Un-nr)+ut.z*Un+_t.z*nr;if(isFinite(hr))return hr}return 1/0}{let rt=1/0;for(const at of _e)rt=Math.min(rt,at.z);return rt}}function Ex(nt,_e,rt,at,ut,_t,At,Dt){const Wt=At*ut.getElevationAt(nt,_e,!0,!0),Zt=_t[0]!==0,tn=Zt?_t[1]===0?At*(_t[0]/7-450):At*function(cn,fn,wn){const xn=Math.floor(fn[0]/8),On=Math.floor(fn[1]/8),Un=10*(fn[0]-8*xn),nr=10*(fn[1]-8*On),hr=cn.getElevationAt(xn,On,!0,!0),tr=cn.getMeterToDEM(wn),sr=Math.floor(.5*(Un*tr-1)),mr=Math.floor(.5*(nr*tr-1)),ar=cn.tileCoordToPixel(xn,On),Br=2*sr+1,kr=2*mr+1,Jr=function(go,Vr,So,$o,To){return[go.getElevationAtPixel(Vr,So,!0),go.getElevationAtPixel(Vr+To,So,!0),go.getElevationAtPixel(Vr,So+To,!0),go.getElevationAtPixel(Vr+$o,So+To,!0)]}(cn,ar.x-sr,ar.y-mr,Br,kr),ho=Math.abs(Jr[0]-Jr[1]),Ur=Math.abs(Jr[2]-Jr[3]),no=Math.abs(Jr[0]-Jr[2])+Math.abs(Jr[1]-Jr[3]),oo=Math.min(.25,.5*tr*(ho+Ur)/Br),lo=Math.min(.25,.5*tr*no/kr);return hr+Math.max(oo*Un,lo*nr)}(ut,_t,Dt):Wt;return{base:Wt+(rt===0)?-1:rt,top:Zt?Math.max(tn+at,Wt+rt+2):Wt+at}}const YS=_o([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:KS}=YS,XS=_o([{name:"a_packed",components:4,type:"Float32"}]),{members:QS}=XS,JS=K0.types,eA=Math.cos(Math.PI/180*37.5);class _h{constructor(_e){this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.projection=_e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(rt=>{this.gradients[rt.id]={}}),this.layoutVertexArray=new Ds,this.layoutVertexArray2=new Ul,this.indexArray=new Jl,this.programConfigurations=new Op(_e.layers,_e.zoom),this.segments=new zl,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id)}populate(_e,rt,at,ut){this.hasPattern=rw("line",this.layers,rt);const _t=this.layers[0].layout.get("line-sort-key"),At=[];for(const{feature:tn,id:cn,index:fn,sourceLayerIndex:wn}of _e){const xn=this.layers[0]._featureFilter.needGeometry,On=Wy(tn,xn);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),On,at))continue;const Un=_t?_t.evaluate(On,{},at):void 0,nr={id:cn,properties:tn.properties,type:tn.type,sourceLayerIndex:wn,index:fn,geometry:xn?On.geometry:Lu(tn,at,ut),patterns:{},sortKey:Un};At.push(nr)}_t&&At.sort((tn,cn)=>tn.sortKey-cn.sortKey);const{lineAtlas:Dt,featureIndex:Wt}=rt,Zt=this.addConstantDashes(Dt);for(const tn of At){const{geometry:cn,index:fn,sourceLayerIndex:wn}=tn;if(Zt&&this.addFeatureDashes(tn,Dt),this.hasPattern){const xn=iw("line",this.layers,tn,this.zoom,rt);this.patternFeatures.push(xn)}else this.addFeature(tn,cn,fn,at,Dt.positions,rt.availableImages);Wt.insert(_e[fn].feature,cn,fn,wn,this.index)}}addConstantDashes(_e){let rt=!1;for(const at of this.layers){const ut=at.paint.get("line-dasharray").value,_t=at.layout.get("line-cap").value;if(ut.kind!=="constant"||_t.kind!=="constant")rt=!0;else{const At=_t.value,Dt=ut.value;if(!Dt)continue;_e.addDash(Dt.from,At),_e.addDash(Dt.to,At),Dt.other&&_e.addDash(Dt.other,At)}}return rt}addFeatureDashes(_e,rt){const at=this.zoom;for(const ut of this.layers){const _t=ut.paint.get("line-dasharray").value,At=ut.layout.get("line-cap").value;if(_t.kind==="constant"&&At.kind==="constant")continue;let Dt,Wt,Zt,tn,cn,fn;if(_t.kind==="constant"){const Un=_t.value;if(!Un)continue;Dt=Un.other||Un.to,Wt=Un.to,Zt=Un.from}else Dt=_t.evaluate({zoom:at-1},_e),Wt=_t.evaluate({zoom:at},_e),Zt=_t.evaluate({zoom:at+1},_e);At.kind==="constant"?tn=cn=fn=At.value:(tn=At.evaluate({zoom:at-1},_e),cn=At.evaluate({zoom:at},_e),fn=At.evaluate({zoom:at+1},_e)),rt.addDash(Dt,tn),rt.addDash(Wt,cn),rt.addDash(Zt,fn);const wn=rt.getKey(Dt,tn),xn=rt.getKey(Wt,cn),On=rt.getKey(Zt,fn);_e.patterns[ut.id]={min:wn,mid:xn,max:On}}}update(_e,rt,at,ut){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ut)}addFeatures(_e,rt,at,ut,_t){for(const At of this.patternFeatures)this.addFeature(At,At.geometry,At.index,rt,at,ut)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=_e.createVertexBuffer(this.layoutVertexArray2,QS)),this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,KS),this.indexBuffer=_e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(_e){if(_e.properties&&_e.properties.hasOwnProperty("mapbox_clip_start")&&_e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+_e.properties.mapbox_clip_start,end:+_e.properties.mapbox_clip_end}}addFeature(_e,rt,at,ut,_t,At){const Dt=this.layers[0].layout,Wt=Dt.get("line-join").evaluate(_e,{}),Zt=Dt.get("line-cap").evaluate(_e,{}),tn=Dt.get("line-miter-limit"),cn=Dt.get("line-round-limit");this.lineClips=this.lineFeatureClips(_e);for(const fn of rt)this.addLine(fn,_e,Wt,Zt,tn,cn);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,_t,At,ut)}addLine(_e,rt,at,ut,_t,At){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let nr=0;nr<_e.length-1;nr++)this.totalDistance+=_e[nr].dist(_e[nr+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Dt=JS[rt.type]==="Polygon";let Wt=_e.length;for(;Wt>=2&&_e[Wt-1].equals(_e[Wt-2]);)Wt--;let Zt=0;for(;Zt<Wt-1&&_e[Zt].equals(_e[Zt+1]);)Zt++;if(Wt<(Dt?3:2))return;at==="bevel"&&(_t=1.05);const tn=this.overscaling<=16?122880/(512*this.overscaling):0,cn=this.segments.prepareSegment(10*Wt,this.layoutVertexArray,this.indexArray);let fn,wn,xn,On,Un;this.e1=this.e2=-1,Dt&&(fn=_e[Wt-2],Un=_e[Zt].sub(fn)._unit()._perp());for(let nr=Zt;nr<Wt;nr++){if(xn=nr===Wt-1?Dt?_e[Zt+1]:void 0:_e[nr+1],xn&&_e[nr].equals(xn))continue;Un&&(On=Un),fn&&(wn=fn),fn=_e[nr],Un=xn?xn.sub(fn)._unit()._perp():On,On=On||Un;let hr=On.add(Un);hr.x===0&&hr.y===0||hr._unit();const tr=On.x*Un.x+On.y*Un.y,sr=hr.x*Un.x+hr.y*Un.y,mr=sr!==0?1/sr:1/0,ar=2*Math.sqrt(2-2*sr),Br=sr<eA&&wn&&xn,kr=On.x*Un.y-On.y*Un.x>0;if(Br&&nr>Zt){const Ur=fn.dist(wn);if(Ur>2*tn){const no=fn.sub(fn.sub(wn)._mult(tn/Ur)._round());this.updateDistance(wn,no),this.addCurrentVertex(no,On,0,0,cn),wn=no}}const Jr=wn&&xn;let ho=Jr?at:Dt?"butt":ut;if(Jr&&ho==="round"&&(mr<At?ho="miter":mr<=2&&(ho="fakeround")),ho==="miter"&&mr>_t&&(ho="bevel"),ho==="bevel"&&(mr>2&&(ho="flipbevel"),mr<_t&&(ho="miter")),wn&&this.updateDistance(wn,fn),ho==="miter")hr._mult(mr),this.addCurrentVertex(fn,hr,0,0,cn);else if(ho==="flipbevel"){if(mr>100)hr=Un.mult(-1);else{const Ur=mr*On.add(Un).mag()/On.sub(Un).mag();hr._perp()._mult(Ur*(kr?-1:1))}this.addCurrentVertex(fn,hr,0,0,cn),this.addCurrentVertex(fn,hr.mult(-1),0,0,cn)}else if(ho==="bevel"||ho==="fakeround"){const Ur=-Math.sqrt(mr*mr-1),no=kr?Ur:0,oo=kr?0:Ur;if(wn&&this.addCurrentVertex(fn,On,no,oo,cn),ho==="fakeround"){const lo=Math.round(180*ar/Math.PI/20);for(let go=1;go<lo;go++){let Vr=go/lo;if(Vr!==.5){const $o=Vr-.5;Vr+=Vr*$o*(Vr-1)*((1.0904+tr*(tr*(3.55645-1.43519*tr)-3.2452))*$o*$o+(.848013+tr*(.215638*tr-1.06021)))}const So=Un.sub(On)._mult(Vr)._add(On)._unit()._mult(kr?-1:1);this.addHalfVertex(fn,So.x,So.y,!1,kr,0,cn)}}xn&&this.addCurrentVertex(fn,Un,-no,-oo,cn)}else if(ho==="butt")this.addCurrentVertex(fn,hr,0,0,cn);else if(ho==="square"){const Ur=wn?1:-1;wn||this.addCurrentVertex(fn,hr,Ur,Ur,cn),this.addCurrentVertex(fn,hr,0,0,cn),wn&&this.addCurrentVertex(fn,hr,Ur,Ur,cn)}else ho==="round"&&(wn&&(this.addCurrentVertex(fn,On,0,0,cn),this.addCurrentVertex(fn,On,1,1,cn,!0)),xn&&(this.addCurrentVertex(fn,Un,-1,-1,cn,!0),this.addCurrentVertex(fn,Un,0,0,cn)));if(Br&&nr<Wt-1){const Ur=fn.dist(xn);if(Ur>2*tn){const no=fn.add(xn.sub(fn)._mult(tn/Ur)._round());this.updateDistance(fn,no),this.addCurrentVertex(no,Un,0,0,cn),fn=no}}}}addCurrentVertex(_e,rt,at,ut,_t,At=!1){const Dt=rt.y*ut-rt.x,Wt=-rt.y-rt.x*ut;this.addHalfVertex(_e,rt.x+rt.y*at,rt.y-rt.x*at,At,!1,at,_t),this.addHalfVertex(_e,Dt,Wt,At,!0,-ut,_t)}addHalfVertex({x:_e,y:rt},at,ut,_t,At,Dt,Wt){this.layoutVertexArray.emplaceBack((_e<<1)+(_t?1:0),(rt<<1)+(At?1:0),Math.round(63*at)+128,Math.round(63*ut)+128,1+(Dt===0?0:Dt<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const Zt=Wt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Zt),Wt.primitiveLength++),At?this.e2=Zt:this.e1=Zt}updateScaledDistance(){if(this.lineClips){const _e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=_e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(_e,rt){this.distance+=_e.dist(rt),this.updateScaledDistance()}}Oo(_h,"LineBucket",{omit:["layers","patternFeatures"]});const tA=new yo({"line-cap":new br($r.layout_line["line-cap"]),"line-join":new br($r.layout_line["line-join"]),"line-miter-limit":new Or($r.layout_line["line-miter-limit"]),"line-round-limit":new Or($r.layout_line["line-round-limit"]),"line-sort-key":new br($r.layout_line["line-sort-key"])});var Tx={paint:new yo({"line-opacity":new br($r.paint_line["line-opacity"]),"line-color":new br($r.paint_line["line-color"]),"line-translate":new Or($r.paint_line["line-translate"]),"line-translate-anchor":new Or($r.paint_line["line-translate-anchor"]),"line-width":new br($r.paint_line["line-width"]),"line-gap-width":new br($r.paint_line["line-gap-width"]),"line-offset":new br($r.paint_line["line-offset"]),"line-blur":new br($r.paint_line["line-blur"]),"line-dasharray":new xo($r.paint_line["line-dasharray"]),"line-pattern":new xo($r.paint_line["line-pattern"]),"line-gradient":new vo($r.paint_line["line-gradient"]),"line-trim-offset":new Or($r.paint_line["line-trim-offset"])}),layout:tA};const yy=new class extends br{possiblyEvaluate(nt,_e){return _e=new er(Math.floor(_e.zoom),{now:_e.now,fadeDuration:_e.fadeDuration,zoomHistory:_e.zoomHistory,transition:_e.transition}),super.possiblyEvaluate(nt,_e)}evaluate(nt,_e,rt,at){return _e=wt({},_e,{zoom:Math.floor(_e.zoom)}),super.evaluate(nt,_e,rt,at)}}(Tx.paint.properties["line-width"].specification);function ws(nt,_e){return _e>0?_e+2*nt:nt}yy.useIntegerZoom=!0;const nA=_o([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_f=_o([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Yl=_o([{name:"a_projected_pos",components:4,type:"Float32"}],4);_o([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rA=_o([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_y=_o([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);_o([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Cx=_o([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iA=_o([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);_o([{name:"triangle",components:3,type:"Uint16"}]),_o([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),_o([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_o([{type:"Float32",name:"offsetX"}]),_o([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var uu=24;const wm=128;function hw(nt,_e){const{expression:rt}=_e;if(rt.kind==="constant")return{kind:"constant",layoutSize:rt.evaluate(new er(nt+1))};if(rt.kind==="source")return{kind:"source"};{const{zoomStops:at,interpolationType:ut}=rt;let _t=0;for(;_t<at.length&&at[_t]<=nt;)_t++;_t=Math.max(0,_t-1);let At=_t;for(;At<at.length&&at[At]<nt+1;)At++;At=Math.min(at.length-1,At);const Dt=at[_t],Wt=at[At];return rt.kind==="composite"?{kind:"composite",minZoom:Dt,maxZoom:Wt,interpolationType:ut}:{kind:"camera",minZoom:Dt,maxZoom:Wt,minSize:rt.evaluate(new er(Dt)),maxSize:rt.evaluate(new er(Wt)),interpolationType:ut}}}function G_(nt,{uSize:_e,uSizeT:rt},{lowerSize:at,upperSize:ut}){return nt.kind==="source"?at/wm:nt.kind==="composite"?Ts(at/wm,ut/wm,rt):_e}function H_(nt,_e){let rt=0,at=0;if(nt.kind==="constant")at=nt.layoutSize;else if(nt.kind!=="source"){const{interpolationType:ut,minZoom:_t,maxZoom:At}=nt,Dt=ut?Gt(vp.interpolationFactor(ut,_e,_t,At),0,1):0;nt.kind==="camera"?at=Ts(nt.minSize,nt.maxSize,Dt):rt=Dt}return{uSizeT:rt,uSize:at}}var zm=Object.freeze({__proto__:null,getSizeData:hw,evaluateSizeForFeature:G_,evaluateSizeForZoom:H_,SIZE_PACK_FACTOR:wm});function Rx(nt,_e,rt){return nt.sections.forEach(at=>{at.text=function(ut,_t,At){const Dt=_t.layout.get("text-transform").evaluate(At,{});return Dt==="uppercase"?ut=ut.toLocaleUpperCase():Dt==="lowercase"&&(ut=ut.toLocaleLowerCase()),lr.applyArabicShaping&&(ut=lr.applyArabicShaping(ut)),ut}(at.text,_e,rt)}),nt}const vy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Dl(nt){return nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""}function Wl(nt){return nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""||nt===""}var $_=Zs,Ix=function(nt,_e,rt,at,ut){var _t,At,Dt=8*ut-at-1,Wt=(1<<Dt)-1,Zt=Wt>>1,tn=-7,cn=rt?ut-1:0,fn=rt?-1:1,wn=nt[_e+cn];for(cn+=fn,_t=wn&(1<<-tn)-1,wn>>=-tn,tn+=Dt;tn>0;_t=256*_t+nt[_e+cn],cn+=fn,tn-=8);for(At=_t&(1<<-tn)-1,_t>>=-tn,tn+=at;tn>0;At=256*At+nt[_e+cn],cn+=fn,tn-=8);if(_t===0)_t=1-Zt;else{if(_t===Wt)return At?NaN:1/0*(wn?-1:1);At+=Math.pow(2,at),_t-=Zt}return(wn?-1:1)*At*Math.pow(2,_t-at)},Ox=function(nt,_e,rt,at,ut,_t){var At,Dt,Wt,Zt=8*_t-ut-1,tn=(1<<Zt)-1,cn=tn>>1,fn=ut===23?Math.pow(2,-24)-Math.pow(2,-77):0,wn=at?0:_t-1,xn=at?1:-1,On=_e<0||_e===0&&1/_e<0?1:0;for(_e=Math.abs(_e),isNaN(_e)||_e===1/0?(Dt=isNaN(_e)?1:0,At=tn):(At=Math.floor(Math.log(_e)/Math.LN2),_e*(Wt=Math.pow(2,-At))<1&&(At--,Wt*=2),(_e+=At+cn>=1?fn/Wt:fn*Math.pow(2,1-cn))*Wt>=2&&(At++,Wt/=2),At+cn>=tn?(Dt=0,At=tn):At+cn>=1?(Dt=(_e*Wt-1)*Math.pow(2,ut),At+=cn):(Dt=_e*Math.pow(2,cn-1)*Math.pow(2,ut),At=0));ut>=8;nt[rt+wn]=255&Dt,wn+=xn,Dt/=256,ut-=8);for(At=At<<ut|Dt,Zt+=ut;Zt>0;nt[rt+wn]=255&At,wn+=xn,At/=256,Zt-=8);nt[rt+wn-xn]|=128*On};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Zs(nt){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(nt)?nt:new Uint8Array(nt||0),this.pos=0,this.type=0,this.length=this.buf.length}Zs.Varint=0,Zs.Fixed64=1,Zs.Bytes=2,Zs.Fixed32=5;var fw=4294967296,Mx=1/fw,Px=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function xm(nt){return nt.type===Zs.Bytes?nt.readVarint()+nt.pos:nt.pos+1}function Sm(nt,_e,rt){return rt?4294967296*_e+(nt>>>0):4294967296*(_e>>>0)+(nt>>>0)}function e1(nt,_e,rt){var at=_e<=16383?1:_e<=2097151?2:_e<=268435455?3:Math.floor(Math.log(_e)/(7*Math.LN2));rt.realloc(at);for(var ut=rt.pos-1;ut>=nt;ut--)rt.buf[ut+at]=rt.buf[ut]}function oA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeVarint(nt[rt])}function kx(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeSVarint(nt[rt])}function t1(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeFloat(nt[rt])}function mp(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeDouble(nt[rt])}function q_(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeBoolean(nt[rt])}function sA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeFixed32(nt[rt])}function aA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeSFixed32(nt[rt])}function lA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeFixed64(nt[rt])}function uA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeSFixed64(nt[rt])}function n1(nt,_e){return(nt[_e]|nt[_e+1]<<8|nt[_e+2]<<16)+16777216*nt[_e+3]}function Zy(nt,_e,rt){nt[rt]=_e,nt[rt+1]=_e>>>8,nt[rt+2]=_e>>>16,nt[rt+3]=_e>>>24}function Am(nt,_e){return(nt[_e]|nt[_e+1]<<8|nt[_e+2]<<16)+(nt[_e+3]<<24)}function Cs(nt,_e,rt){_e.glyphs=[],nt===1&&rt.readMessage(Dx,_e)}function Dx(nt,_e,rt){if(nt===3){const{id:at,bitmap:ut,width:_t,height:At,left:Dt,top:Wt,advance:Zt}=rt.readMessage(kp,{});_e.glyphs.push({id:at,bitmap:new Um({width:_t+6,height:At+6},ut),metrics:{width:_t,height:At,left:Dt,top:Wt,advance:Zt}})}else nt===4?_e.ascender=rt.readSVarint():nt===5&&(_e.descender=rt.readSVarint())}function kp(nt,_e,rt){nt===1?_e.id=rt.readVarint():nt===2?_e.bitmap=rt.readBytes():nt===3?_e.width=rt.readVarint():nt===4?_e.height=rt.readVarint():nt===5?_e.left=rt.readSVarint():nt===6?_e.top=rt.readSVarint():nt===7&&(_e.advance=rt.readVarint())}function r1(nt){let _e=0,rt=0;for(const At of nt)_e+=At.w*At.h,rt=Math.max(rt,At.w);nt.sort((At,Dt)=>Dt.h-At.h);const at=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(_e/.95)),rt),h:1/0}];let ut=0,_t=0;for(const At of nt)for(let Dt=at.length-1;Dt>=0;Dt--){const Wt=at[Dt];if(!(At.w>Wt.w||At.h>Wt.h)){if(At.x=Wt.x,At.y=Wt.y,_t=Math.max(_t,At.y+At.h),ut=Math.max(ut,At.x+At.w),At.w===Wt.w&&At.h===Wt.h){const Zt=at.pop();Dt<at.length&&(at[Dt]=Zt)}else At.h===Wt.h?(Wt.x+=At.w,Wt.w-=At.w):At.w===Wt.w?(Wt.y+=At.h,Wt.h-=At.h):(at.push({x:Wt.x+At.w,y:Wt.y,w:Wt.w-At.w,h:At.h}),Wt.y+=At.h,Wt.h-=At.h);break}}return{w:ut,h:_t,fill:_e/(ut*_t)||0}}Zs.prototype={destroy:function(){this.buf=null},readFields:function(nt,_e,rt){for(rt=rt||this.length;this.pos<rt;){var at=this.readVarint(),ut=at>>3,_t=this.pos;this.type=7&at,nt(ut,_e,this),this.pos===_t&&this.skip(at)}return _e},readMessage:function(nt,_e){return this.readFields(nt,_e,this.readVarint()+this.pos)},readFixed32:function(){var nt=n1(this.buf,this.pos);return this.pos+=4,nt},readSFixed32:function(){var nt=Am(this.buf,this.pos);return this.pos+=4,nt},readFixed64:function(){var nt=n1(this.buf,this.pos)+n1(this.buf,this.pos+4)*fw;return this.pos+=8,nt},readSFixed64:function(){var nt=n1(this.buf,this.pos)+Am(this.buf,this.pos+4)*fw;return this.pos+=8,nt},readFloat:function(){var nt=Ix(this.buf,this.pos,!0,23,4);return this.pos+=4,nt},readDouble:function(){var nt=Ix(this.buf,this.pos,!0,52,8);return this.pos+=8,nt},readVarint:function(nt){var _e,rt,at=this.buf;return _e=127&(rt=at[this.pos++]),rt<128?_e:(_e|=(127&(rt=at[this.pos++]))<<7,rt<128?_e:(_e|=(127&(rt=at[this.pos++]))<<14,rt<128?_e:(_e|=(127&(rt=at[this.pos++]))<<21,rt<128?_e:function(ut,_t,At){var Dt,Wt,Zt=At.buf;if(Dt=(112&(Wt=Zt[At.pos++]))>>4,Wt<128||(Dt|=(127&(Wt=Zt[At.pos++]))<<3,Wt<128)||(Dt|=(127&(Wt=Zt[At.pos++]))<<10,Wt<128)||(Dt|=(127&(Wt=Zt[At.pos++]))<<17,Wt<128)||(Dt|=(127&(Wt=Zt[At.pos++]))<<24,Wt<128)||(Dt|=(1&(Wt=Zt[At.pos++]))<<31,Wt<128))return Sm(ut,Dt,_t);throw new Error("Expected varint not more than 10 bytes")}(_e|=(15&(rt=at[this.pos]))<<28,nt,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var nt=this.readVarint();return nt%2==1?(nt+1)/-2:nt/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var nt=this.readVarint()+this.pos,_e=this.pos;return this.pos=nt,nt-_e>=12&&Px?function(rt,at,ut){return Px.decode(rt.subarray(at,ut))}(this.buf,_e,nt):function(rt,at,ut){for(var _t="",At=at;At<ut;){var Dt,Wt,Zt,tn=rt[At],cn=null,fn=tn>239?4:tn>223?3:tn>191?2:1;if(At+fn>ut)break;fn===1?tn<128&&(cn=tn):fn===2?(192&(Dt=rt[At+1]))==128&&(cn=(31&tn)<<6|63&Dt)<=127&&(cn=null):fn===3?(Wt=rt[At+2],(192&(Dt=rt[At+1]))==128&&(192&Wt)==128&&((cn=(15&tn)<<12|(63&Dt)<<6|63&Wt)<=2047||cn>=55296&&cn<=57343)&&(cn=null)):fn===4&&(Wt=rt[At+2],Zt=rt[At+3],(192&(Dt=rt[At+1]))==128&&(192&Wt)==128&&(192&Zt)==128&&((cn=(15&tn)<<18|(63&Dt)<<12|(63&Wt)<<6|63&Zt)<=65535||cn>=1114112)&&(cn=null)),cn===null?(cn=65533,fn=1):cn>65535&&(cn-=65536,_t+=String.fromCharCode(cn>>>10&1023|55296),cn=56320|1023&cn),_t+=String.fromCharCode(cn),At+=fn}return _t}(this.buf,_e,nt)},readBytes:function(){var nt=this.readVarint()+this.pos,_e=this.buf.subarray(this.pos,nt);return this.pos=nt,_e},readPackedVarint:function(nt,_e){if(this.type!==Zs.Bytes)return nt.push(this.readVarint(_e));var rt=xm(this);for(nt=nt||[];this.pos<rt;)nt.push(this.readVarint(_e));return nt},readPackedSVarint:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readSVarint());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readSVarint());return nt},readPackedBoolean:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readBoolean());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readBoolean());return nt},readPackedFloat:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readFloat());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readFloat());return nt},readPackedDouble:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readDouble());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readDouble());return nt},readPackedFixed32:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readFixed32());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readFixed32());return nt},readPackedSFixed32:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readSFixed32());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readSFixed32());return nt},readPackedFixed64:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readFixed64());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readFixed64());return nt},readPackedSFixed64:function(nt){if(this.type!==Zs.Bytes)return nt.push(this.readSFixed64());var _e=xm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readSFixed64());return nt},skip:function(nt){var _e=7&nt;if(_e===Zs.Varint)for(;this.buf[this.pos++]>127;);else if(_e===Zs.Bytes)this.pos=this.readVarint()+this.pos;else if(_e===Zs.Fixed32)this.pos+=4;else{if(_e!==Zs.Fixed64)throw new Error("Unimplemented type: "+_e);this.pos+=8}},writeTag:function(nt,_e){this.writeVarint(nt<<3|_e)},realloc:function(nt){for(var _e=this.length||16;_e<this.pos+nt;)_e*=2;if(_e!==this.length){var rt=new Uint8Array(_e);rt.set(this.buf),this.buf=rt,this.length=_e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(nt){this.realloc(4),Zy(this.buf,nt,this.pos),this.pos+=4},writeSFixed32:function(nt){this.realloc(4),Zy(this.buf,nt,this.pos),this.pos+=4},writeFixed64:function(nt){this.realloc(8),Zy(this.buf,-1&nt,this.pos),Zy(this.buf,Math.floor(nt*Mx),this.pos+4),this.pos+=8},writeSFixed64:function(nt){this.realloc(8),Zy(this.buf,-1&nt,this.pos),Zy(this.buf,Math.floor(nt*Mx),this.pos+4),this.pos+=8},writeVarint:function(nt){(nt=+nt||0)>268435455||nt<0?function(_e,rt){var at,ut;if(_e>=0?(at=_e%4294967296|0,ut=_e/4294967296|0):(ut=~(-_e/4294967296),4294967295^(at=~(-_e%4294967296))?at=at+1|0:(at=0,ut=ut+1|0)),_e>=18446744073709552e3||_e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");rt.realloc(10),function(_t,At,Dt){Dt.buf[Dt.pos++]=127&_t|128,_t>>>=7,Dt.buf[Dt.pos++]=127&_t|128,_t>>>=7,Dt.buf[Dt.pos++]=127&_t|128,_t>>>=7,Dt.buf[Dt.pos++]=127&_t|128,Dt.buf[Dt.pos]=127&(_t>>>=7)}(at,0,rt),function(_t,At){var Dt=(7&_t)<<4;At.buf[At.pos++]|=Dt|((_t>>>=3)?128:0),_t&&(At.buf[At.pos++]=127&_t|((_t>>>=7)?128:0),_t&&(At.buf[At.pos++]=127&_t|((_t>>>=7)?128:0),_t&&(At.buf[At.pos++]=127&_t|((_t>>>=7)?128:0),_t&&(At.buf[At.pos++]=127&_t|((_t>>>=7)?128:0),_t&&(At.buf[At.pos++]=127&_t)))))}(ut,rt)}(nt,this):(this.realloc(4),this.buf[this.pos++]=127&nt|(nt>127?128:0),nt<=127||(this.buf[this.pos++]=127&(nt>>>=7)|(nt>127?128:0),nt<=127||(this.buf[this.pos++]=127&(nt>>>=7)|(nt>127?128:0),nt<=127||(this.buf[this.pos++]=nt>>>7&127))))},writeSVarint:function(nt){this.writeVarint(nt<0?2*-nt-1:2*nt)},writeBoolean:function(nt){this.writeVarint(Boolean(nt))},writeString:function(nt){nt=String(nt),this.realloc(4*nt.length),this.pos++;var _e=this.pos;this.pos=function(at,ut,_t){for(var At,Dt,Wt=0;Wt<ut.length;Wt++){if((At=ut.charCodeAt(Wt))>55295&&At<57344){if(!Dt){At>56319||Wt+1===ut.length?(at[_t++]=239,at[_t++]=191,at[_t++]=189):Dt=At;continue}if(At<56320){at[_t++]=239,at[_t++]=191,at[_t++]=189,Dt=At;continue}At=Dt-55296<<10|At-56320|65536,Dt=null}else Dt&&(at[_t++]=239,at[_t++]=191,at[_t++]=189,Dt=null);At<128?at[_t++]=At:(At<2048?at[_t++]=At>>6|192:(At<65536?at[_t++]=At>>12|224:(at[_t++]=At>>18|240,at[_t++]=At>>12&63|128),at[_t++]=At>>6&63|128),at[_t++]=63&At|128)}return _t}(this.buf,nt,this.pos);var rt=this.pos-_e;rt>=128&&e1(_e,rt,this),this.pos=_e-1,this.writeVarint(rt),this.pos+=rt},writeFloat:function(nt){this.realloc(4),Ox(this.buf,nt,this.pos,!0,23,4),this.pos+=4},writeDouble:function(nt){this.realloc(8),Ox(this.buf,nt,this.pos,!0,52,8),this.pos+=8},writeBytes:function(nt){var _e=nt.length;this.writeVarint(_e),this.realloc(_e);for(var rt=0;rt<_e;rt++)this.buf[this.pos++]=nt[rt]},writeRawMessage:function(nt,_e){this.pos++;var rt=this.pos;nt(_e,this);var at=this.pos-rt;at>=128&&e1(rt,at,this),this.pos=rt-1,this.writeVarint(at),this.pos+=at},writeMessage:function(nt,_e,rt){this.writeTag(nt,Zs.Bytes),this.writeRawMessage(_e,rt)},writePackedVarint:function(nt,_e){_e.length&&this.writeMessage(nt,oA,_e)},writePackedSVarint:function(nt,_e){_e.length&&this.writeMessage(nt,kx,_e)},writePackedBoolean:function(nt,_e){_e.length&&this.writeMessage(nt,q_,_e)},writePackedFloat:function(nt,_e){_e.length&&this.writeMessage(nt,t1,_e)},writePackedDouble:function(nt,_e){_e.length&&this.writeMessage(nt,mp,_e)},writePackedFixed32:function(nt,_e){_e.length&&this.writeMessage(nt,sA,_e)},writePackedSFixed32:function(nt,_e){_e.length&&this.writeMessage(nt,aA,_e)},writePackedFixed64:function(nt,_e){_e.length&&this.writeMessage(nt,lA,_e)},writePackedSFixed64:function(nt,_e){_e.length&&this.writeMessage(nt,uA,_e)},writeBytesField:function(nt,_e){this.writeTag(nt,Zs.Bytes),this.writeBytes(_e)},writeFixed32Field:function(nt,_e){this.writeTag(nt,Zs.Fixed32),this.writeFixed32(_e)},writeSFixed32Field:function(nt,_e){this.writeTag(nt,Zs.Fixed32),this.writeSFixed32(_e)},writeFixed64Field:function(nt,_e){this.writeTag(nt,Zs.Fixed64),this.writeFixed64(_e)},writeSFixed64Field:function(nt,_e){this.writeTag(nt,Zs.Fixed64),this.writeSFixed64(_e)},writeVarintField:function(nt,_e){this.writeTag(nt,Zs.Varint),this.writeVarint(_e)},writeSVarintField:function(nt,_e){this.writeTag(nt,Zs.Varint),this.writeSVarint(_e)},writeStringField:function(nt,_e){this.writeTag(nt,Zs.Bytes),this.writeString(_e)},writeFloatField:function(nt,_e){this.writeTag(nt,Zs.Fixed32),this.writeFloat(_e)},writeDoubleField:function(nt,_e){this.writeTag(nt,Zs.Fixed64),this.writeDouble(_e)},writeBooleanField:function(nt,_e){this.writeVarintField(nt,Boolean(_e))}};class dw{constructor(_e,{pixelRatio:rt,version:at,stretchX:ut,stretchY:_t,content:At}){this.paddedRect=_e,this.pixelRatio=rt,this.stretchX=ut,this.stretchY=_t,this.content=At,this.version=at}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ys{constructor(_e,rt){const at={},ut={};this.haveRenderCallbacks=[];const _t=[];this.addImages(_e,at,_t),this.addImages(rt,ut,_t);const{w:At,h:Dt}=r1(_t),Wt=new _c({width:At||1,height:Dt||1});for(const Zt in _e){const tn=_e[Zt],cn=at[Zt].paddedRect;_c.copy(tn.data,Wt,{x:0,y:0},{x:cn.x+1,y:cn.y+1},tn.data)}for(const Zt in rt){const tn=rt[Zt],cn=ut[Zt].paddedRect,fn=cn.x+1,wn=cn.y+1,xn=tn.data.width,On=tn.data.height;_c.copy(tn.data,Wt,{x:0,y:0},{x:fn,y:wn},tn.data),_c.copy(tn.data,Wt,{x:0,y:On-1},{x:fn,y:wn-1},{width:xn,height:1}),_c.copy(tn.data,Wt,{x:0,y:0},{x:fn,y:wn+On},{width:xn,height:1}),_c.copy(tn.data,Wt,{x:xn-1,y:0},{x:fn-1,y:wn},{width:1,height:On}),_c.copy(tn.data,Wt,{x:0,y:0},{x:fn+xn,y:wn},{width:1,height:On})}this.image=Wt,this.iconPositions=at,this.patternPositions=ut}addImages(_e,rt,at){for(const ut in _e){const _t=_e[ut],At={x:0,y:0,w:_t.data.width+2,h:_t.data.height+2};at.push(At),rt[ut]=new dw(At,_t),_t.hasRenderCallback&&this.haveRenderCallbacks.push(ut)}}patchUpdatedImages(_e,rt){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(at=>_e.hasImage(at)),_e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const at in _e.updatedImages)this.patchUpdatedImage(this.iconPositions[at],_e.getImage(at),rt),this.patchUpdatedImage(this.patternPositions[at],_e.getImage(at),rt)}patchUpdatedImage(_e,rt,at){if(!_e||!rt||_e.version===rt.version)return;_e.version=rt.version;const[ut,_t]=_e.tl;at.update(rt.data,void 0,{x:ut,y:_t})}}Oo(dw,"ImagePosition"),Oo(Ys,"ImageAtlas");const yp={horizontal:1,vertical:2,horizontalOnly:3};class Z_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(_e,rt){const at=new Z_;return at.scale=_e||1,at.fontStack=rt,at}static forImage(_e){const rt=new Z_;return rt.imageName=_e,rt}}class Vm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(_e,rt){const at=new Vm;for(let ut=0;ut<_e.sections.length;ut++){const _t=_e.sections[ut];_t.image?at.addImageSection(_t):at.addTextSection(_t,rt)}return at}length(){return this.text.length}getSection(_e){return this.sections[this.sectionIndex[_e]]}getSections(){return this.sections}getSectionIndex(_e){return this.sectionIndex[_e]}getCharCode(_e){return this.text.charCodeAt(_e)}verticalizePunctuation(_e){this.text=function(rt,at){let ut="";for(let _t=0;_t<rt.length;_t++){const At=rt.charCodeAt(_t+1)||null,Dt=rt.charCodeAt(_t-1)||null;ut+=!at&&(At&&Yt(At)&&!vy[rt[_t+1]]||Dt&&Yt(Dt)&&!vy[rt[_t-1]])||!vy[rt[_t]]?rt[_t]:vy[rt[_t]]}return ut}(this.text,_e)}trim(){let _e=0;for(let at=0;at<this.text.length&&i1[this.text.charCodeAt(at)];at++)_e++;let rt=this.text.length;for(let at=this.text.length-1;at>=0&&at>=_e&&i1[this.text.charCodeAt(at)];at--)rt--;this.text=this.text.substring(_e,rt),this.sectionIndex=this.sectionIndex.slice(_e,rt)}substring(_e,rt){const at=new Vm;return at.text=this.text.substring(_e,rt),at.sectionIndex=this.sectionIndex.slice(_e,rt),at.sections=this.sections,at}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((_e,rt)=>Math.max(_e,this.sections[rt].scale),0)}addTextSection(_e,rt){this.text+=_e.text,this.sections.push(Z_.forText(_e.scale,_e.fontStack||rt));const at=this.sections.length-1;for(let ut=0;ut<_e.text.length;++ut)this.sectionIndex.push(at)}addImageSection(_e){const rt=_e.image?_e.image.name:"";if(rt.length===0)return void hn("Can't add FormattedSection with an empty image.");const at=this.getNextImageSectionCharCode();at?(this.text+=String.fromCharCode(at),this.sections.push(Z_.forImage(rt)),this.sectionIndex.push(this.sections.length-1)):hn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gw(nt,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn){const On=Vm.fromFeature(nt,ut);cn===yp.vertical&&On.verticalizePunctuation(fn);let Un=[];const nr=function(ar,Br,kr,Jr,ho,Ur){if(!ar)return[];const no=[],oo=function(So,$o,To,Fo,Ao,Yo){let ls=0;for(let fs=0;fs<So.length();fs++){const ks=So.getSection(fs);ls+=Lx(So.getCharCode(fs),ks,Fo,Ao,$o,Yo)}return ls/Math.max(1,Math.ceil(ls/To))}(ar,Br,kr,Jr,ho,Ur),lo=ar.text.indexOf("")>=0;let go=0;for(let So=0;So<ar.length();So++){const $o=ar.getSection(So),To=ar.getCharCode(So);if(i1[To]||(go+=Lx(To,$o,Jr,ho,Br,Ur)),So<ar.length()-1){const Fo=!((Vr=To)<11904||!(T_(Vr)||E_(Vr)||Bm(Vr)||S0(Vr)||b0(Vr)||Av(Vr)||qu(Vr)||Ny(Vr)||w0(Vr)||Cv(Vr)||Tv(Vr)||ot(Vr)||A_(Vr)||Ev(Vr)||_0(Vr)||v0(Vr)||cp(Vr)||ly(Vr)||Rv(Vr)||Uy(Vr)));(cA[To]||Fo||$o.imageName)&&no.push(jx(So+1,go,oo,no,hA(To,ar.getCharCode(So+1),Fo&&lo),!1))}}var Vr;return Fx(jx(ar.length(),go,oo,no,0,!0))}(On,Zt,_t,_e,at,wn),{processBidirectionalText:hr,processStyledBidirectionalText:tr}=lr;if(hr&&On.sections.length===1){const ar=hr(On.toString(),nr);for(const Br of ar){const kr=new Vm;kr.text=Br,kr.sections=On.sections;for(let Jr=0;Jr<Br.length;Jr++)kr.sectionIndex.push(0);Un.push(kr)}}else if(tr){const ar=tr(On.text,On.sectionIndex,nr);for(const Br of ar){const kr=new Vm;kr.text=Br[0],kr.sectionIndex=Br[1],kr.sections=On.sections,Un.push(kr)}}else Un=function(ar,Br){const kr=[],Jr=ar.text;let ho=0;for(const Ur of Br)kr.push(ar.substring(ho,Ur)),ho=Ur;return ho<Jr.length&&kr.push(ar.substring(ho,Jr.length)),kr}(On,nr);const sr=[],mr={positionedLines:sr,text:On.toString(),top:tn[1],bottom:tn[1],left:tn[0],right:tn[0],writingMode:cn,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ar,Br,kr,Jr,ho,Ur,no,oo,lo,go,Vr,So){let $o=0,To=0,Fo=0;const Ao=oo==="right"?1:oo==="left"?0:.5;let Yo=!1;for(const vs of ho){const Es=vs.getSections();for(const Ks of Es){if(Ks.imageName)continue;const $a=Br[Ks.fontStack];if($a&&(Yo=$a.ascender!==void 0&&$a.descender!==void 0,!Yo))break}if(!Yo)break}let ls=0;for(const vs of ho){vs.trim();const Es=vs.getMaxScale(),Ks=(Es-1)*uu,$a={positionedGlyphs:[],lineOffset:0};ar.positionedLines[ls]=$a;const ba=$a.positionedGlyphs;let yl=0;if(!vs.length()){To+=Ur,++ls;continue}let Sl=0,Ll=0;for(let qs=0;qs<vs.length();qs++){const Ql=vs.getSection(qs),Kl=vs.getSectionIndex(qs),js=vs.getCharCode(qs);let Rl=Ql.scale,nu=null,Xs=null,Hl=null,Nu=uu,bu=0;const wu=!(lo===yp.horizontal||!Vr&&!Ft(js)||Vr&&(i1[js]||(fs=js,y0(fs)||Fy(fs)||Tp(fs)||zy(fs)||dt(fs))));if(Ql.imageName){const ep=Jr[Ql.imageName];if(!ep)continue;Hl=Ql.imageName,ar.iconsInText=ar.iconsInText||!0,Xs=ep.paddedRect;const xu=ep.displaySize;Rl=Rl*uu/So,nu={width:xu[0],height:xu[1],left:1,top:-3,advance:wu?xu[1]:xu[0],localGlyph:!1},bu=Yo?-nu.height*Rl:Es*uu-17-xu[1]*Rl,Nu=nu.advance;const Jy=(wu?xu[0]:xu[1])*Rl-uu*Es;Jy>0&&Jy>yl&&(yl=Jy)}else{const ep=kr[Ql.fontStack];if(!ep)continue;ep[js]&&(Xs=ep[js]);const xu=Br[Ql.fontStack];if(!xu)continue;const Jy=xu.glyphs[js];if(!Jy)continue;if(nu=Jy.metrics,Nu=js!==8203?uu:0,Yo){const A1=xu.ascender!==void 0?Math.abs(xu.ascender):0,kw=xu.descender!==void 0?Math.abs(xu.descender):0,Dw=(A1+kw)*Rl;Sl<Dw&&(Sl=Dw,Ll=(A1-kw)/2*Rl),bu=-A1*Rl}else bu=(Es-Rl)*uu-17}wu?(ar.verticalizable=!0,ba.push({glyph:js,imageName:Hl,x:$o,y:To+bu,vertical:wu,scale:Rl,localGlyph:nu.localGlyph,fontStack:Ql.fontStack,sectionIndex:Kl,metrics:nu,rect:Xs}),$o+=Nu*Rl+go):(ba.push({glyph:js,imageName:Hl,x:$o,y:To+bu,vertical:wu,scale:Rl,localGlyph:nu.localGlyph,fontStack:Ql.fontStack,sectionIndex:Kl,metrics:nu,rect:Xs}),$o+=nu.advance*Rl+go)}ba.length!==0&&(Fo=Math.max($o-go,Fo),Yo?Nx(ba,Ao,yl,Ll,Ur*Es/2):Nx(ba,Ao,yl,0,Ur/2)),$o=0;const vu=Ur*Es+yl;$a.lineOffset=Math.max(yl,Ks),To+=vu,++ls}var fs;const ks=To,{horizontalAlign:ss,verticalAlign:xl}=pw(no);(function(vs,Es,Ks,$a,ba,yl){const Sl=(Es-Ks)*ba,Ll=-yl*$a;for(const vu of vs)for(const qs of vu.positionedGlyphs)qs.x+=Sl,qs.y+=Ll})(ar.positionedLines,Ao,ss,xl,Fo,ks),ar.top+=-xl*ks,ar.bottom=ar.top+ks,ar.left+=-ss*Fo,ar.right=ar.left+Fo,ar.hasBaseline=Yo}(mr,_e,rt,at,Un,At,Dt,Wt,cn,Zt,fn,xn),!function(ar){for(const Br of ar)if(Br.positionedGlyphs.length!==0)return!1;return!0}(sr)&&mr}const i1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Lx(nt,_e,rt,at,ut,_t){if(_e.imageName){const At=at[_e.imageName];return At?At.displaySize[0]*_e.scale*uu/_t+ut:0}{const At=rt[_e.fontStack],Dt=At&&At.glyphs[nt];return Dt?Dt.metrics.advance*_e.scale+ut:0}}function Bx(nt,_e,rt,at){const ut=Math.pow(nt-_e,2);return at?nt<_e?ut/2:2*ut:ut+Math.abs(rt)*rt}function hA(nt,_e,rt){let at=0;return nt===10&&(at-=1e4),rt&&(at+=150),nt!==40&&nt!==65288||(at+=50),_e!==41&&_e!==65289||(at+=50),at}function jx(nt,_e,rt,at,ut,_t){let At=null,Dt=Bx(_e,rt,ut,_t);for(const Wt of at){const Zt=Bx(_e-Wt.x,rt,ut,_t)+Wt.badness;Zt<=Dt&&(At=Wt,Dt=Zt)}return{index:nt,x:_e,priorBreak:At,badness:Dt}}function Fx(nt){return nt?Fx(nt.priorBreak).concat(nt.index):[]}function pw(nt){let _e=.5,rt=.5;switch(nt){case"right":case"top-right":case"bottom-right":_e=1;break;case"left":case"top-left":case"bottom-left":_e=0}switch(nt){case"bottom":case"bottom-right":case"bottom-left":rt=1;break;case"top":case"top-right":case"top-left":rt=0}return{horizontalAlign:_e,verticalAlign:rt}}function Nx(nt,_e,rt,at,ut){if(!(_e||rt||at||ut))return;const _t=nt.length-1,At=nt[_t],Dt=(At.x+At.metrics.advance*At.scale)*_e;for(let Wt=0;Wt<=_t;Wt++)nt[Wt].x-=Dt,nt[Wt].y+=rt+at+ut}function fA(nt,_e,rt){const{horizontalAlign:at,verticalAlign:ut}=pw(rt),_t=_e[0]-nt.displaySize[0]*at,At=_e[1]-nt.displaySize[1]*ut;return{image:nt,top:At,bottom:At+nt.displaySize[1],left:_t,right:_t+nt.displaySize[0]}}function Ux(nt,_e,rt,at,ut,_t){const At=nt.image;let Dt;if(At.content){const Un=At.content,nr=At.pixelRatio||1;Dt=[Un[0]/nr,Un[1]/nr,At.displaySize[0]-Un[2]/nr,At.displaySize[1]-Un[3]/nr]}const Wt=_e.left*_t,Zt=_e.right*_t;let tn,cn,fn,wn;rt==="width"||rt==="both"?(wn=ut[0]+Wt-at[3],cn=ut[0]+Zt+at[1]):(wn=ut[0]+(Wt+Zt-At.displaySize[0])/2,cn=wn+At.displaySize[0]);const xn=_e.top*_t,On=_e.bottom*_t;return rt==="height"||rt==="both"?(tn=ut[1]+xn-at[0],fn=ut[1]+On+at[2]):(tn=ut[1]+(xn+On-At.displaySize[1])/2,fn=tn+At.displaySize[1]),{image:At,top:tn,right:cn,bottom:fn,left:wn,collisionPadding:Dt}}class Wm extends mt{constructor(_e,rt,at,ut,_t){super(_e,rt),this.angle=ut,this.z=at,_t!==void 0&&(this.segment=_t)}clone(){return new Wm(this.x,this.y,this.z,this.angle,this.segment)}}function o1(nt,_e,rt,at,ut){if(_e.segment===void 0)return!0;let _t=_e,At=_e.segment+1,Dt=0;for(;Dt>-rt/2;){if(At--,At<0)return!1;Dt-=nt[At].dist(_t),_t=nt[At]}Dt+=nt[At].dist(nt[At+1]),At++;const Wt=[];let Zt=0;for(;Dt<rt/2;){const tn=nt[At],cn=nt[At+1];if(!cn)return!1;let fn=nt[At-1].angleTo(tn)-tn.angleTo(cn);for(fn=Math.abs((fn+3*Math.PI)%(2*Math.PI)-Math.PI),Wt.push({distance:Dt,angleDelta:fn}),Zt+=fn;Dt-Wt[0].distance>at;)Zt-=Wt.shift().angleDelta;if(Zt>ut)return!1;At++,Dt+=tn.dist(cn)}return!0}function zx(nt){let _e=0;for(let rt=0;rt<nt.length-1;rt++)_e+=nt[rt].dist(nt[rt+1]);return _e}function s1(nt,_e,rt){return nt?.6*_e*rt:0}function Vx(nt,_e){return Math.max(nt?nt.right-nt.left:0,_e?_e.right-_e.left:0)}function dA(nt,_e,rt,at,ut,_t){const At=s1(rt,ut,_t),Dt=Vx(rt,at)*_t;let Wt=0;const Zt=zx(nt)/2;for(let tn=0;tn<nt.length-1;tn++){const cn=nt[tn],fn=nt[tn+1],wn=cn.dist(fn);if(Wt+wn>Zt){const xn=(Zt-Wt)/wn,On=Ts(cn.x,fn.x,xn),Un=Ts(cn.y,fn.y,xn),nr=new Wm(On,Un,0,fn.angleTo(cn),tn);return!At||o1(nt,nr,Dt,At,_e)?nr:void 0}Wt+=wn}}function gA(nt,_e,rt,at,ut,_t,At,Dt,Wt){const Zt=s1(at,_t,At),tn=Vx(at,ut),cn=tn*At,fn=nt[0].x===0||nt[0].x===Wt||nt[0].y===0||nt[0].y===Wt;return _e-cn<_e/4&&(_e=cn+_e/4),tu(nt,fn?_e/2*Dt%_e:(tn/2+2*_t)*At*Dt%_e,_e,Zt,rt,cn,fn,!1,Wt)}function tu(nt,_e,rt,at,ut,_t,At,Dt,Wt){const Zt=_t/2,tn=zx(nt);let cn=0,fn=_e-rt,wn=[];for(let xn=0;xn<nt.length-1;xn++){const On=nt[xn],Un=nt[xn+1],nr=On.dist(Un),hr=Un.angleTo(On);for(;fn+rt<cn+nr;){fn+=rt;const tr=(fn-cn)/nr,sr=Ts(On.x,Un.x,tr),mr=Ts(On.y,Un.y,tr);if(sr>=0&&sr<Wt&&mr>=0&&mr<Wt&&fn-Zt>=0&&fn+Zt<=tn){const ar=new Wm(sr,mr,0,hr,xn);ar._round(),at&&!o1(nt,ar,_t,at,ut)||wn.push(ar)}}cn+=nr}return Dt||wn.length||At||(wn=tu(nt,cn/2,rt,at,ut,_t,At,!0,Wt)),wn}function Bu(nt,_e,rt,at,ut){const _t=[];for(let At=0;At<nt.length;At++){const Dt=nt[At];let Wt;for(let Zt=0;Zt<Dt.length-1;Zt++){let tn=Dt[Zt],cn=Dt[Zt+1];tn.x<_e&&cn.x<_e||(tn.x<_e?tn=new mt(_e,tn.y+(_e-tn.x)/(cn.x-tn.x)*(cn.y-tn.y))._round():cn.x<_e&&(cn=new mt(_e,tn.y+(_e-tn.x)/(cn.x-tn.x)*(cn.y-tn.y))._round()),tn.y<rt&&cn.y<rt||(tn.y<rt?tn=new mt(tn.x+(rt-tn.y)/(cn.y-tn.y)*(cn.x-tn.x),rt)._round():cn.y<rt&&(cn=new mt(tn.x+(rt-tn.y)/(cn.y-tn.y)*(cn.x-tn.x),rt)._round()),tn.x>=at&&cn.x>=at||(tn.x>=at?tn=new mt(at,tn.y+(at-tn.x)/(cn.x-tn.x)*(cn.y-tn.y))._round():cn.x>=at&&(cn=new mt(at,tn.y+(at-tn.x)/(cn.x-tn.x)*(cn.y-tn.y))._round()),tn.y>=ut&&cn.y>=ut||(tn.y>=ut?tn=new mt(tn.x+(ut-tn.y)/(cn.y-tn.y)*(cn.x-tn.x),ut)._round():cn.y>=ut&&(cn=new mt(tn.x+(ut-tn.y)/(cn.y-tn.y)*(cn.x-tn.x),ut)._round()),Wt&&tn.equals(Wt[Wt.length-1])||(Wt=[tn],_t.push(Wt)),Wt.push(cn)))))}}return _t}Oo(Wm,"Anchor");const Kv=1e20;function Wx(nt,_e,rt,at,ut,_t,At,Dt,Wt){for(let Zt=_e;Zt<_e+at;Zt++)Gx(nt,rt*_t+Zt,_t,ut,At,Dt,Wt);for(let Zt=rt;Zt<rt+ut;Zt++)Gx(nt,Zt*_t+_e,1,at,At,Dt,Wt)}function Gx(nt,_e,rt,at,ut,_t,At){_t[0]=0,At[0]=-Kv,At[1]=Kv,ut[0]=nt[_e];for(let Dt=1,Wt=0,Zt=0;Dt<at;Dt++){ut[Dt]=nt[_e+Dt*rt];const tn=Dt*Dt;do{const cn=_t[Wt];Zt=(ut[Dt]-ut[cn]+tn-cn*cn)/(Dt-cn)/2}while(Zt<=At[Wt]&&--Wt>-1);Wt++,_t[Wt]=Dt,At[Wt]=Zt,At[Wt+1]=Kv}for(let Dt=0,Wt=0;Dt<at;Dt++){for(;At[Wt+1]<Dt;)Wt++;const Zt=_t[Wt],tn=Dt-Zt;nt[_e+Dt*rt]=ut[Zt]+tn*tn}}const a1={none:0,ideographs:1,all:2};class Y_{constructor(_e,rt,at){this.requestManager=_e,this.localGlyphMode=rt,this.localFontFamily=at,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(_e){this.url=_e}getGlyphs(_e,rt){const at=[];for(const ut in _e)for(const _t of _e[ut])at.push({stack:ut,id:_t});qt(at,({stack:ut,id:_t},At)=>{let Dt=this.entries[ut];Dt||(Dt=this.entries[ut]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let Wt=Dt.glyphs[_t];if(Wt!==void 0)return void At(null,{stack:ut,id:_t,glyph:Wt});if(Wt=this._tinySDF(Dt,ut,_t),Wt)return Dt.glyphs[_t]=Wt,void At(null,{stack:ut,id:_t,glyph:Wt});const Zt=Math.floor(_t/256);if(256*Zt>65535)return void At(new Error("glyphs > 65535 not supported"));if(Dt.ranges[Zt])return void At(null,{stack:ut,id:_t,glyph:Wt});let tn=Dt.requests[Zt];tn||(tn=Dt.requests[Zt]=[],Y_.loadGlyphRange(ut,Zt,this.url,this.requestManager,(cn,fn)=>{if(fn){Dt.ascender=fn.ascender,Dt.descender=fn.descender;for(const wn in fn.glyphs)this._doesCharSupportLocalGlyph(+wn)||(Dt.glyphs[+wn]=fn.glyphs[+wn]);Dt.ranges[Zt]=!0}for(const wn of tn)wn(cn,fn);delete Dt.requests[Zt]})),tn.push((cn,fn)=>{cn?At(cn):fn&&At(null,{stack:ut,id:_t,glyph:fn.glyphs[_t]||null})})},(ut,_t)=>{if(ut)rt(ut);else if(_t){const At={};for(const{stack:Dt,id:Wt,glyph:Zt}of _t)At[Dt]===void 0&&(At[Dt]={}),At[Dt].glyphs===void 0&&(At[Dt].glyphs={}),At[Dt].glyphs[Wt]=Zt&&{id:Zt.id,bitmap:Zt.bitmap.clone(),metrics:Zt.metrics},At[Dt].ascender=this.entries[Dt].ascender,At[Dt].descender=this.entries[Dt].descender;rt(null,At)}})}_doesCharSupportLocalGlyph(_e){return this.localGlyphMode!==a1.none&&(this.localGlyphMode===a1.all?!!this.localFontFamily:!!this.localFontFamily&&(Cv(_e)||x0(_e)||A_(_e)||cp(_e)||Ny(_e)))}_tinySDF(_e,rt,at){const ut=this.localFontFamily;if(!ut||!this._doesCharSupportLocalGlyph(at))return;let _t=_e.tinySDF;if(!_t){let On="400";/bold/i.test(rt)?On="900":/medium/i.test(rt)?On="500":/light/i.test(rt)&&(On="200"),_t=_e.tinySDF=new Y_.TinySDF({fontFamily:ut,fontWeight:On,fontSize:48,buffer:6,radius:16}),_t.fontWeight=On}if(this.localGlyphs[_t.fontWeight][at])return this.localGlyphs[_t.fontWeight][at];const At=String.fromCharCode(at),{data:Dt,width:Wt,height:Zt,glyphWidth:tn,glyphHeight:cn,glyphLeft:fn,glyphTop:wn,glyphAdvance:xn}=_t.draw(At);return this.localGlyphs[_t.fontWeight][at]={id:at,bitmap:new Um({width:Wt,height:Zt},Dt),metrics:{width:tn/2,height:cn/2,left:fn/2,top:wn/2-27,advance:xn/2,localGlyph:!0}}}}function Hx(nt,_e,rt,at){const ut=[],_t=nt.image,At=_t.pixelRatio,Dt=_t.paddedRect.w-2,Wt=_t.paddedRect.h-2,Zt=nt.right-nt.left,tn=nt.bottom-nt.top,cn=_t.stretchX||[[0,Dt]],fn=_t.stretchY||[[0,Wt]],wn=(Ur,no)=>Ur+no[1]-no[0],xn=cn.reduce(wn,0),On=fn.reduce(wn,0),Un=Dt-xn,nr=Wt-On;let hr=0,tr=xn,sr=0,mr=On,ar=0,Br=Un,kr=0,Jr=nr;if(_t.content&&at){const Ur=_t.content;hr=l1(cn,0,Ur[0]),sr=l1(fn,0,Ur[1]),tr=l1(cn,Ur[0],Ur[2]),mr=l1(fn,Ur[1],Ur[3]),ar=Ur[0]-hr,kr=Ur[1]-sr,Br=Ur[2]-Ur[0]-tr,Jr=Ur[3]-Ur[1]-mr}const ho=(Ur,no,oo,lo)=>{const go=u1(Ur.stretch-hr,tr,Zt,nt.left),Vr=c1(Ur.fixed-ar,Br,Ur.stretch,xn),So=u1(no.stretch-sr,mr,tn,nt.top),$o=c1(no.fixed-kr,Jr,no.stretch,On),To=u1(oo.stretch-hr,tr,Zt,nt.left),Fo=c1(oo.fixed-ar,Br,oo.stretch,xn),Ao=u1(lo.stretch-sr,mr,tn,nt.top),Yo=c1(lo.fixed-kr,Jr,lo.stretch,On),ls=new mt(go,So),fs=new mt(To,So),ks=new mt(To,Ao),ss=new mt(go,Ao),xl=new mt(Vr/At,$o/At),vs=new mt(Fo/At,Yo/At),Es=_e*Math.PI/180;if(Es){const ba=Math.sin(Es),yl=Math.cos(Es),Sl=[yl,-ba,ba,yl];ls._matMult(Sl),fs._matMult(Sl),ss._matMult(Sl),ks._matMult(Sl)}const Ks=Ur.stretch+Ur.fixed,$a=no.stretch+no.fixed;return{tl:ls,tr:fs,bl:ss,br:ks,tex:{x:_t.paddedRect.x+1+Ks,y:_t.paddedRect.y+1+$a,w:oo.stretch+oo.fixed-Ks,h:lo.stretch+lo.fixed-$a},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xl,pixelOffsetBR:vs,minFontScaleX:Br/At/Zt,minFontScaleY:Jr/At/tn,isSDF:rt}};if(at&&(_t.stretchX||_t.stretchY)){const Ur=mw(cn,Un,xn),no=mw(fn,nr,On);for(let oo=0;oo<Ur.length-1;oo++){const lo=Ur[oo],go=Ur[oo+1];for(let Vr=0;Vr<no.length-1;Vr++)ut.push(ho(lo,no[Vr],go,no[Vr+1]))}}else ut.push(ho({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Dt+1},{fixed:0,stretch:Wt+1}));return ut}function l1(nt,_e,rt){let at=0;for(const ut of nt)at+=Math.max(_e,Math.min(rt,ut[1]))-Math.max(_e,Math.min(rt,ut[0]));return at}function mw(nt,_e,rt){const at=[{fixed:-1,stretch:0}];for(const[ut,_t]of nt){const At=at[at.length-1];at.push({fixed:ut-At.stretch,stretch:At.stretch}),at.push({fixed:ut-At.stretch,stretch:At.stretch+(_t-ut)})}return at.push({fixed:_e+1,stretch:rt}),at}function u1(nt,_e,rt,at){return nt/_e*rt+at}function c1(nt,_e,rt,at){return nt-_e*rt/at}function pA(nt,_e,rt,at){const ut=_e+nt.positionedLines[at].lineOffset;return at===0?rt+ut/2:rt+(ut+(_e+nt.positionedLines[at-1].lineOffset))/2}Y_.loadGlyphRange=function(nt,_e,rt,at,ut){const _t=256*_e,At=_t+255,Dt=at.transformRequest(at.normalizeGlyphsURL(rt).replace("{fontstack}",nt).replace("{range}",`${_t}-${At}`),Co.Glyphs);Ss(Dt,(Wt,Zt)=>{if(Wt)ut(Wt);else if(Zt){const tn={},cn=function(fn){return new $_(fn).readFields(Cs,{})}(Zt);for(const fn of cn.glyphs)tn[fn.id]=fn;ut(null,{glyphs:tn,ascender:cn.ascender,descender:cn.descender})}})},Y_.TinySDF=class{constructor({fontSize:nt=24,buffer:_e=3,radius:rt=8,cutoff:at=.25,fontFamily:ut="sans-serif",fontWeight:_t="normal",fontStyle:At="normal"}={}){this.buffer=_e,this.cutoff=at,this.radius=rt;const Dt=this.size=nt+4*_e,Wt=this._createCanvas(Dt),Zt=this.ctx=Wt.getContext("2d",{willReadFrequently:!0});Zt.font=`${At} ${_t} ${nt}px ${ut}`,Zt.textBaseline="alphabetic",Zt.textAlign="left",Zt.fillStyle="black",this.gridOuter=new Float64Array(Dt*Dt),this.gridInner=new Float64Array(Dt*Dt),this.f=new Float64Array(Dt),this.z=new Float64Array(Dt+1),this.v=new Uint16Array(Dt)}_createCanvas(nt){const _e=document.createElement("canvas");return _e.width=_e.height=nt,_e}draw(nt){const{width:_e,actualBoundingBoxAscent:rt,actualBoundingBoxDescent:at,actualBoundingBoxLeft:ut,actualBoundingBoxRight:_t}=this.ctx.measureText(nt),At=Math.ceil(rt),Dt=Math.min(this.size-this.buffer,Math.ceil(_t-ut)),Wt=Math.min(this.size-this.buffer,At+Math.ceil(at)),Zt=Dt+2*this.buffer,tn=Wt+2*this.buffer,cn=Math.max(Zt*tn,0),fn=new Uint8ClampedArray(cn),wn={data:fn,width:Zt,height:tn,glyphWidth:Dt,glyphHeight:Wt,glyphTop:At,glyphLeft:0,glyphAdvance:_e};if(Dt===0||Wt===0)return wn;const{ctx:xn,buffer:On,gridInner:Un,gridOuter:nr}=this;xn.clearRect(On,On,Dt,Wt),xn.fillText(nt,On,On+At);const hr=xn.getImageData(On,On,Dt,Wt);nr.fill(Kv,0,cn),Un.fill(0,0,cn);for(let tr=0;tr<Wt;tr++)for(let sr=0;sr<Dt;sr++){const mr=hr.data[4*(tr*Dt+sr)+3]/255;if(mr===0)continue;const ar=(tr+On)*Zt+sr+On;if(mr===1)nr[ar]=0,Un[ar]=Kv;else{const Br=.5-mr;nr[ar]=Br>0?Br*Br:0,Un[ar]=Br<0?Br*Br:0}}Wx(nr,0,0,Zt,tn,Zt,this.f,this.v,this.z),Wx(Un,On,On,Dt,Wt,Zt,this.f,this.v,this.z);for(let tr=0;tr<cn;tr++){const sr=Math.sqrt(nr[tr])-Math.sqrt(Un[tr]);fn[tr]=Math.round(255-255*(sr/this.radius+this.cutoff))}return wn}};class $x{constructor(_e=[],rt=qx){if(this.data=_e,this.length=this.data.length,this.compare=rt,this.length>0)for(let at=(this.length>>1)-1;at>=0;at--)this._down(at)}push(_e){this.data.push(_e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const _e=this.data[0],rt=this.data.pop();return this.length--,this.length>0&&(this.data[0]=rt,this._down(0)),_e}peek(){return this.data[0]}_up(_e){const{data:rt,compare:at}=this,ut=rt[_e];for(;_e>0;){const _t=_e-1>>1,At=rt[_t];if(at(ut,At)>=0)break;rt[_e]=At,_e=_t}rt[_e]=ut}_down(_e){const{data:rt,compare:at}=this,ut=this.length>>1,_t=rt[_e];for(;_e<ut;){let At=1+(_e<<1),Dt=rt[At];const Wt=At+1;if(Wt<this.length&&at(rt[Wt],Dt)<0&&(At=Wt,Dt=rt[Wt]),at(Dt,_t)>=0)break;rt[_e]=Dt,_e=At}rt[_e]=_t}}function qx(nt,_e){return nt<_e?-1:nt>_e?1:0}function mA(nt,_e=1,rt=!1){let at=1/0,ut=1/0,_t=-1/0,At=-1/0;const Dt=nt[0];for(let wn=0;wn<Dt.length;wn++){const xn=Dt[wn];(!wn||xn.x<at)&&(at=xn.x),(!wn||xn.y<ut)&&(ut=xn.y),(!wn||xn.x>_t)&&(_t=xn.x),(!wn||xn.y>At)&&(At=xn.y)}const Wt=Math.min(_t-at,At-ut);let Zt=Wt/2;const tn=new $x([],yA);if(Wt===0)return new mt(at,ut);for(let wn=at;wn<_t;wn+=Wt)for(let xn=ut;xn<At;xn+=Wt)tn.push(new K_(wn+Zt,xn+Zt,Zt,nt));let cn=function(wn){let xn=0,On=0,Un=0;const nr=wn[0];for(let hr=0,tr=nr.length,sr=tr-1;hr<tr;sr=hr++){const mr=nr[hr],ar=nr[sr],Br=mr.x*ar.y-ar.x*mr.y;On+=(mr.x+ar.x)*Br,Un+=(mr.y+ar.y)*Br,xn+=3*Br}return new K_(On/xn,Un/xn,0,wn)}(nt),fn=tn.length;for(;tn.length;){const wn=tn.pop();(wn.d>cn.d||!cn.d)&&(cn=wn,rt&&console.log("found best %d after %d probes",Math.round(1e4*wn.d)/1e4,fn)),wn.max-cn.d<=_e||(Zt=wn.h/2,tn.push(new K_(wn.p.x-Zt,wn.p.y-Zt,Zt,nt)),tn.push(new K_(wn.p.x+Zt,wn.p.y-Zt,Zt,nt)),tn.push(new K_(wn.p.x-Zt,wn.p.y+Zt,Zt,nt)),tn.push(new K_(wn.p.x+Zt,wn.p.y+Zt,Zt,nt)),fn+=4)}return rt&&(console.log(`num probes: ${fn}`),console.log(`best distance: ${cn.d}`)),cn.p}function yA(nt,_e){return _e.max-nt.max}function K_(nt,_e,rt,at){this.p=new mt(nt,_e),this.h=rt,this.d=function(ut,_t){let At=!1,Dt=1/0;for(let Wt=0;Wt<_t.length;Wt++){const Zt=_t[Wt];for(let tn=0,cn=Zt.length,fn=cn-1;tn<cn;fn=tn++){const wn=Zt[tn],xn=Zt[fn];wn.y>ut.y!=xn.y>ut.y&&ut.x<(xn.x-wn.x)*(ut.y-wn.y)/(xn.y-wn.y)+wn.x&&(At=!At),Dt=Math.min(Dt,Gw(ut,wn,xn))}}return(At?1:-1)*Math.sqrt(Dt)}(this.p,at),this.max=this.d+this.h*Math.SQRT2}const yw=Number.POSITIVE_INFINITY,X_=Math.sqrt(2);function Zx(nt,_e){return _e[1]!==yw?function(rt,at,ut){let _t=0,At=0;switch(at=Math.abs(at),ut=Math.abs(ut),rt){case"top-right":case"top-left":case"top":At=ut-7;break;case"bottom-right":case"bottom-left":case"bottom":At=7-ut}switch(rt){case"top-right":case"bottom-right":case"right":_t=-at;break;case"top-left":case"bottom-left":case"left":_t=at}return[_t,At]}(nt,_e[0],_e[1]):function(rt,at){let ut=0,_t=0;at<0&&(at=0);const At=at/X_;switch(rt){case"top-right":case"top-left":_t=At-7;break;case"bottom-right":case"bottom-left":_t=7-At;break;case"bottom":_t=7-at;break;case"top":_t=at-7}switch(rt){case"top-right":case"bottom-right":ut=-At;break;case"top-left":case"bottom-left":ut=At;break;case"left":ut=at;break;case"right":ut=-at}return[ut,_t]}(nt,_e[0])}function _A(nt,_e,rt,at,ut,_t,At,Dt,Wt,Zt){nt.createArrays(),nt.tilePixelRatio=Zo/(512*nt.overscaling),nt.compareText={},nt.iconsNeedLinear=!1;const tn=nt.layers[0].layout,cn=nt.layers[0]._unevaluatedLayout._values,fn={};if(nt.textSizeData.kind==="composite"){const{minZoom:On,maxZoom:Un}=nt.textSizeData;fn.compositeTextSizes=[cn["text-size"].possiblyEvaluate(new er(On),Dt),cn["text-size"].possiblyEvaluate(new er(Un),Dt)]}if(nt.iconSizeData.kind==="composite"){const{minZoom:On,maxZoom:Un}=nt.iconSizeData;fn.compositeIconSizes=[cn["icon-size"].possiblyEvaluate(new er(On),Dt),cn["icon-size"].possiblyEvaluate(new er(Un),Dt)]}fn.layoutTextSize=cn["text-size"].possiblyEvaluate(new er(Wt+1),Dt),fn.layoutIconSize=cn["icon-size"].possiblyEvaluate(new er(Wt+1),Dt),fn.textMaxSize=cn["text-size"].possiblyEvaluate(new er(18),Dt);const wn=tn.get("text-rotation-alignment")==="map"&&tn.get("symbol-placement")!=="point",xn=tn.get("text-size");for(const On of nt.features){const Un=tn.get("text-font").evaluate(On,{},Dt).join(","),nr=xn.evaluate(On,{},Dt),hr=fn.layoutTextSize.evaluate(On,{},Dt),tr=(fn.layoutIconSize.evaluate(On,{},Dt),{horizontal:{},vertical:void 0}),sr=On.text;let mr,ar=[0,0];if(sr){const Jr=sr.toString(),ho=tn.get("text-letter-spacing").evaluate(On,{},Dt)*uu,Ur=tn.get("text-line-height").evaluate(On,{},Dt)*uu,no=bt(Jr)?ho:0,oo=tn.get("text-anchor").evaluate(On,{},Dt),lo=tn.get("text-variable-anchor");if(!lo){const To=tn.get("text-radial-offset").evaluate(On,{},Dt);ar=To?Zx(oo,[To*uu,yw]):tn.get("text-offset").evaluate(On,{},Dt).map(Fo=>Fo*uu)}let go=wn?"center":tn.get("text-justify").evaluate(On,{},Dt);const Vr=tn.get("symbol-placement")==="point",So=Vr?tn.get("text-max-width").evaluate(On,{},Dt)*uu:1/0,$o=To=>{nt.allowVerticalPlacement&&lt(Jr)&&(tr.vertical=gw(sr,_e,rt,ut,Un,So,Ur,oo,To,no,ar,yp.vertical,!0,hr,nr))};if(!wn&&lo){const To=go==="auto"?lo.map(Ao=>_w(Ao)):[go];let Fo=!1;for(let Ao=0;Ao<To.length;Ao++){const Yo=To[Ao];if(!tr.horizontal[Yo])if(Fo)tr.horizontal[Yo]=tr.horizontal[0];else{const ls=gw(sr,_e,rt,ut,Un,So,Ur,"center",Yo,no,ar,yp.horizontal,!1,hr,nr);ls&&(tr.horizontal[Yo]=ls,Fo=ls.positionedLines.length===1)}}$o("left")}else{if(go==="auto"&&(go=_w(oo)),Vr||tn.get("text-writing-mode").indexOf("horizontal")>=0||!lt(Jr)){const To=gw(sr,_e,rt,ut,Un,So,Ur,oo,go,no,ar,yp.horizontal,!1,hr,nr);To&&(tr.horizontal[go]=To)}$o(Vr?"left":go)}}let Br=!1;if(On.icon&&On.icon.name){const Jr=at[On.icon.name];Jr&&(mr=fA(ut[On.icon.name],tn.get("icon-offset").evaluate(On,{},Dt),tn.get("icon-anchor").evaluate(On,{},Dt)),Br=Jr.sdf,nt.sdfIcons===void 0?nt.sdfIcons=Jr.sdf:nt.sdfIcons!==Jr.sdf&&hn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Jr.pixelRatio!==nt.pixelRatio||tn.get("icon-rotate").constantOr(1)!==0)&&(nt.iconsNeedLinear=!0))}const kr=bw(tr.horizontal)||tr.vertical;nt.iconsInText||(nt.iconsInText=!!kr&&kr.iconsInText),(kr||mr)&&vA(nt,On,tr,mr,at,fn,hr,0,ar,Br,At,Dt,Zt)}_t&&nt.generateCollisionDebugBuffers(Wt,nt.collisionBoxArray)}function _w(nt){switch(nt){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function vA(nt,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn){let wn=_t.textMaxSize.evaluate(_e,{},cn);wn===void 0&&(wn=At);const xn=nt.layers[0].layout,On=xn.get("icon-offset").evaluate(_e,{},cn),Un=bw(rt.horizontal)||rt.vertical,nr=fn.name==="globe",hr=At/24,tr=nt.tilePixelRatio*wn/24,sr=(no=nt.overscaling,nt.zoom>18&&no>2&&(no>>=1),Math.max(Zo/(512*no),1)*xn.get("symbol-spacing")),mr=xn.get("text-padding")*nt.tilePixelRatio,ar=xn.get("icon-padding")*nt.tilePixelRatio,Br=xt(xn.get("text-max-angle")),kr=xn.get("text-rotation-alignment")==="map"&&xn.get("symbol-placement")!=="point",Jr=xn.get("icon-rotation-alignment")==="map"&&xn.get("symbol-placement")!=="point",ho=xn.get("symbol-placement"),Ur=sr/2;var no;const oo=xn.get("icon-text-fit");let lo;at&&oo!=="none"&&(nt.allowVerticalPlacement&&rt.vertical&&(lo=Ux(at,rt.vertical,oo,xn.get("icon-text-fit-padding"),On,hr)),Un&&(at=Ux(at,Un,oo,xn.get("icon-text-fit-padding"),On,hr)));const go=(Vr,So,$o)=>{if(So.x<0||So.x>=Zo||So.y<0||So.y>=Zo)return;let To=null;if(nr){const{x:Fo,y:Ao,z:Yo}=fn.projectTilePoint(So.x,So.y,$o);To={anchor:new Wm(Fo,Ao,Yo,0,void 0),up:fn.upVector($o,So.x,So.y)}}(function(Fo,Ao,Yo,ls,fs,ks,ss,xl,vs,Es,Ks,$a,ba,yl,Sl,Ll,vu,qs,Ql,Kl,js,Rl,nu,Xs,Hl){const Nu=Fo.addToLineVertexArray(Ao,ls);let bu,wu,ep,xu,Jy,A1,kw,Dw=0,oE=0,sE=0,aE=0,VA=-1,WA=-1;const Ay={};let lE=I_.exports("");const r0=Yo?Yo.anchor:Ao;let GA=0,HA=0;if(vs._unevaluatedLayout.getValue("text-radial-offset")===void 0?[GA,HA]=vs.layout.get("text-offset").evaluate(js,{},Hl).map(Lp=>Lp*uu):(GA=vs.layout.get("text-radial-offset").evaluate(js,{},Hl)*uu,HA=yw),Fo.allowVerticalPlacement&&fs.vertical){const Lp=fs.vertical;if(Sl)A1=ww(Lp),xl&&(kw=ww(xl));else{const Bp=vs.layout.get("text-rotate").evaluate(js,{},Hl)+90;ep=f1(Es,r0,Ao,Ks,$a,ba,Lp,yl,Bp,Ll),xl&&(xu=f1(Es,r0,Ao,Ks,$a,ba,xl,qs,Bp))}}if(ks){const Lp=vs.layout.get("icon-rotate").evaluate(js,{},Hl),Bp=vs.layout.get("icon-text-fit")!=="none",Lw=Hx(ks,Lp,nu,Bp),qA=xl?Hx(xl,Lp,nu,Bp):void 0;wu=f1(Es,r0,Ao,Ks,$a,ba,ks,qs,Lp),Dw=4*Lw.length;const uE=Fo.iconSizeData;let i0=null;uE.kind==="source"?(i0=[wm*vs.layout.get("icon-size").evaluate(js,{},Hl)],i0[0]>by&&hn(`${Fo.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):uE.kind==="composite"&&(i0=[wm*Rl.compositeIconSizes[0].evaluate(js,{},Hl),wm*Rl.compositeIconSizes[1].evaluate(js,{},Hl)],(i0[0]>by||i0[1]>by)&&hn(`${Fo.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Fo.addSymbols(Fo.icon,Lw,i0,Kl,Ql,js,!1,Yo,Ao,Nu.lineStartIndex,Nu.lineLength,-1,Xs,Hl),VA=Fo.icon.placedSymbolArray.length-1,qA&&(oE=4*qA.length,Fo.addSymbols(Fo.icon,qA,i0,Kl,Ql,js,yp.vertical,Yo,Ao,Nu.lineStartIndex,Nu.lineLength,-1,Xs,Hl),WA=Fo.icon.placedSymbolArray.length-1)}for(const Lp in fs.horizontal){const Bp=fs.horizontal[Lp];bu||(lE=I_.exports(Bp.text),Sl?Jy=ww(Bp):bu=f1(Es,r0,Ao,Ks,$a,ba,Bp,yl,vs.layout.get("text-rotate").evaluate(js,{},Hl),Ll));const Lw=Bp.positionedLines.length===1;if(sE+=vw(Fo,Yo,Ao,Bp,ss,vs,Sl,js,Ll,Nu,fs.vertical?yp.horizontal:yp.horizontalOnly,Lw?Object.keys(fs.horizontal):[Lp],Ay,VA,Rl,Xs,Hl),Lw)break}fs.vertical&&(aE+=vw(Fo,Yo,Ao,fs.vertical,ss,vs,Sl,js,Ll,Nu,yp.vertical,["vertical"],Ay,WA,Rl,Xs,Hl));let ov=-1;const $A=(Lp,Bp)=>Lp?Math.max(Lp,Bp):Bp;ov=$A(Jy,ov),ov=$A(A1,ov),ov=$A(kw,ov);const gE=ov>-1?1:0;Fo.glyphOffsetArray.length>=xy.MAX_GLYPHS&&hn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),js.sortKey!==void 0&&Fo.addToSortKeyRanges(Fo.symbolInstances.length,js.sortKey),Fo.symbolInstances.emplaceBack(r0.x,r0.y,r0.z,Ao.x,Ao.y,Ay.right>=0?Ay.right:-1,Ay.center>=0?Ay.center:-1,Ay.left>=0?Ay.left:-1,Ay.vertical>=0?Ay.vertical:-1,VA,WA,lE,bu!==void 0?bu:Fo.collisionBoxArray.length,bu!==void 0?bu+1:Fo.collisionBoxArray.length,ep!==void 0?ep:Fo.collisionBoxArray.length,ep!==void 0?ep+1:Fo.collisionBoxArray.length,wu!==void 0?wu:Fo.collisionBoxArray.length,wu!==void 0?wu+1:Fo.collisionBoxArray.length,xu||Fo.collisionBoxArray.length,xu?xu+1:Fo.collisionBoxArray.length,Ks,sE,aE,Dw,oE,gE,0,GA,HA,ov)})(nt,So,To,Vr,rt,at,ut,lo,nt.layers[0],nt.collisionBoxArray,_e.index,_e.sourceLayerIndex,nt.index,mr,kr,Wt,0,ar,Jr,On,_e,_t,Zt,tn,cn)};if(ho==="line")for(const Vr of Bu(_e.geometry,0,0,Zo,Zo)){const So=gA(Vr,sr,Br,rt.vertical||Un,at,24,tr,nt.overscaling,Zo);for(const $o of So){const To=Un;To&&bA(nt,To.text,Ur,$o)||go(Vr,$o,cn)}}else if(ho==="line-center"){for(const Vr of _e.geometry)if(Vr.length>1){const So=dA(Vr,Br,rt.vertical||Un,at,24,tr);So&&go(Vr,So,cn)}}else if(_e.type==="Polygon")for(const Vr of nw(_e.geometry,0)){const So=mA(Vr,16);go(Vr[0],new Wm(So.x,So.y,0,0,void 0),cn)}else if(_e.type==="LineString")for(const Vr of _e.geometry)go(Vr,new Wm(Vr[0].x,Vr[0].y,0,0,void 0),cn);else if(_e.type==="Point")for(const Vr of _e.geometry)for(const So of Vr)go([So],new Wm(So.x,So.y,0,0,void 0),cn)}const by=32640;function vw(nt,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn,On,Un){const nr=function(sr,mr,ar,Br,kr,Jr,ho,Ur){const no=[];if(mr.positionedLines.length===0)return no;const oo=Br.layout.get("text-rotate").evaluate(Jr,{})*Math.PI/180,lo=function(To){const Fo=To[0],Ao=To[1],Yo=Fo*Ao;return Yo>0?[Fo,-Ao]:Yo<0?[-Fo,Ao]:Fo===0?[Ao,Fo]:[Ao,-Fo]}(ar);let go=Math.abs(mr.top-mr.bottom);for(const To of mr.positionedLines)go-=To.lineOffset;const Vr=mr.positionedLines.length,So=go/Vr;let $o=mr.top-ar[1];for(let To=0;To<Vr;++To){const Fo=mr.positionedLines[To];$o=pA(mr,So,$o,To);for(const Ao of Fo.positionedGlyphs){if(!Ao.rect)continue;const Yo=Ao.rect||{};let ls=4,fs=!0,ks=1,ss=0;if(Ao.imageName){const Xs=ho[Ao.imageName];if(!Xs)continue;if(Xs.sdf){hn("SDF images are not supported in formatted text and will be ignored.");continue}fs=!1,ks=Xs.pixelRatio,ls=1/ks}const xl=(kr||Ur)&&Ao.vertical,vs=Ao.metrics.advance*Ao.scale/2,Es=Ao.metrics,Ks=Ao.rect;if(Ks===null)continue;Ur&&mr.verticalizable&&(ss=Ao.imageName?vs-Ao.metrics.width*Ao.scale/2:0);const $a=kr?[Ao.x+vs,Ao.y]:[0,0];let ba=[0,0],yl=[0,0],Sl=!1;kr||(xl?(yl=[Ao.x+vs+lo[0],Ao.y+lo[1]-ss],Sl=!0):ba=[Ao.x+vs+ar[0],Ao.y+ar[1]-ss]);const Ll=Ks.w*Ao.scale/(ks*(Ao.localGlyph?2:1)),vu=Ks.h*Ao.scale/(ks*(Ao.localGlyph?2:1));let qs,Ql,Kl,js;if(xl){const Xs=Ao.y-$o,Hl=new mt(-vs,vs-Xs),Nu=-Math.PI/2,bu=new mt(...yl);qs=new mt(-vs+ba[0],ba[1]),qs._rotateAround(Nu,Hl)._add(bu),qs.x+=-Xs+vs,qs.y-=(Es.left-ls)*Ao.scale;const wu=Ao.imageName?Es.advance*Ao.scale:uu*Ao.scale,ep=String.fromCharCode(Ao.glyph);Dl(ep)?qs.x+=(1-ls)*Ao.scale:Wl(ep)?qs.x+=wu-Es.height*Ao.scale+(-ls-1)*Ao.scale:qs.x+=Ao.imageName||Es.width+2*ls===Ks.w&&Es.height+2*ls===Ks.h?(wu-vu)/2:(wu-(Es.height+2*ls)*Ao.scale)/2,Ql=new mt(qs.x,qs.y-Ll),Kl=new mt(qs.x+vu,qs.y),js=new mt(qs.x+vu,qs.y-Ll)}else{const Xs=(Es.left-ls)*Ao.scale-vs+ba[0],Hl=(-Es.top-ls)*Ao.scale+ba[1],Nu=Xs+Ll,bu=Hl+vu;qs=new mt(Xs,Hl),Ql=new mt(Nu,Hl),Kl=new mt(Xs,bu),js=new mt(Nu,bu)}if(oo){let Xs;Xs=kr?new mt(0,0):Sl?new mt(lo[0],lo[1]):new mt(ar[0],ar[1]),qs._rotateAround(oo,Xs),Ql._rotateAround(oo,Xs),Kl._rotateAround(oo,Xs),js._rotateAround(oo,Xs)}const Rl=new mt(0,0),nu=new mt(0,0);no.push({tl:qs,tr:Ql,bl:Kl,br:js,tex:Yo,writingMode:mr.writingMode,glyphOffset:$a,sectionIndex:Ao.sectionIndex,isSDF:fs,pixelOffsetTL:Rl,pixelOffsetBR:nu,minFontScaleX:0,minFontScaleY:0})}}return no}(0,at,Wt,_t,At,Dt,ut,nt.allowVerticalPlacement),hr=nt.textSizeData;let tr=null;hr.kind==="source"?(tr=[wm*_t.layout.get("text-size").evaluate(Dt,{},Un)],tr[0]>by&&hn(`${nt.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):hr.kind==="composite"&&(tr=[wm*xn.compositeTextSizes[0].evaluate(Dt,{},Un),wm*xn.compositeTextSizes[1].evaluate(Dt,{},Un)],(tr[0]>by||tr[1]>by)&&hn(`${nt.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),nt.addSymbols(nt.text,nr,tr,Wt,At,Dt,tn,_e,rt,Zt.lineStartIndex,Zt.lineLength,wn,On,Un);for(const sr of cn)fn[sr]=nt.text.placedSymbolArray.length-1;return 4*nr.length}function bw(nt){for(const _e in nt)return nt[_e];return null}function f1(nt,_e,rt,at,ut,_t,At,Dt,Wt,Zt){let tn=At.top,cn=At.bottom,fn=At.left,wn=At.right;const xn=At.collisionPadding;if(xn&&(fn-=xn[0],tn-=xn[1],wn+=xn[2],cn+=xn[3]),Wt){const On=new mt(fn,tn),Un=new mt(wn,tn),nr=new mt(fn,cn),hr=new mt(wn,cn),tr=xt(Wt);let sr=new mt(0,0);Zt&&(sr=new mt(Zt[0],Zt[1])),On._rotateAround(tr,sr),Un._rotateAround(tr,sr),nr._rotateAround(tr,sr),hr._rotateAround(tr,sr),fn=Math.min(On.x,Un.x,nr.x,hr.x),wn=Math.max(On.x,Un.x,nr.x,hr.x),tn=Math.min(On.y,Un.y,nr.y,hr.y),cn=Math.max(On.y,Un.y,nr.y,hr.y)}return nt.emplaceBack(_e.x,_e.y,_e.z,rt.x,rt.y,fn,tn,wn,cn,Dt,at,ut,_t),nt.length-1}function ww(nt){nt.collisionPadding&&(nt.top-=nt.collisionPadding[1],nt.bottom+=nt.collisionPadding[3]);const _e=nt.bottom-nt.top;return _e>0?Math.max(10,_e):null}function bA(nt,_e,rt,at){const ut=nt.compareText;if(_e in ut){const _t=ut[_e];for(let At=_t.length-1;At>=0;At--)if(at.dist(_t[At])<rt)return!0}else ut[_e]=[];return ut[_e].push(at),!1}const wA=_o([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Yx}=wA,Kx=_o([{name:"a_pos_3",components:3,type:"Int16"}]);var Xv=_o([{name:"a_pos",type:"Int16",components:2}]);const Gm=Zo/Math.PI/2,xw=2*dp(1,0)*Gm*Math.PI,Q_=64,J_=[Q_,32,16],em=-Gm,tm=Gm,xA=[new Ou([em,em,em],[tm,tm,tm]),new Ou([em,em,em],[0,0,tm]),new Ou([0,em,em],[tm,0,tm]),new Ou([em,0,em],[0,tm,tm]),new Ou([0,0,em],[tm,tm,tm])];function Xx(nt,_e,rt,at=!0){const ut=pp([],nt._camera.position,nt.worldSize),_t=[_e,rt,1,1];my(_t,_t,nt.pixelMatrixInverse),Jw(_t,_t,1/_t[3]);const At=Iu([],Pp([],_t,ut)),Dt=nt.globeMatrix,Wt=[Dt[12],Dt[13],Dt[14]],Zt=Pp([],Wt,ut),tn=Jp(Zt),cn=Iu([],Zt),fn=nt.worldSize/(2*Math.PI),wn=Mp(cn,At),xn=Math.asin(fn/tn);if(xn<Math.acos(wn)){if(!at)return null;const ho=[],Ur=[];pp(ho,At,tn/wn),Iu(Ur,Pp(Ur,ho,Zt)),Iu(At,bm(At,Zt,pp(At,Ur,Math.tan(xn)*tn)))}const On=[];new Y1(ut,At).closestPointOnSphere(Wt,fn,On);const Un=Iu([],In(Dt,0)),nr=Iu([],In(Dt,1)),hr=Iu([],In(Dt,2)),tr=Mp(Un,On),sr=Mp(nr,On),mr=Mp(hr,On),ar=St(Math.asin(-sr/fn));let Br=St(Math.atan2(tr,mr));Br=nt.center.lng+function(ho,Ur){const no=(Ur-ho+180)%360-180;return no<-180?no+360:no}(nt.center.lng,Br);const kr=au(Br),Jr=Gt(Kp(ar),0,1);return new dy(kr,Jr)}class SA{constructor(_e,rt,at){this.a=Pp([],_e,at),this.b=Pp([],rt,at),this.center=at;const ut=Iu([],this.a),_t=Iu([],this.b);this.angle=Math.acos(Mp(ut,_t))}}function Sw(nt,_e){if(nt.angle===0)return null;let rt;return rt=nt.a[_e]===0?1/nt.angle*.5*Math.PI:1/nt.angle*Math.atan(nt.b[_e]/nt.a[_e]/Math.sin(nt.angle)-1/Math.tan(nt.angle)),rt<0||rt>1?null:function(at,ut,_t,At){const Dt=Math.sin(_t);return at*(Math.sin((1-At)*_t)/Dt)+ut*(Math.sin(At*_t)/Dt)}(nt.a[_e],nt.b[_e],nt.angle,Gt(rt,0,1))+nt.center[_e]}function Em(nt){if(nt.z<=1)return xA[nt.z+2*nt.y+nt.x];const _e=Aw(d1(nt));return Ou.fromPoints(_e)}function Yy(nt,_e,rt){return pp(nt,nt,1-rt),Uv(nt,nt,_e,rt)}function Qx(nt,_e){const rt=nv(_e.zoom);if(rt===0)return Em(nt);const at=d1(nt),ut=Aw(at),_t=au(at.getWest())*_e.worldSize,At=au(at.getEast())*_e.worldSize,Dt=Kp(at.getNorth())*_e.worldSize,Wt=Kp(at.getSouth())*_e.worldSize,Zt=[_t,Dt,0],tn=[At,Dt,0],cn=[_t,Wt,0],fn=[At,Wt,0],wn=F0([],_e.globeMatrix);return Vl(Zt,Zt,wn),Vl(tn,tn,wn),Vl(cn,cn,wn),Vl(fn,fn,wn),ut[0]=Yy(ut[0],cn,rt),ut[1]=Yy(ut[1],fn,rt),ut[2]=Yy(ut[2],tn,rt),ut[3]=Yy(ut[3],Zt,rt),Ou.fromPoints(ut)}function Jx(nt,_e,rt){for(const at of nt)Vl(at,at,_e),pp(at,at,rt)}function AA(nt,_e,rt){const at=_e/nt.worldSize,ut=nt.globeMatrix;if(rt.z<=1){const kr=Em(rt).getCorners();return Jx(kr,ut,at),Ou.fromPoints(kr)}const _t=d1(rt),At=Aw(_t);Jx(At,ut,at);const Dt=Number.MAX_VALUE,Wt=[-Dt,-Dt,-Dt],Zt=[Dt,Dt,Dt];if(_t.contains(nt.center)){for(const ho of At)Fv(Zt,Zt,ho),Nv(Wt,Wt,ho);Wt[2]=0;const kr=nt.point,Jr=[kr.x*at,kr.y*at,0];return Fv(Zt,Zt,Jr),Nv(Wt,Wt,Jr),new Ou(Zt,Wt)}const tn=[ut[12]*at,ut[13]*at,ut[14]*at],cn=_t.getCenter(),fn=Gt(nt.center.lat,-85.051129,ym),wn=Gt(cn.lat,-85.051129,ym),xn=au(nt.center.lng),On=Kp(fn);let Un=xn-au(cn.lng);const nr=On-Kp(wn);Un>.5?Un-=1:Un<-.5&&(Un+=1);let hr=0;Math.abs(Un)>Math.abs(nr)?hr=Un>=0?1:3:(hr=nr>=0?0:2,Uv(tn,tn,[ut[4]*at,ut[5]*at,ut[6]*at],-Math.sin(xt(nr>=0?_t.getSouth():_t.getNorth()))*Gm));const tr=At[hr],sr=At[(hr+1)%4],mr=new SA(tr,sr,tn),ar=[Sw(mr,0)||tr[0],Sw(mr,1)||tr[1],Sw(mr,2)||tr[2]],Br=nv(nt.zoom);if(Br>0){const kr=function({x:ho,y:Ur,z:no},oo,lo,go,Vr){const So=1/(1<<no);let $o=ho*So,To=$o+So,Fo=Ur*So,Ao=Fo+So,Yo=0;const ls=($o+To)/2-go;return ls>.5?Yo=-1:ls<-.5&&(Yo=1),$o=(($o+Yo)*oo-(go*=oo))*lo+go,To=((To+Yo)*oo-go)*lo+go,Fo=(Fo*oo-(Vr*=oo))*lo+Vr,Ao=(Ao*oo-Vr)*lo+Vr,[[$o,Ao,0],[To,Ao,0],[To,Fo,0],[$o,Fo,0]]}(rt,_e,nt._pixelsPerMercatorPixel,xn,On);for(let ho=0;ho<At.length;ho++)Yy(At[ho],kr[ho],Br);const Jr=bm([],kr[hr],kr[(hr+1)%4]);pp(Jr,Jr,.5),Yy(ar,Jr,Br)}for(const kr of At)Fv(Zt,Zt,kr),Nv(Wt,Wt,kr);return Zt[2]=Math.min(tr[2],sr[2]),Fv(Zt,Zt,ar),Nv(Wt,Wt,ar),new Ou(Zt,Wt)}function d1({x:nt,y:_e,z:rt}){const at=1/(1<<rt),ut=new Os(gp(nt*at),eu((_e+1)*at)),_t=new Os(gp((nt+1)*at),eu(_e*at));return new Yp(ut,_t)}function Aw(nt){const _e=xt(nt.getNorth()),rt=xt(nt.getSouth()),at=Math.cos(_e),ut=Math.cos(rt),_t=Math.sin(_e),At=Math.sin(rt),Dt=nt.getWest(),Wt=nt.getEast();return[ev(ut,At,Dt),ev(ut,At,Wt),ev(at,_t,Wt),ev(at,_t,Dt)]}function ev(nt,_e,rt,at=Gm){return rt=xt(rt),[nt*Math.sin(rt)*at,-_e*at,nt*Math.cos(rt)*at]}function Ky(nt,_e,rt){return ev(Math.cos(xt(nt)),Math.sin(xt(nt)),_e,rt)}function tv(nt,_e,rt,at){const ut=1<<rt.z,_t=(nt/Zo+rt.x)/ut;return Ky(eu((_e/Zo+rt.y)/ut),gp(_t),at)}function Qv({min:nt,max:_e}){return 16383/Math.max(_e[0]-nt[0],_e[1]-nt[1],_e[2]-nt[2])}const eS=new Float64Array(16);function Jv(nt){const _e=Qv(nt),rt=H1(eS,[_e,_e,_e]);return Gy(rt,rt,((at=[])[0]=-(ut=nt.min)[0],at[1]=-ut[1],at[2]=-ut[2],at));var at,ut}function Ew(nt){const _e=(at=nt.min,(rt=eS)[0]=1,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=0,rt[5]=1,rt[6]=0,rt[7]=0,rt[8]=0,rt[9]=0,rt[10]=1,rt[11]=0,rt[12]=at[0],rt[13]=at[1],rt[14]=at[2],rt[15]=1,rt);var rt,at;const ut=1/Qv(nt);return py(_e,_e,[ut,ut,ut])}function g1(nt,_e,rt,at,ut){const _t=function(Wt){const Zt=Zo/(2*Math.PI);return Wt/(2*Math.PI)/Zt}(rt),At=[nt,_e,-rt/(2*Math.PI)],Dt=Xp(new Float64Array(16));return Gy(Dt,Dt,At),py(Dt,Dt,[_t,_t,_t]),Hy(Dt,Dt,xt(-ut)),L_(Dt,Dt,xt(-at)),Dt}function nv(nt){return Ut(5,6,nt)}function tS(nt,_e){const rt=Ky(_e.lat,_e.lng),at=function(xn){const On=Ky(xn._center.lat,xn._center.lng);let Un=Z1([],B_(0,1,0),On);const nr=$1([],-xn.angle,On);Un=Vl(Un,Un,nr),$1(nr,-xn._pitch,Un);const hr=Iu([],On);return pp(hr,hr,xn.cameraToCenterDistance/xn.pixelsPerMeter*xw),Vl(hr,hr,nr),bm([],On,hr)}(nt);return At=(ut=q1([],at,rt))[0],Dt=ut[1],Wt=ut[2],Zt=(_t=rt)[0],tn=_t[1],cn=_t[2],wn=(fn=Math.sqrt(At*At+Dt*Dt+Wt*Wt)*Math.sqrt(Zt*Zt+tn*tn+cn*cn))&&Mp(ut,_t)/fn,Math.acos(Math.min(Math.max(wn,-1),1));var ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn}const nS=xt(85),_d=Math.cos(nS),Tw=Math.sin(nS);function rS(nt,_e){const rt=nt.fovAboveCenter,at=nt.elevation?nt.elevation.getMinElevationBelowMSL()*_e:0,ut=(nt._camera.position[2]*nt.worldSize-at)/Math.cos(nt._pitch),_t=Math.sin(rt)*ut/Math.sin(Math.max(Math.PI/2-nt._pitch-rt,.01)),At=Math.sin(nt._pitch)*_t+ut;return Math.min(1.01*At,ut*(1/nt._horizonShift))}function Xy(nt,_e){if(!_e.isReprojectedInTileSpace)return{scale:1<<nt.z,x:nt.x,y:nt.y,x2:nt.x+1,y2:nt.y+1,projection:_e};const rt=Math.pow(2,-nt.z),at=nt.x*rt,ut=(nt.x+1)*rt,_t=nt.y*rt,At=(nt.y+1)*rt,Dt=gp(at),Wt=gp(ut),Zt=eu(_t),tn=eu(At),cn=_e.project(Dt,Zt),fn=_e.project(Wt,Zt),wn=_e.project(Wt,tn),xn=_e.project(Dt,tn);let On=Math.min(cn.x,fn.x,wn.x,xn.x),Un=Math.min(cn.y,fn.y,wn.y,xn.y),nr=Math.max(cn.x,fn.x,wn.x,xn.x),hr=Math.max(cn.y,fn.y,wn.y,xn.y);const tr=rt/16;function sr(ar,Br,kr,Jr,ho,Ur){const no=(kr+ho)/2,oo=(Jr+Ur)/2,lo=_e.project(gp(no),eu(oo)),go=Math.max(0,On-lo.x,Un-lo.y,lo.x-nr,lo.y-hr);On=Math.min(On,lo.x),nr=Math.max(nr,lo.x),Un=Math.min(Un,lo.y),hr=Math.max(hr,lo.y),go>tr&&(sr(ar,lo,kr,Jr,no,oo),sr(lo,Br,no,oo,ho,Ur))}sr(cn,fn,at,_t,ut,_t),sr(fn,wn,ut,_t,ut,At),sr(wn,xn,ut,At,at,At),sr(xn,cn,at,At,at,_t),On-=tr,Un-=tr,nr+=tr,hr+=tr;const mr=1/Math.max(nr-On,hr-Un);return{scale:mr,x:On*mr,y:Un*mr,x2:nr*mr,y2:hr*mr,projection:_e}}const EA=Xp(new Float32Array(16));class wy{constructor(_e){this.spec=_e,this.name=_e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(_e,rt){return{x:0,y:0,z:0}}unproject(_e,rt){return new Os(0,0)}projectTilePoint(_e,rt,at){return{x:_e,y:rt,z:0}}locationPoint(_e,rt,at=!0){return _e._coordinatePoint(_e.locationCoordinate(rt),at)}pixelsPerMeter(_e,rt){return dp(1,_e)*rt}pixelSpaceConversion(_e,rt,at){return 1}farthestPixelDistance(_e){return rS(_e,_e.pixelsPerMeter)}pointCoordinate(_e,rt,at,ut){const _t=_e.horizonLineFromTop(!1),At=new mt(rt,Math.max(_t,at));return _e.rayIntersectionCoordinate(_e.pointRayIntersection(At,ut))}pointCoordinate3D(_e,rt,at){const ut=new mt(rt,at);if(_e.elevation)return _e.elevation.pointCoordinate(ut);{const _t=this.pointCoordinate(_e,ut.x,ut.y,0);return[_t.x,_t.y,_t.z]}}isPointAboveHorizon(_e,rt){if(_e.elevation)return!this.pointCoordinate3D(_e,rt.x,rt.y);const at=_e.horizonLineFromTop();return rt.y<at}createInversionMatrix(_e,rt){return EA}createTileMatrix(_e,rt,at){let ut,_t,At;const Dt=at.canonical,Wt=Xp(new Float64Array(16));if(this.isReprojectedInTileSpace){const Zt=Xy(Dt,this);ut=1,_t=Zt.x+at.wrap*Zt.scale,At=Zt.y,py(Wt,Wt,[ut/Zt.scale,ut/Zt.scale,_e.pixelsPerMeter/rt])}else ut=rt/_e.zoomScale(Dt.z),_t=(Dt.x+Math.pow(2,Dt.z)*at.wrap)*ut,At=Dt.y*ut;return Gy(Wt,Wt,[_t,At,0]),py(Wt,Wt,[ut/Zo,ut/Zo,1]),Wt}upVector(_e,rt,at){return[0,0,1]}upVectorScale(_e,rt,at){return{metersToTile:1}}}class Cw extends wy{constructor(_e){super(_e),this.range=[4,7],this.center=_e.center||[-96,37.5];const[rt,at]=this.parallels=_e.parallels||[29.5,45.5],ut=Math.sin(xt(rt));this.n=(ut+Math.sin(xt(at)))/2,this.c=1+ut*(2*this.n-ut),this.r0=Math.sqrt(this.c)/this.n}project(_e,rt){const{n:at,c:ut,r0:_t}=this,At=xt(_e-this.center[0]),Dt=xt(rt),Wt=Math.sqrt(ut-2*at*Math.sin(Dt))/at;return{x:Wt*Math.sin(At*at),y:Wt*Math.cos(At*at)-_t,z:0}}unproject(_e,rt){const{n:at,c:ut,r0:_t}=this,At=_t+rt;let Dt=Math.atan2(_e,Math.abs(At))*Math.sign(At);At*at<0&&(Dt-=Math.PI*Math.sign(_e)*Math.sign(At));const Wt=xt(this.center[0])*at;Dt=Ht(Dt,-Math.PI-Wt,Math.PI-Wt);const Zt=Gt(St(Dt/at)+this.center[0],-180,180),tn=Math.asin(Gt((ut-(_e*_e+At*At)*at*at)/(2*at),-1,1)),cn=Gt(St(tn),-85.051129,ym);return new Os(Zt,cn)}}const _b=1.340264,Qy=-.081106,e0=893e-6,t0=.003796,p1=Math.sqrt(3)/2;class TA extends wy{project(_e,rt){rt=rt/180*Math.PI,_e=_e/180*Math.PI;const at=Math.asin(p1*Math.sin(rt)),ut=at*at,_t=ut*ut*ut;return{x:.5*(_e*Math.cos(at)/(p1*(_b+3*Qy*ut+_t*(7*e0+9*t0*ut)))/Math.PI+.5),y:1-.5*(at*(_b+Qy*ut+_t*(e0+t0*ut))/Math.PI+1),z:0}}unproject(_e,rt){_e=(2*_e-.5)*Math.PI;let at=rt=(2*(1-rt)-1)*Math.PI,ut=at*at,_t=ut*ut*ut;for(let tn,cn,fn,wn=0;wn<12&&(cn=at*(_b+Qy*ut+_t*(e0+t0*ut))-rt,fn=_b+3*Qy*ut+_t*(7*e0+9*t0*ut),tn=cn/fn,at=Gt(at-tn,-Math.PI/3,Math.PI/3),ut=at*at,_t=ut*ut*ut,!(Math.abs(tn)<1e-12));++wn);const At=p1*_e*(_b+3*Qy*ut+_t*(7*e0+9*t0*ut))/Math.cos(at),Dt=Math.asin(Math.sin(at)/p1),Wt=Gt(180*At/Math.PI,-180,180),Zt=Gt(180*Dt/Math.PI,-85.051129,ym);return new Os(Wt,Zt)}}class iS extends wy{constructor(_e){super(_e),this.wrap=!0,this.supportsWorldCopies=!0}project(_e,rt){return{x:.5+_e/360,y:.5-rt/360,z:0}}unproject(_e,rt){const at=360*(_e-.5),ut=Gt(360*(.5-rt),-85.051129,ym);return new Os(at,ut)}}const rv=Math.PI/2;function m1(nt){return Math.tan((rv+nt)/2)}class CA extends wy{constructor(_e){super(_e),this.center=_e.center||[0,30];const[rt,at]=this.parallels=_e.parallels||[30,30];let ut=xt(rt),_t=xt(at);this.southernCenter=ut+_t<0,this.southernCenter&&(ut=-ut,_t=-_t);const At=Math.cos(ut),Dt=m1(ut);this.n=ut===_t?Math.sin(ut):Math.log(At/Math.cos(_t))/Math.log(m1(_t)/Dt),this.f=At*Math.pow(m1(ut),this.n)/this.n}project(_e,rt){rt=xt(rt),this.southernCenter&&(rt=-rt),_e=xt(_e-this.center[0]);const at=1e-6,{n:ut,f:_t}=this;_t>0?rt<-rv+at&&(rt=-rv+at):rt>rv-at&&(rt=rv-at);const At=_t/Math.pow(m1(rt),ut);let Dt=At*Math.sin(ut*_e),Wt=_t-At*Math.cos(ut*_e);return Dt=.5*(Dt/Math.PI+.5),Wt=.5*(Wt/Math.PI+.5),{x:Dt,y:this.southernCenter?Wt:1-Wt,z:0}}unproject(_e,rt){_e=(2*_e-.5)*Math.PI,this.southernCenter&&(rt=1-rt),rt=(2*(1-rt)-.5)*Math.PI;const{n:at,f:ut}=this,_t=ut-rt,At=Math.sign(_t),Dt=Math.sign(at)*Math.sqrt(_e*_e+_t*_t);let Wt=Math.atan2(_e,Math.abs(_t))*At;_t*at<0&&(Wt-=Math.PI*Math.sign(_e)*At);const Zt=Gt(St(Wt/at)+this.center[0],-180,180),tn=Gt(St(2*Math.atan(Math.pow(ut/Dt,1/at))-rv),-85.051129,ym);return new Os(Zt,this.southernCenter?-tn:tn)}}class y1 extends wy{constructor(_e){super(_e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(_e,rt){return{x:au(_e),y:Kp(rt),z:0}}unproject(_e,rt){const at=gp(_e),ut=eu(rt);return new Os(at,ut)}}const _1=xt(ym);class RA extends wy{project(_e,rt){const at=(rt=xt(rt))*rt,ut=at*at;return{x:.5*((_e=xt(_e))*(.8707-.131979*at+ut*(ut*(.003971*at-.001529*ut)-.013791))/Math.PI+.5),y:1-.5*(rt*(1.007226+at*(.015085+ut*(.028874*at-.044475-.005916*ut)))/Math.PI+1),z:0}}unproject(_e,rt){_e=(2*_e-.5)*Math.PI;let at=rt=(2*(1-rt)-1)*Math.PI,ut=25,_t=0,At=at*at;do{At=at*at;const Zt=At*At;_t=(at*(1.007226+At*(.015085+Zt*(.028874*At-.044475-.005916*Zt)))-rt)/(1.007226+At*(.045255+Zt*(.259866*At-.311325-.005916*11*Zt))),at=Gt(at-_t,-_1,_1)}while(Math.abs(_t)>1e-6&&--ut>0);At=at*at;const Dt=Gt(St(_e/(.8707+At*(At*(At*At*At*(.003971-.001529*At)-.013791)-.131979))),-180,180),Wt=St(at);return new Os(Dt,Wt)}}const oS=xt(ym);class IA extends wy{project(_e,rt){rt=xt(rt),_e=xt(_e);const at=Math.cos(rt),ut=2/Math.PI,_t=Math.acos(at*Math.cos(_e/2)),At=Math.sin(_t)/_t,Dt=.5*(_e*ut+2*at*Math.sin(_e/2)/At)||0,Wt=.5*(rt+Math.sin(rt)/At)||0;return{x:.5*(Dt/Math.PI+.5),y:1-.5*(Wt/Math.PI+1),z:0}}unproject(_e,rt){let at=_e=(2*_e-.5)*Math.PI,ut=rt=(2*(1-rt)-1)*Math.PI,_t=25;const At=1e-6;let Dt=0,Wt=0;do{const Zt=Math.cos(ut),tn=Math.sin(ut),cn=2*tn*Zt,fn=tn*tn,wn=Zt*Zt,xn=Math.cos(at/2),On=Math.sin(at/2),Un=2*xn*On,nr=On*On,hr=1-wn*xn*xn,tr=hr?1/hr:0,sr=hr?Math.acos(Zt*xn)*Math.sqrt(1/hr):0,mr=.5*(2*sr*Zt*On+2*at/Math.PI)-_e,ar=.5*(sr*tn+ut)-rt,Br=.5*tr*(wn*nr+sr*Zt*xn*fn)+1/Math.PI,kr=tr*(Un*cn/4-sr*tn*On),Jr=.125*tr*(cn*On-sr*tn*wn*Un),ho=.5*tr*(fn*xn+sr*nr*Zt)+.5,Ur=kr*Jr-ho*Br;Dt=(ar*kr-mr*ho)/Ur,Wt=(mr*Jr-ar*Br)/Ur,at=Gt(at-Dt,-Math.PI,Math.PI),ut=Gt(ut-Wt,-oS,oS)}while((Math.abs(Dt)>At||Math.abs(Wt)>At)&&--_t>0);return new Os(St(at),St(ut))}}class sS extends wy{constructor(_e){super(_e),this.center=_e.center||[0,0],this.parallels=_e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(xt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(_e,rt){const{scale:at,cosPhi:ut}=this;return{x:xt(_e)*ut*at+.5,y:-Math.sin(xt(rt))/ut*at+.5,z:0}}unproject(_e,rt){const{scale:at,cosPhi:ut}=this,_t=-(rt-.5)/at,At=Gt(St((_e-.5)/at)/ut,-180,180),Dt=Math.asin(Gt(_t*ut,-1,1)),Wt=Gt(St(Dt),-85.051129,ym);return new Os(At,Wt)}}class OA extends y1{constructor(_e){super(_e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(_e,rt,at){const ut=tv(_e,rt,at);return Vl(ut,ut,Jv(Em(at))),{x:ut[0],y:ut[1],z:ut[2]}}locationPoint(_e,rt){const at=Ky(rt.lat,rt.lng),ut=Iu([],at),_t=_e.elevation?_e.elevation.getAtPointOrZero(_e.locationCoordinate(rt),_e._centerAltitude):_e._centerAltitude;Uv(at,at,ut,dp(1,0)*Zo*_t);const At=Xp(new Float64Array(16));return D_(At,_e.pixelMatrix,_e.globeMatrix),Vl(at,at,At),new mt(at[0],at[1])}pixelsPerMeter(_e,rt){return dp(1,0)*rt}pixelSpaceConversion(_e,rt,at){const ut=dp(1,_e)*rt,_t=Ts(dp(1,45)*rt,ut,at);return this.pixelsPerMeter(_e,rt)/_t}createTileMatrix(_e,rt,at){const ut=Ew(Em(at.canonical));return D_(new Float64Array(16),_e.globeMatrix,ut)}createInversionMatrix(_e,rt){const{center:at}=_e,ut=Jv(Em(rt));return L_(ut,ut,xt(at.lng)),Hy(ut,ut,xt(at.lat)),py(ut,ut,[_e._pixelsPerMercatorPixel,_e._pixelsPerMercatorPixel,1]),Float32Array.from(ut)}pointCoordinate(_e,rt,at,ut){return Xx(_e,rt,at,!0)||new dy(0,0)}pointCoordinate3D(_e,rt,at){const ut=this.pointCoordinate(_e,rt,at,0);return[ut.x,ut.y,ut.z]}isPointAboveHorizon(_e,rt){return!Xx(_e,rt.x,rt.y,!1)}farthestPixelDistance(_e){const rt=function(ut,_t){const At=ut.cameraToCenterDistance,Dt=ut._centerAltitude*_t,Wt=ut._camera,Zt=ut._camera.forward(),tn=bm([],pp([],Zt,-At),[0,0,Dt]),cn=ut.worldSize/(2*Math.PI),fn=[0,0,-cn],wn=ut.width/ut.height,xn=Math.tan(ut.fovAboveCenter),On=pp([],Wt.up(),xn),Un=pp([],Wt.right(),xn*wn),nr=Iu([],bm([],bm([],Zt,On),Un)),hr=[];let tr;if(new Y1(tn,nr).closestPointOnSphere(fn,cn,hr)){const sr=bm([],hr,fn),mr=Pp([],sr,tn);tr=Math.cos(ut.fovAboveCenter)*Jp(mr)}else{const sr=Pp([],tn,fn),mr=Pp([],fn,tn);Iu(mr,mr);const ar=Jp(sr)-cn;tr=Math.sqrt(ar*(ar+2*cn));const Br=Math.acos(tr/(cn+ar))-Math.acos(Mp(Zt,mr));tr*=Math.cos(Br)}return 1.01*tr}(_e,this.pixelsPerMeter(_e.center.lat,_e.worldSize)),at=nv(_e.zoom);if(at>0){const ut=rS(_e,dp(1,_e.center.lat)*_e.worldSize),_t=_e.worldSize/(2*Math.PI),At=Math.max(_e.width,_e.height)/_e.worldSize*Math.PI;return Ts(rt,ut+_t*(1-Math.cos(At)),Math.pow(at,10))}return rt}upVector(_e,rt,at){return tv(rt,at,_e,1)}upVectorScale(_e){return{metersToTile:xw*Qv(Em(_e))}}}function aS(nt){const _e=nt.parallels,rt=!!_e&&Math.abs(_e[0]+_e[1])<.01;switch(nt.name){case"mercator":return new y1(nt);case"equirectangular":return new iS(nt);case"naturalEarth":return new RA(nt);case"equalEarth":return new TA(nt);case"winkelTripel":return new IA(nt);case"albers":return rt?new sS(nt):new Cw(nt);case"lambertConformalConic":return rt?new sS(nt):new CA(nt);case"globe":return new OA(nt)}throw new Error(`Invalid projection name: ${nt.name}`)}const MA=K0.types,PA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function v1(nt,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn){const wn=Dt?Math.min(by,Math.round(Dt[0])):0,xn=Dt?Math.min(by,Math.round(Dt[1])):0;nt.emplaceBack(_e,rt,Math.round(32*at),Math.round(32*ut),_t,At,(wn<<1)+(Wt?1:0),xn,16*Zt,16*tn,256*cn,256*fn)}function b1(nt,_e,rt,at,ut,_t,At){nt.emplaceBack(_e,rt,at,ut,_t,At)}function w1(nt,_e,rt,at,ut){nt.emplaceBack(_e,rt,at,ut),nt.emplaceBack(_e,rt,at,ut),nt.emplaceBack(_e,rt,at,ut),nt.emplaceBack(_e,rt,at,ut)}function kA(nt){for(const _e of nt.sections)if(pn(_e.text))return!0;return!1}class Rw{constructor(_e){this.layoutVertexArray=new _l,this.indexArray=new Jl,this.programConfigurations=_e,this.segments=new zl,this.dynamicLayoutVertexArray=new Ul,this.opacityVertexArray=new Ol,this.placedSymbolArray=new R1,this.globeExtVertexArray=new Ls}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(_e,rt,at,ut){this.isEmpty()||(at&&(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,nA.members),this.indexBuffer=_e.createIndexBuffer(this.indexArray,rt),this.dynamicLayoutVertexBuffer=_e.createVertexBuffer(this.dynamicLayoutVertexArray,Yl.members,!0),this.opacityVertexBuffer=_e.createVertexBuffer(this.opacityVertexArray,PA,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=_e.createVertexBuffer(this.globeExtVertexArray,_f.members,!0)),this.opacityVertexBuffer.itemSize=1),(at||ut)&&this.programConfigurations.upload(_e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Oo(Rw,"SymbolBuffers");class Iw{constructor(_e,rt,at){this.layoutVertexArray=new _e,this.layoutAttributes=rt,this.indexArray=new at,this.segments=new zl,this.collisionVertexArray=new qp,this.collisionVertexArrayExt=new Zu}upload(_e){this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=_e.createVertexBuffer(this.collisionVertexArray,rA.members,!0),this.collisionVertexBufferExt=_e.createVertexBuffer(this.collisionVertexArrayExt,_y.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Oo(Iw,"CollisionBuffers");class xy{constructor(_e){this.collisionBoxArray=_e.collisionBoxArray,this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(At=>At.id),this.index=_e.index,this.pixelRatio=_e.pixelRatio,this.sourceLayerIndex=_e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xp([]),this.placementViewportMatrix=Xp([]);const rt=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hw(this.zoom,rt["text-size"]),this.iconSizeData=hw(this.zoom,rt["icon-size"]);const at=this.layers[0].layout,ut=at.get("symbol-sort-key"),_t=at.get("symbol-z-order");this.canOverlap=at.get("text-allow-overlap")||at.get("icon-allow-overlap")||at.get("text-ignore-placement")||at.get("icon-ignore-placement"),this.sortFeaturesByKey=_t!=="viewport-y"&&ut.constantOr(1)!==void 0,this.sortFeaturesByY=(_t==="viewport-y"||_t==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=at.get("text-writing-mode").map(At=>yp[At]),this.stateDependentLayerIds=this.layers.filter(At=>At.isStateDependent()).map(At=>At.id),this.sourceID=_e.sourceID,this.projection=_e.projection}createArrays(){this.text=new Rw(new Op(this.layers,this.zoom,_e=>/^text/.test(_e))),this.icon=new Rw(new Op(this.layers,this.zoom,_e=>/^icon/.test(_e))),this.glyphOffsetArray=new jm,this.lineVertexArray=new T0,this.symbolInstances=new Yu}calculateGlyphDependencies(_e,rt,at,ut,_t){for(let At=0;At<_e.length;At++)if(rt[_e.charCodeAt(At)]=!0,ut&&_t){const Dt=vy[_e.charAt(At)];Dt&&(rt[Dt.charCodeAt(0)]=!0)}}populate(_e,rt,at,ut){const _t=this.layers[0],At=_t.layout,Dt=this.projection.name==="globe",Wt=At.get("text-font"),Zt=At.get("text-field"),tn=At.get("icon-image"),cn=(Zt.value.kind!=="constant"||Zt.value.value instanceof zt&&!Zt.value.value.isEmpty()||Zt.value.value.toString().length>0)&&(Wt.value.kind!=="constant"||Wt.value.value.length>0),fn=tn.value.kind!=="constant"||!!tn.value.value||Object.keys(tn.parameters).length>0,wn=At.get("symbol-sort-key");if(this.features=[],!cn&&!fn)return;const xn=rt.iconDependencies,On=rt.glyphDependencies,Un=rt.availableImages,nr=new er(this.zoom);for(const{feature:hr,id:tr,index:sr,sourceLayerIndex:mr}of _e){const ar=_t._featureFilter.needGeometry,Br=Wy(hr,ar);if(!_t._featureFilter.filter(nr,Br,at))continue;if(ar||(Br.geometry=Lu(hr,at,ut)),Dt&&hr.type!==1&&at.z<=5){const Ur=Br.geometry,no=.98078528056,oo=(lo,go)=>Mp(tv(lo.x,lo.y,at,1),tv(go.x,go.y,at,1))<no;for(let lo=0;lo<Ur.length;lo++)Ur[lo]=M_(Ur[lo],oo)}let kr,Jr;if(cn){const Ur=_t.getValueAndResolveTokens("text-field",Br,at,Un),no=zt.factory(Ur);kA(no)&&(this.hasRTLText=!0),(!this.hasRTLText||Gn()==="unavailable"||this.hasRTLText&&lr.isParsed())&&(kr=Rx(no,_t,Br))}if(fn){const Ur=_t.getValueAndResolveTokens("icon-image",Br,at,Un);Jr=Ur instanceof on?Ur:on.fromString(Ur)}if(!kr&&!Jr)continue;const ho=this.sortFeaturesByKey?wn.evaluate(Br,{},at):void 0;if(this.features.push({id:tr,text:kr,icon:Jr,index:sr,sourceLayerIndex:mr,geometry:Br.geometry,properties:hr.properties,type:MA[hr.type],sortKey:ho}),Jr&&(xn[Jr.name]=!0),kr){const Ur=Wt.evaluate(Br,{},at).join(","),no=At.get("text-rotation-alignment")==="map"&&At.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(yp.vertical)>=0;for(const oo of kr.sections)if(oo.image)xn[oo.image.name]=!0;else{const lo=lt(kr.toString()),go=oo.fontStack||Ur,Vr=On[go]=On[go]||{};this.calculateGlyphDependencies(oo.text,Vr,no,this.allowVerticalPlacement,lo)}}}At.get("symbol-placement")==="line"&&(this.features=function(hr){const tr={},sr={},mr=[];let ar=0;function Br(Ur){mr.push(hr[Ur]),ar++}function kr(Ur,no,oo){const lo=sr[Ur];return delete sr[Ur],sr[no]=lo,mr[lo].geometry[0].pop(),mr[lo].geometry[0]=mr[lo].geometry[0].concat(oo[0]),lo}function Jr(Ur,no,oo){const lo=tr[no];return delete tr[no],tr[Ur]=lo,mr[lo].geometry[0].shift(),mr[lo].geometry[0]=oo[0].concat(mr[lo].geometry[0]),lo}function ho(Ur,no,oo){const lo=oo?no[0][no[0].length-1]:no[0][0];return`${Ur}:${lo.x}:${lo.y}`}for(let Ur=0;Ur<hr.length;Ur++){const no=hr[Ur],oo=no.geometry,lo=no.text?no.text.toString():null;if(!lo){Br(Ur);continue}const go=ho(lo,oo),Vr=ho(lo,oo,!0);if(go in sr&&Vr in tr&&sr[go]!==tr[Vr]){const So=Jr(go,Vr,oo),$o=kr(go,Vr,mr[So].geometry);delete tr[go],delete sr[Vr],sr[ho(lo,mr[$o].geometry,!0)]=$o,mr[So].geometry=null}else go in sr?kr(go,Vr,oo):Vr in tr?Jr(go,Vr,oo):(Br(Ur),tr[go]=ar-1,sr[Vr]=ar-1)}return mr.filter(Ur=>Ur.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((hr,tr)=>hr.sortKey-tr.sortKey)}update(_e,rt,at,ut){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(_e,rt,this.layers,at,ut),this.icon.programConfigurations.updatePaintArrays(_e,rt,this.layers,at,ut))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(_e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(_e),this.iconCollisionBox.upload(_e)),this.text.upload(_e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(_e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=aS(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(_e,rt){const at=this.lineVertexArray.length,ut=_e.segment;if(ut!==void 0){let _t=_e.dist(rt[ut+1]),At=_e.dist(rt[ut]);const Dt={};for(let Wt=ut+1;Wt<rt.length;Wt++)Dt[Wt]={x:rt[Wt].x,y:rt[Wt].y,tileUnitDistanceFromAnchor:_t},Wt<rt.length-1&&(_t+=rt[Wt+1].dist(rt[Wt]));for(let Wt=ut||0;Wt>=0;Wt--)Dt[Wt]={x:rt[Wt].x,y:rt[Wt].y,tileUnitDistanceFromAnchor:At},Wt>0&&(At+=rt[Wt-1].dist(rt[Wt]));for(let Wt=0;Wt<rt.length;Wt++){const Zt=Dt[Wt];this.lineVertexArray.emplaceBack(Zt.x,Zt.y,Zt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:at,lineLength:this.lineVertexArray.length-at}}addSymbols(_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn,cn,fn,wn,xn){const On=_e.indexArray,Un=_e.layoutVertexArray,nr=_e.globeExtVertexArray,hr=_e.segments.prepareSegment(4*rt.length,Un,On,this.canOverlap?At.sortKey:void 0),tr=this.glyphOffsetArray.length,sr=hr.vertexLength,mr=this.allowVerticalPlacement&&Dt===yp.vertical?Math.PI/2:0,ar=At.text&&At.text.sections;for(let kr=0;kr<rt.length;kr++){const{tl:Jr,tr:ho,bl:Ur,br:no,tex:oo,pixelOffsetTL:lo,pixelOffsetBR:go,minFontScaleX:Vr,minFontScaleY:So,glyphOffset:$o,isSDF:To,sectionIndex:Fo}=rt[kr],Ao=hr.vertexLength,Yo=$o[1];if(v1(Un,Zt.x,Zt.y,Jr.x,Yo+Jr.y,oo.x,oo.y,at,To,lo.x,lo.y,Vr,So),v1(Un,Zt.x,Zt.y,ho.x,Yo+ho.y,oo.x+oo.w,oo.y,at,To,go.x,lo.y,Vr,So),v1(Un,Zt.x,Zt.y,Ur.x,Yo+Ur.y,oo.x,oo.y+oo.h,at,To,lo.x,go.y,Vr,So),v1(Un,Zt.x,Zt.y,no.x,Yo+no.y,oo.x+oo.w,oo.y+oo.h,at,To,go.x,go.y,Vr,So),Wt){const ls=Wt.anchor,fs=Wt.up;b1(nr,ls.x,ls.y,ls.z,fs[0],fs[1],fs[2]),b1(nr,ls.x,ls.y,ls.z,fs[0],fs[1],fs[2]),b1(nr,ls.x,ls.y,ls.z,fs[0],fs[1],fs[2]),b1(nr,ls.x,ls.y,ls.z,fs[0],fs[1],fs[2]),w1(_e.dynamicLayoutVertexArray,ls.x,ls.y,ls.z,mr)}else w1(_e.dynamicLayoutVertexArray,Zt.x,Zt.y,Zt.z,mr);On.emplaceBack(Ao,Ao+1,Ao+2),On.emplaceBack(Ao+1,Ao+2,Ao+3),hr.vertexLength+=4,hr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($o[0]),kr!==rt.length-1&&Fo===rt[kr+1].sectionIndex||_e.programConfigurations.populatePaintArrays(Un.length,At,At.index,{},wn,xn,ar&&ar[Fo])}const Br=Wt?Wt.anchor:Zt;_e.placedSymbolArray.emplaceBack(Br.x,Br.y,Br.z,Zt.x,Zt.y,tr,this.glyphOffsetArray.length-tr,sr,tn,cn,Zt.segment,at?at[0]:0,at?at[1]:0,ut[0],ut[1],Dt,0,!1,0,fn,0)}_commitLayoutVertex(_e,rt,at,ut,_t,At,Dt){_e.emplaceBack(rt,at,ut,_t,At,Math.round(Dt.x),Math.round(Dt.y))}_addCollisionDebugVertices(_e,rt,at,ut,_t,At,Dt){const Wt=at.segments.prepareSegment(4,at.layoutVertexArray,at.indexArray),Zt=Wt.vertexLength,tn=Dt.tileAnchorX,cn=Dt.tileAnchorY;for(let wn=0;wn<4;wn++)at.collisionVertexArray.emplaceBack(0,0,0,0);at.collisionVertexArrayExt.emplaceBack(rt,-_e.padding,-_e.padding),at.collisionVertexArrayExt.emplaceBack(rt,_e.padding,-_e.padding),at.collisionVertexArrayExt.emplaceBack(rt,_e.padding,_e.padding),at.collisionVertexArrayExt.emplaceBack(rt,-_e.padding,_e.padding),this._commitLayoutVertex(at.layoutVertexArray,ut,_t,At,tn,cn,new mt(_e.x1,_e.y1)),this._commitLayoutVertex(at.layoutVertexArray,ut,_t,At,tn,cn,new mt(_e.x2,_e.y1)),this._commitLayoutVertex(at.layoutVertexArray,ut,_t,At,tn,cn,new mt(_e.x2,_e.y2)),this._commitLayoutVertex(at.layoutVertexArray,ut,_t,At,tn,cn,new mt(_e.x1,_e.y2)),Wt.vertexLength+=4;const fn=at.indexArray;fn.emplaceBack(Zt,Zt+1),fn.emplaceBack(Zt+1,Zt+2),fn.emplaceBack(Zt+2,Zt+3),fn.emplaceBack(Zt+3,Zt),Wt.primitiveLength+=4}_addTextDebugCollisionBoxes(_e,rt,at,ut,_t,At){for(let Dt=ut;Dt<_t;Dt++){const Wt=at.get(Dt),Zt=this.getSymbolInstanceTextSize(_e,At,rt,Dt);this._addCollisionDebugVertices(Wt,Zt,this.textCollisionBox,Wt.projectedAnchorX,Wt.projectedAnchorY,Wt.projectedAnchorZ,At)}}_addIconDebugCollisionBoxes(_e,rt,at,ut,_t,At){for(let Dt=ut;Dt<_t;Dt++){const Wt=at.get(Dt),Zt=this.getSymbolInstanceIconSize(_e,rt,At.placedIconSymbolIndex);this._addCollisionDebugVertices(Wt,Zt,this.iconCollisionBox,Wt.projectedAnchorX,Wt.projectedAnchorY,Wt.projectedAnchorZ,At)}}generateCollisionDebugBuffers(_e,rt){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Iw($s,Cx.members,_u),this.iconCollisionBox=new Iw($s,Cx.members,_u);const at=H_(this.iconSizeData,_e),ut=H_(this.textSizeData,_e);for(let _t=0;_t<this.symbolInstances.length;_t++){const At=this.symbolInstances.get(_t);this._addTextDebugCollisionBoxes(ut,_e,rt,At.textBoxStartIndex,At.textBoxEndIndex,At),this._addTextDebugCollisionBoxes(ut,_e,rt,At.verticalTextBoxStartIndex,At.verticalTextBoxEndIndex,At),this._addIconDebugCollisionBoxes(at,_e,rt,At.iconBoxStartIndex,At.iconBoxEndIndex,At),this._addIconDebugCollisionBoxes(at,_e,rt,At.verticalIconBoxStartIndex,At.verticalIconBoxEndIndex,At)}}getSymbolInstanceTextSize(_e,rt,at,ut){const _t=this.text.placedSymbolArray.get(rt.rightJustifiedTextSymbolIndex>=0?rt.rightJustifiedTextSymbolIndex:rt.centerJustifiedTextSymbolIndex>=0?rt.centerJustifiedTextSymbolIndex:rt.leftJustifiedTextSymbolIndex>=0?rt.leftJustifiedTextSymbolIndex:rt.verticalPlacedTextSymbolIndex>=0?rt.verticalPlacedTextSymbolIndex:ut),At=G_(this.textSizeData,_e,_t)/uu;return this.tilePixelRatio*At}getSymbolInstanceIconSize(_e,rt,at){const ut=this.icon.placedSymbolArray.get(at),_t=G_(this.iconSizeData,_e,ut);return this.tilePixelRatio*_t}_commitDebugCollisionVertexUpdate(_e,rt,at){_e.emplaceBack(rt,-at,-at),_e.emplaceBack(rt,at,-at),_e.emplaceBack(rt,at,at),_e.emplaceBack(rt,-at,at)}_updateTextDebugCollisionBoxes(_e,rt,at,ut,_t,At){for(let Dt=ut;Dt<_t;Dt++){const Wt=at.get(Dt),Zt=this.getSymbolInstanceTextSize(_e,At,rt,Dt);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,Zt,Wt.padding)}}_updateIconDebugCollisionBoxes(_e,rt,at,ut,_t,At){for(let Dt=ut;Dt<_t;Dt++){const Wt=at.get(Dt),Zt=this.getSymbolInstanceIconSize(_e,rt,At);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,Zt,Wt.padding)}}updateCollisionDebugBuffers(_e,rt){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const at=H_(this.iconSizeData,_e),ut=H_(this.textSizeData,_e);for(let _t=0;_t<this.symbolInstances.length;_t++){const At=this.symbolInstances.get(_t);this._updateTextDebugCollisionBoxes(ut,_e,rt,At.textBoxStartIndex,At.textBoxEndIndex,At),this._updateTextDebugCollisionBoxes(ut,_e,rt,At.verticalTextBoxStartIndex,At.verticalTextBoxEndIndex,At),this._updateIconDebugCollisionBoxes(at,_e,rt,At.iconBoxStartIndex,At.iconBoxEndIndex,At.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(at,_e,rt,At.verticalIconBoxStartIndex,At.verticalIconBoxEndIndex,At.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(_e,rt,at,ut,_t,At,Dt,Wt,Zt){const tn={};for(let cn=rt;cn<at;cn++){const fn=_e.get(cn);tn.textBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,padding:fn.padding,projectedAnchorX:fn.projectedAnchorX,projectedAnchorY:fn.projectedAnchorY,projectedAnchorZ:fn.projectedAnchorZ,tileAnchorX:fn.tileAnchorX,tileAnchorY:fn.tileAnchorY},tn.textFeatureIndex=fn.featureIndex;break}for(let cn=ut;cn<_t;cn++){const fn=_e.get(cn);tn.verticalTextBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,padding:fn.padding,projectedAnchorX:fn.projectedAnchorX,projectedAnchorY:fn.projectedAnchorY,projectedAnchorZ:fn.projectedAnchorZ,tileAnchorX:fn.tileAnchorX,tileAnchorY:fn.tileAnchorY},tn.verticalTextFeatureIndex=fn.featureIndex;break}for(let cn=At;cn<Dt;cn++){const fn=_e.get(cn);tn.iconBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,padding:fn.padding,projectedAnchorX:fn.projectedAnchorX,projectedAnchorY:fn.projectedAnchorY,projectedAnchorZ:fn.projectedAnchorZ,tileAnchorX:fn.tileAnchorX,tileAnchorY:fn.tileAnchorY},tn.iconFeatureIndex=fn.featureIndex;break}for(let cn=Wt;cn<Zt;cn++){const fn=_e.get(cn);tn.verticalIconBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,padding:fn.padding,projectedAnchorX:fn.projectedAnchorX,projectedAnchorY:fn.projectedAnchorY,projectedAnchorZ:fn.projectedAnchorZ,tileAnchorX:fn.tileAnchorX,tileAnchorY:fn.tileAnchorY},tn.verticalIconFeatureIndex=fn.featureIndex;break}return tn}deserializeCollisionBoxes(_e){this.collisionArrays=[];for(let rt=0;rt<this.symbolInstances.length;rt++){const at=this.symbolInstances.get(rt);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(_e,at.textBoxStartIndex,at.textBoxEndIndex,at.verticalTextBoxStartIndex,at.verticalTextBoxEndIndex,at.iconBoxStartIndex,at.iconBoxEndIndex,at.verticalIconBoxStartIndex,at.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(_e,rt){const at=_e.placedSymbolArray.get(rt),ut=at.vertexStartIndex+4*at.numGlyphs;for(let _t=at.vertexStartIndex;_t<ut;_t+=4)_e.indexArray.emplaceBack(_t,_t+1,_t+2),_e.indexArray.emplaceBack(_t+1,_t+2,_t+3)}getSortedSymbolIndexes(_e){if(this.sortedAngle===_e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const rt=Math.sin(_e),at=Math.cos(_e),ut=[],_t=[],At=[];for(let Dt=0;Dt<this.symbolInstances.length;++Dt){At.push(Dt);const Wt=this.symbolInstances.get(Dt);ut.push(0|Math.round(rt*Wt.tileAnchorX+at*Wt.tileAnchorY)),_t.push(Wt.featureIndex)}return At.sort((Dt,Wt)=>ut[Dt]-ut[Wt]||_t[Wt]-_t[Dt]),At}addToSortKeyRanges(_e,rt){const at=this.sortKeyRanges[this.sortKeyRanges.length-1];at&&at.sortKey===rt?at.symbolInstanceEnd=_e+1:this.sortKeyRanges.push({sortKey:rt,symbolInstanceStart:_e,symbolInstanceEnd:_e+1})}sortFeatures(_e){if(this.sortFeaturesByY&&this.sortedAngle!==_e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(_e),this.sortedAngle=_e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const rt of this.symbolInstanceIndexes){const at=this.symbolInstances.get(rt);this.featureSortOrder.push(at.featureIndex),[at.rightJustifiedTextSymbolIndex,at.centerJustifiedTextSymbolIndex,at.leftJustifiedTextSymbolIndex].forEach((ut,_t,At)=>{ut>=0&&At.indexOf(ut)===_t&&this.addIndicesForPlacedSymbol(this.text,ut)}),at.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,at.verticalPlacedTextSymbolIndex),at.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,at.placedIconSymbolIndex),at.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,at.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Oo(xy,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),xy.MAX_GLYPHS=65535,xy.addDynamicAttributes=w1;const DA=new yo({"symbol-placement":new Or($r.layout_symbol["symbol-placement"]),"symbol-spacing":new Or($r.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Or($r.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new br($r.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Or($r.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Or($r.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Or($r.layout_symbol["icon-ignore-placement"]),"icon-optional":new Or($r.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Or($r.layout_symbol["icon-rotation-alignment"]),"icon-size":new br($r.layout_symbol["icon-size"]),"icon-text-fit":new Or($r.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Or($r.layout_symbol["icon-text-fit-padding"]),"icon-image":new br($r.layout_symbol["icon-image"]),"icon-rotate":new br($r.layout_symbol["icon-rotate"]),"icon-padding":new Or($r.layout_symbol["icon-padding"]),"icon-keep-upright":new Or($r.layout_symbol["icon-keep-upright"]),"icon-offset":new br($r.layout_symbol["icon-offset"]),"icon-anchor":new br($r.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Or($r.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Or($r.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Or($r.layout_symbol["text-rotation-alignment"]),"text-field":new br($r.layout_symbol["text-field"]),"text-font":new br($r.layout_symbol["text-font"]),"text-size":new br($r.layout_symbol["text-size"]),"text-max-width":new br($r.layout_symbol["text-max-width"]),"text-line-height":new br($r.layout_symbol["text-line-height"]),"text-letter-spacing":new br($r.layout_symbol["text-letter-spacing"]),"text-justify":new br($r.layout_symbol["text-justify"]),"text-radial-offset":new br($r.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Or($r.layout_symbol["text-variable-anchor"]),"text-anchor":new br($r.layout_symbol["text-anchor"]),"text-max-angle":new Or($r.layout_symbol["text-max-angle"]),"text-writing-mode":new Or($r.layout_symbol["text-writing-mode"]),"text-rotate":new br($r.layout_symbol["text-rotate"]),"text-padding":new Or($r.layout_symbol["text-padding"]),"text-keep-upright":new Or($r.layout_symbol["text-keep-upright"]),"text-transform":new br($r.layout_symbol["text-transform"]),"text-offset":new br($r.layout_symbol["text-offset"]),"text-allow-overlap":new Or($r.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Or($r.layout_symbol["text-ignore-placement"]),"text-optional":new Or($r.layout_symbol["text-optional"])});var Ow={paint:new yo({"icon-opacity":new br($r.paint_symbol["icon-opacity"]),"icon-color":new br($r.paint_symbol["icon-color"]),"icon-halo-color":new br($r.paint_symbol["icon-halo-color"]),"icon-halo-width":new br($r.paint_symbol["icon-halo-width"]),"icon-halo-blur":new br($r.paint_symbol["icon-halo-blur"]),"icon-translate":new Or($r.paint_symbol["icon-translate"]),"icon-translate-anchor":new Or($r.paint_symbol["icon-translate-anchor"]),"text-opacity":new br($r.paint_symbol["text-opacity"]),"text-color":new br($r.paint_symbol["text-color"],{runtimeType:Eu,getOverride:nt=>nt.textColor,hasOverride:nt=>!!nt.textColor}),"text-halo-color":new br($r.paint_symbol["text-halo-color"]),"text-halo-width":new br($r.paint_symbol["text-halo-width"]),"text-halo-blur":new br($r.paint_symbol["text-halo-blur"]),"text-translate":new Or($r.paint_symbol["text-translate"]),"text-translate-anchor":new Or($r.paint_symbol["text-translate-anchor"])}),layout:DA};class lS{constructor(_e){this.type=_e.property.overrides?_e.property.overrides.runtimeType:tp,this.defaultValue=_e}evaluate(_e){if(_e.formattedSection){const rt=this.defaultValue.property.overrides;if(rt&&rt.hasOverride(_e.formattedSection))return rt.getOverride(_e.formattedSection)}return _e.feature&&_e.featureState?this.defaultValue.evaluate(_e.feature,_e.featureState):this.defaultValue.property.specification.default}eachChild(_e){this.defaultValue.isConstant()||_e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Oo(lS,"FormatSectionOverride",{omit:["defaultValue"]});class x1 extends Xu{constructor(_e){super(_e,Ow)}recalculate(_e,rt){super.recalculate(_e,rt),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const at=this.layout.get("text-writing-mode");if(at){const ut=[];for(const _t of at)ut.indexOf(_t)<0&&ut.push(_t);this.layout._values["text-writing-mode"]=ut}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(_e,rt,at,ut){const _t=this.layout.get(_e).evaluate(rt,{},at,ut),At=this._unevaluatedLayout._values[_e];return At.isDataDriven()||iy(At.value)||!_t?_t:function(Dt,Wt){return Wt.replace(/{([^{}]+)}/g,(Zt,tn)=>tn in Dt?String(Dt[tn]):"")}(rt.properties,_t)}createBucket(_e){return new xy(_e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const _e of Ow.paint.overridableProperties){if(!x1.hasPaintOverride(this.layout,_e))continue;const rt=this.paint.get(_e),at=new lS(rt),ut=new am(at,rt.property.specification);let _t=null;_t=rt.value.kind==="constant"||rt.value.kind==="source"?new Mm("source",ut):new Py("composite",ut,rt.value.zoomStops,rt.value._interpolationType),this.paint._values[_e]=new _i(rt.property,_t,rt.parameters)}}_handleOverridablePaintPropertyUpdate(_e,rt,at){return!(!this.layout||rt.isDataDriven()||at.isDataDriven())&&x1.hasPaintOverride(this.layout,_e)}static hasPaintOverride(_e,rt){const at=_e.get("text-field"),ut=Ow.paint.properties[rt];let _t=!1;const At=Dt=>{for(const Wt of Dt)if(ut.overrides&&ut.overrides.hasOverride(Wt))return void(_t=!0)};if(at.value.kind==="constant"&&at.value.value instanceof zt)At(at.value.value.sections);else if(at.value.kind==="source"){const Dt=Zt=>{_t||(Zt instanceof Xn&&Nn(Zt.value)===zu?At(Zt.value.sections):Zt instanceof bo?At(Zt.sections):Zt.eachChild(Dt))},Wt=at.value;Wt._styleExpression&&Dt(Wt._styleExpression.expression)}return _t}getProgramConfiguration(_e){return new Nm(this,_e)}}var LA={paint:new yo({"background-color":new Or($r.paint_background["background-color"]),"background-pattern":new mo($r.paint_background["background-pattern"]),"background-opacity":new Or($r.paint_background["background-opacity"])})},BA={paint:new yo({"raster-opacity":new Or($r.paint_raster["raster-opacity"]),"raster-hue-rotate":new Or($r.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Or($r.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Or($r.paint_raster["raster-brightness-max"]),"raster-saturation":new Or($r.paint_raster["raster-saturation"]),"raster-contrast":new Or($r.paint_raster["raster-contrast"]),"raster-resampling":new Or($r.paint_raster["raster-resampling"]),"raster-fade-duration":new Or($r.paint_raster["raster-fade-duration"])})};class gt extends Xu{constructor(_e){super(_e,{}),this.implementation=_e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(_e){this.implementation.onAdd&&this.implementation.onAdd(_e,_e.painter.context.gl)}onRemove(_e){this.implementation.onRemove&&this.implementation.onRemove(_e,_e.painter.context.gl)}}var Rt={paint:new yo({"sky-type":new Or($r.paint_sky["sky-type"]),"sky-atmosphere-sun":new Or($r.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Or($r.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Or($r.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Or($r.paint_sky["sky-gradient-radius"]),"sky-gradient":new vo($r.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Or($r.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Or($r.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Or($r.paint_sky["sky-opacity"])})};function Jt(nt,_e,rt){const at=[0,0,1],ut=nx([]);return ix(ut,ut,rt?-xt(nt)+Math.PI:xt(nt)),rx(ut,ut,-xt(_e)),Xw(at,at,ut),Iu(at,at)}const yn={circle:class extends Xu{constructor(nt){super(nt,qw)}createBucket(nt){return new lu(nt)}queryRadius(nt){const _e=nt;return gy("circle-radius",this,_e)+gy("circle-stroke-width",this,_e)+B0(this.paint.get("circle-translate"))}queryIntersectsFeature(nt,_e,rt,at,ut,_t,At,Dt){const Wt=k_(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_t.angle,nt.pixelToTileUnitsFactor),Zt=this.paint.get("circle-radius").evaluate(_e,rt)+this.paint.get("circle-stroke-width").evaluate(_e,rt);return ox(nt,at,_t,At,Dt,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",Wt,Zt)}getProgramIds(){return["circle"]}getProgramConfiguration(nt){return new Nm(this,nt)}},heatmap:class extends Xu{createBucket(nt){return new lx(nt)}constructor(nt){super(nt,wS),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(nt){nt==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Q1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(nt){return gy("heatmap-radius",this,nt)}queryIntersectsFeature(nt,_e,rt,at,ut,_t,At,Dt){const Wt=this.paint.get("heatmap-radius").evaluate(_e,rt);return ox(nt,at,_t,At,Dt,!0,!0,new mt(0,0),Wt)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(nt){return new Nm(this,nt)}},hillshade:class extends Xu{constructor(nt){super(nt,xS)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Xu{constructor(nt){super(nt,FS)}getProgramIds(){const nt=this.paint.get("fill-pattern"),_e=nt&&nt.constantOr(1),rt=[_e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&rt.push(_e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),rt}getProgramConfiguration(nt){return new Nm(this,nt)}recalculate(nt,_e){super.recalculate(nt,_e);const rt=this.paint._values["fill-outline-color"];rt.value.kind==="constant"&&rt.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(nt){return new q0(nt)}queryRadius(){return B0(this.paint.get("fill-translate"))}queryIntersectsFeature(nt,_e,rt,at,ut,_t){return!nt.queryGeometry.isAboveHorizon&&W1(Hw(nt.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_t.angle,nt.pixelToTileUnitsFactor),at)}isTileClipped(){return!0}},"fill-extrusion":class extends Xu{constructor(nt){super(nt,ZS)}createBucket(nt){return new qy(nt)}queryRadius(){return B0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(nt){return new Nm(this,nt)}queryIntersectsFeature(nt,_e,rt,at,ut,_t,At,Dt,Wt){const Zt=k_(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_t.angle,nt.pixelToTileUnitsFactor),tn=this.paint.get("fill-extrusion-height").evaluate(_e,rt),cn=this.paint.get("fill-extrusion-base").evaluate(_e,rt),fn=[0,0],wn=Dt&&_t.elevation,xn=_t.elevation?_t.elevation.exaggeration():1,On=nt.tile.getBucket(this);if(wn&&On instanceof qy){const sr=On.centroidVertexArray,mr=Wt+1;if(mr<sr.length){const ar=sr.get(mr);fn[0]=ar.a_centroid_pos0,fn[1]=ar.a_centroid_pos1}}if(fn[0]===0&&fn[1]===1)return!1;_t.projection.name==="globe"&&(at=qv([at],[new mt(0,0),new mt(Zo,Zo)],nt.tileID.canonical).map(sr=>sr.polygon).flat());const Un=wn?Dt:null,[nr,hr]=function(sr,mr,ar,Br,kr,Jr,ho,Ur,no,oo,lo){return sr.projection.name==="globe"?function(go,Vr,So,$o,To,Fo,Ao,Yo,ls,fs,ks){const ss=[],xl=[],vs=go.projection.upVectorScale(ks,go.center.lat,go.worldSize).metersToTile,Es=[0,0,0,1],Ks=[0,0,0,1],$a=(yl,Sl,Ll,vu)=>{yl[0]=Sl,yl[1]=Ll,yl[2]=vu,yl[3]=1},ba=xx();So>0&&(So+=ba),$o+=ba;for(const yl of Vr){const Sl=[],Ll=[];for(const vu of yl){const qs=vu.x+To.x,Ql=vu.y+To.y,Kl=go.projection.projectTilePoint(qs,Ql,ks),js=go.projection.upVector(ks,vu.x,vu.y);let Rl=So,nu=$o;if(Ao){const Xs=Ex(qs,Ql,So,$o,Ao,Yo,ls,fs);Rl+=Xs.base,nu+=Xs.top}So!==0?$a(Es,Kl.x+js[0]*vs*Rl,Kl.y+js[1]*vs*Rl,Kl.z+js[2]*vs*Rl):$a(Es,Kl.x,Kl.y,Kl.z),$a(Ks,Kl.x+js[0]*vs*nu,Kl.y+js[1]*vs*nu,Kl.z+js[2]*vs*nu),Vl(Es,Es,Fo),Vl(Ks,Ks,Fo),Sl.push(new W_(Es[0],Es[1],Es[2])),Ll.push(new W_(Ks[0],Ks[1],Ks[2]))}ss.push(Sl),xl.push(Ll)}return[ss,xl]}(sr,mr,ar,Br,kr,Jr,ho,Ur,no,oo,lo):ho?function(go,Vr,So,$o,To,Fo,Ao,Yo,ls){const fs=[],ks=[],ss=[0,0,0,1];for(const xl of go){const vs=[],Es=[];for(const Ks of xl){const $a=Ks.x+$o.x,ba=Ks.y+$o.y,yl=Ex($a,ba,Vr,So,Fo,Ao,Yo,ls);ss[0]=$a,ss[1]=ba,ss[2]=yl.base,ss[3]=1,my(ss,ss,To),ss[3]=Math.max(ss[3],1e-5);const Sl=new W_(ss[0]/ss[3],ss[1]/ss[3],ss[2]/ss[3]);ss[0]=$a,ss[1]=ba,ss[2]=yl.top,ss[3]=1,my(ss,ss,To),ss[3]=Math.max(ss[3],1e-5);const Ll=new W_(ss[0]/ss[3],ss[1]/ss[3],ss[2]/ss[3]);vs.push(Sl),Es.push(Ll)}fs.push(vs),ks.push(Es)}return[fs,ks]}(mr,ar,Br,kr,Jr,ho,Ur,no,oo):function(go,Vr,So,$o,To){const Fo=[],Ao=[],Yo=To[8]*Vr,ls=To[9]*Vr,fs=To[10]*Vr,ks=To[11]*Vr,ss=To[8]*So,xl=To[9]*So,vs=To[10]*So,Es=To[11]*So;for(const Ks of go){const $a=[],ba=[];for(const yl of Ks){const Sl=yl.x+$o.x,Ll=yl.y+$o.y,vu=To[0]*Sl+To[4]*Ll+To[12],qs=To[1]*Sl+To[5]*Ll+To[13],Ql=To[2]*Sl+To[6]*Ll+To[14],Kl=To[3]*Sl+To[7]*Ll+To[15],js=vu+Yo,Rl=qs+ls,nu=Ql+fs,Xs=Math.max(Kl+ks,1e-5),Hl=vu+ss,Nu=qs+xl,bu=Ql+vs,wu=Math.max(Kl+Es,1e-5);$a.push(new W_(js/Xs,Rl/Xs,nu/Xs)),ba.push(new W_(Hl/wu,Nu/wu,bu/wu))}Fo.push($a),Ao.push(ba)}return[Fo,Ao]}(mr,ar,Br,kr,Jr)}(_t,at,cn,tn,Zt,At,Un,fn,xn,_t.center.lat,nt.tileID.canonical),tr=nt.queryGeometry;return function(sr,mr,ar){let Br=1/0;W1(ar,mr)&&(Br=Ax(ar,mr[0]));for(let kr=0;kr<mr.length;kr++){const Jr=mr[kr],ho=sr[kr];for(let Ur=0;Ur<Jr.length-1;Ur++){const no=Jr[Ur],oo=[no,Jr[Ur+1],ho[Ur+1],ho[Ur],no];Ww(ar,oo)&&(Br=Math.min(Br,Ax(ar,oo)))}}return Br!==1/0&&Br}(nr,hr,tr.isPointQuery()?tr.screenBounds:tr.screenGeometry)}},line:class extends Xu{constructor(nt){super(nt,Tx),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(nt){if(nt==="line-gradient"){const _e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=_e._styleExpression&&_e._styleExpression.expression instanceof Im,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(nt,_e){super.recalculate(nt,_e),this.paint._values["line-floorwidth"]=yy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,nt)}createBucket(nt){return new _h(nt)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(nt){return new Nm(this,nt)}queryRadius(nt){const _e=nt,rt=ws(gy("line-width",this,_e),gy("line-gap-width",this,_e)),at=gy("line-offset",this,_e);return rt/2+Math.abs(at)+B0(this.paint.get("line-translate"))}queryIntersectsFeature(nt,_e,rt,at,ut,_t){if(nt.queryGeometry.isAboveHorizon)return!1;const At=Hw(nt.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_t.angle,nt.pixelToTileUnitsFactor),Dt=nt.pixelToTileUnitsFactor/2*ws(this.paint.get("line-width").evaluate(_e,rt),this.paint.get("line-gap-width").evaluate(_e,rt)),Wt=this.paint.get("line-offset").evaluate(_e,rt);return Wt&&(at=function(Zt,tn){const cn=[],fn=new mt(0,0);for(let wn=0;wn<Zt.length;wn++){const xn=Zt[wn],On=[];for(let Un=0;Un<xn.length;Un++){const nr=xn[Un-1],hr=xn[Un],tr=xn[Un+1],sr=Un===0?fn:hr.sub(nr)._unit()._perp(),mr=Un===xn.length-1?fn:tr.sub(hr)._unit()._perp(),ar=sr._add(mr)._unit();ar._mult(1/(ar.x*mr.x+ar.y*mr.y)),On.push(ar._mult(tn)._add(hr))}cn.push(On)}return cn}(at,Wt*nt.pixelToTileUnitsFactor)),function(Zt,tn,cn){for(let fn=0;fn<tn.length;fn++){const wn=tn[fn];if(Zt.length>=3){for(let xn=0;xn<wn.length;xn++)if(Zl(Zt,wn[xn]))return!0}if(gS(Zt,wn,cn))return!0}return!1}(At,at,Dt)}isTileClipped(){return!0}},symbol:x1,background:class extends Xu{constructor(nt){super(nt,LA)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Xu{constructor(nt){super(nt,BA)}getProgramIds(){return["raster"]}},sky:class extends Xu{constructor(nt){super(nt,Rt),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(nt){nt==="sky-gradient"?this._updateColorRamp():nt!=="sky-atmosphere-sun"&&nt!=="sky-atmosphere-halo-color"&&nt!=="sky-atmosphere-color"&&nt!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Q1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(nt){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const _e=nt.style.light.properties.get("position");return this._lightPosition.azimuthal!==_e.azimuthal||this._lightPosition.polar!==_e.polar}return!1}getCenter(nt,_e){if(this.paint.get("sky-type")==="atmosphere"){const at=this.paint.get("sky-atmosphere-sun"),ut=!at,_t=nt.style.light,At=_t.properties.get("position");return ut&&_t.properties.get("anchor")==="viewport"&&hn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),ut?Jt(At.azimuthal,90-At.polar,_e):Jt(at[0],90-at[1],_e)}const rt=this.paint.get("sky-gradient-center");return Jt(rt[0],90-rt[1],_e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(nt){this._skyboxInvalidated=!1,this._lightPosition=nt.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const nt=this.paint.get("sky-type");return nt==="atmosphere"?["skyboxCapture","skybox"]:nt==="gradient"?["skyboxGradient"]:null}}};class Pn{constructor(_e,rt,at,ut){this.context=_e,this.format=at,this.texture=_e.gl.createTexture(),this.update(rt,ut)}update(_e,rt,at){const{width:ut,height:_t}=_e,{context:At}=this,{gl:Dt}=At,{HTMLImageElement:Wt,HTMLCanvasElement:Zt,HTMLVideoElement:tn,ImageData:cn,ImageBitmap:fn}=it;if(Dt.bindTexture(Dt.TEXTURE_2D,this.texture),At.pixelStoreUnpackFlipY.set(!1),At.pixelStoreUnpack.set(1),At.pixelStoreUnpackPremultiplyAlpha.set(this.format===Dt.RGBA&&(!rt||rt.premultiply!==!1)),at||this.size&&this.size[0]===ut&&this.size[1]===_t){const{x:wn,y:xn}=at||{x:0,y:0};_e instanceof Wt||_e instanceof Zt||_e instanceof tn||_e instanceof cn||fn&&_e instanceof fn?Dt.texSubImage2D(Dt.TEXTURE_2D,0,wn,xn,Dt.RGBA,Dt.UNSIGNED_BYTE,_e):Dt.texSubImage2D(Dt.TEXTURE_2D,0,wn,xn,ut,_t,Dt.RGBA,Dt.UNSIGNED_BYTE,_e.data)}else this.size=[ut,_t],_e instanceof Wt||_e instanceof Zt||_e instanceof tn||_e instanceof cn||fn&&_e instanceof fn?Dt.texImage2D(Dt.TEXTURE_2D,0,this.format,this.format,Dt.UNSIGNED_BYTE,_e):Dt.texImage2D(Dt.TEXTURE_2D,0,this.format,ut,_t,0,this.format,Dt.UNSIGNED_BYTE,_e.data);this.useMipmap=Boolean(rt&&rt.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&Dt.generateMipmap(Dt.TEXTURE_2D)}bind(_e,rt){const{context:at}=this,{gl:ut}=at;ut.bindTexture(ut.TEXTURE_2D,this.texture),_e!==this.filter&&(ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MAG_FILTER,_e),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MIN_FILTER,this.useMipmap?_e===ut.NEAREST?ut.NEAREST_MIPMAP_NEAREST:ut.LINEAR_MIPMAP_NEAREST:_e),this.filter=_e),rt!==this.wrap&&(ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_S,rt),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_T,rt),this.wrap=rt)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:_e}=this.context;_e.deleteTexture(this.texture),this.texture=null}}class qn{constructor(_e){this._callback=_e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class cr{constructor(){this.tasks={},this.taskQueue=[],an(["process"],this),this.invoker=new qn(this.process),this.nextId=0}add(_e,rt){const at=this.nextId++,ut=function({type:_t,isSymbolTile:At,zoom:Dt}){return Dt=Dt||0,_t==="message"?0:_t!=="maybePrepare"||At?_t!=="parseTile"||At?_t==="parseTile"&&At?300-Dt:_t==="maybePrepare"&&At?400-Dt:500:200-Dt:100-Dt}(rt);if(ut===0){Yn();try{_e()}finally{}return{cancel:()=>{}}}return this.tasks[at]={fn:_e,metadata:rt,priority:ut,id:at},this.taskQueue.push(at),this.invoker.trigger(),{cancel:()=>{delete this.tasks[at]}}}process(){Yn();try{if(this.taskQueue=this.taskQueue.filter(at=>!!this.tasks[at]),!this.taskQueue.length)return;const _e=this.pick();if(_e===null)return;const rt=this.tasks[_e];if(delete this.tasks[_e],this.taskQueue.length&&this.invoker.trigger(),!rt)return;rt.fn()}finally{}}pick(){let _e=null,rt=1/0;for(let ut=0;ut<this.taskQueue.length;ut++){const _t=this.tasks[this.taskQueue[ut]];_t.priority<rt&&(rt=_t.priority,_e=ut)}if(_e===null)return null;const at=this.taskQueue[_e];return this.taskQueue.splice(_e,1),at}remove(){this.invoker.remove()}}class wr{constructor(_e){this._stringToNumber={},this._numberToString=[];for(let rt=0;rt<_e.length;rt++){const at=_e[rt];this._stringToNumber[at]=rt,this._numberToString[rt]=at}}encode(_e){return this._stringToNumber[_e]}decode(_e){return this._numberToString[_e]}}const Pr=["tile","layer","source","sourceLayer","state"];class uo{constructor(_e,rt,at,ut,_t){this.type="Feature",this._vectorTileFeature=_e,this._z=rt,this._x=at,this._y=ut,this.properties=_e.properties,this.id=_t}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(_e){this._geometry=_e}toJSON(){const _e={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(_e.id=this.id);for(const rt of Pr)this[rt]!==void 0&&(_e[rt]=this[rt]);return _e}}const ao=32,fo=33,Po=new Uint16Array(8184);for(let nt=0;nt<2046;nt++){let _e=nt+2,rt=0,at=0,ut=0,_t=0,At=0,Dt=0;for(1&_e?ut=_t=At=ao:rt=at=Dt=ao;(_e>>=1)>1;){const Zt=rt+ut>>1,tn=at+_t>>1;1&_e?(ut=rt,_t=at,rt=At,at=Dt):(rt=ut,at=_t,ut=At,_t=Dt),At=Zt,Dt=tn}const Wt=4*nt;Po[Wt+0]=rt,Po[Wt+1]=at,Po[Wt+2]=ut,Po[Wt+3]=_t}const Vo=new Uint16Array(2178),Qo=new Uint8Array(1089),xs=new Uint16Array(1089);function cs(nt){return nt===0?-.03125:nt===32?.03125:0}var Ps=_o([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Bs={type:2,extent:Zo,loadGeometry:()=>[[new mt(0,0),new mt(8193,0),new mt(8193,8193),new mt(0,8193),new mt(0,0)]]};class ju{constructor(_e,rt,at,ut,_t){this.tileID=_e,this.uid=Xt(),this.uses=0,this.tileSize=rt,this.tileZoom=at,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=_t,this.expiredRequestCount=0,this.state="loading",ut&&ut.transform&&(this.projection=ut.transform.projection)}registerFadeDuration(_e){const rt=_e+this.timeAdded;rt<ms.now()||this.fadeEndTime&&rt<this.fadeEndTime||(this.fadeEndTime=rt)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Xy(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(_e,rt,at){if(this.unloadVectorData(),this.state="loaded",_e){_e.featureIndex&&(this.latestFeatureIndex=_e.featureIndex,_e.rawTileData?(this.latestRawTileData=_e.rawTileData,this.latestFeatureIndex.rawTileData=_e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=_e.collisionBoxArray,this.buckets=function(ut,_t){const At={};if(!_t)return At;for(const Dt of ut){const Wt=Dt.layerIds.map(Zt=>_t.getLayer(Zt)).filter(Boolean);if(Wt.length!==0){Dt.layers=Wt,Dt.stateDependentLayerIds&&(Dt.stateDependentLayers=Dt.stateDependentLayerIds.map(Zt=>Wt.filter(tn=>tn.id===Zt)[0]));for(const Zt of Wt)At[Zt.id]=Dt}}return At}(_e.buckets,rt.style),this.hasSymbolBuckets=!1;for(const ut in this.buckets){const _t=this.buckets[ut];if(_t instanceof xy){if(this.hasSymbolBuckets=!0,!at)break;_t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const ut in this.buckets){const _t=this.buckets[ut];if(_t instanceof xy&&_t.hasRTLText){this.hasRTLText=!0,lr.isLoading()||lr.isLoaded()||Gn()!=="deferred"||or();break}}this.queryPadding=0;for(const ut in this.buckets){const _t=this.buckets[ut];this.queryPadding=Math.max(this.queryPadding,rt.style.getLayer(ut).queryRadius(_t))}_e.imageAtlas&&(this.imageAtlas=_e.imageAtlas),_e.glyphAtlasImage&&(this.glyphAtlasImage=_e.glyphAtlasImage),_e.lineAtlas&&(this.lineAtlas=_e.lineAtlas)}else this.collisionBoxArray=new R_}unloadVectorData(){if(this.hasData()){for(const _e in this.buckets)this.buckets[_e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(_e){return this.buckets[_e.id]}upload(_e){for(const at in this.buckets){const ut=this.buckets[at];ut.uploadPending()&&ut.upload(_e)}const rt=_e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pn(_e,this.imageAtlas.image,rt.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pn(_e,this.glyphAtlasImage,rt.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Pn(_e,this.lineAtlas.image,rt.ALPHA),this.lineAtlas.uploaded=!0)}prepare(_e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(_e,this.imageAtlasTexture)}queryRenderedFeatures(_e,rt,at,ut,_t,At,Dt,Wt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:ut,pixelPosMatrix:Dt,transform:At,params:_t,tileTransform:this.tileTransform},_e,rt,at):{}}querySourceFeatures(_e,rt){const at=this.latestFeatureIndex;if(!at||!at.rawTileData)return;const ut=at.loadVTLayers(),_t=rt?rt.sourceLayer:"",At=ut._geojsonTileLayer||ut[_t];if(!At)return;const Dt=v_(rt&&rt.filter),{z:Wt,x:Zt,y:tn}=this.tileID.canonical,cn={z:Wt,x:Zt,y:tn};for(let fn=0;fn<At.length;fn++){const wn=At.feature(fn);if(Dt.needGeometry){const Un=Wy(wn,!0);if(!Dt.filter(new er(this.tileID.overscaledZ),Un,this.tileID.canonical))continue}else if(!Dt.filter(new er(this.tileID.overscaledZ),wn))continue;const xn=at.getId(wn,_t),On=new uo(wn,Wt,Zt,tn,xn);On.tile=cn,_e.push(On)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(_e){const rt=this.expirationTime;if(_e.cacheControl){const at=Nr(_e.cacheControl);at["max-age"]&&(this.expirationTime=Date.now()+1e3*at["max-age"])}else _e.expires&&(this.expirationTime=new Date(_e.expires).getTime());if(this.expirationTime){const at=Date.now();let ut=!1;if(this.expirationTime>at)ut=!1;else if(rt)if(this.expirationTime<rt)ut=!0;else{const _t=this.expirationTime-rt;_t?this.expirationTime=at+Math.max(_t,3e4):ut=!0}else ut=!0;ut?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(_e,rt){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(_e).length===0||!rt)return;const at=this.latestFeatureIndex.loadVTLayers(),ut=rt.style.listImages();for(const _t in this.buckets){if(!rt.style.hasLayer(_t))continue;const At=this.buckets[_t],Dt=At.layers[0].sourceLayer||"_geojsonTileLayer",Wt=at[Dt],Zt=_e[Dt];if(!Wt||!Zt||Object.keys(Zt).length===0)continue;if(At.update(Zt,Wt,ut,this.imageAtlas&&this.imageAtlas.patternPositions||{}),At instanceof _h||At instanceof q0){const cn=rt.style._getSourceCache(At.layers[0].source);rt._terrain&&rt._terrain.enabled&&cn&&At.programConfigurations.needsUpload&&rt._terrain._clearRenderCacheForTile(cn.id,this.tileID)}const tn=rt&&rt.style&&rt.style.getLayer(_t);tn&&(this.queryPadding=Math.max(this.queryPadding,tn.queryRadius(At)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ms.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(_e){this.symbolFadeHoldUntil=ms.now()+_e}setTexture(_e,rt){const at=rt.context,ut=at.gl;this.texture=this.texture||rt.getTileTexture(_e.width),this.texture?this.texture.update(_e,{useMipmap:!0}):(this.texture=new Pn(at,_e,ut.RGBA,{useMipmap:!0}),this.texture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),at.extTextureFilterAnisotropic&&ut.texParameterf(ut.TEXTURE_2D,at.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,at.extTextureFilterAnisotropicMax))}setDependencies(_e,rt){const at={};for(const ut of rt)at[ut]=!0;this.dependencies[_e]=at}hasDependency(_e,rt){for(const at of _e){const ut=this.dependencies[at];if(ut){for(const _t of rt)if(ut[_t])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(_e,rt){if(!rt||rt.name==="mercator"||this._tileDebugBuffer)return;const at=Lu(Bs,this.tileID.canonical,this.tileTransform)[0],ut=new hs,_t=new C_;for(let At=0;At<at.length;At++){const{x:Dt,y:Wt}=at[At];ut.emplaceBack(Dt,Wt),_t.emplaceBack(At)}_t.emplaceBack(0),this._tileDebugIndexBuffer=_e.createIndexBuffer(_t),this._tileDebugBuffer=_e.createVertexBuffer(ut,Xv.members),this._tileDebugSegments=zl.simpleSegment(0,0,ut.length,_t.length)}_makeTileBoundsBuffers(_e,rt){if(this._tileBoundsBuffer||!rt||rt.name==="mercator")return;const at=Lu(Bs,this.tileID.canonical,this.tileTransform)[0];let ut,_t;if(this.isRaster){const At=function(Dt,Wt){const Zt=Xy(Dt,Wt),tn=Math.pow(2,Dt.z);for(let Un=0;Un<fo;Un++)for(let nr=0;nr<fo;nr++){const hr=gp((Dt.x+(nr+cs(nr))/ao)/tn),tr=eu((Dt.y+(Un+cs(Un))/ao)/tn),sr=Wt.project(hr,tr),mr=Un*fo+nr;Vo[2*mr+0]=Math.round((sr.x*Zt.scale-Zt.x)*Zo),Vo[2*mr+1]=Math.round((sr.y*Zt.scale-Zt.y)*Zo)}Qo.fill(0),xs.fill(0);for(let Un=2045;Un>=0;Un--){const nr=4*Un,hr=Po[nr+0],tr=Po[nr+1],sr=Po[nr+2],mr=Po[nr+3],ar=hr+sr>>1,Br=tr+mr>>1,kr=ar+Br-tr,Jr=Br+hr-ar,ho=tr*fo+hr,Ur=mr*fo+sr,no=Br*fo+ar,oo=Math.hypot((Vo[2*ho+0]+Vo[2*Ur+0])/2-Vo[2*no+0],(Vo[2*ho+1]+Vo[2*Ur+1])/2-Vo[2*no+1])>=16;if(Qo[no]=Qo[no]||(oo?1:0),Un<1022){const lo=(tr+Jr>>1)*fo+(hr+kr>>1),go=(mr+Jr>>1)*fo+(sr+kr>>1);Qo[no]=Qo[no]||Qo[lo]||Qo[go]}}const cn=new Vs,fn=new Jl;let wn=0;function xn(Un,nr){const hr=nr*fo+Un;return xs[hr]===0&&(cn.emplaceBack(Vo[2*hr+0],Vo[2*hr+1],Un*Zo/ao,nr*Zo/ao),xs[hr]=++wn),xs[hr]-1}function On(Un,nr,hr,tr,sr,mr){const ar=Un+hr>>1,Br=nr+tr>>1;if(Math.abs(Un-sr)+Math.abs(nr-mr)>1&&Qo[Br*fo+ar])On(sr,mr,Un,nr,ar,Br),On(hr,tr,sr,mr,ar,Br);else{const kr=xn(Un,nr),Jr=xn(hr,tr),ho=xn(sr,mr);fn.emplaceBack(kr,Jr,ho)}}return On(0,0,ao,ao,ao,0),On(ao,ao,0,0,0,ao),{vertices:cn,indices:fn}}(this.tileID.canonical,rt);ut=At.vertices,_t=At.indices}else{ut=new Vs,_t=new Jl;for(const{x:Dt,y:Wt}of at)ut.emplaceBack(Dt,Wt,0,0);const At=zv.exports(ut.int16,void 0,4);for(let Dt=0;Dt<At.length;Dt+=3)_t.emplaceBack(At[Dt],At[Dt+1],At[Dt+2])}this._tileBoundsBuffer=_e.createVertexBuffer(ut,Ps.members),this._tileBoundsIndexBuffer=_e.createIndexBuffer(_t),this._tileBoundsSegments=zl.simpleSegment(0,0,ut.length,_t.length)}_makeGlobeTileDebugBuffers(_e,rt){const at=rt.projection;if(!at||at.name!=="globe"||rt.freezeTileCoverage)return;const ut=this.tileID.canonical,_t=Jv(Qx(ut,rt)),At=nv(rt.zoom);let Dt;At>0&&(Dt=F0(new Float64Array(16),rt.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(_e,ut,rt,_t,Dt,At),this._makeGlobeTileDebugTextBuffer(_e,ut,rt,_t,Dt,At)}_globePoint(_e,rt,at,ut,_t,At,Dt){let Wt=tv(_e,rt,at);if(At){const Zt=1<<at.z,tn=au(ut.center.lng),cn=Kp(ut.center.lat),fn=(at.x+.5)/Zt-tn;let wn=0;fn>.5?wn=-1:fn<-.5&&(wn=1);let xn=(_e/Zo+at.x)/Zt+wn,On=(rt/Zo+at.y)/Zt;xn=(xn-tn)*ut._pixelsPerMercatorPixel+tn,On=(On-cn)*ut._pixelsPerMercatorPixel+cn;const Un=[xn*ut.worldSize,On*ut.worldSize,0];Vl(Un,Un,At),Wt=Yy(Wt,Un,Dt)}return Vl(Wt,Wt,_t)}_makeGlobeTileDebugBorderBuffer(_e,rt,at,ut,_t,At){const Dt=new hs,Wt=new C_,Zt=new Ns,tn=(fn,wn,xn,On,Un)=>{const nr=(xn-fn)/(Un-1),hr=(On-wn)/(Un-1),tr=Dt.length;for(let sr=0;sr<Un;sr++){const mr=fn+sr*nr,ar=wn+sr*hr;Dt.emplaceBack(mr,ar);const Br=this._globePoint(mr,ar,rt,at,ut,_t,At);Zt.emplaceBack(Br[0],Br[1],Br[2]),Wt.emplaceBack(tr+sr)}},cn=Zo;tn(0,0,cn,0,16),tn(cn,0,cn,cn,16),tn(cn,cn,0,cn,16),tn(0,cn,0,0,16),this._tileDebugIndexBuffer=_e.createIndexBuffer(Wt),this._tileDebugBuffer=_e.createVertexBuffer(Dt,Xv.members),this._globeTileDebugBorderBuffer=_e.createVertexBuffer(Zt,Kx.members),this._tileDebugSegments=zl.simpleSegment(0,0,Dt.length,Wt.length)}_makeGlobeTileDebugTextBuffer(_e,rt,at,ut,_t,At){const Dt=new hs,Wt=new Jl,Zt=new Ns,tn=25;Wt.reserve(32),Dt.reserve(tn),Zt.reserve(tn);const cn=(fn,wn)=>tn*fn+wn;for(let fn=0;fn<tn;fn++){const wn=2048*fn;for(let xn=0;xn<tn;xn++){const On=2048*xn;Dt.emplaceBack(On,wn);const Un=this._globePoint(On,wn,rt,at,ut,_t,At);Zt.emplaceBack(Un[0],Un[1],Un[2])}}for(let fn=0;fn<4;fn++)for(let wn=0;wn<4;wn++){const xn=cn(fn,wn),On=cn(fn,wn+1),Un=cn(fn+1,wn),nr=cn(fn+1,wn+1);Wt.emplaceBack(xn,On,Un),Wt.emplaceBack(Un,On,nr)}this._tileDebugTextIndexBuffer=_e.createIndexBuffer(Wt),this._tileDebugTextBuffer=_e.createVertexBuffer(Dt,Xv.members),this._globeTileDebugTextBuffer=_e.createVertexBuffer(Zt,Kx.members),this._tileDebugTextSegments=zl.simpleSegment(0,0,tn,32)}}class Fu{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(_e,rt,at){const ut=String(rt);if(this.stateChanges[_e]=this.stateChanges[_e]||{},this.stateChanges[_e][ut]=this.stateChanges[_e][ut]||{},wt(this.stateChanges[_e][ut],at),this.deletedStates[_e]===null){this.deletedStates[_e]={};for(const _t in this.state[_e])_t!==ut&&(this.deletedStates[_e][_t]=null)}else if(this.deletedStates[_e]&&this.deletedStates[_e][ut]===null){this.deletedStates[_e][ut]={};for(const _t in this.state[_e][ut])at[_t]||(this.deletedStates[_e][ut][_t]=null)}else for(const _t in at)this.deletedStates[_e]&&this.deletedStates[_e][ut]&&this.deletedStates[_e][ut][_t]===null&&delete this.deletedStates[_e][ut][_t]}removeFeatureState(_e,rt,at){if(this.deletedStates[_e]===null)return;const ut=String(rt);if(this.deletedStates[_e]=this.deletedStates[_e]||{},at&&rt!==void 0)this.deletedStates[_e][ut]!==null&&(this.deletedStates[_e][ut]=this.deletedStates[_e][ut]||{},this.deletedStates[_e][ut][at]=null);else if(rt!==void 0)if(this.stateChanges[_e]&&this.stateChanges[_e][ut])for(at in this.deletedStates[_e][ut]={},this.stateChanges[_e][ut])this.deletedStates[_e][ut][at]=null;else this.deletedStates[_e][ut]=null;else this.deletedStates[_e]=null}getState(_e,rt){const at=String(rt),ut=wt({},(this.state[_e]||{})[at],(this.stateChanges[_e]||{})[at]);if(this.deletedStates[_e]===null)return{};if(this.deletedStates[_e]){const _t=this.deletedStates[_e][rt];if(_t===null)return{};for(const At in _t)delete ut[At]}return ut}initializeTileState(_e,rt){_e.setFeatureState(this.state,rt)}coalesceChanges(_e,rt){const at={};for(const ut in this.stateChanges){this.state[ut]=this.state[ut]||{};const _t={};for(const At in this.stateChanges[ut])this.state[ut][At]||(this.state[ut][At]={}),wt(this.state[ut][At],this.stateChanges[ut][At]),_t[At]=this.state[ut][At];at[ut]=_t}for(const ut in this.deletedStates){this.state[ut]=this.state[ut]||{};const _t={};if(this.deletedStates[ut]===null)for(const At in this.state[ut])_t[At]={},this.state[ut][At]={};else for(const At in this.deletedStates[ut]){if(this.deletedStates[ut][At]===null)this.state[ut][At]={};else for(const Dt of Object.keys(this.deletedStates[ut][At]))delete this.state[ut][At][Dt];_t[At]=this.state[ut][At]}at[ut]=at[ut]||{},wt(at[ut],_t)}if(this.stateChanges={},this.deletedStates={},Object.keys(at).length!==0)for(const ut in _e)_e[ut].setFeatureState(at,rt)}}class _g{constructor(_e){this.size=_e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(_e,rt){const at=this.toIdx(_e,rt);return{min:this.minimums[at],max:this.maximums[at]}}isLeaf(_e,rt){return this.leaves[this.toIdx(_e,rt)]}toIdx(_e,rt){return rt*this.size+_e}}function Gl(nt,_e,rt,at){let ut=0,_t=Number.MAX_VALUE;for(let At=0;At<3;At++)if(Math.abs(at[At])<1e-15){if(rt[At]<nt[At]||rt[At]>_e[At])return null}else{const Dt=1/at[At];let Wt=(nt[At]-rt[At])*Dt,Zt=(_e[At]-rt[At])*Dt;if(Wt>Zt){const tn=Wt;Wt=Zt,Zt=tn}if(Wt>ut&&(ut=Wt),Zt<_t&&(_t=Zt),ut>_t)return null}return ut}function Dp(nt,_e,rt,at,ut,_t,At,Dt,Wt,Zt,tn){const cn=at-nt,fn=ut-_e,wn=_t-rt,xn=At-nt,On=Dt-_e,Un=Wt-rt,nr=tn[1]*Un-tn[2]*On,hr=tn[2]*xn-tn[0]*Un,tr=tn[0]*On-tn[1]*xn,sr=cn*nr+fn*hr+wn*tr;if(Math.abs(sr)<1e-15)return null;const mr=1/sr,ar=Zt[0]-nt,Br=Zt[1]-_e,kr=Zt[2]-rt,Jr=(ar*nr+Br*hr+kr*tr)*mr;if(Jr<0||Jr>1)return null;const ho=Br*wn-kr*fn,Ur=kr*cn-ar*wn,no=ar*fn-Br*cn,oo=(tn[0]*ho+tn[1]*Ur+tn[2]*no)*mr;return oo<0||Jr+oo>1?null:(xn*ho+On*Ur+Un*no)*mr}function Tm(nt,_e,rt){return(nt-_e)/(rt-_e)}function Mw(nt,_e,rt,at,ut,_t,At,Dt,Wt){const Zt=1<<rt,tn=_t-at,cn=At-ut,fn=(nt+1)/Zt*tn+at,wn=(_e+0)/Zt*cn+ut,xn=(_e+1)/Zt*cn+ut;Dt[0]=(nt+0)/Zt*tn+at,Dt[1]=wn,Wt[0]=fn,Wt[1]=xn}class ZA{constructor(_e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=_e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const rt=function(_t){const At=Math.ceil(Math.log2(_t.dim/8)),Dt=[];let Wt=Math.ceil(Math.pow(2,At));const Zt=1/Wt,tn=(wn,xn,On,Un,nr)=>{const hr=Un?1:0,tr=(wn+1)*On-hr,sr=xn*On,mr=(xn+1)*On-hr;nr[0]=wn*On,nr[1]=sr,nr[2]=tr,nr[3]=mr};let cn=new _g(Wt);const fn=[];for(let wn=0;wn<Wt*Wt;wn++){tn(wn%Wt,Math.floor(wn/Wt),Zt,!1,fn);const xn=iv(fn[0],fn[1],_t),On=iv(fn[2],fn[1],_t),Un=iv(fn[2],fn[3],_t),nr=iv(fn[0],fn[3],_t);cn.minimums.push(Math.min(xn,On,Un,nr)),cn.maximums.push(Math.max(xn,On,Un,nr)),cn.leaves.push(1)}for(Dt.push(cn),Wt/=2;Wt>=1;Wt/=2){const wn=Dt[Dt.length-1];cn=new _g(Wt);for(let xn=0;xn<Wt*Wt;xn++){tn(xn%Wt,Math.floor(xn/Wt),2,!0,fn);const On=wn.getElevation(fn[0],fn[1]),Un=wn.getElevation(fn[2],fn[1]),nr=wn.getElevation(fn[2],fn[3]),hr=wn.getElevation(fn[0],fn[3]),tr=wn.isLeaf(fn[0],fn[1]),sr=wn.isLeaf(fn[2],fn[1]),mr=wn.isLeaf(fn[2],fn[3]),ar=wn.isLeaf(fn[0],fn[3]),Br=Math.min(On.min,Un.min,nr.min,hr.min),kr=Math.max(On.max,Un.max,nr.max,hr.max),Jr=tr&&sr&&mr&&ar;cn.maximums.push(kr),cn.minimums.push(Br),cn.leaves.push(kr-Br<=5&&Jr?1:0)}Dt.push(cn)}return Dt}(this.dem),at=rt.length-1,ut=rt[at];this._addNode(ut.minimums[0],ut.maximums[0],ut.leaves[0]),this._construct(rt,0,0,at,0)}raycastRoot(_e,rt,at,ut,_t,At,Dt=1){return Gl([_e,rt,-100],[at,ut,this.maximums[0]*Dt],_t,At)}raycast(_e,rt,at,ut,_t,At,Dt=1){if(!this.nodeCount)return null;const Wt=this.raycastRoot(_e,rt,at,ut,_t,At,Dt);if(Wt==null)return null;const Zt=[],tn=[],cn=[],fn=[],wn=[{idx:0,t:Wt,nodex:0,nodey:0,depth:0}];for(;wn.length>0;){const{idx:xn,t:On,nodex:Un,nodey:nr,depth:hr}=wn.pop();if(this.leaves[xn]){Mw(Un,nr,hr,_e,rt,at,ut,cn,fn);const sr=1<<hr,mr=(Un+0)/sr,ar=(Un+1)/sr,Br=(nr+0)/sr,kr=(nr+1)/sr,Jr=iv(mr,Br,this.dem)*Dt,ho=iv(ar,Br,this.dem)*Dt,Ur=iv(ar,kr,this.dem)*Dt,no=iv(mr,kr,this.dem)*Dt,oo=Dp(cn[0],cn[1],Jr,fn[0],cn[1],ho,fn[0],fn[1],Ur,_t,At),lo=Dp(fn[0],fn[1],Ur,cn[0],fn[1],no,cn[0],cn[1],Jr,_t,At),go=Math.min(oo!==null?oo:Number.MAX_VALUE,lo!==null?lo:Number.MAX_VALUE);if(go!==Number.MAX_VALUE)return go;{const Vr=Uv([],_t,At,On);if(YA(Jr,ho,no,Ur,Tm(Vr[0],cn[0],fn[0]),Tm(Vr[1],cn[1],fn[1]))>=Vr[2])return On}continue}let tr=0;for(let sr=0;sr<this._siblingOffset.length;sr++){Mw((Un<<1)+this._siblingOffset[sr][0],(nr<<1)+this._siblingOffset[sr][1],hr+1,_e,rt,at,ut,cn,fn),cn[2]=-100,fn[2]=this.maximums[this.childOffsets[xn]+sr]*Dt;const mr=Gl(cn,fn,_t,At);if(mr!=null){const ar=mr;Zt[sr]=ar;let Br=!1;for(let kr=0;kr<tr&&!Br;kr++)ar>=Zt[tn[kr]]&&(tn.splice(kr,0,sr),Br=!0);Br||(tn[tr]=sr),tr++}}for(let sr=0;sr<tr;sr++){const mr=tn[sr];wn.push({idx:this.childOffsets[xn]+mr,t:Zt[mr],nodex:(Un<<1)+this._siblingOffset[mr][0],nodey:(nr<<1)+this._siblingOffset[mr][1],depth:hr+1})}}return null}_addNode(_e,rt,at){return this.minimums.push(_e),this.maximums.push(rt),this.leaves.push(at),this.childOffsets.push(0),this.nodeCount++}_construct(_e,rt,at,ut,_t){if(_e[ut].isLeaf(rt,at)===1)return;this.childOffsets[_t]||(this.childOffsets[_t]=this.nodeCount);const At=ut-1,Dt=_e[At];let Wt=0,Zt=0;for(let tn=0;tn<this._siblingOffset.length;tn++){const cn=2*rt+this._siblingOffset[tn][0],fn=2*at+this._siblingOffset[tn][1],wn=Dt.getElevation(cn,fn),xn=Dt.isLeaf(cn,fn),On=this._addNode(wn.min,wn.max,xn);xn&&(Wt|=1<<tn),Zt||(Zt=On)}for(let tn=0;tn<this._siblingOffset.length;tn++)Wt&1<<tn||this._construct(_e,2*rt+this._siblingOffset[tn][0],2*at+this._siblingOffset[tn][1],At,Zt+tn)}}function YA(nt,_e,rt,at,ut,_t){return Ts(Ts(nt,rt,_t),Ts(_e,at,_t),ut)}function iv(nt,_e,rt){const at=rt.dim,ut=Gt(nt*at-.5,0,at-1),_t=Gt(_e*at-.5,0,at-1),At=Math.floor(ut),Dt=Math.floor(_t),Wt=Math.min(At+1,at-1),Zt=Math.min(Dt+1,at-1);return YA(rt.get(At,Dt),rt.get(Wt,Dt),rt.get(At,Zt),rt.get(Wt,Zt),ut-At,_t-Dt)}const KA={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class uS{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(_e,rt,at,ut=!1,_t=!1){if(this.uid=_e,rt.height!==rt.width)throw new RangeError("DEM tiles must be square");if(at&&at!=="mapbox"&&at!=="terrarium")return hn(`"${at}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=rt.height;const At=this.dim=rt.height-2,Dt=new Uint32Array(rt.data.buffer);if(this.pixels=new Uint8Array(rt.data.buffer),this.encoding=at||"mapbox",this.borderReady=ut,!ut){for(let Wt=0;Wt<At;Wt++)Dt[this._idx(-1,Wt)]=Dt[this._idx(0,Wt)],Dt[this._idx(At,Wt)]=Dt[this._idx(At-1,Wt)],Dt[this._idx(Wt,-1)]=Dt[this._idx(Wt,0)],Dt[this._idx(Wt,At)]=Dt[this._idx(Wt,At-1)];Dt[this._idx(-1,-1)]=Dt[this._idx(0,0)],Dt[this._idx(At,-1)]=Dt[this._idx(At-1,0)],Dt[this._idx(-1,At)]=Dt[this._idx(0,At-1)],Dt[this._idx(At,At)]=Dt[this._idx(At-1,At-1)],_t&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ZA(this)}get(_e,rt,at=!1){at&&(_e=Gt(_e,-1,this.dim),rt=Gt(rt,-1,this.dim));const ut=4*this._idx(_e,rt);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[ut],this.pixels[ut+1],this.pixels[ut+2])}static getUnpackVector(_e){return KA[_e]}get unpackVector(){return KA[this.encoding]}_idx(_e,rt){if(_e<-1||_e>=this.dim+1||rt<-1||rt>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(rt+1)*this.stride+(_e+1)}_unpackMapbox(_e,rt,at){return(256*_e*256+256*rt+at)/10-1e4}_unpackTerrarium(_e,rt,at){return 256*_e+rt+at/256-32768}static pack(_e,rt){const at=[0,0,0,0],ut=uS.getUnpackVector(rt);let _t=Math.floor((_e+ut[3])/ut[2]);return at[2]=_t%256,_t=Math.floor(_t/256),at[1]=_t%256,_t=Math.floor(_t/256),at[0]=_t,at}getPixels(){return new _c({width:this.stride,height:this.stride},this.pixels)}backfillBorder(_e,rt,at){if(this.dim!==_e.dim)throw new Error("dem dimension mismatch");let ut=rt*this.dim,_t=rt*this.dim+this.dim,At=at*this.dim,Dt=at*this.dim+this.dim;switch(rt){case-1:ut=_t-1;break;case 1:_t=ut+1}switch(at){case-1:At=Dt-1;break;case 1:Dt=At+1}const Wt=-rt*this.dim,Zt=-at*this.dim;for(let tn=At;tn<Dt;tn++)for(let cn=ut;cn<_t;cn++){const fn=4*this._idx(cn,tn),wn=4*this._idx(cn+Wt,tn+Zt);this.pixels[fn+0]=_e.pixels[wn+0],this.pixels[fn+1]=_e.pixels[wn+1],this.pixels[fn+2]=_e.pixels[wn+2],this.pixels[fn+3]=_e.pixels[wn+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Oo(uS,"DEMData"),Oo(ZA,"DemMinMaxQuadTree",{omit:["dem"]});class hE{constructor(_e,rt){this.max=_e,this.onRemove=rt,this.reset()}reset(){for(const _e in this.data)for(const rt of this.data[_e])rt.timeout&&clearTimeout(rt.timeout),this.onRemove(rt.value);return this.data={},this.order=[],this}add(_e,rt,at){const ut=_e.wrapped().key;this.data[ut]===void 0&&(this.data[ut]=[]);const _t={value:rt,timeout:void 0};if(at!==void 0&&(_t.timeout=setTimeout(()=>{this.remove(_e,_t)},at)),this.data[ut].push(_t),this.order.push(ut),this.order.length>this.max){const At=this._getAndRemoveByKey(this.order[0]);At&&this.onRemove(At)}return this}has(_e){return _e.wrapped().key in this.data}getAndRemove(_e){return this.has(_e)?this._getAndRemoveByKey(_e.wrapped().key):null}_getAndRemoveByKey(_e){const rt=this.data[_e].shift();return rt.timeout&&clearTimeout(rt.timeout),this.data[_e].length===0&&delete this.data[_e],this.order.splice(this.order.indexOf(_e),1),rt.value}getByKey(_e){const rt=this.data[_e];return rt?rt[0].value:null}get(_e){return this.has(_e)?this.data[_e.wrapped().key][0].value:null}remove(_e,rt){if(!this.has(_e))return this;const at=_e.wrapped().key,ut=rt===void 0?0:this.data[at].indexOf(rt),_t=this.data[at][ut];return this.data[at].splice(ut,1),_t.timeout&&clearTimeout(_t.timeout),this.data[at].length===0&&delete this.data[at],this.onRemove(_t.value),this.order.splice(this.order.indexOf(at),1),this}setMaxSize(_e){for(this.max=_e;this.order.length>this.max;){const rt=this._getAndRemoveByKey(this.order[0]);rt&&this.onRemove(rt)}return this}filter(_e){const rt=[];for(const at in this.data)for(const ut of this.data[at])_e(ut.value)||rt.push(ut);for(const at of rt)this.remove(at.value.tileID,at)}}class S1{constructor(_e,rt,at){this.func=_e,this.mask=rt,this.range=at}}S1.ReadOnly=!1,S1.ReadWrite=!0,S1.disabled=new S1(519,S1.ReadOnly,[0,1]);const jA=7680;class FA{constructor(_e,rt,at,ut,_t,At){this.test=_e,this.ref=rt,this.mask=at,this.fail=ut,this.depthFail=_t,this.pass=At}}FA.disabled=new FA({func:519,mask:0},0,0,jA,jA,jA);class Sy{constructor(_e,rt,at){this.blendFunction=_e,this.blendColor=rt,this.mask=at}}Sy.Replace=[1,0],Sy.disabled=new Sy(Sy.Replace,zs.transparent,[!1,!1,!1,!1]),Sy.unblended=new Sy(Sy.Replace,zs.transparent,[!0,!0,!0,!0]),Sy.alphaBlended=new Sy([1,771],zs.transparent,[!0,!0,!0,!0]);const NA=1029,UA=2305;class Hm{constructor(_e,rt,at){this.enable=_e,this.mode=rt,this.frontFace=at}}Hm.disabled=new Hm(!1,NA,UA),Hm.backCCW=new Hm(!0,NA,UA),Hm.backCW=new Hm(!0,NA,2304),Hm.frontCW=new Hm(!0,1028,2304),Hm.frontCCW=new Hm(!0,1028,UA);class n0 extends cu{constructor(_e,rt,at){super(),this.id=_e,this._onlySymbols=at,rt.on("data",ut=>{ut.dataType==="source"&&ut.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&ut.dataType==="source"&&ut.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),rt.on("error",()=>{this._sourceErrored=!0}),this._source=rt,this._tiles={},this._cache=new hE(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=rt.minTileCacheSize,this._maxTileCacheSize=rt.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Fu,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(_e){this.map=_e,this._minTileCacheSize=this._minTileCacheSize===void 0&&_e?_e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&_e?_e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const _e in this._tiles){const rt=this._tiles[_e];if(rt.state!=="loaded"&&rt.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const _e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,_e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(_e,rt){return _e.isSymbolTile=this._onlySymbols,this._source.loadTile(_e,rt)}_unloadTile(_e){if(this._source.unloadTile)return this._source.unloadTile(_e,()=>{})}_abortTile(_e){if(this._source.abortTile)return this._source.abortTile(_e,()=>{})}serialize(){return this._source.serialize()}prepare(_e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const rt in this._tiles){const at=this._tiles[rt];at.upload(_e),at.prepare(this.map.style.imageManager)}}getIds(){return Pt(this._tiles).map(_e=>_e.tileID).sort(XA).map(_e=>_e.key)}getRenderableIds(_e){const rt=[];for(const at in this._tiles)this._isIdRenderable(+at,_e)&&rt.push(this._tiles[at]);return _e?rt.sort((at,ut)=>{const _t=at.tileID,At=ut.tileID,Dt=new mt(_t.canonical.x,_t.canonical.y)._rotate(this.transform.angle),Wt=new mt(At.canonical.x,At.canonical.y)._rotate(this.transform.angle);return _t.overscaledZ-At.overscaledZ||Wt.y-Dt.y||Wt.x-Dt.x}).map(at=>at.tileID.key):rt.map(at=>at.tileID).sort(XA).map(at=>at.key)}hasRenderableParent(_e){const rt=this.findLoadedParent(_e,0);return!!rt&&this._isIdRenderable(rt.tileID.key)}_isIdRenderable(_e,rt){return this._tiles[_e]&&this._tiles[_e].hasData()&&!this._coveredTiles[_e]&&(rt||!this._tiles[_e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const _e in this._tiles)this._tiles[_e].state!=="errored"&&this._reloadTile(+_e,"reloading")}}_reloadTile(_e,rt){const at=this._tiles[_e];at&&(at.state!=="loading"&&(at.state=rt),this._loadTile(at,this._tileLoaded.bind(this,at,_e,rt)))}_tileLoaded(_e,rt,at,ut){if(ut)if(_e.state="errored",ut.status!==404)this._source.fire(new Su(ut,{tile:_e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const _t=this.map.painter.terrain;this.update(this.transform,_t.getScaledDemTileSize(),!0),_t.resetTileLookupCache(this.id)}else this.update(this.transform);else _e.timeAdded=ms.now(),at==="expired"&&(_e.refreshedUponExpiration=!0),this._setTileReloadTimer(rt,_e),this._source.type==="raster-dem"&&_e.dem&&this._backfillDEM(_e),this._state.initializeTileState(_e,this.map?this.map.painter:null),this._source.fire(new As("data",{dataType:"source",tile:_e,coord:_e.tileID,sourceCacheId:this.id}))}_backfillDEM(_e){const rt=this.getRenderableIds();for(let ut=0;ut<rt.length;ut++){const _t=rt[ut];if(_e.neighboringTiles&&_e.neighboringTiles[_t]){const At=this.getTileByID(_t);at(_e,At),at(At,_e)}}function at(ut,_t){if(!ut.dem||ut.dem.borderReady)return;ut.needsHillshadePrepare=!0,ut.needsDEMTextureUpload=!0;let At=_t.tileID.canonical.x-ut.tileID.canonical.x;const Dt=_t.tileID.canonical.y-ut.tileID.canonical.y,Wt=Math.pow(2,ut.tileID.canonical.z),Zt=_t.tileID.key;At===0&&Dt===0||Math.abs(Dt)>1||(Math.abs(At)>1&&(Math.abs(At+Wt)===1?At+=Wt:Math.abs(At-Wt)===1&&(At-=Wt)),_t.dem&&ut.dem&&(ut.dem.backfillBorder(_t.dem,At,Dt),ut.neighboringTiles&&ut.neighboringTiles[Zt]&&(ut.neighboringTiles[Zt].backfilled=!0)))}}getTile(_e){return this.getTileByID(_e.key)}getTileByID(_e){return this._tiles[_e]}_retainLoadedChildren(_e,rt,at,ut){for(const _t in this._tiles){let At=this._tiles[_t];if(ut[_t]||!At.hasData()||At.tileID.overscaledZ<=rt||At.tileID.overscaledZ>at)continue;let Dt=At.tileID;for(;At&&At.tileID.overscaledZ>rt+1;){const Zt=At.tileID.scaledTo(At.tileID.overscaledZ-1);At=this._tiles[Zt.key],At&&At.hasData()&&(Dt=Zt)}let Wt=Dt;for(;Wt.overscaledZ>rt;)if(Wt=Wt.scaledTo(Wt.overscaledZ-1),_e[Wt.key]){ut[Dt.key]=Dt;break}}}findLoadedParent(_e,rt){if(_e.key in this._loadedParentTiles){const at=this._loadedParentTiles[_e.key];return at&&at.tileID.overscaledZ>=rt?at:null}for(let at=_e.overscaledZ-1;at>=rt;at--){const ut=_e.scaledTo(at),_t=this._getLoadedTile(ut);if(_t)return _t}}_getLoadedTile(_e){const rt=this._tiles[_e.key];return rt&&rt.hasData()?rt:this._cache.getByKey(this._source.reparseOverscaled?_e.wrapped().key:_e.canonical.key)}updateCacheSize(_e,rt){rt=rt||this._source.tileSize;const at=Math.ceil(_e.width/rt)+1,ut=Math.ceil(_e.height/rt)+1,_t=Math.floor(at*ut*5),At=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,_t):_t,Dt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,At):At;this._cache.setMaxSize(Dt)}handleWrapJump(_e){const rt=Math.round((_e-(this._prevLng===void 0?_e:this._prevLng))/360);if(this._prevLng=_e,rt){const at={};for(const ut in this._tiles){const _t=this._tiles[ut];_t.tileID=_t.tileID.unwrapTo(_t.tileID.wrap+rt),at[_t.tileID.key]=_t}this._tiles=at;for(const ut in this._timers)clearTimeout(this._timers[ut]),delete this._timers[ut];for(const ut in this._tiles)this._setTileReloadTimer(+ut,this._tiles[ut])}}update(_e,rt,at){if(this.transform=_e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!at)return;let ut;this.updateCacheSize(_e,rt),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?ut=_e.getVisibleUnwrappedCoordinates(this._source.tileID).map(Dt=>new Mu(Dt.canonical.z,Dt.wrap,Dt.canonical.z,Dt.canonical.x,Dt.canonical.y)):(ut=_e.coveringTiles({tileSize:rt||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!at,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(ut=ut.filter(Dt=>this._source.hasTile(Dt)))):ut=[];const _t=this._updateRetainedTiles(ut);if(QA(this._source.type)&&ut.length!==0){const Dt={},Wt={},Zt=Object.keys(_t);for(const cn of Zt){const fn=_t[cn],wn=this._tiles[cn];if(!wn||wn.fadeEndTime&&wn.fadeEndTime<=ms.now())continue;const xn=this.findLoadedParent(fn,Math.max(fn.overscaledZ-n0.maxOverzooming,this._source.minzoom));xn&&(this._addTile(xn.tileID),Dt[xn.tileID.key]=xn.tileID),Wt[cn]=fn}const tn=ut[ut.length-1].overscaledZ;for(const cn in this._tiles){const fn=this._tiles[cn];if(_t[cn]||!fn.hasData())continue;let wn=fn.tileID;for(;wn.overscaledZ>tn;){wn=wn.scaledTo(wn.overscaledZ-1);const xn=this._tiles[wn.key];if(xn&&xn.hasData()&&Wt[wn.key]){_t[cn]=fn.tileID;break}}}for(const cn in Dt)_t[cn]||(this._coveredTiles[cn]=!0,_t[cn]=Dt[cn])}for(const Dt in _t)this._tiles[Dt].clearFadeHold();const At=function(Dt,Wt){const Zt=[];for(const tn in Dt)tn in Wt||Zt.push(tn);return Zt}(this._tiles,_t);for(const Dt of At){const Wt=this._tiles[Dt];Wt.hasSymbolBuckets&&!Wt.holdingForFade()?Wt.setHoldDuration(this.map._fadeDuration):Wt.hasSymbolBuckets&&!Wt.symbolFadeFinished()||this._removeTile(+Dt)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const _e in this._tiles)this._tiles[_e].holdingForFade()&&this._removeTile(+_e)}_updateRetainedTiles(_e){const rt={};if(_e.length===0)return rt;const at={},ut=_e.reduce((Zt,tn)=>Math.min(Zt,tn.overscaledZ),1/0),_t=_e[0].overscaledZ,At=Math.max(_t-n0.maxOverzooming,this._source.minzoom),Dt=Math.max(_t+n0.maxUnderzooming,this._source.minzoom),Wt={};for(const Zt of _e){const tn=this._addTile(Zt);rt[Zt.key]=Zt,tn.hasData()||ut<this._source.maxzoom&&(Wt[Zt.key]=Zt)}this._retainLoadedChildren(Wt,ut,Dt,rt);for(const Zt of _e){let tn=this._tiles[Zt.key];if(tn.hasData())continue;if(Zt.canonical.z>=this._source.maxzoom){const fn=Zt.children(this._source.maxzoom)[0],wn=this.getTile(fn);if(wn&&wn.hasData()){rt[fn.key]=fn;continue}}else{const fn=Zt.children(this._source.maxzoom);if(rt[fn[0].key]&&rt[fn[1].key]&&rt[fn[2].key]&&rt[fn[3].key])continue}let cn=tn.wasRequested();for(let fn=Zt.overscaledZ-1;fn>=At;--fn){const wn=Zt.scaledTo(fn);if(at[wn.key]||(at[wn.key]=!0,tn=this.getTile(wn),!tn&&cn&&(tn=this._addTile(wn)),tn&&(rt[wn.key]=wn,cn=tn.wasRequested(),tn.hasData())))break}}return rt}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const _e in this._tiles){const rt=[];let at,ut=this._tiles[_e].tileID;for(;ut.overscaledZ>0;){if(ut.key in this._loadedParentTiles){at=this._loadedParentTiles[ut.key];break}rt.push(ut.key);const _t=ut.scaledTo(ut.overscaledZ-1);if(at=this._getLoadedTile(_t),at)break;ut=_t}for(const _t of rt)this._loadedParentTiles[_t]=at}}_addTile(_e){let rt=this._tiles[_e.key];if(rt)return rt;rt=this._cache.getAndRemove(_e),rt&&(this._setTileReloadTimer(_e.key,rt),rt.tileID=_e,this._state.initializeTileState(rt,this.map?this.map.painter:null),this._cacheTimers[_e.key]&&(clearTimeout(this._cacheTimers[_e.key]),delete this._cacheTimers[_e.key],this._setTileReloadTimer(_e.key,rt)));const at=Boolean(rt);if(!at){const ut=this.map?this.map.painter:null;rt=new ju(_e,this._source.tileSize*_e.overscaleFactor(),this.transform.tileZoom,ut,this._isRaster),this._loadTile(rt,this._tileLoaded.bind(this,rt,_e.key,rt.state))}return rt?(rt.uses++,this._tiles[_e.key]=rt,at||this._source.fire(new As("dataloading",{tile:rt,coord:rt.tileID,dataType:"source"})),rt):null}_setTileReloadTimer(_e,rt){_e in this._timers&&(clearTimeout(this._timers[_e]),delete this._timers[_e]);const at=rt.getExpiryTimeout();at&&(this._timers[_e]=setTimeout(()=>{this._reloadTile(_e,"expired"),delete this._timers[_e]},at))}_removeTile(_e){const rt=this._tiles[_e];rt&&(rt.uses--,delete this._tiles[_e],this._timers[_e]&&(clearTimeout(this._timers[_e]),delete this._timers[_e]),rt.uses>0||(rt.hasData()&&rt.state!=="reloading"?this._cache.add(rt.tileID,rt,rt.getExpiryTimeout()):(rt.aborted=!0,this._abortTile(rt),this._unloadTile(rt))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const _e in this._tiles)this._removeTile(+_e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(_e,rt,at){const ut=[],_t=this.transform;if(!_t)return ut;const At=_t.projection.name==="globe",Dt=au(_t.center.lng);for(const Wt in this._tiles){const Zt=this._tiles[Wt];if(at&&Zt.clearQueryDebugViz(),Zt.holdingForFade())continue;let tn;if(At){const cn=Zt.tileID.canonical;if(cn.z===0){const fn=[Math.abs(Gt(Dt,...Pw(cn,-1))-Dt),Math.abs(Gt(Dt,...Pw(cn,1))-Dt)];tn=[0,2*fn.indexOf(Math.min(...fn))-1]}else{const fn=[Math.abs(Gt(Dt,...Pw(cn,-1))-Dt),Math.abs(Gt(Dt,...Pw(cn,0))-Dt),Math.abs(Gt(Dt,...Pw(cn,1))-Dt)];tn=[fn.indexOf(Math.min(...fn))-1]}}else tn=[0];for(const cn of tn){const fn=_e.containsTile(Zt,_t,rt,cn);fn&&ut.push(fn)}}return ut}getVisibleCoordinates(_e){const rt=this.getRenderableIds(_e).map(at=>this._tiles[at].tileID);for(const at of rt)at.projMatrix=this.transform.calculateProjMatrix(at.toUnwrapped());return rt}hasTransition(){if(this._source.hasTransition())return!0;if(QA(this._source.type))for(const _e in this._tiles){const rt=this._tiles[_e];if(rt.fadeEndTime!==void 0&&rt.fadeEndTime>=ms.now())return!0}return!1}setFeatureState(_e,rt,at){this._state.updateState(_e=_e||"_geojsonTileLayer",rt,at)}removeFeatureState(_e,rt,at){this._state.removeFeatureState(_e=_e||"_geojsonTileLayer",rt,at)}getFeatureState(_e,rt){return this._state.getState(_e=_e||"_geojsonTileLayer",rt)}setDependencies(_e,rt,at){const ut=this._tiles[_e];ut&&ut.setDependencies(rt,at)}reloadTilesForDependencies(_e,rt){for(const at in this._tiles)this._tiles[at].hasDependency(_e,rt)&&this._reloadTile(+at,"reloading");this._cache.filter(at=>!at.hasDependency(_e,rt))}_preloadTiles(_e,rt){const at=new Map,ut=Array.isArray(_e)?_e:[_e],_t=this.map.painter.terrain,At=this.usedForTerrain&&_t?_t.getScaledDemTileSize():this._source.tileSize;for(const Dt of ut){const Wt=Dt.coveringTiles({tileSize:At,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Zt of Wt)at.set(Zt.key,Zt);this.usedForTerrain&&Dt.updateElevation(!1)}qt(Array.from(at.values()),(Dt,Wt)=>{const Zt=new ju(Dt,this._source.tileSize*Dt.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Zt,tn=>{this._source.type==="raster-dem"&&Zt.dem&&this._backfillDEM(Zt),Wt(tn,Zt)})},rt)}}function XA(nt,_e){const rt=Math.abs(2*nt.wrap)-+(nt.wrap<0),at=Math.abs(2*_e.wrap)-+(_e.wrap<0);return nt.overscaledZ-_e.overscaledZ||at-rt||_e.canonical.y-nt.canonical.y||_e.canonical.x-nt.canonical.x}function QA(nt){return nt==="raster"||nt==="image"||nt==="video"||nt==="custom"}function Pw(nt,_e){const rt=1<<nt.z;return[nt.x/rt+_e,(nt.x+1)/rt+_e]}n0.maxOverzooming=10,n0.maxUnderzooming=3;class cS{constructor(_e,rt,at){this._demTile=_e,this._dem=this._demTile.dem,this._scale=rt,this._offset=at}static create(_e,rt,at){const ut=at||_e.findDEMTileFor(rt);if(!ut||!ut.dem)return;const _t=ut.dem,At=ut.tileID,Dt=1<<rt.canonical.z-At.canonical.z;return new cS(ut,ut.tileSize/Zo/Dt,[(rt.canonical.x/Dt-At.canonical.x)*_t.dim,(rt.canonical.y/Dt-At.canonical.y)*_t.dim])}tileCoordToPixel(_e,rt){const at=rt*this._scale+this._offset[1],ut=Math.floor(_e*this._scale+this._offset[0]),_t=Math.floor(at);return new mt(ut,_t)}getElevationAt(_e,rt,at,ut){const _t=_e*this._scale+this._offset[0],At=rt*this._scale+this._offset[1],Dt=Math.floor(_t),Wt=Math.floor(At),Zt=this._dem;return ut=!!ut,at?Ts(Ts(Zt.get(Dt,Wt,ut),Zt.get(Dt,Wt+1,ut),At-Wt),Ts(Zt.get(Dt+1,Wt,ut),Zt.get(Dt+1,Wt+1,ut),At-Wt),_t-Dt):Zt.get(Dt,Wt,ut)}getElevationAtPixel(_e,rt,at){return this._dem.get(_e,rt,!!at)}getMeterToDEM(_e){return(1<<this._demTile.tileID.canonical.z)*dp(1,_e)*this._dem.stride}}class JA{constructor(_e,rt){this.tileID=_e,this.x=_e.canonical.x,this.y=_e.canonical.y,this.z=_e.canonical.z,this.grid=new ay(Zo,16,0),this.featureIndexArray=new Iv,this.promoteId=rt}insert(_e,rt,at,ut,_t,At=0){const Dt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(at,ut,_t,At);const Wt=this.grid;for(let Zt=0;Zt<rt.length;Zt++){const tn=rt[Zt],cn=[1/0,1/0,-1/0,-1/0];for(let fn=0;fn<tn.length;fn++){const wn=tn[fn];cn[0]=Math.min(cn[0],wn.x),cn[1]=Math.min(cn[1],wn.y),cn[2]=Math.max(cn[2],wn.x),cn[3]=Math.max(cn[3],wn.y)}cn[0]<Zo&&cn[1]<Zo&&cn[2]>=0&&cn[3]>=0&&Wt.insert(Dt,cn[0],cn[1],cn[2],cn[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ow(new $_(this.rawTileData)).layers,this.sourceLayerCoder=new wr(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const _e in this.vtLayers)this.vtFeatures[_e]=[]}return this.vtLayers}query(_e,rt,at,ut){this.loadVTLayers();const _t=_e.params||{},At=v_(_t.filter),Dt=_e.tileResult,Wt=_e.transform,Zt=Dt.bufferedTilespaceBounds,tn=this.grid.query(Zt.min.x,Zt.min.y,Zt.max.x,Zt.max.y,(xn,On,Un,nr)=>L0(Dt.bufferedTilespaceGeometry,xn,On,Un,nr));tn.sort(fE);let cn=null;Wt.elevation&&tn.length>0&&(cn=cS.create(Wt.elevation,this.tileID));const fn={};let wn;for(let xn=0;xn<tn.length;xn++){const On=tn[xn];if(On===wn)continue;wn=On;const Un=this.featureIndexArray.get(On);let nr=null;this.loadMatchingFeature(fn,Un,At,_t.layers,_t.availableImages,rt,at,ut,(hr,tr,sr,mr=0)=>(nr||(nr=Lu(hr,this.tileID.canonical,_e.tileTransform)),tr.queryIntersectsFeature(Dt,hr,sr,nr,this.z,_e.transform,_e.pixelPosMatrix,cn,mr)))}return fn}loadMatchingFeature(_e,rt,at,ut,_t,At,Dt,Wt,Zt){const{featureIndex:tn,bucketIndex:cn,sourceLayerIndex:fn,layoutVertexArrayOffset:wn}=rt,xn=this.bucketLayerIDs[cn];if(ut&&!function(hr,tr){for(let sr=0;sr<hr.length;sr++)if(tr.indexOf(hr[sr])>=0)return!0;return!1}(ut,xn))return;const On=this.sourceLayerCoder.decode(fn),Un=this.vtLayers[On].feature(tn);if(at.needGeometry){const hr=Wy(Un,!0);if(!at.filter(new er(this.tileID.overscaledZ),hr,this.tileID.canonical))return}else if(!at.filter(new er(this.tileID.overscaledZ),Un))return;const nr=this.getId(Un,On);for(let hr=0;hr<xn.length;hr++){const tr=xn[hr];if(ut&&ut.indexOf(tr)<0)continue;const sr=At[tr];if(!sr)continue;let mr={};nr!==void 0&&Wt&&(mr=Wt.getState(sr.sourceLayer||"_geojsonTileLayer",nr));const ar=wt({},Dt[tr]);ar.paint=eE(ar.paint,sr.paint,Un,mr,_t),ar.layout=eE(ar.layout,sr.layout,Un,mr,_t);const Br=!Zt||Zt(Un,sr,mr,wn);if(!Br)continue;const kr=new uo(Un,this.z,this.x,this.y,nr);kr.layer=ar;let Jr=_e[tr];Jr===void 0&&(Jr=_e[tr]=[]),Jr.push({featureIndex:tn,feature:kr,intersectionZ:Br})}}lookupSymbolFeatures(_e,rt,at,ut,_t,At,Dt,Wt){const Zt={};this.loadVTLayers();const tn=v_(_t);for(const cn of _e)this.loadMatchingFeature(Zt,{bucketIndex:at,sourceLayerIndex:ut,featureIndex:cn,layoutVertexArrayOffset:0},tn,At,Dt,Wt,rt);return Zt}loadFeature(_e){const{featureIndex:rt,sourceLayerIndex:at}=_e;this.loadVTLayers();const ut=this.sourceLayerCoder.decode(at),_t=this.vtFeatures[ut];if(_t[rt])return _t[rt];const At=this.vtLayers[ut].feature(rt);return _t[rt]=At,At}hasLayer(_e){for(const rt of this.bucketLayerIDs)for(const at of rt)if(_e===at)return!0;return!1}getId(_e,rt){let at=_e.id;if(this.promoteId){const ut=typeof this.promoteId=="string"?this.promoteId:this.promoteId[rt];ut!=null&&(at=_e.properties[ut]),typeof at=="boolean"&&(at=Number(at))}return at}}function eE(nt,_e,rt,at,ut){return Mt(nt,(_t,At)=>{const Dt=_e instanceof eo?_e.get(At):null;return Dt&&Dt.evaluate?Dt.evaluate(rt,at,ut):Dt})}function fE(nt,_e){return _e-nt}Oo(JA,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class tE{constructor(_e,rt){this.width=_e,this.height=rt,this.nextRow=0,this.image=new Um({width:_e,height:rt}),this.positions={},this.uploaded=!1}getDash(_e,rt){const at=this.getKey(_e,rt);return this.positions[at]}trim(){const _e=this.width,rt=this.height=dn(this.nextRow);this.image.resize({width:_e,height:rt})}getKey(_e,rt){return _e.join(",")+rt}getDashRanges(_e,rt,at){const ut=[];let _t=_e.length%2==1?-_e[_e.length-1]*at:0,At=_e[0]*at,Dt=!0;ut.push({left:_t,right:At,isDash:Dt,zeroLength:_e[0]===0});let Wt=_e[0];for(let Zt=1;Zt<_e.length;Zt++){Dt=!Dt;const tn=_e[Zt];_t=Wt*at,Wt+=tn,At=Wt*at,ut.push({left:_t,right:At,isDash:Dt,zeroLength:tn===0})}return ut}addRoundDash(_e,rt,at){const ut=rt/2;for(let _t=-at;_t<=at;_t++){const At=this.width*(this.nextRow+at+_t);let Dt=0,Wt=_e[Dt];for(let Zt=0;Zt<this.width;Zt++){Zt/Wt.right>1&&(Wt=_e[++Dt]);const tn=Math.abs(Zt-Wt.left),cn=Math.abs(Zt-Wt.right),fn=Math.min(tn,cn);let wn;const xn=_t/at*(ut+1);if(Wt.isDash){const On=ut-Math.abs(xn);wn=Math.sqrt(fn*fn+On*On)}else wn=ut-Math.sqrt(fn*fn+xn*xn);this.image.data[At+Zt]=Math.max(0,Math.min(255,wn+128))}}}addRegularDash(_e,rt){for(let Wt=_e.length-1;Wt>=0;--Wt){const Zt=_e[Wt],tn=_e[Wt+1];Zt.zeroLength?_e.splice(Wt,1):tn&&tn.isDash===Zt.isDash&&(tn.left=Zt.left,_e.splice(Wt,1))}const at=_e[0],ut=_e[_e.length-1];at.isDash===ut.isDash&&(at.left=ut.left-this.width,ut.right=at.right+this.width);const _t=this.width*this.nextRow;let At=0,Dt=_e[At];for(let Wt=0;Wt<this.width;Wt++){Wt/Dt.right>1&&(Dt=_e[++At]);const Zt=Math.abs(Wt-Dt.left),tn=Math.abs(Wt-Dt.right),cn=Math.min(Zt,tn);this.image.data[_t+Wt]=Math.max(0,Math.min(255,(Dt.isDash?cn:-cn)+rt+128))}}addDash(_e,rt){const at=this.getKey(_e,rt);if(this.positions[at])return this.positions[at];const ut=rt==="round",_t=ut?7:0,At=2*_t+1;if(this.nextRow+At>this.height)return hn("LineAtlas out of space"),null;_e.length===0&&_e.push(1);let Dt=0;for(let tn=0;tn<_e.length;tn++)_e[tn]<0&&(hn("Negative value is found in line dasharray, replacing values with 0"),_e[tn]=0),Dt+=_e[tn];if(Dt!==0){const tn=this.width/Dt,cn=this.getDashRanges(_e,this.width,tn);ut?this.addRoundDash(cn,tn,_t):this.addRegularDash(cn,rt==="square"?.5*tn:0)}const Wt=this.nextRow+_t;this.nextRow+=At;const Zt={tl:[Wt,_t],br:[Dt,0]};return this.positions[at]=Zt,Zt}}Oo(tE,"LineAtlas");class nE{constructor(_e){const rt={},at=[];for(const Dt in _e){const Wt=_e[Dt],Zt=rt[Dt]={};for(const tn in Wt.glyphs){const cn=Wt.glyphs[+tn];if(!cn||cn.bitmap.width===0||cn.bitmap.height===0)continue;const fn=cn.metrics.localGlyph?2:1,wn={x:0,y:0,w:cn.bitmap.width+2*fn,h:cn.bitmap.height+2*fn};at.push(wn),Zt[tn]=wn}}const{w:ut,h:_t}=r1(at),At=new Um({width:ut||1,height:_t||1});for(const Dt in _e){const Wt=_e[Dt];for(const Zt in Wt.glyphs){const tn=Wt.glyphs[+Zt];if(!tn||tn.bitmap.width===0||tn.bitmap.height===0)continue;const cn=rt[Dt][Zt],fn=tn.metrics.localGlyph?2:1;Um.copy(tn.bitmap,At,{x:0,y:0},{x:cn.x+fn,y:cn.y+fn},tn.bitmap)}}this.image=At,this.positions=rt}}Oo(nE,"GlyphAtlas");class dE{constructor(_e){this.tileID=new Mu(_e.tileID.overscaledZ,_e.tileID.wrap,_e.tileID.canonical.z,_e.tileID.canonical.x,_e.tileID.canonical.y),this.tileZoom=_e.tileZoom,this.uid=_e.uid,this.zoom=_e.zoom,this.canonical=_e.tileID.canonical,this.pixelRatio=_e.pixelRatio,this.tileSize=_e.tileSize,this.source=_e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=_e.showCollisionBoxes,this.collectResourceTiming=!!_e.collectResourceTiming,this.returnDependencies=!!_e.returnDependencies,this.promoteId=_e.promoteId,this.enableTerrain=!!_e.enableTerrain,this.isSymbolTile=_e.isSymbolTile,this.tileTransform=Xy(_e.tileID.canonical,_e.projection),this.projection=_e.projection}parse(_e,rt,at,ut,_t){this.status="parsing",this.data=_e,this.collisionBoxArray=new R_;const At=new wr(Object.keys(_e.layers).sort()),Dt=new JA(this.tileID,this.promoteId);Dt.bucketLayerIDs=[];const Wt={},Zt=new tE(256,256),tn={featureIndex:Dt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Zt,availableImages:at},cn=rt.familiesBySource[this.source];for(const mr in cn){const ar=_e.layers[mr];if(!ar)continue;let Br=!1,kr=!1;for(const Ur of cn[mr])Ur[0].type==="symbol"?Br=!0:kr=!0;if(this.isSymbolTile===!0&&!Br||this.isSymbolTile===!1&&!kr)continue;ar.version===1&&hn(`Vector tile source "${this.source}" layer "${mr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jr=At.encode(mr),ho=[];for(let Ur=0;Ur<ar.length;Ur++){const no=ar.feature(Ur),oo=Dt.getId(no,mr);ho.push({feature:no,id:oo,index:Ur,sourceLayerIndex:Jr})}for(const Ur of cn[mr]){const no=Ur[0];this.isSymbolTile!==void 0&&no.type==="symbol"!==this.isSymbolTile||no.minzoom&&this.zoom<Math.floor(no.minzoom)||no.maxzoom&&this.zoom>=no.maxzoom||no.visibility!=="none"&&(zA(Ur,this.zoom,at),(Wt[no.id]=no.createBucket({index:Dt.bucketLayerIDs.length,layers:Ur,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jr,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:at})).populate(ho,tn,this.tileID.canonical,this.tileTransform),Dt.bucketLayerIDs.push(Ur.map(oo=>oo.id)))}}let fn,wn,xn,On;Zt.trim();const Un={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},nr=Mt(tn.glyphDependencies,mr=>Object.keys(mr).map(Number));Object.keys(nr).length?ut.send("getGlyphs",{uid:this.uid,stacks:nr},(mr,ar)=>{fn||(fn=mr,wn=ar,sr.call(this))},void 0,!1,Un):wn={};const hr=Object.keys(tn.iconDependencies);hr.length?ut.send("getImages",{icons:hr,source:this.source,tileID:this.tileID,type:"icons"},(mr,ar)=>{fn||(fn=mr,xn=ar,sr.call(this))},void 0,!1,Un):xn={};const tr=Object.keys(tn.patternDependencies);function sr(){if(fn)return _t(fn);if(wn&&xn&&On){const mr=new nE(wn),ar=new Ys(xn,On);for(const Br in Wt){const kr=Wt[Br];kr instanceof xy?(zA(kr.layers,this.zoom,at),_A(kr,wn,mr.positions,xn,ar.iconPositions,this.showCollisionBoxes,at,this.tileID.canonical,this.tileZoom,this.projection)):kr.hasPattern&&(kr instanceof _h||kr instanceof q0||kr instanceof qy)&&(zA(kr.layers,this.zoom,at),kr.addFeatures(tn,this.tileID.canonical,ar.patternPositions,at,this.tileTransform))}this.status="done",_t(null,{buckets:Pt(Wt).filter(Br=>!Br.isEmpty()),featureIndex:Dt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mr.image,lineAtlas:Zt,imageAtlas:ar,glyphMap:this.returnDependencies?wn:null,iconMap:this.returnDependencies?xn:null,glyphPositions:this.returnDependencies?mr.positions:null})}}tr.length?ut.send("getImages",{icons:tr,source:this.source,tileID:this.tileID,type:"patterns"},(mr,ar)=>{fn||(fn=mr,On=ar,sr.call(this))},void 0,!1,Un):On={},sr.call(this)}}function zA(nt,_e,rt){const at=new er(_e);for(const ut of nt)ut.recalculate(at,rt)}class rE{constructor(_e){this.entries={},this.scheduler=_e}request(_e,rt,at,ut){const _t=this.entries[_e]=this.entries[_e]||{callbacks:[]};if(_t.result){const[At,Dt]=_t.result;return this.scheduler?this.scheduler.add(()=>{ut(At,Dt)},rt):ut(At,Dt),()=>{}}return _t.callbacks.push(ut),_t.cancel||(_t.cancel=at((At,Dt)=>{_t.result=[At,Dt];for(const Wt of _t.callbacks)this.scheduler?this.scheduler.add(()=>{Wt(At,Dt)},rt):Wt(At,Dt);setTimeout(()=>delete this.entries[_e],3e3)})),()=>{_t.result||(_t.callbacks=_t.callbacks.filter(At=>At!==ut),_t.callbacks.length||(_t.cancel(),delete this.entries[_e]))}}}function iE(nt,_e,rt){const at=JSON.stringify(nt.request);return nt.data&&(this.deduped.entries[at]={result:[null,nt.data]}),this.deduped.request(at,{type:"parseTile",isSymbolTile:nt.isSymbolTile,zoom:nt.tileZoom},ut=>{const _t=Ss(nt.request,(At,Dt,Wt,Zt)=>{At?ut(At):Dt&&ut(null,{vectorTile:rt?void 0:new ow(new $_(Dt)),rawData:Dt,cacheControl:Wt,expires:Zt})});return()=>{_t.cancel(),ut()}},_e)}j.ARRAY_TYPE=Qu,j.AUTH_ERR_MSG=En,j.Aabb=Ou,j.Actor=class{constructor(nt,_e,rt){this.target=nt,this.parent=_e,this.mapId=rt,this.callbacks={},this.cancelCallbacks={},an(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Yn()?nt:it,this.scheduler=new cr}send(nt,_e,rt,at,ut=!1,_t){const At=Math.round(1e18*Math.random()).toString(36).substring(0,10);rt&&(rt.metadata=_t,this.callbacks[At]=rt);const Dt=to(this.globalScope)?void 0:[];return this.target.postMessage({id:At,type:nt,hasCallback:!!rt,targetMapId:at,mustQueue:ut,sourceMapId:this.mapId,data:jy(_e,Dt)},Dt),{cancel:()=>{rt&&delete this.callbacks[At],this.target.postMessage({id:At,type:"<cancel>",targetMapId:at,sourceMapId:this.mapId})}}}receive(nt){const _e=nt.data,rt=_e.id;if(rt&&(!_e.targetMapId||this.mapId===_e.targetMapId))if(_e.type==="<cancel>"){const at=this.cancelCallbacks[rt];delete this.cancelCallbacks[rt],at&&at.cancel()}else if(_e.mustQueue||Yn()){const at=this.callbacks[rt];this.cancelCallbacks[rt]=this.scheduler.add(()=>this.processTask(rt,_e),at&&at.metadata||{type:"message"})}else this.processTask(rt,_e)}processTask(nt,_e){if(_e.type==="<response>"){const rt=this.callbacks[nt];delete this.callbacks[nt],rt&&(_e.error?rt(fm(_e.error)):rt(null,fm(_e.data)))}else{const rt=to(this.globalScope)?void 0:[],at=_e.hasCallback?(_t,At)=>{delete this.cancelCallbacks[nt],this.target.postMessage({id:nt,type:"<response>",sourceMapId:this.mapId,error:_t?jy(_t):null,data:jy(At,rt)},rt)}:_t=>{},ut=fm(_e.data);if(this.parent[_e.type])this.parent[_e.type](_e.sourceMapId,ut,at);else if(this.parent.getWorkerSource){const _t=_e.type.split(".");this.parent.getWorkerSource(_e.sourceMapId,_t[0],ut.source)[_t[1]](ut,at)}else at(new Error(`Could not find function ${_e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},j.CanonicalTileID=V_,j.Color=zs,j.ColorMode=Sy,j.CullFaceMode=Hm,j.DEMData=uS,j.DataConstantProperty=Or,j.DedupedRequest=rE,j.DepthMode=S1,j.EXTENT=Zo,j.Elevation=class{isDataAvailableAtPoint(nt){const _e=this._source();if(this.isUsingMockSource()||!_e||nt.y<0||nt.y>1)return!1;const rt=_e.getSource().maxzoom,at=1<<rt,ut=Math.floor(nt.x),_t=Math.floor((nt.x-ut)*at),At=Math.floor(nt.y*at),Dt=this.findDEMTileFor(new Mu(rt,ut,rt,_t,At));return!(!Dt||!Dt.dem)}getAtPointOrZero(nt,_e=0){return this.getAtPoint(nt,_e)||0}getAtPoint(nt,_e,rt=!0){if(this.isUsingMockSource())return null;_e==null&&(_e=null);const at=this._source();if(!at||nt.y<0||nt.y>1)return _e;const ut=at.getSource().maxzoom,_t=1<<ut,At=Math.floor(nt.x),Dt=nt.x-At,Wt=new Mu(ut,At,ut,Math.floor(Dt*_t),Math.floor(nt.y*_t)),Zt=this.findDEMTileFor(Wt);if(!Zt||!Zt.dem)return _e;const tn=Zt.dem,cn=1<<Zt.tileID.canonical.z,fn=(Dt*cn-Zt.tileID.canonical.x)*tn.dim,wn=(nt.y*cn-Zt.tileID.canonical.y)*tn.dim,xn=Math.floor(fn),On=Math.floor(wn);return(rt?this.exaggeration():1)*Ts(Ts(tn.get(xn,On),tn.get(xn,On+1),wn-On),Ts(tn.get(xn+1,On),tn.get(xn+1,On+1),wn-On),fn-xn)}getAtTileOffset(nt,_e,rt){const at=1<<nt.canonical.z;return this.getAtPointOrZero(new dy(nt.wrap+(nt.canonical.x+_e/Zo)/at,(nt.canonical.y+rt/Zo)/at))}getAtTileOffsetFunc(nt,_e,rt,at){return ut=>{const _t=this.getAtTileOffset(nt,ut.x,ut.y),At=at.upVector(nt.canonical,ut.x,ut.y);return pp(At,At,_t*at.upVectorScale(nt.canonical,_e,rt).metersToTile),At}}getForTilePoints(nt,_e,rt,at){if(this.isUsingMockSource())return!1;const ut=cS.create(this,nt,at);return!!ut&&(_e.forEach(_t=>{_t[2]=this.exaggeration()*ut.getElevationAt(_t[0],_t[1],rt)}),!0)}getMinMaxForTile(nt){if(this.isUsingMockSource())return null;const _e=this.findDEMTileFor(nt);if(!_e||!_e.dem)return null;const rt=_e.dem.tree,at=_e.tileID,ut=1<<nt.canonical.z-at.canonical.z;let _t=nt.canonical.x/ut-at.canonical.x,At=nt.canonical.y/ut-at.canonical.y,Dt=0;for(let Wt=0;Wt<nt.canonical.z-at.canonical.z&&!rt.leaves[Dt];Wt++){_t*=2,At*=2;const Zt=2*Math.floor(At)+Math.floor(_t);Dt=rt.childOffsets[Dt]+Zt,_t%=1,At%=1}return{min:this.exaggeration()*rt.minimums[Dt],max:this.exaggeration()*rt.maximums[Dt]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(nt,_e,rt){throw new Error("Pure virtual method called.")}pointCoordinate(nt){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(nt){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},j.ErrorEvent=Su,j.EvaluationParameters=er,j.Event=As,j.Evented=cu,j.FillExtrusionBucket=qy,j.Frustum=K1,j.FrustumCorners=Ju,j.GLOBE_METERS_TO_ECEF=xw,j.GLOBE_RADIUS=Gm,j.GLOBE_SCALE_MATCH_LATITUDE=45,j.GLOBE_ZOOM_THRESHOLD_MAX=6,j.GLOBE_ZOOM_THRESHOLD_MIN=5,j.GlobeSharedBuffers=class{constructor(nt){this._createGrid(nt),this._createPoles(nt)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const nt of this._poleSegments)nt.destroy();for(const nt of this._gridSegments)nt.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const nt of this._wireframeSegments)nt.destroy()}}_createGrid(nt){const _e=new hs,rt=new Jl,at=65;for(let ut=0;ut<at;ut++)for(let _t=0;_t<at;_t++)_e.emplaceBack(_t,ut);this._gridSegments=[];for(let ut=0,_t=0;ut<J_.length;ut++){const At=J_[ut];for(let Wt=0;Wt<At;Wt++)for(let Zt=0;Zt<64;Zt++){const tn=Wt*at+Zt;rt.emplaceBack(tn+1,tn,tn+at),rt.emplaceBack(tn+at,tn+at+1,tn+1)}const Dt=64*At*2;this._gridSegments.push(zl.simpleSegment(0,_t,(At+1)*at,Dt)),_t+=Dt}this._gridBuffer=nt.createVertexBuffer(_e,Xv.members),this._gridIndexBuffer=nt.createIndexBuffer(rt,!0)}_createPoles(nt){const _e=new Jl;for(let ut=0;ut<=Q_;ut++)_e.emplaceBack(0,ut+1,ut+2);this._poleIndexBuffer=nt.createIndexBuffer(_e,!0);const rt=new Rp,at=new Rp;this._poleSegments=[];for(let ut=0,_t=0;ut<5;ut++){const At=360/(1<<ut);rt.emplaceBack(0,-Gm,0,.5,0),at.emplaceBack(0,-Gm,0,.5,1);for(let Dt=0;Dt<=Q_;Dt++){const Wt=Dt/Q_,Zt=Ts(0,At,Wt),[tn,cn,fn]=ev(_d,Tw,Zt,Gm);rt.emplaceBack(tn,cn,fn,Wt,0),at.emplaceBack(tn,cn,fn,Wt,1)}this._poleSegments.push(zl.simpleSegment(_t,0,66,64)),_t+=66}this._poleNorthVertexBuffer=nt.createVertexBuffer(rt,Yx,!1),this._poleSouthVertexBuffer=nt.createVertexBuffer(at,Yx,!1)}getGridBuffers(nt){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[nt]]}getPoleBuffers(nt){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[nt]]}getWirefameBuffers(nt,_e){if(!this._wireframeSegments){const rt=new _u,at=Q_,ut=at+1;this._wireframeSegments=[];for(let _t=0,At=0;_t<J_.length;_t++){const Dt=J_[_t];for(let Zt=0;Zt<Dt;Zt++)for(let tn=0;tn<at;tn++){const cn=Zt*ut+tn;rt.emplaceBack(cn,cn+1),rt.emplaceBack(cn,cn+ut),rt.emplaceBack(cn,cn+ut+1)}const Wt=Dt*at*3;this._wireframeSegments.push(zl.simpleSegment(0,At,(Dt+1)*ut,Wt)),At+=Wt}this._wireframeIndexBuffer=nt.createIndexBuffer(rt)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[_e]]}},j.GlyphManager=Y_,j.ImagePosition=dw,j.LivePerformanceUtils=Yr,j.LngLat=Os,j.LngLatBounds=Yp,j.LocalGlyphMode=a1,j.MAX_MERCATOR_LATITUDE=ym,j.MercatorCoordinate=dy,j.ONE_EM=uu,j.OverscaledTileID=Mu,j.PerformanceMarkers=xr,j.Properties=yo,j.RGBAImage=_c,j.Ray=Y1,j.RequestManager=class{constructor(nt,_e,rt){this._transformRequestFn=nt,this._customAccessToken=_e,this._silenceAuthErrors=!!rt,this._createSkuToken()}_createSkuToken(){const nt=function(){let _e="";for(let rt=0;rt<10;rt++)_e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Lt,_e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=nt.token,this._skuTokenExpiresAt=nt.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(nt,_e){return this._transformRequestFn&&this._transformRequestFn(nt,_e)||{url:nt}}normalizeStyleURL(nt,_e){if(!Bn(nt))return nt;const rt=qr(nt);return rt.path=`/styles/v1${rt.path}`,this._makeAPIURL(rt,this._customAccessToken||_e)}normalizeGlyphsURL(nt,_e){if(!Bn(nt))return nt;const rt=qr(nt);return rt.path=`/fonts/v1${rt.path}`,this._makeAPIURL(rt,this._customAccessToken||_e)}normalizeSourceURL(nt,_e,rt,at){if(!Bn(nt))return nt;const ut=qr(nt);return ut.path=`/v4/${ut.authority}.json`,ut.params.push("secure"),rt&&ut.params.push(`language=${rt}`),at&&ut.params.push(`worldview=${at}`),this._makeAPIURL(ut,this._customAccessToken||_e)}normalizeSpriteURL(nt,_e,rt,at){const ut=qr(nt);return Bn(nt)?(ut.path=`/styles/v1${ut.path}/sprite${_e}${rt}`,this._makeAPIURL(ut,this._customAccessToken||at)):(ut.path+=`${_e}${rt}`,Mr(ut))}normalizeTileURL(nt,_e,rt){if(this._isSkuTokenExpired()&&this._createSkuToken(),nt&&!Bn(nt))return nt;const at=qr(nt);at.path=at.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${_e||rt&&at.authority!=="raster"&&rt===512?"@2x":""}${ft.supported?".webp":"$1"}`),at.authority==="raster"?at.path=`/${vt.RASTER_URL_PREFIX}${at.path}`:(at.path=at.path.replace(/^.+\/v4\//,"/"),at.path=`/${vt.TILE_URL_VERSION}${at.path}`);const ut=this._customAccessToken||function(_t){for(const At of _t){const Dt=At.match(/^access_token=(.*)$/);if(Dt)return Dt[1]}return null}(at.params)||vt.ACCESS_TOKEN;return vt.REQUIRE_ACCESS_TOKEN&&ut&&this._skuToken&&at.params.push(`sku=${this._skuToken}`),this._makeAPIURL(at,ut)}canonicalizeTileURL(nt,_e){const rt=qr(nt);if(!rt.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!rt.path.match(/\.[\w]+$/))return nt;let at="mapbox://";rt.path.match(/^\/raster\/v1\//)?at+=`raster/${rt.path.replace(`/${vt.RASTER_URL_PREFIX}/`,"")}`:at+=`tiles/${rt.path.replace(`/${vt.TILE_URL_VERSION}/`,"")}`;let ut=rt.params;return _e&&(ut=ut.filter(_t=>!_t.match(/^access_token=/))),ut.length&&(at+=`?${ut.join("&")}`),at}canonicalizeTileset(nt,_e){const rt=!!_e&&Bn(_e),at=[];for(const ut of nt.tiles||[])ur(ut)?at.push(this.canonicalizeTileURL(ut,rt)):at.push(ut);return at}_makeAPIURL(nt,_e){const rt="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",at=qr(vt.API_URL);if(nt.protocol=at.protocol,nt.authority=at.authority,nt.protocol==="http"){const ut=nt.params.indexOf("secure");ut>=0&&nt.params.splice(ut,1)}if(at.path!=="/"&&(nt.path=`${at.path}${nt.path}`),!vt.REQUIRE_ACCESS_TOKEN)return Mr(nt);if(_e=_e||vt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!_e)throw new Error(`An API access token is required to use Mapbox GL. ${rt}`);if(_e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${rt}`)}return nt.params=nt.params.filter(ut=>ut.indexOf("access_token")===-1),nt.params.push(`access_token=${_e||""}`),Mr(nt)}},j.ResourceType=Co,j.SegmentVector=zl,j.SourceCache=n0,j.StencilMode=FA,j.StructArrayLayout1ui2=C_,j.StructArrayLayout2f1f2i16=Ru,j.StructArrayLayout2i4=hs,j.StructArrayLayout2ui4=_u,j.StructArrayLayout3f12=Zu,j.StructArrayLayout3ui6=Jl,j.StructArrayLayout4i8=Vs,j.StructArrayLayout5f20=Rp,j.Texture=Pn,j.Tile=ju,j.Transitionable=Fr,j.Uniform1f=O0,j.Uniform1i=class extends gm{constructor(nt){super(nt),this.current=0}set(nt,_e,rt){this.fetchUniformLocation(nt,_e)&&this.current!==rt&&(this.current=rt,this.gl.uniform1i(this.location,rt))}},j.Uniform2f=class extends gm{constructor(nt){super(nt),this.current=[0,0]}set(nt,_e,rt){this.fetchUniformLocation(nt,_e)&&(rt[0]===this.current[0]&&rt[1]===this.current[1]||(this.current=rt,this.gl.uniform2f(this.location,rt[0],rt[1])))}},j.Uniform3f=class extends gm{constructor(nt){super(nt),this.current=[0,0,0]}set(nt,_e,rt){this.fetchUniformLocation(nt,_e)&&(rt[0]===this.current[0]&&rt[1]===this.current[1]&&rt[2]===this.current[2]||(this.current=rt,this.gl.uniform3f(this.location,rt[0],rt[1],rt[2])))}},j.Uniform4f=F1,j.UniformColor=N1,j.UniformMatrix2f=class extends gm{constructor(nt){super(nt),this.current=hS}set(nt,_e,rt){if(this.fetchUniformLocation(nt,_e)){for(let at=0;at<4;at++)if(rt[at]!==this.current[at]){this.current=rt,this.gl.uniformMatrix2fv(this.location,!1,rt);break}}}},j.UniformMatrix3f=class extends gm{constructor(nt){super(nt),this.current=pm}set(nt,_e,rt){if(this.fetchUniformLocation(nt,_e)){for(let at=0;at<9;at++)if(rt[at]!==this.current[at]){this.current=rt,this.gl.uniformMatrix3fv(this.location,!1,rt);break}}}},j.UniformMatrix4f=class extends gm{constructor(nt){super(nt),this.current=Ku}set(nt,_e,rt){if(this.fetchUniformLocation(nt,_e)){if(rt[12]!==this.current[12]||rt[0]!==this.current[0])return this.current=rt,void this.gl.uniformMatrix4fv(this.location,!1,rt);for(let at=1;at<16;at++)if(rt[at]!==this.current[at]){this.current=rt,this.gl.uniformMatrix4fv(this.location,!1,rt);break}}}},j.UnwrappedTileID=cw,j.ValidationError=Ro,j.VectorTileFeature=K0,j.VectorTileWorkerSource=class extends cu{constructor(nt,_e,rt,at,ut){super(),this.actor=nt,this.layerIndex=_e,this.availableImages=rt,this.loadVectorData=ut||iE,this.loading={},this.loaded={},this.deduped=new rE(nt.scheduler),this.isSpriteLoaded=at,this.scheduler=nt.scheduler}loadTile(nt,_e){const rt=nt.uid,at=nt&&nt.request,ut=at&&at.collectResourceTiming,_t=this.loading[rt]=new dE(nt);_t.abort=this.loadVectorData(nt,(At,Dt)=>{const Wt=!this.loading[rt];if(delete this.loading[rt],Wt||At||!Dt)return _t.status="done",Wt||(this.loaded[rt]=_t),_e(At);const Zt=Dt.rawData,tn={};Dt.expires&&(tn.expires=Dt.expires),Dt.cacheControl&&(tn.cacheControl=Dt.cacheControl),_t.vectorTile=Dt.vectorTile||new ow(new $_(Zt));const cn=()=>{_t.parse(_t.vectorTile,this.layerIndex,this.availableImages,this.actor,(fn,wn)=>{if(fn||!wn)return _e(fn);const xn={};if(ut){const On=ko(at);On.length>0&&(xn.resourceTiming=JSON.parse(JSON.stringify(On)))}_e(null,wt({rawTileData:Zt.slice(0)},wn,tn,xn))})};this.isSpriteLoaded?cn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(cn,{type:"parseTile",isSymbolTile:nt.isSymbolTile,zoom:nt.tileZoom}):cn()}),this.loaded=this.loaded||{},this.loaded[rt]=_t})}reloadTile(nt,_e){const rt=this.loaded,at=nt.uid,ut=this;if(rt&&rt[at]){const _t=rt[at];_t.showCollisionBoxes=nt.showCollisionBoxes,_t.enableTerrain=!!nt.enableTerrain,_t.projection=nt.projection,_t.tileTransform=Xy(nt.tileID.canonical,nt.projection);const At=(Dt,Wt)=>{const Zt=_t.reloadCallback;Zt&&(delete _t.reloadCallback,_t.parse(_t.vectorTile,ut.layerIndex,this.availableImages,ut.actor,Zt)),_e(Dt,Wt)};_t.status==="parsing"?_t.reloadCallback=At:_t.status==="done"&&(_t.vectorTile?_t.parse(_t.vectorTile,this.layerIndex,this.availableImages,this.actor,At):At())}}abortTile(nt,_e){const rt=nt.uid,at=this.loading[rt];at&&(at.abort&&at.abort(),delete this.loading[rt]),_e()}removeTile(nt,_e){const rt=this.loaded,at=nt.uid;rt&&rt[at]&&delete rt[at],_e()}},j.WritingMode=yp,j.ZoomHistory=m0,j.add=bm,j.addDynamicAttributes=w1,j.adjoint=function(nt,_e){var rt=_e[0],at=_e[1],ut=_e[2],_t=_e[3],At=_e[4],Dt=_e[5],Wt=_e[6],Zt=_e[7],tn=_e[8];return nt[0]=At*tn-Dt*Zt,nt[1]=ut*Zt-at*tn,nt[2]=at*Dt-ut*At,nt[3]=Dt*Wt-_t*tn,nt[4]=rt*tn-ut*Wt,nt[5]=ut*_t-rt*Dt,nt[6]=_t*Zt-At*Wt,nt[7]=at*Wt-rt*Zt,nt[8]=rt*At-at*_t,nt},j.asyncAll=qt,j.bezier=Vt,j.bindAll=an,j.boundsAttributes=Ps,j.bufferConvexPolygon=function(nt,_e){const rt=[];for(let at=0;at<nt.length;at++){const ut=Ht(at-1,-1,nt.length-1),_t=Ht(at+1,-1,nt.length-1),At=nt[at],Dt=nt[_t],Wt=nt[ut].sub(At).unit(),Zt=Dt.sub(At).unit(),tn=Zt.angleWithSep(Wt.x,Wt.y),cn=Wt.add(Zt).unit().mult(-1*_e/Math.sin(tn/2));rt.push(At.add(cn))}return rt},j.cacheEntryPossiblyAdded=function(nt){jr++,jr>Wr&&(nt.getActor().send("enforceCacheSizeLimit",yr),jr=0)},j.calculateGlobeLabelMatrix=function(nt,_e){const{x:rt,y:at}=nt.point,ut=g1(rt,at,nt.worldSize/nt._pixelsPerMercatorPixel,0,0);return D_(ut,ut,Ew(Em(_e)))},j.calculateGlobeMatrix=function(nt){const{x:_e,y:rt}=nt.point,{lng:at,lat:ut}=nt._center;return g1(_e,rt,nt.worldSize,at,ut)},j.calculateGlobeMercatorMatrix=function(nt){const _e=nt.pixelsPerMeter,rt=_e/dp(1,nt.center.lat),at=Xp(new Float64Array(16));return Gy(at,at,[nt.point.x,nt.point.y,0]),py(at,at,[rt,rt,_e]),Float32Array.from(at)},j.circumferenceAtLatitude=P0,j.clamp=Gt,j.clearTileCache=function(nt){if(!Hr())return;const _e=it.caches.delete(kn);nt&&_e.catch(nt).then(()=>nt())},j.clipLine=Bu,j.clone=function(nt){var _e=new Qu(16);return _e[0]=nt[0],_e[1]=nt[1],_e[2]=nt[2],_e[3]=nt[3],_e[4]=nt[4],_e[5]=nt[5],_e[6]=nt[6],_e[7]=nt[7],_e[8]=nt[8],_e[9]=nt[9],_e[10]=nt[10],_e[11]=nt[11],_e[12]=nt[12],_e[13]=nt[13],_e[14]=nt[14],_e[15]=nt[15],_e},j.clone$1=Qt,j.collisionCircleLayout=iA,j.config=vt,j.conjugate=function(nt,_e){return nt[0]=-_e[0],nt[1]=-_e[1],nt[2]=-_e[2],nt[3]=_e[3],nt},j.create=function(){var nt=new Qu(16);return Qu!=Float32Array&&(nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0),nt[0]=1,nt[5]=1,nt[10]=1,nt[15]=1,nt},j.create$1=Zw,j.createExpression=lm,j.createLayout=_o,j.createStyleLayer=function(nt){return nt.type==="custom"?new gt(nt):new yn[nt.type](nt)},j.cross=Z1,j.degToRad=xt,j.distance=function(nt,_e){return Math.hypot(_e[0]-nt[0],_e[1]-nt[1],_e[2]-nt[2])},j.div=function(nt,_e,rt){return nt[0]=_e[0]/rt[0],nt[1]=_e[1]/rt[1],nt[2]=_e[2]/rt[2],nt},j.dot=Mp,j.earthRadius=Dv,j.ease=Kt,j.easeCubicInOut=Ct,j.ecefToLatLng=function([nt,_e,rt]){const at=Math.hypot(nt,_e,rt),ut=Math.atan2(nt,rt),_t=.5*Math.PI-Math.acos(-_e/at);return new Os(St(ut),St(_t))},j.emitValidationErrors=$p,j.endsWith=en,j.enforceCacheSizeLimit=function(nt){Lr(),Kn&&Kn.then(_e=>{_e.keys().then(rt=>{for(let at=0;at<rt.length-nt;at++)_e.delete(rt[at])})})},j.evaluateSizeForFeature=G_,j.evaluateSizeForZoom=H_,j.evaluateVariableOffset=Zx,j.evented=Qn,j.exactEquals=function(nt,_e){return nt[0]===_e[0]&&nt[1]===_e[1]&&nt[2]===_e[2]&&nt[3]===_e[3]},j.exactEquals$1=function(nt,_e){return nt[0]===_e[0]&&nt[1]===_e[1]&&nt[2]===_e[2]},j.exported=ms,j.exported$1=ft,j.extend=wt,j.extend$1=xa,j.fillExtrusionHeightLift=xx,j.filterObject=jt,j.fromMat4=function(nt,_e){return nt[0]=_e[0],nt[1]=_e[1],nt[2]=_e[2],nt[3]=_e[4],nt[4]=_e[5],nt[5]=_e[6],nt[6]=_e[8],nt[7]=_e[9],nt[8]=_e[10],nt},j.fromQuat=function(nt,_e){var rt=_e[0],at=_e[1],ut=_e[2],_t=_e[3],At=rt+rt,Dt=at+at,Wt=ut+ut,Zt=rt*At,tn=at*At,cn=at*Dt,fn=ut*At,wn=ut*Dt,xn=ut*Wt,On=_t*At,Un=_t*Dt,nr=_t*Wt;return nt[0]=1-cn-xn,nt[1]=tn+nr,nt[2]=fn-Un,nt[3]=0,nt[4]=tn-nr,nt[5]=1-Zt-xn,nt[6]=wn+On,nt[7]=0,nt[8]=fn+Un,nt[9]=wn-On,nt[10]=1-Zt-cn,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt},j.fromRotation=function(nt,_e){var rt=Math.sin(_e),at=Math.cos(_e);return nt[0]=at,nt[1]=rt,nt[2]=0,nt[3]=-rt,nt[4]=at,nt[5]=0,nt[6]=0,nt[7]=0,nt[8]=1,nt},j.fromScaling=H1,j.furthestTileCorner=function(nt){const _e=Math.round((nt+45+360)%360/90)%4;return Nt[_e]},j.getAABBPointSquareDist=function(nt,_e,rt){let at=0;for(let ut=0;ut<2;++ut){const _t=rt?rt[ut]:0;nt[ut]>_t&&(at+=(nt[ut]-_t)*(nt[ut]-_t)),_e[ut]<_t&&(at+=(_t-_e[ut])*(_t-_e[ut]))}return at},j.getAnchorAlignment=pw,j.getAnchorJustification=_w,j.getBounds=function(nt){let _e=1/0,rt=1/0,at=-1/0,ut=-1/0;for(const _t of nt)_e=Math.min(_e,_t.x),rt=Math.min(rt,_t.y),at=Math.max(at,_t.x),ut=Math.max(ut,_t.y);return{min:new mt(_e,rt),max:new mt(at,ut)}},j.getColumn=In,j.getGridMatrix=function(nt,_e,rt,at){const ut=_e.getNorth(),_t=_e.getSouth(),At=_e.getWest(),Dt=_e.getEast(),Wt=1<<nt.z,Zt=Dt-At,tn=ut-_t,cn=Zt/Q_,fn=-tn/J_[rt],wn=[0,cn,0,fn,0,0,ut,At,0];if(nt.z>0){const xn=180/at;Yw(wn,wn,[xn/Zt+1,0,0,0,xn/tn+1,0,-.5*xn/cn,.5*xn/fn,1])}return wn[2]=Wt,wn[5]=nt.x,wn[8]=nt.y,wn},j.getImage=bn,j.getJSON=function(nt,_e){return ds(wt(nt,{type:"json"}),_e)},j.getLatitudinalLod=function(nt){const _e=80.051129;nt=Gt(nt,-80.051129,_e)/_e*90;const rt=Math.pow(Math.abs(Math.sin(xt(nt))),3);return Math.round(rt*(J_.length-1))},j.getMapSessionAPI=_r,j.getPerformanceMeasurement=ko,j.getProjection=aS,j.getRTLTextPluginStatus=Gn,j.getReferrer=ps,j.getTilePoint=function(nt,{x:_e,y:rt},at=0){return new mt(((_e-at)*nt.scale-nt.x)*Zo,(rt*nt.scale-nt.y)*Zo)},j.getTileVec3=function(nt,_e,rt=0){return B_(((_e.x-rt)*nt.scale-nt.x)*Zo,(_e.y*nt.scale-nt.y)*Zo,Vw(_e.z,_e.y))},j.getVideo=function(nt,_e){const rt=it.document.createElement("video");rt.muted=!0,rt.onloadstart=function(){_e(null,rt)};for(let at=0;at<nt.length;at++){const ut=it.document.createElement("source");Al(nt[at])||(rt.crossOrigin="Anonymous"),ut.src=nt[at],rt.appendChild(ut)}return{cancel:()=>{}}},j.globeCenterToScreenPoint=function(nt){const _e=[0,0,0],rt=Xp(new Float64Array(16));return D_(rt,nt.pixelMatrix,nt.globeMatrix),Vl(_e,_e,rt),new mt(_e[0],_e[1])},j.globeDenormalizeECEF=Ew,j.globeECEFOrigin=function(nt,_e){const rt=[0,0,0];return Vl(rt,rt,Jv(Em(_e.canonical))),Vl(rt,rt,nt),rt},j.globeNormalizeECEF=Jv,j.globePixelsToTileUnits=function(nt,_e){return Zo/(512*Math.pow(2,nt))*Qv(Em(_e))},j.globePoleMatrixForTile=function(nt,_e,rt){const at=Xp(new Float64Array(16)),ut=(_e/(1<<nt)-.5)*Math.PI*2;return L_(at,rt.globeMatrix,ut),Float32Array.from(at)},j.globeTileBounds=Em,j.globeTiltAtLngLat=tS,j.globeToMercatorTransition=nv,j.globeUseCustomAntiAliasing=function(nt,_e,rt){const at=nv(rt.zoom),ut=nt.style.map._antialias,_t=!!_e.extStandardDerivatives,At=_e.extStandardDerivativesForceOff||nt.terrain&&nt.terrain.exaggeration()>0;return at===0&&!ut&&!At&&_t},j.identity=Xp,j.identity$1=nx,j.invert=F0,j.isFullscreen=function(){return!!it.document.fullscreenElement||!!it.document.webkitFullscreenElement},j.isLngLatBehindGlobe=function(nt,_e){return tS(nt,_e)>Math.PI/2*1.01},j.isMapAuthenticated=function(nt){return fr.has(nt)},j.isMapboxURL=Bn,j.isSafariWithAntialiasingBug=function(nt){const _e=nt.navigator?nt.navigator.userAgent:null;return!!to(nt)&&_e&&(_e.match("Version/15.4")||_e.match("Version/15.5")||_e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},j.latFromMercatorY=eu,j.latLngToECEF=Ky,j.len=yS,j.length=Jp,j.length$1=function(nt){return Math.hypot(nt[0],nt[1],nt[2],nt[3])},j.lngFromMercatorX=gp,j.loadVectorTile=iE,j.makeRequest=ds,j.mapValue=function(nt,_e,rt,at,ut){return Gt((nt-_e)/(rt-_e)*(ut-at)+at,at,ut)},j.mercatorScale=_m,j.mercatorXfromLng=au,j.mercatorYfromLat=Kp,j.mercatorZfromAltitude=dp,j.mul=N0,j.mul$1=Qw,j.multiply=D_,j.multiply$1=Yw,j.multiply$2=Kw,j.nextPowerOfTwo=dn,j.normalize=Iu,j.normalize$1=_S,j.normalize$2=ex,j.number=Ts,j.ortho=function(nt,_e,rt,at,ut,_t,At){var Dt=1/(_e-rt),Wt=1/(at-ut),Zt=1/(_t-At);return nt[0]=-2*Dt,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=-2*Wt,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=2*Zt,nt[11]=0,nt[12]=(_e+rt)*Dt,nt[13]=(ut+at)*Wt,nt[14]=(At+_t)*Zt,nt[15]=1,nt},j.pbf=$_,j.perspective=function(nt,_e,rt,at,ut){var _t,At=1/Math.tan(_e/2);return nt[0]=At/rt,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=At,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[11]=-1,nt[12]=0,nt[13]=0,nt[15]=0,ut!=null&&ut!==1/0?(nt[10]=(ut+at)*(_t=1/(at-ut)),nt[14]=2*ut*at*_t):(nt[10]=-1,nt[14]=-2*at),nt},j.pick=function(nt,_e){const rt={};for(let at=0;at<_e.length;at++){const ut=_e[at];ut in nt&&(rt[ut]=nt[ut])}return rt},j.plugin=lr,j.pointGeometry=mt,j.polygonContainsPoint=Zl,j.polygonIntersectsBox=L0,j.polygonIntersectsPolygon=Ww,j.polygonizeBounds=function(nt,_e,rt=0,at=!0){const ut=new mt(rt,rt),_t=nt.sub(ut),At=_e.add(ut),Dt=[_t,new mt(At.x,_t.y),At,new mt(_t.x,At.y)];return at&&Dt.push(_t.clone()),Dt},j.posAttributes=Xv,j.postMapLoadEvent=Hn,j.postPerformanceEvent=ir,j.postTurnstileEvent=Sn,j.potpack=r1,j.prevPowerOfTwo=function(nt){return nt<=1?1:Math.pow(2,Math.floor(Math.log(nt)/Math.LN2))},j.radToDeg=St,j.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],j.registerForPluginStateChange=function(nt){return nt({pluginStatus:Wn,pluginURL:Zn}),Qn.on("pluginStateChange",nt),nt},j.removeAuthState=function(nt){fr.delete(nt)},j.renderColorRamp=Q1,j.resample=k0,j.rotateX=Hy,j.rotateX$1=rx,j.rotateY=L_,j.rotateY$1=ix,j.rotateZ=function(nt,_e,rt){var at=Math.sin(rt),ut=Math.cos(rt),_t=_e[0],At=_e[1],Dt=_e[2],Wt=_e[3],Zt=_e[4],tn=_e[5],cn=_e[6],fn=_e[7];return _e!==nt&&(nt[8]=_e[8],nt[9]=_e[9],nt[10]=_e[10],nt[11]=_e[11],nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15]),nt[0]=_t*ut+Zt*at,nt[1]=At*ut+tn*at,nt[2]=Dt*ut+cn*at,nt[3]=Wt*ut+fn*at,nt[4]=Zt*ut-_t*at,nt[5]=tn*ut-At*at,nt[6]=cn*ut-Dt*at,nt[7]=fn*ut-Wt*at,nt},j.rotateZ$1=function(nt,_e,rt){rt*=.5;var at=_e[0],ut=_e[1],_t=_e[2],At=_e[3],Dt=Math.sin(rt),Wt=Math.cos(rt);return nt[0]=at*Wt+ut*Dt,nt[1]=ut*Wt-at*Dt,nt[2]=_t*Wt+At*Dt,nt[3]=At*Wt-_t*Dt,nt},j.scale=py,j.scale$1=Jw,j.scale$2=pp,j.scaleAndAdd=Uv,j.set=function(nt,_e,rt,at){return nt[0]=_e,nt[1]=rt,nt[2]=at,nt},j.setCacheLimits=function(nt,_e){yr=nt,Wr=_e},j.setColumn=function(nt,_e,rt){nt[4*_e+0]=rt[0],nt[4*_e+1]=rt[1],nt[4*_e+2]=rt[2],nt[4*_e+3]=rt[3]},j.setRTLTextPlugin=function(nt,_e,rt=!1){if(Wn===vn||Wn===Tn||Wn===Dn)throw new Error("setRTLTextPlugin cannot be called multiple times.");Zn=ms.resolveURL(nt),Wn=vn,$n=_e,jn(),rt||or()},j.smoothstep=Ut,j.spec=$r,j.squaredLength=function(nt){var _e=nt[0],rt=nt[1],at=nt[2];return _e*_e+rt*rt+at*at},j.storeAuthState=function(nt,_e){_e?fr.add(nt):fr.delete(nt)},j.sub=Pp,j.subtract=q1,j.symbolSize=zm,j.tileAABB=function(nt,_e,rt,at,ut,_t,At,Dt,Wt){if(Wt.name==="globe")return AA(nt,_e,new V_(rt,at,ut));const Zt=Xy({z:rt,x:at,y:ut},Wt);return new Ou([(_t+Zt.x/Zt.scale)*_e,_e*(Zt.y/Zt.scale),At],[(_t+Zt.x2/Zt.scale)*_e,_e*(Zt.y2/Zt.scale),Dt])},j.tileCornersToBounds=d1,j.tileTransform=Xy,j.transformMat3=function(nt,_e,rt){var at=_e[0],ut=_e[1],_t=_e[2];return nt[0]=at*rt[0]+ut*rt[3]+_t*rt[6],nt[1]=at*rt[1]+ut*rt[4]+_t*rt[7],nt[2]=at*rt[2]+ut*rt[5]+_t*rt[8],nt},j.transformMat4=Vl,j.transformMat4$1=my,j.transformQuat=Xw,j.transitionTileAABBinECEF=Qx,j.translate=Gy,j.transpose=function(nt,_e){if(nt===_e){var rt=_e[1],at=_e[2],ut=_e[5];nt[1]=_e[3],nt[2]=_e[6],nt[3]=rt,nt[5]=_e[7],nt[6]=at,nt[7]=ut}else nt[0]=_e[0],nt[1]=_e[3],nt[2]=_e[6],nt[3]=_e[1],nt[4]=_e[4],nt[5]=_e[7],nt[6]=_e[2],nt[7]=_e[5],nt[8]=_e[8];return nt},j.triggerPluginCompletionEvent=Fn,j.uniqueId=Xt,j.updateGlobeVertexNormal=function(nt,_e,rt,at,ut){const _t=5*_e+2;nt.float32[_t+0]=rt,nt.float32[_t+1]=at,nt.float32[_t+2]=ut},j.validateCustomStyleLayer=function(nt){const _e=[],rt=nt.id;return rt===void 0&&_e.push({message:`layers.${rt}: missing required property "id"`}),nt.render===void 0&&_e.push({message:`layers.${rt}: missing required method "render"`}),nt.renderingMode&&nt.renderingMode!=="2d"&&nt.renderingMode!=="3d"&&_e.push({message:`layers.${rt}: property "renderingMode" must be either "2d" or "3d"`}),_e},j.validateFilter=nt=>Hp(Wp(nt)),j.validateFog=nt=>Hp(zn(nt)),j.validateLayer=nt=>Hp(Sv(nt)),j.validateLight=nt=>Hp(Gp(nt)),j.validateSource=nt=>Hp(Lm(nt)),j.validateStyle=Is,j.validateTerrain=nt=>Hp(x_(nt)),j.values=Pt,j.vectorTile=Z0,j.version=st,j.warnOnce=hn,j.window=it,j.wrap=Ht}),et(["./shared"],function(j){function it(Vn){if(typeof Vn=="number"||typeof Vn=="boolean"||typeof Vn=="string"||Vn==null)return JSON.stringify(Vn);if(Array.isArray(Vn)){let Cn="[";for(const Hn of Vn)Cn+=`${it(Hn)},`;return`${Cn}]`}let Sn="{";for(const Cn of Object.keys(Vn).sort())Sn+=`${Cn}:${it(Vn[Cn])},`;return`${Sn}}`}function st(Vn){let Sn="";for(const Cn of j.refProperties)Sn+=`/${it(Vn[Cn])}`;return Sn}class ht{constructor(Sn){this.keyCache={},Sn&&this.replace(Sn)}replace(Sn){this._layerConfigs={},this._layers={},this.update(Sn,[])}update(Sn,Cn){for(const Jn of Sn)this._layerConfigs[Jn.id]=Jn,(this._layers[Jn.id]=j.createStyleLayer(Jn)).compileFilter(),this.keyCache[Jn.id]&&delete this.keyCache[Jn.id];for(const Jn of Cn)delete this.keyCache[Jn],delete this._layerConfigs[Jn],delete this._layers[Jn];this.familiesBySource={};const Hn=function(Jn,ir){const gr={};for(let fr=0;fr<Jn.length;fr++){const xr=ir&&ir[Jn[fr].id]||st(Jn[fr]);ir&&(ir[Jn[fr].id]=xr);let Yr=gr[xr];Yr||(Yr=gr[xr]=[]),Yr.push(Jn[fr])}const _r=[];for(const fr in gr)_r.push(gr[fr]);return _r}(j.values(this._layerConfigs),this.keyCache);for(const Jn of Hn){const ir=Jn.map(po=>this._layers[po.id]),gr=ir[0];if(gr.visibility==="none")continue;const _r=gr.source||"";let fr=this.familiesBySource[_r];fr||(fr=this.familiesBySource[_r]={});const xr=gr.sourceLayer||"_geojsonTileLayer";let Yr=fr[xr];Yr||(Yr=fr[xr]=[]),Yr.push(ir)}}}class vt{loadTile(Sn,Cn){const{uid:Hn,encoding:Jn,rawImageData:ir,padding:gr,buildQuadTree:_r}=Sn,fr=j.window.ImageBitmap&&ir instanceof j.window.ImageBitmap?this.getImageData(ir,gr):ir;Cn(null,new j.DEMData(Hn,fr,Jn,gr<1,_r))}getImageData(Sn,Cn){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Sn.width,Sn.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Sn.width,this.offscreenCanvas.height=Sn.height,this.offscreenCanvasContext.drawImage(Sn,0,0,Sn.width,Sn.height);const Hn=this.offscreenCanvasContext.getImageData(-Cn,-Cn,Sn.width+2*Cn,Sn.height+2*Cn);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Hn}}var ft=function Vn(Sn,Cn){var Hn,Jn=Sn&&Sn.type;if(Jn==="FeatureCollection")for(Hn=0;Hn<Sn.features.length;Hn++)Vn(Sn.features[Hn],Cn);else if(Jn==="GeometryCollection")for(Hn=0;Hn<Sn.geometries.length;Hn++)Vn(Sn.geometries[Hn],Cn);else if(Jn==="Feature")Vn(Sn.geometry,Cn);else if(Jn==="Polygon")pt(Sn.coordinates,Cn);else if(Jn==="MultiPolygon")for(Hn=0;Hn<Sn.coordinates.length;Hn++)pt(Sn.coordinates[Hn],Cn);return Sn};function pt(Vn,Sn){if(Vn.length!==0){ct(Vn[0],Sn);for(var Cn=1;Cn<Vn.length;Cn++)ct(Vn[Cn],!Sn)}}function ct(Vn,Sn){for(var Cn=0,Hn=0,Jn=0,ir=Vn.length,gr=ir-1;Jn<ir;gr=Jn++){var _r=(Vn[Jn][0]-Vn[gr][0])*(Vn[gr][1]+Vn[Jn][1]),fr=Cn+_r;Hn+=Math.abs(Cn)>=Math.abs(_r)?Cn-fr+_r:_r-fr+Cn,Cn=fr}Cn+Hn>=0!=!!Sn&&Vn.reverse()}const yt=j.VectorTileFeature.prototype.toGeoJSON;class Et{constructor(Sn){this._feature=Sn,this.extent=j.EXTENT,this.type=Sn.type,this.properties=Sn.tags,"id"in Sn&&!isNaN(Sn.id)&&(this.id=parseInt(Sn.id,10))}loadGeometry(){if(this._feature.type===1){const Sn=[];for(const Cn of this._feature.geometry)Sn.push([new j.pointGeometry(Cn[0],Cn[1])]);return Sn}{const Sn=[];for(const Cn of this._feature.geometry){const Hn=[];for(const Jn of Cn)Hn.push(new j.pointGeometry(Jn[0],Jn[1]));Sn.push(Hn)}return Sn}}toGeoJSON(Sn,Cn,Hn){return yt.call(this,Sn,Cn,Hn)}}class Ot{constructor(Sn){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=j.EXTENT,this.length=Sn.length,this._features=Sn}feature(Sn){return new Et(this._features[Sn])}}var Lt={exports:{}},Tt=j.pointGeometry,It=j.vectorTile.VectorTileFeature,mt=Bt;function Bt(Vn,Sn){this.options=Sn||{},this.features=Vn,this.length=Vn.length}function nn(Vn,Sn){this.id=typeof Vn.id=="number"?Vn.id:void 0,this.type=Vn.type,this.rawGeometry=Vn.type===1?[Vn.geometry]:Vn.geometry,this.properties=Vn.tags,this.extent=Sn||4096}Bt.prototype.feature=function(Vn){return new nn(this.features[Vn],this.options.extent)},nn.prototype.loadGeometry=function(){var Vn=this.rawGeometry;this.geometry=[];for(var Sn=0;Sn<Vn.length;Sn++){for(var Cn=Vn[Sn],Hn=[],Jn=0;Jn<Cn.length;Jn++)Hn.push(new Tt(Cn[Jn][0],Cn[Jn][1]));this.geometry.push(Hn)}return this.geometry},nn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Vn=this.geometry,Sn=1/0,Cn=-1/0,Hn=1/0,Jn=-1/0,ir=0;ir<Vn.length;ir++)for(var gr=Vn[ir],_r=0;_r<gr.length;_r++){var fr=gr[_r];Sn=Math.min(Sn,fr.x),Cn=Math.max(Cn,fr.x),Hn=Math.min(Hn,fr.y),Jn=Math.max(Jn,fr.y)}return[Sn,Hn,Cn,Jn]},nn.prototype.toGeoJSON=It.prototype.toGeoJSON;var sn=j.pbf,xt=mt;function St(Vn){var Sn=new sn;return function(Cn,Hn){for(var Jn in Cn.layers)Hn.writeMessage(3,Nt,Cn.layers[Jn])}(Vn,Sn),Sn.finish()}function Nt(Vn,Sn){var Cn;Sn.writeVarintField(15,Vn.version||1),Sn.writeStringField(1,Vn.name||""),Sn.writeVarintField(5,Vn.extent||4096);var Hn={keys:[],values:[],keycache:{},valuecache:{}};for(Cn=0;Cn<Vn.length;Cn++)Hn.feature=Vn.feature(Cn),Sn.writeMessage(2,Ct,Hn);var Jn=Hn.keys;for(Cn=0;Cn<Jn.length;Cn++)Sn.writeStringField(3,Jn[Cn]);var ir=Hn.values;for(Cn=0;Cn<ir.length;Cn++)Sn.writeMessage(4,Ht,ir[Cn])}function Ct(Vn,Sn){var Cn=Vn.feature;Cn.id!==void 0&&Sn.writeVarintField(1,Cn.id),Sn.writeMessage(2,Vt,Vn),Sn.writeVarintField(3,Cn.type),Sn.writeMessage(4,Ut,Cn)}function Vt(Vn,Sn){var Cn=Vn.feature,Hn=Vn.keys,Jn=Vn.values,ir=Vn.keycache,gr=Vn.valuecache;for(var _r in Cn.properties){var fr=Cn.properties[_r],xr=ir[_r];if(fr!==null){xr===void 0&&(Hn.push(_r),ir[_r]=xr=Hn.length-1),Sn.writeVarint(xr);var Yr=typeof fr;Yr!=="string"&&Yr!=="boolean"&&Yr!=="number"&&(fr=JSON.stringify(fr));var po=Yr+":"+fr,io=gr[po];io===void 0&&(Jn.push(fr),gr[po]=io=Jn.length-1),Sn.writeVarint(io)}}}function Kt(Vn,Sn){return(Sn<<3)+(7&Vn)}function Gt(Vn){return Vn<<1^Vn>>31}function Ut(Vn,Sn){for(var Cn=Vn.loadGeometry(),Hn=Vn.type,Jn=0,ir=0,gr=Cn.length,_r=0;_r<gr;_r++){var fr=Cn[_r],xr=1;Hn===1&&(xr=fr.length),Sn.writeVarint(Kt(1,xr));for(var Yr=Hn===3?fr.length-1:fr.length,po=0;po<Yr;po++){po===1&&Hn!==1&&Sn.writeVarint(Kt(2,Yr-1));var io=fr[po].x-Jn,ko=fr[po].y-ir;Sn.writeVarint(Gt(io)),Sn.writeVarint(Gt(ko)),Jn+=io,ir+=ko}Hn===3&&Sn.writeVarint(Kt(7,1))}}function Ht(Vn,Sn){var Cn=typeof Vn;Cn==="string"?Sn.writeStringField(1,Vn):Cn==="boolean"?Sn.writeBooleanField(7,Vn):Cn==="number"&&(Vn%1!=0?Sn.writeDoubleField(3,Vn):Vn<0?Sn.writeSVarintField(6,Vn):Sn.writeVarintField(5,Vn))}function qt(Vn,Sn,Cn,Hn,Jn,ir){if(Jn-Hn<=Cn)return;const gr=Hn+Jn>>1;Pt(Vn,Sn,gr,Hn,Jn,ir%2),qt(Vn,Sn,Cn,Hn,gr-1,ir+1),qt(Vn,Sn,Cn,gr+1,Jn,ir+1)}function Pt(Vn,Sn,Cn,Hn,Jn,ir){for(;Jn>Hn;){if(Jn-Hn>600){const xr=Jn-Hn+1,Yr=Cn-Hn+1,po=Math.log(xr),io=.5*Math.exp(2*po/3),ko=.5*Math.sqrt(po*io*(xr-io)/xr)*(Yr-xr/2<0?-1:1);Pt(Vn,Sn,Cn,Math.max(Hn,Math.floor(Cn-Yr*io/xr+ko)),Math.min(Jn,Math.floor(Cn+(xr-Yr)*io/xr+ko)),ir)}const gr=Sn[2*Cn+ir];let _r=Hn,fr=Jn;for(wt(Vn,Sn,Hn,Cn),Sn[2*Jn+ir]>gr&&wt(Vn,Sn,Hn,Jn);_r<fr;){for(wt(Vn,Sn,_r,fr),_r++,fr--;Sn[2*_r+ir]<gr;)_r++;for(;Sn[2*fr+ir]>gr;)fr--}Sn[2*Hn+ir]===gr?wt(Vn,Sn,Hn,fr):(fr++,wt(Vn,Sn,fr,Jn)),fr<=Cn&&(Hn=fr+1),Cn<=fr&&(Jn=fr-1)}}function wt(Vn,Sn,Cn,Hn){$t(Vn,Cn,Hn),$t(Sn,2*Cn,2*Hn),$t(Sn,2*Cn+1,2*Hn+1)}function $t(Vn,Sn,Cn){const Hn=Vn[Sn];Vn[Sn]=Vn[Cn],Vn[Cn]=Hn}function Xt(Vn,Sn,Cn,Hn){const Jn=Vn-Cn,ir=Sn-Hn;return Jn*Jn+ir*ir}Lt.exports=St,Lt.exports.fromVectorTileJs=St,Lt.exports.fromGeojsonVt=function(Vn,Sn){Sn=Sn||{};var Cn={};for(var Hn in Vn)Cn[Hn]=new xt(Vn[Hn].features,Sn),Cn[Hn].name=Hn,Cn[Hn].version=Sn.version,Cn[Hn].extent=Sn.extent;return St({layers:Cn})},Lt.exports.GeoJSONWrapper=xt;const un=Vn=>Vn[0],dn=Vn=>Vn[1];class mn{constructor(Sn,Cn=un,Hn=dn,Jn=64,ir=Float64Array){this.nodeSize=Jn,this.points=Sn;const gr=Sn.length<65536?Uint16Array:Uint32Array,_r=this.ids=new gr(Sn.length),fr=this.coords=new ir(2*Sn.length);for(let xr=0;xr<Sn.length;xr++)_r[xr]=xr,fr[2*xr]=Cn(Sn[xr]),fr[2*xr+1]=Hn(Sn[xr]);qt(_r,fr,Jn,0,_r.length-1,0)}range(Sn,Cn,Hn,Jn){return function(ir,gr,_r,fr,xr,Yr,po){const io=[0,ir.length-1,0],ko=[];let Do,Lo;for(;io.length;){const zo=io.pop(),ts=io.pop(),ms=io.pop();if(ts-ms<=po){for(let As=ms;As<=ts;As++)Do=gr[2*As],Lo=gr[2*As+1],Do>=_r&&Do<=xr&&Lo>=fr&&Lo<=Yr&&ko.push(ir[As]);continue}const Eo=Math.floor((ms+ts)/2);Do=gr[2*Eo],Lo=gr[2*Eo+1],Do>=_r&&Do<=xr&&Lo>=fr&&Lo<=Yr&&ko.push(ir[Eo]);const Rs=(zo+1)%2;(zo===0?_r<=Do:fr<=Lo)&&(io.push(ms),io.push(Eo-1),io.push(Rs)),(zo===0?xr>=Do:Yr>=Lo)&&(io.push(Eo+1),io.push(ts),io.push(Rs))}return ko}(this.ids,this.coords,Sn,Cn,Hn,Jn,this.nodeSize)}within(Sn,Cn,Hn){return function(Jn,ir,gr,_r,fr,xr){const Yr=[0,Jn.length-1,0],po=[],io=fr*fr;for(;Yr.length;){const ko=Yr.pop(),Do=Yr.pop(),Lo=Yr.pop();if(Do-Lo<=xr){for(let Rs=Lo;Rs<=Do;Rs++)Xt(ir[2*Rs],ir[2*Rs+1],gr,_r)<=io&&po.push(Jn[Rs]);continue}const zo=Math.floor((Lo+Do)/2),ts=ir[2*zo],ms=ir[2*zo+1];Xt(ts,ms,gr,_r)<=io&&po.push(Jn[zo]);const Eo=(ko+1)%2;(ko===0?gr-fr<=ts:_r-fr<=ms)&&(Yr.push(Lo),Yr.push(zo-1),Yr.push(Eo)),(ko===0?gr+fr>=ts:_r+fr>=ms)&&(Yr.push(zo+1),Yr.push(Do),Yr.push(Eo))}return po}(this.ids,this.coords,Sn,Cn,Hn,this.nodeSize)}}const an={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Vn=>Vn},en=Math.fround||(Mt=new Float32Array(1),Vn=>(Mt[0]=+Vn,Mt[0]));var Mt;class jt{constructor(Sn){this.options=ro(Object.create(an),Sn),this.trees=new Array(this.options.maxZoom+1)}load(Sn){const{log:Cn,minZoom:Hn,maxZoom:Jn,nodeSize:ir}=this.options;Cn&&console.time("total time");const gr=`prepare ${Sn.length} points`;Cn&&console.time(gr),this.points=Sn;let _r=[];for(let fr=0;fr<Sn.length;fr++)Sn[fr].geometry&&_r.push(gn(Sn[fr],fr));this.trees[Jn+1]=new mn(_r,to,zr,ir,Float32Array),Cn&&console.timeEnd(gr);for(let fr=Jn;fr>=Hn;fr--){const xr=+Date.now();_r=this._cluster(_r,fr),this.trees[fr]=new mn(_r,to,zr,ir,Float32Array),Cn&&console.log("z%d: %d clusters in %dms",fr,_r.length,+Date.now()-xr)}return Cn&&console.timeEnd("total time"),this}getClusters(Sn,Cn){let Hn=((Sn[0]+180)%360+360)%360-180;const Jn=Math.max(-90,Math.min(90,Sn[1]));let ir=Sn[2]===180?180:((Sn[2]+180)%360+360)%360-180;const gr=Math.max(-90,Math.min(90,Sn[3]));if(Sn[2]-Sn[0]>=360)Hn=-180,ir=180;else if(Hn>ir){const Yr=this.getClusters([Hn,Jn,180,gr],Cn),po=this.getClusters([-180,Jn,ir,gr],Cn);return Yr.concat(po)}const _r=this.trees[this._limitZoom(Cn)],fr=_r.range(Mn(Hn),Yn(gr),Mn(ir),Yn(Jn)),xr=[];for(const Yr of fr){const po=_r.points[Yr];xr.push(po.numPoints?hn(po):this.points[po.index])}return xr}getChildren(Sn){const Cn=this._getOriginId(Sn),Hn=this._getOriginZoom(Sn),Jn="No cluster with the specified id.",ir=this.trees[Hn];if(!ir)throw new Error(Jn);const gr=ir.points[Cn];if(!gr)throw new Error(Jn);const _r=this.options.radius/(this.options.extent*Math.pow(2,Hn-1)),fr=ir.within(gr.x,gr.y,_r),xr=[];for(const Yr of fr){const po=ir.points[Yr];po.parentId===Sn&&xr.push(po.numPoints?hn(po):this.points[po.index])}if(xr.length===0)throw new Error(Jn);return xr}getLeaves(Sn,Cn,Hn){const Jn=[];return this._appendLeaves(Jn,Sn,Cn=Cn||10,Hn=Hn||0,0),Jn}getTile(Sn,Cn,Hn){const Jn=this.trees[this._limitZoom(Sn)],ir=Math.pow(2,Sn),{extent:gr,radius:_r}=this.options,fr=_r/gr,xr=(Hn-fr)/ir,Yr=(Hn+1+fr)/ir,po={features:[]};return this._addTileFeatures(Jn.range((Cn-fr)/ir,xr,(Cn+1+fr)/ir,Yr),Jn.points,Cn,Hn,ir,po),Cn===0&&this._addTileFeatures(Jn.range(1-fr/ir,xr,1,Yr),Jn.points,ir,Hn,ir,po),Cn===ir-1&&this._addTileFeatures(Jn.range(0,xr,fr/ir,Yr),Jn.points,-1,Hn,ir,po),po.features.length?po:null}getClusterExpansionZoom(Sn){let Cn=this._getOriginZoom(Sn)-1;for(;Cn<=this.options.maxZoom;){const Hn=this.getChildren(Sn);if(Cn++,Hn.length!==1)break;Sn=Hn[0].properties.cluster_id}return Cn}_appendLeaves(Sn,Cn,Hn,Jn,ir){const gr=this.getChildren(Cn);for(const _r of gr){const fr=_r.properties;if(fr&&fr.cluster?ir+fr.point_count<=Jn?ir+=fr.point_count:ir=this._appendLeaves(Sn,fr.cluster_id,Hn,Jn,ir):ir<Jn?ir++:Sn.push(_r),Sn.length===Hn)break}return ir}_addTileFeatures(Sn,Cn,Hn,Jn,ir,gr){for(const _r of Sn){const fr=Cn[_r],xr=fr.numPoints;let Yr,po,io;if(xr)Yr=An(fr),po=fr.x,io=fr.y;else{const Lo=this.points[fr.index];Yr=Lo.properties,po=Mn(Lo.geometry.coordinates[0]),io=Yn(Lo.geometry.coordinates[1])}const ko={type:1,geometry:[[Math.round(this.options.extent*(po*ir-Hn)),Math.round(this.options.extent*(io*ir-Jn))]],tags:Yr};let Do;xr?Do=fr.id:this.options.generateId?Do=fr.index:this.points[fr.index].id&&(Do=this.points[fr.index].id),Do!==void 0&&(ko.id=Do),gr.features.push(ko)}}_limitZoom(Sn){return Math.max(this.options.minZoom,Math.min(Math.floor(+Sn),this.options.maxZoom+1))}_cluster(Sn,Cn){const Hn=[],{radius:Jn,extent:ir,reduce:gr,minPoints:_r}=this.options,fr=Jn/(ir*Math.pow(2,Cn));for(let xr=0;xr<Sn.length;xr++){const Yr=Sn[xr];if(Yr.zoom<=Cn)continue;Yr.zoom=Cn;const po=this.trees[Cn+1],io=po.within(Yr.x,Yr.y,fr),ko=Yr.numPoints||1;let Do=ko;for(const Lo of io){const zo=po.points[Lo];zo.zoom>Cn&&(Do+=zo.numPoints||1)}if(Do>ko&&Do>=_r){let Lo=Yr.x*ko,zo=Yr.y*ko,ts=gr&&ko>1?this._map(Yr,!0):null;const ms=(xr<<5)+(Cn+1)+this.points.length;for(const Eo of io){const Rs=po.points[Eo];if(Rs.zoom<=Cn)continue;Rs.zoom=Cn;const As=Rs.numPoints||1;Lo+=Rs.x*As,zo+=Rs.y*As,Rs.parentId=ms,gr&&(ts||(ts=this._map(Yr,!0)),gr(ts,this._map(Rs)))}Yr.parentId=ms,Hn.push(Qt(Lo/Do,zo/Do,ms,Do,ts))}else if(Hn.push(Yr),Do>1)for(const Lo of io){const zo=po.points[Lo];zo.zoom<=Cn||(zo.zoom=Cn,Hn.push(zo))}}return Hn}_getOriginId(Sn){return Sn-this.points.length>>5}_getOriginZoom(Sn){return(Sn-this.points.length)%32}_map(Sn,Cn){if(Sn.numPoints)return Cn?ro({},Sn.properties):Sn.properties;const Hn=this.points[Sn.index].properties,Jn=this.options.map(Hn);return Cn&&Jn===Hn?ro({},Jn):Jn}}function Qt(Vn,Sn,Cn,Hn,Jn){return{x:en(Vn),y:en(Sn),zoom:1/0,id:Cn,parentId:-1,numPoints:Hn,properties:Jn}}function gn(Vn,Sn){const[Cn,Hn]=Vn.geometry.coordinates;return{x:en(Mn(Cn)),y:en(Yn(Hn)),zoom:1/0,index:Sn,parentId:-1}}function hn(Vn){return{type:"Feature",id:Vn.id,properties:An(Vn),geometry:{type:"Point",coordinates:[(Sn=Vn.x,360*(Sn-.5)),Nr(Vn.y)]}};var Sn}function An(Vn){const Sn=Vn.numPoints,Cn=Sn>=1e4?`${Math.round(Sn/1e3)}k`:Sn>=1e3?Math.round(Sn/100)/10+"k":Sn;return ro(ro({},Vn.properties),{cluster:!0,cluster_id:Vn.id,point_count:Sn,point_count_abbreviated:Cn})}function Mn(Vn){return Vn/360+.5}function Yn(Vn){const Sn=Math.sin(Vn*Math.PI/180),Cn=.5-.25*Math.log((1+Sn)/(1-Sn))/Math.PI;return Cn<0?0:Cn>1?1:Cn}function Nr(Vn){const Sn=(180-360*Vn)*Math.PI/180;return 360*Math.atan(Math.exp(Sn))/Math.PI-90}function ro(Vn,Sn){for(const Cn in Sn)Vn[Cn]=Sn[Cn];return Vn}function to(Vn){return Vn.x}function zr(Vn){return Vn.y}function In(Vn,Sn,Cn,Hn){for(var Jn,ir=Hn,gr=Cn-Sn>>1,_r=Cn-Sn,fr=Vn[Sn],xr=Vn[Sn+1],Yr=Vn[Cn],po=Vn[Cn+1],io=Sn+3;io<Cn;io+=3){var ko=kn(Vn[io],Vn[io+1],fr,xr,Yr,po);if(ko>ir)Jn=io,ir=ko;else if(ko===ir){var Do=Math.abs(io-gr);Do<_r&&(Jn=io,_r=Do)}}ir>Hn&&(Jn-Sn>3&&In(Vn,Sn,Jn,Hn),Vn[Jn+2]=ir,Cn-Jn>3&&In(Vn,Jn,Cn,Hn))}function kn(Vn,Sn,Cn,Hn,Jn,ir){var gr=Jn-Cn,_r=ir-Hn;if(gr!==0||_r!==0){var fr=((Vn-Cn)*gr+(Sn-Hn)*_r)/(gr*gr+_r*_r);fr>1?(Cn=Jn,Hn=ir):fr>0&&(Cn+=gr*fr,Hn+=_r*fr)}return(gr=Vn-Cn)*gr+(_r=Sn-Hn)*_r}function Kn(Vn,Sn,Cn,Hn){var Jn={id:Vn===void 0?null:Vn,type:Sn,geometry:Cn,tags:Hn,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ir){var gr=ir.geometry,_r=ir.type;if(_r==="Point"||_r==="MultiPoint"||_r==="LineString")vr(ir,gr);else if(_r==="Polygon"||_r==="MultiLineString")for(var fr=0;fr<gr.length;fr++)vr(ir,gr[fr]);else if(_r==="MultiPolygon")for(fr=0;fr<gr.length;fr++)for(var xr=0;xr<gr[fr].length;xr++)vr(ir,gr[fr][xr])}(Jn),Jn}function vr(Vn,Sn){for(var Cn=0;Cn<Sn.length;Cn+=3)Vn.minX=Math.min(Vn.minX,Sn[Cn]),Vn.minY=Math.min(Vn.minY,Sn[Cn+1]),Vn.maxX=Math.max(Vn.maxX,Sn[Cn]),Vn.maxY=Math.max(Vn.maxY,Sn[Cn+1])}function yr(Vn,Sn,Cn,Hn){if(Sn.geometry){var Jn=Sn.geometry.coordinates,ir=Sn.geometry.type,gr=Math.pow(Cn.tolerance/((1<<Cn.maxZoom)*Cn.extent),2),_r=[],fr=Sn.id;if(Cn.promoteId?fr=Sn.properties[Cn.promoteId]:Cn.generateId&&(fr=Hn||0),ir==="Point")Wr(Jn,_r);else if(ir==="MultiPoint")for(var xr=0;xr<Jn.length;xr++)Wr(Jn[xr],_r);else if(ir==="LineString")Hr(Jn,_r,gr,!1);else if(ir==="MultiLineString"){if(Cn.lineMetrics){for(xr=0;xr<Jn.length;xr++)Hr(Jn[xr],_r=[],gr,!1),Vn.push(Kn(fr,"LineString",_r,Sn.properties));return}Lr(Jn,_r,gr,!1)}else if(ir==="Polygon")Lr(Jn,_r,gr,!0);else{if(ir!=="MultiPolygon"){if(ir==="GeometryCollection"){for(xr=0;xr<Sn.geometry.geometries.length;xr++)yr(Vn,{id:fr,geometry:Sn.geometry.geometries[xr],properties:Sn.properties},Cn,Hn);return}throw new Error("Input data is not a valid GeoJSON object.")}for(xr=0;xr<Jn.length;xr++){var Yr=[];Lr(Jn[xr],Yr,gr,!0),_r.push(Yr)}}Vn.push(Kn(fr,ir,_r,Sn.properties))}}function Wr(Vn,Sn){Sn.push(Ir(Vn[0])),Sn.push(jr(Vn[1])),Sn.push(0)}function Hr(Vn,Sn,Cn,Hn){for(var Jn,ir,gr=0,_r=0;_r<Vn.length;_r++){var fr=Ir(Vn[_r][0]),xr=jr(Vn[_r][1]);Sn.push(fr),Sn.push(xr),Sn.push(0),_r>0&&(gr+=Hn?(Jn*xr-fr*ir)/2:Math.sqrt(Math.pow(fr-Jn,2)+Math.pow(xr-ir,2))),Jn=fr,ir=xr}var Yr=Sn.length-3;Sn[2]=1,In(Sn,0,Yr,Cn),Sn[Yr+2]=1,Sn.size=Math.abs(gr),Sn.start=0,Sn.end=Sn.size}function Lr(Vn,Sn,Cn,Hn){for(var Jn=0;Jn<Vn.length;Jn++){var ir=[];Hr(Vn[Jn],ir,Cn,Hn),Sn.push(ir)}}function Ir(Vn){return Vn/360+.5}function jr(Vn){var Sn=Math.sin(Vn*Math.PI/180),Cn=.5-.25*Math.log((1+Sn)/(1-Sn))/Math.PI;return Cn<0?0:Cn>1?1:Cn}function Co(Vn,Sn,Cn,Hn,Jn,ir,gr,_r){if(Hn/=Sn,ir>=(Cn/=Sn)&&gr<Hn)return Vn;if(gr<Cn||ir>=Hn)return null;for(var fr=[],xr=0;xr<Vn.length;xr++){var Yr=Vn[xr],po=Yr.geometry,io=Yr.type,ko=Jn===0?Yr.minX:Yr.minY,Do=Jn===0?Yr.maxX:Yr.maxY;if(ko>=Cn&&Do<Hn)fr.push(Yr);else if(!(Do<Cn||ko>=Hn)){var Lo=[];if(io==="Point"||io==="MultiPoint")Jo(po,Lo,Cn,Hn,Jn);else if(io==="LineString")ps(po,Lo,Cn,Hn,Jn,!1,_r.lineMetrics);else if(io==="MultiLineString")Ss(po,Lo,Cn,Hn,Jn,!1);else if(io==="Polygon")Ss(po,Lo,Cn,Hn,Jn,!0);else if(io==="MultiPolygon")for(var zo=0;zo<po.length;zo++){var ts=[];Ss(po[zo],ts,Cn,Hn,Jn,!0),ts.length&&Lo.push(ts)}if(Lo.length){if(_r.lineMetrics&&io==="LineString"){for(zo=0;zo<Lo.length;zo++)fr.push(Kn(Yr.id,io,Lo[zo],Yr.tags));continue}io!=="LineString"&&io!=="MultiLineString"||(Lo.length===1?(io="LineString",Lo=Lo[0]):io="MultiLineString"),io!=="Point"&&io!=="MultiPoint"||(io=Lo.length===3?"Point":"MultiPoint"),fr.push(Kn(Yr.id,io,Lo,Yr.tags))}}}return fr.length?fr:null}function Jo(Vn,Sn,Cn,Hn,Jn){for(var ir=0;ir<Vn.length;ir+=3){var gr=Vn[ir+Jn];gr>=Cn&&gr<=Hn&&(Sn.push(Vn[ir]),Sn.push(Vn[ir+1]),Sn.push(Vn[ir+2]))}}function ps(Vn,Sn,Cn,Hn,Jn,ir,gr){for(var _r,fr,xr=ds(Vn),Yr=Jn===0?qo:na,po=Vn.start,io=0;io<Vn.length-3;io+=3){var ko=Vn[io],Do=Vn[io+1],Lo=Vn[io+2],zo=Vn[io+3],ts=Vn[io+4],ms=Jn===0?ko:Do,Eo=Jn===0?zo:ts,Rs=!1;gr&&(_r=Math.sqrt(Math.pow(ko-zo,2)+Math.pow(Do-ts,2))),ms<Cn?Eo>Cn&&(fr=Yr(xr,ko,Do,zo,ts,Cn),gr&&(xr.start=po+_r*fr)):ms>Hn?Eo<Hn&&(fr=Yr(xr,ko,Do,zo,ts,Hn),gr&&(xr.start=po+_r*fr)):Al(xr,ko,Do,Lo),Eo<Cn&&ms>=Cn&&(fr=Yr(xr,ko,Do,zo,ts,Cn),Rs=!0),Eo>Hn&&ms<=Hn&&(fr=Yr(xr,ko,Do,zo,ts,Hn),Rs=!0),!ir&&Rs&&(gr&&(xr.end=po+_r*fr),Sn.push(xr),xr=ds(Vn)),gr&&(po+=_r)}var As=Vn.length-3;ko=Vn[As],Do=Vn[As+1],Lo=Vn[As+2],(ms=Jn===0?ko:Do)>=Cn&&ms<=Hn&&Al(xr,ko,Do,Lo),As=xr.length-3,ir&&As>=3&&(xr[As]!==xr[0]||xr[As+1]!==xr[1])&&Al(xr,xr[0],xr[1],xr[2]),xr.length&&Sn.push(xr)}function ds(Vn){var Sn=[];return Sn.size=Vn.size,Sn.start=Vn.start,Sn.end=Vn.end,Sn}function Ss(Vn,Sn,Cn,Hn,Jn,ir){for(var gr=0;gr<Vn.length;gr++)ps(Vn[gr],Sn,Cn,Hn,Jn,ir,!1)}function Al(Vn,Sn,Cn,Hn){Vn.push(Sn),Vn.push(Cn),Vn.push(Hn)}function qo(Vn,Sn,Cn,Hn,Jn,ir){var gr=(ir-Sn)/(Hn-Sn);return Vn.push(ir),Vn.push(Cn+(Jn-Cn)*gr),Vn.push(1),gr}function na(Vn,Sn,Cn,Hn,Jn,ir){var gr=(ir-Cn)/(Jn-Cn);return Vn.push(Sn+(Hn-Sn)*gr),Vn.push(ir),Vn.push(1),gr}function Gr(Vn,Sn){for(var Cn=[],Hn=0;Hn<Vn.length;Hn++){var Jn,ir=Vn[Hn],gr=ir.type;if(gr==="Point"||gr==="MultiPoint"||gr==="LineString")Jn=bn(ir.geometry,Sn);else if(gr==="MultiLineString"||gr==="Polygon"){Jn=[];for(var _r=0;_r<ir.geometry.length;_r++)Jn.push(bn(ir.geometry[_r],Sn))}else if(gr==="MultiPolygon")for(Jn=[],_r=0;_r<ir.geometry.length;_r++){for(var fr=[],xr=0;xr<ir.geometry[_r].length;xr++)fr.push(bn(ir.geometry[_r][xr],Sn));Jn.push(fr)}Cn.push(Kn(ir.id,gr,Jn,ir.tags))}return Cn}function bn(Vn,Sn){var Cn=[];Cn.size=Vn.size,Vn.start!==void 0&&(Cn.start=Vn.start,Cn.end=Vn.end);for(var Hn=0;Hn<Vn.length;Hn+=3)Cn.push(Vn[Hn]+Sn,Vn[Hn+1],Vn[Hn+2]);return Cn}function En(Vn,Sn){if(Vn.transformed)return Vn;var Cn,Hn,Jn,ir=1<<Vn.z,gr=Vn.x,_r=Vn.y;for(Cn=0;Cn<Vn.features.length;Cn++){var fr=Vn.features[Cn],xr=fr.geometry,Yr=fr.type;if(fr.geometry=[],Yr===1)for(Hn=0;Hn<xr.length;Hn+=2)fr.geometry.push(Bn(xr[Hn],xr[Hn+1],Sn,ir,gr,_r));else for(Hn=0;Hn<xr.length;Hn++){var po=[];for(Jn=0;Jn<xr[Hn].length;Jn+=2)po.push(Bn(xr[Hn][Jn],xr[Hn][Jn+1],Sn,ir,gr,_r));fr.geometry.push(po)}}return Vn.transformed=!0,Vn}function Bn(Vn,Sn,Cn,Hn,Jn,ir){return[Math.round(Cn*(Vn*Hn-Jn)),Math.round(Cn*(Sn*Hn-ir))]}function ur(Vn,Sn,Cn,Hn,Jn){for(var ir=Sn===Jn.maxZoom?0:Jn.tolerance/((1<<Sn)*Jn.extent),gr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Cn,y:Hn,z:Sn,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_r=0;_r<Vn.length;_r++){gr.numFeatures++,pr(gr,Vn[_r],ir,Jn);var fr=Vn[_r].minX,xr=Vn[_r].minY,Yr=Vn[_r].maxX,po=Vn[_r].maxY;fr<gr.minX&&(gr.minX=fr),xr<gr.minY&&(gr.minY=xr),Yr>gr.maxX&&(gr.maxX=Yr),po>gr.maxY&&(gr.maxY=po)}return gr}function pr(Vn,Sn,Cn,Hn){var Jn=Sn.geometry,ir=Sn.type,gr=[];if(ir==="Point"||ir==="MultiPoint")for(var _r=0;_r<Jn.length;_r+=3)gr.push(Jn[_r]),gr.push(Jn[_r+1]),Vn.numPoints++,Vn.numSimplified++;else if(ir==="LineString")Zr(gr,Jn,Vn,Cn,!1,!1);else if(ir==="MultiLineString"||ir==="Polygon")for(_r=0;_r<Jn.length;_r++)Zr(gr,Jn[_r],Vn,Cn,ir==="Polygon",_r===0);else if(ir==="MultiPolygon")for(var fr=0;fr<Jn.length;fr++){var xr=Jn[fr];for(_r=0;_r<xr.length;_r++)Zr(gr,xr[_r],Vn,Cn,!0,_r===0)}if(gr.length){var Yr=Sn.tags||null;if(ir==="LineString"&&Hn.lineMetrics){for(var po in Yr={},Sn.tags)Yr[po]=Sn.tags[po];Yr.mapbox_clip_start=Jn.start/Jn.size,Yr.mapbox_clip_end=Jn.end/Jn.size}var io={geometry:gr,type:ir==="Polygon"||ir==="MultiPolygon"?3:ir==="LineString"||ir==="MultiLineString"?2:1,tags:Yr};Sn.id!==null&&(io.id=Sn.id),Vn.features.push(io)}}function Zr(Vn,Sn,Cn,Hn,Jn,ir){var gr=Hn*Hn;if(Hn>0&&Sn.size<(Jn?gr:Hn))Cn.numPoints+=Sn.length/3;else{for(var _r=[],fr=0;fr<Sn.length;fr+=3)(Hn===0||Sn[fr+2]>gr)&&(Cn.numSimplified++,_r.push(Sn[fr]),_r.push(Sn[fr+1])),Cn.numPoints++;Jn&&function(xr,Yr){for(var po=0,io=0,ko=xr.length,Do=ko-2;io<ko;Do=io,io+=2)po+=(xr[io]-xr[Do])*(xr[io+1]+xr[Do+1]);if(po>0===Yr)for(io=0,ko=xr.length;io<ko/2;io+=2){var Lo=xr[io],zo=xr[io+1];xr[io]=xr[ko-2-io],xr[io+1]=xr[ko-1-io],xr[ko-2-io]=Lo,xr[ko-1-io]=zo}}(_r,ir),Vn.push(_r)}}function Xr(Vn,Sn){var Cn=(Sn=this.options=function(Jn,ir){for(var gr in ir)Jn[gr]=ir[gr];return Jn}(Object.create(this.options),Sn)).debug;if(Cn&&console.time("preprocess data"),Sn.maxZoom<0||Sn.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Sn.promoteId&&Sn.generateId)throw new Error("promoteId and generateId cannot be used together.");var Hn=function(Jn,ir){var gr=[];if(Jn.type==="FeatureCollection")for(var _r=0;_r<Jn.features.length;_r++)yr(gr,Jn.features[_r],ir,_r);else yr(gr,Jn.type==="Feature"?Jn:{geometry:Jn},ir);return gr}(Vn,Sn);this.tiles={},this.tileCoords=[],Cn&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Sn.indexMaxZoom,Sn.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Hn=function(Jn,ir){var gr=ir.buffer/ir.extent,_r=Jn,fr=Co(Jn,1,-1-gr,gr,0,-1,2,ir),xr=Co(Jn,1,1-gr,2+gr,0,-1,2,ir);return(fr||xr)&&(_r=Co(Jn,1,-gr,1+gr,0,-1,2,ir)||[],fr&&(_r=Gr(fr,1).concat(_r)),xr&&(_r=_r.concat(Gr(xr,-1)))),_r}(Hn,Sn),Hn.length&&this.splitTile(Hn,0,0,0),Cn&&(Hn.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qr(Vn,Sn,Cn){return 32*((1<<Vn)*Cn+Sn)+Vn}function Mr(Vn,Sn){const Cn=Vn.tileID.canonical;if(!this._geoJSONIndex)return Sn(null,null);const Hn=this._geoJSONIndex.getTile(Cn.z,Cn.x,Cn.y);if(!Hn)return Sn(null,null);const Jn=new Ot(Hn.features);let ir=Lt.exports(Jn);ir.byteOffset===0&&ir.byteLength===ir.buffer.byteLength||(ir=new Uint8Array(ir)),Sn(null,{vectorTile:Jn,rawData:ir.buffer})}Xr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Xr.prototype.splitTile=function(Vn,Sn,Cn,Hn,Jn,ir,gr){for(var _r=[Vn,Sn,Cn,Hn],fr=this.options,xr=fr.debug;_r.length;){Hn=_r.pop(),Cn=_r.pop(),Sn=_r.pop(),Vn=_r.pop();var Yr=1<<Sn,po=qr(Sn,Cn,Hn),io=this.tiles[po];if(!io&&(xr>1&&console.time("creation"),io=this.tiles[po]=ur(Vn,Sn,Cn,Hn,fr),this.tileCoords.push({z:Sn,x:Cn,y:Hn}),xr)){xr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Sn,Cn,Hn,io.numFeatures,io.numPoints,io.numSimplified),console.timeEnd("creation"));var ko="z"+Sn;this.stats[ko]=(this.stats[ko]||0)+1,this.total++}if(io.source=Vn,Jn){if(Sn===fr.maxZoom||Sn===Jn)continue;var Do=1<<Jn-Sn;if(Cn!==Math.floor(ir/Do)||Hn!==Math.floor(gr/Do))continue}else if(Sn===fr.indexMaxZoom||io.numPoints<=fr.indexMaxPoints)continue;if(io.source=null,Vn.length!==0){xr>1&&console.time("clipping");var Lo,zo,ts,ms,Eo,Rs,As=.5*fr.buffer/fr.extent,Su=.5-As,cu=.5+As,$r=1+As;Lo=zo=ts=ms=null,Eo=Co(Vn,Yr,Cn-As,Cn+cu,0,io.minX,io.maxX,fr),Rs=Co(Vn,Yr,Cn+Su,Cn+$r,0,io.minX,io.maxX,fr),Vn=null,Eo&&(Lo=Co(Eo,Yr,Hn-As,Hn+cu,1,io.minY,io.maxY,fr),zo=Co(Eo,Yr,Hn+Su,Hn+$r,1,io.minY,io.maxY,fr),Eo=null),Rs&&(ts=Co(Rs,Yr,Hn-As,Hn+cu,1,io.minY,io.maxY,fr),ms=Co(Rs,Yr,Hn+Su,Hn+$r,1,io.minY,io.maxY,fr),Rs=null),xr>1&&console.timeEnd("clipping"),_r.push(Lo||[],Sn+1,2*Cn,2*Hn),_r.push(zo||[],Sn+1,2*Cn,2*Hn+1),_r.push(ts||[],Sn+1,2*Cn+1,2*Hn),_r.push(ms||[],Sn+1,2*Cn+1,2*Hn+1)}}},Xr.prototype.getTile=function(Vn,Sn,Cn){var Hn=this.options,Jn=Hn.extent,ir=Hn.debug;if(Vn<0||Vn>24)return null;var gr=1<<Vn,_r=qr(Vn,Sn=(Sn%gr+gr)%gr,Cn);if(this.tiles[_r])return En(this.tiles[_r],Jn);ir>1&&console.log("drilling down to z%d-%d-%d",Vn,Sn,Cn);for(var fr,xr=Vn,Yr=Sn,po=Cn;!fr&&xr>0;)xr--,Yr=Math.floor(Yr/2),po=Math.floor(po/2),fr=this.tiles[qr(xr,Yr,po)];return fr&&fr.source?(ir>1&&console.log("found parent tile z%d-%d-%d",xr,Yr,po),ir>1&&console.time("drilling down"),this.splitTile(fr.source,xr,Yr,po,Vn,Sn,Cn),ir>1&&console.timeEnd("drilling down"),this.tiles[_r]?En(this.tiles[_r],Jn):null):null};class Tr extends j.VectorTileWorkerSource{constructor(Sn,Cn,Hn,Jn,ir){super(Sn,Cn,Hn,Jn,Mr),ir&&(this.loadGeoJSON=ir)}loadData(Sn,Cn){const Hn=Sn&&Sn.request,Jn=Hn&&Hn.collectResourceTiming;this.loadGeoJSON(Sn,(ir,gr)=>{if(ir||!gr)return Cn(ir);if(typeof gr!="object")return Cn(new Error(`Input data given to '${Sn.source}' is not a valid GeoJSON object.`));{ft(gr,!0);try{if(Sn.filter){const fr=j.createExpression(Sn.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(fr.result==="error")throw new Error(fr.value.map(Yr=>`${Yr.key}: ${Yr.message}`).join(", "));gr={type:"FeatureCollection",features:gr.features.filter(Yr=>fr.value.evaluate({zoom:0},Yr))}}this._geoJSONIndex=Sn.cluster?new jt(function({superclusterOptions:fr,clusterProperties:xr}){if(!xr||!fr)return fr;const Yr={},po={},io={accumulated:null,zoom:0},ko={properties:null},Do=Object.keys(xr);for(const Lo of Do){const[zo,ts]=xr[Lo],ms=j.createExpression(ts),Eo=j.createExpression(typeof zo=="string"?[zo,["accumulated"],["get",Lo]]:zo);Yr[Lo]=ms.value,po[Lo]=Eo.value}return fr.map=Lo=>{ko.properties=Lo;const zo={};for(const ts of Do)zo[ts]=Yr[ts].evaluate(io,ko);return zo},fr.reduce=(Lo,zo)=>{ko.properties=zo;for(const ts of Do)io.accumulated=Lo[ts],Lo[ts]=po[ts].evaluate(io,ko)},fr}(Sn)).load(gr.features):function(fr,xr){return new Xr(fr,xr)}(gr,Sn.geojsonVtOptions)}catch(fr){return Cn(fr)}this.loaded={};const _r={};if(Jn){const fr=j.getPerformanceMeasurement(Hn);fr&&(_r.resourceTiming={},_r.resourceTiming[Sn.source]=JSON.parse(JSON.stringify(fr)))}Cn(null,_r)}})}reloadTile(Sn,Cn){const Hn=this.loaded;return Hn&&Hn[Sn.uid]?super.reloadTile(Sn,Cn):this.loadTile(Sn,Cn)}loadGeoJSON(Sn,Cn){if(Sn.request)j.getJSON(Sn.request,Cn);else{if(typeof Sn.data!="string")return Cn(new Error(`Input data given to '${Sn.source}' is not a valid GeoJSON object.`));try{return Cn(null,JSON.parse(Sn.data))}catch{return Cn(new Error(`Input data given to '${Sn.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Sn,Cn){try{Cn(null,this._geoJSONIndex.getClusterExpansionZoom(Sn.clusterId))}catch(Hn){Cn(Hn)}}getClusterChildren(Sn,Cn){try{Cn(null,this._geoJSONIndex.getChildren(Sn.clusterId))}catch(Hn){Cn(Hn)}}getClusterLeaves(Sn,Cn){try{Cn(null,this._geoJSONIndex.getLeaves(Sn.clusterId,Sn.limit,Sn.offset))}catch(Hn){Cn(Hn)}}}class Wo{constructor(Sn){this.self=Sn,this.actor=new j.Actor(Sn,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=j.getProjection({name:"mercator"}),this.workerSourceTypes={vector:j.VectorTileWorkerSource,geojson:Tr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Cn,Hn)=>{if(this.workerSourceTypes[Cn])throw new Error(`Worker source with name "${Cn}" already registered.`);this.workerSourceTypes[Cn]=Hn},this.self.registerRTLTextPlugin=Cn=>{if(j.plugin.isParsed())throw new Error("RTL text plugin already registered.");j.plugin.applyArabicShaping=Cn.applyArabicShaping,j.plugin.processBidirectionalText=Cn.processBidirectionalText,j.plugin.processStyledBidirectionalText=Cn.processStyledBidirectionalText}}clearCaches(Sn,Cn,Hn){delete this.layerIndexes[Sn],delete this.availableImages[Sn],delete this.workerSources[Sn],delete this.demWorkerSources[Sn],Hn()}checkIfReady(Sn,Cn,Hn){Hn()}setReferrer(Sn,Cn){this.referrer=Cn}spriteLoaded(Sn,Cn){this.isSpriteLoaded[Sn]=Cn;for(const Hn in this.workerSources[Sn]){const Jn=this.workerSources[Sn][Hn];for(const ir in Jn)Jn[ir]instanceof j.VectorTileWorkerSource&&(Jn[ir].isSpriteLoaded=Cn,Jn[ir].fire(new j.Event("isSpriteLoaded")))}}setImages(Sn,Cn,Hn){this.availableImages[Sn]=Cn;for(const Jn in this.workerSources[Sn]){const ir=this.workerSources[Sn][Jn];for(const gr in ir)ir[gr].availableImages=Cn}Hn()}enableTerrain(Sn,Cn,Hn){this.terrain=Cn,Hn()}setProjection(Sn,Cn){this.projections[Sn]=j.getProjection(Cn)}setLayers(Sn,Cn,Hn){this.getLayerIndex(Sn).replace(Cn),Hn()}updateLayers(Sn,Cn,Hn){this.getLayerIndex(Sn).update(Cn.layers,Cn.removedIds),Hn()}loadTile(Sn,Cn,Hn){const Jn=this.enableTerrain?j.extend({enableTerrain:this.terrain},Cn):Cn;Jn.projection=this.projections[Sn]||this.defaultProjection,this.getWorkerSource(Sn,Cn.type,Cn.source).loadTile(Jn,Hn)}loadDEMTile(Sn,Cn,Hn){const Jn=this.enableTerrain?j.extend({buildQuadTree:this.terrain},Cn):Cn;this.getDEMWorkerSource(Sn,Cn.source).loadTile(Jn,Hn)}reloadTile(Sn,Cn,Hn){const Jn=this.enableTerrain?j.extend({enableTerrain:this.terrain},Cn):Cn;Jn.projection=this.projections[Sn]||this.defaultProjection,this.getWorkerSource(Sn,Cn.type,Cn.source).reloadTile(Jn,Hn)}abortTile(Sn,Cn,Hn){this.getWorkerSource(Sn,Cn.type,Cn.source).abortTile(Cn,Hn)}removeTile(Sn,Cn,Hn){this.getWorkerSource(Sn,Cn.type,Cn.source).removeTile(Cn,Hn)}removeSource(Sn,Cn,Hn){if(!this.workerSources[Sn]||!this.workerSources[Sn][Cn.type]||!this.workerSources[Sn][Cn.type][Cn.source])return;const Jn=this.workerSources[Sn][Cn.type][Cn.source];delete this.workerSources[Sn][Cn.type][Cn.source],Jn.removeSource!==void 0?Jn.removeSource(Cn,Hn):Hn()}loadWorkerSource(Sn,Cn,Hn){try{this.self.importScripts(Cn.url),Hn()}catch(Jn){Hn(Jn.toString())}}syncRTLPluginState(Sn,Cn,Hn){try{j.plugin.setState(Cn);const Jn=j.plugin.getPluginURL();if(j.plugin.isLoaded()&&!j.plugin.isParsed()&&Jn!=null){this.self.importScripts(Jn);const ir=j.plugin.isParsed();Hn(ir?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Jn}`),ir)}}catch(Jn){Hn(Jn.toString())}}getAvailableImages(Sn){let Cn=this.availableImages[Sn];return Cn||(Cn=[]),Cn}getLayerIndex(Sn){let Cn=this.layerIndexes[Sn];return Cn||(Cn=this.layerIndexes[Sn]=new ht),Cn}getWorkerSource(Sn,Cn,Hn){if(this.workerSources[Sn]||(this.workerSources[Sn]={}),this.workerSources[Sn][Cn]||(this.workerSources[Sn][Cn]={}),!this.workerSources[Sn][Cn][Hn]){const Jn={send:(ir,gr,_r,fr,xr,Yr)=>{this.actor.send(ir,gr,_r,Sn,xr,Yr)},scheduler:this.actor.scheduler};this.workerSources[Sn][Cn][Hn]=new this.workerSourceTypes[Cn](Jn,this.getLayerIndex(Sn),this.getAvailableImages(Sn),this.isSpriteLoaded[Sn])}return this.workerSources[Sn][Cn][Hn]}getDEMWorkerSource(Sn,Cn){return this.demWorkerSources[Sn]||(this.demWorkerSources[Sn]={}),this.demWorkerSources[Sn][Cn]||(this.demWorkerSources[Sn][Cn]=new vt),this.demWorkerSources[Sn][Cn]}enforceCacheSizeLimit(Sn,Cn){j.enforceCacheSizeLimit(Cn)}getWorkerPerformanceMetrics(Sn,Cn,Hn){Hn(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Wo(self)),Wo}),et(["./shared"],function(j){function it(dt,ot){if(Array.isArray(dt)){if(!Array.isArray(ot)||dt.length!==ot.length)return!1;for(let lt=0;lt<dt.length;lt++)if(!it(dt[lt],ot[lt]))return!1;return!0}if(typeof dt=="object"&&dt!==null&&ot!==null){if(typeof ot!="object"||Object.keys(dt).length!==Object.keys(ot).length)return!1;for(const lt in dt)if(!it(dt[lt],ot[lt]))return!1;return!0}return dt===ot}var st=ht;function ht(dt){return!function(ot){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var bt,kt,Ft=new Blob([""],{type:"text/javascript"}),Yt=URL.createObjectURL(Ft);try{kt=new Worker(Yt),bt=!0}catch{bt=!1}return kt&&kt.terminate(),URL.revokeObjectURL(Yt),bt}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var bt=document.createElement("canvas");bt.width=bt.height=1;var kt=bt.getContext("2d");if(!kt)return!1;var Ft=kt.getImageData(0,0,1,1);return Ft&&Ft.width===bt.width}()?(vt[lt=ot&&ot.failIfMajorPerformanceCaveat]===void 0&&(vt[lt]=function(bt){var kt,Ft=function(Yt){var rn=document.createElement("canvas"),ln=Object.create(ht.webGLContextAttributes);return ln.failIfMajorPerformanceCaveat=Yt,rn.getContext("webgl",ln)||rn.getContext("experimental-webgl",ln)}(bt);if(!Ft)return!1;try{kt=Ft.createShader(Ft.VERTEX_SHADER)}catch{return!1}return!(!kt||Ft.isContextLost())&&(Ft.shaderSource(kt,"void main() {}"),Ft.compileShader(kt),Ft.getShaderParameter(kt,Ft.COMPILE_STATUS)===!0)}(lt)),vt[lt]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var lt}(dt)}var vt={};function ft(dt,ot,lt){const bt=j.window.document.createElement(dt);return ot!==void 0&&(bt.className=ot),lt&&lt.appendChild(bt),bt}function pt(dt,ot,lt){const bt=j.window.document.createElementNS("http://www.w3.org/2000/svg",dt);for(const kt of Object.keys(ot))bt.setAttributeNS(null,kt,ot[kt]);return lt&&lt.appendChild(bt),bt}ht.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const ct=j.window.document&&j.window.document.documentElement.style,yt=ct&&ct.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Et;function Ot(){ct&&yt&&(Et=ct[yt],ct[yt]="none")}function Lt(){ct&&yt&&(ct[yt]=Et)}function Tt(dt){dt.preventDefault(),dt.stopPropagation(),j.window.removeEventListener("click",Tt,!0)}function It(){j.window.addEventListener("click",Tt,!0),j.window.setTimeout(()=>{j.window.removeEventListener("click",Tt,!0)},0)}function mt(dt,ot){const lt=dt.getBoundingClientRect();return sn(dt,lt,ot)}function Bt(dt,ot){const lt=dt.getBoundingClientRect(),bt=[];for(let kt=0;kt<ot.length;kt++)bt.push(sn(dt,lt,ot[kt]));return bt}function nn(dt){return j.window.InstallTrigger!==void 0&&dt.button===2&&dt.ctrlKey&&j.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:dt.button}function sn(dt,ot,lt){const bt=dt.offsetWidth===ot.width?1:dt.offsetWidth/ot.width;return new j.pointGeometry((lt.clientX-ot.left)*bt,(lt.clientY-ot.top)*bt)}function xt(dt,ot){var lt=ot[0],bt=ot[1],kt=ot[2],Ft=ot[3],Yt=lt*Ft-kt*bt;return Yt?(dt[0]=Ft*(Yt=1/Yt),dt[1]=-bt*Yt,dt[2]=-kt*Yt,dt[3]=lt*Yt,dt):null}function St(dt){const{userImage:ot}=dt;return!!(ot&&ot.render&&ot.render())&&(dt.data.replace(new Uint8Array(ot.data.buffer)),!0)}class Nt extends j.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new j.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(ot){if(this.loaded!==ot&&(this.loaded=ot,ot)){for(const{ids:lt,callback:bt}of this.requestors)this._notify(lt,bt);this.requestors=[]}}hasImage(ot){return!!this.getImage(ot)}getImage(ot){return this.images[ot]}addImage(ot,lt){this._validate(ot,lt)&&(this.images[ot]=lt)}_validate(ot,lt){let bt=!0;return this._validateStretch(lt.stretchX,lt.data&&lt.data.width)||(this.fire(new j.ErrorEvent(new Error(`Image "${ot}" has invalid "stretchX" value`))),bt=!1),this._validateStretch(lt.stretchY,lt.data&&lt.data.height)||(this.fire(new j.ErrorEvent(new Error(`Image "${ot}" has invalid "stretchY" value`))),bt=!1),this._validateContent(lt.content,lt)||(this.fire(new j.ErrorEvent(new Error(`Image "${ot}" has invalid "content" value`))),bt=!1),bt}_validateStretch(ot,lt){if(!ot)return!0;let bt=0;for(const kt of ot){if(kt[0]<bt||kt[1]<kt[0]||lt<kt[1])return!1;bt=kt[1]}return!0}_validateContent(ot,lt){return!(ot&&(ot.length!==4||ot[0]<0||lt.data.width<ot[0]||ot[1]<0||lt.data.height<ot[1]||ot[2]<0||lt.data.width<ot[2]||ot[3]<0||lt.data.height<ot[3]||ot[2]<ot[0]||ot[3]<ot[1]))}updateImage(ot,lt){lt.version=this.images[ot].version+1,this.images[ot]=lt,this.updatedImages[ot]=!0}removeImage(ot){const lt=this.images[ot];delete this.images[ot],delete this.patterns[ot],lt.userImage&&lt.userImage.onRemove&&lt.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(ot,lt){let bt=!0;if(!this.isLoaded())for(const kt of ot)this.images[kt]||(bt=!1);this.isLoaded()||bt?this._notify(ot,lt):this.requestors.push({ids:ot,callback:lt})}_notify(ot,lt){const bt={};for(const kt of ot){this.images[kt]||this.fire(new j.Event("styleimagemissing",{id:kt}));const Ft=this.images[kt];Ft?bt[kt]={data:Ft.data.clone(),pixelRatio:Ft.pixelRatio,sdf:Ft.sdf,version:Ft.version,stretchX:Ft.stretchX,stretchY:Ft.stretchY,content:Ft.content,hasRenderCallback:Boolean(Ft.userImage&&Ft.userImage.render)}:j.warnOnce(`Image "${kt}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}lt(null,bt)}getPixelSize(){const{width:ot,height:lt}=this.atlasImage;return{width:ot,height:lt}}getPattern(ot){const lt=this.patterns[ot],bt=this.getImage(ot);if(!bt)return null;if(lt&&lt.position.version===bt.version)return lt.position;if(lt)lt.position.version=bt.version;else{const kt={w:bt.data.width+2,h:bt.data.height+2,x:0,y:0},Ft=new j.ImagePosition(kt,bt);this.patterns[ot]={bin:kt,position:Ft}}return this._updatePatternAtlas(),this.patterns[ot].position}bind(ot){const lt=ot.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new j.Texture(ot,this.atlasImage,lt.RGBA),this.atlasTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)}_updatePatternAtlas(){const ot=[];for(const Ft in this.patterns)ot.push(this.patterns[Ft].bin);const{w:lt,h:bt}=j.potpack(ot),kt=this.atlasImage;kt.resize({width:lt||1,height:bt||1});for(const Ft in this.patterns){const{bin:Yt}=this.patterns[Ft],rn=Yt.x+1,ln=Yt.y+1,pn=this.images[Ft].data,vn=pn.width,Tn=pn.height;j.RGBAImage.copy(pn,kt,{x:0,y:0},{x:rn,y:ln},{width:vn,height:Tn}),j.RGBAImage.copy(pn,kt,{x:0,y:Tn-1},{x:rn,y:ln-1},{width:vn,height:1}),j.RGBAImage.copy(pn,kt,{x:0,y:0},{x:rn,y:ln+Tn},{width:vn,height:1}),j.RGBAImage.copy(pn,kt,{x:vn-1,y:0},{x:rn-1,y:ln},{width:1,height:Tn}),j.RGBAImage.copy(pn,kt,{x:0,y:0},{x:rn+vn,y:ln},{width:1,height:Tn})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(ot){for(const lt of ot){if(this.callbackDispatchedThisFrame[lt])continue;this.callbackDispatchedThisFrame[lt]=!0;const bt=this.images[lt];St(bt)&&this.updateImage(lt,bt)}}}const Ct=new j.Properties({anchor:new j.DataConstantProperty(j.spec.light.anchor),position:new class{constructor(){this.specification=j.spec.light.position}possiblyEvaluate(dt,ot){return function([lt,bt,kt]){const Ft=j.degToRad(bt+90),Yt=j.degToRad(kt);return{x:lt*Math.cos(Ft)*Math.sin(Yt),y:lt*Math.sin(Ft)*Math.sin(Yt),z:lt*Math.cos(Yt),azimuthal:bt,polar:kt}}(dt.expression.evaluate(ot))}interpolate(dt,ot,lt){return{x:j.number(dt.x,ot.x,lt),y:j.number(dt.y,ot.y,lt),z:j.number(dt.z,ot.z,lt),azimuthal:j.number(dt.azimuthal,ot.azimuthal,lt),polar:j.number(dt.polar,ot.polar,lt)}}},color:new j.DataConstantProperty(j.spec.light.color),intensity:new j.DataConstantProperty(j.spec.light.intensity)}),Vt="-transition";class Kt extends j.Evented{constructor(ot){super(),this._transitionable=new j.Transitionable(Ct),this.setLight(ot),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(ot,lt={}){if(!this._validate(j.validateLight,ot,lt))for(const bt in ot){const kt=ot[bt];j.endsWith(bt,Vt)?this._transitionable.setTransition(bt.slice(0,-Vt.length),kt):this._transitionable.setValue(bt,kt)}}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}_validate(ot,lt,bt){return(!bt||bt.validate!==!1)&&j.emitValidationErrors(this,ot.call(j.validateStyle,j.extend({value:lt,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}const Gt=new j.Properties({source:new j.DataConstantProperty(j.spec.terrain.source),exaggeration:new j.DataConstantProperty(j.spec.terrain.exaggeration)}),Ut="-transition";class Ht extends j.Evented{constructor(ot,lt){super(),this._transitionable=new j.Transitionable(Gt),this.set(ot),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=lt}get(){return this._transitionable.serialize()}set(ot){for(const lt in ot){const bt=ot[lt];j.endsWith(lt,Ut)?this._transitionable.setTransition(lt.slice(0,-Ut.length),bt):this._transitionable.setValue(lt,bt)}}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}}function qt(dt,ot,lt,bt){const kt=j.smoothstep(45,65,lt),[Ft,Yt]=Pt(dt,bt),rn=j.length(ot);let ln=1-Math.min(1,Math.exp((rn-Ft)/(Yt-Ft)*-6));return ln*=ln*ln,ln=Math.min(1,1.00747*ln),ln*kt*dt.alpha}function Pt(dt,ot){const lt=.5/Math.tan(.5*ot);return[dt.range[0]+lt,dt.range[1]+lt]}const wt=new j.Properties({range:new j.DataConstantProperty(j.spec.fog.range),color:new j.DataConstantProperty(j.spec.fog.color),"high-color":new j.DataConstantProperty(j.spec.fog["high-color"]),"space-color":new j.DataConstantProperty(j.spec.fog["space-color"]),"horizon-blend":new j.DataConstantProperty(j.spec.fog["horizon-blend"]),"star-intensity":new j.DataConstantProperty(j.spec.fog["star-intensity"])}),$t="-transition";class Xt extends j.Evented{constructor(ot,lt){super(),this._transitionable=new j.Transitionable(wt),this.set(ot),this._transitioning=this._transitionable.untransitioned(),this._transform=lt}get state(){const ot=this._transform,lt=ot.projection.name==="globe",bt=j.globeToMercatorTransition(ot.zoom),kt=this.properties.get("range"),Ft=[.5,3];return{range:lt?[j.number(Ft[0],kt[0],bt),j.number(Ft[1],kt[1],bt)]:kt,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(ot,lt={}){if(!this._validate(j.validateFog,ot,lt)){for(const bt of Object.keys(j.spec.fog))ot&&ot[bt]===void 0&&(ot[bt]=j.spec.fog[bt].default);for(const bt in ot){const kt=ot[bt];j.endsWith(bt,$t)?this._transitionable.setTransition(bt.slice(0,-$t.length),kt):this._transitionable.setValue(bt,kt)}}}getOpacity(ot){if(!this._transform.projection.supportsFog)return 0;const lt=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:j.smoothstep(45,65,ot))*lt.a}getOpacityAtLatLng(ot,lt){return this._transform.projection.supportsFog?function(bt,kt,Ft){const Yt=j.MercatorCoordinate.fromLngLat(kt),rn=Ft.elevation?Ft.elevation.getAtPointOrZero(Yt):0,ln=[Yt.x,Yt.y,rn];return j.transformMat4(ln,ln,Ft.mercatorFogMatrix),qt(bt,ln,Ft.pitch,Ft._fov)}(this.state,ot,lt):0}getFovAdjustedRange(ot){return this._transform.projection.supportsFog?Pt(this.state,ot):[0,1]}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}_validate(ot,lt,bt){return(!bt||bt.validate!==!1)&&j.emitValidationErrors(this,ot.call(j.validateStyle,j.extend({value:lt,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}class un{constructor(ot,lt){this.workerPool=ot,this.actors=[],this.currentActor=0,this.id=j.uniqueId();const bt=this.workerPool.acquire(this.id);for(let kt=0;kt<bt.length;kt++){const Ft=new un.Actor(bt[kt],lt,this.id);Ft.name=`Worker ${kt}`,this.actors.push(Ft)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(ot,lt,bt){j.asyncAll(this.actors,(kt,Ft)=>{kt.send(ot,lt,Ft)},bt=bt||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(ot=>{ot.remove()}),this.actors=[],this.workerPool.release(this.id)}}function dn(dt,ot,lt){return ot*(j.EXTENT/(dt.tileSize*Math.pow(2,lt-dt.tileID.overscaledZ)))}un.Actor=j.Actor;class mn{constructor(ot,lt,bt,kt){this.screenBounds=ot,this.cameraPoint=lt,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=bt,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,kt)}static createFromScreenPoints(ot,lt){let bt,kt;if(ot instanceof j.pointGeometry||typeof ot[0]=="number"){const Ft=j.pointGeometry.convert(ot);bt=[Ft],kt=lt.isPointAboveHorizon(Ft)}else{const Ft=j.pointGeometry.convert(ot[0]),Yt=j.pointGeometry.convert(ot[1]);bt=[Ft,Yt],kt=j.polygonizeBounds(Ft,Yt).every(rn=>lt.isPointAboveHorizon(rn))}return new mn(bt,lt.getCameraPoint(),kt,lt)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(ot){return j.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],ot)}bufferedCameraGeometry(ot){const lt=this.screenBounds[0],bt=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],kt=j.polygonizeBounds(lt,bt,0,!1);return this.cameraPoint.y>bt.y&&(this.cameraPoint.x>lt.x&&this.cameraPoint.x<bt.x?kt.splice(3,0,this.cameraPoint):this.cameraPoint.x>=bt.x?kt[2]=this.cameraPoint:this.cameraPoint.x<=lt.x&&(kt[3]=this.cameraPoint)),j.bufferConvexPolygon(kt,ot)}bufferedCameraGeometryGlobe(ot){const lt=this.screenBounds[0],bt=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],kt=j.polygonizeBounds(lt,bt,ot),Ft=this.cameraPoint.clone();switch(3*((Ft.y>lt.y)+(Ft.y>bt.y))+((Ft.x>lt.x)+(Ft.x>bt.x))){case 0:kt[0]=Ft,kt[4]=Ft.clone();break;case 1:kt.splice(1,0,Ft);break;case 2:kt[1]=Ft;break;case 3:kt.splice(4,0,Ft);break;case 5:kt.splice(2,0,Ft);break;case 6:kt[3]=Ft;break;case 7:kt.splice(3,0,Ft);break;case 8:kt[2]=Ft}return kt}containsTile(ot,lt,bt,kt=0){const Ft=ot.queryPadding/lt._pixelsPerMercatorPixel+1,Yt=bt?this._bufferedCameraMercator(Ft,lt):this._bufferedScreenMercator(Ft,lt);let rn=ot.tileID.wrap+(Yt.unwrapped?kt:0);const ln=Yt.polygon.map(Fn=>j.getTilePoint(ot.tileTransform,Fn,rn));if(!j.polygonIntersectsBox(ln,0,0,j.EXTENT,j.EXTENT))return;rn=ot.tileID.wrap+(this.screenGeometryMercator.unwrapped?kt:0);const pn=this.screenGeometryMercator.polygon.map(Fn=>j.getTileVec3(ot.tileTransform,Fn,rn)),vn=pn.map(Fn=>new j.pointGeometry(Fn[0],Fn[1])),Tn=lt.getFreeCameraOptions().position||new j.MercatorCoordinate(0,0,0),Dn=j.getTileVec3(ot.tileTransform,Tn,rn),$n=pn.map(Fn=>{const jn=j.sub(Fn,Fn,Dn);return j.normalize(jn,jn),new j.Ray(Dn,jn)}),Wn=dn(ot,1,lt.zoom)*lt._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:vn,tilespaceRays:$n,bufferedTilespaceGeometry:ln,bufferedTilespaceBounds:(Zn=j.getBounds(ln),Zn.min.x=j.clamp(Zn.min.x,0,j.EXTENT),Zn.min.y=j.clamp(Zn.min.y,0,j.EXTENT),Zn.max.x=j.clamp(Zn.max.x,0,j.EXTENT),Zn.max.y=j.clamp(Zn.max.y,0,j.EXTENT),Zn),tile:ot,tileID:ot.tileID,pixelToTileUnitsFactor:Wn};var Zn}_bufferedScreenMercator(ot,lt){const bt=Mt(ot);if(this._screenRaycastCache[bt])return this._screenRaycastCache[bt];{let kt;return kt=lt.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(ot),lt):{polygon:this.bufferedScreenGeometry(ot).map(Ft=>lt.pointCoordinate3D(Ft)),unwrapped:!0},this._screenRaycastCache[bt]=kt,kt}}_bufferedCameraMercator(ot,lt){const bt=Mt(ot);if(this._cameraRaycastCache[bt])return this._cameraRaycastCache[bt];{let kt;return kt=lt.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(ot),lt):{polygon:this.bufferedCameraGeometry(ot).map(Ft=>lt.pointCoordinate3D(Ft)),unwrapped:!0},this._cameraRaycastCache[bt]=kt,kt}}_projectAndResample(ot,lt){const bt=function(Ft,Yt){const rn=j.multiply([],Yt.pixelMatrix,Yt.globeMatrix),ln=[0,-j.GLOBE_RADIUS,0,1],pn=[0,j.GLOBE_RADIUS,0,1],vn=[0,0,0,1];j.transformMat4$1(ln,ln,rn),j.transformMat4$1(pn,pn,rn),j.transformMat4$1(vn,vn,rn);const Tn=new j.pointGeometry(ln[0]/ln[3],ln[1]/ln[3]),Dn=new j.pointGeometry(pn[0]/pn[3],pn[1]/pn[3]),$n=j.polygonContainsPoint(Ft,Tn)&&ln[3]<vn[3],Wn=j.polygonContainsPoint(Ft,Dn)&&pn[3]<vn[3];if(!$n&&!Wn)return null;const Zn=function(dr,Ar,Fr){for(let Dr=1;Dr<dr.length;Dr++){const co=en(Ar.pointCoordinate3D(dr[Dr-1]).x),Sr=en(Ar.pointCoordinate3D(dr[Dr]).x);if(Fr<0){if(co<Sr)return{idx:Dr,t:-co/(Sr-1-co)}}else if(Sr<co)return{idx:Dr,t:(1-co)/(Sr+1-co)}}return null}(Ft,Yt,$n?-1:1);if(!Zn)return null;const{idx:Fn,t:jn}=Zn;let Qn=Fn>1?an(Ft.slice(0,Fn),Yt):[],Gn=Fn<Ft.length?an(Ft.slice(Fn),Yt):[];Qn=Qn.map(dr=>new j.pointGeometry(en(dr.x),dr.y)),Gn=Gn.map(dr=>new j.pointGeometry(en(dr.x),dr.y));const or=[...Qn];or.length===0&&or.push(Gn[Gn.length-1]);const lr=j.number(or[or.length-1].y,(Gn.length===0?Qn[0]:Gn[0]).y,jn);let er;return er=$n?[new j.pointGeometry(0,lr),new j.pointGeometry(0,0),new j.pointGeometry(1,0),new j.pointGeometry(1,lr)]:[new j.pointGeometry(1,lr),new j.pointGeometry(1,1),new j.pointGeometry(0,1),new j.pointGeometry(0,lr)],or.push(...er),Gn.length===0?or.push(Qn[0]):or.push(...Gn),{polygon:or.map(dr=>new j.MercatorCoordinate(dr.x,dr.y)),unwrapped:!1}}(ot,lt);if(bt)return bt;const kt=function(Ft,Yt){let rn=!1,ln=-1/0,pn=0;for(let Tn=0;Tn<Ft.length-1;Tn++)Ft[Tn].x>ln&&(ln=Ft[Tn].x,pn=Tn);for(let Tn=0;Tn<Ft.length-1;Tn++){const Dn=(pn+Tn)%(Ft.length-1),$n=Ft[Dn],Wn=Ft[Dn+1];Math.abs($n.x-Wn.x)>.5&&($n.x<Wn.x?($n.x+=1,Dn===0&&(Ft[Ft.length-1].x+=1)):(Wn.x+=1,Dn+1===Ft.length-1&&(Ft[0].x+=1)),rn=!0)}const vn=j.mercatorXfromLng(Yt.center.lng);return rn&&vn<Math.abs(vn-1)&&Ft.forEach(Tn=>{Tn.x-=1}),{polygon:Ft,unwrapped:rn}}(an(ot,lt).map(Ft=>new j.pointGeometry(en(Ft.x),Ft.y)),lt);return{polygon:kt.polygon.map(Ft=>new j.MercatorCoordinate(Ft.x,Ft.y)),unwrapped:kt.unwrapped}}}function an(dt,ot){return j.resample(dt,lt=>{const bt=ot.pointCoordinate3D(lt);lt.x=bt.x,lt.y=bt.y},1/256)}function en(dt){return dt<0?1+dt%1:dt%1}function Mt(dt){return 100*dt|0}function jt(dt,ot,lt,bt,kt){const Ft=function(Yt,rn){if(Yt)return kt(Yt);if(rn){dt.url&&rn.tiles&&dt.tiles&&delete dt.tiles;const ln=j.pick(j.extend(rn,dt),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);rn.vector_layers&&(ln.vectorLayers=rn.vector_layers,ln.vectorLayerIds=ln.vectorLayers.map(pn=>pn.id)),ln.tiles=ot.canonicalizeTileset(ln,dt.url),kt(null,ln)}};return dt.url?j.getJSON(ot.transformRequest(ot.normalizeSourceURL(dt.url,null,lt,bt),j.ResourceType.Source),Ft):j.exported.frame(()=>Ft(null,dt))}class Qt{constructor(ot,lt,bt){this.bounds=j.LngLatBounds.convert(this.validateBounds(ot)),this.minzoom=lt||0,this.maxzoom=bt||24}validateBounds(ot){return Array.isArray(ot)&&ot.length===4?[Math.max(-180,ot[0]),Math.max(-90,ot[1]),Math.min(180,ot[2]),Math.min(90,ot[3])]:[-180,-90,180,90]}contains(ot){const lt=Math.pow(2,ot.z),bt=Math.floor(j.mercatorXfromLng(this.bounds.getWest())*lt),kt=Math.floor(j.mercatorYfromLat(this.bounds.getNorth())*lt),Ft=Math.ceil(j.mercatorXfromLng(this.bounds.getEast())*lt),Yt=Math.ceil(j.mercatorYfromLat(this.bounds.getSouth())*lt);return ot.x>=bt&&ot.x<Ft&&ot.y>=kt&&ot.y<Yt}}class gn{constructor(ot,lt,bt){this.context=ot;const kt=ot.gl;this.buffer=kt.createBuffer(),this.dynamicDraw=Boolean(bt),this.context.unbindVAO(),ot.bindElementBuffer.set(this.buffer),kt.bufferData(kt.ELEMENT_ARRAY_BUFFER,lt.arrayBuffer,this.dynamicDraw?kt.DYNAMIC_DRAW:kt.STATIC_DRAW),this.dynamicDraw||lt.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(ot){const lt=this.context.gl;this.context.unbindVAO(),this.bind(),lt.bufferSubData(lt.ELEMENT_ARRAY_BUFFER,0,ot.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class An{constructor(ot,lt,bt,kt){this.length=lt.length,this.attributes=bt,this.itemSize=lt.bytesPerElement,this.dynamicDraw=kt,this.context=ot;const Ft=ot.gl;this.buffer=Ft.createBuffer(),ot.bindVertexBuffer.set(this.buffer),Ft.bufferData(Ft.ARRAY_BUFFER,lt.arrayBuffer,this.dynamicDraw?Ft.DYNAMIC_DRAW:Ft.STATIC_DRAW),this.dynamicDraw||lt.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(ot){const lt=this.context.gl;this.bind(),lt.bufferSubData(lt.ARRAY_BUFFER,0,ot.arrayBuffer)}enableAttributes(ot,lt){for(let bt=0;bt<this.attributes.length;bt++){const kt=lt.attributes[this.attributes[bt].name];kt!==void 0&&ot.enableVertexAttribArray(kt)}}setVertexAttribPointers(ot,lt,bt){for(let kt=0;kt<this.attributes.length;kt++){const Ft=this.attributes[kt],Yt=lt.attributes[Ft.name];Yt!==void 0&&ot.vertexAttribPointer(Yt,Ft.components,ot[hn[Ft.type]],!1,this.itemSize,Ft.offset+this.itemSize*(bt||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(ot){this.gl=ot.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(ot){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yn extends Mn{getDefault(){return j.Color.transparent}set(ot){const lt=this.current;(ot.r!==lt.r||ot.g!==lt.g||ot.b!==lt.b||ot.a!==lt.a||this.dirty)&&(this.gl.clearColor(ot.r,ot.g,ot.b,ot.a),this.current=ot,this.dirty=!1)}}class Nr extends Mn{getDefault(){return 1}set(ot){(ot!==this.current||this.dirty)&&(this.gl.clearDepth(ot),this.current=ot,this.dirty=!1)}}class ro extends Mn{getDefault(){return 0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.clearStencil(ot),this.current=ot,this.dirty=!1)}}class to extends Mn{getDefault(){return[!0,!0,!0,!0]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||ot[2]!==lt[2]||ot[3]!==lt[3]||this.dirty)&&(this.gl.colorMask(ot[0],ot[1],ot[2],ot[3]),this.current=ot,this.dirty=!1)}}class zr extends Mn{getDefault(){return!0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.depthMask(ot),this.current=ot,this.dirty=!1)}}class In extends Mn{getDefault(){return 255}set(ot){(ot!==this.current||this.dirty)&&(this.gl.stencilMask(ot),this.current=ot,this.dirty=!1)}}class kn extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(ot){const lt=this.current;(ot.func!==lt.func||ot.ref!==lt.ref||ot.mask!==lt.mask||this.dirty)&&(this.gl.stencilFunc(ot.func,ot.ref,ot.mask),this.current=ot,this.dirty=!1)}}class Kn extends Mn{getDefault(){const ot=this.gl;return[ot.KEEP,ot.KEEP,ot.KEEP]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||ot[2]!==lt[2]||this.dirty)&&(this.gl.stencilOp(ot[0],ot[1],ot[2]),this.current=ot,this.dirty=!1)}}class vr extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.STENCIL_TEST):lt.disable(lt.STENCIL_TEST),this.current=ot,this.dirty=!1}}class yr extends Mn{getDefault(){return[0,1]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||this.dirty)&&(this.gl.depthRange(ot[0],ot[1]),this.current=ot,this.dirty=!1)}}class Wr extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.DEPTH_TEST):lt.disable(lt.DEPTH_TEST),this.current=ot,this.dirty=!1}}class Hr extends Mn{getDefault(){return this.gl.LESS}set(ot){(ot!==this.current||this.dirty)&&(this.gl.depthFunc(ot),this.current=ot,this.dirty=!1)}}class Lr extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.BLEND):lt.disable(lt.BLEND),this.current=ot,this.dirty=!1}}class Ir extends Mn{getDefault(){const ot=this.gl;return[ot.ONE,ot.ZERO]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||this.dirty)&&(this.gl.blendFunc(ot[0],ot[1]),this.current=ot,this.dirty=!1)}}class jr extends Mn{getDefault(){return j.Color.transparent}set(ot){const lt=this.current;(ot.r!==lt.r||ot.g!==lt.g||ot.b!==lt.b||ot.a!==lt.a||this.dirty)&&(this.gl.blendColor(ot.r,ot.g,ot.b,ot.a),this.current=ot,this.dirty=!1)}}class Co extends Mn{getDefault(){return this.gl.FUNC_ADD}set(ot){(ot!==this.current||this.dirty)&&(this.gl.blendEquation(ot),this.current=ot,this.dirty=!1)}}class Jo extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.CULL_FACE):lt.disable(lt.CULL_FACE),this.current=ot,this.dirty=!1}}class ps extends Mn{getDefault(){return this.gl.BACK}set(ot){(ot!==this.current||this.dirty)&&(this.gl.cullFace(ot),this.current=ot,this.dirty=!1)}}class ds extends Mn{getDefault(){return this.gl.CCW}set(ot){(ot!==this.current||this.dirty)&&(this.gl.frontFace(ot),this.current=ot,this.dirty=!1)}}class Ss extends Mn{getDefault(){return null}set(ot){(ot!==this.current||this.dirty)&&(this.gl.useProgram(ot),this.current=ot,this.dirty=!1)}}class Al extends Mn{getDefault(){return this.gl.TEXTURE0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.activeTexture(ot),this.current=ot,this.dirty=!1)}}class qo extends Mn{getDefault(){const ot=this.gl;return[0,0,ot.drawingBufferWidth,ot.drawingBufferHeight]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||ot[2]!==lt[2]||ot[3]!==lt[3]||this.dirty)&&(this.gl.viewport(ot[0],ot[1],ot[2],ot[3]),this.current=ot,this.dirty=!1)}}class na extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindFramebuffer(lt.FRAMEBUFFER,ot),this.current=ot,this.dirty=!1}}class Gr extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindRenderbuffer(lt.RENDERBUFFER,ot),this.current=ot,this.dirty=!1}}class bn extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindTexture(lt.TEXTURE_2D,ot),this.current=ot,this.dirty=!1}}class En extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindBuffer(lt.ARRAY_BUFFER,ot),this.current=ot,this.dirty=!1}}class Bn extends Mn{getDefault(){return null}set(ot){const lt=this.gl;lt.bindBuffer(lt.ELEMENT_ARRAY_BUFFER,ot),this.current=ot,this.dirty=!1}}class ur extends Mn{constructor(ot){super(ot),this.vao=ot.extVertexArrayObject}getDefault(){return null}set(ot){this.vao&&(ot!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(ot),this.current=ot,this.dirty=!1)}}class pr extends Mn{getDefault(){return 4}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.pixelStorei(lt.UNPACK_ALIGNMENT,ot),this.current=ot,this.dirty=!1}}class Zr extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.pixelStorei(lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ot),this.current=ot,this.dirty=!1}}class Xr extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.pixelStorei(lt.UNPACK_FLIP_Y_WEBGL,ot),this.current=ot,this.dirty=!1}}class qr extends Mn{constructor(ot,lt){super(ot),this.context=ot,this.parent=lt}getDefault(){return null}}class Mr extends qr{setDirty(){this.dirty=!0}set(ot){if(ot===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const lt=this.gl;lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,ot,0),this.current=ot,this.dirty=!1}}class Tr extends qr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(ot){if(ot===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const lt=this.gl;lt.framebufferRenderbuffer(lt.FRAMEBUFFER,this.attachment(),lt.RENDERBUFFER,ot),this.current=ot,this.dirty=!1}}class Wo extends Tr{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Vn{constructor(ot,lt,bt,kt){this.context=ot,this.width=lt,this.height=bt;const Ft=this.framebuffer=ot.gl.createFramebuffer();this.colorAttachment=new Mr(ot,Ft),kt&&(this.depthAttachment=new Tr(ot,Ft))}destroy(){const ot=this.context.gl,lt=this.colorAttachment.get();if(lt&&ot.deleteTexture(lt),this.depthAttachment){const bt=this.depthAttachment.get();bt&&ot.deleteRenderbuffer(bt)}ot.deleteFramebuffer(this.framebuffer)}}class Sn{constructor(ot){this.gl=ot,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Yn(this),this.clearDepth=new Nr(this),this.clearStencil=new ro(this),this.colorMask=new to(this),this.depthMask=new zr(this),this.stencilMask=new In(this),this.stencilFunc=new kn(this),this.stencilOp=new Kn(this),this.stencilTest=new vr(this),this.depthRange=new yr(this),this.depthTest=new Wr(this),this.depthFunc=new Hr(this),this.blend=new Lr(this),this.blendFunc=new Ir(this),this.blendColor=new jr(this),this.blendEquation=new Co(this),this.cullFace=new Jo(this),this.cullFaceSide=new ps(this),this.frontFace=new ds(this),this.program=new Ss(this),this.activeTexture=new Al(this),this.viewport=new qo(this),this.bindFramebuffer=new na(this),this.bindRenderbuffer=new Gr(this),this.bindTexture=new bn(this),this.bindVertexBuffer=new En(this),this.bindElementBuffer=new Bn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ur(this),this.pixelStoreUnpack=new pr(this),this.pixelStoreUnpackPremultiplyAlpha=new Zr(this),this.pixelStoreUnpackFlipY=new Xr(this),this.extTextureFilterAnisotropic=ot.getExtension("EXT_texture_filter_anisotropic")||ot.getExtension("MOZ_EXT_texture_filter_anisotropic")||ot.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=ot.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=ot.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=ot.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=ot.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=ot.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(ot.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=ot.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=ot.getExtension("OES_standard_derivatives"),this.extTimerQuery=ot.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=ot.getParameter(ot.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(ot,lt){return new gn(this,ot,lt)}createVertexBuffer(ot,lt,bt){return new An(this,ot,lt,bt)}createRenderbuffer(ot,lt,bt){const kt=this.gl,Ft=kt.createRenderbuffer();return this.bindRenderbuffer.set(Ft),kt.renderbufferStorage(kt.RENDERBUFFER,ot,lt,bt),this.bindRenderbuffer.set(null),Ft}createFramebuffer(ot,lt,bt){return new Vn(this,ot,lt,bt)}clear({color:ot,depth:lt,stencil:bt}){const kt=this.gl;let Ft=0;ot&&(Ft|=kt.COLOR_BUFFER_BIT,this.clearColor.set(ot),this.colorMask.set([!0,!0,!0,!0])),lt!==void 0&&(Ft|=kt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(lt),this.depthMask.set(!0)),bt!==void 0&&(Ft|=kt.STENCIL_BUFFER_BIT,this.clearStencil.set(bt),this.stencilMask.set(255)),kt.clear(Ft)}setCullFace(ot){ot.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(ot.mode),this.frontFace.set(ot.frontFace))}setDepthMode(ot){ot.func!==this.gl.ALWAYS||ot.mask?(this.depthTest.set(!0),this.depthFunc.set(ot.func),this.depthMask.set(ot.mask),this.depthRange.set(ot.range)):this.depthTest.set(!1)}setStencilMode(ot){ot.test.func!==this.gl.ALWAYS||ot.mask?(this.stencilTest.set(!0),this.stencilMask.set(ot.mask),this.stencilOp.set([ot.fail,ot.depthFail,ot.pass]),this.stencilFunc.set({func:ot.test.func,ref:ot.ref,mask:ot.test.mask})):this.stencilTest.set(!1)}setColorMode(ot){it(ot.blendFunction,j.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(ot.blendFunction),this.blendColor.set(ot.blendColor)),this.colorMask.set(ot.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Cn extends j.Evented{constructor(ot,lt,bt,kt){super(),this.id=ot,this.dispatcher=bt,this.setEventedParent(kt),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=j.extend({type:"raster"},lt),j.extend(this,j.pick(lt,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=jt(this._options,this.map._requestManager,null,null,(ot,lt)=>{this._tileJSONRequest=null,this._loaded=!0,ot?this.fire(new j.ErrorEvent(ot)):lt&&(j.extend(this,lt),lt.bounds&&(this.tileBounds=new Qt(lt.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(lt.tiles),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(ot){this.map=ot,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}hasTile(ot){return!this.tileBounds||this.tileBounds.contains(ot.canonical)}loadTile(ot,lt){const bt=j.exported.devicePixelRatio>=2,kt=this.map._requestManager.normalizeTileURL(ot.tileID.canonical.url(this.tiles,this.scheme),bt,this.tileSize);ot.request=j.getImage(this.map._requestManager.transformRequest(kt,j.ResourceType.Tile),(Ft,Yt,rn,ln)=>(delete ot.request,ot.aborted?(ot.state="unloaded",lt(null)):Ft?(ot.state="errored",lt(Ft)):Yt?(this.map._refreshExpiredTiles&&ot.setExpiryData({cacheControl:rn,expires:ln}),ot.setTexture(Yt,this.map.painter),ot.state="loaded",j.cacheEntryPossiblyAdded(this.dispatcher),void lt(null)):lt(null)))}static loadTileData(ot,lt,bt){ot.setTexture(lt,bt)}static unloadTileData(ot,lt){ot.texture&&lt.saveTileTexture(ot.texture)}abortTile(ot,lt){ot.request&&(ot.request.cancel(),delete ot.request),lt()}unloadTile(ot,lt){ot.texture&&this.map.painter.saveTileTexture(ot.texture),lt()}hasTransition(){return!1}}let Hn;function Jn(dt,ot,lt,bt,kt,Ft,Yt,rn){const ln=[dt,lt,kt,ot,bt,Ft,1,1,1],pn=[Yt,rn,1],vn=j.adjoint([],ln),[Tn,Dn,$n]=j.transformMat3(pn,pn,j.transpose(vn,vn));return j.multiply$1(ln,[Tn,0,0,0,Dn,0,0,0,$n],ln)}class ir extends j.Evented{constructor(ot,lt,bt,kt){super(),this.id=ot,this.dispatcher=bt,this.coordinates=lt.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(kt),this.options=lt,this._dirty=!1}load(ot,lt){this._loaded=lt||!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=j.getImage(this.map._requestManager.transformRequest(this.url,j.ResourceType.Image),(bt,kt)=>{if(this._imageRequest=null,this._loaded=!0,bt)this.fire(new j.ErrorEvent(bt));else if(kt){const{HTMLImageElement:Ft}=j.window;this.image=kt instanceof Ft?j.exported.getImageData(kt):kt,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,ot&&(this.coordinates=ot),this._finishLoading()}})}loaded(){return this._loaded}updateImage(ot){return this.image&&ot.url?(this._imageRequest&&ot.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=ot.url,this.load(ot.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(ot){this.map=ot,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(ot){this.coordinates=ot,this._boundsArray=void 0;const lt=ot.map(j.MercatorCoordinate.fromLngLat);return this.tileID=function(bt){let kt=1/0,Ft=1/0,Yt=-1/0,rn=-1/0;for(const Tn of bt)kt=Math.min(kt,Tn.x),Ft=Math.min(Ft,Tn.y),Yt=Math.max(Yt,Tn.x),rn=Math.max(rn,Tn.y);const ln=Math.max(Yt-kt,rn-Ft),pn=Math.max(0,Math.floor(-Math.log(ln)/Math.LN2)),vn=Math.pow(2,pn);return new j.CanonicalTileID(pn,Math.floor((kt+Yt)/2*vn),Math.floor((Ft+rn)/2*vn))}(lt),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(ot){for(const ln in this.tiles){const pn=this.tiles[ln];pn.state!=="loaded"&&(pn.state="loaded",pn.texture=this.texture)}if(this._boundsArray)return;const lt=j.tileTransform(this.tileID,this.map.transform.projection),[bt,kt,Ft,Yt]=this.coordinates.map(ln=>{const pn=lt.projection.project(ln[0],ln[1]);return j.getTilePoint(lt,pn)._round()});this.perspectiveTransform=function(ln,pn,vn,Tn,Dn,$n,Wn,Zn,Fn,jn){const Qn=Jn(0,0,ln,0,0,pn,ln,pn),Gn=Jn(vn,Tn,Dn,$n,Wn,Zn,Fn,jn);return j.multiply$1(Gn,j.adjoint(Qn,Qn),Gn),[Gn[6]/Gn[8]*ln/j.EXTENT,Gn[7]/Gn[8]*pn/j.EXTENT]}(this.width,this.height,bt.x,bt.y,kt.x,kt.y,Yt.x,Yt.y,Ft.x,Ft.y);const rn=this._boundsArray=new j.StructArrayLayout4i8;rn.emplaceBack(bt.x,bt.y,0,0),rn.emplaceBack(kt.x,kt.y,j.EXTENT,0),rn.emplaceBack(Yt.x,Yt.y,0,j.EXTENT),rn.emplaceBack(Ft.x,Ft.y,j.EXTENT,j.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=ot.createVertexBuffer(rn,j.boundsAttributes.members),this.boundsSegments=j.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const ot=this.map.painter.context,lt=ot.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new j.Texture(ot,this.image,lt.RGBA),this.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(ot)}loadTile(ot,lt){this.tileID&&this.tileID.equals(ot.tileID.canonical)?(this.tiles[String(ot.tileID.wrap)]=ot,ot.buckets={},lt(null)):(ot.state="errored",lt(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const gr={vector:class extends j.Evented{constructor(dt,ot,lt,bt){if(super(),this.id=dt,this.dispatcher=lt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,j.extend(this,j.pick(ot,["url","scheme","tileSize","promoteId"])),this._options=j.extend({type:"vector"},ot),this._collectResourceTiming=ot.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(bt),this._tileWorkers={},this._deduped=new j.DedupedRequest}load(dt){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"}));const ot=Array.isArray(this.map._language)?this.map._language.join():this.map._language,lt=this.map._worldview;this._tileJSONRequest=jt(this._options,this.map._requestManager,ot,lt,(bt,kt)=>{this._tileJSONRequest=null,this._loaded=!0,bt?(ot&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${ot}`),lt&&lt.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${lt}`),this.fire(new j.ErrorEvent(bt))):kt&&(j.extend(this,kt),kt.bounds&&(this.tileBounds=new Qt(kt.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(kt.tiles,this.map._requestManager._customAccessToken),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))),dt&&dt(bt)})}loaded(){return this._loaded}hasTile(dt){return!this.tileBounds||this.tileBounds.contains(dt.canonical)}onAdd(dt){this.map=dt,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>{const dt=this.map.style._getSourceCaches(this.id);for(const ot of dt)ot.clearTiles()})}setSourceProperty(dt){dt(),this.reload()}setTiles(dt){return this._options.tiles=dt,this.reload(),this}setUrl(dt){return this.url=dt,this._options.url=dt,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return j.extend({},this._options)}loadTile(dt,ot){const lt=this.map._requestManager.normalizeTileURL(dt.tileID.canonical.url(this.tiles,this.scheme)),bt={request:this.map._requestManager.transformRequest(lt,j.ResourceType.Tile),data:void 0,uid:dt.uid,tileID:dt.tileID,tileZoom:dt.tileZoom,zoom:dt.tileID.overscaledZ,tileSize:this.tileSize*dt.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:dt.isSymbolTile};if(bt.request.collectResourceTiming=this._collectResourceTiming,dt.actor&&dt.state!=="expired")dt.state==="loading"?dt.reloadCallback=ot:dt.request=dt.actor.send("reloadTile",bt,kt.bind(this));else if(dt.actor=this._tileWorkers[lt]=this._tileWorkers[lt]||this.dispatcher.getActor(),this.dispatcher.ready)dt.request=dt.actor.send("loadTile",bt,kt.bind(this),void 0,!0);else{const Ft=j.loadVectorTile.call({deduped:this._deduped},bt,(Yt,rn)=>{Yt||!rn?kt.call(this,Yt):(bt.data={cacheControl:rn.cacheControl,expires:rn.expires,rawData:rn.rawData.slice(0)},dt.actor&&dt.actor.send("loadTile",bt,kt.bind(this),void 0,!0))},!0);dt.request={cancel:Ft}}function kt(Ft,Yt){return delete dt.request,dt.aborted?ot(null):Ft&&Ft.status!==404?ot(Ft):(Yt&&Yt.resourceTiming&&(dt.resourceTiming=Yt.resourceTiming),this.map._refreshExpiredTiles&&Yt&&dt.setExpiryData(Yt),dt.loadVectorData(Yt,this.map.painter),j.cacheEntryPossiblyAdded(this.dispatcher),ot(null),void(dt.reloadCallback&&(this.loadTile(dt,dt.reloadCallback),dt.reloadCallback=null)))}}abortTile(dt){dt.request&&(dt.request.cancel(),delete dt.request),dt.actor&&dt.actor.send("abortTile",{uid:dt.uid,type:this.type,source:this.id})}unloadTile(dt){dt.unloadVectorData(),dt.actor&&dt.actor.send("removeTile",{uid:dt.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:Cn,"raster-dem":class extends Cn{constructor(dt,ot,lt,bt){super(dt,ot,lt,bt),this.type="raster-dem",this.maxzoom=22,this._options=j.extend({type:"raster-dem"},ot),this.encoding=ot.encoding||"mapbox"}loadTile(dt,ot){const lt=this.map._requestManager.normalizeTileURL(dt.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function bt(kt,Ft){kt&&(dt.state="errored",ot(kt)),Ft&&(dt.dem=Ft,dt.dem.onDeserialize(),dt.needsHillshadePrepare=!0,dt.needsDEMTextureUpload=!0,dt.state="loaded",ot(null))}dt.request=j.getImage(this.map._requestManager.transformRequest(lt,j.ResourceType.Tile),function(kt,Ft,Yt,rn){if(delete dt.request,dt.aborted)dt.state="unloaded",ot(null);else if(kt)dt.state="errored",ot(kt);else if(Ft){this.map._refreshExpiredTiles&&dt.setExpiryData({cacheControl:Yt,expires:rn});const ln=j.window.ImageBitmap&&Ft instanceof j.window.ImageBitmap&&(Hn==null&&(Hn=j.window.OffscreenCanvas&&new j.window.OffscreenCanvas(1,1).getContext("2d")&&typeof j.window.createImageBitmap=="function"),Hn),pn=1-(Ft.width-j.prevPowerOfTwo(Ft.width))/2;pn<1||dt.neighboringTiles||(dt.neighboringTiles=this._getNeighboringTiles(dt.tileID));const vn=ln?Ft:j.exported.getImageData(Ft,pn),Tn={uid:dt.uid,coord:dt.tileID,source:this.id,rawImageData:vn,encoding:this.encoding,padding:pn};dt.actor&&dt.state!=="expired"||(dt.actor=this.dispatcher.getActor(),dt.actor.send("loadDEMTile",Tn,bt.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(dt){const ot=dt.canonical,lt=Math.pow(2,ot.z),bt=(ot.x-1+lt)%lt,kt=ot.x===0?dt.wrap-1:dt.wrap,Ft=(ot.x+1+lt)%lt,Yt=ot.x+1===lt?dt.wrap+1:dt.wrap,rn={};return rn[new j.OverscaledTileID(dt.overscaledZ,kt,ot.z,bt,ot.y).key]={backfilled:!1},rn[new j.OverscaledTileID(dt.overscaledZ,Yt,ot.z,Ft,ot.y).key]={backfilled:!1},ot.y>0&&(rn[new j.OverscaledTileID(dt.overscaledZ,kt,ot.z,bt,ot.y-1).key]={backfilled:!1},rn[new j.OverscaledTileID(dt.overscaledZ,dt.wrap,ot.z,ot.x,ot.y-1).key]={backfilled:!1},rn[new j.OverscaledTileID(dt.overscaledZ,Yt,ot.z,Ft,ot.y-1).key]={backfilled:!1}),ot.y+1<lt&&(rn[new j.OverscaledTileID(dt.overscaledZ,kt,ot.z,bt,ot.y+1).key]={backfilled:!1},rn[new j.OverscaledTileID(dt.overscaledZ,dt.wrap,ot.z,ot.x,ot.y+1).key]={backfilled:!1},rn[new j.OverscaledTileID(dt.overscaledZ,Yt,ot.z,Ft,ot.y+1).key]={backfilled:!1}),rn}unloadTile(dt){dt.demTexture&&this.map.painter.saveTileTexture(dt.demTexture),dt.fbo&&(dt.fbo.destroy(),delete dt.fbo),dt.dem&&delete dt.dem,delete dt.neighboringTiles,dt.state="unloaded"}},geojson:class extends j.Evented{constructor(dt,ot,lt,bt){super(),this.id=dt,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=lt.getActor(),this.setEventedParent(bt),this._data=ot.data,this._options=j.extend({},ot),this._collectResourceTiming=ot.collectResourceTiming,ot.maxzoom!==void 0&&(this.maxzoom=ot.maxzoom),ot.type&&(this.type=ot.type),ot.attribution&&(this.attribution=ot.attribution),this.promoteId=ot.promoteId;const kt=j.EXTENT/this.tileSize;this.workerOptions=j.extend({source:this.id,cluster:ot.cluster||!1,geojsonVtOptions:{buffer:(ot.buffer!==void 0?ot.buffer:128)*kt,tolerance:(ot.tolerance!==void 0?ot.tolerance:.375)*kt,extent:j.EXTENT,maxZoom:this.maxzoom,lineMetrics:ot.lineMetrics||!1,generateId:ot.generateId||!1},superclusterOptions:{maxZoom:ot.clusterMaxZoom!==void 0?ot.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,ot.clusterMinPoints||2),extent:j.EXTENT,radius:(ot.clusterRadius!==void 0?ot.clusterRadius:50)*kt,log:!1,generateId:ot.generateId||!1},clusterProperties:ot.clusterProperties,filter:ot.filter},ot.workerOptions)}onAdd(dt){this.map=dt,this.setData(this._data)}setData(dt){return this._data=dt,this._updateWorkerData(),this}getClusterExpansionZoom(dt,ot){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:dt,source:this.id},ot),this}getClusterChildren(dt,ot){return this.actor.send("geojson.getClusterChildren",{clusterId:dt,source:this.id},ot),this}getClusterLeaves(dt,ot,lt,bt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:dt,limit:ot,offset:lt},bt),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new j.Event("dataloading",{dataType:"source"})),this._loaded=!1;const dt=j.extend({},this.workerOptions),ot=this._data;typeof ot=="string"?(dt.request=this.map._requestManager.transformRequest(j.exported.resolveURL(ot),j.ResourceType.Source),dt.request.collectResourceTiming=this._collectResourceTiming):dt.data=JSON.stringify(ot),this._pendingLoad=this.actor.send(`${this.type}.loadData`,dt,(lt,bt)=>{if(this._loaded=!0,this._pendingLoad=null,lt)this.fire(new j.ErrorEvent(lt));else{const kt={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&bt&&bt.resourceTiming&&bt.resourceTiming[this.id]&&(kt.resourceTiming=bt.resourceTiming[this.id]),this.fire(new j.Event("data",kt)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(dt,ot){const lt=dt.actor?"reloadTile":"loadTile";dt.actor=this.actor,dt.request=this.actor.send(lt,{type:this.type,uid:dt.uid,tileID:dt.tileID,tileZoom:dt.tileZoom,zoom:dt.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(bt,kt)=>(delete dt.request,dt.unloadVectorData(),dt.aborted?ot(null):bt?ot(bt):(dt.loadVectorData(kt,this.map.painter,lt==="reloadTile"),ot(null))),void 0,lt==="loadTile")}abortTile(dt){dt.request&&(dt.request.cancel(),delete dt.request),dt.aborted=!0}unloadTile(dt){dt.unloadVectorData(),this.actor.send("removeTile",{uid:dt.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return j.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends ir{constructor(dt,ot,lt,bt){super(dt,ot,lt,bt),this.roundZoom=!0,this.type="video",this.options=ot}load(){this._loaded=!1;const dt=this.options;this.urls=[];for(const ot of dt.urls)this.urls.push(this.map._requestManager.transformRequest(ot,j.ResourceType.Source).url);j.getVideo(this.urls,(ot,lt)=>{this._loaded=!0,ot?this.fire(new j.ErrorEvent(ot)):lt&&(this.video=lt,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(dt){if(this.video){const ot=this.video.seekable;dt<ot.start(0)||dt>ot.end(0)?this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${ot.start(0)} and ${ot.end(0)}-second mark.`))):this.video.currentTime=dt}}getVideo(){return this.video}onAdd(dt){this.map||(this.map=dt,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const dt=this.map.painter.context,ot=dt.gl;this.texture?this.video.paused||(this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),ot.texSubImage2D(ot.TEXTURE_2D,0,0,0,ot.RGBA,ot.UNSIGNED_BYTE,this.video)):(this.texture=new j.Texture(dt,this.video,ot.RGBA),this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(dt)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:ir,canvas:class extends ir{constructor(dt,ot,lt,bt){super(dt,ot,lt,bt),ot.coordinates?Array.isArray(ot.coordinates)&&ot.coordinates.length===4&&!ot.coordinates.some(kt=>!Array.isArray(kt)||kt.length!==2||kt.some(Ft=>typeof Ft!="number"))||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'missing required property "coordinates"'))),ot.animate&&typeof ot.animate!="boolean"&&this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'optional "animate" property must be a boolean value'))),ot.canvas?typeof ot.canvas=="string"||ot.canvas instanceof j.window.HTMLCanvasElement||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'missing required property "canvas"'))),this.options=ot,this.animate=ot.animate===void 0||ot.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof j.window.HTMLCanvasElement?this.options.canvas:j.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new j.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(dt){this.map=dt,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let dt=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,dt=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,dt=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const ot=this.map.painter.context;this.texture?(dt||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new j.Texture(ot,this.canvas,ot.gl.RGBA,{premultiply:!0}),this._prepareData(ot)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const dt of[this.canvas.width,this.canvas.height])if(isNaN(dt)||dt<=0)return!0;return!1}},custom:class extends j.Evented{constructor(dt,ot,lt,bt){super(),this.id=dt,this.type="custom",this._dataType="raster",this._dispatcher=lt,this._implementation=ot,this.setEventedParent(bt),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new j.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new j.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Qt(this._implementation.bounds,this.minzoom,this.maxzoom)),ot.update=this._update.bind(this),ot.clearTiles=this._clearTiles.bind(this),ot.coveringTiles=this._coveringTiles.bind(this),j.extend(this,j.pick(ot,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return j.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(dt){this._map=dt,this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(dt),this.load()}onRemove(dt){this._implementation.onRemove&&this._implementation.onRemove(dt)}hasTile(dt){if(this._implementation.hasTile){const{x:ot,y:lt,z:bt}=dt.canonical;return this._implementation.hasTile({x:ot,y:lt,z:bt})}return!this.tileBounds||this.tileBounds.contains(dt.canonical)}loadTile(dt,ot){const{x:lt,y:bt,z:kt}=dt.tileID.canonical,Ft=new j.window.AbortController;dt.request=Promise.resolve(this._implementation.loadTile({x:lt,y:bt,z:kt},{signal:Ft.signal})).then(function(Yt){return delete dt.request,dt.aborted?(dt.state="unloaded",ot(null)):Yt===void 0?(dt.state="errored",ot(null)):Yt===null?(this.loadTileData(dt,{width:this.tileSize,height:this.tileSize,data:null}),dt.state="loaded",ot(null)):function(rn){return rn instanceof j.window.ImageData||rn instanceof j.window.HTMLCanvasElement||rn instanceof j.window.ImageBitmap||rn instanceof j.window.HTMLImageElement}(Yt)?(this.loadTileData(dt,Yt),dt.state="loaded",void ot(null)):(dt.state="errored",ot(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(Yt=>{Yt.code!==20&&(dt.state="errored",ot(Yt))}),dt.request.cancel=()=>Ft.abort()}loadTileData(dt,ot){Cn.loadTileData(dt,ot,this._map.painter)}unloadTileData(dt){Cn.unloadTileData(dt,this._map.painter)}unloadTile(dt,ot){if(this.unloadTileData(dt),this._implementation.unloadTile){const{x:lt,y:bt,z:kt}=dt.tileID.canonical;this._implementation.unloadTile({x:lt,y:bt,z:kt})}ot()}abortTile(dt,ot){dt.request&&dt.request.cancel&&(dt.request.cancel(),delete dt.request),ot()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(dt=>({x:dt.canonical.x,y:dt.canonical.y,z:dt.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}}},_r=function(dt,ot,lt,bt){const kt=new gr[ot.type](dt,ot,lt,bt);if(kt.id!==dt)throw new Error(`Expected Source id to be ${dt} instead of ${kt.id}`);return j.bindAll(["load","abort","unload","serialize","prepare"],kt),kt};function fr(dt,ot){const lt=j.identity([]);return j.scale(lt,lt,[.5*dt.width,.5*-dt.height,1]),j.translate(lt,lt,[1,-1,0]),j.multiply(lt,lt,dt.calculateProjMatrix(ot.toUnwrapped())),Float32Array.from(lt)}function xr(dt,ot,lt,bt,kt,Ft,Yt,rn=!1){const ln=dt.tilesIn(bt,Yt,rn);ln.sort(po);const pn=[];for(const Tn of ln)pn.push({wrappedTileID:Tn.tile.tileID.wrapped().key,queryResults:Tn.tile.queryRenderedFeatures(ot,lt,dt._state,Tn,kt,Ft,fr(dt.transform,Tn.tile.tileID),rn)});const vn=function(Tn){const Dn={},$n={};for(const Wn of Tn){const Zn=Wn.queryResults,Fn=Wn.wrappedTileID,jn=$n[Fn]=$n[Fn]||{};for(const Qn in Zn){const Gn=Zn[Qn],or=jn[Qn]=jn[Qn]||{},lr=Dn[Qn]=Dn[Qn]||[];for(const er of Gn)or[er.featureIndex]||(or[er.featureIndex]=!0,lr.push(er))}}return Dn}(pn);for(const Tn in vn)vn[Tn].forEach(Dn=>{const $n=Dn.feature,Wn=$n.layer;Wn&&Wn.type!=="background"&&Wn.type!=="sky"&&($n.source=Wn.source,Wn["source-layer"]&&($n.sourceLayer=Wn["source-layer"]),$n.state=$n.id!==void 0?dt.getFeatureState(Wn["source-layer"],$n.id):{})});return vn}function Yr(dt,ot){const lt=dt.getRenderableIds().map(Ft=>dt.getTileByID(Ft)),bt=[],kt={};for(let Ft=0;Ft<lt.length;Ft++){const Yt=lt[Ft],rn=Yt.tileID.canonical.key;kt[rn]||(kt[rn]=!0,Yt.querySourceFeatures(bt,ot))}return bt}function po(dt,ot){const lt=dt.tileID,bt=ot.tileID;return lt.overscaledZ-bt.overscaledZ||lt.canonical.y-bt.canonical.y||lt.wrap-bt.wrap||lt.canonical.x-bt.canonical.x}function io(){return Vy.workerClass!=null?new Vy.workerClass:new j.window.Worker(Vy.workerUrl)}const ko="mapboxgl_preloaded_worker_pool";class Do{constructor(){this.active={}}acquire(ot){if(!this.workers)for(this.workers=[];this.workers.length<Do.workerCount;)this.workers.push(new io);return this.active[ot]=!0,this.workers.slice()}release(ot){delete this.active[ot],this.numActive()===0&&(this.workers.forEach(lt=>{lt.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ko]}numActive(){return Object.keys(this.active).length}}let Lo;function zo(){return Lo||(Lo=new Do),Lo}function ts(dt,ot){const lt={};for(const bt in dt)bt!=="ref"&&(lt[bt]=dt[bt]);return j.refProperties.forEach(bt=>{bt in ot&&(lt[bt]=ot[bt])}),lt}function ms(dt){dt=dt.slice();const ot=Object.create(null);for(let lt=0;lt<dt.length;lt++)ot[dt[lt].id]=dt[lt];for(let lt=0;lt<dt.length;lt++)"ref"in dt[lt]&&(dt[lt]=ts(dt[lt],ot[dt[lt].ref]));return dt}Do.workerCount=2;const Eo={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Rs(dt,ot,lt){lt.push({command:Eo.addSource,args:[dt,ot[dt]]})}function As(dt,ot,lt){ot.push({command:Eo.removeSource,args:[dt]}),lt[dt]=!0}function Su(dt,ot,lt,bt){As(dt,lt,bt),Rs(dt,ot,lt)}function cu(dt,ot,lt){let bt;for(bt in dt[lt])if(dt[lt].hasOwnProperty(bt)&&bt!=="data"&&!it(dt[lt][bt],ot[lt][bt]))return!1;for(bt in ot[lt])if(ot[lt].hasOwnProperty(bt)&&bt!=="data"&&!it(dt[lt][bt],ot[lt][bt]))return!1;return!0}function $r(dt,ot,lt,bt,kt,Ft){let Yt;for(Yt in ot=ot||{},dt=dt||{})dt.hasOwnProperty(Yt)&&(it(dt[Yt],ot[Yt])||lt.push({command:Ft,args:[bt,Yt,ot[Yt],kt]}));for(Yt in ot)ot.hasOwnProperty(Yt)&&!dt.hasOwnProperty(Yt)&&(it(dt[Yt],ot[Yt])||lt.push({command:Ft,args:[bt,Yt,ot[Yt],kt]}))}function xa(dt){return dt.id}function Gs(dt,ot){return dt[ot.id]=ot,dt}class hu{constructor(ot,lt){this.reset(ot,lt)}reset(ot,lt){this.points=ot||[],this._distances=[0];for(let bt=1;bt<this.points.length;bt++)this._distances[bt]=this._distances[bt-1]+this.points[bt].dist(this.points[bt-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(lt||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(ot){if(this.points.length===1)return this.points[0];ot=j.clamp(ot,0,1);let lt=1,bt=this._distances[lt];const kt=ot*this.paddedLength+this.padding;for(;bt<kt&&lt<this._distances.length;)bt=this._distances[++lt];const Ft=lt-1,Yt=this._distances[Ft],rn=bt-Yt,ln=rn>0?(kt-Yt)/rn:0;return this.points[Ft].mult(1-ln).add(this.points[lt].mult(ln))}}class ru{constructor(ot,lt,bt){const kt=this.boxCells=[],Ft=this.circleCells=[];this.xCellCount=Math.ceil(ot/bt),this.yCellCount=Math.ceil(lt/bt);for(let Yt=0;Yt<this.xCellCount*this.yCellCount;Yt++)kt.push([]),Ft.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=ot,this.height=lt,this.xScale=this.xCellCount/ot,this.yScale=this.yCellCount/lt,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(ot,lt,bt,kt,Ft){this._forEachCell(lt,bt,kt,Ft,this._insertBoxCell,this.boxUid++),this.boxKeys.push(ot),this.bboxes.push(lt),this.bboxes.push(bt),this.bboxes.push(kt),this.bboxes.push(Ft)}insertCircle(ot,lt,bt,kt){this._forEachCell(lt-kt,bt-kt,lt+kt,bt+kt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(ot),this.circles.push(lt),this.circles.push(bt),this.circles.push(kt)}_insertBoxCell(ot,lt,bt,kt,Ft,Yt){this.boxCells[Ft].push(Yt)}_insertCircleCell(ot,lt,bt,kt,Ft,Yt){this.circleCells[Ft].push(Yt)}_query(ot,lt,bt,kt,Ft,Yt){if(bt<0||ot>this.width||kt<0||lt>this.height)return!Ft&&[];const rn=[];if(ot<=0&&lt<=0&&this.width<=bt&&this.height<=kt){if(Ft)return!0;for(let ln=0;ln<this.boxKeys.length;ln++)rn.push({key:this.boxKeys[ln],x1:this.bboxes[4*ln],y1:this.bboxes[4*ln+1],x2:this.bboxes[4*ln+2],y2:this.bboxes[4*ln+3]});for(let ln=0;ln<this.circleKeys.length;ln++){const pn=this.circles[3*ln],vn=this.circles[3*ln+1],Tn=this.circles[3*ln+2];rn.push({key:this.circleKeys[ln],x1:pn-Tn,y1:vn-Tn,x2:pn+Tn,y2:vn+Tn})}return Yt?rn.filter(Yt):rn}return this._forEachCell(ot,lt,bt,kt,this._queryCell,rn,{hitTest:Ft,seenUids:{box:{},circle:{}}},Yt),Ft?rn.length>0:rn}_queryCircle(ot,lt,bt,kt,Ft){const Yt=ot-bt,rn=ot+bt,ln=lt-bt,pn=lt+bt;if(rn<0||Yt>this.width||pn<0||ln>this.height)return!kt&&[];const vn=[];return this._forEachCell(Yt,ln,rn,pn,this._queryCellCircle,vn,{hitTest:kt,circle:{x:ot,y:lt,radius:bt},seenUids:{box:{},circle:{}}},Ft),kt?vn.length>0:vn}query(ot,lt,bt,kt,Ft){return this._query(ot,lt,bt,kt,!1,Ft)}hitTest(ot,lt,bt,kt,Ft){return this._query(ot,lt,bt,kt,!0,Ft)}hitTestCircle(ot,lt,bt,kt){return this._queryCircle(ot,lt,bt,!0,kt)}_queryCell(ot,lt,bt,kt,Ft,Yt,rn,ln){const pn=rn.seenUids,vn=this.boxCells[Ft];if(vn!==null){const Dn=this.bboxes;for(const $n of vn)if(!pn.box[$n]){pn.box[$n]=!0;const Wn=4*$n;if(ot<=Dn[Wn+2]&&lt<=Dn[Wn+3]&&bt>=Dn[Wn+0]&&kt>=Dn[Wn+1]&&(!ln||ln(this.boxKeys[$n]))){if(rn.hitTest)return Yt.push(!0),!0;Yt.push({key:this.boxKeys[$n],x1:Dn[Wn],y1:Dn[Wn+1],x2:Dn[Wn+2],y2:Dn[Wn+3]})}}}const Tn=this.circleCells[Ft];if(Tn!==null){const Dn=this.circles;for(const $n of Tn)if(!pn.circle[$n]){pn.circle[$n]=!0;const Wn=3*$n;if(this._circleAndRectCollide(Dn[Wn],Dn[Wn+1],Dn[Wn+2],ot,lt,bt,kt)&&(!ln||ln(this.circleKeys[$n]))){if(rn.hitTest)return Yt.push(!0),!0;{const Zn=Dn[Wn],Fn=Dn[Wn+1],jn=Dn[Wn+2];Yt.push({key:this.circleKeys[$n],x1:Zn-jn,y1:Fn-jn,x2:Zn+jn,y2:Fn+jn})}}}}}_queryCellCircle(ot,lt,bt,kt,Ft,Yt,rn,ln){const pn=rn.circle,vn=rn.seenUids,Tn=this.boxCells[Ft];if(Tn!==null){const $n=this.bboxes;for(const Wn of Tn)if(!vn.box[Wn]){vn.box[Wn]=!0;const Zn=4*Wn;if(this._circleAndRectCollide(pn.x,pn.y,pn.radius,$n[Zn+0],$n[Zn+1],$n[Zn+2],$n[Zn+3])&&(!ln||ln(this.boxKeys[Wn])))return Yt.push(!0),!0}}const Dn=this.circleCells[Ft];if(Dn!==null){const $n=this.circles;for(const Wn of Dn)if(!vn.circle[Wn]){vn.circle[Wn]=!0;const Zn=3*Wn;if(this._circlesCollide($n[Zn],$n[Zn+1],$n[Zn+2],pn.x,pn.y,pn.radius)&&(!ln||ln(this.circleKeys[Wn])))return Yt.push(!0),!0}}}_forEachCell(ot,lt,bt,kt,Ft,Yt,rn,ln){const pn=this._convertToXCellCoord(ot),vn=this._convertToYCellCoord(lt),Tn=this._convertToXCellCoord(bt),Dn=this._convertToYCellCoord(kt);for(let $n=pn;$n<=Tn;$n++)for(let Wn=vn;Wn<=Dn;Wn++)if(Ft.call(this,ot,lt,bt,kt,this.xCellCount*Wn+$n,Yt,rn,ln))return}_convertToXCellCoord(ot){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(ot*this.xScale)))}_convertToYCellCoord(ot){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(ot*this.yScale)))}_circlesCollide(ot,lt,bt,kt,Ft,Yt){const rn=kt-ot,ln=Ft-lt,pn=bt+Yt;return pn*pn>rn*rn+ln*ln}_circleAndRectCollide(ot,lt,bt,kt,Ft,Yt,rn){const ln=(Yt-kt)/2,pn=Math.abs(ot-(kt+ln));if(pn>ln+bt)return!1;const vn=(rn-Ft)/2,Tn=Math.abs(lt-(Ft+vn));if(Tn>vn+bt)return!1;if(pn<=ln||Tn<=vn)return!0;const Dn=pn-ln,$n=Tn-vn;return Dn*Dn+$n*$n<=bt*bt}}const Au=Math.tan(85*Math.PI/180);function El(dt,ot,lt,bt,kt,Ft,Yt){const rn=j.create();if(lt)if(Ft.name==="globe"){const ln=j.calculateGlobeLabelMatrix(kt,ot);j.multiply(rn,rn,ln)}else{const ln=xt([],Yt);rn[0]=ln[0],rn[1]=ln[1],rn[4]=ln[2],rn[5]=ln[3],bt||j.rotateZ(rn,rn,kt.angle)}else j.multiply(rn,kt.labelPlaneMatrix,dt);return rn}function nm(dt,ot,lt,bt,kt,Ft,Yt){const rn=El(dt,ot,lt,bt,kt,Ft,Yt);return Ft.name==="globe"&&lt||(rn[2]=rn[6]=rn[10]=rn[14]=0),rn}function tp(dt,ot,lt,bt,kt,Ft,Yt){if(lt){if(Ft.name==="globe"){const rn=El(dt,ot,lt,bt,kt,Ft,Yt);return j.invert(rn,rn),j.multiply(rn,dt,rn),rn}{const rn=j.clone(dt),ln=j.identity([]);return ln[0]=Yt[0],ln[1]=Yt[1],ln[4]=Yt[2],ln[5]=Yt[3],j.multiply(rn,rn,ln),bt||j.rotateZ(rn,rn,-kt.angle),rn}}return kt.glCoordMatrix}function wo(dt,ot,lt=0){const bt=[dt.x,dt.y,lt,1];lt?j.transformMat4$1(bt,bt,ot):Vu(bt,bt,ot);const kt=bt[3];return{point:[bt[0]/kt,bt[1]/kt,bt[2]/kt],signedDistanceFromCamera:kt}}function as(dt,ot){const lt=[dt[0],dt[1],dt[2],1];j.transformMat4$1(lt,lt,ot);const bt=lt[3];return{point:[lt[0]/bt,lt[1]/bt,lt[2]/bt],signedDistanceFromCamera:bt}}function us(dt,ot){return Math.min(.5+dt/ot*.5,1.5)}function Eu(dt,ot){const lt=dt[0]/dt[3],bt=dt[1]/dt[3];return lt>=-ot[0]&&lt<=ot[0]&&bt>=-ot[1]&&bt<=ot[1]}function np(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn){const vn=lt.transform,Tn=bt?dt.textSizeData:dt.iconSizeData,Dn=j.evaluateSizeForZoom(Tn,lt.transform.zoom),$n=vn.projection.name==="globe",Wn=[256/lt.width*2+1,256/lt.height*2+1],Zn=bt?dt.text.dynamicLayoutVertexArray:dt.icon.dynamicLayoutVertexArray;Zn.clear();let Fn=null;$n&&(Fn=bt?dt.text.globeExtVertexArray:dt.icon.globeExtVertexArray);const jn=dt.lineVertexArray,Qn=bt?dt.text.placedSymbolArray:dt.icon.placedSymbolArray,Gn=lt.transform.width/lt.transform.height;let or=!1;for(let lr=0;lr<Qn.length;lr++){const er=Qn.get(lr);if(er.writingMode!==j.WritingMode.vertical||or||lr!==0&&Qn.get(lr-1).writingMode===j.WritingMode.horizontal||(or=!0),(er.hidden||er.writingMode===j.WritingMode.vertical)&&!or){Us(er.numGlyphs,Zn);continue}or=!1;const dr=new j.pointGeometry(er.tileAnchorX,er.tileAnchorY),Ar=ln?ln(dr):[0,0,0],Fr=vn.projection.projectTilePoint(dr.x,dr.y,pn.canonical),Dr=[Fr.x+Ar[0],Fr.y+Ar[1],Fr.z+Ar[2]],co=[...Dr,1];if(j.transformMat4$1(co,co,ot),!Eu(co,Wn)){Us(er.numGlyphs,Zn);continue}const Sr=us(lt.transform.cameraToCenterDistance,co[3]),_i=j.evaluateSizeForFeature(Tn,Dn,er),eo=Yt?_i/Sr:_i*Sr,Or=wo(new j.pointGeometry(Dr[0],Dr[1]),kt,Dr[2]);if(Or.signedDistanceFromCamera<=0){Us(er.numGlyphs,Zn);continue}let br={};const xo=Yt?null:ln,mo=zu(er,eo,!1,rn,ot,kt,Ft,dt.glyphOffsetArray,jn,Zn,Fn,Or.point,dr,br,Gn,xo,vn.projection,pn,Yt);or=mo.useVertical,xo&&mo.needsFlipping&&(br={}),(mo.notEnoughRoom||or||mo.needsFlipping&&zu(er,eo,!0,rn,ot,kt,Ft,dt.glyphOffsetArray,jn,Zn,Fn,Or.point,dr,br,Gn,xo,vn.projection,pn,Yt).notEnoughRoom)&&Us(er.numGlyphs,Zn)}bt?(dt.text.dynamicLayoutVertexBuffer.updateData(Zn),Fn&&dt.text.globeExtVertexBuffer.updateData(Fn)):(dt.icon.dynamicLayoutVertexBuffer.updateData(Zn),Fn&&dt.icon.globeExtVertexBuffer.updateData(Fn))}function rs(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn){const Fn=rn.glyphStartIndex+rn.numGlyphs,jn=rn.lineStartIndex,Qn=rn.lineStartIndex+rn.lineLength,Gn=ot.getoffsetX(rn.glyphStartIndex),or=ot.getoffsetX(Fn-1),lr=ys(dt*Gn,lt,bt,kt,Ft,Yt,rn.segment,jn,Qn,ln,pn,vn,Tn,Dn,!0,$n,Wn,Zn);if(!lr)return null;const er=ys(dt*or,lt,bt,kt,Ft,Yt,rn.segment,jn,Qn,ln,pn,vn,Tn,Dn,!0,$n,Wn,Zn);return er?{first:lr,last:er}:null}function Uu(dt,ot,lt,bt){return dt.writingMode===j.WritingMode.horizontal&&Math.abs(lt.y-ot.y)>Math.abs(lt.x-ot.x)*bt?{useVertical:!0}:dt.writingMode===j.WritingMode.vertical?ot.y<lt.y?{needsFlipping:!0}:null:dt.flipState!==0&&function(kt,Ft,Yt){const rn=(Ft.x-kt.x)*Yt;return rn===0||Math.abs((Ft.y-kt.y)/rn)>Au}(ot,lt,bt)?dt.flipState===1?{needsFlipping:!0}:null:ot.x>lt.x?{needsFlipping:!0}:null}function zu(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn,Fn,jn,Qn){const Gn=ot/24,or=dt.lineOffsetX*Gn,lr=dt.lineOffsetY*Gn;let er=[];if(dt.numGlyphs>1){const dr=dt.glyphStartIndex+dt.numGlyphs,Ar=dt.lineStartIndex,Fr=dt.lineStartIndex+dt.lineLength,Dr=rs(Gn,rn,or,lr,lt,Tn,Dn,dt,ln,Ft,$n,Zn,!1,Fn,jn,Qn);if(!Dr)return{notEnoughRoom:!0};const co=as(Dr.first.point,Yt).point,Sr=as(Dr.last.point,Yt).point,_i=new j.pointGeometry(co[0],co[1]),eo=new j.pointGeometry(Sr[0],Sr[1]);if(bt&&!lt){const Or=Uu(dt,_i,eo,Wn);if(dt.flipState=Or&&Or.needsFlipping?1:2,Or)return Or}er=[Dr.first];for(let Or=dt.glyphStartIndex+1;Or<dr-1;Or++){const br=ys(Gn*rn.getoffsetX(Or),or,lr,lt,Tn,Dn,dt.segment,Ar,Fr,ln,Ft,$n,Zn,!1,!1,Fn,jn,Qn);if(!br)return{notEnoughRoom:!0};er.push(br)}er.push(Dr.last)}else{if(bt&&!lt){const Ar=wo(Dn,kt).point,Fr=dt.lineStartIndex+dt.segment+1,Dr=new j.pointGeometry(ln.getx(Fr),ln.gety(Fr)),co=wo(Dr,kt),Sr=co.signedDistanceFromCamera>0?co.point:Bl(Dn,Dr,Ar,1,kt,void 0,Fn,jn.canonical),_i=Uu(dt,new j.pointGeometry(Ar[0],Ar[1]),new j.pointGeometry(Sr[0],Sr[1]),Wn);if(dt.flipState=_i&&_i.needsFlipping?1:2,_i)return _i}const dr=ys(Gn*rn.getoffsetX(dt.glyphStartIndex),or,lr,lt,Tn,Dn,dt.segment,dt.lineStartIndex,dt.lineStartIndex+dt.lineLength,ln,Ft,$n,Zn,!1,!1,Fn,jn,Qn);if(!dr)return{notEnoughRoom:!0};er=[dr]}if(vn)for(const dr of er)j.updateGlobeVertexNormal(vn,pn.length+0,dr.up[0],dr.up[1],dr.up[2]),j.updateGlobeVertexNormal(vn,pn.length+1,dr.up[0],dr.up[1],dr.up[2]),j.updateGlobeVertexNormal(vn,pn.length+2,dr.up[0],dr.up[1],dr.up[2]),j.updateGlobeVertexNormal(vn,pn.length+3,dr.up[0],dr.up[1],dr.up[2]),j.addDynamicAttributes(pn,dr.point[0],dr.point[1],dr.point[2],dr.angle);else for(const dr of er)j.addDynamicAttributes(pn,dr.point[0],dr.point[1],dr.point[2],dr.angle);return{}}function fu(dt,ot,lt,bt,kt){const Ft=bt.projectTilePoint(dt.x,dt.y,ot);if(!kt)return wo(Ft,lt,Ft.z);const Yt=kt(dt);return wo(new j.pointGeometry(Ft.x+Yt[0],Ft.y+Yt[1]),lt,Ft.z+Yt[2])}function Bl(dt,ot,lt,bt,kt,Ft,Yt,rn){const ln=fu(dt.add(dt.sub(ot)._unit()),rn,kt,Yt,Ft).point,pn=j.sub([],lt,ln);return j.scaleAndAdd([],lt,pn,bt/j.length(pn))}function ys(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn,Fn,jn){const Qn=bt?dt-ot:dt+ot;let Gn=Qn>0?1:-1,or=0;bt&&(Gn*=-1,or=Math.PI),Gn<0&&(or+=Math.PI);let lr=Gn>0?rn+Yt:rn+Yt+1,er=kt,dr=kt,Ar=0,Fr=0;const Dr=Math.abs(Qn),co=[],Sr=[];let _i=Ft;const eo=()=>{const _o=lr-Gn;return Ar===0?Ft:new j.pointGeometry(pn.getx(_o),pn.gety(_o))},Or=()=>{const _o=eo();return Bl(_o,_i||_o,dr,Dr-Ar+1,vn,Dn,Zn,Fn.canonical)};for(;Ar+Fr<=Dr;){if(lr+=Gn,lr<rn||lr>=ln)return null;if(dr=er,co.push(er),$n&&Sr.push(_i||eo()),er=Tn[lr],er===void 0){_i=new j.pointGeometry(pn.getx(lr),pn.gety(lr));const _o=fu(_i,Fn.canonical,vn,Zn,Dn);er=_o.signedDistanceFromCamera>0?Tn[lr]=_o.point:Or()}else _i=null;Ar+=Fr,Fr=j.distance(dr,er)}_i=_i||new j.pointGeometry(pn.getx(lr),pn.gety(lr));const br=eo();Wn&&Dn&&(Tn[lr]=er=Tn[lr]===void 0?er:Or(),Fr=j.distance(dr,er));const xo=(Dr-Ar)/Fr,mo=_i.sub(br).mult(xo)._add(br),vo=j.sub([],er,dr),yo=j.scaleAndAdd([],dr,vo,xo);let Bo=[0,0,1],Ho=vo[0],Go=vo[1];if(jn&&(Bo=Zn.upVector(Fn.canonical,mo.x,mo.y),Bo[0]!==0||Bo[1]!==0||Bo[2]!==1)){const _o=[1,0,0],es=[0,1,0];_o[0]=Bo[2],_o[1]=0,_o[2]=-Bo[0],j.cross(es,Bo,_o),j.normalize(_o,_o),j.normalize(es,es),Ho=j.dot(vo,_o),Go=j.dot(vo,es)}if(lt){const _o=j.cross([],Bo,vo);j.normalize(_o,_o),j.scaleAndAdd(yo,yo,_o,lt*Gn)}const No=or+Math.atan2(Go,Ho);return co.push(yo),$n&&Sr.push(mo),{point:yo,angle:No,path:co,tilePath:Sr,up:Bo}}const Cm=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Us(dt,ot){for(let lt=0;lt<dt;lt++){const bt=ot.length;ot.resize(bt+4),ot.float32.set(Cm,4*bt)}}function Vu(dt,ot,lt){const bt=ot[0],kt=ot[1];return dt[0]=lt[0]*bt+lt[4]*kt+lt[12],dt[1]=lt[1]*bt+lt[5]*kt+lt[13],dt[3]=lt[3]*bt+lt[7]*kt+lt[15],dt}const Qs=100;class Wu{constructor(ot,lt,bt=new ru(ot.width+200,ot.height+200,25),kt=new ru(ot.width+200,ot.height+200,25)){this.transform=ot,this.grid=bt,this.ignoredGrid=kt,this.pitchfactor=Math.cos(ot._pitch)*ot.cameraToCenterDistance,this.screenRightBoundary=ot.width+Qs,this.screenBottomBoundary=ot.height+Qs,this.gridRightBoundary=ot.width+200,this.gridBottomBoundary=ot.height+200,this.fogState=lt}placeCollisionBox(ot,lt,bt,kt,Ft,Yt,rn,ln){let pn=bt.projectedAnchorX,vn=bt.projectedAnchorY,Tn=bt.projectedAnchorZ;const Dn=bt.elevation,$n=bt.tileID;if(Dn&&$n){const lr=ot.getProjection().upVector($n.canonical,bt.tileAnchorX,bt.tileAnchorY),er=ot.getProjection().upVectorScale($n.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;pn+=lr[0]*Dn*er,vn+=lr[1]*Dn*er,Tn+=lr[2]*Dn*er}const Wn=this.projectAndGetPerspectiveRatio(rn,[pn,vn,Tn],bt.tileID,ot.projection.name==="globe"||!!Dn||this.transform.pitch>0,ot.getProjection()),Zn=Yt*Wn.perspectiveRatio,Fn=(bt.x1*lt+kt.x-bt.padding)*Zn+Wn.point.x,jn=(bt.y1*lt+kt.y-bt.padding)*Zn+Wn.point.y,Qn=(bt.x2*lt+kt.x+bt.padding)*Zn+Wn.point.x,Gn=(bt.y2*lt+kt.y+bt.padding)*Zn+Wn.point.y,or=Wn.perspectiveRatio<=.55||Wn.occluded;return!this.isInsideGrid(Fn,jn,Qn,Gn)||!Ft&&this.grid.hitTest(Fn,jn,Qn,Gn,ln)||or?{box:[],offscreen:!1,occluded:Wn.occluded}:{box:[Fn,jn,Qn,Gn],offscreen:this.isOffscreen(Fn,jn,Qn,Gn),occluded:!1}}placeCollisionCircles(ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn){const Fn=[],jn=this.transform.elevation,Qn=jn?jn.getAtTileOffsetFunc(Zn,this.transform.center.lat,this.transform.worldSize,ot.getProjection()):br=>[0,0,0],Gn=new j.pointGeometry(bt.tileAnchorX,bt.tileAnchorY),or=ot.getProjection().projectTilePoint(bt.tileAnchorX,bt.tileAnchorY,Zn.canonical),lr=Qn(Gn),er=[or.x+lr[0],or.y+lr[1],or.z+lr[2]],dr=ot.projection.name==="globe",Ar=this.projectAndGetPerspectiveRatio(rn,[er[0],er[1],er[2]],Zn,dr||!!jn||this.transform.pitch>0,ot.getProjection()),{perspectiveRatio:Fr}=Ar,Dr=(Tn?Yt/Fr:Yt*Fr)/j.ONE_EM,co=wo(new j.pointGeometry(er[0],er[1]),ln,er[2]).point,Sr=Ar.signedDistanceFromCamera>0?rs(Dr,Ft,bt.lineOffsetX*Dr,bt.lineOffsetY*Dr,!1,co,Gn,bt,kt,ln,{},jn&&!Tn?Qn:null,Tn&&!!jn,ot.getProjection(),Zn,Tn):null;let _i=!1,eo=!1,Or=!0;if(Sr&&!Ar.occluded){const br=.5*$n*Fr+Wn,xo=new j.pointGeometry(-100,-100),mo=new j.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),vo=new hu,yo=Sr.first,Bo=Sr.last;let Ho=[];for(let _o=yo.path.length-1;_o>=1;_o--)Ho.push(yo.path[_o]);for(let _o=1;_o<Bo.path.length;_o++)Ho.push(Bo.path[_o]);const Go=2.5*br;if(pn){const _o=Ho.map(jn&&!dr?(es,hs)=>{const Ns=Qn(hs<yo.path.length-1?yo.tilePath[yo.path.length-1-hs]:Bo.tilePath[hs-yo.path.length+2]);return es[2]=Ns[2],as(es,pn)}:es=>as(es,pn));Ho=_o.some(es=>es.signedDistanceFromCamera<=0)?[]:_o.map(es=>es.point)}let No=[];if(Ho.length>0){const _o=Ho.map(Ds=>new j.pointGeometry(Ds[0],Ds[1]));let es=1/0,hs=-1/0,Ns=1/0,Vs=-1/0;for(let Ds=0;Ds<_o.length;Ds++)es=Math.min(es,_o[Ds].x),Ns=Math.min(Ns,_o[Ds].y),hs=Math.max(hs,_o[Ds].x),Vs=Math.max(Vs,_o[Ds].y);No=es>=xo.x&&hs<=mo.x&&Ns>=xo.y&&Vs<=mo.y?[_o]:hs<xo.x||es>mo.x||Vs<xo.y||Ns>mo.y?[]:j.clipLine([_o],xo.x,xo.y,mo.x,mo.y)}for(const _o of No){vo.reset(_o,.25*br);let es=0;es=vo.length<=.5*br?1:Math.ceil(vo.paddedLength/Go)+1;for(let hs=0;hs<es;hs++){const Ns=hs/Math.max(es-1,1),Vs=vo.lerp(Ns),Ds=Vs.x+Qs,Ul=Vs.y+Qs;Fn.push(Ds,Ul,br,0);const ou=Ds-br,hp=Ul-br,Ws=Ds+br,_l=Ul+br;if(Or=Or&&this.isOffscreen(ou,hp,Ws,_l),eo=eo||this.isInsideGrid(ou,hp,Ws,_l),!lt&&this.grid.hitTestCircle(Ds,Ul,br,Dn)&&(_i=!0,!vn))return{circles:[],offscreen:!1,collisionDetected:_i,occluded:!1}}}}return{circles:!vn&&_i||!eo?[]:Fn,offscreen:Or,collisionDetected:_i,occluded:Ar.occluded}}queryRenderedSymbols(ot){if(ot.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const lt=[];let bt=1/0,kt=1/0,Ft=-1/0,Yt=-1/0;for(const vn of ot){const Tn=new j.pointGeometry(vn.x+Qs,vn.y+Qs);bt=Math.min(bt,Tn.x),kt=Math.min(kt,Tn.y),Ft=Math.max(Ft,Tn.x),Yt=Math.max(Yt,Tn.y),lt.push(Tn)}const rn=this.grid.query(bt,kt,Ft,Yt).concat(this.ignoredGrid.query(bt,kt,Ft,Yt)),ln={},pn={};for(const vn of rn){const Tn=vn.key;if(ln[Tn.bucketInstanceId]===void 0&&(ln[Tn.bucketInstanceId]={}),ln[Tn.bucketInstanceId][Tn.featureIndex])continue;const Dn=[new j.pointGeometry(vn.x1,vn.y1),new j.pointGeometry(vn.x2,vn.y1),new j.pointGeometry(vn.x2,vn.y2),new j.pointGeometry(vn.x1,vn.y2)];j.polygonIntersectsPolygon(lt,Dn)&&(ln[Tn.bucketInstanceId][Tn.featureIndex]=!0,pn[Tn.bucketInstanceId]===void 0&&(pn[Tn.bucketInstanceId]=[]),pn[Tn.bucketInstanceId].push(Tn.featureIndex))}return pn}insertCollisionBox(ot,lt,bt,kt,Ft){(lt?this.ignoredGrid:this.grid).insert({bucketInstanceId:bt,featureIndex:kt,collisionGroupID:Ft},ot[0],ot[1],ot[2],ot[3])}insertCollisionCircles(ot,lt,bt,kt,Ft){const Yt=lt?this.ignoredGrid:this.grid,rn={bucketInstanceId:bt,featureIndex:kt,collisionGroupID:Ft};for(let ln=0;ln<ot.length;ln+=4)Yt.insertCircle(rn,ot[ln],ot[ln+1],ot[ln+2])}projectAndGetPerspectiveRatio(ot,lt,bt,kt,Ft){const Yt=[lt[0],lt[1],lt[2],1];let rn=!1;if(lt[2]||this.transform.pitch>0){j.transformMat4$1(Yt,Yt,ot);const ln=Ft.name==="globe";this.fogState&&bt&&!ln&&(rn=function(pn,vn,Tn,Dn,$n,Wn){const Zn=Wn.calculateFogTileMatrix($n),Fn=[vn,Tn,Dn];return j.transformMat4(Fn,Fn,Zn),qt(pn,Fn,Wn.pitch,Wn._fov)}(this.fogState,lt[0],lt[1],lt[2],bt.toUnwrapped(),this.transform)>.9)}else Vu(Yt,Yt,ot);return{point:new j.pointGeometry((Yt[0]/Yt[3]+1)/2*this.transform.width+Qs,(-Yt[1]/Yt[3]+1)/2*this.transform.height+Qs),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(Ft)/Yt[3]*.5,1.5),signedDistanceFromCamera:Yt[3],occluded:kt&&Yt[2]>Yt[3]||rn}}isOffscreen(ot,lt,bt,kt){return bt<Qs||ot>=this.screenRightBoundary||kt<Qs||lt>this.screenBottomBoundary}isInsideGrid(ot,lt,bt,kt){return bt>=0&&ot<this.gridRightBoundary&&kt>=0&&lt<this.gridBottomBoundary}getViewportMatrix(){const ot=j.identity([]);return j.translate(ot,ot,[-100,-100,0]),ot}}function rp(dt,ot,lt){const bt=ot.createTileMatrix(dt,dt.worldSize,lt.toUnwrapped());return j.multiply(new Float32Array(16),dt.projMatrix,bt)}function jp(dt,ot,lt){if(ot.projection.name===lt.projection.name)return dt.projMatrix;const bt=lt.clone();return bt.setProjection(ot.projection),rp(bt,ot.getProjection(),dt)}function ga(dt,ot,lt){return ot.name===lt.projection.name?dt.projMatrix:rp(lt,ot,dt)}class Xl{constructor(ot,lt,bt,kt){this.opacity=ot?Math.max(0,Math.min(1,ot.opacity+(ot.placed?lt:-lt))):kt&&bt?1:0,this.placed=bt}isHidden(){return this.opacity===0&&!this.placed}}class Il{constructor(ot,lt,bt,kt,Ft,Yt=!1){this.text=new Xl(ot?ot.text:null,lt,bt,Ft),this.icon=new Xl(ot?ot.icon:null,lt,kt,Ft),this.clipped=Yt}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _s{constructor(ot,lt,bt,kt=!1){this.text=ot,this.icon=lt,this.skipFade=bt,this.clipped=kt}}class zs{constructor(){this.invProjMatrix=j.create(),this.viewportMatrix=j.create(),this.circles=[]}}class Fp{constructor(ot,lt,bt,kt,Ft){this.bucketInstanceId=ot,this.featureIndex=lt,this.sourceLayerIndex=bt,this.bucketIndex=kt,this.tileID=Ft}}class ip{constructor(ot){this.crossSourceCollisions=ot,this.maxGroupID=0,this.collisionGroups={}}get(ot){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[ot]){const lt=++this.maxGroupID;this.collisionGroups[ot]={ID:lt,predicate:bt=>bt.collisionGroupID===lt}}return this.collisionGroups[ot]}}function zt(dt,ot,lt,bt,kt){const{horizontalAlign:Ft,verticalAlign:Yt}=j.getAnchorAlignment(dt),rn=-(Ft-.5)*ot,ln=-(Yt-.5)*lt,pn=j.evaluateVariableOffset(dt,bt);return new j.pointGeometry(rn+pn[0]*kt,ln+pn[1]*kt)}function on(dt,ot,lt,bt,kt){const Ft=new j.pointGeometry(dt,ot);return lt&&Ft._rotate(bt?kt:-kt),Ft}class _n{constructor(ot,lt,bt,kt,Ft){this.transform=ot.clone(),this.projection=ot.projection.name,this.collisionIndex=new Wu(this.transform,Ft),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=lt,this.retainedQueryData={},this.collisionGroups=new ip(bt),this.collisionCircleArrays={},this.prevPlacement=kt,kt&&(kt.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(ot,lt,bt,kt){const Ft=bt.getBucket(lt),Yt=bt.latestFeatureIndex;if(!Ft||!Yt||lt.id!==Ft.layerIds[0])return;const rn=Ft.layers[0].layout,ln=bt.collisionBoxArray,pn=Math.pow(2,this.transform.zoom-bt.tileID.overscaledZ),vn=bt.tileSize/j.EXTENT,Tn=bt.tileID.toUnwrapped();this.transform.setProjection(Ft.projection);const Dn=($n=bt.tileID,Wn=Ft.getProjection(),Zn=this.transform,Wn.name===this.projection?Zn.calculateProjMatrix($n.toUnwrapped()):rp(Zn,Wn,$n));var $n,Wn,Zn;const Fn=rn.get("text-pitch-alignment")==="map",jn=rn.get("text-rotation-alignment")==="map";lt.compileFilter();const Qn=lt.dynamicFilter(),Gn=lt.dynamicFilterNeedsFeature(),or=this.transform.calculatePixelsToTileUnitsMatrix(bt),lr=nm(Dn,bt.tileID.canonical,Fn,jn,this.transform,Ft.getProjection(),or);let er=null;if(Fn){const Fr=tp(Dn,bt.tileID.canonical,Fn,jn,this.transform,Ft.getProjection(),or);er=j.multiply([],this.transform.labelPlaneMatrix,Fr)}let dr=null;Qn&&bt.latestFeatureIndex&&(dr={unwrappedTileID:Tn,dynamicFilter:Qn,dynamicFilterNeedsFeature:Gn,featureIndex:bt.latestFeatureIndex}),this.retainedQueryData[Ft.bucketInstanceId]=new Fp(Ft.bucketInstanceId,Yt,Ft.sourceLayerIndex,Ft.index,bt.tileID);const Ar={bucket:Ft,layout:rn,posMatrix:Dn,textLabelPlaneMatrix:lr,labelToScreenMatrix:er,clippingData:dr,scale:pn,textPixelRatio:vn,holdingForFade:bt.holdingForFade(),collisionBoxArray:ln,partiallyEvaluatedTextSize:j.evaluateSizeForZoom(Ft.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:j.evaluateSizeForZoom(Ft.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ft.sourceID)};if(kt)for(const Fr of Ft.sortKeyRanges){const{sortKey:Dr,symbolInstanceStart:co,symbolInstanceEnd:Sr}=Fr;ot.push({sortKey:Dr,symbolInstanceStart:co,symbolInstanceEnd:Sr,parameters:Ar})}else ot.push({symbolInstanceStart:0,symbolInstanceEnd:Ft.symbolInstances.length,parameters:Ar})}attemptAnchorPlacement(ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn,Fn,jn,Qn){const Gn=[Dn.textOffset0,Dn.textOffset1],or=zt(ot,bt,kt,Gn,Ft),lr=this.collisionIndex.placeCollisionBox(Wn,Ft,lt,on(or.x,or.y,Yt,rn,this.transform.angle),Tn,ln,pn,vn.predicate);if(Fn){const er=Wn.getSymbolInstanceIconSize(Qn,this.transform.zoom,Dn.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Wn,er,Fn,on(or.x,or.y,Yt,rn,this.transform.angle),Tn,ln,pn,vn.predicate).box.length===0)return}if(lr.box.length>0){let er;return this.prevPlacement&&this.prevPlacement.variableOffsets[Dn.crossTileID]&&this.prevPlacement.placements[Dn.crossTileID]&&this.prevPlacement.placements[Dn.crossTileID].text&&(er=this.prevPlacement.variableOffsets[Dn.crossTileID].anchor),this.variableOffsets[Dn.crossTileID]={textOffset:Gn,width:bt,height:kt,anchor:ot,textScale:Ft,prevAnchor:er},this.markUsedJustification(Wn,ot,Dn,Zn),Wn.allowVerticalPlacement&&(this.markUsedOrientation(Wn,Zn,Dn),this.placedOrientations[Dn.crossTileID]=Zn),{shift:or,placedGlyphBoxes:lr}}}placeLayerBucketPart(ot,lt,bt,kt){const{bucket:Ft,layout:Yt,posMatrix:rn,textLabelPlaneMatrix:ln,labelToScreenMatrix:pn,clippingData:vn,textPixelRatio:Tn,holdingForFade:Dn,collisionBoxArray:$n,partiallyEvaluatedTextSize:Wn,partiallyEvaluatedIconSize:Zn,collisionGroup:Fn}=ot.parameters,jn=Yt.get("text-optional"),Qn=Yt.get("icon-optional"),Gn=Yt.get("text-allow-overlap"),or=Yt.get("icon-allow-overlap"),lr=Yt.get("text-rotation-alignment")==="map",er=Yt.get("text-pitch-alignment")==="map",dr=Yt.get("icon-text-fit")!=="none",Ar=Yt.get("symbol-z-order")==="viewport-y";this.transform.setProjection(Ft.projection);let Fr=Gn&&(or||!Ft.hasIconData()||Qn),Dr=or&&(Gn||!Ft.hasTextData()||jn);!Ft.collisionArrays&&$n&&Ft.deserializeCollisionBoxes($n),bt&&kt&&Ft.updateCollisionDebugBuffers(this.transform.zoom,$n);const co=(Sr,_i,eo)=>{if(vn){const Ws={zoom:this.transform.zoom,pitch:this.transform.pitch};let _l=null;if(vn.dynamicFilterNeedsFeature){const Ls=this.retainedQueryData[Ft.bucketInstanceId];_l=vn.featureIndex.loadFeature({featureIndex:Sr.featureIndex,bucketIndex:Ls.bucketIndex,sourceLayerIndex:Ls.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,vn.dynamicFilter)(Ws,_l,this.retainedQueryData[Ft.bucketInstanceId].tileID.canonical,new j.pointGeometry(Sr.tileAnchorX,Sr.tileAnchorY),this.transform.calculateDistanceTileData(vn.unwrappedTileID)))return this.placements[Sr.crossTileID]=new _s(!1,!1,!1,!0),void(lt[Sr.crossTileID]=!0)}if(lt[Sr.crossTileID])return;if(Dn)return void(this.placements[Sr.crossTileID]=new _s(!1,!1,!1));let Or=!1,br=!1,xo=!0,mo=!1,vo=!1,yo=null,Bo={box:null,offscreen:null,occluded:null},Ho={box:null,offscreen:null,occluded:null},Go=null,No=null,_o=null,es=0,hs=0,Ns=0;eo.textFeatureIndex?es=eo.textFeatureIndex:Sr.useRuntimeCollisionCircles&&(es=Sr.featureIndex),eo.verticalTextFeatureIndex&&(hs=eo.verticalTextFeatureIndex);const Vs=Ws=>{Ws.tileID=this.retainedQueryData[Ft.bucketInstanceId].tileID,(this.transform.elevation||Ws.elevation)&&(Ws.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[Ft.bucketInstanceId].tileID,Ws.tileAnchorX,Ws.tileAnchorY):0)},Ds=eo.textBox;if(Ds){Vs(Ds);const Ws=Ls=>{let Ol=j.WritingMode.horizontal;if(Ft.allowVerticalPlacement&&!Ls&&this.prevPlacement){const su=this.prevPlacement.placedOrientations[Sr.crossTileID];su&&(this.placedOrientations[Sr.crossTileID]=su,Ol=su,this.markUsedOrientation(Ft,Ol,Sr))}return Ol},_l=(Ls,Ol)=>{if(Ft.allowVerticalPlacement&&Sr.numVerticalGlyphVertices>0&&eo.verticalTextBox){for(const su of Ft.writingModes)if(su===j.WritingMode.vertical?(Bo=Ol(),Ho=Bo):Bo=Ls(),Bo&&Bo.box&&Bo.box.length)break}else Bo=Ls()};if(Yt.get("text-variable-anchor")){let Ls=Yt.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Sr.crossTileID]){const $s=this.prevPlacement.variableOffsets[Sr.crossTileID];Ls.indexOf($s.anchor)>0&&(Ls=Ls.filter(Ru=>Ru!==$s.anchor),Ls.unshift($s.anchor))}const Ol=($s,Ru,qp)=>{const Zu=Ft.getSymbolInstanceTextSize(Wn,Sr,this.transform.zoom,_i),Jl=($s.x2-$s.x1)*Zu+2*$s.padding,uy=($s.y2-$s.y1)*Zu+2*$s.padding,Cp=dr&&!or?Ru:null;Cp&&Vs(Cp);let Xo={box:[],offscreen:!1,occluded:!1};const Rp=Gn?2*Ls.length:Ls.length;for(let dm=0;dm<Rp;++dm){const _u=this.attemptAnchorPlacement(Ls[dm%Ls.length],$s,Jl,uy,Zu,lr,er,Tn,rn,Fn,dm>=Ls.length,Sr,_i,Ft,qp,Cp,Wn,Zn);if(_u&&(Xo=_u.placedGlyphBoxes,Xo&&Xo.box&&Xo.box.length)){Or=!0,yo=_u.shift;break}}return Xo};_l(()=>Ol(Ds,eo.iconBox,j.WritingMode.horizontal),()=>{const $s=eo.verticalTextBox;return $s&&Vs($s),Ft.allowVerticalPlacement&&!(Bo&&Bo.box&&Bo.box.length)&&Sr.numVerticalGlyphVertices>0&&$s?Ol($s,eo.verticalIconBox,j.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Bo&&(Or=Bo.box,xo=Bo.offscreen,mo=Bo.occluded);const su=Ws(Bo&&Bo.box);if(!Or&&this.prevPlacement){const $s=this.prevPlacement.variableOffsets[Sr.crossTileID];$s&&(this.variableOffsets[Sr.crossTileID]=$s,this.markUsedJustification(Ft,$s.anchor,Sr,su))}}else{const Ls=(Ol,su)=>{const $s=Ft.getSymbolInstanceTextSize(Wn,Sr,this.transform.zoom,_i),Ru=this.collisionIndex.placeCollisionBox(Ft,$s,Ol,new j.pointGeometry(0,0),Gn,Tn,rn,Fn.predicate);return Ru&&Ru.box&&Ru.box.length&&(this.markUsedOrientation(Ft,su,Sr),this.placedOrientations[Sr.crossTileID]=su),Ru};_l(()=>Ls(Ds,j.WritingMode.horizontal),()=>{const Ol=eo.verticalTextBox;return Ft.allowVerticalPlacement&&Sr.numVerticalGlyphVertices>0&&Ol?(Vs(Ol),Ls(Ol,j.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Ws(Bo&&Bo.box&&Bo.box.length)}}if(Go=Bo,Or=Go&&Go.box&&Go.box.length>0,xo=Go&&Go.offscreen,mo=Go&&Go.occluded,Sr.useRuntimeCollisionCircles){const Ws=Ft.text.placedSymbolArray.get(Sr.centerJustifiedTextSymbolIndex>=0?Sr.centerJustifiedTextSymbolIndex:Sr.verticalPlacedTextSymbolIndex),_l=j.evaluateSizeForFeature(Ft.textSizeData,Wn,Ws),Ls=Yt.get("text-padding");No=this.collisionIndex.placeCollisionCircles(Ft,Gn,Ws,Ft.lineVertexArray,Ft.glyphOffsetArray,_l,rn,ln,pn,bt,er,Fn.predicate,Sr.collisionCircleDiameter*_l/j.ONE_EM,Ls,this.retainedQueryData[Ft.bucketInstanceId].tileID),Or=Gn||No.circles.length>0&&!No.collisionDetected,xo=xo&&No.offscreen,mo=No.occluded}if(eo.iconFeatureIndex&&(Ns=eo.iconFeatureIndex),eo.iconBox){const Ws=_l=>{Vs(_l);const Ls=dr&&yo?on(yo.x,yo.y,lr,er,this.transform.angle):new j.pointGeometry(0,0),Ol=Ft.getSymbolInstanceIconSize(Zn,this.transform.zoom,Sr.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(Ft,Ol,_l,Ls,or,Tn,rn,Fn.predicate)};Ho&&Ho.box&&Ho.box.length&&eo.verticalIconBox?(_o=Ws(eo.verticalIconBox),br=_o.box.length>0):(_o=Ws(eo.iconBox),br=_o.box.length>0),xo=xo&&_o.offscreen,vo=_o.occluded}const Ul=jn||Sr.numHorizontalGlyphVertices===0&&Sr.numVerticalGlyphVertices===0,ou=Qn||Sr.numIconVertices===0;if(Ul||ou?ou?Ul||(br=br&&Or):Or=br&&Or:br=Or=br&&Or,Or&&Go&&Go.box&&this.collisionIndex.insertCollisionBox(Go.box,Yt.get("text-ignore-placement"),Ft.bucketInstanceId,Ho&&Ho.box&&hs?hs:es,Fn.ID),br&&_o&&this.collisionIndex.insertCollisionBox(_o.box,Yt.get("icon-ignore-placement"),Ft.bucketInstanceId,Ns,Fn.ID),No&&(Or&&this.collisionIndex.insertCollisionCircles(No.circles,Yt.get("text-ignore-placement"),Ft.bucketInstanceId,es,Fn.ID),bt)){const Ws=Ft.bucketInstanceId;let _l=this.collisionCircleArrays[Ws];_l===void 0&&(_l=this.collisionCircleArrays[Ws]=new zs);for(let Ls=0;Ls<No.circles.length;Ls+=4)_l.circles.push(No.circles[Ls+0]),_l.circles.push(No.circles[Ls+1]),_l.circles.push(No.circles[Ls+2]),_l.circles.push(No.collisionDetected?1:0)}const hp=Ft.projection.name!=="globe";Fr=Fr&&(hp||!mo),Dr=Dr&&(hp||!vo),this.placements[Sr.crossTileID]=new _s(Or||Fr,br||Dr,xo||Ft.justReloaded),lt[Sr.crossTileID]=!0};if(Ar){const Sr=Ft.getSortedSymbolIndexes(this.transform.angle);for(let _i=Sr.length-1;_i>=0;--_i){const eo=Sr[_i];co(Ft.symbolInstances.get(eo),eo,Ft.collisionArrays[eo])}}else for(let Sr=ot.symbolInstanceStart;Sr<ot.symbolInstanceEnd;Sr++)co(Ft.symbolInstances.get(Sr),Sr,Ft.collisionArrays[Sr]);if(bt&&Ft.bucketInstanceId in this.collisionCircleArrays){const Sr=this.collisionCircleArrays[Ft.bucketInstanceId];j.invert(Sr.invProjMatrix,rn),Sr.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ft.justReloaded=!1}markUsedJustification(ot,lt,bt,kt){let Ft;Ft=kt===j.WritingMode.vertical?bt.verticalPlacedTextSymbolIndex:{left:bt.leftJustifiedTextSymbolIndex,center:bt.centerJustifiedTextSymbolIndex,right:bt.rightJustifiedTextSymbolIndex}[j.getAnchorJustification(lt)];const Yt=[bt.leftJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.rightJustifiedTextSymbolIndex,bt.verticalPlacedTextSymbolIndex];for(const rn of Yt)rn>=0&&(ot.text.placedSymbolArray.get(rn).crossTileID=Ft>=0&&rn!==Ft?0:bt.crossTileID)}markUsedOrientation(ot,lt,bt){const kt=lt===j.WritingMode.horizontal||lt===j.WritingMode.horizontalOnly?lt:0,Ft=lt===j.WritingMode.vertical?lt:0,Yt=[bt.leftJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.rightJustifiedTextSymbolIndex].filter(rn=>rn!==-1);for(const rn of Yt)ot.text.placedSymbolArray.get(rn).placedOrientation=kt;bt.verticalPlacedTextSymbolIndex!==-1&&(ot.text.placedSymbolArray.get(bt.verticalPlacedTextSymbolIndex).placedOrientation=Ft)}commit(ot){this.commitTime=ot,this.zoomAtLastRecencyCheck=this.transform.zoom;const lt=this.prevPlacement;let bt=!1;this.prevZoomAdjustment=lt?lt.zoomAdjustment(this.transform.zoom):0;const kt=lt?lt.symbolFadeChange(ot):1,Ft=lt?lt.opacities:{},Yt=lt?lt.variableOffsets:{},rn=lt?lt.placedOrientations:{};for(const ln in this.placements){const pn=this.placements[ln],vn=Ft[ln];vn?(this.opacities[ln]=new Il(vn,kt,pn.text,pn.icon,null,pn.clipped),bt=bt||pn.text!==vn.text.placed||pn.icon!==vn.icon.placed):(this.opacities[ln]=new Il(null,kt,pn.text,pn.icon,pn.skipFade,pn.clipped),bt=bt||pn.text||pn.icon)}for(const ln in Ft){const pn=Ft[ln];if(!this.opacities[ln]){const vn=new Il(pn,kt,!1,!1);vn.isHidden()||(this.opacities[ln]=vn,bt=bt||pn.text.placed||pn.icon.placed)}}for(const ln in Yt)this.variableOffsets[ln]||!this.opacities[ln]||this.opacities[ln].isHidden()||(this.variableOffsets[ln]=Yt[ln]);for(const ln in rn)this.placedOrientations[ln]||!this.opacities[ln]||this.opacities[ln].isHidden()||(this.placedOrientations[ln]=rn[ln]);bt?this.lastPlacementChangeTime=ot:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=lt?lt.lastPlacementChangeTime:ot)}updateLayerOpacities(ot,lt){const bt={};for(const kt of lt){const Ft=kt.getBucket(ot);Ft&&kt.latestFeatureIndex&&ot.id===Ft.layerIds[0]&&this.updateBucketOpacities(Ft,bt,kt.collisionBoxArray)}}updateBucketOpacities(ot,lt,bt){ot.hasTextData()&&ot.text.opacityVertexArray.clear(),ot.hasIconData()&&ot.icon.opacityVertexArray.clear(),ot.hasIconCollisionBoxData()&&ot.iconCollisionBox.collisionVertexArray.clear(),ot.hasTextCollisionBoxData()&&ot.textCollisionBox.collisionVertexArray.clear();const kt=ot.layers[0].layout,Ft=!!ot.layers[0].dynamicFilter(),Yt=new Il(null,0,!1,!1,!0),rn=kt.get("text-allow-overlap"),ln=kt.get("icon-allow-overlap"),pn=kt.get("text-variable-anchor"),vn=kt.get("text-rotation-alignment")==="map",Tn=kt.get("text-pitch-alignment")==="map",Dn=kt.get("icon-text-fit")!=="none",$n=new Il(null,0,rn&&(ln||!ot.hasIconData()||kt.get("icon-optional")),ln&&(rn||!ot.hasTextData()||kt.get("text-optional")),!0);!ot.collisionArrays&&bt&&(ot.hasIconCollisionBoxData()||ot.hasTextCollisionBoxData())&&ot.deserializeCollisionBoxes(bt);const Wn=(Fn,jn,Qn)=>{for(let Gn=0;Gn<jn/4;Gn++)Fn.opacityVertexArray.emplaceBack(Qn)};let Zn=0;for(let Fn=0;Fn<ot.symbolInstances.length;Fn++){const jn=ot.symbolInstances.get(Fn),{numHorizontalGlyphVertices:Qn,numVerticalGlyphVertices:Gn,crossTileID:or}=jn;let lr=this.opacities[or];lt[or]?lr=Yt:lr||(lr=$n,this.opacities[or]=lr),lt[or]=!0;const er=Qn>0||Gn>0,dr=jn.numIconVertices>0,Ar=this.placedOrientations[jn.crossTileID],Fr=Ar===j.WritingMode.vertical,Dr=Ar===j.WritingMode.horizontal||Ar===j.WritingMode.horizontalOnly;if(!er&&!dr||lr.isHidden()||Zn++,er){const co=jo(lr.text);Wn(ot.text,Qn,Fr?bo:co),Wn(ot.text,Gn,Dr?bo:co);const Sr=lr.text.isHidden();[jn.rightJustifiedTextSymbolIndex,jn.centerJustifiedTextSymbolIndex,jn.leftJustifiedTextSymbolIndex].forEach(Or=>{Or>=0&&(ot.text.placedSymbolArray.get(Or).hidden=Sr||Fr?1:0)}),jn.verticalPlacedTextSymbolIndex>=0&&(ot.text.placedSymbolArray.get(jn.verticalPlacedTextSymbolIndex).hidden=Sr||Dr?1:0);const _i=this.variableOffsets[jn.crossTileID];_i&&this.markUsedJustification(ot,_i.anchor,jn,Ar);const eo=this.placedOrientations[jn.crossTileID];eo&&(this.markUsedJustification(ot,"left",jn,eo),this.markUsedOrientation(ot,eo,jn))}if(dr){const co=jo(lr.icon);jn.placedIconSymbolIndex>=0&&(Wn(ot.icon,jn.numIconVertices,Fr?bo:co),ot.icon.placedSymbolArray.get(jn.placedIconSymbolIndex).hidden=lr.icon.isHidden()),jn.verticalPlacedIconSymbolIndex>=0&&(Wn(ot.icon,jn.numVerticalIconVertices,Dr?bo:co),ot.icon.placedSymbolArray.get(jn.verticalPlacedIconSymbolIndex).hidden=lr.icon.isHidden())}if(ot.hasIconCollisionBoxData()||ot.hasTextCollisionBoxData()){const co=ot.collisionArrays[Fn];if(co){let Sr=new j.pointGeometry(0,0),_i=!0;if(co.textBox||co.verticalTextBox){if(pn){const Or=this.variableOffsets[or];Or?(Sr=zt(Or.anchor,Or.width,Or.height,Or.textOffset,Or.textScale),vn&&Sr._rotate(Tn?this.transform.angle:-this.transform.angle)):_i=!1}Ft&&(_i=!lr.clipped),co.textBox&&Rn(ot.textCollisionBox.collisionVertexArray,lr.text.placed,!_i||Fr,Sr.x,Sr.y),co.verticalTextBox&&Rn(ot.textCollisionBox.collisionVertexArray,lr.text.placed,!_i||Dr,Sr.x,Sr.y)}const eo=_i&&Boolean(!Dr&&co.verticalIconBox);co.iconBox&&Rn(ot.iconCollisionBox.collisionVertexArray,lr.icon.placed,eo,Dn?Sr.x:0,Dn?Sr.y:0),co.verticalIconBox&&Rn(ot.iconCollisionBox.collisionVertexArray,lr.icon.placed,!eo,Dn?Sr.x:0,Dn?Sr.y:0)}}}if(ot.fullyClipped=Zn===0,ot.sortFeatures(this.transform.angle),this.retainedQueryData[ot.bucketInstanceId]&&(this.retainedQueryData[ot.bucketInstanceId].featureSortOrder=ot.featureSortOrder),ot.hasTextData()&&ot.text.opacityVertexBuffer&&ot.text.opacityVertexBuffer.updateData(ot.text.opacityVertexArray),ot.hasIconData()&&ot.icon.opacityVertexBuffer&&ot.icon.opacityVertexBuffer.updateData(ot.icon.opacityVertexArray),ot.hasIconCollisionBoxData()&&ot.iconCollisionBox.collisionVertexBuffer&&ot.iconCollisionBox.collisionVertexBuffer.updateData(ot.iconCollisionBox.collisionVertexArray),ot.hasTextCollisionBoxData()&&ot.textCollisionBox.collisionVertexBuffer&&ot.textCollisionBox.collisionVertexBuffer.updateData(ot.textCollisionBox.collisionVertexArray),ot.bucketInstanceId in this.collisionCircleArrays){const Fn=this.collisionCircleArrays[ot.bucketInstanceId];ot.placementInvProjMatrix=Fn.invProjMatrix,ot.placementViewportMatrix=Fn.viewportMatrix,ot.collisionCircleArray=Fn.circles,delete this.collisionCircleArrays[ot.bucketInstanceId]}}symbolFadeChange(ot){return this.fadeDuration===0?1:(ot-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(ot){return Math.max(0,(this.transform.zoom-ot)/1.5)}hasTransitions(ot){return this.stale||ot-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(ot,lt){const bt=this.zoomAtLastRecencyCheck===lt?1-this.zoomAdjustment(lt):1;return this.zoomAtLastRecencyCheck=lt,this.commitTime+this.fadeDuration*bt>ot}setStale(){this.stale=!0}}function Rn(dt,ot,lt,bt,kt){dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0),dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0),dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0),dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0)}const Nn=Math.pow(2,25),rr=Math.pow(2,24),Ln=Math.pow(2,17),Xn=Math.pow(2,16),Er=Math.pow(2,9),Cr=Math.pow(2,8),Qr=Math.pow(2,1);function jo(dt){if(dt.opacity===0&&!dt.placed)return 0;if(dt.opacity===1&&dt.placed)return 4294967295;const ot=dt.placed?1:0,lt=Math.floor(127*dt.opacity);return lt*Nn+ot*rr+lt*Ln+ot*Xn+lt*Er+ot*Cr+lt*Qr+ot}const bo=0;class Mo{constructor(ot){this._sortAcrossTiles=ot.layout.get("symbol-z-order")!=="viewport-y"&&ot.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(ot,lt,bt,kt,Ft){const Yt=this._bucketParts;for(;this._currentTileIndex<ot.length;)if(lt.getBucketParts(Yt,kt,ot[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Ft())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Yt.sort((rn,ln)=>rn.sortKey-ln.sortKey));this._currentPartIndex<Yt.length;){const rn=Yt[this._currentPartIndex];if(lt.placeLayerBucketPart(rn,this._seenCrossTileIDs,bt,rn.symbolInstanceStart===0),this._currentPartIndex++,Ft())return!0}return!1}}class Ko{constructor(ot,lt,bt,kt,Ft,Yt,rn,ln){this.placement=new _n(ot,Ft,Yt,rn,ln),this._currentPlacementIndex=lt.length-1,this._forceFullPlacement=bt,this._showCollisionBoxes=kt,this._done=!1}isDone(){return this._done}continuePlacement(ot,lt,bt){const kt=j.exported.now(),Ft=()=>{const Yt=j.exported.now()-kt;return!this._forceFullPlacement&&Yt>2};for(;this._currentPlacementIndex>=0;){const Yt=lt[ot[this._currentPlacementIndex]],rn=this.placement.collisionIndex.transform.zoom;if(Yt.type==="symbol"&&(!Yt.minzoom||Yt.minzoom<=rn)&&(!Yt.maxzoom||Yt.maxzoom>rn)){if(this._inProgressLayer||(this._inProgressLayer=new Mo(Yt)),this._inProgressLayer.continuePlacement(bt[Yt.source],this.placement,this._showCollisionBoxes,Yt,Ft))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(ot){return this.placement.commit(ot),this.placement}}const ns=512/j.EXTENT/2;class Io{constructor(ot,lt,bt){this.tileID=ot,this.indexedSymbolInstances={},this.bucketInstanceId=bt;for(let kt=0;kt<lt.length;kt++){const Ft=lt.get(kt),Yt=Ft.key;this.indexedSymbolInstances[Yt]||(this.indexedSymbolInstances[Yt]=[]),this.indexedSymbolInstances[Yt].push({crossTileID:Ft.crossTileID,coord:this.getScaledCoordinates(Ft,ot)})}}getScaledCoordinates(ot,lt){const bt=ns/Math.pow(2,lt.canonical.z-this.tileID.canonical.z);return{x:Math.floor((lt.canonical.x*j.EXTENT+ot.tileAnchorX)*bt),y:Math.floor((lt.canonical.y*j.EXTENT+ot.tileAnchorY)*bt)}}findMatches(ot,lt,bt){const kt=this.tileID.canonical.z<lt.canonical.z?1:Math.pow(2,this.tileID.canonical.z-lt.canonical.z);for(let Ft=0;Ft<ot.length;Ft++){const Yt=ot.get(Ft);if(Yt.crossTileID)continue;const rn=this.indexedSymbolInstances[Yt.key];if(!rn)continue;const ln=this.getScaledCoordinates(Yt,lt);for(const pn of rn)if(Math.abs(pn.coord.x-ln.x)<=kt&&Math.abs(pn.coord.y-ln.y)<=kt&&!bt[pn.crossTileID]){bt[pn.crossTileID]=!0,Yt.crossTileID=pn.crossTileID;break}}}}class Cl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class iu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(ot){const lt=Math.round((ot-this.lng)/360);if(lt!==0)for(const bt in this.indexes){const kt=this.indexes[bt],Ft={};for(const Yt in kt){const rn=kt[Yt];rn.tileID=rn.tileID.unwrapTo(rn.tileID.wrap+lt),Ft[rn.tileID.key]=rn}this.indexes[bt]=Ft}this.lng=ot}addBucket(ot,lt,bt){if(this.indexes[ot.overscaledZ]&&this.indexes[ot.overscaledZ][ot.key]){if(this.indexes[ot.overscaledZ][ot.key].bucketInstanceId===lt.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(ot.overscaledZ,this.indexes[ot.overscaledZ][ot.key])}for(let Ft=0;Ft<lt.symbolInstances.length;Ft++)lt.symbolInstances.get(Ft).crossTileID=0;this.usedCrossTileIDs[ot.overscaledZ]||(this.usedCrossTileIDs[ot.overscaledZ]={});const kt=this.usedCrossTileIDs[ot.overscaledZ];for(const Ft in this.indexes){const Yt=this.indexes[Ft];if(Number(Ft)>ot.overscaledZ)for(const rn in Yt){const ln=Yt[rn];ln.tileID.isChildOf(ot)&&ln.findMatches(lt.symbolInstances,ot,kt)}else{const rn=Yt[ot.scaledTo(Number(Ft)).key];rn&&rn.findMatches(lt.symbolInstances,ot,kt)}}for(let Ft=0;Ft<lt.symbolInstances.length;Ft++){const Yt=lt.symbolInstances.get(Ft);Yt.crossTileID||(Yt.crossTileID=bt.generate(),kt[Yt.crossTileID]=!0)}return this.indexes[ot.overscaledZ]===void 0&&(this.indexes[ot.overscaledZ]={}),this.indexes[ot.overscaledZ][ot.key]=new Io(ot,lt.symbolInstances,lt.bucketInstanceId),!0}removeBucketCrossTileIDs(ot,lt){for(const bt in lt.indexedSymbolInstances)for(const kt of lt.indexedSymbolInstances[bt])delete this.usedCrossTileIDs[ot][kt.crossTileID]}removeStaleBuckets(ot){let lt=!1;for(const bt in this.indexes){const kt=this.indexes[bt];for(const Ft in kt)ot[kt[Ft].bucketInstanceId]||(this.removeBucketCrossTileIDs(bt,kt[Ft]),delete kt[Ft],lt=!0)}return lt}}class Rm{constructor(){this.layerIndexes={},this.crossTileIDs=new Cl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(ot,lt,bt,kt){let Ft=this.layerIndexes[ot.id];Ft===void 0&&(Ft=this.layerIndexes[ot.id]=new iu);let Yt=!1;const rn={};kt.name!=="globe"&&Ft.handleWrapJump(bt);for(const ln of lt){const pn=ln.getBucket(ot);pn&&ot.id===pn.layerIds[0]&&(pn.bucketInstanceId||(pn.bucketInstanceId=++this.maxBucketInstanceId),Ft.addBucket(ln.tileID,pn,this.crossTileIDs)&&(Yt=!0),rn[pn.bucketInstanceId]=!0)}return Ft.removeStaleBuckets(rn)&&(Yt=!0),Yt}pruneUnusedLayers(ot){const lt={};ot.forEach(bt=>{lt[bt]=!0});for(const bt in this.layerIndexes)lt[bt]||delete this.layerIndexes[bt]}}const Gu=(dt,ot)=>j.emitValidationErrors(dt,ot&&ot.filter(lt=>lt.identifier!=="source.canvas")),e_=j.pick(Eo,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Tl=j.pick(Eo,["setCenter","setZoom","setBearing","setPitch"]),Ey={version:8,layers:[],sources:{}},_p={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class op extends j.Evented{constructor(ot,lt={}){super(),this.map=ot,this.dispatcher=new un(zo(),this),this.imageManager=new Nt,this.imageManager.setEventedParent(this),this.glyphManager=new j.GlyphManager(ot._requestManager,lt.localFontFamily?j.LocalGlyphMode.all:lt.localIdeographFontFamily?j.LocalGlyphMode.ideographs:j.LocalGlyphMode.none,lt.localFontFamily||lt.localIdeographFontFamily),this.crossTileSymbolIndex=new Rm,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new j.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",j.getReferrer());const bt=this;this._rtlTextPluginCallback=op.registerForPluginStateChange(kt=>{bt.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:kt.pluginStatus,pluginURL:kt.pluginURL},(Ft,Yt)=>{if(j.triggerPluginCompletionEvent(Ft),Yt&&Yt.every(rn=>rn))for(const rn in bt._sourceCaches){const ln=bt._sourceCaches[rn],pn=ln.getSource().type;pn!=="vector"&&pn!=="geojson"||ln.reload()}})}),this.on("data",kt=>{if(kt.dataType!=="source"||kt.sourceDataType!=="metadata")return;const Ft=this.getSource(kt.sourceId);if(Ft&&Ft.vectorLayerIds)for(const Yt in this._layers){const rn=this._layers[Yt];rn.source===Ft.id&&this._validateLayer(rn)}})}loadURL(ot,lt={}){this.fire(new j.Event("dataloading",{dataType:"style"}));const bt=typeof lt.validate=="boolean"?lt.validate:!j.isMapboxURL(ot);ot=this.map._requestManager.normalizeStyleURL(ot,lt.accessToken);const kt=this.map._requestManager.transformRequest(ot,j.ResourceType.Style);this._request=j.getJSON(kt,(Ft,Yt)=>{this._request=null,Ft?this.fire(new j.ErrorEvent(Ft)):Yt&&this._load(Yt,bt)})}loadJSON(ot,lt={}){this.fire(new j.Event("dataloading",{dataType:"style"})),this._request=j.exported.frame(()=>{this._request=null,this._load(ot,lt.validate!==!1)})}loadEmpty(){this.fire(new j.Event("dataloading",{dataType:"style"})),this._load(Ey,!1)}_updateLayerCount(ot,lt){const bt=lt?1:-1;ot.is3D()&&(this._num3DLayers+=bt),ot.type==="circle"&&(this._numCircleLayers+=bt),ot.type==="symbol"&&(this._numSymbolLayers+=bt)}_load(ot,lt){if(lt&&Gu(this,j.validateStyle(ot)))return;this._loaded=!0,this.stylesheet=j.clone$1(ot),this._updateMapProjection();for(const kt in ot.sources)this.addSource(kt,ot.sources[kt],{validate:!1});this._changed=!1,ot.sprite?this._loadSprite(ot.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(ot.glyphs);const bt=ms(this.stylesheet.layers);this._order=bt.map(kt=>kt.id),this._layers={},this._serializedLayers={};for(let kt of bt)kt=j.createStyleLayer(kt),kt.setEventedParent(this,{layer:{id:kt.id}}),this._layers[kt.id]=kt,this._serializedLayers[kt.id]=kt.serialize(),this._updateLayerCount(kt,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Kt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new j.Event("data",{dataType:"style"})),this.fire(new j.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(ot){ot?this.stylesheet.projection=ot:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(ot){this._spriteRequest=function(lt,bt,kt){let Ft,Yt,rn;const ln=j.exported.devicePixelRatio>1?"@2x":"";let pn=j.getJSON(bt.transformRequest(bt.normalizeSpriteURL(lt,ln,".json"),j.ResourceType.SpriteJSON),(Dn,$n)=>{pn=null,rn||(rn=Dn,Ft=$n,Tn())}),vn=j.getImage(bt.transformRequest(bt.normalizeSpriteURL(lt,ln,".png"),j.ResourceType.SpriteImage),(Dn,$n)=>{vn=null,rn||(rn=Dn,Yt=$n,Tn())});function Tn(){if(rn)kt(rn);else if(Ft&&Yt){const Dn=j.exported.getImageData(Yt),$n={};for(const Wn in Ft){const{width:Zn,height:Fn,x:jn,y:Qn,sdf:Gn,pixelRatio:or,stretchX:lr,stretchY:er,content:dr}=Ft[Wn],Ar=new j.RGBAImage({width:Zn,height:Fn});j.RGBAImage.copy(Dn,Ar,{x:jn,y:Qn},{x:0,y:0},{width:Zn,height:Fn}),$n[Wn]={data:Ar,pixelRatio:or,sdf:Gn,stretchX:lr,stretchY:er,content:dr}}kt(null,$n)}}return{cancel(){pn&&(pn.cancel(),pn=null),vn&&(vn.cancel(),vn=null)}}}(ot,this.map._requestManager,(lt,bt)=>{if(this._spriteRequest=null,lt)this.fire(new j.ErrorEvent(lt));else if(bt)for(const kt in bt)this.imageManager.addImage(kt,bt[kt]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new j.Event("data",{dataType:"style"}))})}_validateLayer(ot){const lt=this.getSource(ot.source);if(!lt)return;const bt=ot.sourceLayer;bt&&(lt.type==="geojson"||lt.vectorLayerIds&&lt.vectorLayerIds.indexOf(bt)===-1)&&this.fire(new j.ErrorEvent(new Error(`Source layer "${bt}" does not exist on source "${lt.id}" as specified by style layer "${ot.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const ot in this._sourceCaches)if(!this._sourceCaches[ot].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(ot){const lt=[];for(const bt of ot){const kt=this._layers[bt];kt.type!=="custom"&&lt.push(kt.serialize())}return lt}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const ot in this._sourceCaches)if(this._sourceCaches[ot].hasTransition())return!0;for(const ot in this._layers)if(this._layers[ot].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(ot){return!!this.terrain&&_p[ot.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(ot){if(!this._loaded)return;const lt=this._changed;if(this._changed){const kt=Object.keys(this._updatedLayers),Ft=Object.keys(this._removedLayers);(kt.length||Ft.length)&&this._updateWorkerLayers(kt,Ft);for(const Yt in this._updatedSources){const rn=this._updatedSources[Yt];rn==="reload"?this._reloadSource(Yt):rn==="clear"&&this._clearSource(Yt)}this._updateTilesForChangedImages();for(const Yt in this._updatedPaintProps)this._layers[Yt].updateTransitions(ot);this.light.updateTransitions(ot),this.fog&&this.fog.updateTransitions(ot),this._resetUpdates()}const bt={};for(const kt in this._sourceCaches){const Ft=this._sourceCaches[kt];bt[kt]=Ft.used,Ft.used=!1}for(const kt of this._order){const Ft=this._layers[kt];if(Ft.recalculate(ot,this._availableImages),!Ft.isHidden(ot.zoom)){const rn=this._getLayerSourceCache(Ft);rn&&(rn.used=!0)}const Yt=this.map.painter;if(Yt){const rn=Ft.getProgramIds();if(!rn)continue;const ln=Ft.getProgramConfiguration(ot.zoom);for(const pn of rn)Yt.useProgram(pn,ln)}}for(const kt in bt){const Ft=this._sourceCaches[kt];bt[kt]!==Ft.used&&Ft.getSource().fire(new j.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ft.getSource().id}))}this.light.recalculate(ot),this.terrain&&this.terrain.recalculate(ot),this.fog&&this.fog.recalculate(ot),this.z=ot.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),lt&&this.fire(new j.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const ot=Object.keys(this._changedImages);if(ot.length){for(const lt in this._sourceCaches)this._sourceCaches[lt].reloadTilesForDependencies(["icons","patterns"],ot);this._changedImages={}}}_updateWorkerLayers(ot,lt){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(ot),removedIds:lt})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(ot){if(this._checkLoaded(),Gu(this,j.validateStyle(ot)))return!1;(ot=j.clone$1(ot)).layers=ms(ot.layers);const lt=function(kt,Ft){if(!kt)return[{command:Eo.setStyle,args:[Ft]}];let Yt=[];try{if(!it(kt.version,Ft.version))return[{command:Eo.setStyle,args:[Ft]}];it(kt.center,Ft.center)||Yt.push({command:Eo.setCenter,args:[Ft.center]}),it(kt.zoom,Ft.zoom)||Yt.push({command:Eo.setZoom,args:[Ft.zoom]}),it(kt.bearing,Ft.bearing)||Yt.push({command:Eo.setBearing,args:[Ft.bearing]}),it(kt.pitch,Ft.pitch)||Yt.push({command:Eo.setPitch,args:[Ft.pitch]}),it(kt.sprite,Ft.sprite)||Yt.push({command:Eo.setSprite,args:[Ft.sprite]}),it(kt.glyphs,Ft.glyphs)||Yt.push({command:Eo.setGlyphs,args:[Ft.glyphs]}),it(kt.transition,Ft.transition)||Yt.push({command:Eo.setTransition,args:[Ft.transition]}),it(kt.light,Ft.light)||Yt.push({command:Eo.setLight,args:[Ft.light]}),it(kt.fog,Ft.fog)||Yt.push({command:Eo.setFog,args:[Ft.fog]}),it(kt.projection,Ft.projection)||Yt.push({command:Eo.setProjection,args:[Ft.projection]});const rn={},ln=[];(function(Tn,Dn,$n,Wn){let Zn;for(Zn in Dn=Dn||{},Tn=Tn||{})Tn.hasOwnProperty(Zn)&&(Dn.hasOwnProperty(Zn)||As(Zn,$n,Wn));for(Zn in Dn)Dn.hasOwnProperty(Zn)&&(Tn.hasOwnProperty(Zn)?it(Tn[Zn],Dn[Zn])||(Tn[Zn].type==="geojson"&&Dn[Zn].type==="geojson"&&cu(Tn,Dn,Zn)?$n.push({command:Eo.setGeoJSONSourceData,args:[Zn,Dn[Zn].data]}):Su(Zn,Dn,$n,Wn)):Rs(Zn,Dn,$n))})(kt.sources,Ft.sources,ln,rn);const pn=[];kt.layers&&kt.layers.forEach(Tn=>{Tn.source&&rn[Tn.source]?Yt.push({command:Eo.removeLayer,args:[Tn.id]}):pn.push(Tn)});let vn=kt.terrain;vn&&rn[vn.source]&&(Yt.push({command:Eo.setTerrain,args:[void 0]}),vn=void 0),Yt=Yt.concat(ln),it(vn,Ft.terrain)||Yt.push({command:Eo.setTerrain,args:[Ft.terrain]}),function(Tn,Dn,$n){Dn=Dn||[];const Wn=(Tn=Tn||[]).map(xa),Zn=Dn.map(xa),Fn=Tn.reduce(Gs,{}),jn=Dn.reduce(Gs,{}),Qn=Wn.slice(),Gn=Object.create(null);let or,lr,er,dr,Ar,Fr,Dr;for(or=0,lr=0;or<Wn.length;or++)er=Wn[or],jn.hasOwnProperty(er)?lr++:($n.push({command:Eo.removeLayer,args:[er]}),Qn.splice(Qn.indexOf(er,lr),1));for(or=0,lr=0;or<Zn.length;or++)er=Zn[Zn.length-1-or],Qn[Qn.length-1-or]!==er&&(Fn.hasOwnProperty(er)?($n.push({command:Eo.removeLayer,args:[er]}),Qn.splice(Qn.lastIndexOf(er,Qn.length-lr),1)):lr++,Fr=Qn[Qn.length-or],$n.push({command:Eo.addLayer,args:[jn[er],Fr]}),Qn.splice(Qn.length-or,0,er),Gn[er]=!0);for(or=0;or<Zn.length;or++)if(er=Zn[or],dr=Fn[er],Ar=jn[er],!Gn[er]&&!it(dr,Ar))if(it(dr.source,Ar.source)&&it(dr["source-layer"],Ar["source-layer"])&&it(dr.type,Ar.type)){for(Dr in $r(dr.layout,Ar.layout,$n,er,null,Eo.setLayoutProperty),$r(dr.paint,Ar.paint,$n,er,null,Eo.setPaintProperty),it(dr.filter,Ar.filter)||$n.push({command:Eo.setFilter,args:[er,Ar.filter]}),it(dr.minzoom,Ar.minzoom)&&it(dr.maxzoom,Ar.maxzoom)||$n.push({command:Eo.setLayerZoomRange,args:[er,Ar.minzoom,Ar.maxzoom]}),dr)dr.hasOwnProperty(Dr)&&Dr!=="layout"&&Dr!=="paint"&&Dr!=="filter"&&Dr!=="metadata"&&Dr!=="minzoom"&&Dr!=="maxzoom"&&(Dr.indexOf("paint.")===0?$r(dr[Dr],Ar[Dr],$n,er,Dr.slice(6),Eo.setPaintProperty):it(dr[Dr],Ar[Dr])||$n.push({command:Eo.setLayerProperty,args:[er,Dr,Ar[Dr]]}));for(Dr in Ar)Ar.hasOwnProperty(Dr)&&!dr.hasOwnProperty(Dr)&&Dr!=="layout"&&Dr!=="paint"&&Dr!=="filter"&&Dr!=="metadata"&&Dr!=="minzoom"&&Dr!=="maxzoom"&&(Dr.indexOf("paint.")===0?$r(dr[Dr],Ar[Dr],$n,er,Dr.slice(6),Eo.setPaintProperty):it(dr[Dr],Ar[Dr])||$n.push({command:Eo.setLayerProperty,args:[er,Dr,Ar[Dr]]}))}else $n.push({command:Eo.removeLayer,args:[er]}),Fr=Qn[Qn.lastIndexOf(er)+1],$n.push({command:Eo.addLayer,args:[Ar,Fr]})}(pn,Ft.layers,Yt)}catch(rn){console.warn("Unable to compute style diff:",rn),Yt=[{command:Eo.setStyle,args:[Ft]}]}return Yt}(this.serialize(),ot).filter(kt=>!(kt.command in Tl));if(lt.length===0)return!1;const bt=lt.filter(kt=>!(kt.command in e_));if(bt.length>0)throw new Error(`Unimplemented: ${bt.map(kt=>kt.command).join(", ")}.`);return lt.forEach(kt=>{kt.command!=="setTransition"&&kt.command!=="setProjection"&&this[kt.command].apply(this,kt.args)}),this.stylesheet=ot,this._updateMapProjection(),!0}addImage(ot,lt){return this.getImage(ot)?this.fire(new j.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(ot,lt),this._afterImageUpdated(ot),this)}updateImage(ot,lt){this.imageManager.updateImage(ot,lt)}getImage(ot){return this.imageManager.getImage(ot)}removeImage(ot){return this.getImage(ot)?(this.imageManager.removeImage(ot),this._afterImageUpdated(ot),this):this.fire(new j.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(ot){this._availableImages=this.imageManager.listImages(),this._changedImages[ot]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new j.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(ot,lt,bt={}){if(this._checkLoaded(),this.getSource(ot)!==void 0)throw new Error("There is already a source with this ID");if(!lt.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(lt).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(lt.type)>=0&&this._validate(j.validateSource,`sources.${ot}`,lt,null,bt))return;this.map&&this.map._collectResourceTiming&&(lt.collectResourceTiming=!0);const kt=_r(ot,lt,this.dispatcher,this);kt.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(ot),source:kt.serialize(),sourceId:ot}));const Ft=Yt=>{const rn=(Yt?"symbol:":"other:")+ot,ln=this._sourceCaches[rn]=new j.SourceCache(rn,kt,Yt);(Yt?this._symbolSourceCaches:this._otherSourceCaches)[ot]=ln,ln.style=this,ln.onAdd(this.map)};Ft(!1),lt.type!=="vector"&&lt.type!=="geojson"||Ft(!0),kt.onAdd&&kt.onAdd(this.map),this._changed=!0}removeSource(ot){this._checkLoaded();const lt=this.getSource(ot);if(!lt)throw new Error("There is no source with this ID");for(const kt in this._layers)if(this._layers[kt].source===ot)return this.fire(new j.ErrorEvent(new Error(`Source "${ot}" cannot be removed while layer "${kt}" is using it.`)));if(this.terrain&&this.terrain.get().source===ot)return this.fire(new j.ErrorEvent(new Error(`Source "${ot}" cannot be removed while terrain is using it.`)));const bt=this._getSourceCaches(ot);for(const kt of bt)delete this._sourceCaches[kt.id],delete this._updatedSources[kt.id],kt.fire(new j.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:kt.getSource().id})),kt.setEventedParent(null),kt.clearTiles();return delete this._otherSourceCaches[ot],delete this._symbolSourceCaches[ot],lt.setEventedParent(null),lt.onRemove&&lt.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(ot,lt){this._checkLoaded(),this.getSource(ot).setData(lt),this._changed=!0}getSource(ot){const lt=this._getSourceCache(ot);return lt&&lt.getSource()}_getSources(){const ot=[];for(const lt in this._otherSourceCaches){const bt=this._getSourceCache(lt);bt&&ot.push(bt.getSource())}return ot}addLayer(ot,lt,bt={}){this._checkLoaded();const kt=ot.id;if(this.getLayer(kt))return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${kt}" already exists on this map`)));let Ft;if(ot.type==="custom"){if(Gu(this,j.validateCustomStyleLayer(ot)))return;Ft=j.createStyleLayer(ot)}else{if(typeof ot.source=="object"&&(this.addSource(kt,ot.source),ot=j.clone$1(ot),ot=j.extend(ot,{source:kt})),this._validate(j.validateLayer,`layers.${kt}`,ot,{arrayIndex:-1},bt))return;Ft=j.createStyleLayer(ot),this._validateLayer(Ft),Ft.setEventedParent(this,{layer:{id:kt}}),this._serializedLayers[Ft.id]=Ft.serialize(),this._updateLayerCount(Ft,!0)}const Yt=lt?this._order.indexOf(lt):this._order.length;if(lt&&Yt===-1)return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${lt}" does not exist on this map.`)));this._order.splice(Yt,0,kt),this._layerOrderChanged=!0,this._layers[kt]=Ft;const rn=this._getLayerSourceCache(Ft);if(this._removedLayers[kt]&&Ft.source&&rn&&Ft.type!=="custom"){const ln=this._removedLayers[kt];delete this._removedLayers[kt],ln.type!==Ft.type?this._updatedSources[Ft.source]="clear":(this._updatedSources[Ft.source]="reload",rn.pause())}this._updateLayer(Ft),Ft.onAdd&&Ft.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(ot,lt){if(this._checkLoaded(),this._changed=!0,!this._layers[ot])return void this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be moved.`)));if(ot===lt)return;const bt=this._order.indexOf(ot);this._order.splice(bt,1);const kt=lt?this._order.indexOf(lt):this._order.length;lt&&kt===-1?this.fire(new j.ErrorEvent(new Error(`Layer with id "${lt}" does not exist on this map.`))):(this._order.splice(kt,0,ot),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(ot){this._checkLoaded();const lt=this._layers[ot];if(!lt)return void this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be removed.`)));lt.setEventedParent(null),this._updateLayerCount(lt,!1);const bt=this._order.indexOf(ot);this._order.splice(bt,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[ot]=lt,delete this._layers[ot],delete this._serializedLayers[ot],delete this._updatedLayers[ot],delete this._updatedPaintProps[ot],lt.onRemove&&lt.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(ot){return this._layers[ot]}hasLayer(ot){return ot in this._layers}hasLayerType(ot){for(const lt in this._layers)if(this._layers[lt].type===ot)return!0;return!1}setLayerZoomRange(ot,lt,bt){this._checkLoaded();const kt=this.getLayer(ot);kt?kt.minzoom===lt&&kt.maxzoom===bt||(lt!=null&&(kt.minzoom=lt),bt!=null&&(kt.maxzoom=bt),this._updateLayer(kt)):this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(ot,lt,bt={}){this._checkLoaded();const kt=this.getLayer(ot);if(kt){if(!it(kt.filter,lt))return lt==null?(kt.filter=void 0,void this._updateLayer(kt)):void(this._validate(j.validateFilter,`layers.${kt.id}.filter`,lt,{layerType:kt.type},bt)||(kt.filter=j.clone$1(lt),this._updateLayer(kt)))}else this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be filtered.`)))}getFilter(ot){const lt=this.getLayer(ot);return lt&&j.clone$1(lt.filter)}setLayoutProperty(ot,lt,bt,kt={}){this._checkLoaded();const Ft=this.getLayer(ot);Ft?it(Ft.getLayoutProperty(lt),bt)||(Ft.setLayoutProperty(lt,bt,kt),this._updateLayer(Ft)):this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(ot,lt){const bt=this.getLayer(ot);if(bt)return bt.getLayoutProperty(lt);this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style.`)))}setPaintProperty(ot,lt,bt,kt={}){this._checkLoaded();const Ft=this.getLayer(ot);Ft?it(Ft.getPaintProperty(lt),bt)||(Ft.setPaintProperty(lt,bt,kt)&&this._updateLayer(Ft),this._changed=!0,this._updatedPaintProps[ot]=!0):this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(ot,lt){const bt=this.getLayer(ot);return bt&&bt.getPaintProperty(lt)}setFeatureState(ot,lt){this._checkLoaded();const bt=ot.source,kt=ot.sourceLayer,Ft=this.getSource(bt);if(!Ft)return void this.fire(new j.ErrorEvent(new Error(`The source '${bt}' does not exist in the map's style.`)));const Yt=Ft.type;if(Yt==="geojson"&&kt)return void this.fire(new j.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Yt==="vector"&&!kt)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));ot.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided.")));const rn=this._getSourceCaches(bt);for(const ln of rn)ln.setFeatureState(kt,ot.id,lt)}removeFeatureState(ot,lt){this._checkLoaded();const bt=ot.source,kt=this.getSource(bt);if(!kt)return void this.fire(new j.ErrorEvent(new Error(`The source '${bt}' does not exist in the map's style.`)));const Ft=kt.type,Yt=Ft==="vector"?ot.sourceLayer:void 0;if(Ft==="vector"&&!Yt)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(lt&&typeof ot.id!="string"&&typeof ot.id!="number")return void this.fire(new j.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const rn=this._getSourceCaches(bt);for(const ln of rn)ln.removeFeatureState(Yt,ot.id,lt)}getFeatureState(ot){this._checkLoaded();const lt=ot.source,bt=ot.sourceLayer,kt=this.getSource(lt);if(kt){if(kt.type!=="vector"||bt)return ot.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(lt)[0].getFeatureState(bt,ot.id);this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new j.ErrorEvent(new Error(`The source '${lt}' does not exist in the map's style.`)))}getTransition(){return j.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const ot={};for(const lt in this._sourceCaches){const bt=this._sourceCaches[lt].getSource();ot[bt.id]||(ot[bt.id]=bt.serialize())}return j.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:ot,layers:this._serializeLayers(this._order)},lt=>lt!==void 0)}_updateLayer(ot){this._updatedLayers[ot.id]=!0;const lt=this._getLayerSourceCache(ot);ot.source&&!this._updatedSources[ot.source]&&lt&&lt.getSource().type!=="raster"&&(this._updatedSources[ot.source]="reload",lt.pause()),this._changed=!0,ot.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(ot){const lt=Yt=>this._layers[Yt].type==="fill-extrusion",bt={},kt=[];for(let Yt=this._order.length-1;Yt>=0;Yt--){const rn=this._order[Yt];if(lt(rn)){bt[rn]=Yt;for(const ln of ot){const pn=ln[rn];if(pn)for(const vn of pn)kt.push(vn)}}}kt.sort((Yt,rn)=>rn.intersectionZ-Yt.intersectionZ);const Ft=[];for(let Yt=this._order.length-1;Yt>=0;Yt--){const rn=this._order[Yt];if(lt(rn))for(let ln=kt.length-1;ln>=0;ln--){const pn=kt[ln].feature;if(bt[pn.layer.id]<Yt)break;Ft.push(pn),kt.pop()}else for(const ln of ot){const pn=ln[rn];if(pn)for(const vn of pn)Ft.push(vn.feature)}}return Ft}queryRenderedFeatures(ot,lt,bt){lt&&lt.filter&&this._validate(j.validateFilter,"queryRenderedFeatures.filter",lt.filter,null,lt);const kt={};if(lt&&lt.layers){if(!Array.isArray(lt.layers))return this.fire(new j.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ln of lt.layers){const pn=this._layers[ln];if(!pn)return this.fire(new j.ErrorEvent(new Error(`The layer '${ln}' does not exist in the map's style and cannot be queried for features.`))),[];kt[pn.source]=!0}}const Ft=[];lt.availableImages=this._availableImages;const Yt=lt&&lt.layers?lt.layers.some(ln=>{const pn=this.getLayer(ln);return pn&&pn.is3D()}):this.has3DLayers(),rn=mn.createFromScreenPoints(ot,bt);for(const ln in this._sourceCaches){const pn=this._sourceCaches[ln].getSource().id;lt.layers&&!kt[pn]||Ft.push(xr(this._sourceCaches[ln],this._layers,this._serializedLayers,rn,lt,bt,Yt,!!this.map._showQueryGeometry))}return this.placement&&Ft.push(function(ln,pn,vn,Tn,Dn,$n,Wn){const Zn={},Fn=$n.queryRenderedSymbols(Tn),jn=[];for(const Qn of Object.keys(Fn).map(Number))jn.push(Wn[Qn]);jn.sort(po);for(const Qn of jn){const Gn=Qn.featureIndex.lookupSymbolFeatures(Fn[Qn.bucketInstanceId],pn,Qn.bucketIndex,Qn.sourceLayerIndex,Dn.filter,Dn.layers,Dn.availableImages,ln);for(const or in Gn){const lr=Zn[or]=Zn[or]||[],er=Gn[or];er.sort((dr,Ar)=>{const Fr=Qn.featureSortOrder;if(Fr){const Dr=Fr.indexOf(dr.featureIndex);return Fr.indexOf(Ar.featureIndex)-Dr}return Ar.featureIndex-dr.featureIndex});for(const dr of er)lr.push(dr)}}for(const Qn in Zn)Zn[Qn].forEach(Gn=>{const or=Gn.feature,lr=vn(ln[Qn]).getFeatureState(or.layer["source-layer"],or.id);or.source=or.layer.source,or.layer["source-layer"]&&(or.sourceLayer=or.layer["source-layer"]),or.state=lr});return Zn}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),rn.screenGeometry,lt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ft)}querySourceFeatures(ot,lt){lt&&lt.filter&&this._validate(j.validateFilter,"querySourceFeatures.filter",lt.filter,null,lt);const bt=this._getSourceCaches(ot);let kt=[];for(const Ft of bt)kt=kt.concat(Yr(Ft,lt));return kt}addSourceType(ot,lt,bt){return op.getSourceType(ot)?bt(new Error(`A source type called "${ot}" already exists.`)):(op.setSourceType(ot,lt),lt.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:ot,url:lt.workerSourceURL},bt):bt(null,null))}getLight(){return this.light.getLight()}setLight(ot,lt={}){this._checkLoaded();const bt=this.light.getLight();let kt=!1;for(const Yt in ot)if(!it(ot[Yt],bt[Yt])){kt=!0;break}if(!kt)return;const Ft=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(ot,lt),this.light.updateTransitions(Ft)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(ot,lt=1){if(this._checkLoaded(),!ot)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(lt===1){if(typeof ot.source=="object"){const bt="terrain-dem-src";this.addSource(bt,ot.source),ot=j.clone$1(ot),ot=j.extend(ot,{source:bt})}if(this._validate(j.validateTerrain,"terrain",ot))return}if(!this.terrain||this.terrain&&lt!==this.terrain.drapeRenderMode)this._createTerrain(ot,lt);else{const bt=this.terrain,kt=bt.get();for(const Ft of Object.keys(j.spec.terrain))!ot.hasOwnProperty(Ft)&&j.spec.terrain[Ft].default&&(ot[Ft]=j.spec.terrain[Ft].default);for(const Ft in ot)if(!it(ot[Ft],kt[Ft])){bt.set(ot),this.stylesheet.terrain=ot;const Yt=this._setTransitionParameters({duration:0});bt.updateTransitions(Yt);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(ot){const lt=this.fog=new Xt(ot,this.map.transform);this.stylesheet.fog=ot;const bt=this._setTransitionParameters({duration:0});lt.updateTransitions(bt)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const ot of this.map._markers)ot._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(ot){if(this._checkLoaded(),!ot)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const lt=this.fog,bt=lt.get();Object.keys(ot).length===0&&lt.set(ot);for(const kt in ot)if(!it(ot[kt],bt[kt])){lt.set(ot),this.stylesheet.fog=ot;const Ft=this._setTransitionParameters({duration:0});lt.updateTransitions(Ft);break}}else this._createFog(ot);this._markersNeedUpdate=!0}_setTransitionParameters(ot){return{now:j.exported.now(),transition:j.extend(ot,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const ot=this._order.filter(bt=>this.isLayerDraped(this._layers[bt])),lt=this._order.filter(bt=>!this.isLayerDraped(this._layers[bt]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...ot),this._drapedFirstOrder.push(...lt)}_createTerrain(ot,lt){const bt=this.terrain=new Ht(ot,lt);this.stylesheet.terrain=ot,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const kt=this._setTransitionParameters({duration:0});bt.updateTransitions(kt)}_force3DLayerUpdate(){for(const ot in this._layers){const lt=this._layers[ot];lt.type==="fill-extrusion"&&this._updateLayer(lt)}}_forceSymbolLayerUpdate(){for(const ot in this._layers){const lt=this._layers[ot];lt.type==="symbol"&&this._updateLayer(lt)}}_validate(ot,lt,bt,kt,Ft={}){return(!Ft||Ft.validate!==!1)&&Gu(this,ot.call(j.validateStyle,j.extend({key:lt,style:this.serialize(),value:bt,styleSpec:j.spec},kt)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),j.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const ot in this._layers)this._layers[ot].setEventedParent(null);for(const ot in this._sourceCaches)this._sourceCaches[ot].clearTiles(),this._sourceCaches[ot].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(ot){const lt=this._getSourceCaches(ot);for(const bt of lt)bt.clearTiles()}_reloadSource(ot){const lt=this._getSourceCaches(ot);for(const bt of lt)bt.resume(),bt.reload()}_reloadSources(){for(const ot of this._getSources())ot.reload&&ot.reload()}_updateSources(ot){for(const lt in this._sourceCaches)this._sourceCaches[lt].update(ot)}_generateCollisionBoxes(){for(const ot in this._sourceCaches){const lt=this._sourceCaches[ot];lt.resume(),lt.reload()}}_updatePlacement(ot,lt,bt,kt,Ft=!1){let Yt=!1,rn=!1;const ln={};for(const pn of this._order){const vn=this._layers[pn];if(vn.type!=="symbol")continue;if(!ln[vn.source]){const Dn=this._getLayerSourceCache(vn);if(!Dn)continue;ln[vn.source]=Dn.getRenderableIds(!0).map($n=>Dn.getTileByID($n)).sort(($n,Wn)=>Wn.tileID.overscaledZ-$n.tileID.overscaledZ||($n.tileID.isLessThan(Wn.tileID)?-1:1))}const Tn=this.crossTileSymbolIndex.addLayer(vn,ln[vn.source],ot.center.lng,ot.projection);Yt=Yt||Tn}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Ft=Ft||this._layerOrderChanged||bt===0,this._layerOrderChanged&&this.fire(new j.Event("neworder")),(Ft||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.exported.now(),ot.zoom))&&(this.pauseablePlacement=new Ko(ot,this._order,Ft,lt,bt,kt,this.placement,this.fog&&ot.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ln),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.exported.now()),rn=!0),Yt&&this.pauseablePlacement.placement.setStale()),rn||Yt)for(const pn of this._order){const vn=this._layers[pn];vn.type==="symbol"&&this.placement.updateLayerOpacities(vn,ln[vn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.exported.now())}_releaseSymbolFadeTiles(){for(const ot in this._sourceCaches)this._sourceCaches[ot].releaseSymbolFadeTiles()}getImages(ot,lt,bt){this.imageManager.getImages(lt.icons,bt),this._updateTilesForChangedImages();const kt=Ft=>{Ft&&Ft.setDependencies(lt.tileID.key,lt.type,lt.icons)};kt(this._otherSourceCaches[lt.source]),kt(this._symbolSourceCaches[lt.source])}getGlyphs(ot,lt,bt){this.glyphManager.getGlyphs(lt.stacks,bt)}getResource(ot,lt,bt){return j.makeRequest(lt,bt)}_getSourceCache(ot){return this._otherSourceCaches[ot]}_getLayerSourceCache(ot){return ot.type==="symbol"?this._symbolSourceCaches[ot.source]:this._otherSourceCaches[ot.source]}_getSourceCaches(ot){const lt=[];return this._otherSourceCaches[ot]&&lt.push(this._otherSourceCaches[ot]),this._symbolSourceCaches[ot]&&lt.push(this._symbolSourceCaches[ot]),lt}_isSourceCacheLoaded(ot){const lt=this._getSourceCaches(ot);return lt.length===0?(this.fire(new j.ErrorEvent(new Error(`There is no source with ID '${ot}'`))),!1):lt.every(bt=>bt.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}op.getSourceType=function(dt){return gr[dt]},op.setSourceType=function(dt,ot){gr[dt]=ot},op.registerForPluginStateChange=j.registerForPluginStateChange;var t_=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,du="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",sv=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,n_=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,av=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let r_={},i_={};const rm=[];sp(t_,rm),sp(sv,rm),sp(n_,rm),sp(av,rm),r_=bs("",sv),i_=bs(av,n_);const gu=bs(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),lv=t_,pu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var uv={background:bs(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:bs(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:bs(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:bs("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:bs(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:bs(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:bs("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:bs("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:bs("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:bs(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:bs(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:bs(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:bs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:bs(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);float roof_radiance=clamp(u_lightpos.z,0.0,1.0);roof_radiance=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roof_radiance);v_roof_color.rgb+=clamp(color.rgb*roof_radiance*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:bs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:bs(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:bs(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:bs(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:bs(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:bs(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:bs(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:bs(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:bs(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:bs(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:bs(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:bs(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,du),skyboxGradient:bs(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,du),skyboxCapture:bs(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:bs(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:bs(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function sp(dt,ot){const lt=dt.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let bt of lt)if(bt=bt.trim(),bt[0]==="#"&&bt.includes("if")&&!bt.includes("endif")){bt=bt.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const kt=bt.split(" ");for(const Ft of kt)ot.includes(Ft)||ot.push(Ft)}}function bs(dt,ot){const lt=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,bt=ot.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),kt={},Ft=[...rm];return sp(dt,Ft),sp(ot,Ft),{fragmentSource:dt=dt.replace(lt,(Yt,rn,ln,pn,vn)=>(kt[vn]=!0,rn==="define"?`
#ifndef HAS_UNIFORM_u_${vn}
varying ${ln} ${pn} ${vn};
#else
uniform ${ln} ${pn} u_${vn};
#endif
`:`
#ifdef HAS_UNIFORM_u_${vn}
    ${ln} ${pn} ${vn} = u_${vn};
#endif
`)),vertexSource:ot=ot.replace(lt,(Yt,rn,ln,pn,vn)=>{const Tn=pn==="float"?"vec2":"vec4",Dn=vn.match(/color/)?"color":Tn;return kt[vn]?rn==="define"?`
#ifndef HAS_UNIFORM_u_${vn}
uniform lowp float u_${vn}_t;
attribute ${ln} ${Tn} a_${vn};
varying ${ln} ${pn} ${vn};
#else
uniform ${ln} ${pn} u_${vn};
#endif
`:Dn==="vec4"?`
#ifndef HAS_UNIFORM_u_${vn}
    ${vn} = a_${vn};
#else
    ${ln} ${pn} ${vn} = u_${vn};
#endif
`:`
#ifndef HAS_UNIFORM_u_${vn}
    ${vn} = unpack_mix_${Dn}(a_${vn}, u_${vn}_t);
#else
    ${ln} ${pn} ${vn} = u_${vn};
#endif
`:rn==="define"?`
#ifndef HAS_UNIFORM_u_${vn}
uniform lowp float u_${vn}_t;
attribute ${ln} ${Tn} a_${vn};
#else
uniform ${ln} ${pn} u_${vn};
#endif
`:Dn==="vec4"?`
#ifndef HAS_UNIFORM_u_${vn}
    ${ln} ${pn} ${vn} = a_${vn};
#else
    ${ln} ${pn} ${vn} = u_${vn};
#endif
`:`
#ifndef HAS_UNIFORM_u_${vn}
    ${ln} ${pn} ${vn} = unpack_mix_${Dn}(a_${vn}, u_${vn}_t);
#else
    ${ln} ${pn} ${vn} = u_${vn};
#endif
`}),staticAttributes:bt,usedDefines:Ft}}class im{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(ot,lt,bt,kt,Ft,Yt,rn){this.context=ot;let ln=this.boundPaintVertexBuffers.length!==kt.length;for(let vn=0;!ln&&vn<kt.length;vn++)this.boundPaintVertexBuffers[vn]!==kt[vn]&&(ln=!0);let pn=this.boundDynamicVertexBuffers.length!==rn.length;for(let vn=0;!pn&&vn<rn.length;vn++)this.boundDynamicVertexBuffers[vn]!==rn[vn]&&(pn=!0);if(!ot.extVertexArrayObject||!this.vao||this.boundProgram!==lt||this.boundLayoutVertexBuffer!==bt||ln||pn||this.boundIndexBuffer!==Ft||this.boundVertexOffset!==Yt)this.freshBind(lt,bt,kt,Ft,Yt,rn);else{ot.bindVertexArrayOES.set(this.vao);for(const vn of rn)vn&&vn.bind();Ft&&Ft.dynamicDraw&&Ft.bind()}}freshBind(ot,lt,bt,kt,Ft,Yt){let rn;const ln=ot.numAttributes,pn=this.context,vn=pn.gl;if(pn.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pn.extVertexArrayObject.createVertexArrayOES(),pn.bindVertexArrayOES.set(this.vao),rn=0,this.boundProgram=ot,this.boundLayoutVertexBuffer=lt,this.boundPaintVertexBuffers=bt,this.boundIndexBuffer=kt,this.boundVertexOffset=Ft,this.boundDynamicVertexBuffers=Yt;else{rn=pn.currentNumAttributes||0;for(let Tn=ln;Tn<rn;Tn++)vn.disableVertexAttribArray(Tn)}lt.enableAttributes(vn,ot),lt.bind(),lt.setVertexAttribPointers(vn,ot,Ft);for(const Tn of bt)Tn.enableAttributes(vn,ot),Tn.bind(),Tn.setVertexAttribPointers(vn,ot,Ft);for(const Tn of Yt)Tn&&(Tn.enableAttributes(vn,ot),Tn.bind(),Tn.setVertexAttribPointers(vn,ot,Ft));kt&&kt.bind(),pn.currentNumAttributes=ln}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function $m(dt,ot){const lt=Math.pow(2,ot.canonical.z),bt=ot.canonical.y;return[new j.MercatorCoordinate(0,bt/lt).toLngLat().lat,new j.MercatorCoordinate(0,(bt+1)/lt).toLngLat().lat]}function _a(dt,ot,lt,bt,kt,Ft,Yt){const rn=dt.context,ln=rn.gl,pn=lt.fbo;if(!pn)return;dt.prepareDrawTile();const vn=dt.useProgram("hillshade");rn.activeTexture.set(ln.TEXTURE0),ln.bindTexture(ln.TEXTURE_2D,pn.colorAttachment.get());const Tn=((Zn,Fn,jn,Qn)=>{const Gn=jn.paint.get("hillshade-shadow-color"),or=jn.paint.get("hillshade-highlight-color"),lr=jn.paint.get("hillshade-accent-color");let er=jn.paint.get("hillshade-illumination-direction")*(Math.PI/180);jn.paint.get("hillshade-illumination-anchor")==="viewport"&&(er-=Zn.transform.angle);const dr=!Zn.options.moving;return{u_matrix:Qn||Zn.transform.calculateProjMatrix(Fn.tileID.toUnwrapped(),dr),u_image:0,u_latrange:$m(0,Fn.tileID),u_light:[jn.paint.get("hillshade-exaggeration"),er],u_shadow:Gn,u_highlight:or,u_accent:lr}})(dt,lt,bt,dt.terrain?ot.projMatrix:null);dt.prepareDrawProgram(rn,vn,ot.toUnwrapped());const{tileBoundsBuffer:Dn,tileBoundsIndexBuffer:$n,tileBoundsSegments:Wn}=dt.getTileBoundsBuffers(lt);vn.draw(rn,ln.TRIANGLES,kt,Ft,Yt,j.CullFaceMode.disabled,Tn,bt.id,Dn,$n,Wn)}function ap(dt,ot,lt){if(!ot.needsDEMTextureUpload)return;const bt=dt.context,kt=bt.gl;bt.pixelStoreUnpackPremultiplyAlpha.set(!1),ot.demTexture=ot.demTexture||dt.getTileTexture(lt.stride);const Ft=lt.getPixels();ot.demTexture?ot.demTexture.update(Ft,{premultiply:!1}):ot.demTexture=new j.Texture(bt,Ft,kt.RGBA,{premultiply:!1}),ot.needsDEMTextureUpload=!1}function o_(dt,ot,lt,bt,kt,Ft){const Yt=dt.context,rn=Yt.gl;if(!ot.dem)return;const ln=ot.dem;if(Yt.activeTexture.set(rn.TEXTURE1),ap(dt,ot,ln),!ot.demTexture)return;ot.demTexture.bind(rn.NEAREST,rn.CLAMP_TO_EDGE);const pn=ln.dim;Yt.activeTexture.set(rn.TEXTURE0);let vn=ot.fbo;if(!vn){const Wn=new j.Texture(Yt,{width:pn,height:pn,data:null},rn.RGBA);Wn.bind(rn.LINEAR,rn.CLAMP_TO_EDGE),vn=ot.fbo=Yt.createFramebuffer(pn,pn,!0),vn.colorAttachment.set(Wn.texture)}Yt.bindFramebuffer.set(vn.framebuffer),Yt.viewport.set([0,0,pn,pn]);const{tileBoundsBuffer:Tn,tileBoundsIndexBuffer:Dn,tileBoundsSegments:$n}=dt.getMercatorTileBoundsBuffers();dt.useProgram("hillshadePrepare").draw(Yt,rn.TRIANGLES,bt,kt,Ft,j.CullFaceMode.disabled,((Wn,Zn)=>{const Fn=Zn.stride,jn=j.create();return j.ortho(jn,0,j.EXTENT,-j.EXTENT,0,0,1),j.translate(jn,jn,[0,-j.EXTENT,0]),{u_matrix:jn,u_image:1,u_dimension:[Fn,Fn],u_zoom:Wn.overscaledZ,u_unpack:Zn.unpackVector}})(ot.tileID,ln),lt.id,Tn,Dn,$n),ot.needsHillshadePrepare=!1}const s_=dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image0:new j.Uniform1i(dt),u_skirt_height:new j.Uniform1f(dt)}),Ty=(dt,ot)=>({u_matrix:dt,u_image0:0,u_skirt_height:ot}),a_=(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n)=>({u_proj_matrix:Float32Array.from(dt),u_globe_matrix:ot,u_normalize_matrix:Float32Array.from(bt),u_merc_matrix:lt,u_zoom_transition:kt,u_merc_center:Ft,u_image0:0,u_frustum_tl:Yt,u_frustum_tr:rn,u_frustum_br:ln,u_frustum_bl:pn,u_globe_pos:vn,u_globe_radius:Tn,u_viewport:Dn,u_grid_matrix:$n?Float32Array.from($n):new Float32Array(9)});function Cy(dt,ot){return dt!=null&&ot!=null&&!(!dt.hasData()||!ot.hasData())&&dt.demTexture!=null&&ot.demTexture!=null&&dt.tileID.key!==ot.tileID.key}const om=new class{constructor(){this.operations={}}newMorphing(dt,ot,lt,bt,kt){if(dt in this.operations){const Ft=this.operations[dt];Ft.to.tileID.key!==lt.tileID.key&&(Ft.queued=lt)}else this.operations[dt]={startTime:bt,phase:0,duration:kt,from:ot,to:lt,queued:null}}getMorphValuesForProxy(dt){if(!(dt in this.operations))return null;const ot=this.operations[dt];return{from:ot.from,to:ot.to,phase:ot.phase}}update(dt){for(const ot in this.operations){const lt=this.operations[ot];for(lt.phase=(dt-lt.startTime)/lt.duration;lt.phase>=1||!this._validOp(lt);)if(!this._nextOp(lt,dt)){delete this.operations[ot];break}}}_nextOp(dt,ot){return!!dt.queued&&(dt.from=dt.to,dt.to=dt.queued,dt.queued=null,dt.phase=0,dt.startTime=ot,!0)}_validOp(dt){return dt.from.hasData()&&dt.to.hasData()}},Im={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ts(dt,ot){const lt=1<<dt.z;return!ot&&(dt.x===0||dt.x===lt-1)||dt.y===0||dt.y===lt-1}const lp=dt=>({u_matrix:dt});function cv(dt,ot,lt,bt,kt){if(kt>0){const Ft=j.exported.now(),Yt=(Ft-dt.timeAdded)/kt,rn=ot?(Ft-ot.timeAdded)/kt:-1,ln=lt.getSource(),pn=bt.coveringZoomLevel({tileSize:ln.tileSize,roundZoom:ln.roundZoom}),vn=!ot||Math.abs(ot.tileID.overscaledZ-pn)>Math.abs(dt.tileID.overscaledZ-pn),Tn=vn&&dt.refreshedUponExpiration?1:j.clamp(vn?Yt:1-rn,0,1);return dt.refreshedUponExpiration&&Yt>=1&&(dt.refreshedUponExpiration=!1),ot?{opacity:1,mix:1-Tn}:{opacity:Tn,mix:0}}return{opacity:1,mix:0}}class hv extends j.SourceCache{constructor(ot){const lt={type:"raster-dem",maxzoom:ot.transform.maxZoom},bt=new un(zo(),null),kt=_r("mock-dem",lt,bt,ot.style);super("mock-dem",kt,!1),kt.setEventedParent(this),this._sourceLoaded=!0}_loadTile(ot,lt){ot.state="loaded",lt(null)}}class fv extends j.SourceCache{constructor(ot){const lt=_r("proxy",{type:"geojson",maxzoom:ot.transform.maxZoom},new un(zo(),null),ot.style);super("proxy",lt,!1),lt.setEventedParent(this),this.map=this.getSource().map=ot,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(ot,lt,bt){if(ot.freezeTileCoverage)return;this.transform=ot;const kt=ot.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((Ft,Yt)=>{if(Ft[Yt.key]="",!this._tiles[Yt.key]){const rn=new j.Tile(Yt,this._source.tileSize*Yt.overscaleFactor(),ot.tileZoom);rn.state="loaded",this._tiles[Yt.key]=rn}return Ft},{});for(const Ft in this._tiles)Ft in kt||(this.freeFBO(Ft),this._tiles[Ft].unloadVectorData(),delete this._tiles[Ft])}freeFBO(ot){const lt=this.proxyCachedFBO[ot];if(lt!==void 0){const bt=Object.values(lt);this.renderCachePool.push(...bt),delete this.proxyCachedFBO[ot]}}deallocRenderCache(){this.renderCache.forEach(ot=>ot.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class qm extends j.OverscaledTileID{constructor(ot,lt,bt){super(ot.overscaledZ,ot.wrap,ot.canonical.z,ot.canonical.x,ot.canonical.y),this.proxyTileKey=lt,this.projMatrix=bt}}class l_ extends j.Elevation{constructor(ot,lt){super(),this.painter=ot,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[bt,kt,Ft]=function(ln){const pn=new j.StructArrayLayout4i8,vn=new j.StructArrayLayout3ui6,Tn=131;pn.reserve(17161),vn.reserve(33800);const Dn=j.EXTENT/128,$n=j.EXTENT+Dn/2,Wn=$n+Dn;for(let Fn=-Dn;Fn<Wn;Fn+=Dn)for(let jn=-Dn;jn<Wn;jn+=Dn){const Qn=jn<0||jn>$n||Fn<0||Fn>$n?24575:0,Gn=j.clamp(Math.round(jn),0,j.EXTENT),or=j.clamp(Math.round(Fn),0,j.EXTENT);pn.emplaceBack(Gn+Qn,or,Gn,or)}const Zn=(Fn,jn)=>{const Qn=jn*Tn+Fn;vn.emplaceBack(Qn+1,Qn,Qn+Tn),vn.emplaceBack(Qn+Tn,Qn+Tn+1,Qn+1)};for(let Fn=1;Fn<129;Fn++)for(let jn=1;jn<129;jn++)Zn(jn,Fn);return[0,129].forEach(Fn=>{for(let jn=0;jn<130;jn++)Zn(jn,Fn),Zn(Fn,jn)}),[pn,vn,32768]}(),Yt=ot.context;this.gridBuffer=Yt.createVertexBuffer(bt,j.boundsAttributes.members),this.gridIndexBuffer=Yt.createIndexBuffer(kt),this.gridSegments=j.SegmentVector.simpleSegment(0,0,bt.length,kt.length),this.gridNoSkirtSegments=j.SegmentVector.simpleSegment(0,0,bt.length,Ft),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new fv(lt.map),this.orthoMatrix=j.create(),j.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,j.EXTENT,0,j.EXTENT,0,1);const rn=Yt.gl;this._overlapStencilMode=new j.StencilMode({func:rn.GEQUAL,mask:255},0,255,rn.KEEP,rn.KEEP,rn.REPLACE),this._previousZoom=ot.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=lt,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new hv(lt.map)}set style(ot){ot.on("data",this._onStyleDataEvent.bind(this)),ot.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=ot,this._checkRenderCacheEfficiency()}update(ot,lt,bt){if(ot&&ot.terrain){this._style!==ot&&(this.style=ot),this.enabled=!0;const kt=ot.terrain.properties;this.sourceCache=ot.terrain.drapeRenderMode===0?this._mockSourceCache:ot._getSourceCache(kt.get("source")),this._exaggeration=kt.get("exaggeration");const Ft=()=>{this.sourceCache.used&&j.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Yt=this.getScaledDemTileSize();this.sourceCache.update(lt,Yt,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Ft(),this._initializing=!0),Ft(),lt.updateElevation(!bt),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(lt),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(ot){this._findCoveringTileCache[ot]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const ot=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||ot.efficiency!==100&&j.warnOnce(`Terrain render cache efficiency is not optimal (${ot.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${ot.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(ot){ot.coord&&ot.dataType==="source"?this._clearRenderCacheForTile(ot.sourceCacheId,ot.coord):ot.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const ot in this._style._sourceCaches)this._style._sourceCaches[ot].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(ot=>ot.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const ot=2*this.proxySourceCache.getSource().tileSize;return[ot,ot]}set useVertexMorphing(ot){this._useVertexMorphing=ot}updateTileBinding(ot){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const lt=this.proxySourceCache,bt=this.painter.transform;this._initializing&&(this._initializing=bt._centerAltitude===0&&this.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(bt.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const kt=this.proxyCoords=lt.getIds().map(ln=>{const pn=lt.getTileByID(ln).tileID;return pn.projMatrix=bt.calculateProjMatrix(pn.toUnwrapped()),pn});(function(ln,pn){const vn=pn.transform.pointCoordinate(pn.transform.getCameraPoint()),Tn=new j.pointGeometry(vn.x,vn.y);ln.sort((Dn,$n)=>{if($n.overscaledZ-Dn.overscaledZ)return $n.overscaledZ-Dn.overscaledZ;const Wn=new j.pointGeometry(Dn.canonical.x+(1<<Dn.canonical.z)*Dn.wrap,Dn.canonical.y),Zn=new j.pointGeometry($n.canonical.x+(1<<$n.canonical.z)*$n.wrap,$n.canonical.y),Fn=Tn.mult(1<<Dn.canonical.z);return Fn.x-=.5,Fn.y-=.5,Fn.distSqr(Wn)-Fn.distSqr(Zn)})})(kt,this.painter),this._previousZoom=bt.zoom;const Ft=this.proxyToSource||{};this.proxyToSource={},kt.forEach(ln=>{this.proxyToSource[ln.key]={}}),this.terrainTileForTile={};const Yt=this._style._sourceCaches;for(const ln in Yt){const pn=Yt[ln];if(!pn.used||(pn!==this.sourceCache&&this.resetTileLookupCache(pn.id),this._setupProxiedCoordsForOrtho(pn,ot[ln],Ft),pn.usedForTerrain))continue;const vn=ot[ln];pn.getSource().reparseOverscaled&&this._assignTerrainTiles(vn)}this.proxiedCoords[lt.id]=kt.map(ln=>new qm(ln,ln.key,this.orthoMatrix)),this._assignTerrainTiles(kt),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(Ft),this.renderingToTexture=!1,this._updateTimestamp=j.exported.now();const rn={};this._visibleDemTiles=[];for(const ln of this.proxyCoords){const pn=this.terrainTileForTile[ln.key];if(!pn)continue;const vn=pn.tileID.key;vn in rn||(this._visibleDemTiles.push(pn),rn[vn]=vn)}}_assignTerrainTiles(ot){this._initializing||ot.forEach(lt=>{if(this.terrainTileForTile[lt.key])return;const bt=this._findTileCoveringTileID(lt,this.sourceCache);bt&&(this.terrainTileForTile[lt.key]=bt)})}_prepareDEMTextures(){const ot=this.painter.context,lt=ot.gl;for(const bt in this.terrainTileForTile){const kt=this.terrainTileForTile[bt],Ft=kt.dem;!Ft||kt.demTexture&&!kt.needsDEMTextureUpload||(ot.activeTexture.set(lt.TEXTURE1),ap(this.painter,kt,Ft))}}_prepareDemTileUniforms(ot,lt,bt,kt){if(!lt||lt.demTexture==null)return!1;const Ft=ot.tileID.canonical,Yt=Math.pow(2,lt.tileID.canonical.z-Ft.z),rn=kt||"";return bt[`u_dem_tl${rn}`]=[Ft.x*Yt%1,Ft.y*Yt%1],bt[`u_dem_scale${rn}`]=Yt,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const ot=this.painter.context,lt=ot.gl;if(!this._emptyDepthBufferTexture){const bt=new j.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new j.Texture(ot,bt,lt.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let ot=0;const lt=this._visibleDemTiles.reduce((bt,kt)=>{if(!kt.dem)return bt;const Ft=kt.dem.tree.minimums[0];return Ft>0&&ot++,bt+Ft},0);return ot?lt/ot:0}_updateEmptyDEMTexture(){const ot=this.painter.context,lt=ot.gl;ot.activeTexture.set(lt.TEXTURE2);const bt=this._getLoadedAreaMinimum(),kt=new j.RGBAImage({width:1,height:1},new Uint8Array(j.DEMData.pack(bt,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let Ft=this._emptyDEMTexture;return Ft?Ft.update(kt,{premultiply:!1}):Ft=this._emptyDEMTexture=new j.Texture(ot,kt,lt.RGBA,{premultiply:!1}),Ft}setupElevationDraw(ot,lt,bt){const kt=this.painter.context,Ft=kt.gl,Yt=(rn=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:j.DEMData.getUnpackVector(rn),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var rn;Yt.u_dem_size=this.sourceCache.getSource().tileSize,Yt.u_exaggeration=this.exaggeration();let ln=null,pn=null,vn=1;if(bt&&bt.morphing&&this._useVertexMorphing){const Tn=bt.morphing.srcDemTile,Dn=bt.morphing.dstDemTile;vn=bt.morphing.phase,Tn&&Dn&&(this._prepareDemTileUniforms(ot,Tn,Yt,"_prev")&&(pn=Tn),this._prepareDemTileUniforms(ot,Dn,Yt)&&(ln=Dn))}if(pn&&ln?(kt.activeTexture.set(Ft.TEXTURE2),ln.demTexture.bind(Ft.NEAREST,Ft.CLAMP_TO_EDGE,Ft.NEAREST),kt.activeTexture.set(Ft.TEXTURE4),pn.demTexture.bind(Ft.NEAREST,Ft.CLAMP_TO_EDGE,Ft.NEAREST),Yt.u_dem_lerp=vn):(ln=this.terrainTileForTile[ot.tileID.key],kt.activeTexture.set(Ft.TEXTURE2),(this._prepareDemTileUniforms(ot,ln,Yt)?ln.demTexture:this.emptyDEMTexture).bind(Ft.NEAREST,Ft.CLAMP_TO_EDGE)),kt.activeTexture.set(Ft.TEXTURE3),bt&&bt.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(Ft.NEAREST,Ft.CLAMP_TO_EDGE),this._depthFBO&&(Yt.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(Ft.NEAREST,Ft.CLAMP_TO_EDGE),Yt.u_depth_size_inv=[1,1]),bt&&bt.useMeterToDem&&ln){const Tn=(1<<ln.tileID.canonical.z)*j.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Yt.u_meter_to_dem=Tn}if(bt&&bt.labelPlaneMatrixInv&&(Yt.u_label_plane_matrix_inv=bt.labelPlaneMatrixInv),lt.setTerrainUniformValues(kt,Yt),this.painter.transform.projection.name==="globe"){const Tn=this.globeUniformValues(this.painter.transform,ot.tileID.canonical,bt&&bt.useDenormalizedUpVectorScale);lt.setGlobeUniformValues(kt,Tn)}}globeUniformValues(ot,lt,bt){const kt=ot.projection;return{u_tile_tl_up:kt.upVector(lt,0,0),u_tile_tr_up:kt.upVector(lt,j.EXTENT,0),u_tile_br_up:kt.upVector(lt,j.EXTENT,j.EXTENT),u_tile_bl_up:kt.upVector(lt,0,j.EXTENT),u_tile_up_scale:bt?j.GLOBE_METERS_TO_ECEF:kt.upVectorScale(lt,ot.center.lat,ot.worldSize).metersToTile}}renderToBackBuffer(ot){const lt=this.painter,bt=this.painter.context;ot.length!==0&&(bt.bindFramebuffer.set(null),bt.viewport.set([0,0,lt.width,lt.height]),lt.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(kt,Ft,Yt,rn,ln){if(kt.transform.projection.name==="globe")(function(pn,vn,Tn,Dn,$n){const Wn=pn.context,Zn=Wn.gl;let Fn,jn;const Qn=pn.options.showTerrainWireframe?2:0,Gn=pn.transform,or=j.globeUseCustomAntiAliasing(pn,Wn,Gn),lr=(Or,br)=>{if(jn===Or)return;const xo=[Im[Or],"PROJECTION_GLOBE_VIEW"];or&&xo.push("CUSTOM_ANTIALIASING"),br&&xo.push(Im[Qn]),Fn=pn.useProgram("globeRaster",null,xo),jn=Or},er=pn.colorModeForRenderPass(),dr=new j.DepthMode(Zn.LEQUAL,j.DepthMode.ReadWrite,pn.depthRangeFor3D);om.update($n);const Ar=j.calculateGlobeMercatorMatrix(Gn),Fr=[j.mercatorXfromLng(Gn.center.lng),j.mercatorYfromLat(Gn.center.lat)],Dr=Qn?[!1,!0]:[!1],co=pn.globeSharedBuffers,Sr=[Gn.width*j.exported.devicePixelRatio,Gn.height*j.exported.devicePixelRatio],_i=Float32Array.from(Gn.globeMatrix),eo={useDenormalizedUpVectorScale:!0};if(Dr.forEach(Or=>{jn=-1;const br=Or?Zn.LINES:Zn.TRIANGLES;for(const xo of Dn){const mo=Tn.getTile(xo),vo=j.StencilMode.disabled,yo=vn.prevTerrainTileForTile[xo.key],Bo=vn.terrainTileForTile[xo.key];Cy(yo,Bo)&&om.newMorphing(xo.key,yo,Bo,$n,250),Wn.activeTexture.set(Zn.TEXTURE0),mo.texture.bind(Zn.LINEAR,Zn.CLAMP_TO_EDGE);const Ho=om.getMorphValuesForProxy(xo.key),Go=Ho?1:0;Ho&&j.extend$1(eo,{morphing:{srcDemTile:Ho.from,dstDemTile:Ho.to,phase:j.easeCubicInOut(Ho.phase)}});const No=j.tileCornersToBounds(xo.canonical),_o=j.getLatitudinalLod(No.getCenter().lat),es=j.getGridMatrix(xo.canonical,No,_o,Gn.worldSize/Gn._pixelsPerMercatorPixel),hs=j.globeNormalizeECEF(j.globeTileBounds(xo.canonical)),Ns=a_(Gn.projMatrix,_i,Ar,hs,j.globeToMercatorTransition(Gn.zoom),Fr,Gn.frustumCorners.TL,Gn.frustumCorners.TR,Gn.frustumCorners.BR,Gn.frustumCorners.BL,Gn.globeCenterInViewSpace,Gn.globeRadius,Sr,es);if(lr(Go,Or),vn.setupElevationDraw(mo,Fn,eo),pn.prepareDrawProgram(Wn,Fn,xo.toUnwrapped()),co){const[Vs,Ds,Ul]=Or?co.getWirefameBuffers(pn.context,_o):co.getGridBuffers(_o);Fn.draw(Wn,br,dr,vo,er,j.CullFaceMode.backCCW,Ns,"globe_raster",Vs,Ds,Ul)}}}),co){const Or=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];or&&Or.push("CUSTOM_ANTIALIASING"),Fn=pn.useProgram("globeRaster",null,Or);for(const br of Dn){const{x:xo,y:mo,z:vo}=br.canonical,yo=mo===0,Bo=mo===(1<<vo)-1,[Ho,Go,No,_o]=co.getPoleBuffers(vo);if(_o&&(yo||Bo)){const es=Tn.getTile(br);Wn.activeTexture.set(Zn.TEXTURE0),es.texture.bind(Zn.LINEAR,Zn.CLAMP_TO_EDGE);let hs=j.globePoleMatrixForTile(vo,xo,Gn);const Ns=j.globeNormalizeECEF(j.globeTileBounds(br.canonical)),Vs=(Ds,Ul)=>Ds.draw(Wn,Zn.TRIANGLES,dr,j.StencilMode.disabled,er,j.CullFaceMode.disabled,a_(Gn.projMatrix,hs,hs,Ns,0,Fr,Gn.frustumCorners.TL,Gn.frustumCorners.TR,Gn.frustumCorners.BR,Gn.frustumCorners.BL,Gn.globeCenterInViewSpace,Gn.globeRadius,Sr),"globe_pole_raster",Ul,No,_o);vn.setupElevationDraw(es,Fn,eo),pn.prepareDrawProgram(Wn,Fn,br.toUnwrapped()),yo&&Vs(Fn,Ho),Bo&&(hs=j.scale(j.create(),hs,[1,-1,1]),Vs(Fn,Go))}}}})(kt,Ft,Yt,rn,ln);else{const pn=kt.context,vn=pn.gl;let Tn,Dn;const $n=kt.options.showTerrainWireframe?2:0,Wn=(Gn,or)=>{if(Dn===Gn)return;const lr=[Im[Gn]];or&&lr.push(Im[$n]),Tn=kt.useProgram("terrainRaster",null,lr),Dn=Gn},Zn=kt.colorModeForRenderPass(),Fn=new j.DepthMode(vn.LEQUAL,j.DepthMode.ReadWrite,kt.depthRangeFor3D);om.update(ln);const jn=kt.transform,Qn=6*Math.pow(1.5,22-jn.zoom)*Ft.exaggeration();($n?[!1,!0]:[!1]).forEach(Gn=>{Dn=-1;const or=Gn?vn.LINES:vn.TRIANGLES,[lr,er]=Gn?Ft.getWirefameBuffer():[Ft.gridIndexBuffer,Ft.gridSegments];for(const dr of rn){const Ar=Yt.getTile(dr),Fr=j.StencilMode.disabled,Dr=Ft.prevTerrainTileForTile[dr.key],co=Ft.terrainTileForTile[dr.key];Cy(Dr,co)&&om.newMorphing(dr.key,Dr,co,ln,250),pn.activeTexture.set(vn.TEXTURE0),Ar.texture.bind(vn.LINEAR,vn.CLAMP_TO_EDGE,vn.LINEAR_MIPMAP_NEAREST);const Sr=om.getMorphValuesForProxy(dr.key),_i=Sr?1:0;let eo;Sr&&(eo={morphing:{srcDemTile:Sr.from,dstDemTile:Sr.to,phase:j.easeCubicInOut(Sr.phase)}});const Or=Ty(dr.projMatrix,Ts(dr.canonical,jn.renderWorldCopies)?Qn/10:Qn);Wn(_i,Gn),Ft.setupElevationDraw(Ar,Tn,eo),kt.prepareDrawProgram(pn,Tn,dr.toUnwrapped()),Tn.draw(pn,or,Fn,Fr,Zn,j.CullFaceMode.backCCW,Or,"terrain_raster",Ft.gridBuffer,lr,er)}})}}(lt,this,this.proxySourceCache,ot,this._updateTimestamp),this.renderingToTexture=!0,lt.gpuTimingDeferredRenderEnd(),ot.splice(0,ot.length))}renderBatch(ot){if(this._drapedRenderBatches.length===0)return ot+1;this.renderingToTexture=!0;const lt=this.painter,bt=this.painter.context,kt=this.proxySourceCache,Ft=this.proxiedCoords[kt.id],Yt=this._drapedRenderBatches.shift(),rn=[],ln=lt.style.order;let pn=0;for(const vn of Ft){const Tn=kt.getTileByID(vn.proxyTileKey),Dn=kt.proxyCachedFBO[vn.key]?kt.proxyCachedFBO[vn.key][ot]:void 0,$n=Dn!==void 0?kt.renderCache[Dn]:this.pool[pn++],Wn=Dn!==void 0;if(Tn.texture=$n.tex,Wn&&!$n.dirty){rn.push(Tn.tileID);continue}let Zn;bt.bindFramebuffer.set($n.fb.framebuffer),this.renderedToTile=!1,$n.dirty&&(bt.clear({color:j.Color.transparent,stencil:0}),$n.dirty=!1);for(let Fn=Yt.start;Fn<=Yt.end;++Fn){const jn=lt.style._layers[ln[Fn]];if(jn.isHidden(lt.transform.zoom))continue;const Qn=lt.style._getLayerSourceCache(jn),Gn=Qn?this.proxyToSource[vn.key][Qn.id]:[vn];if(!Gn)continue;const or=Gn;bt.viewport.set([0,0,$n.fb.width,$n.fb.height]),Zn!==(Qn?Qn.id:null)&&(this._setupStencil($n,Gn,jn,Qn),Zn=Qn?Qn.id:null),lt.renderLayer(lt,Qn,jn,or)}this.renderedToTile?($n.dirty=!0,rn.push(Tn.tileID)):Wn||--pn,pn===5&&(pn=0,this.renderToBackBuffer(rn))}return this.renderToBackBuffer(rn),this.renderingToTexture=!1,bt.bindFramebuffer.set(null),bt.viewport.set([0,0,lt.width,lt.height]),Yt.end+1}postRender(){}renderCacheEfficiency(ot){const lt=ot.order.length;if(lt===0)return{efficiency:100};let bt,kt=0,Ft=0,Yt=!1;for(let rn=0;rn<lt;++rn){const ln=ot._layers[ot.order[rn]];this._style.isLayerDraped(ln)?(Yt&&++kt,++Ft):Yt||(Yt=!0,bt=ln.id)}return Ft===0?{efficiency:100}:{efficiency:100*(1-kt/Ft),firstUndrapedLayer:bt}}getMinElevationBelowMSL(){let ot=0;return this._visibleDemTiles.filter(lt=>lt.dem).forEach(lt=>{ot=Math.min(ot,lt.dem.tree.minimums[0])}),ot===0?ot:(ot-30)*this._exaggeration}raycast(ot,lt,bt){if(!this._visibleDemTiles)return null;const kt=this._visibleDemTiles.filter(Ft=>Ft.dem).map(Ft=>{const Yt=Ft.tileID,rn=1<<Yt.overscaledZ,{x:ln,y:pn}=Yt.canonical,vn=ln/rn,Tn=(ln+1)/rn,Dn=pn/rn,$n=(pn+1)/rn;return{minx:vn,miny:Dn,maxx:Tn,maxy:$n,t:Ft.dem.tree.raycastRoot(vn,Dn,Tn,$n,ot,lt,bt),tile:Ft}});kt.sort((Ft,Yt)=>(Ft.t!==null?Ft.t:Number.MAX_VALUE)-(Yt.t!==null?Yt.t:Number.MAX_VALUE));for(const Ft of kt){if(Ft.t==null)return null;const Yt=Ft.tile.dem.tree.raycast(Ft.minx,Ft.miny,Ft.maxx,Ft.maxy,ot,lt,bt);if(Yt!=null)return Yt}return null}_createFBO(){const ot=this.painter.context,lt=ot.gl,bt=this.drapeBufferSize;ot.activeTexture.set(lt.TEXTURE0);const kt=new j.Texture(ot,{width:bt[0],height:bt[1],data:null},lt.RGBA);kt.bind(lt.LINEAR,lt.CLAMP_TO_EDGE);const Ft=ot.createFramebuffer(bt[0],bt[1],!1);return Ft.colorAttachment.set(kt.texture),Ft.depthAttachment=new Wo(ot,Ft.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=ot.createRenderbuffer(ot.gl.DEPTH_STENCIL,bt[0],bt[1]),this._stencilRef=0,Ft.depthAttachment.set(this._sharedDepthStencil),ot.clear({stencil:0})):Ft.depthAttachment.set(this._sharedDepthStencil),ot.extTextureFilterAnisotropic&&!ot.extTextureFilterAnisotropicForceOff&&lt.texParameterf(lt.TEXTURE_2D,ot.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ot.extTextureFilterAnisotropicMax),{fb:Ft,tex:kt,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const ot in this._style._sourceCaches)if(this._style._sourceCaches[ot].hasTransition())return!0;return this._style.order.some(ot=>{const lt=this._style._layers[ot],bt=lt.isHidden(this.painter.transform.zoom),kt=lt.getCrossfadeParameters(),Ft=!!kt&&kt.t!==1,Yt=lt.hasTransition();return lt.type!=="custom"&&!bt&&(Ft||Yt)})}_clearRasterFadeFromRenderCache(){let ot=!1;for(const lt in this._style._sourceCaches)if(this._style._sourceCaches[lt]._source instanceof Cn){ot=!0;break}if(ot)for(let lt=0;lt<this._style.order.length;++lt){const bt=this._style._layers[this._style.order[lt]],kt=bt.isHidden(this.painter.transform.zoom),Ft=this._style._getLayerSourceCache(bt);if(bt.type!=="raster"||kt||!Ft)continue;const Yt=bt.paint.get("raster-fade-duration");for(const rn of this.proxyCoords){const ln=this.proxyToSource[rn.key][Ft.id];if(ln)for(const pn of ln){const vn=cv(Ft.getTile(pn),Ft.findLoadedParent(pn,0),Ft,this.painter.transform,Yt);(vn.opacity!==1||vn.mix!==0)&&this._clearRenderCacheForTile(Ft.id,pn)}}}}_setupDrapedRenderBatches(){const ot=this._style.order,lt=ot.length;if(lt===0)return;const bt=[];let kt,Ft=0,Yt=this._style._layers[ot[Ft]];for(;!this._style.isLayerDraped(Yt)&&Yt.isHidden(this.painter.transform.zoom)&&++Ft<lt;)Yt=this._style._layers[ot[Ft]];for(;Ft<lt;++Ft){const rn=this._style._layers[ot[Ft]];rn.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(rn)?kt===void 0&&(kt=Ft):kt!==void 0&&(bt.push({start:kt,end:Ft-1}),kt=void 0))}kt!==void 0&&bt.push({start:kt,end:Ft-1}),this._drapedRenderBatches=bt}_setupRenderCache(ot){const lt=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,lt.renderCache.length>lt.renderCachePool.length){const Yt=Object.values(lt.proxyCachedFBO);lt.proxyCachedFBO={};for(let rn=0;rn<Yt.length;++rn){const ln=Object.values(Yt[rn]);lt.renderCachePool.push(...ln)}}return}this._clearRasterFadeFromRenderCache();const bt=this.proxyCoords,kt=this._tilesDirty;for(let Yt=bt.length-1;Yt>=0;Yt--){const rn=bt[Yt];if(lt.getTileByID(rn.key),lt.proxyCachedFBO[rn.key]!==void 0){const ln=ot[rn.key],pn=this.proxyToSource[rn.key];let vn=0;for(const Tn in pn){const Dn=pn[Tn],$n=ln[Tn];if(!$n||$n.length!==Dn.length||Dn.some((Wn,Zn)=>Wn!==$n[Zn]||kt[Tn]&&kt[Tn].hasOwnProperty(Wn.key))){vn=-1;break}++vn}for(const Tn in lt.proxyCachedFBO[rn.key])lt.renderCache[lt.proxyCachedFBO[rn.key][Tn]].dirty=vn<0||vn!==Object.values(ln).length}}const Ft=[...this._drapedRenderBatches];Ft.sort((Yt,rn)=>rn.end-rn.start-(Yt.end-Yt.start));for(const Yt of Ft)for(const rn of bt){if(lt.proxyCachedFBO[rn.key])continue;let ln=lt.renderCachePool.pop();ln===void 0&&lt.renderCache.length<50&&(ln=lt.renderCache.length,lt.renderCache.push(this._createFBO())),ln!==void 0&&(lt.proxyCachedFBO[rn.key]={},lt.proxyCachedFBO[rn.key][Yt.start]=ln,lt.renderCache[ln].dirty=!0)}this._tilesDirty={}}_setupStencil(ot,lt,bt,kt){if(!kt||!this._sourceTilesOverlap[kt.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const Ft=this.painter.context,Yt=Ft.gl;if(lt.length<=1)return void(this._overlapStencilType=!1);let rn;if(bt.isTileClipped())rn=lt.length,this._overlapStencilMode.test={func:Yt.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(lt[0].overscaledZ>lt[lt.length-1].overscaledZ))return void(this._overlapStencilType=!1);rn=1,this._overlapStencilMode.test={func:Yt.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+rn>255&&(Ft.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=rn,this._overlapStencilMode.ref=this._stencilRef,bt.isTileClipped()&&this._renderTileClippingMasks(lt,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(ot){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[ot.key]),this._overlapStencilMode):j.StencilMode.disabled}_renderTileClippingMasks(ot,lt){const bt=this.painter,kt=this.painter.context,Ft=kt.gl;bt._tileClippingMaskIDs={},kt.setColorMode(j.ColorMode.disabled),kt.setDepthMode(j.DepthMode.disabled);const Yt=bt.useProgram("clippingMask");for(const rn of ot){const ln=bt._tileClippingMaskIDs[rn.key]=--lt;Yt.draw(kt,Ft.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Ft.ALWAYS,mask:0},ln,255,Ft.KEEP,Ft.KEEP,Ft.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,lp(rn.projMatrix),"$clipping",bt.tileExtentBuffer,bt.quadTriangleIndexBuffer,bt.tileExtentSegments)}}pointCoordinate(ot){const lt=this.painter.transform;if(ot.x<0||ot.x>lt.width||ot.y<0||ot.y>lt.height)return null;const bt=[ot.x,ot.y,1,1];j.transformMat4$1(bt,bt,lt.pixelMatrixInverse),j.scale$1(bt,bt,1/bt[3]),bt[0]/=lt.worldSize,bt[1]/=lt.worldSize;const kt=lt._camera.position,Ft=j.mercatorZfromAltitude(1,lt.center.lat),Yt=[kt[0],kt[1],kt[2]/Ft,0],rn=j.subtract([],bt.slice(0,3),Yt);j.normalize(rn,rn);const ln=this.raycast(Yt,rn,this._exaggeration);return ln!==null&&ln?(j.scaleAndAdd(Yt,Yt,rn,ln),Yt[3]=Yt[2],Yt[2]*=Ft,Yt):null}drawDepth(){const ot=this.painter,lt=ot.context,bt=this.proxySourceCache,kt=Math.ceil(ot.width),Ft=Math.ceil(ot.height);if(!this._depthFBO||this._depthFBO.width===kt&&this._depthFBO.height===Ft||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Yt=lt.gl,rn=lt.createFramebuffer(kt,Ft,!0);lt.activeTexture.set(Yt.TEXTURE0);const ln=new j.Texture(lt,{width:kt,height:Ft,data:null},Yt.RGBA);ln.bind(Yt.NEAREST,Yt.CLAMP_TO_EDGE),rn.colorAttachment.set(ln.texture);const pn=lt.createRenderbuffer(lt.gl.DEPTH_COMPONENT16,kt,Ft);rn.depthAttachment.set(pn),this._depthFBO=rn,this._depthTexture=ln}lt.bindFramebuffer.set(this._depthFBO.framebuffer),lt.viewport.set([0,0,kt,Ft]),function(Yt,rn,ln,pn){if(Yt.transform.projection.name==="globe")return;const vn=Yt.context,Tn=vn.gl;vn.clear({depth:1});const Dn=Yt.useProgram("terrainDepth"),$n=new j.DepthMode(Tn.LESS,j.DepthMode.ReadWrite,Yt.depthRangeFor3D);for(const Wn of pn){const Zn=ln.getTile(Wn),Fn=Ty(Wn.projMatrix,0);rn.setupElevationDraw(Zn,Dn),Dn.draw(vn,Tn.TRIANGLES,$n,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.backCCW,Fn,"terrain_depth",rn.gridBuffer,rn.gridIndexBuffer,rn.gridNoSkirtSegments)}}(ot,this,bt,this.proxyCoords)}_setupProxiedCoordsForOrtho(ot,lt,bt){if(ot.getSource()instanceof ir)return this._setupProxiedCoordsForImageSource(ot,lt,bt);this._findCoveringTileCache[ot.id]=this._findCoveringTileCache[ot.id]||{};const kt=this.proxiedCoords[ot.id]=[],Ft=this.proxyCoords;for(let rn=0;rn<Ft.length;rn++){const ln=Ft[rn],pn=this._findTileCoveringTileID(ln,ot);if(pn){const vn=this._createProxiedId(ln,pn,bt[ln.key]&&bt[ln.key][ot.id]);kt.push(vn),this.proxyToSource[ln.key][ot.id]=[vn]}}let Yt=!1;for(let rn=0;rn<lt.length;rn++){const ln=ot.getTile(lt[rn]);if(!ln||!ln.hasData())continue;const pn=this._findTileCoveringTileID(ln.tileID,this.proxySourceCache);if(pn&&pn.tileID.canonical.z!==ln.tileID.canonical.z){const vn=this.proxyToSource[pn.tileID.key][ot.id],Tn=this._createProxiedId(pn.tileID,ln,bt[pn.tileID.key]&&bt[pn.tileID.key][ot.id]);vn?vn.splice(vn.length-1,0,Tn):this.proxyToSource[pn.tileID.key][ot.id]=[Tn],kt.push(Tn),Yt=!0}}this._sourceTilesOverlap[ot.id]=Yt}_setupProxiedCoordsForImageSource(ot,lt,bt){if(!ot.getSource().loaded())return;const kt=this.proxiedCoords[ot.id]=[],Ft=this.proxyCoords,Yt=ot.getSource(),rn=new j.pointGeometry(Yt.tileID.x,Yt.tileID.y)._div(1<<Yt.tileID.z),ln=Yt.coordinates.map(j.MercatorCoordinate.fromLngLat).reduce((vn,Tn)=>(vn.min.x=Math.min(vn.min.x,Tn.x-rn.x),vn.min.y=Math.min(vn.min.y,Tn.y-rn.y),vn.max.x=Math.max(vn.max.x,Tn.x-rn.x),vn.max.y=Math.max(vn.max.y,Tn.y-rn.y),vn),{min:new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new j.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),pn=(vn,Tn)=>{const Dn=vn.wrap+vn.canonical.x/(1<<vn.canonical.z),$n=vn.canonical.y/(1<<vn.canonical.z),Wn=j.EXTENT/(1<<vn.canonical.z),Zn=Tn.wrap+Tn.canonical.x/(1<<Tn.canonical.z),Fn=Tn.canonical.y/(1<<Tn.canonical.z);return Dn+Wn<Zn+ln.min.x||Dn>Zn+ln.max.x||$n+Wn<Fn+ln.min.y||$n>Fn+ln.max.y};for(let vn=0;vn<Ft.length;vn++){const Tn=Ft[vn];for(let Dn=0;Dn<lt.length;Dn++){const $n=ot.getTile(lt[Dn]);if(!$n||!$n.hasData()||pn(Tn,$n.tileID))continue;const Wn=this._createProxiedId(Tn,$n,bt[Tn.key]&&bt[Tn.key][ot.id]),Zn=this.proxyToSource[Tn.key][ot.id];Zn?Zn.push(Wn):this.proxyToSource[Tn.key][ot.id]=[Wn],kt.push(Wn)}}}_createProxiedId(ot,lt,bt){let kt=this.orthoMatrix;if(bt){const Ft=bt.find(Yt=>Yt.key===lt.tileID.key);if(Ft)return Ft}if(lt.tileID.key!==ot.key){const Ft=ot.canonical.z-lt.tileID.canonical.z;let Yt,rn,ln;kt=j.create();const pn=lt.tileID.wrap-ot.wrap<<ot.overscaledZ;Ft>0?(Yt=j.EXTENT>>Ft,rn=Yt*((lt.tileID.canonical.x<<Ft)-ot.canonical.x+pn),ln=Yt*((lt.tileID.canonical.y<<Ft)-ot.canonical.y)):(Yt=j.EXTENT<<-Ft,rn=j.EXTENT*(lt.tileID.canonical.x-(ot.canonical.x+pn<<-Ft)),ln=j.EXTENT*(lt.tileID.canonical.y-(ot.canonical.y<<-Ft))),j.ortho(kt,0,Yt,0,Yt,0,1),j.translate(kt,kt,[rn,ln,0])}return new qm(lt.tileID,ot.key,kt)}_findTileCoveringTileID(ot,lt){let bt=lt.getTile(ot);if(bt&&bt.hasData())return bt;const kt=this._findCoveringTileCache[lt.id],Ft=kt[ot.key];if(bt=Ft?lt.getTileByID(Ft):null,bt&&bt.hasData()||Ft===null)return bt;let Yt=bt?bt.tileID:ot,rn=Yt.overscaledZ;const ln=lt.getSource().minzoom,pn=[];if(!Ft){const Tn=lt.getSource().maxzoom;if(ot.canonical.z>=Tn){const Dn=ot.canonical.z-Tn;lt.getSource().reparseOverscaled?(rn=Math.max(ot.canonical.z+2,lt.transform.tileZoom),Yt=new j.OverscaledTileID(rn,ot.wrap,Tn,ot.canonical.x>>Dn,ot.canonical.y>>Dn)):Dn!==0&&(rn=Tn,Yt=new j.OverscaledTileID(rn,ot.wrap,Tn,ot.canonical.x>>Dn,ot.canonical.y>>Dn))}Yt.key!==ot.key&&(pn.push(Yt.key),bt=lt.getTile(Yt))}const vn=Tn=>{pn.forEach(Dn=>{kt[Dn]=Tn}),pn.length=0};for(rn-=1;rn>=ln&&(!bt||!bt.hasData());rn--){bt&&vn(bt.tileID.key);const Tn=Yt.calculateScaledKey(rn);if(bt=lt.getTileByID(Tn),bt&&bt.hasData())break;const Dn=kt[Tn];if(Dn===null)break;Dn===void 0?pn.push(Tn):bt=lt.getTileByID(Dn)}return vn(bt?bt.tileID.key:null),bt&&bt.hasData()?bt:null}findDEMTileFor(ot){return this.enabled?this._findTileCoveringTileID(ot,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(ot,lt){let bt=this._tilesDirty[ot];bt||(bt=this._tilesDirty[ot]={}),bt[lt.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const ot=function(lt){let bt=0;const kt=new j.StructArrayLayout2ui4,Ft=131;for(let Yt=1;Yt<129;Yt++){for(let rn=1;rn<129;rn++)bt=Yt*Ft+rn,kt.emplaceBack(bt,bt+1),kt.emplaceBack(bt,bt+Ft),kt.emplaceBack(bt+1,bt+Ft),Yt===128&&kt.emplaceBack(bt+Ft,bt+Ft+1);kt.emplaceBack(bt+1,bt+1+Ft)}return kt}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(ot),this.wireframeSegments=j.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,ot.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class dv{static cacheKey(ot,lt,bt,kt){let Ft=`${lt}${kt?kt.cacheKey:""}`;for(const Yt of bt)ot.usedDefines.includes(Yt)&&(Ft+=`/${Yt}`);return Ft}constructor(ot,lt,bt,kt,Ft,Yt){const rn=ot.gl;this.program=rn.createProgram();const ln=function(Fn){const jn=[];for(let Qn=0;Qn<Fn.length;Qn++){if(Fn[Qn]===null)continue;const Gn=Fn[Qn].split(" ");jn.push(Gn.pop())}return jn}(bt.staticAttributes),pn=kt?kt.getBinderAttributes():[],vn=ln.concat(pn);let Tn=kt?kt.defines():[];Tn=Tn.concat(Yt.map(Fn=>`#define ${Fn}`));const Dn=Tn.concat(ot.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(pu):pu,pu,lv,gu.fragmentSource,i_.fragmentSource,bt.fragmentSource).join(`
`),$n=Tn.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,lv,gu.vertexSource,i_.vertexSource,r_.vertexSource,bt.vertexSource).join(`
`),Wn=rn.createShader(rn.FRAGMENT_SHADER);if(rn.isContextLost())return void(this.failedToCreate=!0);rn.shaderSource(Wn,Dn),rn.compileShader(Wn),rn.attachShader(this.program,Wn);const Zn=rn.createShader(rn.VERTEX_SHADER);if(rn.isContextLost())this.failedToCreate=!0;else{rn.shaderSource(Zn,$n),rn.compileShader(Zn),rn.attachShader(this.program,Zn),this.attributes={},this.numAttributes=vn.length;for(let Fn=0;Fn<this.numAttributes;Fn++)vn[Fn]&&(rn.bindAttribLocation(this.program,Fn,vn[Fn]),this.attributes[vn[Fn]]=Fn);rn.linkProgram(this.program),rn.deleteShader(Zn),rn.deleteShader(Wn),this.fixedUniforms=Ft(ot),this.binderUniforms=kt?kt.getUniforms(ot):[],Yt.includes("TERRAIN")&&(this.terrainUniforms=(Fn=>({u_dem:new j.Uniform1i(Fn),u_dem_prev:new j.Uniform1i(Fn),u_dem_unpack:new j.Uniform4f(Fn),u_dem_tl:new j.Uniform2f(Fn),u_dem_scale:new j.Uniform1f(Fn),u_dem_tl_prev:new j.Uniform2f(Fn),u_dem_scale_prev:new j.Uniform1f(Fn),u_dem_size:new j.Uniform1f(Fn),u_dem_lerp:new j.Uniform1f(Fn),u_exaggeration:new j.Uniform1f(Fn),u_depth:new j.Uniform1i(Fn),u_depth_size_inv:new j.Uniform2f(Fn),u_meter_to_dem:new j.Uniform1f(Fn),u_label_plane_matrix_inv:new j.UniformMatrix4f(Fn)}))(ot)),Yt.includes("GLOBE")&&(this.globeUniforms=(Fn=>({u_tile_tl_up:new j.Uniform3f(Fn),u_tile_tr_up:new j.Uniform3f(Fn),u_tile_br_up:new j.Uniform3f(Fn),u_tile_bl_up:new j.Uniform3f(Fn),u_tile_up_scale:new j.Uniform1f(Fn)}))(ot)),Yt.includes("FOG")&&(this.fogUniforms=(Fn=>({u_fog_matrix:new j.UniformMatrix4f(Fn),u_fog_range:new j.Uniform2f(Fn),u_fog_color:new j.Uniform4f(Fn),u_fog_horizon_blend:new j.Uniform1f(Fn),u_fog_temporal_offset:new j.Uniform1f(Fn),u_frustum_tl:new j.Uniform3f(Fn),u_frustum_tr:new j.Uniform3f(Fn),u_frustum_br:new j.Uniform3f(Fn),u_frustum_bl:new j.Uniform3f(Fn),u_globe_pos:new j.Uniform3f(Fn),u_globe_radius:new j.Uniform1f(Fn),u_globe_transition:new j.Uniform1f(Fn),u_is_globe:new j.Uniform1i(Fn),u_viewport:new j.Uniform2f(Fn)}))(ot))}}setTerrainUniformValues(ot,lt){if(!this.terrainUniforms)return;const bt=this.terrainUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const kt in lt)bt[kt]&&bt[kt].set(this.program,kt,lt[kt])}}setGlobeUniformValues(ot,lt){if(!this.globeUniforms)return;const bt=this.globeUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const kt in lt)bt[kt]&&bt[kt].set(this.program,kt,lt[kt])}}setFogUniformValues(ot,lt){if(!this.fogUniforms)return;const bt=this.fogUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const kt in lt)bt[kt].set(this.program,kt,lt[kt])}}draw(ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn){const Fn=ot.gl;if(this.failedToCreate)return;ot.program.set(this.program),ot.setDepthMode(bt),ot.setStencilMode(kt),ot.setColorMode(Ft),ot.setCullFace(Yt);for(const Qn of Object.keys(this.fixedUniforms))this.fixedUniforms[Qn].set(this.program,Qn,rn[Qn]);Wn&&Wn.setUniforms(this.program,ot,this.binderUniforms,Dn,{zoom:$n});const jn={[Fn.LINES]:2,[Fn.TRIANGLES]:3,[Fn.LINE_STRIP]:1}[lt];for(const Qn of Tn.get()){const Gn=Qn.vaos||(Qn.vaos={});(Gn[ln]||(Gn[ln]=new im)).bind(ot,this,pn,Wn?Wn.getPaintVertexBuffers():[],vn,Qn.vertexOffset,Zn||[]),Fn.drawElements(lt,Qn.primitiveLength*jn,Fn.UNSIGNED_SHORT,Qn.primitiveOffset*jn*2)}}}function o0(dt,ot,lt){const bt=1/dn(lt,1,ot.transform.tileZoom),kt=Math.pow(2,lt.tileID.overscaledZ),Ft=lt.tileSize*Math.pow(2,ot.transform.tileZoom)/kt,Yt=Ft*(lt.tileID.canonical.x+lt.tileID.wrap*kt),rn=Ft*lt.tileID.canonical.y;return{u_image:0,u_texsize:lt.imageAtlasTexture.size,u_scale:[bt,dt.fromScale,dt.toScale],u_fade:dt.t,u_pixel_coord_upper:[Yt>>16,rn>>16],u_pixel_coord_lower:[65535&Yt,65535&rn]}}const Ry=j.create(),Zm=(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn)=>{const Tn=ot.style.light,Dn=Tn.properties.get("position"),$n=[Dn.x,Dn.y,Dn.z],Wn=j.create$1();Tn.properties.get("anchor")==="viewport"&&(j.fromRotation(Wn,-ot.transform.angle),j.transformMat3($n,$n,Wn));const Zn=Tn.properties.get("color"),Fn=ot.transform,jn={u_matrix:dt,u_lightpos:$n,u_lightintensity:Tn.properties.get("intensity"),u_lightcolor:[Zn.r,Zn.g,Zn.b],u_vertical_gradient:+lt,u_opacity:bt,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ry,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:kt,u_edge_radius:Ft};return Fn.projection.name==="globe"&&(jn.u_tile_id=[Yt.canonical.x,Yt.canonical.y,1<<Yt.canonical.z],jn.u_zoom_transition=ln,jn.u_inv_rot_matrix=vn,jn.u_merc_center=pn,jn.u_up_dir=Fn.projection.upVector(new j.CanonicalTileID(0,0,0),pn[0]*j.EXTENT,pn[1]*j.EXTENT),jn.u_height_lift=rn),jn},gv=(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn)=>{const $n=Zm(dt,ot,lt,bt,kt,Ft,Yt,pn,vn,Tn,Dn),Wn={u_height_factor:-Math.pow(2,Yt.overscaledZ)/ln.tileSize/8};return j.extend($n,o0(rn,ot,ln),Wn)},Iy=dt=>({u_matrix:dt}),mu=(dt,ot,lt,bt)=>j.extend(Iy(dt),o0(lt,ot,bt)),u_=(dt,ot)=>({u_matrix:dt,u_world:ot}),Oy=(dt,ot,lt,bt,kt)=>j.extend(mu(dt,ot,lt,bt),{u_world:kt}),Ym=j.create(),Km=(dt,ot,lt,bt,kt,Ft)=>{const Yt=dt.transform,rn=Yt.projection.name==="globe";let ln;if(Ft.paint.get("circle-pitch-alignment")==="map")if(rn){const vn=j.globePixelsToTileUnits(Yt.zoom,ot.canonical)*Yt._pixelsPerMercatorPixel;ln=Float32Array.from([vn,0,0,vn])}else ln=Yt.calculatePixelsToTileUnitsMatrix(lt);else ln=new Float32Array([Yt.pixelsToGLUnits[0],0,0,Yt.pixelsToGLUnits[1]]);const pn={u_camera_to_center_distance:Yt.cameraToCenterDistance,u_matrix:dt.translatePosMatrix(ot.projMatrix,lt,Ft.paint.get("circle-translate"),Ft.paint.get("circle-translate-anchor")),u_device_pixel_ratio:j.exported.devicePixelRatio,u_extrude_scale:ln,u_inv_rot_matrix:Ym,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(rn){pn.u_inv_rot_matrix=bt,pn.u_merc_center=kt,pn.u_tile_id=[ot.canonical.x,ot.canonical.y,1<<ot.canonical.z],pn.u_zoom_transition=j.globeToMercatorTransition(Yt.zoom);const vn=kt[0]*j.EXTENT,Tn=kt[1]*j.EXTENT;pn.u_up_dir=Yt.projection.upVector(new j.CanonicalTileID(0,0,0),vn,Tn)}return pn},s0=dt=>{const ot=[];return dt.paint.get("circle-pitch-alignment")==="map"&&ot.push("PITCH_WITH_MAP"),dt.paint.get("circle-pitch-scale")==="map"&&ot.push("SCALE_WITH_MAP"),ot},c_=(dt,ot,lt,bt)=>{const kt=j.EXTENT/lt.tileSize;return{u_matrix:dt,u_camera_to_center_distance:ot.getCameraToCenterDistance(bt),u_extrude_scale:[ot.pixelsToGLUnits[0]/kt,ot.pixelsToGLUnits[1]/kt]}},h_=(dt,ot,lt=1)=>({u_matrix:dt,u_color:ot,u_overlay:0,u_overlay_scale:lt}),vp=j.create(),pv=(dt,ot,lt,bt,kt,Ft,Yt)=>{const rn=dt.transform,ln=rn.projection.name==="globe",pn=ln?j.globePixelsToTileUnits(rn.zoom,ot.canonical)*rn._pixelsPerMercatorPixel:dn(lt,1,Ft),vn={u_matrix:ot.projMatrix,u_extrude_scale:pn,u_intensity:Yt,u_inv_rot_matrix:vp,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(ln){vn.u_inv_rot_matrix=bt,vn.u_merc_center=kt,vn.u_tile_id=[ot.canonical.x,ot.canonical.y,1<<ot.canonical.z],vn.u_zoom_transition=j.globeToMercatorTransition(rn.zoom);const Tn=kt[0]*j.EXTENT,Dn=kt[1]*j.EXTENT;vn.u_up_dir=rn.projection.upVector(new j.CanonicalTileID(0,0,0),Tn,Dn)}return vn},Om=(dt,ot,lt,bt,kt,Ft,Yt,rn)=>{const ln=dt.transform,pn=ln.calculatePixelsToTileUnitsMatrix(ot),vn={u_matrix:Xm(dt,ot,lt,kt),u_pixels_to_tile_units:pn,u_device_pixel_ratio:Yt,u_units_to_pixels:[1/ln.pixelsToGLUnits[0],1/ln.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:Ft,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:rn};if(_v(lt)){const Tn=yv(ot,dt.transform);vn.u_texsize=ot.lineAtlasTexture.size,vn.u_scale=[Tn,bt.fromScale,bt.toScale],vn.u_mix=bt.t}return vn},mv=(dt,ot,lt,bt,kt,Ft)=>{const Yt=dt.transform,rn=yv(ot,Yt);return{u_matrix:Xm(dt,ot,lt,kt),u_texsize:ot.imageAtlasTexture.size,u_pixels_to_tile_units:Yt.calculatePixelsToTileUnitsMatrix(ot),u_device_pixel_ratio:Ft,u_image:0,u_scale:[rn,bt.fromScale,bt.toScale],u_fade:bt.t,u_units_to_pixels:[1/Yt.pixelsToGLUnits[0],1/Yt.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function yv(dt,ot){return 1/dn(dt,1,ot.tileZoom)}function Xm(dt,ot,lt,bt){return dt.translatePosMatrix(bt||ot.tileID.projMatrix,ot,lt.paint.get("line-translate"),lt.paint.get("line-translate-anchor"))}function _v(dt){const ot=dt.paint.get("line-dasharray").value;return ot.value||ot.kind!=="constant"}const bp=(dt,ot,lt,bt,kt,Ft)=>{return{u_matrix:dt,u_tl_parent:ot,u_scale_parent:lt,u_fade_t:bt.mix,u_opacity:bt.opacity*kt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:kt.paint.get("raster-brightness-min"),u_brightness_high:kt.paint.get("raster-brightness-max"),u_saturation_factor:(rn=kt.paint.get("raster-saturation"),rn>0?1-1/(1.001-rn):-rn),u_contrast_factor:(Yt=kt.paint.get("raster-contrast"),Yt>0?1/(1-Yt):1+Yt),u_spin_weights:f_(kt.paint.get("raster-hue-rotate")),u_perspective_transform:Ft};var Yt,rn};function f_(dt){dt*=Math.PI/180;const ot=Math.sin(dt),lt=Math.cos(dt);return[(2*lt+1)/3,(-Math.sqrt(3)*ot-lt+1)/3,(Math.sqrt(3)*ot-lt+1)/3]}const My=j.create(),a0=(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn)=>{const Fn=kt.transform,jn={u_is_size_zoom_constant:+(dt==="constant"||dt==="source"),u_is_size_feature_constant:+(dt==="constant"||dt==="camera"),u_size_t:ot?ot.uSizeT:0,u_size:ot?ot.uSize:0,u_camera_to_center_distance:Fn.cameraToCenterDistance,u_rotate_symbol:+lt,u_aspect_ratio:Fn.width/Fn.height,u_fade_change:kt.options.fadeDuration?kt.symbolFadeChange:1,u_matrix:Ft,u_label_plane_matrix:Yt,u_coord_matrix:rn,u_is_text:+ln,u_pitch_with_map:+bt,u_texsize:pn,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:My,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:My,u_up_vector:[0,-1,0]};return Zn.name==="globe"&&(jn.u_tile_id=[vn.canonical.x,vn.canonical.y,1<<vn.canonical.z],jn.u_zoom_transition=Tn,jn.u_inv_rot_matrix=$n,jn.u_merc_center=Dn,jn.u_camera_forward=Fn._camera.forward(),jn.u_ecef_origin=j.globeECEFOrigin(Fn.globeMatrix,vn.toUnwrapped()),jn.u_tile_matrix=Float32Array.from(Fn.globeMatrix),jn.u_up_vector=Wn),jn},d_=(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn,Fn)=>j.extend(a0(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,Tn,Dn,$n,Wn,Zn,Fn),{u_gamma_scale:bt?kt.transform.cameraToCenterDistance*Math.cos(kt.terrain?0:kt.transform._pitch):1,u_device_pixel_ratio:j.exported.devicePixelRatio,u_is_halo:+vn}),Qm=(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn)=>j.extend(d_(dt,ot,lt,bt,kt,Ft,Yt,rn,!0,ln,!0,vn,Tn,Dn,$n,Wn,Zn),{u_texsize_icon:pn,u_texture_icon:1}),Pu=(dt,ot,lt)=>({u_matrix:dt,u_opacity:ot,u_color:lt}),l0=(dt,ot,lt,bt,kt,Ft)=>j.extend(function(Yt,rn,ln,pn){const vn=ln.imageManager.getPattern(Yt.from.toString()),Tn=ln.imageManager.getPattern(Yt.to.toString()),{width:Dn,height:$n}=ln.imageManager.getPixelSize(),Wn=Math.pow(2,pn.tileID.overscaledZ),Zn=pn.tileSize*Math.pow(2,ln.transform.tileZoom)/Wn,Fn=Zn*(pn.tileID.canonical.x+pn.tileID.wrap*Wn),jn=Zn*pn.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:vn.tl,u_pattern_br_a:vn.br,u_pattern_tl_b:Tn.tl,u_pattern_br_b:Tn.br,u_texsize:[Dn,$n],u_mix:rn.t,u_pattern_size_a:vn.displaySize,u_pattern_size_b:Tn.displaySize,u_scale_a:rn.fromScale,u_scale_b:rn.toScale,u_tile_units_to_pixels:1/dn(pn,1,ln.transform.tileZoom),u_pixel_coord_upper:[Fn>>16,jn>>16],u_pixel_coord_lower:[65535&Fn,65535&jn]}}(bt,Ft,lt,kt),{u_matrix:dt,u_opacity:ot}),g_={fillExtrusion:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_lightpos:new j.Uniform3f(dt),u_lightintensity:new j.Uniform1f(dt),u_lightcolor:new j.Uniform3f(dt),u_vertical_gradient:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt),u_edge_radius:new j.Uniform1f(dt),u_ao:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_up_dir:new j.Uniform3f(dt),u_height_lift:new j.Uniform1f(dt)}),fillExtrusionPattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_lightpos:new j.Uniform3f(dt),u_lightintensity:new j.Uniform1f(dt),u_lightcolor:new j.Uniform3f(dt),u_vertical_gradient:new j.Uniform1f(dt),u_height_factor:new j.Uniform1f(dt),u_edge_radius:new j.Uniform1f(dt),u_ao:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_up_dir:new j.Uniform3f(dt),u_height_lift:new j.Uniform1f(dt),u_image:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt)}),fill:dt=>({u_matrix:new j.UniformMatrix4f(dt)}),fillPattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt)}),fillOutline:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_world:new j.Uniform2f(dt)}),fillOutlinePattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_world:new j.Uniform2f(dt),u_image:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt)}),circle:dt=>({u_camera_to_center_distance:new j.Uniform1f(dt),u_extrude_scale:new j.UniformMatrix2f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_up_dir:new j.Uniform3f(dt)}),collisionBox:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_extrude_scale:new j.Uniform2f(dt)}),collisionCircle:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_inv_matrix:new j.UniformMatrix4f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_viewport_size:new j.Uniform2f(dt)}),debug:dt=>({u_color:new j.UniformColor(dt),u_matrix:new j.UniformMatrix4f(dt),u_overlay:new j.Uniform1i(dt),u_overlay_scale:new j.Uniform1f(dt)}),clippingMask:dt=>({u_matrix:new j.UniformMatrix4f(dt)}),heatmap:dt=>({u_extrude_scale:new j.Uniform1f(dt),u_intensity:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_up_dir:new j.Uniform3f(dt)}),heatmapTexture:dt=>({u_image:new j.Uniform1i(dt),u_color_ramp:new j.Uniform1i(dt),u_opacity:new j.Uniform1f(dt)}),hillshade:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image:new j.Uniform1i(dt),u_latrange:new j.Uniform2f(dt),u_light:new j.Uniform2f(dt),u_shadow:new j.UniformColor(dt),u_highlight:new j.UniformColor(dt),u_accent:new j.UniformColor(dt)}),hillshadePrepare:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image:new j.Uniform1i(dt),u_dimension:new j.Uniform2f(dt),u_zoom:new j.Uniform1f(dt),u_unpack:new j.Uniform4f(dt)}),line:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_pixels_to_tile_units:new j.UniformMatrix2f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_units_to_pixels:new j.Uniform2f(dt),u_dash_image:new j.Uniform1i(dt),u_gradient_image:new j.Uniform1i(dt),u_image_height:new j.Uniform1f(dt),u_texsize:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_mix:new j.Uniform1f(dt),u_alpha_discard_threshold:new j.Uniform1f(dt),u_trim_offset:new j.Uniform2f(dt)}),linePattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_texsize:new j.Uniform2f(dt),u_pixels_to_tile_units:new j.UniformMatrix2f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_image:new j.Uniform1i(dt),u_units_to_pixels:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt),u_alpha_discard_threshold:new j.Uniform1f(dt)}),raster:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_tl_parent:new j.Uniform2f(dt),u_scale_parent:new j.Uniform1f(dt),u_fade_t:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt),u_image0:new j.Uniform1i(dt),u_image1:new j.Uniform1i(dt),u_brightness_low:new j.Uniform1f(dt),u_brightness_high:new j.Uniform1f(dt),u_saturation_factor:new j.Uniform1f(dt),u_contrast_factor:new j.Uniform1f(dt),u_spin_weights:new j.Uniform3f(dt),u_perspective_transform:new j.Uniform2f(dt)}),symbolIcon:dt=>({u_is_size_zoom_constant:new j.Uniform1i(dt),u_is_size_feature_constant:new j.Uniform1i(dt),u_size_t:new j.Uniform1f(dt),u_size:new j.Uniform1f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_rotate_symbol:new j.Uniform1i(dt),u_aspect_ratio:new j.Uniform1f(dt),u_fade_change:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_label_plane_matrix:new j.UniformMatrix4f(dt),u_coord_matrix:new j.UniformMatrix4f(dt),u_is_text:new j.Uniform1i(dt),u_pitch_with_map:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_camera_forward:new j.Uniform3f(dt),u_tile_matrix:new j.UniformMatrix4f(dt),u_up_vector:new j.Uniform3f(dt),u_ecef_origin:new j.Uniform3f(dt),u_texture:new j.Uniform1i(dt)}),symbolSDF:dt=>({u_is_size_zoom_constant:new j.Uniform1i(dt),u_is_size_feature_constant:new j.Uniform1i(dt),u_size_t:new j.Uniform1f(dt),u_size:new j.Uniform1f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_rotate_symbol:new j.Uniform1i(dt),u_aspect_ratio:new j.Uniform1f(dt),u_fade_change:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_label_plane_matrix:new j.UniformMatrix4f(dt),u_coord_matrix:new j.UniformMatrix4f(dt),u_is_text:new j.Uniform1i(dt),u_pitch_with_map:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_texture:new j.Uniform1i(dt),u_gamma_scale:new j.Uniform1f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_camera_forward:new j.Uniform3f(dt),u_tile_matrix:new j.UniformMatrix4f(dt),u_up_vector:new j.Uniform3f(dt),u_ecef_origin:new j.Uniform3f(dt),u_is_halo:new j.Uniform1i(dt)}),symbolTextAndIcon:dt=>({u_is_size_zoom_constant:new j.Uniform1i(dt),u_is_size_feature_constant:new j.Uniform1i(dt),u_size_t:new j.Uniform1f(dt),u_size:new j.Uniform1f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_rotate_symbol:new j.Uniform1i(dt),u_aspect_ratio:new j.Uniform1f(dt),u_fade_change:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_label_plane_matrix:new j.UniformMatrix4f(dt),u_coord_matrix:new j.UniformMatrix4f(dt),u_is_text:new j.Uniform1i(dt),u_pitch_with_map:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_texsize_icon:new j.Uniform2f(dt),u_texture:new j.Uniform1i(dt),u_texture_icon:new j.Uniform1i(dt),u_gamma_scale:new j.Uniform1f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_is_halo:new j.Uniform1i(dt)}),background:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_opacity:new j.Uniform1f(dt),u_color:new j.UniformColor(dt)}),backgroundPattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_opacity:new j.Uniform1f(dt),u_image:new j.Uniform1i(dt),u_pattern_tl_a:new j.Uniform2f(dt),u_pattern_br_a:new j.Uniform2f(dt),u_pattern_tl_b:new j.Uniform2f(dt),u_pattern_br_b:new j.Uniform2f(dt),u_texsize:new j.Uniform2f(dt),u_mix:new j.Uniform1f(dt),u_pattern_size_a:new j.Uniform2f(dt),u_pattern_size_b:new j.Uniform2f(dt),u_scale_a:new j.Uniform1f(dt),u_scale_b:new j.Uniform1f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_tile_units_to_pixels:new j.Uniform1f(dt)}),terrainRaster:s_,terrainDepth:s_,skybox:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_sun_direction:new j.Uniform3f(dt),u_cubemap:new j.Uniform1i(dt),u_opacity:new j.Uniform1f(dt),u_temporal_offset:new j.Uniform1f(dt)}),skyboxGradient:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_color_ramp:new j.Uniform1i(dt),u_center_direction:new j.Uniform3f(dt),u_radius:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt),u_temporal_offset:new j.Uniform1f(dt)}),skyboxCapture:dt=>({u_matrix_3f:new j.UniformMatrix3f(dt),u_sun_direction:new j.Uniform3f(dt),u_sun_intensity:new j.Uniform1f(dt),u_color_tint_r:new j.Uniform4f(dt),u_color_tint_m:new j.Uniform4f(dt),u_luminance:new j.Uniform1f(dt)}),globeRaster:dt=>({u_proj_matrix:new j.UniformMatrix4f(dt),u_globe_matrix:new j.UniformMatrix4f(dt),u_normalize_matrix:new j.UniformMatrix4f(dt),u_merc_matrix:new j.UniformMatrix4f(dt),u_zoom_transition:new j.Uniform1f(dt),u_merc_center:new j.Uniform2f(dt),u_image0:new j.Uniform1i(dt),u_grid_matrix:new j.UniformMatrix3f(dt),u_frustum_tl:new j.Uniform3f(dt),u_frustum_tr:new j.Uniform3f(dt),u_frustum_br:new j.Uniform3f(dt),u_frustum_bl:new j.Uniform3f(dt),u_globe_pos:new j.Uniform3f(dt),u_globe_radius:new j.Uniform1f(dt),u_viewport:new j.Uniform2f(dt)}),globeAtmosphere:dt=>({u_frustum_tl:new j.Uniform3f(dt),u_frustum_tr:new j.Uniform3f(dt),u_frustum_br:new j.Uniform3f(dt),u_frustum_bl:new j.Uniform3f(dt),u_horizon:new j.Uniform1f(dt),u_transition:new j.Uniform1f(dt),u_fadeout_range:new j.Uniform1f(dt),u_color:new j.Uniform4f(dt),u_high_color:new j.Uniform4f(dt),u_space_color:new j.Uniform4f(dt),u_star_intensity:new j.Uniform1f(dt),u_star_density:new j.Uniform1f(dt),u_star_size:new j.Uniform1f(dt),u_temporal_offset:new j.Uniform1f(dt),u_horizon_angle:new j.Uniform1f(dt),u_rotation_matrix:new j.UniformMatrix4f(dt)})};let p_;function vv(dt,ot,lt,bt,kt,Ft,Yt){const rn=dt.context,ln=rn.gl,pn=dt.transform,vn=dt.useProgram("collisionBox"),Tn=[];let Dn=0,$n=0;for(let or=0;or<bt.length;or++){const lr=bt[or],er=ot.getTile(lr),dr=er.getBucket(lt);if(!dr)continue;const Ar=jp(lr,dr,pn);let Fr=Ar;kt[0]===0&&kt[1]===0||(Fr=dt.translatePosMatrix(Ar,er,kt,Ft));const Dr=Yt?dr.textCollisionBox:dr.iconCollisionBox,co=dr.collisionCircleArray;if(co.length>0){const Sr=j.create(),_i=Fr;j.mul(Sr,dr.placementInvProjMatrix,pn.glCoordMatrix),j.mul(Sr,Sr,dr.placementViewportMatrix),Tn.push({circleArray:co,circleOffset:$n,transform:_i,invTransform:Sr,projection:dr.getProjection()}),Dn+=co.length/4,$n=Dn}Dr&&(dt.terrain&&dt.terrain.setupElevationDraw(er,vn),vn.draw(rn,ln.LINES,j.DepthMode.disabled,j.StencilMode.disabled,dt.colorModeForRenderPass(),j.CullFaceMode.disabled,c_(Fr,pn,er,dr.getProjection()),lt.id,Dr.layoutVertexBuffer,Dr.indexBuffer,Dr.segments,null,pn.zoom,null,[Dr.collisionVertexBuffer,Dr.collisionVertexBufferExt]))}if(!Yt||!Tn.length)return;const Wn=dt.useProgram("collisionCircle"),Zn=new j.StructArrayLayout2f1f2i16;Zn.resize(4*Dn),Zn._trim();let Fn=0;for(const or of Tn)for(let lr=0;lr<or.circleArray.length/4;lr++){const er=4*lr,dr=or.circleArray[er+0],Ar=or.circleArray[er+1],Fr=or.circleArray[er+2],Dr=or.circleArray[er+3];Zn.emplace(Fn++,dr,Ar,Fr,Dr,0),Zn.emplace(Fn++,dr,Ar,Fr,Dr,1),Zn.emplace(Fn++,dr,Ar,Fr,Dr,2),Zn.emplace(Fn++,dr,Ar,Fr,Dr,3)}(!p_||p_.length<2*Dn)&&(p_=function(or){const lr=2*or,er=new j.StructArrayLayout3ui6;er.resize(lr),er._trim();for(let dr=0;dr<lr;dr++){const Ar=6*dr;er.uint16[Ar+0]=4*dr+0,er.uint16[Ar+1]=4*dr+1,er.uint16[Ar+2]=4*dr+2,er.uint16[Ar+3]=4*dr+2,er.uint16[Ar+4]=4*dr+3,er.uint16[Ar+5]=4*dr+0}return er}(Dn));const jn=rn.createIndexBuffer(p_,!0),Qn=rn.createVertexBuffer(Zn,j.collisionCircleLayout.members,!0);for(const or of Tn){const lr={u_matrix:or.transform,u_inv_matrix:or.invTransform,u_camera_to_center_distance:(Gn=pn).getCameraToCenterDistance(or.projection),u_viewport_size:[Gn.width,Gn.height]};Wn.draw(rn,ln.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,dt.colorModeForRenderPass(),j.CullFaceMode.disabled,lr,lt.id,Qn,jn,j.SegmentVector.simpleSegment(0,2*or.circleOffset,or.circleArray.length,or.circleArray.length/2),null,pn.zoom)}var Gn;Qn.destroy(),jn.destroy()}const bv=j.create();function Jm(dt,ot,lt,bt,kt,Ft){const{horizontalAlign:Yt,verticalAlign:rn}=j.getAnchorAlignment(dt),ln=-(Yt-.5)*ot,pn=-(rn-.5)*lt,vn=j.evaluateVariableOffset(dt,bt);return new j.pointGeometry((ln/kt+vn[0])*Ft,(pn/kt+vn[1])*Ft)}function ey(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn){const Tn=dt.text.placedSymbolArray,Dn=dt.text.dynamicLayoutVertexArray,$n=dt.icon.dynamicLayoutVertexArray,Wn={},Zn=ga(rn,dt.getProjection(),Ft),Fn=Ft.elevation,jn=dt.getProjection().upVectorScale(rn.canonical,Ft.center.lat,Ft.worldSize);Dn.clear();for(let Qn=0;Qn<Tn.length;Qn++){const Gn=Tn.get(Qn),or=dt.allowVerticalPlacement&&!Gn.placedOrientation,lr=Gn.hidden||!Gn.crossTileID||or?null:bt[Gn.crossTileID];if(lr){const er=new j.pointGeometry(Gn.tileAnchorX,Gn.tileAnchorY),dr=dt.getProjection().upVector(rn.canonical,er.x,er.y),Ar=Fn?Fn.getAtTileOffset(rn,er.x,er.y):0,Fr=as([Gn.projectedAnchorX+Ar*dr[0]*jn.metersToTile,Gn.projectedAnchorY+Ar*dr[1]*jn.metersToTile,Gn.projectedAnchorZ+Ar*dr[2]*jn.metersToTile],lt?Zn:Yt),Dr=us(Ft.getCameraToCenterDistance(dt.getProjection()),Fr.signedDistanceFromCamera);let co=kt.evaluateSizeForFeature(dt.textSizeData,pn,Gn)*Dr/j.ONE_EM;lt&&(co*=dt.tilePixelRatio/ln);const{width:Sr,height:_i,anchor:eo,textOffset:Or,textScale:br}=lr,xo=Jm(eo,Sr,_i,Or,br,co);let mo;if(lt){const yo=er.add(xo),{x:Bo,y:Ho,z:Go}=dt.getProjection().projectTilePoint(yo.x,yo.y,rn.canonical);mo=as([Bo+Ar*dr[0]*jn.metersToTile,Ho+Ar*dr[1]*jn.metersToTile,Go+Ar*dr[2]*jn.metersToTile],Yt).point}else{const yo=ot?xo.rotate(-Ft.angle):xo;mo=[Fr.point[0]+yo.x,Fr.point[1]+yo.y,0]}const vo=dt.allowVerticalPlacement&&Gn.placedOrientation===j.WritingMode.vertical?Math.PI/2:0;for(let yo=0;yo<Gn.numGlyphs;yo++)j.addDynamicAttributes(Dn,mo[0],mo[1],mo[2],vo);vn&&Gn.associatedIconIndex>=0&&(Wn[Gn.associatedIconIndex]={shiftedAnchor:mo,angle:vo})}else Us(Gn.numGlyphs,Dn)}if(vn){$n.clear();const Qn=dt.icon.placedSymbolArray;for(let Gn=0;Gn<Qn.length;Gn++){const or=Qn.get(Gn);if(or.hidden)Us(or.numGlyphs,$n);else{const lr=Wn[Gn];if(lr)for(let er=0;er<or.numGlyphs;er++)j.addDynamicAttributes($n,lr.shiftedAnchor[0],lr.shiftedAnchor[1],lr.shiftedAnchor[2],lr.angle);else Us(or.numGlyphs,$n)}}dt.icon.dynamicLayoutVertexBuffer.updateData($n)}dt.text.dynamicLayoutVertexBuffer.updateData(Dn)}function Rr(dt,ot,lt){return lt.iconsInText&&ot?"symbolTextAndIcon":dt?"symbolSDF":"symbolIcon"}function so(dt,ot,lt,bt,kt,Ft,Yt,rn,ln,pn,vn,Tn){const Dn=dt.context,$n=Dn.gl,Wn=dt.transform,Zn=rn==="map",Fn=ln==="map",jn=Zn&&lt.layout.get("symbol-placement")!=="point",Qn=Zn&&!Fn&&!jn,Gn=lt.layout.get("symbol-sort-key").constantOr(1)!==void 0;let or=!1;const lr=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),er=[j.mercatorXfromLng(Wn.center.lng),j.mercatorYfromLat(Wn.center.lat)],dr=lt.layout.get("text-variable-anchor"),Ar=Wn.projection.name==="globe",Fr=[],Dr=[0,-1,0];let co=Dr;!Ar&&!Wn.mercatorFromTransition||Zn||(co=function(Sr){const _i=Sr._camera.getWorldToCamera(Sr.worldSize,1),eo=j.multiply([],_i,Sr.globeMatrix);j.invert(eo,eo);const Or=[0,0,0],br=[0,1,0,0];return j.transformMat4$1(br,br,eo),Or[0]=br[0],Or[1]=br[1],Or[2]=br[2],j.normalize(Or,Or),Or}(Wn));for(const Sr of bt){const _i=ot.getTile(Sr),eo=_i.getBucket(lt);if(!eo||eo.projection.name==="mercator"&&Ar)continue;const Or=kt?eo.text:eo.icon;if(!Or||eo.fullyClipped||!Or.segments.get().length)continue;const br=Or.programConfigurations.get(lt.id),xo=kt||eo.sdfIcons,mo=kt?eo.textSizeData:eo.iconSizeData,vo=Fn||Wn.pitch!==0,yo=j.evaluateSizeForZoom(mo,Wn.zoom);let Bo,Ho,Go,No,_o=[0,0],es=null;if(kt){if(Ho=_i.glyphAtlasTexture,Go=$n.LINEAR,Bo=_i.glyphAtlasTexture.size,eo.iconsInText){_o=_i.imageAtlasTexture.size,es=_i.imageAtlasTexture;const Xo=mo.kind==="composite"||mo.kind==="camera";No=vo||dt.options.rotating||dt.options.zooming||Xo?$n.LINEAR:$n.NEAREST}}else{const Xo=lt.layout.get("icon-size").constantOr(0)!==1||eo.iconsNeedLinear;Ho=_i.imageAtlasTexture,Go=xo||dt.options.rotating||dt.options.zooming||Xo||vo?$n.LINEAR:$n.NEAREST,Bo=_i.imageAtlasTexture.size}const hs=eo.projection.name==="globe",Ns=hs?co:Dr,Vs=hs?j.globeToMercatorTransition(Wn.zoom):0,Ds=ga(Sr,eo.getProjection(),Wn),Ul=Wn.calculatePixelsToTileUnitsMatrix(_i),ou=El(Ds,_i.tileID.canonical,Fn,Zn,Wn,eo.getProjection(),Ul),hp=dt.terrain&&Fn&&jn?j.invert(j.create(),ou):bv,Ws=tp(Ds,_i.tileID.canonical,Fn,Zn,Wn,eo.getProjection(),Ul),_l=dr&&eo.hasTextData(),Ls=lt.layout.get("icon-text-fit")!=="none"&&_l&&eo.hasIconData();if(jn){const Xo=Wn.elevation,Rp=Xo?Xo.getAtTileOffsetFunc(Sr,Wn.center.lat,Wn.worldSize,eo.getProjection()):_u=>[0,0,0],dm=nm(Ds,_i.tileID.canonical,Fn,Zn,Wn,eo.getProjection(),Ul);np(eo,Ds,dt,kt,dm,Ws,Fn,pn,Rp,Sr)}const Ol=jn||kt&&dr||Ls,su=dt.translatePosMatrix(Ds,_i,Ft,Yt),$s=Ol?bv:ou,Ru=dt.translatePosMatrix(Ws,_i,Ft,Yt,!0),qp=eo.getProjection().createInversionMatrix(Wn,Sr.canonical),Zu=[];dt.terrainRenderModeElevated()&&Fn&&Zu.push("PITCH_WITH_MAP_TERRAIN"),hs&&Zu.push("PROJECTION_GLOBE_VIEW"),Ol&&Zu.push("PROJECTED_POS_ON_VIEWPORT");const Jl=xo&&lt.paint.get(kt?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let uy;uy=xo?eo.iconsInText?Qm(mo.kind,yo,Qn,Fn,dt,su,$s,Ru,Bo,_o,Sr,Vs,er,qp,Ns,eo.getProjection()):d_(mo.kind,yo,Qn,Fn,dt,su,$s,Ru,kt,Bo,!0,Sr,Vs,er,qp,Ns,eo.getProjection()):a0(mo.kind,yo,Qn,Fn,dt,su,$s,Ru,kt,Bo,Sr,Vs,er,qp,Ns,eo.getProjection());const Cp={program:dt.useProgram(Rr(xo,kt,eo),br,Zu),buffers:Or,uniformValues:uy,atlasTexture:Ho,atlasTextureIcon:es,atlasInterpolation:Go,atlasInterpolationIcon:No,isSDF:xo,hasHalo:Jl,tile:_i,labelPlaneMatrixInv:hp};if(Gn&&eo.canOverlap){or=!0;const Xo=Or.segments.get();for(const Rp of Xo)Fr.push({segments:new j.SegmentVector([Rp]),sortKey:Rp.sortKey,state:Cp})}else Fr.push({segments:Or.segments,sortKey:0,state:Cp})}or&&Fr.sort((Sr,_i)=>Sr.sortKey-_i.sortKey);for(const Sr of Fr){const _i=Sr.state;if(dt.terrain&&dt.terrain.setupElevationDraw(_i.tile,_i.program,{useDepthForOcclusion:!Ar,labelPlaneMatrixInv:_i.labelPlaneMatrixInv}),Dn.activeTexture.set($n.TEXTURE0),_i.atlasTexture.bind(_i.atlasInterpolation,$n.CLAMP_TO_EDGE),_i.atlasTextureIcon&&(Dn.activeTexture.set($n.TEXTURE1),_i.atlasTextureIcon&&_i.atlasTextureIcon.bind(_i.atlasInterpolationIcon,$n.CLAMP_TO_EDGE)),_i.isSDF){const eo=_i.uniformValues;_i.hasHalo&&(eo.u_is_halo=1,Kr(_i.buffers,Sr.segments,lt,dt,_i.program,lr,vn,Tn,eo)),eo.u_is_halo=0}Kr(_i.buffers,Sr.segments,lt,dt,_i.program,lr,vn,Tn,_i.uniformValues)}}function Kr(dt,ot,lt,bt,kt,Ft,Yt,rn,ln){const pn=bt.context,vn=[dt.dynamicLayoutVertexBuffer,dt.opacityVertexBuffer,dt.globeExtVertexBuffer];kt.draw(pn,pn.gl.TRIANGLES,Ft,Yt,rn,j.CullFaceMode.disabled,ln,lt.id,dt.layoutVertexBuffer,dt.indexBuffer,ot,lt.paint,bt.transform.zoom,dt.programConfigurations.get(lt.id),vn)}function Uo(dt,ot,lt,bt,kt,Ft,Yt){const rn=dt.context.gl,ln=lt.paint.get("fill-pattern"),pn=ln&&ln.constantOr(1),vn=lt.getCrossfadeParameters();let Tn,Dn,$n,Wn,Zn;Yt?(Dn=pn&&!lt.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Tn=rn.LINES):(Dn=pn?"fillPattern":"fill",Tn=rn.TRIANGLES);for(const Fn of bt){const jn=ot.getTile(Fn);if(pn&&!jn.patternsLoaded())continue;const Qn=jn.getBucket(lt);if(!Qn)continue;dt.prepareDrawTile();const Gn=Qn.programConfigurations.get(lt.id),or=dt.useProgram(Dn,Gn);pn&&(dt.context.activeTexture.set(rn.TEXTURE0),jn.imageAtlasTexture.bind(rn.LINEAR,rn.CLAMP_TO_EDGE),Gn.updatePaintBuffers(vn));const lr=ln.constantOr(null);if(lr&&jn.imageAtlas){const dr=jn.imageAtlas,Ar=dr.patternPositions[lr.to.toString()],Fr=dr.patternPositions[lr.from.toString()];Ar&&Fr&&Gn.setConstantPatternPositions(Ar,Fr)}const er=dt.translatePosMatrix(Fn.projMatrix,jn,lt.paint.get("fill-translate"),lt.paint.get("fill-translate-anchor"));if(Yt){Wn=Qn.indexBuffer2,Zn=Qn.segments2;const dr=dt.terrain&&dt.terrain.renderingToTexture?dt.terrain.drapeBufferSize:[rn.drawingBufferWidth,rn.drawingBufferHeight];$n=Dn==="fillOutlinePattern"&&pn?Oy(er,dt,vn,jn,dr):u_(er,dr)}else Wn=Qn.indexBuffer,Zn=Qn.segments,$n=pn?mu(er,dt,vn,jn):Iy(er);dt.prepareDrawProgram(dt.context,or,Fn.toUnwrapped()),or.draw(dt.context,Tn,kt,dt.stencilModeForClipping(Fn),Ft,j.CullFaceMode.disabled,$n,lt.id,Qn.layoutVertexBuffer,Wn,Zn,lt.paint,dt.transform.zoom,Gn)}}function gs(dt,ot,lt,bt,kt,Ft,Yt){const rn=dt.context,ln=rn.gl,pn=dt.transform,vn=lt.paint.get("fill-extrusion-pattern"),Tn=vn.constantOr(1),Dn=lt.getCrossfadeParameters(),$n=lt.paint.get("fill-extrusion-opacity"),Wn=[lt.paint.get("fill-extrusion-ambient-occlusion-intensity"),lt.paint.get("fill-extrusion-ambient-occlusion-radius")],Zn=lt.layout.get("fill-extrusion-edge-radius"),Fn=pn.projection.name==="globe"?j.fillExtrusionHeightLift():0,jn=pn.projection.name==="globe",Qn=jn?j.globeToMercatorTransition(pn.zoom):0,Gn=[j.mercatorXfromLng(pn.center.lng),j.mercatorYfromLat(pn.center.lat)],or=[];jn&&(or.push("PROJECTION_GLOBE_VIEW"),dt.style.terrainSetForDrapingOnly()&&or.push("TERRAIN")),Wn[0]>0&&or.push("FAUX_AO");for(const lr of bt){const er=ot.getTile(lr),dr=er.getBucket(lt);if(!dr||dr.projection.name!==pn.projection.name)continue;const Ar=dr.programConfigurations.get(lt.id),Fr=dt.useProgram(Tn?"fillExtrusionPattern":"fillExtrusion",Ar,or);if(dt.terrain){const br=dt.terrain;if(dt.style.terrainSetForDrapingOnly())br.setupElevationDraw(er,Fr,{useMeterToDem:!0});else{if(!dr.enableTerrain)continue;if(br.setupElevationDraw(er,Fr,{useMeterToDem:!0}),Fs(rn,ot,lr,dr,lt,br),!dr.centroidVertexBuffer){const xo=Fr.attributes.a_centroid_pos;xo!==void 0&&ln.vertexAttrib2f(xo,0,0)}}}Tn&&(dt.context.activeTexture.set(ln.TEXTURE0),er.imageAtlasTexture.bind(ln.LINEAR,ln.CLAMP_TO_EDGE),Ar.updatePaintBuffers(Dn));const Dr=vn.constantOr(null);if(Dr&&er.imageAtlas){const br=er.imageAtlas,xo=br.patternPositions[Dr.to.toString()],mo=br.patternPositions[Dr.from.toString()];xo&&mo&&Ar.setConstantPatternPositions(xo,mo)}const co=dt.translatePosMatrix(lr.projMatrix,er,lt.paint.get("fill-extrusion-translate"),lt.paint.get("fill-extrusion-translate-anchor")),Sr=pn.projection.createInversionMatrix(pn,lr.canonical),_i=lt.paint.get("fill-extrusion-vertical-gradient"),eo=Tn?gv(co,dt,_i,$n,Wn,Zn,lr,Dn,er,Fn,Qn,Gn,Sr):Zm(co,dt,_i,$n,Wn,Zn,lr,Fn,Qn,Gn,Sr);dt.prepareDrawProgram(rn,Fr,lr.toUnwrapped());const Or=[];dt.terrain&&Or.push(dr.centroidVertexBuffer),jn&&Or.push(dr.layoutVertexExtBuffer),Fr.draw(rn,rn.gl.TRIANGLES,kt,Ft,Yt,j.CullFaceMode.backCCW,eo,lt.id,dr.layoutVertexBuffer,dr.indexBuffer,dr.segments,lt.paint,dt.transform.zoom,Ar,Or)}}function Fs(dt,ot,lt,bt,kt,Ft){const Yt=[jn=>{let Qn=jn.canonical.x-1,Gn=jn.wrap;return Qn<0&&(Qn=(1<<jn.canonical.z)-1,Gn--),new j.OverscaledTileID(jn.overscaledZ,Gn,jn.canonical.z,Qn,jn.canonical.y)},jn=>{let Qn=jn.canonical.x+1,Gn=jn.wrap;return Qn===1<<jn.canonical.z&&(Qn=0,Gn++),new j.OverscaledTileID(jn.overscaledZ,Gn,jn.canonical.z,Qn,jn.canonical.y)},jn=>new j.OverscaledTileID(jn.overscaledZ,jn.wrap,jn.canonical.z,jn.canonical.x,(jn.canonical.y===0?1<<jn.canonical.z:jn.canonical.y)-1),jn=>new j.OverscaledTileID(jn.overscaledZ,jn.wrap,jn.canonical.z,jn.canonical.x,jn.canonical.y===(1<<jn.canonical.z)-1?0:jn.canonical.y+1)],rn=jn=>{const Qn=ot.getSource().minzoom,Gn=lr=>{const er=ot.getTileByID(lr);if(er&&er.hasData())return er.getBucket(kt)},or=[0,-1,1];for(const lr of or){if(jn.overscaledZ+lr<Qn)continue;const er=Gn(jn.calculateScaledKey(jn.overscaledZ+lr));if(er)return er}},ln=[0,0,0],pn=(jn,Qn)=>(ln[0]=Math.min(jn.min.y,Qn.min.y),ln[1]=Math.max(jn.max.y,Qn.max.y),ln[2]=j.EXTENT-Qn.min.x>jn.max.x?Qn.min.x-j.EXTENT:jn.max.x,ln),vn=(jn,Qn)=>(ln[0]=Math.min(jn.min.x,Qn.min.x),ln[1]=Math.max(jn.max.x,Qn.max.x),ln[2]=j.EXTENT-Qn.min.y>jn.max.y?Qn.min.y-j.EXTENT:jn.max.y,ln),Tn=[(jn,Qn)=>pn(jn,Qn),(jn,Qn)=>pn(Qn,jn),(jn,Qn)=>vn(jn,Qn),(jn,Qn)=>vn(Qn,jn)],Dn=new j.pointGeometry(0,0);let $n,Wn,Zn;const Fn=(jn,Qn,Gn,or,lr)=>{const er=[[or?Gn:jn,or?jn:Gn,0],[or?Gn:Qn,or?Qn:Gn,0]],dr=lr<0?j.EXTENT+lr:lr,Ar=[or?dr:(jn+Qn)/2,or?(jn+Qn)/2:dr,0];return Gn===0&&lr<0||Gn!==0&&lr>0?Ft.getForTilePoints(Zn,[Ar],!0,Wn):er.push(Ar),Ft.getForTilePoints(lt,er,!0,$n),Math.max(er[0][2],er[1][2],Ar[2])/Ft.exaggeration()};for(let jn=0;jn<4;jn++){const Qn=(jn<2?1:5)-jn,Gn=bt.borders[jn];if(Gn.length===0)continue;const or=Zn=Yt[jn](lt),lr=rn(or);if(!(lr&&lr instanceof j.FillExtrusionBucket&&lr.enableTerrain)||bt.borderDoneWithNeighborZ[jn]===lr.canonical.z&&lr.borderDoneWithNeighborZ[Qn]===bt.canonical.z||(Wn=Ft.findDEMTileFor(or),!Wn||!Wn.dem))continue;if(!$n){const Fr=Ft.findDEMTileFor(lt);if(!Fr||!Fr.dem)return;$n=Fr}const er=lr.borders[Qn];let dr=0;const Ar=lr.borderDoneWithNeighborZ[Qn]!==bt.canonical.z;if(bt.canonical.z===lr.canonical.z){for(let Fr=0;Fr<Gn.length;Fr++){const Dr=bt.featuresOnBorder[Gn[Fr]],co=Dr.borders[jn];let Sr;for(;dr<er.length&&(Sr=lr.featuresOnBorder[er[dr]],!(Sr.borders[Qn][1]>co[0]+3));)Ar&&lr.encodeCentroid(void 0,Sr,!1),dr++;if(Sr&&dr<er.length){const _i=dr;let eo=0;for(;!(Sr.borders[Qn][0]>co[1]-3)&&(eo++,++dr!==er.length);)Sr=lr.featuresOnBorder[er[dr]];if(Sr=lr.featuresOnBorder[er[_i]],Dr.intersectsCount()>1||Sr.intersectsCount()>1||eo!==1){eo!==1&&(dr=_i),bt.encodeCentroid(void 0,Dr,!1),Ar&&lr.encodeCentroid(void 0,Sr,!1);continue}const Or=Tn[jn](Dr,Sr),br=jn%2?j.EXTENT-1:0;Dn.x=Fn(Or[0],Math.min(j.EXTENT-1,Or[1]),br,jn<2,Or[2]),Dn.y=0,bt.encodeCentroid(Dn,Dr,!1),Ar&&lr.encodeCentroid(Dn,Sr,!1)}else bt.encodeCentroid(void 0,Dr,!1)}bt.borderDoneWithNeighborZ[jn]=lr.canonical.z,bt.needsCentroidUpdate=!0,Ar&&(lr.borderDoneWithNeighborZ[Qn]=bt.canonical.z,lr.needsCentroidUpdate=!0)}else{for(const Fr of Gn)bt.encodeCentroid(void 0,bt.featuresOnBorder[Fr],!1);if(Ar){for(const Fr of er)lr.encodeCentroid(void 0,lr.featuresOnBorder[Fr],!1);lr.borderDoneWithNeighborZ[Qn]=bt.canonical.z,lr.needsCentroidUpdate=!0}bt.borderDoneWithNeighborZ[jn]=lr.canonical.z,bt.needsCentroidUpdate=!0}}(bt.needsCentroidUpdate||!bt.centroidVertexBuffer&&bt.centroidVertexArray.length!==0)&&bt.uploadCentroid(dt)}const Ml=new j.Color(1,0,0,1),Js=new j.Color(0,1,0,1),m_=new j.Color(0,0,1,1),u0=new j.Color(1,0,1,1),Tu=new j.Color(0,1,1,1);function wp(dt,ot,lt){const bt=dt.context,kt=dt.transform,Ft=bt.gl,Yt=kt.projection.name==="globe",rn=Yt?["PROJECTION_GLOBE_VIEW"]:null;let ln=lt.projMatrix;if(Yt&&j.globeToMercatorTransition(kt.zoom)>0){const Dr=j.transitionTileAABBinECEF(lt.canonical,kt),co=j.globeDenormalizeECEF(Dr);ln=j.multiply(new Float32Array(16),kt.globeMatrix,co),j.multiply(ln,kt.projMatrix,ln)}const pn=dt.useProgram("debug",null,rn),vn=ot.getTileByID(lt.key);dt.terrain&&dt.terrain.setupElevationDraw(vn,pn);const Tn=j.DepthMode.disabled,Dn=j.StencilMode.disabled,$n=dt.colorModeForRenderPass(),Wn="$debug";bt.activeTexture.set(Ft.TEXTURE0),dt.emptyTexture.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE),Yt?vn._makeGlobeTileDebugBuffers(dt.context,kt):vn._makeDebugTileBoundsBuffers(dt.context,kt.projection);const Zn=vn._tileDebugBuffer||dt.debugBuffer,Fn=vn._tileDebugIndexBuffer||dt.debugIndexBuffer,jn=vn._tileDebugSegments||dt.debugSegments;pn.draw(bt,Ft.LINE_STRIP,Tn,Dn,$n,j.CullFaceMode.disabled,h_(ln,j.Color.red),Wn,Zn,Fn,jn,null,null,null,[vn._globeTileDebugBorderBuffer]);const Qn=vn.latestRawTileData,Gn=Math.floor((Qn&&Qn.byteLength||0)/1024),or=ot.getTile(lt).tileSize,lr=512/Math.min(or,512)*(lt.overscaledZ/kt.zoom)*.5;let er=lt.canonical.toString();lt.overscaledZ!==lt.canonical.z&&(er+=` => ${lt.overscaledZ}`),er+=` ${Gn}kb`,function(Dr,co){Dr.initDebugOverlayCanvas();const Sr=Dr.debugOverlayCanvas,_i=Dr.context.gl,eo=Dr.debugOverlayCanvas.getContext("2d");eo.clearRect(0,0,Sr.width,Sr.height),eo.shadowColor="white",eo.shadowBlur=2,eo.lineWidth=1.5,eo.strokeStyle="white",eo.textBaseline="top",eo.font="bold 36px Open Sans, sans-serif",eo.fillText(co,5,5),eo.strokeText(co,5,5),Dr.debugOverlayTexture.update(Sr),Dr.debugOverlayTexture.bind(_i.LINEAR,_i.CLAMP_TO_EDGE)}(dt,er);const dr=vn._tileDebugTextBuffer||dt.debugBuffer,Ar=vn._tileDebugTextIndexBuffer||dt.quadTriangleIndexBuffer,Fr=vn._tileDebugTextSegments||dt.debugSegments;pn.draw(bt,Ft.TRIANGLES,Tn,Dn,j.ColorMode.alphaBlended,j.CullFaceMode.disabled,h_(ln,j.Color.transparent,lr),Wn,dr,Ar,Fr,null,null,null,[vn._globeTileDebugTextBuffer])}function ty(dt,ot,lt,bt){Hu(dt,0,ot+lt/2,dt.transform.width,lt,bt)}function sm(dt,ot,lt,bt){Hu(dt,ot-lt/2,0,lt,dt.transform.height,bt)}function Hu(dt,ot,lt,bt,kt,Ft){const Yt=dt.context,rn=Yt.gl;rn.enable(rn.SCISSOR_TEST),rn.scissor(ot*j.exported.devicePixelRatio,lt*j.exported.devicePixelRatio,bt*j.exported.devicePixelRatio,kt*j.exported.devicePixelRatio),Yt.clear({color:Ft}),rn.disable(rn.SCISSOR_TEST)}const Np=j.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Hs}=Np;function xp(dt,ot,lt,bt){dt.emplaceBack(ot,lt,bt)}class Ms{constructor(ot){this.vertexArray=new j.StructArrayLayout3f12,this.indices=new j.StructArrayLayout3ui6,xp(this.vertexArray,-1,-1,1),xp(this.vertexArray,1,-1,1),xp(this.vertexArray,-1,1,1),xp(this.vertexArray,1,1,1),xp(this.vertexArray,-1,-1,-1),xp(this.vertexArray,1,-1,-1),xp(this.vertexArray,-1,1,-1),xp(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=ot.createVertexBuffer(this.vertexArray,Hs),this.indexBuffer=ot.createIndexBuffer(this.indices),this.segment=j.SegmentVector.simpleSegment(0,0,36,12)}}function $u(dt,ot,lt,bt,kt,Ft){const Yt=dt.gl,rn=ot.paint.get("sky-atmosphere-color"),ln=ot.paint.get("sky-atmosphere-halo-color"),pn=ot.paint.get("sky-atmosphere-sun-intensity"),vn=((Tn,Dn,$n,Wn,Zn)=>({u_matrix_3f:Tn,u_sun_direction:Dn,u_sun_intensity:$n,u_color_tint_r:[Wn.r,Wn.g,Wn.b,Wn.a],u_color_tint_m:[Zn.r,Zn.g,Zn.b,Zn.a],u_luminance:5e-5}))(j.fromMat4(j.create$1(),bt),kt,pn,rn,ln);Yt.framebufferTexture2D(Yt.FRAMEBUFFER,Yt.COLOR_ATTACHMENT0,Yt.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,ot.skyboxTexture,0),lt.draw(dt,Yt.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.frontCW,vn,"skyboxCapture",ot.skyboxGeometry.vertexBuffer,ot.skyboxGeometry.indexBuffer,ot.skyboxGeometry.segment)}const E1=j.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class c0{constructor(ot){const lt=new j.StructArrayLayout5f20;lt.emplaceBack(-1,1,1,0,0),lt.emplaceBack(1,1,1,1,0),lt.emplaceBack(1,-1,1,1,1),lt.emplaceBack(-1,-1,1,0,1);const bt=new j.StructArrayLayout3ui6;bt.emplaceBack(0,1,2),bt.emplaceBack(2,3,0),this.vertexBuffer=ot.createVertexBuffer(lt,E1.members),this.indexBuffer=ot.createIndexBuffer(bt),this.segments=j.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ny={symbol:function(dt,ot,lt,bt,kt){if(dt.renderPass!=="translucent")return;const Ft=j.StencilMode.disabled,Yt=dt.colorModeForRenderPass();lt.layout.get("text-variable-anchor")&&function(rn,ln,pn,vn,Tn,Dn,$n){const Wn=ln.transform,Zn=Tn==="map",Fn=Dn==="map";for(const jn of rn){const Qn=vn.getTile(jn),Gn=Qn.getBucket(pn);if(!Gn||!Gn.text||!Gn.text.segments.get().length)continue;const or=j.evaluateSizeForZoom(Gn.textSizeData,Wn.zoom),lr=ga(jn,Gn.getProjection(),Wn),er=Wn.calculatePixelsToTileUnitsMatrix(Qn),dr=El(lr,Qn.tileID.canonical,Fn,Zn,Wn,Gn.getProjection(),er),Ar=pn.layout.get("icon-text-fit")!=="none"&&Gn.hasIconData();if(or){const Fr=Math.pow(2,Wn.zoom-Qn.tileID.overscaledZ);ey(Gn,Zn,Fn,$n,j.symbolSize,Wn,dr,jn,Fr,or,Ar)}}}(bt,dt,lt,ot,lt.layout.get("text-rotation-alignment"),lt.layout.get("text-pitch-alignment"),kt),lt.paint.get("icon-opacity").constantOr(1)!==0&&so(dt,ot,lt,bt,!1,lt.paint.get("icon-translate"),lt.paint.get("icon-translate-anchor"),lt.layout.get("icon-rotation-alignment"),lt.layout.get("icon-pitch-alignment"),lt.layout.get("icon-keep-upright"),Ft,Yt),lt.paint.get("text-opacity").constantOr(1)!==0&&so(dt,ot,lt,bt,!0,lt.paint.get("text-translate"),lt.paint.get("text-translate-anchor"),lt.layout.get("text-rotation-alignment"),lt.layout.get("text-pitch-alignment"),lt.layout.get("text-keep-upright"),Ft,Yt),ot.map.showCollisionBoxes&&(vv(dt,ot,lt,bt,lt.paint.get("text-translate"),lt.paint.get("text-translate-anchor"),!0),vv(dt,ot,lt,bt,lt.paint.get("icon-translate"),lt.paint.get("icon-translate-anchor"),!1))},circle:function(dt,ot,lt,bt){if(dt.renderPass!=="translucent")return;const kt=lt.paint.get("circle-opacity"),Ft=lt.paint.get("circle-stroke-width"),Yt=lt.paint.get("circle-stroke-opacity"),rn=lt.layout.get("circle-sort-key").constantOr(1)!==void 0;if(kt.constantOr(1)===0&&(Ft.constantOr(1)===0||Yt.constantOr(1)===0))return;const ln=dt.context,pn=ln.gl,vn=dt.transform,Tn=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),Dn=j.StencilMode.disabled,$n=dt.colorModeForRenderPass(),Wn=vn.projection.name==="globe",Zn=[j.mercatorXfromLng(vn.center.lng),j.mercatorYfromLat(vn.center.lat)],Fn=[];for(let Qn=0;Qn<bt.length;Qn++){const Gn=bt[Qn],or=ot.getTile(Gn),lr=or.getBucket(lt);if(!lr||lr.projection.name!==vn.projection.name)continue;const er=lr.programConfigurations.get(lt.id),dr=s0(lt);Wn&&dr.push("PROJECTION_GLOBE_VIEW");const Ar=dt.useProgram("circle",er,dr),Fr=lr.layoutVertexBuffer,Dr=lr.globeExtVertexBuffer,co=lr.indexBuffer,Sr=vn.projection.createInversionMatrix(vn,Gn.canonical),_i={programConfiguration:er,program:Ar,layoutVertexBuffer:Fr,globeExtVertexBuffer:Dr,indexBuffer:co,uniformValues:Km(dt,Gn,or,Sr,Zn,lt),tile:or};if(rn){const eo=lr.segments.get();for(const Or of eo)Fn.push({segments:new j.SegmentVector([Or]),sortKey:Or.sortKey,state:_i})}else Fn.push({segments:lr.segments,sortKey:0,state:_i})}rn&&Fn.sort((Qn,Gn)=>Qn.sortKey-Gn.sortKey);const jn={useDepthForOcclusion:!Wn};for(const Qn of Fn){const{programConfiguration:Gn,program:or,layoutVertexBuffer:lr,globeExtVertexBuffer:er,indexBuffer:dr,uniformValues:Ar,tile:Fr}=Qn.state,Dr=Qn.segments;dt.terrain&&dt.terrain.setupElevationDraw(Fr,or,jn),dt.prepareDrawProgram(ln,or,Fr.tileID.toUnwrapped()),or.draw(ln,pn.TRIANGLES,Tn,Dn,$n,j.CullFaceMode.disabled,Ar,lt.id,lr,dr,Dr,lt.paint,vn.zoom,Gn,[er])}},heatmap:function(dt,ot,lt,bt){if(lt.paint.get("heatmap-opacity")!==0)if(dt.renderPass==="offscreen"){const kt=dt.context,Ft=kt.gl,Yt=j.StencilMode.disabled,rn=new j.ColorMode([Ft.ONE,Ft.ONE],j.Color.transparent,[!0,!0,!0,!0]);(function($n,Wn,Zn,Fn){const jn=$n.gl,Qn=Wn.width*Fn,Gn=Wn.height*Fn;$n.activeTexture.set(jn.TEXTURE1),$n.viewport.set([0,0,Qn,Gn]);let or=Zn.heatmapFbo;if(!or||or&&(or.width!==Qn||or.height!==Gn)){or&&or.destroy();const lr=jn.createTexture();jn.bindTexture(jn.TEXTURE_2D,lr),jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_WRAP_S,jn.CLAMP_TO_EDGE),jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_WRAP_T,jn.CLAMP_TO_EDGE),jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_MIN_FILTER,jn.LINEAR),jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_MAG_FILTER,jn.LINEAR),or=Zn.heatmapFbo=$n.createFramebuffer(Qn,Gn,!1),function(er,dr,Ar,Fr,Dr,co){const Sr=er.gl;Sr.texImage2D(Sr.TEXTURE_2D,0,Sr.RGBA,Dr,co,0,Sr.RGBA,er.extRenderToTextureHalfFloat?er.extTextureHalfFloat.HALF_FLOAT_OES:Sr.UNSIGNED_BYTE,null),Fr.colorAttachment.set(Ar)}($n,0,lr,or,Qn,Gn)}else jn.bindTexture(jn.TEXTURE_2D,or.colorAttachment.get()),$n.bindFramebuffer.set(or.framebuffer)})(kt,dt,lt,dt.transform.projection.name==="globe"?.5:.25),kt.clear({color:j.Color.transparent});const ln=dt.transform,pn=ln.projection.name==="globe",vn=pn?["PROJECTION_GLOBE_VIEW"]:null,Tn=pn?j.CullFaceMode.frontCCW:j.CullFaceMode.disabled,Dn=[j.mercatorXfromLng(ln.center.lng),j.mercatorYfromLat(ln.center.lat)];for(let $n=0;$n<bt.length;$n++){const Wn=bt[$n];if(ot.hasRenderableParent(Wn))continue;const Zn=ot.getTile(Wn),Fn=Zn.getBucket(lt);if(!Fn||Fn.projection.name!==ln.projection.name)continue;const jn=Fn.programConfigurations.get(lt.id),Qn=dt.useProgram("heatmap",jn,vn),{zoom:Gn}=dt.transform;dt.terrain&&dt.terrain.setupElevationDraw(Zn,Qn),dt.prepareDrawProgram(kt,Qn,Wn.toUnwrapped());const or=ln.projection.createInversionMatrix(ln,Wn.canonical);Qn.draw(kt,Ft.TRIANGLES,j.DepthMode.disabled,Yt,rn,Tn,pv(dt,Wn,Zn,or,Dn,Gn,lt.paint.get("heatmap-intensity")),lt.id,Fn.layoutVertexBuffer,Fn.indexBuffer,Fn.segments,lt.paint,dt.transform.zoom,jn,pn?[Fn.globeExtVertexBuffer]:null)}kt.viewport.set([0,0,dt.width,dt.height])}else dt.renderPass==="translucent"&&(dt.context.setColorMode(dt.colorModeForRenderPass()),function(kt,Ft){const Yt=kt.context,rn=Yt.gl,ln=Ft.heatmapFbo;if(!ln)return;Yt.activeTexture.set(rn.TEXTURE0),rn.bindTexture(rn.TEXTURE_2D,ln.colorAttachment.get()),Yt.activeTexture.set(rn.TEXTURE1);let pn=Ft.colorRampTexture;pn||(pn=Ft.colorRampTexture=new j.Texture(Yt,Ft.colorRamp,rn.RGBA)),pn.bind(rn.LINEAR,rn.CLAMP_TO_EDGE),kt.useProgram("heatmapTexture").draw(Yt,rn.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,kt.colorModeForRenderPass(),j.CullFaceMode.disabled,((vn,Tn,Dn,$n)=>({u_image:0,u_color_ramp:1,u_opacity:Tn.paint.get("heatmap-opacity")}))(0,Ft),Ft.id,kt.viewportBuffer,kt.quadTriangleIndexBuffer,kt.viewportSegments,Ft.paint,kt.transform.zoom)}(dt,lt))},line:function(dt,ot,lt,bt){if(dt.renderPass!=="translucent")return;const kt=lt.paint.get("line-opacity"),Ft=lt.paint.get("line-width");if(kt.constantOr(1)===0||Ft.constantOr(1)===0)return;const Yt=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),rn=dt.colorModeForRenderPass(),ln=dt.terrain&&dt.terrain.renderingToTexture?1:j.exported.devicePixelRatio,pn=lt.paint.get("line-dasharray"),vn=pn.constantOr(1),Tn=lt.layout.get("line-cap"),Dn=lt.paint.get("line-pattern"),$n=Dn.constantOr(1),Wn=lt.paint.get("line-gradient"),Zn=lt.getCrossfadeParameters(),Fn=$n?"linePattern":"line",jn=dt.context,Qn=jn.gl,Gn=(lr=>{const er=[];_v(lr)&&er.push("RENDER_LINE_DASH"),lr.paint.get("line-gradient")&&er.push("RENDER_LINE_GRADIENT");const dr=lr.paint.get("line-trim-offset");dr[0]===0&&dr[1]===0||er.push("RENDER_LINE_TRIM_OFFSET");const Ar=lr.paint.get("line-pattern").constantOr(1),Fr=lr.paint.get("line-opacity").constantOr(1)!==1;return!Ar&&Fr&&er.push("RENDER_LINE_ALPHA_DISCARD"),er})(lt);let or=Gn.includes("RENDER_LINE_ALPHA_DISCARD");dt.terrain&&dt.terrain.clipOrMaskOverlapStencilType()&&(or=!1);for(const lr of bt){const er=ot.getTile(lr);if($n&&!er.patternsLoaded())continue;const dr=er.getBucket(lt);if(!dr)continue;dt.prepareDrawTile();const Ar=dr.programConfigurations.get(lt.id),Fr=dt.useProgram(Fn,Ar,Gn),Dr=Dn.constantOr(null);if(Dr&&er.imageAtlas){const mo=er.imageAtlas,vo=mo.patternPositions[Dr.to.toString()],yo=mo.patternPositions[Dr.from.toString()];vo&&yo&&Ar.setConstantPatternPositions(vo,yo)}const co=pn.constantOr(null),Sr=Tn.constantOr(null);if(!$n&&co&&Sr&&er.lineAtlas){const mo=er.lineAtlas,vo=mo.getDash(co.to,Sr),yo=mo.getDash(co.from,Sr);vo&&yo&&Ar.setConstantPatternPositions(vo,yo)}let[_i,eo]=lt.paint.get("line-trim-offset");(Sr==="round"||Sr==="square")&&_i!==eo&&(_i===0&&(_i-=1),eo===1&&(eo+=1));const Or=dt.terrain?lr.projMatrix:null,br=$n?mv(dt,er,lt,Zn,Or,ln):Om(dt,er,lt,Zn,Or,dr.lineClipsArray.length,ln,[_i,eo]);if(Wn){const mo=dr.gradients[lt.id];let vo=mo.texture;if(lt.gradientVersion!==mo.version){let yo=256;if(lt.stepInterpolant){const Bo=ot.getSource().maxzoom,Ho=lr.canonical.z===Bo?Math.ceil(1<<dt.transform.maxZoom-lr.canonical.z):1;yo=j.clamp(j.nextPowerOfTwo(dr.maxLineLength/j.EXTENT*1024*Ho),256,jn.maxTextureSize)}mo.gradient=j.renderColorRamp({expression:lt.gradientExpression(),evaluationKey:"lineProgress",resolution:yo,image:mo.gradient||void 0,clips:dr.lineClipsArray}),mo.texture?mo.texture.update(mo.gradient):mo.texture=new j.Texture(jn,mo.gradient,Qn.RGBA),mo.version=lt.gradientVersion,vo=mo.texture}jn.activeTexture.set(Qn.TEXTURE1),vo.bind(lt.stepInterpolant?Qn.NEAREST:Qn.LINEAR,Qn.CLAMP_TO_EDGE)}vn&&(jn.activeTexture.set(Qn.TEXTURE0),er.lineAtlasTexture.bind(Qn.LINEAR,Qn.REPEAT),Ar.updatePaintBuffers(Zn)),$n&&(jn.activeTexture.set(Qn.TEXTURE0),er.imageAtlasTexture.bind(Qn.LINEAR,Qn.CLAMP_TO_EDGE),Ar.updatePaintBuffers(Zn)),dt.prepareDrawProgram(jn,Fr,lr.toUnwrapped());const xo=mo=>{Fr.draw(jn,Qn.TRIANGLES,Yt,mo,rn,j.CullFaceMode.disabled,br,lt.id,dr.layoutVertexBuffer,dr.indexBuffer,dr.segments,lt.paint,dt.transform.zoom,Ar,[dr.layoutVertexBuffer2])};if(or){const mo=dt.stencilModeForClipping(lr).ref;mo===0&&dt.terrain&&jn.clear({stencil:0});const vo={func:Qn.EQUAL,mask:255};br.u_alpha_discard_threshold=.8,xo(new j.StencilMode(vo,mo,255,Qn.KEEP,Qn.KEEP,Qn.INVERT)),br.u_alpha_discard_threshold=0,xo(new j.StencilMode(vo,mo,255,Qn.KEEP,Qn.KEEP,Qn.KEEP))}else xo(dt.stencilModeForClipping(lr))}or&&(dt.resetStencilClippingMasks(),dt.terrain&&jn.clear({stencil:0}))},fill:function(dt,ot,lt,bt){const kt=lt.paint.get("fill-color"),Ft=lt.paint.get("fill-opacity");if(Ft.constantOr(1)===0)return;const Yt=dt.colorModeForRenderPass(),rn=lt.paint.get("fill-pattern"),ln=dt.opaquePassEnabledForLayer()&&!rn.constantOr(1)&&kt.constantOr(j.Color.transparent).a===1&&Ft.constantOr(0)===1?"opaque":"translucent";if(dt.renderPass===ln){const pn=dt.depthModeForSublayer(1,dt.renderPass==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly);Uo(dt,ot,lt,bt,pn,Yt,!1)}if(dt.renderPass==="translucent"&&lt.paint.get("fill-antialias")){const pn=dt.depthModeForSublayer(lt.getPaintProperty("fill-outline-color")?2:0,j.DepthMode.ReadOnly);Uo(dt,ot,lt,bt,pn,Yt,!0)}},"fill-extrusion":function(dt,ot,lt,bt){const kt=lt.paint.get("fill-extrusion-opacity");if(kt!==0&&dt.renderPass==="translucent"){const Ft=new j.DepthMode(dt.context.gl.LEQUAL,j.DepthMode.ReadWrite,dt.depthRangeFor3D);if(kt!==1||lt.paint.get("fill-extrusion-pattern").constantOr(1))gs(dt,ot,lt,bt,Ft,j.StencilMode.disabled,j.ColorMode.disabled),gs(dt,ot,lt,bt,Ft,dt.stencilModeFor3D(),dt.colorModeForRenderPass()),dt.resetStencilClippingMasks();else{const Yt=dt.colorModeForRenderPass();gs(dt,ot,lt,bt,Ft,j.StencilMode.disabled,Yt)}}},hillshade:function(dt,ot,lt,bt){if(dt.renderPass!=="offscreen"&&dt.renderPass!=="translucent")return;const kt=dt.context,Ft=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),Yt=dt.colorModeForRenderPass(),rn=dt.terrain&&dt.terrain.renderingToTexture,[ln,pn]=dt.renderPass!=="translucent"||rn?[{},bt]:dt.stencilConfigForOverlap(bt);for(const vn of pn){const Tn=ot.getTile(vn);if(Tn.needsHillshadePrepare&&dt.renderPass==="offscreen")o_(dt,Tn,lt,Ft,j.StencilMode.disabled,Yt);else if(dt.renderPass==="translucent"){const Dn=rn&&dt.terrain?dt.terrain.stencilModeForRTTOverlap(vn):ln[vn.overscaledZ];_a(dt,vn,Tn,lt,Ft,Dn,Yt)}}kt.viewport.set([0,0,dt.width,dt.height]),dt.resetStencilClippingMasks()},raster:function(dt,ot,lt,bt,kt,Ft){if(dt.renderPass!=="translucent"||lt.paint.get("raster-opacity")===0||!bt.length)return;const Yt=dt.context,rn=Yt.gl,ln=ot.getSource(),pn=dt.useProgram("raster"),vn=dt.colorModeForRenderPass(),Tn=dt.terrain&&dt.terrain.renderingToTexture,[Dn,$n]=ln instanceof ir||Tn?[{},bt]:dt.stencilConfigForOverlap(bt),Wn=$n[$n.length-1].overscaledZ,Zn=!dt.options.moving;for(const Fn of $n){const jn=Tn?j.DepthMode.disabled:dt.depthModeForSublayer(Fn.overscaledZ-Wn,lt.paint.get("raster-opacity")===1?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly,rn.LESS),Qn=Fn.toUnwrapped(),Gn=ot.getTile(Fn);if(Tn&&(!Gn||!Gn.hasData()))continue;const or=Tn?Fn.projMatrix:dt.transform.calculateProjMatrix(Qn,Zn),lr=dt.terrain&&Tn?dt.terrain.stencilModeForRTTOverlap(Fn):Dn[Fn.overscaledZ],er=Ft?0:lt.paint.get("raster-fade-duration");Gn.registerFadeDuration(er);const dr=ot.findLoadedParent(Fn,0),Ar=cv(Gn,dr,ot,dt.transform,er);let Fr,Dr;dt.terrain&&dt.terrain.prepareDrawTile();const co=lt.paint.get("raster-resampling")==="nearest"?rn.NEAREST:rn.LINEAR;Yt.activeTexture.set(rn.TEXTURE0),Gn.texture.bind(co,rn.CLAMP_TO_EDGE),Yt.activeTexture.set(rn.TEXTURE1),dr?(dr.texture.bind(co,rn.CLAMP_TO_EDGE),Fr=Math.pow(2,dr.tileID.overscaledZ-Gn.tileID.overscaledZ),Dr=[Gn.tileID.canonical.x*Fr%1,Gn.tileID.canonical.y*Fr%1]):Gn.texture.bind(co,rn.CLAMP_TO_EDGE);const Sr=bp(or,Dr||[0,0],Fr||1,Ar,lt,ln instanceof ir?ln.perspectiveTransform:[0,0]);if(dt.prepareDrawProgram(Yt,pn,Qn),ln instanceof ir)ln.boundsBuffer&&ln.boundsSegments&&pn.draw(Yt,rn.TRIANGLES,jn,j.StencilMode.disabled,vn,j.CullFaceMode.disabled,Sr,lt.id,ln.boundsBuffer,dt.quadTriangleIndexBuffer,ln.boundsSegments);else{const{tileBoundsBuffer:_i,tileBoundsIndexBuffer:eo,tileBoundsSegments:Or}=dt.getTileBoundsBuffers(Gn);pn.draw(Yt,rn.TRIANGLES,jn,lr,vn,j.CullFaceMode.disabled,Sr,lt.id,_i,eo,Or)}}dt.resetStencilClippingMasks()},background:function(dt,ot,lt,bt){const kt=lt.paint.get("background-color"),Ft=lt.paint.get("background-opacity");if(Ft===0)return;const Yt=dt.context,rn=Yt.gl,ln=dt.transform,pn=ln.tileSize,vn=lt.paint.get("background-pattern");if(dt.isPatternMissing(vn))return;const Tn=!vn&&kt.a===1&&Ft===1&&dt.opaquePassEnabledForLayer()?"opaque":"translucent";if(dt.renderPass!==Tn)return;const Dn=j.StencilMode.disabled,$n=dt.depthModeForSublayer(0,Tn==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly),Wn=dt.colorModeForRenderPass(),Zn=dt.useProgram(vn?"backgroundPattern":"background");let Fn,jn=bt;jn||(Fn=dt.getBackgroundTiles(),jn=Object.values(Fn).map(Gn=>Gn.tileID)),vn&&(Yt.activeTexture.set(rn.TEXTURE0),dt.imageManager.bind(dt.context));const Qn=lt.getCrossfadeParameters();for(const Gn of jn){const or=Gn.toUnwrapped(),lr=bt?Gn.projMatrix:dt.transform.calculateProjMatrix(or);dt.prepareDrawTile();const er=ot?ot.getTile(Gn):Fn?Fn[Gn.key]:new j.Tile(Gn,pn,ln.zoom,dt),dr=vn?l0(lr,Ft,dt,vn,{tileID:Gn,tileSize:pn},Qn):Pu(lr,Ft,kt);dt.prepareDrawProgram(Yt,Zn,or);const{tileBoundsBuffer:Ar,tileBoundsIndexBuffer:Fr,tileBoundsSegments:Dr}=dt.getTileBoundsBuffers(er);Zn.draw(Yt,rn.TRIANGLES,$n,Dn,Wn,j.CullFaceMode.disabled,dr,lt.id,Ar,Fr,Dr)}},sky:function(dt,ot,lt){const bt=dt.transform,kt=bt.projection.name==="mercator"||bt.projection.name==="globe"?1:j.smoothstep(7,8,bt.zoom),Ft=lt.paint.get("sky-opacity")*kt;if(Ft===0)return;const Yt=dt.context,rn=lt.paint.get("sky-type"),ln=new j.DepthMode(Yt.gl.LEQUAL,j.DepthMode.ReadOnly,[0,1]),pn=dt.frameCounter/1e3%1;rn==="atmosphere"?dt.renderPass==="offscreen"?lt.needsSkyboxCapture(dt)&&(function(vn,Tn,Dn,$n){const Wn=vn.context,Zn=Wn.gl;let Fn=Tn.skyboxFbo;if(!Fn){Fn=Tn.skyboxFbo=Wn.createFramebuffer(32,32,!1),Tn.skyboxGeometry=new Ms(Wn),Tn.skyboxTexture=Wn.gl.createTexture(),Zn.bindTexture(Zn.TEXTURE_CUBE_MAP,Tn.skyboxTexture),Zn.texParameteri(Zn.TEXTURE_CUBE_MAP,Zn.TEXTURE_WRAP_S,Zn.CLAMP_TO_EDGE),Zn.texParameteri(Zn.TEXTURE_CUBE_MAP,Zn.TEXTURE_WRAP_T,Zn.CLAMP_TO_EDGE),Zn.texParameteri(Zn.TEXTURE_CUBE_MAP,Zn.TEXTURE_MIN_FILTER,Zn.LINEAR),Zn.texParameteri(Zn.TEXTURE_CUBE_MAP,Zn.TEXTURE_MAG_FILTER,Zn.LINEAR);for(let or=0;or<6;++or)Zn.texImage2D(Zn.TEXTURE_CUBE_MAP_POSITIVE_X+or,0,Zn.RGBA,32,32,0,Zn.RGBA,Zn.UNSIGNED_BYTE,null)}Wn.bindFramebuffer.set(Fn.framebuffer),Wn.viewport.set([0,0,32,32]);const jn=Tn.getCenter(vn,!0),Qn=vn.useProgram("skyboxCapture"),Gn=new Float64Array(16);j.identity(Gn),j.rotateY(Gn,Gn,.5*-Math.PI),$u(Wn,Tn,Qn,Gn,jn,0),j.identity(Gn),j.rotateY(Gn,Gn,.5*Math.PI),$u(Wn,Tn,Qn,Gn,jn,1),j.identity(Gn),j.rotateX(Gn,Gn,.5*-Math.PI),$u(Wn,Tn,Qn,Gn,jn,2),j.identity(Gn),j.rotateX(Gn,Gn,.5*Math.PI),$u(Wn,Tn,Qn,Gn,jn,3),j.identity(Gn),$u(Wn,Tn,Qn,Gn,jn,4),j.identity(Gn),j.rotateY(Gn,Gn,Math.PI),$u(Wn,Tn,Qn,Gn,jn,5),Wn.viewport.set([0,0,vn.width,vn.height])}(dt,lt),lt.markSkyboxValid(dt)):dt.renderPass==="sky"&&function(vn,Tn,Dn,$n,Wn){const Zn=vn.context,Fn=Zn.gl,jn=vn.transform,Qn=vn.useProgram("skybox");Zn.activeTexture.set(Fn.TEXTURE0),Fn.bindTexture(Fn.TEXTURE_CUBE_MAP,Tn.skyboxTexture);const Gn=((or,lr,er,dr,Ar)=>({u_matrix:or,u_sun_direction:lr,u_cubemap:0,u_opacity:dr,u_temporal_offset:Ar}))(jn.skyboxMatrix,Tn.getCenter(vn,!1),0,$n,Wn);vn.prepareDrawProgram(Zn,Qn),Qn.draw(Zn,Fn.TRIANGLES,Dn,j.StencilMode.disabled,vn.colorModeForRenderPass(),j.CullFaceMode.backCW,Gn,"skybox",Tn.skyboxGeometry.vertexBuffer,Tn.skyboxGeometry.indexBuffer,Tn.skyboxGeometry.segment)}(dt,lt,ln,Ft,pn):rn==="gradient"&&dt.renderPass==="sky"&&function(vn,Tn,Dn,$n,Wn){const Zn=vn.context,Fn=Zn.gl,jn=vn.transform,Qn=vn.useProgram("skyboxGradient");Tn.skyboxGeometry||(Tn.skyboxGeometry=new Ms(Zn)),Zn.activeTexture.set(Fn.TEXTURE0);let Gn=Tn.colorRampTexture;Gn||(Gn=Tn.colorRampTexture=new j.Texture(Zn,Tn.colorRamp,Fn.RGBA)),Gn.bind(Fn.LINEAR,Fn.CLAMP_TO_EDGE);const or=((lr,er,dr,Ar,Fr)=>({u_matrix:lr,u_color_ramp:0,u_center_direction:er,u_radius:j.degToRad(dr),u_opacity:Ar,u_temporal_offset:Fr}))(jn.skyboxMatrix,Tn.getCenter(vn,!1),Tn.paint.get("sky-gradient-radius"),$n,Wn);vn.prepareDrawProgram(Zn,Qn),Qn.draw(Zn,Fn.TRIANGLES,Dn,j.StencilMode.disabled,vn.colorModeForRenderPass(),j.CullFaceMode.backCW,or,"skyboxGradient",Tn.skyboxGeometry.vertexBuffer,Tn.skyboxGeometry.indexBuffer,Tn.skyboxGeometry.segment)}(dt,lt,ln,Ft,pn)},debug:function(dt,ot,lt){for(let bt=0;bt<lt.length;bt++)wp(dt,ot,lt[bt])},custom:function(dt,ot,lt){const bt=dt.context,kt=lt.implementation;if(dt.transform.projection.unsupportedLayers&&dt.transform.projection.unsupportedLayers.includes("custom"))j.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(dt.renderPass==="offscreen"){const Ft=kt.prerender;Ft&&(dt.setCustomLayerDefaults(),bt.setColorMode(dt.colorModeForRenderPass()),Ft.call(kt,bt.gl,dt.transform.customLayerMatrix()),bt.setDirty(),dt.setBaseState())}else if(dt.renderPass==="translucent"){dt.setCustomLayerDefaults(),bt.setColorMode(dt.colorModeForRenderPass()),bt.setStencilMode(j.StencilMode.disabled);const Ft=kt.renderingMode==="3d"?new j.DepthMode(dt.context.gl.LEQUAL,j.DepthMode.ReadWrite,dt.depthRangeFor3D):dt.depthModeForSublayer(0,j.DepthMode.ReadOnly);bt.setDepthMode(Ft),kt.render(bt.gl,dt.transform.customLayerMatrix()),bt.setDirty(),dt.setBaseState(),bt.bindFramebuffer.set(null)}}};class y_{constructor(ot,lt){this.context=new Sn(ot),this.transform=lt,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=j.SourceCache.maxUnderzooming+j.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rm,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(ot,lt){const bt=!!ot&&!!ot.terrain&&this.transform.projection.supportsTerrain;if(!(bt||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new l_(this,ot));const kt=this._terrain;this.transform.elevation=bt?kt:null,kt.update(ot,this.transform,lt)}_updateFog(ot){const lt=ot.fog;if(!lt||this.transform.projection.name==="globe"||lt.getOpacity(this.transform.pitch)<1||lt.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[bt,kt]=lt.getFovAdjustedRange(this.transform._fov);if(bt>kt)return void(this.transform.fogCullDistSq=null);const Ft=bt+.78*(kt-bt);this.transform.fogCullDistSq=Ft*Ft}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(ot,lt){if(this.width=ot*j.exported.devicePixelRatio,this.height=lt*j.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const bt of this.style.order)this.style._layers[bt].resize()}setup(){const ot=this.context,lt=new j.StructArrayLayout2i4;lt.emplaceBack(0,0),lt.emplaceBack(j.EXTENT,0),lt.emplaceBack(0,j.EXTENT),lt.emplaceBack(j.EXTENT,j.EXTENT),this.tileExtentBuffer=ot.createVertexBuffer(lt,j.posAttributes.members),this.tileExtentSegments=j.SegmentVector.simpleSegment(0,0,4,2);const bt=new j.StructArrayLayout2i4;bt.emplaceBack(0,0),bt.emplaceBack(j.EXTENT,0),bt.emplaceBack(0,j.EXTENT),bt.emplaceBack(j.EXTENT,j.EXTENT),this.debugBuffer=ot.createVertexBuffer(bt,j.posAttributes.members),this.debugSegments=j.SegmentVector.simpleSegment(0,0,4,5);const kt=new j.StructArrayLayout2i4;kt.emplaceBack(-1,-1),kt.emplaceBack(1,-1),kt.emplaceBack(-1,1),kt.emplaceBack(1,1),this.viewportBuffer=ot.createVertexBuffer(kt,j.posAttributes.members),this.viewportSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Ft=new j.StructArrayLayout4i8;Ft.emplaceBack(0,0,0,0),Ft.emplaceBack(j.EXTENT,0,j.EXTENT,0),Ft.emplaceBack(0,j.EXTENT,0,j.EXTENT),Ft.emplaceBack(j.EXTENT,j.EXTENT,j.EXTENT,j.EXTENT),this.mercatorBoundsBuffer=ot.createVertexBuffer(Ft,j.boundsAttributes.members),this.mercatorBoundsSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Yt=new j.StructArrayLayout3ui6;Yt.emplaceBack(0,1,2),Yt.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=ot.createIndexBuffer(Yt);const rn=new j.StructArrayLayout1ui2;for(const pn of[0,1,3,2,0])rn.emplaceBack(pn);this.debugIndexBuffer=ot.createIndexBuffer(rn),this.emptyTexture=new j.Texture(ot,new j.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),ot.gl.RGBA),this.identityMat=j.create();const ln=this.context.gl;this.stencilClearMode=new j.StencilMode({func:ln.ALWAYS,mask:0},0,255,ln.ZERO,ln.ZERO,ln.ZERO),this.loadTimeStamps.push(j.window.performance.now()),this.atmosphereBuffer=new c0(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(ot){return ot._makeTileBoundsBuffers(this.context,this.transform.projection),ot._tileBoundsBuffer?{tileBoundsBuffer:ot._tileBoundsBuffer,tileBoundsIndexBuffer:ot._tileBoundsIndexBuffer,tileBoundsSegments:ot._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const ot=this.context,lt=ot.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(ot,lt.TRIANGLES,j.DepthMode.disabled,this.stencilClearMode,j.ColorMode.disabled,j.CullFaceMode.disabled,lp(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(ot,lt,bt){if(!lt||this.currentStencilSource===lt.id||!ot.isTileClipped()||!bt||bt.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let rn=!1;for(const ln of bt)if(this._tileClippingMaskIDs[ln.key]===void 0){rn=!0;break}if(!rn)return}this.currentStencilSource=lt.id;const kt=this.context,Ft=kt.gl;this.nextStencilID+bt.length>256&&this.clearStencil(),kt.setColorMode(j.ColorMode.disabled),kt.setDepthMode(j.DepthMode.disabled);const Yt=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const rn of bt){const ln=lt.getTile(rn),pn=this._tileClippingMaskIDs[rn.key]=this.nextStencilID++,{tileBoundsBuffer:vn,tileBoundsIndexBuffer:Tn,tileBoundsSegments:Dn}=this.getTileBoundsBuffers(ln);Yt.draw(kt,Ft.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Ft.ALWAYS,mask:0},pn,255,Ft.KEEP,Ft.KEEP,Ft.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,lp(rn.projMatrix),"$clipping",vn,Tn,Dn)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const ot=this.nextStencilID++,lt=this.context.gl;return new j.StencilMode({func:lt.NOTEQUAL,mask:255},ot,255,lt.KEEP,lt.KEEP,lt.REPLACE)}stencilModeForClipping(ot){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(ot);const lt=this.context.gl;return new j.StencilMode({func:lt.EQUAL,mask:255},this._tileClippingMaskIDs[ot.key],0,lt.KEEP,lt.KEEP,lt.REPLACE)}stencilConfigForOverlap(ot){const lt=this.context.gl,bt=ot.sort((Yt,rn)=>rn.overscaledZ-Yt.overscaledZ),kt=bt[bt.length-1].overscaledZ,Ft=bt[0].overscaledZ-kt+1;if(Ft>1){this.currentStencilSource=void 0,this.nextStencilID+Ft>256&&this.clearStencil();const Yt={};for(let rn=0;rn<Ft;rn++)Yt[rn+kt]=new j.StencilMode({func:lt.GEQUAL,mask:255},rn+this.nextStencilID,255,lt.KEEP,lt.KEEP,lt.REPLACE);return this.nextStencilID+=Ft,[Yt,bt]}return[{[kt]:j.StencilMode.disabled},bt]}colorModeForRenderPass(){const ot=this.context.gl;return this._showOverdrawInspector?new j.ColorMode([ot.CONSTANT_COLOR,ot.ONE],new j.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?j.ColorMode.unblended:j.ColorMode.alphaBlended}depthModeForSublayer(ot,lt,bt){if(!this.opaquePassEnabledForLayer())return j.DepthMode.disabled;const kt=1-((1+this.currentLayer)*this.numSublayers+ot)*this.depthEpsilon;return new j.DepthMode(bt||this.context.gl.LEQUAL,lt,[kt,kt])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(ot,lt){this.style=ot,this.options=lt,this.imageManager=ot.imageManager,this.glyphManager=ot.glyphManager,this.symbolFadeChange=ot.placement.symbolFadeChange(j.exported.now()),this.imageManager.beginFrame();const bt=this.style.order,kt=this.style._sourceCaches;for(const ln in kt){const pn=kt[ln];pn.used&&pn.prepare(this.context)}const Ft={},Yt={},rn={};for(const ln in kt){const pn=kt[ln];Ft[ln]=pn.getVisibleCoordinates(),Yt[ln]=Ft[ln].slice().reverse(),rn[ln]=pn.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ln=0;ln<bt.length;ln++)if(this.style._layers[bt[ln]].is3D()){this.opaquePassCutoff=ln;break}if(this.terrain&&(this.terrain.updateTileBinding(rn),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new j.GlobeSharedBuffers(this.context)),j.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const ln of bt){const pn=this.style._layers[ln],vn=ot._getLayerSourceCache(pn);if(!pn.hasOffscreenPass()||pn.isHidden(this.transform.zoom))continue;const Tn=vn?Yt[vn.id]:void 0;(pn.type==="custom"||pn.isSky()||Tn&&Tn.length)&&this.renderLayer(this,vn,pn,Tn)}if(this.depthRangeFor3D=[0,1-(ot.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:lt.showOverdrawInspector?j.Color.black:j.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=lt.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=bt.length-1;this.currentLayer>=0;this.currentLayer--){const ln=this.style._layers[bt[this.currentLayer]],pn=ot._getLayerSourceCache(ln);if(ln.isSky())continue;const vn=pn?Yt[pn.id]:void 0;this._renderTileClippingMasks(ln,pn,vn),this.renderLayer(this,pn,ln,vn)}if(this.style.fog&&this.transform.projection.supportsFog&&function(ln,pn){const vn=ln.context,Tn=vn.gl,Dn=ln.transform,$n=new j.DepthMode(Tn.LEQUAL,j.DepthMode.ReadOnly,[0,1]),Wn=ln.useProgram("globeAtmosphere",null,Dn.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Zn=j.globeToMercatorTransition(Dn.zoom),Fn=pn.properties.get("color").toArray01(),jn=pn.properties.get("high-color").toArray01(),Qn=pn.properties.get("space-color").toArray01PremultipliedAlpha(),Gn=j.identity$1([]);j.rotateY$1(Gn,Gn,-j.degToRad(Dn._center.lng)),j.rotateX$1(Gn,Gn,j.degToRad(Dn._center.lat)),j.rotateZ$1(Gn,Gn,Dn.angle),j.rotateX$1(Gn,Gn,-Dn._pitch);const or=j.fromQuat(new Float32Array(16),Gn),lr=j.mapValue(pn.properties.get("star-intensity"),0,1,0,.25),er=5e-4,dr=j.mapValue(pn.properties.get("horizon-blend"),0,1,er,.25),Ar=j.globeUseCustomAntiAliasing(ln,vn,Dn)&&dr===er?Dn.worldSize/(2*Math.PI*1.025)-1:Dn.globeRadius,Fr=ln.frameCounter/1e3%1,Dr=j.length(Dn.globeCenterInViewSpace),co=Math.sqrt(Math.pow(Dr,2)-Math.pow(Ar,2)),Sr=Math.acos(co/Dr),_i=((Or,br,xo,mo,vo,yo,Bo,Ho,Go,No,_o,es,hs,Ns)=>({u_frustum_tl:Or,u_frustum_tr:br,u_frustum_br:xo,u_frustum_bl:mo,u_horizon:vo,u_transition:yo,u_fadeout_range:Bo,u_color:Ho,u_high_color:Go,u_space_color:No,u_star_intensity:_o,u_star_size:5*j.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:es,u_horizon_angle:hs,u_rotation_matrix:Ns}))(Dn.frustumCorners.TL,Dn.frustumCorners.TR,Dn.frustumCorners.BR,Dn.frustumCorners.BL,Dn.frustumCorners.horizon,Zn,dr,Fn,jn,Qn,lr,Fr,Sr,or);ln.prepareDrawProgram(vn,Wn);const eo=ln.atmosphereBuffer;eo&&Wn.draw(vn,Tn.TRIANGLES,$n,j.StencilMode.disabled,j.ColorMode.alphaBlended,j.CullFaceMode.backCW,_i,"skybox",eo.vertexBuffer,eo.indexBuffer,eo.segments)}(this,this.style.fog),this.renderPass="sky",(j.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<bt.length;this.currentLayer++){const ln=this.style._layers[bt[this.currentLayer]],pn=ot._getLayerSourceCache(ln);ln.isSky()&&this.renderLayer(this,pn,ln,pn?Yt[pn.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<bt.length;){const ln=this.style._layers[bt[this.currentLayer]],pn=ot._getLayerSourceCache(ln);if(ln.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(ln)){if(ln.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const vn=pn?(ln.type==="symbol"?rn:Yt)[pn.id]:void 0;this._renderTileClippingMasks(ln,pn,pn?Ft[pn.id]:void 0),this.renderLayer(this,pn,ln,vn),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let ln=null;j.values(this.style._layers).forEach(pn=>{const vn=ot._getLayerSourceCache(pn);vn&&!pn.isHidden(this.transform.zoom)&&(!ln||ln.getSource().maxzoom<vn.getSource().maxzoom)&&(ln=vn)}),ln&&this.options.showTileBoundaries&&ny.debug(this,ln,ln.getVisibleCoordinates())}this.options.showPadding&&function(ln){const pn=ln.transform.padding;ty(ln,ln.transform.height-(pn.top||0),3,Ml),ty(ln,pn.bottom||0,3,Js),sm(ln,pn.left||0,3,m_),sm(ln,ln.transform.width-(pn.right||0),3,u0);const vn=ln.transform.centerPoint;(function(Tn,Dn,$n,Wn){Hu(Tn,Dn-1,$n-10,2,20,Wn),Hu(Tn,Dn-10,$n-1,20,2,Wn)})(ln,vn.x,ln.transform.height-vn.y,Tu)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(j.window.performance.now()),this.saveCanvasCopy())}}renderLayer(ot,lt,bt,kt){bt.isHidden(this.transform.zoom)||(bt.type==="background"||bt.type==="sky"||bt.type==="custom"||kt&&kt.length)&&(this.id=bt.id,this.gpuTimingStart(bt),ot.transform.projection.unsupportedLayers&&ot.transform.projection.unsupportedLayers.includes(bt.type)||ny[bt.type](ot,lt,bt,kt,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(ot){if(!this.options.gpuTiming)return;const lt=this.context.extTimerQuery;let bt=this.gpuTimers[ot.id];bt||(bt=this.gpuTimers[ot.id]={calls:0,cpuTime:0,query:lt.createQueryEXT()}),bt.calls++,lt.beginQueryEXT(lt.TIME_ELAPSED_EXT,bt.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const ot=this.context.extTimerQuery,lt=ot.createQueryEXT();this.deferredRenderGpuTimeQueries.push(lt),ot.beginQueryEXT(ot.TIME_ELAPSED_EXT,lt)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const ot=this.context.extTimerQuery;ot.endQueryEXT(ot.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const ot=this.context.extTimerQuery;ot.endQueryEXT(ot.TIME_ELAPSED_EXT)}collectGpuTimers(){const ot=this.gpuTimers;return this.gpuTimers={},ot}collectDeferredRenderGpuQueries(){const ot=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],ot}queryGpuTimers(ot){const lt={};for(const bt in ot){const kt=ot[bt],Ft=this.context.extTimerQuery,Yt=Ft.getQueryObjectEXT(kt.query,Ft.QUERY_RESULT_EXT)/1e6;Ft.deleteQueryEXT(kt.query),lt[bt]=Yt}return lt}queryGpuTimeDeferredRender(ot){if(!this.options.gpuTimingDeferredRender)return 0;const lt=this.context.extTimerQuery;let bt=0;for(const kt of ot)bt+=lt.getQueryObjectEXT(kt,lt.QUERY_RESULT_EXT)/1e6,lt.deleteQueryEXT(kt);return bt}translatePosMatrix(ot,lt,bt,kt,Ft){if(!bt[0]&&!bt[1])return ot;const Yt=Ft?kt==="map"?this.transform.angle:0:kt==="viewport"?-this.transform.angle:0;if(Yt){const pn=Math.sin(Yt),vn=Math.cos(Yt);bt=[bt[0]*vn-bt[1]*pn,bt[0]*pn+bt[1]*vn]}const rn=[Ft?bt[0]:dn(lt,bt[0],this.transform.zoom),Ft?bt[1]:dn(lt,bt[1],this.transform.zoom),0],ln=new Float32Array(16);return j.translate(ln,ot,rn),ln}saveTileTexture(ot){const lt=this._tileTextures[ot.size[0]];lt?lt.push(ot):this._tileTextures[ot.size[0]]=[ot]}getTileTexture(ot){const lt=this._tileTextures[ot];return lt&&lt.length>0?lt.pop():null}isPatternMissing(ot){if(!ot)return!1;if(!ot.from||!ot.to)return!0;const lt=this.imageManager.getPattern(ot.from.toString()),bt=this.imageManager.getPattern(ot.to.toString());return!lt||!bt}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const ot=this.terrain&&this.terrain.renderingToTexture,lt=this.style&&this.style.fog,bt=[];return this.terrainRenderModeElevated()&&bt.push("TERRAIN"),this.transform.projection.name==="globe"&&bt.push("GLOBE"),lt&&!ot&&lt.getOpacity(this.transform.pitch)!==0&&bt.push("FOG"),ot&&bt.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&bt.push("OVERDRAW_INSPECTOR"),bt}useProgram(ot,lt,bt){this.cache=this.cache||{};const kt=bt||[],Ft=this.currentGlobalDefines().concat(kt),Yt=dv.cacheKey(uv[ot],ot,Ft,lt);return this.cache[Yt]||(this.cache[Yt]=new dv(this.context,ot,uv[ot],lt,g_[ot],Ft)),this.cache[Yt]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const ot=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(ot.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=j.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new j.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(ot,lt,bt){if(this.terrain&&this.terrain.renderingToTexture)return;const kt=this.style.fog;if(kt){const Ft=kt.getOpacity(this.transform.pitch),Yt=((rn,ln,pn,vn,Tn,Dn,$n,Wn,Zn,Fn,jn)=>{const Qn=rn.transform,Gn=ln.properties.get("color").toArray01();Gn[3]=vn;const or=rn.frameCounter/1e3%1;return{u_fog_matrix:pn?Qn.calculateFogTileMatrix(pn):rn.identityMat,u_fog_range:ln.getFovAdjustedRange(Qn._fov),u_fog_color:Gn,u_fog_horizon_blend:ln.properties.get("horizon-blend"),u_fog_temporal_offset:or,u_frustum_tl:Tn,u_frustum_tr:Dn,u_frustum_br:$n,u_frustum_bl:Wn,u_globe_pos:Zn,u_globe_radius:Fn,u_viewport:jn,u_globe_transition:j.globeToMercatorTransition(Qn.zoom),u_is_globe:+(Qn.projection.name==="globe")}})(this,kt,bt,Ft,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*j.exported.devicePixelRatio,this.transform.height*j.exported.devicePixelRatio]);lt.setFogUniformValues(ot,Yt)}}setTileLoadedFlag(ot){this.tileLoaded=ot}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const ot=this.context.gl,lt=ot.createTexture();return ot.bindTexture(ot.TEXTURE_2D,lt),ot.copyTexImage2D(ot.TEXTURE_2D,0,ot.RGBA,0,0,ot.drawingBufferWidth,ot.drawingBufferHeight,0),lt}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const ot=this.style&&this.style.fog;return!!ot&&ot.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const ot=this._backgroundTiles,lt=this._backgroundTiles={},bt=this.transform.coveringTiles({tileSize:512});for(const kt of bt)lt[kt.key]=ot[kt.key]||new j.Tile(kt,512,this.transform.tileZoom,this);return lt}clearBackgroundTiles(){this._backgroundTiles={}}}class Sp{constructor(ot=0,lt=0,bt=0,kt=0){if(isNaN(ot)||ot<0||isNaN(lt)||lt<0||isNaN(bt)||bt<0||isNaN(kt)||kt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=ot,this.bottom=lt,this.left=bt,this.right=kt}interpolate(ot,lt,bt){return lt.top!=null&&ot.top!=null&&(this.top=j.number(ot.top,lt.top,bt)),lt.bottom!=null&&ot.bottom!=null&&(this.bottom=j.number(ot.bottom,lt.bottom,bt)),lt.left!=null&&ot.left!=null&&(this.left=j.number(ot.left,lt.left,bt)),lt.right!=null&&ot.right!=null&&(this.right=j.number(ot.right,lt.right,bt)),this}getCenter(ot,lt){const bt=j.clamp((this.left+ot-this.right)/2,0,ot),kt=j.clamp((this.top+lt-this.bottom)/2,0,lt);return new j.pointGeometry(bt,kt)}equals(ot){return this.top===ot.top&&this.bottom===ot.bottom&&this.left===ot.left&&this.right===ot.right}clone(){return new Sp(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ry(dt,ot){const lt=j.getColumn(dt,3);j.fromQuat(dt,ot),j.setColumn(dt,3,lt)}function __(dt,ot){const lt=j.identity$1([]);return j.rotateZ$1(lt,lt,-ot),j.rotateX$1(lt,lt,-dt),lt}function am(dt,ot){const lt=[dt[0],dt[1],0],bt=[ot[0],ot[1],0];if(j.length(lt)>=1e-15){const Yt=j.normalize([],lt);j.scale$2(bt,Yt,j.dot(bt,Yt)),ot[0]=bt[0],ot[1]=bt[1]}const kt=j.cross([],ot,dt);if(j.len(kt)<1e-15)return null;const Ft=Math.atan2(-kt[1],kt[0]);return __(Math.atan2(Math.sqrt(dt[0]*dt[0]+dt[1]*dt[1]),-dt[2]),Ft)}class iy{constructor(ot,lt){this.position=ot,this.orientation=lt}get position(){return this._position}set position(ot){if(ot){const lt=ot instanceof j.MercatorCoordinate?ot:new j.MercatorCoordinate(ot[0],ot[1],ot[2]);this._renderWorldCopies&&(lt.x=j.wrap(lt.x,0,1)),this._position=lt}else this._position=null}lookAtPoint(ot,lt){if(this.orientation=null,!this.position)return;const bt=this._elevation?this._elevation.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(ot)):0,kt=this.position,Ft=j.MercatorCoordinate.fromLngLat(ot,bt),Yt=[Ft.x-kt.x,Ft.y-kt.y,Ft.z-kt.z];lt||(lt=[0,0,1]),lt[2]=Math.abs(lt[2]),this.orientation=am(Yt,lt)}setPitchBearing(ot,lt){this.orientation=__(j.degToRad(ot),j.degToRad(-lt))}}class lm{constructor(ot,lt){this._transform=j.identity([]),this.orientation=lt,this.position=ot}get mercatorPosition(){const ot=this.position;return new j.MercatorCoordinate(ot[0],ot[1],ot[2])}get position(){const ot=j.getColumn(this._transform,3);return[ot[0],ot[1],ot[2]]}set position(ot){var lt;ot&&j.setColumn(this._transform,3,[(lt=ot)[0],lt[1],lt[2],1])}get orientation(){return this._orientation}set orientation(ot){this._orientation=ot||j.identity$1([]),ot&&ry(this._transform,this._orientation)}getPitchBearing(){const ot=this.forward(),lt=this.right();return{bearing:Math.atan2(-lt[1],lt[0]),pitch:Math.atan2(Math.sqrt(ot[0]*ot[0]+ot[1]*ot[1]),-ot[2])}}setPitchBearing(ot,lt){this._orientation=__(ot,lt),ry(this._transform,this._orientation)}forward(){const ot=j.getColumn(this._transform,2);return[-ot[0],-ot[1],-ot[2]]}up(){const ot=j.getColumn(this._transform,1);return[-ot[0],-ot[1],-ot[2]]}right(){const ot=j.getColumn(this._transform,0);return[ot[0],ot[1],ot[2]]}getCameraToWorld(ot,lt){const bt=new Float64Array(16);return j.invert(bt,this.getWorldToCamera(ot,lt)),bt}getWorldToCameraPosition(ot,lt,bt){const kt=this.position;j.scale$2(kt,kt,-ot);const Ft=new Float64Array(16);return j.fromScaling(Ft,[bt,bt,bt]),j.translate(Ft,Ft,kt),Ft[10]*=lt,Ft}getWorldToCamera(ot,lt){const bt=new Float64Array(16),kt=new Float64Array(4),Ft=this.position;return j.conjugate(kt,this._orientation),j.scale$2(Ft,Ft,-ot),j.fromQuat(bt,kt),j.translate(bt,bt,Ft),bt[1]*=-1,bt[5]*=-1,bt[9]*=-1,bt[13]*=-1,bt[8]*=lt,bt[9]*=lt,bt[10]*=lt,bt[11]*=lt,bt}getCameraToClipPerspective(ot,lt,bt,kt){const Ft=new Float64Array(16);return j.perspective(Ft,ot,lt,bt,kt),Ft}getDistanceToElevation(ot){const lt=ot===0?0:j.mercatorZfromAltitude(ot,this.position[1]),bt=this.forward();return(lt-this.position[2])/bt[2]}clone(){return new lm([...this.position],[...this.orientation])}}function Mm(dt,ot){const lt=Up(dt.projection,dt.zoom,dt.width,dt.height),bt=function(Ft,Yt,rn,ln,pn){const vn=new j.LngLat(rn.lng-180*yu,rn.lat),Tn=new j.LngLat(rn.lng+180*yu,rn.lat),Dn=Ft.project(vn.lng,vn.lat),$n=Ft.project(Tn.lng,Tn.lat),Wn=-Math.atan2($n.y-Dn.y,$n.x-Dn.x),Zn=j.MercatorCoordinate.fromLngLat(rn);Zn.y=j.clamp(Zn.y,-.999975,.999975);const Fn=Zn.toLngLat(),jn=Ft.project(Fn.lng,Fn.lat),Qn=j.MercatorCoordinate.fromLngLat(Fn);Qn.x+=yu;const Gn=Qn.toLngLat(),or=Ft.project(Gn.lng,Gn.lat),lr=Ro(or.x-jn.x,or.y-jn.y,Wn),er=j.MercatorCoordinate.fromLngLat(Fn);er.y+=yu;const dr=er.toLngLat(),Ar=Ft.project(dr.lng,dr.lat),Fr=Ro(Ar.x-jn.x,Ar.y-jn.y,Wn),Dr=Math.abs(lr.x)/Math.abs(Fr.y),co=j.identity([]);j.rotateZ(co,co,-Wn*(1-(pn?0:ln)));const Sr=j.identity([]);return j.scale(Sr,Sr,[1,1-(1-Dr)*ln,1]),Sr[4]=-Fr.x/Fr.y*ln,j.rotateZ(Sr,Sr,Wn),j.multiply(Sr,co,Sr),Sr}(dt.projection,0,dt.center,lt,ot),kt=Py(dt);return j.scale(bt,bt,[kt,kt,1]),bt}function Py(dt){const ot=dt.projection,lt=Up(dt.projection,dt.zoom,dt.width,dt.height),bt=um(ot,dt.center),kt=um(ot,j.LngLat.convert(ot.center));return Math.pow(2,bt*lt+(1-lt)*kt)}function Up(dt,ot,lt,bt,kt=1/0){const Ft=dt.range;if(!Ft)return 0;const Yt=Math.min(kt,Math.max(lt,bt)),rn=Math.log(Yt/1024)/Math.LN2;return j.smoothstep(Ft[0]+rn,Ft[1]+rn,ot)}const yu=1/4e4;function um(dt,ot){const lt=j.clamp(ot.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),bt=new j.LngLat(ot.lng-180*yu,lt),kt=new j.LngLat(ot.lng+180*yu,lt),Ft=dt.project(bt.lng,lt),Yt=dt.project(kt.lng,lt),rn=j.MercatorCoordinate.fromLngLat(bt),ln=j.MercatorCoordinate.fromLngLat(kt),pn=Yt.x-Ft.x,vn=Yt.y-Ft.y,Tn=ln.x-rn.x,Dn=ln.y-rn.y,$n=Math.sqrt((Tn*Tn+Dn*Dn)/(pn*pn+vn*vn));return Math.log($n)/Math.LN2}function Ro(dt,ot,lt){const bt=Math.cos(lt),kt=Math.sin(lt);return{x:dt*bt-ot*kt,y:dt*kt+ot*bt}}class ku{constructor(ot,lt,bt,kt,Ft,Yt,rn){this.tileSize=512,this._renderWorldCopies=Ft===void 0||Ft,this._minZoom=ot||0,this._maxZoom=lt||22,this._minPitch=bt??0,this._maxPitch=kt??60,this.setProjection(Yt),this.setMaxBounds(rn),this.width=0,this.height=0,this._center=new j.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Sp,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new lm,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const ot=new ku(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return ot._elevation=this._elevation,ot._centerAltitude=this._centerAltitude,ot._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,ot.tileSize=this.tileSize,ot.mercatorFromTransition=this.mercatorFromTransition,ot.width=this.width,ot.height=this.height,ot.cameraElevationReference=this.cameraElevationReference,ot._center=this._center,ot._setZoom(this.zoom),ot._seaLevelZoom=this._seaLevelZoom,ot.angle=this.angle,ot._fov=this._fov,ot._pitch=this._pitch,ot._nearZ=this._nearZ,ot._farZ=this._farZ,ot._averageElevation=this._averageElevation,ot._unmodified=this._unmodified,ot._edgeInsets=this._edgeInsets.clone(),ot._camera=this._camera.clone(),ot._calcMatrices(),ot.freezeTileCoverage=this.freezeTileCoverage,ot.frustumCorners=this.frustumCorners,ot}get elevation(){return this._elevation}set elevation(ot){this._elevation!==ot&&(this._elevation=ot,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(ot){const lt=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||lt)&&this._updateCameraOnTerrain(),(ot||lt)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return j.pick(this.projection,["name","center","parallels"])}setProjection(ot){this.projectionOptions=ot||{name:"mercator"};const lt=this.projection?this.getProjection():void 0;this.projection=j.getProjection(this.projectionOptions);const bt=!it(lt,this.getProjection());return bt&&this._calcMatrices(),this.mercatorFromTransition=!1,bt}setMercatorFromTransition(){const ot=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=j.getProjection({name:"mercator"});const lt=ot!==this.projection.name;return lt&&this._calcMatrices(),lt}get minZoom(){return this._minZoom}set minZoom(ot){this._minZoom!==ot&&(this._minZoom=ot,this.zoom=Math.max(this.zoom,ot))}get maxZoom(){return this._maxZoom}set maxZoom(ot){this._maxZoom!==ot&&(this._maxZoom=ot,this.zoom=Math.min(this.zoom,ot))}get minPitch(){return this._minPitch}set minPitch(ot){this._minPitch!==ot&&(this._minPitch=ot,this.pitch=Math.max(this.pitch,ot))}get maxPitch(){return this._maxPitch}set maxPitch(ot){this._maxPitch!==ot&&(this._maxPitch=ot,this.pitch=Math.min(this.pitch,ot))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(ot){ot===void 0?ot=!0:ot===null&&(ot=!1),this._renderWorldCopies=ot}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const ot=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(ot))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return j.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new j.pointGeometry(this.width,this.height)}get bearing(){return j.wrap(this.rotation,-180,180)}set bearing(ot){this.rotation=ot}get rotation(){return-this.angle/Math.PI*180}set rotation(ot){const lt=-ot*Math.PI/180;var bt;this.angle!==lt&&(this._unmodified=!1,this.angle=lt,this._calcMatrices(),this.rotationMatrix=(bt=new j.ARRAY_TYPE(4),j.ARRAY_TYPE!=Float32Array&&(bt[1]=0,bt[2]=0),bt[0]=1,bt[3]=1,bt),function(kt,Ft,Yt){var rn=Ft[0],ln=Ft[1],pn=Ft[2],vn=Ft[3],Tn=Math.sin(Yt),Dn=Math.cos(Yt);kt[0]=rn*Dn+pn*Tn,kt[1]=ln*Dn+vn*Tn,kt[2]=rn*-Tn+pn*Dn,kt[3]=ln*-Tn+vn*Dn}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(ot){const lt=j.clamp(ot,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==lt&&(this._unmodified=!1,this._pitch=lt,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const ot=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/ot)}set fov(ot){ot=Math.max(.01,Math.min(60,ot)),this._fov!==ot&&(this._unmodified=!1,this._fov=j.degToRad(ot),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(ot){this._averageElevation=ot,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(ot){const lt=Math.min(Math.max(ot,this.minZoom),this.maxZoom);this._zoom!==lt&&(this._unmodified=!1,this._setZoom(lt),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(ot){this._zoom=ot,this.scale=this.zoomScale(ot),this.tileZoom=Math.floor(ot),this.zoomFraction=ot-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const ot=this._elevation;this._centerAltitude=ot.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=ot.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const ot=this._elevation,lt=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],bt=this.horizonLineFromTop();let kt=0,Ft=0;for(let Yt=0;Yt<lt.length;Yt++){const rn=new j.pointGeometry(lt[Yt][0]*this.width,bt+lt[Yt][1]*(this.height-bt)),ln=ot.pointCoordinate(rn);if(!ln)continue;const pn=1/Math.hypot(ln[0]-this._camera.position[0],ln[1]-this._camera.position[1]);kt+=ln[3]*pn,Ft+=pn}return Ft===0?NaN:kt/Ft}get center(){return this._center}set center(ot){ot.lat===this._center.lat&&ot.lng===this._center.lng||(this._unmodified=!1,this._center=ot,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const ot=this._seaLevelZoom,lt=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),bt=this.pixelsPerMeter/this.worldSize*lt,kt=this._mercatorZfromZoom(ot),Ft=this._mercatorZfromZoom(this._maxZoom),Yt=Math.max(kt-bt,Ft);this._setZoom(this._zoomFromMercatorZ(Yt))}get padding(){return this._edgeInsets.toJSON()}set padding(ot){this._edgeInsets.equals(ot)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ot,1),this._calcMatrices())}computeZoomRelativeTo(ot){const lt=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,ot.toAltitude()));let bt;bt=ot.z<this._camera.position[2]?[lt.x,lt.y,lt.z]:[ot.x,ot.y,ot.z];const kt=j.length(j.sub([],this._camera.position,bt));return j.clamp(this._zoomFromMercatorZ(kt),this._minZoom,this._maxZoom)}setFreeCameraOptions(ot){if(!this.height||!ot.position&&!ot.orientation)return;this._updateCameraState();let lt=!1;if(ot.orientation&&!j.exactEquals(ot.orientation,this._camera.orientation)&&(lt=this._setCameraOrientation(ot.orientation)),ot.position){const bt=[ot.position.x,ot.position.y,ot.position.z];j.exactEquals$1(bt,this._camera.position)||(this._setCameraPosition(bt),lt=!0)}lt&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const ot=this._camera.position,lt=new iy;return lt.position=new j.MercatorCoordinate(ot[0],ot[1],ot[2]),lt.orientation=this._camera.orientation,lt._elevation=this.elevation,lt._renderWorldCopies=this.renderWorldCopies,lt}_setCameraOrientation(ot){if(!j.length$1(ot))return!1;j.normalize$1(ot,ot);const lt=j.transformQuat([],[0,0,-1],ot),bt=j.transformQuat([],[0,-1,0],ot);if(bt[2]<0)return!1;const kt=am(lt,bt);return!!kt&&(this._camera.orientation=kt,!0)}_setCameraPosition(ot){const lt=this.zoomScale(this.minZoom)*this.tileSize,bt=this.zoomScale(this.maxZoom)*this.tileSize,kt=this.cameraToCenterDistance;ot[2]=j.clamp(ot[2],kt/bt,kt/lt),this._camera.position=ot}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(ot){return this._edgeInsets.equals(ot)}interpolatePadding(ot,lt,bt){this._unmodified=!1,this._edgeInsets.interpolate(ot,lt,bt),this._constrain(),this._calcMatrices()}coveringZoomLevel(ot){const lt=(ot.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/ot.tileSize));return Math.max(0,lt)}getVisibleUnwrappedCoordinates(ot){const lt=[new j.UnwrappedTileID(0,ot)];if(this.renderWorldCopies){const bt=this.pointCoordinate(new j.pointGeometry(0,0)),kt=this.pointCoordinate(new j.pointGeometry(this.width,0)),Ft=this.pointCoordinate(new j.pointGeometry(this.width,this.height)),Yt=this.pointCoordinate(new j.pointGeometry(0,this.height)),rn=Math.floor(Math.min(bt.x,kt.x,Ft.x,Yt.x)),ln=Math.floor(Math.max(bt.x,kt.x,Ft.x,Yt.x)),pn=1;for(let vn=rn-pn;vn<=ln+pn;vn++)vn!==0&&lt.push(new j.UnwrappedTileID(vn,ot))}return lt}coveringTiles(ot){let lt=this.coveringZoomLevel(ot);const bt=lt,kt=this.elevation&&!ot.isTerrainDEM,Ft=this.projection.name==="mercator";if(ot.minzoom!==void 0&&lt<ot.minzoom)return[];ot.maxzoom!==void 0&&lt>ot.maxzoom&&(lt=ot.maxzoom);const Yt=this.locationCoordinate(this.center),rn=this.center.lat,ln=1<<lt,pn=[ln*Yt.x,ln*Yt.y,0],vn=this.projection.name==="globe",Tn=!vn,Dn=j.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,lt,Tn),$n=vn?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Wn=ln*j.mercatorZfromAltitude(1,this.center.lat),Zn=this._camera.position[2]/j.mercatorZfromAltitude(1,this.center.lat),Fn=[ln*$n.x,ln*$n.y,Zn*(Tn?1:Wn)],jn=this.cameraToCenterDistance/ot.tileSize*(ot.roundZoom?1:.502),Qn=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?lt:0,Gn=ot.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,or=ot.isTerrainDEM?-Gn:this._elevation?this._elevation.getMinElevationBelowMSL():0,lr=this.projection.isReprojectedInTileSpace?Py(this):1,er=br=>{const mo=new j.MercatorCoordinate(br.x+25e-6,br.y,br.z),vo=new j.MercatorCoordinate(br.x,br.y+25e-6,br.z),yo=br.toLngLat(),Bo=mo.toLngLat(),Ho=vo.toLngLat(),Go=this.locationCoordinate(yo),No=this.locationCoordinate(Bo),_o=this.locationCoordinate(Ho),es=Math.hypot(No.x-Go.x,No.y-Go.y),hs=Math.hypot(_o.x-Go.x,_o.y-Go.y);return Math.sqrt(es*hs)*lr/25e-6},dr=br=>{const xo=Gn,mo=or;return{aabb:j.tileAABB(this,ln,0,0,0,br,mo,xo,this.projection),zoom:0,x:0,y:0,minZ:mo,maxZ:xo,wrap:br,fullyVisible:!1}},Ar=[];let Fr=[];const Dr=lt,co=ot.reparseOverscaled?bt:lt,Sr=br=>br*br,_i=Sr((Zn-this._centerAltitude)*Wn),eo=br=>{if(!this._elevation||!br.tileID||!Ft)return;const xo=this._elevation.getMinMaxForTile(br.tileID),mo=br.aabb;xo?(mo.min[2]=xo.min,mo.max[2]=xo.max,mo.center[2]=(mo.min[2]+mo.max[2])/2):(br.shouldSplit=Or(br),br.shouldSplit||(mo.min[2]=mo.max[2]=mo.center[2]=this._centerAltitude))},Or=br=>{if(br.zoom<Qn)return!0;if(br.zoom===Dr)return!1;if(br.shouldSplit!=null)return br.shouldSplit;const xo=br.aabb.distanceX(Fn),mo=br.aabb.distanceY(Fn);let vo=_i,yo=1;if(vn){vo=Sr(br.aabb.distanceZ(Fn));const Go=Math.pow(2,br.zoom),No=j.latFromMercatorY((br.y+1)/Go),_o=j.latFromMercatorY(br.y/Go),es=Math.min(Math.max(rn,No),_o),hs=j.circumferenceAtLatitude(es)/j.circumferenceAtLatitude(rn);if(yo=es===rn?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,hs/this._mercatorScaleRatio),this.zoom<=j.GLOBE_ZOOM_THRESHOLD_MIN&&br.zoom===Dr-1&&hs>=.9)return!0}else if(kt&&(vo=Sr(br.aabb.distanceZ(Fn)*Wn)),this.projection.isReprojectedInTileSpace&&bt<=5){const Go=Math.pow(2,br.zoom),No=er(new j.MercatorCoordinate((br.x+.5)/Go,(br.y+.5)/Go));yo=No>.85?1:No}const Bo=xo*xo+mo*mo+vo,Ho=Sr((1<<Dr-br.zoom)*jn*yo*((Go,No)=>{if(No*Sr(.707)<Go)return 1;const _o=Math.sqrt(No/Go);return _o/(1.4144271570014144+(Math.pow(1.1,_o-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(vo,_i),Bo));return Bo<Ho};if(this.renderWorldCopies)for(let br=1;br<=3;br++)Ar.push(dr(-br)),Ar.push(dr(br));for(Ar.push(dr(0));Ar.length>0;){const br=Ar.pop(),xo=br.x,mo=br.y;let vo=br.fullyVisible;if(!vo){const yo=br.aabb.intersects(Dn);if(yo===0)continue;vo=yo===2}if(br.zoom!==Dr&&Or(br))for(let yo=0;yo<4;yo++){const Bo=(xo<<1)+yo%2,Ho=(mo<<1)+(yo>>1),Go={aabb:Ft?br.aabb.quadrant(yo):j.tileAABB(this,ln,br.zoom+1,Bo,Ho,br.wrap,br.minZ,br.maxZ,this.projection),zoom:br.zoom+1,x:Bo,y:Ho,wrap:br.wrap,fullyVisible:vo,tileID:void 0,shouldSplit:void 0,minZ:br.minZ,maxZ:br.maxZ};kt&&!vn&&(Go.tileID=new j.OverscaledTileID(br.zoom+1===Dr?co:br.zoom+1,br.wrap,br.zoom+1,Bo,Ho),eo(Go)),Ar.push(Go)}else{const yo=br.zoom===Dr?co:br.zoom;if(ot.minzoom&&ot.minzoom>yo)continue;const Bo=pn[0]-(.5+xo+(br.wrap<<br.zoom))*(1<<lt-br.zoom),Ho=pn[1]-.5-mo,Go=br.tileID?br.tileID:new j.OverscaledTileID(yo,br.wrap,br.zoom,xo,mo);Fr.push({tileID:Go,distanceSq:Bo*Bo+Ho*Ho})}}if(this.fogCullDistSq){const br=this.fogCullDistSq,xo=this.horizonLineFromTop();Fr=Fr.filter(mo=>{const vo=[0,0,0,1],yo=[j.EXTENT,j.EXTENT,0,1],Bo=this.calculateFogTileMatrix(mo.tileID.toUnwrapped());j.transformMat4$1(vo,vo,Bo),j.transformMat4$1(yo,yo,Bo);const Ho=j.getAABBPointSquareDist(vo,yo);if(Ho===0)return!0;let Go=!1;const No=this._elevation;if(No&&Ho>br&&xo!==0){const _o=this.calculateProjMatrix(mo.tileID.toUnwrapped());let es;ot.isTerrainDEM||(es=No.getMinMaxForTile(mo.tileID)),es||(es={min:or,max:Gn});const hs=j.furthestTileCorner(this.rotation),Ns=[hs[0]*j.EXTENT,hs[1]*j.EXTENT,es.max];j.transformMat4(Ns,Ns,_o),Go=(1-Ns[1])*this.height*.5<xo}return Ho<br||Go})}return Fr.sort((br,xo)=>br.distanceSq-xo.distanceSq).map(br=>br.tileID)}resize(ot,lt){this.width=ot,this.height=lt,this.pixelsToGLUnits=[2/ot,-2/lt],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(ot){return Math.pow(2,ot)}scaleZoom(ot){return Math.log(ot)/Math.LN2}project(ot){const lt=j.clamp(ot.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),bt=this.projection.project(ot.lng,lt);return new j.pointGeometry(bt.x*this.worldSize,bt.y*this.worldSize)}unproject(ot){return this.projection.unproject(ot.x/this.worldSize,ot.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(ot,lt){let bt,kt;const Ft=this.centerPoint;if(this.projection.name==="globe"){const rn=this.worldSize;bt=(lt.x-Ft.x)/rn,kt=(lt.y-Ft.y)/rn}else{const rn=this.pointCoordinate(lt),ln=this.pointCoordinate(Ft);bt=rn.x-ln.x,kt=rn.y-ln.y}const Yt=this.locationCoordinate(ot);this.setLocation(new j.MercatorCoordinate(Yt.x-bt,Yt.y-kt))}setLocation(ot){this.center=this.coordinateLocation(ot),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(ot){return this.projection.locationPoint(this,ot)}locationPoint3D(ot){return this.projection.locationPoint(this,ot,!0)}pointLocation(ot){return this.coordinateLocation(this.pointCoordinate(ot))}pointLocation3D(ot){return this.coordinateLocation(this.pointCoordinate3D(ot))}locationCoordinate(ot,lt){const bt=lt?j.mercatorZfromAltitude(lt,ot.lat):void 0,kt=this.projection.project(ot.lng,ot.lat);return new j.MercatorCoordinate(kt.x,kt.y,bt)}coordinateLocation(ot){return this.projection.unproject(ot.x,ot.y)}pointRayIntersection(ot,lt){const bt=lt??this._centerAltitude,kt=[ot.x,ot.y,0,1],Ft=[ot.x,ot.y,1,1];j.transformMat4$1(kt,kt,this.pixelMatrixInverse),j.transformMat4$1(Ft,Ft,this.pixelMatrixInverse);const Yt=Ft[3];j.scale$1(kt,kt,1/kt[3]),j.scale$1(Ft,Ft,1/Yt);const rn=kt[2],ln=Ft[2];return{p0:kt,p1:Ft,t:rn===ln?0:(bt-rn)/(ln-rn)}}screenPointToMercatorRay(ot){const lt=[ot.x,ot.y,0,1],bt=[ot.x,ot.y,1,1];return j.transformMat4$1(lt,lt,this.pixelMatrixInverse),j.transformMat4$1(bt,bt,this.pixelMatrixInverse),j.scale$1(lt,lt,1/lt[3]),j.scale$1(bt,bt,1/bt[3]),lt[2]=j.mercatorZfromAltitude(lt[2],this._center.lat)*this.worldSize,bt[2]=j.mercatorZfromAltitude(bt[2],this._center.lat)*this.worldSize,j.scale$1(lt,lt,1/this.worldSize),j.scale$1(bt,bt,1/this.worldSize),new j.Ray([lt[0],lt[1],lt[2]],j.normalize([],j.sub([],bt,lt)))}rayIntersectionCoordinate(ot){const{p0:lt,p1:bt,t:kt}=ot,Ft=j.mercatorZfromAltitude(lt[2],this._center.lat),Yt=j.mercatorZfromAltitude(bt[2],this._center.lat);return new j.MercatorCoordinate(j.number(lt[0],bt[0],kt)/this.worldSize,j.number(lt[1],bt[1],kt)/this.worldSize,j.number(Ft,Yt,kt))}pointCoordinate(ot,lt=this._centerAltitude){return this.projection.pointCoordinate(this,ot.x,ot.y,lt)}pointCoordinate3D(ot){if(!this.elevation)return this.pointCoordinate(ot);let lt=this.projection.pointCoordinate3D(this,ot.x,ot.y);if(lt)return new j.MercatorCoordinate(lt[0],lt[1],lt[2]);let bt=0,kt=this.horizonLineFromTop();if(ot.y>kt)return this.pointCoordinate(ot);const Ft=.02*kt,Yt=ot.clone();for(let rn=0;rn<10&&kt-bt>Ft;rn++){Yt.y=j.number(bt,kt,.66);const ln=this.projection.pointCoordinate3D(this,Yt.x,Yt.y);ln?(kt=Yt.y,lt=ln):bt=Yt.y}return lt?new j.MercatorCoordinate(lt[0],lt[1],lt[2]):this.pointCoordinate(ot)}isPointAboveHorizon(ot){return this.projection.isPointAboveHorizon(this,ot)}_coordinatePoint(ot,lt){const bt=lt&&this.elevation?this.elevation.getAtPointOrZero(ot,this._centerAltitude):this._centerAltitude,kt=[ot.x*this.worldSize,ot.y*this.worldSize,bt+ot.toAltitude(),1];return j.transformMat4$1(kt,kt,this.pixelMatrix),kt[3]>0?new j.pointGeometry(kt[0]/kt[3],kt[1]/kt[3]):new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:ot,left:lt}=this._edgeInsets,bt=this.height-this._edgeInsets.bottom,kt=this.width-this._edgeInsets.right,Ft=this.pointCoordinate3D(new j.pointGeometry(lt,ot)),Yt=this.pointCoordinate3D(new j.pointGeometry(kt,ot)),rn=this.pointCoordinate3D(new j.pointGeometry(kt,bt)),ln=this.pointCoordinate3D(new j.pointGeometry(lt,bt));let pn=Math.min(Ft.x,ln.x),vn=Math.max(Yt.x,rn.x),Tn=Math.min(Ft.y,Yt.y),Dn=Math.max(ln.y,rn.y);const $n=Math.pow(2,-this.zoom)/16,Wn=(jn,Qn,Gn,or)=>{const lr=(jn+Gn)/2,er=(Qn+or)/2,dr=new j.pointGeometry(lr,er),Ar=this.pointCoordinate3D(dr),Fr=Math.max(0,pn-Ar.x,Tn-Ar.y,Ar.x-vn,Ar.y-Dn);pn=Math.min(pn,Ar.x),vn=Math.max(vn,Ar.x),Tn=Math.min(Tn,Ar.y),Dn=Math.max(Dn,Ar.y),Fr>$n&&(Wn(jn,Qn,lr,er),Wn(lr,er,Gn,or))};Wn(lt,ot,kt,ot),Wn(kt,ot,kt,bt),Wn(kt,bt,lt,bt),Wn(lt,bt,lt,ot);const Zn=new j.LngLat(j.lngFromMercatorX(vn),j.latFromMercatorY(Tn)),Fn=new j.LngLat(j.lngFromMercatorX(pn),j.latFromMercatorY(Dn));return new j.LngLatBounds(Fn,Zn)}_getBounds(ot,lt){if(this.projection.name==="globe")return this._getGlobeBounds();const bt=new j.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),kt=new j.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),Ft=new j.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),Yt=new j.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let rn=this.pointCoordinate(bt,ot),ln=this.pointCoordinate(kt,ot);const pn=this.pointCoordinate(Ft,lt),vn=this.pointCoordinate(Yt,lt),Tn=(Dn,$n)=>($n.y-Dn.y)/($n.x-Dn.x);return rn.y>1&&ln.y>=0?rn=new j.MercatorCoordinate((1-vn.y)/Tn(vn,rn)+vn.x,1):rn.y<0&&ln.y<=1&&(rn=new j.MercatorCoordinate(-vn.y/Tn(vn,rn)+vn.x,0)),ln.y>1&&rn.y>=0?ln=new j.MercatorCoordinate((1-pn.y)/Tn(pn,ln)+pn.x,1):ln.y<0&&rn.y<=1&&(ln=new j.MercatorCoordinate(-pn.y/Tn(pn,ln)+pn.x,0)),new j.LngLatBounds().extend(this.coordinateLocation(rn)).extend(this.coordinateLocation(ln)).extend(this.coordinateLocation(vn)).extend(this.coordinateLocation(pn))}_getBounds3D(){const ot=this.elevation;if(!ot.visibleDemTiles.length||ot.isUsingMockSource())return this._getBounds(0,0);const lt=ot.visibleDemTiles.reduce((bt,kt)=>{if(kt.dem){const Ft=kt.dem.tree;bt.min=Math.min(bt.min,Ft.minimums[0]),bt.max=Math.max(bt.max,Ft.maximums[0])}return bt},{min:Number.MAX_VALUE,max:0});return this._getBounds(lt.min*ot.exaggeration(),lt.max*ot.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(ot=!0){const lt=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,bt=this.height/2-lt*(1-this._horizonShift);return ot?Math.max(0,bt):bt}getMaxBounds(){return this.maxBounds}setMaxBounds(ot){this.maxBounds=ot,this.minLat=-j.MAX_MERCATOR_LATITUDE,this.maxLat=j.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,ot&&(this.minLat=ot.getSouth(),this.maxLat=ot.getNorth(),this.minLng=ot.getWest(),this.maxLng=ot.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=j.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=j.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=j.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=j.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(ot,lt){return this.projection.createTileMatrix(this,lt,ot)}calculateDistanceTileData(ot){const lt=ot.key,bt=this._distanceTileDataCache;if(bt[lt])return bt[lt];const kt=ot.canonical,Ft=1/this.height,Yt=this.cameraWorldSize/this.zoomScale(kt.z),rn=(kt.x+Math.pow(2,kt.z)*ot.wrap)*Yt,ln=kt.y*Yt,pn=this.point,vn=this.angle,Tn=Math.sin(-vn),Dn=-Math.cos(-vn);return bt[lt]={bearing:[Tn,Dn],center:[(pn.x-rn)*Ft,(pn.y-ln)*Ft],scale:Yt/j.EXTENT*Ft},bt[lt]}calculateFogTileMatrix(ot){const lt=ot.key,bt=this._fogTileMatrixCache;if(bt[lt])return bt[lt];const kt=this.projection.createTileMatrix(this,this.cameraWorldSize,ot);return j.multiply(kt,this.worldToFogMatrix,kt),bt[lt]=new Float32Array(kt),bt[lt]}calculateProjMatrix(ot,lt=!1){const bt=ot.key,kt=lt?this._alignedProjMatrixCache:this._projMatrixCache;if(kt[bt])return kt[bt];const Ft=this.calculatePosMatrix(ot,this.worldSize);return j.multiply(Ft,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:lt?this.alignedProjMatrix:this.projMatrix,Ft),kt[bt]=new Float32Array(Ft),kt[bt]}calculatePixelsToTileUnitsMatrix(ot){const lt=ot.tileID.key,bt=this._pixelsToTileUnitsCache;if(bt[lt])return bt[lt];const kt=function(Ft,Yt){const{scale:rn}=Ft.tileTransform,ln=rn*j.EXTENT/(Ft.tileSize*Math.pow(2,Yt.zoom-Ft.tileID.overscaledZ+Ft.tileID.canonical.z));return pn=new Float32Array(4),Dn=(vn=Yt.inverseAdjustmentMatrix)[1],$n=vn[2],Wn=vn[3],Fn=(Tn=[ln,ln])[1],pn[0]=vn[0]*(Zn=Tn[0]),pn[1]=Dn*Zn,pn[2]=$n*Fn,pn[3]=Wn*Fn,pn;var pn,vn,Tn,Dn,$n,Wn,Zn,Fn}(ot,this);return bt[lt]=kt,bt[lt]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const ot=this._elevation;this._updateCameraState();const lt=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,bt=this._computeCameraPosition(lt),kt=this._camera.forward(),Ft=j.mercatorZfromAltitude(1,this._center.lat);bt[2]/=Ft,kt[2]/=Ft,j.normalize(kt,kt);const Yt=ot.raycast(bt,kt,ot.exaggeration());if(Yt){const rn=j.scaleAndAdd([],bt,kt,Yt),ln=new j.MercatorCoordinate(rn[0],rn[1],j.mercatorZfromAltitude(rn[2],j.latFromMercatorY(rn[1]))),pn=(ln.z+j.length([ln.x-bt[0],ln.y-bt[1],ln.z-bt[2]*Ft]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(pn),this._centerAltitude=ln.toAltitude(),this._center=this.coordinateLocation(ln),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const ot=this._elevation;this._updateCameraState();const lt=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,bt=this._computeCameraPosition(lt),kt=ot.getAtPointOrZero(new j.MercatorCoordinate(...bt)),Ft=this._minimumHeightOverTerrain()*Math.cos(j.degToRad(this._maxPitch)),Yt=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*kt;if(Yt<Ft){const rn=this.locationCoordinate(this._center,this._centerAltitude),ln=[rn.x-bt[0],rn.y-bt[1],rn.z-bt[2]],pn=j.length(ln);ln[2]-=(Ft-Yt)/this._pixelsPerMercatorPixel;const vn=j.length(ln);if(vn===0)return;j.scale$2(ln,ln,pn/vn*this._pixelsPerMercatorPixel),this._camera.position=[rn.x-ln[0],rn.y-ln[1],rn.z*this._pixelsPerMercatorPixel-ln[2]],this._camera.orientation=am(ln,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const ot=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||ot){const Dn=this.center;return Dn.lat=j.clamp(Dn.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!ot)&&(Dn.lng=j.clamp(Dn.lng,this.minLng,this.maxLng)),this.center=Dn,void(this._constraining=!1)}const lt=this._unmodified,{x:bt,y:kt}=this.point;let Ft=0,Yt=bt,rn=kt;const ln=this.width/2,pn=this.height/2,vn=this.worldMinY*this.scale,Tn=this.worldMaxY*this.scale;if(kt-pn<vn&&(rn=vn+pn),kt+pn>Tn&&(rn=Tn-pn),Tn-vn<this.height&&(Ft=Math.max(Ft,this.height/(Tn-vn)),rn=(Tn+vn)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Dn=this.worldMinX*this.scale,$n=this.worldMaxX*this.scale,Wn=this.worldSize/2-(Dn+$n)/2;Yt=(bt+Wn+this.worldSize)%this.worldSize-Wn,Yt-ln<Dn&&(Yt=Dn+ln),Yt+ln>$n&&(Yt=$n-ln),$n-Dn<this.width&&(Ft=Math.max(Ft,this.width/($n-Dn)),Yt=($n+Dn)/2)}Yt===bt&&rn===kt||(this.center=this.unproject(new j.pointGeometry(Yt,rn))),Ft&&(this.zoom+=this.scaleZoom(Ft)),this._constrainCameraAltitude(),this._unmodified=lt,this._constraining=!1}_minZoomForBounds(){let ot=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(ot=Math.max(ot,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),ot}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const ot=this.centerOffset,lt=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=j.mercatorZfromAltitude(1,this.center.lat)/j.mercatorZfromAltitude(1,j.GLOBE_SCALE_MATCH_LATITUDE));const bt=Up(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,bt),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const kt=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?lt:1),Ft=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Ft[8]=2*-ot.x/this.width,Ft[9]=2*ot.y/this.height;let Yt=j.mul([],Ft,kt);if(this.projection.isReprojectedInTileSpace){const lr=this.locationCoordinate(this.center),er=j.identity([]);j.translate(er,er,[lr.x*this.worldSize,lr.y*this.worldSize,0]),j.multiply(er,er,Mm(this)),j.translate(er,er,[-lr.x*this.worldSize,-lr.y*this.worldSize,0]),j.multiply(Yt,Yt,er),this.inverseAdjustmentMatrix=function(dr){const Ar=Mm(dr,!0);return xt([],[Ar[0],Ar[1],Ar[4],Ar[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=j.scale([],Yt,[this.worldSize,this.worldSize,this.worldSize/lt,1]),this.projMatrix=Yt,this.invProjMatrix=j.invert(new Float64Array(16),this.projMatrix);const rn=j.invert([],Ft);this.frustumCorners=j.FrustumCorners.fromInvProjectionMatrix(rn,this.horizonLineFromTop(),this.height);const ln=new Float32Array(16);j.identity(ln),j.scale(ln,ln,[1,-1,1]),j.rotateX(ln,ln,this._pitch),j.rotateZ(ln,ln,this.angle);const pn=j.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),vn=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;pn[8]=2*-ot.x/this.width,pn[9]=2*(ot.y+vn)/this.height,this.skyboxMatrix=j.multiply(ln,pn,ln);const Tn=this.point,Dn=Tn.x,$n=Tn.y,Wn=this.width%2/2,Zn=this.height%2/2,Fn=Math.cos(this.angle),jn=Math.sin(this.angle),Qn=Dn-Math.round(Dn)+Fn*Wn+jn*Zn,Gn=$n-Math.round($n)+Fn*Zn+jn*Wn,or=new Float64Array(Yt);if(j.translate(or,or,[Qn>.5?Qn-1:Qn,Gn>.5?Gn-1:Gn,0]),this.alignedProjMatrix=or,Yt=j.create(),j.scale(Yt,Yt,[this.width/2,-this.height/2,1]),j.translate(Yt,Yt,[1,-1,0]),this.labelPlaneMatrix=Yt,Yt=j.create(),j.scale(Yt,Yt,[1,-1,1]),j.translate(Yt,Yt,[-1,-1,0]),j.scale(Yt,Yt,[2/this.width,2/this.height,1]),this.glCoordMatrix=Yt,this.pixelMatrix=j.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},Yt=j.invert(new Float64Array(16),this.pixelMatrix),!Yt)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Yt,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=j.calculateGlobeMatrix(this);const lr=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=j.transformMat4(lr,lr,kt),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Yt;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const ot=this.cameraWorldSize,lt=this.cameraPixelsPerMeter,bt=this._camera.position,kt=1/this.height/this._pixelsPerMercatorPixel,Ft=[ot,ot,lt];j.scale$2(Ft,Ft,kt),j.scale$2(bt,bt,-1),j.multiply$2(bt,bt,Ft);const Yt=j.create();j.translate(Yt,Yt,bt),j.scale(Yt,Yt,Ft),this.mercatorFogMatrix=Yt,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(ot,lt,kt)}_computeCameraPosition(ot){const lt=(ot=ot||this.pixelsPerMeter)/this.pixelsPerMeter,bt=this._camera.forward(),kt=this.point,Ft=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*lt-ot/this.worldSize*this._centerAltitude;return[kt.x/this.worldSize-bt[0]*Ft,kt.y/this.worldSize-bt[1]*Ft,ot/this.worldSize*this._centerAltitude-bt[2]*Ft]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(ot){const lt=this._maxCameraBoundsDistance()*Math.cos(this._pitch),bt=this._camera.position[2],kt=ot[2];let Ft=1;this.projection.wrap&&(this.center=this.center.wrap()),kt>0&&(Ft=Math.min((lt-bt)/kt,1)),this._camera.position=j.scaleAndAdd([],this._camera.position,ot,Ft),this._updateStateFromCamera()}_updateStateFromCamera(){const ot=this._camera.position,lt=this._camera.forward(),{pitch:bt,bearing:kt}=this._camera.getPitchBearing(),Ft=j.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Yt=this._mercatorZfromZoom(this._maxZoom)*Math.cos(j.degToRad(this._maxPitch)),rn=Math.max((ot[2]-Ft)/Math.cos(bt),Yt),ln=this._zoomFromMercatorZ(rn);j.scaleAndAdd(ot,ot,lt,rn),this._pitch=j.clamp(bt,j.degToRad(this.minPitch),j.degToRad(this.maxPitch)),this.angle=j.wrap(kt,-Math.PI,Math.PI),this._setZoom(j.clamp(ln,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new j.MercatorCoordinate(ot[0],ot[1],ot[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(ot){return Math.pow(2,ot)*this.tileSize}_mercatorZfromZoom(ot){return this.cameraToCenterDistance/this._worldSizeFromZoom(ot)}_minimumHeightOverTerrain(){const ot=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(ot)}_zoomFromMercatorZ(ot){return this.scaleZoom(this.cameraToCenterDistance/(ot*this.tileSize))}zoomFromMercatorZAdjusted(ot){const lt=Yt=>{const rn=this.getCameraToCenterDistance(this.projection,Yt);return this.scaleZoom(rn/(ot*this.tileSize))};let bt,kt=lt(this.zoom),Ft=Math.abs(kt-lt(kt));for(;bt!==Ft;)kt=lt(kt),bt=Ft,Ft=Math.abs(kt-lt(kt));return kt}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(j.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(ot,lt){const bt=Math.min(ot.x,lt.x),kt=Math.max(ot.x,lt.x),Ft=Math.min(ot.y,lt.y),Yt=Math.max(ot.y,lt.y);if(Ft<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const rn=[new j.pointGeometry(bt,Ft),new j.pointGeometry(kt,Yt),new j.pointGeometry(bt,Yt),new j.pointGeometry(kt,Ft)],ln=this.renderWorldCopies?-3:0,pn=this.renderWorldCopies?4:1;for(const vn of rn){const Tn=this.pointRayIntersection(vn);if(Tn.t<0)return!0;const Dn=this.rayIntersectionCoordinate(Tn);if(Dn.x<ln||Dn.y<0||Dn.x>pn||Dn.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+j.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new j.pointGeometry(0,0),new j.pointGeometry(this.width,this.height))}zoomDeltaToMovement(ot,lt){const bt=j.length(j.sub([],this._camera.position,ot)),kt=this._zoomFromMercatorZ(bt)+lt;return bt-this._mercatorZfromZoom(kt)}getCameraPoint(){if(this.projection.name==="globe"){const ot=function(lt,bt){const kt=[lt[0],lt[1],lt[2],1];j.transformMat4$1(kt,kt,bt);const Ft=Math.max(kt[3],1e-6);return[kt[0]/Ft,kt[1]/Ft,kt[2]/Ft,Ft]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new j.pointGeometry(ot[0],ot[1])}{const ot=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new j.pointGeometry(0,ot))}}getCameraToCenterDistance(ot,lt=this.zoom){const bt=Up(ot,lt,this.width,this.height,1024),kt=ot.pixelSpaceConversion(this.center.lat,this.worldSize,bt);return .5/Math.tan(.5*this._fov)*this.height*kt}getWorldToCameraMatrix(){const ot=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&j.multiply(ot,ot,this.globeMatrix),ot}}function wv(dt,ot){let lt=!1,bt=null;const kt=()=>{bt=null,lt&&(dt(),bt=setTimeout(kt,ot),lt=!1)};return()=>(lt=!0,bt||kt(),bt)}class ky{constructor(ot){this._hashName=ot&&encodeURIComponent(ot),j.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=wv(this._updateHashUnthrottled.bind(this),300)}addTo(ot){return this._map=ot,j.window.addEventListener("hashchange",this._onHashChange,!1),ot.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),j.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const ot=this._map;if(!ot)return"";const lt=oy(ot);if(this._hashName){const bt=this._hashName;let kt=!1;const Ft=j.window.location.hash.slice(1).split("&").map(Yt=>{const rn=Yt.split("=")[0];return rn===bt?(kt=!0,`${rn}=${lt}`):Yt}).filter(Yt=>Yt);return kt||Ft.push(`${bt}=${lt}`),`#${Ft.join("&")}`}return`#${lt}`}_getCurrentHash(){const ot=j.window.location.hash.replace("#","");if(this._hashName){let lt;return ot.split("&").map(bt=>bt.split("=")).forEach(bt=>{bt[0]===this._hashName&&(lt=bt)}),(lt&&lt[1]||"").split("/")}return ot.split("/")}_onHashChange(){const ot=this._map;if(!ot)return!1;const lt=this._getCurrentHash();if(lt.length>=3&&!lt.some(bt=>isNaN(bt))){const bt=ot.dragRotate.isEnabled()&&ot.touchZoomRotate.isEnabled()?+(lt[3]||0):ot.getBearing();return ot.jumpTo({center:[+lt[2],+lt[1]],zoom:+lt[0],bearing:bt,pitch:+(lt[4]||0)}),!0}return!1}_updateHashUnthrottled(){const ot=j.window.location.href.replace(/(#.+)?$/,this.getHashString());j.window.history.replaceState(j.window.history.state,null,ot)}}function oy(dt,ot){const lt=dt.getCenter(),bt=Math.round(100*dt.getZoom())/100,kt=Math.ceil((bt*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ft=Math.pow(10,kt),Yt=Math.round(lt.lng*Ft)/Ft,rn=Math.round(lt.lat*Ft)/Ft,ln=dt.getBearing(),pn=dt.getPitch();let vn=ot?`/${Yt}/${rn}/${bt}`:`${bt}/${rn}/${Yt}`;return(ln||pn)&&(vn+="/"+Math.round(10*ln)/10),pn&&(vn+=`/${Math.round(pn)}`),vn}const up={linearity:.3,easing:j.bezier(0,0,.3,1)},h0=j.extend({deceleration:2500,maxSpeed:1400},up),Dy=j.extend({deceleration:20,maxSpeed:1400},up),xv=j.extend({deceleration:1e3,maxSpeed:360},up),v_=j.extend({deceleration:1e3,maxSpeed:90},up);class Fl{constructor(ot){this._map=ot,this.clear()}clear(){this._inertiaBuffer=[]}record(ot){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.exported.now(),settings:ot})}_drainInertiaBuffer(){const ot=this._inertiaBuffer,lt=j.exported.now();for(;ot.length>0&&lt-ot[0].time>160;)ot.shift()}_onMoveEnd(ot){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const lt={zoom:0,bearing:0,pitch:0,pan:new j.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:Ft}of this._inertiaBuffer)lt.zoom+=Ft.zoomDelta||0,lt.bearing+=Ft.bearingDelta||0,lt.pitch+=Ft.pitchDelta||0,Ft.panDelta&&lt.pan._add(Ft.panDelta),Ft.around&&(lt.around=Ft.around),Ft.pinchAround&&(lt.pinchAround=Ft.pinchAround);const bt=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,kt={};if(lt.pan.mag()){const Ft=zp(lt.pan.mag(),bt,j.extend({},h0,ot||{}));kt.offset=lt.pan.mult(Ft.amount/lt.pan.mag()),kt.center=this._map.transform.center,Nl(kt,Ft)}if(lt.zoom){const Ft=zp(lt.zoom,bt,Dy);kt.zoom=this._map.transform.zoom+Ft.amount,Nl(kt,Ft)}if(lt.bearing){const Ft=zp(lt.bearing,bt,xv);kt.bearing=this._map.transform.bearing+j.clamp(Ft.amount,-179,179),Nl(kt,Ft)}if(lt.pitch){const Ft=zp(lt.pitch,bt,v_);kt.pitch=this._map.transform.pitch+Ft.amount,Nl(kt,Ft)}if(kt.zoom||kt.bearing){const Ft=lt.pinchAround===void 0?lt.around:lt.pinchAround;kt.around=Ft?this._map.unproject(Ft):this._map.getCenter()}return this.clear(),kt.noMoveStart=!0,kt}}function Nl(dt,ot){(!dt.duration||dt.duration<ot.duration)&&(dt.duration=ot.duration,dt.easing=ot.easing)}function zp(dt,ot,lt){const{maxSpeed:bt,linearity:kt,deceleration:Ft}=lt,Yt=j.clamp(dt*kt/(ot/1e3),-bt,bt),rn=Math.abs(Yt)/(Ft*kt);return{easing:lt.easing,duration:1e3*rn,amount:Yt*(rn/2)}}class Du extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,lt,bt,kt={}){const Ft=mt(lt.getCanvasContainer(),bt),Yt=lt.unproject(Ft);super(ot,j.extend({point:Ft,lngLat:Yt,originalEvent:bt},kt)),this._defaultPrevented=!1,this.target=lt}}class Ly extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,lt,bt){const kt=ot==="touchend"?bt.changedTouches:bt.touches,Ft=Bt(lt.getCanvasContainer(),kt),Yt=Ft.map(ln=>lt.unproject(ln)),rn=Ft.reduce((ln,pn,vn,Tn)=>ln.add(pn.div(Tn.length)),new j.pointGeometry(0,0));super(ot,{points:Ft,point:rn,lngLats:Yt,lngLat:lt.unproject(rn),originalEvent:bt}),this._defaultPrevented=!1}}class f0 extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,lt,bt){super(ot,{originalEvent:bt}),this._defaultPrevented=!1}}class sy{constructor(ot,lt){this._map=ot,this._clickTolerance=lt.clickTolerance}reset(){this._mousedownPos=void 0}wheel(ot){return this._firePreventable(new f0(ot.type,this._map,ot))}mousedown(ot,lt){return this._mousedownPos=lt,this._firePreventable(new Du(ot.type,this._map,ot))}mouseup(ot){this._map.fire(new Du(ot.type,this._map,ot))}preclick(ot){const lt=j.extend({},ot);lt.type="preclick",this._map.fire(new Du(lt.type,this._map,lt))}click(ot,lt){this._mousedownPos&&this._mousedownPos.dist(lt)>=this._clickTolerance||(this.preclick(ot),this._map.fire(new Du(ot.type,this._map,ot)))}dblclick(ot){return this._firePreventable(new Du(ot.type,this._map,ot))}mouseover(ot){this._map.fire(new Du(ot.type,this._map,ot))}mouseout(ot){this._map.fire(new Du(ot.type,this._map,ot))}touchstart(ot){return this._firePreventable(new Ly(ot.type,this._map,ot))}touchmove(ot){this._map.fire(new Ly(ot.type,this._map,ot))}touchend(ot){this._map.fire(new Ly(ot.type,this._map,ot))}touchcancel(ot){this._map.fire(new Ly(ot.type,this._map,ot))}_firePreventable(ot){if(this._map.fire(ot),ot.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pm{constructor(ot){this._map=ot}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(ot){this._map.fire(new Du(ot.type,this._map,ot))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Du("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(ot){this._delayContextMenu?this._contextMenuEvent=ot:this._map.fire(new Du(ot.type,this._map,ot)),this._map.listens("contextmenu")&&ot.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class b_{constructor(ot,lt){this._map=ot,this._el=ot.getCanvasContainer(),this._container=ot.getContainer(),this._clickTolerance=lt.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(ot,lt){this.isEnabled()&&ot.shiftKey&&ot.button===0&&(Ot(),this._startPos=this._lastPos=lt,this._active=!0)}mousemoveWindow(ot,lt){if(!this._active)return;const bt=lt,kt=this._startPos,Ft=this._lastPos;if(!kt||!Ft||Ft.equals(bt)||!this._box&&bt.dist(kt)<this._clickTolerance)return;this._lastPos=bt,this._box||(this._box=ft("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",ot));const Yt=Math.min(kt.x,bt.x),rn=Math.max(kt.x,bt.x),ln=Math.min(kt.y,bt.y),pn=Math.max(kt.y,bt.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Yt}px,${ln}px)`,this._box.style.width=rn-Yt+"px",this._box.style.height=pn-ln+"px")})}mouseupWindow(ot,lt){if(!this._active)return;const bt=this._startPos,kt=lt;if(bt&&ot.button===0){if(this.reset(),It(),bt.x!==kt.x||bt.y!==kt.y)return this._map.fire(new j.Event("boxzoomend",{originalEvent:ot})),{cameraAnimation:Ft=>Ft.fitScreenCoordinates(bt,kt,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",ot)}}keydown(ot){this._active&&ot.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",ot))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Lt(),delete this._startPos,delete this._lastPos}_fireEvent(ot,lt){return this._map.fire(new j.Event(ot,{originalEvent:lt}))}}function Vp(dt,ot){const lt={};for(let bt=0;bt<dt.length;bt++)lt[dt[bt].identifier]=ot[bt];return lt}class cm{constructor(ot){this.reset(),this.numTouches=ot.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(ot,lt,bt){(this.centroid||bt.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=ot.timeStamp),bt.length===this.numTouches&&(this.centroid=function(kt){const Ft=new j.pointGeometry(0,0);for(const Yt of kt)Ft._add(Yt);return Ft.div(kt.length)}(lt),this.touches=Vp(bt,lt)))}touchmove(ot,lt,bt){if(this.aborted||!this.centroid)return;const kt=Vp(bt,lt);for(const Ft in this.touches){const Yt=this.touches[Ft],rn=kt[Ft];(!rn||rn.dist(Yt)>30)&&(this.aborted=!0)}}touchend(ot,lt,bt){if((!this.centroid||ot.timeStamp-this.startTime>500)&&(this.aborted=!0),bt.length===0){const kt=!this.aborted&&this.centroid;if(this.reset(),kt)return kt}}}class Wp{constructor(ot){this.singleTap=new cm(ot),this.numTaps=ot.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(ot,lt,bt){this.singleTap.touchstart(ot,lt,bt)}touchmove(ot,lt,bt){this.singleTap.touchmove(ot,lt,bt)}touchend(ot,lt,bt){const kt=this.singleTap.touchend(ot,lt,bt);if(kt){const Ft=ot.timeStamp-this.lastTime<500,Yt=!this.lastTap||this.lastTap.dist(kt)<30;if(Ft&&Yt||this.reset(),this.count++,this.lastTime=ot.timeStamp,this.lastTap=kt,this.count===this.numTaps)return this.reset(),kt}}}class By{constructor(){this._zoomIn=new Wp({numTouches:1,numTaps:2}),this._zoomOut=new Wp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(ot,lt,bt){this._zoomIn.touchstart(ot,lt,bt),this._zoomOut.touchstart(ot,lt,bt)}touchmove(ot,lt,bt){this._zoomIn.touchmove(ot,lt,bt),this._zoomOut.touchmove(ot,lt,bt)}touchend(ot,lt,bt){const kt=this._zoomIn.touchend(ot,lt,bt),Ft=this._zoomOut.touchend(ot,lt,bt);return kt?(this._active=!0,ot.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Yt=>Yt.easeTo({duration:300,zoom:Yt.getZoom()+1,around:Yt.unproject(kt)},{originalEvent:ot})}):Ft?(this._active=!0,ot.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Yt=>Yt.easeTo({duration:300,zoom:Yt.getZoom()-1,around:Yt.unproject(Ft)},{originalEvent:ot})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const km={0:1,2:2};class w_{constructor(ot){this.reset(),this._clickTolerance=ot.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(ot,lt){return!1}_move(ot,lt){return{}}mousedown(ot,lt){if(this._lastPoint)return;const bt=nn(ot);this._correctButton(ot,bt)&&(this._lastPoint=lt,this._eventButton=bt)}mousemoveWindow(ot,lt){const bt=this._lastPoint;if(bt){if(ot.preventDefault(),this._eventButton!=null&&function(kt,Ft){const Yt=km[Ft];return kt.buttons===void 0||(kt.buttons&Yt)!==Yt}(ot,this._eventButton))this.reset();else if(this._moved||!(lt.dist(bt)<this._clickTolerance))return this._moved=!0,this._lastPoint=lt,this._move(bt,lt)}}mouseupWindow(ot){this._lastPoint&&nn(ot)===this._eventButton&&(this._moved&&It(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class d0 extends w_{mousedown(ot,lt){super.mousedown(ot,lt),this._lastPoint&&(this._active=!0)}_correctButton(ot,lt){return lt===0&&!ot.ctrlKey}_move(ot,lt){return{around:lt,panDelta:lt.sub(ot)}}}class Sv extends w_{_correctButton(ot,lt){return lt===0&&ot.ctrlKey||lt===2}_move(ot,lt){const bt=.8*(lt.x-ot.x);if(bt)return this._active=!0,{bearingDelta:bt}}contextmenu(ot){ot.preventDefault()}}class Dm extends w_{_correctButton(ot,lt){return lt===0&&ot.ctrlKey||lt===2}_move(ot,lt){const bt=-.5*(lt.y-ot.y);if(bt)return this._active=!0,{pitchDelta:bt}}contextmenu(ot){ot.preventDefault()}}class g0{constructor(ot,lt){this._map=ot,this._el=ot.getCanvasContainer(),this._minTouches=1,this._clickTolerance=lt.clickTolerance||1,this.reset(),j.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new j.pointGeometry(0,0)}touchstart(ot,lt,bt){return this._calculateTransform(ot,lt,bt)}touchmove(ot,lt,bt){if(this._active&&!(bt.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(bt.length===1&&!j.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return ot.cancelable&&ot.preventDefault(),this._calculateTransform(ot,lt,bt)}}touchend(ot,lt,bt){this._calculateTransform(ot,lt,bt),this._active&&bt.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(ot,lt,bt){bt.length>0&&(this._active=!0);const kt=Vp(bt,lt),Ft=new j.pointGeometry(0,0),Yt=new j.pointGeometry(0,0);let rn=0;for(const pn in kt){const vn=kt[pn],Tn=this._touches[pn];Tn&&(Ft._add(vn),Yt._add(vn.sub(Tn)),rn++,kt[pn]=vn)}if(this._touches=kt,rn<this._minTouches||!Yt.mag())return;const ln=Yt.div(rn);return this._sum._add(ln),this._sum.mag()<this._clickTolerance?void 0:{around:Ft.div(rn),panDelta:ln}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ft("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Lm{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(ot){}_move(ot,lt,bt){return{}}touchstart(ot,lt,bt){this._firstTwoTouches||bt.length<2||(this._firstTwoTouches=[bt[0].identifier,bt[1].identifier],this._start([lt[0],lt[1]]))}touchmove(ot,lt,bt){const kt=this._firstTwoTouches;if(!kt)return;ot.preventDefault();const[Ft,Yt]=kt,rn=Gp(bt,lt,Ft),ln=Gp(bt,lt,Yt);if(!rn||!ln)return;const pn=this._aroundCenter?null:rn.add(ln).div(2);return this._move([rn,ln],pn,ot)}touchend(ot,lt,bt){if(!this._firstTwoTouches)return;const[kt,Ft]=this._firstTwoTouches,Yt=Gp(bt,lt,kt),rn=Gp(bt,lt,Ft);Yt&&rn||(this._active&&It(),this.reset())}touchcancel(){this.reset()}enable(ot){this._enabled=!0,this._aroundCenter=!!ot&&ot.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Gp(dt,ot,lt){for(let bt=0;bt<dt.length;bt++)if(dt[bt].identifier===lt)return ot[bt]}function x_(dt,ot){return Math.log(dt/ot)/Math.LN2}class zn extends Lm{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(ot){this._startDistance=this._distance=ot[0].dist(ot[1])}_move(ot,lt){const bt=this._distance;if(this._distance=ot[0].dist(ot[1]),this._active||!(Math.abs(x_(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:x_(this._distance,bt),pinchAround:lt}}}function hm(dt,ot){return 180*dt.angleWith(ot)/Math.PI}class $l extends Lm{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(ot){this._startVector=this._vector=ot[0].sub(ot[1]),this._minDiameter=ot[0].dist(ot[1])}_move(ot,lt){const bt=this._vector;if(this._vector=ot[0].sub(ot[1]),bt&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:hm(this._vector,bt),pinchAround:lt}}_isBelowThreshold(ot){this._minDiameter=Math.min(this._minDiameter,ot.mag());const lt=25/(Math.PI*this._minDiameter)*360,bt=this._startVector;if(!bt)return!1;const kt=hm(ot,bt);return Math.abs(kt)<lt}}function Cu(dt){return Math.abs(dt.y)>Math.abs(dt.x)}class Is extends Lm{constructor(ot){super(),this._map=ot}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(ot){this._lastPoints=ot,Cu(ot[0].sub(ot[1]))&&(this._valid=!1)}_move(ot,lt,bt){const kt=this._lastPoints;if(!kt)return;const Ft=ot[0].sub(kt[0]),Yt=ot[1].sub(kt[1]);return this._map._cooperativeGestures&&!j.isFullscreen()&&bt.touches.length<3||(this._valid=this.gestureBeginsVertically(Ft,Yt,bt.timeStamp),!this._valid)?void 0:(this._lastPoints=ot,this._active=!0,{pitchDelta:(Ft.y+Yt.y)/2*-.5})}gestureBeginsVertically(ot,lt,bt){if(this._valid!==void 0)return this._valid;const kt=ot.mag()>=2,Ft=lt.mag()>=2;if(!kt&&!Ft)return;if(!kt||!Ft)return this._firstMove==null&&(this._firstMove=bt),bt-this._firstMove<100&&void 0;const Yt=ot.y>0==lt.y>0;return Cu(ot)&&Cu(lt)&&Yt}}const T1={panStep:100,bearingStep:15,pitchStep:10};class C1{constructor(){const ot=T1;this._panStep=ot.panStep,this._bearingStep=ot.bearingStep,this._pitchStep=ot.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(ot){if(ot.altKey||ot.ctrlKey||ot.metaKey)return;let lt=0,bt=0,kt=0,Ft=0,Yt=0;switch(ot.keyCode){case 61:case 107:case 171:case 187:lt=1;break;case 189:case 109:case 173:lt=-1;break;case 37:ot.shiftKey?bt=-1:(ot.preventDefault(),Ft=-1);break;case 39:ot.shiftKey?bt=1:(ot.preventDefault(),Ft=1);break;case 38:ot.shiftKey?kt=1:(ot.preventDefault(),Yt=-1);break;case 40:ot.shiftKey?kt=-1:(ot.preventDefault(),Yt=1);break;default:return}return this._rotationDisabled&&(bt=0,kt=0),{cameraAnimation:rn=>{const ln=rn.getZoom();rn.easeTo({duration:300,easeId:"keyboardHandler",easing:Hp,zoom:lt?Math.round(ln)+lt*(ot.shiftKey?2:1):ln,bearing:rn.getBearing()+bt*this._bearingStep,pitch:rn.getPitch()+kt*this._pitchStep,offset:[-Ft*this._panStep,-Yt*this._panStep],center:rn.getCenter()},{originalEvent:ot})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hp(dt){return dt*(2-dt)}const $p=4.000244140625;class ay{constructor(ot,lt){this._map=ot,this._el=ot.getCanvasContainer(),this._handler=lt,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,j.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(ot){this._defaultZoomRate=ot}setWheelZoomRate(ot){this._wheelZoomRate=ot}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(ot){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!ot&&ot.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(ot){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(ot.ctrlKey||ot.metaKey||this.isZooming()||j.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let lt=ot.deltaMode===j.window.WheelEvent.DOM_DELTA_LINE?40*ot.deltaY:ot.deltaY;const bt=j.exported.now(),kt=bt-(this._lastWheelEventTime||0);this._lastWheelEventTime=bt,lt!==0&&lt%$p==0?this._type="wheel":lt!==0&&Math.abs(lt)<4?this._type="trackpad":kt>400?(this._type=null,this._lastValue=lt,this._timeout=setTimeout(this._onTimeout,40,ot)):this._type||(this._type=Math.abs(kt*lt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,lt+=this._lastValue)),ot.shiftKey&&lt&&(lt/=4),this._type&&(this._lastWheelEvent=ot,this._delta-=lt,this._active||this._start(ot)),ot.preventDefault()}_onTimeout(ot){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(ot)}_start(ot){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const lt=mt(this._el,ot);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:lt,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const ot=this._map.transform;this._type==="wheel"&&ot.projection.wrap&&(ot._center.lng>=180||ot._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const lt=()=>ot._terrainEnabled()&&this._aroundCoord?ot.computeZoomRelativeTo(this._aroundCoord):ot.zoom;if(this._delta!==0){const ln=this._type==="wheel"&&Math.abs(this._delta)>$p?this._wheelZoomRate:this._defaultZoomRate;let pn=2/(1+Math.exp(-Math.abs(this._delta*ln)));this._delta<0&&pn!==0&&(pn=1/pn);const vn=lt(),Tn=Math.pow(2,vn),Dn=typeof this._targetZoom=="number"?ot.zoomScale(this._targetZoom):Tn;this._targetZoom=Math.min(ot.maxZoom,Math.max(ot.minZoom,ot.scaleZoom(Dn*pn))),this._type==="wheel"&&(this._startZoom=vn,this._easing=this._smoothOutEasing(200)),this._delta=0}const bt=typeof this._targetZoom=="number"?this._targetZoom:lt(),kt=this._startZoom,Ft=this._easing;let Yt,rn=!1;if(this._type==="wheel"&&kt&&Ft){const ln=Math.min((j.exported.now()-this._lastWheelEventTime)/200,1),pn=Ft(ln);Yt=j.number(kt,bt,pn),ln<1?this._frameId||(this._frameId=!0):rn=!0}else Yt=bt,rn=!0;return this._active=!0,rn&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!rn,zoomDelta:Yt-lt(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(ot){let lt=j.ease;if(this._prevEase){const bt=this._prevEase,kt=(j.exported.now()-bt.start)/bt.duration,Ft=bt.easing(kt+.01)-bt.easing(kt),Yt=.27/Math.sqrt(Ft*Ft+1e-4)*.01,rn=Math.sqrt(.0729-Yt*Yt);lt=j.bezier(Yt,rn,.25,1)}return this._prevEase={start:j.exported.now(),duration:ot,easing:lt},lt}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ft("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(j.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Ap{constructor(ot,lt){this._clickZoom=ot,this._tapZoom=lt}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class S_{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(ot,lt){return ot.preventDefault(),{cameraAnimation:bt=>{bt.easeTo({duration:300,zoom:bt.getZoom()+(ot.shiftKey?-1:1),around:bt.unproject(lt)},{originalEvent:ot})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oo{constructor(){this._tap=new Wp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(ot,lt,bt){this._swipePoint||(this._tapTime&&ot.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?bt.length>0&&(this._swipePoint=lt[0],this._swipeTouch=bt[0].identifier):this._tap.touchstart(ot,lt,bt))}touchmove(ot,lt,bt){if(this._tapTime){if(this._swipePoint){if(bt[0].identifier!==this._swipeTouch)return;const kt=lt[0],Ft=kt.y-this._swipePoint.y;return this._swipePoint=kt,ot.preventDefault(),this._active=!0,{zoomDelta:Ft/128}}}else this._tap.touchmove(ot,lt,bt)}touchend(ot,lt,bt){this._tapTime?this._swipePoint&&bt.length===0&&this.reset():this._tap.touchend(ot,lt,bt)&&(this._tapTime=ot.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class p0{constructor(ot,lt,bt){this._el=ot,this._mousePan=lt,this._touchPan=bt}enable(ot){this._inertiaOptions=ot||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ep{constructor(ot,lt,bt){this._pitchWithRotate=ot.pitchWithRotate,this._mouseRotate=lt,this._mousePitch=bt}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jy{constructor(ot,lt,bt,kt){this._el=ot,this._touchZoom=lt,this._touchRotate=bt,this._tapDragZoom=kt,this._rotationDisabled=!1,this._enabled=!0}enable(ot){this._touchZoom.enable(ot),this._rotationDisabled||this._touchRotate.enable(ot),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fm=dt=>dt.zoom||dt.drag||dt.pitch||dt.rotate;class m0 extends j.Event{}class y0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(ot,lt){const bt=j.sub([],lt,ot);this.radius=j.length(bt[2]<0?j.div([],bt,this.constants):[bt[0],bt[1],0])}projectRay(ot){j.div(ot,ot,this.constants),j.normalize(ot,ot),j.mul$1(ot,ot,this.constants);const lt=j.scale$2([],ot,this.radius);if(lt[2]>0){const bt=j.scale$2([],[0,0,1],j.dot(lt,[0,0,1])),kt=j.scale$2([],j.normalize([],[lt[0],lt[1],0]),this.radius),Ft=j.add([],lt,j.scale$2([],j.sub([],j.add([],kt,bt),lt),2));lt[0]=Ft[0],lt[1]=Ft[1]}return lt}}function Fy(dt){return dt.panDelta&&dt.panDelta.mag()||dt.zoomDelta||dt.bearingDelta||dt.pitchDelta}class Tp{constructor(ot,lt){this._map=ot,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fl(ot),this._bearingSnap=lt.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new y0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(lt),j.bindAll(["handleEvent","handleWindowEvent"],this);const bt=this._el;this._listeners=[[bt,"touchstart",{passive:!0}],[bt,"touchmove",{passive:!1}],[bt,"touchend",void 0],[bt,"touchcancel",void 0],[bt,"mousedown",void 0],[bt,"mousemove",void 0],[bt,"mouseup",void 0],[j.window.document,"mousemove",{capture:!0}],[j.window.document,"mouseup",void 0],[bt,"mouseover",void 0],[bt,"mouseout",void 0],[bt,"dblclick",void 0],[bt,"click",void 0],[bt,"keydown",{capture:!1}],[bt,"keyup",void 0],[bt,"wheel",{passive:!1}],[bt,"contextmenu",void 0],[j.window,"blur",void 0]];for(const[kt,Ft,Yt]of this._listeners)kt.addEventListener(Ft,kt===j.window.document?this.handleWindowEvent:this.handleEvent,Yt)}destroy(){for(const[ot,lt,bt]of this._listeners)ot.removeEventListener(lt,ot===j.window.document?this.handleWindowEvent:this.handleEvent,bt)}_addDefaultHandlers(ot){const lt=this._map,bt=lt.getCanvasContainer();this._add("mapEvent",new sy(lt,ot));const kt=lt.boxZoom=new b_(lt,ot);this._add("boxZoom",kt);const Ft=new By,Yt=new S_;lt.doubleClickZoom=new Ap(Yt,Ft),this._add("tapZoom",Ft),this._add("clickZoom",Yt);const rn=new Oo;this._add("tapDragZoom",rn);const ln=lt.touchPitch=new Is(lt);this._add("touchPitch",ln);const pn=new Sv(ot),vn=new Dm(ot);lt.dragRotate=new Ep(ot,pn,vn),this._add("mouseRotate",pn,["mousePitch"]),this._add("mousePitch",vn,["mouseRotate"]);const Tn=new d0(ot),Dn=new g0(lt,ot);lt.dragPan=new p0(bt,Tn,Dn),this._add("mousePan",Tn),this._add("touchPan",Dn,["touchZoom","touchRotate"]);const $n=new $l,Wn=new zn;lt.touchZoomRotate=new jy(bt,Wn,$n,rn),this._add("touchRotate",$n,["touchPan","touchZoom"]),this._add("touchZoom",Wn,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Pm(lt));const Zn=lt.scrollZoom=new ay(lt,this);this._add("scrollZoom",Zn,["mousePan"]);const Fn=lt.keyboard=new C1;this._add("keyboard",Fn);for(const jn of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])ot.interactive&&ot[jn]&&lt[jn].enable(ot[jn])}_add(ot,lt,bt){this._handlers.push({handlerName:ot,handler:lt,allowed:bt}),this._handlersById[ot]=lt}stop(ot){if(!this._updatingCamera){for(const{handler:lt}of this._handlers)lt.reset();this._inertia.clear(),this._fireEvents({},{},ot),this._changes=[]}}isActive(){for(const{handler:ot}of this._handlers)if(ot.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fm(this._eventsInProgress)||this.isZooming()}_blockedByActive(ot,lt,bt){for(const kt in ot)if(kt!==bt&&(!lt||lt.indexOf(kt)<0))return!0;return!1}handleWindowEvent(ot){this.handleEvent(ot,`${ot.type}Window`)}_getMapTouches(ot){const lt=[];for(const bt of ot)this._el.contains(bt.target)&&lt.push(bt);return lt}handleEvent(ot,lt){this._updatingCamera=!0;const bt=ot.type==="renderFrame",kt=bt?void 0:ot,Ft={needsRenderFrame:!1},Yt={},rn={},ln=ot.touches?this._getMapTouches(ot.touches):void 0,pn=ln?Bt(this._el,ln):bt?void 0:mt(this._el,ot);for(const{handlerName:Dn,handler:$n,allowed:Wn}of this._handlers){if(!$n.isEnabled())continue;let Zn;this._blockedByActive(rn,Wn,Dn)?$n.reset():$n[lt||ot.type]&&(Zn=$n[lt||ot.type](ot,pn,ln),this.mergeHandlerResult(Ft,Yt,Zn,Dn,kt),Zn&&Zn.needsRenderFrame&&this._triggerRenderFrame()),(Zn||$n.isActive())&&(rn[Dn]=$n)}const vn={};for(const Dn in this._previousActiveHandlers)rn[Dn]||(vn[Dn]=kt);this._previousActiveHandlers=rn,(Object.keys(vn).length||Fy(Ft))&&(this._changes.push([Ft,Yt,vn]),this._triggerRenderFrame()),(Object.keys(rn).length||Fy(Ft))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Tn}=Ft;Tn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Tn(this._map))}mergeHandlerResult(ot,lt,bt,kt,Ft){if(!bt)return;j.extend(ot,bt);const Yt={handlerName:kt,originalEvent:bt.originalEvent||Ft};bt.zoomDelta!==void 0&&(lt.zoom=Yt),bt.panDelta!==void 0&&(lt.drag=Yt),bt.pitchDelta!==void 0&&(lt.pitch=Yt),bt.bearingDelta!==void 0&&(lt.rotate=Yt)}_applyChanges(){const ot={},lt={},bt={};for(const[kt,Ft,Yt]of this._changes)kt.panDelta&&(ot.panDelta=(ot.panDelta||new j.pointGeometry(0,0))._add(kt.panDelta)),kt.zoomDelta&&(ot.zoomDelta=(ot.zoomDelta||0)+kt.zoomDelta),kt.bearingDelta&&(ot.bearingDelta=(ot.bearingDelta||0)+kt.bearingDelta),kt.pitchDelta&&(ot.pitchDelta=(ot.pitchDelta||0)+kt.pitchDelta),kt.around!==void 0&&(ot.around=kt.around),kt.aroundCoord!==void 0&&(ot.aroundCoord=kt.aroundCoord),kt.pinchAround!==void 0&&(ot.pinchAround=kt.pinchAround),kt.noInertia&&(ot.noInertia=kt.noInertia),j.extend(lt,Ft),j.extend(bt,Yt);this._updateMapTransform(ot,lt,bt),this._changes=[]}_updateMapTransform(ot,lt,bt){const kt=this._map,Ft=kt.transform,Yt=Qn=>[Qn.x,Qn.y,Qn.z];if((Qn=>{const Gn=this._eventsInProgress.drag;return Gn&&!this._handlersById[Gn.handlerName].isActive()})()&&!Fy(ot)){const Qn=Ft.zoom;Ft.cameraElevationReference="sea",Ft.recenterOnTerrain(),Ft.cameraElevationReference="ground",Qn!==Ft.zoom&&this._map._update(!0)}if(!Fy(ot))return void this._fireEvents(lt,bt,!0);let{panDelta:rn,zoomDelta:ln,bearingDelta:pn,pitchDelta:vn,around:Tn,aroundCoord:Dn,pinchAround:$n}=ot;$n!==void 0&&(Tn=$n),(Qn=>lt.drag&&!this._eventsInProgress.drag)()&&Tn&&(this._dragOrigin=Yt(Ft.pointCoordinate3D(Tn)),this._trackingEllipsoid.setup(Ft._camera.position,this._dragOrigin)),Ft.cameraElevationReference="sea",kt._stop(!0),Tn=Tn||kt.transform.centerPoint,pn&&(Ft.bearing+=pn),vn&&(Ft.pitch+=vn),Ft._updateCameraState();const Wn=[0,0,0];if(rn)if(Ft.projection.name==="mercator"){const Qn=this._trackingEllipsoid.projectRay(Ft.screenPointToMercatorRay(Tn).dir),Gn=this._trackingEllipsoid.projectRay(Ft.screenPointToMercatorRay(Tn.sub(rn)).dir);Wn[0]=Gn[0]-Qn[0],Wn[1]=Gn[1]-Qn[1]}else{const Qn=Ft.pointCoordinate(Tn);if(Ft.projection.name==="globe"){rn=rn.rotate(-Ft.angle);const Gn=Ft._pixelsPerMercatorPixel/Ft.worldSize;Wn[0]=-rn.x*j.mercatorScale(j.latFromMercatorY(Qn.y))*Gn,Wn[1]=-rn.y*j.mercatorScale(Ft.center.lat)*Gn}else{const Gn=Ft.pointCoordinate(Tn.sub(rn));Qn&&Gn&&(Wn[0]=Gn.x-Qn.x,Wn[1]=Gn.y-Qn.y)}}const Zn=Ft.zoom,Fn=[0,0,0];if(ln){const Qn=Yt(Dn||Ft.pointCoordinate3D(Tn)),Gn={dir:j.normalize([],j.sub([],Qn,Ft._camera.position))};if(Gn.dir[2]<0){const or=Ft.zoomDeltaToMovement(Qn,ln);j.scale$2(Fn,Gn.dir,or)}}const jn=j.add(Wn,Wn,Fn);Ft._translateCameraConstrained(jn),ln&&Math.abs(Ft.zoom-Zn)>1e-4&&Ft.recenterOnTerrain(),Ft.cameraElevationReference="ground",this._map._update(),ot.noInertia||this._inertia.record(ot),this._fireEvents(lt,bt,!0)}_fireEvents(ot,lt,bt){const kt=fm(this._eventsInProgress),Ft=fm(ot),Yt={};for(const vn in ot){const{originalEvent:Tn}=ot[vn];this._eventsInProgress[vn]||(Yt[`${vn}start`]=Tn),this._eventsInProgress[vn]=ot[vn]}!kt&&Ft&&this._fireEvent("movestart",Ft.originalEvent);for(const vn in Yt)this._fireEvent(vn,Yt[vn]);Ft&&this._fireEvent("move",Ft.originalEvent);for(const vn in ot){const{originalEvent:Tn}=ot[vn];this._fireEvent(vn,Tn)}const rn={};let ln;for(const vn in this._eventsInProgress){const{handlerName:Tn,originalEvent:Dn}=this._eventsInProgress[vn];this._handlersById[Tn].isActive()||(delete this._eventsInProgress[vn],ln=lt[Tn]||Dn,rn[`${vn}end`]=ln)}for(const vn in rn)this._fireEvent(vn,rn[vn]);const pn=fm(this._eventsInProgress);if(bt&&(kt||Ft)&&!pn){this._updatingCamera=!0;const vn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Tn=Dn=>Dn!==0&&-this._bearingSnap<Dn&&Dn<this._bearingSnap;vn?(Tn(vn.bearing||this._map.getBearing())&&(vn.bearing=0),this._map.easeTo(vn,{originalEvent:ln})):(this._map.fire(new j.Event("moveend",{originalEvent:ln})),Tn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(ot,lt){this._map.fire(new j.Event(ot,lt?{originalEvent:lt}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(ot=>{this._frameId=void 0,this.handleEvent(new m0("renderFrame",{timeStamp:ot})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Av="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class _0 extends j.Evented{constructor(ot,lt){super(),this._moving=!1,this._zooming=!1,this.transform=ot,this._bearingSnap=lt.bearingSnap,j.bindAll(["_renderFrameCallback"],this)}getCenter(){return new j.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(ot,lt){return this.jumpTo({center:ot},lt)}panBy(ot,lt,bt){return ot=j.pointGeometry.convert(ot).mult(-1),this.panTo(this.transform.center,j.extend({offset:ot},lt),bt)}panTo(ot,lt,bt){return this.easeTo(j.extend({center:ot},lt),bt)}getZoom(){return this.transform.zoom}setZoom(ot,lt){return this.jumpTo({zoom:ot},lt),this}zoomTo(ot,lt,bt){return this.easeTo(j.extend({zoom:ot},lt),bt)}zoomIn(ot,lt){return this.zoomTo(this.getZoom()+1,ot,lt),this}zoomOut(ot,lt){return this.zoomTo(this.getZoom()-1,ot,lt),this}getBearing(){return this.transform.bearing}setBearing(ot,lt){return this.jumpTo({bearing:ot},lt),this}getPadding(){return this.transform.padding}setPadding(ot,lt){return this.jumpTo({padding:ot},lt),this}rotateTo(ot,lt,bt){return this.easeTo(j.extend({bearing:ot},lt),bt)}resetNorth(ot,lt){return this.rotateTo(0,j.extend({duration:1e3},ot),lt),this}resetNorthPitch(ot,lt){return this.easeTo(j.extend({bearing:0,pitch:0,duration:1e3},ot),lt),this}snapToNorth(ot,lt){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(ot,lt):this}getPitch(){return this.transform.pitch}setPitch(ot,lt){return this.jumpTo({pitch:ot},lt),this}cameraForBounds(ot,lt){ot=j.LngLatBounds.convert(ot);const bt=lt&&lt.bearing||0,kt=ot.getNorthWest(),Ft=ot.getSouthEast();return this._cameraForBounds(this.transform,kt,Ft,bt,lt)}_extendCameraOptions(ot){const lt={top:0,bottom:0,right:0,left:0};if(typeof(ot=j.extend({padding:lt,offset:[0,0],maxZoom:this.transform.maxZoom},ot)).padding=="number"){const bt=ot.padding;ot.padding={top:bt,bottom:bt,right:bt,left:bt}}return ot.padding=j.extend(lt,ot.padding),ot}_minimumAABBFrustumDistance(ot,lt){const bt=lt.max[0]-lt.min[0],kt=lt.max[1]-lt.min[1];return bt/kt>ot.aspect?bt/(2*Math.tan(.5*ot.fovX)*ot.aspect):kt/(2*Math.tan(.5*ot.fovY)*ot.aspect)}_cameraForBoundsOnGlobe(ot,lt,bt,kt,Ft){const Yt=ot.clone(),rn=this._extendCameraOptions(Ft);Yt.bearing=kt;const ln=j.LngLat.convert(lt),pn=j.LngLat.convert(bt),vn=.5*(ln.lat+pn.lat),Tn=.5*(ln.lng+pn.lng),Dn=j.latLngToECEF(vn,Tn),$n=j.normalize([],Dn),Wn=j.normalize([],j.cross([],$n,[0,1,0])),Zn=j.cross([],Wn,$n),Fn=[Wn[0],Wn[1],Wn[2],0,Zn[0],Zn[1],Zn[2],0,$n[0],$n[1],$n[2],0,0,0,0,1],jn=[Dn,j.latLngToECEF(ln.lat,ln.lng),j.latLngToECEF(pn.lat,ln.lng),j.latLngToECEF(pn.lat,pn.lng),j.latLngToECEF(ln.lat,pn.lng),j.latLngToECEF(vn,ln.lng),j.latLngToECEF(vn,pn.lng),j.latLngToECEF(ln.lat,Tn),j.latLngToECEF(pn.lat,Tn)];let Qn=j.Aabb.fromPoints(jn.map(mo=>[j.dot(Wn,mo),j.dot(Zn,mo),j.dot($n,mo)]));const Gn=j.transformMat4([],Qn.center,Fn);j.squaredLength(Gn)===0&&j.set(Gn,0,0,1),j.normalize(Gn,Gn),j.scale$2(Gn,Gn,j.GLOBE_RADIUS),Yt.center=j.ecefToLatLng(Gn);const or=Yt.getWorldToCameraMatrix(),lr=j.invert(new Float64Array(16),or);Qn=j.Aabb.applyTransform(Qn,j.multiply([],or,Fn)),j.transformMat4(Gn,Gn,or);const er=.5*(Qn.max[2]-Qn.min[2]),dr=this._minimumAABBFrustumDistance(Yt,Qn),Ar=j.scale$2([],[0,0,1],er),Fr=j.add(Ar,Gn,Ar),Dr=dr+(Yt.pitch===0?0:j.distance(Gn,Fr)),co=Yt.globeCenterInViewSpace,Sr=j.sub([],Gn,[co[0],co[1],co[2]]);j.normalize(Sr,Sr),j.scale$2(Sr,Sr,Dr);const _i=j.add([],Gn,Sr);j.transformMat4(_i,_i,lr);const eo=j.earthRadius/j.GLOBE_RADIUS,Or=j.length(_i),br=j.mercatorZfromAltitude(Or*eo-j.earthRadius,0),xo=Math.min(Yt.zoomFromMercatorZAdjusted(br),rn.maxZoom);return xo>.5*(j.GLOBE_ZOOM_THRESHOLD_MIN+j.GLOBE_ZOOM_THRESHOLD_MAX)?(Yt.setProjection({name:"mercator"}),Yt.zoom=xo,this._cameraForBounds(Yt,lt,bt,kt,Ft)):{center:Yt.center,zoom:xo,bearing:kt}}queryTerrainElevation(ot,lt){const bt=this.transform.elevation;return bt?(lt=j.extend({},{exaggerated:!0},lt),bt.getAtPoint(j.MercatorCoordinate.fromLngLat(ot),null,lt.exaggerated)):null}_cameraForBounds(ot,lt,bt,kt,Ft){if(ot.projection.name==="globe")return this._cameraForBoundsOnGlobe(ot,lt,bt,kt,Ft);const Yt=ot.clone(),rn=this._extendCameraOptions(Ft),ln=Yt.padding;Yt.bearing=kt;const pn=j.LngLat.convert(lt),vn=j.LngLat.convert(bt),Tn=new j.LngLat(pn.lng,vn.lat),Dn=new j.LngLat(vn.lng,pn.lat),$n=Yt.project(pn),Wn=Yt.project(vn),Zn=this.queryTerrainElevation(pn),Fn=this.queryTerrainElevation(vn),jn=this.queryTerrainElevation(Tn),Qn=this.queryTerrainElevation(Dn),Gn=[[$n.x,$n.y,Math.min(Zn||0,Fn||0,jn||0,Qn||0)],[Wn.x,Wn.y,Math.max(Zn||0,Fn||0,jn||0,Qn||0)]];let or=j.Aabb.fromPoints(Gn);const lr=Yt.getWorldToCameraMatrix(),er=j.invert(new Float64Array(16),lr);or=j.Aabb.applyTransform(or,lr);const dr=j.sub([],or.max,or.min),Ar=ln.left||0,Fr=ln.right||0,Dr=ln.bottom||0,co=ln.top||0,{left:Sr,right:_i,top:eo,bottom:Or}=rn.padding,br=.5*(Ar+Fr),xo=.5*(co+Dr),mo=Math.min(Yt.scaleZoom(Yt.scale*Math.min((Yt.width-(Ar+Fr+Sr+_i))/dr[0],(Yt.height-(Dr+co+Or+eo))/dr[1])),rn.maxZoom),vo=Yt.scale/Yt.zoomScale(mo);or=new j.Aabb([or.min[0]-(Sr+br)*vo,or.min[1]-(Or+xo)*vo,or.min[2]],[or.max[0]+(_i+br)*vo,or.max[1]+(eo+xo)*vo,or.max[2]]);const yo=.5*dr[2],Bo=this._minimumAABBFrustumDistance(Yt,or),Ho=[0,0,1,0];j.transformMat4$1(Ho,Ho,lr),j.normalize$2(Ho,Ho);const Go=j.scale$2([],Ho,Bo+yo),No=j.add([],or.center,Go),_o=(typeof rn.offset.x=="number"&&typeof rn.offset.y=="number"?new j.pointGeometry(rn.offset.x,rn.offset.y):j.pointGeometry.convert(rn.offset)).rotate(-j.degToRad(kt));or.center[0]-=_o.x*vo,or.center[1]+=_o.y*vo,j.transformMat4(or.center,or.center,er),j.transformMat4(No,No,er);const es=[or.center[0],or.center[1],No[2]*Yt.pixelsPerMeter];j.scale$2(es,es,1/Yt.worldSize);const hs=j.lngFromMercatorX(es[0]),Ns=j.latFromMercatorY(es[1]),Vs=Math.min(Yt._zoomFromMercatorZ(es[2]),rn.maxZoom),Ds=new j.LngLat(hs,Ns);return Yt.mercatorFromTransition&&Vs<.5*(j.GLOBE_ZOOM_THRESHOLD_MIN+j.GLOBE_ZOOM_THRESHOLD_MAX)?(Yt.setProjection({name:"globe"}),Yt.zoom=Vs,this._cameraForBounds(Yt,lt,bt,kt,Ft)):{center:Ds,zoom:Vs,bearing:kt}}fitBounds(ot,lt,bt){const kt=this.cameraForBounds(ot,lt);return this._fitInternal(kt,lt,bt)}fitScreenCoordinates(ot,lt,bt,kt,Ft){const Yt=j.pointGeometry.convert(ot),rn=j.pointGeometry.convert(lt),ln=new j.pointGeometry(Math.min(Yt.x,rn.x),Math.min(Yt.y,rn.y)),pn=new j.pointGeometry(Math.max(Yt.x,rn.x),Math.max(Yt.y,rn.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(Yt,rn))return this;const vn=this.transform.pointLocation3D(ln),Tn=this.transform.pointLocation3D(pn),Dn=this.transform.pointLocation3D(new j.pointGeometry(ln.x,pn.y)),$n=this.transform.pointLocation3D(new j.pointGeometry(pn.x,ln.y)),Wn=[Math.min(vn.lng,Tn.lng,Dn.lng,$n.lng),Math.min(vn.lat,Tn.lat,Dn.lat,$n.lat)],Zn=[Math.max(vn.lng,Tn.lng,Dn.lng,$n.lng),Math.max(vn.lat,Tn.lat,Dn.lat,$n.lat)],Fn=this._cameraForBounds(this.transform,Wn,Zn,bt,kt);return this._fitInternal(Fn,kt,Ft)}_fitInternal(ot,lt,bt){return ot?(delete(lt=j.extend(ot,lt)).padding,lt.linear?this.easeTo(lt,bt):this.flyTo(lt,bt)):this}jumpTo(ot,lt){this.stop();const bt=ot.preloadOnly?this.transform.clone():this.transform;let kt=!1,Ft=!1,Yt=!1;return"zoom"in ot&&bt.zoom!==+ot.zoom&&(kt=!0,bt.zoom=+ot.zoom),ot.center!==void 0&&(bt.center=j.LngLat.convert(ot.center)),"bearing"in ot&&bt.bearing!==+ot.bearing&&(Ft=!0,bt.bearing=+ot.bearing),"pitch"in ot&&bt.pitch!==+ot.pitch&&(Yt=!0,bt.pitch=+ot.pitch),ot.padding==null||bt.isPaddingEqual(ot.padding)||(bt.padding=ot.padding),ot.preloadOnly?(this._preloadTiles(bt),this):(this.fire(new j.Event("movestart",lt)).fire(new j.Event("move",lt)),kt&&this.fire(new j.Event("zoomstart",lt)).fire(new j.Event("zoom",lt)).fire(new j.Event("zoomend",lt)),Ft&&this.fire(new j.Event("rotatestart",lt)).fire(new j.Event("rotate",lt)).fire(new j.Event("rotateend",lt)),Yt&&this.fire(new j.Event("pitchstart",lt)).fire(new j.Event("pitch",lt)).fire(new j.Event("pitchend",lt)),this.fire(new j.Event("moveend",lt)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||j.warnOnce(Av),this.transform.getFreeCameraOptions()}setFreeCameraOptions(ot,lt){const bt=this.transform;if(!bt.projection.supportsFreeCamera)return j.warnOnce(Av),this;this.stop();const kt=bt.zoom,Ft=bt.pitch,Yt=bt.bearing;bt.setFreeCameraOptions(ot);const rn=kt!==bt.zoom,ln=Ft!==bt.pitch,pn=Yt!==bt.bearing;return this.fire(new j.Event("movestart",lt)).fire(new j.Event("move",lt)),rn&&this.fire(new j.Event("zoomstart",lt)).fire(new j.Event("zoom",lt)).fire(new j.Event("zoomend",lt)),pn&&this.fire(new j.Event("rotatestart",lt)).fire(new j.Event("rotate",lt)).fire(new j.Event("rotateend",lt)),ln&&this.fire(new j.Event("pitchstart",lt)).fire(new j.Event("pitch",lt)).fire(new j.Event("pitchend",lt)),this.fire(new j.Event("moveend",lt)),this}easeTo(ot,lt){this._stop(!1,ot.easeId),((ot=j.extend({offset:[0,0],duration:500,easing:j.ease},ot)).animate===!1||!ot.essential&&j.exported.prefersReducedMotion)&&(ot.duration=0);const bt=this.transform,kt=this.getZoom(),Ft=this.getBearing(),Yt=this.getPitch(),rn=this.getPadding(),ln="zoom"in ot?+ot.zoom:kt,pn="bearing"in ot?this._normalizeBearing(ot.bearing,Ft):Ft,vn="pitch"in ot?+ot.pitch:Yt,Tn="padding"in ot?ot.padding:bt.padding,Dn=j.pointGeometry.convert(ot.offset);let $n,Wn,Zn;if(bt.projection.name==="globe"){const Fr=j.MercatorCoordinate.fromLngLat(bt.center),Dr=Dn.rotate(-bt.angle);Fr.x+=Dr.x/bt.worldSize,Fr.y+=Dr.y/bt.worldSize;const co=Fr.toLngLat(),Sr=j.LngLat.convert(ot.center||co);this._normalizeCenter(Sr),$n=bt.centerPoint.add(Dr),Wn=new j.pointGeometry(Fr.x,Fr.y).mult(bt.worldSize),Zn=new j.pointGeometry(j.mercatorXfromLng(Sr.lng),j.mercatorYfromLat(Sr.lat)).mult(bt.worldSize).sub(Wn)}else{$n=bt.centerPoint.add(Dn);const Fr=bt.pointLocation($n),Dr=j.LngLat.convert(ot.center||Fr);this._normalizeCenter(Dr),Wn=bt.project(Fr),Zn=bt.project(Dr).sub(Wn)}const Fn=bt.zoomScale(ln-kt);let jn,Qn;ot.around&&(jn=j.LngLat.convert(ot.around),Qn=bt.locationPoint(jn));const Gn=this._zooming||ln!==kt,or=this._rotating||Ft!==pn,lr=this._pitching||vn!==Yt,er=!bt.isPaddingEqual(Tn),dr=Fr=>Dr=>{if(Gn&&(Fr.zoom=j.number(kt,ln,Dr)),or&&(Fr.bearing=j.number(Ft,pn,Dr)),lr&&(Fr.pitch=j.number(Yt,vn,Dr)),er&&(Fr.interpolatePadding(rn,Tn,Dr),$n=Fr.centerPoint.add(Dn)),jn)Fr.setLocationAtPoint(jn,Qn);else{const co=Fr.zoomScale(Fr.zoom-kt),Sr=ln>kt?Math.min(2,Fn):Math.max(.5,Fn),_i=Math.pow(Sr,1-Dr),eo=Fr.unproject(Wn.add(Zn.mult(Dr*_i)).mult(co));Fr.setLocationAtPoint(Fr.renderWorldCopies?eo.wrap():eo,$n)}return ot.preloadOnly||this._fireMoveEvents(lt),Fr};if(ot.preloadOnly){const Fr=this._emulate(dr,ot.duration,bt);return this._preloadTiles(Fr),this}const Ar={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Gn,this._rotating=or,this._pitching=lr,this._padding=er,this._easeId=ot.easeId,this._prepareEase(lt,ot.noMoveStart,Ar),this._ease(dr(bt),Fr=>{bt.recenterOnTerrain(),this._afterEase(lt,Fr)},ot),this}_prepareEase(ot,lt,bt={}){this._moving=!0,this.transform.cameraElevationReference="sea",lt||bt.moving||this.fire(new j.Event("movestart",ot)),this._zooming&&!bt.zooming&&this.fire(new j.Event("zoomstart",ot)),this._rotating&&!bt.rotating&&this.fire(new j.Event("rotatestart",ot)),this._pitching&&!bt.pitching&&this.fire(new j.Event("pitchstart",ot))}_fireMoveEvents(ot){this.fire(new j.Event("move",ot)),this._zooming&&this.fire(new j.Event("zoom",ot)),this._rotating&&this.fire(new j.Event("rotate",ot)),this._pitching&&this.fire(new j.Event("pitch",ot))}_afterEase(ot,lt){if(this._easeId&&lt&&this._easeId===lt)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const bt=this._zooming,kt=this._rotating,Ft=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,bt&&this.fire(new j.Event("zoomend",ot)),kt&&this.fire(new j.Event("rotateend",ot)),Ft&&this.fire(new j.Event("pitchend",ot)),this.fire(new j.Event("moveend",ot))}flyTo(ot,lt){if(!ot.essential&&j.exported.prefersReducedMotion){const vo=j.pick(ot,["center","zoom","bearing","pitch","around"]);return this.jumpTo(vo,lt)}this.stop(),ot=j.extend({offset:[0,0],speed:1.2,curve:1.42,easing:j.ease},ot);const bt=this.transform,kt=this.getZoom(),Ft=this.getBearing(),Yt=this.getPitch(),rn=this.getPadding(),ln="zoom"in ot?j.clamp(+ot.zoom,bt.minZoom,bt.maxZoom):kt,pn="bearing"in ot?this._normalizeBearing(ot.bearing,Ft):Ft,vn="pitch"in ot?+ot.pitch:Yt,Tn="padding"in ot?ot.padding:bt.padding,Dn=bt.zoomScale(ln-kt),$n=j.pointGeometry.convert(ot.offset);let Wn=bt.centerPoint.add($n);const Zn=bt.pointLocation(Wn),Fn=j.LngLat.convert(ot.center||Zn);this._normalizeCenter(Fn);const jn=bt.project(Zn),Qn=bt.project(Fn).sub(jn);let Gn=ot.curve;const or=Math.max(bt.width,bt.height),lr=or/Dn,er=Qn.mag();if("minZoom"in ot){const vo=j.clamp(Math.min(ot.minZoom,kt,ln),bt.minZoom,bt.maxZoom),yo=or/bt.zoomScale(vo-kt);Gn=Math.sqrt(yo/er*2)}const dr=Gn*Gn;function Ar(vo){const yo=(lr*lr-or*or+(vo?-1:1)*dr*dr*er*er)/(2*(vo?lr:or)*dr*er);return Math.log(Math.sqrt(yo*yo+1)-yo)}function Fr(vo){return(Math.exp(vo)-Math.exp(-vo))/2}function Dr(vo){return(Math.exp(vo)+Math.exp(-vo))/2}const co=Ar(0);let Sr=function(vo){return Dr(co)/Dr(co+Gn*vo)},_i=function(vo){return or*((Dr(co)*(Fr(yo=co+Gn*vo)/Dr(yo))-Fr(co))/dr)/er;var yo},eo=(Ar(1)-co)/Gn;if(Math.abs(er)<1e-6||!isFinite(eo)){if(Math.abs(or-lr)<1e-6)return this.easeTo(ot,lt);const vo=lr<or?-1:1;eo=Math.abs(Math.log(lr/or))/Gn,_i=function(){return 0},Sr=function(yo){return Math.exp(vo*Gn*yo)}}ot.duration="duration"in ot?+ot.duration:1e3*eo/("screenSpeed"in ot?+ot.screenSpeed/Gn:+ot.speed),ot.maxDuration&&ot.duration>ot.maxDuration&&(ot.duration=0);const Or=Ft!==pn,br=vn!==Yt,xo=!bt.isPaddingEqual(Tn),mo=vo=>yo=>{const Bo=yo*eo,Ho=1/Sr(Bo);vo.zoom=yo===1?ln:kt+vo.scaleZoom(Ho),Or&&(vo.bearing=j.number(Ft,pn,yo)),br&&(vo.pitch=j.number(Yt,vn,yo)),xo&&(vo.interpolatePadding(rn,Tn,yo),Wn=vo.centerPoint.add($n));const Go=yo===1?Fn:vo.unproject(jn.add(Qn.mult(_i(Bo))).mult(Ho));return vo.setLocationAtPoint(vo.renderWorldCopies?Go.wrap():Go,Wn),vo._updateCameraOnTerrain(),ot.preloadOnly||this._fireMoveEvents(lt),vo};if(ot.preloadOnly){const vo=this._emulate(mo,ot.duration,bt);return this._preloadTiles(vo),this}return this._zooming=!0,this._rotating=Or,this._pitching=br,this._padding=xo,this._prepareEase(lt,!1),this._ease(mo(bt),()=>this._afterEase(lt),ot),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(ot,lt){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const bt=this._onEaseEnd;this._onEaseEnd=void 0,bt.call(this,lt)}if(!ot){const bt=this.handlers;bt&&bt.stop(!1)}return this}_ease(ot,lt,bt){bt.animate===!1||bt.duration===0?(ot(1),lt()):(this._easeStart=j.exported.now(),this._easeOptions=bt,this._onEaseFrame=ot,this._onEaseEnd=lt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const ot=Math.min((j.exported.now()-this._easeStart)/this._easeOptions.duration,1),lt=this._onEaseFrame;lt&&lt(this._easeOptions.easing(ot)),ot<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(ot,lt){ot=j.wrap(ot,-180,180);const bt=Math.abs(ot-lt);return Math.abs(ot-360-lt)<bt&&(ot-=360),Math.abs(ot+360-lt)<bt&&(ot+=360),ot}_normalizeCenter(ot){const lt=this.transform;if(!lt.renderWorldCopies||lt.maxBounds)return;const bt=ot.lng-lt.center.lng;ot.lng+=bt>180?-360:bt<-180?360:0}_emulate(ot,lt,bt){const kt=Math.ceil(15*lt/1e3),Ft=[],Yt=ot(bt.clone());for(let rn=0;rn<=kt;rn++){const ln=Yt(rn/kt);Ft.push(ln.clone())}return Ft}}class Ev{constructor(ot={}){this.options=ot,j.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(ot){const lt=this.options&&this.options.compact;return this._map=ot,this._container=ft("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ft("button","mapboxgl-ctrl-attrib-button",this._container),ft("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ft("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),lt&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),lt===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(ot,lt){const bt=this._map._getUIString(`AttributionControl.${lt}`);ot.setAttribute("aria-label",bt),ot.removeAttribute("title"),ot.firstElementChild&&ot.firstElementChild.setAttribute("title",bt)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let ot=this._editLink;ot||(ot=this._editLink=this._container.querySelector(".mapbox-improve-map"));const lt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||j.config.ACCESS_TOKEN}];if(ot){const bt=lt.reduce((kt,Ft,Yt)=>(Ft.value&&(kt+=`${Ft.key}=${Ft.value}${Yt<lt.length-1?"&":""}`),kt),"?");ot.href=`${j.config.FEEDBACK_URL}/${bt}#${oy(this._map,!0)}`,ot.rel="noopener nofollow",this._setElementTitle(ot,"MapFeedback")}}_updateData(ot){!ot||ot.sourceDataType!=="metadata"&&ot.sourceDataType!=="visibility"&&ot.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let ot=[];if(this._map.style.stylesheet){const kt=this._map.style.stylesheet;this.styleOwner=kt.owner,this.styleId=kt.id}const lt=this._map.style._sourceCaches;for(const kt in lt){const Ft=lt[kt];if(Ft.used){const Yt=Ft.getSource();Yt.attribution&&ot.indexOf(Yt.attribution)<0&&ot.push(Yt.attribution)}}ot.sort((kt,Ft)=>kt.length-Ft.length),ot=ot.filter((kt,Ft)=>{for(let Yt=Ft+1;Yt<ot.length;Yt++)if(ot[Yt].indexOf(kt)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?ot=[...this.options.customAttribution,...ot]:ot.unshift(this.options.customAttribution));const bt=ot.join(" | ");bt!==this._attribHTML&&(this._attribHTML=bt,ot.length?(this._innerContainer.innerHTML=bt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ny{constructor(){j.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(ot){this._map=ot,this._container=ft("div","mapboxgl-ctrl");const lt=ft("a","mapboxgl-ctrl-logo");return lt.target="_blank",lt.rel="noopener nofollow",lt.href="https://www.mapbox.com/",lt.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),lt.setAttribute("rel","noopener nofollow"),this._container.appendChild(lt),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(ot){ot&&ot.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const ot=this._map.style._sourceCaches;if(Object.entries(ot).length===0)return!0;for(const lt in ot){const bt=ot[lt].getSource();if(bt.hasOwnProperty("mapbox_logo")&&!bt.mapbox_logo)return!1}return!0}_updateCompact(){const ot=this._container.children;if(ot.length){const lt=ot[0];this._map.getCanvasContainer().offsetWidth<250?lt.classList.add("mapboxgl-compact"):lt.classList.remove("mapboxgl-compact")}}}class A_{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(ot){const lt=++this._id;return this._queue.push({callback:ot,id:lt,cancelled:!1}),lt}remove(ot){const lt=this._currentlyRunning,bt=lt?this._queue.concat(lt):this._queue;for(const kt of bt)if(kt.id===ot)return void(kt.cancelled=!0)}run(ot=0){const lt=this._currentlyRunning=this._queue;this._queue=[];for(const bt of lt)if(!bt.cancelled&&(bt.callback(ot),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function cp(dt,ot,lt){if(dt=new j.LngLat(dt.lng,dt.lat),ot){const bt=new j.LngLat(dt.lng-360,dt.lat),kt=new j.LngLat(dt.lng+360,dt.lat),Ft=360*Math.ceil(Math.abs(dt.lng-lt.center.lng)/360),Yt=lt.locationPoint(dt).distSqr(ot),rn=ot.x<0||ot.y<0||ot.x>lt.width||ot.y>lt.height;lt.locationPoint(bt).distSqr(ot)<Yt&&(rn||Math.abs(bt.lng-lt.center.lng)<Ft)?dt=bt:lt.locationPoint(kt).distSqr(ot)<Yt&&(rn||Math.abs(kt.lng-lt.center.lng)<Ft)&&(dt=kt)}for(;Math.abs(dt.lng-lt.center.lng)>180;){const bt=lt.locationPoint(dt);if(bt.x>=0&&bt.y>=0&&bt.x<=lt.width&&bt.y<=lt.height)break;dt.lng>lt.center.lng?dt.lng-=360:dt.lng+=360}return dt}const E_={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class T_ extends j.Evented{constructor(ot,lt){if(super(),(ot instanceof j.window.HTMLElement||lt)&&(ot=j.extend({element:ot},lt)),j.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=ot&&ot.anchor||"center",this._color=ot&&ot.color||"#3FB1CE",this._scale=ot&&ot.scale||1,this._draggable=ot&&ot.draggable||!1,this._clickTolerance=ot&&ot.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=ot&&ot.rotation||0,this._rotationAlignment=ot&&ot.rotationAlignment||"auto",this._pitchAlignment=ot&&ot.pitchAlignment&&ot.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=ot&&ot.occludedOpacity||.2,ot&&ot.element)this._element=ot.element,this._offset=j.pointGeometry.convert(ot&&ot.offset||[0,0]);else{this._defaultMarker=!0,this._element=ft("div");const kt=41,Ft=27,Yt=pt("svg",{display:"block",height:kt*this._scale+"px",width:Ft*this._scale+"px",viewBox:`0 0 ${Ft} ${kt}`},this._element),rn=pt("radialGradient",{id:"shadowGradient"},pt("defs",{},Yt));pt("stop",{offset:"10%","stop-opacity":.4},rn),pt("stop",{offset:"100%","stop-opacity":.05},rn),pt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Yt),pt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Yt),pt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Yt),pt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Yt),this._offset=j.pointGeometry.convert(ot&&ot.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",kt=>{kt.preventDefault()}),this._element.addEventListener("mousedown",kt=>{kt.preventDefault()});const bt=this._element.classList;for(const kt in E_)bt.remove(`mapboxgl-marker-anchor-${kt}`);bt.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(ot){return ot===this._map||(this.remove(),this._map=ot,ot.getCanvasContainer().appendChild(this._element),ot.on("move",this._updateMoving),ot.on("moveend",this._update),ot.on("remove",this._clearFadeTimer),ot._addMarker(this),this.setDraggable(this._draggable),this._update(),ot.on("click",this._onMapClick)),this}remove(){const ot=this._map;return ot&&(ot.off("click",this._onMapClick),ot.off("move",this._updateMoving),ot.off("moveend",this._update),ot.off("mousedown",this._addDragHandler),ot.off("touchstart",this._addDragHandler),ot.off("mouseup",this._onUp),ot.off("touchend",this._onUp),ot.off("mousemove",this._onMove),ot.off("touchmove",this._onMove),ot.off("remove",this._clearFadeTimer),ot._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(ot){return this._lngLat=j.LngLat.convert(ot),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(ot){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),ot){if(!("offset"in ot.options)){const kt=Math.sqrt(Math.pow(13.5,2)/2);ot.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[kt,-1*(38.1-13.5+kt)],"bottom-right":[-kt,-1*(38.1-13.5+kt)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=ot,ot._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(ot){const lt=ot.code,bt=ot.charCode||ot.keyCode;lt!=="Space"&&lt!=="Enter"&&bt!==32&&bt!==13||this.togglePopup()}_onMapClick(ot){const lt=ot.originalEvent.target,bt=this._element;this._popup&&(lt===bt||bt.contains(lt))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const ot=this._popup;return ot?(ot.isOpen()?(ot.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(ot.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const ot=this._map,lt=this._pos;if(!ot||!lt)return!1;const bt=ot.unproject(lt),kt=ot.getFreeCameraOptions();if(!kt.position)return!1;const Ft=kt.position.toLngLat();return Ft.distanceTo(bt)<.9*Ft.distanceTo(this._lngLat)}_evaluateOpacity(){const ot=this._map;if(!ot)return;const lt=this._pos;if(!lt||lt.x<0||lt.x>ot.transform.width||lt.y<0||lt.y>ot.transform.height)return void this._clearFadeTimer();const bt=ot.unproject(lt);let kt;ot._showingGlobe()&&j.isLngLatBehindGlobe(ot.transform,this._lngLat)?kt=0:(kt=1-ot._queryFogOpacity(bt),ot.transform._terrainEnabled()&&ot.getTerrain()&&this._behindTerrain()&&(kt*=this._occludedOpacity)),this._element.style.opacity=`${kt}`,this._element.style.pointerEvents=kt>0?"auto":"none",this._popup&&this._popup._setOpacity(kt),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const ot=this._pos;if(!ot||!this._map)return;const lt=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${ot.x}px,${ot.y}px)
            ${E_[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${lt.x}px,${lt.y}px)
        `}_calculateXYTransform(){const ot=this._pos,lt=this._map,bt=this.getPitchAlignment();if(!lt||!ot||bt!=="map")return"";if(!lt._showingGlobe()){const ln=lt.getPitch();return ln?`rotateX(${ln}deg)`:""}const kt=j.radToDeg(j.globeTiltAtLngLat(lt.transform,this._lngLat)),Ft=ot.sub(j.globeCenterToScreenPoint(lt.transform)),Yt=Math.abs(Ft.x)+Math.abs(Ft.y);if(Yt===0)return"";const rn=kt/Yt;return`rotateX(${-Ft.y*rn}deg) rotateY(${Ft.x*rn}deg)`}_calculateZTransform(){const ot=this._pos,lt=this._map;if(!lt||!ot)return"";let bt=0;const kt=this.getRotationAlignment();if(kt==="map")if(lt._showingGlobe()){const Ft=lt.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Yt=lt.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(Ft);bt=j.radToDeg(Math.atan2(Yt.y,Yt.x))-90}else bt=-lt.getBearing();else if(kt==="horizon"){const Ft=j.smoothstep(4,6,lt.getZoom()),Yt=j.globeCenterToScreenPoint(lt.transform);Yt.y+=Ft*lt.transform.height;const rn=ot.sub(Yt),ln=j.radToDeg(Math.atan2(rn.y,rn.x));bt=(ln>90?ln-270:ln+90)*(1-Ft)}return bt+=this._rotation,bt?`rotateZ(${bt}deg)`:""}_update(ot){j.window.cancelAnimationFrame(this._updateFrameId);const lt=this._map;lt&&(lt.transform.renderWorldCopies&&(this._lngLat=cp(this._lngLat,this._pos,lt.transform)),this._pos=lt.project(this._lngLat),ot===!0?this._updateFrameId=j.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),lt._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(lt._showingGlobe()||lt.getTerrain()||lt.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(ot){return this._offset=j.pointGeometry.convert(ot),this._update(),this}_onMove(ot){const lt=this._map;if(!lt)return;const bt=this._pointerdownPos,kt=this._positionDelta;if(bt&&kt){if(!this._isDragging){const Ft=this._clickTolerance||lt._clickTolerance;if(ot.point.dist(bt)<Ft)return;this._isDragging=!0}this._pos=ot.point.sub(kt),this._lngLat=lt.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new j.Event("dragstart"))),this.fire(new j.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const ot=this._map;ot&&(ot.off("mousemove",this._onMove),ot.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new j.Event("dragend")),this._state="inactive"}_addDragHandler(ot){const lt=this._map,bt=this._pos;lt&&bt&&this._element.contains(ot.originalEvent.target)&&(ot.preventDefault(),this._positionDelta=ot.point.sub(bt),this._pointerdownPos=ot.point,this._state="pending",lt.on("mousemove",this._onMove),lt.on("touchmove",this._onMove),lt.once("mouseup",this._onUp),lt.once("touchend",this._onUp))}setDraggable(ot){this._draggable=!!ot;const lt=this._map;return lt&&(ot?(lt.on("mousedown",this._addDragHandler),lt.on("touchstart",this._addDragHandler)):(lt.off("mousedown",this._addDragHandler),lt.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(ot){return this._rotation=ot||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(ot){return this._rotationAlignment=ot||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(ot){return this._pitchAlignment=ot||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(ot){return this._occludedOpacity=ot||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const qu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},v0=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Tv(dt=new j.pointGeometry(0,0),ot="bottom"){if(typeof dt=="number"){const lt=Math.round(Math.sqrt(.5*Math.pow(dt,2)));switch(ot){case"top":return new j.pointGeometry(0,dt);case"top-left":return new j.pointGeometry(lt,lt);case"top-right":return new j.pointGeometry(-lt,lt);case"bottom":return new j.pointGeometry(0,-dt);case"bottom-left":return new j.pointGeometry(lt,-lt);case"bottom-right":return new j.pointGeometry(-lt,-lt);case"left":return new j.pointGeometry(dt,0);case"right":return new j.pointGeometry(-dt,0)}return new j.pointGeometry(0,0)}return dt instanceof j.pointGeometry||Array.isArray(dt)?j.pointGeometry.convert(dt):j.pointGeometry.convert(dt[ot]||[0,0])}class b0{constructor(ot){this.jumpTo(ot)}getValue(ot){if(ot<=this._startTime)return this._start;if(ot>=this._endTime)return this._end;const lt=j.easeCubicInOut((ot-this._startTime)/(this._endTime-this._startTime));return this._start*(1-lt)+this._end*lt}isEasing(ot){return ot>=this._startTime&&ot<=this._endTime}jumpTo(ot){this._startTime=-1/0,this._endTime=-1/0,this._start=ot,this._end=ot}easeTo(ot,lt,bt){this._start=this.getValue(lt),this._end=ot,this._startTime=lt,this._endTime=lt+bt}}const w0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Cv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Uy(dt){dt.parentNode&&dt.parentNode.removeChild(dt)}const Rv={showCompass:!0,showZoom:!0,visualizePitch:!1};class x0{constructor(ot,lt,bt=!1){this._clickTolerance=10,this.element=lt,this.mouseRotate=new Sv({clickTolerance:ot.dragRotate._mouseRotate._clickTolerance}),this.map=ot,bt&&(this.mousePitch=new Dm({clickTolerance:ot.dragRotate._mousePitch._clickTolerance})),j.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),lt.addEventListener("mousedown",this.mousedown),lt.addEventListener("touchstart",this.touchstart,{passive:!1}),lt.addEventListener("touchmove",this.touchmove),lt.addEventListener("touchend",this.touchend),lt.addEventListener("touchcancel",this.reset)}down(ot,lt){this.mouseRotate.mousedown(ot,lt),this.mousePitch&&this.mousePitch.mousedown(ot,lt),Ot()}move(ot,lt){const bt=this.map,kt=this.mouseRotate.mousemoveWindow(ot,lt),Ft=kt&&kt.bearingDelta;if(Ft&&bt.setBearing(bt.getBearing()+Ft),this.mousePitch){const Yt=this.mousePitch.mousemoveWindow(ot,lt),rn=Yt&&Yt.pitchDelta;rn&&bt.setPitch(bt.getPitch()+rn)}}off(){const ot=this.element;ot.removeEventListener("mousedown",this.mousedown),ot.removeEventListener("touchstart",this.touchstart,{passive:!1}),ot.removeEventListener("touchmove",this.touchmove),ot.removeEventListener("touchend",this.touchend),ot.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Lt(),j.window.removeEventListener("mousemove",this.mousemove),j.window.removeEventListener("mouseup",this.mouseup)}mousedown(ot){this.down(j.extend({},ot,{ctrlKey:!0,preventDefault:()=>ot.preventDefault()}),mt(this.element,ot)),j.window.addEventListener("mousemove",this.mousemove),j.window.addEventListener("mouseup",this.mouseup)}mousemove(ot){this.move(ot,mt(this.element,ot))}mouseup(ot){this.mouseRotate.mouseupWindow(ot),this.mousePitch&&this.mousePitch.mouseupWindow(ot),this.offTemp()}touchstart(ot){ot.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Bt(this.element,ot.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>ot.preventDefault()},this._startPos))}touchmove(ot){ot.targetTouches.length!==1?this.reset():(this._lastPos=Bt(this.element,ot.targetTouches)[0],this.move({preventDefault:()=>ot.preventDefault()},this._lastPos))}touchend(ot){ot.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const S0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},zy={maxWidth:100,unit:"metric"};function ly(dt,ot,lt){const bt=Bm(ot),kt=bt/ot,Ft={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[lt];this._map._requestDomTask(()=>{this._container.style.width=dt*kt+"px",this._container.innerHTML=`${bt}&nbsp;${Ft}`})}function Bm(dt){const ot=Math.pow(10,`${Math.floor(dt)}`.length-1);let lt=dt/ot;return lt=lt>=10?10:lt>=5?5:lt>=3?3:lt>=2?2:lt>=1?1:function(bt){const kt=Math.pow(10,Math.ceil(-Math.log(bt)/Math.LN10));return Math.round(bt*kt)/kt}(lt),ot*lt}const Vy={version:j.version,supported:st,setRTLTextPlugin:j.setRTLTextPlugin,getRTLTextPluginStatus:j.getRTLTextPluginStatus,Map:class extends _0{constructor(dt){if(j.LivePerformanceUtils.mark(j.PerformanceMarkers.create),(dt=j.extend({},Cv,dt)).minZoom!=null&&dt.maxZoom!=null&&dt.minZoom>dt.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(dt.minPitch!=null&&dt.maxPitch!=null&&dt.minPitch>dt.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(dt.minPitch!=null&&dt.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(dt.maxPitch!=null&&dt.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(dt.antialias&&j.isSafariWithAntialiasingBug(j.window)&&(dt.antialias=!1,j.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ku(dt.minZoom,dt.maxZoom,dt.minPitch,dt.maxPitch,dt.renderWorldCopies),dt),this._interactive=dt.interactive,this._minTileCacheSize=dt.minTileCacheSize,this._maxTileCacheSize=dt.maxTileCacheSize,this._failIfMajorPerformanceCaveat=dt.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=dt.preserveDrawingBuffer,this._antialias=dt.antialias,this._trackResize=dt.trackResize,this._bearingSnap=dt.bearingSnap,this._refreshExpiredTiles=dt.refreshExpiredTiles,this._fadeDuration=dt.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=dt.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=dt.collectResourceTiming,this._optimizeForTerrain=dt.optimizeForTerrain,this._language=this._parseLanguage(dt.language),this._worldview=dt.worldview,this._renderTaskQueue=new A_,this._domRenderTaskQueue=new A_,this._controls=[],this._markers=[],this._popups=[],this._mapId=j.uniqueId(),this._locale=j.extend({},w0,dt.locale),this._clickTolerance=dt.clickTolerance,this._cooperativeGestures=dt.cooperativeGestures,this._performanceMetricsCollection=dt.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new b0(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new j.RequestManager(dt.transformRequest,dt.accessToken,dt.testMode),this._silenceAuthErrors=!!dt.testMode,typeof dt.container=="string"){if(this._container=j.window.document.getElementById(dt.container),!this._container)throw new Error(`Container '${dt.container}' not found.`)}else{if(!(dt.container instanceof j.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=dt.container}if(this._container.childNodes.length>0&&j.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),dt.maxBounds&&this.setMaxBounds(dt.maxBounds),j.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),j.window!==void 0&&(j.window.addEventListener("online",this._onWindowOnline,!1),j.window.addEventListener("resize",this._onWindowResize,!1),j.window.addEventListener("orientationchange",this._onWindowResize,!1),j.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),j.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Tp(this,dt),this._localFontFamily=dt.localFontFamily,this._localIdeographFontFamily=dt.localIdeographFontFamily,dt.style&&this.setStyle(dt.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),dt.projection&&this.setProjection(dt.projection),this._hash=dt.hash&&new ky(typeof dt.hash=="string"&&dt.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:dt.center,zoom:dt.zoom,bearing:dt.bearing,pitch:dt.pitch}),dt.bounds&&(this.resize(),this.fitBounds(dt.bounds,j.extend({},dt.fitBoundsOptions,{duration:0})))),this.resize(),dt.attributionControl&&this.addControl(new Ev({customAttribution:dt.customAttribution})),this._logoControl=new Ny,this.addControl(this._logoControl,dt.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",ot=>{this._update(ot.dataType==="style"),this.fire(new j.Event(`${ot.dataType}data`,ot))}),this.on("dataloading",ot=>{this.fire(new j.Event(`${ot.dataType}dataloading`,ot))})}_getMapId(){return this._mapId}addControl(dt,ot){if(ot===void 0&&(ot=dt.getDefaultPosition?dt.getDefaultPosition():"top-right"),!dt||!dt.onAdd)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const lt=dt.onAdd(this);this._controls.push(dt);const bt=this._controlPositions[ot];return ot.indexOf("bottom")!==-1?bt.insertBefore(lt,bt.firstChild):bt.appendChild(lt),this}removeControl(dt){if(!dt||!dt.onRemove)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const ot=this._controls.indexOf(dt);return ot>-1&&this._controls.splice(ot,1),dt.onRemove(this),this}hasControl(dt){return this._controls.indexOf(dt)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(dt){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const ot=!this._moving;return ot&&this.fire(new j.Event("movestart",dt)).fire(new j.Event("move",dt)),this.fire(new j.Event("resize",dt)),ot&&this.fire(new j.Event("moveend",dt)),this}getBounds(){return this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly when viewing the poles."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(dt){return this.transform.setMaxBounds(j.LngLatBounds.convert(dt)),this._update()}setMinZoom(dt){if((dt=dt??-2)>=-2&&dt<=this.transform.maxZoom)return this.transform.minZoom=dt,this._update(),this.getZoom()<dt?this.setZoom(dt):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(dt){if((dt=dt??22)>=this.transform.minZoom)return this.transform.maxZoom=dt,this._update(),this.getZoom()>dt?this.setZoom(dt):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(dt){if((dt=dt??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(dt>=0&&dt<=this.transform.maxPitch)return this.transform.minPitch=dt,this._update(),this.getPitch()<dt?this.setPitch(dt):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(dt){if((dt=dt??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(dt>=this.transform.minPitch)return this.transform.maxPitch=dt,this._update(),this.getPitch()>dt?this.setPitch(dt):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(dt){return this.transform.renderWorldCopies=dt,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(dt){return dt==="auto"?j.window.navigator.language:Array.isArray(dt)?dt.length===0?void 0:dt.map(ot=>ot==="auto"?j.window.navigator.language:ot):dt}setLanguage(dt){const ot=this._parseLanguage(dt);if(!this.style||ot===this._language)return this;this._language=ot,this.style._reloadSources();for(const lt of this._controls)lt._setLanguage&&lt._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(dt){return this.style&&dt!==this._worldview?(this._worldview=dt,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(dt){return this._lazyInitEmptyStyle(),dt?typeof dt=="string"&&(dt={name:dt}):dt=null,this._useExplicitProjection=!!dt,this._prioritizeAndUpdateProjection(dt,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const dt=this.transform,ot=dt.projection.name;let lt;ot==="globe"&&dt.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?(dt.setMercatorFromTransition(),lt=!0):ot==="mercator"&&dt.zoom<j.GLOBE_ZOOM_THRESHOLD_MAX&&(dt.setProjection({name:"globe"}),lt=!0),lt&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(dt,ot){return this._updateProjection(dt||ot||{name:"mercator"})}_updateProjection(dt){let ot;if(ot=dt.name==="globe"&&this.transform.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(dt),this.style.applyProjectionUpdate(),ot){this.painter.clearBackgroundTiles();for(const lt in this.style._sourceCaches)this.style._sourceCaches[lt].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(dt){return this.transform.locationPoint3D(j.LngLat.convert(dt))}unproject(dt){return this.transform.pointLocation3D(j.pointGeometry.convert(dt))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(dt,ot,lt){if(dt==="mouseenter"||dt==="mouseover"){let bt=!1;const kt=Yt=>{const rn=ot.filter(pn=>this.getLayer(pn)),ln=rn.length?this.queryRenderedFeatures(Yt.point,{layers:rn}):[];ln.length?bt||(bt=!0,lt.call(this,new Du(dt,this,Yt.originalEvent,{features:ln}))):bt=!1},Ft=()=>{bt=!1};return{layers:new Set(ot),listener:lt,delegates:{mousemove:kt,mouseout:Ft}}}if(dt==="mouseleave"||dt==="mouseout"){let bt=!1;const kt=Yt=>{const rn=ot.filter(ln=>this.getLayer(ln));(rn.length?this.queryRenderedFeatures(Yt.point,{layers:rn}):[]).length?bt=!0:bt&&(bt=!1,lt.call(this,new Du(dt,this,Yt.originalEvent)))},Ft=Yt=>{bt&&(bt=!1,lt.call(this,new Du(dt,this,Yt.originalEvent)))};return{layers:new Set(ot),listener:lt,delegates:{mousemove:kt,mouseout:Ft}}}{const bt=kt=>{const Ft=ot.filter(rn=>this.getLayer(rn)),Yt=Ft.length?this.queryRenderedFeatures(kt.point,{layers:Ft}):[];Yt.length&&(kt.features=Yt,lt.call(this,kt),delete kt.features)};return{layers:new Set(ot),listener:lt,delegates:{[dt]:bt}}}}on(dt,ot,lt){if(lt===void 0)return super.on(dt,ot);Array.isArray(ot)||(ot=[ot]);const bt=this._createDelegatedListener(dt,ot,lt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[dt]=this._delegatedListeners[dt]||[],this._delegatedListeners[dt].push(bt);for(const kt in bt.delegates)this.on(kt,bt.delegates[kt]);return this}once(dt,ot,lt){if(lt===void 0)return super.once(dt,ot);Array.isArray(ot)||(ot=[ot]);const bt=this._createDelegatedListener(dt,ot,lt);for(const kt in bt.delegates)this.once(kt,bt.delegates[kt]);return this}off(dt,ot,lt){if(lt===void 0)return super.off(dt,ot);ot=new Set(Array.isArray(ot)?ot:[ot]);const bt=(Ft,Yt)=>{if(Ft.size!==Yt.size)return!1;for(const rn of Ft)if(!Yt.has(rn))return!1;return!0},kt=this._delegatedListeners?this._delegatedListeners[dt]:void 0;return kt&&(Ft=>{for(let Yt=0;Yt<Ft.length;Yt++){const rn=Ft[Yt];if(rn.listener===lt&&bt(rn.layers,ot)){for(const ln in rn.delegates)this.off(ln,rn.delegates[ln]);return Ft.splice(Yt,1),this}}})(kt),this}queryRenderedFeatures(dt,ot){return this.style?(ot!==void 0||dt===void 0||dt instanceof j.pointGeometry||Array.isArray(dt)||(ot=dt,dt=void 0),this.style.queryRenderedFeatures(dt=dt||[[0,0],[this.transform.width,this.transform.height]],ot=ot||{},this.transform)):[]}querySourceFeatures(dt,ot){return this.style.querySourceFeatures(dt,ot)}setStyle(dt,ot){return(ot=j.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},ot)).diff!==!1&&ot.localIdeographFontFamily===this._localIdeographFontFamily&&ot.localFontFamily===this._localFontFamily&&this.style&&dt?(this._diffStyle(dt,ot),this):(this._localIdeographFontFamily=ot.localIdeographFontFamily,this._localFontFamily=ot.localFontFamily,this._updateStyle(dt,ot))}_getUIString(dt){const ot=this._locale[dt];if(ot==null)throw new Error(`Missing UI string '${dt}'`);return ot}_updateStyle(dt,ot){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),dt&&(this.style=new op(this,ot||{}),this.style.setEventedParent(this,{style:this.style}),typeof dt=="string"?this.style.loadURL(dt):this.style.loadJSON(dt)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new op(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(dt,ot){if(typeof dt=="string"){const lt=this._requestManager.normalizeStyleURL(dt),bt=this._requestManager.transformRequest(lt,j.ResourceType.Style);j.getJSON(bt,(kt,Ft)=>{kt?this.fire(new j.ErrorEvent(kt)):Ft&&this._updateDiff(Ft,ot)})}else typeof dt=="object"&&this._updateDiff(dt,ot)}_updateDiff(dt,ot){try{this.style.setState(dt)&&this._update(!0)}catch(lt){j.warnOnce(`Unable to perform style diff: ${lt.message||lt.error||lt}.  Rebuilding the style from scratch.`),this._updateStyle(dt,ot)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(j.warnOnce("There is no style added to the map."),!1)}addSource(dt,ot){return this._lazyInitEmptyStyle(),this.style.addSource(dt,ot),this._update(!0)}isSourceLoaded(dt){return!!this.style&&this.style._isSourceCacheLoaded(dt)}areTilesLoaded(){const dt=this.style&&this.style._sourceCaches;for(const ot in dt){const lt=dt[ot]._tiles;for(const bt in lt){const kt=lt[bt];if(kt.state!=="loaded"&&kt.state!=="errored")return!1}}return!0}addSourceType(dt,ot,lt){this._lazyInitEmptyStyle(),this.style.addSourceType(dt,ot,lt)}removeSource(dt){return this.style.removeSource(dt),this._updateTerrain(),this._update(!0)}getSource(dt){return this.style.getSource(dt)}addImage(dt,ot,{pixelRatio:lt=1,sdf:bt=!1,stretchX:kt,stretchY:Ft,content:Yt}={}){if(this._lazyInitEmptyStyle(),ot instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&ot instanceof j.window.ImageBitmap){const{width:rn,height:ln,data:pn}=j.exported.getImageData(ot);this.style.addImage(dt,{data:new j.RGBAImage({width:rn,height:ln},pn),pixelRatio:lt,stretchX:kt,stretchY:Ft,content:Yt,sdf:bt,version:0})}else if(ot.width===void 0||ot.height===void 0)this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:rn,height:ln}=ot,pn=ot;this.style.addImage(dt,{data:new j.RGBAImage({width:rn,height:ln},new Uint8Array(pn.data)),pixelRatio:lt,stretchX:kt,stretchY:Ft,content:Yt,sdf:bt,version:0,userImage:pn}),pn.onAdd&&pn.onAdd(this,dt)}}updateImage(dt,ot){const lt=this.style.getImage(dt);if(!lt)return void this.fire(new j.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const bt=ot instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&ot instanceof j.window.ImageBitmap?j.exported.getImageData(ot):ot,{width:kt,height:Ft}=bt;kt!==void 0&&Ft!==void 0?kt===lt.data.width&&Ft===lt.data.height?(lt.data.replace(bt.data,!(ot instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&ot instanceof j.window.ImageBitmap)),this.style.updateImage(dt,lt)):this.fire(new j.ErrorEvent(new Error(`The width and height of the updated image (${kt}, ${Ft})
                must be that same as the previous version of the image
                (${lt.data.width}, ${lt.data.height})`))):this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(dt){return dt?!!this.style.getImage(dt):(this.fire(new j.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(dt){this.style.removeImage(dt)}loadImage(dt,ot){j.getImage(this._requestManager.transformRequest(dt,j.ResourceType.Image),(lt,bt)=>{ot(lt,bt instanceof j.window.HTMLImageElement?j.exported.getImageData(bt):bt)})}listImages(){return this.style.listImages()}addLayer(dt,ot){return this._lazyInitEmptyStyle(),this.style.addLayer(dt,ot),this._update(!0)}moveLayer(dt,ot){return this.style.moveLayer(dt,ot),this._update(!0)}removeLayer(dt){return this.style.removeLayer(dt),this._update(!0)}getLayer(dt){return this.style.getLayer(dt)}setLayerZoomRange(dt,ot,lt){return this.style.setLayerZoomRange(dt,ot,lt),this._update(!0)}setFilter(dt,ot,lt={}){return this.style.setFilter(dt,ot,lt),this._update(!0)}getFilter(dt){return this.style.getFilter(dt)}setPaintProperty(dt,ot,lt,bt={}){return this.style.setPaintProperty(dt,ot,lt,bt),this._update(!0)}getPaintProperty(dt,ot){return this.style.getPaintProperty(dt,ot)}setLayoutProperty(dt,ot,lt,bt={}){return this.style.setLayoutProperty(dt,ot,lt,bt),this._update(!0)}getLayoutProperty(dt,ot){return this.style.getLayoutProperty(dt,ot)}setLight(dt,ot={}){return this._lazyInitEmptyStyle(),this.style.setLight(dt,ot),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(dt){return this._lazyInitEmptyStyle(),!dt&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(dt),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(dt){return this._lazyInitEmptyStyle(),this.style.setFog(dt),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(dt){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(j.LngLat.convert(dt),this.transform):0}setFeatureState(dt,ot){return this.style.setFeatureState(dt,ot),this._update()}removeFeatureState(dt,ot){return this.style.removeFeatureState(dt,ot),this._update()}getFeatureState(dt){return this.style.getFeatureState(dt)}_updateContainerDimensions(){if(!this._container)return;const dt=this._container.getBoundingClientRect().width||400,ot=this._container.getBoundingClientRect().height||300;let lt,bt,kt,Ft=this._container;for(;Ft&&(!bt||!kt);){const Yt=j.window.getComputedStyle(Ft).transform;Yt&&Yt!=="none"&&(lt=Yt.match(/matrix.*\((.+)\)/)[1].split(", "),lt[0]&&lt[0]!=="0"&&lt[0]!=="1"&&(bt=lt[0]),lt[3]&&lt[3]!=="0"&&lt[3]!=="1"&&(kt=lt[3])),Ft=Ft.parentElement}this._containerWidth=bt?Math.abs(dt/bt):dt,this._containerHeight=kt?Math.abs(ot/kt):ot}_detectMissingCSS(){j.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&j.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const dt=this._container;dt.classList.add("mapboxgl-map"),(this._missingCSSCanary=ft("div","mapboxgl-canary",dt)).style.visibility="hidden",this._detectMissingCSS();const ot=this._canvasContainer=ft("div","mapboxgl-canvas-container",dt);this._interactive&&ot.classList.add("mapboxgl-interactive"),this._canvas=ft("canvas","mapboxgl-canvas",ot),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const lt=this._controlContainer=ft("div","mapboxgl-control-container",dt),bt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(kt=>{bt[kt]=ft("div",`mapboxgl-ctrl-${kt}`,lt)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(dt,ot){const lt=j.exported.devicePixelRatio||1;this._canvas.width=lt*Math.ceil(dt),this._canvas.height=lt*Math.ceil(ot),this._canvas.style.width=`${dt}px`,this._canvas.style.height=`${ot}px`}_addMarker(dt){this._markers.push(dt)}_removeMarker(dt){const ot=this._markers.indexOf(dt);ot!==-1&&this._markers.splice(ot,1)}_addPopup(dt){this._popups.push(dt)}_removePopup(dt){const ot=this._popups.indexOf(dt);ot!==-1&&this._popups.splice(ot,1)}_setupPainter(){const dt=j.extend({},st.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ot=this._canvas.getContext("webgl",dt)||this._canvas.getContext("experimental-webgl",dt);ot?(j.storeAuthState(ot,!0),this.painter=new y_(ot,this.transform),this.on("data",lt=>{lt.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),j.exported$1.testSupport(ot)):this.fire(new j.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(dt){dt.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new j.Event("webglcontextlost",{originalEvent:dt}))}_contextRestored(dt){this._setupPainter(),this.resize(),this._update(),this.fire(new j.Event("webglcontextrestored",{originalEvent:dt}))}_onMapScroll(dt){if(dt.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(dt){return this.style?(this._styleDirty=this._styleDirty||dt,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(dt){return this._update(),this._renderTaskQueue.add(dt)}_cancelRenderFrame(dt){this._renderTaskQueue.remove(dt)}_requestDomTask(dt){!this.loaded()||this.loaded()&&!this.isMoving()?dt():this._domRenderTaskQueue.add(dt)}_render(dt){let ot;const lt=this.painter.context.extTimerQuery,bt=j.exported.now();if(this.listens("gpu-timing-frame")&&(ot=lt.createQueryEXT(),lt.beginQueryEXT(lt.TIME_ELAPSED_EXT,ot)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],j.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],j.window.performance.now())),this._renderTaskQueue.run(dt),this._domRenderTaskQueue.run(dt),this._removed)return;this._updateProjectionTransition();let kt=!1;const Ft=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const ln=this.transform.zoom,pn=this.transform.pitch,vn=j.exported.now();this.style.zoomHistory.update(ln,vn);const Tn=new j.EvaluationParameters(ln,{now:vn,fadeDuration:Ft,pitch:pn,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Dn=Tn.crossFadingFactor();Dn===1&&Dn===this._crossFadingFactor||(kt=!0,this._crossFadingFactor=Dn),this.style.update(Tn)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Yt=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Yt=this._updateAverageElevation(bt),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):Yt=this._updateAverageElevation(bt),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,Ft,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Ft,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new j.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new j.Event("load"))),this.style&&(this.style.hasTransitions()||kt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),ot){const ln=j.exported.now()-bt;lt.endQueryEXT(lt.TIME_ELAPSED_EXT,ot),setTimeout(()=>{const pn=lt.getQueryObjectEXT(ot,lt.QUERY_RESULT_EXT)/1e6;lt.deleteQueryEXT(ot),this.fire(new j.Event("gpu-timing-frame",{cpuTime:ln,gpuTime:pn})),j.window.performance.mark("frame-gpu",{startTime:bt,detail:{gpuTime:pn}})},50)}if(this.listens("gpu-timing-layer")){const ln=this.painter.collectGpuTimers();setTimeout(()=>{const pn=this.painter.queryGpuTimers(ln);this.fire(new j.Event("gpu-timing-layer",{layerTimes:pn}))},50)}if(this.listens("gpu-timing-deferred-render")){const ln=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const pn=this.painter.queryGpuTimeDeferredRender(ln);this.fire(new j.Event("gpu-timing-deferred-render",{gpuTime:pn}))},50)}const rn=this._sourcesDirty||this._styleDirty||this._placementDirty||Yt;if(rn||this._repaint)this.triggerRepaint();else{const ln=!this.isMoving()&&this.loaded();if(ln&&(Yt=this._updateAverageElevation(bt,!0)),Yt)this.triggerRepaint();else if(this._triggerFrame(!1),ln&&(this.fire(new j.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const pn=this._calculateSpeedIndex();this.fire(new j.Event("speedindexcompleted",{speedIndex:pn})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||rn||(this._fullyLoaded=!0,j.LivePerformanceUtils.mark(j.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&j.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.painter.transform.projection,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(dt){for(const ot of this._markers)dt&&!this.getRenderWorldCopies()&&(ot._lngLat=ot._lngLat.wrap()),ot._update();for(const ot of this._popups)!dt||this.getRenderWorldCopies()||ot._trackPointer||(ot._lngLat=ot._lngLat.wrap()),ot._update()}_updateAverageElevation(dt,ot=!1){const lt=bt=>(this.transform.averageElevation=bt,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&lt(0);if((ot||dt-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(dt)){const bt=this.transform.averageElevation;let kt=this.transform.sampleAverageElevation(),Ft=!1;this.transform.elevation&&(Ft=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(kt)?kt=0:this._averageElevationLastSampledAt=dt;const Yt=Math.abs(bt-kt);if(Yt>1){if(this._isInitialLoad||Ft)return this._averageElevation.jumpTo(kt),lt(kt);this._averageElevation.easeTo(kt,dt,300)}else if(Yt>1e-4)return this._averageElevation.jumpTo(kt),lt(kt)}return!!this._averageElevation.isEasing(dt)&&lt(this._averageElevation.getValue(dt))}_authenticate(){j.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,dt=>{if(dt&&(dt.message===j.AUTH_ERR_MSG||dt.status===401)){const ot=this.painter.context.gl;j.storeAuthState(ot,!1),this._logoControl instanceof Ny&&this._logoControl._updateLogo(),ot&&ot.clear(ot.DEPTH_BUFFER_BIT|ot.COLOR_BUFFER_BIT|ot.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new j.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),j.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const dt=this.painter.canvasCopy(),ot=this.painter.getCanvasCopiesAndTimestamps();ot.timeStamps.push(performance.now());const lt=this.painter.context.gl,bt=lt.createFramebuffer();function kt(Ft){lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,Ft,0);const Yt=new Uint8Array(lt.drawingBufferWidth*lt.drawingBufferHeight*4);return lt.readPixels(0,0,lt.drawingBufferWidth,lt.drawingBufferHeight,lt.RGBA,lt.UNSIGNED_BYTE,Yt),Yt}return lt.bindFramebuffer(lt.FRAMEBUFFER,bt),this._canvasPixelComparison(kt(dt),ot.canvasCopies.map(kt),ot.timeStamps)}_canvasPixelComparison(dt,ot,lt){let bt=lt[1]-lt[0];const kt=dt.length/4;for(let Ft=0;Ft<ot.length;Ft++){const Yt=ot[Ft];let rn=0;for(let ln=0;ln<Yt.length;ln+=4)Yt[ln]===dt[ln]&&Yt[ln+1]===dt[ln+1]&&Yt[ln+2]===dt[ln+2]&&Yt[ln+3]===dt[ln+3]&&(rn+=1);bt+=(lt[Ft+2]-lt[Ft+1])*(1-rn/kt)}return bt}remove(){this._hash&&this._hash.remove();for(const ot of this._controls)ot.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),j.window!==void 0&&(j.window.removeEventListener("resize",this._onWindowResize,!1),j.window.removeEventListener("orientationchange",this._onWindowResize,!1),j.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),j.window.removeEventListener("online",this._onWindowOnline,!1),j.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const dt=this.painter.context.gl.getExtension("WEBGL_lose_context");dt&&dt.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),Uy(this._canvasContainer),Uy(this._controlContainer),Uy(this._missingCSSCanary),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),j.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new j.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(dt){this._renderNextFrame=this._renderNextFrame||dt,this.style&&!this._frame&&(this._frame=j.exported.frame(ot=>{const lt=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,lt&&this._render(ot)}))}_preloadTiles(dt){const ot=this.style?Object.values(this.style._sourceCaches):[];return j.asyncAll(ot,(lt,bt)=>lt._preloadTiles(dt,bt),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(dt){this._trackResize&&this.resize({originalEvent:dt})._update()}_onVisibilityChange(){j.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(dt){this._showTileBoundaries!==dt&&(this._showTileBoundaries=dt,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(dt){this._showTerrainWireframe!==dt&&(this._showTerrainWireframe=dt,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(dt){this._speedIndexTiming!==dt&&(this._speedIndexTiming=dt,this._update())}get showPadding(){return!!this._showPadding}set showPadding(dt){this._showPadding!==dt&&(this._showPadding=dt,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(dt){this._showCollisionBoxes!==dt&&(this._showCollisionBoxes=dt,dt?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(dt){this._showOverdrawInspector!==dt&&(this._showOverdrawInspector=dt,this._update())}get repaint(){return!!this._repaint}set repaint(dt){this._repaint!==dt&&(this._repaint=dt,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(dt){this._vertices=dt,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(dt){this._showTileAABBs!==dt&&(this._showTileAABBs=dt,dt&&this._update())}_setCacheLimits(dt,ot){j.setCacheLimits(dt,ot)}get version(){return j.version}},NavigationControl:class{constructor(dt){this.options=j.extend({},Rv,dt),this._container=ft("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",ot=>ot.preventDefault()),this.options.showZoom&&(j.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",ot=>{this._map&&this._map.zoomIn({},{originalEvent:ot})}),ft("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",ot=>{this._map&&this._map.zoomOut({},{originalEvent:ot})}),ft("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(j.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",ot=>{const lt=this._map;lt&&(this.options.visualizePitch?lt.resetNorthPitch({},{originalEvent:ot}):lt.resetNorth({},{originalEvent:ot}))}),this._compassIcon=ft("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const dt=this._map;if(!dt)return;const ot=dt.getZoom(),lt=ot===dt.getMaxZoom(),bt=ot===dt.getMinZoom();this._zoomInButton.disabled=lt,this._zoomOutButton.disabled=bt,this._zoomInButton.setAttribute("aria-disabled",lt.toString()),this._zoomOutButton.setAttribute("aria-disabled",bt.toString())}_rotateCompassArrow(){const dt=this._map;if(!dt)return;const ot=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(dt.transform.pitch*(Math.PI/180)),.5)}) rotateX(${dt.transform.pitch}deg) rotateZ(${dt.transform.angle*(180/Math.PI)}deg)`:`rotate(${dt.transform.angle*(180/Math.PI)}deg)`;dt._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=ot)})}onAdd(dt){return this._map=dt,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),dt.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&dt.on("pitch",this._rotateCompassArrow),dt.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new x0(dt,this._compass,this.options.visualizePitch)),this._container}onRemove(){const dt=this._map;dt&&(this._container.remove(),this.options.showZoom&&dt.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&dt.off("pitch",this._rotateCompassArrow),dt.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(dt,ot){const lt=ft("button",dt,this._container);return lt.type="button",lt.addEventListener("click",ot),lt}_setButtonTitle(dt,ot){if(!this._map)return;const lt=this._map._getUIString(`NavigationControl.${ot}`);dt.setAttribute("aria-label",lt),dt.firstElementChild&&dt.firstElementChild.setAttribute("title",lt)}},GeolocateControl:class extends j.Evented{constructor(dt){super(),this.options=j.extend({geolocation:j.window.navigator.geolocation},S0,dt),j.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=wv(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(dt){return this._map=dt,this._container=ft("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(dt){const ot=(lt=!!this.options.geolocation)=>{this._supportsGeolocation=lt,dt(lt)};this._supportsGeolocation!==void 0?dt(this._supportsGeolocation):j.window.navigator.permissions!==void 0?j.window.navigator.permissions.query({name:"geolocation"}).then(lt=>ot(lt.state!=="denied")).catch(()=>ot()):ot()}_isOutOfMapMaxBounds(dt){const ot=this._map.getMaxBounds(),lt=dt.coords;return!!ot&&(lt.longitude<ot.getWest()||lt.longitude>ot.getEast()||lt.latitude<ot.getSouth()||lt.latitude>ot.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(dt){if(this._map){if(this._isOutOfMapMaxBounds(dt))return this._setErrorState(),this.fire(new j.Event("outofmaxbounds",dt)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=dt,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(dt),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(dt),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("geolocate",dt)),this._finish()}}_updateCamera(dt){const ot=new j.LngLat(dt.coords.longitude,dt.coords.latitude),lt=dt.coords.accuracy,bt=this._map.getBearing(),kt=j.extend({bearing:bt},this.options.fitBoundsOptions);this._map.fitBounds(ot.toBounds(lt),kt,{geolocateSource:!0})}_updateMarker(dt){if(dt){const ot=new j.LngLat(dt.coords.longitude,dt.coords.latitude);this._accuracyCircleMarker.setLngLat(ot).addTo(this._map),this._userLocationDotMarker.setLngLat(ot).addTo(this._map),this._accuracy=dt.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const dt=this._map.transform,ot=j.mercatorZfromAltitude(1,dt._center.lat)*dt.worldSize,lt=Math.ceil(2*this._accuracy*ot);this._circleElement.style.width=`${lt}px`,this._circleElement.style.height=`${lt}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(dt){if(this._map){if(this.options.trackUserLocation)if(dt.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const ot=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(dt.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("error",dt)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(dt){if(this._container.addEventListener("contextmenu",ot=>ot.preventDefault()),this._geolocateButton=ft("button","mapboxgl-ctrl-geolocate",this._container),ft("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",dt===!1){j.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const ot=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot)}else{const ot=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ft("div","mapboxgl-user-location"),this._dotElement.appendChild(ft("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ft("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new T_({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ft("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new T_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",ot=>{ot.geolocateSource||this._watchState!=="ACTIVE_LOCK"||ot.originalEvent&&ot.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new j.Event("trackuserlocationend")))})}_onDeviceOrientation(dt){this._userLocationDotMarker&&(dt.webkitCompassHeading?this._heading=dt.webkitCompassHeading:dt.absolute===!0&&(this._heading=-1*dt.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return j.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new j.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new j.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new j.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let dt;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(dt={maximumAge:6e5,timeout:0},this._noTimeout=!0):(dt=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,dt),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const dt=()=>{j.window.addEventListener("ondeviceorientationabsolute"in j.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};j.window.DeviceMotionEvent!==void 0&&typeof j.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(ot=>{ot==="granted"&&dt()}).catch(console.error):dt()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),j.window.removeEventListener("deviceorientation",this._onDeviceOrientation),j.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ev,ScaleControl:class{constructor(dt){this.options=j.extend({},zy,dt),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=ly.bind(this)),j.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const dt=this.options.maxWidth||100,ot=this._map,lt=ot._containerHeight/2,bt=ot._containerWidth/2-dt/2,kt=ot.unproject([bt,lt]),Ft=ot.unproject([bt+dt,lt]),Yt=kt.distanceTo(Ft);if(this.options.unit==="imperial"){const rn=3.2808*Yt;rn>5280?this._setScale(dt,rn/5280,"mile"):this._setScale(dt,rn,"foot")}else this.options.unit==="nautical"?this._setScale(dt,Yt/1852,"nautical-mile"):Yt>=1e3?this._setScale(dt,Yt/1e3,"kilometer"):this._setScale(dt,Yt,"meter")}_setScale(dt,ot,lt){const bt=Bm(ot),kt=bt/ot;this._map._requestDomTask(()=>{this._container.style.width=dt*kt+"px",this._container.innerHTML=lt!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:lt}).format(bt):`${bt}&nbsp;nm`})}onAdd(dt){return this._map=dt,this._language=dt.getLanguage(),this._container=ft("div","mapboxgl-ctrl mapboxgl-ctrl-scale",dt.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(dt){this._language=dt,this._update()}setUnit(dt){this.options.unit=dt,this._update()}},FullscreenControl:class{constructor(dt){this._fullscreen=!1,dt&&dt.container&&(dt.container instanceof j.window.HTMLElement?this._container=dt.container:j.warnOnce("Full screen control 'container' must be a DOM element.")),j.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in j.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in j.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(dt){return this._map=dt,this._container||(this._container=this._map.getContainer()),this._controlContainer=ft("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",j.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,j.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!j.window.document.fullscreenEnabled&&!j.window.document.webkitFullscreenEnabled)}_setupUI(){const dt=this._fullscreenButton=ft("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ft("span","mapboxgl-ctrl-icon",dt).setAttribute("aria-hidden","true"),dt.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),j.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const dt=this._getTitle();this._fullscreenButton.setAttribute("aria-label",dt),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",dt)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(j.window.document.fullscreenElement||j.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?j.window.document.exitFullscreen?j.window.document.exitFullscreen():j.window.document.webkitCancelFullScreen&&j.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends j.Evented{constructor(dt){super(),this.options=j.extend(Object.create(qu),dt),j.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(dt&&dt.className?dt.className.trim().split(/\s+/):[])}addTo(dt){return this._map&&this.remove(),this._map=dt,this.options.closeOnClick&&dt.on("preclick",this._onClose),this.options.closeOnMove&&dt.on("move",this._onClose),dt.on("remove",this.remove),this._update(),dt._addPopup(this),this._focusFirstElement(),this._trackPointer?(dt.on("mousemove",this._onMouseEvent),dt.on("mouseup",this._onMouseEvent),dt._canvasContainer.classList.add("mapboxgl-track-pointer")):dt.on("move",this._update),this.fire(new j.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const dt=this._map;return dt&&(dt.off("move",this._update),dt.off("move",this._onClose),dt.off("preclick",this._onClose),dt.off("click",this._onClose),dt.off("remove",this.remove),dt.off("mousemove",this._onMouseEvent),dt.off("mouseup",this._onMouseEvent),dt.off("drag",this._onMouseEvent),dt._canvasContainer&&dt._canvasContainer.classList.remove("mapboxgl-track-pointer"),dt._removePopup(this),this._map=void 0),this.fire(new j.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(dt){this._lngLat=j.LngLat.convert(dt),this._pos=null,this._trackPointer=!1,this._update();const ot=this._map;return ot&&(ot.on("move",this._update),ot.off("mousemove",this._onMouseEvent),ot._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const dt=this._map;return dt&&(dt.off("move",this._update),dt.on("mousemove",this._onMouseEvent),dt.on("drag",this._onMouseEvent),dt._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(dt){return this.setDOMContent(j.window.document.createTextNode(dt))}setHTML(dt){const ot=j.window.document.createDocumentFragment(),lt=j.window.document.createElement("body");let bt;for(lt.innerHTML=dt;bt=lt.firstChild,bt;)ot.appendChild(bt);return this.setDOMContent(ot)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(dt){return this.options.maxWidth=dt,this._update(),this}setDOMContent(dt){let ot=this._content;if(ot)for(;ot.hasChildNodes();)ot.firstChild&&ot.removeChild(ot.firstChild);else ot=this._content=ft("div","mapboxgl-popup-content",this._container||void 0);if(ot.appendChild(dt),this.options.closeButton){const lt=this._closeButton=ft("button","mapboxgl-popup-close-button",ot);lt.type="button",lt.setAttribute("aria-label","Close popup"),lt.setAttribute("aria-hidden","true"),lt.innerHTML="&#215;",lt.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(dt){return this._classList.add(dt),this._updateClassList(),this}removeClassName(dt){return this._classList.delete(dt),this._updateClassList(),this}setOffset(dt){return this.options.offset=dt,this._update(),this}toggleClassName(dt){let ot;return this._classList.delete(dt)?ot=!1:(this._classList.add(dt),ot=!0),this._updateClassList(),ot}_onMouseEvent(dt){this._update(dt.point)}_getAnchor(dt){if(this.options.anchor)return this.options.anchor;const ot=this._map,lt=this._container,bt=this._pos;if(!ot||!lt||!bt)return"bottom";const kt=lt.offsetWidth,Ft=lt.offsetHeight,Yt=bt.x<kt/2,rn=bt.x>ot.transform.width-kt/2;if(bt.y+dt<Ft)return Yt?"top-left":rn?"top-right":"top";if(bt.y>ot.transform.height-Ft){if(Yt)return"bottom-left";if(rn)return"bottom-right"}return Yt?"left":rn?"right":"bottom"}_updateClassList(){const dt=this._container;if(!dt)return;const ot=[...this._classList];ot.push("mapboxgl-popup"),this._anchor&&ot.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&ot.push("mapboxgl-popup-track-pointer"),dt.className=ot.join(" ")}_update(dt){const ot=this._map,lt=this._content;if(!ot||!this._lngLat&&!this._trackPointer||!lt)return;let bt=this._container;if(bt||(bt=this._container=ft("div","mapboxgl-popup",ot.getContainer()),this._tip=ft("div","mapboxgl-popup-tip",bt),bt.appendChild(lt)),this.options.maxWidth&&bt.style.maxWidth!==this.options.maxWidth&&(bt.style.maxWidth=this.options.maxWidth),ot.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=cp(this._lngLat,this._pos,ot.transform)),!this._trackPointer||dt){const kt=this._pos=this._trackPointer&&dt?dt:ot.project(this._lngLat),Ft=Tv(this.options.offset),Yt=this._anchor=this._getAnchor(Ft.y),rn=Tv(this.options.offset,Yt),ln=kt.add(rn).round();ot._requestDomTask(()=>{this._container&&Yt&&(this._container.style.transform=`${E_[Yt]} translate(${ln.x}px,${ln.y}px)`)})}if(!this._marker&&ot._showingGlobe()){const kt=j.isLngLatBehindGlobe(ot.transform,this._lngLat)?0:1;this._setOpacity(kt)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const dt=this._container.querySelector(v0);dt&&dt.focus()}_onClose(){this.remove()}_setOpacity(dt){this._container&&(this._container.style.opacity=`${dt}`),this._content&&(this._content.style.pointerEvents=dt?"auto":"none")}},Marker:T_,Style:op,LngLat:j.LngLat,LngLatBounds:j.LngLatBounds,Point:j.pointGeometry,MercatorCoordinate:j.MercatorCoordinate,FreeCameraOptions:iy,Evented:j.Evented,config:j.config,prewarm:function(){zo().acquire(ko)},clearPrewarmedResources:function(){const dt=Lo;dt&&(dt.isPreloaded()&&dt.numActive()===1?(dt.release(ko),Lo=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return j.config.ACCESS_TOKEN},set accessToken(dt){j.config.ACCESS_TOKEN=dt},get baseApiUrl(){return j.config.API_URL},set baseApiUrl(dt){j.config.API_URL=dt},get workerCount(){return Do.workerCount},set workerCount(dt){Do.workerCount=dt},get maxParallelImageRequests(){return j.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(dt){j.config.MAX_PARALLEL_IMAGE_REQUESTS=dt},clearStorage(dt){j.clearTileCache(dt)},workerUrl:"",workerClass:null,setNow:j.exported.setNow,restoreNow:j.exported.restoreNow};return Vy});var tt=$;return tt})})(mapboxGl);const mapboxgl=mapboxGlExports,app="_app_15mo9_1",styles$1={app,"map-container":"_map-container_15mo9_9"};var __defProp$1=Object.defineProperty,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(i,o,s)=>o in i?__defProp$1(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s,__spreadValues$1=(i,o)=>{for(var s in o||(o={}))__hasOwnProp$1.call(o,s)&&__defNormalProp$1(i,s,o[s]);if(__getOwnPropSymbols$1)for(var s of __getOwnPropSymbols$1(o))__propIsEnum$1.call(o,s)&&__defNormalProp$1(i,s,o[s]);return i},__publicField$1=(i,o,s)=>(__defNormalProp$1(i,typeof o!="symbol"?o+"":o,s),s),dist$1={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(module,exports){(function(i,o){module.exports=o()})(window,function(){return function(i){function o(st){for(var ht,vt,ft=st[0],pt=st[1],ct=0,yt=[];ct<ft.length;ct++)vt=ft[ct],Object.prototype.hasOwnProperty.call(_,vt)&&_[vt]&&yt.push(_[vt][0]),_[vt]=0;for(ht in pt)Object.prototype.hasOwnProperty.call(pt,ht)&&(i[ht]=pt[ht]);for(it&&it(st);yt.length;)yt.shift()()}var s={},_={0:0};function $(st){if(s[st])return s[st].exports;var ht=s[st]={i:st,l:!1,exports:{}};return i[st].call(ht.exports,ht,ht.exports,$),ht.l=!0,ht.exports}$.e=function(){return Promise.resolve()},$.m=i,$.c=s,$.d=function(st,ht,vt){$.o(st,ht)||Object.defineProperty(st,ht,{enumerable:!0,get:vt})},$.r=function(st){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(st,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(st,"__esModule",{value:!0})},$.t=function(st,ht){if(1&ht&&(st=$(st)),8&ht||4&ht&&typeof st=="object"&&st&&st.__esModule)return st;var vt=Object.create(null);if($.r(vt),Object.defineProperty(vt,"default",{enumerable:!0,value:st}),2&ht&&typeof st!="string")for(var ft in st)$.d(vt,ft,function(pt){return st[pt]}.bind(null,ft));return vt},$.n=function(st){var ht=st&&st.__esModule?function(){return st.default}:function(){return st};return $.d(ht,"a",ht),ht},$.o=function(st,ht){return Object.prototype.hasOwnProperty.call(st,ht)},$.p="",$.oe=function(st){throw console.error(st),st};var et=window.webpackJsonpFormantRealtimeSDK=window.webpackJsonpFormantRealtimeSDK||[],tt=et.push.bind(et);et.push=o,et=et.slice();for(var j=0;j<et.length;j++)o(et[j]);var it=tt;return $($.s=228)}([function(i,o,s){s.d(o,"a",function(){return en});var _=s(14),$=s.n(_),et=s(18),tt=s(56),j=s(19);const it=Math.pow(2,20),st=it;function ht(jt,Qt){if(Qt.length<jt)throw new TypeError(jt+" argument"+(jt>1?"s":"")+" required, but only "+Qt.length+" present")}function vt(jt){if(jt===null||jt===!0||jt===!1)return NaN;var Qt=Number(jt);return isNaN(Qt)?Qt:Qt<0?Math.ceil(Qt):Math.floor(Qt)}var ft={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},pt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ct=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,yt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Et(jt){var Qt,gn={},hn=jt.split(ft.dateTimeDelimiter);if(hn.length>2)return gn;if(/:/.test(hn[0])?Qt=hn[0]:(gn.date=hn[0],Qt=hn[1],ft.timeZoneDelimiter.test(gn.date)&&(gn.date=jt.split(ft.timeZoneDelimiter)[0],Qt=jt.substr(gn.date.length,jt.length))),Qt){var An=ft.timezone.exec(Qt);An?(gn.time=Qt.replace(An[1],""),gn.timezone=An[1]):gn.time=Qt}return gn}function Ot(jt,Qt){var gn=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+Qt)+"})|(\\d{2}|[+-]\\d{"+(2+Qt)+"})$)"),hn=jt.match(gn);if(!hn)return{year:NaN,restDateString:""};var An=hn[1]?parseInt(hn[1]):null,Mn=hn[2]?parseInt(hn[2]):null;return{year:Mn===null?An:100*Mn,restDateString:jt.slice((hn[1]||hn[2]).length)}}function Lt(jt,Qt){if(Qt===null)return new Date(NaN);var gn=jt.match(pt);if(!gn)return new Date(NaN);var hn=!!gn[4],An=Tt(gn[1]),Mn=Tt(gn[2])-1,Yn=Tt(gn[3]),Nr=Tt(gn[4]),ro=Tt(gn[5])-1;if(hn)return function(zr,In,kn){return In>=1&&In<=53&&kn>=0&&kn<=6}(0,Nr,ro)?function(zr,In,kn){var Kn=new Date(0);Kn.setUTCFullYear(zr,0,4);var vr=Kn.getUTCDay()||7,yr=7*(In-1)+kn+1-vr;return Kn.setUTCDate(Kn.getUTCDate()+yr),Kn}(Qt,Nr,ro):new Date(NaN);var to=new Date(0);return function(zr,In,kn){return In>=0&&In<=11&&kn>=1&&kn<=(nn[In]||(sn(zr)?29:28))}(Qt,Mn,Yn)&&function(zr,In){return In>=1&&In<=(sn(zr)?366:365)}(Qt,An)?(to.setUTCFullYear(Qt,Mn,Math.max(An,Yn)),to):new Date(NaN)}function Tt(jt){return jt?parseInt(jt):1}function It(jt){var Qt=jt.match(ct);if(!Qt)return NaN;var gn=mt(Qt[1]),hn=mt(Qt[2]),An=mt(Qt[3]);return function(Mn,Yn,Nr){return Mn===24?Yn===0&&Nr===0:Nr>=0&&Nr<60&&Yn>=0&&Yn<60&&Mn>=0&&Mn<25}(gn,hn,An)?36e5*gn+6e4*hn+1e3*An:NaN}function mt(jt){return jt&&parseFloat(jt.replace(",","."))||0}function Bt(jt){if(jt==="Z")return 0;var Qt=jt.match(yt);if(!Qt)return 0;var gn=Qt[1]==="+"?-1:1,hn=parseInt(Qt[2]),An=Qt[3]&&parseInt(Qt[3])||0;return function(Mn,Yn){return Yn>=0&&Yn<=59}(0,An)?gn*(36e5*hn+6e4*An):NaN}var nn=[31,null,31,30,31,30,31,31,30,31,30,31];function sn(jt){return jt%400==0||jt%4==0&&jt%100!=0}function xt(jt){return ht(1,arguments),jt instanceof Date||typeof jt=="object"&&Object.prototype.toString.call(jt)==="[object Date]"}function St(jt){ht(1,arguments);var Qt=Object.prototype.toString.call(jt);return jt instanceof Date||typeof jt=="object"&&Qt==="[object Date]"?new Date(jt.getTime()):typeof jt=="number"||Qt==="[object Number]"?new Date(jt):(typeof jt!="string"&&Qt!=="[object String]"||typeof console>"u"||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Nt(jt){const Qt=function(gn,hn){var An;ht(1,arguments);var Mn=vt((An=hn==null?void 0:hn.additionalDigits)!==null&&An!==void 0?An:2);if(Mn!==2&&Mn!==1&&Mn!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(typeof gn!="string"&&Object.prototype.toString.call(gn)!=="[object String]")return new Date(NaN);var Yn,Nr=Et(gn);if(Nr.date){var ro=Ot(Nr.date,Mn);Yn=Lt(ro.restDateString,ro.year)}if(!Yn||isNaN(Yn.getTime()))return new Date(NaN);var to,zr=Yn.getTime(),In=0;if(Nr.time&&(In=It(Nr.time),isNaN(In)))return new Date(NaN);if(!Nr.timezone){var kn=new Date(zr+In),Kn=new Date(0);return Kn.setFullYear(kn.getUTCFullYear(),kn.getUTCMonth(),kn.getUTCDate()),Kn.setHours(kn.getUTCHours(),kn.getUTCMinutes(),kn.getUTCSeconds(),kn.getUTCMilliseconds()),Kn}return to=Bt(Nr.timezone),isNaN(to)?new Date(NaN):new Date(zr+In+to)}(jt);if(!function(gn){if(ht(1,arguments),!xt(gn)&&typeof gn!="number")return!1;var hn=St(gn);return!isNaN(Number(hn))}(Qt))throw new Error(`Invalid ISO 8601 date string (${jt})`);return Qt}var Ct=s(4),Vt=s(34);function Kt(jt){return $()(jt,{cycles:!0})}var Gt=function(jt,Qt){var gn={};for(var hn in jt)Object.prototype.hasOwnProperty.call(jt,hn)&&Qt.indexOf(hn)<0&&(gn[hn]=jt[hn]);if(jt!=null&&typeof Object.getOwnPropertySymbols=="function"){var An=0;for(hn=Object.getOwnPropertySymbols(jt);An<hn.length;An++)Qt.indexOf(hn[An])<0&&Object.prototype.propertyIsEnumerable.call(jt,hn[An])&&(gn[hn[An]]=jt[hn[An]])}return gn};function Ut(jt,Qt={}){const gn=Nr=>Qt.redacted!==!1?Object(Vt.a)(Nr):Nr;if(!jt.stack)return{message:Kt(gn(jt))};const{name:hn,message:An,stack:Mn}=jt,Yn=Gt(jt,["name","message","stack"]);return{name:hn,message:An!==void 0?An:Kt(gn(jt)),stack:Mn,meta:Yn&&Object.keys(Yn).length===0?void 0:gn(Yn)}}function Ht(jt,Qt={}){const{message:gn,stack:hn,meta:An}=Ut(jt,Qt);return`${hn||gn||""}${An&&Object.keys(An).length>0?` -- ${Kt(An)}`:""}`}var qt=s(39),Pt=s(103),wt=s.n(Pt),$t=function(jt,Qt,gn,hn){return new(gn||(gn=Promise))(function(An,Mn){function Yn(to){try{ro(hn.next(to))}catch(zr){Mn(zr)}}function Nr(to){try{ro(hn.throw(to))}catch(zr){Mn(zr)}}function ro(to){var zr;to.done?An(to.value):(zr=to.value,zr instanceof gn?zr:new gn(function(In){In(zr)})).then(Yn,Nr)}ro((hn=hn.apply(jt,Qt||[])).next())})},Xt=function(jt,Qt){var gn={};for(var hn in jt)Object.prototype.hasOwnProperty.call(jt,hn)&&Qt.indexOf(hn)<0&&(gn[hn]=jt[hn]);if(jt!=null&&typeof Object.getOwnPropertySymbols=="function"){var An=0;for(hn=Object.getOwnPropertySymbols(jt);An<hn.length;An++)Qt.indexOf(hn[An])<0&&Object.prototype.propertyIsEnumerable.call(jt,hn[An])&&(gn[hn[An]]=jt[hn[An]])}return gn};class un extends wt.a{constructor(Qt,gn){super(),this.endpoint=Qt,this.metadata=gn,this.logClient=this.getLogClient()}getLogClient(){return $t(this,void 0,void 0,function*(){const{LogClient:Qt}=yield Promise.resolve().then(s.bind(null,231));return new Qt(this.endpoint)})}log(Qt,gn){return $t(this,void 0,void 0,function*(){const{level:hn,message:An,error:Mn}=Qt,Yn=Xt(Qt,["level","message","error"]);this.emit("logged");try{yield(yield this.logClient).log([{timestamp:new Date().toISOString(),level:hn,message:`${An}`.substring(0,1e3),error:Mn!==void 0?Ut(Mn):void 0,meta:Object.assign(Object.assign({},Yn),this.metadata)}])}catch(Nr){console.error(`Failed to log to log-api: ${Ht(Nr)}`)}gn()})}}var dn=function(jt,Qt){var gn={};for(var hn in jt)Object.prototype.hasOwnProperty.call(jt,hn)&&Qt.indexOf(hn)<0&&(gn[hn]=jt[hn]);if(jt!=null&&typeof Object.getOwnPropertySymbols=="function"){var An=0;for(hn=Object.getOwnPropertySymbols(jt);An<hn.length;An++)Qt.indexOf(hn[An])<0&&Object.prototype.propertyIsEnumerable.call(jt,hn[An])&&(gn[hn[An]]=jt[hn[An]])}return gn};const mn={app:Ct.a,namespace:Ct.i,buildTag:Ct.b,instanceId:qt.a},an=Ct.e?j.format.printf(jt=>{var{timestamp:Qt,level:gn,message:hn,error:An}=jt,Mn=dn(jt,["timestamp","level","message","error"]);const Yn=Object.assign(Object.assign({timestamp:Qt?Nt(Qt).getTime():new Date().getTime(),level:gn.toUpperCase(),message:hn},An?{error:Ut(An)}:{}),{meta:Object.assign(Object.assign({},mn),Mn)});return $()(Yn,{cycles:!0})}):j.format.printf(jt=>{var{timestamp:Qt,level:gn,message:hn,error:An}=jt,Mn=dn(jt,["timestamp","level","message","error"]);let Yn=`${Qt||new Date().toISOString()} ${gn.toUpperCase()}: ${hn} `;return Object.keys(Mn).length>0&&(Yn+=$()(Mn,{cycles:!0})),An&&(Yn+=`
${Ht(An)}`),Yn}),en=Object(j.createLogger)({level:Ct.f});if(Ct.g&&en.add(new j.transports.Console({format:an,level:"debug"})),Ct.d&&en.add(new un(Ct.d,mn)),Ct.h){const jt=tt.resolve(et.tmpdir(),`silly-${Ct.a}.log`);en.debug("Logging silly logs to file",{filename:jt}),en.add(new j.transports.File({filename:jt,maxsize:1*st,maxFiles:10,format:j.format.combine((Mt="silly",Object(j.format)(Qt=>Qt.level===Mt&&Qt)()),an),level:"silly"}))}var Mt},function(i,o,s){s.d(o,"a",function(){return _});const _={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}},function(i,o){var s,_,$=i.exports={};function et(){throw new Error("setTimeout has not been defined")}function tt(){throw new Error("clearTimeout has not been defined")}function j(Et){if(s===setTimeout)return setTimeout(Et,0);if((s===et||!s)&&setTimeout)return s=setTimeout,setTimeout(Et,0);try{return s(Et,0)}catch{try{return s.call(null,Et,0)}catch{return s.call(this,Et,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:et}catch{s=et}try{_=typeof clearTimeout=="function"?clearTimeout:tt}catch{_=tt}})();var it,st=[],ht=!1,vt=-1;function ft(){ht&&it&&(ht=!1,it.length?st=it.concat(st):vt=-1,st.length&&pt())}function pt(){if(!ht){var Et=j(ft);ht=!0;for(var Ot=st.length;Ot;){for(it=st,st=[];++vt<Ot;)it&&it[vt].run();vt=-1,Ot=st.length}it=null,ht=!1,function(Lt){if(_===clearTimeout)return clearTimeout(Lt);if((_===tt||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(Lt);try{_(Lt)}catch{try{return _.call(null,Lt)}catch{return _.call(this,Lt)}}}(Et)}}function ct(Et,Ot){this.fun=Et,this.array=Ot}function yt(){}$.nextTick=function(Et){var Ot=new Array(arguments.length-1);if(arguments.length>1)for(var Lt=1;Lt<arguments.length;Lt++)Ot[Lt-1]=arguments[Lt];st.push(new ct(Et,Ot)),st.length!==1||ht||j(pt)},ct.prototype.run=function(){this.fun.apply(null,this.array)},$.title="browser",$.browser=!0,$.env={},$.argv=[],$.version="",$.versions={},$.on=yt,$.addListener=yt,$.once=yt,$.off=yt,$.removeListener=yt,$.removeAllListeners=yt,$.emit=yt,$.prependListener=yt,$.prependOnceListener=yt,$.listeners=function(Et){return[]},$.binding=function(Et){throw new Error("process.binding is not supported")},$.cwd=function(){return"/"},$.chdir=function(Et){throw new Error("process.chdir is not supported")},$.umask=function(){return 0}},function(i,o,s){Object.defineProperty(o,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(o,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(o,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(o,"configs",{value:s(118)})},function(i,o,s){(function(_){s.d(o,"a",function(){return tt}),s.d(o,"i",function(){return j}),s.d(o,"j",function(){return it}),s.d(o,"b",function(){return st}),s.d(o,"f",function(){return ht}),s.d(o,"e",function(){return vt}),s.d(o,"g",function(){return ft}),s.d(o,"d",function(){return pt}),s.d(o,"c",function(){return ct}),s.d(o,"h",function(){return yt});var $=s(102);const et=$.from({ENVIRONMENT:_.env.ENV,API_ENDPOINT:_.env.API_ENDPOINT,APP:"realtime-sdk",APP_PATH:_.env.APP_PATH,BUILD_TAG:_.env.BUILD_TAG,ENABLE_SELF_SERVE:_.env.ENABLE_SELF_SERVE,ENABLE_SENTRY:_.env.ENABLE_SENTRY,ENABLE_SENTRY_PROFILING:_.env.ENABLE_SENTRY_PROFILING,GIT_COMMIT:_.env.GIT_COMMIT,JEST_WORKER_ID:_.env.JEST_WORKER_ID,LOG_API_ENDPOINT:_.env.LOG_API_ENDPOINT,LOG_JSON:"false",LOG_LEVEL:_.env.LOG_LEVEL,LOG_TO_CONSOLE:_.env.LOG_TO_CONSOLE,LOG_TO_FILE:_.env.LOG_TO_FILE,NAMESPACE:"production",SENTRY_DSN:_.env.SENTRY_DSN,SHEET_EXPORT_MAX_ROW_COUNT:_.env.SHEET_EXPORT_MAX_ROW_COUNT,STABLE_AGENT_VERSION:_.env.STABLE_AGENT_VERSION,VERSION:_.env.VERSION}),tt=(et.get("ENVIRONMENT").default("").asString(),et.get("APP").default("").asString()),j=(et.get("APP_PATH").default("").asString(),et.get("API_ENDPOINT").default("").asString(),et.get("NAMESPACE").default("").asString()),it=et.get("VERSION").default("").asString(),st=et.get("BUILD_TAG").default("").asString(),ht=(et.get("GIT_COMMIT").default("").asString(),et.get("ENABLE_SENTRY").default("false").asBool(),et.get("ENABLE_SENTRY_PROFILING").default("false").asBool(),et.get("SENTRY_DSN").default("").asString(),et.get("LOG_LEVEL").default("debug").asString()),vt=et.get("LOG_JSON").default("true").asBool(),ft=et.get("LOG_TO_CONSOLE").default("true").asBool(),pt=(et.get("STABLE_AGENT_VERSION").default("").asString(),et.get("LOG_API_ENDPOINT").asString()),ct=et.get("JEST_WORKER_ID").asString(),yt=(et.get("SHEET_EXPORT_MAX_ROW_COUNT").default("10000").asIntPositive(),et.get("LOG_TO_FILE").default("false").asBoolStrict());et.get("ENABLE_SELF_SERVE").default("true").asBoolStrict()}).call(this,s(2))},function(i,o,s){(function(_){var $=s(126),et=s(127),tt=s(42);function j(){return st.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function it(Mt,jt){if(j()<jt)throw new RangeError("Invalid typed array length");return st.TYPED_ARRAY_SUPPORT?(Mt=new Uint8Array(jt)).__proto__=st.prototype:(Mt===null&&(Mt=new st(jt)),Mt.length=jt),Mt}function st(Mt,jt,Qt){if(!(st.TYPED_ARRAY_SUPPORT||this instanceof st))return new st(Mt,jt,Qt);if(typeof Mt=="number"){if(typeof jt=="string")throw new Error("If encoding is specified then the first argument must be a string");return ft(this,Mt)}return ht(this,Mt,jt,Qt)}function ht(Mt,jt,Qt,gn){if(typeof jt=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&jt instanceof ArrayBuffer?function(hn,An,Mn,Yn){if(An.byteLength,Mn<0||An.byteLength<Mn)throw new RangeError("'offset' is out of bounds");if(An.byteLength<Mn+(Yn||0))throw new RangeError("'length' is out of bounds");return An=Mn===void 0&&Yn===void 0?new Uint8Array(An):Yn===void 0?new Uint8Array(An,Mn):new Uint8Array(An,Mn,Yn),st.TYPED_ARRAY_SUPPORT?(hn=An).__proto__=st.prototype:hn=pt(hn,An),hn}(Mt,jt,Qt,gn):typeof jt=="string"?function(hn,An,Mn){if(typeof Mn=="string"&&Mn!==""||(Mn="utf8"),!st.isEncoding(Mn))throw new TypeError('"encoding" must be a valid string encoding');var Yn=0|yt(An,Mn),Nr=(hn=it(hn,Yn)).write(An,Mn);return Nr!==Yn&&(hn=hn.slice(0,Nr)),hn}(Mt,jt,Qt):function(hn,An){if(st.isBuffer(An)){var Mn=0|ct(An.length);return(hn=it(hn,Mn)).length===0||An.copy(hn,0,0,Mn),hn}if(An){if(typeof ArrayBuffer<"u"&&An.buffer instanceof ArrayBuffer||"length"in An)return typeof An.length!="number"||(Yn=An.length)!=Yn?it(hn,0):pt(hn,An);if(An.type==="Buffer"&&tt(An.data))return pt(hn,An.data)}var Yn;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Mt,jt)}function vt(Mt){if(typeof Mt!="number")throw new TypeError('"size" argument must be a number');if(Mt<0)throw new RangeError('"size" argument must not be negative')}function ft(Mt,jt){if(vt(jt),Mt=it(Mt,jt<0?0:0|ct(jt)),!st.TYPED_ARRAY_SUPPORT)for(var Qt=0;Qt<jt;++Qt)Mt[Qt]=0;return Mt}function pt(Mt,jt){var Qt=jt.length<0?0:0|ct(jt.length);Mt=it(Mt,Qt);for(var gn=0;gn<Qt;gn+=1)Mt[gn]=255&jt[gn];return Mt}function ct(Mt){if(Mt>=j())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j().toString(16)+" bytes");return 0|Mt}function yt(Mt,jt){if(st.isBuffer(Mt))return Mt.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(Mt)||Mt instanceof ArrayBuffer))return Mt.byteLength;typeof Mt!="string"&&(Mt=""+Mt);var Qt=Mt.length;if(Qt===0)return 0;for(var gn=!1;;)switch(jt){case"ascii":case"latin1":case"binary":return Qt;case"utf8":case"utf-8":case void 0:return mn(Mt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Qt;case"hex":return Qt>>>1;case"base64":return an(Mt).length;default:if(gn)return mn(Mt).length;jt=(""+jt).toLowerCase(),gn=!0}}function Et(Mt,jt,Qt){var gn=!1;if((jt===void 0||jt<0)&&(jt=0),jt>this.length||((Qt===void 0||Qt>this.length)&&(Qt=this.length),Qt<=0)||(Qt>>>=0)<=(jt>>>=0))return"";for(Mt||(Mt="utf8");;)switch(Mt){case"hex":return Kt(this,jt,Qt);case"utf8":case"utf-8":return Nt(this,jt,Qt);case"ascii":return Ct(this,jt,Qt);case"latin1":case"binary":return Vt(this,jt,Qt);case"base64":return St(this,jt,Qt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,jt,Qt);default:if(gn)throw new TypeError("Unknown encoding: "+Mt);Mt=(Mt+"").toLowerCase(),gn=!0}}function Ot(Mt,jt,Qt){var gn=Mt[jt];Mt[jt]=Mt[Qt],Mt[Qt]=gn}function Lt(Mt,jt,Qt,gn,hn){if(Mt.length===0)return-1;if(typeof Qt=="string"?(gn=Qt,Qt=0):Qt>2147483647?Qt=2147483647:Qt<-2147483648&&(Qt=-2147483648),Qt=+Qt,isNaN(Qt)&&(Qt=hn?0:Mt.length-1),Qt<0&&(Qt=Mt.length+Qt),Qt>=Mt.length){if(hn)return-1;Qt=Mt.length-1}else if(Qt<0){if(!hn)return-1;Qt=0}if(typeof jt=="string"&&(jt=st.from(jt,gn)),st.isBuffer(jt))return jt.length===0?-1:Tt(Mt,jt,Qt,gn,hn);if(typeof jt=="number")return jt&=255,st.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?hn?Uint8Array.prototype.indexOf.call(Mt,jt,Qt):Uint8Array.prototype.lastIndexOf.call(Mt,jt,Qt):Tt(Mt,[jt],Qt,gn,hn);throw new TypeError("val must be string, number or Buffer")}function Tt(Mt,jt,Qt,gn,hn){var An,Mn=1,Yn=Mt.length,Nr=jt.length;if(gn!==void 0&&((gn=String(gn).toLowerCase())==="ucs2"||gn==="ucs-2"||gn==="utf16le"||gn==="utf-16le")){if(Mt.length<2||jt.length<2)return-1;Mn=2,Yn/=2,Nr/=2,Qt/=2}function ro(kn,Kn){return Mn===1?kn[Kn]:kn.readUInt16BE(Kn*Mn)}if(hn){var to=-1;for(An=Qt;An<Yn;An++)if(ro(Mt,An)===ro(jt,to===-1?0:An-to)){if(to===-1&&(to=An),An-to+1===Nr)return to*Mn}else to!==-1&&(An-=An-to),to=-1}else for(Qt+Nr>Yn&&(Qt=Yn-Nr),An=Qt;An>=0;An--){for(var zr=!0,In=0;In<Nr;In++)if(ro(Mt,An+In)!==ro(jt,In)){zr=!1;break}if(zr)return An}return-1}function It(Mt,jt,Qt,gn){Qt=Number(Qt)||0;var hn=Mt.length-Qt;gn?(gn=Number(gn))>hn&&(gn=hn):gn=hn;var An=jt.length;if(An%2!=0)throw new TypeError("Invalid hex string");gn>An/2&&(gn=An/2);for(var Mn=0;Mn<gn;++Mn){var Yn=parseInt(jt.substr(2*Mn,2),16);if(isNaN(Yn))return Mn;Mt[Qt+Mn]=Yn}return Mn}function mt(Mt,jt,Qt,gn){return en(mn(jt,Mt.length-Qt),Mt,Qt,gn)}function Bt(Mt,jt,Qt,gn){return en(function(hn){for(var An=[],Mn=0;Mn<hn.length;++Mn)An.push(255&hn.charCodeAt(Mn));return An}(jt),Mt,Qt,gn)}function nn(Mt,jt,Qt,gn){return Bt(Mt,jt,Qt,gn)}function sn(Mt,jt,Qt,gn){return en(an(jt),Mt,Qt,gn)}function xt(Mt,jt,Qt,gn){return en(function(hn,An){for(var Mn,Yn,Nr,ro=[],to=0;to<hn.length&&!((An-=2)<0);++to)Mn=hn.charCodeAt(to),Yn=Mn>>8,Nr=Mn%256,ro.push(Nr),ro.push(Yn);return ro}(jt,Mt.length-Qt),Mt,Qt,gn)}function St(Mt,jt,Qt){return jt===0&&Qt===Mt.length?$.fromByteArray(Mt):$.fromByteArray(Mt.slice(jt,Qt))}function Nt(Mt,jt,Qt){Qt=Math.min(Mt.length,Qt);for(var gn=[],hn=jt;hn<Qt;){var An,Mn,Yn,Nr,ro=Mt[hn],to=null,zr=ro>239?4:ro>223?3:ro>191?2:1;if(hn+zr<=Qt)switch(zr){case 1:ro<128&&(to=ro);break;case 2:(192&(An=Mt[hn+1]))==128&&(Nr=(31&ro)<<6|63&An)>127&&(to=Nr);break;case 3:An=Mt[hn+1],Mn=Mt[hn+2],(192&An)==128&&(192&Mn)==128&&(Nr=(15&ro)<<12|(63&An)<<6|63&Mn)>2047&&(Nr<55296||Nr>57343)&&(to=Nr);break;case 4:An=Mt[hn+1],Mn=Mt[hn+2],Yn=Mt[hn+3],(192&An)==128&&(192&Mn)==128&&(192&Yn)==128&&(Nr=(15&ro)<<18|(63&An)<<12|(63&Mn)<<6|63&Yn)>65535&&Nr<1114112&&(to=Nr)}to===null?(to=65533,zr=1):to>65535&&(to-=65536,gn.push(to>>>10&1023|55296),to=56320|1023&to),gn.push(to),hn+=zr}return function(In){var kn=In.length;if(kn<=4096)return String.fromCharCode.apply(String,In);for(var Kn="",vr=0;vr<kn;)Kn+=String.fromCharCode.apply(String,In.slice(vr,vr+=4096));return Kn}(gn)}o.Buffer=st,o.SlowBuffer=function(Mt){return+Mt!=Mt&&(Mt=0),st.alloc(+Mt)},o.INSPECT_MAX_BYTES=50,st.TYPED_ARRAY_SUPPORT=_.TYPED_ARRAY_SUPPORT!==void 0?_.TYPED_ARRAY_SUPPORT:function(){try{var Mt=new Uint8Array(1);return Mt.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Mt.foo()===42&&typeof Mt.subarray=="function"&&Mt.subarray(1,1).byteLength===0}catch{return!1}}(),o.kMaxLength=j(),st.poolSize=8192,st._augment=function(Mt){return Mt.__proto__=st.prototype,Mt},st.from=function(Mt,jt,Qt){return ht(null,Mt,jt,Qt)},st.TYPED_ARRAY_SUPPORT&&(st.prototype.__proto__=Uint8Array.prototype,st.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&st[Symbol.species]===st&&Object.defineProperty(st,Symbol.species,{value:null,configurable:!0})),st.alloc=function(Mt,jt,Qt){return function(gn,hn,An,Mn){return vt(hn),hn<=0?it(gn,hn):An!==void 0?typeof Mn=="string"?it(gn,hn).fill(An,Mn):it(gn,hn).fill(An):it(gn,hn)}(null,Mt,jt,Qt)},st.allocUnsafe=function(Mt){return ft(null,Mt)},st.allocUnsafeSlow=function(Mt){return ft(null,Mt)},st.isBuffer=function(Mt){return!(Mt==null||!Mt._isBuffer)},st.compare=function(Mt,jt){if(!st.isBuffer(Mt)||!st.isBuffer(jt))throw new TypeError("Arguments must be Buffers");if(Mt===jt)return 0;for(var Qt=Mt.length,gn=jt.length,hn=0,An=Math.min(Qt,gn);hn<An;++hn)if(Mt[hn]!==jt[hn]){Qt=Mt[hn],gn=jt[hn];break}return Qt<gn?-1:gn<Qt?1:0},st.isEncoding=function(Mt){switch(String(Mt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},st.concat=function(Mt,jt){if(!tt(Mt))throw new TypeError('"list" argument must be an Array of Buffers');if(Mt.length===0)return st.alloc(0);var Qt;if(jt===void 0)for(jt=0,Qt=0;Qt<Mt.length;++Qt)jt+=Mt[Qt].length;var gn=st.allocUnsafe(jt),hn=0;for(Qt=0;Qt<Mt.length;++Qt){var An=Mt[Qt];if(!st.isBuffer(An))throw new TypeError('"list" argument must be an Array of Buffers');An.copy(gn,hn),hn+=An.length}return gn},st.byteLength=yt,st.prototype._isBuffer=!0,st.prototype.swap16=function(){var Mt=this.length;if(Mt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var jt=0;jt<Mt;jt+=2)Ot(this,jt,jt+1);return this},st.prototype.swap32=function(){var Mt=this.length;if(Mt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var jt=0;jt<Mt;jt+=4)Ot(this,jt,jt+3),Ot(this,jt+1,jt+2);return this},st.prototype.swap64=function(){var Mt=this.length;if(Mt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var jt=0;jt<Mt;jt+=8)Ot(this,jt,jt+7),Ot(this,jt+1,jt+6),Ot(this,jt+2,jt+5),Ot(this,jt+3,jt+4);return this},st.prototype.toString=function(){var Mt=0|this.length;return Mt===0?"":arguments.length===0?Nt(this,0,Mt):Et.apply(this,arguments)},st.prototype.equals=function(Mt){if(!st.isBuffer(Mt))throw new TypeError("Argument must be a Buffer");return this===Mt||st.compare(this,Mt)===0},st.prototype.inspect=function(){var Mt="",jt=o.INSPECT_MAX_BYTES;return this.length>0&&(Mt=this.toString("hex",0,jt).match(/.{2}/g).join(" "),this.length>jt&&(Mt+=" ... ")),"<Buffer "+Mt+">"},st.prototype.compare=function(Mt,jt,Qt,gn,hn){if(!st.isBuffer(Mt))throw new TypeError("Argument must be a Buffer");if(jt===void 0&&(jt=0),Qt===void 0&&(Qt=Mt?Mt.length:0),gn===void 0&&(gn=0),hn===void 0&&(hn=this.length),jt<0||Qt>Mt.length||gn<0||hn>this.length)throw new RangeError("out of range index");if(gn>=hn&&jt>=Qt)return 0;if(gn>=hn)return-1;if(jt>=Qt)return 1;if(this===Mt)return 0;for(var An=(hn>>>=0)-(gn>>>=0),Mn=(Qt>>>=0)-(jt>>>=0),Yn=Math.min(An,Mn),Nr=this.slice(gn,hn),ro=Mt.slice(jt,Qt),to=0;to<Yn;++to)if(Nr[to]!==ro[to]){An=Nr[to],Mn=ro[to];break}return An<Mn?-1:Mn<An?1:0},st.prototype.includes=function(Mt,jt,Qt){return this.indexOf(Mt,jt,Qt)!==-1},st.prototype.indexOf=function(Mt,jt,Qt){return Lt(this,Mt,jt,Qt,!0)},st.prototype.lastIndexOf=function(Mt,jt,Qt){return Lt(this,Mt,jt,Qt,!1)},st.prototype.write=function(Mt,jt,Qt,gn){if(jt===void 0)gn="utf8",Qt=this.length,jt=0;else if(Qt===void 0&&typeof jt=="string")gn=jt,Qt=this.length,jt=0;else{if(!isFinite(jt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");jt|=0,isFinite(Qt)?(Qt|=0,gn===void 0&&(gn="utf8")):(gn=Qt,Qt=void 0)}var hn=this.length-jt;if((Qt===void 0||Qt>hn)&&(Qt=hn),Mt.length>0&&(Qt<0||jt<0)||jt>this.length)throw new RangeError("Attempt to write outside buffer bounds");gn||(gn="utf8");for(var An=!1;;)switch(gn){case"hex":return It(this,Mt,jt,Qt);case"utf8":case"utf-8":return mt(this,Mt,jt,Qt);case"ascii":return Bt(this,Mt,jt,Qt);case"latin1":case"binary":return nn(this,Mt,jt,Qt);case"base64":return sn(this,Mt,jt,Qt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,Mt,jt,Qt);default:if(An)throw new TypeError("Unknown encoding: "+gn);gn=(""+gn).toLowerCase(),An=!0}},st.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ct(Mt,jt,Qt){var gn="";Qt=Math.min(Mt.length,Qt);for(var hn=jt;hn<Qt;++hn)gn+=String.fromCharCode(127&Mt[hn]);return gn}function Vt(Mt,jt,Qt){var gn="";Qt=Math.min(Mt.length,Qt);for(var hn=jt;hn<Qt;++hn)gn+=String.fromCharCode(Mt[hn]);return gn}function Kt(Mt,jt,Qt){var gn=Mt.length;(!jt||jt<0)&&(jt=0),(!Qt||Qt<0||Qt>gn)&&(Qt=gn);for(var hn="",An=jt;An<Qt;++An)hn+=dn(Mt[An]);return hn}function Gt(Mt,jt,Qt){for(var gn=Mt.slice(jt,Qt),hn="",An=0;An<gn.length;An+=2)hn+=String.fromCharCode(gn[An]+256*gn[An+1]);return hn}function Ut(Mt,jt,Qt){if(Mt%1!=0||Mt<0)throw new RangeError("offset is not uint");if(Mt+jt>Qt)throw new RangeError("Trying to access beyond buffer length")}function Ht(Mt,jt,Qt,gn,hn,An){if(!st.isBuffer(Mt))throw new TypeError('"buffer" argument must be a Buffer instance');if(jt>hn||jt<An)throw new RangeError('"value" argument is out of bounds');if(Qt+gn>Mt.length)throw new RangeError("Index out of range")}function qt(Mt,jt,Qt,gn){jt<0&&(jt=65535+jt+1);for(var hn=0,An=Math.min(Mt.length-Qt,2);hn<An;++hn)Mt[Qt+hn]=(jt&255<<8*(gn?hn:1-hn))>>>8*(gn?hn:1-hn)}function Pt(Mt,jt,Qt,gn){jt<0&&(jt=4294967295+jt+1);for(var hn=0,An=Math.min(Mt.length-Qt,4);hn<An;++hn)Mt[Qt+hn]=jt>>>8*(gn?hn:3-hn)&255}function wt(Mt,jt,Qt,gn,hn,An){if(Qt+gn>Mt.length)throw new RangeError("Index out of range");if(Qt<0)throw new RangeError("Index out of range")}function $t(Mt,jt,Qt,gn,hn){return hn||wt(Mt,0,Qt,4),et.write(Mt,jt,Qt,gn,23,4),Qt+4}function Xt(Mt,jt,Qt,gn,hn){return hn||wt(Mt,0,Qt,8),et.write(Mt,jt,Qt,gn,52,8),Qt+8}st.prototype.slice=function(Mt,jt){var Qt,gn=this.length;if((Mt=~~Mt)<0?(Mt+=gn)<0&&(Mt=0):Mt>gn&&(Mt=gn),(jt=jt===void 0?gn:~~jt)<0?(jt+=gn)<0&&(jt=0):jt>gn&&(jt=gn),jt<Mt&&(jt=Mt),st.TYPED_ARRAY_SUPPORT)(Qt=this.subarray(Mt,jt)).__proto__=st.prototype;else{var hn=jt-Mt;Qt=new st(hn,void 0);for(var An=0;An<hn;++An)Qt[An]=this[An+Mt]}return Qt},st.prototype.readUIntLE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=this[Mt],hn=1,An=0;++An<jt&&(hn*=256);)gn+=this[Mt+An]*hn;return gn},st.prototype.readUIntBE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=this[Mt+--jt],hn=1;jt>0&&(hn*=256);)gn+=this[Mt+--jt]*hn;return gn},st.prototype.readUInt8=function(Mt,jt){return jt||Ut(Mt,1,this.length),this[Mt]},st.prototype.readUInt16LE=function(Mt,jt){return jt||Ut(Mt,2,this.length),this[Mt]|this[Mt+1]<<8},st.prototype.readUInt16BE=function(Mt,jt){return jt||Ut(Mt,2,this.length),this[Mt]<<8|this[Mt+1]},st.prototype.readUInt32LE=function(Mt,jt){return jt||Ut(Mt,4,this.length),(this[Mt]|this[Mt+1]<<8|this[Mt+2]<<16)+16777216*this[Mt+3]},st.prototype.readUInt32BE=function(Mt,jt){return jt||Ut(Mt,4,this.length),16777216*this[Mt]+(this[Mt+1]<<16|this[Mt+2]<<8|this[Mt+3])},st.prototype.readIntLE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=this[Mt],hn=1,An=0;++An<jt&&(hn*=256);)gn+=this[Mt+An]*hn;return gn>=(hn*=128)&&(gn-=Math.pow(2,8*jt)),gn},st.prototype.readIntBE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=jt,hn=1,An=this[Mt+--gn];gn>0&&(hn*=256);)An+=this[Mt+--gn]*hn;return An>=(hn*=128)&&(An-=Math.pow(2,8*jt)),An},st.prototype.readInt8=function(Mt,jt){return jt||Ut(Mt,1,this.length),128&this[Mt]?-1*(255-this[Mt]+1):this[Mt]},st.prototype.readInt16LE=function(Mt,jt){jt||Ut(Mt,2,this.length);var Qt=this[Mt]|this[Mt+1]<<8;return 32768&Qt?4294901760|Qt:Qt},st.prototype.readInt16BE=function(Mt,jt){jt||Ut(Mt,2,this.length);var Qt=this[Mt+1]|this[Mt]<<8;return 32768&Qt?4294901760|Qt:Qt},st.prototype.readInt32LE=function(Mt,jt){return jt||Ut(Mt,4,this.length),this[Mt]|this[Mt+1]<<8|this[Mt+2]<<16|this[Mt+3]<<24},st.prototype.readInt32BE=function(Mt,jt){return jt||Ut(Mt,4,this.length),this[Mt]<<24|this[Mt+1]<<16|this[Mt+2]<<8|this[Mt+3]},st.prototype.readFloatLE=function(Mt,jt){return jt||Ut(Mt,4,this.length),et.read(this,Mt,!0,23,4)},st.prototype.readFloatBE=function(Mt,jt){return jt||Ut(Mt,4,this.length),et.read(this,Mt,!1,23,4)},st.prototype.readDoubleLE=function(Mt,jt){return jt||Ut(Mt,8,this.length),et.read(this,Mt,!0,52,8)},st.prototype.readDoubleBE=function(Mt,jt){return jt||Ut(Mt,8,this.length),et.read(this,Mt,!1,52,8)},st.prototype.writeUIntLE=function(Mt,jt,Qt,gn){Mt=+Mt,jt|=0,Qt|=0,gn||Ht(this,Mt,jt,Qt,Math.pow(2,8*Qt)-1,0);var hn=1,An=0;for(this[jt]=255&Mt;++An<Qt&&(hn*=256);)this[jt+An]=Mt/hn&255;return jt+Qt},st.prototype.writeUIntBE=function(Mt,jt,Qt,gn){Mt=+Mt,jt|=0,Qt|=0,gn||Ht(this,Mt,jt,Qt,Math.pow(2,8*Qt)-1,0);var hn=Qt-1,An=1;for(this[jt+hn]=255&Mt;--hn>=0&&(An*=256);)this[jt+hn]=Mt/An&255;return jt+Qt},st.prototype.writeUInt8=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,1,255,0),st.TYPED_ARRAY_SUPPORT||(Mt=Math.floor(Mt)),this[jt]=255&Mt,jt+1},st.prototype.writeUInt16LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[jt]=255&Mt,this[jt+1]=Mt>>>8):qt(this,Mt,jt,!0),jt+2},st.prototype.writeUInt16BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>8,this[jt+1]=255&Mt):qt(this,Mt,jt,!1),jt+2},st.prototype.writeUInt32LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[jt+3]=Mt>>>24,this[jt+2]=Mt>>>16,this[jt+1]=Mt>>>8,this[jt]=255&Mt):Pt(this,Mt,jt,!0),jt+4},st.prototype.writeUInt32BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>24,this[jt+1]=Mt>>>16,this[jt+2]=Mt>>>8,this[jt+3]=255&Mt):Pt(this,Mt,jt,!1),jt+4},st.prototype.writeIntLE=function(Mt,jt,Qt,gn){if(Mt=+Mt,jt|=0,!gn){var hn=Math.pow(2,8*Qt-1);Ht(this,Mt,jt,Qt,hn-1,-hn)}var An=0,Mn=1,Yn=0;for(this[jt]=255&Mt;++An<Qt&&(Mn*=256);)Mt<0&&Yn===0&&this[jt+An-1]!==0&&(Yn=1),this[jt+An]=(Mt/Mn>>0)-Yn&255;return jt+Qt},st.prototype.writeIntBE=function(Mt,jt,Qt,gn){if(Mt=+Mt,jt|=0,!gn){var hn=Math.pow(2,8*Qt-1);Ht(this,Mt,jt,Qt,hn-1,-hn)}var An=Qt-1,Mn=1,Yn=0;for(this[jt+An]=255&Mt;--An>=0&&(Mn*=256);)Mt<0&&Yn===0&&this[jt+An+1]!==0&&(Yn=1),this[jt+An]=(Mt/Mn>>0)-Yn&255;return jt+Qt},st.prototype.writeInt8=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,1,127,-128),st.TYPED_ARRAY_SUPPORT||(Mt=Math.floor(Mt)),Mt<0&&(Mt=255+Mt+1),this[jt]=255&Mt,jt+1},st.prototype.writeInt16LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[jt]=255&Mt,this[jt+1]=Mt>>>8):qt(this,Mt,jt,!0),jt+2},st.prototype.writeInt16BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>8,this[jt+1]=255&Mt):qt(this,Mt,jt,!1),jt+2},st.prototype.writeInt32LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,2147483647,-2147483648),st.TYPED_ARRAY_SUPPORT?(this[jt]=255&Mt,this[jt+1]=Mt>>>8,this[jt+2]=Mt>>>16,this[jt+3]=Mt>>>24):Pt(this,Mt,jt,!0),jt+4},st.prototype.writeInt32BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,2147483647,-2147483648),Mt<0&&(Mt=4294967295+Mt+1),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>24,this[jt+1]=Mt>>>16,this[jt+2]=Mt>>>8,this[jt+3]=255&Mt):Pt(this,Mt,jt,!1),jt+4},st.prototype.writeFloatLE=function(Mt,jt,Qt){return $t(this,Mt,jt,!0,Qt)},st.prototype.writeFloatBE=function(Mt,jt,Qt){return $t(this,Mt,jt,!1,Qt)},st.prototype.writeDoubleLE=function(Mt,jt,Qt){return Xt(this,Mt,jt,!0,Qt)},st.prototype.writeDoubleBE=function(Mt,jt,Qt){return Xt(this,Mt,jt,!1,Qt)},st.prototype.copy=function(Mt,jt,Qt,gn){if(Qt||(Qt=0),gn||gn===0||(gn=this.length),jt>=Mt.length&&(jt=Mt.length),jt||(jt=0),gn>0&&gn<Qt&&(gn=Qt),gn===Qt||Mt.length===0||this.length===0)return 0;if(jt<0)throw new RangeError("targetStart out of bounds");if(Qt<0||Qt>=this.length)throw new RangeError("sourceStart out of bounds");if(gn<0)throw new RangeError("sourceEnd out of bounds");gn>this.length&&(gn=this.length),Mt.length-jt<gn-Qt&&(gn=Mt.length-jt+Qt);var hn,An=gn-Qt;if(this===Mt&&Qt<jt&&jt<gn)for(hn=An-1;hn>=0;--hn)Mt[hn+jt]=this[hn+Qt];else if(An<1e3||!st.TYPED_ARRAY_SUPPORT)for(hn=0;hn<An;++hn)Mt[hn+jt]=this[hn+Qt];else Uint8Array.prototype.set.call(Mt,this.subarray(Qt,Qt+An),jt);return An},st.prototype.fill=function(Mt,jt,Qt,gn){if(typeof Mt=="string"){if(typeof jt=="string"?(gn=jt,jt=0,Qt=this.length):typeof Qt=="string"&&(gn=Qt,Qt=this.length),Mt.length===1){var hn=Mt.charCodeAt(0);hn<256&&(Mt=hn)}if(gn!==void 0&&typeof gn!="string")throw new TypeError("encoding must be a string");if(typeof gn=="string"&&!st.isEncoding(gn))throw new TypeError("Unknown encoding: "+gn)}else typeof Mt=="number"&&(Mt&=255);if(jt<0||this.length<jt||this.length<Qt)throw new RangeError("Out of range index");if(Qt<=jt)return this;var An;if(jt>>>=0,Qt=Qt===void 0?this.length:Qt>>>0,Mt||(Mt=0),typeof Mt=="number")for(An=jt;An<Qt;++An)this[An]=Mt;else{var Mn=st.isBuffer(Mt)?Mt:mn(new st(Mt,gn).toString()),Yn=Mn.length;for(An=0;An<Qt-jt;++An)this[An+jt]=Mn[An%Yn]}return this};var un=/[^+\/0-9A-Za-z-_]/g;function dn(Mt){return Mt<16?"0"+Mt.toString(16):Mt.toString(16)}function mn(Mt,jt){var Qt;jt=jt||1/0;for(var gn=Mt.length,hn=null,An=[],Mn=0;Mn<gn;++Mn){if((Qt=Mt.charCodeAt(Mn))>55295&&Qt<57344){if(!hn){if(Qt>56319){(jt-=3)>-1&&An.push(239,191,189);continue}if(Mn+1===gn){(jt-=3)>-1&&An.push(239,191,189);continue}hn=Qt;continue}if(Qt<56320){(jt-=3)>-1&&An.push(239,191,189),hn=Qt;continue}Qt=65536+(hn-55296<<10|Qt-56320)}else hn&&(jt-=3)>-1&&An.push(239,191,189);if(hn=null,Qt<128){if((jt-=1)<0)break;An.push(Qt)}else if(Qt<2048){if((jt-=2)<0)break;An.push(Qt>>6|192,63&Qt|128)}else if(Qt<65536){if((jt-=3)<0)break;An.push(Qt>>12|224,Qt>>6&63|128,63&Qt|128)}else{if(!(Qt<1114112))throw new Error("Invalid code point");if((jt-=4)<0)break;An.push(Qt>>18|240,Qt>>12&63|128,Qt>>6&63|128,63&Qt|128)}}return An}function an(Mt){return $.toByteArray(function(jt){if((jt=function(Qt){return Qt.trim?Qt.trim():Qt.replace(/^\s+|\s+$/g,"")}(jt).replace(un,"")).length<2)return"";for(;jt.length%4!=0;)jt+="=";return jt}(Mt))}function en(Mt,jt,Qt,gn){for(var hn=0;hn<gn&&!(hn+Qt>=jt.length||hn>=Mt.length);++hn)jt[hn+Qt]=Mt[hn];return hn}}).call(this,s(6))},function(i,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}i.exports=s},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){_&&(s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(s,_){if(_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}}},function(i,o,s){s.d(o,"a",function(){return _});const _=$=>new Promise(et=>setTimeout(et,$||0))},function(i,o,s){var _=s(99),$=_,et=Function("return this")(),tt=s(98);$.object.extend(proto,tt),$.exportSymbol("proto.v1.signaling.api.CreatePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.CreatePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetHealthRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetHealthResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.Peer",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamRequest",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamResponse",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalRequest",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SessionType",null,et),$.exportSymbol("proto.v1.signaling.api.Signal",null,et),proto.v1.signaling.api.Peer=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.Peer.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.Peer,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Peer.displayName="proto.v1.signaling.api.Peer"),proto.v1.signaling.api.Signal=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.Signal,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Signal.displayName="proto.v1.signaling.api.Signal"),proto.v1.signaling.api.GetHealthRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetHealthRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetHealthRequest.displayName="proto.v1.signaling.api.GetHealthRequest"),proto.v1.signaling.api.GetHealthResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetHealthResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetHealthResponse.displayName="proto.v1.signaling.api.GetHealthResponse"),proto.v1.signaling.api.CreatePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerRequest.displayName="proto.v1.signaling.api.CreatePeerRequest"),proto.v1.signaling.api.CreatePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerResponse.displayName="proto.v1.signaling.api.CreatePeerResponse"),proto.v1.signaling.api.DeletePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerRequest.displayName="proto.v1.signaling.api.DeletePeerRequest"),proto.v1.signaling.api.DeletePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerResponse.displayName="proto.v1.signaling.api.DeletePeerResponse"),proto.v1.signaling.api.RefreshPeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerRequest.displayName="proto.v1.signaling.api.RefreshPeerRequest"),proto.v1.signaling.api.RefreshPeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerResponse.displayName="proto.v1.signaling.api.RefreshPeerResponse"),proto.v1.signaling.api.GetPeersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetPeersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersRequest.displayName="proto.v1.signaling.api.GetPeersRequest"),proto.v1.signaling.api.GetPeersResponse=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.GetPeersResponse.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.GetPeersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersResponse.displayName="proto.v1.signaling.api.GetPeersResponse"),proto.v1.signaling.api.GetIceServersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersRequest.displayName="proto.v1.signaling.api.GetIceServersRequest"),proto.v1.signaling.api.GetIceServersResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersResponse.displayName="proto.v1.signaling.api.GetIceServersResponse"),proto.v1.signaling.api.SendSignalRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalRequest.displayName="proto.v1.signaling.api.SendSignalRequest"),proto.v1.signaling.api.SendSignalResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalResponse.displayName="proto.v1.signaling.api.SendSignalResponse"),proto.v1.signaling.api.ReceiveSignalStreamRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.displayName="proto.v1.signaling.api.ReceiveSignalStreamRequest"),proto.v1.signaling.api.ReceiveSignalStreamResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.displayName="proto.v1.signaling.api.ReceiveSignalStreamResponse"),proto.v1.signaling.api.Peer.repeatedFields_=[5],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Peer.prototype.toObject=function(j){return proto.v1.signaling.api.Peer.toObject(j,this)},proto.v1.signaling.api.Peer.toObject=function(j,it){var st,ht={peerId:_.Message.getFieldWithDefault(it,1,""),organizationId:_.Message.getFieldWithDefault(it,2,""),userId:(st=it.getUserId())&&tt.StringValue.toObject(j,st),deviceId:(st=it.getDeviceId())&&tt.StringValue.toObject(j,st),sessionIdsList:(st=_.Message.getRepeatedField(it,5))==null?void 0:st,peerCreatedTimestamp:(st=it.getPeerCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Peer.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Peer;return proto.v1.signaling.api.Peer.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Peer.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;case 2:st=it.readString(),j.setOrganizationId(st);break;case 3:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setUserId(st);break;case 4:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setDeviceId(st);break;case 5:st=it.readString(),j.addSessionIds(st);break;case 6:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setPeerCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Peer.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Peer.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Peer.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getPeerId()).length>0&&it.writeString(1,st),(st=j.getOrganizationId()).length>0&&it.writeString(2,st),(st=j.getUserId())!=null&&it.writeMessage(3,st,tt.StringValue.serializeBinaryToWriter),(st=j.getDeviceId())!=null&&it.writeMessage(4,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionIdsList()).length>0&&it.writeRepeatedString(5,st),(st=j.getPeerCreatedTimestamp())!=null&&it.writeMessage(6,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.Peer.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.Peer.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},proto.v1.signaling.api.Peer.prototype.getOrganizationId=function(){return _.Message.getFieldWithDefault(this,2,"")},proto.v1.signaling.api.Peer.prototype.setOrganizationId=function(j){return _.Message.setProto3StringField(this,2,j)},proto.v1.signaling.api.Peer.prototype.getUserId=function(){return _.Message.getWrapperField(this,tt.StringValue,3)},proto.v1.signaling.api.Peer.prototype.setUserId=function(j){return _.Message.setWrapperField(this,3,j)},proto.v1.signaling.api.Peer.prototype.clearUserId=function(){return this.setUserId(void 0)},proto.v1.signaling.api.Peer.prototype.hasUserId=function(){return _.Message.getField(this,3)!=null},proto.v1.signaling.api.Peer.prototype.getDeviceId=function(){return _.Message.getWrapperField(this,tt.StringValue,4)},proto.v1.signaling.api.Peer.prototype.setDeviceId=function(j){return _.Message.setWrapperField(this,4,j)},proto.v1.signaling.api.Peer.prototype.clearDeviceId=function(){return this.setDeviceId(void 0)},proto.v1.signaling.api.Peer.prototype.hasDeviceId=function(){return _.Message.getField(this,4)!=null},proto.v1.signaling.api.Peer.prototype.getSessionIdsList=function(){return _.Message.getRepeatedField(this,5)},proto.v1.signaling.api.Peer.prototype.setSessionIdsList=function(j){return _.Message.setField(this,5,j||[])},proto.v1.signaling.api.Peer.prototype.addSessionIds=function(j,it){return _.Message.addToRepeatedField(this,5,j,it)},proto.v1.signaling.api.Peer.prototype.clearSessionIdsList=function(){return this.setSessionIdsList([])},proto.v1.signaling.api.Peer.prototype.getPeerCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,6)},proto.v1.signaling.api.Peer.prototype.setPeerCreatedTimestamp=function(j){return _.Message.setWrapperField(this,6,j)},proto.v1.signaling.api.Peer.prototype.clearPeerCreatedTimestamp=function(){return this.setPeerCreatedTimestamp(void 0)},proto.v1.signaling.api.Peer.prototype.hasPeerCreatedTimestamp=function(){return _.Message.getField(this,6)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Signal.prototype.toObject=function(j){return proto.v1.signaling.api.Signal.toObject(j,this)},proto.v1.signaling.api.Signal.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st),senderId:_.Message.getFieldWithDefault(it,3,""),receiverId:_.Message.getFieldWithDefault(it,4,""),payload:_.Message.getFieldWithDefault(it,5,""),iceServers:_.Message.getFieldWithDefault(it,6,""),iceTransportPolicy:_.Message.getFieldWithDefault(it,7,""),sessionType:_.Message.getFieldWithDefault(it,8,0)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Signal.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Signal;return proto.v1.signaling.api.Signal.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Signal.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;case 3:st=it.readString(),j.setSenderId(st);break;case 4:st=it.readString(),j.setReceiverId(st);break;case 5:st=it.readString(),j.setPayload(st);break;case 6:st=it.readString(),j.setIceServers(st);break;case 7:st=it.readString(),j.setIceTransportPolicy(st);break;case 8:st=it.readEnum(),j.setSessionType(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Signal.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Signal.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Signal.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter),(st=j.getSenderId()).length>0&&it.writeString(3,st),(st=j.getReceiverId()).length>0&&it.writeString(4,st),(st=j.getPayload()).length>0&&it.writeString(5,st),(st=j.getIceServers()).length>0&&it.writeString(6,st),(st=j.getIceTransportPolicy()).length>0&&it.writeString(7,st),(st=j.getSessionType())!==0&&it.writeEnum(8,st)},proto.v1.signaling.api.Signal.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.Signal.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.Signal.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.Signal.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.Signal.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.Signal.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},proto.v1.signaling.api.Signal.prototype.getSenderId=function(){return _.Message.getFieldWithDefault(this,3,"")},proto.v1.signaling.api.Signal.prototype.setSenderId=function(j){return _.Message.setProto3StringField(this,3,j)},proto.v1.signaling.api.Signal.prototype.getReceiverId=function(){return _.Message.getFieldWithDefault(this,4,"")},proto.v1.signaling.api.Signal.prototype.setReceiverId=function(j){return _.Message.setProto3StringField(this,4,j)},proto.v1.signaling.api.Signal.prototype.getPayload=function(){return _.Message.getFieldWithDefault(this,5,"")},proto.v1.signaling.api.Signal.prototype.setPayload=function(j){return _.Message.setProto3StringField(this,5,j)},proto.v1.signaling.api.Signal.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,6,"")},proto.v1.signaling.api.Signal.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,6,j)},proto.v1.signaling.api.Signal.prototype.getIceTransportPolicy=function(){return _.Message.getFieldWithDefault(this,7,"")},proto.v1.signaling.api.Signal.prototype.setIceTransportPolicy=function(j){return _.Message.setProto3StringField(this,7,j)},proto.v1.signaling.api.Signal.prototype.getSessionType=function(){return _.Message.getFieldWithDefault(this,8,0)},proto.v1.signaling.api.Signal.prototype.setSessionType=function(j){return _.Message.setProto3EnumField(this,8,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetHealthRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetHealthRequest.toObject(j,this)},proto.v1.signaling.api.GetHealthRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetHealthRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetHealthRequest;return proto.v1.signaling.api.GetHealthRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetHealthRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetHealthRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetHealthRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetHealthRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetHealthResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetHealthResponse.toObject(j,this)},proto.v1.signaling.api.GetHealthResponse.toObject=function(j,it){var st={version:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetHealthResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetHealthResponse;return proto.v1.signaling.api.GetHealthResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetHealthResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setVersion(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetHealthResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetHealthResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetHealthResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getVersion()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.GetHealthResponse.prototype.getVersion=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.GetHealthResponse.prototype.setVersion=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerRequest.toObject(j,this)},proto.v1.signaling.api.CreatePeerRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.CreatePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerRequest;return proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.CreatePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerResponse.toObject(j,this)},proto.v1.signaling.api.CreatePeerResponse.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.CreatePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerResponse;return proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.CreatePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.CreatePeerResponse.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.CreatePeerResponse.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.CreatePeerResponse.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.CreatePeerResponse.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerRequest.toObject(j,this)},proto.v1.signaling.api.DeletePeerRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerRequest;return proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.DeletePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.DeletePeerRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.DeletePeerRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerResponse.toObject(j,this)},proto.v1.signaling.api.DeletePeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerResponse;return proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.DeletePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerRequest.toObject(j,this)},proto.v1.signaling.api.RefreshPeerRequest.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.RefreshPeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerRequest;return proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.RefreshPeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.RefreshPeerRequest.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.RefreshPeerRequest.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.RefreshPeerRequest.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.RefreshPeerRequest.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerResponse.toObject(j,this)},proto.v1.signaling.api.RefreshPeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.RefreshPeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerResponse;return proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.RefreshPeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersRequest.toObject(j,this)},proto.v1.signaling.api.GetPeersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersRequest;return proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetPeersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter=function(j,it){},proto.v1.signaling.api.GetPeersResponse.repeatedFields_=[1],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersResponse.toObject(j,this)},proto.v1.signaling.api.GetPeersResponse.toObject=function(j,it){var st={peersList:_.Message.toObjectList(it.getPeersList(),proto.v1.signaling.api.Peer.toObject,j)};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersResponse;return proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.addPeers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetPeersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeersList()).length>0&&it.writeRepeatedMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.GetPeersResponse.prototype.getPeersList=function(){return _.Message.getRepeatedWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.GetPeersResponse.prototype.setPeersList=function(j){return _.Message.setRepeatedWrapperField(this,1,j)},proto.v1.signaling.api.GetPeersResponse.prototype.addPeers=function(j,it){return _.Message.addToRepeatedWrapperField(this,1,j,proto.v1.signaling.api.Peer,it)},proto.v1.signaling.api.GetPeersResponse.prototype.clearPeersList=function(){return this.setPeersList([])},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersRequest.toObject(j,this)},proto.v1.signaling.api.GetIceServersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersRequest;return proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetIceServersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersResponse.toObject(j,this)},proto.v1.signaling.api.GetIceServersResponse.toObject=function(j,it){var st={iceServers:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersResponse;return proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setIceServers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetIceServersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getIceServers()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.GetIceServersResponse.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.GetIceServersResponse.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalRequest.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalRequest.toObject(j,this)},proto.v1.signaling.api.SendSignalRequest.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalRequest;return proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalRequest.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.SendSignalRequest.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalRequest.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.SendSignalRequest.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalResponse.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalResponse.toObject(j,this)},proto.v1.signaling.api.SendSignalResponse.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalResponse;return proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamRequest;return proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamResponse;return proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SessionType={UNKNOWN:0,TELEOP:1,PORT_FORWARD:2,OBSERVE:3},$.object.extend(o,proto.v1.signaling.api)},function(i,o,s){function _($,et,tt=()=>!0){if($ instanceof et&&tt($))return $;throw $}s.d(o,"a",function(){return _})},function(i,o,s){s.d(o,"a",function(){return $});var _=s(34);class $ extends Error{constructor(tt,j,it,st,ht={},vt){super(`Unexpected response (${it}) for ${tt} ${j}: ${JSON.stringify(vt?Object(_.a)([...vt.entries()].reduce((ft,[pt,ct])=>(ft[pt]=ct,ft),{})):{})} -- ${JSON.stringify(Object(_.a)(st))}`),this.method=tt,this.url=j,this.statusCode=it,this.body=st,this.validationErrors=ht,this.headers=vt}}},function(i,o,s){function _(ft){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt})(ft)}function $(ft,pt){return!pt||_(pt)!=="object"&&typeof pt!="function"?et(ft):pt}function et(ft){if(ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft}function tt(ft){var pt=typeof Map=="function"?new Map:void 0;return(tt=function(ct){if(ct===null||(yt=ct,Function.toString.call(yt).indexOf("[native code]")===-1))return ct;var yt;if(typeof ct!="function")throw new TypeError("Super expression must either be null or a function");if(pt!==void 0){if(pt.has(ct))return pt.get(ct);pt.set(ct,Et)}function Et(){return j(ct,arguments,ht(this).constructor)}return Et.prototype=Object.create(ct.prototype,{constructor:{value:Et,enumerable:!1,writable:!0,configurable:!0}}),st(Et,ct)})(ft)}function j(ft,pt,ct){return(j=it()?Reflect.construct:function(yt,Et,Ot){var Lt=[null];Lt.push.apply(Lt,Et);var Tt=new(Function.bind.apply(yt,Lt));return Ot&&st(Tt,Ot.prototype),Tt}).apply(null,arguments)}function it(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function st(ft,pt){return(st=Object.setPrototypeOf||function(ct,yt){return ct.__proto__=yt,ct})(ft,pt)}function ht(ft){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(pt){return pt.__proto__||Object.getPrototypeOf(pt)})(ft)}var vt=function(ft){(function(Ot,Lt){if(typeof Lt!="function"&&Lt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(Lt&&Lt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),Lt&&st(Ot,Lt)})(Et,ft);var pt,ct,yt=(pt=Et,ct=it(),function(){var Ot,Lt=ht(pt);if(ct){var Tt=ht(this).constructor;Ot=Reflect.construct(Lt,arguments,Tt)}else Ot=Lt.apply(this,arguments);return $(this,Ot)});function Et(Ot){var Lt;return function(Tt,It){if(!(Tt instanceof It))throw new TypeError("Cannot call a class as a function")}(this,Et),Lt=yt.call(this,`Format functions must be synchronous taking a two arguments: (info, opts)
Found: `.concat(Ot.toString().split(`
`)[0],`
`)),Error.captureStackTrace(et(Lt),Et),Lt}return Et}(tt(Error));i.exports=function(ft){if(ft.length>2)throw new vt(ft);function pt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=yt}function ct(yt){return new pt(yt)}return pt.prototype.transform=ft,ct.Format=pt,ct}},function(i,o,s){(function(_){var $=Object.getOwnPropertyDescriptors||function(Ut){for(var Ht=Object.keys(Ut),qt={},Pt=0;Pt<Ht.length;Pt++)qt[Ht[Pt]]=Object.getOwnPropertyDescriptor(Ut,Ht[Pt]);return qt},et=/%[sdj%]/g;o.format=function(Ut){if(!Lt(Ut)){for(var Ht=[],qt=0;qt<arguments.length;qt++)Ht.push(it(arguments[qt]));return Ht.join(" ")}qt=1;for(var Pt=arguments,wt=Pt.length,$t=String(Ut).replace(et,function(un){if(un==="%%")return"%";if(qt>=wt)return un;switch(un){case"%s":return String(Pt[qt++]);case"%d":return Number(Pt[qt++]);case"%j":try{return JSON.stringify(Pt[qt++])}catch{return"[Circular]"}default:return un}}),Xt=Pt[qt];qt<wt;Xt=Pt[++qt])Et(Xt)||!mt(Xt)?$t+=" "+Xt:$t+=" "+it(Xt);return $t},o.deprecate=function(Ut,Ht){if(_!==void 0&&_.noDeprecation===!0)return Ut;if(_===void 0)return function(){return o.deprecate(Ut,Ht).apply(this,arguments)};var qt=!1;return function(){if(!qt){if(_.throwDeprecation)throw new Error(Ht);_.traceDeprecation?console.trace(Ht):console.error(Ht),qt=!0}return Ut.apply(this,arguments)}};var tt,j={};function it(Ut,Ht){var qt={seen:[],stylize:ht};return arguments.length>=3&&(qt.depth=arguments[2]),arguments.length>=4&&(qt.colors=arguments[3]),yt(Ht)?qt.showHidden=Ht:Ht&&o._extend(qt,Ht),Tt(qt.showHidden)&&(qt.showHidden=!1),Tt(qt.depth)&&(qt.depth=2),Tt(qt.colors)&&(qt.colors=!1),Tt(qt.customInspect)&&(qt.customInspect=!0),qt.colors&&(qt.stylize=st),vt(qt,Ut,qt.depth)}function st(Ut,Ht){var qt=it.styles[Ht];return qt?"\x1B["+it.colors[qt][0]+"m"+Ut+"\x1B["+it.colors[qt][1]+"m":Ut}function ht(Ut,Ht){return Ut}function vt(Ut,Ht,qt){if(Ut.customInspect&&Ht&&sn(Ht.inspect)&&Ht.inspect!==o.inspect&&(!Ht.constructor||Ht.constructor.prototype!==Ht)){var Pt=Ht.inspect(qt,Ut);return Lt(Pt)||(Pt=vt(Ut,Pt,qt)),Pt}var wt=function(Mt,jt){if(Tt(jt))return Mt.stylize("undefined","undefined");if(Lt(jt)){var Qt="'"+JSON.stringify(jt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Mt.stylize(Qt,"string")}if(Ot(jt))return Mt.stylize(""+jt,"number");if(yt(jt))return Mt.stylize(""+jt,"boolean");if(Et(jt))return Mt.stylize("null","null")}(Ut,Ht);if(wt)return wt;var $t=Object.keys(Ht),Xt=function(Mt){var jt={};return Mt.forEach(function(Qt,gn){jt[Qt]=!0}),jt}($t);if(Ut.showHidden&&($t=Object.getOwnPropertyNames(Ht)),nn(Ht)&&($t.indexOf("message")>=0||$t.indexOf("description")>=0))return ft(Ht);if($t.length===0){if(sn(Ht)){var un=Ht.name?": "+Ht.name:"";return Ut.stylize("[Function"+un+"]","special")}if(It(Ht))return Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp");if(Bt(Ht))return Ut.stylize(Date.prototype.toString.call(Ht),"date");if(nn(Ht))return ft(Ht)}var dn,mn="",an=!1,en=["{","}"];return ct(Ht)&&(an=!0,en=["[","]"]),sn(Ht)&&(mn=" [Function"+(Ht.name?": "+Ht.name:"")+"]"),It(Ht)&&(mn=" "+RegExp.prototype.toString.call(Ht)),Bt(Ht)&&(mn=" "+Date.prototype.toUTCString.call(Ht)),nn(Ht)&&(mn=" "+ft(Ht)),$t.length!==0||an&&Ht.length!=0?qt<0?It(Ht)?Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp"):Ut.stylize("[Object]","special"):(Ut.seen.push(Ht),dn=an?function(Mt,jt,Qt,gn,hn){for(var An=[],Mn=0,Yn=jt.length;Mn<Yn;++Mn)Vt(jt,String(Mn))?An.push(pt(Mt,jt,Qt,gn,String(Mn),!0)):An.push("");return hn.forEach(function(Nr){Nr.match(/^\d+$/)||An.push(pt(Mt,jt,Qt,gn,Nr,!0))}),An}(Ut,Ht,qt,Xt,$t):$t.map(function(Mt){return pt(Ut,Ht,qt,Xt,Mt,an)}),Ut.seen.pop(),function(Mt,jt,Qt){return Mt.reduce(function(gn,hn){return hn.indexOf(`
`)>=0,gn+hn.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Qt[0]+(jt===""?"":jt+`
 `)+" "+Mt.join(`,
  `)+" "+Qt[1]:Qt[0]+jt+" "+Mt.join(", ")+" "+Qt[1]}(dn,mn,en)):en[0]+mn+en[1]}function ft(Ut){return"["+Error.prototype.toString.call(Ut)+"]"}function pt(Ut,Ht,qt,Pt,wt,$t){var Xt,un,dn;if((dn=Object.getOwnPropertyDescriptor(Ht,wt)||{value:Ht[wt]}).get?un=dn.set?Ut.stylize("[Getter/Setter]","special"):Ut.stylize("[Getter]","special"):dn.set&&(un=Ut.stylize("[Setter]","special")),Vt(Pt,wt)||(Xt="["+wt+"]"),un||(Ut.seen.indexOf(dn.value)<0?(un=Et(qt)?vt(Ut,dn.value,null):vt(Ut,dn.value,qt-1)).indexOf(`
`)>-1&&(un=$t?un.split(`
`).map(function(mn){return"  "+mn}).join(`
`).substr(2):`
`+un.split(`
`).map(function(mn){return"   "+mn}).join(`
`)):un=Ut.stylize("[Circular]","special")),Tt(Xt)){if($t&&wt.match(/^\d+$/))return un;(Xt=JSON.stringify(""+wt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Xt=Xt.substr(1,Xt.length-2),Xt=Ut.stylize(Xt,"name")):(Xt=Xt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Xt=Ut.stylize(Xt,"string"))}return Xt+": "+un}function ct(Ut){return Array.isArray(Ut)}function yt(Ut){return typeof Ut=="boolean"}function Et(Ut){return Ut===null}function Ot(Ut){return typeof Ut=="number"}function Lt(Ut){return typeof Ut=="string"}function Tt(Ut){return Ut===void 0}function It(Ut){return mt(Ut)&&xt(Ut)==="[object RegExp]"}function mt(Ut){return typeof Ut=="object"&&Ut!==null}function Bt(Ut){return mt(Ut)&&xt(Ut)==="[object Date]"}function nn(Ut){return mt(Ut)&&(xt(Ut)==="[object Error]"||Ut instanceof Error)}function sn(Ut){return typeof Ut=="function"}function xt(Ut){return Object.prototype.toString.call(Ut)}function St(Ut){return Ut<10?"0"+Ut.toString(10):Ut.toString(10)}o.debuglog=function(Ut){if(Tt(tt)&&(tt=_.env.NODE_DEBUG||""),Ut=Ut.toUpperCase(),!j[Ut])if(new RegExp("\\b"+Ut+"\\b","i").test(tt)){var Ht=_.pid;j[Ut]=function(){var qt=o.format.apply(o,arguments);console.error("%s %d: %s",Ut,Ht,qt)}}else j[Ut]=function(){};return j[Ut]},o.inspect=it,it.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},it.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=ct,o.isBoolean=yt,o.isNull=Et,o.isNullOrUndefined=function(Ut){return Ut==null},o.isNumber=Ot,o.isString=Lt,o.isSymbol=function(Ut){return typeof Ut=="symbol"},o.isUndefined=Tt,o.isRegExp=It,o.isObject=mt,o.isDate=Bt,o.isError=nn,o.isFunction=sn,o.isPrimitive=function(Ut){return Ut===null||typeof Ut=="boolean"||typeof Ut=="number"||typeof Ut=="string"||typeof Ut=="symbol"||Ut===void 0},o.isBuffer=s(107);var Nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ct(){var Ut=new Date,Ht=[St(Ut.getHours()),St(Ut.getMinutes()),St(Ut.getSeconds())].join(":");return[Ut.getDate(),Nt[Ut.getMonth()],Ht].join(" ")}function Vt(Ut,Ht){return Object.prototype.hasOwnProperty.call(Ut,Ht)}o.log=function(){console.log("%s - %s",Ct(),o.format.apply(o,arguments))},o.inherits=s(108),o._extend=function(Ut,Ht){if(!Ht||!mt(Ht))return Ut;for(var qt=Object.keys(Ht),Pt=qt.length;Pt--;)Ut[qt[Pt]]=Ht[qt[Pt]];return Ut};var Kt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Gt(Ut,Ht){if(!Ut){var qt=new Error("Promise was rejected with a falsy value");qt.reason=Ut,Ut=qt}return Ht(Ut)}o.promisify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');if(Kt&&Ut[Kt]){var Ht;if(typeof(Ht=Ut[Kt])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ht,Kt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Ht}function Ht(){for(var qt,Pt,wt=new Promise(function(un,dn){qt=un,Pt=dn}),$t=[],Xt=0;Xt<arguments.length;Xt++)$t.push(arguments[Xt]);$t.push(function(un,dn){un?Pt(un):qt(dn)});try{Ut.apply(this,$t)}catch(un){Pt(un)}return wt}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Kt&&Object.defineProperty(Ht,Kt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ht,$(Ut))},o.promisify.custom=Kt,o.callbackify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');function Ht(){for(var qt=[],Pt=0;Pt<arguments.length;Pt++)qt.push(arguments[Pt]);var wt=qt.pop();if(typeof wt!="function")throw new TypeError("The last argument must be of type Function");var $t=this,Xt=function(){return wt.apply($t,arguments)};Ut.apply(this,qt).then(function(un){_.nextTick(Xt,null,un)},function(un){_.nextTick(Gt,un,Xt)})}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Object.defineProperties(Ht,$(Ut)),Ht}}).call(this,s(2))},function(i,o,s){i.exports=function(_,$){$||($={}),typeof $=="function"&&($={cmp:$});var et,tt=typeof $.cycles=="boolean"&&$.cycles,j=$.cmp&&(et=$.cmp,function(st){return function(ht,vt){var ft={key:ht,value:st[ht]},pt={key:vt,value:st[vt]};return et(ft,pt)}}),it=[];return function st(ht){if(ht&&ht.toJSON&&typeof ht.toJSON=="function"&&(ht=ht.toJSON()),ht!==void 0){if(typeof ht=="number")return isFinite(ht)?""+ht:"null";if(typeof ht!="object")return JSON.stringify(ht);var vt,ft;if(Array.isArray(ht)){for(ft="[",vt=0;vt<ht.length;vt++)vt&&(ft+=","),ft+=st(ht[vt])||"null";return ft+"]"}if(ht===null)return"null";if(it.indexOf(ht)!==-1){if(tt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var pt=it.push(ht)-1,ct=Object.keys(ht).sort(j&&j(ht));for(ft="",vt=0;vt<ct.length;vt++){var yt=ct[vt],Et=st(ht[yt]);Et&&(ft&&(ft+=","),ft+=JSON.stringify(yt)+":"+Et)}return it.splice(pt,1),"{"+ft+"}"}}(_)}},function(i,o,s){(function(_){var $=_!==void 0&&_||typeof self<"u"&&self||window,et=Function.prototype.apply;function tt(j,it){this._id=j,this._clearFn=it}o.setTimeout=function(){return new tt(et.call(setTimeout,$,arguments),clearTimeout)},o.setInterval=function(){return new tt(et.call(setInterval,$,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(j){j&&j.close()},tt.prototype.unref=tt.prototype.ref=function(){},tt.prototype.close=function(){this._clearFn.call($,this._id)},o.enroll=function(j,it){clearTimeout(j._idleTimeoutId),j._idleTimeout=it},o.unenroll=function(j){clearTimeout(j._idleTimeoutId),j._idleTimeout=-1},o._unrefActive=o.active=function(j){clearTimeout(j._idleTimeoutId);var it=j._idleTimeout;it>=0&&(j._idleTimeoutId=setTimeout(function(){j._onTimeout&&j._onTimeout()},it))},s(141),o.setImmediate=typeof self<"u"&&self.setImmediate||_!==void 0&&_.setImmediate||this&&this.setImmediate,o.clearImmediate=typeof self<"u"&&self.clearImmediate||_!==void 0&&_.clearImmediate||this&&this.clearImmediate}).call(this,s(6))},function(i,o,s){(function(_){_===void 0||!_.version||_.version.indexOf("v0.")===0||_.version.indexOf("v1.")===0&&_.version.indexOf("v1.8.")!==0?i.exports={nextTick:function($,et,tt,j){if(typeof $!="function")throw new TypeError('"callback" argument must be a function');var it,st,ht=arguments.length;switch(ht){case 0:case 1:return _.nextTick($);case 2:return _.nextTick(function(){$.call(null,et)});case 3:return _.nextTick(function(){$.call(null,et,tt)});case 4:return _.nextTick(function(){$.call(null,et,tt,j)});default:for(it=new Array(ht-1),st=0;st<it.length;)it[st++]=arguments[st];return _.nextTick(function(){$.apply(null,it)})}}}:i.exports=_}).call(this,s(2))},function(i,o,s){(function(_){function $(et){return Object.prototype.toString.call(et)}o.isArray=function(et){return Array.isArray?Array.isArray(et):$(et)==="[object Array]"},o.isBoolean=function(et){return typeof et=="boolean"},o.isNull=function(et){return et===null},o.isNullOrUndefined=function(et){return et==null},o.isNumber=function(et){return typeof et=="number"},o.isString=function(et){return typeof et=="string"},o.isSymbol=function(et){return typeof et=="symbol"},o.isUndefined=function(et){return et===void 0},o.isRegExp=function(et){return $(et)==="[object RegExp]"},o.isObject=function(et){return typeof et=="object"&&et!==null},o.isDate=function(et){return $(et)==="[object Date]"},o.isError=function(et){return $(et)==="[object Error]"||et instanceof Error},o.isFunction=function(et){return typeof et=="function"},o.isPrimitive=function(et){return et===null||typeof et=="boolean"||typeof et=="number"||typeof et=="string"||typeof et=="symbol"||et===void 0},o.isBuffer=_.isBuffer}).call(this,s(5).Buffer)},function(i,o){o.endianness=function(){return"LE"},o.hostname=function(){return typeof location<"u"?location.hostname:""},o.loadavg=function(){return[]},o.uptime=function(){return 0},o.freemem=function(){return Number.MAX_VALUE},o.totalmem=function(){return Number.MAX_VALUE},o.cpus=function(){return[]},o.type=function(){return"Browser"},o.release=function(){return typeof navigator<"u"?navigator.appVersion:""},o.networkInterfaces=o.getNetworkInterfaces=function(){return{}},o.arch=function(){return"javascript"},o.platform=function(){return"browser"},o.tmpdir=o.tmpDir=function(){return"/tmp"},o.EOL=`
`,o.homedir=function(){return"/"}},function(i,o,s){var _=s(58),$=s(61).warn,et=o;et.version=s(138).version,et.transports=s(139),et.config=s(50),et.addColors=_.levels,et.format=_.format,et.createLogger=s(88),et.ExceptionHandler=s(89),et.RejectionHandler=s(93),et.Container=s(210),et.Transport=s(20),et.loggers=new et.Container;var tt=et.createLogger();Object.keys(et.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(function(j){return et[j]=function(){return tt[j].apply(tt,arguments)}}),Object.defineProperty(et,"level",{get:function(){return tt.level},set:function(j){tt.level=j}}),Object.defineProperty(et,"exceptions",{get:function(){return tt.exceptions}}),["exitOnError"].forEach(function(j){Object.defineProperty(et,j,{get:function(){return tt[j]},set:function(it){tt[j]=it}})}),Object.defineProperty(et,"default",{get:function(){return{exceptionHandlers:tt.exceptionHandlers,rejectionHandlers:tt.rejectionHandlers,transports:tt.transports}}}),$.deprecated(et,"setLevels"),$.forFunctions(et,"useFormat",["cli"]),$.forProperties(et,"useFormat",["padLevels","stripColors"]),$.forFunctions(et,"deprecated",["addRewriter","addFilter","clone","extend"]),$.forProperties(et,"deprecated",["emitErrs","levelLength"]),$.moved(et,"createLogger","Logger")},function(i,o,s){var _=s(13),$=s(142),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.handleRejections=it.handleRejections,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(st(),vt)throw vt;return}return this.log(ft,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(j[ht].callback(),vt)throw it(null),vt}else this.log(ft,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){},i.exports.LegacyTransportStream=s(148)},function(i,o,s){var _,$=typeof Reflect=="object"?Reflect:null,et=$&&typeof $.apply=="function"?$.apply:function(Et,Ot,Lt){return Function.prototype.apply.call(Et,Ot,Lt)};_=$&&typeof $.ownKeys=="function"?$.ownKeys:Object.getOwnPropertySymbols?function(Et){return Object.getOwnPropertyNames(Et).concat(Object.getOwnPropertySymbols(Et))}:function(Et){return Object.getOwnPropertyNames(Et)};var tt=Number.isNaN||function(Et){return Et!=Et};function j(){j.init.call(this)}i.exports=j,j.EventEmitter=j,j.prototype._events=void 0,j.prototype._eventsCount=0,j.prototype._maxListeners=void 0;var it=10;function st(Et){return Et._maxListeners===void 0?j.defaultMaxListeners:Et._maxListeners}function ht(Et,Ot,Lt,Tt){var It,mt,Bt,nn;if(typeof Lt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Lt);if((mt=Et._events)===void 0?(mt=Et._events=Object.create(null),Et._eventsCount=0):(mt.newListener!==void 0&&(Et.emit("newListener",Ot,Lt.listener?Lt.listener:Lt),mt=Et._events),Bt=mt[Ot]),Bt===void 0)Bt=mt[Ot]=Lt,++Et._eventsCount;else if(typeof Bt=="function"?Bt=mt[Ot]=Tt?[Lt,Bt]:[Bt,Lt]:Tt?Bt.unshift(Lt):Bt.push(Lt),(It=st(Et))>0&&Bt.length>It&&!Bt.warned){Bt.warned=!0;var sn=new Error("Possible EventEmitter memory leak detected. "+Bt.length+" "+String(Ot)+" listeners added. Use emitter.setMaxListeners() to increase limit");sn.name="MaxListenersExceededWarning",sn.emitter=Et,sn.type=Ot,sn.count=Bt.length,nn=sn,console&&console.warn&&console.warn(nn)}return Et}function vt(){for(var Et=[],Ot=0;Ot<arguments.length;Ot++)Et.push(arguments[Ot]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,et(this.listener,this.target,Et))}function ft(Et,Ot,Lt){var Tt={fired:!1,wrapFn:void 0,target:Et,type:Ot,listener:Lt},It=vt.bind(Tt);return It.listener=Lt,Tt.wrapFn=It,It}function pt(Et,Ot,Lt){var Tt=Et._events;if(Tt===void 0)return[];var It=Tt[Ot];return It===void 0?[]:typeof It=="function"?Lt?[It.listener||It]:[It]:Lt?function(mt){for(var Bt=new Array(mt.length),nn=0;nn<Bt.length;++nn)Bt[nn]=mt[nn].listener||mt[nn];return Bt}(It):yt(It,It.length)}function ct(Et){var Ot=this._events;if(Ot!==void 0){var Lt=Ot[Et];if(typeof Lt=="function")return 1;if(Lt!==void 0)return Lt.length}return 0}function yt(Et,Ot){for(var Lt=new Array(Ot),Tt=0;Tt<Ot;++Tt)Lt[Tt]=Et[Tt];return Lt}Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return it},set:function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Et+".");it=Et}}),j.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},j.prototype.setMaxListeners=function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Et+".");return this._maxListeners=Et,this},j.prototype.getMaxListeners=function(){return st(this)},j.prototype.emit=function(Et){for(var Ot=[],Lt=1;Lt<arguments.length;Lt++)Ot.push(arguments[Lt]);var Tt=Et==="error",It=this._events;if(It!==void 0)Tt=Tt&&It.error===void 0;else if(!Tt)return!1;if(Tt){var mt;if(Ot.length>0&&(mt=Ot[0]),mt instanceof Error)throw mt;var Bt=new Error("Unhandled error."+(mt?" ("+mt.message+")":""));throw Bt.context=mt,Bt}var nn=It[Et];if(nn===void 0)return!1;if(typeof nn=="function")et(nn,this,Ot);else{var sn=nn.length,xt=yt(nn,sn);for(Lt=0;Lt<sn;++Lt)et(xt[Lt],this,Ot)}return!0},j.prototype.addListener=function(Et,Ot){return ht(this,Et,Ot,!1)},j.prototype.on=j.prototype.addListener,j.prototype.prependListener=function(Et,Ot){return ht(this,Et,Ot,!0)},j.prototype.once=function(Et,Ot){if(typeof Ot!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ot);return this.on(Et,ft(this,Et,Ot)),this},j.prototype.prependOnceListener=function(Et,Ot){if(typeof Ot!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ot);return this.prependListener(Et,ft(this,Et,Ot)),this},j.prototype.removeListener=function(Et,Ot){var Lt,Tt,It,mt,Bt;if(typeof Ot!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ot);if((Tt=this._events)===void 0)return this;if((Lt=Tt[Et])===void 0)return this;if(Lt===Ot||Lt.listener===Ot)--this._eventsCount==0?this._events=Object.create(null):(delete Tt[Et],Tt.removeListener&&this.emit("removeListener",Et,Lt.listener||Ot));else if(typeof Lt!="function"){for(It=-1,mt=Lt.length-1;mt>=0;mt--)if(Lt[mt]===Ot||Lt[mt].listener===Ot){Bt=Lt[mt].listener,It=mt;break}if(It<0)return this;It===0?Lt.shift():function(nn,sn){for(;sn+1<nn.length;sn++)nn[sn]=nn[sn+1];nn.pop()}(Lt,It),Lt.length===1&&(Tt[Et]=Lt[0]),Tt.removeListener!==void 0&&this.emit("removeListener",Et,Bt||Ot)}return this},j.prototype.off=j.prototype.removeListener,j.prototype.removeAllListeners=function(Et){var Ot,Lt,Tt;if((Lt=this._events)===void 0)return this;if(Lt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Lt[Et]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Lt[Et]),this;if(arguments.length===0){var It,mt=Object.keys(Lt);for(Tt=0;Tt<mt.length;++Tt)(It=mt[Tt])!=="removeListener"&&this.removeAllListeners(It);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Ot=Lt[Et])=="function")this.removeListener(Et,Ot);else if(Ot!==void 0)for(Tt=Ot.length-1;Tt>=0;Tt--)this.removeListener(Et,Ot[Tt]);return this},j.prototype.listeners=function(Et){return pt(this,Et,!0)},j.prototype.rawListeners=function(Et){return pt(this,Et,!1)},j.listenerCount=function(Et,Ot){return typeof Et.listenerCount=="function"?Et.listenerCount(Ot):ct.call(Et,Ot)},j.prototype.listenerCount=ct,j.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]}},function(i,o,s){var _=s(147).Buffer,$=_.isEncoding||function(ct){switch((ct=""+ct)&&ct.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function et(ct){var yt;switch(this.encoding=function(Et){var Ot=function(Lt){if(!Lt)return"utf8";for(var Tt;;)switch(Lt){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Lt;default:if(Tt)return;Lt=(""+Lt).toLowerCase(),Tt=!0}}(Et);if(typeof Ot!="string"&&(_.isEncoding===$||!$(Et)))throw new Error("Unknown encoding: "+Et);return Ot||Et}(ct),this.encoding){case"utf16le":this.text=it,this.end=st,yt=4;break;case"utf8":this.fillLast=j,yt=4;break;case"base64":this.text=ht,this.end=vt,yt=3;break;default:return this.write=ft,void(this.end=pt)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(yt)}function tt(ct){return ct<=127?0:ct>>5==6?2:ct>>4==14?3:ct>>3==30?4:ct>>6==2?-1:-2}function j(ct){var yt=this.lastTotal-this.lastNeed,Et=function(Ot,Lt,Tt){if((192&Lt[0])!=128)return Ot.lastNeed=0,"";if(Ot.lastNeed>1&&Lt.length>1){if((192&Lt[1])!=128)return Ot.lastNeed=1,"";if(Ot.lastNeed>2&&Lt.length>2&&(192&Lt[2])!=128)return Ot.lastNeed=2,""}}(this,ct);return Et!==void 0?Et:this.lastNeed<=ct.length?(ct.copy(this.lastChar,yt,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ct.copy(this.lastChar,yt,0,ct.length),void(this.lastNeed-=ct.length))}function it(ct,yt){if((ct.length-yt)%2==0){var Et=ct.toString("utf16le",yt);if(Et){var Ot=Et.charCodeAt(Et.length-1);if(Ot>=55296&&Ot<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ct[ct.length-2],this.lastChar[1]=ct[ct.length-1],Et.slice(0,-1)}return Et}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ct[ct.length-1],ct.toString("utf16le",yt,ct.length-1)}function st(ct){var yt=ct&&ct.length?this.write(ct):"";if(this.lastNeed){var Et=this.lastTotal-this.lastNeed;return yt+this.lastChar.toString("utf16le",0,Et)}return yt}function ht(ct,yt){var Et=(ct.length-yt)%3;return Et===0?ct.toString("base64",yt):(this.lastNeed=3-Et,this.lastTotal=3,Et===1?this.lastChar[0]=ct[ct.length-1]:(this.lastChar[0]=ct[ct.length-2],this.lastChar[1]=ct[ct.length-1]),ct.toString("base64",yt,ct.length-Et))}function vt(ct){var yt=ct&&ct.length?this.write(ct):"";return this.lastNeed?yt+this.lastChar.toString("base64",0,3-this.lastNeed):yt}function ft(ct){return ct.toString(this.encoding)}function pt(ct){return ct&&ct.length?this.write(ct):""}o.StringDecoder=et,et.prototype.write=function(ct){if(ct.length===0)return"";var yt,Et;if(this.lastNeed){if((yt=this.fillLast(ct))===void 0)return"";Et=this.lastNeed,this.lastNeed=0}else Et=0;return Et<ct.length?yt?yt+this.text(ct,Et):this.text(ct,Et):yt||""},et.prototype.end=function(ct){var yt=ct&&ct.length?this.write(ct):"";return this.lastNeed?yt+"":yt},et.prototype.text=function(ct,yt){var Et=function(Lt,Tt,It){var mt=Tt.length-1;if(mt<It)return 0;var Bt=tt(Tt[mt]);return Bt>=0?(Bt>0&&(Lt.lastNeed=Bt-1),Bt):--mt<It||Bt===-2?0:(Bt=tt(Tt[mt]))>=0?(Bt>0&&(Lt.lastNeed=Bt-2),Bt):--mt<It||Bt===-2?0:(Bt=tt(Tt[mt]))>=0?(Bt>0&&(Bt===2?Bt=0:Lt.lastNeed=Bt-3),Bt):0}(this,ct,yt);if(!this.lastNeed)return ct.toString("utf8",yt);this.lastTotal=Et;var Ot=ct.length-(Et-this.lastNeed);return ct.copy(this.lastChar,0,Ot),ct.toString("utf8",yt,Ot)},et.prototype.fillLast=function(ct){if(this.lastNeed<=ct.length)return ct.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ct.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ct.length),this.lastNeed-=ct.length}},function(i,o,s){var _=s(16),$=Object.keys||function(ct){var yt=[];for(var Et in ct)yt.push(Et);return yt};i.exports=vt;var et=s(17);et.inherits=s(7);var tt=s(69),j=s(48);et.inherits(vt,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];vt.prototype[ht]||(vt.prototype[ht]=j.prototype[ht])}function vt(ct){if(!(this instanceof vt))return new vt(ct);tt.call(this,ct),j.call(this,ct),ct&&ct.readable===!1&&(this.readable=!1),ct&&ct.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ct&&ct.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ft)}function ft(){this.allowHalfOpen||this._writableState.ended||_.nextTick(pt,this)}function pt(ct){ct.end()}Object.defineProperty(vt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(vt.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ct){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ct,this._writableState.destroyed=ct)}}),vt.prototype._destroy=function(ct,yt){this.push(null),this.end(),_.nextTick(yt,ct)}},function(i,o,s){(function(_){function $(zt){var on=0;return function(){return on<zt.length?{done:!1,value:zt[on++]}:{done:!0}}}var et=typeof Object.defineProperties=="function"?Object.defineProperty:function(zt,on,_n){zt!=Array.prototype&&zt!=Object.prototype&&(zt[on]=_n.value)},tt=function(zt){zt=[typeof window=="object"&&window,typeof self=="object"&&self,typeof _=="object"&&_,zt];for(var on=0;on<zt.length;++on){var _n=zt[on];if(_n&&_n.Math==Math)return _n}throw Error("Cannot find global object")}(this);function j(zt,on){if(on){var _n=tt;zt=zt.split(".");for(var Rn=0;Rn<zt.length-1;Rn++){var Nn=zt[Rn];Nn in _n||(_n[Nn]={}),_n=_n[Nn]}(on=on(Rn=_n[zt=zt[zt.length-1]]))!=Rn&&on!=null&&et(_n,zt,{configurable:!0,writable:!0,value:on})}}function it(zt){var on=typeof Symbol<"u"&&Symbol.iterator&&zt[Symbol.iterator];return on?on.call(zt):{next:$(zt)}}j("Object.is",function(zt){return zt||function(on,_n){return on===_n?on!==0||1/on==1/_n:on!=on&&_n!=_n}}),j("Array.prototype.includes",function(zt){return zt||function(on,_n){var Rn=this;Rn instanceof String&&(Rn=String(Rn));var Nn=Rn.length;for(0>(_n=_n||0)&&(_n=Math.max(_n+Nn,0));_n<Nn;_n++){var rr=Rn[_n];if(rr===on||Object.is(rr,on))return!0}return!1}}),j("Promise",function(zt){function on(Ln){this.b=0,this.c=void 0,this.a=[];var Xn=this.f();try{Ln(Xn.resolve,Xn.reject)}catch(Er){Xn.reject(Er)}}function _n(){this.a=null}function Rn(Ln){return Ln instanceof on?Ln:new on(function(Xn){Xn(Ln)})}if(zt)return zt;_n.prototype.b=function(Ln){if(this.a==null){this.a=[];var Xn=this;this.c(function(){Xn.g()})}this.a.push(Ln)};var Nn=tt.setTimeout;_n.prototype.c=function(Ln){Nn(Ln,0)},_n.prototype.g=function(){for(;this.a&&this.a.length;){var Ln=this.a;this.a=[];for(var Xn=0;Xn<Ln.length;++Xn){var Er=Ln[Xn];Ln[Xn]=null;try{Er()}catch(Cr){this.f(Cr)}}}this.a=null},_n.prototype.f=function(Ln){this.c(function(){throw Ln})},on.prototype.f=function(){function Ln(Cr){return function(Qr){Er||(Er=!0,Cr.call(Xn,Qr))}}var Xn=this,Er=!1;return{resolve:Ln(this.m),reject:Ln(this.g)}},on.prototype.m=function(Ln){if(Ln===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(Ln instanceof on)this.o(Ln);else{e:switch(typeof Ln){case"object":var Xn=Ln!=null;break e;case"function":Xn=!0;break e;default:Xn=!1}Xn?this.l(Ln):this.h(Ln)}},on.prototype.l=function(Ln){var Xn=void 0;try{Xn=Ln.then}catch(Er){return void this.g(Er)}typeof Xn=="function"?this.u(Xn,Ln):this.h(Ln)},on.prototype.g=function(Ln){this.i(2,Ln)},on.prototype.h=function(Ln){this.i(1,Ln)},on.prototype.i=function(Ln,Xn){if(this.b!=0)throw Error("Cannot settle("+Ln+", "+Xn+"): Promise already settled in state"+this.b);this.b=Ln,this.c=Xn,this.j()},on.prototype.j=function(){if(this.a!=null){for(var Ln=0;Ln<this.a.length;++Ln)rr.b(this.a[Ln]);this.a=null}};var rr=new _n;return on.prototype.o=function(Ln){var Xn=this.f();Ln.w(Xn.resolve,Xn.reject)},on.prototype.u=function(Ln,Xn){var Er=this.f();try{Ln.call(Xn,Er.resolve,Er.reject)}catch(Cr){Er.reject(Cr)}},on.prototype.then=function(Ln,Xn){function Er(bo,Mo){return typeof bo=="function"?function(Ko){try{Cr(bo(Ko))}catch(ns){Qr(ns)}}:Mo}var Cr,Qr,jo=new on(function(bo,Mo){Cr=bo,Qr=Mo});return this.w(Er(Ln,Cr),Er(Xn,Qr)),jo},on.prototype.catch=function(Ln){return this.then(void 0,Ln)},on.prototype.w=function(Ln,Xn){function Er(){switch(Cr.b){case 1:Ln(Cr.c);break;case 2:Xn(Cr.c);break;default:throw Error("Unexpected state: "+Cr.b)}}var Cr=this;this.a==null?rr.b(Er):this.a.push(Er)},on.resolve=Rn,on.reject=function(Ln){return new on(function(Xn,Er){Er(Ln)})},on.race=function(Ln){return new on(function(Xn,Er){for(var Cr=it(Ln),Qr=Cr.next();!Qr.done;Qr=Cr.next())Rn(Qr.value).w(Xn,Er)})},on.all=function(Ln){var Xn=it(Ln),Er=Xn.next();return Er.done?Rn([]):new on(function(Cr,Qr){function jo(Ko){return function(ns){bo[Ko]=ns,--Mo==0&&Cr(bo)}}var bo=[],Mo=0;do bo.push(void 0),Mo++,Rn(Er.value).w(jo(bo.length-1),Qr),Er=Xn.next();while(!Er.done)})},on});var st=st||{},ht=this||self;function vt(zt,on){zt=zt.split("."),on=on||ht;for(var _n=0;_n<zt.length;_n++)if((on=on[zt[_n]])==null)return null;return on}function ft(){}function pt(zt){var on=typeof zt;if(on=="object"){if(!zt)return"null";if(zt instanceof Array)return"array";if(zt instanceof Object)return on;var _n=Object.prototype.toString.call(zt);if(_n=="[object Window]")return"object";if(_n=="[object Array]"||typeof zt.length=="number"&&zt.splice!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("splice"))return"array";if(_n=="[object Function]"||zt.call!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("call"))return"function"}else if(on=="function"&&zt.call===void 0)return"object";return on}function ct(zt){var on=typeof zt;return on=="object"&&zt!=null||on=="function"}function yt(zt,on,_n){return zt.call.apply(zt.bind,arguments)}function Et(zt,on,_n){if(!zt)throw Error();if(2<arguments.length){var Rn=Array.prototype.slice.call(arguments,2);return function(){var Nn=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Nn,Rn),zt.apply(on,Nn)}}return function(){return zt.apply(on,arguments)}}function Ot(zt,on,_n){return(Ot=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yt:Et).apply(null,arguments)}function Lt(zt,on){function _n(){}_n.prototype=on.prototype,zt.S=on.prototype,zt.prototype=new _n,zt.prototype.constructor=zt}function Tt(){this.a={}}function It(zt,on,_n,Rn){this.f=zt,this.c=on,this.b=_n,this.a=Rn}function mt(zt,on,_n,Rn){_n=_n===void 0?{}:_n,this.c=zt,this.a=_n,this.b=on,this.f=Rn===void 0?null:Rn}function Bt(zt,on,_n,Rn,Nn,rr){this.name=zt,this.a=Nn,this.b=rr}function nn(zt,on,_n){_n=_n===void 0?{}:_n;var Rn=Rn===void 0?new Tt:Rn;return new It(on,zt,_n,Rn)}function sn(zt,on,_n,Rn){return Rn instanceof Bt?Rn:new Bt(zt,_n,Rn.b||on.constructor,Rn.f,Rn.a,Rn.c)}function xt(zt){this.a=zt}function St(zt){switch(zt){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}}function Nt(zt){if(Error.captureStackTrace)Error.captureStackTrace(this,Nt);else{var on=Error().stack;on&&(this.stack=on)}zt&&(this.message=String(zt))}function Ct(zt,on){for(var _n="",Rn=(zt=zt.split("%s")).length-1,Nn=0;Nn<Rn;Nn++)_n+=zt[Nn]+(Nn<on.length?on[Nn]:"%s");Nt.call(this,_n+zt[Rn])}function Vt(){this.j=null,this.i=[],this.l=0,this.b=Kt,this.f=this.a=this.h=0,this.c=null,this.g=0}Tt.prototype.get=function(zt){return this.a[zt]},Tt.prototype.f=function(){return Object.keys(this.a)},It.prototype.getRequestMessage=function(){return this.f},It.prototype.getMethodDescriptor=function(){return this.c},It.prototype.getMetadata=function(){return this.b},It.prototype.getCallOptions=function(){return this.a},mt.prototype.getResponseMessage=function(){return this.c},mt.prototype.getMetadata=function(){return this.a},mt.prototype.getMethodDescriptor=function(){return this.b},mt.prototype.getStatus=function(){return this.f},xt.prototype.on=function(zt,on){return zt=="data"||zt=="error"?this:this.a.on(zt,on)},xt.prototype.removeListener=function(zt,on){return this.a.removeListener(zt,on)},xt.prototype.cancel=function(){this.a.cancel()},Lt(Nt,Error),Nt.prototype.name="CustomError",Lt(Ct,Nt),Ct.prototype.name="AssertionError";var Kt=0,Gt=1,Ut=2,Ht=3,qt=0,Pt=128;function wt(zt,on,_n,Rn){throw zt.b=Ht,zt.j="The stream is broken @"+zt.l+"/"+_n+". Error: "+Rn+`. With input:
`+on,Error(zt.j)}var $t=Array.prototype.indexOf?function(zt,on){return Array.prototype.indexOf.call(zt,on,void 0)}:function(zt,on){if(typeof zt=="string")return typeof on!="string"||on.length!=1?-1:zt.indexOf(on,0);for(var _n=0;_n<zt.length;_n++)if(_n in zt&&zt[_n]===on)return _n;return-1},Xt,un=String.prototype.trim?function(zt){return zt.trim()}:function(zt){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(zt)[1]};function dn(zt,on){return zt.indexOf(on)!=-1}function mn(zt,on){return zt<on?-1:zt>on?1:0}e:{var an=ht.navigator;if(an){var en=an.userAgent;if(en){Xt=en;break e}}Xt=""}var Mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jt(zt){var on=1;zt=zt.split(":");for(var _n=[];0<on&&zt.length;)_n.push(zt.shift()),on--;return zt.length&&_n.push(zt.join(":")),_n}function Qt(zt){return Qt[" "](zt),zt}Qt[" "]=ft;var gn,hn,An=dn(Xt,"Opera"),Mn=dn(Xt,"Trident")||dn(Xt,"MSIE"),Yn=dn(Xt,"Edge"),Nr=dn(Xt,"Gecko")&&!(dn(Xt.toLowerCase(),"webkit")&&!dn(Xt,"Edge"))&&!(dn(Xt,"Trident")||dn(Xt,"MSIE"))&&!dn(Xt,"Edge"),ro=dn(Xt.toLowerCase(),"webkit")&&!dn(Xt,"Edge");function to(){var zt=ht.document;return zt?zt.documentMode:void 0}e:{var zr="",In=(hn=Xt,Nr?/rv:([^\);]+)(\)|;)/.exec(hn):Yn?/Edge\/([\d\.]+)/.exec(hn):Mn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hn):ro?/WebKit\/(\S+)/.exec(hn):An?/(?:Version)[ \/]?(\S+)/.exec(hn):void 0);if(In&&(zr=In?In[1]:""),Mn){var kn=to();if(kn!=null&&kn>parseFloat(zr)){gn=String(kn);break e}}gn=zr}var Kn,vr={};function yr(zt){return function(on,_n){var Rn=vr;return Object.prototype.hasOwnProperty.call(Rn,on)?Rn[on]:Rn[on]=_n(on)}(zt,function(){for(var on=0,_n=un(String(gn)).split("."),Rn=un(String(zt)).split("."),Nn=Math.max(_n.length,Rn.length),rr=0;on==0&&rr<Nn;rr++){var Ln=_n[rr]||"",Xn=Rn[rr]||"";do{if(Ln=/(\d*)(\D*)(.*)/.exec(Ln)||["","","",""],Xn=/(\d*)(\D*)(.*)/.exec(Xn)||["","","",""],Ln[0].length==0&&Xn[0].length==0)break;on=mn(Ln[1].length==0?0:parseInt(Ln[1],10),Xn[1].length==0?0:parseInt(Xn[1],10))||mn(Ln[2].length==0,Xn[2].length==0)||mn(Ln[2],Xn[2]),Ln=Ln[3],Xn=Xn[3]}while(on==0)}return 0<=on})}if(ht.document&&Mn){var Wr=to();Kn=Wr||parseInt(gn,10)||void 0}else Kn=void 0;var Hr=Kn;function Lr(){this.F=this.F}Lr.prototype.F=!1;var Ir,jr=Object.freeze||function(zt){return zt};(Ir=!Mn)||(Ir=9<=Number(Hr));var Co=Ir,Jo=Mn&&!yr("9"),ps=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var zt=!1,on=Object.defineProperty({},"passive",{get:function(){zt=!0}});try{ht.addEventListener("test",ft,on),ht.removeEventListener("test",ft,on)}catch{}return zt}();function ds(zt,on){this.type=zt,this.a=this.target=on,this.defaultPrevented=!1}function Ss(zt,on){if(ds.call(this,zt?zt.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,zt){var _n=this.type=zt.type,Rn=zt.changedTouches&&zt.changedTouches.length?zt.changedTouches[0]:null;if(this.target=zt.target||zt.srcElement,this.a=on,on=zt.relatedTarget){if(Nr){e:{try{Qt(on.nodeName);var Nn=!0;break e}catch{}Nn=!1}Nn||(on=null)}}else _n=="mouseover"?on=zt.fromElement:_n=="mouseout"&&(on=zt.toElement);this.relatedTarget=on,Rn?(this.clientX=Rn.clientX!==void 0?Rn.clientX:Rn.pageX,this.clientY=Rn.clientY!==void 0?Rn.clientY:Rn.pageY,this.screenX=Rn.screenX||0,this.screenY=Rn.screenY||0):(this.clientX=zt.clientX!==void 0?zt.clientX:zt.pageX,this.clientY=zt.clientY!==void 0?zt.clientY:zt.pageY,this.screenX=zt.screenX||0,this.screenY=zt.screenY||0),this.button=zt.button,this.key=zt.key||"",this.ctrlKey=zt.ctrlKey,this.altKey=zt.altKey,this.shiftKey=zt.shiftKey,this.metaKey=zt.metaKey,this.pointerId=zt.pointerId||0,this.pointerType=typeof zt.pointerType=="string"?zt.pointerType:Al[zt.pointerType]||"",this.c=zt,zt.defaultPrevented&&this.b()}}ds.prototype.b=function(){this.defaultPrevented=!0},Lt(Ss,ds);var Al=jr({2:"touch",3:"pen",4:"mouse"});Ss.prototype.b=function(){Ss.S.b.call(this);var zt=this.c;if(zt.preventDefault)zt.preventDefault();else if(zt.returnValue=!1,Jo)try{(zt.ctrlKey||112<=zt.keyCode&&123>=zt.keyCode)&&(zt.keyCode=-1)}catch{}};var qo="closure_listenable_"+(1e6*Math.random()|0),na=0;function Gr(zt,on,_n,Rn,Nn){this.listener=zt,this.proxy=null,this.src=on,this.type=_n,this.capture=!!Rn,this.A=Nn,this.key=++na,this.s=this.v=!1}function bn(zt){zt.s=!0,zt.listener=null,zt.proxy=null,zt.src=null,zt.A=null}function En(zt){this.src=zt,this.a={},this.b=0}function Bn(zt,on){var _n=on.type;if(_n in zt.a){var Rn,Nn=zt.a[_n],rr=$t(Nn,on);(Rn=0<=rr)&&Array.prototype.splice.call(Nn,rr,1),Rn&&(bn(on),zt.a[_n].length==0&&(delete zt.a[_n],zt.b--))}}function ur(zt,on,_n,Rn){for(var Nn=0;Nn<zt.length;++Nn){var rr=zt[Nn];if(!rr.s&&rr.listener==on&&rr.capture==!!_n&&rr.A==Rn)return Nn}return-1}En.prototype.add=function(zt,on,_n,Rn,Nn){var rr=zt.toString();(zt=this.a[rr])||(zt=this.a[rr]=[],this.b++);var Ln=ur(zt,on,Rn,Nn);return-1<Ln?(on=zt[Ln],_n||(on.v=!1)):((on=new Gr(on,this.src,rr,!!Rn,Nn)).v=_n,zt.push(on)),on};var pr="closure_lm_"+(1e6*Math.random()|0),Zr={};function Xr(zt,on,_n,Rn,Nn){if(Rn&&Rn.once)(function Ln(Xn,Er,Cr,Qr,jo){if(Array.isArray(Er))for(var bo=0;bo<Er.length;bo++)Ln(Xn,Er[bo],Cr,Qr,jo);else Cr=Jn(Cr),Xn&&Xn[qo]?Xn.f.add(String(Er),Cr,!0,ct(Qr)?!!Qr.capture:!!Qr,jo):qr(Xn,Er,Cr,!0,Qr,jo)})(zt,on,_n,Rn,Nn);else if(Array.isArray(on))for(var rr=0;rr<on.length;rr++)Xr(zt,on[rr],_n,Rn,Nn);else _n=Jn(_n),zt&&zt[qo]?zt.f.add(String(on),_n,!1,ct(Rn)?!!Rn.capture:!!Rn,Nn):qr(zt,on,_n,!1,Rn,Nn)}function qr(zt,on,_n,Rn,Nn,rr){if(!on)throw Error("Invalid event type");var Ln=ct(Nn)?!!Nn.capture:!!Nn,Xn=Cn(zt);if(Xn||(zt[pr]=Xn=new En(zt)),!(_n=Xn.add(on,_n,Rn,Ln,rr)).proxy)if(Rn=function(){var Er=Sn,Cr=Co?function(Qr){return Er.call(Cr.src,Cr.listener,Qr)}:function(Qr){if(!(Qr=Er.call(Cr.src,Cr.listener,Qr)))return Qr};return Cr}(),_n.proxy=Rn,Rn.src=zt,Rn.listener=_n,zt.addEventListener)ps||(Nn=Ln),Nn===void 0&&(Nn=!1),zt.addEventListener(on.toString(),Rn,Nn);else if(zt.attachEvent)zt.attachEvent(Tr(on.toString()),Rn);else{if(!zt.addListener||!zt.removeListener)throw Error("addEventListener and attachEvent are unavailable.");zt.addListener(Rn)}}function Mr(zt){if(typeof zt!="number"&&zt&&!zt.s){var on=zt.src;if(on&&on[qo])Bn(on.f,zt);else{var _n=zt.type,Rn=zt.proxy;on.removeEventListener?on.removeEventListener(_n,Rn,zt.capture):on.detachEvent?on.detachEvent(Tr(_n),Rn):on.addListener&&on.removeListener&&on.removeListener(Rn),(_n=Cn(on))?(Bn(_n,zt),_n.b==0&&(_n.src=null,on[pr]=null)):bn(zt)}}}function Tr(zt){return zt in Zr?Zr[zt]:Zr[zt]="on"+zt}function Wo(zt,on,_n,Rn){var Nn=!0;if((zt=Cn(zt))&&(on=zt.a[on.toString()]))for(on=on.concat(),zt=0;zt<on.length;zt++){var rr=on[zt];rr&&rr.capture==_n&&!rr.s&&(rr=Vn(rr,Rn),Nn=Nn&&rr!==!1)}return Nn}function Vn(zt,on){var _n=zt.listener,Rn=zt.A||zt.src;return zt.v&&Mr(zt),_n.call(Rn,on)}function Sn(zt,on){if(zt.s)return!0;if(!Co){var _n=on||vt("window.event");on=new Ss(_n,this);var Rn=!0;if(!(0>_n.keyCode||_n.returnValue!=null)){e:{var Nn=!1;if(_n.keyCode==0)try{_n.keyCode=-1;break e}catch{Nn=!0}(Nn||_n.returnValue==null)&&(_n.returnValue=!0)}for(_n=[],Nn=on.a;Nn;Nn=Nn.parentNode)_n.push(Nn);for(zt=zt.type,Nn=_n.length-1;0<=Nn;Nn--){on.a=_n[Nn];var rr=Wo(_n[Nn],zt,!0,on);Rn=Rn&&rr}for(Nn=0;Nn<_n.length;Nn++)on.a=_n[Nn],rr=Wo(_n[Nn],zt,!1,on),Rn=Rn&&rr}return Rn}return Vn(zt,new Ss(on,this))}function Cn(zt){return(zt=zt[pr])instanceof En?zt:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jn(zt){return pt(zt)=="function"?zt:(zt[Hn]||(zt[Hn]=function(on){return zt.handleEvent(on)}),zt[Hn])}function ir(){Lr.call(this),this.f=new En(this),this.N=this}function gr(zt,on){zt=zt.N;var _n=on.type||on;if(typeof on=="string")on=new ds(on,zt);else if(on instanceof ds)on.target=on.target||zt;else{var Rn=on;(function(Nn,rr){for(var Ln,Xn,Er=1;Er<arguments.length;Er++){for(Ln in Xn=arguments[Er])Nn[Ln]=Xn[Ln];for(var Cr=0;Cr<Mt.length;Cr++)Ln=Mt[Cr],Object.prototype.hasOwnProperty.call(Xn,Ln)&&(Nn[Ln]=Xn[Ln])}})(on=new ds(_n,zt),Rn)}_r(zt=on.a=zt,_n,!0,on),_r(zt,_n,!1,on)}function _r(zt,on,_n,Rn){if(on=zt.f.a[String(on)]){on=on.concat();for(var Nn=!0,rr=0;rr<on.length;++rr){var Ln=on[rr];if(Ln&&!Ln.s&&Ln.capture==_n){var Xn=Ln.listener,Er=Ln.A||Ln.src;Ln.v&&Bn(zt.f,Ln),Nn=Xn.call(Er,Rn)!==!1&&Nn}}}}function fr(zt,on,_n){if(pt(zt)=="function")_n&&(zt=Ot(zt,_n));else{if(!zt||typeof zt.handleEvent!="function")throw Error("Invalid listener argument");zt=Ot(zt.handleEvent,zt)}return 2147483647<Number(on)?-1:ht.setTimeout(zt,on||0)}function xr(zt,on,_n){this.reset(zt,on,_n,void 0,void 0)}Lt(ir,Lr),ir.prototype[qo]=!0,ir.prototype.addEventListener=function(zt,on,_n,Rn){Xr(this,zt,on,_n,Rn)},ir.prototype.removeEventListener=function(zt,on,_n,Rn){(function Nn(rr,Ln,Xn,Er,Cr){if(Array.isArray(Ln))for(var Qr=0;Qr<Ln.length;Qr++)Nn(rr,Ln[Qr],Xn,Er,Cr);else Er=ct(Er)?!!Er.capture:!!Er,Xn=Jn(Xn),rr&&rr[qo]?(rr=rr.f,(Ln=String(Ln).toString())in rr.a&&-1<(Xn=ur(Qr=rr.a[Ln],Xn,Er,Cr))&&(bn(Qr[Xn]),Array.prototype.splice.call(Qr,Xn,1),Qr.length==0&&(delete rr.a[Ln],rr.b--))):rr&&(rr=Cn(rr))&&(Ln=rr.a[Ln.toString()],rr=-1,Ln&&(rr=ur(Ln,Xn,Er,Cr)),(Xn=-1<rr?Ln[rr]:null)&&Mr(Xn))})(this,zt,on,_n,Rn)},xr.prototype.a=null;function Yr(zt){this.f=zt,this.b=this.c=this.a=null}function po(zt,on){this.name=zt,this.value=on}xr.prototype.reset=function(zt,on,_n,Rn,Nn){delete this.a},po.prototype.toString=function(){return this.name};var io=new po("SEVERE",1e3),ko=new po("CONFIG",700),Do=new po("FINE",500);function Lo(zt){return zt.c?zt.c:zt.a?Lo(zt.a):(function(on,_n){throw new Ct("Failure"+(on?": "+on:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)}Yr.prototype.log=function(zt,on,_n){if(zt.value>=Lo(this).value)for(pt(on)=="function"&&(on=on()),zt=new xr(zt,String(on),this.f),_n&&(zt.a=_n),_n=this;_n;)_n=_n.a};var zo,ts={},ms=null;function Eo(zt,on){zt&&zt.log(Do,on,void 0)}function Rs(){}function As(zt){var on;return(on=zt.a)||(on={},$r(zt)&&(on[0]=!0,on[1]=!0),on=zt.a=on),on}function Su(){}function cu(zt){return(zt=$r(zt))?new ActiveXObject(zt):new XMLHttpRequest}function $r(zt){if(!zt.b&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var on=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],_n=0;_n<on.length;_n++){var Rn=on[_n];try{return new ActiveXObject(Rn),zt.b=Rn}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return zt.b}function xa(zt,on){this.b={},this.a=[],this.c=0;var _n=arguments.length;if(1<_n){if(_n%2)throw Error("Uneven number of arguments");for(var Rn=0;Rn<_n;Rn+=2)this.set(arguments[Rn],arguments[Rn+1])}else zt&&hu(this,zt)}function Gs(zt){if(zt.c!=zt.a.length){for(var on=0,_n=0;on<zt.a.length;){var Rn=zt.a[on];ru(zt.b,Rn)&&(zt.a[_n++]=Rn),on++}zt.a.length=_n}if(zt.c!=zt.a.length){var Nn={};for(_n=on=0;on<zt.a.length;)ru(Nn,Rn=zt.a[on])||(zt.a[_n++]=Rn,Nn[Rn]=1),on++;zt.a.length=_n}}function hu(zt,on){if(on instanceof xa)for(var _n=on.f(),Rn=0;Rn<_n.length;Rn++)zt.set(_n[Rn],on.get(_n[Rn]));else for(_n in on)zt.set(_n,on[_n])}function ru(zt,on){return Object.prototype.hasOwnProperty.call(zt,on)}Rs.prototype.a=null,Lt(Su,Rs),zo=new Su,xa.prototype.f=function(){return Gs(this),this.a.concat()},xa.prototype.get=function(zt,on){return ru(this.b,zt)?this.b[zt]:on},xa.prototype.set=function(zt,on){ru(this.b,zt)||(this.c++,this.a.push(zt)),this.b[zt]=on},xa.prototype.forEach=function(zt,on){for(var _n=this.f(),Rn=0;Rn<_n.length;Rn++){var Nn=_n[Rn],rr=this.get(Nn);zt.call(on,rr,Nn,this)}};var Au=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function El(zt){ir.call(this),this.headers=new xa,this.D=zt||null,this.c=!1,this.C=this.a=null,this.J=this.o="",this.g=0,this.i="",this.h=this.I=this.m=this.G=!1,this.l=0,this.u=null,this.j=nm,this.B=this.H=!1}Lt(El,ir);var nm="",tp=El.prototype,wo=function zt(on){var _n;if(ms||(ms=new Yr(""),ts[""]=ms,ms.c=ko),!(_n=ts[on])){_n=new Yr(on);var Rn=on.lastIndexOf("."),Nn=on.substr(Rn+1);(Rn=zt(on.substr(0,Rn))).b||(Rn.b={}),Rn.b[Nn]=_n,_n.a=Rn,ts[on]=_n}return _n}("goog.net.XhrIo");tp.b=wo;var as=/^https?$/i,us=["POST","PUT"];function Eu(zt,on,_n){if(zt.a)throw Error("[goog.net.XhrIo] Object is active with another request="+zt.o+"; newUri="+on);zt.o=on,zt.i="",zt.g=0,zt.J="POST",zt.G=!1,zt.c=!0,zt.a=zt.D?cu(zt.D):cu(zo),zt.C=zt.D?As(zt.D):As(zo),zt.a.onreadystatechange=Ot(zt.K,zt);try{Eo(zt.b,Us(zt,"Opening Xhr")),zt.I=!0,zt.a.open("POST",String(on),!0),zt.I=!1}catch(rr){return Eo(zt.b,Us(zt,"Error opening Xhr: "+rr.message)),void rs(zt,rr)}on=_n||"";var Rn=function(rr){e:{for(var Ln=np,Xn=rr.length,Er=typeof rr=="string"?rr.split(""):rr,Cr=0;Cr<Xn;Cr++)if(Cr in Er&&Ln.call(void 0,Er[Cr],Cr,rr)){Ln=Cr;break e}Ln=-1}return 0>Ln?null:typeof rr=="string"?rr.charAt(Ln):rr[Ln]}((_n=new xa(zt.headers)).f()),Nn=ht.FormData&&on instanceof ht.FormData;!(0<=$t(us,"POST"))||Rn||Nn||_n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_n.forEach(function(rr,Ln){this.a.setRequestHeader(Ln,rr)},zt),zt.j&&(zt.a.responseType=zt.j),"withCredentials"in zt.a&&zt.a.withCredentials!==zt.H&&(zt.a.withCredentials=zt.H);try{Bl(zt),0<zt.l&&(zt.B=function(rr){return Mn&&yr(9)&&typeof rr.timeout=="number"&&rr.ontimeout!==void 0}(zt.a),Eo(zt.b,Us(zt,"Will abort after "+zt.l+"ms if incomplete, xhr2 "+zt.B)),zt.B?(zt.a.timeout=zt.l,zt.a.ontimeout=Ot(zt.L,zt)):zt.u=fr(zt.L,zt.l,zt)),Eo(zt.b,Us(zt,"Sending request")),zt.m=!0,zt.a.send(on),zt.m=!1}catch(rr){Eo(zt.b,Us(zt,"Send error: "+rr.message)),rs(zt,rr)}}function np(zt){return zt.toLowerCase()=="content-type"}function rs(zt,on){zt.c=!1,zt.a&&(zt.h=!0,zt.a.abort(),zt.h=!1),zt.i=on,zt.g=5,Uu(zt),fu(zt)}function Uu(zt){zt.G||(zt.G=!0,gr(zt,"complete"),gr(zt,"error"))}function zu(zt){if(zt.c&&st!==void 0){if(zt.C[1]&&ys(zt)==4&&zt.getStatus()==2)Eo(zt.b,Us(zt,"Local request error detected and ignored"));else if(zt.m&&ys(zt)==4)fr(zt.K,0,zt);else if(gr(zt,"readystatechange"),ys(zt)==4){Eo(zt.b,Us(zt,"Request complete")),zt.c=!1;try{var on,_n=zt.getStatus();e:switch(_n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Rn=!0;break e;default:Rn=!1}if(!(on=Rn)){var Nn;if(Nn=_n===0){var rr=String(zt.o).match(Au)[1]||null;if(!rr&&ht.self&&ht.self.location){var Ln=ht.self.location.protocol;rr=Ln.substr(0,Ln.length-1)}Nn=!as.test(rr?rr.toLowerCase():"")}on=Nn}if(on)gr(zt,"complete"),gr(zt,"success");else{zt.g=6;try{var Xn=2<ys(zt)?zt.a.statusText:""}catch(Er){Eo(zt.b,"Can not get status: "+Er.message),Xn=""}zt.i=Xn+" ["+zt.getStatus()+"]",Uu(zt)}}finally{fu(zt)}}}}function fu(zt){if(zt.a){Bl(zt);var on=zt.a,_n=zt.C[0]?ft:null;zt.a=null,zt.C=null,gr(zt,"ready");try{on.onreadystatechange=_n}catch(Rn){(zt=zt.b)&&zt.log(io,"Problem encountered resetting onreadystatechange: "+Rn.message,void 0)}}}function Bl(zt){zt.a&&zt.B&&(zt.a.ontimeout=null),zt.u&&(ht.clearTimeout(zt.u),zt.u=null)}function ys(zt){return zt.a?zt.a.readyState:0}function Cm(zt,on){if(zt.a&&ys(zt)==4)return(zt=zt.a.getResponseHeader(on))===null?void 0:zt}function Us(zt,on){return on+" ["+zt.J+" "+zt.o+" "+zt.getStatus()+"]"}El.prototype.L=function(){st!==void 0&&this.a&&(this.i="Timed out after "+this.l+"ms, aborting",this.g=8,Eo(this.b,Us(this,this.i)),gr(this,"timeout"),this.abort(8))},El.prototype.abort=function(zt){this.a&&this.c&&(Eo(this.b,Us(this,"Aborting")),this.c=!1,this.h=!0,this.a.abort(),this.h=!1,this.g=zt||7,gr(this,"complete"),gr(this,"abort"),fu(this))},El.prototype.K=function(){this.F||(this.I||this.m||this.h?zu(this):this.O())},El.prototype.O=function(){zu(this)},El.prototype.getStatus=function(){try{return 2<ys(this)?this.a.status:-1}catch{return-1}};var Vu={},Qs=null;function Wu(zt){var on=zt.length,_n=3*on/4;_n%3?_n=Math.floor(_n):dn("=.",zt[on-1])&&(_n=dn("=.",zt[on-2])?_n-2:_n-1);var Rn=new Uint8Array(_n),Nn=0;return function(rr,Ln){function Xn(Mo){for(;Er<rr.length;){var Ko=rr.charAt(Er++),ns=Qs[Ko];if(ns!=null)return ns;if(!/^[\s\xa0]*$/.test(Ko))throw Error("Unknown base64 encoding at char: "+Ko)}return Mo}rp();for(var Er=0;;){var Cr=Xn(-1),Qr=Xn(0),jo=Xn(64),bo=Xn(64);if(bo===64&&Cr===-1)break;Ln(Cr<<2|Qr>>4),jo!=64&&(Ln(Qr<<4&240|jo>>2),bo!=64&&Ln(jo<<6&192|bo))}}(zt,function(rr){Rn[Nn++]=rr}),Rn.subarray(0,Nn)}function rp(){if(!Qs){Qs={};for(var zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),on=["+/=","+/","-_=","-_.","-_"],_n=0;5>_n;_n++){var Rn=zt.concat(on[_n].split(""));Vu[_n]=Rn;for(var Nn=0;Nn<Rn.length;Nn++){var rr=Rn[Nn];Qs[rr]===void 0&&(Qs[rr]=Nn)}}}}var jp=["content-type","grpc-status","grpc-message"];function ga(zt){this.a=zt.T,this.l=null,this.b=[],this.h=[],this.g=[],this.f=[],this.c=[],this.j=!1,this.i=0,this.m=new Vt;var on=this;Xr(this.a,"readystatechange",function(){var _n=on.a;if(_n=_n.a?_n.a.getResponseHeader("Content-Type"):null){if((_n=_n.toLowerCase()).lastIndexOf("application/grpc-web-text",0)==0){_n=on.a;try{var Rn=_n.a?_n.a.responseText:""}catch(Cr){Eo(_n.b,"Can not get responseText: "+Cr.message),Rn=""}if(Rn=(_n=Rn||"").length-_n.length%4,(_n=_n.substr(on.i,Rn-on.i)).length==0)return;on.i=Rn,_n=Wu(_n)}else{if(_n.lastIndexOf("application/grpc",0)!=0)return void Il(on,{code:2,message:"Unknown Content-type received.",metadata:{}});_n=new Uint8Array(function(Cr){try{if(!Cr.a)return null;if("response"in Cr.a)return Cr.a.response;switch(Cr.j){case nm:case"text":return Cr.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Cr.a)return Cr.a.mozResponseArrayBuffer}var Qr=Cr.b;return Qr&&Qr.log(io,"Response type "+Cr.j+" is not supported on this browser",void 0),null}catch(jo){return Eo(Cr.b,"Can not get response: "+jo.message),null}}(on.a))}Rn=null;try{Rn=function(Cr,Qr){function jo(iu){Io.f++,Io.a=(Io.a<<8)+iu,Io.f==4&&(Io.b=Ut,Io.g=0,typeof Uint8Array<"u"?Io.c=new Uint8Array(Io.a):Io.c=Array(Io.a),Io.a==0&&Mo())}function bo(iu){Io.c[Io.g++]=iu,Io.g==Io.a&&Mo()}function Mo(){var iu={};iu[Io.h]=Io.c,Io.i.push(iu),Io.b=Kt}var Ko,ns,Io=Cr,Cl=0;for(Ko=Qr instanceof Uint8Array||Qr instanceof Array?Qr:new Uint8Array(Qr);Cl<Ko.length;){switch(Io.b){case Ht:wt(Io,Ko,Cl,"stream already broken");break;case Kt:(ns=Ko[Cl])==qt||ns==Pt?Io.h=ns:wt(Io,Ko,Cl,"invalid frame byte"),Io.b=Gt,Io.a=0,Io.f=0;break;case Gt:jo(Ko[Cl]);break;case Ut:bo(Ko[Cl]);break;default:throw Error("unexpected parser state: "+Io.b)}Io.l++,Cl++}return Cr=Io.i,Io.i=[],0<Cr.length?Cr:null}(on.m,_n)}catch{Il(on,{code:2,message:"Error in parsing response body",metadata:{}})}if(Rn)for(_n=0;_n<Rn.length;_n++){if(qt in Rn[_n]){var Nn=Rn[_n][qt];if(Nn)try{var rr=on.l(Nn);if(rr){Nn=on;for(var Ln=rr,Xn=0;Xn<Nn.b.length;Xn++)Nn.b[Xn](Ln)}}catch{Il(on,{code:2,message:"Error in response deserializer function.",metadata:{}})}}if(Pt in Rn[_n]&&0<Rn[_n][Pt].length){for(Nn="",Ln=0;Ln<Rn[_n][Pt].length;Ln++)Nn+=String.fromCharCode(Rn[_n][Pt][Ln]);for(Nn=Nn.trim().split(`\r
`),Ln={},Xn=0;Xn<Nn.length;Xn++){var Er=Nn[Xn].indexOf(":");Ln[Nn[Xn].substring(0,Er).trim()]=Nn[Xn].substring(Er+1).trim()}Nn=Ln,Ln=0,Xn="","grpc-status"in Nn&&(Ln=Nn["grpc-status"],delete Nn["grpc-status"]),"grpc-message"in Nn&&(Xn=Nn["grpc-message"],delete Nn["grpc-message"]),Il(on,{code:Number(Ln),message:Xn,metadata:Nn})}}}}),Xr(this.a,"complete",function(){var _n=on.a.g,Rn="",Nn={},rr=function(Xn){var Er={};Xn=(Xn.a&&ys(Xn)==4&&Xn.a.getAllResponseHeaders()||"").split(`\r
`);for(var Cr=0;Cr<Xn.length;Cr++)if(!/^[\s\xa0]*$/.test(Xn[Cr])){var Qr=jt(Xn[Cr]),jo=Qr[0];if(typeof(Qr=Qr[1])=="string"){Qr=Qr.trim();var bo=Er[jo]||[];Er[jo]=bo,bo.push(Qr)}}return function(Mo,Ko){var ns,Io={};for(ns in Mo)Io[ns]=Ko.call(void 0,Mo[ns],ns,Mo);return Io}(Er,function(Mo){return Mo.join(", ")})}(on.a);if(Object.keys(rr).forEach(function(Xn){jp.includes(Xn)||(Nn[Xn]=rr[Xn])}),function(Xn,Er){for(var Cr=0;Cr<Xn.g.length;Cr++)Xn.g[Cr](Er)}(on,Nn),_n!=0){switch(_n){case 7:var Ln=10;break;case 8:Ln=4;break;case 6:Ln=function(Xn){switch(Xn){case 200:return 0;case 400:return 3;case 401:return 16;case 403:return 7;case 404:return 5;case 409:return 10;case 412:return 9;case 429:return 8;case 499:return 1;case 500:return 2;case 501:return 12;case 503:return 14;case 504:return 4;default:return 2}}(on.a.getStatus());break;default:Ln=14}Ln==10&&on.j||Il(on,{code:Ln,message:St(_n),metadata:{}})}else _n=!1,"grpc-status"in rr&&(Ln=Cm(on.a,"grpc-status"),"grpc-message"in rr&&(Rn=Cm(on.a,"grpc-message")),Number(Ln)!=0&&(Il(on,{code:Number(Ln),message:Rn,metadata:rr}),_n=!0)),_n||function(Xn){for(var Er=0;Er<Xn.c.length;Er++)Xn.c[Er]()}(on)})}function Xl(zt,on){-1<(on=zt.indexOf(on))&&zt.splice(on,1)}function Il(zt,on){if(on.code!=0)for(var _n={code:on.code,message:decodeURIComponent(on.message||""),metadata:on.metadata},Rn=0;Rn<zt.f.length;Rn++)zt.f[Rn](_n);for(on={code:on.code,details:decodeURIComponent(on.message||""),metadata:on.metadata},_n=0;_n<zt.h.length;_n++)zt.h[_n](on)}function _s(zt){this.a=vt("format",zt)||"text",this.f=vt("suppressCorsPreflight",zt)||!1,this.c=vt("withCredentials",zt)||!1,this.b=vt("streamInterceptors",zt)||[],this.g=vt("unaryInterceptors",zt)||[]}function zs(zt,on,_n){var Rn=on.getMethodDescriptor(),Nn=_n+Rn.name;(_n=new El).H=zt.c;var rr=new ga({T:_n});if(rr.l=Rn.b,hu(_n.headers,on.getMetadata()),zt.a=="text"?(_n.headers.set("Content-Type","application/grpc-web-text"),_n.headers.set("Accept","application/grpc-web-text")):_n.headers.set("Content-Type","application/grpc-web+proto"),_n.headers.set("X-User-Agent","grpc-web-javascript/0.1"),_n.headers.set("X-Grpc-Web","1"),ru(_n.headers.b,"deadline")){var Ln=_n.headers.get("deadline");Ln=Math.round(Ln-new Date().getTime());var Xn=_n.headers;ru(Xn.b,"deadline")&&(delete Xn.b.deadline,Xn.c--,Xn.a.length>2*Xn.c&&Gs(Xn)),1/0===Ln&&(Ln=0),0<Ln&&_n.headers.set("grpc-timeout",Ln+"m")}if(zt.f){Gs(Xn=_n.headers),Ln={};for(var Er=0;Er<Xn.a.length;Er++){var Cr=Xn.a[Er];Ln[Cr]=Xn.b[Cr]}(Xn=_n.headers).b={},Xn.a.length=0,Xn.c=0;e:{for(Qr in Ln){var Qr=!1;break e}Qr=!0}Qr||(Ln=function(Mo){var Ko="";return function(ns,Io){for(var Cl in ns)Io.call(void 0,ns[Cl],Cl,ns)}(Mo,function(ns,Io){Ko+=Io,Ko+=":",Ko+=ns,Ko+=`\r
`}),Ko}(Ln),typeof Nn=="string"?(Qr=encodeURIComponent("$httpHeaders"),(Qr+=Ln=Ln!=null?"="+encodeURIComponent(String(Ln)):"")&&(0>(Ln=Nn.indexOf("#"))&&(Ln=Nn.length),0>(Xn=Nn.indexOf("?"))||Xn>Ln?(Xn=Ln,Er=""):Er=Nn.substring(Xn+1,Ln),Ln=(Nn=[Nn.substr(0,Xn),Er,Nn.substr(Ln)])[1],Nn[1]=Qr?Ln?Ln+"&"+Qr:Qr:Ln,Nn=Nn[0]+(Nn[1]?"?"+Nn[1]:"")+Nn[2])):Nn.a("$httpHeaders",Ln))}for(Rn=(on=(0,Rn.a)(on.getRequestMessage())).length,Qr=[0,0,0,0],Ln=new Uint8Array(5+Rn),Xn=3;0<=Xn;Xn--)Qr[Xn]=Rn%256,Rn>>>=8;if(Ln.set(new Uint8Array(Qr),1),Ln.set(on,5),on=Ln,zt.a=="text"){var jo;for(zt=on,jo===void 0&&(jo=0),rp(),jo=Vu[jo],on=[],Rn=0;Rn<zt.length;Rn+=3){Cr=zt[Rn];var bo=(Qr=Rn+1<zt.length)?zt[Rn+1]:0;Xn=Cr>>2,Cr=(3&Cr)<<4|bo>>4,bo=(15&bo)<<2|(Er=(Ln=Rn+2<zt.length)?zt[Rn+2]:0)>>6,Er&=63,Ln||(Er=64,Qr||(bo=64)),on.push(jo[Xn],jo[Cr],jo[bo]||"",jo[Er]||"")}on=on.join("")}else zt.a=="binary"&&(_n.j="arraybuffer");return Eu(_n,Nn,on),rr}function Fp(zt,on,_n){var Rn=null,Nn=!1;zt.on("data",function(rr){Rn=rr}),zt.on("error",function(rr){rr.code==0||Nn||(Nn=!0,on(rr,null))}),zt.on("status",function(rr){rr.code==0||Nn?_n&&on(null,null,rr):(Nn=!0,on({code:rr.code,message:rr.details,metadata:rr.metadata},null))}),_n&&zt.on("metadata",function(rr){on(null,null,null,rr)}),zt.on("end",function(){Nn||(Rn==null?on({code:2,message:"Incomplete response"}):on(null,Rn)),_n&&on(null,null)})}function ip(zt,on){var _n=zt;return on.forEach(function(Rn){var Nn=_n;_n=function(rr){return Rn.intercept(rr,Nn)}}),_n}ga.prototype.on=function(zt,on){return zt=="data"?this.b.push(on):zt=="status"?this.h.push(on):zt=="metadata"?this.g.push(on):zt=="end"?this.c.push(on):zt=="error"&&this.f.push(on),this},ga.prototype.removeListener=function(zt,on){return zt=="data"?Xl(this.b,on):zt=="status"?Xl(this.h,on):zt=="metadata"?Xl(this.g,on):zt=="end"?Xl(this.c,on):zt=="error"&&Xl(this.f,on),this},ga.prototype.cancel=function(){this.j=!0,this.a.abort()},ga.prototype.cancel=ga.prototype.cancel,ga.prototype.removeListener=ga.prototype.removeListener,ga.prototype.on=ga.prototype.on,_s.prototype.P=function(zt,on,_n,Rn,Nn){var rr=this;Rn=sn(zt,on,"unary",Rn);var Ln=zt.substr(0,zt.length-Rn.name.length);return Fp(zt=ip(function(Xn){return zs(rr,Xn,Ln)},this.b).call(this,nn(Rn,on,_n)),Nn,!1),new xt(zt)},_s.prototype.M=function(zt,on,_n,Rn){var Nn=this;Rn=sn(zt,on,"unary",Rn);var rr=zt.substr(0,zt.length-Rn.name.length);return ip(function(Ln){return new Promise(function(Xn,Er){var Cr,Qr,jo;Fp(zs(Nn,Ln,rr),function(bo,Mo,Ko,ns){bo?Er(bo):Mo?jo=Mo:Ko?Qr=Ko:ns?Cr=ns:(bo=Ln.getMethodDescriptor(),Xn(new mt(jo,bo,Mo=(Mo=Cr)===void 0?{}:Mo,Qr===void 0?null:Qr)))},!0)})},this.g).call(this,nn(Rn,on,_n)).then(function(Ln){return Ln.getResponseMessage()})},_s.prototype.unaryCall=function(zt,on,_n,Rn){return this.M(zt,on,_n,Rn)},_s.prototype.R=function(zt,on,_n,Rn){var Nn=this;Rn=sn(zt,on,"server_streaming",Rn);var rr=zt.substr(0,zt.length-Rn.name.length);return ip(function(Ln){return zs(Nn,Ln,rr)},this.b).call(this,nn(Rn,on,_n))},_s.prototype.serverStreaming=_s.prototype.R,_s.prototype.unaryCall=_s.prototype.unaryCall,_s.prototype.thenableCall=_s.prototype.M,_s.prototype.rpcCall=_s.prototype.P,i.exports.AbstractClientBase={MethodInfo:function(zt,on,_n,Rn,Nn){this.name=Rn,this.b=Nn,this.f=zt,this.a=on,this.c=_n}},i.exports.GrpcWebClientBase=_s,i.exports.StatusCode={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,UNAUTHENTICATED:16,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15},i.exports.MethodDescriptor=Bt,i.exports.MethodType={UNARY:"unary",SERVER_STREAMING:"server_streaming"}}).call(this,s(6))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.isAsyncIterable=o.isAsyncGenerator=o.isAsync=void 0;var _,$=s(152),et=(_=$)&&_.__esModule?_:{default:_};function tt(j){return j[Symbol.toStringTag]==="AsyncFunction"}o.default=function(j){if(typeof j!="function")throw new Error("expected a function");return tt(j)?(0,et.default)(j):j},o.isAsync=tt,o.isAsyncGenerator=function(j){return j[Symbol.toStringTag]==="AsyncGenerator"},o.isAsyncIterable=function(j){return typeof j[Symbol.asyncIterator]=="function"}},function(i,o,s){var _={};function $(tt,j,it){it||(it=Error);var st=function(ht){var vt,ft;function pt(ct,yt,Et){return ht.call(this,function(Ot,Lt,Tt){return typeof j=="string"?j:j(Ot,Lt,Tt)}(ct,yt,Et))||this}return ft=ht,(vt=pt).prototype=Object.create(ft.prototype),vt.prototype.constructor=vt,vt.__proto__=ft,pt}(it);st.prototype.name=it.name,st.prototype.code=tt,_[tt]=st}function et(tt,j){if(Array.isArray(tt)){var it=tt.length;return tt=tt.map(function(st){return String(st)}),it>2?"one of ".concat(j," ").concat(tt.slice(0,it-1).join(", "),", or ")+tt[it-1]:it===2?"one of ".concat(j," ").concat(tt[0]," or ").concat(tt[1]):"of ".concat(j," ").concat(tt[0])}return"of ".concat(j," ").concat(String(tt))}$("ERR_INVALID_OPT_VALUE",function(tt,j){return'The value "'+j+'" is invalid for option "'+tt+'"'},TypeError),$("ERR_INVALID_ARG_TYPE",function(tt,j,it){var st,ht,vt;if(typeof j=="string"&&(ht="not ",j.substr(0,ht.length)===ht)?(st="must not be",j=j.replace(/^not /,"")):st="must be",function(pt,ct,yt){return(yt===void 0||yt>pt.length)&&(yt=pt.length),pt.substring(yt-ct.length,yt)===ct}(tt," argument"))vt="The ".concat(tt," ").concat(st," ").concat(et(j,"type"));else{var ft=function(pt,ct,yt){return typeof yt!="number"&&(yt=0),!(yt+ct.length>pt.length)&&pt.indexOf(ct,yt)!==-1}(tt,".")?"property":"argument";vt='The "'.concat(tt,'" ').concat(ft," ").concat(st," ").concat(et(j,"type"))}return vt+=". Received type ".concat(typeof it)},TypeError),$("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),$("ERR_METHOD_NOT_IMPLEMENTED",function(tt){return"The "+tt+" method is not implemented"}),$("ERR_STREAM_PREMATURE_CLOSE","Premature close"),$("ERR_STREAM_DESTROYED",function(tt){return"Cannot call "+tt+" after a stream was destroyed"}),$("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),$("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),$("ERR_STREAM_WRITE_AFTER_END","write after end"),$("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),$("ERR_UNKNOWN_ENCODING",function(tt){return"Unknown encoding: "+tt},TypeError),$("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=_},function(i,o,s){(function(_){var $=Object.keys||function(pt){var ct=[];for(var yt in pt)ct.push(yt);return ct};i.exports=ht;var et=s(77),tt=s(81);s(7)(ht,et);for(var j=$(tt.prototype),it=0;it<j.length;it++){var st=j[it];ht.prototype[st]||(ht.prototype[st]=tt.prototype[st])}function ht(pt){if(!(this instanceof ht))return new ht(pt);et.call(this,pt),tt.call(this,pt),this.allowHalfOpen=!0,pt&&(pt.readable===!1&&(this.readable=!1),pt.writable===!1&&(this.writable=!1),pt.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",vt)))}function vt(){this._writableState.ended||_.nextTick(ft,this)}function ft(pt){pt.end()}Object.defineProperty(ht.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(ht.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ht.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ht.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(pt){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=pt,this._writableState.destroyed=pt)}})}).call(this,s(2))},function(i,o,s){s.d(o,"a",function(){return tt});var _=s(40),$=s(4);const et={"app-id":["app-id must match formant/*"]};class tt extends _.a{constructor(it,st={}){super(it,Object.assign({validateHeaders:ht=>`${ht.get("app-id")}`.startsWith("formant/")?{}:et},st)),this.endpoint=it}getHeaders(){return Object.assign(Object.assign({},tt.headers),{"App-ID":`formant/${$.a}`,"App-Version":$.j})}}tt.headers={}},function(i,o,s){s(227),i.exports={encode:_=>new TextEncoder().encode(_),decode:_=>new TextDecoder().decode(_)}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_,$=_.length){if(!$)throw new Error("arity is undefined");return function(...et){return typeof et[$-1]=="function"?_.apply(this,et):new Promise((tt,j)=>{et[$-1]=(it,...st)=>{if(it)return j(it);tt(st.length>1?st:st[0])},_.apply(this,et)})}},i.exports=o.default},function(i,o,s){(o=i.exports=s(69)).Stream=o,o.Readable=o,o.Writable=s(48),o.Duplex=s(23),o.Transform=s(72),o.PassThrough=s(165)},function(i,o,s){(o=i.exports=s(77)).Stream=o,o.Readable=o,o.Writable=s(81),o.Duplex=s(27),o.Transform=s(82),o.PassThrough=s(184),o.finished=s(49),o.pipeline=s(185)},function(i,o,s){i.exports=function(_){return _}},function(i,o,s){s.d(o,"a",function(){return $});const _=["password","secret","token","key","buffer"];function $(et,tt=new Set){return tt.has(et)?"[ RECURSIVE ]":!(j=et)||typeof j!="object"&&typeof j!="function"?et:(tt.add(et),Object.keys(et).reduce((it,st)=>(it[st]=_.some(ht=>st.toLowerCase().includes(ht.toLowerCase()))?"[ REDACTED ]":$(et[st],tt),it),{}));var j}},function(i,o){i.exports=_,_.default=_,_.stable=et,_.stableStringify=et;var s=[];function _(tt,j,it){(function vt(ft,pt,ct,yt){var Et;if(typeof ft=="object"&&ft!==null){for(Et=0;Et<ct.length;Et++)if(ct[Et]===ft)return yt[pt]="[Circular]",void s.push([yt,pt,ft]);if(ct.push(ft),Array.isArray(ft))for(Et=0;Et<ft.length;Et++)vt(ft[Et],Et,ct,ft);else{var Ot=Object.keys(ft);for(Et=0;Et<Ot.length;Et++){var Lt=Ot[Et];vt(ft[Lt],Lt,ct,ft)}}ct.pop()}})(tt,"",[],void 0);for(var st=JSON.stringify(tt,j,it);s.length!==0;){var ht=s.pop();ht[0][ht[1]]=ht[2]}return st}function $(tt,j){return tt<j?-1:tt>j?1:0}function et(tt,j,it){for(var st=function ft(pt,ct,yt,Et){var Ot;if(typeof pt=="object"&&pt!==null){for(Ot=0;Ot<yt.length;Ot++)if(yt[Ot]===pt)return Et[ct]="[Circular]",void s.push([Et,ct,pt]);if(typeof pt.toJSON=="function")return;if(yt.push(pt),Array.isArray(pt))for(Ot=0;Ot<pt.length;Ot++)ft(pt[Ot],Ot,yt,pt);else{var Lt={},Tt=Object.keys(pt).sort($);for(Ot=0;Ot<Tt.length;Ot++){var It=Tt[Ot];ft(pt[It],It,yt,pt),Lt[It]=pt[It]}if(Et===void 0)return Lt;s.push([Et,ct,pt]),Et[ct]=Lt}yt.pop()}}(tt,"",[],void 0)||tt,ht=JSON.stringify(st,j,it);s.length!==0;){var vt=s.pop();vt[0][vt[1]]=vt[2]}return ht}},function(i,o,s){var _=s(16),$=Object.keys||function(ct){var yt=[];for(var Et in ct)yt.push(Et);return yt};i.exports=vt;var et=Object.create(s(17));et.inherits=s(7);var tt=s(143),j=s(62);et.inherits(vt,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];vt.prototype[ht]||(vt.prototype[ht]=j.prototype[ht])}function vt(ct){if(!(this instanceof vt))return new vt(ct);tt.call(this,ct),j.call(this,ct),ct&&ct.readable===!1&&(this.readable=!1),ct&&ct.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ct&&ct.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ft)}function ft(){this.allowHalfOpen||this._writableState.ended||_.nextTick(pt,this)}function pt(ct){ct.end()}Object.defineProperty(vt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(vt.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ct){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ct,this._writableState.destroyed=ct)}}),vt.prototype._destroy=function(ct,yt){this.push(null),this.end(),_.nextTick(yt,ct)}},function(i,o,s){var _=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function $(j,it){return Object.prototype.hasOwnProperty.call(j,it)}o.assign=function(j){for(var it=Array.prototype.slice.call(arguments,1);it.length;){var st=it.shift();if(st){if(typeof st!="object")throw new TypeError(st+"must be non-object");for(var ht in st)$(st,ht)&&(j[ht]=st[ht])}}return j},o.shrinkBuf=function(j,it){return j.length===it?j:j.subarray?j.subarray(0,it):(j.length=it,j)};var et={arraySet:function(j,it,st,ht,vt){if(it.subarray&&j.subarray)j.set(it.subarray(st,st+ht),vt);else for(var ft=0;ft<ht;ft++)j[vt+ft]=it[st+ft]},flattenChunks:function(j){var it,st,ht,vt,ft,pt;for(ht=0,it=0,st=j.length;it<st;it++)ht+=j[it].length;for(pt=new Uint8Array(ht),vt=0,it=0,st=j.length;it<st;it++)ft=j[it],pt.set(ft,vt),vt+=ft.length;return pt}},tt={arraySet:function(j,it,st,ht,vt){for(var ft=0;ft<ht;ft++)j[vt+ft]=it[st+ft]},flattenChunks:function(j){return[].concat.apply([],j)}};o.setTyped=function(j){j?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,et)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,tt))},o.setTyped(_)},function(i,o,s){i.exports=s(186)},function(i,o,s){s.d(o,"a",function(){return $});var _=s(229);const $=Object(_.a)()},function(i,o,s){s.d(o,"a",function(){return Ot});var _=s(1),$=s(100),et=s.n($),tt=s(101),j=s.n(tt);class it extends Error{constructor(Tt,It,mt){super(`Connection failure: ${Tt.message}`),this.cause=Tt,this.url=It,this.retryable=mt}}var st=s(8),ht=s(0),vt=s(10),ft=s(11);class pt extends Error{constructor(Tt,It){super(`Invalid headers (${JSON.stringify(Tt)}) for response: ${It.message}`),this.validationErrors=Tt,this.responseError=It}}var ct=function(Lt,Tt,It,mt){return new(It||(It=Promise))(function(Bt,nn){function sn(Nt){try{St(mt.next(Nt))}catch(Ct){nn(Ct)}}function xt(Nt){try{St(mt.throw(Nt))}catch(Ct){nn(Ct)}}function St(Nt){var Ct;Nt.done?Bt(Nt.value):(Ct=Nt.value,Ct instanceof It?Ct:new It(function(Vt){Vt(Ct)})).then(sn,xt)}St((mt=mt.apply(Lt,Tt||[])).next())})},yt=function(Lt,Tt){var It={};for(var mt in Lt)Object.prototype.hasOwnProperty.call(Lt,mt)&&Tt.indexOf(mt)<0&&(It[mt]=Lt[mt]);if(Lt!=null&&typeof Object.getOwnPropertySymbols=="function"){var Bt=0;for(mt=Object.getOwnPropertySymbols(Lt);Bt<mt.length;Bt++)Tt.indexOf(mt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(Lt,mt[Bt])&&(It[mt[Bt]]=Lt[mt[Bt]])}return It};const Et=new Set(["GET","HEAD","PUT","QUERY","DELETE","OPTIONS","TRACE"]);class Ot{constructor(Tt,It={}){if(this.endpoint=Tt,this.validateHeaders=mt=>It.validateHeaders?It.validateHeaders(mt):{},this.verbose=It.verbose!==!1,It.retries!==void 0&&!(It.retries>=0))throw new Error("retries must be positive or zero");if(this.configuredRetries=It.retries,It.timeoutMs!==void 0&&!(It.timeoutMs>0))throw new Error("timeoutMs must be positive");if(this.timeoutMs=It.timeoutMs,It.maxBackoffDelayMs!==void 0&&!(It.maxBackoffDelayMs>0))throw new Error("maxBackoffDelayMs must be positive");this.maxBackoffDelayMs=It.maxBackoffDelayMs||30*_.a.second}getRetries(){return this.configuredRetries!==void 0?this.configuredRetries:this.getConstructor().retries}getHeaders(){return{}}fetch(Tt,It={}){return ct(this,void 0,void 0,function*(){return(yield this.fetchVerbose(Tt,It)).body})}fetchVerbose(Tt,It={}){return ct(this,void 0,void 0,function*(){let mt=100*_.a.millisecond,Bt=0;const nn=this.timeoutMs!==void 0?new Date().getTime()+this.timeoutMs:void 0,sn=nn?()=>Math.max(nn-new Date().getTime(),0):void 0;for(;;)try{return yield this.doFetch(Tt,It,sn)}catch(xt){const St=Object(vt.a)(xt,it);if((sn==null?void 0:sn())===0||Bt===this.getRetries()||!St.retryable)throw St;Bt++,mt=Math.min(...sn?[sn()]:[],mt*(2+.1*(Math.random()-.5)),this.maxBackoffDelayMs),yield Object(st.a)(mt),this.verbose&&ht.a.warn(`Connection failure, retrying. Error: ${xt.cause.message}`,{url:xt.url,error:xt.cause,attempt:Bt})}})}doFetch(Tt,It,mt){return ct(this,void 0,void 0,function*(){const{token:Bt,json:nn,allowUnsafeRetries:sn}=It,xt=yt(It,["token","json","allowUnsafeRetries"]),St=(xt.method||"GET").toUpperCase(),Nt=this.endpoint!==void 0?`${this.endpoint}${Tt?`/${Tt}`:""}`:Tt,Ct=new et.a;let Vt;if(mt){const Kt=mt();Kt>0?Vt=setTimeout(()=>{Ct.abort()},Kt):Ct.abort()}try{let Kt;yield Promise.race([this.getConstructor().waitForConnectivity(),new Promise($t=>{Kt=setTimeout($t,mt?Math.min(_.a.minute,mt()):_.a.minute)})]),Kt&&clearTimeout(Kt);const Gt=yield j()(Nt,Object.assign(Object.assign({},xt),{headers:Object.assign(Object.assign(Object.assign(Object.assign({},nn!==!1?{"Content-Type":"application/json"}:{}),this.getHeaders()),xt.headers||{}),Bt!==void 0?{Authorization:`Bearer ${Bt}`}:{}),signal:Ct.signal})),Ut=Gt.headers.get("content-type")||"",Ht=Ut&&Ut.startsWith("application/json"),qt=Ht?yield Gt.json():yield Gt.text(),Pt=()=>new ft.a(St,Nt,Gt.status,qt,qt&&qt.validationErrors||{},Gt.headers);if(!Gt.ok)throw this.verbose&&ht.a[Gt.status>=500?"warn":"info"]("Response error",{method:St,url:Nt,statusCode:Gt.status}),Pt();const wt=this.validateHeaders(Gt.headers);if(Object.keys(wt).length!==0)throw new pt(wt,Pt());if(Gt.status===204)return{body:void 0,headers:Gt.headers};if(nn&&!Ht)throw new Error(`Response is not JSON: ${JSON.stringify(qt)}`);return{body:qt,headers:Gt.headers}}catch(Kt){const Gt=sn||Et.has(St);if(Kt.message==="Network request failed")throw new it(Kt,Nt,Gt);if(Kt.type==="system"&&["EAI_AGAIN","ECONNREFUSED","EHOSTUNREACH","ENOTFOUND"].find(Pt=>Pt===Kt.code))throw new it(Kt,Nt,!0);if(Kt.type==="system"&&["ETIMEDOUT","ECONNRESET","ESOCKETTIMEDOUT","EPIPE"].find(Pt=>Pt===Kt.code))throw new it(Kt,Nt,Gt);if(Kt.name==="AbortError")throw new it(Kt,Nt,Gt);const Ut=Object(vt.a)(Kt,ft.a),{statusCode:Ht}=Ut;if(Ht===408||Ht===429||Ht===502||Ht===503||Ht===504)throw this.verbose&&!Gt&&ht.a.warn("Potentially unsafe retry"),new it(Kt,Nt,!0);const qt=this.validateHeaders(Ut.headers);throw Object.keys(qt).length!==0?new pt(qt,Ut):(yield this.getConstructor().onResponseError(Ut),Kt)}finally{Vt&&clearTimeout(Vt)}})}getConstructor(){return Object.getPrototypeOf(this).constructor}}Ot.retries=8,Ot.waitForConnectivity=()=>ct(void 0,void 0,void 0,function*(){}),Ot.onResponseError=()=>ct(void 0,void 0,void 0,function*(){})},function(i,o,s){function _(vt,ft){if(!(vt instanceof ft))throw new TypeError("Cannot call a class as a function")}function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(59),tt=s(3),j=tt.LEVEL,it=tt.MESSAGE;et.enabled=!0;var st=/\s+/,ht=function(){function vt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,vt),yt.colors&&this.addColors(yt.colors),this.options=yt}var ft,pt,ct;return ft=vt,ct=[{key:"addColors",value:function(yt){var Et=Object.keys(yt).reduce(function(Ot,Lt){return Ot[Lt]=st.test(yt[Lt])?yt[Lt].split(st):yt[Lt],Ot},{});return vt.allColors=Object.assign({},vt.allColors||{},Et),vt.allColors}}],(pt=[{key:"addColors",value:function(yt){return vt.addColors(yt)}},{key:"colorize",value:function(yt,Et,Ot){if(Ot===void 0&&(Ot=Et),!Array.isArray(vt.allColors[yt]))return et[vt.allColors[yt]](Ot);for(var Lt=0,Tt=vt.allColors[yt].length;Lt<Tt;Lt++)Ot=et[vt.allColors[yt][Lt]](Ot);return Ot}},{key:"transform",value:function(yt,Et){return Et.all&&typeof yt[it]=="string"&&(yt[it]=this.colorize(yt[j],yt.level,yt[it])),(Et.level||Et.all||!Et.message)&&(yt.level=this.colorize(yt[j],yt.level)),(Et.all||Et.message)&&(yt.message=this.colorize(yt[j],yt.level,yt.message)),yt}}])&&$(ft.prototype,pt),ct&&$(ft,ct),vt}();i.exports=function(vt){return new ht(vt)},i.exports.Colorizer=i.exports.Format=ht},function(i,o){var s={}.toString;i.exports=Array.isArray||function(_){return s.call(_)=="[object Array]"}},function(i,o,s){(function(_){function $(et){try{if(!_.localStorage)return!1}catch{return!1}var tt=_.localStorage[et];return tt!=null&&String(tt).toLowerCase()==="true"}i.exports=function(et,tt){if($("noDeprecation"))return et;var j=!1;return function(){if(!j){if($("throwDeprecation"))throw new Error(tt);$("traceDeprecation")?console.trace(tt):console.warn(tt),j=!0}return et.apply(this,arguments)}}}).call(this,s(6))},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _&&typeof _.length=="number"&&_.length>=0&&_.length%1==0},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default={},i.exports=o.default},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){(function(_,$,et){var tt=s(16);function j(St){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Ct,Vt,Kt){var Gt=Ct.entry;for(Ct.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Kt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Ct:Vt.corkedRequestsFree=Ct})(Nt,St)}}i.exports=Tt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Tt.WritableState=Lt;var ht=s(17);ht.inherits=s(7);var vt={deprecate:s(43)},ft=s(70),pt=s(47).Buffer,ct=et.Uint8Array||function(){},yt,Et=s(71);function Ot(){}function Lt(St,Nt){it=it||s(23),St=St||{};var Ct=Nt instanceof it;this.objectMode=!!St.objectMode,Ct&&(this.objectMode=this.objectMode||!!St.writableObjectMode);var Vt=St.highWaterMark,Kt=St.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Ct&&(Kt||Kt===0)?Kt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=St.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=St.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var wt=qt._writableState,$t=wt.sync,Xt=wt.writecb;if(function(dn){dn.writing=!1,dn.writecb=null,dn.length-=dn.writelen,dn.writelen=0}(wt),Pt)(function(dn,mn,an,en,Mt){--mn.pendingcb,an?(tt.nextTick(Mt,en),tt.nextTick(xt,dn,mn),dn._writableState.errorEmitted=!0,dn.emit("error",en)):(Mt(en),dn._writableState.errorEmitted=!0,dn.emit("error",en),xt(dn,mn))})(qt,wt,$t,Pt,Xt);else{var un=nn(wt);un||wt.corked||wt.bufferProcessing||!wt.bufferedRequest||Bt(qt,wt),$t?st(mt,qt,wt,un,Xt):mt(qt,wt,un,Xt)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Tt(St){if(it=it||s(23),!(yt.call(Tt,this)||this instanceof it))return new Tt(St);this._writableState=new Lt(St,this),this.writable=!0,St&&(typeof St.write=="function"&&(this._write=St.write),typeof St.writev=="function"&&(this._writev=St.writev),typeof St.destroy=="function"&&(this._destroy=St.destroy),typeof St.final=="function"&&(this._final=St.final)),ft.call(this)}function It(St,Nt,Ct,Vt,Kt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Ct?St._writev(Kt,Nt.onwrite):St._write(Kt,Gt,Nt.onwrite),Nt.sync=!1}function mt(St,Nt,Ct,Vt){Ct||function(Kt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Kt.emit("drain"))}(St,Nt),Nt.pendingcb--,Vt(),xt(St,Nt)}function Bt(St,Nt){Nt.bufferProcessing=!0;var Ct=Nt.bufferedRequest;if(St._writev&&Ct&&Ct.next){var Vt=Nt.bufferedRequestCount,Kt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Ct;for(var Ut=0,Ht=!0;Ct;)Kt[Ut]=Ct,Ct.isBuf||(Ht=!1),Ct=Ct.next,Ut+=1;Kt.allBuffers=Ht,It(St,Nt,!0,Nt.length,Kt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Ct;){var qt=Ct.chunk,Pt=Ct.encoding,wt=Ct.callback;if(It(St,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,wt),Ct=Ct.next,Nt.bufferedRequestCount--,Nt.writing)break}Ct===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Ct,Nt.bufferProcessing=!1}function nn(St){return St.ending&&St.length===0&&St.bufferedRequest===null&&!St.finished&&!St.writing}function sn(St,Nt){St._final(function(Ct){Nt.pendingcb--,Ct&&St.emit("error",Ct),Nt.prefinished=!0,St.emit("prefinish"),xt(St,Nt)})}function xt(St,Nt){var Ct=nn(Nt);return Ct&&(function(Vt,Kt){Kt.prefinished||Kt.finalCalled||(typeof Vt._final=="function"?(Kt.pendingcb++,Kt.finalCalled=!0,tt.nextTick(sn,Vt,Kt)):(Kt.prefinished=!0,Vt.emit("prefinish")))}(St,Nt),Nt.pendingcb===0&&(Nt.finished=!0,St.emit("finish"))),Ct}ht.inherits(Tt,ft),Lt.prototype.getBuffer=function(){for(var St=this.bufferedRequest,Nt=[];St;)Nt.push(St),St=St.next;return Nt},function(){try{Object.defineProperty(Lt.prototype,"buffer",{get:vt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Tt,Symbol.hasInstance,{value:function(St){return!!yt.call(this,St)||this===Tt&&St&&St._writableState instanceof Lt}})):yt=function(St){return St instanceof this},Tt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Tt.prototype.write=function(St,Nt,Ct){var Vt,Kt=this._writableState,Gt=!1,Ut=!Kt.objectMode&&(Vt=St,pt.isBuffer(Vt)||Vt instanceof ct);return Ut&&!pt.isBuffer(St)&&(St=function(Ht){return pt.from(Ht)}(St)),typeof Nt=="function"&&(Ct=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Kt.defaultEncoding),typeof Ct!="function"&&(Ct=Ot),Kt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Ct):(Ut||function(Ht,qt,Pt,wt){var $t=!0,Xt=!1;return Pt===null?Xt=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(Xt=new TypeError("Invalid non-string/buffer chunk")),Xt&&(Ht.emit("error",Xt),tt.nextTick(wt,Xt),$t=!1),$t}(this,Kt,St,Ct))&&(Kt.pendingcb++,Gt=function(Ht,qt,Pt,wt,$t,Xt){if(!Pt){var un=function(en,Mt,jt){return en.objectMode||en.decodeStrings===!1||typeof Mt!="string"||(Mt=pt.from(Mt,jt)),Mt}(qt,wt,$t);wt!==un&&(Pt=!0,$t="buffer",wt=un)}var dn=qt.objectMode?1:wt.length;qt.length+=dn;var mn=qt.length<qt.highWaterMark;if(mn||(qt.needDrain=!0),qt.writing||qt.corked){var an=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:wt,encoding:$t,isBuf:Pt,callback:Xt,next:null},an?an.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else It(Ht,qt,!1,dn,wt,$t,Xt);return mn}(this,Kt,Ut,St,Nt,Ct)),Gt},Tt.prototype.cork=function(){this._writableState.corked++},Tt.prototype.uncork=function(){var St=this._writableState;St.corked&&(St.corked--,St.writing||St.corked||St.finished||St.bufferProcessing||!St.bufferedRequest||Bt(this,St))},Tt.prototype.setDefaultEncoding=function(St){if(typeof St=="string"&&(St=St.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((St+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+St);return this._writableState.defaultEncoding=St,this},Object.defineProperty(Tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Tt.prototype._write=function(St,Nt,Ct){Ct(new Error("_write() is not implemented"))},Tt.prototype._writev=null,Tt.prototype.end=function(St,Nt,Ct){var Vt=this._writableState;typeof St=="function"?(Ct=St,St=null,Nt=null):typeof Nt=="function"&&(Ct=Nt,Nt=null),St!=null&&this.write(St,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Kt,Gt,Ut){Gt.ending=!0,xt(Kt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Kt.once("finish",Ut)),Gt.ended=!0,Kt.writable=!1}(this,Vt,Ct)},Object.defineProperty(Tt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(St){this._writableState&&(this._writableState.destroyed=St)}}),Tt.prototype.destroy=Et.destroy,Tt.prototype._undestroy=Et.undestroy,Tt.prototype._destroy=function(St,Nt){this.end(),Nt(St)}}).call(this,s(2),s(15).setImmediate,s(6))},function(i,o,s){var _=s(26).codes.ERR_STREAM_PREMATURE_CLOSE;function $(){}i.exports=function et(tt,j,it){if(typeof j=="function")return et(tt,null,j);j||(j={}),it=function(Tt){var It=!1;return function(){if(!It){It=!0;for(var mt=arguments.length,Bt=new Array(mt),nn=0;nn<mt;nn++)Bt[nn]=arguments[nn];Tt.apply(this,Bt)}}}(it||$);var st=j.readable||j.readable!==!1&&tt.readable,ht=j.writable||j.writable!==!1&&tt.writable,vt=function(){tt.writable||pt()},ft=tt._writableState&&tt._writableState.finished,pt=function(){ht=!1,ft=!0,st||it.call(tt)},ct=tt._readableState&&tt._readableState.endEmitted,yt=function(){st=!1,ct=!0,ht||it.call(tt)},Et=function(Tt){it.call(tt,Tt)},Ot=function(){var Tt;return st&&!ct?(tt._readableState&&tt._readableState.ended||(Tt=new _),it.call(tt,Tt)):ht&&!ft?(tt._writableState&&tt._writableState.ended||(Tt=new _),it.call(tt,Tt)):void 0},Lt=function(){tt.req.on("finish",pt)};return function(Tt){return Tt.setHeader&&typeof Tt.abort=="function"}(tt)?(tt.on("complete",pt),tt.on("abort",Ot),tt.req?Lt():tt.on("request",Lt)):ht&&!tt._writableState&&(tt.on("end",vt),tt.on("close",vt)),tt.on("end",yt),tt.on("finish",pt),j.error!==!1&&tt.on("error",Et),tt.on("close",Ot),function(){tt.removeListener("complete",pt),tt.removeListener("abort",Ot),tt.removeListener("request",Lt),tt.req&&tt.req.removeListener("finish",pt),tt.removeListener("end",vt),tt.removeListener("close",vt),tt.removeListener("finish",pt),tt.removeListener("end",yt),tt.removeListener("error",Et),tt.removeListener("close",Ot)}}},function(i,o,s){var _=s(58),$=s(3).configs;o.cli=_.levels($.cli),o.npm=_.levels($.npm),o.syslog=_.levels($.syslog),o.addColors=_.levels},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=j(s(203)),$=j(s(204)),et=j(s(25)),tt=j(s(30));function j(it){return it&&it.__esModule?it:{default:it}}o.default=(0,tt.default)(function(it,st,ht){return(0,_.default)(it,(0,$.default)((0,et.default)(st)),ht)},3),i.exports=o.default},function(i,o,s){class _ extends Error{constructor(et,...tt){super(`env-var: ${et}`,...tt),Error.captureStackTrace&&Error.captureStackTrace(this,_),this.name="EnvVarError"}}i.exports=_},function(i,o,s){i.exports=function(_){const $=parseInt(_,10);if(isNaN($)||$.toString(10)!==_)throw new Error("should be a valid integer");return $}},function(i,o,s){i.exports=function(_){const $=parseFloat(_);if(isNaN($)||$.toString()!==_)throw new Error("should be a valid float");return $}},function(i,o,s){i.exports=function(_){try{return JSON.parse(_)}catch{throw new Error("should be valid (parseable) JSON")}}},function(i,o,s){(function(_){function $(j,it){for(var st=0,ht=j.length-1;ht>=0;ht--){var vt=j[ht];vt==="."?j.splice(ht,1):vt===".."?(j.splice(ht,1),st++):st&&(j.splice(ht,1),st--)}if(it)for(;st--;st)j.unshift("..");return j}function et(j,it){if(j.filter)return j.filter(it);for(var st=[],ht=0;ht<j.length;ht++)it(j[ht],ht,j)&&st.push(j[ht]);return st}o.resolve=function(){for(var j="",it=!1,st=arguments.length-1;st>=-1&&!it;st--){var ht=st>=0?arguments[st]:_.cwd();if(typeof ht!="string")throw new TypeError("Arguments to path.resolve must be strings");ht&&(j=ht+"/"+j,it=ht.charAt(0)==="/")}return(it?"/":"")+(j=$(et(j.split("/"),function(vt){return!!vt}),!it).join("/"))||"."},o.normalize=function(j){var it=o.isAbsolute(j),st=tt(j,-1)==="/";return(j=$(et(j.split("/"),function(ht){return!!ht}),!it).join("/"))||it||(j="."),j&&st&&(j+="/"),(it?"/":"")+j},o.isAbsolute=function(j){return j.charAt(0)==="/"},o.join=function(){var j=Array.prototype.slice.call(arguments,0);return o.normalize(et(j,function(it,st){if(typeof it!="string")throw new TypeError("Arguments to path.join must be strings");return it}).join("/"))},o.relative=function(j,it){function st(Et){for(var Ot=0;Ot<Et.length&&Et[Ot]==="";Ot++);for(var Lt=Et.length-1;Lt>=0&&Et[Lt]==="";Lt--);return Ot>Lt?[]:Et.slice(Ot,Lt-Ot+1)}j=o.resolve(j).substr(1),it=o.resolve(it).substr(1);for(var ht=st(j.split("/")),vt=st(it.split("/")),ft=Math.min(ht.length,vt.length),pt=ft,ct=0;ct<ft;ct++)if(ht[ct]!==vt[ct]){pt=ct;break}var yt=[];for(ct=pt;ct<ht.length;ct++)yt.push("..");return(yt=yt.concat(vt.slice(pt))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(j){if(typeof j!="string"&&(j+=""),j.length===0)return".";for(var it=j.charCodeAt(0),st=it===47,ht=-1,vt=!0,ft=j.length-1;ft>=1;--ft)if((it=j.charCodeAt(ft))===47){if(!vt){ht=ft;break}}else vt=!1;return ht===-1?st?"/":".":st&&ht===1?"/":j.slice(0,ht)},o.basename=function(j,it){var st=function(ht){typeof ht!="string"&&(ht+="");var vt,ft=0,pt=-1,ct=!0;for(vt=ht.length-1;vt>=0;--vt)if(ht.charCodeAt(vt)===47){if(!ct){ft=vt+1;break}}else pt===-1&&(ct=!1,pt=vt+1);return pt===-1?"":ht.slice(ft,pt)}(j);return it&&st.substr(-1*it.length)===it&&(st=st.substr(0,st.length-it.length)),st},o.extname=function(j){typeof j!="string"&&(j+="");for(var it=-1,st=0,ht=-1,vt=!0,ft=0,pt=j.length-1;pt>=0;--pt){var ct=j.charCodeAt(pt);if(ct!==47)ht===-1&&(vt=!1,ht=pt+1),ct===46?it===-1?it=pt:ft!==1&&(ft=1):it!==-1&&(ft=-1);else if(!vt){st=pt+1;break}}return it===-1||ht===-1||ft===0||ft===1&&it===ht-1&&it===st+1?"":j.slice(it,ht)};var tt="ab".substr(-1)==="b"?function(j,it,st){return j.substr(it,st)}:function(j,it,st){return it<0&&(it=j.length+it),j.substr(it,st)}}).call(this,s(2))},,function(i,o,s){var _=o.format=s(12);o.levels=s(105),Object.defineProperty(_,"align",{value:s(122)}),Object.defineProperty(_,"cli",{value:s(123)}),Object.defineProperty(_,"combine",{value:s(124)}),Object.defineProperty(_,"colorize",{value:s(41)}),Object.defineProperty(_,"json",{value:s(125)}),Object.defineProperty(_,"label",{value:s(128)}),Object.defineProperty(_,"logstash",{value:s(129)}),Object.defineProperty(_,"metadata",{value:s(130)}),Object.defineProperty(_,"padLevels",{value:s(60)}),Object.defineProperty(_,"prettyPrint",{value:s(131)}),Object.defineProperty(_,"printf",{value:s(132)}),Object.defineProperty(_,"simple",{value:s(133)}),Object.defineProperty(_,"splat",{value:s(134)}),Object.defineProperty(_,"timestamp",{value:s(135)}),Object.defineProperty(_,"uncolorize",{value:s(137)})},function(i,o,s){var _=s(106);i.exports=_},function(i,o,s){function _(ft){return function(pt){if(Array.isArray(pt))return $(pt)}(ft)||function(pt){if(typeof Symbol<"u"&&Symbol.iterator in Object(pt))return Array.from(pt)}(ft)||function(pt,ct){if(pt){if(typeof pt=="string")return $(pt,ct);var yt=Object.prototype.toString.call(pt).slice(8,-1);if(yt==="Object"&&pt.constructor&&(yt=pt.constructor.name),yt==="Map"||yt==="Set")return Array.from(pt);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return $(pt,ct)}}(ft)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(ft,pt){(pt==null||pt>ft.length)&&(pt=ft.length);for(var ct=0,yt=new Array(pt);ct<pt;ct++)yt[ct]=ft[ct];return yt}function et(ft,pt){if(!(ft instanceof pt))throw new TypeError("Cannot call a class as a function")}function tt(ft,pt){for(var ct=0;ct<pt.length;ct++){var yt=pt[ct];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(ft,yt.key,yt)}}var j=s(3),it=j.configs,st=j.LEVEL,ht=j.MESSAGE,vt=function(){function ft(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{levels:it.npm.levels};et(this,ft),this.paddings=ft.paddingForLevels(Et.levels,Et.filler),this.options=Et}var pt,ct,yt;return pt=ft,yt=[{key:"getLongestLevel",value:function(Et){var Ot=Object.keys(Et).map(function(Lt){return Lt.length});return Math.max.apply(Math,_(Ot))}},{key:"paddingForLevel",value:function(Et,Ot,Lt){var Tt=Lt+1-Et.length,It=Math.floor(Tt/Ot.length);return"".concat(Ot).concat(Ot.repeat(It)).slice(0,Tt)}},{key:"paddingForLevels",value:function(Et){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",Lt=ft.getLongestLevel(Et);return Object.keys(Et).reduce(function(Tt,It){return Tt[It]=ft.paddingForLevel(It,Ot,Lt),Tt},{})}}],(ct=[{key:"transform",value:function(Et,Ot){return Et.message="".concat(this.paddings[Et[st]]).concat(Et.message),Et[ht]&&(Et[ht]="".concat(this.paddings[Et[st]]).concat(Et[ht])),Et}}])&&tt(pt.prototype,ct),yt&&tt(pt,yt),ft}();i.exports=function(ft){return new vt(ft)},i.exports.Padder=i.exports.Format=vt},function(i,o,s){var _=s(13).format;o.warn={deprecated:function($){return function(){throw new Error(_("{ %s } was removed in winston@3.0.0.",$))}},useFormat:function($){return function(){throw new Error([_("{ %s } was removed in winston@3.0.0.",$),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions:function($,et,tt){tt.forEach(function(j){$[j]=o.warn[et](j)})},moved:function($,et,tt){function j(){return function(){throw new Error([_("winston.%s was moved in winston@3.0.0.",tt),_("Use a winston.%s instead.",et)].join(`
`))}}Object.defineProperty($,tt,{get:j,set:j})},forProperties:function($,et,tt){tt.forEach(function(j){var it=o.warn[et](j);Object.defineProperty($,j,{get:it,set:it})})}}},function(i,o,s){(function(_,$,et){var tt=s(16);function j(St){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Ct,Vt,Kt){var Gt=Ct.entry;for(Ct.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Kt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Ct:Vt.corkedRequestsFree=Ct})(Nt,St)}}i.exports=Tt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Tt.WritableState=Lt;var ht=Object.create(s(17));ht.inherits=s(7);var vt={deprecate:s(43)},ft=s(63),pt=s(44).Buffer,ct=et.Uint8Array||function(){},yt,Et=s(64);function Ot(){}function Lt(St,Nt){it=it||s(36),St=St||{};var Ct=Nt instanceof it;this.objectMode=!!St.objectMode,Ct&&(this.objectMode=this.objectMode||!!St.writableObjectMode);var Vt=St.highWaterMark,Kt=St.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Ct&&(Kt||Kt===0)?Kt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=St.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=St.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var wt=qt._writableState,$t=wt.sync,Xt=wt.writecb;if(function(dn){dn.writing=!1,dn.writecb=null,dn.length-=dn.writelen,dn.writelen=0}(wt),Pt)(function(dn,mn,an,en,Mt){--mn.pendingcb,an?(tt.nextTick(Mt,en),tt.nextTick(xt,dn,mn),dn._writableState.errorEmitted=!0,dn.emit("error",en)):(Mt(en),dn._writableState.errorEmitted=!0,dn.emit("error",en),xt(dn,mn))})(qt,wt,$t,Pt,Xt);else{var un=nn(wt);un||wt.corked||wt.bufferProcessing||!wt.bufferedRequest||Bt(qt,wt),$t?st(mt,qt,wt,un,Xt):mt(qt,wt,un,Xt)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Tt(St){if(it=it||s(36),!(yt.call(Tt,this)||this instanceof it))return new Tt(St);this._writableState=new Lt(St,this),this.writable=!0,St&&(typeof St.write=="function"&&(this._write=St.write),typeof St.writev=="function"&&(this._writev=St.writev),typeof St.destroy=="function"&&(this._destroy=St.destroy),typeof St.final=="function"&&(this._final=St.final)),ft.call(this)}function It(St,Nt,Ct,Vt,Kt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Ct?St._writev(Kt,Nt.onwrite):St._write(Kt,Gt,Nt.onwrite),Nt.sync=!1}function mt(St,Nt,Ct,Vt){Ct||function(Kt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Kt.emit("drain"))}(St,Nt),Nt.pendingcb--,Vt(),xt(St,Nt)}function Bt(St,Nt){Nt.bufferProcessing=!0;var Ct=Nt.bufferedRequest;if(St._writev&&Ct&&Ct.next){var Vt=Nt.bufferedRequestCount,Kt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Ct;for(var Ut=0,Ht=!0;Ct;)Kt[Ut]=Ct,Ct.isBuf||(Ht=!1),Ct=Ct.next,Ut+=1;Kt.allBuffers=Ht,It(St,Nt,!0,Nt.length,Kt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Ct;){var qt=Ct.chunk,Pt=Ct.encoding,wt=Ct.callback;if(It(St,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,wt),Ct=Ct.next,Nt.bufferedRequestCount--,Nt.writing)break}Ct===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Ct,Nt.bufferProcessing=!1}function nn(St){return St.ending&&St.length===0&&St.bufferedRequest===null&&!St.finished&&!St.writing}function sn(St,Nt){St._final(function(Ct){Nt.pendingcb--,Ct&&St.emit("error",Ct),Nt.prefinished=!0,St.emit("prefinish"),xt(St,Nt)})}function xt(St,Nt){var Ct=nn(Nt);return Ct&&(function(Vt,Kt){Kt.prefinished||Kt.finalCalled||(typeof Vt._final=="function"?(Kt.pendingcb++,Kt.finalCalled=!0,tt.nextTick(sn,Vt,Kt)):(Kt.prefinished=!0,Vt.emit("prefinish")))}(St,Nt),Nt.pendingcb===0&&(Nt.finished=!0,St.emit("finish"))),Ct}ht.inherits(Tt,ft),Lt.prototype.getBuffer=function(){for(var St=this.bufferedRequest,Nt=[];St;)Nt.push(St),St=St.next;return Nt},function(){try{Object.defineProperty(Lt.prototype,"buffer",{get:vt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Tt,Symbol.hasInstance,{value:function(St){return!!yt.call(this,St)||this===Tt&&St&&St._writableState instanceof Lt}})):yt=function(St){return St instanceof this},Tt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Tt.prototype.write=function(St,Nt,Ct){var Vt,Kt=this._writableState,Gt=!1,Ut=!Kt.objectMode&&(Vt=St,pt.isBuffer(Vt)||Vt instanceof ct);return Ut&&!pt.isBuffer(St)&&(St=function(Ht){return pt.from(Ht)}(St)),typeof Nt=="function"&&(Ct=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Kt.defaultEncoding),typeof Ct!="function"&&(Ct=Ot),Kt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Ct):(Ut||function(Ht,qt,Pt,wt){var $t=!0,Xt=!1;return Pt===null?Xt=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(Xt=new TypeError("Invalid non-string/buffer chunk")),Xt&&(Ht.emit("error",Xt),tt.nextTick(wt,Xt),$t=!1),$t}(this,Kt,St,Ct))&&(Kt.pendingcb++,Gt=function(Ht,qt,Pt,wt,$t,Xt){if(!Pt){var un=function(en,Mt,jt){return en.objectMode||en.decodeStrings===!1||typeof Mt!="string"||(Mt=pt.from(Mt,jt)),Mt}(qt,wt,$t);wt!==un&&(Pt=!0,$t="buffer",wt=un)}var dn=qt.objectMode?1:wt.length;qt.length+=dn;var mn=qt.length<qt.highWaterMark;if(mn||(qt.needDrain=!0),qt.writing||qt.corked){var an=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:wt,encoding:$t,isBuf:Pt,callback:Xt,next:null},an?an.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else It(Ht,qt,!1,dn,wt,$t,Xt);return mn}(this,Kt,Ut,St,Nt,Ct)),Gt},Tt.prototype.cork=function(){this._writableState.corked++},Tt.prototype.uncork=function(){var St=this._writableState;St.corked&&(St.corked--,St.writing||St.corked||St.finished||St.bufferProcessing||!St.bufferedRequest||Bt(this,St))},Tt.prototype.setDefaultEncoding=function(St){if(typeof St=="string"&&(St=St.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((St+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+St);return this._writableState.defaultEncoding=St,this},Object.defineProperty(Tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Tt.prototype._write=function(St,Nt,Ct){Ct(new Error("_write() is not implemented"))},Tt.prototype._writev=null,Tt.prototype.end=function(St,Nt,Ct){var Vt=this._writableState;typeof St=="function"?(Ct=St,St=null,Nt=null):typeof Nt=="function"&&(Ct=Nt,Nt=null),St!=null&&this.write(St,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Kt,Gt,Ut){Gt.ending=!0,xt(Kt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Kt.once("finish",Ut)),Gt.ended=!0,Kt.writable=!1}(this,Vt,Ct)},Object.defineProperty(Tt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(St){this._writableState&&(this._writableState.destroyed=St)}}),Tt.prototype.destroy=Et.destroy,Tt.prototype._undestroy=Et.undestroy,Tt.prototype._destroy=function(St,Nt){this.end(),Nt(St)}}).call(this,s(2),s(15).setImmediate,s(6))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){var _=s(16);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o){},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(156)),$=tt(s(25)),et=tt(s(30));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)(function(j,it,st,ht){return(0,_.default)(it)(j,(0,$.default)(st),ht)},4),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){function $(...et){if(_!==null){var tt=_;_=null,tt.apply(this,et)}}return Object.assign($,_),$},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){if(_===null)throw new Error("Callback was already called.");var et=_;_=null,et.apply(this,$)}},i.exports=o.default},function(i,o,s){(function(_,$){var et=s(16);i.exports=It;var tt,j=s(42);It.ReadableState=Tt,s(21).EventEmitter;var it=function(Pt,wt){return Pt.listeners(wt).length},st=s(70),ht=s(47).Buffer,vt=_.Uint8Array||function(){},ft=s(17);ft.inherits=s(7);var pt=s(162),ct=void 0;ct=pt&&pt.debuglog?pt.debuglog("stream"):function(){};var yt,Et=s(163),Ot=s(71);ft.inherits(It,st);var Lt=["error","close","destroy","pause","resume"];function Tt(Pt,wt){Pt=Pt||{};var $t=wt instanceof(tt=tt||s(23));this.objectMode=!!Pt.objectMode,$t&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var Xt=Pt.highWaterMark,un=Pt.readableHighWaterMark,dn=this.objectMode?16:16384;this.highWaterMark=Xt||Xt===0?Xt:$t&&(un||un===0)?un:dn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(22).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function It(Pt){if(tt=tt||s(23),!(this instanceof It))return new It(Pt);this._readableState=new Tt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function mt(Pt,wt,$t,Xt,un){var dn,mn=Pt._readableState;return wt===null?(mn.reading=!1,function(an,en){if(!en.ended){if(en.decoder){var Mt=en.decoder.end();Mt&&Mt.length&&(en.buffer.push(Mt),en.length+=en.objectMode?1:Mt.length)}en.ended=!0,sn(an)}}(Pt,mn)):(un||(dn=function(an,en){var Mt;jt=en,ht.isBuffer(jt)||jt instanceof vt||typeof en=="string"||en===void 0||an.objectMode||(Mt=new TypeError("Invalid non-string/buffer chunk"));var jt;return Mt}(mn,wt)),dn?Pt.emit("error",dn):mn.objectMode||wt&&wt.length>0?(typeof wt=="string"||mn.objectMode||Object.getPrototypeOf(wt)===ht.prototype||(wt=function(an){return ht.from(an)}(wt)),Xt?mn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Bt(Pt,mn,wt,!0):mn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(mn.reading=!1,mn.decoder&&!$t?(wt=mn.decoder.write(wt),mn.objectMode||wt.length!==0?Bt(Pt,mn,wt,!1):St(Pt,mn)):Bt(Pt,mn,wt,!1))):Xt||(mn.reading=!1)),function(an){return!an.ended&&(an.needReadable||an.length<an.highWaterMark||an.length===0)}(mn)}function Bt(Pt,wt,$t,Xt){wt.flowing&&wt.length===0&&!wt.sync?(Pt.emit("data",$t),Pt.read(0)):(wt.length+=wt.objectMode?1:$t.length,Xt?wt.buffer.unshift($t):wt.buffer.push($t),wt.needReadable&&sn(Pt)),St(Pt,wt)}Object.defineProperty(It.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),It.prototype.destroy=Ot.destroy,It.prototype._undestroy=Ot.undestroy,It.prototype._destroy=function(Pt,wt){this.push(null),wt(Pt)},It.prototype.push=function(Pt,wt){var $t,Xt=this._readableState;return Xt.objectMode?$t=!0:typeof Pt=="string"&&((wt=wt||Xt.defaultEncoding)!==Xt.encoding&&(Pt=ht.from(Pt,wt),wt=""),$t=!0),mt(this,Pt,wt,!1,$t)},It.prototype.unshift=function(Pt){return mt(this,Pt,null,!0,!1)},It.prototype.isPaused=function(){return this._readableState.flowing===!1},It.prototype.setEncoding=function(Pt){return yt||(yt=s(22).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,wt){return Pt<=0||wt.length===0&&wt.ended?0:wt.objectMode?1:Pt!=Pt?wt.flowing&&wt.length?wt.buffer.head.data.length:wt.length:(Pt>wt.highWaterMark&&(wt.highWaterMark=function($t){return $t>=8388608?$t=8388608:($t--,$t|=$t>>>1,$t|=$t>>>2,$t|=$t>>>4,$t|=$t>>>8,$t|=$t>>>16,$t++),$t}(Pt)),Pt<=wt.length?Pt:wt.ended?wt.length:(wt.needReadable=!0,0))}function sn(Pt){var wt=Pt._readableState;wt.needReadable=!1,wt.emittedReadable||(ct("emitReadable",wt.flowing),wt.emittedReadable=!0,wt.sync?et.nextTick(xt,Pt):xt(Pt))}function xt(Pt){ct("emit readable"),Pt.emit("readable"),Kt(Pt)}function St(Pt,wt){wt.readingMore||(wt.readingMore=!0,et.nextTick(Nt,Pt,wt))}function Nt(Pt,wt){for(var $t=wt.length;!wt.reading&&!wt.flowing&&!wt.ended&&wt.length<wt.highWaterMark&&(ct("maybeReadMore read 0"),Pt.read(0),$t!==wt.length);)$t=wt.length;wt.readingMore=!1}function Ct(Pt){ct("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,wt){wt.reading||(ct("resume read 0"),Pt.read(0)),wt.resumeScheduled=!1,wt.awaitDrain=0,Pt.emit("resume"),Kt(Pt),wt.flowing&&!wt.reading&&Pt.read(0)}function Kt(Pt){var wt=Pt._readableState;for(ct("flow",wt.flowing);wt.flowing&&Pt.read()!==null;);}function Gt(Pt,wt){return wt.length===0?null:(wt.objectMode?$t=wt.buffer.shift():!Pt||Pt>=wt.length?($t=wt.decoder?wt.buffer.join(""):wt.buffer.length===1?wt.buffer.head.data:wt.buffer.concat(wt.length),wt.buffer.clear()):$t=function(Xt,un,dn){var mn;return Xt<un.head.data.length?(mn=un.head.data.slice(0,Xt),un.head.data=un.head.data.slice(Xt)):mn=Xt===un.head.data.length?un.shift():dn?function(an,en){var Mt=en.head,jt=1,Qt=Mt.data;for(an-=Qt.length;Mt=Mt.next;){var gn=Mt.data,hn=an>gn.length?gn.length:an;if(hn===gn.length?Qt+=gn:Qt+=gn.slice(0,an),(an-=hn)===0){hn===gn.length?(++jt,Mt.next?en.head=Mt.next:en.head=en.tail=null):(en.head=Mt,Mt.data=gn.slice(hn));break}++jt}return en.length-=jt,Qt}(Xt,un):function(an,en){var Mt=ht.allocUnsafe(an),jt=en.head,Qt=1;for(jt.data.copy(Mt),an-=jt.data.length;jt=jt.next;){var gn=jt.data,hn=an>gn.length?gn.length:an;if(gn.copy(Mt,Mt.length-an,0,hn),(an-=hn)===0){hn===gn.length?(++Qt,jt.next?en.head=jt.next:en.head=en.tail=null):(en.head=jt,jt.data=gn.slice(hn));break}++Qt}return en.length-=Qt,Mt}(Xt,un),mn}(Pt,wt.buffer,wt.decoder),$t);var $t}function Ut(Pt){var wt=Pt._readableState;if(wt.length>0)throw new Error('"endReadable()" called on non-empty stream');wt.endEmitted||(wt.ended=!0,et.nextTick(Ht,wt,Pt))}function Ht(Pt,wt){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,wt.readable=!1,wt.emit("end"))}function qt(Pt,wt){for(var $t=0,Xt=Pt.length;$t<Xt;$t++)if(Pt[$t]===wt)return $t;return-1}It.prototype.read=function(Pt){ct("read",Pt),Pt=parseInt(Pt,10);var wt=this._readableState,$t=Pt;if(Pt!==0&&(wt.emittedReadable=!1),Pt===0&&wt.needReadable&&(wt.length>=wt.highWaterMark||wt.ended))return ct("read: emitReadable",wt.length,wt.ended),wt.length===0&&wt.ended?Ut(this):sn(this),null;if((Pt=nn(Pt,wt))===0&&wt.ended)return wt.length===0&&Ut(this),null;var Xt,un=wt.needReadable;return ct("need readable",un),(wt.length===0||wt.length-Pt<wt.highWaterMark)&&ct("length less than watermark",un=!0),wt.ended||wt.reading?ct("reading or ended",un=!1):un&&(ct("do read"),wt.reading=!0,wt.sync=!0,wt.length===0&&(wt.needReadable=!0),this._read(wt.highWaterMark),wt.sync=!1,wt.reading||(Pt=nn($t,wt))),(Xt=Pt>0?Gt(Pt,wt):null)===null?(wt.needReadable=!0,Pt=0):wt.length-=Pt,wt.length===0&&(wt.ended||(wt.needReadable=!0),$t!==Pt&&wt.ended&&Ut(this)),Xt!==null&&this.emit("data",Xt),Xt},It.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},It.prototype.pipe=function(Pt,wt){var $t=this,Xt=this._readableState;switch(Xt.pipesCount){case 0:Xt.pipes=Pt;break;case 1:Xt.pipes=[Xt.pipes,Pt];break;default:Xt.pipes.push(Pt)}Xt.pipesCount+=1,ct("pipe count=%d opts=%j",Xt.pipesCount,wt);var un=(!wt||wt.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?mn:An;function dn(Mn,Yn){ct("onunpipe"),Mn===$t&&Yn&&Yn.hasUnpiped===!1&&(Yn.hasUnpiped=!0,ct("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",an),Pt.removeListener("error",Qt),Pt.removeListener("unpipe",dn),$t.removeListener("end",mn),$t.removeListener("end",An),$t.removeListener("data",jt),en=!0,!Xt.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||an())}function mn(){ct("onend"),Pt.end()}Xt.endEmitted?et.nextTick(un):$t.once("end",un),Pt.on("unpipe",dn);var an=function(Mn){return function(){var Yn=Mn._readableState;ct("pipeOnDrain",Yn.awaitDrain),Yn.awaitDrain&&Yn.awaitDrain--,Yn.awaitDrain===0&&it(Mn,"data")&&(Yn.flowing=!0,Kt(Mn))}}($t);Pt.on("drain",an);var en=!1,Mt=!1;function jt(Mn){ct("ondata"),Mt=!1,Pt.write(Mn)!==!1||Mt||((Xt.pipesCount===1&&Xt.pipes===Pt||Xt.pipesCount>1&&qt(Xt.pipes,Pt)!==-1)&&!en&&(ct("false write response, pause",$t._readableState.awaitDrain),$t._readableState.awaitDrain++,Mt=!0),$t.pause())}function Qt(Mn){ct("onerror",Mn),An(),Pt.removeListener("error",Qt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),An()}function hn(){ct("onfinish"),Pt.removeListener("close",gn),An()}function An(){ct("unpipe"),$t.unpipe(Pt)}return $t.on("data",jt),function(Mn,Yn,Nr){if(typeof Mn.prependListener=="function")return Mn.prependListener(Yn,Nr);Mn._events&&Mn._events[Yn]?j(Mn._events[Yn])?Mn._events[Yn].unshift(Nr):Mn._events[Yn]=[Nr,Mn._events[Yn]]:Mn.on(Yn,Nr)}(Pt,"error",Qt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",$t),Xt.flowing||(ct("pipe resume"),$t.resume()),Pt},It.prototype.unpipe=function(Pt){var wt=this._readableState,$t={hasUnpiped:!1};if(wt.pipesCount===0)return this;if(wt.pipesCount===1)return Pt&&Pt!==wt.pipes||(Pt||(Pt=wt.pipes),wt.pipes=null,wt.pipesCount=0,wt.flowing=!1,Pt&&Pt.emit("unpipe",this,$t)),this;if(!Pt){var Xt=wt.pipes,un=wt.pipesCount;wt.pipes=null,wt.pipesCount=0,wt.flowing=!1;for(var dn=0;dn<un;dn++)Xt[dn].emit("unpipe",this,$t);return this}var mn=qt(wt.pipes,Pt);return mn===-1||(wt.pipes.splice(mn,1),wt.pipesCount-=1,wt.pipesCount===1&&(wt.pipes=wt.pipes[0]),Pt.emit("unpipe",this,$t)),this},It.prototype.on=function(Pt,wt){var $t=st.prototype.on.call(this,Pt,wt);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var Xt=this._readableState;Xt.endEmitted||Xt.readableListening||(Xt.readableListening=Xt.needReadable=!0,Xt.emittedReadable=!1,Xt.reading?Xt.length&&sn(this):et.nextTick(Ct,this))}return $t},It.prototype.addListener=It.prototype.on,It.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ct("resume"),Pt.flowing=!0,function(wt,$t){$t.resumeScheduled||($t.resumeScheduled=!0,et.nextTick(Vt,wt,$t))}(this,Pt)),this},It.prototype.pause=function(){return ct("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ct("pause"),this._readableState.flowing=!1,this.emit("pause")),this},It.prototype.wrap=function(Pt){var wt=this,$t=this._readableState,Xt=!1;for(var un in Pt.on("end",function(){if(ct("wrapped end"),$t.decoder&&!$t.ended){var mn=$t.decoder.end();mn&&mn.length&&wt.push(mn)}wt.push(null)}),Pt.on("data",function(mn){ct("wrapped data"),$t.decoder&&(mn=$t.decoder.write(mn)),$t.objectMode&&mn==null||($t.objectMode||mn&&mn.length)&&(wt.push(mn)||(Xt=!0,Pt.pause()))}),Pt)this[un]===void 0&&typeof Pt[un]=="function"&&(this[un]=function(mn){return function(){return Pt[mn].apply(Pt,arguments)}}(un));for(var dn=0;dn<Lt.length;dn++)Pt.on(Lt[dn],this.emit.bind(this,Lt[dn]));return this._read=function(mn){ct("wrapped _read",mn),Xt&&(Xt=!1,Pt.resume())},this},Object.defineProperty(It.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),It._fromList=Gt}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){var _=s(16);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o,s){i.exports=tt;var _=s(23),$=s(17);function et(st,ht){var vt=this._transformState;vt.transforming=!1;var ft=vt.writecb;if(!ft)return this.emit("error",new Error("write callback called multiple times"));vt.writechunk=null,vt.writecb=null,ht!=null&&this.push(ht),ft(st);var pt=this._readableState;pt.reading=!1,(pt.needReadable||pt.length<pt.highWaterMark)&&this._read(pt.highWaterMark)}function tt(st){if(!(this instanceof tt))return new tt(st);_.call(this,st),this._transformState={afterTransform:et.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,st&&(typeof st.transform=="function"&&(this._transform=st.transform),typeof st.flush=="function"&&(this._flush=st.flush)),this.on("prefinish",j)}function j(){var st=this;typeof this._flush=="function"?this._flush(function(ht,vt){it(st,ht,vt)}):it(this,null,null)}function it(st,ht,vt){if(ht)return st.emit("error",ht);if(vt!=null&&st.push(vt),st._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(st._transformState.transforming)throw new Error("Calling transform done when still transforming");return st.push(null)}$.inherits=s(7),$.inherits(tt,_),tt.prototype.push=function(st,ht){return this._transformState.needTransform=!1,_.prototype.push.call(this,st,ht)},tt.prototype._transform=function(st,ht,vt){throw new Error("_transform() is not implemented")},tt.prototype._write=function(st,ht,vt){var ft=this._transformState;if(ft.writecb=vt,ft.writechunk=st,ft.writeencoding=ht,!ft.transforming){var pt=this._readableState;(ft.needTransform||pt.needReadable||pt.length<pt.highWaterMark)&&this._read(pt.highWaterMark)}},tt.prototype._read=function(st){var ht=this._transformState;ht.writechunk!==null&&ht.writecb&&!ht.transforming?(ht.transforming=!0,this._transform(ht.writechunk,ht.writeencoding,ht.afterTransform)):ht.needTransform=!0},tt.prototype._destroy=function(st,ht){var vt=this;_.prototype._destroy.call(this,st,function(ft){ht(ft),vt.emit("close")})}},function(i,o,s){i.exports=s(48)},function(i,o,s){(function(_){var $=s(170);function et(xt,St){if(xt===St)return 0;for(var Nt=xt.length,Ct=St.length,Vt=0,Kt=Math.min(Nt,Ct);Vt<Kt;++Vt)if(xt[Vt]!==St[Vt]){Nt=xt[Vt],Ct=St[Vt];break}return Nt<Ct?-1:Ct<Nt?1:0}function tt(xt){return _.Buffer&&typeof _.Buffer.isBuffer=="function"?_.Buffer.isBuffer(xt):!(xt==null||!xt._isBuffer)}var j=s(13),it=Object.prototype.hasOwnProperty,st=Array.prototype.slice,ht=function(){}.name==="foo";function vt(xt){return Object.prototype.toString.call(xt)}function ft(xt){return!tt(xt)&&typeof _.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(xt):!!xt&&(xt instanceof DataView||!!(xt.buffer&&xt.buffer instanceof ArrayBuffer)))}var pt=i.exports=Tt,ct=/\s*function\s+([^\(\s]*)\s*/;function yt(xt){if(j.isFunction(xt)){if(ht)return xt.name;var St=xt.toString().match(ct);return St&&St[1]}}function Et(xt,St){return typeof xt=="string"?xt.length<St?xt:xt.slice(0,St):xt}function Ot(xt){if(ht||!j.isFunction(xt))return j.inspect(xt);var St=yt(xt);return"[Function"+(St?": "+St:"")+"]"}function Lt(xt,St,Nt,Ct,Vt){throw new pt.AssertionError({message:Nt,actual:xt,expected:St,operator:Ct,stackStartFunction:Vt})}function Tt(xt,St){xt||Lt(xt,!0,St,"==",pt.ok)}function It(xt,St,Nt,Ct){if(xt===St)return!0;if(tt(xt)&&tt(St))return et(xt,St)===0;if(j.isDate(xt)&&j.isDate(St))return xt.getTime()===St.getTime();if(j.isRegExp(xt)&&j.isRegExp(St))return xt.source===St.source&&xt.global===St.global&&xt.multiline===St.multiline&&xt.lastIndex===St.lastIndex&&xt.ignoreCase===St.ignoreCase;if(xt!==null&&typeof xt=="object"||St!==null&&typeof St=="object"){if(ft(xt)&&ft(St)&&vt(xt)===vt(St)&&!(xt instanceof Float32Array||xt instanceof Float64Array))return et(new Uint8Array(xt.buffer),new Uint8Array(St.buffer))===0;if(tt(xt)!==tt(St))return!1;var Vt=(Ct=Ct||{actual:[],expected:[]}).actual.indexOf(xt);return Vt!==-1&&Vt===Ct.expected.indexOf(St)||(Ct.actual.push(xt),Ct.expected.push(St),function(Kt,Gt,Ut,Ht){if(Kt==null||Gt==null)return!1;if(j.isPrimitive(Kt)||j.isPrimitive(Gt))return Kt===Gt;if(Ut&&Object.getPrototypeOf(Kt)!==Object.getPrototypeOf(Gt))return!1;var qt=mt(Kt),Pt=mt(Gt);if(qt&&!Pt||!qt&&Pt)return!1;if(qt)return Kt=st.call(Kt),Gt=st.call(Gt),It(Kt,Gt,Ut);var wt,$t,Xt=sn(Kt),un=sn(Gt);if(Xt.length!==un.length)return!1;for(Xt.sort(),un.sort(),$t=Xt.length-1;$t>=0;$t--)if(Xt[$t]!==un[$t])return!1;for($t=Xt.length-1;$t>=0;$t--)if(wt=Xt[$t],!It(Kt[wt],Gt[wt],Ut,Ht))return!1;return!0}(xt,St,Nt,Ct))}return Nt?xt===St:xt==St}function mt(xt){return Object.prototype.toString.call(xt)=="[object Arguments]"}function Bt(xt,St){if(!xt||!St)return!1;if(Object.prototype.toString.call(St)=="[object RegExp]")return St.test(xt);try{if(xt instanceof St)return!0}catch{}return!Error.isPrototypeOf(St)&&St.call({},xt)===!0}function nn(xt,St,Nt,Ct){var Vt;if(typeof St!="function")throw new TypeError('"block" argument must be a function');typeof Nt=="string"&&(Ct=Nt,Nt=null),Vt=function(Ut){var Ht;try{Ut()}catch(qt){Ht=qt}return Ht}(St),Ct=(Nt&&Nt.name?" ("+Nt.name+").":".")+(Ct?" "+Ct:"."),xt&&!Vt&&Lt(Vt,Nt,"Missing expected exception"+Ct);var Kt=typeof Ct=="string",Gt=!xt&&Vt&&!Nt;if((!xt&&j.isError(Vt)&&Kt&&Bt(Vt,Nt)||Gt)&&Lt(Vt,Nt,"Got unwanted exception"+Ct),xt&&Vt&&Nt&&!Bt(Vt,Nt)||!xt&&Vt)throw Vt}pt.AssertionError=function(xt){this.name="AssertionError",this.actual=xt.actual,this.expected=xt.expected,this.operator=xt.operator,xt.message?(this.message=xt.message,this.generatedMessage=!1):(this.message=function(Ut){return Et(Ot(Ut.actual),128)+" "+Ut.operator+" "+Et(Ot(Ut.expected),128)}(this),this.generatedMessage=!0);var St=xt.stackStartFunction||Lt;if(Error.captureStackTrace)Error.captureStackTrace(this,St);else{var Nt=new Error;if(Nt.stack){var Ct=Nt.stack,Vt=yt(St),Kt=Ct.indexOf(`
`+Vt);if(Kt>=0){var Gt=Ct.indexOf(`
`,Kt+1);Ct=Ct.substring(Gt+1)}this.stack=Ct}}},j.inherits(pt.AssertionError,Error),pt.fail=Lt,pt.ok=Tt,pt.equal=function(xt,St,Nt){xt!=St&&Lt(xt,St,Nt,"==",pt.equal)},pt.notEqual=function(xt,St,Nt){xt==St&&Lt(xt,St,Nt,"!=",pt.notEqual)},pt.deepEqual=function(xt,St,Nt){It(xt,St,!1)||Lt(xt,St,Nt,"deepEqual",pt.deepEqual)},pt.deepStrictEqual=function(xt,St,Nt){It(xt,St,!0)||Lt(xt,St,Nt,"deepStrictEqual",pt.deepStrictEqual)},pt.notDeepEqual=function(xt,St,Nt){It(xt,St,!1)&&Lt(xt,St,Nt,"notDeepEqual",pt.notDeepEqual)},pt.notDeepStrictEqual=function xt(St,Nt,Ct){It(St,Nt,!0)&&Lt(St,Nt,Ct,"notDeepStrictEqual",xt)},pt.strictEqual=function(xt,St,Nt){xt!==St&&Lt(xt,St,Nt,"===",pt.strictEqual)},pt.notStrictEqual=function(xt,St,Nt){xt===St&&Lt(xt,St,Nt,"!==",pt.notStrictEqual)},pt.throws=function(xt,St,Nt){nn(!0,xt,St,Nt)},pt.doesNotThrow=function(xt,St,Nt){nn(!1,xt,St,Nt)},pt.ifError=function(xt){if(xt)throw xt},pt.strict=$(function xt(St,Nt){St||Lt(St,!0,Nt,"==",xt)},pt,{equal:pt.strictEqual,deepEqual:pt.deepStrictEqual,notEqual:pt.notStrictEqual,notDeepEqual:pt.notDeepStrictEqual}),pt.strict.strict=pt.strict;var sn=Object.keys||function(xt){var St=[];for(var Nt in xt)it.call(xt,Nt)&&St.push(Nt);return St}}).call(this,s(6))},function(i,o,s){i.exports=function(_,$,et,tt){for(var j=65535&_|0,it=_>>>16&65535|0,st=0;et!==0;){et-=st=et>2e3?2e3:et;do it=it+(j=j+$[tt++]|0)|0;while(--st);j%=65521,it%=65521}return j|it<<16|0}},function(i,o,s){var _=function(){for(var $,et=[],tt=0;tt<256;tt++){$=tt;for(var j=0;j<8;j++)$=1&$?3988292384^$>>>1:$>>>1;et[tt]=$}return et}();i.exports=function($,et,tt,j){var it=_,st=j+tt;$^=-1;for(var ht=j;ht<st;ht++)$=$>>>8^it[255&($^et[ht])];return-1^$}},function(i,o,s){(function(_,$){var et;i.exports=St,St.ReadableState=xt,s(21).EventEmitter;var tt=function(an,en){return an.listeners(en).length},j=s(78),it=s(5).Buffer,st=_.Uint8Array||function(){},ht,vt=s(179);ht=vt&&vt.debuglog?vt.debuglog("stream"):function(){};var ft,pt,ct,yt=s(180),Et=s(79),Ot=s(80).getHighWaterMark,Lt=s(26).codes,Tt=Lt.ERR_INVALID_ARG_TYPE,It=Lt.ERR_STREAM_PUSH_AFTER_EOF,mt=Lt.ERR_METHOD_NOT_IMPLEMENTED,Bt=Lt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s(7)(St,j);var nn=Et.errorOrDestroy,sn=["error","close","destroy","pause","resume"];function xt(an,en,Mt){et=et||s(27),an=an||{},typeof Mt!="boolean"&&(Mt=en instanceof et),this.objectMode=!!an.objectMode,Mt&&(this.objectMode=this.objectMode||!!an.readableObjectMode),this.highWaterMark=Ot(this,an,"readableHighWaterMark",Mt),this.buffer=new yt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=an.emitClose!==!1,this.autoDestroy=!!an.autoDestroy,this.destroyed=!1,this.defaultEncoding=an.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,an.encoding&&(ft||(ft=s(22).StringDecoder),this.decoder=new ft(an.encoding),this.encoding=an.encoding)}function St(an){if(et=et||s(27),!(this instanceof St))return new St(an);var en=this instanceof et;this._readableState=new xt(an,this,en),this.readable=!0,an&&(typeof an.read=="function"&&(this._read=an.read),typeof an.destroy=="function"&&(this._destroy=an.destroy)),j.call(this)}function Nt(an,en,Mt,jt,Qt){ht("readableAddChunk",en);var gn,hn=an._readableState;if(en===null)hn.reading=!1,function(An,Mn){if(ht("onEofChunk"),!Mn.ended){if(Mn.decoder){var Yn=Mn.decoder.end();Yn&&Yn.length&&(Mn.buffer.push(Yn),Mn.length+=Mn.objectMode?1:Yn.length)}Mn.ended=!0,Mn.sync?Kt(An):(Mn.needReadable=!1,Mn.emittedReadable||(Mn.emittedReadable=!0,Gt(An)))}}(an,hn);else if(Qt||(gn=function(An,Mn){var Yn;Nr=Mn,it.isBuffer(Nr)||Nr instanceof st||typeof Mn=="string"||Mn===void 0||An.objectMode||(Yn=new Tt("chunk",["string","Buffer","Uint8Array"],Mn));var Nr;return Yn}(hn,en)),gn)nn(an,gn);else if(hn.objectMode||en&&en.length>0)if(typeof en=="string"||hn.objectMode||Object.getPrototypeOf(en)===it.prototype||(en=function(An){return it.from(An)}(en)),jt)hn.endEmitted?nn(an,new Bt):Ct(an,hn,en,!0);else if(hn.ended)nn(an,new It);else{if(hn.destroyed)return!1;hn.reading=!1,hn.decoder&&!Mt?(en=hn.decoder.write(en),hn.objectMode||en.length!==0?Ct(an,hn,en,!1):Ut(an,hn)):Ct(an,hn,en,!1)}else jt||(hn.reading=!1,Ut(an,hn));return!hn.ended&&(hn.length<hn.highWaterMark||hn.length===0)}function Ct(an,en,Mt,jt){en.flowing&&en.length===0&&!en.sync?(en.awaitDrain=0,an.emit("data",Mt)):(en.length+=en.objectMode?1:Mt.length,jt?en.buffer.unshift(Mt):en.buffer.push(Mt),en.needReadable&&Kt(an)),Ut(an,en)}Object.defineProperty(St.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(an){this._readableState&&(this._readableState.destroyed=an)}}),St.prototype.destroy=Et.destroy,St.prototype._undestroy=Et.undestroy,St.prototype._destroy=function(an,en){en(an)},St.prototype.push=function(an,en){var Mt,jt=this._readableState;return jt.objectMode?Mt=!0:typeof an=="string"&&((en=en||jt.defaultEncoding)!==jt.encoding&&(an=it.from(an,en),en=""),Mt=!0),Nt(this,an,en,!1,Mt)},St.prototype.unshift=function(an){return Nt(this,an,null,!0,!1)},St.prototype.isPaused=function(){return this._readableState.flowing===!1},St.prototype.setEncoding=function(an){ft||(ft=s(22).StringDecoder);var en=new ft(an);this._readableState.decoder=en,this._readableState.encoding=this._readableState.decoder.encoding;for(var Mt=this._readableState.buffer.head,jt="";Mt!==null;)jt+=en.write(Mt.data),Mt=Mt.next;return this._readableState.buffer.clear(),jt!==""&&this._readableState.buffer.push(jt),this._readableState.length=jt.length,this};function Vt(an,en){return an<=0||en.length===0&&en.ended?0:en.objectMode?1:an!=an?en.flowing&&en.length?en.buffer.head.data.length:en.length:(an>en.highWaterMark&&(en.highWaterMark=function(Mt){return Mt>=1073741824?Mt=1073741824:(Mt--,Mt|=Mt>>>1,Mt|=Mt>>>2,Mt|=Mt>>>4,Mt|=Mt>>>8,Mt|=Mt>>>16,Mt++),Mt}(an)),an<=en.length?an:en.ended?en.length:(en.needReadable=!0,0))}function Kt(an){var en=an._readableState;ht("emitReadable",en.needReadable,en.emittedReadable),en.needReadable=!1,en.emittedReadable||(ht("emitReadable",en.flowing),en.emittedReadable=!0,$.nextTick(Gt,an))}function Gt(an){var en=an._readableState;ht("emitReadable_",en.destroyed,en.length,en.ended),en.destroyed||!en.length&&!en.ended||(an.emit("readable"),en.emittedReadable=!1),en.needReadable=!en.flowing&&!en.ended&&en.length<=en.highWaterMark,$t(an)}function Ut(an,en){en.readingMore||(en.readingMore=!0,$.nextTick(Ht,an,en))}function Ht(an,en){for(;!en.reading&&!en.ended&&(en.length<en.highWaterMark||en.flowing&&en.length===0);){var Mt=en.length;if(ht("maybeReadMore read 0"),an.read(0),Mt===en.length)break}en.readingMore=!1}function qt(an){var en=an._readableState;en.readableListening=an.listenerCount("readable")>0,en.resumeScheduled&&!en.paused?en.flowing=!0:an.listenerCount("data")>0&&an.resume()}function Pt(an){ht("readable nexttick read 0"),an.read(0)}function wt(an,en){ht("resume",en.reading),en.reading||an.read(0),en.resumeScheduled=!1,an.emit("resume"),$t(an),en.flowing&&!en.reading&&an.read(0)}function $t(an){var en=an._readableState;for(ht("flow",en.flowing);en.flowing&&an.read()!==null;);}function Xt(an,en){return en.length===0?null:(en.objectMode?Mt=en.buffer.shift():!an||an>=en.length?(Mt=en.decoder?en.buffer.join(""):en.buffer.length===1?en.buffer.first():en.buffer.concat(en.length),en.buffer.clear()):Mt=en.buffer.consume(an,en.decoder),Mt);var Mt}function un(an){var en=an._readableState;ht("endReadable",en.endEmitted),en.endEmitted||(en.ended=!0,$.nextTick(dn,en,an))}function dn(an,en){if(ht("endReadableNT",an.endEmitted,an.length),!an.endEmitted&&an.length===0&&(an.endEmitted=!0,en.readable=!1,en.emit("end"),an.autoDestroy)){var Mt=en._writableState;(!Mt||Mt.autoDestroy&&Mt.finished)&&en.destroy()}}function mn(an,en){for(var Mt=0,jt=an.length;Mt<jt;Mt++)if(an[Mt]===en)return Mt;return-1}St.prototype.read=function(an){ht("read",an),an=parseInt(an,10);var en=this._readableState,Mt=an;if(an!==0&&(en.emittedReadable=!1),an===0&&en.needReadable&&((en.highWaterMark!==0?en.length>=en.highWaterMark:en.length>0)||en.ended))return ht("read: emitReadable",en.length,en.ended),en.length===0&&en.ended?un(this):Kt(this),null;if((an=Vt(an,en))===0&&en.ended)return en.length===0&&un(this),null;var jt,Qt=en.needReadable;return ht("need readable",Qt),(en.length===0||en.length-an<en.highWaterMark)&&ht("length less than watermark",Qt=!0),en.ended||en.reading?ht("reading or ended",Qt=!1):Qt&&(ht("do read"),en.reading=!0,en.sync=!0,en.length===0&&(en.needReadable=!0),this._read(en.highWaterMark),en.sync=!1,en.reading||(an=Vt(Mt,en))),(jt=an>0?Xt(an,en):null)===null?(en.needReadable=en.length<=en.highWaterMark,an=0):(en.length-=an,en.awaitDrain=0),en.length===0&&(en.ended||(en.needReadable=!0),Mt!==an&&en.ended&&un(this)),jt!==null&&this.emit("data",jt),jt},St.prototype._read=function(an){nn(this,new mt("_read()"))},St.prototype.pipe=function(an,en){var Mt=this,jt=this._readableState;switch(jt.pipesCount){case 0:jt.pipes=an;break;case 1:jt.pipes=[jt.pipes,an];break;default:jt.pipes.push(an)}jt.pipesCount+=1,ht("pipe count=%d opts=%j",jt.pipesCount,en);var Qt=(!en||en.end!==!1)&&an!==$.stdout&&an!==$.stderr?hn:zr;function gn(In,kn){ht("onunpipe"),In===Mt&&kn&&kn.hasUnpiped===!1&&(kn.hasUnpiped=!0,ht("cleanup"),an.removeListener("close",ro),an.removeListener("finish",to),an.removeListener("drain",An),an.removeListener("error",Nr),an.removeListener("unpipe",gn),Mt.removeListener("end",hn),Mt.removeListener("end",zr),Mt.removeListener("data",Yn),Mn=!0,!jt.awaitDrain||an._writableState&&!an._writableState.needDrain||An())}function hn(){ht("onend"),an.end()}jt.endEmitted?$.nextTick(Qt):Mt.once("end",Qt),an.on("unpipe",gn);var An=function(In){return function(){var kn=In._readableState;ht("pipeOnDrain",kn.awaitDrain),kn.awaitDrain&&kn.awaitDrain--,kn.awaitDrain===0&&tt(In,"data")&&(kn.flowing=!0,$t(In))}}(Mt);an.on("drain",An);var Mn=!1;function Yn(In){ht("ondata");var kn=an.write(In);ht("dest.write",kn),kn===!1&&((jt.pipesCount===1&&jt.pipes===an||jt.pipesCount>1&&mn(jt.pipes,an)!==-1)&&!Mn&&(ht("false write response, pause",jt.awaitDrain),jt.awaitDrain++),Mt.pause())}function Nr(In){ht("onerror",In),zr(),an.removeListener("error",Nr),tt(an,"error")===0&&nn(an,In)}function ro(){an.removeListener("finish",to),zr()}function to(){ht("onfinish"),an.removeListener("close",ro),zr()}function zr(){ht("unpipe"),Mt.unpipe(an)}return Mt.on("data",Yn),function(In,kn,Kn){if(typeof In.prependListener=="function")return In.prependListener(kn,Kn);In._events&&In._events[kn]?Array.isArray(In._events[kn])?In._events[kn].unshift(Kn):In._events[kn]=[Kn,In._events[kn]]:In.on(kn,Kn)}(an,"error",Nr),an.once("close",ro),an.once("finish",to),an.emit("pipe",Mt),jt.flowing||(ht("pipe resume"),Mt.resume()),an},St.prototype.unpipe=function(an){var en=this._readableState,Mt={hasUnpiped:!1};if(en.pipesCount===0)return this;if(en.pipesCount===1)return an&&an!==en.pipes||(an||(an=en.pipes),en.pipes=null,en.pipesCount=0,en.flowing=!1,an&&an.emit("unpipe",this,Mt)),this;if(!an){var jt=en.pipes,Qt=en.pipesCount;en.pipes=null,en.pipesCount=0,en.flowing=!1;for(var gn=0;gn<Qt;gn++)jt[gn].emit("unpipe",this,{hasUnpiped:!1});return this}var hn=mn(en.pipes,an);return hn===-1||(en.pipes.splice(hn,1),en.pipesCount-=1,en.pipesCount===1&&(en.pipes=en.pipes[0]),an.emit("unpipe",this,Mt)),this},St.prototype.on=function(an,en){var Mt=j.prototype.on.call(this,an,en),jt=this._readableState;return an==="data"?(jt.readableListening=this.listenerCount("readable")>0,jt.flowing!==!1&&this.resume()):an==="readable"&&(jt.endEmitted||jt.readableListening||(jt.readableListening=jt.needReadable=!0,jt.flowing=!1,jt.emittedReadable=!1,ht("on readable",jt.length,jt.reading),jt.length?Kt(this):jt.reading||$.nextTick(Pt,this))),Mt},St.prototype.addListener=St.prototype.on,St.prototype.removeListener=function(an,en){var Mt=j.prototype.removeListener.call(this,an,en);return an==="readable"&&$.nextTick(qt,this),Mt},St.prototype.removeAllListeners=function(an){var en=j.prototype.removeAllListeners.apply(this,arguments);return an!=="readable"&&an!==void 0||$.nextTick(qt,this),en},St.prototype.resume=function(){var an=this._readableState;return an.flowing||(ht("resume"),an.flowing=!an.readableListening,function(en,Mt){Mt.resumeScheduled||(Mt.resumeScheduled=!0,$.nextTick(wt,en,Mt))}(this,an)),an.paused=!1,this},St.prototype.pause=function(){return ht("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ht("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},St.prototype.wrap=function(an){var en=this,Mt=this._readableState,jt=!1;for(var Qt in an.on("end",function(){if(ht("wrapped end"),Mt.decoder&&!Mt.ended){var hn=Mt.decoder.end();hn&&hn.length&&en.push(hn)}en.push(null)}),an.on("data",function(hn){ht("wrapped data"),Mt.decoder&&(hn=Mt.decoder.write(hn)),Mt.objectMode&&hn==null||(Mt.objectMode||hn&&hn.length)&&(en.push(hn)||(jt=!0,an.pause()))}),an)this[Qt]===void 0&&typeof an[Qt]=="function"&&(this[Qt]=function(hn){return function(){return an[hn].apply(an,arguments)}}(Qt));for(var gn=0;gn<sn.length;gn++)an.on(sn[gn],this.emit.bind(this,sn[gn]));return this._read=function(hn){ht("wrapped _read",hn),jt&&(jt=!1,an.resume())},this},typeof Symbol=="function"&&(St.prototype[Symbol.asyncIterator]=function(){return pt===void 0&&(pt=s(182)),pt(this)}),Object.defineProperty(St.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(St.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(St.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(an){this._readableState&&(this._readableState.flowing=an)}}),St._fromList=Xt,Object.defineProperty(St.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(St.from=function(an,en){return ct===void 0&&(ct=s(183)),ct(St,an,en)})}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){(function(_){function $(j,it){tt(j,it),et(j)}function et(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function tt(j,it){j.emit("error",it)}i.exports={destroy:function(j,it){var st=this,ht=this._readableState&&this._readableState.destroyed,vt=this._writableState&&this._writableState.destroyed;return ht||vt?(it?it(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(tt,this,j)):_.nextTick(tt,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(ft){!it&&ft?st._writableState?st._writableState.errorEmitted?_.nextTick(et,st):(st._writableState.errorEmitted=!0,_.nextTick($,st,ft)):_.nextTick($,st,ft):it?(_.nextTick(et,st),it(ft)):_.nextTick(et,st)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(j,it){var st=j._readableState,ht=j._writableState;st&&st.autoDestroy||ht&&ht.autoDestroy?j.destroy(it):j.emit("error",it)}}}).call(this,s(2))},function(i,o,s){var _=s(26).codes.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function($,et,tt,j){var it=function(st,ht,vt){return st.highWaterMark!=null?st.highWaterMark:ht?st[vt]:null}(et,j,tt);if(it!=null){if(!isFinite(it)||Math.floor(it)!==it||it<0)throw new _(j?tt:"highWaterMark",it);return Math.floor(it)}return $.objectMode?16:16384}}},function(i,o,s){(function(_,$){function et(Ht){var qt=this;this.next=null,this.entry=null,this.finish=function(){(function(Pt,wt,$t){var Xt=Pt.entry;for(Pt.entry=null;Xt;){var un=Xt.callback;wt.pendingcb--,un($t),Xt=Xt.next}wt.corkedRequestsFree.next=Pt})(qt,Ht)}}var tt;i.exports=St,St.WritableState=xt;var j={deprecate:s(43)},it=s(78),st=s(5).Buffer,ht=_.Uint8Array||function(){},vt,ft=s(79),pt=s(80).getHighWaterMark,ct=s(26).codes,yt=ct.ERR_INVALID_ARG_TYPE,Et=ct.ERR_METHOD_NOT_IMPLEMENTED,Ot=ct.ERR_MULTIPLE_CALLBACK,Lt=ct.ERR_STREAM_CANNOT_PIPE,Tt=ct.ERR_STREAM_DESTROYED,It=ct.ERR_STREAM_NULL_VALUES,mt=ct.ERR_STREAM_WRITE_AFTER_END,Bt=ct.ERR_UNKNOWN_ENCODING,nn=ft.errorOrDestroy;function sn(){}function xt(Ht,qt,Pt){tt=tt||s(27),Ht=Ht||{},typeof Pt!="boolean"&&(Pt=qt instanceof tt),this.objectMode=!!Ht.objectMode,Pt&&(this.objectMode=this.objectMode||!!Ht.writableObjectMode),this.highWaterMark=pt(this,Ht,"writableHighWaterMark",Pt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var wt=Ht.decodeStrings===!1;this.decodeStrings=!wt,this.defaultEncoding=Ht.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($t){(function(Xt,un){var dn=Xt._writableState,mn=dn.sync,an=dn.writecb;if(typeof an!="function")throw new Ot;if(function(Mt){Mt.writing=!1,Mt.writecb=null,Mt.length-=Mt.writelen,Mt.writelen=0}(dn),un)(function(Mt,jt,Qt,gn,hn){--jt.pendingcb,Qt?($.nextTick(hn,gn),$.nextTick(Ut,Mt,jt),Mt._writableState.errorEmitted=!0,nn(Mt,gn)):(hn(gn),Mt._writableState.errorEmitted=!0,nn(Mt,gn),Ut(Mt,jt))})(Xt,dn,mn,un,an);else{var en=Kt(dn)||Xt.destroyed;en||dn.corked||dn.bufferProcessing||!dn.bufferedRequest||Vt(Xt,dn),mn?$.nextTick(Ct,Xt,dn,en,an):Ct(Xt,dn,en,an)}})(qt,$t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ht.emitClose!==!1,this.autoDestroy=!!Ht.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new et(this)}function St(Ht){var qt=this instanceof(tt=tt||s(27));if(!qt&&!vt.call(St,this))return new St(Ht);this._writableState=new xt(Ht,this,qt),this.writable=!0,Ht&&(typeof Ht.write=="function"&&(this._write=Ht.write),typeof Ht.writev=="function"&&(this._writev=Ht.writev),typeof Ht.destroy=="function"&&(this._destroy=Ht.destroy),typeof Ht.final=="function"&&(this._final=Ht.final)),it.call(this)}function Nt(Ht,qt,Pt,wt,$t,Xt,un){qt.writelen=wt,qt.writecb=un,qt.writing=!0,qt.sync=!0,qt.destroyed?qt.onwrite(new Tt("write")):Pt?Ht._writev($t,qt.onwrite):Ht._write($t,Xt,qt.onwrite),qt.sync=!1}function Ct(Ht,qt,Pt,wt){Pt||function($t,Xt){Xt.length===0&&Xt.needDrain&&(Xt.needDrain=!1,$t.emit("drain"))}(Ht,qt),qt.pendingcb--,wt(),Ut(Ht,qt)}function Vt(Ht,qt){qt.bufferProcessing=!0;var Pt=qt.bufferedRequest;if(Ht._writev&&Pt&&Pt.next){var wt=qt.bufferedRequestCount,$t=new Array(wt),Xt=qt.corkedRequestsFree;Xt.entry=Pt;for(var un=0,dn=!0;Pt;)$t[un]=Pt,Pt.isBuf||(dn=!1),Pt=Pt.next,un+=1;$t.allBuffers=dn,Nt(Ht,qt,!0,qt.length,$t,"",Xt.finish),qt.pendingcb++,qt.lastBufferedRequest=null,Xt.next?(qt.corkedRequestsFree=Xt.next,Xt.next=null):qt.corkedRequestsFree=new et(qt),qt.bufferedRequestCount=0}else{for(;Pt;){var mn=Pt.chunk,an=Pt.encoding,en=Pt.callback;if(Nt(Ht,qt,!1,qt.objectMode?1:mn.length,mn,an,en),Pt=Pt.next,qt.bufferedRequestCount--,qt.writing)break}Pt===null&&(qt.lastBufferedRequest=null)}qt.bufferedRequest=Pt,qt.bufferProcessing=!1}function Kt(Ht){return Ht.ending&&Ht.length===0&&Ht.bufferedRequest===null&&!Ht.finished&&!Ht.writing}function Gt(Ht,qt){Ht._final(function(Pt){qt.pendingcb--,Pt&&nn(Ht,Pt),qt.prefinished=!0,Ht.emit("prefinish"),Ut(Ht,qt)})}function Ut(Ht,qt){var Pt=Kt(qt);if(Pt&&(function($t,Xt){Xt.prefinished||Xt.finalCalled||(typeof $t._final!="function"||Xt.destroyed?(Xt.prefinished=!0,$t.emit("prefinish")):(Xt.pendingcb++,Xt.finalCalled=!0,$.nextTick(Gt,$t,Xt)))}(Ht,qt),qt.pendingcb===0&&(qt.finished=!0,Ht.emit("finish"),qt.autoDestroy))){var wt=Ht._readableState;(!wt||wt.autoDestroy&&wt.endEmitted)&&Ht.destroy()}return Pt}s(7)(St,it),xt.prototype.getBuffer=function(){for(var Ht=this.bufferedRequest,qt=[];Ht;)qt.push(Ht),Ht=Ht.next;return qt},function(){try{Object.defineProperty(xt.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(vt=Function.prototype[Symbol.hasInstance],Object.defineProperty(St,Symbol.hasInstance,{value:function(Ht){return!!vt.call(this,Ht)||this===St&&Ht&&Ht._writableState instanceof xt}})):vt=function(Ht){return Ht instanceof this},St.prototype.pipe=function(){nn(this,new Lt)},St.prototype.write=function(Ht,qt,Pt){var wt,$t=this._writableState,Xt=!1,un=!$t.objectMode&&(wt=Ht,st.isBuffer(wt)||wt instanceof ht);return un&&!st.isBuffer(Ht)&&(Ht=function(dn){return st.from(dn)}(Ht)),typeof qt=="function"&&(Pt=qt,qt=null),un?qt="buffer":qt||(qt=$t.defaultEncoding),typeof Pt!="function"&&(Pt=sn),$t.ending?function(dn,mn){var an=new mt;nn(dn,an),$.nextTick(mn,an)}(this,Pt):(un||function(dn,mn,an,en){var Mt;return an===null?Mt=new It:typeof an=="string"||mn.objectMode||(Mt=new yt("chunk",["string","Buffer"],an)),!Mt||(nn(dn,Mt),$.nextTick(en,Mt),!1)}(this,$t,Ht,Pt))&&($t.pendingcb++,Xt=function(dn,mn,an,en,Mt,jt){if(!an){var Qt=function(Mn,Yn,Nr){return Mn.objectMode||Mn.decodeStrings===!1||typeof Yn!="string"||(Yn=st.from(Yn,Nr)),Yn}(mn,en,Mt);en!==Qt&&(an=!0,Mt="buffer",en=Qt)}var gn=mn.objectMode?1:en.length;mn.length+=gn;var hn=mn.length<mn.highWaterMark;if(hn||(mn.needDrain=!0),mn.writing||mn.corked){var An=mn.lastBufferedRequest;mn.lastBufferedRequest={chunk:en,encoding:Mt,isBuf:an,callback:jt,next:null},An?An.next=mn.lastBufferedRequest:mn.bufferedRequest=mn.lastBufferedRequest,mn.bufferedRequestCount+=1}else Nt(dn,mn,!1,gn,en,Mt,jt);return hn}(this,$t,un,Ht,qt,Pt)),Xt},St.prototype.cork=function(){this._writableState.corked++},St.prototype.uncork=function(){var Ht=this._writableState;Ht.corked&&(Ht.corked--,Ht.writing||Ht.corked||Ht.bufferProcessing||!Ht.bufferedRequest||Vt(this,Ht))},St.prototype.setDefaultEncoding=function(Ht){if(typeof Ht=="string"&&(Ht=Ht.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ht+"").toLowerCase())>-1))throw new Bt(Ht);return this._writableState.defaultEncoding=Ht,this},Object.defineProperty(St.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(St.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),St.prototype._write=function(Ht,qt,Pt){Pt(new Et("_write()"))},St.prototype._writev=null,St.prototype.end=function(Ht,qt,Pt){var wt=this._writableState;return typeof Ht=="function"?(Pt=Ht,Ht=null,qt=null):typeof qt=="function"&&(Pt=qt,qt=null),Ht!=null&&this.write(Ht,qt),wt.corked&&(wt.corked=1,this.uncork()),wt.ending||function($t,Xt,un){Xt.ending=!0,Ut($t,Xt),un&&(Xt.finished?$.nextTick(un):$t.once("finish",un)),Xt.ended=!0,$t.writable=!1}(this,wt,Pt),this},Object.defineProperty(St.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(St.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ht){this._writableState&&(this._writableState.destroyed=Ht)}}),St.prototype.destroy=ft.destroy,St.prototype._undestroy=ft.undestroy,St.prototype._destroy=function(Ht,qt){qt(Ht)}}).call(this,s(6),s(2))},function(i,o,s){i.exports=ht;var _=s(26).codes,$=_.ERR_METHOD_NOT_IMPLEMENTED,et=_.ERR_MULTIPLE_CALLBACK,tt=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=_.ERR_TRANSFORM_WITH_LENGTH_0,it=s(27);function st(pt,ct){var yt=this._transformState;yt.transforming=!1;var Et=yt.writecb;if(Et===null)return this.emit("error",new et);yt.writechunk=null,yt.writecb=null,ct!=null&&this.push(ct),Et(pt);var Ot=this._readableState;Ot.reading=!1,(Ot.needReadable||Ot.length<Ot.highWaterMark)&&this._read(Ot.highWaterMark)}function ht(pt){if(!(this instanceof ht))return new ht(pt);it.call(this,pt),this._transformState={afterTransform:st.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,pt&&(typeof pt.transform=="function"&&(this._transform=pt.transform),typeof pt.flush=="function"&&(this._flush=pt.flush)),this.on("prefinish",vt)}function vt(){var pt=this;typeof this._flush!="function"||this._readableState.destroyed?ft(this,null,null):this._flush(function(ct,yt){ft(pt,ct,yt)})}function ft(pt,ct,yt){if(ct)return pt.emit("error",ct);if(yt!=null&&pt.push(yt),pt._writableState.length)throw new j;if(pt._transformState.transforming)throw new tt;return pt.push(null)}s(7)(ht,it),ht.prototype.push=function(pt,ct){return this._transformState.needTransform=!1,it.prototype.push.call(this,pt,ct)},ht.prototype._transform=function(pt,ct,yt){yt(new $("_transform()"))},ht.prototype._write=function(pt,ct,yt){var Et=this._transformState;if(Et.writecb=yt,Et.writechunk=pt,Et.writeencoding=ct,!Et.transforming){var Ot=this._readableState;(Et.needTransform||Ot.needReadable||Ot.length<Ot.highWaterMark)&&this._read(Ot.highWaterMark)}},ht.prototype._read=function(pt){var ct=this._transformState;ct.writechunk===null||ct.transforming?ct.needTransform=!0:(ct.transforming=!0,this._transform(ct.writechunk,ct.writeencoding,ct.afterTransform))},ht.prototype._destroy=function(pt,ct){it.prototype._destroy.call(this,pt,function(yt){ct(yt)})}},function(i,o,s){(function(_){var $=s(190),et=s(85),tt=s(192),j=s(193),it=s(86),st=o;st.request=function(ht,vt){ht=typeof ht=="string"?it.parse(ht):tt(ht);var ft=_.location.protocol.search(/^https?:$/)===-1?"http:":"",pt=ht.protocol||ft,ct=ht.hostname||ht.host,yt=ht.port,Et=ht.path||"/";ct&&ct.indexOf(":")!==-1&&(ct="["+ct+"]"),ht.url=(ct?pt+"//"+ct:"")+(yt?":"+yt:"")+Et,ht.method=(ht.method||"GET").toUpperCase(),ht.headers=ht.headers||{};var Ot=new $(ht);return vt&&Ot.on("response",vt),Ot},st.get=function(ht,vt){var ft=st.request(ht,vt);return ft.end(),ft},st.ClientRequest=$,st.IncomingMessage=et.IncomingMessage,st.Agent=function(){},st.Agent.defaultMaxSockets=4,st.globalAgent=new st.Agent,st.STATUS_CODES=j,st.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,s(6))},function(i,o,s){(function(_){o.fetch=st(_.fetch)&&st(_.ReadableStream),o.writableStream=st(_.WritableStream),o.abortController=st(_.AbortController),o.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),o.blobConstructor=!0}catch{}var $;function et(){if($!==void 0)return $;if(_.XMLHttpRequest){$=new _.XMLHttpRequest;try{$.open("GET",_.XDomainRequest?"/":"https://example.com")}catch{$=null}}else $=null;return $}function tt(ht){var vt=et();if(!vt)return!1;try{return vt.responseType=ht,vt.responseType===ht}catch{}return!1}var j=_.ArrayBuffer!==void 0,it=j&&st(_.ArrayBuffer.prototype.slice);function st(ht){return typeof ht=="function"}o.arraybuffer=o.fetch||j&&tt("arraybuffer"),o.msstream=!o.fetch&&it&&tt("ms-stream"),o.mozchunkedarraybuffer=!o.fetch&&j&&tt("moz-chunked-arraybuffer"),o.overrideMimeType=o.fetch||!!et()&&st(et().overrideMimeType),o.vbArray=st(_.VBArray),$=null}).call(this,s(6))},function(i,o,s){(function(_,$,et){var tt=s(84),j=s(7),it=s(31),st=o.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ht=o.IncomingMessage=function(vt,ft,pt,ct){var yt=this;if(it.Readable.call(yt),yt._mode=pt,yt.headers={},yt.rawHeaders=[],yt.trailers={},yt.rawTrailers=[],yt.on("end",function(){_.nextTick(function(){yt.emit("close")})}),pt==="fetch"){if(yt._fetchResponse=ft,yt.url=ft.url,yt.statusCode=ft.status,yt.statusMessage=ft.statusText,ft.headers.forEach(function(It,mt){yt.headers[mt.toLowerCase()]=It,yt.rawHeaders.push(mt,It)}),tt.writableStream){var Et=new WritableStream({write:function(It){return new Promise(function(mt,Bt){yt._destroyed?Bt():yt.push(new $(It))?mt():yt._resumeFetch=mt})},close:function(){et.clearTimeout(ct),yt._destroyed||yt.push(null)},abort:function(It){yt._destroyed||yt.emit("error",It)}});try{return void ft.body.pipeTo(Et).catch(function(It){et.clearTimeout(ct),yt._destroyed||yt.emit("error",It)})}catch{}}var Ot=ft.body.getReader();(function It(){Ot.read().then(function(mt){if(!yt._destroyed){if(mt.done)return et.clearTimeout(ct),void yt.push(null);yt.push(new $(mt.value)),It()}}).catch(function(mt){et.clearTimeout(ct),yt._destroyed||yt.emit("error",mt)})})()}else if(yt._xhr=vt,yt._pos=0,yt.url=vt.responseURL,yt.statusCode=vt.status,yt.statusMessage=vt.statusText,vt.getAllResponseHeaders().split(/\r?\n/).forEach(function(It){var mt=It.match(/^([^:]+):\s*(.*)/);if(mt){var Bt=mt[1].toLowerCase();Bt==="set-cookie"?(yt.headers[Bt]===void 0&&(yt.headers[Bt]=[]),yt.headers[Bt].push(mt[2])):yt.headers[Bt]!==void 0?yt.headers[Bt]+=", "+mt[2]:yt.headers[Bt]=mt[2],yt.rawHeaders.push(mt[1],mt[2])}}),yt._charset="x-user-defined",!tt.overrideMimeType){var Lt=yt.rawHeaders["mime-type"];if(Lt){var Tt=Lt.match(/;\s*charset=([^;])(;|$)/);Tt&&(yt._charset=Tt[1].toLowerCase())}yt._charset||(yt._charset="utf-8")}};j(ht,it.Readable),ht.prototype._read=function(){var vt=this._resumeFetch;vt&&(this._resumeFetch=null,vt())},ht.prototype._onXHRProgress=function(){var vt=this,ft=vt._xhr,pt=null;switch(vt._mode){case"text:vbarray":if(ft.readyState!==st.DONE)break;try{pt=new et.VBArray(ft.responseBody).toArray()}catch{}if(pt!==null){vt.push(new $(pt));break}case"text":try{pt=ft.responseText}catch{vt._mode="text:vbarray";break}if(pt.length>vt._pos){var ct=pt.substr(vt._pos);if(vt._charset==="x-user-defined"){for(var yt=new $(ct.length),Et=0;Et<ct.length;Et++)yt[Et]=255&ct.charCodeAt(Et);vt.push(yt)}else vt.push(ct,vt._charset);vt._pos=pt.length}break;case"arraybuffer":if(ft.readyState!==st.DONE||!ft.response)break;pt=ft.response,vt.push(new $(new Uint8Array(pt)));break;case"moz-chunked-arraybuffer":if(pt=ft.response,ft.readyState!==st.LOADING||!pt)break;vt.push(new $(new Uint8Array(pt)));break;case"ms-stream":if(pt=ft.response,ft.readyState!==st.LOADING)break;var Ot=new et.MSStreamReader;Ot.onprogress=function(){Ot.result.byteLength>vt._pos&&(vt.push(new $(new Uint8Array(Ot.result.slice(vt._pos)))),vt._pos=Ot.result.byteLength)},Ot.onload=function(){vt.push(null)},Ot.readAsArrayBuffer(pt)}vt._xhr.readyState===st.DONE&&vt._mode!=="ms-stream"&&vt.push(null)}}).call(this,s(2),s(5).Buffer,s(6))},function(i,o,s){var _=s(194),$=s(196);function et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}o.parse=Tt,o.resolve=function(It,mt){return Tt(It,!1,!0).resolve(mt)},o.resolveObject=function(It,mt){return It?Tt(It,!1,!0).resolveObject(mt):mt},o.format=function(It){return $.isString(It)&&(It=Tt(It)),It instanceof et?It.format():et.prototype.format.call(It)},o.Url=et;var tt=/^([a-z0-9.+-]+:)/i,j=/:[0-9]*$/,it=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,st=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),ht=["'"].concat(st),vt=["%","/","?",";","#"].concat(ht),ft=["/","?","#"],pt=/^[+a-z0-9A-Z_-]{0,63}$/,ct=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yt={javascript:!0,"javascript:":!0},Et={javascript:!0,"javascript:":!0},Ot={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Lt=s(197);function Tt(It,mt,Bt){if(It&&$.isObject(It)&&It instanceof et)return It;var nn=new et;return nn.parse(It,mt,Bt),nn}et.prototype.parse=function(It,mt,Bt){if(!$.isString(It))throw new TypeError("Parameter 'url' must be a string, not "+typeof It);var nn=It.indexOf("?"),sn=nn!==-1&&nn<It.indexOf("#")?"?":"#",xt=It.split(sn);xt[0]=xt[0].replace(/\\/g,"/");var St=It=xt.join(sn);if(St=St.trim(),!Bt&&It.split("#").length===1){var Nt=it.exec(St);if(Nt)return this.path=St,this.href=St,this.pathname=Nt[1],Nt[2]?(this.search=Nt[2],this.query=mt?Lt.parse(this.search.substr(1)):this.search.substr(1)):mt&&(this.search="",this.query={}),this}var Ct=tt.exec(St);if(Ct){var Vt=(Ct=Ct[0]).toLowerCase();this.protocol=Vt,St=St.substr(Ct.length)}if(Bt||Ct||St.match(/^\/\/[^@\/]+@[^@\/]+/)){var Kt=St.substr(0,2)==="//";!Kt||Ct&&Et[Ct]||(St=St.substr(2),this.slashes=!0)}if(!Et[Ct]&&(Kt||Ct&&!Ot[Ct])){for(var Gt,Ut,Ht=-1,qt=0;qt<ft.length;qt++)(Pt=St.indexOf(ft[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt);for((Ut=Ht===-1?St.lastIndexOf("@"):St.lastIndexOf("@",Ht))!==-1&&(Gt=St.slice(0,Ut),St=St.slice(Ut+1),this.auth=decodeURIComponent(Gt)),Ht=-1,qt=0;qt<vt.length;qt++){var Pt;(Pt=St.indexOf(vt[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt)}Ht===-1&&(Ht=St.length),this.host=St.slice(0,Ht),St=St.slice(Ht),this.parseHost(),this.hostname=this.hostname||"";var wt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!wt)for(var $t=this.hostname.split(/\./),Xt=(qt=0,$t.length);qt<Xt;qt++){var un=$t[qt];if(un&&!un.match(pt)){for(var dn="",mn=0,an=un.length;mn<an;mn++)un.charCodeAt(mn)>127?dn+="x":dn+=un[mn];if(!dn.match(pt)){var en=$t.slice(0,qt),Mt=$t.slice(qt+1),jt=un.match(ct);jt&&(en.push(jt[1]),Mt.unshift(jt[2])),Mt.length&&(St="/"+Mt.join(".")+St),this.hostname=en.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),wt||(this.hostname=_.toASCII(this.hostname));var Qt=this.port?":"+this.port:"",gn=this.hostname||"";this.host=gn+Qt,this.href+=this.host,wt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),St[0]!=="/"&&(St="/"+St))}if(!yt[Vt])for(qt=0,Xt=ht.length;qt<Xt;qt++){var hn=ht[qt];if(St.indexOf(hn)!==-1){var An=encodeURIComponent(hn);An===hn&&(An=escape(hn)),St=St.split(hn).join(An)}}var Mn=St.indexOf("#");Mn!==-1&&(this.hash=St.substr(Mn),St=St.slice(0,Mn));var Yn=St.indexOf("?");if(Yn!==-1?(this.search=St.substr(Yn),this.query=St.substr(Yn+1),mt&&(this.query=Lt.parse(this.query)),St=St.slice(0,Yn)):mt&&(this.search="",this.query={}),St&&(this.pathname=St),Ot[Vt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Qt=this.pathname||"";var Nr=this.search||"";this.path=Qt+Nr}return this.href=this.format(),this},et.prototype.format=function(){var It=this.auth||"";It&&(It=(It=encodeURIComponent(It)).replace(/%3A/i,":"),It+="@");var mt=this.protocol||"",Bt=this.pathname||"",nn=this.hash||"",sn=!1,xt="";this.host?sn=It+this.host:this.hostname&&(sn=It+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(sn+=":"+this.port)),this.query&&$.isObject(this.query)&&Object.keys(this.query).length&&(xt=Lt.stringify(this.query));var St=this.search||xt&&"?"+xt||"";return mt&&mt.substr(-1)!==":"&&(mt+=":"),this.slashes||(!mt||Ot[mt])&&sn!==!1?(sn="//"+(sn||""),Bt&&Bt.charAt(0)!=="/"&&(Bt="/"+Bt)):sn||(sn=""),nn&&nn.charAt(0)!=="#"&&(nn="#"+nn),St&&St.charAt(0)!=="?"&&(St="?"+St),mt+sn+(Bt=Bt.replace(/[?#]/g,function(Nt){return encodeURIComponent(Nt)}))+(St=St.replace("#","%23"))+nn},et.prototype.resolve=function(It){return this.resolveObject(Tt(It,!1,!0)).format()},et.prototype.resolveObject=function(It){if($.isString(It)){var mt=new et;mt.parse(It,!1,!0),It=mt}for(var Bt=new et,nn=Object.keys(this),sn=0;sn<nn.length;sn++){var xt=nn[sn];Bt[xt]=this[xt]}if(Bt.hash=It.hash,It.href==="")return Bt.href=Bt.format(),Bt;if(It.slashes&&!It.protocol){for(var St=Object.keys(It),Nt=0;Nt<St.length;Nt++){var Ct=St[Nt];Ct!=="protocol"&&(Bt[Ct]=It[Ct])}return Ot[Bt.protocol]&&Bt.hostname&&!Bt.pathname&&(Bt.path=Bt.pathname="/"),Bt.href=Bt.format(),Bt}if(It.protocol&&It.protocol!==Bt.protocol){if(!Ot[It.protocol]){for(var Vt=Object.keys(It),Kt=0;Kt<Vt.length;Kt++){var Gt=Vt[Kt];Bt[Gt]=It[Gt]}return Bt.href=Bt.format(),Bt}if(Bt.protocol=It.protocol,It.host||Et[It.protocol])Bt.pathname=It.pathname;else{for(var Ut=(It.pathname||"").split("/");Ut.length&&!(It.host=Ut.shift()););It.host||(It.host=""),It.hostname||(It.hostname=""),Ut[0]!==""&&Ut.unshift(""),Ut.length<2&&Ut.unshift(""),Bt.pathname=Ut.join("/")}if(Bt.search=It.search,Bt.query=It.query,Bt.host=It.host||"",Bt.auth=It.auth,Bt.hostname=It.hostname||It.host,Bt.port=It.port,Bt.pathname||Bt.search){var Ht=Bt.pathname||"",qt=Bt.search||"";Bt.path=Ht+qt}return Bt.slashes=Bt.slashes||It.slashes,Bt.href=Bt.format(),Bt}var Pt=Bt.pathname&&Bt.pathname.charAt(0)==="/",wt=It.host||It.pathname&&It.pathname.charAt(0)==="/",$t=wt||Pt||Bt.host&&It.pathname,Xt=$t,un=Bt.pathname&&Bt.pathname.split("/")||[],dn=(Ut=It.pathname&&It.pathname.split("/")||[],Bt.protocol&&!Ot[Bt.protocol]);if(dn&&(Bt.hostname="",Bt.port=null,Bt.host&&(un[0]===""?un[0]=Bt.host:un.unshift(Bt.host)),Bt.host="",It.protocol&&(It.hostname=null,It.port=null,It.host&&(Ut[0]===""?Ut[0]=It.host:Ut.unshift(It.host)),It.host=null),$t=$t&&(Ut[0]===""||un[0]==="")),wt)Bt.host=It.host||It.host===""?It.host:Bt.host,Bt.hostname=It.hostname||It.hostname===""?It.hostname:Bt.hostname,Bt.search=It.search,Bt.query=It.query,un=Ut;else if(Ut.length)un||(un=[]),un.pop(),un=un.concat(Ut),Bt.search=It.search,Bt.query=It.query;else if(!$.isNullOrUndefined(It.search))return dn&&(Bt.hostname=Bt.host=un.shift(),(jt=!!(Bt.host&&Bt.host.indexOf("@")>0)&&Bt.host.split("@"))&&(Bt.auth=jt.shift(),Bt.host=Bt.hostname=jt.shift())),Bt.search=It.search,Bt.query=It.query,$.isNull(Bt.pathname)&&$.isNull(Bt.search)||(Bt.path=(Bt.pathname?Bt.pathname:"")+(Bt.search?Bt.search:"")),Bt.href=Bt.format(),Bt;if(!un.length)return Bt.pathname=null,Bt.search?Bt.path="/"+Bt.search:Bt.path=null,Bt.href=Bt.format(),Bt;for(var mn=un.slice(-1)[0],an=(Bt.host||It.host||un.length>1)&&(mn==="."||mn==="..")||mn==="",en=0,Mt=un.length;Mt>=0;Mt--)(mn=un[Mt])==="."?un.splice(Mt,1):mn===".."?(un.splice(Mt,1),en++):en&&(un.splice(Mt,1),en--);if(!$t&&!Xt)for(;en--;en)un.unshift("..");!$t||un[0]===""||un[0]&&un[0].charAt(0)==="/"||un.unshift(""),an&&un.join("/").substr(-1)!=="/"&&un.push("");var jt,Qt=un[0]===""||un[0]&&un[0].charAt(0)==="/";return dn&&(Bt.hostname=Bt.host=Qt?"":un.length?un.shift():"",(jt=!!(Bt.host&&Bt.host.indexOf("@")>0)&&Bt.host.split("@"))&&(Bt.auth=jt.shift(),Bt.host=Bt.hostname=jt.shift())),($t=$t||Bt.host&&un.length)&&!Qt&&un.unshift(""),un.length?Bt.pathname=un.join("/"):(Bt.pathname=null,Bt.path=null),$.isNull(Bt.pathname)&&$.isNull(Bt.search)||(Bt.path=(Bt.pathname?Bt.pathname:"")+(Bt.search?Bt.search:"")),Bt.auth=It.auth||Bt.auth,Bt.slashes=Bt.slashes||It.slashes,Bt.href=Bt.format(),Bt},et.prototype.parseHost=function(){var It=this.host,mt=j.exec(It);mt&&((mt=mt[0])!==":"&&(this.port=mt.substr(1)),It=It.substr(0,It.length-mt.length)),It&&(this.hostname=It)}},function(i,o,s){const _=$=>$!==null&&typeof $=="object"&&typeof $.pipe=="function";_.writable=$=>_($)&&$.writable!==!1&&typeof $._write=="function"&&typeof $._writableState=="object",_.readable=$=>_($)&&$.readable!==!1&&typeof $._read=="function"&&typeof $._readableState=="object",_.duplex=$=>_.writable($)&&_.readable($),_.transform=$=>_.duplex($)&&typeof $._transform=="function"&&typeof $._transformState=="object",i.exports=_},function(i,o,s){function _(yt){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function $(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function et(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&tt(yt,Et)}function tt(yt,Et){return(tt=Object.setPrototypeOf||function(Ot,Lt){return Ot.__proto__=Lt,Ot})(yt,Et)}function j(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Ot,Lt=st(yt);if(Et){var Tt=st(this).constructor;Ot=Reflect.construct(Lt,arguments,Tt)}else Ot=Lt.apply(this,arguments);return it(this,Ot)}}function it(yt,Et){return!Et||_(Et)!=="object"&&typeof Et!="function"?function(Ot){if(Ot===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ot}(yt):Et}function st(yt){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var ht=s(3).LEVEL,vt=s(50),ft=s(202),pt=s(38)("winston:create-logger");function ct(yt){return"is"+yt.charAt(0).toUpperCase()+yt.slice(1)+"Enabled"}i.exports=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt.levels=yt.levels||vt.npm.levels;var Et=function(Lt){et(It,Lt);var Tt=j(It);function It(mt){return $(this,It),Tt.call(this,mt)}return It}(ft),Ot=new Et(yt);return Object.keys(yt.levels).forEach(function(Lt){pt('Define prototype method for "%s"',Lt),Lt!=="log"?(Et.prototype[Lt]=function(){for(var Tt=this||Ot,It=arguments.length,mt=new Array(It),Bt=0;Bt<It;Bt++)mt[Bt]=arguments[Bt];if(mt.length===1){var nn=mt[0],sn=nn&&nn.message&&nn||{message:nn};return sn.level=sn[ht]=Lt,Tt._addDefaultMeta(sn),Tt.write(sn),this||Ot}return mt.length===0?(Tt.log(Lt,""),Tt):Tt.log.apply(Tt,[Lt].concat(mt))},Et.prototype[ct(Lt)]=function(){return(this||Ot).isLevelEnabled(Lt)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')}),Ot}},function(i,o,s){(function(_){function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(18),tt=s(51),j=s(38)("winston:exception"),it=s(90),st=s(91),ht=s(92);i.exports=function(){function vt(ct){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,vt),!ct)throw new Error("Logger is required to handle exceptions");this.logger=ct,this.handlers=new Map}var ft,pt;return ft=vt,(pt=[{key:"handle",value:function(){for(var ct=this,yt=arguments.length,Et=new Array(yt),Ot=0;Ot<yt;Ot++)Et[Ot]=arguments[Ot];Et.forEach(function(Lt){if(Array.isArray(Lt))return Lt.forEach(function(Tt){return ct._addHandler(Tt)});ct._addHandler(Lt)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),_.on("uncaughtException",this.catcher))}},{key:"unhandle",value:function(){var ct=this;this.catcher&&(_.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ct.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ct){var yt=ct.message;return yt||typeof ct!="string"||(yt=ct),{error:ct,level:"error",message:["uncaughtException: ".concat(yt||"(no error message)"),ct.stack||"  No stack trace"].join(`
`),stack:ct.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ct)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ct){return(ct?st.parse(ct):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ct){if(!this.handlers.has(ct)){ct.handleExceptions=!0;var yt=new ht(ct);this.handlers.set(ct,yt),this.logger.pipe(yt)}}},{key:"_uncaughtException",value:function(ct){var yt,Et=this.getAllInfo(ct),Ot=this._getExceptionHandlers(),Lt=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ct):this.logger.exitOnError;function Tt(){j("doExit",Lt),j("process._exiting",_._exiting),Lt&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Ot.length&&Lt&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),Lt=!1),!Ot||Ot.length===0)return _.nextTick(Tt);tt(Ot,function(It,mt){var Bt=it(mt),nn=It.transport||It;function sn(xt){return function(){j(xt),Bt()}}nn._ending=!0,nn.once("finish",sn("finished")),nn.once("error",sn("error"))},function(){return Lt&&Tt()}),this.logger.log(Et),Lt&&(yt=setTimeout(Tt,3e3))}},{key:"_getExceptionHandlers",value:function(){return this.logger.transports.filter(function(ct){return(ct.transport||ct).handleExceptions})}}])&&$(ft.prototype,pt),vt}()}).call(this,s(2))},function(i,o,s){var _=s(205);i.exports=function($){var et,tt=0;function j(){return tt||(tt=1,et=$.apply(this,arguments),$=null),et}return j.displayName=_($),j}},function(i,o){function s(_){for(var $ in _)this[$]=_[$]}o.get=function(_){var $=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var et={},tt=Error.prepareStackTrace;Error.prepareStackTrace=function(it,st){return st},Error.captureStackTrace(et,_||o.get);var j=et.stack;return Error.prepareStackTrace=tt,Error.stackTraceLimit=$,j},o.parse=function(_){if(!_.stack)return[];var $=this;return _.stack.split(`
`).slice(1).map(function(et){if(et.match(/^\s*[-]{4,}$/))return $._createParsedCallSite({fileName:et,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var tt=et.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(tt){var j=null,it=null,st=null,ht=null,vt=null,ft=tt[5]==="native";if(tt[1]){var pt=(st=tt[1]).lastIndexOf(".");if(st[pt-1]=="."&&pt--,pt>0){j=st.substr(0,pt),it=st.substr(pt+1);var ct=j.indexOf(".Module");ct>0&&(st=st.substr(ct+1),j=j.substr(0,ct))}ht=null}it&&(ht=j,vt=it),it==="<anonymous>"&&(vt=null,st=null);var yt={fileName:tt[2]||null,lineNumber:parseInt(tt[3],10)||null,functionName:st,typeName:ht,methodName:vt,columnNumber:parseInt(tt[4],10)||null,native:ft};return $._createParsedCallSite(yt)}}).filter(function(et){return!!et})},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach(function(_){s.prototype[_]=null,s.prototype["get"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),["topLevel","eval","native","constructor"].forEach(function(_){s.prototype[_]=!1,s.prototype["is"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),o._createParsedCallSite=function(_){return new s(_)}},function(i,o,s){function _(ht){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vt){return typeof vt}:function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt})(ht)}function $(ht,vt){for(var ft=0;ft<vt.length;ft++){var pt=vt[ft];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(ht,pt.key,pt)}}function et(ht,vt){return(et=Object.setPrototypeOf||function(ft,pt){return ft.__proto__=pt,ft})(ht,vt)}function tt(ht){var vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var ft,pt=it(ht);if(vt){var ct=it(this).constructor;ft=Reflect.construct(pt,arguments,ct)}else ft=pt.apply(this,arguments);return j(this,ft)}}function j(ht,vt){return!vt||_(vt)!=="object"&&typeof vt!="function"?function(ft){if(ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft}(ht):vt}function it(ht){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(vt){return vt.__proto__||Object.getPrototypeOf(vt)})(ht)}var st=s(32).Writable;i.exports=function(ht){(function(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&et(yt,Et)})(ct,ht);var vt,ft,pt=tt(ct);function ct(yt){var Et;if(function(Ot,Lt){if(!(Ot instanceof Lt))throw new TypeError("Cannot call a class as a function")}(this,ct),Et=pt.call(this,{objectMode:!0}),!yt)throw new Error("ExceptionStream requires a TransportStream instance.");return Et.handleExceptions=!0,Et.transport=yt,Et}return vt=ct,(ft=[{key:"_write",value:function(yt,Et,Ot){return yt.exception?this.transport.log(yt,Ot):(Ot(),!0)}}])&&$(vt.prototype,ft),ct}(st)},function(i,o,s){(function(_){function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(18),tt=s(51),j=s(38)("winston:rejection"),it=s(90),st=s(91),ht=s(92);i.exports=function(){function vt(ct){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,vt),!ct)throw new Error("Logger is required to handle rejections");this.logger=ct,this.handlers=new Map}var ft,pt;return ft=vt,(pt=[{key:"handle",value:function(){for(var ct=this,yt=arguments.length,Et=new Array(yt),Ot=0;Ot<yt;Ot++)Et[Ot]=arguments[Ot];Et.forEach(function(Lt){if(Array.isArray(Lt))return Lt.forEach(function(Tt){return ct._addHandler(Tt)});ct._addHandler(Lt)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),_.on("unhandledRejection",this.catcher))}},{key:"unhandle",value:function(){var ct=this;this.catcher&&(_.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ct.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ct){var yt=ct.message;return yt||typeof ct!="string"||(yt=ct),{error:ct,level:"error",message:["unhandledRejection: ".concat(yt||"(no error message)"),ct.stack||"  No stack trace"].join(`
`),stack:ct.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ct)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ct){return(ct?st.parse(ct):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ct){if(!this.handlers.has(ct)){ct.handleRejections=!0;var yt=new ht(ct);this.handlers.set(ct,yt),this.logger.pipe(yt)}}},{key:"_unhandledRejection",value:function(ct){var yt,Et=this.getAllInfo(ct),Ot=this._getRejectionHandlers(),Lt=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ct):this.logger.exitOnError;function Tt(){j("doExit",Lt),j("process._exiting",_._exiting),Lt&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Ot.length&&Lt&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),Lt=!1),!Ot||Ot.length===0)return _.nextTick(Tt);tt(Ot,function(It,mt){var Bt=it(mt),nn=It.transport||It;function sn(xt){return function(){j(xt),Bt()}}nn._ending=!0,nn.once("finish",sn("finished")),nn.once("error",sn("error"))},function(){return Lt&&Tt()}),this.logger.log(Et),Lt&&(yt=setTimeout(Tt,3e3))}},{key:"_getRejectionHandlers",value:function(){return this.logger.transports.filter(function(ct){return(ct.transport||ct).handleRejections})}}])&&$(ft.prototype,pt),vt}()}).call(this,s(2))},function(i,o,s){i.exports={asArray:s(212),asBoolStrict:s(213),asBool:s(214),asPortNumber:s(215),asEnum:s(216),asFloatNegative:s(217),asFloatPositive:s(218),asFloat:s(54),asIntNegative:s(219),asIntPositive:s(95),asInt:s(53),asJsonArray:s(220),asJsonObject:s(221),asJson:s(55),asRegExp:s(222),asString:s(33),asUrlObject:s(96),asUrlString:s(223),asEmailString:s(224)}},function(i,o,s){const _=s(53);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive integer");return et}},function(i,o,s){const _=s(33);i.exports=function($){const et=_($);try{return new URL(et)}catch{throw new Error("should be a valid URL")}}},function(i,o,s){const _={};_.web=s(24),s(98);const $={v1:{}};$.v1.signaling={},$.v1.signaling.api=s(9),$.v1.signaling.api.SignalingClient=function(pt,ct,yt){yt||(yt={}),yt.format="text",this.client_=new _.web.GrpcWebClientBase(yt),this.hostname_=pt},$.v1.signaling.api.SignalingPromiseClient=function(pt,ct,yt){yt||(yt={}),yt.format="text",this.client_=new _.web.GrpcWebClientBase(yt),this.hostname_=pt};const et=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetHealth",_.web.MethodType.UNARY,$.v1.signaling.api.GetHealthRequest,$.v1.signaling.api.GetHealthResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.GetHealthResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetHealthResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.GetHealthResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getHealth=function(pt,ct,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetHealth",pt,ct||{},et,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getHealth=function(pt,ct){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetHealth",pt,ct||{},et)};const tt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/CreatePeer",_.web.MethodType.UNARY,$.v1.signaling.api.CreatePeerRequest,$.v1.signaling.api.CreatePeerResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.CreatePeerResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.createPeer=function(pt,ct,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",pt,ct||{},tt,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.createPeer=function(pt,ct){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",pt,ct||{},tt)};const j=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/DeletePeer",_.web.MethodType.UNARY,$.v1.signaling.api.DeletePeerRequest,$.v1.signaling.api.DeletePeerResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.DeletePeerResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.deletePeer=function(pt,ct,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",pt,ct||{},j,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.deletePeer=function(pt,ct){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",pt,ct||{},j)};const it=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/RefreshPeer",_.web.MethodType.UNARY,$.v1.signaling.api.RefreshPeerRequest,$.v1.signaling.api.RefreshPeerResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.RefreshPeerResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.refreshPeer=function(pt,ct,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",pt,ct||{},it,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.refreshPeer=function(pt,ct){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",pt,ct||{},it)};const st=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetPeers",_.web.MethodType.UNARY,$.v1.signaling.api.GetPeersRequest,$.v1.signaling.api.GetPeersResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetPeersResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getPeers=function(pt,ct,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",pt,ct||{},st,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getPeers=function(pt,ct){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",pt,ct||{},st)};const ht=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetIceServers",_.web.MethodType.UNARY,$.v1.signaling.api.GetIceServersRequest,$.v1.signaling.api.GetIceServersResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetIceServersResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getIceServers=function(pt,ct,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",pt,ct||{},ht,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getIceServers=function(pt,ct){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",pt,ct||{},ht)};const vt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/SendSignal",_.web.MethodType.UNARY,$.v1.signaling.api.SendSignalRequest,$.v1.signaling.api.SendSignalResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.SendSignalResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.sendSignal=function(pt,ct,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",pt,ct||{},vt,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.sendSignal=function(pt,ct){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",pt,ct||{},vt)};const ft=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/ReceiveSignalStream",_.web.MethodType.SERVER_STREAMING,$.v1.signaling.api.ReceiveSignalStreamRequest,$.v1.signaling.api.ReceiveSignalStreamResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.ReceiveSignalStreamResponse,function(pt){return pt.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.receiveSignalStream=function(pt,ct){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",pt,ct||{},ft)},$.v1.signaling.api.SignalingPromiseClient.prototype.receiveSignalStream=function(pt,ct){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",pt,ct||{},ft)},i.exports=$.v1.signaling.api},function(i,o,s){var _=s(99),$=_,et=Function("return this")();$.exportSymbol("proto.google.protobuf.BoolValue",null,et),$.exportSymbol("proto.google.protobuf.BytesValue",null,et),$.exportSymbol("proto.google.protobuf.DoubleValue",null,et),$.exportSymbol("proto.google.protobuf.FloatValue",null,et),$.exportSymbol("proto.google.protobuf.Int32Value",null,et),$.exportSymbol("proto.google.protobuf.Int64Value",null,et),$.exportSymbol("proto.google.protobuf.StringValue",null,et),$.exportSymbol("proto.google.protobuf.UInt32Value",null,et),$.exportSymbol("proto.google.protobuf.UInt64Value",null,et),proto.google.protobuf.DoubleValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.DoubleValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.DoubleValue.displayName="proto.google.protobuf.DoubleValue"),proto.google.protobuf.FloatValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.FloatValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.FloatValue.displayName="proto.google.protobuf.FloatValue"),proto.google.protobuf.Int64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int64Value.displayName="proto.google.protobuf.Int64Value"),proto.google.protobuf.UInt64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt64Value.displayName="proto.google.protobuf.UInt64Value"),proto.google.protobuf.Int32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int32Value.displayName="proto.google.protobuf.Int32Value"),proto.google.protobuf.UInt32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt32Value.displayName="proto.google.protobuf.UInt32Value"),proto.google.protobuf.BoolValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BoolValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BoolValue.displayName="proto.google.protobuf.BoolValue"),proto.google.protobuf.StringValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.StringValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.StringValue.displayName="proto.google.protobuf.StringValue"),proto.google.protobuf.BytesValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BytesValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BytesValue.displayName="proto.google.protobuf.BytesValue"),_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DoubleValue.prototype.toObject=function(tt){return proto.google.protobuf.DoubleValue.toObject(tt,this)},proto.google.protobuf.DoubleValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.DoubleValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.DoubleValue;return proto.google.protobuf.DoubleValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.DoubleValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readDouble();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.DoubleValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.DoubleValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.DoubleValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeDouble(1,it)},proto.google.protobuf.DoubleValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.DoubleValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FloatValue.prototype.toObject=function(tt){return proto.google.protobuf.FloatValue.toObject(tt,this)},proto.google.protobuf.FloatValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.FloatValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.FloatValue;return proto.google.protobuf.FloatValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.FloatValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readFloat();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.FloatValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.FloatValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.FloatValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeFloat(1,it)},proto.google.protobuf.FloatValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.FloatValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int64Value.prototype.toObject=function(tt){return proto.google.protobuf.Int64Value.toObject(tt,this)},proto.google.protobuf.Int64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int64Value;return proto.google.protobuf.Int64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt64(1,it)},proto.google.protobuf.Int64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt64Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt64Value.toObject(tt,this)},proto.google.protobuf.UInt64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt64Value;return proto.google.protobuf.UInt64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint64(1,it)},proto.google.protobuf.UInt64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int32Value.prototype.toObject=function(tt){return proto.google.protobuf.Int32Value.toObject(tt,this)},proto.google.protobuf.Int32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int32Value;return proto.google.protobuf.Int32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt32(1,it)},proto.google.protobuf.Int32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt32Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt32Value.toObject(tt,this)},proto.google.protobuf.UInt32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt32Value;return proto.google.protobuf.UInt32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint32(1,it)},proto.google.protobuf.UInt32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BoolValue.prototype.toObject=function(tt){return proto.google.protobuf.BoolValue.toObject(tt,this)},proto.google.protobuf.BoolValue.toObject=function(tt,j){var it={value:_.Message.getBooleanFieldWithDefault(j,1,!1)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BoolValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BoolValue;return proto.google.protobuf.BoolValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BoolValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBool();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BoolValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BoolValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BoolValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())&&j.writeBool(1,it)},proto.google.protobuf.BoolValue.prototype.getValue=function(){return _.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.BoolValue.prototype.setValue=function(tt){return _.Message.setProto3BooleanField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.StringValue.prototype.toObject=function(tt){return proto.google.protobuf.StringValue.toObject(tt,this)},proto.google.protobuf.StringValue.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,"")};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.StringValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.StringValue;return proto.google.protobuf.StringValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.StringValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readString();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.StringValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.StringValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.StringValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue()).length>0&&j.writeString(1,it)},proto.google.protobuf.StringValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.StringValue.prototype.setValue=function(tt){return _.Message.setProto3StringField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BytesValue.prototype.toObject=function(tt){return proto.google.protobuf.BytesValue.toObject(tt,this)},proto.google.protobuf.BytesValue.toObject=function(tt,j){var it={value:j.getValue_asB64()};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BytesValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BytesValue;return proto.google.protobuf.BytesValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BytesValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBytes();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BytesValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BytesValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BytesValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue_asU8()).length>0&&j.writeBytes(1,it)},proto.google.protobuf.BytesValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.BytesValue.prototype.getValue_asB64=function(){return _.Message.bytesAsB64(this.getValue())},proto.google.protobuf.BytesValue.prototype.getValue_asU8=function(){return _.Message.bytesAsU8(this.getValue())},proto.google.protobuf.BytesValue.prototype.setValue=function(tt){return _.Message.setProto3BytesField(this,1,tt)},$.object.extend(o,proto.google.protobuf)},function(module,exports,__webpack_require__){(function(global,Buffer){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(i,o,s){i instanceof String&&(i=String(i));for(var _=i.length,$=0;$<_;$++){var et=i[$];if(o.call(s,et,$,i))return{i:$,v:et}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,o,s){i!=Array.prototype&&i!=Object.prototype&&(i[o]=s.value)},$jscomp.getGlobal=function(i){return typeof window<"u"&&window===i?i:global!==void 0&&global!=null?global:i},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,o,s,_){if(o){for(s=$jscomp.global,i=i.split("."),_=0;_<i.length-1;_++){var $=i[_];$ in s||(s[$]={}),s=s[$]}(o=o(_=s[i=i[i.length-1]]))!=_&&o!=null&&$jscomp.defineProperty(s,i,{configurable:!0,writable:!0,value:o})}},$jscomp.polyfill("Array.prototype.findIndex",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).i}},"es6","es3"),$jscomp.checkStringArgs=function(i,o,s){if(i==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(o instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return i+""},$jscomp.polyfill("String.prototype.endsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"endsWith");o+="",s===void 0&&(s=_.length),s=Math.max(0,Math.min(0|s,_.length));for(var $=o.length;0<$&&0<s;)if(_[--s]!=o[--$])return!1;return 0>=$}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"startsWith");o+="";var $=_.length,et=o.length;s=Math.max(0,Math.min(0|s,_.length));for(var tt=0;tt<et&&s<$;)if(_[s++]!=o[tt++])return!1;return tt>=et}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(i){return i||function(o){var s=$jscomp.checkStringArgs(this,null,"repeat");if(0>o||1342177279<o)throw new RangeError("Invalid count value");o|=0;for(var _="";o;)1&o&&(_+=s),(o>>>=1)&&(s+=s);return _}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.isDef=function(i){return i!==void 0},goog.isString=function(i){return typeof i=="string"},goog.isBoolean=function(i){return typeof i=="boolean"},goog.isNumber=function(i){return typeof i=="number"},goog.exportPath_=function(i,o,s){i=i.split("."),s=s||goog.global,i[0]in s||s.execScript===void 0||s.execScript("var "+i[0]);for(var _;i.length&&(_=i.shift());)!i.length&&goog.isDef(o)?s[_]=o:s=s[_]&&s[_]!==Object.prototype[_]?s[_]:s[_]={}},goog.define=function(i,o){return o},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(i){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(i)},goog.constructNamespace_=function(i,o){goog.exportPath_(i,o)},goog.getScriptNonce=function(i){return i&&i!=goog.global?goog.getScriptNonce_(i.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(i)?i:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(i){if(!goog.isString(i)||!i||i.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+i+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=i},goog.module.get=function(i){return goog.module.getInternal_(i)},goog.module.getInternal_=function(i){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var i=goog.global.$jscomp;return!!i&&typeof i.getCurrentModulePath=="function"&&!!i.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(i){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=i;else{var o=goog.global.$jscomp;if(!o||typeof o.getCurrentModulePath!="function")throw Error('Module with namespace "'+i+'" has been loaded incorrectly.');o=o.require(o.getCurrentModulePath()),goog.loadedModules_[i]={exports:o,type:goog.ModuleType.ES6,moduleId:i}}},goog.setTestOnly=function(i){if(goog.DISALLOW_TEST_ONLY_CODE)throw i=i||"",Error("Importing test-only code into non-debug environment"+(i?": "+i:"."))},goog.forwardDeclare=function(i){},goog.getObjectByName=function(i,o){i=i.split("."),o=o||goog.global;for(var s=0;s<i.length;s++)if(o=o[i[s]],!goog.isDefAndNotNull(o))return null;return o},goog.globalize=function(i,o){for(var s in o=o||goog.global,i)o[s]=i[s]},goog.addDependency=function(i,o,s,_){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(i){goog.global.console&&goog.global.console.error(i)},goog.require=function(i){},goog.requireType=function(i){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(i){i.instance_=void 0,i.getInstance=function(){return i.instance_?i.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=i),i.instance_=new i)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(i){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(i){return"(function(){"+i+`
;})();
`},goog.loadModule=function(i){var o=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(i))var s=i.call(void 0,{});else{if(!goog.isString(i))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(i=goog.workaroundSafari10EvalBug(i)),s=goog.loadModuleFromSource_.call(void 0,i)}var _=goog.moduleLoaderState_.moduleName;if(!goog.isString(_)||!_)throw Error('Invalid module name "'+_+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(_,s):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof s=="object"&&s!=null&&Object.seal(s),goog.loadedModules_[_]={exports:s,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=o}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(i){i=i.split("/");for(var o=0;o<i.length;)i[o]=="."?i.splice(o,1):o&&i[o]==".."&&i[o-1]&&i[o-1]!=".."?i.splice(--o,2):o++;return i.join("/")},goog.loadFileSync_=function(i){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(i);try{var o=new goog.global.XMLHttpRequest;return o.open("get",i,!1),o.send(),o.status==0||o.status==200?o.responseText:null}catch{return null}},goog.transpile_=function(i,o,s){var _=goog.global.$jscomp;_||(goog.global.$jscomp=_={});var $=_.transpile;if(!$){var et=goog.basePath+goog.TRANSPILER,tt=goog.loadFileSync_(et);if(tt){if(function(){(0,eval)(tt+`
//# sourceURL=`+et)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,$=(_=goog.global.$jscomp).transpile}}return $||($=_.transpile=function(j,it){return goog.logToConsole_(it+" requires transpilation but no transpiler was found."),j}),$(i,o,s)},goog.typeOf=function(i){var o=typeof i;if(o=="object"){if(!i)return"null";if(i instanceof Array)return"array";if(i instanceof Object)return o;var s=Object.prototype.toString.call(i);if(s=="[object Window]")return"object";if(s=="[object Array]"||typeof i.length=="number"&&i.splice!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("splice"))return"array";if(s=="[object Function]"||i.call!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("call"))return"function"}else if(o=="function"&&i.call===void 0)return"object";return o},goog.isNull=function(i){return i===null},goog.isDefAndNotNull=function(i){return i!=null},goog.isArray=function(i){return goog.typeOf(i)=="array"},goog.isArrayLike=function(i){var o=goog.typeOf(i);return o=="array"||o=="object"&&typeof i.length=="number"},goog.isDateLike=function(i){return goog.isObject(i)&&typeof i.getFullYear=="function"},goog.isFunction=function(i){return goog.typeOf(i)=="function"},goog.isObject=function(i){var o=typeof i;return o=="object"&&i!=null||o=="function"},goog.getUid=function(i){return i[goog.UID_PROPERTY_]||(i[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(i){return!!i[goog.UID_PROPERTY_]},goog.removeUid=function(i){i!==null&&"removeAttribute"in i&&i.removeAttribute(goog.UID_PROPERTY_);try{delete i[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(typeof i.clone=="function")return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.cloneObject(i[s]);return o}return i},goog.bindNative_=function(i,o,s){return i.call.apply(i.bind,arguments)},goog.bindJs_=function(i,o,s){if(!i)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,_),i.apply(o,$)}}return function(){return i.apply(o,arguments)}},goog.bind=function(i,o,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=s.slice();return _.push.apply(_,arguments),i.apply(this,_)}},goog.mixin=function(i,o){for(var s in o)i[s]=o[s]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(i){if(goog.global.execScript)goog.global.execScript(i,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(i);else{var o=goog.global.document,s=o.createElement("SCRIPT");s.type="text/javascript",s.defer=!1,s.appendChild(o.createTextNode(i)),o.head.appendChild(s),o.head.removeChild(s)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(i,o){if(String(i).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+i);var s=function($){return goog.cssNameMapping_[$]||$},_=function($){$=$.split("-");for(var et=[],tt=0;tt<$.length;tt++)et.push(s($[tt]));return et.join("-")};return _=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?s:_:function($){return $},i=o?i+"-"+_(o):_(i),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(i):i},goog.setCssNameMapping=function(i,o){goog.cssNameMapping_=i,goog.cssNameMappingStyle_=o},goog.getMsg=function(i,o,s){return s&&s.html&&(i=i.replace(/</g,"&lt;")),o&&(i=i.replace(/\{\$([^}]+)}/g,function(_,$){return o!=null&&$ in o?o[$]:_})),i},goog.getMsgWithFallback=function(i,o){return i},goog.exportSymbol=function(i,o,s){goog.exportPath_(i,o,s)},goog.exportProperty=function(i,o,s){i[o]=s},goog.inherits=function(i,o){function s(){}s.prototype=o.prototype,i.superClass_=o.prototype,i.prototype=new s,i.prototype.constructor=i,i.base=function(_,$,et){for(var tt=Array(arguments.length-2),j=2;j<arguments.length;j++)tt[j-2]=arguments[j];return o.prototype[$].apply(_,tt)}},goog.base=function(i,o,s){var _=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!_)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(_.superClass_!==void 0){for(var $=Array(arguments.length-1),et=1;et<arguments.length;et++)$[et-1]=arguments[et];return _.superClass_.constructor.apply(i,$)}if(typeof o!="string"&&typeof o!="symbol")throw Error("method names provided to goog.base must be a string or a symbol");for($=Array(arguments.length-2),et=2;et<arguments.length;et++)$[et-2]=arguments[et];et=!1;for(var tt=i.constructor.prototype;tt;tt=Object.getPrototypeOf(tt))if(tt[o]===_)et=!0;else if(et)return tt[o].apply(i,$);if(i[o]===_)return i.constructor.prototype[o].apply(i,$);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(i){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");i.call(goog.global)},goog.defineClass=function(i,o){var s=o.constructor,_=o.statics;return s&&s!=Object.prototype.constructor||(s=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),s=goog.defineClass.createSealingConstructor_(s,i),i&&goog.inherits(s,i),delete o.constructor,delete o.statics,goog.defineClass.applyProperties_(s.prototype,o),_!=null&&(_ instanceof Function?_(s):goog.defineClass.applyProperties_(s,_)),s},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(i,o){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return i;var s=!goog.defineClass.isUnsealable_(o),_=function(){var $=i.apply(this,arguments)||this;return $[goog.UID_PROPERTY_]=$[goog.UID_PROPERTY_],this.constructor===_&&s&&Object.seal instanceof Function&&Object.seal($),$};return _},goog.defineClass.isUnsealable_=function(i){return i&&i.prototype&&i.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s]);for(var _=0;_<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;_++)s=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[_],Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},goog.tagUnsealableClass=function(i){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(i){return i},goog.createTrustedTypesPolicy=function(i){var o=null;if(typeof TrustedTypes>"u"||!TrustedTypes.createPolicy)return o;try{o=TrustedTypes.createPolicy(i,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(s){goog.logToConsole_(s.message)}return o},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(i){var o=jspb.BinaryConstants.FieldType,s=jspb.BinaryConstants.WireType;switch(i){case o.INT32:case o.INT64:case o.UINT32:case o.UINT64:case o.SINT32:case o.SINT64:case o.BOOL:case o.ENUM:case o.VHASH64:return s.VARINT;case o.DOUBLE:case o.FIXED64:case o.SFIXED64:case o.FHASH64:return s.FIXED64;case o.STRING:case o.MESSAGE:case o.BYTES:return s.DELIMITED;case o.FLOAT:case o.FIXED32:case o.SFIXED32:return s.FIXED32;default:return s.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(i){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var o=Error().stack;o&&(this.stack=o)}i&&(this.message=String(i)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(i,o){goog.debug.Error.call(this,goog.asserts.subs_(i,o)),this.messagePattern=i},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(i){throw i},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(i,o){for(var s="",_=(i=i.split("%s")).length-1,$=0;$<_;$++)s+=i[$]+($<o.length?o[$]:"%s");return s+i[_]},goog.asserts.doAssertFailure_=function(i,o,s,_){var $="Assertion failed";if(s){$+=": "+s;var et=_}else i&&($+=": "+i,et=o);i=new goog.asserts.AssertionError(""+$,et||[]),goog.asserts.errorHandler_(i)},goog.asserts.setErrorHandler=function(i){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=i)},goog.asserts.assert=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!i&&goog.asserts.doAssertFailure_("",null,o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertExists=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&i==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.fail=function(i,o){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(i)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertString=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(i)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertFunction=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(i)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObject=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(i)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertArray=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(i)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertBoolean=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(i)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertElement=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(i)&&i.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertInstanceof=function(i,o,s,_){return!goog.asserts.ENABLE_ASSERTS||i instanceof o||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(o),goog.asserts.getType_(i)],s,Array.prototype.slice.call(arguments,3)),i},goog.asserts.assertFinite=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||typeof i=="number"&&isFinite(i)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var i in Object.prototype)goog.asserts.fail(i+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(i){return i[i.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.indexOf.call(i,o,s)}:function(i,o,s){if(s=s==null?0:0>s?Math.max(0,i.length+s):s,goog.isString(i))return goog.isString(o)&&o.length==1?i.indexOf(o,s):-1;for(;s<i.length;s++)if(s in i&&i[s]===o)return s;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.lastIndexOf.call(i,o,s??i.length-1)}:function(i,o,s){if(0>(s=s??i.length-1)&&(s=Math.max(0,i.length+s)),goog.isString(i))return goog.isString(o)&&o.length==1?i.lastIndexOf(o,s):-1;for(;0<=s;s--)if(s in i&&i[s]===o)return s;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(i,o,s){goog.asserts.assert(i.length!=null),Array.prototype.forEach.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)et in $&&o.call(s,$[et],et,i)},goog.array.forEachRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;--_)_ in $&&o.call(s,$[_],_,i)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.filter.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=[],et=0,tt=goog.isString(i)?i.split(""):i,j=0;j<_;j++)if(j in tt){var it=tt[j];o.call(s,it,j,i)&&($[et++]=it)}return $},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.map.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=Array(_),et=goog.isString(i)?i.split(""):i,tt=0;tt<_;tt++)tt in et&&($[tt]=o.call(s,et[tt],tt,i));return $},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduce.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEach(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),goog.asserts.assert(o!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduceRight.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEachRight(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.some.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.every.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&!o.call(s,$[et],et,i))return!1;return!0},goog.array.count=function(i,o,s){var _=0;return goog.array.forEach(i,function($,et,tt){o.call(s,$,et,tt)&&++_},s),_},goog.array.find=function(i,o,s){return 0>(o=goog.array.findIndex(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndex=function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return et;return-1},goog.array.findRight=function(i,o,s){return 0>(o=goog.array.findIndexRight(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndexRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;_--)if(_ in $&&o.call(s,$[_],_,i))return _;return-1},goog.array.contains=function(i,o){return 0<=goog.array.indexOf(i,o)},goog.array.isEmpty=function(i){return i.length==0},goog.array.clear=function(i){if(!goog.isArray(i))for(var o=i.length-1;0<=o;o--)delete i[o];i.length=0},goog.array.insert=function(i,o){goog.array.contains(i,o)||i.push(o)},goog.array.insertAt=function(i,o,s){goog.array.splice(i,s,0,o)},goog.array.insertArrayAt=function(i,o,s){goog.partial(goog.array.splice,i,s,0).apply(null,o)},goog.array.insertBefore=function(i,o,s){var _;arguments.length==2||0>(_=goog.array.indexOf(i,s))?i.push(o):goog.array.insertAt(i,o,_)},goog.array.remove=function(i,o){var s;return(s=0<=(o=goog.array.indexOf(i,o)))&&goog.array.removeAt(i,o),s},goog.array.removeLast=function(i,o){return 0<=(o=goog.array.lastIndexOf(i,o))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAt=function(i,o){return goog.asserts.assert(i.length!=null),Array.prototype.splice.call(i,o,1).length==1},goog.array.removeIf=function(i,o,s){return 0<=(o=goog.array.findIndex(i,o,s))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAllIf=function(i,o,s){var _=0;return goog.array.forEachRight(i,function($,et){o.call(s,$,et,i)&&goog.array.removeAt(i,et)&&_++}),_},goog.array.concat=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(i){var o=i.length;if(0<o){for(var s=Array(o),_=0;_<o;_++)s[_]=i[_];return s}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(i,o){for(var s=1;s<arguments.length;s++){var _=arguments[s];if(goog.isArrayLike(_)){var $=i.length||0,et=_.length||0;i.length=$+et;for(var tt=0;tt<et;tt++)i[$+tt]=_[tt]}else i.push(_)}},goog.array.splice=function(i,o,s,_){return goog.asserts.assert(i.length!=null),Array.prototype.splice.apply(i,goog.array.slice(arguments,1))},goog.array.slice=function(i,o,s){return goog.asserts.assert(i.length!=null),2>=arguments.length?Array.prototype.slice.call(i,o):Array.prototype.slice.call(i,o,s)},goog.array.removeDuplicates=function(i,o,s){o=o||i;var _=function(it){return goog.isObject(it)?"o"+goog.getUid(it):(typeof it).charAt(0)+it};s=s||_,_={};for(var $=0,et=0;et<i.length;){var tt=i[et++],j=s(tt);Object.prototype.hasOwnProperty.call(_,j)||(_[j]=!0,o[$++]=tt)}o.length=$},goog.array.binarySearch=function(i,o,s){return goog.array.binarySearch_(i,s||goog.array.defaultCompare,!1,o)},goog.array.binarySelect=function(i,o,s){return goog.array.binarySearch_(i,o,!0,void 0,s)},goog.array.binarySearch_=function(i,o,s,_,$){for(var et,tt=0,j=i.length;tt<j;){var it=tt+j>>1,st=s?o.call($,i[it],it,i):o(_,i[it]);0<st?tt=it+1:(j=it,et=!st)}return et?tt:~tt},goog.array.sort=function(i,o){i.sort(o||goog.array.defaultCompare)},goog.array.stableSort=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]={index:_,value:i[_]};var $=o||goog.array.defaultCompare;for(goog.array.sort(s,function(et,tt){return $(et.value,tt.value)||et.index-tt.index}),_=0;_<i.length;_++)i[_]=s[_].value},goog.array.sortByKey=function(i,o,s){var _=s||goog.array.defaultCompare;goog.array.sort(i,function($,et){return _(o($),o(et))})},goog.array.sortObjectsByKey=function(i,o,s){goog.array.sortByKey(i,function(_){return _[o]},s)},goog.array.isSorted=function(i,o,s){o=o||goog.array.defaultCompare;for(var _=1;_<i.length;_++){var $=o(i[_-1],i[_]);if(0<$||$==0&&s)return!1}return!0},goog.array.equals=function(i,o,s){if(!goog.isArrayLike(i)||!goog.isArrayLike(o)||i.length!=o.length)return!1;var _=i.length;s=s||goog.array.defaultCompareEquality;for(var $=0;$<_;$++)if(!s(i[$],o[$]))return!1;return!0},goog.array.compare3=function(i,o,s){s=s||goog.array.defaultCompare;for(var _=Math.min(i.length,o.length),$=0;$<_;$++){var et=s(i[$],o[$]);if(et!=0)return et}return goog.array.defaultCompare(i.length,o.length)},goog.array.defaultCompare=function(i,o){return i>o?1:i<o?-1:0},goog.array.inverseDefaultCompare=function(i,o){return-goog.array.defaultCompare(i,o)},goog.array.defaultCompareEquality=function(i,o){return i===o},goog.array.binaryInsert=function(i,o,s){return 0>(s=goog.array.binarySearch(i,o,s))&&(goog.array.insertAt(i,o,-(s+1)),!0)},goog.array.binaryRemove=function(i,o,s){return 0<=(o=goog.array.binarySearch(i,o,s))&&goog.array.removeAt(i,o)},goog.array.bucket=function(i,o,s){for(var _={},$=0;$<i.length;$++){var et=i[$],tt=o.call(s,et,$,i);goog.isDef(tt)&&(_[tt]||(_[tt]=[])).push(et)}return _},goog.array.toObject=function(i,o,s){var _={};return goog.array.forEach(i,function($,et){_[o.call(s,$,et,i)]=$}),_},goog.array.range=function(i,o,s){var _=[],$=0,et=i;if(o!==void 0&&($=i,et=o),0>(s=s||1)*(et-$))return[];if(0<s)for(i=$;i<et;i+=s)_.push(i);else for(i=$;i>et;i+=s)_.push(i);return _},goog.array.repeat=function(i,o){for(var s=[],_=0;_<o;_++)s[_]=i;return s},goog.array.flatten=function(i){for(var o=[],s=0;s<arguments.length;s++){var _=arguments[s];if(goog.isArray(_))for(var $=0;$<_.length;$+=8192){var et=goog.array.slice(_,$,$+8192);et=goog.array.flatten.apply(null,et);for(var tt=0;tt<et.length;tt++)o.push(et[tt])}else o.push(_)}return o},goog.array.rotate=function(i,o){return goog.asserts.assert(i.length!=null),i.length&&(0<(o%=i.length)?Array.prototype.unshift.apply(i,i.splice(-o,o)):0>o&&Array.prototype.push.apply(i,i.splice(0,-o))),i},goog.array.moveItem=function(i,o,s){goog.asserts.assert(0<=o&&o<i.length),goog.asserts.assert(0<=s&&s<i.length),o=Array.prototype.splice.call(i,o,1),Array.prototype.splice.call(i,s,0,o[0])},goog.array.zip=function(i){if(!arguments.length)return[];for(var o=[],s=arguments[0].length,_=1;_<arguments.length;_++)arguments[_].length<s&&(s=arguments[_].length);for(_=0;_<s;_++){for(var $=[],et=0;et<arguments.length;et++)$.push(arguments[et][_]);o.push($)}return o},goog.array.shuffle=function(i,o){o=o||Math.random;for(var s=i.length-1;0<s;s--){var _=Math.floor(o()*(s+1)),$=i[s];i[s]=i[_],i[_]=$}},goog.array.copyByIndex=function(i,o){var s=[];return goog.array.forEach(o,function(_){s.push(i[_])}),s},goog.array.concatMap=function(i,o,s){return goog.array.concat.apply([],goog.array.map(i,o,s))},goog.crypt={},goog.crypt.stringToByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);255<$&&(o[s++]=255&$,$>>=8),o[s++]=$}return o},goog.crypt.byteArrayToString=function(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var o="",s=0;s<i.length;s+=8192){var _=goog.array.slice(i,s,s+8192);o+=String.fromCharCode.apply(null,_)}return o},goog.crypt.byteArrayToHex=function(i,o){return goog.array.map(i,function(s){return 1<(s=s.toString(16)).length?s:"0"+s}).join(o||"")},goog.crypt.hexToByteArray=function(i){goog.asserts.assert(i.length%2==0,"Key string length must be multiple of 2");for(var o=[],s=0;s<i.length;s+=2)o.push(parseInt(i.substring(s,s+2),16));return o},goog.crypt.stringToUtf8ByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);128>$?o[s++]=$:(2048>$?o[s++]=$>>6|192:((64512&$)==55296&&_+1<i.length&&(64512&i.charCodeAt(_+1))==56320?($=65536+((1023&$)<<10)+(1023&i.charCodeAt(++_)),o[s++]=$>>18|240,o[s++]=$>>12&63|128):o[s++]=$>>12|224,o[s++]=$>>6&63|128),o[s++]=63&$|128)}return o},goog.crypt.utf8ByteArrayToString=function(i){for(var o=[],s=0,_=0;s<i.length;){var $=i[s++];if(128>$)o[_++]=String.fromCharCode($);else if(191<$&&224>$){var et=i[s++];o[_++]=String.fromCharCode((31&$)<<6|63&et)}else if(239<$&&365>$){et=i[s++];var tt=i[s++];$=((7&$)<<18|(63&et)<<12|(63&tt)<<6|63&i[s++])-65536,o[_++]=String.fromCharCode(55296+($>>10)),o[_++]=String.fromCharCode(56320+(1023&$))}else et=i[s++],tt=i[s++],o[_++]=String.fromCharCode((15&$)<<12|(63&et)<<6|63&tt)}return o.join("")},goog.crypt.xorByteArray=function(i,o){goog.asserts.assert(i.length==o.length,"XOR array lengths must match");for(var s=[],_=0;_<i.length;_++)s.push(i[_]^o[_]);return s},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(i,o){return i.lastIndexOf(o,0)==0},goog.string.internal.endsWith=function(i,o){var s=i.length-o.length;return 0<=s&&i.indexOf(o,s)==s},goog.string.internal.caseInsensitiveStartsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(0,o.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(i.length-o.length,o.length))==0},goog.string.internal.caseInsensitiveEquals=function(i,o){return i.toLowerCase()==o.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(i){return/^[\s\xa0]*$/.test(i)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},goog.string.internal.caseInsensitiveCompare=function(i,o){return(i=String(i).toLowerCase())<(o=String(o).toLowerCase())?-1:i==o?0:1},goog.string.internal.newLineToBr=function(i,o){return i.replace(/(\r\n|\r|\n)/g,o?"<br />":"<br>")},goog.string.internal.htmlEscape=function(i,o){if(o)i=i.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(i))return i;i.indexOf("&")!=-1&&(i=i.replace(goog.string.internal.AMP_RE_,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace(goog.string.internal.LT_RE_,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(goog.string.internal.GT_RE_,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(goog.string.internal.QUOT_RE_,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(goog.string.internal.NULL_RE_,"&#0;"))}return i},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(i,o){return goog.string.internal.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.internal.contains=function(i,o){return i.indexOf(o)!=-1},goog.string.internal.caseInsensitiveContains=function(i,o){return goog.string.internal.contains(i.toLowerCase(),o.toLowerCase())},goog.string.internal.compareVersions=function(i,o){var s=0;i=goog.string.internal.trim(String(i)).split("."),o=goog.string.internal.trim(String(o)).split(".");for(var _=Math.max(i.length,o.length),$=0;s==0&&$<_;$++){var et=i[$]||"",tt=o[$]||"";do{if(et=/(\d*)(\D*)(.*)/.exec(et)||["","","",""],tt=/(\d*)(\D*)(.*)/.exec(tt)||["","","",""],et[0].length==0&&tt[0].length==0)break;s=et[1].length==0?0:parseInt(et[1],10);var j=tt[1].length==0?0:parseInt(tt[1],10);s=goog.string.internal.compareElements_(s,j)||goog.string.internal.compareElements_(et[2].length==0,tt[2].length==0)||goog.string.internal.compareElements_(et[2],tt[2]),et=et[3],tt=tt[3]}while(s==0)}return s},goog.string.internal.compareElements_=function(i,o){return i<o?-1:i>o?1:0},goog.string.TypedString=function(){},goog.string.Const=function(i,o){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=i===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&o||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(i){return i instanceof goog.string.Const&&i.constructor===goog.string.Const&&i.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?i.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+i+"'"),"type_error:Const")},goog.string.Const.from=function(i){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,i)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(i){return goog.fs.url.getUrlObject_().createObjectURL(i)},goog.fs.url.revokeObjectUrl=function(i){goog.fs.url.getUrlObject_().revokeObjectURL(i)},goog.fs.url.getUrlObject_=function(){var i=goog.fs.url.findUrlObject_();if(i!=null)return i;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(i,o){return typeof i=="number"?0<i?goog.i18n.bidi.Dir.LTR:0>i?goog.i18n.bidi.Dir.RTL:o?null:goog.i18n.bidi.Dir.NEUTRAL:i==null?null:i?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z------\uD801\uD804-\uD839\uD83C-\uDBFF---",goog.i18n.bidi.rtlChars_="--\uD802-\uD803\uD83A-\uD83B--",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(i,o){return o?i.replace(goog.i18n.bidi.htmlSkipReg_,""):i},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(i,o){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(i,o){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(i){return goog.i18n.bidi.rtlRe_.test(i)},goog.i18n.bidi.isLtrChar=function(i){return goog.i18n.bidi.ltrRe_.test(i)},goog.i18n.bidi.isNeutralChar=function(i){return!goog.i18n.bidi.isLtrChar(i)&&!goog.i18n.bidi.isRtlChar(i)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(i,o){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(i,o){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(i,o){return i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o),goog.i18n.bidi.isRequiredLtrRe_.test(i)||!goog.i18n.bidi.hasAnyLtr(i)&&!goog.i18n.bidi.hasAnyRtl(i)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(i,o){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(i,o){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(i){return goog.i18n.bidi.rtlLocalesRe_.test(i)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(i,o){return o=(o===void 0?goog.i18n.bidi.hasAnyRtl(i):o)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,i.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+i+"</span>"},goog.i18n.bidi.enforceRtlInText=function(i){return goog.i18n.bidi.Format.RLE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+i+"</span>"},goog.i18n.bidi.enforceLtrInText=function(i){return goog.i18n.bidi.Format.LRE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(i){return i.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(i){return i.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(i,o){var s=0,_=0,$=!1;for(i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o).split(goog.i18n.bidi.wordSeparatorRe_),o=0;o<i.length;o++){var et=i[o];goog.i18n.bidi.startsWithRtl(et)?(s++,_++):goog.i18n.bidi.isRequiredLtrRe_.test(et)?$=!0:goog.i18n.bidi.hasAnyLtr(et)?_++:goog.i18n.bidi.hasNumeralsRe_.test(et)&&($=!0)}return _==0?$?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:s/_>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(i,o){return goog.i18n.bidi.estimateDirection(i,o)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(i,o){i&&(o=goog.i18n.bidi.toDir(o))&&(i.style.textAlign=o==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,i.dir=o==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(i,o){switch(goog.i18n.bidi.estimateDirection(o)){case goog.i18n.bidi.Dir.LTR:i.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:i.dir="rtl";break;default:i.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.trustedURL_=null,this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(i,o){var s=goog.html.TrustedResourceUrl.unwrap(this),_=(s=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(s))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(s[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",s[2]||"",i)+goog.html.TrustedResourceUrl.stringifyParams_("#",_,o))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(i){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(i){return i instanceof goog.html.TrustedResourceUrl&&i.constructor===goog.html.TrustedResourceUrl&&i.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.unwrapTrustedURL=function(i){return i.trustedURL_?i.trustedURL_:goog.html.TrustedResourceUrl.unwrap(i)},goog.html.TrustedResourceUrl.format=function(i,o){var s=goog.string.Const.unwrap(i);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(s))throw Error("Invalid TrustedResourceUrl format: "+s);return i=s.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(_,$){if(!Object.prototype.hasOwnProperty.call(o,$))throw Error('Found marker, "'+$+'", in format string, "'+s+'", but no valid label mapping found in args: '+JSON.stringify(o));return(_=o[$])instanceof goog.string.Const?goog.string.Const.unwrap(_):encodeURIComponent(String(_))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(i,o,s,_){return goog.html.TrustedResourceUrl.format(i,o).cloneWithParams(s,_)},goog.html.TrustedResourceUrl.fromConstant=function(i){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.TrustedResourceUrl.fromConstants=function(i){for(var o="",s=0;s<i.length;s++)o+=goog.string.Const.unwrap(i[s]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.TrustedResourceUrl;return o.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(i):i,goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY&&(o.trustedURL_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i)),o},goog.html.TrustedResourceUrl.stringifyParams_=function(i,o,s){if(s==null)return o;if(goog.isString(s))return s?i+encodeURIComponent(s):"";for(var _ in s){var $=s[_];$=goog.isArray($)?$:[$];for(var et=0;et<$.length;et++){var tt=$[et];tt!=null&&(o||(o=i),o+=(o.length>i.length?"&":"")+encodeURIComponent(_)+"="+encodeURIComponent(String(tt)))}}return o},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeUrlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(i){return goog.html.SafeUrl.unwrapTrustedURL(i).toString()},goog.html.SafeUrl.unwrapTrustedURL=function(i){return i instanceof goog.html.SafeUrl&&i.constructor===goog.html.SafeUrl&&i.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(i){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(i)},goog.html.SafeUrl.fromBlob=function(i){return i=goog.html.SAFE_MIME_TYPE_PATTERN_.test(i.type)?goog.fs.url.createObjectUrl(i):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.DATA_URL_PATTERN_=/^data:([^,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(i){var o=(i=i.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return o=o&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(o[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o?i:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"tel:")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(i){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(i))||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"fb-messenger://share")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromWhatsAppUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"whatsapp://send")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromSmsUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(i){var o=i.indexOf("#");if(0<o&&(i=i.substring(0,o)),!(o=i.match(/[?&]body=/gi)))return!0;if(1<o.length)return!1;if(!(i=i.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(i)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(i)},goog.html.SafeUrl.fromSshUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"ssh://")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(i,o,s){return(i=i.exec(o))?(i=i[1],(s instanceof goog.string.Const?[goog.string.Const.unwrap(s)]:s.map(function(_){return goog.string.Const.unwrap(_)})).indexOf(i)==-1&&(o=goog.html.SafeUrl.INNOCUOUS_STRING)):o=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.fromTrustedResourceUrl=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(i))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(i){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SAFE_URL_PATTERN_.test(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(i,o){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),o&&/^data:/i.test(i)&&(o=goog.html.SafeUrl.fromDataUrl(i)).getTypedStringValue()==i?o:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(i),"%s does not match the safe URL pattern",i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.SafeUrl;return o.privateDoNotAccessOrElseSafeUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i):i,o},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(i,";"),"Last character of style string is not ';': "+i),goog.asserts.assert(goog.string.internal.contains(i,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+i),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(i){return i instanceof goog.html.SafeStyle&&i.constructor===goog.html.SafeStyle&&i.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=i,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(i){var o,s="";for(o in i){if(!/^[-_a-zA-Z0-9]+$/.test(o))throw Error("Name allows only [-_a-zA-Z0-9], got: "+o);var _=i[o];_!=null&&(s+=o+":"+(_=goog.isArray(_)?goog.array.map(_,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(_))+";")}return s?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(s):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(i){if(i instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(i).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(i=i instanceof goog.string.Const?goog.string.Const.unwrap(i):goog.html.SafeStyle.sanitizePropertyValueString_(String(i)),/[{;}]/.test(i))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[i]);return i},goog.html.SafeStyle.sanitizePropertyValueString_=function(i){var o=i.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(o)?goog.html.SafeStyle.COMMENT_RE_.test(i)?(goog.asserts.fail("String value disallows comments, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(i)?goog.html.SafeStyle.hasBalancedSquareBrackets_(i)?goog.html.SafeStyle.sanitizeUrl_(i):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(i){for(var o=!0,s=!0,_=0;_<i.length;_++){var $=i.charAt(_);$=="'"&&s?o=!o:$=='"'&&o&&(s=!s)}return o&&s},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(i){for(var o=!0,s=/^[-_a-zA-Z0-9]$/,_=0;_<i.length;_++){var $=i.charAt(_);if($=="]"){if(o)return!1;o=!0}else if($=="["){if(!o)return!1;o=!1}else if(!o&&!s.test($))return!1}return o},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.FUNCTIONS_RE_=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(i){return i.replace(goog.html.SafeStyle.URL_RE_,function(o,s,_,$){var et="";return _=_.replace(/^(['"])(.*)\1$/,function(tt,j,it){return et=j,it}),o=goog.html.SafeUrl.sanitize(_).getTypedStringValue(),s+et+o+et+$})},goog.html.SafeStyle.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyle.unwrap(_)};return goog.array.forEach(arguments,s),o?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o):goog.html.SafeStyle.EMPTY},goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeScript.fromConstantAndArgs=function(i,o){for(var s=[],_=1;_<arguments.length;_++)s.push(goog.html.SafeScript.stringify_(arguments[_]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(i)+")("+s.join(", ")+");")},goog.html.SafeScript.fromJson=function(i){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(i))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(i){return goog.html.SafeScript.unwrapTrustedScript(i).toString()},goog.html.SafeScript.unwrapTrustedScript=function(i){return i instanceof goog.html.SafeScript&&i.constructor===goog.html.SafeScript&&i.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(i){return JSON.stringify(i).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(i):i,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.object={},goog.object.is=function(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o},goog.object.forEach=function(i,o,s){for(var _ in i)o.call(s,i[_],_,i)},goog.object.filter=function(i,o,s){var _,$={};for(_ in i)o.call(s,i[_],_,i)&&($[_]=i[_]);return $},goog.object.map=function(i,o,s){var _,$={};for(_ in i)$[_]=o.call(s,i[_],_,i);return $},goog.object.some=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return!0;return!1},goog.object.every=function(i,o,s){for(var _ in i)if(!o.call(s,i[_],_,i))return!1;return!0},goog.object.getCount=function(i){var o,s=0;for(o in i)s++;return s},goog.object.getAnyKey=function(i){for(var o in i)return o},goog.object.getAnyValue=function(i){for(var o in i)return i[o]},goog.object.contains=function(i,o){return goog.object.containsValue(i,o)},goog.object.getValues=function(i){var o,s=[],_=0;for(o in i)s[_++]=i[o];return s},goog.object.getKeys=function(i){var o,s=[],_=0;for(o in i)s[_++]=o;return s},goog.object.getValueByKeys=function(i,o){var s=goog.isArrayLike(o),_=s?o:arguments;for(s=s?0:1;s<_.length;s++){if(i==null)return;i=i[_[s]]}return i},goog.object.containsKey=function(i,o){return i!==null&&o in i},goog.object.containsValue=function(i,o){for(var s in i)if(i[s]==o)return!0;return!1},goog.object.findKey=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return _},goog.object.findValue=function(i,o,s){return(o=goog.object.findKey(i,o,s))&&i[o]},goog.object.isEmpty=function(i){for(var o in i)return!1;return!0},goog.object.clear=function(i){for(var o in i)delete i[o]},goog.object.remove=function(i,o){var s;return(s=o in i)&&delete i[o],s},goog.object.add=function(i,o,s){if(i!==null&&o in i)throw Error('The object already contains the key "'+o+'"');goog.object.set(i,o,s)},goog.object.get=function(i,o,s){return i!==null&&o in i?i[o]:s},goog.object.set=function(i,o,s){i[o]=s},goog.object.setIfUndefined=function(i,o,s){return o in i?i[o]:i[o]=s},goog.object.setWithReturnValueIfNotSet=function(i,o,s){return o in i?i[o]:(s=s(),i[o]=s)},goog.object.equals=function(i,o){for(var s in i)if(!(s in o)||i[s]!==o[s])return!1;for(var _ in o)if(!(_ in i))return!1;return!0},goog.object.clone=function(i){var o,s={};for(o in i)s[o]=i[o];return s},goog.object.unsafeClone=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(goog.isFunction(i.clone))return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.object.unsafeClone(i[s]);return o}return i},goog.object.transpose=function(i){var o,s={};for(o in i)s[i[o]]=o;return s},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(i,o){for(var s,_,$=1;$<arguments.length;$++){for(s in _=arguments[$])i[s]=_[s];for(var et=0;et<goog.object.PROTOTYPE_FIELDS_.length;et++)s=goog.object.PROTOTYPE_FIELDS_[et],Object.prototype.hasOwnProperty.call(_,s)&&(i[s]=_[s])}},goog.object.create=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(o%2)throw Error("Uneven number of arguments");for(var s={},_=0;_<o;_+=2)s[arguments[_]]=arguments[_+1];return s},goog.object.createSet=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var s={},_=0;_<o;_++)s[arguments[_]]=!0;return s},goog.object.createImmutableView=function(i){var o=i;return Object.isFrozen&&!Object.isFrozen(i)&&(o=Object.create(i),Object.freeze(o)),o},goog.object.isImmutableView=function(i){return!!Object.isFrozen&&Object.isFrozen(i)},goog.object.getAllPropertyNames=function(i,o,s){if(!i)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(i);for(var _={};i&&(i!==Object.prototype||o)&&(i!==Function.prototype||s);){for(var $=Object.getOwnPropertyNames(i),et=0;et<$.length;et++)_[$[et]]=!0;i=Object.getPrototypeOf(i)}return goog.object.getKeys(_)},goog.object.getSuperClass=function(i){return(i=Object.getPrototypeOf(i.prototype))&&i.constructor},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(i,o){if(goog.string.internal.contains(i,"<"))throw Error("Selector does not allow '<', got: "+i);var s=i.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(s))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+i);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(s))throw Error("() and [] in selector must be balanced, got: "+i);return o instanceof goog.html.SafeStyle||(o=goog.html.SafeStyle.create(o)),i=i+"{"+goog.html.SafeStyle.unwrap(o).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(i){for(var o={"(":")","[":"]"},s=[],_=0;_<i.length;_++){var $=i[_];if(o[$])s.push(o[$]);else if(goog.object.contains(o,$)&&s.pop()!=$)return!1}return s.length==0},goog.html.SafeStyleSheet.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyleSheet.unwrap(_)};return goog.array.forEach(arguments,s),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeStyleSheet.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(i,"<"),"Forbidden '<' character in style sheet string: "+i),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(i){return i instanceof goog.html.SafeStyleSheet&&i.constructor===goog.html.SafeStyleSheet&&i.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=i,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(i){return goog.dom.tags.VOID_TAGS_[i]===!0},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(i){this.tagName_=i},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var i=goog.labs.userAgent.util.getNavigator_();return i&&(i=i.userAgent)?i:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(i){goog.labs.userAgent.util.userAgent_=i||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(o,i)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(o,i)},goog.labs.userAgent.util.extractVersionTuples=function(i){for(var o,s=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,_=[];o=s.exec(i);)_.push([o[1],o[2],o[3]||void 0]);return _},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function i($){return $=goog.array.find($,_),s[$]||""}var o=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(o);o=goog.labs.userAgent.util.extractVersionTuples(o);var s={};goog.array.forEach(o,function($){s[$[0]]=$[1]});var _=goog.partial(goog.object.containsKey,s);return goog.labs.userAgent.browser.isOpera()?i(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?i(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?i(["Edg"]):goog.labs.userAgent.browser.isChrome()?i(["Chrome","CriOS"]):(o=o[2])&&o[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(i){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),i)},goog.labs.userAgent.browser.getIEVersion_=function(i){var o=/rv: *([\d\.]*)/.exec(i);if(o&&o[1])return o[1];o="";var s=/MSIE +([\d\.]+)/.exec(i);if(s&&s[1])if(i=/Trident\/(\d.\d)/.exec(i),s[1]=="7.0")if(i&&i[1])switch(i[1]){case"4.0":o="8.0";break;case"5.0":o="9.0";break;case"6.0":o="10.0";break;case"7.0":o="11.0"}else o="7.0";else o=s[1];return o},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(i){return goog.html.SafeHtml.unwrapTrustedHTML(i).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(i){return i instanceof goog.html.SafeHtml&&i.constructor===goog.html.SafeHtml&&i.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(i){if(i instanceof goog.html.SafeHtml)return i;var o=typeof i=="object",s=null;return o&&i.implementsGoogI18nBidiDirectionalString&&(s=i.getDirection()),i=o&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(i),s)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(i,o,s){return goog.html.SafeHtml.verifyTagName(String(i)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(i),o,s)},goog.html.SafeHtml.verifyTagName=function(i){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(i))throw Error("Invalid tag name <"+i+">.");if(i.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+i+"> is not allowed for SafeHtml.")},goog.html.SafeHtml.createIframe=function(i,o,s,_){i&&goog.html.TrustedResourceUrl.unwrap(i);var $={};return $.src=i||null,$.srcdoc=o&&goog.html.SafeHtml.unwrap(o),i=goog.html.SafeHtml.combineAttributes($,{sandbox:""},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.createSandboxIframe=function(i,o,s,_){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var $={};return $.src=i?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)):null,$.srcdoc=o||null,$.sandbox="",i=goog.html.SafeHtml.combineAttributes($,{},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(i,o){return goog.html.TrustedResourceUrl.unwrap(i),i=goog.html.SafeHtml.combineAttributes({src:i},{},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",i)},goog.html.SafeHtml.createScript=function(i,o){for(var s in o){var _=s.toLowerCase();if(_=="language"||_=="src"||_=="text"||_=="type")throw Error('Cannot set "'+_+'" attribute')}for(s="",i=goog.array.concat(i),_=0;_<i.length;_++)s+=goog.html.SafeScript.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",o,i)},goog.html.SafeHtml.createStyle=function(i,o){o=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},o);var s="";i=goog.array.concat(i);for(var _=0;_<i.length;_++)s+=goog.html.SafeStyleSheet.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",o,i)},goog.html.SafeHtml.createMetaRefresh=function(i,o){return i=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(o||0)+"; url="+i})},goog.html.SafeHtml.getAttrNameAndValue_=function(i,o,s){if(s instanceof goog.string.Const)s=goog.string.Const.unwrap(s);else if(o.toLowerCase()=="style")s=goog.html.SafeHtml.getStyleValue_(s);else{if(/^on/i.test(o))throw Error('Attribute "'+o+'" requires goog.string.Const value, "'+s+'" given.');if(o.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(s instanceof goog.html.TrustedResourceUrl)s=goog.html.TrustedResourceUrl.unwrap(s);else if(s instanceof goog.html.SafeUrl)s=goog.html.SafeUrl.unwrap(s);else{if(!goog.isString(s))throw Error('Attribute "'+o+'" on tag "'+i+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+s+'" given.');s=goog.html.SafeUrl.sanitize(s).getTypedStringValue()}}return s.implementsGoogStringTypedString&&(s=s.getTypedStringValue()),goog.asserts.assert(goog.isString(s)||goog.isNumber(s),"String or number value expected, got "+typeof s+" with value: "+s),o+'="'+goog.string.internal.htmlEscape(String(s))+'"'},goog.html.SafeHtml.getStyleValue_=function(i){if(!goog.isObject(i))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof i+" given: "+i);return i instanceof goog.html.SafeStyle||(i=goog.html.SafeStyle.create(i)),goog.html.SafeStyle.unwrap(i)},goog.html.SafeHtml.createWithDir=function(i,o,s,_){return(o=goog.html.SafeHtml.create(o,s,_)).dir_=i,o},goog.html.SafeHtml.join=function(i,o){var s=(i=goog.html.SafeHtml.htmlEscape(i)).getDirection(),_=[],$=function(et){goog.isArray(et)?goog.array.forEach(et,$):(et=goog.html.SafeHtml.htmlEscape(et),_.push(goog.html.SafeHtml.unwrap(et)),et=et.getDirection(),s==goog.i18n.bidi.Dir.NEUTRAL?s=et:et!=goog.i18n.bidi.Dir.NEUTRAL&&s!=et&&(s=null))};return goog.array.forEach(o,$),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(_.join(goog.html.SafeHtml.unwrap(i)),s)},goog.html.SafeHtml.concat=function(i){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(i,o){var s=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return s.dir_=i,s},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(i,o){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(i,o)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i,o){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(i):i,this.dir_=o,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(i,o,s){var _=null,$="<"+i+goog.html.SafeHtml.stringifyAttributes(i,o);return goog.isDefAndNotNull(s)?goog.isArray(s)||(s=[s]):s=[],goog.dom.tags.isVoidTag(i.toLowerCase())?(goog.asserts.assert(!s.length,"Void tag <"+i+"> does not allow content."),$+=">"):(_=goog.html.SafeHtml.concat(s),$+=">"+goog.html.SafeHtml.unwrap(_)+"</"+i+">",_=_.getDirection()),(i=o&&o.dir)&&(_=/^(ltr|rtl|auto)$/i.test(i)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse($,_)},goog.html.SafeHtml.stringifyAttributes=function(i,o){var s="";if(o)for(var _ in o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(_))throw Error('Invalid attribute name "'+_+'".');var $=o[_];goog.isDefAndNotNull($)&&(s+=" "+goog.html.SafeHtml.getAttrNameAndValue_(i,_,$))}return s},goog.html.SafeHtml.combineAttributes=function(i,o,s){var _,$={};for(_ in i)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=i[_];for(_ in o)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=o[_];for(_ in s){var et=_.toLowerCase();if(et in i)throw Error('Cannot override "'+et+'" attribute, got "'+_+'" with value "'+s[_]+'"');et in o&&delete $[et],$[_]=s[_]}return $},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(i,o,s){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,s||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(i){if(goog.asserts.ENABLE_ASSERTS){var o=goog.dom.asserts.getWindow_(i);o&&(!i||!(i instanceof o.Location)&&i instanceof o.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(i))}return i},goog.dom.asserts.assertIsElementType_=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=goog.dom.asserts.getWindow_(i);s&&s[o]!==void 0&&(i&&(i instanceof s[o]||!(i instanceof s.Location||i instanceof s.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",o,goog.dom.asserts.debugStringForType_(i)))}return i},goog.dom.asserts.assertIsHTMLAnchorElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(i){if(!goog.isObject(i))return i===void 0?"undefined":i===null?"null":typeof i;try{return i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch{return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(i){try{var o=i&&i.ownerDocument,s=o&&(o.defaultView||o.parentWindow);if((s=s||goog.global).Element&&s.Location)return s}catch{}return null},goog.functions={},goog.functions.constant=function(i){return function(){return i}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(i,o){return i},goog.functions.error=function(i){return function(){throw Error(i)}},goog.functions.fail=function(i){return function(){throw i}},goog.functions.lock=function(i,o){return o=o||0,function(){return i.apply(this,Array.prototype.slice.call(arguments,0,o))}},goog.functions.nth=function(i){return function(){return arguments[i]}},goog.functions.partialRight=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=Array.prototype.slice.call(arguments);return _.push.apply(_,s),i.apply(this,_)}},goog.functions.withReturnValue=function(i,o){return goog.functions.sequence(i,goog.functions.constant(o))},goog.functions.equalTo=function(i,o){return function(s){return o?i==s:i===s}},goog.functions.compose=function(i,o){var s=arguments,_=s.length;return function(){var $;_&&($=s[_-1].apply(this,arguments));for(var et=_-2;0<=et;et--)$=s[et].call(this,$);return $}},goog.functions.sequence=function(i){var o=arguments,s=o.length;return function(){for(var _,$=0;$<s;$++)_=o[$].apply(this,arguments);return _}},goog.functions.and=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(!o[_].apply(this,arguments))return!1;return!0}},goog.functions.or=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(o[_].apply(this,arguments))return!0;return!1}},goog.functions.not=function(i){return function(){return!i.apply(this,arguments)}},goog.functions.create=function(i,o){var s=function(){};return s.prototype=i.prototype,s=new s,i.apply(s,Array.prototype.slice.call(arguments,1)),s},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(i){var o,s=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(s||(o=i(),s=!0),o):i()}},goog.functions.once=function(i){var o=i;return function(){if(o){var s=o;o=null,s()}}},goog.functions.debounce=function(i,o,s){var _=0;return function($){goog.global.clearTimeout(_);var et=arguments;_=goog.global.setTimeout(function(){i.apply(s,et)},o)}},goog.functions.throttle=function(i,o,s){var _=0,$=!1,et=[],tt=function(){_=0,$&&($=!1,j())},j=function(){_=goog.global.setTimeout(tt,o),i.apply(s,et)};return function(it){et=arguments,_?$=!0:j()}},goog.functions.rateLimit=function(i,o,s){var _=0,$=function(){_=0};return function(et){_||(_=goog.global.setTimeout($,o),i.apply(s,arguments))}},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(i,o,s){i.insertAdjacentHTML(o,goog.html.SafeHtml.unwrapTrustedHTML(s))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var i=document.createElement("div"),o=document.createElement("div");return o.appendChild(document.createElement("div")),i.appendChild(o),!(goog.DEBUG&&!i.firstChild)&&(o=i.firstChild.firstChild,i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!o.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(i,o){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;i.lastChild;)i.removeChild(i.lastChild);i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setInnerHtml=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=i.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[s])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+i.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(i,o)},goog.dom.safe.setOuterHtml=function(i,o){i.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setFormElementAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLFormElement(i).action=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setButtonFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLButtonElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setInputFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLInputElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setStyle=function(i,o){i.style.cssText=goog.html.SafeStyle.unwrap(o)},goog.dom.safe.documentWrite=function(i,o){i.write(goog.html.SafeHtml.unwrapTrustedHTML(o))},goog.dom.safe.setAnchorHref=function(i,o){goog.dom.asserts.assertIsHTMLAnchorElement(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setImageSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLImageElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:image\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setAudioSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLAudioElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:audio\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setVideoSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLVideoElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:video\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setEmbedSrc=function(i,o){goog.dom.asserts.assertIsHTMLEmbedElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setFrameSrc=function(i,o){goog.dom.asserts.assertIsHTMLFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrcdoc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setLinkHrefAndRel=function(i,o,s){goog.dom.asserts.assertIsHTMLLinkElement(i),i.rel=s,goog.string.internal.caseInsensitiveContains(s,"stylesheet")?(goog.asserts.assert(o instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),i.href=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)):i.href=o instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrapTrustedURL(o):o instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrapTrustedURL(o):goog.html.SafeUrl.unwrapTrustedURL(goog.html.SafeUrl.sanitizeAssertUnchanged(o))},goog.dom.safe.setObjectData=function(i,o){goog.dom.asserts.assertIsHTMLObjectElement(i),i.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setScriptSrc=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setScriptContent=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.text=goog.html.SafeScript.unwrapTrustedScript(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setLocationHref=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.assignLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.assign(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.replaceLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.replace(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.openInWindow=function(i,o,s,_,$){return i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),(o||goog.global).open(goog.html.SafeUrl.unwrapTrustedURL(i),s?goog.string.Const.unwrap(s):"",_,$)},goog.dom.safe.parseFromStringHtml=function(i,o){return goog.dom.safe.parseFromString(i,o,"text/html")},goog.dom.safe.parseFromString=function(i,o,s){return i.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(o),s)},goog.dom.safe.createImageFromBlob=function(i){if(!/^image\/.*/g.test(i.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var o=goog.global.URL.createObjectURL(i);return(i=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(o)},goog.dom.safe.setImageSrc(i,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),o)),i},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(i,o){for(var s=i.split("%s"),_="",$=Array.prototype.slice.call(arguments,1);$.length&&1<s.length;)_+=s.shift()+$.shift();return _+s.join("%s")},goog.string.collapseWhitespace=function(i){return i.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(i){return i.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(i){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(i))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(i){return!/[^\t\n\r ]/.test(i)},goog.string.isAlpha=function(i){return!/[^a-zA-Z]/.test(i)},goog.string.isNumeric=function(i){return!/[^0-9]/.test(i)},goog.string.isAlphaNumeric=function(i){return!/[^a-zA-Z0-9]/.test(i)},goog.string.isSpace=function(i){return i==" "},goog.string.isUnicodeChar=function(i){return i.length==1&&" "<=i&&"~">=i||""<=i&&"">=i},goog.string.stripNewlines=function(i){return i.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(i){return i.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(i){return i.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(i){return i.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(i){return i.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(i){return i.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(i){return i.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(i,o,s){if(i==o)return 0;if(!i)return-1;if(!o)return 1;for(var _=i.toLowerCase().match(s),$=o.toLowerCase().match(s),et=Math.min(_.length,$.length),tt=0;tt<et;tt++){s=_[tt];var j=$[tt];if(s!=j)return i=parseInt(s,10),!isNaN(i)&&(o=parseInt(j,10),!isNaN(o)&&i-o)?i-o:s<j?-1:1}return _.length!=$.length?_.length-$.length:i<o?-1:1},goog.string.intAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\D+/g)},goog.string.floatAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(i){return encodeURIComponent(String(i))},goog.string.urlDecode=function(i){return decodeURIComponent(i.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(i,o){return i=goog.string.internal.htmlEscape(i,o),goog.string.DETECT_DOUBLE_ESCAPING&&(i=i.replace(goog.string.E_RE_,"&#101;")),i},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(i){return goog.string.contains(i,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(i):goog.string.unescapePureXmlEntities_(i):i},goog.string.unescapeEntitiesWithDocument=function(i,o){return goog.string.contains(i,"&")?goog.string.unescapeEntitiesUsingDom_(i,o):i},goog.string.unescapeEntitiesUsingDom_=function(i,o){var s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},_=o?o.createElement("div"):goog.global.document.createElement("div");return i.replace(goog.string.HTML_ENTITY_PATTERN_,function($,et){var tt=s[$];return tt||(et.charAt(0)=="#"&&(et=Number("0"+et.substr(1)),isNaN(et)||(tt=String.fromCharCode(et))),tt||(goog.dom.safe.setInnerHtml(_,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),$+" ")),tt=_.firstChild.nodeValue.slice(0,-1)),s[$]=tt)})},goog.string.unescapePureXmlEntities_=function(i){return i.replace(/&([^;]+);/g,function(o,s){switch(s){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return s.charAt(0)!="#"||(s=Number("0"+s.substr(1)),isNaN(s))?o:String.fromCharCode(s)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(i,o){return goog.string.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.preserveSpaces=function(i){return i.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(i,o){for(var s=o.length,_=0;_<s;_++){var $=s==1?o:o.charAt(_);if(i.charAt(0)==$&&i.charAt(i.length-1)==$)return i.substring(1,i.length-1)}return i},goog.string.truncate=function(i,o,s){return s&&(i=goog.string.unescapeEntities(i)),i.length>o&&(i=i.substring(0,o-3)+"..."),s&&(i=goog.string.htmlEscape(i)),i},goog.string.truncateMiddle=function(i,o,s,_){if(s&&(i=goog.string.unescapeEntities(i)),_&&i.length>o){_>o&&(_=o);var $=i.length-_;i=i.substring(0,o-_)+"..."+i.substring($)}else i.length>o&&(_=Math.floor(o/2),$=i.length-_,i=i.substring(0,_+o%2)+"..."+i.substring($));return s&&(i=goog.string.htmlEscape(i)),i},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(i){i=String(i);for(var o=['"'],s=0;s<i.length;s++){var _=i.charAt(s),$=_.charCodeAt(0);o[s+1]=goog.string.specialEscapeChars_[_]||(31<$&&127>$?_:goog.string.escapeChar(_))}return o.push('"'),o.join("")},goog.string.escapeString=function(i){for(var o=[],s=0;s<i.length;s++)o[s]=goog.string.escapeChar(i.charAt(s));return o.join("")},goog.string.escapeChar=function(i){if(i in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[i];if(i in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[i]=goog.string.specialEscapeChars_[i];var o=i.charCodeAt(0);if(31<o&&127>o)var s=i;else 256>o?(s="\\x",(16>o||256<o)&&(s+="0")):(s="\\u",4096>o&&(s+="0")),s+=o.toString(16).toUpperCase();return goog.string.jsEscapeCache_[i]=s},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(i,o){return i&&o?i.split(o).length-1:0},goog.string.removeAt=function(i,o,s){var _=i;return 0<=o&&o<i.length&&0<s&&(_=i.substr(0,o)+i.substr(o+s,i.length-o-s)),_},goog.string.remove=function(i,o){return i.replace(o,"")},goog.string.removeAll=function(i,o){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,"")},goog.string.replaceAll=function(i,o,s){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,s.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(i){return String(i).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(i,o){return i.repeat(o)}:function(i,o){return Array(o+1).join(i)},goog.string.padNumber=function(i,o,s){return(s=(i=goog.isDef(s)?i.toFixed(s):String(i)).indexOf("."))==-1&&(s=i.length),goog.string.repeat("0",Math.max(0,o-s))+i},goog.string.makeSafe=function(i){return i==null?"":String(i)},goog.string.buildString=function(i){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(i){for(var o=0,s=0;s<i.length;++s)o=31*o+i.charCodeAt(s)>>>0;return o},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(i){var o=Number(i);return o==0&&goog.string.isEmptyOrWhitespace(i)?NaN:o},goog.string.isLowerCamelCase=function(i){return/^[a-z]+([A-Z][a-z]*)*$/.test(i)},goog.string.isUpperCamelCase=function(i){return/^([A-Z][a-z]*)+$/.test(i)},goog.string.toCamelCase=function(i){return String(i).replace(/\-([a-z])/g,function(o,s){return s.toUpperCase()})},goog.string.toSelectorCase=function(i){return String(i).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(i,o){return o=goog.isString(o)?goog.string.regExpEscape(o):"\\s",i.replace(new RegExp("(^"+(o?"|["+o+"]+":"")+")([a-z])","g"),function(s,_,$){return _+$.toUpperCase()})},goog.string.capitalize=function(i){return String(i.charAt(0)).toUpperCase()+String(i.substr(1)).toLowerCase()},goog.string.parseInt=function(i){return isFinite(i)&&(i=String(i)),goog.isString(i)?/^\s*-?0x/i.test(i)?parseInt(i,16):parseInt(i,10):NaN},goog.string.splitLimit=function(i,o,s){i=i.split(o);for(var _=[];0<s&&i.length;)_.push(i.shift()),s--;return i.length&&_.push(i.join(o)),_},goog.string.lastComponent=function(i,o){if(!o)return i;typeof o=="string"&&(o=[o]);for(var s=-1,_=0;_<o.length;_++)if(o[_]!=""){var $=i.lastIndexOf(o[_]);$>s&&(s=$)}return s==-1?i:i.slice(s+1)},goog.string.editDistance=function(i,o){var s=[],_=[];if(i==o)return 0;if(!i.length||!o.length)return Math.max(i.length,o.length);for(var $=0;$<o.length+1;$++)s[$]=$;for($=0;$<i.length;$++){_[0]=$+1;for(var et=0;et<o.length;et++)_[et+1]=Math.min(_[et]+1,s[et+1]+1,s[et]+Number(i[$]!=o[et]));for(et=0;et<s.length;et++)s[et]=_[et]}return _[o.length]},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent(),o="";return goog.labs.userAgent.platform.isWindows()?o=(i=(o=/Windows (?:NT|Phone) ([0-9.]+)/).exec(i))?i[1]:"0.0":goog.labs.userAgent.platform.isIos()?o=(i=(o=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(i))&&i[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?o=(i=(o=/Mac OS X ([0-9_.]+)/).exec(i))?i[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?o=(i=(o=/(?:KaiOS)\/(\S+)/i).exec(i))&&i[1]:goog.labs.userAgent.platform.isAndroid()?o=(i=(o=/Android\s+([^\);]+)(\)|;)/).exec(i))&&i[1]:goog.labs.userAgent.platform.isChromeOS()&&(o=(i=(o=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(i))&&i[1]),o||""},goog.labs.userAgent.platform.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),i)},goog.reflect={},goog.reflect.object=function(i,o){return o},goog.reflect.objectProperty=function(i,o){return i},goog.reflect.sinkValue=function(i){return goog.reflect.sinkValue[" "](i),i},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(i,o){try{return goog.reflect.sinkValue(i[o]),!0}catch{}return!1},goog.reflect.cache=function(i,o,s,_){return _=_?_(o):o,Object.prototype.hasOwnProperty.call(i,_)?i[_]:i[_]=s(o)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent();if(i){i=goog.labs.userAgent.util.extractVersionTuples(i);var o,s=goog.labs.userAgent.engine.getEngineTuple_(i);if(s)return s[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(i,"Firefox"):s[1];if((i=i[0])&&(o=i[2])&&(o=/Trident\/([^\s;]+)/.exec(o)))return o[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(i){if(!goog.labs.userAgent.engine.isEdge())return i[1];for(var o=0;o<i.length;o++){var s=i[o];if(s[0]=="Edge")return s}},goog.labs.userAgent.engine.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),i)},goog.labs.userAgent.engine.getVersionForKey_=function(i,o){return(i=goog.array.find(i,function(s){return o==s[0]}))&&i[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var i=goog.userAgent.getNavigatorTyped();return i&&i.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var i=goog.userAgent.getNavigatorTyped();return!!i&&goog.string.contains(i.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var i="",o=goog.userAgent.getVersionRegexResult_();return o&&(i=o?o[1]:""),goog.userAgent.IE&&(o=goog.userAgent.getDocumentMode_())!=null&&o>parseFloat(i)?String(o):i},goog.userAgent.getVersionRegexResult_=function(){var i=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(i):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(i):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(i):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(i):void 0},goog.userAgent.getDocumentMode_=function(){var i=goog.global.document;return i?i.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(i,o){return goog.string.compareVersions(i,o)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(i){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,i,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,i)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(i){return Number(goog.userAgent.DOCUMENT_MODE)>=i},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(i){return goog.string.contains(goog.crypt.base64.paddingChars_,i)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(i,o){goog.asserts.assert(goog.isArrayLike(i),"encodeByteArray takes an array as a parameter"),o===void 0&&(o=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),o=goog.crypt.base64.byteToCharMaps_[o];for(var s=[],_=0;_<i.length;_+=3){var $=i[_],et=_+1<i.length,tt=et?i[_+1]:0,j=_+2<i.length,it=j?i[_+2]:0,st=$>>2;$=(3&$)<<4|tt>>4,tt=(15&tt)<<2|it>>6,it&=63,j||(it=64,et||(tt=64)),s.push(o[st],o[$],o[tt]||"",o[it]||"")}return s.join("")},goog.crypt.base64.encodeString=function(i,o){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!o?goog.global.btoa(i):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(i),o)},goog.crypt.base64.decodeString=function(i,o){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!o)return goog.global.atob(i);var s="";return goog.crypt.base64.decodeStringInternal_(i,function(_){s+=String.fromCharCode(_)}),s},goog.crypt.base64.decodeStringToByteArray=function(i,o){var s=[];return goog.crypt.base64.decodeStringInternal_(i,function(_){s.push(_)}),s},goog.crypt.base64.decodeStringToUint8Array=function(i){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var o=i.length,s=3*o/4;s%3?s=Math.floor(s):goog.crypt.base64.isPadding_(i[o-1])&&(s=goog.crypt.base64.isPadding_(i[o-2])?s-2:s-1);var _=new Uint8Array(s),$=0;return goog.crypt.base64.decodeStringInternal_(i,function(et){_[$++]=et}),_.subarray(0,$)},goog.crypt.base64.decodeStringInternal_=function(i,o){function s(it){for(;_<i.length;){var st=i.charAt(_++),ht=goog.crypt.base64.charToByteMap_[st];if(ht!=null)return ht;if(!goog.string.isEmptyOrWhitespace(st))throw Error("Unknown base64 encoding at char: "+st)}return it}goog.crypt.base64.init_();for(var _=0;;){var $=s(-1),et=s(0),tt=s(64),j=s(64);if(j===64&&$===-1)break;o($<<2|et>>4),tt!=64&&(o(et<<4&240|tt>>2),j!=64&&o(tt<<6&192|j))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var i=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),o=["+/=","+/","-_=","-_.","-_"],s=0;5>s;s++){var _=i.concat(o[s].split(""));goog.crypt.base64.byteToCharMaps_[s]=_;for(var $=0;$<_.length;$++){var et=_[$],tt=goog.crypt.base64.charToByteMap_[et];tt===void 0?goog.crypt.base64.charToByteMap_[et]=$:goog.asserts.assert(tt===$)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(i){var o=i>>>0;i=Math.floor((i-o)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=o,jspb.utils.split64High=i},jspb.utils.splitInt64=function(i){var o=0>i,s=(i=Math.abs(i))>>>0;i=Math.floor((i-s)/jspb.BinaryConstants.TWO_TO_32),i>>>=0,o&&(i=~i>>>0,4294967295<(s=1+(~s>>>0))&&(s=0,4294967295<++i&&(i=0))),jspb.utils.split64Low=s,jspb.utils.split64High=i},jspb.utils.splitZigzag64=function(i){var o=0>i;i=2*Math.abs(i),jspb.utils.splitUint64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;o&&(i==0?s==0?s=i=4294967295:(s--,i=4294967295):i--),jspb.utils.split64Low=i,jspb.utils.split64High=s},jspb.utils.splitFloat32=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)0<1/i?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(i))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(i>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|2139095040)>>>0;else if(i<jspb.BinaryConstants.FLOAT32_MIN)i=Math.round(i/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|i)>>>0;else{var s=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-s),i=8388607&Math.round(i*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|s+127<<23|i)>>>0}},jspb.utils.splitFloat64=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)jspb.utils.split64High=0<1/i?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(i))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(i>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(o<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(i<jspb.BinaryConstants.FLOAT64_MIN){var s=i/Math.pow(2,-1074);i=s/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(o<<31|i)>>>0,jspb.utils.split64Low=s>>>0}else{var _=0;if(2<=(s=i))for(;2<=s&&1023>_;)_++,s/=2;else for(;1>s&&-1022<_;)s*=2,_--;i=(s=i*Math.pow(2,-_))*jspb.BinaryConstants.TWO_TO_20&1048575,s=s*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(o<<31|_+1023<<20|i)>>>0,jspb.utils.split64Low=s}},jspb.utils.splitHash64=function(i){var o=i.charCodeAt(0),s=i.charCodeAt(1),_=i.charCodeAt(2),$=i.charCodeAt(3),et=i.charCodeAt(4),tt=i.charCodeAt(5),j=i.charCodeAt(6);i=i.charCodeAt(7),jspb.utils.split64Low=o+(s<<8)+(_<<16)+($<<24)>>>0,jspb.utils.split64High=et+(tt<<8)+(j<<16)+(i<<24)>>>0},jspb.utils.joinUint64=function(i,o){return o*jspb.BinaryConstants.TWO_TO_32+(i>>>0)},jspb.utils.joinInt64=function(i,o){var s=2147483648&o;return s&&(o=~o>>>0,(i=1+~i>>>0)==0&&(o=o+1>>>0)),i=jspb.utils.joinUint64(i,o),s?-i:i},jspb.utils.toZigzag64=function(i,o,s){var _=o>>31;return s(i<<1^_,(o<<1|i>>>31)^_)},jspb.utils.joinZigzag64=function(i,o){return jspb.utils.fromZigzag64(i,o,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(i,o,s){var _=-(1&i);return s((i>>>1|o<<31)^_,o>>>1^_)},jspb.utils.joinFloat32=function(i,o){o=2*(i>>31)+1;var s=i>>>23&255;return i&=8388607,s==255?i?NaN:1/0*o:s==0?o*Math.pow(2,-149)*i:o*Math.pow(2,s-150)*(i+Math.pow(2,23))},jspb.utils.joinFloat64=function(i,o){var s=2*(o>>31)+1,_=o>>>20&2047;return i=jspb.BinaryConstants.TWO_TO_32*(1048575&o)+i,_==2047?i?NaN:1/0*s:_==0?s*Math.pow(2,-1074)*i:s*Math.pow(2,_-1075)*(i+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(i,o){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,o>>>0&255,o>>>8&255,o>>>16&255,o>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(i,o){function s($,et){return $=$?String($):"",et?"0000000".slice($.length)+$:$}if(2097151>=o)return""+(jspb.BinaryConstants.TWO_TO_32*o+i);var _=(i>>>24|o<<8)>>>0&16777215;return i=(16777215&i)+6777216*_+6710656*(o=o>>16&65535),_+=8147497*o,o*=2,1e7<=i&&(_+=Math.floor(i/1e7),i%=1e7),1e7<=_&&(o+=Math.floor(_/1e7),_%=1e7),s(o,0)+s(_,o)+s(i,1)},jspb.utils.joinSignedDecimalString=function(i,o){var s=2147483648&o;return s&&(o=~o+((i=1+~i>>>0)==0?1:0)>>>0),i=jspb.utils.joinUnsignedDecimalString(i,o),s?"-"+i:i},jspb.utils.hash64ToDecimalString=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinSignedDecimalString(i,s):jspb.utils.joinUnsignedDecimalString(i,s)},jspb.utils.hash64ArrayToDecimalStrings=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]=jspb.utils.hash64ToDecimalString(i[_],o);return s},jspb.utils.decimalStringToHash64=function(i){function o(et,tt){for(var j=0;8>j&&(et!==1||0<tt);j++)tt=et*_[j]+tt,_[j]=255&tt,tt>>>=8}goog.asserts.assert(0<i.length);var s=!1;i[0]==="-"&&(s=!0,i=i.slice(1));for(var _=[0,0,0,0,0,0,0,0],$=0;$<i.length;$++)o(10,i.charCodeAt($)-jspb.utils.ZERO_CHAR_CODE_);return s&&(function(){for(var et=0;8>et;et++)_[et]=255&~_[et]}(),o(1,1)),goog.crypt.byteArrayToString(_)},jspb.utils.splitDecimalString=function(i){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i))},jspb.utils.toHexDigit_=function(i){return String.fromCharCode(10>i?jspb.utils.ZERO_CHAR_CODE_+i:jspb.utils.A_CHAR_CODE_-10+i)},jspb.utils.fromHexCharCode_=function(i){return i>=jspb.utils.A_CHAR_CODE_?i-jspb.utils.A_CHAR_CODE_+10:i-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(i){var o=Array(18);o[0]="0",o[1]="x";for(var s=0;8>s;s++){var _=i.charCodeAt(7-s);o[2*s+2]=jspb.utils.toHexDigit_(_>>4),o[2*s+3]=jspb.utils.toHexDigit_(15&_)}return o.join("")},jspb.utils.hexStringToHash64=function(i){i=i.toLowerCase(),goog.asserts.assert(i.length==18),goog.asserts.assert(i[0]=="0"),goog.asserts.assert(i[1]=="x");for(var o="",s=0;8>s;s++){var _=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+2)),$=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+3));o=String.fromCharCode(16*_+$)+o}return o},jspb.utils.hash64ToNumber=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinInt64(i,s):jspb.utils.joinUint64(i,s)},jspb.utils.numberToHash64=function(i){return jspb.utils.splitInt64(i),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(i,o,s){for(var _=0,$=o;$<s;$++)_+=i[$]>>7;return s-o-_},jspb.utils.countVarintFields=function(i,o,s,_){var $=0;if(128>(_=8*_+jspb.BinaryConstants.WireType.VARINT))for(;o<s&&i[o++]==_;)for($++;;){var et=i[o++];if(!(128&et))break}else for(;o<s;){for(et=_;128<et;){if(i[o]!=(127&et|128))return $;o++,et>>=7}if(i[o++]!=et)break;for($++;128&(et=i[o++]););}return $},jspb.utils.countFixedFields_=function(i,o,s,_,$){var et=0;if(128>_)for(;o<s&&i[o++]==_;)et++,o+=$;else for(;o<s;){for(var tt=_;128<tt;){if(i[o++]!=(127&tt|128))return et;tt>>=7}if(i[o++]!=tt)break;et++,o+=$}return et},jspb.utils.countFixed32Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(i,o,s,_){var $=0;for(_=8*_+jspb.BinaryConstants.WireType.DELIMITED;o<s;){for(var et=_;128<et;){if(i[o++]!=(127&et|128))return $;et>>=7}if(i[o++]!=et)break;$++;for(var tt=0,j=1;tt+=(127&(et=i[o++]))*j,j*=128,(128&et)!=0;);o+=tt}return $},jspb.utils.debugBytesToTextFormat=function(i){var o='"';if(i){i=jspb.utils.byteSourceToUint8Array(i);for(var s=0;s<i.length;s++)o+="\\x",16>i[s]&&(o+="0"),o+=i[s].toString(16)}return o+'"'},jspb.utils.debugScalarToTextFormat=function(i){return typeof i=="string"?goog.string.quote(i):i.toString()},jspb.utils.stringToByteArray=function(i){for(var o=new Uint8Array(i.length),s=0;s<i.length;s++){var _=i.charCodeAt(s);if(255<_)throw Error("Conversion error: string contains codepoint outside of byte range");o[s]=_}return o},jspb.utils.byteSourceToUint8Array=function(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer||Buffer!==void 0&&i.constructor===Buffer||i.constructor===Array?new Uint8Array(i):i.constructor===String?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(i,o,s){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,i&&this.setBlock(i,o,s)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(i,o,s){if(jspb.BinaryDecoder.instanceCache_.length){var _=jspb.BinaryDecoder.instanceCache_.pop();return i&&_.setBlock(i,o,s),_}return new jspb.BinaryDecoder(i,o,s)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(i,o,s){this.bytes_=jspb.utils.byteSourceToUint8Array(i),this.start_=o!==void 0?o:0,this.end_=s!==void 0?this.start_+s:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(i){this.end_=i},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(i){this.cursor_=i},jspb.BinaryDecoder.prototype.advance=function(i){this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(i){for(var o=128,s=0,_=0,$=0;4>$&&128<=o;$++)s|=(127&(o=this.bytes_[this.cursor_++]))<<7*$;if(128<=o&&(s|=(127&(o=this.bytes_[this.cursor_++]))<<28,_|=(127&o)>>4),128<=o)for($=0;5>$&&128<=o;$++)_|=(127&(o=this.bytes_[this.cursor_++]))<<7*$+3;if(128>o)return i(s>>>0,_>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(i){return this.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(i){var o=this.bytes_,s=this.cursor_;this.cursor_+=8;for(var _=0,$=0,et=s+7;et>=s;et--)_=_<<8|o[et],$=$<<8|o[et+4];return i(_,$)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(i){for(;128<i;)this.cursor_--,i>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var i=this.bytes_,o=i[this.cursor_+0],s=127&o;return 128>o?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+1]))<<7,128>o?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+2]))<<14,128>o?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+3]))<<21,128>o?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(15&(o=i[this.cursor_+4]))<<28,128>o?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),s>>>0):(this.cursor_+=5,128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),s)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var i=this.readUnsignedVarint32();return i>>>1^-(1&i)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i},jspb.BinaryDecoder.prototype.readUint16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8|s<<16|_<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUint64(i,o)},jspb.BinaryDecoder.prototype.readUint64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUnsignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readInt8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8|s<<16|_<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinInt64(i,o)},jspb.BinaryDecoder.prototype.readInt64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinSignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readFloat=function(){var i=this.readUint32();return jspb.utils.joinFloat32(i,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinFloat64(i,o)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(i){var o=this.bytes_,s=this.cursor_;i=s+i;for(var _=[],$="";s<i;){var et=o[s++];if(128>et)_.push(et);else{if(192>et)continue;if(224>et){var tt=o[s++];_.push((31&et)<<6|63&tt)}else if(240>et){tt=o[s++];var j=o[s++];_.push((15&et)<<12|(63&tt)<<6|63&j)}else 248>et&&(et=(7&et)<<18|(63&(tt=o[s++]))<<12|(63&(j=o[s++]))<<6|63&o[s++],et-=65536,_.push(55296+(et>>10&1023),56320+(1023&et)))}8192<=_.length&&($+=String.fromCharCode.apply(null,_),_.length=0)}return $+=goog.crypt.byteArrayToString(_),this.cursor_=s,$},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var i=this.readUnsignedVarint32();return this.readString(i)},jspb.BinaryDecoder.prototype.readBytes=function(i){if(0>i||this.cursor_+i>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var o=this.bytes_.subarray(this.cursor_,this.cursor_+i);return this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_),o},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var i=this.bytes_,o=this.cursor_,s=i[o+0],_=i[o+1],$=i[o+2],et=i[o+3],tt=i[o+4],j=i[o+5],it=i[o+6];return i=i[o+7],this.cursor_+=8,String.fromCharCode(s,_,$,et,tt,j,it,i)},jspb.BinaryReader=function(i,o,s){this.decoder_=jspb.BinaryDecoder.alloc(i,o,s),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(i,o,s){if(jspb.BinaryReader.instanceCache_.length){var _=jspb.BinaryReader.instanceCache_.pop();return i&&_.decoder_.setBlock(i,o,s),_}return new jspb.BinaryReader(i,o,s)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(i,o,s){this.decoder_.setBlock(i,o,s),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(i){this.decoder_.advance(i)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var i=this.decoder_.readUnsignedVarint32(),o=i>>>3;return(i&=7)!=jspb.BinaryConstants.WireType.VARINT&&i!=jspb.BinaryConstants.WireType.FIXED32&&i!=jspb.BinaryConstants.WireType.FIXED64&&i!=jspb.BinaryConstants.WireType.DELIMITED&&i!=jspb.BinaryConstants.WireType.START_GROUP&&i!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",i,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=o,this.nextWireType_=i,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var i=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==i;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var i=this.decoder_.readUnsignedVarint32();this.decoder_.advance(i)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var i=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=i&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(i,o){this.readCallbacks_===null&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[i]),this.readCallbacks_[i]=o},jspb.BinaryReader.prototype.runReadCallback=function(i){return goog.asserts.assert(this.readCallbacks_!==null),i=this.readCallbacks_[i],goog.asserts.assert(i),i(this)},jspb.BinaryReader.prototype.readAny=function(i){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(i);var o=jspb.BinaryConstants.FieldType;switch(i){case o.DOUBLE:return this.readDouble();case o.FLOAT:return this.readFloat();case o.INT64:return this.readInt64();case o.UINT64:return this.readUint64();case o.INT32:return this.readInt32();case o.FIXED64:return this.readFixed64();case o.FIXED32:return this.readFixed32();case o.BOOL:return this.readBool();case o.STRING:return this.readString();case o.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case o.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case o.BYTES:return this.readBytes();case o.UINT32:return this.readUint32();case o.ENUM:return this.readEnum();case o.SFIXED32:return this.readSfixed32();case o.SFIXED64:return this.readSfixed64();case o.SINT32:return this.readSint32();case o.SINT64:return this.readSint64();case o.FHASH64:return this.readFixedHash64();case o.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(i,o){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var s=this.decoder_.getEnd(),_=this.decoder_.readUnsignedVarint32();_=this.decoder_.getCursor()+_,this.decoder_.setEnd(_),o(i,this),this.decoder_.setCursor(_),this.decoder_.setEnd(s)},jspb.BinaryReader.prototype.readGroup=function(i,o,s){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==i),s(o,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32(),o=this.decoder_.getCursor(),s=o+i;return i=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),o,i),this.decoder_.setCursor(s),i},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(i)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(i)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(i)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(i)},jspb.BinaryReader.prototype.readPackedField_=function(i){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var o=this.decoder_.readUnsignedVarint32();o=this.decoder_.getCursor()+o;for(var s=[];this.decoder_.getCursor()<o;)s.push(i.call(this.decoder_));return s},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(i,o){this.arr_=i,this.valueCtor_=o,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},jspb.Map.prototype.loadFromArray_=function(){for(var i=0;i<this.arr_.length;i++){var o=this.arr_[i],s=o[0];this.map_[s.toString()]=new jspb.Map.Entry_(s,o[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var i,o=this.map_;for(i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var s=o[i].valueWrapper;s&&s.toArray()}}}else{for(this.arr_.length=0,(o=this.stringKeys_()).sort(),i=0;i<o.length;i++){var _=this.map_[o[i]];(s=_.valueWrapper)&&s.toArray(),this.arr_.push([_.key,_.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(i,o){for(var s=this.toArray(),_=[],$=0;$<s.length;$++){var et=this.map_[s[$][0].toString()];this.wrapEntry_(et);var tt=et.valueWrapper;tt?(goog.asserts.assert(o),_.push([et.key,o(i,tt)])):_.push([et.key,et.value])}return _},jspb.Map.fromObject=function(i,o,s){o=new jspb.Map([],o);for(var _=0;_<i.length;_++){var $=i[_][0],et=s(i[_][1]);o.set($,et)}return o},jspb.Map.ArrayIteratorIterable_=function(i){this.idx_=0,this.arr_=i},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(i){i=i.toString();var o=this.map_.hasOwnProperty(i);return delete this.map_[i],this.arrClean=!1,o},jspb.Map.prototype.getEntryList=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,_.value])}return i},jspb.Map.prototype.entries=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,this.wrapEntry_(_)])}return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.keys=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.map_[o[s]].key);return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.values=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.wrapEntry_(this.map_[o[s]]));return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.forEach=function(i,o){var s=this.stringKeys_();s.sort();for(var _=0;_<s.length;_++){var $=this.map_[s[_]];i.call(o,this.wrapEntry_($),$.key,this)}},jspb.Map.prototype.set=function(i,o){var s=new jspb.Map.Entry_(i);return this.valueCtor_?(s.valueWrapper=o,s.value=o.toArray()):s.value=o,this.map_[i.toString()]=s,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(i){return this.valueCtor_?(i.valueWrapper||(i.valueWrapper=new this.valueCtor_(i.value)),i.valueWrapper):i.value},jspb.Map.prototype.get=function(i){if(i=this.map_[i.toString()])return this.wrapEntry_(i)},jspb.Map.prototype.has=function(i){return i.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(i,o,s,_,$){var et=this.stringKeys_();et.sort();for(var tt=0;tt<et.length;tt++){var j=this.map_[et[tt]];o.beginSubMessage(i),s.call(o,1,j.key),this.valueCtor_?_.call(o,2,this.wrapEntry_(j),$):_.call(o,2,j.value),o.endSubMessage()}},jspb.Map.deserializeBinary=function(i,o,s,_,$,et,tt){for(;o.nextField()&&!o.isEndGroup();){var j=o.getFieldNumber();j==1?et=s.call(o):j==2&&(i.valueCtor_?(goog.asserts.assert($),tt||(tt=new i.valueCtor_),_.call(o,tt,$)):tt=_.call(o))}goog.asserts.assert(et!=null),goog.asserts.assert(tt!=null),i.set(et,tt)},jspb.Map.prototype.stringKeys_=function(){var i,o=this.map_,s=[];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},jspb.Map.Entry_=function(i,o){this.key=i,this.value=o,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(i,o,s,_,$){this.fieldIndex=i,this.fieldName=o,this.ctor=s,this.toObjectFn=_,this.isRepeated=$},jspb.ExtensionFieldBinaryInfo=function(i,o,s,_,$,et){this.fieldInfo=i,this.binaryReaderFn=o,this.binaryWriterFn=s,this.binaryMessageSerializeFn=_,this.binaryMessageDeserializeFn=$,this.isPacked=et},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(i,o){return o+i.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(i,o){return o-i.arrayIndexOffset_},jspb.Message.initialize=function(i,o,s,_,$,et){if(i.wrappers_=null,o||(o=s?[s]:[]),i.messageId_=s?String(s):void 0,i.arrayIndexOffset_=s===0?-1:0,i.array=o,jspb.Message.initPivotAndExtensionObject_(i,_),i.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(i.repeatedFields=$),$)for(o=0;o<$.length;o++)(s=$[o])<i.pivot_?(s=jspb.Message.getIndex_(i,s),i.array[s]=i.array[s]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[s]=i.extensionObject_[s]||jspb.Message.EMPTY_LIST_SENTINEL_);if(et&&et.length)for(o=0;o<et.length;o++)jspb.Message.computeOneofCase(i,et[o])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(i){return jspb.Message.ASSUME_LOCAL_ARRAYS?i instanceof Array:Array.isArray(i)},jspb.Message.isExtensionObject_=function(i){return!(i===null||typeof i!="object"||jspb.Message.isArray_(i)||jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(i,o){var s=i.array.length,_=-1;if(s&&(_=s-1,s=i.array[_],jspb.Message.isExtensionObject_(s)))return i.pivot_=jspb.Message.getFieldNumber_(i,_),void(i.extensionObject_=s);-1<o?(i.pivot_=Math.max(o,jspb.Message.getFieldNumber_(i,_+1)),i.extensionObject_=null):i.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(i){var o=jspb.Message.getIndex_(i,i.pivot_);i.array[o]||(i.extensionObject_=i.array[o]={})},jspb.Message.toObjectList=function(i,o,s){for(var _=[],$=0;$<i.length;$++)_[$]=o.call(i[$],s,i[$]);return _},jspb.Message.toObjectExtension=function(i,o,s,_,$){for(var et in s){var tt=s[et],j=_.call(i,tt);if(j!=null){for(var it in tt.fieldName)if(tt.fieldName.hasOwnProperty(it))break;o[it]=tt.toObjectFn?tt.isRepeated?jspb.Message.toObjectList(j,tt.toObjectFn,$):tt.toObjectFn($,j):j}}},jspb.Message.serializeBinaryExtensions=function(i,o,s,_){for(var $ in s){var et=s[$],tt=et.fieldInfo;if(!et.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var j=_.call(i,tt);if(j!=null)if(tt.isMessageType()){if(!et.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");et.binaryWriterFn.call(o,tt.fieldIndex,j,et.binaryMessageSerializeFn)}else et.binaryWriterFn.call(o,tt.fieldIndex,j)}},jspb.Message.readBinaryExtension=function(i,o,s,_,$){var et=s[o.getFieldNumber()];if(et){if(s=et.fieldInfo,!et.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(s.isMessageType()){var tt=new s.ctor;et.binaryReaderFn.call(o,tt,et.binaryMessageDeserializeFn)}else tt=et.binaryReaderFn.call(o);s.isRepeated&&!et.isPacked?(o=_.call(i,s))?o.push(tt):$.call(i,s,[tt]):$.call(i,s,tt)}else o.skipField()},jspb.Message.getField=function(i,o){if(o<i.pivot_){o=jspb.Message.getIndex_(i,o);var s=i.array[o];return s===jspb.Message.EMPTY_LIST_SENTINEL_?i.array[o]=[]:s}if(i.extensionObject_)return(s=i.extensionObject_[o])===jspb.Message.EMPTY_LIST_SENTINEL_?i.extensionObject_[o]=[]:s},jspb.Message.getRepeatedField=function(i,o){return jspb.Message.getField(i,o)},jspb.Message.getOptionalFloatingPointField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:+i},jspb.Message.getBooleanField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:!!i},jspb.Message.getRepeatedFloatingPointField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=+s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.getRepeatedBooleanField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=!!s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.bytesAsB64=function(i){return i==null||typeof i=="string"?i:jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array?goog.crypt.base64.encodeByteArray(i):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(i)),null)},jspb.Message.bytesAsU8=function(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(i)),null)},jspb.Message.bytesListAsB64=function(i){return jspb.Message.assertConsistentTypes_(i),i.length&&typeof i[0]!="string"?goog.array.map(i,jspb.Message.bytesAsB64):i},jspb.Message.bytesListAsU8=function(i){return jspb.Message.assertConsistentTypes_(i),!i.length||i[0]instanceof Uint8Array?i:goog.array.map(i,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(i){if(goog.DEBUG&&i&&1<i.length){var o=goog.typeOf(i[0]);goog.array.forEach(i,function(s){goog.typeOf(s)!=o&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(s)+" expected "+o)})}},jspb.Message.getFieldWithDefault=function(i,o,s){return(i=jspb.Message.getField(i,o))==null?s:i},jspb.Message.getBooleanFieldWithDefault=function(i,o,s){return(i=jspb.Message.getBooleanField(i,o))==null?s:i},jspb.Message.getFloatingPointFieldWithDefault=function(i,o,s){return(i=jspb.Message.getOptionalFloatingPointField(i,o))==null?s:i},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),o in i.wrappers_)return i.wrappers_[o];var $=jspb.Message.getField(i,o);if(!$){if(s)return;$=[],jspb.Message.setField(i,o,$)}return i.wrappers_[o]=new jspb.Map($,_)},jspb.Message.setField=function(i,o,s){return goog.asserts.assertInstanceof(i,jspb.Message),o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=s:(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[o]=s),i},jspb.Message.setProto3IntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3FloatField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3BooleanField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,!1)},jspb.Message.setProto3StringField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3BytesField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3EnumField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3StringIntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"0")},jspb.Message.setFieldIgnoringDefault_=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),s!==_?jspb.Message.setField(i,o,s):o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(i),delete i.extensionObject_[o]),i},jspb.Message.addToRepeatedField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),o=jspb.Message.getRepeatedField(i,o),_!=null?o.splice(_,0,s):o.push(s),i},jspb.Message.setOneofField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),(s=jspb.Message.computeOneofCase(i,s))&&s!==o&&_!==void 0&&(i.wrappers_&&s in i.wrappers_&&(i.wrappers_[s]=void 0),jspb.Message.setField(i,s,void 0)),jspb.Message.setField(i,o,_)},jspb.Message.computeOneofCase=function(i,o){for(var s,_,$=0;$<o.length;$++){var et=o[$],tt=jspb.Message.getField(i,et);tt!=null&&(s=et,_=tt,jspb.Message.setField(i,et,void 0))}return s?(jspb.Message.setField(i,s,_),s):0},jspb.Message.getWrapperField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){var $=jspb.Message.getField(i,s);(_||$)&&(i.wrappers_[s]=new o($))}return i.wrappers_[s]},jspb.Message.getRepeatedWrapperField=function(i,o,s){return jspb.Message.wrapRepeatedField_(i,o,s),(o=i.wrappers_[s])==jspb.Message.EMPTY_LIST_SENTINEL_&&(o=i.wrappers_[s]=[]),o},jspb.Message.wrapRepeatedField_=function(i,o,s){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){for(var _=jspb.Message.getRepeatedField(i,s),$=[],et=0;et<_.length;et++)$[et]=new o(_[et]);i.wrappers_[s]=$}},jspb.Message.setWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var _=s&&s.toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.setOneofWrapperField=function(i,o,s,_){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var $=_&&_.toArray();return i.wrappers_[o]=_,jspb.Message.setOneofField(i,o,s,$)},jspb.Message.setRepeatedWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={}),s=s||[];for(var _=[],$=0;$<s.length;$++)_[$]=s[$].toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.addToRepeatedWrapperField=function(i,o,s,_,$){jspb.Message.wrapRepeatedField_(i,_,o);var et=i.wrappers_[o];return et||(et=i.wrappers_[o]=[]),s=s||new _,i=jspb.Message.getRepeatedField(i,o),$!=null?(et.splice($,0,s),i.splice($,0,s.toArray())):(et.push(s),i.push(s.toArray())),s},jspb.Message.toMap=function(i,o,s,_){for(var $={},et=0;et<i.length;et++)$[o.call(i[et])]=s?s.call(i[et],_,i[et]):i[et];return $},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var i in this.wrappers_){var o=this.wrappers_[i];if(Array.isArray(o))for(var s=0;s<o.length;s++)o[s]&&o[s].toArray();else o&&o.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(i){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var o=i.fieldIndex;if(i.isRepeated){if(i.isMessageType())return this.wrappers_[o]||(this.wrappers_[o]=goog.array.map(this.extensionObject_[o]||[],function(s){return new i.ctor(s)})),this.wrappers_[o]}else if(i.isMessageType())return!this.wrappers_[o]&&this.extensionObject_[o]&&(this.wrappers_[o]=new i.ctor(this.extensionObject_[o])),this.wrappers_[o];return this.extensionObject_[o]}},jspb.Message.prototype.setExtension=function(i,o){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var s=i.fieldIndex;return i.isRepeated?(o=o||[],i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=goog.array.map(o,function(_){return _.toArray()})):this.extensionObject_[s]=o):i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=o&&o.toArray()):this.extensionObject_[s]=o,this},jspb.Message.difference=function(i,o){if(!(i instanceof o.constructor))throw Error("Messages have different types.");var s=i.toArray();o=o.toArray();var _=[],$=0,et=s.length>o.length?s.length:o.length;for(i.getJsPbMessageId()&&(_[0]=i.getJsPbMessageId(),$=1);$<et;$++)jspb.Message.compareFields(s[$],o[$])||(_[$]=o[$]);return new i.constructor(_)},jspb.Message.equals=function(i,o){return i==o||!(!i||!o)&&i instanceof o.constructor&&jspb.Message.compareFields(i.toArray(),o.toArray())},jspb.Message.compareExtensions=function(i,o){i=i||{},o=o||{};var s,_={};for(s in i)_[s]=0;for(s in o)_[s]=0;for(s in _)if(!jspb.Message.compareFields(i[s],o[s]))return!1;return!0},jspb.Message.compareFields=function(i,o){if(i==o)return!0;if(!goog.isObject(i)||!goog.isObject(o))return!!(typeof i=="number"&&isNaN(i)||typeof o=="number"&&isNaN(o))&&String(i)==String(o);if(i.constructor!=o.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i.constructor===Uint8Array){if(i.length!=o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!=o[s])return!1;return!0}if(i.constructor===Array){var _=void 0,$=void 0,et=Math.max(i.length,o.length);for(s=0;s<et;s++){var tt=i[s],j=o[s];if(tt&&tt.constructor==Object&&(goog.asserts.assert(_===void 0),goog.asserts.assert(s===i.length-1),_=tt,tt=void 0),j&&j.constructor==Object&&(goog.asserts.assert($===void 0),goog.asserts.assert(s===o.length-1),$=j,j=void 0),!jspb.Message.compareFields(tt,j))return!1}return!_&&!$||(_=_||{},$=$||{},jspb.Message.compareExtensions(_,$))}if(i.constructor===Object)return jspb.Message.compareExtensions(i,o);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(i){return jspb.Message.cloneMessage(i)},jspb.Message.cloneMessage=function(i){return new i.constructor(jspb.Message.clone_(i.toArray()))},jspb.Message.copyInto=function(i,o){goog.asserts.assertInstanceof(i,jspb.Message),goog.asserts.assertInstanceof(o,jspb.Message),goog.asserts.assert(i.constructor==o.constructor,"Copy source and target message should have the same type."),i=jspb.Message.clone(i);for(var s=o.toArray(),_=i.toArray(),$=s.length=0;$<_.length;$++)s[$]=_[$];o.wrappers_=i.wrappers_,o.extensionObject_=i.extensionObject_},jspb.Message.clone_=function(i){if(Array.isArray(i)){for(var o=Array(i.length),s=0;s<i.length;s++){var _=i[s];_!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_)}return o}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)return new Uint8Array(i);for(s in o={},i)(_=i[s])!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_);return o},jspb.Message.registerMessageType=function(i,o){o.messageId=i},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(i,o){this.lo=i,this.hi=o},jspb.arith.UInt64.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(i){return new jspb.arith.UInt64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(i){return new jspb.arith.UInt64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(i,o){var s=65535&i,_=65535&o,$=o>>>16;for(o=s*_+65536*(s*$&65535)+65536*((i>>>=16)*_&65535),s=i*$+(s*$>>>16)+(i*_>>>16);4294967296<=o;)o-=4294967296,s+=1;return new jspb.arith.UInt64(o>>>0,s>>>0)},jspb.arith.UInt64.prototype.mul=function(i){var o=jspb.arith.UInt64.mul32x32(this.lo,i);return(i=jspb.arith.UInt64.mul32x32(this.hi,i)).hi=i.lo,i.lo=0,o.add(i)},jspb.arith.UInt64.prototype.div=function(i){if(i==0)return[];var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(this.lo,this.hi);i=new jspb.arith.UInt64(i,0);for(var _=new jspb.arith.UInt64(1,0);!i.msb();)i=i.leftShift(),_=_.leftShift();for(;!_.zero();)0>=i.cmp(s)&&(o=o.add(_),s=s.sub(i)),i=i.rightShift(),_=_.rightShift();return[o,s]},jspb.arith.UInt64.prototype.toString=function(){for(var i="",o=this;!o.zero();){var s=(o=o.div(10))[0];i=o[1].lo+i,o=s}return i==""&&(i="0"),i},jspb.arith.UInt64.fromString=function(i){for(var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(0,0),_=0;_<i.length;_++){if("0">i[_]||"9"<i[_])return null;var $=parseInt(i[_],10);s.lo=$,o=o.mul(10).add(s)}return o},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(i,o){this.lo=i,this.hi=o},jspb.arith.Int64.prototype.add=function(i){return new jspb.arith.Int64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(i){return new jspb.arith.Int64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var i=(2147483648&this.hi)!=0,o=new jspb.arith.UInt64(this.lo,this.hi);return i&&(o=new jspb.arith.UInt64(0,0).sub(o)),(i?"-":"")+o.toString()},jspb.arith.Int64.fromString=function(i){var o=0<i.length&&i[0]=="-";return o&&(i=i.substring(1)),(i=jspb.arith.UInt64.fromString(i))===null?null:(o&&(i=new jspb.arith.UInt64(0,0).sub(i)),new jspb.arith.Int64(i.lo,i.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var i=this.buffer_;return this.buffer_=[],i},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(i,o){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32);0<o||127<i;)this.buffer_.push(127&i|128),i=(i>>>7|o<<25)>>>0,o>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(i,o){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(i),this.writeUint32(o)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(i){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32);127<i;)this.buffer_.push(127&i|128),i>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(i){if(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),0<=i)this.writeUnsignedVarint32(i);else{for(var o=0;9>o;o++)this.buffer_.push(127&i|128),i>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((i<<1^i>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(i){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(i))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(i){var o=this;jspb.utils.splitHash64(i),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(s,_){o.writeSplitVarint64(s>>>0,_>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&256>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&65536>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-128<=i&&128>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-32768<=i&&32768>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(+i>=-jspb.BinaryConstants.TWO_TO_63&&+i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT32_MAX&&i<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(i),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT64_MAX&&i<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(i){goog.asserts.assert(typeof i=="boolean"||typeof i=="number"),this.buffer_.push(i?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(i)},jspb.BinaryEncoder.prototype.writeBytes=function(i){this.buffer_.push.apply(this.buffer_,i)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(i){jspb.utils.splitHash64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(i){jspb.utils.splitHash64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(i){for(var o=this.buffer_.length,s=0;s<i.length;s++){var _=i.charCodeAt(s);if(128>_)this.buffer_.push(_);else if(2048>_)this.buffer_.push(_>>6|192),this.buffer_.push(63&_|128);else if(65536>_)if(55296<=_&&56319>=_&&s+1<i.length){var $=i.charCodeAt(s+1);56320<=$&&57343>=$&&(_=1024*(_-55296)+$-56320+65536,this.buffer_.push(_>>18|240),this.buffer_.push(_>>12&63|128),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128),s++)}else this.buffer_.push(_>>12|224),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128)}return this.buffer_.length-o},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(i){var o=this.encoder_.end();this.blocks_.push(o),this.blocks_.push(i),this.totalLength_+=o.length+i.length},jspb.BinaryWriter.prototype.beginDelimited_=function(i){return this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),i=this.encoder_.end(),this.blocks_.push(i),this.totalLength_+=i.length,i.push(this.totalLength_),i},jspb.BinaryWriter.prototype.endDelimited_=function(i){var o=i.pop();for(o=this.totalLength_+this.encoder_.length()-o,goog.asserts.assert(0<=o);127<o;)i.push(127&o|128),o>>>=7,this.totalLength_++;i.push(o),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(i,o,s){this.appendUint8Array_(i.subarray(o,s))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(i,o,s){i!=null&&o!=null&&s!=null&&this.writeSerializedMessage(i,o,s)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(this.bookmarks_.length==0);for(var i=new Uint8Array(this.totalLength_+this.encoder_.length()),o=this.blocks_,s=o.length,_=0,$=0;$<s;$++){var et=o[$];i.set(et,_),_+=et.length}return o=this.encoder_.end(),i.set(o,_),_+=o.length,goog.asserts.assert(_==i.length),this.blocks_=[i],i},jspb.BinaryWriter.prototype.getResultBase64String=function(i){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),i)},jspb.BinaryWriter.prototype.beginSubMessage=function(i){this.bookmarks_.push(this.beginDelimited_(i))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(i,o){goog.asserts.assert(1<=i&&i==Math.floor(i)),this.encoder_.writeUnsignedVarint32(8*i+o)},jspb.BinaryWriter.prototype.writeAny=function(i,o,s){var _=jspb.BinaryConstants.FieldType;switch(i){case _.DOUBLE:this.writeDouble(o,s);break;case _.FLOAT:this.writeFloat(o,s);break;case _.INT64:this.writeInt64(o,s);break;case _.UINT64:this.writeUint64(o,s);break;case _.INT32:this.writeInt32(o,s);break;case _.FIXED64:this.writeFixed64(o,s);break;case _.FIXED32:this.writeFixed32(o,s);break;case _.BOOL:this.writeBool(o,s);break;case _.STRING:this.writeString(o,s);break;case _.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case _.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case _.BYTES:this.writeBytes(o,s);break;case _.UINT32:this.writeUint32(o,s);break;case _.ENUM:this.writeEnum(o,s);break;case _.SFIXED32:this.writeSfixed32(o,s);break;case _.SFIXED64:this.writeSfixed64(o,s);break;case _.SINT32:this.writeSint32(o,s);break;case _.SINT64:this.writeSint64(o,s);break;case _.FHASH64:this.writeFixedHash64(o,s);break;case _.VHASH64:this.writeVarintHash64(o,s);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(o))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(o))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(o))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(o))},jspb.BinaryWriter.prototype.writeInt32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeInt64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeUint32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeUint64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSint32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(i,o))},jspb.BinaryWriter.prototype.writeSint64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(i,o))},jspb.BinaryWriter.prototype.writeSintHash64=function(i,o){o!=null&&this.writeZigzagVarintHash64_(i,o)},jspb.BinaryWriter.prototype.writeSint64String=function(i,o){o!=null&&this.writeZigzagVarint64String_(i,o)},jspb.BinaryWriter.prototype.writeFixed32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(o))},jspb.BinaryWriter.prototype.writeFixed64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(o))},jspb.BinaryWriter.prototype.writeFixed64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(o))},jspb.BinaryWriter.prototype.writeSfixed64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(o))},jspb.BinaryWriter.prototype.writeSfixed64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeFloat=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(o))},jspb.BinaryWriter.prototype.writeDouble=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(o))},jspb.BinaryWriter.prototype.writeBool=function(i,o){o!=null&&(goog.asserts.assert(typeof o=="boolean"||typeof o=="number"),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(o))},jspb.BinaryWriter.prototype.writeEnum=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeString=function(i,o){o!=null&&(i=this.beginDelimited_(i),this.encoder_.writeString(o),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeBytes=function(i,o){o!=null&&(o=jspb.utils.byteSourceToUint8Array(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),this.appendUint8Array_(o))},jspb.BinaryWriter.prototype.writeMessage=function(i,o,s){o!=null&&(i=this.beginDelimited_(i),s(o,this),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeMessageSet=function(i,o,s){o!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(i),i=this.beginDelimited_(3),s(o,this),this.endDelimited_(i),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(i,o,s){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o,this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(o))},jspb.BinaryWriter.prototype.writeVarintHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(o))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o,s)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o,s)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT);var _=this.encoder_;jspb.utils.toZigzag64(o,s,function($,et){_.writeSplitVarint64($>>>0,et>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitFixed64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitZigzagVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64String_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarintHash64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFloat(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeDouble(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBool(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeEnum(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedString=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeString(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBytes(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++){var $=this.beginDelimited_(i);s(o[_],this),this.endDelimited_($)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++)this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o[_],this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixedHash64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeVarintHash64(i,o[s])},jspb.BinaryWriter.prototype.writePackedInt32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitFixed64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitVarint64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=this.encoder_,et=0;et<o.length;et++)jspb.utils.toZigzag64(s(o[et]),_(o[et]),function(tt,j){$.writeSplitVarint64(tt>>>0,j>>>0)});this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.Int64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.UInt64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(o[s]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeUint32(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeUint64(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++){var s=jspb.arith.UInt64.fromString(o[i]);this.encoder_.writeSplitFixed64(s.lo,s.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeInt32(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64String(o[i])},jspb.BinaryWriter.prototype.writePackedFloat=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeFloat(o[i])},jspb.BinaryWriter.prototype.writePackedDouble=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeDouble(o[i])},jspb.BinaryWriter.prototype.writePackedBool=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),i=0;i<o.length;i++)this.encoder_.writeBool(o[i])},jspb.BinaryWriter.prototype.writePackedEnum=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeEnum(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeFixedHash64(o[i])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeVarintHash64(o[s]);this.endDelimited_(i)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(this,__webpack_require__(6),__webpack_require__(5).Buffer)},function(i,o,s){const{AbortController:_,AbortSignal:$}=typeof self<"u"?self:typeof window<"u"?window:void 0;i.exports=_,i.exports.AbortSignal=$,i.exports.default=_},function(i,o){var s=function(_){function $(){this.fetch=!1,this.DOMException=_.DOMException}return $.prototype=_,new $}(typeof self<"u"?self:this);(function(_){(function($){var et="URLSearchParams"in _,tt="Symbol"in _&&"iterator"in Symbol,j="FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch{return!1}}(),it="FormData"in _,st="ArrayBuffer"in _;if(st)var ht=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],vt=ArrayBuffer.isView||function(Nt){return Nt&&ht.indexOf(Object.prototype.toString.call(Nt))>-1};function ft(Nt){if(typeof Nt!="string"&&(Nt=String(Nt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Nt))throw new TypeError("Invalid character in header field name");return Nt.toLowerCase()}function pt(Nt){return typeof Nt!="string"&&(Nt=String(Nt)),Nt}function ct(Nt){var Ct={next:function(){var Vt=Nt.shift();return{done:Vt===void 0,value:Vt}}};return tt&&(Ct[Symbol.iterator]=function(){return Ct}),Ct}function yt(Nt){this.map={},Nt instanceof yt?Nt.forEach(function(Ct,Vt){this.append(Vt,Ct)},this):Array.isArray(Nt)?Nt.forEach(function(Ct){this.append(Ct[0],Ct[1])},this):Nt&&Object.getOwnPropertyNames(Nt).forEach(function(Ct){this.append(Ct,Nt[Ct])},this)}function Et(Nt){if(Nt.bodyUsed)return Promise.reject(new TypeError("Already read"));Nt.bodyUsed=!0}function Ot(Nt){return new Promise(function(Ct,Vt){Nt.onload=function(){Ct(Nt.result)},Nt.onerror=function(){Vt(Nt.error)}})}function Lt(Nt){var Ct=new FileReader,Vt=Ot(Ct);return Ct.readAsArrayBuffer(Nt),Vt}function Tt(Nt){if(Nt.slice)return Nt.slice(0);var Ct=new Uint8Array(Nt.byteLength);return Ct.set(new Uint8Array(Nt)),Ct.buffer}function It(){return this.bodyUsed=!1,this._initBody=function(Nt){var Ct;this._bodyInit=Nt,Nt?typeof Nt=="string"?this._bodyText=Nt:j&&Blob.prototype.isPrototypeOf(Nt)?this._bodyBlob=Nt:it&&FormData.prototype.isPrototypeOf(Nt)?this._bodyFormData=Nt:et&&URLSearchParams.prototype.isPrototypeOf(Nt)?this._bodyText=Nt.toString():st&&j&&(Ct=Nt)&&DataView.prototype.isPrototypeOf(Ct)?(this._bodyArrayBuffer=Tt(Nt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):st&&(ArrayBuffer.prototype.isPrototypeOf(Nt)||vt(Nt))?this._bodyArrayBuffer=Tt(Nt):this._bodyText=Nt=Object.prototype.toString.call(Nt):this._bodyText="",this.headers.get("content-type")||(typeof Nt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):et&&URLSearchParams.prototype.isPrototypeOf(Nt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},j&&(this.blob=function(){var Nt=Et(this);if(Nt)return Nt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Et(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Lt)}),this.text=function(){var Nt,Ct,Vt,Kt=Et(this);if(Kt)return Kt;if(this._bodyBlob)return Nt=this._bodyBlob,Ct=new FileReader,Vt=Ot(Ct),Ct.readAsText(Nt),Vt;if(this._bodyArrayBuffer)return Promise.resolve(function(Gt){for(var Ut=new Uint8Array(Gt),Ht=new Array(Ut.length),qt=0;qt<Ut.length;qt++)Ht[qt]=String.fromCharCode(Ut[qt]);return Ht.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},it&&(this.formData=function(){return this.text().then(nn)}),this.json=function(){return this.text().then(JSON.parse)},this}yt.prototype.append=function(Nt,Ct){Nt=ft(Nt),Ct=pt(Ct);var Vt=this.map[Nt];this.map[Nt]=Vt?Vt+", "+Ct:Ct},yt.prototype.delete=function(Nt){delete this.map[ft(Nt)]},yt.prototype.get=function(Nt){return Nt=ft(Nt),this.has(Nt)?this.map[Nt]:null},yt.prototype.has=function(Nt){return this.map.hasOwnProperty(ft(Nt))},yt.prototype.set=function(Nt,Ct){this.map[ft(Nt)]=pt(Ct)},yt.prototype.forEach=function(Nt,Ct){for(var Vt in this.map)this.map.hasOwnProperty(Vt)&&Nt.call(Ct,this.map[Vt],Vt,this)},yt.prototype.keys=function(){var Nt=[];return this.forEach(function(Ct,Vt){Nt.push(Vt)}),ct(Nt)},yt.prototype.values=function(){var Nt=[];return this.forEach(function(Ct){Nt.push(Ct)}),ct(Nt)},yt.prototype.entries=function(){var Nt=[];return this.forEach(function(Ct,Vt){Nt.push([Vt,Ct])}),ct(Nt)},tt&&(yt.prototype[Symbol.iterator]=yt.prototype.entries);var mt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Bt(Nt,Ct){var Vt,Kt,Gt=(Ct=Ct||{}).body;if(Nt instanceof Bt){if(Nt.bodyUsed)throw new TypeError("Already read");this.url=Nt.url,this.credentials=Nt.credentials,Ct.headers||(this.headers=new yt(Nt.headers)),this.method=Nt.method,this.mode=Nt.mode,this.signal=Nt.signal,Gt||Nt._bodyInit==null||(Gt=Nt._bodyInit,Nt.bodyUsed=!0)}else this.url=String(Nt);if(this.credentials=Ct.credentials||this.credentials||"same-origin",!Ct.headers&&this.headers||(this.headers=new yt(Ct.headers)),this.method=(Vt=Ct.method||this.method||"GET",Kt=Vt.toUpperCase(),mt.indexOf(Kt)>-1?Kt:Vt),this.mode=Ct.mode||this.mode||null,this.signal=Ct.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Gt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Gt)}function nn(Nt){var Ct=new FormData;return Nt.trim().split("&").forEach(function(Vt){if(Vt){var Kt=Vt.split("="),Gt=Kt.shift().replace(/\+/g," "),Ut=Kt.join("=").replace(/\+/g," ");Ct.append(decodeURIComponent(Gt),decodeURIComponent(Ut))}}),Ct}function sn(Nt,Ct){Ct||(Ct={}),this.type="default",this.status=Ct.status===void 0?200:Ct.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Ct?Ct.statusText:"OK",this.headers=new yt(Ct.headers),this.url=Ct.url||"",this._initBody(Nt)}Bt.prototype.clone=function(){return new Bt(this,{body:this._bodyInit})},It.call(Bt.prototype),It.call(sn.prototype),sn.prototype.clone=function(){return new sn(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new yt(this.headers),url:this.url})},sn.error=function(){var Nt=new sn(null,{status:0,statusText:""});return Nt.type="error",Nt};var xt=[301,302,303,307,308];sn.redirect=function(Nt,Ct){if(xt.indexOf(Ct)===-1)throw new RangeError("Invalid status code");return new sn(null,{status:Ct,headers:{location:Nt}})},$.DOMException=_.DOMException;try{new $.DOMException}catch{$.DOMException=function(Ct,Vt){this.message=Ct,this.name=Vt;var Kt=Error(Ct);this.stack=Kt.stack},$.DOMException.prototype=Object.create(Error.prototype),$.DOMException.prototype.constructor=$.DOMException}function St(Nt,Ct){return new Promise(function(Vt,Kt){var Gt=new Bt(Nt,Ct);if(Gt.signal&&Gt.signal.aborted)return Kt(new $.DOMException("Aborted","AbortError"));var Ut=new XMLHttpRequest;function Ht(){Ut.abort()}Ut.onload=function(){var qt,Pt,wt={status:Ut.status,statusText:Ut.statusText,headers:(qt=Ut.getAllResponseHeaders()||"",Pt=new yt,qt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Xt){var un=Xt.split(":"),dn=un.shift().trim();if(dn){var mn=un.join(":").trim();Pt.append(dn,mn)}}),Pt)};wt.url="responseURL"in Ut?Ut.responseURL:wt.headers.get("X-Request-URL");var $t="response"in Ut?Ut.response:Ut.responseText;Vt(new sn($t,wt))},Ut.onerror=function(){Kt(new TypeError("Network request failed"))},Ut.ontimeout=function(){Kt(new TypeError("Network request failed"))},Ut.onabort=function(){Kt(new $.DOMException("Aborted","AbortError"))},Ut.open(Gt.method,Gt.url,!0),Gt.credentials==="include"?Ut.withCredentials=!0:Gt.credentials==="omit"&&(Ut.withCredentials=!1),"responseType"in Ut&&j&&(Ut.responseType="blob"),Gt.headers.forEach(function(qt,Pt){Ut.setRequestHeader(Pt,qt)}),Gt.signal&&(Gt.signal.addEventListener("abort",Ht),Ut.onreadystatechange=function(){Ut.readyState===4&&Gt.signal.removeEventListener("abort",Ht)}),Ut.send(Gt._bodyInit===void 0?null:Gt._bodyInit)})}St.polyfill=!0,_.fetch||(_.fetch=St,_.Headers=yt,_.Request=Bt,_.Response=sn),$.Headers=yt,$.Request=Bt,$.Response=sn,$.fetch=St})({})})(s),delete s.fetch.polyfill,(o=s.fetch).default=s.fetch,o.fetch=s.fetch,o.Headers=s.Headers,o.Request=s.Request,o.Response=s.Response,i.exports=o},function(i,o,s){(function(_){const $=s(211),et=s(52),tt=(j,it,st)=>({from:tt,EnvVarError:s(52),get:function(ht){if(!ht)return j;if(arguments.length>1)throw new et("It looks like you passed more than one argument to env.get(). Since env-var@6.0.0 this is no longer supported. To set a default value use env.get(TARGET).default(DEFAULT)");return $(j,ht,it||{},st||function(){})},accessors:s(94),logger:s(225)(console.log,j.NODE_ENV)});i.exports=tt(_.env)}).call(this,s(2))},function(i,o,s){var _=s(13),$=s(73),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(st(),vt)throw vt;return}return this.log(ft,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(j[ht].callback(),vt)throw it(null),vt}else this.log(ft,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){}},function(i,o,s){(function(_){const $=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,et=typeof AbortController=="function"?AbortController:class{constructor(){this.signal=new it}abort(){this.signal.dispatchEvent("abort")}},tt=typeof AbortSignal=="function",j=typeof et.AbortSignal=="function",it=tt?AbortSignal:j?et.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(It){if(It==="abort"){this.aborted=!0;const mt={type:It,target:this};this.onabort(mt),this._listeners.forEach(Bt=>Bt(mt),this)}}onabort(){}addEventListener(It,mt){It==="abort"&&this._listeners.push(mt)}removeEventListener(It,mt){It==="abort"&&(this._listeners=this._listeners.filter(Bt=>Bt!==mt))}},st=new Set,ht=(It,mt)=>{const Bt=`LRU_CACHE_OPTION_${It}`;pt(Bt)&&ct(Bt,`${It} option`,`options.${mt}`,Tt)},vt=(It,mt)=>{const Bt=`LRU_CACHE_METHOD_${It}`;if(pt(Bt)){const{prototype:nn}=Tt,{get:sn}=Object.getOwnPropertyDescriptor(nn,It);ct(Bt,`${It} method`,`cache.${mt}()`,sn)}},ft=(...It)=>{typeof _=="object"&&_&&typeof _.emitWarning=="function"?_.emitWarning(...It):console.error(...It)},pt=It=>!st.has(It),ct=(It,mt,Bt,nn)=>{st.add(It),ft(`The ${mt} is deprecated. Please use ${Bt} instead.`,"DeprecationWarning",It,nn)},yt=It=>It&&It===Math.floor(It)&&It>0&&isFinite(It),Et=It=>yt(It)?It<=Math.pow(2,8)?Uint8Array:It<=Math.pow(2,16)?Uint16Array:It<=Math.pow(2,32)?Uint32Array:It<=Number.MAX_SAFE_INTEGER?Ot:null:null;class Ot extends Array{constructor(mt){super(mt),this.fill(0)}}class Lt{constructor(mt){if(mt===0)return[];const Bt=Et(mt);this.heap=new Bt(mt),this.length=0}push(mt){this.heap[this.length++]=mt}pop(){return this.heap[--this.length]}}class Tt{constructor(mt={}){const{max:Bt=0,ttl:nn,ttlResolution:sn=1,ttlAutopurge:xt,updateAgeOnGet:St,updateAgeOnHas:Nt,allowStale:Ct,dispose:Vt,disposeAfter:Kt,noDisposeOnSet:Gt,noUpdateTTL:Ut,maxSize:Ht=0,maxEntrySize:qt=0,sizeCalculation:Pt,fetchMethod:wt,fetchContext:$t,noDeleteOnFetchRejection:Xt,noDeleteOnStaleGet:un}=mt,{length:dn,maxAge:mn,stale:an}=mt instanceof Tt?{}:mt;if(Bt!==0&&!yt(Bt))throw new TypeError("max option must be a nonnegative integer");const en=Bt?Et(Bt):Array;if(!en)throw new Error("invalid max value: "+Bt);if(this.max=Bt,this.maxSize=Ht,this.maxEntrySize=qt||this.maxSize,this.sizeCalculation=Pt||dn,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=wt||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=$t,!this.fetchMethod&&$t!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(Bt).fill(null),this.valList=new Array(Bt).fill(null),this.next=new en(Bt),this.prev=new en(Bt),this.head=0,this.tail=0,this.free=new Lt(Bt),this.initialFill=1,this.size=0,typeof Vt=="function"&&(this.dispose=Vt),typeof Kt=="function"?(this.disposeAfter=Kt,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!Gt,this.noUpdateTTL=!!Ut,this.noDeleteOnFetchRejection=!!Xt,this.maxEntrySize!==0){if(this.maxSize!==0&&!yt(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!yt(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!Ct||!!an,this.noDeleteOnStaleGet=!!un,this.updateAgeOnGet=!!St,this.updateAgeOnHas=!!Nt,this.ttlResolution=yt(sn)||sn===0?sn:1,this.ttlAutopurge=!!xt,this.ttl=nn||mn||0,this.ttl){if(!yt(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const Mt="LRU_CACHE_UNBOUNDED";pt(Mt)&&(st.add(Mt),ft("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Mt,Tt))}an&&ht("stale","allowStale"),mn&&ht("maxAge","ttl"),dn&&ht("length","sizeCalculation")}getRemainingTTL(mt){return this.has(mt,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new Ot(this.max),this.starts=new Ot(this.max),this.setItemTTL=(nn,sn,xt=$.now())=>{if(this.starts[nn]=sn!==0?xt:0,this.ttls[nn]=sn,sn!==0&&this.ttlAutopurge){const St=setTimeout(()=>{this.isStale(nn)&&this.delete(this.keyList[nn])},sn+1);St.unref&&St.unref()}},this.updateItemAge=nn=>{this.starts[nn]=this.ttls[nn]!==0?$.now():0};let mt=0;const Bt=()=>{const nn=$.now();if(this.ttlResolution>0){mt=nn;const sn=setTimeout(()=>mt=0,this.ttlResolution);sn.unref&&sn.unref()}return nn};this.getRemainingTTL=nn=>{const sn=this.keyMap.get(nn);return sn===void 0?0:this.ttls[sn]===0||this.starts[sn]===0?1/0:this.starts[sn]+this.ttls[sn]-(mt||Bt())},this.isStale=nn=>this.ttls[nn]!==0&&this.starts[nn]!==0&&(mt||Bt())-this.starts[nn]>this.ttls[nn]}updateItemAge(mt){}setItemTTL(mt,Bt,nn){}isStale(mt){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new Ot(this.max),this.removeItemSize=mt=>{this.calculatedSize-=this.sizes[mt],this.sizes[mt]=0},this.requireSize=(mt,Bt,nn,sn)=>{if(!yt(nn)){if(!sn)throw new TypeError("invalid size value (must be positive integer)");if(typeof sn!="function")throw new TypeError("sizeCalculation must be a function");if(nn=sn(Bt,mt),!yt(nn))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return nn},this.addItemSize=(mt,Bt)=>{this.sizes[mt]=Bt;const nn=this.maxSize-this.sizes[mt];for(;this.calculatedSize>nn;)this.evict(!0);this.calculatedSize+=this.sizes[mt]}}removeItemSize(mt){}addItemSize(mt,Bt){}requireSize(mt,Bt,nn,sn){if(nn||sn)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:mt=this.allowStale}={}){if(this.size)for(let Bt=this.tail;this.isValidIndex(Bt)&&(!mt&&this.isStale(Bt)||(yield Bt),Bt!==this.head);)Bt=this.prev[Bt]}*rindexes({allowStale:mt=this.allowStale}={}){if(this.size)for(let Bt=this.head;this.isValidIndex(Bt)&&(!mt&&this.isStale(Bt)||(yield Bt),Bt!==this.tail);)Bt=this.next[Bt]}isValidIndex(mt){return this.keyMap.get(this.keyList[mt])===mt}*entries(){for(const mt of this.indexes())yield[this.keyList[mt],this.valList[mt]]}*rentries(){for(const mt of this.rindexes())yield[this.keyList[mt],this.valList[mt]]}*keys(){for(const mt of this.indexes())yield this.keyList[mt]}*rkeys(){for(const mt of this.rindexes())yield this.keyList[mt]}*values(){for(const mt of this.indexes())yield this.valList[mt]}*rvalues(){for(const mt of this.rindexes())yield this.valList[mt]}[Symbol.iterator](){return this.entries()}find(mt,Bt={}){for(const nn of this.indexes())if(mt(this.valList[nn],this.keyList[nn],this))return this.get(this.keyList[nn],Bt)}forEach(mt,Bt=this){for(const nn of this.indexes())mt.call(Bt,this.valList[nn],this.keyList[nn],this)}rforEach(mt,Bt=this){for(const nn of this.rindexes())mt.call(Bt,this.valList[nn],this.keyList[nn],this)}get prune(){return vt("prune","purgeStale"),this.purgeStale}purgeStale(){let mt=!1;for(const Bt of this.rindexes({allowStale:!0}))this.isStale(Bt)&&(this.delete(this.keyList[Bt]),mt=!0);return mt}dump(){const mt=[];for(const Bt of this.indexes({allowStale:!0})){const nn=this.keyList[Bt],sn=this.valList[Bt],xt={value:this.isBackgroundFetch(sn)?sn.__staleWhileFetching:sn};if(this.ttls){xt.ttl=this.ttls[Bt];const St=$.now()-this.starts[Bt];xt.start=Math.floor(Date.now()-St)}this.sizes&&(xt.size=this.sizes[Bt]),mt.unshift([nn,xt])}return mt}load(mt){this.clear();for(const[Bt,nn]of mt){if(nn.start){const sn=Date.now()-nn.start;nn.start=$.now()-sn}this.set(Bt,nn.value,nn)}}dispose(mt,Bt,nn){}set(mt,Bt,{ttl:nn=this.ttl,start:sn,noDisposeOnSet:xt=this.noDisposeOnSet,size:St=0,sizeCalculation:Nt=this.sizeCalculation,noUpdateTTL:Ct=this.noUpdateTTL}={}){if(St=this.requireSize(mt,Bt,St,Nt),this.maxEntrySize&&St>this.maxEntrySize)return this;let Vt=this.size===0?void 0:this.keyMap.get(mt);if(Vt===void 0)Vt=this.newIndex(),this.keyList[Vt]=mt,this.valList[Vt]=Bt,this.keyMap.set(mt,Vt),this.next[this.tail]=Vt,this.prev[Vt]=this.tail,this.tail=Vt,this.size++,this.addItemSize(Vt,St),Ct=!1;else{const Kt=this.valList[Vt];Bt!==Kt&&(this.isBackgroundFetch(Kt)?Kt.__abortController.abort():xt||(this.dispose(Kt,mt,"set"),this.disposeAfter&&this.disposed.push([Kt,mt,"set"])),this.removeItemSize(Vt),this.valList[Vt]=Bt,this.addItemSize(Vt,St)),this.moveToTail(Vt)}if(nn===0||this.ttl!==0||this.ttls||this.initializeTTLTracking(),Ct||this.setItemTTL(Vt,nn,sn),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const mt=this.valList[this.head];return this.evict(!0),mt}}evict(mt){const Bt=this.head,nn=this.keyList[Bt],sn=this.valList[Bt];return this.isBackgroundFetch(sn)?sn.__abortController.abort():(this.dispose(sn,nn,"evict"),this.disposeAfter&&this.disposed.push([sn,nn,"evict"])),this.removeItemSize(Bt),mt&&(this.keyList[Bt]=null,this.valList[Bt]=null,this.free.push(Bt)),this.head=this.next[Bt],this.keyMap.delete(nn),this.size--,Bt}has(mt,{updateAgeOnHas:Bt=this.updateAgeOnHas}={}){const nn=this.keyMap.get(mt);return nn!==void 0&&!this.isStale(nn)&&(Bt&&this.updateItemAge(nn),!0)}peek(mt,{allowStale:Bt=this.allowStale}={}){const nn=this.keyMap.get(mt);if(nn!==void 0&&(Bt||!this.isStale(nn))){const sn=this.valList[nn];return this.isBackgroundFetch(sn)?sn.__staleWhileFetching:sn}}backgroundFetch(mt,Bt,nn,sn){const xt=Bt===void 0?void 0:this.valList[Bt];if(this.isBackgroundFetch(xt))return xt;const St=new et,Nt={signal:St.signal,options:nn,context:sn},Ct=new Promise(Vt=>Vt(this.fetchMethod(mt,xt,Nt))).then(Vt=>(St.signal.aborted||this.set(mt,Vt,Nt.options),Vt),Vt=>{if(this.valList[Bt]===Ct&&(!nn.noDeleteOnFetchRejection||Ct.__staleWhileFetching===void 0?this.delete(mt):this.valList[Bt]=Ct.__staleWhileFetching),Ct.__returned===Ct)throw Vt});return Ct.__abortController=St,Ct.__staleWhileFetching=xt,Ct.__returned=null,Bt===void 0?(this.set(mt,Ct,Nt.options),Bt=this.keyMap.get(mt)):this.valList[Bt]=Ct,Ct}isBackgroundFetch(mt){return mt&&typeof mt=="object"&&typeof mt.then=="function"&&Object.prototype.hasOwnProperty.call(mt,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(mt,"__returned")&&(mt.__returned===mt||mt.__returned===null)}async fetch(mt,{allowStale:Bt=this.allowStale,updateAgeOnGet:nn=this.updateAgeOnGet,noDeleteOnStaleGet:sn=this.noDeleteOnStaleGet,ttl:xt=this.ttl,noDisposeOnSet:St=this.noDisposeOnSet,size:Nt=0,sizeCalculation:Ct=this.sizeCalculation,noUpdateTTL:Vt=this.noUpdateTTL,noDeleteOnFetchRejection:Kt=this.noDeleteOnFetchRejection,fetchContext:Gt=this.fetchContext,forceRefresh:Ut=!1}={}){if(!this.fetchMethod)return this.get(mt,{allowStale:Bt,updateAgeOnGet:nn,noDeleteOnStaleGet:sn});const Ht={allowStale:Bt,updateAgeOnGet:nn,noDeleteOnStaleGet:sn,ttl:xt,noDisposeOnSet:St,size:Nt,sizeCalculation:Ct,noUpdateTTL:Vt,noDeleteOnFetchRejection:Kt};let qt=this.keyMap.get(mt);if(qt===void 0){const Pt=this.backgroundFetch(mt,qt,Ht,Gt);return Pt.__returned=Pt}{const Pt=this.valList[qt];if(this.isBackgroundFetch(Pt))return Bt&&Pt.__staleWhileFetching!==void 0?Pt.__staleWhileFetching:Pt.__returned=Pt;if(!Ut&&!this.isStale(qt))return this.moveToTail(qt),nn&&this.updateItemAge(qt),Pt;const wt=this.backgroundFetch(mt,qt,Ht,Gt);return Bt&&wt.__staleWhileFetching!==void 0?wt.__staleWhileFetching:wt.__returned=wt}}get(mt,{allowStale:Bt=this.allowStale,updateAgeOnGet:nn=this.updateAgeOnGet,noDeleteOnStaleGet:sn=this.noDeleteOnStaleGet}={}){const xt=this.keyMap.get(mt);if(xt!==void 0){const St=this.valList[xt],Nt=this.isBackgroundFetch(St);return this.isStale(xt)?Nt?Bt?St.__staleWhileFetching:void 0:(sn||this.delete(mt),Bt?St:void 0):Nt?void 0:(this.moveToTail(xt),nn&&this.updateItemAge(xt),St)}}connect(mt,Bt){this.prev[Bt]=mt,this.next[mt]=Bt}moveToTail(mt){mt!==this.tail&&(mt===this.head?this.head=this.next[mt]:this.connect(this.prev[mt],this.next[mt]),this.connect(this.tail,mt),this.tail=mt)}get del(){return vt("del","delete"),this.delete}delete(mt){let Bt=!1;if(this.size!==0){const nn=this.keyMap.get(mt);if(nn!==void 0)if(Bt=!0,this.size===1)this.clear();else{this.removeItemSize(nn);const sn=this.valList[nn];this.isBackgroundFetch(sn)?sn.__abortController.abort():(this.dispose(sn,mt,"delete"),this.disposeAfter&&this.disposed.push([sn,mt,"delete"])),this.keyMap.delete(mt),this.keyList[nn]=null,this.valList[nn]=null,nn===this.tail?this.tail=this.prev[nn]:nn===this.head?this.head=this.next[nn]:(this.next[this.prev[nn]]=this.next[nn],this.prev[this.next[nn]]=this.prev[nn]),this.size--,this.free.push(nn)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return Bt}clear(){for(const mt of this.rindexes({allowStale:!0})){const Bt=this.valList[mt];if(this.isBackgroundFetch(Bt))Bt.__abortController.abort();else{const nn=this.keyList[mt];this.dispose(Bt,nn,"delete"),this.disposeAfter&&this.disposed.push([Bt,nn,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return vt("reset","clear"),this.clear}get length(){return((mt,Bt)=>{const nn=`LRU_CACHE_PROPERTY_${mt}`;if(pt(nn)){const{prototype:sn}=Tt,{get:xt}=Object.getOwnPropertyDescriptor(sn,mt);ct(nn,`${mt} property`,`cache.${Bt}`,xt)}})("length","size"),this.size}static get AbortController(){return et}static get AbortSignal(){return it}}i.exports=Tt}).call(this,s(2))},function(i,o,s){var _=s(41).Colorizer;i.exports=function($){return _.addColors($.colors||$),$}},function(i,o,s){var _={};i.exports=_,_.themes={};var $=s(13),et=_.styles=s(109),tt=Object.defineProperties,j=new RegExp(/[\r\n]+/g);_.supportsColor=s(110).supportsColor,_.enabled===void 0&&(_.enabled=_.supportsColor()!==!1),_.enable=function(){_.enabled=!0},_.disable=function(){_.enabled=!1},_.stripColors=_.strip=function(Et){return(""+Et).replace(/\x1B\[\d+m/g,"")},_.stylize=function(Et,Ot){return _.enabled?et[Ot].open+Et+et[Ot].close:Et+""};var it=/[|\\{}()[\]^$+*?.]/g;function st(Et){var Ot=function Lt(){return pt.apply(Lt,arguments)};return Ot._styles=Et,Ot.__proto__=ft,Ot}var ht,vt=(ht={},et.grey=et.gray,Object.keys(et).forEach(function(Et){et[Et].closeRe=new RegExp(function(Ot){if(typeof Ot!="string")throw new TypeError("Expected a string");return Ot.replace(it,"\\$&")}(et[Et].close),"g"),ht[Et]={get:function(){return st(this._styles.concat(Et))}}}),ht),ft=tt(function(){},vt);function pt(){var Et=Array.prototype.slice.call(arguments),Ot=Et.map(function(Bt){return Bt!==void 0&&Bt.constructor===String?Bt:$.inspect(Bt)}).join(" ");if(!_.enabled||!Ot)return Ot;for(var Lt=Ot.indexOf(`
`)!=-1,Tt=this._styles,It=Tt.length;It--;){var mt=et[Tt[It]];Ot=mt.open+Ot.replace(mt.closeRe,mt.open)+mt.close,Lt&&(Ot=Ot.replace(j,function(Bt){return mt.close+Bt+mt.open}))}return Ot}_.setTheme=function(Et){if(typeof Et!="string")for(var Ot in Et)(function(Lt){_[Lt]=function(Tt){if(typeof Et[Lt]=="object"){var It=Tt;for(var mt in Et[Lt])It=_[Et[Lt][mt]](It);return It}return _[Et[Lt]](Tt)}})(Ot);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var ct=function(Et,Ot){var Lt=Ot.split("");return(Lt=Lt.map(Et)).join("")};for(var yt in _.trap=s(112),_.zalgo=s(113),_.maps={},_.maps.america=s(114)(_),_.maps.zebra=s(115)(_),_.maps.rainbow=s(116)(_),_.maps.random=s(117)(_),_.maps)(function(Et){_[Et]=function(Ot){return ct(_.maps[Et],Ot)}})(yt);tt(_,function(){var Et={};return Object.keys(vt).forEach(function(Ot){Et[Ot]={get:function(){return st([Ot])}}}),Et}())},function(i,o){i.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(s,_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}},function(i,o){var s={};i.exports=s;var _={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(_).forEach(function($){var et=_[$],tt=s[$]=[];tt.open="\x1B["+et[0]+"m",tt.close="\x1B["+et[1]+"m"})},function(i,o,s){(function(_){var $=s(18),et=s(111),tt=_.env,j=void 0;function it(st){return function(ht){return ht!==0&&{level:ht,hasBasic:!0,has256:ht>=2,has16m:ht>=3}}(function(ht){if(j===!1)return 0;if(et("color=16m")||et("color=full")||et("color=truecolor"))return 3;if(et("color=256"))return 2;if(ht&&!ht.isTTY&&j!==!0)return 0;var vt=j?1:0;if(_.platform==="win32"){var ft=$.release().split(".");return Number(_.versions.node.split(".")[0])>=8&&Number(ft[0])>=10&&Number(ft[2])>=10586?Number(ft[2])>=14931?3:2:1}return"CI"in tt?["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(pt){return pt in tt})||tt.CI_NAME==="codeship"?1:vt:"TEAMCITY_VERSION"in tt?/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(tt.TEAMCITY_VERSION)?1:0:"TERM_PROGRAM"in tt?(parseInt("445".split(".")[0],10),2):/-256(color)?$/i.test("xterm-256color")?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test("xterm-256color")||"COLORTERM"in tt?1:vt}(st))}et("no-color")||et("no-colors")||et("color=false")?j=!1:(et("color")||et("colors")||et("color=true")||et("color=always"))&&(j=!0),"FORCE_COLOR"in tt&&(j=tt.FORCE_COLOR.length===0||parseInt(tt.FORCE_COLOR,10)!==0),i.exports={supportsColor:it,stdout:it(_.stdout),stderr:it(_.stderr)}}).call(this,s(2))},function(i,o,s){(function(_){i.exports=function($,et){var tt=(et=et||_.argv).indexOf("--"),j=/^-{1,2}/.test($)?"":"--",it=et.indexOf(j+$);return it!==-1&&(tt===-1||it<tt)}}).call(this,s(2))},function(i,o){i.exports=function(s,_){var $="";s=(s=s||"Run the trap, drop the bass").split("");var et={a:["@","","","","","",""],b:["","","","","",""],c:["","",""],d:["","","","","",""],e:["","","","","","","",""],f:[""],g:[""],h:["","","","","",""],i:[""],j:[""],k:["","","",""],l:[""],m:["","","","","",""],n:["","","","","",""],o:["","","","","","","","",""],p:["",""],q:[""],r:["","","","","",""],s:["","","",""],t:["","",""],u:["",""],v:[""],w:["","","",""],x:["","","",""],y:["","",""],z:["",""]};return s.forEach(function(tt){tt=tt.toLowerCase();var j=et[tt]||[" "],it=Math.floor(Math.random()*j.length);$+=et[tt]!==void 0?et[tt][it]:tt}),$}},function(i,o){i.exports=function(s,_){s=s||"   he is here   ";var $={up:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],down:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mid:["","","","","","","","","","","","","","","","","","","","",""," "]},et=[].concat($.up,$.down,$.mid);function tt(it){return Math.floor(Math.random()*it)}function j(it){var st=!1;return et.filter(function(ht){st=ht===it}),st}return function(it,st){var ht,vt,ft="";for(vt in(st=st||{}).up=st.up===void 0||st.up,st.mid=st.mid===void 0||st.mid,st.down=st.down===void 0||st.down,st.size=st.size!==void 0?st.size:"maxi",it=it.split(""))if(!j(vt)){switch(ft+=it[vt],ht={up:0,down:0,mid:0},st.size){case"mini":ht.up=tt(8),ht.mid=tt(2),ht.down=tt(8);break;case"maxi":ht.up=tt(16)+3,ht.mid=tt(4)+1,ht.down=tt(64)+3;break;default:ht.up=tt(8)+1,ht.mid=tt(6)/2,ht.down=tt(8)+1}var pt=["up","mid","down"];for(var ct in pt)for(var yt=pt[ct],Et=0;Et<=ht[yt];Et++)st[yt]&&(ft+=$[yt][tt($[yt].length)])}return ft}(s,_)}},function(i,o){i.exports=function(s){return function(_,$,et){if(_===" ")return _;switch($%3){case 0:return s.red(_);case 1:return s.white(_);case 2:return s.blue(_)}}}},function(i,o){i.exports=function(s){return function(_,$,et){return $%2==0?_:s.inverse(_)}}},function(i,o){i.exports=function(s){var _=["red","yellow","green","blue","magenta"];return function($,et,tt){return $===" "?$:s[_[et++%_.length]]($)}}},function(i,o){i.exports=function(s){var _=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta"];return function($,et,tt){return $===" "?$:s[_[Math.round(Math.random()*(_.length-2))]]($)}}},function(i,o,s){Object.defineProperty(o,"cli",{value:s(119)}),Object.defineProperty(o,"npm",{value:s(120)}),Object.defineProperty(o,"syslog",{value:s(121)})},function(i,o,s){o.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},o.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},function(i,o,s){o.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},o.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},function(i,o,s){o.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},o.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},function(i,o,s){var _=s(12);i.exports=_(function($){return $.message="	".concat($.message),$})},function(i,o,s){function _(vt,ft){if(!(vt instanceof ft))throw new TypeError("Cannot call a class as a function")}function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(41).Colorizer,tt=s(60).Padder,j=s(3),it=j.configs,st=j.MESSAGE,ht=function(){function vt(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,vt),ct.levels||(ct.levels=it.npm.levels),this.colorizer=new et(ct),this.padder=new tt(ct),this.options=ct}var ft,pt;return ft=vt,(pt=[{key:"transform",value:function(ct,yt){return this.colorizer.transform(this.padder.transform(ct,yt),yt),ct[st]="".concat(ct.level,":").concat(ct.message),ct}}])&&$(ft.prototype,pt),vt}();i.exports=function(vt){return new ht(vt)},i.exports.Format=ht},function(i,o,s){var _=s(12);function $(tt){if(tt.every(et))return function(j){for(var it=j,st=0;st<tt.length;st++)if(!(it=tt[st].transform(it,tt[st].options)))return!1;return it}}function et(tt){if(typeof tt.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}i.exports=function(){for(var tt=arguments.length,j=new Array(tt),it=0;it<tt;it++)j[it]=arguments[it];var st=_($(j)),ht=st();return ht.Format=st.Format,ht},i.exports.cascade=$},function(i,o,s){(function(_){var $=s(12),et=s(3).MESSAGE,tt=s(35);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$(function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it})}).call(this,s(5).Buffer)},function(i,o,s){o.byteLength=function(vt){var ft=st(vt),pt=ft[0],ct=ft[1];return 3*(pt+ct)/4-ct},o.toByteArray=function(vt){for(var ft,pt=st(vt),ct=pt[0],yt=pt[1],Et=new et(function(It,mt,Bt){return 3*(mt+Bt)/4-Bt}(0,ct,yt)),Ot=0,Lt=yt>0?ct-4:ct,Tt=0;Tt<Lt;Tt+=4)ft=$[vt.charCodeAt(Tt)]<<18|$[vt.charCodeAt(Tt+1)]<<12|$[vt.charCodeAt(Tt+2)]<<6|$[vt.charCodeAt(Tt+3)],Et[Ot++]=ft>>16&255,Et[Ot++]=ft>>8&255,Et[Ot++]=255&ft;return yt===2&&(ft=$[vt.charCodeAt(Tt)]<<2|$[vt.charCodeAt(Tt+1)]>>4,Et[Ot++]=255&ft),yt===1&&(ft=$[vt.charCodeAt(Tt)]<<10|$[vt.charCodeAt(Tt+1)]<<4|$[vt.charCodeAt(Tt+2)]>>2,Et[Ot++]=ft>>8&255,Et[Ot++]=255&ft),Et},o.fromByteArray=function(vt){for(var ft,pt=vt.length,ct=pt%3,yt=[],Et=0,Ot=pt-ct;Et<Ot;Et+=16383)yt.push(ht(vt,Et,Et+16383>Ot?Ot:Et+16383));return ct===1?(ft=vt[pt-1],yt.push(_[ft>>2]+_[ft<<4&63]+"==")):ct===2&&(ft=(vt[pt-2]<<8)+vt[pt-1],yt.push(_[ft>>10]+_[ft>>4&63]+_[ft<<2&63]+"=")),yt.join("")};for(var _=[],$=[],et=typeof Uint8Array<"u"?Uint8Array:Array,tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,it=tt.length;j<it;++j)_[j]=tt[j],$[tt.charCodeAt(j)]=j;function st(vt){var ft=vt.length;if(ft%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var pt=vt.indexOf("=");return pt===-1&&(pt=ft),[pt,pt===ft?0:4-pt%4]}function ht(vt,ft,pt){for(var ct,yt,Et=[],Ot=ft;Ot<pt;Ot+=3)ct=(vt[Ot]<<16&16711680)+(vt[Ot+1]<<8&65280)+(255&vt[Ot+2]),Et.push(_[(yt=ct)>>18&63]+_[yt>>12&63]+_[yt>>6&63]+_[63&yt]);return Et.join("")}$["-".charCodeAt(0)]=62,$["_".charCodeAt(0)]=63},function(i,o){o.read=function(s,_,$,et,tt){var j,it,st=8*tt-et-1,ht=(1<<st)-1,vt=ht>>1,ft=-7,pt=$?tt-1:0,ct=$?-1:1,yt=s[_+pt];for(pt+=ct,j=yt&(1<<-ft)-1,yt>>=-ft,ft+=st;ft>0;j=256*j+s[_+pt],pt+=ct,ft-=8);for(it=j&(1<<-ft)-1,j>>=-ft,ft+=et;ft>0;it=256*it+s[_+pt],pt+=ct,ft-=8);if(j===0)j=1-vt;else{if(j===ht)return it?NaN:1/0*(yt?-1:1);it+=Math.pow(2,et),j-=vt}return(yt?-1:1)*it*Math.pow(2,j-et)},o.write=function(s,_,$,et,tt,j){var it,st,ht,vt=8*j-tt-1,ft=(1<<vt)-1,pt=ft>>1,ct=tt===23?Math.pow(2,-24)-Math.pow(2,-77):0,yt=et?0:j-1,Et=et?1:-1,Ot=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(st=isNaN(_)?1:0,it=ft):(it=Math.floor(Math.log(_)/Math.LN2),_*(ht=Math.pow(2,-it))<1&&(it--,ht*=2),(_+=it+pt>=1?ct/ht:ct*Math.pow(2,1-pt))*ht>=2&&(it++,ht/=2),it+pt>=ft?(st=0,it=ft):it+pt>=1?(st=(_*ht-1)*Math.pow(2,tt),it+=pt):(st=_*Math.pow(2,pt-1)*Math.pow(2,tt),it=0));tt>=8;s[$+yt]=255&st,yt+=Et,st/=256,tt-=8);for(it=it<<tt|st,vt+=tt;vt>0;s[$+yt]=255&it,yt+=Et,it/=256,vt-=8);s[$+yt-Et]|=128*Ot}},function(i,o,s){var _=s(12);i.exports=_(function($,et){return et.message?($.message="[".concat(et.label,"] ").concat($.message),$):($.label=et.label,$)})},function(i,o,s){var _=s(12),$=s(3).MESSAGE,et=s(35);i.exports=_(function(tt){var j={};return tt.message&&(j["@message"]=tt.message,delete tt.message),tt.timestamp&&(j["@timestamp"]=tt.timestamp,delete tt.timestamp),j["@fields"]=tt,tt[$]=et(j),tt})},function(i,o,s){var _=s(12);function $(tt,j,it){var st,ht,vt,ft=j.reduce(function(ct,yt){return ct[yt]=tt[yt],delete tt[yt],ct},{}),pt=Object.keys(tt).reduce(function(ct,yt){return ct[yt]=tt[yt],delete tt[yt],ct},{});return Object.assign(tt,ft,(vt=pt,(ht=it)in(st={})?Object.defineProperty(st,ht,{value:vt,enumerable:!0,configurable:!0,writable:!0}):st[ht]=vt,st)),tt}function et(tt,j,it){return tt[it]=j.reduce(function(st,ht){return st[ht]=tt[ht],delete tt[ht],st},{}),tt}i.exports=_(function(tt){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it="metadata";j.key&&(it=j.key);var st=[];return j.fillExcept||j.fillWith||(st.push("level"),st.push("message")),j.fillExcept&&(st=j.fillExcept),st.length>0?$(tt,st,it):j.fillWith?et(tt,j.fillWith,it):tt})},function(i,o,s){var _=s(13).inspect,$=s(12),et=s(3),tt=et.LEVEL,j=et.MESSAGE,it=et.SPLAT;i.exports=$(function(st){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=Object.assign({},st);return delete vt[tt],delete vt[j],delete vt[it],st[j]=_(vt,!1,ht.depth||null,ht.colorize),st})},function(i,o,s){function _(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var $=s(3).MESSAGE,et=function(){function tt(st){(function(ht,vt){if(!(ht instanceof vt))throw new TypeError("Cannot call a class as a function")})(this,tt),this.template=st}var j,it;return j=tt,(it=[{key:"transform",value:function(st){return st[$]=this.template(st),st}}])&&_(j.prototype,it),tt}();i.exports=function(tt){return new et(tt)},i.exports.Printf=i.exports.Format=et},function(i,o,s){var _=s(12),$=s(3).MESSAGE,et=s(35);i.exports=_(function(tt){var j=et(Object.assign({},tt,{level:void 0,message:void 0,splat:void 0})),it=tt.padding&&tt.padding[tt.level]||"";return tt[$]=j!=="{}"?"".concat(tt.level,":").concat(it," ").concat(tt.message," ").concat(j):"".concat(tt.level,":").concat(it," ").concat(tt.message),tt})},function(i,o,s){function _(vt){return function(ft){if(Array.isArray(ft))return $(ft)}(vt)||function(ft){if(typeof Symbol<"u"&&Symbol.iterator in Object(ft))return Array.from(ft)}(vt)||function(ft,pt){if(ft){if(typeof ft=="string")return $(ft,pt);var ct=Object.prototype.toString.call(ft).slice(8,-1);if(ct==="Object"&&ft.constructor&&(ct=ft.constructor.name),ct==="Map"||ct==="Set")return Array.from(ft);if(ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct))return $(ft,pt)}}(vt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(vt,ft){(ft==null||ft>vt.length)&&(ft=vt.length);for(var pt=0,ct=new Array(ft);pt<ft;pt++)ct[pt]=vt[pt];return ct}function et(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var tt=s(13),j=s(3).SPLAT,it=/%[scdjifoO%]/g,st=/%%/g,ht=function(){function vt(ct){(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")})(this,vt),this.options=ct}var ft,pt;return ft=vt,(pt=[{key:"_splat",value:function(ct,yt){var Et=ct.message,Ot=ct[j]||ct.splat||[],Lt=Et.match(st),Tt=Lt&&Lt.length||0,It=yt.length-Tt-Ot.length,mt=It<0?Ot.splice(It,-1*It):[],Bt=mt.length;if(Bt)for(var nn=0;nn<Bt;nn++)Object.assign(ct,mt[nn]);return ct.message=tt.format.apply(tt,[Et].concat(_(Ot))),ct}},{key:"transform",value:function(ct){var yt=ct.message,Et=ct[j]||ct.splat;if(!Et||!Et.length)return ct;var Ot=yt&&yt.match&&yt.match(it);if(!Ot&&(Et||Et.length)){var Lt=Et.length>1?Et.splice(0):Et,Tt=Lt.length;if(Tt)for(var It=0;It<Tt;It++)Object.assign(ct,Lt[It]);return ct}return Ot?this._splat(ct,Ot):ct}}])&&et(ft.prototype,pt),vt}();i.exports=function(vt){return new ht(vt)}},function(i,o,s){var _=s(136),$=s(12);i.exports=$(function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tt.format&&(et.timestamp=typeof tt.format=="function"?tt.format():_.format(new Date,tt.format)),et.timestamp||(et.timestamp=new Date().toISOString()),tt.alias&&(et[tt.alias]=et.timestamp),et})},function(i,o,s){s.r(o),s.d(o,"assign",function(){return it}),s.d(o,"format",function(){return St}),s.d(o,"parse",function(){return Nt}),s.d(o,"defaultI18n",function(){return ft}),s.d(o,"setGlobalDateI18n",function(){return ct}),s.d(o,"setGlobalDateMasks",function(){return xt});var _=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$="[^\\s]+",et=/\[([^]*?)\]/gm;function tt(Vt,Kt){for(var Gt=[],Ut=0,Ht=Vt.length;Ut<Ht;Ut++)Gt.push(Vt[Ut].substr(0,Kt));return Gt}var j=function(Vt){return function(Kt,Gt){var Ut=Gt[Vt].map(function(Ht){return Ht.toLowerCase()}).indexOf(Kt.toLowerCase());return Ut>-1?Ut:null}};function it(Vt){for(var Kt=[],Gt=1;Gt<arguments.length;Gt++)Kt[Gt-1]=arguments[Gt];for(var Ut=0,Ht=Kt;Ut<Ht.length;Ut++){var qt=Ht[Ut];for(var Pt in qt)Vt[Pt]=qt[Pt]}return Vt}var st=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ht=["January","February","March","April","May","June","July","August","September","October","November","December"],vt=tt(ht,3),ft={dayNamesShort:tt(st,3),dayNames:st,monthNamesShort:vt,monthNames:ht,amPm:["am","pm"],DoFn:function(Vt){return Vt+["th","st","nd","rd"][Vt%10>3?0:(Vt-Vt%10!=10?1:0)*Vt%10]}},pt=it({},ft),ct=function(Vt){return pt=it(pt,Vt)},yt=function(Vt){return Vt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Et=function(Vt,Kt){for(Kt===void 0&&(Kt=2),Vt=String(Vt);Vt.length<Kt;)Vt="0"+Vt;return Vt},Ot={D:function(Vt){return String(Vt.getDate())},DD:function(Vt){return Et(Vt.getDate())},Do:function(Vt,Kt){return Kt.DoFn(Vt.getDate())},d:function(Vt){return String(Vt.getDay())},dd:function(Vt){return Et(Vt.getDay())},ddd:function(Vt,Kt){return Kt.dayNamesShort[Vt.getDay()]},dddd:function(Vt,Kt){return Kt.dayNames[Vt.getDay()]},M:function(Vt){return String(Vt.getMonth()+1)},MM:function(Vt){return Et(Vt.getMonth()+1)},MMM:function(Vt,Kt){return Kt.monthNamesShort[Vt.getMonth()]},MMMM:function(Vt,Kt){return Kt.monthNames[Vt.getMonth()]},YY:function(Vt){return Et(String(Vt.getFullYear()),4).substr(2)},YYYY:function(Vt){return Et(Vt.getFullYear(),4)},h:function(Vt){return String(Vt.getHours()%12||12)},hh:function(Vt){return Et(Vt.getHours()%12||12)},H:function(Vt){return String(Vt.getHours())},HH:function(Vt){return Et(Vt.getHours())},m:function(Vt){return String(Vt.getMinutes())},mm:function(Vt){return Et(Vt.getMinutes())},s:function(Vt){return String(Vt.getSeconds())},ss:function(Vt){return Et(Vt.getSeconds())},S:function(Vt){return String(Math.round(Vt.getMilliseconds()/100))},SS:function(Vt){return Et(Math.round(Vt.getMilliseconds()/10),2)},SSS:function(Vt){return Et(Vt.getMilliseconds(),3)},a:function(Vt,Kt){return Vt.getHours()<12?Kt.amPm[0]:Kt.amPm[1]},A:function(Vt,Kt){return Vt.getHours()<12?Kt.amPm[0].toUpperCase():Kt.amPm[1].toUpperCase()},ZZ:function(Vt){var Kt=Vt.getTimezoneOffset();return(Kt>0?"-":"+")+Et(100*Math.floor(Math.abs(Kt)/60)+Math.abs(Kt)%60,4)},Z:function(Vt){var Kt=Vt.getTimezoneOffset();return(Kt>0?"-":"+")+Et(Math.floor(Math.abs(Kt)/60),2)+":"+Et(Math.abs(Kt)%60,2)}},Lt=function(Vt){return+Vt-1},Tt=[null,"[1-9]\\d?"],It=[null,$],mt=["isPm",$,function(Vt,Kt){var Gt=Vt.toLowerCase();return Gt===Kt.amPm[0]?0:Gt===Kt.amPm[1]?1:null}],Bt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(Vt){var Kt=(Vt+"").match(/([+-]|\d\d)/gi);if(Kt){var Gt=60*+Kt[1]+parseInt(Kt[2],10);return Kt[0]==="+"?Gt:-Gt}return 0}],nn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+$,function(Vt){return parseInt(Vt,10)}],M:["month","[1-9]\\d?",Lt],MM:["month","\\d\\d",Lt],YY:["year","\\d\\d",function(Vt){var Kt=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+Vt>68?Kt-1:Kt)+Vt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(Vt){return 100*+Vt}],SS:["millisecond","\\d\\d",function(Vt){return 10*+Vt}],SSS:["millisecond","\\d{3}"],d:Tt,dd:Tt,ddd:It,dddd:It,MMM:["month",$,j("monthNamesShort")],MMMM:["month",$,j("monthNames")],a:mt,A:mt,ZZ:Bt,Z:Bt},sn={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},xt=function(Vt){return it(sn,Vt)},St=function(Vt,Kt,Gt){if(Kt===void 0&&(Kt=sn.default),Gt===void 0&&(Gt={}),typeof Vt=="number"&&(Vt=new Date(Vt)),Object.prototype.toString.call(Vt)!=="[object Date]"||isNaN(Vt.getTime()))throw new Error("Invalid Date pass to format");var Ut=[];Kt=(Kt=sn[Kt]||Kt).replace(et,function(qt,Pt){return Ut.push(Pt),"@@@"});var Ht=it(it({},pt),Gt);return(Kt=Kt.replace(_,function(qt){return Ot[qt](Vt,Ht)})).replace(/@@@/g,function(){return Ut.shift()})};function Nt(Vt,Kt,Gt){if(Gt===void 0&&(Gt={}),typeof Kt!="string")throw new Error("Invalid format in fecha parse");if(Kt=sn[Kt]||Kt,Vt.length>1e3)return null;var Ut={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Ht=[],qt=[],Pt=Kt.replace(et,function(hn,An){return qt.push(yt(An)),"@@@"}),wt={},$t={};Pt=yt(Pt).replace(_,function(hn){var An=nn[hn],Mn=An[0],Yn=An[1],Nr=An[3];if(wt[Mn])throw new Error("Invalid format. "+Mn+" specified twice in format");return wt[Mn]=!0,Nr&&($t[Nr]=!0),Ht.push(An),"("+Yn+")"}),Object.keys($t).forEach(function(hn){if(!wt[hn])throw new Error("Invalid format. "+hn+" is required in specified format")}),Pt=Pt.replace(/@@@/g,function(){return qt.shift()});var Xt=Vt.match(new RegExp(Pt,"i"));if(!Xt)return null;for(var un=it(it({},pt),Gt),dn=1;dn<Xt.length;dn++){var mn=Ht[dn-1],an=mn[0],en=mn[2],Mt=en?en(Xt[dn],un):+Xt[dn];if(Mt==null)return null;Ut[an]=Mt}Ut.isPm===1&&Ut.hour!=null&&+Ut.hour!=12?Ut.hour=+Ut.hour+12:Ut.isPm===0&&+Ut.hour==12&&(Ut.hour=0);for(var jt=new Date(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute,Ut.second,Ut.millisecond),Qt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],gn=(dn=0,Qt.length);dn<gn;dn++)if(wt[Qt[dn][0]]&&Ut[Qt[dn][0]]!==jt[Qt[dn][1]]())return null;return Ut.timezoneOffset==null?jt:new Date(Date.UTC(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute-Ut.timezoneOffset,Ut.second,Ut.millisecond))}var Ct={format:St,parse:Nt,defaultI18n:ft,setGlobalDateI18n:ct,setGlobalDateMasks:xt};o.default=Ct},function(i,o,s){var _=s(59),$=s(12),et=s(3).MESSAGE;i.exports=$(function(tt,j){return j.level!==!1&&(tt.level=_.strip(tt.level)),j.message!==!1&&(tt.message=_.strip(tt.message)),j.raw!==!1&&tt[et]&&(tt[et]=_.strip(tt[et])),tt})},function(i){i.exports=JSON.parse('{"name":"winston","description":"A logger for just about everything.","version":"3.3.3","author":"Charlie Robbins <charlie.robbins@gmail.com>","maintainers":["Jarrett Cruger <jcrugzz@gmail.com>","Chris Alderson <chrisalderson@protonmail.com>","David Hyde <dabh@stanford.edu>"],"repository":{"type":"git","url":"https://github.com/winstonjs/winston.git"},"keywords":["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],"dependencies":{"async":"^3.1.0","@dabh/diagnostics":"^2.0.2","is-stream":"^2.0.0","logform":"^2.2.0","one-time":"^1.0.0","readable-stream":"^3.4.0","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.4.0"},"devDependencies":{"@babel/cli":"^7.10.3","@babel/core":"^7.10.3","@babel/preset-env":"^7.10.3","@types/node":"^14.0.13","abstract-winston-transport":"^0.5.1","assume":"^2.2.0","colors":"^1.4.0","cross-spawn-async":"^2.2.5","eslint-config-populist":"^4.2.0","hock":"^1.4.1","mocha":"^8.0.1","nyc":"^15.1.0","rimraf":"^3.0.2","split2":"^3.1.1","std-mocks":"^1.0.1","through2":"^3.0.1","winston-compat":"^0.1.5"},"main":"./lib/winston","browser":"./dist/winston","types":"./index.d.ts","scripts":{"lint":"populist lib/*.js lib/winston/*.js lib/winston/**/*.js","pretest":"npm run lint","test":"nyc --reporter=text --reporter lcov npm run test:mocha","test:mocha":"mocha test/*.test.js test/**/*.test.js --exit","build":"./node_modules/.bin/rimraf dist && babel lib -d dist","prepublishOnly":"npm run build"},"engines":{"node":">= 6.4.0"},"license":"MIT"}')},function(i,o,s){Object.defineProperty(o,"Console",{configurable:!0,enumerable:!0,get:function(){return s(140)}}),Object.defineProperty(o,"File",{configurable:!0,enumerable:!0,get:function(){return s(149)}}),Object.defineProperty(o,"Http",{configurable:!0,enumerable:!0,get:function(){return s(189)}}),Object.defineProperty(o,"Stream",{configurable:!0,enumerable:!0,get:function(){return s(201)}})},function(i,o,s){(function(_){function $(Et){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Et)}function et(Et,Ot){if(!(Et instanceof Ot))throw new TypeError("Cannot call a class as a function")}function tt(Et,Ot){for(var Lt=0;Lt<Ot.length;Lt++){var Tt=Ot[Lt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(Et,Tt.key,Tt)}}function j(Et,Ot){return(j=Object.setPrototypeOf||function(Lt,Tt){return Lt.__proto__=Tt,Lt})(Et,Ot)}function it(Et){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Lt,Tt=ht(Et);if(Ot){var It=ht(this).constructor;Lt=Reflect.construct(Tt,arguments,It)}else Lt=Tt.apply(this,arguments);return st(this,Lt)}}function st(Et,Ot){return!Ot||$(Ot)!=="object"&&typeof Ot!="function"?function(Lt){if(Lt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Lt}(Et):Ot}function ht(Et){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Ot){return Ot.__proto__||Object.getPrototypeOf(Ot)})(Et)}var vt=s(18),ft=s(3),pt=ft.LEVEL,ct=ft.MESSAGE,yt=s(20);i.exports=function(Et){(function(mt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function");mt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:mt,writable:!0,configurable:!0}}),Bt&&j(mt,Bt)})(It,Et);var Ot,Lt,Tt=it(It);function It(){var mt,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return et(this,It),(mt=Tt.call(this,Bt)).name=Bt.name||"console",mt.stderrLevels=mt._stringArrayToSet(Bt.stderrLevels),mt.consoleWarnLevels=mt._stringArrayToSet(Bt.consoleWarnLevels),mt.eol=Bt.eol||vt.EOL,mt.setMaxListeners(30),mt}return Ot=It,(Lt=[{key:"log",value:function(mt,Bt){var nn=this;return _(function(){return nn.emit("logged",mt)}),this.stderrLevels[mt[pt]]?(console._stderr?console._stderr.write("".concat(mt[ct]).concat(this.eol)):console.error(mt[ct]),void(Bt&&Bt())):this.consoleWarnLevels[mt[pt]]?(console._stderr?console._stderr.write("".concat(mt[ct]).concat(this.eol)):console.warn(mt[ct]),void(Bt&&Bt())):(console._stdout?console._stdout.write("".concat(mt[ct]).concat(this.eol)):console.log(mt[ct]),void(Bt&&Bt()))}},{key:"_stringArrayToSet",value:function(mt,Bt){if(!mt)return{};if(Bt=Bt||"Cannot make set from type other than Array of string elements",!Array.isArray(mt))throw new Error(Bt);return mt.reduce(function(nn,sn){if(typeof sn!="string")throw new Error(Bt);return nn[sn]=!0,nn},{})}}])&&tt(Ot.prototype,Lt),It}(yt)}).call(this,s(15).setImmediate)},function(i,o,s){(function(_,$){(function(et,tt){if(!et.setImmediate){var j,it,st,ht,vt,ft=1,pt={},ct=!1,yt=et.document,Et=Object.getPrototypeOf&&Object.getPrototypeOf(et);Et=Et&&Et.setTimeout?Et:et,{}.toString.call(et.process)==="[object process]"?j=function(Tt){$.nextTick(function(){Lt(Tt)})}:function(){if(et.postMessage&&!et.importScripts){var Tt=!0,It=et.onmessage;return et.onmessage=function(){Tt=!1},et.postMessage("","*"),et.onmessage=It,Tt}}()?(ht="setImmediate$"+Math.random()+"$",vt=function(Tt){Tt.source===et&&typeof Tt.data=="string"&&Tt.data.indexOf(ht)===0&&Lt(+Tt.data.slice(ht.length))},et.addEventListener?et.addEventListener("message",vt,!1):et.attachEvent("onmessage",vt),j=function(Tt){et.postMessage(ht+Tt,"*")}):et.MessageChannel?((st=new MessageChannel).port1.onmessage=function(Tt){Lt(Tt.data)},j=function(Tt){st.port2.postMessage(Tt)}):yt&&"onreadystatechange"in yt.createElement("script")?(it=yt.documentElement,j=function(Tt){var It=yt.createElement("script");It.onreadystatechange=function(){Lt(Tt),It.onreadystatechange=null,it.removeChild(It),It=null},it.appendChild(It)}):j=function(Tt){setTimeout(Lt,0,Tt)},Et.setImmediate=function(Tt){typeof Tt!="function"&&(Tt=new Function(""+Tt));for(var It=new Array(arguments.length-1),mt=0;mt<It.length;mt++)It[mt]=arguments[mt+1];var Bt={callback:Tt,args:It};return pt[ft]=Bt,j(ft),ft++},Et.clearImmediate=Ot}function Ot(Tt){delete pt[Tt]}function Lt(Tt){if(ct)setTimeout(Lt,0,Tt);else{var It=pt[Tt];if(It){ct=!0;try{(function(mt){var Bt=mt.callback,nn=mt.args;switch(nn.length){case 0:Bt();break;case 1:Bt(nn[0]);break;case 2:Bt(nn[0],nn[1]);break;case 3:Bt(nn[0],nn[1],nn[2]);break;default:Bt.apply(void 0,nn)}})(It)}finally{Ot(Tt),ct=!1}}}}})(typeof self>"u"?_===void 0?this:_:self)}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(62)},function(i,o,s){(function(_,$){var et=s(16);i.exports=It;var tt,j=s(42);It.ReadableState=Tt,s(21).EventEmitter;var it=function(Pt,wt){return Pt.listeners(wt).length},st=s(63),ht=s(44).Buffer,vt=_.Uint8Array||function(){},ft=Object.create(s(17));ft.inherits=s(7);var pt=s(144),ct=void 0;ct=pt&&pt.debuglog?pt.debuglog("stream"):function(){};var yt,Et=s(145),Ot=s(64);ft.inherits(It,st);var Lt=["error","close","destroy","pause","resume"];function Tt(Pt,wt){Pt=Pt||{};var $t=wt instanceof(tt=tt||s(36));this.objectMode=!!Pt.objectMode,$t&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var Xt=Pt.highWaterMark,un=Pt.readableHighWaterMark,dn=this.objectMode?16:16384;this.highWaterMark=Xt||Xt===0?Xt:$t&&(un||un===0)?un:dn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(22).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function It(Pt){if(tt=tt||s(36),!(this instanceof It))return new It(Pt);this._readableState=new Tt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function mt(Pt,wt,$t,Xt,un){var dn,mn=Pt._readableState;return wt===null?(mn.reading=!1,function(an,en){if(!en.ended){if(en.decoder){var Mt=en.decoder.end();Mt&&Mt.length&&(en.buffer.push(Mt),en.length+=en.objectMode?1:Mt.length)}en.ended=!0,sn(an)}}(Pt,mn)):(un||(dn=function(an,en){var Mt;jt=en,ht.isBuffer(jt)||jt instanceof vt||typeof en=="string"||en===void 0||an.objectMode||(Mt=new TypeError("Invalid non-string/buffer chunk"));var jt;return Mt}(mn,wt)),dn?Pt.emit("error",dn):mn.objectMode||wt&&wt.length>0?(typeof wt=="string"||mn.objectMode||Object.getPrototypeOf(wt)===ht.prototype||(wt=function(an){return ht.from(an)}(wt)),Xt?mn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Bt(Pt,mn,wt,!0):mn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(mn.reading=!1,mn.decoder&&!$t?(wt=mn.decoder.write(wt),mn.objectMode||wt.length!==0?Bt(Pt,mn,wt,!1):St(Pt,mn)):Bt(Pt,mn,wt,!1))):Xt||(mn.reading=!1)),function(an){return!an.ended&&(an.needReadable||an.length<an.highWaterMark||an.length===0)}(mn)}function Bt(Pt,wt,$t,Xt){wt.flowing&&wt.length===0&&!wt.sync?(Pt.emit("data",$t),Pt.read(0)):(wt.length+=wt.objectMode?1:$t.length,Xt?wt.buffer.unshift($t):wt.buffer.push($t),wt.needReadable&&sn(Pt)),St(Pt,wt)}Object.defineProperty(It.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),It.prototype.destroy=Ot.destroy,It.prototype._undestroy=Ot.undestroy,It.prototype._destroy=function(Pt,wt){this.push(null),wt(Pt)},It.prototype.push=function(Pt,wt){var $t,Xt=this._readableState;return Xt.objectMode?$t=!0:typeof Pt=="string"&&((wt=wt||Xt.defaultEncoding)!==Xt.encoding&&(Pt=ht.from(Pt,wt),wt=""),$t=!0),mt(this,Pt,wt,!1,$t)},It.prototype.unshift=function(Pt){return mt(this,Pt,null,!0,!1)},It.prototype.isPaused=function(){return this._readableState.flowing===!1},It.prototype.setEncoding=function(Pt){return yt||(yt=s(22).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,wt){return Pt<=0||wt.length===0&&wt.ended?0:wt.objectMode?1:Pt!=Pt?wt.flowing&&wt.length?wt.buffer.head.data.length:wt.length:(Pt>wt.highWaterMark&&(wt.highWaterMark=function($t){return $t>=8388608?$t=8388608:($t--,$t|=$t>>>1,$t|=$t>>>2,$t|=$t>>>4,$t|=$t>>>8,$t|=$t>>>16,$t++),$t}(Pt)),Pt<=wt.length?Pt:wt.ended?wt.length:(wt.needReadable=!0,0))}function sn(Pt){var wt=Pt._readableState;wt.needReadable=!1,wt.emittedReadable||(ct("emitReadable",wt.flowing),wt.emittedReadable=!0,wt.sync?et.nextTick(xt,Pt):xt(Pt))}function xt(Pt){ct("emit readable"),Pt.emit("readable"),Kt(Pt)}function St(Pt,wt){wt.readingMore||(wt.readingMore=!0,et.nextTick(Nt,Pt,wt))}function Nt(Pt,wt){for(var $t=wt.length;!wt.reading&&!wt.flowing&&!wt.ended&&wt.length<wt.highWaterMark&&(ct("maybeReadMore read 0"),Pt.read(0),$t!==wt.length);)$t=wt.length;wt.readingMore=!1}function Ct(Pt){ct("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,wt){wt.reading||(ct("resume read 0"),Pt.read(0)),wt.resumeScheduled=!1,wt.awaitDrain=0,Pt.emit("resume"),Kt(Pt),wt.flowing&&!wt.reading&&Pt.read(0)}function Kt(Pt){var wt=Pt._readableState;for(ct("flow",wt.flowing);wt.flowing&&Pt.read()!==null;);}function Gt(Pt,wt){return wt.length===0?null:(wt.objectMode?$t=wt.buffer.shift():!Pt||Pt>=wt.length?($t=wt.decoder?wt.buffer.join(""):wt.buffer.length===1?wt.buffer.head.data:wt.buffer.concat(wt.length),wt.buffer.clear()):$t=function(Xt,un,dn){var mn;return Xt<un.head.data.length?(mn=un.head.data.slice(0,Xt),un.head.data=un.head.data.slice(Xt)):mn=Xt===un.head.data.length?un.shift():dn?function(an,en){var Mt=en.head,jt=1,Qt=Mt.data;for(an-=Qt.length;Mt=Mt.next;){var gn=Mt.data,hn=an>gn.length?gn.length:an;if(hn===gn.length?Qt+=gn:Qt+=gn.slice(0,an),(an-=hn)===0){hn===gn.length?(++jt,Mt.next?en.head=Mt.next:en.head=en.tail=null):(en.head=Mt,Mt.data=gn.slice(hn));break}++jt}return en.length-=jt,Qt}(Xt,un):function(an,en){var Mt=ht.allocUnsafe(an),jt=en.head,Qt=1;for(jt.data.copy(Mt),an-=jt.data.length;jt=jt.next;){var gn=jt.data,hn=an>gn.length?gn.length:an;if(gn.copy(Mt,Mt.length-an,0,hn),(an-=hn)===0){hn===gn.length?(++Qt,jt.next?en.head=jt.next:en.head=en.tail=null):(en.head=jt,jt.data=gn.slice(hn));break}++Qt}return en.length-=Qt,Mt}(Xt,un),mn}(Pt,wt.buffer,wt.decoder),$t);var $t}function Ut(Pt){var wt=Pt._readableState;if(wt.length>0)throw new Error('"endReadable()" called on non-empty stream');wt.endEmitted||(wt.ended=!0,et.nextTick(Ht,wt,Pt))}function Ht(Pt,wt){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,wt.readable=!1,wt.emit("end"))}function qt(Pt,wt){for(var $t=0,Xt=Pt.length;$t<Xt;$t++)if(Pt[$t]===wt)return $t;return-1}It.prototype.read=function(Pt){ct("read",Pt),Pt=parseInt(Pt,10);var wt=this._readableState,$t=Pt;if(Pt!==0&&(wt.emittedReadable=!1),Pt===0&&wt.needReadable&&(wt.length>=wt.highWaterMark||wt.ended))return ct("read: emitReadable",wt.length,wt.ended),wt.length===0&&wt.ended?Ut(this):sn(this),null;if((Pt=nn(Pt,wt))===0&&wt.ended)return wt.length===0&&Ut(this),null;var Xt,un=wt.needReadable;return ct("need readable",un),(wt.length===0||wt.length-Pt<wt.highWaterMark)&&ct("length less than watermark",un=!0),wt.ended||wt.reading?ct("reading or ended",un=!1):un&&(ct("do read"),wt.reading=!0,wt.sync=!0,wt.length===0&&(wt.needReadable=!0),this._read(wt.highWaterMark),wt.sync=!1,wt.reading||(Pt=nn($t,wt))),(Xt=Pt>0?Gt(Pt,wt):null)===null?(wt.needReadable=!0,Pt=0):wt.length-=Pt,wt.length===0&&(wt.ended||(wt.needReadable=!0),$t!==Pt&&wt.ended&&Ut(this)),Xt!==null&&this.emit("data",Xt),Xt},It.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},It.prototype.pipe=function(Pt,wt){var $t=this,Xt=this._readableState;switch(Xt.pipesCount){case 0:Xt.pipes=Pt;break;case 1:Xt.pipes=[Xt.pipes,Pt];break;default:Xt.pipes.push(Pt)}Xt.pipesCount+=1,ct("pipe count=%d opts=%j",Xt.pipesCount,wt);var un=(!wt||wt.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?mn:An;function dn(Mn,Yn){ct("onunpipe"),Mn===$t&&Yn&&Yn.hasUnpiped===!1&&(Yn.hasUnpiped=!0,ct("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",an),Pt.removeListener("error",Qt),Pt.removeListener("unpipe",dn),$t.removeListener("end",mn),$t.removeListener("end",An),$t.removeListener("data",jt),en=!0,!Xt.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||an())}function mn(){ct("onend"),Pt.end()}Xt.endEmitted?et.nextTick(un):$t.once("end",un),Pt.on("unpipe",dn);var an=function(Mn){return function(){var Yn=Mn._readableState;ct("pipeOnDrain",Yn.awaitDrain),Yn.awaitDrain&&Yn.awaitDrain--,Yn.awaitDrain===0&&it(Mn,"data")&&(Yn.flowing=!0,Kt(Mn))}}($t);Pt.on("drain",an);var en=!1,Mt=!1;function jt(Mn){ct("ondata"),Mt=!1,Pt.write(Mn)!==!1||Mt||((Xt.pipesCount===1&&Xt.pipes===Pt||Xt.pipesCount>1&&qt(Xt.pipes,Pt)!==-1)&&!en&&(ct("false write response, pause",$t._readableState.awaitDrain),$t._readableState.awaitDrain++,Mt=!0),$t.pause())}function Qt(Mn){ct("onerror",Mn),An(),Pt.removeListener("error",Qt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),An()}function hn(){ct("onfinish"),Pt.removeListener("close",gn),An()}function An(){ct("unpipe"),$t.unpipe(Pt)}return $t.on("data",jt),function(Mn,Yn,Nr){if(typeof Mn.prependListener=="function")return Mn.prependListener(Yn,Nr);Mn._events&&Mn._events[Yn]?j(Mn._events[Yn])?Mn._events[Yn].unshift(Nr):Mn._events[Yn]=[Nr,Mn._events[Yn]]:Mn.on(Yn,Nr)}(Pt,"error",Qt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",$t),Xt.flowing||(ct("pipe resume"),$t.resume()),Pt},It.prototype.unpipe=function(Pt){var wt=this._readableState,$t={hasUnpiped:!1};if(wt.pipesCount===0)return this;if(wt.pipesCount===1)return Pt&&Pt!==wt.pipes||(Pt||(Pt=wt.pipes),wt.pipes=null,wt.pipesCount=0,wt.flowing=!1,Pt&&Pt.emit("unpipe",this,$t)),this;if(!Pt){var Xt=wt.pipes,un=wt.pipesCount;wt.pipes=null,wt.pipesCount=0,wt.flowing=!1;for(var dn=0;dn<un;dn++)Xt[dn].emit("unpipe",this,$t);return this}var mn=qt(wt.pipes,Pt);return mn===-1||(wt.pipes.splice(mn,1),wt.pipesCount-=1,wt.pipesCount===1&&(wt.pipes=wt.pipes[0]),Pt.emit("unpipe",this,$t)),this},It.prototype.on=function(Pt,wt){var $t=st.prototype.on.call(this,Pt,wt);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var Xt=this._readableState;Xt.endEmitted||Xt.readableListening||(Xt.readableListening=Xt.needReadable=!0,Xt.emittedReadable=!1,Xt.reading?Xt.length&&sn(this):et.nextTick(Ct,this))}return $t},It.prototype.addListener=It.prototype.on,It.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ct("resume"),Pt.flowing=!0,function(wt,$t){$t.resumeScheduled||($t.resumeScheduled=!0,et.nextTick(Vt,wt,$t))}(this,Pt)),this},It.prototype.pause=function(){return ct("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ct("pause"),this._readableState.flowing=!1,this.emit("pause")),this},It.prototype.wrap=function(Pt){var wt=this,$t=this._readableState,Xt=!1;for(var un in Pt.on("end",function(){if(ct("wrapped end"),$t.decoder&&!$t.ended){var mn=$t.decoder.end();mn&&mn.length&&wt.push(mn)}wt.push(null)}),Pt.on("data",function(mn){ct("wrapped data"),$t.decoder&&(mn=$t.decoder.write(mn)),$t.objectMode&&mn==null||($t.objectMode||mn&&mn.length)&&(wt.push(mn)||(Xt=!0,Pt.pause()))}),Pt)this[un]===void 0&&typeof Pt[un]=="function"&&(this[un]=function(mn){return function(){return Pt[mn].apply(Pt,arguments)}}(un));for(var dn=0;dn<Lt.length;dn++)Pt.on(Lt[dn],this.emit.bind(this,Lt[dn]));return this._read=function(mn){ct("wrapped _read",mn),Xt&&(Xt=!1,Pt.resume())},this},Object.defineProperty(It.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),It._fromList=Gt}).call(this,s(6),s(2))},function(i,o){},function(i,o,s){var _=s(44).Buffer,$=s(146);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),vt=this.head,ft=0;vt;)j=vt.data,it=ht,st=ft,j.copy(it,st),ft+=vt.data.length,vt=vt.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){var _=s(13),$=s(3).LEVEL,et=s(20),tt=i.exports=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");function it(st){this.emit("error",st,this.transport)}this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=it.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(var st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([this.transport.name+" is a legacy winston transport. Consider upgrading: ","- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){(function(_,$){function et(xt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St})(xt)}function tt(xt,St){if(!(xt instanceof St))throw new TypeError("Cannot call a class as a function")}function j(xt,St){for(var Nt=0;Nt<St.length;Nt++){var Ct=St[Nt];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(xt,Ct.key,Ct)}}function it(xt,St){return(it=Object.setPrototypeOf||function(Nt,Ct){return Nt.__proto__=Ct,Nt})(xt,St)}function st(xt){var St=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Nt,Ct=ft(xt);if(St){var Vt=ft(this).constructor;Nt=Reflect.construct(Ct,arguments,Vt)}else Nt=Ct.apply(this,arguments);return ht(this,Nt)}}function ht(xt,St){return!St||et(St)!=="object"&&typeof St!="function"?vt(xt):St}function vt(xt){if(xt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xt}function ft(xt){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(St){return St.__proto__||Object.getPrototypeOf(St)})(xt)}var pt=s(65),ct=s(56),yt=s(150),Et=s(160),Ot=s(3).MESSAGE,Lt=s(32),Tt=Lt.Stream,It=Lt.PassThrough,mt=s(20),Bt=s(38)("winston:file"),nn=s(18),sn=s(188);i.exports=function(xt){(function(Kt,Gt){if(typeof Gt!="function"&&Gt!==null)throw new TypeError("Super expression must either be null or a function");Kt.prototype=Object.create(Gt&&Gt.prototype,{constructor:{value:Kt,writable:!0,configurable:!0}}),Gt&&it(Kt,Gt)})(Vt,xt);var St,Nt,Ct=st(Vt);function Vt(){var Kt,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function Ut(Ht){for(var qt=arguments.length,Pt=new Array(qt>1?qt-1:0),wt=1;wt<qt;wt++)Pt[wt-1]=arguments[wt];Pt.slice(1).forEach(function($t){if(Gt[$t])throw new Error("Cannot set ".concat($t," and ").concat(Ht," together"))})}if(tt(this,Vt),(Kt=Ct.call(this,Gt)).name=Gt.name||"file",Kt._stream=new It,Kt._stream.setMaxListeners(30),Kt._onError=Kt._onError.bind(vt(Kt)),Gt.filename||Gt.dirname)Ut("filename or dirname","stream"),Kt._basename=Kt.filename=Gt.filename?ct.basename(Gt.filename):"winston.log",Kt.dirname=Gt.dirname||ct.dirname(Gt.filename),Kt.options=Gt.options||{flags:"a"};else{if(!Gt.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),Ut("stream","filename","maxsize"),Kt._dest=Kt._stream.pipe(Kt._setupStream(Gt.stream)),Kt.dirname=ct.dirname(Kt._dest.path)}return Kt.maxsize=Gt.maxsize||null,Kt.rotationFormat=Gt.rotationFormat||!1,Kt.zippedArchive=Gt.zippedArchive||!1,Kt.maxFiles=Gt.maxFiles||null,Kt.eol=Gt.eol||nn.EOL,Kt.tailable=Gt.tailable||!1,Kt._size=0,Kt._pendingSize=0,Kt._created=0,Kt._drain=!1,Kt._opening=!1,Kt._ending=!1,Kt.dirname&&Kt._createLogDirIfNotExist(Kt.dirname),Kt.open(),Kt}return St=Vt,(Nt=[{key:"finishIfEnding",value:function(){var Kt=this;this._ending&&(this._opening?this.once("open",function(){Kt._stream.once("finish",function(){return Kt.emit("finish")}),_(function(){return Kt._stream.end()})}):(this._stream.once("finish",function(){return Kt.emit("finish")}),_(function(){return Kt._stream.end()})))}},{key:"log",value:function(Kt){var Gt=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};if(this.silent)return Ut(),!0;if(this._drain)this._stream.once("drain",function(){Gt._drain=!1,Gt.log(Kt,Ut)});else{if(!this._rotate){var Ht="".concat(Kt[Ot]).concat(this.eol),qt=$.byteLength(Ht);this._pendingSize+=qt,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);var Pt=this._stream.write(Ht,wt.bind(this));return Pt?Ut():(this._drain=!0,this._stream.once("drain",function(){Gt._drain=!1,Ut()})),Bt("written",Pt,this._drain),this.finishIfEnding(),Pt}this._stream.once("rotate",function(){Gt._rotate=!1,Gt.log(Kt,Ut)})}function wt(){var $t=this;this._size+=qt,this._pendingSize-=qt,Bt("logged %s %s",this._size,Ht),this.emit("logged",Kt),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream(function(){return $t._rotateFile()}))}}},{key:"query",value:function(Kt,Gt){typeof Kt=="function"&&(Gt=Kt,Kt={}),Kt=function(Xt){return(Xt=Xt||{}).rows=Xt.rows||Xt.limit||10,Xt.start=Xt.start||0,Xt.until=Xt.until||new Date,et(Xt.until)!=="object"&&(Xt.until=new Date(Xt.until)),Xt.from=Xt.from||Xt.until-864e5,et(Xt.from)!=="object"&&(Xt.from=new Date(Xt.from)),Xt.order=Xt.order||"desc",Xt}(Kt);var Ut=ct.join(this.dirname,this.filename),Ht="",qt=[],Pt=0,wt=pt.createReadStream(Ut,{encoding:"utf8"});function $t(Xt,un){try{var dn=JSON.parse(Xt);(function(mn){if(mn&&et(mn)==="object"){var an=new Date(mn.timestamp);if(!(Kt.from&&an<Kt.from||Kt.until&&an>Kt.until||Kt.level&&Kt.level!==mn.level))return!0}})(dn)&&function(mn){Kt.rows&&qt.length>=Kt.rows&&Kt.order!=="desc"?wt.readable&&wt.destroy():(Kt.fields&&(mn=Kt.fields.reduce(function(an,en){return an[en]=mn[en],an},{})),Kt.order==="desc"&&qt.length>=Kt.rows&&qt.shift(),qt.push(mn))}(dn)}catch(mn){un||wt.emit("error",mn)}}wt.on("error",function(Xt){if(wt.readable&&wt.destroy(),Gt)return Xt.code!=="ENOENT"?Gt(Xt):Gt(null,qt)}),wt.on("data",function(Xt){for(var un=(Xt=(Ht+Xt).split(/\n+/)).length-1,dn=0;dn<un;dn++)(!Kt.start||Pt>=Kt.start)&&$t(Xt[dn]),Pt++;Ht=Xt[un]}),wt.on("close",function(){Ht&&$t(Ht,!0),Kt.order==="desc"&&(qt=qt.reverse()),Gt&&Gt(null,qt)})}},{key:"stream",value:function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Gt=ct.join(this.dirname,this.filename),Ut=new Tt,Ht={file:Gt,start:Kt.start};return Ut.destroy=sn(Ht,function(qt,Pt){if(qt)return Ut.emit("error",qt);try{Ut.emit("data",Pt),Pt=JSON.parse(Pt),Ut.emit("log",Pt)}catch(wt){Ut.emit("error",wt)}}),Ut}},{key:"open",value:function(){var Kt=this;this.filename&&(this._opening||(this._opening=!0,this.stat(function(Gt,Ut){if(Gt)return Kt.emit("error",Gt);Bt("stat done: %s { size: %s }",Kt.filename,Ut),Kt._size=Ut,Kt._dest=Kt._createStream(Kt._stream),Kt._opening=!1,Kt.once("open",function(){Kt._stream.eventNames().includes("rotate")?Kt._stream.emit("rotate"):Kt._rotate=!1})})))}},{key:"stat",value:function(Kt){var Gt=this,Ut=this._getFile(),Ht=ct.join(this.dirname,Ut);pt.stat(Ht,function(qt,Pt){return qt&&qt.code==="ENOENT"?(Bt("ENOENTok",Ht),Gt.filename=Ut,Kt(null,0)):qt?(Bt("err ".concat(qt.code," ").concat(Ht)),Kt(qt)):!Pt||Gt._needsNewFile(Pt.size)?Gt._incFile(function(){return Gt.stat(Kt)}):(Gt.filename=Ut,void Kt(null,Pt.size))})}},{key:"close",value:function(Kt){var Gt=this;this._stream&&this._stream.end(function(){Kt&&Kt(),Gt.emit("flush"),Gt.emit("closed")})}},{key:"_needsNewFile",value:function(Kt){return Kt=Kt||this._size,this.maxsize&&Kt>=this.maxsize}},{key:"_onError",value:function(Kt){this.emit("error",Kt)}},{key:"_setupStream",value:function(Kt){return Kt.on("error",this._onError),Kt}},{key:"_cleanupStream",value:function(Kt){return Kt.removeListener("error",this._onError),Kt}},{key:"_rotateFile",value:function(){var Kt=this;this._incFile(function(){return Kt.open()})}},{key:"_endStream",value:function(){var Kt=this,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this._dest?(this._stream.unpipe(this._dest),this._dest.end(function(){Kt._cleanupStream(Kt._dest),Gt()})):Gt()}},{key:"_createStream",value:function(Kt){var Gt=this,Ut=ct.join(this.dirname,this.filename);Bt("create stream start",Ut,this.options);var Ht=pt.createWriteStream(Ut,this.options).on("error",function(Pt){return Bt(Pt)}).on("close",function(){return Bt("close",Ht.path,Ht.bytesWritten)}).on("open",function(){Bt("file open ok",Ut),Gt.emit("open",Ut),Kt.pipe(Ht),Gt.rotatedWhileOpening&&(Gt._stream=new It,Gt._stream.setMaxListeners(30),Gt._rotateFile(),Gt.rotatedWhileOpening=!1,Gt._cleanupStream(Ht),Kt.end())});if(Bt("create stream ok",Ut),this.zippedArchive){var qt=Et.createGzip();return qt.pipe(Ht),qt}return Ht}},{key:"_incFile",value:function(Kt){Bt("_incFile",this.filename);var Gt=ct.extname(this._basename),Ut=ct.basename(this._basename,Gt);this.tailable?this._checkMaxFilesTailable(Gt,Ut,Kt):(this._created+=1,this._checkMaxFilesIncrementing(Gt,Ut,Kt))}},{key:"_getFile",value:function(){var Kt=ct.extname(this._basename),Gt=ct.basename(this._basename,Kt),Ut=this.rotationFormat?this.rotationFormat():this._created,Ht=!this.tailable&&this._created?"".concat(Gt).concat(Ut).concat(Kt):"".concat(Gt).concat(Kt);return this.zippedArchive&&!this.tailable?"".concat(Ht,".gz"):Ht}},{key:"_checkMaxFilesIncrementing",value:function(Kt,Gt,Ut){if(!this.maxFiles||this._created<this.maxFiles)return _(Ut);var Ht=this._created-this.maxFiles,qt=Ht!==0?Ht:"",Pt=this.zippedArchive?".gz":"",wt="".concat(Gt).concat(qt).concat(Kt).concat(Pt),$t=ct.join(this.dirname,wt);pt.unlink($t,Ut)}},{key:"_checkMaxFilesTailable",value:function(Kt,Gt,Ut){var Ht=this,qt=[];if(this.maxFiles){for(var Pt=this.zippedArchive?".gz":"",wt=this.maxFiles-1;wt>1;wt--)qt.push(function($t,Xt){var un=this,dn="".concat(Gt).concat($t-1).concat(Kt).concat(Pt),mn=ct.join(this.dirname,dn);pt.exists(mn,function(an){if(!an)return Xt(null);dn="".concat(Gt).concat($t).concat(Kt).concat(Pt),pt.rename(mn,ct.join(un.dirname,dn),Xt)})}.bind(this,wt));yt(qt,function(){pt.rename(ct.join(Ht.dirname,"".concat(Gt).concat(Kt)),ct.join(Ht.dirname,"".concat(Gt,"1").concat(Kt).concat(Pt)),Ut)})}}},{key:"_createLogDirIfNotExist",value:function(Kt){pt.existsSync(Kt)||pt.mkdirSync(Kt,{recursive:!0})}}])&&j(St.prototype,Nt),Vt}(mt)}).call(this,s(15).setImmediate,s(5).Buffer)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j){return(0,_.default)($.default,tt,j)};var _=et(s(151)),$=et(s(155));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(45)),$=tt(s(25)),et=tt(s(30));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)((j,it,st)=>{var ht=(0,_.default)(it)?[]:{};j(it,(vt,ft,pt)=>{(0,$.default)(vt)((ct,...yt)=>{yt.length<2&&([yt]=yt),ht[ft]=yt,pt(ct)})},vt=>st(vt,ht))},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(st){return(0,et.isAsync)(st)?function(...ht){const vt=ht.pop();return j(st.apply(this,ht),vt)}:(0,_.default)(function(ht,vt){var ft;try{ft=st.apply(this,ht)}catch(pt){return vt(pt)}if(ft&&typeof ft.then=="function")return j(ft,vt);vt(null,ft)})};var _=tt(s(153)),$=tt(s(154)),et=s(25);function tt(st){return st&&st.__esModule?st:{default:st}}function j(st,ht){return st.then(vt=>{it(ht,null,vt)},vt=>{it(ht,vt&&vt.message?vt:new Error(vt))})}function it(st,ht,vt){try{st(ht,vt)}catch(ft){(0,$.default)(pt=>{throw pt},ft)}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){var et=$.pop();return _.call(this,$,et)}},i.exports=o.default},function(i,o,s){(function(_,$){Object.defineProperty(o,"__esModule",{value:!0}),o.fallback=it,o.wrap=st;var et,tt=o.hasSetImmediate=typeof _=="function"&&_,j=o.hasNextTick=typeof $=="object"&&typeof $.nextTick=="function";function it(ht){setTimeout(ht,0)}function st(ht){return(vt,...ft)=>ht(()=>vt(...ft))}et=tt?_:j?$.nextTick:it,o.default=st(et)}).call(this,s(15).setImmediate,s(2))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=et(s(66)),$=et(s(30));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}o.default=(0,$.default)(function(tt,j,it){return(0,_.default)(tt,1,j,it)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=st(s(67)),$=st(s(157)),et=st(s(68)),tt=s(25),j=st(s(159)),it=st(s(46));function st(ht){return ht&&ht.__esModule?ht:{default:ht}}o.default=ht=>(vt,ft,pt)=>{if(pt=(0,_.default)(pt),ht<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!vt)return pt(null);if((0,tt.isAsyncGenerator)(vt))return(0,j.default)(vt,ht,ft,pt);if((0,tt.isAsyncIterable)(vt))return(0,j.default)(vt[Symbol.asyncIterator](),ht,ft,pt);var ct=(0,$.default)(vt),yt=!1,Et=!1,Ot=0,Lt=!1;function Tt(mt,Bt){if(!Et)if(Ot-=1,mt)yt=!0,pt(mt);else if(mt===!1)yt=!0,Et=!0;else{if(Bt===it.default||yt&&Ot<=0)return yt=!0,pt(null);Lt||It()}}function It(){for(Lt=!0;Ot<ht&&!yt;){var mt=ct();if(mt===null)return yt=!0,void(Ot<=0&&pt(null));Ot+=1,ft(mt.value,mt.key,(0,et.default)(Tt))}Lt=!1}It()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt){if((0,_.default)(tt))return function(ft){var pt=-1,ct=ft.length;return function(){return++pt<ct?{value:ft[pt],key:pt}:null}}(tt);var j=(0,$.default)(tt);return j?function(ft){var pt=-1;return function(){var ct=ft.next();return ct.done?null:(pt++,{value:ct.value,key:pt})}}(j):(it=tt,st=it?Object.keys(it):[],ht=-1,vt=st.length,function(){var ft=st[++ht];return ht<vt?{value:it[ft],key:ft}:null});var it,st,ht,vt};var _=et(s(45)),$=et(s(158));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _[Symbol.iterator]&&_[Symbol.iterator]()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j,it,st){let ht=!1,vt=!1,ft=!1,pt=0,ct=0;function yt(){pt>=j||ft||ht||(ft=!0,tt.next().then(({value:Lt,done:Tt})=>{if(!vt&&!ht){if(ft=!1,Tt)return ht=!0,void(pt<=0&&st(null));pt++,it(Lt,ct,Et),ct++,yt()}}).catch(Ot))}function Et(Lt,Tt){if(pt-=1,!vt)return Lt?Ot(Lt):Lt===!1?(ht=!0,void(vt=!0)):Tt===et.default||ht&&pt<=0?(ht=!0,st(null)):void yt()}function Ot(Lt){vt||(ft=!1,ht=!0,st(Lt))}yt()};var _,$=s(46),et=(_=$)&&_.__esModule?_:{default:_};i.exports=o.default},function(i,o,s){(function(_){var $=s(5).Buffer,et=s(161).Transform,tt=s(169),j=s(13),it=s(74).ok,st=s(5).kMaxLength,ht="Cannot create final Buffer. It would be larger than 0x"+st.toString(16)+" bytes";tt.Z_MIN_WINDOWBITS=8,tt.Z_MAX_WINDOWBITS=15,tt.Z_DEFAULT_WINDOWBITS=15,tt.Z_MIN_CHUNK=64,tt.Z_MAX_CHUNK=1/0,tt.Z_DEFAULT_CHUNK=16384,tt.Z_MIN_MEMLEVEL=1,tt.Z_MAX_MEMLEVEL=9,tt.Z_DEFAULT_MEMLEVEL=8,tt.Z_MIN_LEVEL=-1,tt.Z_MAX_LEVEL=9,tt.Z_DEFAULT_LEVEL=tt.Z_DEFAULT_COMPRESSION;for(var vt=Object.keys(tt),ft=0;ft<vt.length;ft++){var pt=vt[ft];pt.match(/^Z/)&&Object.defineProperty(o,pt,{enumerable:!0,value:tt[pt],writable:!1})}for(var ct={Z_OK:tt.Z_OK,Z_STREAM_END:tt.Z_STREAM_END,Z_NEED_DICT:tt.Z_NEED_DICT,Z_ERRNO:tt.Z_ERRNO,Z_STREAM_ERROR:tt.Z_STREAM_ERROR,Z_DATA_ERROR:tt.Z_DATA_ERROR,Z_MEM_ERROR:tt.Z_MEM_ERROR,Z_BUF_ERROR:tt.Z_BUF_ERROR,Z_VERSION_ERROR:tt.Z_VERSION_ERROR},yt=Object.keys(ct),Et=0;Et<yt.length;Et++){var Ot=yt[Et];ct[ct[Ot]]=Ot}function Lt(Gt,Ut,Ht){var qt=[],Pt=0;function wt(){for(var Xt;(Xt=Gt.read())!==null;)qt.push(Xt),Pt+=Xt.length;Gt.once("readable",wt)}function $t(){var Xt,un=null;Pt>=st?un=new RangeError(ht):Xt=$.concat(qt,Pt),qt=[],Gt.close(),Ht(un,Xt)}Gt.on("error",function(Xt){Gt.removeListener("end",$t),Gt.removeListener("readable",wt),Ht(Xt)}),Gt.on("end",$t),Gt.end(Ut),wt()}function Tt(Gt,Ut){if(typeof Ut=="string"&&(Ut=$.from(Ut)),!$.isBuffer(Ut))throw new TypeError("Not a string or buffer");var Ht=Gt._finishFlushFlag;return Gt._processChunk(Ut,Ht)}function It(Gt){if(!(this instanceof It))return new It(Gt);Ct.call(this,Gt,tt.DEFLATE)}function mt(Gt){if(!(this instanceof mt))return new mt(Gt);Ct.call(this,Gt,tt.INFLATE)}function Bt(Gt){if(!(this instanceof Bt))return new Bt(Gt);Ct.call(this,Gt,tt.GZIP)}function nn(Gt){if(!(this instanceof nn))return new nn(Gt);Ct.call(this,Gt,tt.GUNZIP)}function sn(Gt){if(!(this instanceof sn))return new sn(Gt);Ct.call(this,Gt,tt.DEFLATERAW)}function xt(Gt){if(!(this instanceof xt))return new xt(Gt);Ct.call(this,Gt,tt.INFLATERAW)}function St(Gt){if(!(this instanceof St))return new St(Gt);Ct.call(this,Gt,tt.UNZIP)}function Nt(Gt){return Gt===tt.Z_NO_FLUSH||Gt===tt.Z_PARTIAL_FLUSH||Gt===tt.Z_SYNC_FLUSH||Gt===tt.Z_FULL_FLUSH||Gt===tt.Z_FINISH||Gt===tt.Z_BLOCK}function Ct(Gt,Ut){var Ht=this;if(this._opts=Gt=Gt||{},this._chunkSize=Gt.chunkSize||o.Z_DEFAULT_CHUNK,et.call(this,Gt),Gt.flush&&!Nt(Gt.flush))throw new Error("Invalid flush flag: "+Gt.flush);if(Gt.finishFlush&&!Nt(Gt.finishFlush))throw new Error("Invalid flush flag: "+Gt.finishFlush);if(this._flushFlag=Gt.flush||tt.Z_NO_FLUSH,this._finishFlushFlag=Gt.finishFlush!==void 0?Gt.finishFlush:tt.Z_FINISH,Gt.chunkSize&&(Gt.chunkSize<o.Z_MIN_CHUNK||Gt.chunkSize>o.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+Gt.chunkSize);if(Gt.windowBits&&(Gt.windowBits<o.Z_MIN_WINDOWBITS||Gt.windowBits>o.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+Gt.windowBits);if(Gt.level&&(Gt.level<o.Z_MIN_LEVEL||Gt.level>o.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+Gt.level);if(Gt.memLevel&&(Gt.memLevel<o.Z_MIN_MEMLEVEL||Gt.memLevel>o.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+Gt.memLevel);if(Gt.strategy&&Gt.strategy!=o.Z_FILTERED&&Gt.strategy!=o.Z_HUFFMAN_ONLY&&Gt.strategy!=o.Z_RLE&&Gt.strategy!=o.Z_FIXED&&Gt.strategy!=o.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+Gt.strategy);if(Gt.dictionary&&!$.isBuffer(Gt.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new tt.Zlib(Ut);var qt=this;this._hadError=!1,this._handle.onerror=function($t,Xt){Vt(qt),qt._hadError=!0;var un=new Error($t);un.errno=Xt,un.code=o.codes[Xt],qt.emit("error",un)};var Pt=o.Z_DEFAULT_COMPRESSION;typeof Gt.level=="number"&&(Pt=Gt.level);var wt=o.Z_DEFAULT_STRATEGY;typeof Gt.strategy=="number"&&(wt=Gt.strategy),this._handle.init(Gt.windowBits||o.Z_DEFAULT_WINDOWBITS,Pt,Gt.memLevel||o.Z_DEFAULT_MEMLEVEL,wt,Gt.dictionary),this._buffer=$.allocUnsafe(this._chunkSize),this._offset=0,this._level=Pt,this._strategy=wt,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!Ht._handle},configurable:!0,enumerable:!0})}function Vt(Gt,Ut){Ut&&_.nextTick(Ut),Gt._handle&&(Gt._handle.close(),Gt._handle=null)}function Kt(Gt){Gt.emit("close")}Object.defineProperty(o,"codes",{enumerable:!0,value:Object.freeze(ct),writable:!1}),o.Deflate=It,o.Inflate=mt,o.Gzip=Bt,o.Gunzip=nn,o.DeflateRaw=sn,o.InflateRaw=xt,o.Unzip=St,o.createDeflate=function(Gt){return new It(Gt)},o.createInflate=function(Gt){return new mt(Gt)},o.createDeflateRaw=function(Gt){return new sn(Gt)},o.createInflateRaw=function(Gt){return new xt(Gt)},o.createGzip=function(Gt){return new Bt(Gt)},o.createGunzip=function(Gt){return new nn(Gt)},o.createUnzip=function(Gt){return new St(Gt)},o.deflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new It(Ut),Gt,Ht)},o.deflateSync=function(Gt,Ut){return Tt(new It(Ut),Gt)},o.gzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new Bt(Ut),Gt,Ht)},o.gzipSync=function(Gt,Ut){return Tt(new Bt(Ut),Gt)},o.deflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new sn(Ut),Gt,Ht)},o.deflateRawSync=function(Gt,Ut){return Tt(new sn(Ut),Gt)},o.unzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new St(Ut),Gt,Ht)},o.unzipSync=function(Gt,Ut){return Tt(new St(Ut),Gt)},o.inflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new mt(Ut),Gt,Ht)},o.inflateSync=function(Gt,Ut){return Tt(new mt(Ut),Gt)},o.gunzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new nn(Ut),Gt,Ht)},o.gunzipSync=function(Gt,Ut){return Tt(new nn(Ut),Gt)},o.inflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new xt(Ut),Gt,Ht)},o.inflateRawSync=function(Gt,Ut){return Tt(new xt(Ut),Gt)},j.inherits(Ct,et),Ct.prototype.params=function(Gt,Ut,Ht){if(Gt<o.Z_MIN_LEVEL||Gt>o.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+Gt);if(Ut!=o.Z_FILTERED&&Ut!=o.Z_HUFFMAN_ONLY&&Ut!=o.Z_RLE&&Ut!=o.Z_FIXED&&Ut!=o.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+Ut);if(this._level!==Gt||this._strategy!==Ut){var qt=this;this.flush(tt.Z_SYNC_FLUSH,function(){it(qt._handle,"zlib binding closed"),qt._handle.params(Gt,Ut),qt._hadError||(qt._level=Gt,qt._strategy=Ut,Ht&&Ht())})}else _.nextTick(Ht)},Ct.prototype.reset=function(){return it(this._handle,"zlib binding closed"),this._handle.reset()},Ct.prototype._flush=function(Gt){this._transform($.alloc(0),"",Gt)},Ct.prototype.flush=function(Gt,Ut){var Ht=this,qt=this._writableState;(typeof Gt=="function"||Gt===void 0&&!Ut)&&(Ut=Gt,Gt=tt.Z_FULL_FLUSH),qt.ended?Ut&&_.nextTick(Ut):qt.ending?Ut&&this.once("end",Ut):qt.needDrain?Ut&&this.once("drain",function(){return Ht.flush(Gt,Ut)}):(this._flushFlag=Gt,this.write($.alloc(0),"",Ut))},Ct.prototype.close=function(Gt){Vt(this,Gt),_.nextTick(Kt,this)},Ct.prototype._transform=function(Gt,Ut,Ht){var qt,Pt=this._writableState,wt=(Pt.ending||Pt.ended)&&(!Gt||Pt.length===Gt.length);return Gt===null||$.isBuffer(Gt)?this._handle?(wt?qt=this._finishFlushFlag:(qt=this._flushFlag,Gt.length>=Pt.length&&(this._flushFlag=this._opts.flush||tt.Z_NO_FLUSH)),void this._processChunk(Gt,qt,Ht)):Ht(new Error("zlib binding closed")):Ht(new Error("invalid input"))},Ct.prototype._processChunk=function(Gt,Ut,Ht){var qt=Gt&&Gt.length,Pt=this._chunkSize-this._offset,wt=0,$t=this,Xt=typeof Ht=="function";if(!Xt){var un,dn=[],mn=0;this.on("error",function(Qt){un=Qt}),it(this._handle,"zlib binding closed");do var an=this._handle.writeSync(Ut,Gt,wt,qt,this._buffer,this._offset,Pt);while(!this._hadError&&jt(an[0],an[1]));if(this._hadError)throw un;if(mn>=st)throw Vt(this),new RangeError(ht);var en=$.concat(dn,mn);return Vt(this),en}it(this._handle,"zlib binding closed");var Mt=this._handle.write(Ut,Gt,wt,qt,this._buffer,this._offset,Pt);function jt(Qt,gn){if(this&&(this.buffer=null,this.callback=null),!$t._hadError){var hn=Pt-gn;if(it(hn>=0,"have should not go down"),hn>0){var An=$t._buffer.slice($t._offset,$t._offset+hn);$t._offset+=hn,Xt?$t.push(An):(dn.push(An),mn+=An.length)}if((gn===0||$t._offset>=$t._chunkSize)&&(Pt=$t._chunkSize,$t._offset=0,$t._buffer=$.allocUnsafe($t._chunkSize)),gn===0){if(wt+=qt-Qt,qt=Qt,!Xt)return!0;var Mn=$t._handle.write(Ut,Gt,wt,qt,$t._buffer,$t._offset,$t._chunkSize);return Mn.callback=jt,void(Mn.buffer=Gt)}if(!Xt)return!1;Ht()}}Mt.buffer=Gt,Mt.callback=jt},j.inherits(It,Ct),j.inherits(mt,Ct),j.inherits(Bt,Ct),j.inherits(nn,Ct),j.inherits(sn,Ct),j.inherits(xt,Ct),j.inherits(St,Ct)}).call(this,s(2))},function(i,o,s){i.exports=$;var _=s(21).EventEmitter;function $(){_.call(this)}s(7)($,_),$.Readable=s(31),$.Writable=s(73),$.Duplex=s(166),$.Transform=s(167),$.PassThrough=s(168),$.Stream=$,$.prototype.pipe=function(et,tt){var j=this;function it(yt){et.writable&&et.write(yt)===!1&&j.pause&&j.pause()}function st(){j.readable&&j.resume&&j.resume()}j.on("data",it),et.on("drain",st),et._isStdio||tt&&tt.end===!1||(j.on("end",vt),j.on("close",ft));var ht=!1;function vt(){ht||(ht=!0,et.end())}function ft(){ht||(ht=!0,typeof et.destroy=="function"&&et.destroy())}function pt(yt){if(ct(),_.listenerCount(this,"error")===0)throw yt}function ct(){j.removeListener("data",it),et.removeListener("drain",st),j.removeListener("end",vt),j.removeListener("close",ft),j.removeListener("error",pt),et.removeListener("error",pt),j.removeListener("end",ct),j.removeListener("close",ct),et.removeListener("close",ct)}return j.on("error",pt),et.on("error",pt),j.on("end",ct),j.on("close",ct),et.on("close",ct),et.emit("pipe",j),et}},function(i,o){},function(i,o,s){var _=s(47).Buffer,$=s(164);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),vt=this.head,ft=0;vt;)j=vt.data,it=ht,st=ft,j.copy(it,st),ft+=vt.data.length,vt=vt.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){i.exports=et;var _=s(72),$=s(17);function et(tt){if(!(this instanceof et))return new et(tt);_.call(this,tt)}$.inherits=s(7),$.inherits(et,_),et.prototype._transform=function(tt,j,it){it(null,tt)}},function(i,o,s){i.exports=s(23)},function(i,o,s){i.exports=s(31).Transform},function(i,o,s){i.exports=s(31).PassThrough},function(i,o,s){(function(_,$){var et=s(74),tt=s(171),j=s(172),it=s(175),st=s(178);for(var ht in st)o[ht]=st[ht];o.NONE=0,o.DEFLATE=1,o.INFLATE=2,o.GZIP=3,o.GUNZIP=4,o.DEFLATERAW=5,o.INFLATERAW=6,o.UNZIP=7;function vt(ft){if(typeof ft!="number"||ft<o.DEFLATE||ft>o.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=ft,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}vt.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,et(this.init_done,"close before init"),et(this.mode<=o.UNZIP),this.mode===o.DEFLATE||this.mode===o.GZIP||this.mode===o.DEFLATERAW?j.deflateEnd(this.strm):this.mode!==o.INFLATE&&this.mode!==o.GUNZIP&&this.mode!==o.INFLATERAW&&this.mode!==o.UNZIP||it.inflateEnd(this.strm),this.mode=o.NONE,this.dictionary=null)},vt.prototype.write=function(ft,pt,ct,yt,Et,Ot,Lt){return this._write(!0,ft,pt,ct,yt,Et,Ot,Lt)},vt.prototype.writeSync=function(ft,pt,ct,yt,Et,Ot,Lt){return this._write(!1,ft,pt,ct,yt,Et,Ot,Lt)},vt.prototype._write=function(ft,pt,ct,yt,Et,Ot,Lt,Tt){if(et.equal(arguments.length,8),et(this.init_done,"write before init"),et(this.mode!==o.NONE,"already finalized"),et.equal(!1,this.write_in_progress,"write already in progress"),et.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,et.equal(!1,pt===void 0,"must provide flush value"),this.write_in_progress=!0,pt!==o.Z_NO_FLUSH&&pt!==o.Z_PARTIAL_FLUSH&&pt!==o.Z_SYNC_FLUSH&&pt!==o.Z_FULL_FLUSH&&pt!==o.Z_FINISH&&pt!==o.Z_BLOCK)throw new Error("Invalid flush value");if(ct==null&&(ct=_.alloc(0),Et=0,yt=0),this.strm.avail_in=Et,this.strm.input=ct,this.strm.next_in=yt,this.strm.avail_out=Tt,this.strm.output=Ot,this.strm.next_out=Lt,this.flush=pt,!ft)return this._process(),this._checkError()?this._afterSync():void 0;var It=this;return $.nextTick(function(){It._process(),It._after()}),this},vt.prototype._afterSync=function(){var ft=this.strm.avail_out,pt=this.strm.avail_in;return this.write_in_progress=!1,[pt,ft]},vt.prototype._process=function(){var ft=null;switch(this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflate(this.strm,this.flush);break;case o.UNZIP:switch(this.strm.avail_in>0&&(ft=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(ft===null)break;if(this.strm.input[ft]!==31){this.mode=o.INFLATE;break}if(this.gzip_id_bytes_read=1,ft++,this.strm.avail_in===1)break;case 1:if(ft===null)break;this.strm.input[ft]===139?(this.gzip_id_bytes_read=2,this.mode=o.GUNZIP):this.mode=o.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:for(this.err=it.inflate(this.strm,this.flush),this.err===o.Z_NEED_DICT&&this.dictionary&&(this.err=it.inflateSetDictionary(this.strm,this.dictionary),this.err===o.Z_OK?this.err=it.inflate(this.strm,this.flush):this.err===o.Z_DATA_ERROR&&(this.err=o.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===o.GUNZIP&&this.err===o.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=it.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},vt.prototype._checkError=function(){switch(this.err){case o.Z_OK:case o.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===o.Z_FINISH)return this._error("unexpected end of file"),!1;break;case o.Z_STREAM_END:break;case o.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},vt.prototype._after=function(){if(this._checkError()){var ft=this.strm.avail_out,pt=this.strm.avail_in;this.write_in_progress=!1,this.callback(pt,ft),this.pending_close&&this.close()}},vt.prototype._error=function(ft){this.strm.msg&&(ft=this.strm.msg),this.onerror(ft,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},vt.prototype.init=function(ft,pt,ct,yt,Et){et(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),et(ft>=8&&ft<=15,"invalid windowBits"),et(pt>=-1&&pt<=9,"invalid compression level"),et(ct>=1&&ct<=9,"invalid memlevel"),et(yt===o.Z_FILTERED||yt===o.Z_HUFFMAN_ONLY||yt===o.Z_RLE||yt===o.Z_FIXED||yt===o.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(pt,ft,ct,yt,Et),this._setDictionary()},vt.prototype.params=function(){throw new Error("deflateParams Not supported")},vt.prototype.reset=function(){this._reset(),this._setDictionary()},vt.prototype._init=function(ft,pt,ct,yt,Et){switch(this.level=ft,this.windowBits=pt,this.memLevel=ct,this.strategy=yt,this.flush=o.Z_NO_FLUSH,this.err=o.Z_OK,this.mode!==o.GZIP&&this.mode!==o.GUNZIP||(this.windowBits+=16),this.mode===o.UNZIP&&(this.windowBits+=32),this.mode!==o.DEFLATERAW&&this.mode!==o.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new tt,this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflateInit2(this.strm,this.level,o.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:case o.UNZIP:this.err=it.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==o.Z_OK&&this._error("Init error"),this.dictionary=Et,this.write_in_progress=!1,this.init_done=!0},vt.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:this.err=j.deflateSetDictionary(this.strm,this.dictionary)}this.err!==o.Z_OK&&this._error("Failed to set dictionary")}},vt.prototype._reset=function(){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:case o.GZIP:this.err=j.deflateReset(this.strm);break;case o.INFLATE:case o.INFLATERAW:case o.GUNZIP:this.err=it.inflateReset(this.strm)}this.err!==o.Z_OK&&this._error("Failed to reset stream")},o.Zlib=vt}).call(this,s(5).Buffer,s(2))},function(i,o,s){var _=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;function tt(j){if(j==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(j)}i.exports=function(){try{if(!Object.assign)return!1;var j=new String("abc");if(j[5]="de",Object.getOwnPropertyNames(j)[0]==="5")return!1;for(var it={},st=0;st<10;st++)it["_"+String.fromCharCode(st)]=st;if(Object.getOwnPropertyNames(it).map(function(vt){return it[vt]}).join("")!=="0123456789")return!1;var ht={};return"abcdefghijklmnopqrst".split("").forEach(function(vt){ht[vt]=vt}),Object.keys(Object.assign({},ht)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(j,it){for(var st,ht,vt=tt(j),ft=1;ft<arguments.length;ft++){for(var pt in st=Object(arguments[ft]))$.call(st,pt)&&(vt[pt]=st[pt]);if(_){ht=_(st);for(var ct=0;ct<ht.length;ct++)et.call(st,ht[ct])&&(vt[ht[ct]]=st[ht[ct]])}}return vt}},function(i,o,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(i,o,s){var _,$=s(37),et=s(173),tt=s(75),j=s(76),it=s(174);function st(xt,St){return xt.msg=it[St],St}function ht(xt){return(xt<<1)-(xt>4?9:0)}function vt(xt){for(var St=xt.length;--St>=0;)xt[St]=0}function ft(xt){var St=xt.state,Nt=St.pending;Nt>xt.avail_out&&(Nt=xt.avail_out),Nt!==0&&($.arraySet(xt.output,St.pending_buf,St.pending_out,Nt,xt.next_out),xt.next_out+=Nt,St.pending_out+=Nt,xt.total_out+=Nt,xt.avail_out-=Nt,St.pending-=Nt,St.pending===0&&(St.pending_out=0))}function pt(xt,St){et._tr_flush_block(xt,xt.block_start>=0?xt.block_start:-1,xt.strstart-xt.block_start,St),xt.block_start=xt.strstart,ft(xt.strm)}function ct(xt,St){xt.pending_buf[xt.pending++]=St}function yt(xt,St){xt.pending_buf[xt.pending++]=St>>>8&255,xt.pending_buf[xt.pending++]=255&St}function Et(xt,St){var Nt,Ct,Vt=xt.max_chain_length,Kt=xt.strstart,Gt=xt.prev_length,Ut=xt.nice_match,Ht=xt.strstart>xt.w_size-262?xt.strstart-(xt.w_size-262):0,qt=xt.window,Pt=xt.w_mask,wt=xt.prev,$t=xt.strstart+258,Xt=qt[Kt+Gt-1],un=qt[Kt+Gt];xt.prev_length>=xt.good_match&&(Vt>>=2),Ut>xt.lookahead&&(Ut=xt.lookahead);do if(qt[(Nt=St)+Gt]===un&&qt[Nt+Gt-1]===Xt&&qt[Nt]===qt[Kt]&&qt[++Nt]===qt[Kt+1]){Kt+=2,Nt++;do;while(qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&Kt<$t);if(Ct=258-($t-Kt),Kt=$t-258,Ct>Gt){if(xt.match_start=St,Gt=Ct,Ct>=Ut)break;Xt=qt[Kt+Gt-1],un=qt[Kt+Gt]}}while((St=wt[St&Pt])>Ht&&--Vt!=0);return Gt<=xt.lookahead?Gt:xt.lookahead}function Ot(xt){var St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt=xt.w_size;do{if(Vt=xt.window_size-xt.lookahead-xt.strstart,xt.strstart>=wt+(wt-262)){$.arraySet(xt.window,xt.window,wt,wt,0),xt.match_start-=wt,xt.strstart-=wt,xt.block_start-=wt,St=Nt=xt.hash_size;do Ct=xt.head[--St],xt.head[St]=Ct>=wt?Ct-wt:0;while(--Nt);St=Nt=wt;do Ct=xt.prev[--St],xt.prev[St]=Ct>=wt?Ct-wt:0;while(--Nt);Vt+=wt}if(xt.strm.avail_in===0)break;if(Gt=xt.strm,Ut=xt.window,Ht=xt.strstart+xt.lookahead,qt=Vt,Pt=void 0,(Pt=Gt.avail_in)>qt&&(Pt=qt),Nt=Pt===0?0:(Gt.avail_in-=Pt,$.arraySet(Ut,Gt.input,Gt.next_in,Pt,Ht),Gt.state.wrap===1?Gt.adler=tt(Gt.adler,Ut,Pt,Ht):Gt.state.wrap===2&&(Gt.adler=j(Gt.adler,Ut,Pt,Ht)),Gt.next_in+=Pt,Gt.total_in+=Pt,Pt),xt.lookahead+=Nt,xt.lookahead+xt.insert>=3)for(Kt=xt.strstart-xt.insert,xt.ins_h=xt.window[Kt],xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[Kt+1])&xt.hash_mask;xt.insert&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[Kt+3-1])&xt.hash_mask,xt.prev[Kt&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=Kt,Kt++,xt.insert--,!(xt.lookahead+xt.insert<3)););}while(xt.lookahead<262&&xt.strm.avail_in!==0)}function Lt(xt,St){for(var Nt,Ct;;){if(xt.lookahead<262){if(Ot(xt),xt.lookahead<262&&St===0)return 1;if(xt.lookahead===0)break}if(Nt=0,xt.lookahead>=3&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart),Nt!==0&&xt.strstart-Nt<=xt.w_size-262&&(xt.match_length=Et(xt,Nt)),xt.match_length>=3)if(Ct=et._tr_tally(xt,xt.strstart-xt.match_start,xt.match_length-3),xt.lookahead-=xt.match_length,xt.match_length<=xt.max_lazy_match&&xt.lookahead>=3){xt.match_length--;do xt.strstart++,xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart;while(--xt.match_length!=0);xt.strstart++}else xt.strstart+=xt.match_length,xt.match_length=0,xt.ins_h=xt.window[xt.strstart],xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+1])&xt.hash_mask;else Ct=et._tr_tally(xt,0,xt.window[xt.strstart]),xt.lookahead--,xt.strstart++;if(Ct&&(pt(xt,!1),xt.strm.avail_out===0))return 1}return xt.insert=xt.strstart<2?xt.strstart:2,St===4?(pt(xt,!0),xt.strm.avail_out===0?3:4):xt.last_lit&&(pt(xt,!1),xt.strm.avail_out===0)?1:2}function Tt(xt,St){for(var Nt,Ct,Vt;;){if(xt.lookahead<262){if(Ot(xt),xt.lookahead<262&&St===0)return 1;if(xt.lookahead===0)break}if(Nt=0,xt.lookahead>=3&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart),xt.prev_length=xt.match_length,xt.prev_match=xt.match_start,xt.match_length=2,Nt!==0&&xt.prev_length<xt.max_lazy_match&&xt.strstart-Nt<=xt.w_size-262&&(xt.match_length=Et(xt,Nt),xt.match_length<=5&&(xt.strategy===1||xt.match_length===3&&xt.strstart-xt.match_start>4096)&&(xt.match_length=2)),xt.prev_length>=3&&xt.match_length<=xt.prev_length){Vt=xt.strstart+xt.lookahead-3,Ct=et._tr_tally(xt,xt.strstart-1-xt.prev_match,xt.prev_length-3),xt.lookahead-=xt.prev_length-1,xt.prev_length-=2;do++xt.strstart<=Vt&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart);while(--xt.prev_length!=0);if(xt.match_available=0,xt.match_length=2,xt.strstart++,Ct&&(pt(xt,!1),xt.strm.avail_out===0))return 1}else if(xt.match_available){if((Ct=et._tr_tally(xt,0,xt.window[xt.strstart-1]))&&pt(xt,!1),xt.strstart++,xt.lookahead--,xt.strm.avail_out===0)return 1}else xt.match_available=1,xt.strstart++,xt.lookahead--}return xt.match_available&&(Ct=et._tr_tally(xt,0,xt.window[xt.strstart-1]),xt.match_available=0),xt.insert=xt.strstart<2?xt.strstart:2,St===4?(pt(xt,!0),xt.strm.avail_out===0?3:4):xt.last_lit&&(pt(xt,!1),xt.strm.avail_out===0)?1:2}function It(xt,St,Nt,Ct,Vt){this.good_length=xt,this.max_lazy=St,this.nice_length=Nt,this.max_chain=Ct,this.func=Vt}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new $.Buf16(1146),this.dyn_dtree=new $.Buf16(122),this.bl_tree=new $.Buf16(78),vt(this.dyn_ltree),vt(this.dyn_dtree),vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new $.Buf16(16),this.heap=new $.Buf16(573),vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new $.Buf16(573),vt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Bt(xt){var St;return xt&&xt.state?(xt.total_in=xt.total_out=0,xt.data_type=2,(St=xt.state).pending=0,St.pending_out=0,St.wrap<0&&(St.wrap=-St.wrap),St.status=St.wrap?42:113,xt.adler=St.wrap===2?0:1,St.last_flush=0,et._tr_init(St),0):st(xt,-2)}function nn(xt){var St,Nt=Bt(xt);return Nt===0&&((St=xt.state).window_size=2*St.w_size,vt(St.head),St.max_lazy_match=_[St.level].max_lazy,St.good_match=_[St.level].good_length,St.nice_match=_[St.level].nice_length,St.max_chain_length=_[St.level].max_chain,St.strstart=0,St.block_start=0,St.lookahead=0,St.insert=0,St.match_length=St.prev_length=2,St.match_available=0,St.ins_h=0),Nt}function sn(xt,St,Nt,Ct,Vt,Kt){if(!xt)return-2;var Gt=1;if(St===-1&&(St=6),Ct<0?(Gt=0,Ct=-Ct):Ct>15&&(Gt=2,Ct-=16),Vt<1||Vt>9||Nt!==8||Ct<8||Ct>15||St<0||St>9||Kt<0||Kt>4)return st(xt,-2);Ct===8&&(Ct=9);var Ut=new mt;return xt.state=Ut,Ut.strm=xt,Ut.wrap=Gt,Ut.gzhead=null,Ut.w_bits=Ct,Ut.w_size=1<<Ut.w_bits,Ut.w_mask=Ut.w_size-1,Ut.hash_bits=Vt+7,Ut.hash_size=1<<Ut.hash_bits,Ut.hash_mask=Ut.hash_size-1,Ut.hash_shift=~~((Ut.hash_bits+3-1)/3),Ut.window=new $.Buf8(2*Ut.w_size),Ut.head=new $.Buf16(Ut.hash_size),Ut.prev=new $.Buf16(Ut.w_size),Ut.lit_bufsize=1<<Vt+6,Ut.pending_buf_size=4*Ut.lit_bufsize,Ut.pending_buf=new $.Buf8(Ut.pending_buf_size),Ut.d_buf=1*Ut.lit_bufsize,Ut.l_buf=3*Ut.lit_bufsize,Ut.level=St,Ut.strategy=Kt,Ut.method=Nt,nn(xt)}_=[new It(0,0,0,0,function(xt,St){var Nt=65535;for(Nt>xt.pending_buf_size-5&&(Nt=xt.pending_buf_size-5);;){if(xt.lookahead<=1){if(Ot(xt),xt.lookahead===0&&St===0)return 1;if(xt.lookahead===0)break}xt.strstart+=xt.lookahead,xt.lookahead=0;var Ct=xt.block_start+Nt;if((xt.strstart===0||xt.strstart>=Ct)&&(xt.lookahead=xt.strstart-Ct,xt.strstart=Ct,pt(xt,!1),xt.strm.avail_out===0)||xt.strstart-xt.block_start>=xt.w_size-262&&(pt(xt,!1),xt.strm.avail_out===0))return 1}return xt.insert=0,St===4?(pt(xt,!0),xt.strm.avail_out===0?3:4):(xt.strstart>xt.block_start&&(pt(xt,!1),xt.strm.avail_out),1)}),new It(4,4,8,4,Lt),new It(4,5,16,8,Lt),new It(4,6,32,32,Lt),new It(4,4,16,16,Tt),new It(8,16,32,32,Tt),new It(8,16,128,128,Tt),new It(8,32,128,256,Tt),new It(32,128,258,1024,Tt),new It(32,258,258,4096,Tt)],o.deflateInit=function(xt,St){return sn(xt,St,8,15,8,0)},o.deflateInit2=sn,o.deflateReset=nn,o.deflateResetKeep=Bt,o.deflateSetHeader=function(xt,St){return xt&&xt.state?xt.state.wrap!==2?-2:(xt.state.gzhead=St,0):-2},o.deflate=function(xt,St){var Nt,Ct,Vt,Kt;if(!xt||!xt.state||St>5||St<0)return xt?st(xt,-2):-2;if(Ct=xt.state,!xt.output||!xt.input&&xt.avail_in!==0||Ct.status===666&&St!==4)return st(xt,xt.avail_out===0?-5:-2);if(Ct.strm=xt,Nt=Ct.last_flush,Ct.last_flush=St,Ct.status===42)if(Ct.wrap===2)xt.adler=0,ct(Ct,31),ct(Ct,139),ct(Ct,8),Ct.gzhead?(ct(Ct,(Ct.gzhead.text?1:0)+(Ct.gzhead.hcrc?2:0)+(Ct.gzhead.extra?4:0)+(Ct.gzhead.name?8:0)+(Ct.gzhead.comment?16:0)),ct(Ct,255&Ct.gzhead.time),ct(Ct,Ct.gzhead.time>>8&255),ct(Ct,Ct.gzhead.time>>16&255),ct(Ct,Ct.gzhead.time>>24&255),ct(Ct,Ct.level===9?2:Ct.strategy>=2||Ct.level<2?4:0),ct(Ct,255&Ct.gzhead.os),Ct.gzhead.extra&&Ct.gzhead.extra.length&&(ct(Ct,255&Ct.gzhead.extra.length),ct(Ct,Ct.gzhead.extra.length>>8&255)),Ct.gzhead.hcrc&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending,0)),Ct.gzindex=0,Ct.status=69):(ct(Ct,0),ct(Ct,0),ct(Ct,0),ct(Ct,0),ct(Ct,0),ct(Ct,Ct.level===9?2:Ct.strategy>=2||Ct.level<2?4:0),ct(Ct,3),Ct.status=113);else{var Gt=8+(Ct.w_bits-8<<4)<<8;Gt|=(Ct.strategy>=2||Ct.level<2?0:Ct.level<6?1:Ct.level===6?2:3)<<6,Ct.strstart!==0&&(Gt|=32),Gt+=31-Gt%31,Ct.status=113,yt(Ct,Gt),Ct.strstart!==0&&(yt(Ct,xt.adler>>>16),yt(Ct,65535&xt.adler)),xt.adler=1}if(Ct.status===69)if(Ct.gzhead.extra){for(Vt=Ct.pending;Ct.gzindex<(65535&Ct.gzhead.extra.length)&&(Ct.pending!==Ct.pending_buf_size||(Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),ft(xt),Vt=Ct.pending,Ct.pending!==Ct.pending_buf_size));)ct(Ct,255&Ct.gzhead.extra[Ct.gzindex]),Ct.gzindex++;Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),Ct.gzindex===Ct.gzhead.extra.length&&(Ct.gzindex=0,Ct.status=73)}else Ct.status=73;if(Ct.status===73)if(Ct.gzhead.name){Vt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),ft(xt),Vt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Kt=1;break}Kt=Ct.gzindex<Ct.gzhead.name.length?255&Ct.gzhead.name.charCodeAt(Ct.gzindex++):0,ct(Ct,Kt)}while(Kt!==0);Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),Kt===0&&(Ct.gzindex=0,Ct.status=91)}else Ct.status=91;if(Ct.status===91)if(Ct.gzhead.comment){Vt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),ft(xt),Vt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Kt=1;break}Kt=Ct.gzindex<Ct.gzhead.comment.length?255&Ct.gzhead.comment.charCodeAt(Ct.gzindex++):0,ct(Ct,Kt)}while(Kt!==0);Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),Kt===0&&(Ct.status=103)}else Ct.status=103;if(Ct.status===103&&(Ct.gzhead.hcrc?(Ct.pending+2>Ct.pending_buf_size&&ft(xt),Ct.pending+2<=Ct.pending_buf_size&&(ct(Ct,255&xt.adler),ct(Ct,xt.adler>>8&255),xt.adler=0,Ct.status=113)):Ct.status=113),Ct.pending!==0){if(ft(xt),xt.avail_out===0)return Ct.last_flush=-1,0}else if(xt.avail_in===0&&ht(St)<=ht(Nt)&&St!==4)return st(xt,-5);if(Ct.status===666&&xt.avail_in!==0)return st(xt,-5);if(xt.avail_in!==0||Ct.lookahead!==0||St!==0&&Ct.status!==666){var Ut=Ct.strategy===2?function(Ht,qt){for(var Pt;;){if(Ht.lookahead===0&&(Ot(Ht),Ht.lookahead===0)){if(qt===0)return 1;break}if(Ht.match_length=0,Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++,Pt&&(pt(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(pt(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(pt(Ht,!1),Ht.strm.avail_out===0)?1:2}(Ct,St):Ct.strategy===3?function(Ht,qt){for(var Pt,wt,$t,Xt,un=Ht.window;;){if(Ht.lookahead<=258){if(Ot(Ht),Ht.lookahead<=258&&qt===0)return 1;if(Ht.lookahead===0)break}if(Ht.match_length=0,Ht.lookahead>=3&&Ht.strstart>0&&(wt=un[$t=Ht.strstart-1])===un[++$t]&&wt===un[++$t]&&wt===un[++$t]){Xt=Ht.strstart+258;do;while(wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&$t<Xt);Ht.match_length=258-(Xt-$t),Ht.match_length>Ht.lookahead&&(Ht.match_length=Ht.lookahead)}if(Ht.match_length>=3?(Pt=et._tr_tally(Ht,1,Ht.match_length-3),Ht.lookahead-=Ht.match_length,Ht.strstart+=Ht.match_length,Ht.match_length=0):(Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++),Pt&&(pt(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(pt(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(pt(Ht,!1),Ht.strm.avail_out===0)?1:2}(Ct,St):_[Ct.level].func(Ct,St);if(Ut!==3&&Ut!==4||(Ct.status=666),Ut===1||Ut===3)return xt.avail_out===0&&(Ct.last_flush=-1),0;if(Ut===2&&(St===1?et._tr_align(Ct):St!==5&&(et._tr_stored_block(Ct,0,0,!1),St===3&&(vt(Ct.head),Ct.lookahead===0&&(Ct.strstart=0,Ct.block_start=0,Ct.insert=0))),ft(xt),xt.avail_out===0))return Ct.last_flush=-1,0}return St!==4?0:Ct.wrap<=0?1:(Ct.wrap===2?(ct(Ct,255&xt.adler),ct(Ct,xt.adler>>8&255),ct(Ct,xt.adler>>16&255),ct(Ct,xt.adler>>24&255),ct(Ct,255&xt.total_in),ct(Ct,xt.total_in>>8&255),ct(Ct,xt.total_in>>16&255),ct(Ct,xt.total_in>>24&255)):(yt(Ct,xt.adler>>>16),yt(Ct,65535&xt.adler)),ft(xt),Ct.wrap>0&&(Ct.wrap=-Ct.wrap),Ct.pending!==0?0:1)},o.deflateEnd=function(xt){var St;return xt&&xt.state?(St=xt.state.status)!==42&&St!==69&&St!==73&&St!==91&&St!==103&&St!==113&&St!==666?st(xt,-2):(xt.state=null,St===113?st(xt,-3):0):-2},o.deflateSetDictionary=function(xt,St){var Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt=St.length;if(!xt||!xt.state||(Kt=(Nt=xt.state).wrap)===2||Kt===1&&Nt.status!==42||Nt.lookahead)return-2;for(Kt===1&&(xt.adler=tt(xt.adler,St,Pt,0)),Nt.wrap=0,Pt>=Nt.w_size&&(Kt===0&&(vt(Nt.head),Nt.strstart=0,Nt.block_start=0,Nt.insert=0),qt=new $.Buf8(Nt.w_size),$.arraySet(qt,St,Pt-Nt.w_size,Nt.w_size,0),St=qt,Pt=Nt.w_size),Gt=xt.avail_in,Ut=xt.next_in,Ht=xt.input,xt.avail_in=Pt,xt.next_in=0,xt.input=St,Ot(Nt);Nt.lookahead>=3;){Ct=Nt.strstart,Vt=Nt.lookahead-2;do Nt.ins_h=(Nt.ins_h<<Nt.hash_shift^Nt.window[Ct+3-1])&Nt.hash_mask,Nt.prev[Ct&Nt.w_mask]=Nt.head[Nt.ins_h],Nt.head[Nt.ins_h]=Ct,Ct++;while(--Vt);Nt.strstart=Ct,Nt.lookahead=2,Ot(Nt)}return Nt.strstart+=Nt.lookahead,Nt.block_start=Nt.strstart,Nt.insert=Nt.lookahead,Nt.lookahead=0,Nt.match_length=Nt.prev_length=2,Nt.match_available=0,xt.next_in=Ut,xt.input=Ht,xt.avail_in=Gt,Nt.wrap=Kt,0},o.deflateInfo="pako deflate (from Nodeca project)"},function(i,o,s){var _=s(37);function $(wt){for(var $t=wt.length;--$t>=0;)wt[$t]=0}var et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=new Array(576);$(st);var ht=new Array(60);$(ht);var vt=new Array(512);$(vt);var ft=new Array(256);$(ft);var pt=new Array(29);$(pt);var ct,yt,Et,Ot=new Array(30);function Lt(wt,$t,Xt,un,dn){this.static_tree=wt,this.extra_bits=$t,this.extra_base=Xt,this.elems=un,this.max_length=dn,this.has_stree=wt&&wt.length}function Tt(wt,$t){this.dyn_tree=wt,this.max_code=0,this.stat_desc=$t}function It(wt){return wt<256?vt[wt]:vt[256+(wt>>>7)]}function mt(wt,$t){wt.pending_buf[wt.pending++]=255&$t,wt.pending_buf[wt.pending++]=$t>>>8&255}function Bt(wt,$t,Xt){wt.bi_valid>16-Xt?(wt.bi_buf|=$t<<wt.bi_valid&65535,mt(wt,wt.bi_buf),wt.bi_buf=$t>>16-wt.bi_valid,wt.bi_valid+=Xt-16):(wt.bi_buf|=$t<<wt.bi_valid&65535,wt.bi_valid+=Xt)}function nn(wt,$t,Xt){Bt(wt,Xt[2*$t],Xt[2*$t+1])}function sn(wt,$t){var Xt=0;do Xt|=1&wt,wt>>>=1,Xt<<=1;while(--$t>0);return Xt>>>1}function xt(wt,$t,Xt){var un,dn,mn=new Array(16),an=0;for(un=1;un<=15;un++)mn[un]=an=an+Xt[un-1]<<1;for(dn=0;dn<=$t;dn++){var en=wt[2*dn+1];en!==0&&(wt[2*dn]=sn(mn[en]++,en))}}function St(wt){var $t;for($t=0;$t<286;$t++)wt.dyn_ltree[2*$t]=0;for($t=0;$t<30;$t++)wt.dyn_dtree[2*$t]=0;for($t=0;$t<19;$t++)wt.bl_tree[2*$t]=0;wt.dyn_ltree[512]=1,wt.opt_len=wt.static_len=0,wt.last_lit=wt.matches=0}function Nt(wt){wt.bi_valid>8?mt(wt,wt.bi_buf):wt.bi_valid>0&&(wt.pending_buf[wt.pending++]=wt.bi_buf),wt.bi_buf=0,wt.bi_valid=0}function Ct(wt,$t,Xt,un){var dn=2*$t,mn=2*Xt;return wt[dn]<wt[mn]||wt[dn]===wt[mn]&&un[$t]<=un[Xt]}function Vt(wt,$t,Xt){for(var un=wt.heap[Xt],dn=Xt<<1;dn<=wt.heap_len&&(dn<wt.heap_len&&Ct($t,wt.heap[dn+1],wt.heap[dn],wt.depth)&&dn++,!Ct($t,un,wt.heap[dn],wt.depth));)wt.heap[Xt]=wt.heap[dn],Xt=dn,dn<<=1;wt.heap[Xt]=un}function Kt(wt,$t,Xt){var un,dn,mn,an,en=0;if(wt.last_lit!==0)do un=wt.pending_buf[wt.d_buf+2*en]<<8|wt.pending_buf[wt.d_buf+2*en+1],dn=wt.pending_buf[wt.l_buf+en],en++,un===0?nn(wt,dn,$t):(nn(wt,(mn=ft[dn])+256+1,$t),(an=et[mn])!==0&&Bt(wt,dn-=pt[mn],an),nn(wt,mn=It(--un),Xt),(an=tt[mn])!==0&&Bt(wt,un-=Ot[mn],an));while(en<wt.last_lit);nn(wt,256,$t)}function Gt(wt,$t){var Xt,un,dn,mn=$t.dyn_tree,an=$t.stat_desc.static_tree,en=$t.stat_desc.has_stree,Mt=$t.stat_desc.elems,jt=-1;for(wt.heap_len=0,wt.heap_max=573,Xt=0;Xt<Mt;Xt++)mn[2*Xt]!==0?(wt.heap[++wt.heap_len]=jt=Xt,wt.depth[Xt]=0):mn[2*Xt+1]=0;for(;wt.heap_len<2;)mn[2*(dn=wt.heap[++wt.heap_len]=jt<2?++jt:0)]=1,wt.depth[dn]=0,wt.opt_len--,en&&(wt.static_len-=an[2*dn+1]);for($t.max_code=jt,Xt=wt.heap_len>>1;Xt>=1;Xt--)Vt(wt,mn,Xt);dn=Mt;do Xt=wt.heap[1],wt.heap[1]=wt.heap[wt.heap_len--],Vt(wt,mn,1),un=wt.heap[1],wt.heap[--wt.heap_max]=Xt,wt.heap[--wt.heap_max]=un,mn[2*dn]=mn[2*Xt]+mn[2*un],wt.depth[dn]=(wt.depth[Xt]>=wt.depth[un]?wt.depth[Xt]:wt.depth[un])+1,mn[2*Xt+1]=mn[2*un+1]=dn,wt.heap[1]=dn++,Vt(wt,mn,1);while(wt.heap_len>=2);wt.heap[--wt.heap_max]=wt.heap[1],function(Qt,gn){var hn,An,Mn,Yn,Nr,ro,to=gn.dyn_tree,zr=gn.max_code,In=gn.stat_desc.static_tree,kn=gn.stat_desc.has_stree,Kn=gn.stat_desc.extra_bits,vr=gn.stat_desc.extra_base,yr=gn.stat_desc.max_length,Wr=0;for(Yn=0;Yn<=15;Yn++)Qt.bl_count[Yn]=0;for(to[2*Qt.heap[Qt.heap_max]+1]=0,hn=Qt.heap_max+1;hn<573;hn++)(Yn=to[2*to[2*(An=Qt.heap[hn])+1]+1]+1)>yr&&(Yn=yr,Wr++),to[2*An+1]=Yn,An>zr||(Qt.bl_count[Yn]++,Nr=0,An>=vr&&(Nr=Kn[An-vr]),ro=to[2*An],Qt.opt_len+=ro*(Yn+Nr),kn&&(Qt.static_len+=ro*(In[2*An+1]+Nr)));if(Wr!==0){do{for(Yn=yr-1;Qt.bl_count[Yn]===0;)Yn--;Qt.bl_count[Yn]--,Qt.bl_count[Yn+1]+=2,Qt.bl_count[yr]--,Wr-=2}while(Wr>0);for(Yn=yr;Yn!==0;Yn--)for(An=Qt.bl_count[Yn];An!==0;)(Mn=Qt.heap[--hn])>zr||(to[2*Mn+1]!==Yn&&(Qt.opt_len+=(Yn-to[2*Mn+1])*to[2*Mn],to[2*Mn+1]=Yn),An--)}}(wt,$t),xt(mn,jt,wt.bl_count)}function Ut(wt,$t,Xt){var un,dn,mn=-1,an=$t[1],en=0,Mt=7,jt=4;for(an===0&&(Mt=138,jt=3),$t[2*(Xt+1)+1]=65535,un=0;un<=Xt;un++)dn=an,an=$t[2*(un+1)+1],++en<Mt&&dn===an||(en<jt?wt.bl_tree[2*dn]+=en:dn!==0?(dn!==mn&&wt.bl_tree[2*dn]++,wt.bl_tree[32]++):en<=10?wt.bl_tree[34]++:wt.bl_tree[36]++,en=0,mn=dn,an===0?(Mt=138,jt=3):dn===an?(Mt=6,jt=3):(Mt=7,jt=4))}function Ht(wt,$t,Xt){var un,dn,mn=-1,an=$t[1],en=0,Mt=7,jt=4;for(an===0&&(Mt=138,jt=3),un=0;un<=Xt;un++)if(dn=an,an=$t[2*(un+1)+1],!(++en<Mt&&dn===an)){if(en<jt)do nn(wt,dn,wt.bl_tree);while(--en!=0);else dn!==0?(dn!==mn&&(nn(wt,dn,wt.bl_tree),en--),nn(wt,16,wt.bl_tree),Bt(wt,en-3,2)):en<=10?(nn(wt,17,wt.bl_tree),Bt(wt,en-3,3)):(nn(wt,18,wt.bl_tree),Bt(wt,en-11,7));en=0,mn=dn,an===0?(Mt=138,jt=3):dn===an?(Mt=6,jt=3):(Mt=7,jt=4)}}$(Ot);var qt=!1;function Pt(wt,$t,Xt,un){Bt(wt,0+(un?1:0),3),function(dn,mn,an,en){Nt(dn),en&&(mt(dn,an),mt(dn,~an)),_.arraySet(dn.pending_buf,dn.window,mn,an,dn.pending),dn.pending+=an}(wt,$t,Xt,!0)}o._tr_init=function(wt){qt||(function(){var $t,Xt,un,dn,mn,an=new Array(16);for(un=0,dn=0;dn<28;dn++)for(pt[dn]=un,$t=0;$t<1<<et[dn];$t++)ft[un++]=dn;for(ft[un-1]=dn,mn=0,dn=0;dn<16;dn++)for(Ot[dn]=mn,$t=0;$t<1<<tt[dn];$t++)vt[mn++]=dn;for(mn>>=7;dn<30;dn++)for(Ot[dn]=mn<<7,$t=0;$t<1<<tt[dn]-7;$t++)vt[256+mn++]=dn;for(Xt=0;Xt<=15;Xt++)an[Xt]=0;for($t=0;$t<=143;)st[2*$t+1]=8,$t++,an[8]++;for(;$t<=255;)st[2*$t+1]=9,$t++,an[9]++;for(;$t<=279;)st[2*$t+1]=7,$t++,an[7]++;for(;$t<=287;)st[2*$t+1]=8,$t++,an[8]++;for(xt(st,287,an),$t=0;$t<30;$t++)ht[2*$t+1]=5,ht[2*$t]=sn($t,5);ct=new Lt(st,et,257,286,15),yt=new Lt(ht,tt,0,30,15),Et=new Lt(new Array(0),j,0,19,7)}(),qt=!0),wt.l_desc=new Tt(wt.dyn_ltree,ct),wt.d_desc=new Tt(wt.dyn_dtree,yt),wt.bl_desc=new Tt(wt.bl_tree,Et),wt.bi_buf=0,wt.bi_valid=0,St(wt)},o._tr_stored_block=Pt,o._tr_flush_block=function(wt,$t,Xt,un){var dn,mn,an=0;wt.level>0?(wt.strm.data_type===2&&(wt.strm.data_type=function(en){var Mt,jt=4093624447;for(Mt=0;Mt<=31;Mt++,jt>>>=1)if(1&jt&&en.dyn_ltree[2*Mt]!==0)return 0;if(en.dyn_ltree[18]!==0||en.dyn_ltree[20]!==0||en.dyn_ltree[26]!==0)return 1;for(Mt=32;Mt<256;Mt++)if(en.dyn_ltree[2*Mt]!==0)return 1;return 0}(wt)),Gt(wt,wt.l_desc),Gt(wt,wt.d_desc),an=function(en){var Mt;for(Ut(en,en.dyn_ltree,en.l_desc.max_code),Ut(en,en.dyn_dtree,en.d_desc.max_code),Gt(en,en.bl_desc),Mt=18;Mt>=3&&en.bl_tree[2*it[Mt]+1]===0;Mt--);return en.opt_len+=3*(Mt+1)+5+5+4,Mt}(wt),dn=wt.opt_len+3+7>>>3,(mn=wt.static_len+3+7>>>3)<=dn&&(dn=mn)):dn=mn=Xt+5,Xt+4<=dn&&$t!==-1?Pt(wt,$t,Xt,un):wt.strategy===4||mn===dn?(Bt(wt,2+(un?1:0),3),Kt(wt,st,ht)):(Bt(wt,4+(un?1:0),3),function(en,Mt,jt,Qt){var gn;for(Bt(en,Mt-257,5),Bt(en,jt-1,5),Bt(en,Qt-4,4),gn=0;gn<Qt;gn++)Bt(en,en.bl_tree[2*it[gn]+1],3);Ht(en,en.dyn_ltree,Mt-1),Ht(en,en.dyn_dtree,jt-1)}(wt,wt.l_desc.max_code+1,wt.d_desc.max_code+1,an+1),Kt(wt,wt.dyn_ltree,wt.dyn_dtree)),St(wt),un&&Nt(wt)},o._tr_tally=function(wt,$t,Xt){return wt.pending_buf[wt.d_buf+2*wt.last_lit]=$t>>>8&255,wt.pending_buf[wt.d_buf+2*wt.last_lit+1]=255&$t,wt.pending_buf[wt.l_buf+wt.last_lit]=255&Xt,wt.last_lit++,$t===0?wt.dyn_ltree[2*Xt]++:(wt.matches++,$t--,wt.dyn_ltree[2*(ft[Xt]+256+1)]++,wt.dyn_dtree[2*It($t)]++),wt.last_lit===wt.lit_bufsize-1},o._tr_align=function(wt){Bt(wt,2,3),nn(wt,256,st),function($t){$t.bi_valid===16?(mt($t,$t.bi_buf),$t.bi_buf=0,$t.bi_valid=0):$t.bi_valid>=8&&($t.pending_buf[$t.pending++]=255&$t.bi_buf,$t.bi_buf>>=8,$t.bi_valid-=8)}(wt)}},function(i,o,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(i,o,s){var _=s(37),$=s(75),et=s(76),tt=s(176),j=s(177);function it(Tt){return(Tt>>>24&255)+(Tt>>>8&65280)+((65280&Tt)<<8)+((255&Tt)<<24)}function st(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ht(Tt){var It;return Tt&&Tt.state?(It=Tt.state,Tt.total_in=Tt.total_out=It.total=0,Tt.msg="",It.wrap&&(Tt.adler=1&It.wrap),It.mode=1,It.last=0,It.havedict=0,It.dmax=32768,It.head=null,It.hold=0,It.bits=0,It.lencode=It.lendyn=new _.Buf32(852),It.distcode=It.distdyn=new _.Buf32(592),It.sane=1,It.back=-1,0):-2}function vt(Tt){var It;return Tt&&Tt.state?((It=Tt.state).wsize=0,It.whave=0,It.wnext=0,ht(Tt)):-2}function ft(Tt,It){var mt,Bt;return Tt&&Tt.state?(Bt=Tt.state,It<0?(mt=0,It=-It):(mt=1+(It>>4),It<48&&(It&=15)),It&&(It<8||It>15)?-2:(Bt.window!==null&&Bt.wbits!==It&&(Bt.window=null),Bt.wrap=mt,Bt.wbits=It,vt(Tt))):-2}function pt(Tt,It){var mt,Bt;return Tt?(Bt=new st,Tt.state=Bt,Bt.window=null,(mt=ft(Tt,It))!==0&&(Tt.state=null),mt):-2}var ct,yt,Et=!0;function Ot(Tt){if(Et){var It;for(ct=new _.Buf32(512),yt=new _.Buf32(32),It=0;It<144;)Tt.lens[It++]=8;for(;It<256;)Tt.lens[It++]=9;for(;It<280;)Tt.lens[It++]=7;for(;It<288;)Tt.lens[It++]=8;for(j(1,Tt.lens,0,288,ct,0,Tt.work,{bits:9}),It=0;It<32;)Tt.lens[It++]=5;j(2,Tt.lens,0,32,yt,0,Tt.work,{bits:5}),Et=!1}Tt.lencode=ct,Tt.lenbits=9,Tt.distcode=yt,Tt.distbits=5}function Lt(Tt,It,mt,Bt){var nn,sn=Tt.state;return sn.window===null&&(sn.wsize=1<<sn.wbits,sn.wnext=0,sn.whave=0,sn.window=new _.Buf8(sn.wsize)),Bt>=sn.wsize?(_.arraySet(sn.window,It,mt-sn.wsize,sn.wsize,0),sn.wnext=0,sn.whave=sn.wsize):((nn=sn.wsize-sn.wnext)>Bt&&(nn=Bt),_.arraySet(sn.window,It,mt-Bt,nn,sn.wnext),(Bt-=nn)?(_.arraySet(sn.window,It,mt-Bt,Bt,0),sn.wnext=Bt,sn.whave=sn.wsize):(sn.wnext+=nn,sn.wnext===sn.wsize&&(sn.wnext=0),sn.whave<sn.wsize&&(sn.whave+=nn))),0}o.inflateReset=vt,o.inflateReset2=ft,o.inflateResetKeep=ht,o.inflateInit=function(Tt){return pt(Tt,15)},o.inflateInit2=pt,o.inflate=function(Tt,It){var mt,Bt,nn,sn,xt,St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt,$t,Xt,un,dn,mn,an,en,Mt,jt=0,Qt=new _.Buf8(4),gn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Tt||!Tt.state||!Tt.output||!Tt.input&&Tt.avail_in!==0)return-2;(mt=Tt.state).mode===12&&(mt.mode=13),xt=Tt.next_out,nn=Tt.output,Nt=Tt.avail_out,sn=Tt.next_in,Bt=Tt.input,St=Tt.avail_in,Ct=mt.hold,Vt=mt.bits,Kt=St,Gt=Nt,an=0;e:for(;;)switch(mt.mode){case 1:if(mt.wrap===0){mt.mode=13;break}for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(2&mt.wrap&&Ct===35615){mt.check=0,Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0),Ct=0,Vt=0,mt.mode=2;break}if(mt.flags=0,mt.head&&(mt.head.done=!1),!(1&mt.wrap)||(((255&Ct)<<8)+(Ct>>8))%31){Tt.msg="incorrect header check",mt.mode=30;break}if((15&Ct)!=8){Tt.msg="unknown compression method",mt.mode=30;break}if(Vt-=4,mn=8+(15&(Ct>>>=4)),mt.wbits===0)mt.wbits=mn;else if(mn>mt.wbits){Tt.msg="invalid window size",mt.mode=30;break}mt.dmax=1<<mn,Tt.adler=mt.check=1,mt.mode=512&Ct?10:12,Ct=0,Vt=0;break;case 2:for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(mt.flags=Ct,(255&mt.flags)!=8){Tt.msg="unknown compression method",mt.mode=30;break}if(57344&mt.flags){Tt.msg="unknown header flags set",mt.mode=30;break}mt.head&&(mt.head.text=Ct>>8&1),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0)),Ct=0,Vt=0,mt.mode=3;case 3:for(;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.head&&(mt.head.time=Ct),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,Qt[2]=Ct>>>16&255,Qt[3]=Ct>>>24&255,mt.check=et(mt.check,Qt,4,0)),Ct=0,Vt=0,mt.mode=4;case 4:for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.head&&(mt.head.xflags=255&Ct,mt.head.os=Ct>>8),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0)),Ct=0,Vt=0,mt.mode=5;case 5:if(1024&mt.flags){for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.length=Ct,mt.head&&(mt.head.extra_len=Ct),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0)),Ct=0,Vt=0}else mt.head&&(mt.head.extra=null);mt.mode=6;case 6:if(1024&mt.flags&&((Ut=mt.length)>St&&(Ut=St),Ut&&(mt.head&&(mn=mt.head.extra_len-mt.length,mt.head.extra||(mt.head.extra=new Array(mt.head.extra_len)),_.arraySet(mt.head.extra,Bt,sn,Ut,mn)),512&mt.flags&&(mt.check=et(mt.check,Bt,Ut,sn)),St-=Ut,sn+=Ut,mt.length-=Ut),mt.length))break e;mt.length=0,mt.mode=7;case 7:if(2048&mt.flags){if(St===0)break e;Ut=0;do mn=Bt[sn+Ut++],mt.head&&mn&&mt.length<65536&&(mt.head.name+=String.fromCharCode(mn));while(mn&&Ut<St);if(512&mt.flags&&(mt.check=et(mt.check,Bt,Ut,sn)),St-=Ut,sn+=Ut,mn)break e}else mt.head&&(mt.head.name=null);mt.length=0,mt.mode=8;case 8:if(4096&mt.flags){if(St===0)break e;Ut=0;do mn=Bt[sn+Ut++],mt.head&&mn&&mt.length<65536&&(mt.head.comment+=String.fromCharCode(mn));while(mn&&Ut<St);if(512&mt.flags&&(mt.check=et(mt.check,Bt,Ut,sn)),St-=Ut,sn+=Ut,mn)break e}else mt.head&&(mt.head.comment=null);mt.mode=9;case 9:if(512&mt.flags){for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(Ct!==(65535&mt.check)){Tt.msg="header crc mismatch",mt.mode=30;break}Ct=0,Vt=0}mt.head&&(mt.head.hcrc=mt.flags>>9&1,mt.head.done=!0),Tt.adler=mt.check=0,mt.mode=12;break;case 10:for(;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Tt.adler=mt.check=it(Ct),Ct=0,Vt=0,mt.mode=11;case 11:if(mt.havedict===0)return Tt.next_out=xt,Tt.avail_out=Nt,Tt.next_in=sn,Tt.avail_in=St,mt.hold=Ct,mt.bits=Vt,2;Tt.adler=mt.check=1,mt.mode=12;case 12:if(It===5||It===6)break e;case 13:if(mt.last){Ct>>>=7&Vt,Vt-=7&Vt,mt.mode=27;break}for(;Vt<3;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}switch(mt.last=1&Ct,Vt-=1,3&(Ct>>>=1)){case 0:mt.mode=14;break;case 1:if(Ot(mt),mt.mode=20,It===6){Ct>>>=2,Vt-=2;break e}break;case 2:mt.mode=17;break;case 3:Tt.msg="invalid block type",mt.mode=30}Ct>>>=2,Vt-=2;break;case 14:for(Ct>>>=7&Vt,Vt-=7&Vt;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if((65535&Ct)!=(Ct>>>16^65535)){Tt.msg="invalid stored block lengths",mt.mode=30;break}if(mt.length=65535&Ct,Ct=0,Vt=0,mt.mode=15,It===6)break e;case 15:mt.mode=16;case 16:if(Ut=mt.length){if(Ut>St&&(Ut=St),Ut>Nt&&(Ut=Nt),Ut===0)break e;_.arraySet(nn,Bt,sn,Ut,xt),St-=Ut,sn+=Ut,Nt-=Ut,xt+=Ut,mt.length-=Ut;break}mt.mode=12;break;case 17:for(;Vt<14;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(mt.nlen=257+(31&Ct),Ct>>>=5,Vt-=5,mt.ndist=1+(31&Ct),Ct>>>=5,Vt-=5,mt.ncode=4+(15&Ct),Ct>>>=4,Vt-=4,mt.nlen>286||mt.ndist>30){Tt.msg="too many length or distance symbols",mt.mode=30;break}mt.have=0,mt.mode=18;case 18:for(;mt.have<mt.ncode;){for(;Vt<3;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.lens[gn[mt.have++]]=7&Ct,Ct>>>=3,Vt-=3}for(;mt.have<19;)mt.lens[gn[mt.have++]]=0;if(mt.lencode=mt.lendyn,mt.lenbits=7,en={bits:mt.lenbits},an=j(0,mt.lens,0,19,mt.lencode,0,mt.work,en),mt.lenbits=en.bits,an){Tt.msg="invalid code lengths set",mt.mode=30;break}mt.have=0,mt.mode=19;case 19:for(;mt.have<mt.nlen+mt.ndist;){for(;wt=(jt=mt.lencode[Ct&(1<<mt.lenbits)-1])>>>16&255,$t=65535&jt,!((Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if($t<16)Ct>>>=Pt,Vt-=Pt,mt.lens[mt.have++]=$t;else{if($t===16){for(Mt=Pt+2;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(Ct>>>=Pt,Vt-=Pt,mt.have===0){Tt.msg="invalid bit length repeat",mt.mode=30;break}mn=mt.lens[mt.have-1],Ut=3+(3&Ct),Ct>>>=2,Vt-=2}else if($t===17){for(Mt=Pt+3;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Vt-=Pt,mn=0,Ut=3+(7&(Ct>>>=Pt)),Ct>>>=3,Vt-=3}else{for(Mt=Pt+7;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Vt-=Pt,mn=0,Ut=11+(127&(Ct>>>=Pt)),Ct>>>=7,Vt-=7}if(mt.have+Ut>mt.nlen+mt.ndist){Tt.msg="invalid bit length repeat",mt.mode=30;break}for(;Ut--;)mt.lens[mt.have++]=mn}}if(mt.mode===30)break;if(mt.lens[256]===0){Tt.msg="invalid code -- missing end-of-block",mt.mode=30;break}if(mt.lenbits=9,en={bits:mt.lenbits},an=j(1,mt.lens,0,mt.nlen,mt.lencode,0,mt.work,en),mt.lenbits=en.bits,an){Tt.msg="invalid literal/lengths set",mt.mode=30;break}if(mt.distbits=6,mt.distcode=mt.distdyn,en={bits:mt.distbits},an=j(2,mt.lens,mt.nlen,mt.ndist,mt.distcode,0,mt.work,en),mt.distbits=en.bits,an){Tt.msg="invalid distances set",mt.mode=30;break}if(mt.mode=20,It===6)break e;case 20:mt.mode=21;case 21:if(St>=6&&Nt>=258){Tt.next_out=xt,Tt.avail_out=Nt,Tt.next_in=sn,Tt.avail_in=St,mt.hold=Ct,mt.bits=Vt,tt(Tt,Gt),xt=Tt.next_out,nn=Tt.output,Nt=Tt.avail_out,sn=Tt.next_in,Bt=Tt.input,St=Tt.avail_in,Ct=mt.hold,Vt=mt.bits,mt.mode===12&&(mt.back=-1);break}for(mt.back=0;wt=(jt=mt.lencode[Ct&(1<<mt.lenbits)-1])>>>16&255,$t=65535&jt,!((Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(wt&&!(240&wt)){for(Xt=Pt,un=wt,dn=$t;wt=(jt=mt.lencode[dn+((Ct&(1<<Xt+un)-1)>>Xt)])>>>16&255,$t=65535&jt,!(Xt+(Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Ct>>>=Xt,Vt-=Xt,mt.back+=Xt}if(Ct>>>=Pt,Vt-=Pt,mt.back+=Pt,mt.length=$t,wt===0){mt.mode=26;break}if(32&wt){mt.back=-1,mt.mode=12;break}if(64&wt){Tt.msg="invalid literal/length code",mt.mode=30;break}mt.extra=15&wt,mt.mode=22;case 22:if(mt.extra){for(Mt=mt.extra;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.length+=Ct&(1<<mt.extra)-1,Ct>>>=mt.extra,Vt-=mt.extra,mt.back+=mt.extra}mt.was=mt.length,mt.mode=23;case 23:for(;wt=(jt=mt.distcode[Ct&(1<<mt.distbits)-1])>>>16&255,$t=65535&jt,!((Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(!(240&wt)){for(Xt=Pt,un=wt,dn=$t;wt=(jt=mt.distcode[dn+((Ct&(1<<Xt+un)-1)>>Xt)])>>>16&255,$t=65535&jt,!(Xt+(Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Ct>>>=Xt,Vt-=Xt,mt.back+=Xt}if(Ct>>>=Pt,Vt-=Pt,mt.back+=Pt,64&wt){Tt.msg="invalid distance code",mt.mode=30;break}mt.offset=$t,mt.extra=15&wt,mt.mode=24;case 24:if(mt.extra){for(Mt=mt.extra;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.offset+=Ct&(1<<mt.extra)-1,Ct>>>=mt.extra,Vt-=mt.extra,mt.back+=mt.extra}if(mt.offset>mt.dmax){Tt.msg="invalid distance too far back",mt.mode=30;break}mt.mode=25;case 25:if(Nt===0)break e;if(Ut=Gt-Nt,mt.offset>Ut){if((Ut=mt.offset-Ut)>mt.whave&&mt.sane){Tt.msg="invalid distance too far back",mt.mode=30;break}Ut>mt.wnext?(Ut-=mt.wnext,Ht=mt.wsize-Ut):Ht=mt.wnext-Ut,Ut>mt.length&&(Ut=mt.length),qt=mt.window}else qt=nn,Ht=xt-mt.offset,Ut=mt.length;Ut>Nt&&(Ut=Nt),Nt-=Ut,mt.length-=Ut;do nn[xt++]=qt[Ht++];while(--Ut);mt.length===0&&(mt.mode=21);break;case 26:if(Nt===0)break e;nn[xt++]=mt.length,Nt--,mt.mode=21;break;case 27:if(mt.wrap){for(;Vt<32;){if(St===0)break e;St--,Ct|=Bt[sn++]<<Vt,Vt+=8}if(Gt-=Nt,Tt.total_out+=Gt,mt.total+=Gt,Gt&&(Tt.adler=mt.check=mt.flags?et(mt.check,nn,Gt,xt-Gt):$(mt.check,nn,Gt,xt-Gt)),Gt=Nt,(mt.flags?Ct:it(Ct))!==mt.check){Tt.msg="incorrect data check",mt.mode=30;break}Ct=0,Vt=0}mt.mode=28;case 28:if(mt.wrap&&mt.flags){for(;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(Ct!==(4294967295&mt.total)){Tt.msg="incorrect length check",mt.mode=30;break}Ct=0,Vt=0}mt.mode=29;case 29:an=1;break e;case 30:an=-3;break e;case 31:return-4;case 32:default:return-2}return Tt.next_out=xt,Tt.avail_out=Nt,Tt.next_in=sn,Tt.avail_in=St,mt.hold=Ct,mt.bits=Vt,(mt.wsize||Gt!==Tt.avail_out&&mt.mode<30&&(mt.mode<27||It!==4))&&Lt(Tt,Tt.output,Tt.next_out,Gt-Tt.avail_out)?(mt.mode=31,-4):(Kt-=Tt.avail_in,Gt-=Tt.avail_out,Tt.total_in+=Kt,Tt.total_out+=Gt,mt.total+=Gt,mt.wrap&&Gt&&(Tt.adler=mt.check=mt.flags?et(mt.check,nn,Gt,Tt.next_out-Gt):$(mt.check,nn,Gt,Tt.next_out-Gt)),Tt.data_type=mt.bits+(mt.last?64:0)+(mt.mode===12?128:0)+(mt.mode===20||mt.mode===15?256:0),(Kt===0&&Gt===0||It===4)&&an===0&&(an=-5),an)},o.inflateEnd=function(Tt){if(!Tt||!Tt.state)return-2;var It=Tt.state;return It.window&&(It.window=null),Tt.state=null,0},o.inflateGetHeader=function(Tt,It){var mt;return Tt&&Tt.state&&2&(mt=Tt.state).wrap?(mt.head=It,It.done=!1,0):-2},o.inflateSetDictionary=function(Tt,It){var mt,Bt=It.length;return Tt&&Tt.state?(mt=Tt.state).wrap!==0&&mt.mode!==11?-2:mt.mode===11&&$(1,It,Bt,0)!==mt.check?-3:Lt(Tt,It,Bt,Bt)?(mt.mode=31,-4):(mt.havedict=1,0):-2},o.inflateInfo="pako inflate (from Nodeca project)"},function(i,o,s){i.exports=function(_,$){var et,tt,j,it,st,ht,vt,ft,pt,ct,yt,Et,Ot,Lt,Tt,It,mt,Bt,nn,sn,xt,St,Nt,Ct,Vt;et=_.state,tt=_.next_in,Ct=_.input,j=tt+(_.avail_in-5),it=_.next_out,Vt=_.output,st=it-($-_.avail_out),ht=it+(_.avail_out-257),vt=et.dmax,ft=et.wsize,pt=et.whave,ct=et.wnext,yt=et.window,Et=et.hold,Ot=et.bits,Lt=et.lencode,Tt=et.distcode,It=(1<<et.lenbits)-1,mt=(1<<et.distbits)-1;e:do{Ot<15&&(Et+=Ct[tt++]<<Ot,Ot+=8,Et+=Ct[tt++]<<Ot,Ot+=8),Bt=Lt[Et&It];t:for(;;){if(Et>>>=nn=Bt>>>24,Ot-=nn,(nn=Bt>>>16&255)===0)Vt[it++]=65535&Bt;else{if(!(16&nn)){if(!(64&nn)){Bt=Lt[(65535&Bt)+(Et&(1<<nn)-1)];continue t}if(32&nn){et.mode=12;break e}_.msg="invalid literal/length code",et.mode=30;break e}sn=65535&Bt,(nn&=15)&&(Ot<nn&&(Et+=Ct[tt++]<<Ot,Ot+=8),sn+=Et&(1<<nn)-1,Et>>>=nn,Ot-=nn),Ot<15&&(Et+=Ct[tt++]<<Ot,Ot+=8,Et+=Ct[tt++]<<Ot,Ot+=8),Bt=Tt[Et&mt];n:for(;;){if(Et>>>=nn=Bt>>>24,Ot-=nn,!(16&(nn=Bt>>>16&255))){if(!(64&nn)){Bt=Tt[(65535&Bt)+(Et&(1<<nn)-1)];continue n}_.msg="invalid distance code",et.mode=30;break e}if(xt=65535&Bt,Ot<(nn&=15)&&(Et+=Ct[tt++]<<Ot,(Ot+=8)<nn&&(Et+=Ct[tt++]<<Ot,Ot+=8)),(xt+=Et&(1<<nn)-1)>vt){_.msg="invalid distance too far back",et.mode=30;break e}if(Et>>>=nn,Ot-=nn,xt>(nn=it-st)){if((nn=xt-nn)>pt&&et.sane){_.msg="invalid distance too far back",et.mode=30;break e}if(St=0,Nt=yt,ct===0){if(St+=ft-nn,nn<sn){sn-=nn;do Vt[it++]=yt[St++];while(--nn);St=it-xt,Nt=Vt}}else if(ct<nn){if(St+=ft+ct-nn,(nn-=ct)<sn){sn-=nn;do Vt[it++]=yt[St++];while(--nn);if(St=0,ct<sn){sn-=nn=ct;do Vt[it++]=yt[St++];while(--nn);St=it-xt,Nt=Vt}}}else if(St+=ct-nn,nn<sn){sn-=nn;do Vt[it++]=yt[St++];while(--nn);St=it-xt,Nt=Vt}for(;sn>2;)Vt[it++]=Nt[St++],Vt[it++]=Nt[St++],Vt[it++]=Nt[St++],sn-=3;sn&&(Vt[it++]=Nt[St++],sn>1&&(Vt[it++]=Nt[St++]))}else{St=it-xt;do Vt[it++]=Vt[St++],Vt[it++]=Vt[St++],Vt[it++]=Vt[St++],sn-=3;while(sn>2);sn&&(Vt[it++]=Vt[St++],sn>1&&(Vt[it++]=Vt[St++]))}break}}break}}while(tt<j&&it<ht);tt-=sn=Ot>>3,Et&=(1<<(Ot-=sn<<3))-1,_.next_in=tt,_.next_out=it,_.avail_in=tt<j?j-tt+5:5-(tt-j),_.avail_out=it<ht?ht-it+257:257-(it-ht),et.hold=Et,et.bits=Ot}},function(i,o,s){var _=s(37),$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],j=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(it,st,ht,vt,ft,pt,ct,yt){var Et,Ot,Lt,Tt,It,mt,Bt,nn,sn,xt=yt.bits,St=0,Nt=0,Ct=0,Vt=0,Kt=0,Gt=0,Ut=0,Ht=0,qt=0,Pt=0,wt=null,$t=0,Xt=new _.Buf16(16),un=new _.Buf16(16),dn=null,mn=0;for(St=0;St<=15;St++)Xt[St]=0;for(Nt=0;Nt<vt;Nt++)Xt[st[ht+Nt]]++;for(Kt=xt,Vt=15;Vt>=1&&Xt[Vt]===0;Vt--);if(Kt>Vt&&(Kt=Vt),Vt===0)return ft[pt++]=20971520,ft[pt++]=20971520,yt.bits=1,0;for(Ct=1;Ct<Vt&&Xt[Ct]===0;Ct++);for(Kt<Ct&&(Kt=Ct),Ht=1,St=1;St<=15;St++)if(Ht<<=1,(Ht-=Xt[St])<0)return-1;if(Ht>0&&(it===0||Vt!==1))return-1;for(un[1]=0,St=1;St<15;St++)un[St+1]=un[St]+Xt[St];for(Nt=0;Nt<vt;Nt++)st[ht+Nt]!==0&&(ct[un[st[ht+Nt]]++]=Nt);if(it===0?(wt=dn=ct,mt=19):it===1?(wt=$,$t-=257,dn=et,mn-=257,mt=256):(wt=tt,dn=j,mt=-1),Pt=0,Nt=0,St=Ct,It=pt,Gt=Kt,Ut=0,Lt=-1,Tt=(qt=1<<Kt)-1,it===1&&qt>852||it===2&&qt>592)return 1;for(;;){Bt=St-Ut,ct[Nt]<mt?(nn=0,sn=ct[Nt]):ct[Nt]>mt?(nn=dn[mn+ct[Nt]],sn=wt[$t+ct[Nt]]):(nn=96,sn=0),Et=1<<St-Ut,Ct=Ot=1<<Gt;do ft[It+(Pt>>Ut)+(Ot-=Et)]=Bt<<24|nn<<16|sn|0;while(Ot!==0);for(Et=1<<St-1;Pt&Et;)Et>>=1;if(Et!==0?(Pt&=Et-1,Pt+=Et):Pt=0,Nt++,--Xt[St]==0){if(St===Vt)break;St=st[ht+ct[Nt]]}if(St>Kt&&(Pt&Tt)!==Lt){for(Ut===0&&(Ut=Kt),It+=Ct,Ht=1<<(Gt=St-Ut);Gt+Ut<Vt&&!((Ht-=Xt[Gt+Ut])<=0);)Gt++,Ht<<=1;if(qt+=1<<Gt,it===1&&qt>852||it===2&&qt>592)return 1;ft[Lt=Pt&Tt]=Kt<<24|Gt<<16|It-pt|0}}return Pt!==0&&(ft[It+Pt]=St-Ut<<24|64<<16|0),yt.bits=Kt,0}},function(i,o,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(i,o){},function(i,o,s){function _(st,ht){var vt=Object.keys(st);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(st);ht&&(ft=ft.filter(function(pt){return Object.getOwnPropertyDescriptor(st,pt).enumerable})),vt.push.apply(vt,ft)}return vt}function $(st,ht,vt){return ht in st?Object.defineProperty(st,ht,{value:vt,enumerable:!0,configurable:!0,writable:!0}):st[ht]=vt,st}function et(st,ht){for(var vt=0;vt<ht.length;vt++){var ft=ht[vt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(st,ft.key,ft)}}var tt=s(5).Buffer,j=s(181).inspect,it=j&&j.custom||"inspect";i.exports=function(){function st(){(function(ft,pt){if(!(ft instanceof pt))throw new TypeError("Cannot call a class as a function")})(this,st),this.head=null,this.tail=null,this.length=0}var ht,vt;return ht=st,(vt=[{key:"push",value:function(ft){var pt={data:ft,next:null};this.length>0?this.tail.next=pt:this.head=pt,this.tail=pt,++this.length}},{key:"unshift",value:function(ft){var pt={data:ft,next:this.head};this.length===0&&(this.tail=pt),this.head=pt,++this.length}},{key:"shift",value:function(){if(this.length!==0){var ft=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,ft}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ft){if(this.length===0)return"";for(var pt=this.head,ct=""+pt.data;pt=pt.next;)ct+=ft+pt.data;return ct}},{key:"concat",value:function(ft){if(this.length===0)return tt.alloc(0);for(var pt,ct,yt,Et=tt.allocUnsafe(ft>>>0),Ot=this.head,Lt=0;Ot;)pt=Ot.data,ct=Et,yt=Lt,tt.prototype.copy.call(pt,ct,yt),Lt+=Ot.data.length,Ot=Ot.next;return Et}},{key:"consume",value:function(ft,pt){var ct;return ft<this.head.data.length?(ct=this.head.data.slice(0,ft),this.head.data=this.head.data.slice(ft)):ct=ft===this.head.data.length?this.shift():pt?this._getString(ft):this._getBuffer(ft),ct}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ft){var pt=this.head,ct=1,yt=pt.data;for(ft-=yt.length;pt=pt.next;){var Et=pt.data,Ot=ft>Et.length?Et.length:ft;if(Ot===Et.length?yt+=Et:yt+=Et.slice(0,ft),(ft-=Ot)==0){Ot===Et.length?(++ct,pt.next?this.head=pt.next:this.head=this.tail=null):(this.head=pt,pt.data=Et.slice(Ot));break}++ct}return this.length-=ct,yt}},{key:"_getBuffer",value:function(ft){var pt=tt.allocUnsafe(ft),ct=this.head,yt=1;for(ct.data.copy(pt),ft-=ct.data.length;ct=ct.next;){var Et=ct.data,Ot=ft>Et.length?Et.length:ft;if(Et.copy(pt,pt.length-ft,0,Ot),(ft-=Ot)==0){Ot===Et.length?(++yt,ct.next?this.head=ct.next:this.head=this.tail=null):(this.head=ct,ct.data=Et.slice(Ot));break}++yt}return this.length-=yt,pt}},{key:it,value:function(ft,pt){return j(this,function(ct){for(var yt=1;yt<arguments.length;yt++){var Et=arguments[yt]!=null?arguments[yt]:{};yt%2?_(Object(Et),!0).forEach(function(Ot){$(ct,Ot,Et[Ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ct,Object.getOwnPropertyDescriptors(Et)):_(Object(Et)).forEach(function(Ot){Object.defineProperty(ct,Ot,Object.getOwnPropertyDescriptor(Et,Ot))})}return ct}({},pt,{depth:0,customInspect:!1}))}}])&&et(ht.prototype,vt),st}()},function(i,o){},function(i,o,s){(function(_){var $;function et(Tt,It,mt){return It in Tt?Object.defineProperty(Tt,It,{value:mt,enumerable:!0,configurable:!0,writable:!0}):Tt[It]=mt,Tt}var tt=s(49),j=Symbol("lastResolve"),it=Symbol("lastReject"),st=Symbol("error"),ht=Symbol("ended"),vt=Symbol("lastPromise"),ft=Symbol("handlePromise"),pt=Symbol("stream");function ct(Tt,It){return{value:Tt,done:It}}function yt(Tt){var It=Tt[j];if(It!==null){var mt=Tt[pt].read();mt!==null&&(Tt[vt]=null,Tt[j]=null,Tt[it]=null,It(ct(mt,!1)))}}function Et(Tt){_.nextTick(yt,Tt)}var Ot=Object.getPrototypeOf(function(){}),Lt=Object.setPrototypeOf((et($={get stream(){return this[pt]},next:function(){var Tt=this,It=this[st];if(It!==null)return Promise.reject(It);if(this[ht])return Promise.resolve(ct(void 0,!0));if(this[pt].destroyed)return new Promise(function(sn,xt){_.nextTick(function(){Tt[st]?xt(Tt[st]):sn(ct(void 0,!0))})});var mt,Bt=this[vt];if(Bt)mt=new Promise(function(sn,xt){return function(St,Nt){sn.then(function(){xt[ht]?St(ct(void 0,!0)):xt[ft](St,Nt)},Nt)}}(Bt,this));else{var nn=this[pt].read();if(nn!==null)return Promise.resolve(ct(nn,!1));mt=new Promise(this[ft])}return this[vt]=mt,mt}},Symbol.asyncIterator,function(){return this}),et($,"return",function(){var Tt=this;return new Promise(function(It,mt){Tt[pt].destroy(null,function(Bt){Bt?mt(Bt):It(ct(void 0,!0))})})}),$),Ot);i.exports=function(Tt){var It,mt=Object.create(Lt,(et(It={},pt,{value:Tt,writable:!0}),et(It,j,{value:null,writable:!0}),et(It,it,{value:null,writable:!0}),et(It,st,{value:null,writable:!0}),et(It,ht,{value:Tt._readableState.endEmitted,writable:!0}),et(It,ft,{value:function(Bt,nn){var sn=mt[pt].read();sn?(mt[vt]=null,mt[j]=null,mt[it]=null,Bt(ct(sn,!1))):(mt[j]=Bt,mt[it]=nn)},writable:!0}),It));return mt[vt]=null,tt(Tt,function(Bt){if(Bt&&Bt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var nn=mt[it];return nn!==null&&(mt[vt]=null,mt[j]=null,mt[it]=null,nn(Bt)),void(mt[st]=Bt)}var sn=mt[j];sn!==null&&(mt[vt]=null,mt[j]=null,mt[it]=null,sn(ct(void 0,!0))),mt[ht]=!0}),Tt.on("readable",Et.bind(null,mt)),mt}}).call(this,s(2))},function(i,o){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(i,o,s){i.exports=$;var _=s(82);function $(et){if(!(this instanceof $))return new $(et);_.call(this,et)}s(7)($,_),$.prototype._transform=function(et,tt,j){j(null,et)}},function(i,o,s){var _,$=s(26).codes,et=$.ERR_MISSING_ARGS,tt=$.ERR_STREAM_DESTROYED;function j(ft){if(ft)throw ft}function it(ft,pt,ct,yt){yt=function(Lt){var Tt=!1;return function(){Tt||(Tt=!0,Lt.apply(void 0,arguments))}}(yt);var Et=!1;ft.on("close",function(){Et=!0}),_===void 0&&(_=s(49)),_(ft,{readable:pt,writable:ct},function(Lt){if(Lt)return yt(Lt);Et=!0,yt()});var Ot=!1;return function(Lt){if(!Et&&!Ot)return Ot=!0,function(Tt){return Tt.setHeader&&typeof Tt.abort=="function"}(ft)?ft.abort():typeof ft.destroy=="function"?ft.destroy():void yt(Lt||new tt("pipe"))}}function st(ft){ft()}function ht(ft,pt){return ft.pipe(pt)}function vt(ft){return ft.length?typeof ft[ft.length-1]!="function"?j:ft.pop():j}i.exports=function(){for(var ft=arguments.length,pt=new Array(ft),ct=0;ct<ft;ct++)pt[ct]=arguments[ct];var yt,Et=vt(pt);if(Array.isArray(pt[0])&&(pt=pt[0]),pt.length<2)throw new et("streams");var Ot=pt.map(function(Lt,Tt){var It=Tt<pt.length-1;return it(Lt,It,Tt>0,function(mt){yt||(yt=mt),mt&&Ot.forEach(st),It||(Ot.forEach(st),Et(yt))})});return pt.reduce(ht)}},function(i,o,s){var _=s(187)(function $(et,tt){return(tt=tt||{}).namespace=et,tt.prod=!0,tt.dev=!1,tt.force||$.force?$.yep(tt):$.nope(tt)});i.exports=_},function(i,o){var s=[],_=[],$=function(){};function et(ct){return!~s.indexOf(ct)&&(s.push(ct),!0)}function tt(ct){$=ct}function j(ct){for(var yt=[],Et=0;Et<s.length;Et++)if(s[Et].async)yt.push(s[Et]);else if(s[Et](ct))return!0;return!!yt.length&&new Promise(function(Ot){Promise.all(yt.map(function(Lt){return Lt(ct)})).then(function(Lt){Ot(Lt.some(Boolean))})})}function it(ct){return!~_.indexOf(ct)&&(_.push(ct),!0)}function st(){$.apply($,arguments)}function ht(ct){for(var yt=0;yt<_.length;yt++)ct=_[yt].apply(_[yt],arguments);return ct}function vt(ct,yt){var Et=Object.prototype.hasOwnProperty;for(var Ot in yt)Et.call(yt,Ot)&&(ct[Ot]=yt[Ot]);return ct}function ft(ct){return ct.enabled=!1,ct.modify=it,ct.set=tt,ct.use=et,vt(function(){return!1},ct)}function pt(ct){return ct.enabled=!0,ct.modify=it,ct.set=tt,ct.use=et,vt(function(){var yt=Array.prototype.slice.call(arguments,0);return st.call(st,ct,ht(yt,ct)),!0},ct)}i.exports=function(ct){return ct.introduce=vt,ct.enabled=j,ct.process=ht,ct.modify=it,ct.write=st,ct.nope=ft,ct.yep=pt,ct.set=tt,ct.use=et,ct}},function(i,o,s){(function(_){var $=s(65),et=s(22).StringDecoder,tt=s(32).Stream;function j(){}i.exports=function(it,st){var ht=_.alloc(65536),vt=new et("utf8"),ft=new tt,pt="",ct=0,yt=0;return it.start===-1&&delete it.start,ft.readable=!0,ft.destroy=function(){ft.destroyed=!0,ft.emit("end"),ft.emit("close")},$.open(it.file,"a+","0644",function(Et,Ot){if(Et)return st?st(Et):ft.emit("error",Et),void ft.destroy();(function Lt(){if(!ft.destroyed)return $.read(Ot,ht,0,ht.length,ct,function(Tt,It){if(Tt)return st?st(Tt):ft.emit("error",Tt),void ft.destroy();if(!It)return pt&&((it.start==null||yt>it.start)&&(st?st(null,pt):ft.emit("line",pt)),yt++,pt=""),setTimeout(Lt,1e3);var mt=vt.write(ht.slice(0,It));st||ft.emit("data",mt);for(var Bt=(mt=(pt+mt).split(/\n+/)).length-1,nn=0;nn<Bt;nn++)(it.start==null||yt>it.start)&&(st?st(null,mt[nn]):ft.emit("line",mt[nn])),yt++;return pt=mt[Bt],ct+=It,Lt()});$.close(Ot,j)})()}),st?ft.destroy:ft}}).call(this,s(5).Buffer)},function(i,o,s){(function(_,$){function et(Tt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(It){return typeof It}:function(It){return It&&typeof Symbol=="function"&&It.constructor===Symbol&&It!==Symbol.prototype?"symbol":typeof It})(Tt)}function tt(Tt,It){var mt=Object.keys(Tt);if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(Tt);It&&(Bt=Bt.filter(function(nn){return Object.getOwnPropertyDescriptor(Tt,nn).enumerable})),mt.push.apply(mt,Bt)}return mt}function j(Tt){for(var It=1;It<arguments.length;It++){var mt=arguments[It]!=null?arguments[It]:{};It%2?tt(Object(mt),!0).forEach(function(Bt){it(Tt,Bt,mt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Tt,Object.getOwnPropertyDescriptors(mt)):tt(Object(mt)).forEach(function(Bt){Object.defineProperty(Tt,Bt,Object.getOwnPropertyDescriptor(mt,Bt))})}return Tt}function it(Tt,It,mt){return It in Tt?Object.defineProperty(Tt,It,{value:mt,enumerable:!0,configurable:!0,writable:!0}):Tt[It]=mt,Tt}function st(Tt,It){if(!(Tt instanceof It))throw new TypeError("Cannot call a class as a function")}function ht(Tt,It){for(var mt=0;mt<It.length;mt++){var Bt=It[mt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Tt,Bt.key,Bt)}}function vt(Tt,It){return(vt=Object.setPrototypeOf||function(mt,Bt){return mt.__proto__=Bt,mt})(Tt,It)}function ft(Tt){var It=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var mt,Bt=ct(Tt);if(It){var nn=ct(this).constructor;mt=Reflect.construct(Bt,arguments,nn)}else mt=Bt.apply(this,arguments);return pt(this,mt)}}function pt(Tt,It){return!It||et(It)!=="object"&&typeof It!="function"?function(mt){if(mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mt}(Tt):It}function ct(Tt){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(It){return It.__proto__||Object.getPrototypeOf(It)})(Tt)}var yt=s(83),Et=s(200),Ot=s(32).Stream,Lt=s(20);i.exports=function(Tt){(function(sn,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");sn.prototype=Object.create(xt&&xt.prototype,{constructor:{value:sn,writable:!0,configurable:!0}}),xt&&vt(sn,xt)})(nn,Tt);var It,mt,Bt=ft(nn);function nn(){var sn,xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,nn),(sn=Bt.call(this,xt)).options=xt,sn.name=xt.name||"http",sn.ssl=!!xt.ssl,sn.host=xt.host||"localhost",sn.port=xt.port,sn.auth=xt.auth,sn.path=xt.path||"",sn.agent=xt.agent,sn.headers=xt.headers||{},sn.headers["content-type"]="application/json",sn.port||(sn.port=sn.ssl?443:80),sn}return It=nn,(mt=[{key:"log",value:function(sn,xt){var St=this;this._request(sn,function(Nt,Ct){Ct&&Ct.statusCode!==200&&(Nt=new Error("Invalid HTTP Status Code: ".concat(Ct.statusCode))),Nt?St.emit("warn",Nt):St.emit("logged",sn)}),xt&&_(xt)}},{key:"query",value:function(sn,xt){typeof sn=="function"&&(xt=sn,sn={}),(sn={method:"query",params:this.normalizeQuery(sn)}).params.path&&(sn.path=sn.params.path,delete sn.params.path),sn.params.auth&&(sn.auth=sn.params.auth,delete sn.params.auth),this._request(sn,function(St,Nt,Ct){if(Nt&&Nt.statusCode!==200&&(St=new Error("Invalid HTTP Status Code: ".concat(Nt.statusCode))),St)return xt(St);if(typeof Ct=="string")try{Ct=JSON.parse(Ct)}catch(Vt){return xt(Vt)}xt(null,Ct)})}},{key:"stream",value:function(){var sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xt=new Ot;(sn={method:"stream",params:sn}).params.path&&(sn.path=sn.params.path,delete sn.params.path),sn.params.auth&&(sn.auth=sn.params.auth,delete sn.params.auth);var St="",Nt=this._request(sn);return xt.destroy=function(){return Nt.destroy()},Nt.on("data",function(Ct){for(var Vt=(Ct=(St+Ct).split(/\n+/)).length-1,Kt=0;Kt<Vt;Kt++)try{xt.emit("log",JSON.parse(Ct[Kt]))}catch(Gt){xt.emit("error",Gt)}St=Ct[Vt]}),Nt.on("error",function(Ct){return xt.emit("error",Ct)}),xt}},{key:"_request",value:function(sn,xt){var St=(sn=sn||{}).auth||this.auth,Nt=sn.path||this.path||"";delete sn.auth,delete sn.path;var Ct=Object.assign({},this.headers);St&&St.bearer&&(Ct.Authorization="Bearer ".concat(St.bearer));var Vt=(this.ssl?Et:yt).request(j(j({},this.options),{},{method:"POST",host:this.host,port:this.port,path:"/".concat(Nt.replace(/^\//,"")),headers:Ct,auth:St&&St.username&&St.password?"".concat(St.username,":").concat(St.password):"",agent:this.agent}));Vt.on("error",xt),Vt.on("response",function(Kt){return Kt.on("end",function(){return xt(null,Kt)}).resume()}),Vt.end($.from(JSON.stringify(sn),"utf8"))}}])&&ht(It.prototype,mt),nn}(Lt)}).call(this,s(15).setImmediate,s(5).Buffer)},function(i,o,s){(function(_,$,et){var tt=s(84),j=s(7),it=s(85),st=s(31),ht=s(191),vt=it.IncomingMessage,ft=it.readyStates,pt=i.exports=function(yt){var Et,Ot=this;st.Writable.call(Ot),Ot._opts=yt,Ot._body=[],Ot._headers={},yt.auth&&Ot.setHeader("Authorization","Basic "+new _(yt.auth).toString("base64")),Object.keys(yt.headers).forEach(function(Tt){Ot.setHeader(Tt,yt.headers[Tt])});var Lt=!0;if(yt.mode==="disable-fetch"||"requestTimeout"in yt&&!tt.abortController)Lt=!1,Et=!0;else if(yt.mode==="prefer-streaming")Et=!1;else if(yt.mode==="allow-wrong-content-type")Et=!tt.overrideMimeType;else{if(yt.mode&&yt.mode!=="default"&&yt.mode!=="prefer-fast")throw new Error("Invalid value for opts.mode");Et=!0}Ot._mode=function(Tt,It){return tt.fetch&&It?"fetch":tt.mozchunkedarraybuffer?"moz-chunked-arraybuffer":tt.msstream?"ms-stream":tt.arraybuffer&&Tt?"arraybuffer":tt.vbArray&&Tt?"text:vbarray":"text"}(Et,Lt),Ot._fetchTimer=null,Ot.on("finish",function(){Ot._onFinish()})};j(pt,st.Writable),pt.prototype.setHeader=function(yt,Et){var Ot=yt.toLowerCase();ct.indexOf(Ot)===-1&&(this._headers[Ot]={name:yt,value:Et})},pt.prototype.getHeader=function(yt){var Et=this._headers[yt.toLowerCase()];return Et?Et.value:null},pt.prototype.removeHeader=function(yt){delete this._headers[yt.toLowerCase()]},pt.prototype._onFinish=function(){var yt=this;if(!yt._destroyed){var Et=yt._opts,Ot=yt._headers,Lt=null;Et.method!=="GET"&&Et.method!=="HEAD"&&(Lt=tt.arraybuffer?ht(_.concat(yt._body)):tt.blobConstructor?new $.Blob(yt._body.map(function(nn){return ht(nn)}),{type:(Ot["content-type"]||{}).value||""}):_.concat(yt._body).toString());var Tt=[];if(Object.keys(Ot).forEach(function(nn){var sn=Ot[nn].name,xt=Ot[nn].value;Array.isArray(xt)?xt.forEach(function(St){Tt.push([sn,St])}):Tt.push([sn,xt])}),yt._mode==="fetch"){var It=null;if(tt.abortController){var mt=new AbortController;It=mt.signal,yt._fetchAbortController=mt,"requestTimeout"in Et&&Et.requestTimeout!==0&&(yt._fetchTimer=$.setTimeout(function(){yt.emit("requestTimeout"),yt._fetchAbortController&&yt._fetchAbortController.abort()},Et.requestTimeout))}$.fetch(yt._opts.url,{method:yt._opts.method,headers:Tt,body:Lt||void 0,mode:"cors",credentials:Et.withCredentials?"include":"same-origin",signal:It}).then(function(nn){yt._fetchResponse=nn,yt._connect()},function(nn){$.clearTimeout(yt._fetchTimer),yt._destroyed||yt.emit("error",nn)})}else{var Bt=yt._xhr=new $.XMLHttpRequest;try{Bt.open(yt._opts.method,yt._opts.url,!0)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}"responseType"in Bt&&(Bt.responseType=yt._mode.split(":")[0]),"withCredentials"in Bt&&(Bt.withCredentials=!!Et.withCredentials),yt._mode==="text"&&"overrideMimeType"in Bt&&Bt.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in Et&&(Bt.timeout=Et.requestTimeout,Bt.ontimeout=function(){yt.emit("requestTimeout")}),Tt.forEach(function(nn){Bt.setRequestHeader(nn[0],nn[1])}),yt._response=null,Bt.onreadystatechange=function(){switch(Bt.readyState){case ft.LOADING:case ft.DONE:yt._onXHRProgress()}},yt._mode==="moz-chunked-arraybuffer"&&(Bt.onprogress=function(){yt._onXHRProgress()}),Bt.onerror=function(){yt._destroyed||yt.emit("error",new Error("XHR error"))};try{Bt.send(Lt)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}}}},pt.prototype._onXHRProgress=function(){(function(yt){try{var Et=yt.status;return Et!==null&&Et!==0}catch{return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},pt.prototype._connect=function(){var yt=this;yt._destroyed||(yt._response=new vt(yt._xhr,yt._fetchResponse,yt._mode,yt._fetchTimer),yt._response.on("error",function(Et){yt.emit("error",Et)}),yt.emit("response",yt._response))},pt.prototype._write=function(yt,Et,Ot){this._body.push(yt),Ot()},pt.prototype.abort=pt.prototype.destroy=function(){this._destroyed=!0,$.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},pt.prototype.end=function(yt,Et,Ot){typeof yt=="function"&&(Ot=yt,yt=void 0),st.Writable.prototype.end.call(this,yt,Et,Ot)},pt.prototype.flushHeaders=function(){},pt.prototype.setTimeout=function(){},pt.prototype.setNoDelay=function(){},pt.prototype.setSocketKeepAlive=function(){};var ct=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,s(5).Buffer,s(6),s(2))},function(i,o,s){var _=s(5).Buffer;i.exports=function($){if($ instanceof Uint8Array){if($.byteOffset===0&&$.byteLength===$.buffer.byteLength)return $.buffer;if(typeof $.buffer.slice=="function")return $.buffer.slice($.byteOffset,$.byteOffset+$.byteLength)}if(_.isBuffer($)){for(var et=new Uint8Array($.length),tt=$.length,j=0;j<tt;j++)et[j]=$[j];return et.buffer}throw new Error("Argument must be a Buffer")}},function(i,o){i.exports=function(){for(var _={},$=0;$<arguments.length;$++){var et=arguments[$];for(var tt in et)s.call(et,tt)&&(_[tt]=et[tt])}return _};var s=Object.prototype.hasOwnProperty},function(i,o){i.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(i,o,s){(function(_,$){var et;(function(tt){o&&o.nodeType,_&&_.nodeType;var j=typeof $=="object"&&$;j.global!==j&&j.window!==j&&j.self;var it,st=2147483647,ht=/^xn--/,vt=/[^\x20-\x7E]/,ft=/[\x2E\u3002\uFF0E\uFF61]/g,pt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ct=Math.floor,yt=String.fromCharCode;function Et(xt){throw new RangeError(pt[xt])}function Ot(xt,St){for(var Nt=xt.length,Ct=[];Nt--;)Ct[Nt]=St(xt[Nt]);return Ct}function Lt(xt,St){var Nt=xt.split("@"),Ct="";return Nt.length>1&&(Ct=Nt[0]+"@",xt=Nt[1]),Ct+Ot((xt=xt.replace(ft,".")).split("."),St).join(".")}function Tt(xt){for(var St,Nt,Ct=[],Vt=0,Kt=xt.length;Vt<Kt;)(St=xt.charCodeAt(Vt++))>=55296&&St<=56319&&Vt<Kt?(64512&(Nt=xt.charCodeAt(Vt++)))==56320?Ct.push(((1023&St)<<10)+(1023&Nt)+65536):(Ct.push(St),Vt--):Ct.push(St);return Ct}function It(xt){return Ot(xt,function(St){var Nt="";return St>65535&&(Nt+=yt((St-=65536)>>>10&1023|55296),St=56320|1023&St),Nt+=yt(St)}).join("")}function mt(xt,St){return xt+22+75*(xt<26)-((St!=0)<<5)}function Bt(xt,St,Nt){var Ct=0;for(xt=Nt?ct(xt/700):xt>>1,xt+=ct(xt/St);xt>455;Ct+=36)xt=ct(xt/35);return ct(Ct+36*xt/(xt+38))}function nn(xt){var St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt,$t=[],Xt=xt.length,un=0,dn=128,mn=72;for((Nt=xt.lastIndexOf("-"))<0&&(Nt=0),Ct=0;Ct<Nt;++Ct)xt.charCodeAt(Ct)>=128&&Et("not-basic"),$t.push(xt.charCodeAt(Ct));for(Vt=Nt>0?Nt+1:0;Vt<Xt;){for(Kt=un,Gt=1,Ut=36;Vt>=Xt&&Et("invalid-input"),((Ht=(wt=xt.charCodeAt(Vt++))-48<10?wt-22:wt-65<26?wt-65:wt-97<26?wt-97:36)>=36||Ht>ct((st-un)/Gt))&&Et("overflow"),un+=Ht*Gt,!(Ht<(qt=Ut<=mn?1:Ut>=mn+26?26:Ut-mn));Ut+=36)Gt>ct(st/(Pt=36-qt))&&Et("overflow"),Gt*=Pt;mn=Bt(un-Kt,St=$t.length+1,Kt==0),ct(un/St)>st-dn&&Et("overflow"),dn+=ct(un/St),un%=St,$t.splice(un++,0,dn)}return It($t)}function sn(xt){var St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt,$t,Xt,un,dn,mn=[];for($t=(xt=Tt(xt)).length,St=128,Nt=0,Kt=72,Gt=0;Gt<$t;++Gt)(wt=xt[Gt])<128&&mn.push(yt(wt));for(Ct=Vt=mn.length,Vt&&mn.push("-");Ct<$t;){for(Ut=st,Gt=0;Gt<$t;++Gt)(wt=xt[Gt])>=St&&wt<Ut&&(Ut=wt);for(Ut-St>ct((st-Nt)/(Xt=Ct+1))&&Et("overflow"),Nt+=(Ut-St)*Xt,St=Ut,Gt=0;Gt<$t;++Gt)if((wt=xt[Gt])<St&&++Nt>st&&Et("overflow"),wt==St){for(Ht=Nt,qt=36;!(Ht<(Pt=qt<=Kt?1:qt>=Kt+26?26:qt-Kt));qt+=36)dn=Ht-Pt,un=36-Pt,mn.push(yt(mt(Pt+dn%un,0))),Ht=ct(dn/un);mn.push(yt(mt(Ht,0))),Kt=Bt(Nt,Xt,Ct==Vt),Nt=0,++Ct}++Nt,++St}return mn.join("")}it={version:"1.4.1",ucs2:{decode:Tt,encode:It},decode:nn,encode:sn,toASCII:function(xt){return Lt(xt,function(St){return vt.test(St)?"xn--"+sn(St):St})},toUnicode:function(xt){return Lt(xt,function(St){return ht.test(St)?nn(St.slice(4).toLowerCase()):St})}},(et=function(){return it}.call(o,s,o,_))===void 0||(_.exports=et)})()}).call(this,s(195)(i),s(6))},function(i,o){i.exports=function(s){return s.webpackPolyfill||(s.deprecate=function(){},s.paths=[],s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),s.webpackPolyfill=1),s}},function(i,o,s){i.exports={isString:function(_){return typeof _=="string"},isObject:function(_){return typeof _=="object"&&_!==null},isNull:function(_){return _===null},isNullOrUndefined:function(_){return _==null}}},function(i,o,s){o.decode=o.parse=s(198),o.encode=o.stringify=s(199)},function(i,o,s){function _(et,tt){return Object.prototype.hasOwnProperty.call(et,tt)}i.exports=function(et,tt,j,it){tt=tt||"&",j=j||"=";var st={};if(typeof et!="string"||et.length===0)return st;var ht=/\+/g;et=et.split(tt);var vt=1e3;it&&typeof it.maxKeys=="number"&&(vt=it.maxKeys);var ft=et.length;vt>0&&ft>vt&&(ft=vt);for(var pt=0;pt<ft;++pt){var ct,yt,Et,Ot,Lt=et[pt].replace(ht,"%20"),Tt=Lt.indexOf(j);Tt>=0?(ct=Lt.substr(0,Tt),yt=Lt.substr(Tt+1)):(ct=Lt,yt=""),Et=decodeURIComponent(ct),Ot=decodeURIComponent(yt),_(st,Et)?$(st[Et])?st[Et].push(Ot):st[Et]=[st[Et],Ot]:st[Et]=Ot}return st};var $=Array.isArray||function(et){return Object.prototype.toString.call(et)==="[object Array]"}},function(i,o,s){var _=function(j){switch(typeof j){case"string":return j;case"boolean":return j?"true":"false";case"number":return isFinite(j)?j:"";default:return""}};i.exports=function(j,it,st,ht){return it=it||"&",st=st||"=",j===null&&(j=void 0),typeof j=="object"?et(tt(j),function(vt){var ft=encodeURIComponent(_(vt))+st;return $(j[vt])?et(j[vt],function(pt){return ft+encodeURIComponent(_(pt))}).join(it):ft+encodeURIComponent(_(j[vt]))}).join(it):ht?encodeURIComponent(_(ht))+st+encodeURIComponent(_(j)):""};var $=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"};function et(j,it){if(j.map)return j.map(it);for(var st=[],ht=0;ht<j.length;ht++)st.push(it(j[ht],ht));return st}var tt=Object.keys||function(j){var it=[];for(var st in j)Object.prototype.hasOwnProperty.call(j,st)&&it.push(st);return it}},function(i,o,s){var _=s(83),$=s(86),et=i.exports;for(var tt in _)_.hasOwnProperty(tt)&&(et[tt]=_[tt]);function j(it){if(typeof it=="string"&&(it=$.parse(it)),it.protocol||(it.protocol="https:"),it.protocol!=="https:")throw new Error('Protocol "'+it.protocol+'" not supported. Expected "https:"');return it}et.request=function(it,st){return it=j(it),_.request.call(this,it,st)},et.get=function(it,st){return it=j(it),_.get.call(this,it,st)}},function(i,o,s){(function(_){function $(yt){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function et(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function tt(yt,Et){for(var Ot=0;Ot<Et.length;Ot++){var Lt=Et[Ot];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(yt,Lt.key,Lt)}}function j(yt,Et){return(j=Object.setPrototypeOf||function(Ot,Lt){return Ot.__proto__=Lt,Ot})(yt,Et)}function it(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Ot,Lt=ht(yt);if(Et){var Tt=ht(this).constructor;Ot=Reflect.construct(Lt,arguments,Tt)}else Ot=Lt.apply(this,arguments);return st(this,Ot)}}function st(yt,Et){return!Et||$(Et)!=="object"&&typeof Et!="function"?function(Ot){if(Ot===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ot}(yt):Et}function ht(yt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var vt=s(87),ft=s(3).MESSAGE,pt=s(18),ct=s(20);i.exports=function(yt){(function(It,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Super expression must either be null or a function");It.prototype=Object.create(mt&&mt.prototype,{constructor:{value:It,writable:!0,configurable:!0}}),mt&&j(It,mt)})(Tt,yt);var Et,Ot,Lt=it(Tt);function Tt(){var It,mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et(this,Tt),It=Lt.call(this,mt),!mt.stream||!vt(mt.stream))throw new Error("options.stream is required.");return It._stream=mt.stream,It._stream.setMaxListeners(1/0),It.isObjectMode=mt.stream._writableState.objectMode,It.eol=mt.eol||pt.EOL,It}return Et=Tt,(Ot=[{key:"log",value:function(It,mt){var Bt=this;if(_(function(){return Bt.emit("logged",It)}),this.isObjectMode)return this._stream.write(It),void(mt&&mt());this._stream.write("".concat(It[ft]).concat(this.eol)),mt&&mt()}}])&&tt(Et.prototype,Ot),Tt}(ct)}).call(this,s(15).setImmediate)},function(i,o,s){(function(_){function $(Ct,Vt,Kt){return Vt in Ct?Object.defineProperty(Ct,Vt,{value:Kt,enumerable:!0,configurable:!0,writable:!0}):Ct[Vt]=Kt,Ct}function et(Ct){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt})(Ct)}function tt(Ct,Vt){for(var Kt=0;Kt<Vt.length;Kt++){var Gt=Vt[Kt];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Ct,Gt.key,Gt)}}function j(Ct,Vt){return(j=Object.setPrototypeOf||function(Kt,Gt){return Kt.__proto__=Gt,Kt})(Ct,Vt)}function it(Ct){var Vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Kt,Gt=ht(Ct);if(Vt){var Ut=ht(this).constructor;Kt=Reflect.construct(Gt,arguments,Ut)}else Kt=Gt.apply(this,arguments);return st(this,Kt)}}function st(Ct,Vt){return!Vt||et(Vt)!=="object"&&typeof Vt!="function"?function(Kt){if(Kt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt}(Ct):Vt}function ht(Ct){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)})(Ct)}var vt=s(32),ft=vt.Stream,pt=vt.Transform,ct=s(51),yt=s(3),Et=yt.LEVEL,Ot=yt.SPLAT,Lt=s(87),Tt=s(89),It=s(93),mt=s(206),Bt=s(207),nn=s(61).warn,sn=s(50),xt=/%[scdjifoO%]/g,St=function(Ct){(function(Ht,qt){if(typeof qt!="function"&&qt!==null)throw new TypeError("Super expression must either be null or a function");Ht.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Ht,writable:!0,configurable:!0}}),qt&&j(Ht,qt)})(Ut,Ct);var Vt,Kt,Gt=it(Ut);function Ut(Ht){var qt;return function(Pt,wt){if(!(Pt instanceof wt))throw new TypeError("Cannot call a class as a function")}(this,Ut),(qt=Gt.call(this,{objectMode:!0})).configure(Ht),qt}return Vt=Ut,(Kt=[{key:"child",value:function(Ht){var qt=this;return Object.create(qt,{write:{value:function(Pt){var wt=Object.assign({},Ht,Pt);Pt instanceof Error&&(wt.stack=Pt.stack,wt.message=Pt.message),qt.write(wt)}}})}},{key:"configure",value:function(){var Ht=this,qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pt=qt.silent,wt=qt.format,$t=qt.defaultMeta,Xt=qt.levels,un=qt.level,dn=un===void 0?"info":un,mn=qt.exitOnError,an=mn===void 0||mn,en=qt.transports,Mt=qt.colors,jt=qt.emitErrs,Qt=qt.formatters,gn=qt.padLevels,hn=qt.rewriters,An=qt.stripColors,Mn=qt.exceptionHandlers,Yn=qt.rejectionHandlers;if(this.transports.length&&this.clear(),this.silent=Pt,this.format=wt||this.format||s(208)(),this.defaultMeta=$t||null,this.levels=Xt||this.levels||sn.npm.levels,this.level=dn,this.exceptions=new Tt(this),this.rejections=new It(this),this.profilers={},this.exitOnError=an,en&&(en=Array.isArray(en)?en:[en]).forEach(function(Nr){return Ht.add(Nr)}),Mt||jt||Qt||gn||hn||An)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));Mn&&this.exceptions.handle(Mn),Yn&&this.rejections.handle(Yn)}},{key:"isLevelEnabled",value:function(Ht){var qt=this,Pt=Nt(this.levels,Ht);if(Pt===null)return!1;var wt=Nt(this.levels,this.level);return wt!==null&&(this.transports&&this.transports.length!==0?this.transports.findIndex(function($t){var Xt=Nt(qt.levels,$t.level);return Xt===null&&(Xt=wt),Xt>=Pt})!==-1:wt>=Pt)}},{key:"log",value:function(Ht,qt){for(var Pt,wt,$t=arguments.length,Xt=new Array($t>2?$t-2:0),un=2;un<$t;un++)Xt[un-2]=arguments[un];if(arguments.length===1)return Ht[Et]=Ht.level,this._addDefaultMeta(Ht),this.write(Ht),this;if(arguments.length===2)return qt&&et(qt)==="object"?(qt[Et]=qt.level=Ht,this._addDefaultMeta(qt),this.write(qt),this):(this.write(($(wt={},Et,Ht),$(wt,"level",Ht),$(wt,"message",qt),wt)),this);var dn=Xt[0];if(et(dn)==="object"&&dn!==null){var mn=qt&&qt.match&&qt.match(xt);if(!mn){var an,en=Object.assign({},this.defaultMeta,dn,($(an={},Et,Ht),$(an,Ot,Xt),$(an,"level",Ht),$(an,"message",qt),an));return dn.message&&(en.message="".concat(en.message," ").concat(dn.message)),dn.stack&&(en.stack=dn.stack),this.write(en),this}}return this.write(Object.assign({},this.defaultMeta,($(Pt={},Et,Ht),$(Pt,Ot,Xt),$(Pt,"level",Ht),$(Pt,"message",qt),Pt))),this}},{key:"_transform",value:function(Ht,qt,Pt){if(this.silent)return Pt();Ht[Et]||(Ht[Et]=Ht.level),this.levels[Ht[Et]]||this.levels[Ht[Et]]===0||console.error("[winston] Unknown logger level: %s",Ht[Et]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports %j",Ht);try{this.push(this.format.transform(Ht,this.format.options))}catch(wt){throw wt}finally{Pt()}}},{key:"_final",value:function(Ht){var qt=this.transports.slice();ct(qt,function(Pt,wt){if(!Pt||Pt.finished)return _(wt);Pt.once("finish",wt),Pt.end()},Ht)}},{key:"add",value:function(Ht){var qt=!Lt(Ht)||Ht.log.length>2?new mt({transport:Ht}):Ht;if(!qt._writableState||!qt._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",qt),this._onEvent("warn",qt),this.pipe(qt),Ht.handleExceptions&&this.exceptions.handle(),Ht.handleRejections&&this.rejections.handle(),this}},{key:"remove",value:function(Ht){if(!Ht)return this;var qt=Ht;return(!Lt(Ht)||Ht.log.length>2)&&(qt=this.transports.filter(function(Pt){return Pt.transport===Ht})[0]),qt&&this.unpipe(qt),this}},{key:"clear",value:function(){return this.unpipe(),this}},{key:"close",value:function(){return this.clear(),this.emit("close"),this}},{key:"setLevels",value:function(){nn.deprecated("setLevels")}},{key:"query",value:function(Ht,qt){typeof Ht=="function"&&(qt=Ht,Ht={}),Ht=Ht||{};var Pt={},wt=Object.assign({},Ht.query||{});ct(this.transports.filter(function($t){return!!$t.query}),function($t,Xt){(function(un,dn){Ht.query&&typeof un.formatQuery=="function"&&(Ht.query=un.formatQuery(wt)),un.query(Ht,function(mn,an){if(mn)return dn(mn);typeof un.formatResults=="function"&&(an=un.formatResults(an,Ht.format)),dn(null,an)})})($t,function(un,dn){Xt&&((dn=un||dn)&&(Pt[$t.name]=dn),Xt()),Xt=null})},function(){return qt(null,Pt)})}},{key:"stream",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=new ft,Pt=[];return qt._streams=Pt,qt.destroy=function(){for(var wt=Pt.length;wt--;)Pt[wt].destroy()},this.transports.filter(function(wt){return!!wt.stream}).forEach(function(wt){var $t=wt.stream(Ht);$t&&(Pt.push($t),$t.on("log",function(Xt){Xt.transport=Xt.transport||[],Xt.transport.push(wt.name),qt.emit("log",Xt)}),$t.on("error",function(Xt){Xt.transport=Xt.transport||[],Xt.transport.push(wt.name),qt.emit("error",Xt)}))}),qt}},{key:"startTimer",value:function(){return new Bt(this)}},{key:"profile",value:function(Ht){var qt=Date.now();if(this.profilers[Ht]){var Pt=this.profilers[Ht];delete this.profilers[Ht];for(var wt=arguments.length,$t=new Array(wt>1?wt-1:0),Xt=1;Xt<wt;Xt++)$t[Xt-1]=arguments[Xt];typeof $t[$t.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),$t.pop());var un=et($t[$t.length-1])==="object"?$t.pop():{};return un.level=un.level||"info",un.durationMs=qt-Pt,un.message=un.message||Ht,this.write(un)}return this.profilers[Ht]=qt,this}},{key:"handleExceptions",value:function(){var Ht;console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),(Ht=this.exceptions).handle.apply(Ht,arguments)}},{key:"unhandleExceptions",value:function(){var Ht;console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),(Ht=this.exceptions).unhandle.apply(Ht,arguments)}},{key:"cli",value:function(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}},{key:"_onEvent",value:function(Ht,qt){qt["__winston"+Ht]||(qt["__winston"+Ht]=function(Pt){Ht!=="error"||this.transports.includes(qt)||this.add(qt),this.emit(Ht,Pt,qt)}.bind(this),qt.on(Ht,qt["__winston"+Ht]))}},{key:"_addDefaultMeta",value:function(Ht){this.defaultMeta&&Object.assign(Ht,this.defaultMeta)}}])&&tt(Vt.prototype,Kt),Ut}(pt);function Nt(Ct,Vt){var Kt=Ct[Vt];return Kt||Kt===0?Kt:null}Object.defineProperty(St.prototype,"transports",{configurable:!1,enumerable:!0,get:function(){var Ct=this._readableState.pipes;return Array.isArray(Ct)?Ct:[Ct].filter(Boolean)}}),i.exports=St}).call(this,s(15).setImmediate)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=ht(s(45)),$=ht(s(46)),et=ht(s(66)),tt=ht(s(67)),j=ht(s(68)),it=ht(s(25)),st=ht(s(30));function ht(pt){return pt&&pt.__esModule?pt:{default:pt}}function vt(pt,ct,yt){yt=(0,tt.default)(yt);var Et=0,Ot=0,{length:Lt}=pt,Tt=!1;function It(mt,Bt){mt===!1&&(Tt=!0),Tt!==!0&&(mt?yt(mt):++Ot!==Lt&&Bt!==$.default||yt(null))}for(Lt===0&&yt(null);Et<Lt;Et++)ct(pt[Et],Et,(0,j.default)(It))}function ft(pt,ct,yt){return(0,et.default)(pt,1/0,ct,yt)}o.default=(0,st.default)(function(pt,ct,yt){return((0,_.default)(pt)?vt:ft)(pt,(0,it.default)(ct),yt)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return($,et,tt)=>_($,tt)},i.exports=o.default},function(i,o,s){var _=Object.prototype.toString;i.exports=function($){if(typeof $.displayName=="string"&&$.constructor.name)return $.displayName;if(typeof $.name=="string"&&$.name)return $.name;if(typeof $=="object"&&$.constructor&&typeof $.constructor.name=="string")return $.constructor.name;var et=$.toString(),tt=_.call($).slice(8,-1);return(et=tt==="Function"?et.substring(et.indexOf("(")+1,et.indexOf(")")):tt)||"anonymous"}},function(i,o,s){const _=s(13),{LEVEL:$}=s(3),et=s(20),tt=i.exports=function(j={}){if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(it){this.emit("error",it,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(let st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){function _(et){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(et)}function $(et,tt){for(var j=0;j<tt.length;j++){var it=tt[j];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(et,it.key,it)}}i.exports=function(){function et(it){if(function(st,ht){if(!(st instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,et),!it)throw new Error("Logger is required for profiling.");this.logger=it,this.start=Date.now()}var tt,j;return tt=et,(j=[{key:"done",value:function(){for(var it=arguments.length,st=new Array(it),ht=0;ht<it;ht++)st[ht]=arguments[ht];typeof st[st.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),st.pop());var vt=_(st[st.length-1])==="object"?st.pop():{};return vt.level=vt.level||"info",vt.durationMs=Date.now()-this.start,this.logger.write(vt)}}])&&$(tt.prototype,j),et}()},function(i,o,s){(function(_){const $=s(209),{MESSAGE:et}=s(3),tt=s(35);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$((it,st={})=>(it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it))}).call(this,s(5).Buffer)},function(i,o,s){class _ extends Error{constructor(et){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${et.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,_)}}i.exports=$=>{if($.length>2)throw new _($);function et(j={}){this.options=j}function tt(j){return new et(j)}return et.prototype.transform=$,tt.Format=et,tt}},function(i,o,s){function _(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")}function $(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var et=s(88);i.exports=function(){function tt(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,tt),this.loggers=new Map,this.options=st}var j,it;return j=tt,(it=[{key:"add",value:function(st,ht){var vt=this;if(!this.loggers.has(st)){var ft=(ht=Object.assign({},ht||this.options)).transports||this.options.transports;ht.transports=ft?ft.slice():[];var pt=et(ht);pt.on("close",function(){return vt._delete(st)}),this.loggers.set(st,pt)}return this.loggers.get(st)}},{key:"get",value:function(st,ht){return this.add(st,ht)}},{key:"has",value:function(st){return!!this.loggers.has(st)}},{key:"close",value:function(st){var ht=this;if(st)return this._removeLogger(st);this.loggers.forEach(function(vt,ft){return ht._removeLogger(ft)})}},{key:"_removeLogger",value:function(st){this.loggers.has(st)&&(this.loggers.get(st).close(),this._delete(st))}},{key:"_delete",value:function(st){this.loggers.delete(st)}}])&&$(j.prototype,it),tt}()},function(i,o,s){(function(_){const $=s(52),et=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;i.exports=function(tt,j,it,st){let ht,vt,ft=!1,pt=!1;const ct=s(94);function yt(Lt){st(j,Lt)}function Et(Lt,Tt){let It=`"${j}" ${Tt}`;throw Lt&&(It=`${It}`),vt&&(It=`${It}. An example of a valid value would be: ${vt}`),new $(It)}const Ot={convertFromBase64:function(){return yt("marking for base64 conversion"),ft=!0,Ot},default:function(Lt){if(typeof Lt=="number")ht=Lt.toString();else if(Array.isArray(Lt)||typeof Lt=="object"&&Lt!==null)ht=JSON.stringify(Lt);else{if(typeof Lt!="string")throw new $("values passed to default() must be of Number, String, Array, or Object type");ht=Lt}return yt(`setting default value to "${ht}"`),Ot},required:function(Lt){return Lt===void 0?(yt("marked as required"),pt=!0):(yt(`setting required flag to ${Lt}`),pt=Lt),Ot},example:function(Lt){return vt=Lt,Ot}};return Object.entries(__spreadValues$1(__spreadValues$1({},ct),it)).forEach(([Lt,Tt])=>{Ot[Lt]=function(It){return function(){let mt=tt[j];if(yt(`will be read from the environment using "${It.name}" accessor`),mt===void 0)if(ht===void 0&&pt)yt("was not found in the environment, but is required to be set"),Et(void 0,"is a required variable, but it was not set");else{if(ht===void 0)return void yt("was not found in the environment, but is not required. returning undefined");yt(`was not found in the environment, parsing default value "${ht}" instead`),mt=ht}pt&&(yt("verifying variable value is not an empty string"),mt.trim().length===0&&Et(void 0,"is a required variable, but its value was empty")),ft&&(yt("verifying variable is a valid base64 string"),mt.match(et)||Et(mt,"should be a valid base64 string if using convertFromBase64"),yt("converting from base64 to utf8 string"),mt=_.from(mt,"base64").toString());const Bt=[mt].concat(Array.prototype.slice.call(arguments));try{yt(`passing value "${mt}" to "${It.name}" accessor`);const nn=It.apply(It,Bt);return yt(`parsed successfully, returning ${nn}`),nn}catch(nn){Et(mt,nn.message)}}}(Tt)}),Ot}}).call(this,s(5).Buffer)},function(i,o,s){const _=s(33);i.exports=function($,et){return et=et||",",$.length?_($).split(et).filter(Boolean):[]}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if($!=="false"&&$!=="true")throw new Error('should be either "true", "false", "TRUE", or "FALSE"');return $!=="false"}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if(["false","0","true","1"].indexOf($)===-1)throw new Error('should be either "true", "false", "TRUE", "FALSE", 1, or 0');return!($==="0"||$==="false")}},function(i,o,s){const _=s(95);i.exports=function($){var et=_($);if(et>65535)throw new Error("cannot assign a port number greater than 65535");return et}},function(i,o,s){const _=s(33);i.exports=function($,et){const tt=_($);if(et.indexOf(tt)<0)throw new Error(`should be one of [${et.join(", ")}]`);return tt}},function(i,o,s){const _=s(54);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative float");return et}},function(i,o,s){const _=s(54);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive float");return et}},function(i,o,s){const _=s(53);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative integer");return et}},function(i,o,s){const _=s(55);i.exports=function($){var et=_($);if(!Array.isArray(et))throw new Error("should be a parseable JSON Array");return et}},function(i,o,s){const _=s(55);i.exports=function($){var et=_($);if(Array.isArray(et))throw new Error("should be a parseable JSON Object");return et}},function(i,o,s){i.exports=function(_,$){try{RegExp(void 0,$)}catch{throw new Error("invalid regexp flags")}try{return new RegExp(_,$)}catch{throw new Error("should be a valid regexp")}}},function(i,o,s){const _=s(96);i.exports=function($){return _($).toString()}},function(i,o,s){const _=s(33),$=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021\u0023-\u005b\u005d-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021-\u005a\u0053-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])+)\])$/;i.exports=function(et){const tt=_(et);if(!$.test(tt))throw new Error("should be a valid email address");return tt}},function(i,o,s){i.exports=function(_,$){return function(et,tt){$&&$.match(/prod|production/)||_(`env-var (${et}): ${tt}`)}}},function(i,o,s){(function(_){(function(){var $,et,tt,j,it,st;typeof performance<"u"&&performance!==null&&performance.now?i.exports=function(){return performance.now()}:_!=null&&_.hrtime?(i.exports=function(){return($()-it)/1e6},et=_.hrtime,j=($=function(){var ht;return 1e9*(ht=et())[0]+ht[1]})(),st=1e9*_.uptime(),it=j-st):Date.now?(i.exports=function(){return Date.now()-tt},tt=Date.now()):(i.exports=function(){return new Date().getTime()-tt},tt=new Date().getTime())}).call(this)}).call(this,s(2))},function(i,o,s){(function(_){(function($){function et(j){if((j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextEncoder': The encoding label provided ('"+j+"') is invalid.")}function tt(j,it){if(it=it===void 0?{fatal:!1}:it,(j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+j+"') is invalid.");if(it.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}if($.TextEncoder&&$.TextDecoder)return!1;Object.defineProperty(et.prototype,"encoding",{value:"utf-8"}),et.prototype.encode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");it=0;for(var st=j.length,ht=0,vt=Math.max(32,st+(st>>1)+7),ft=new Uint8Array(vt>>3<<3);it<st;){var pt=j.charCodeAt(it++);if(55296<=pt&&56319>=pt){if(it<st){var ct=j.charCodeAt(it);(64512&ct)==56320&&(++it,pt=((1023&pt)<<10)+(1023&ct)+65536)}if(55296<=pt&&56319>=pt)continue}if(ht+4>ft.length&&(vt+=8,vt=(vt*=1+it/j.length*2)>>3<<3,(ct=new Uint8Array(vt)).set(ft),ft=ct),(4294967168&pt)==0)ft[ht++]=pt;else{if(!(4294965248&pt))ft[ht++]=pt>>6&31|192;else if(!(4294901760&pt))ft[ht++]=pt>>12&15|224,ft[ht++]=pt>>6&63|128;else{if(4292870144&pt)continue;ft[ht++]=pt>>18&7|240,ft[ht++]=pt>>12&63|128,ft[ht++]=pt>>6&63|128}ft[ht++]=63&pt|128}}return ft.slice(0,ht)},Object.defineProperty(tt.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(tt.prototype,"fatal",{value:!1}),Object.defineProperty(tt.prototype,"ignoreBOM",{value:!1}),tt.prototype.decode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");it=0;for(var st=(j=new Uint8Array(j)).length,ht=[];it<st;){var vt=j[it++];if(vt===0)break;if(!(128&vt))ht.push(vt);else if((224&vt)==192){var ft=63&j[it++];ht.push((31&vt)<<6|ft)}else if((240&vt)==224){ft=63&j[it++];var pt=63&j[it++];ht.push((31&vt)<<12|ft<<6|pt)}else(248&vt)==240&&(65535<(vt=(7&vt)<<18|(ft=63&j[it++])<<12|(pt=63&j[it++])<<6|63&j[it++])&&(vt-=65536,ht.push(vt>>>10&1023|55296),vt=56320|1023&vt),ht.push(vt))}return String.fromCharCode.apply(null,ht)},$.TextEncoder=et,$.TextDecoder=tt})(typeof window<"u"?window:_!==void 0?_:this)}).call(this,s(6))},function(i,o,s){s.r(o),s.d(o,"AuthClient",function(){return et}),s.d(o,"RtcSignalingClient",function(){return j}),s.d(o,"Credentials",function(){return Vt}),s.d(o,"IRtcStream",function(){}),s.d(o,"SignalingPromiseClient",function(){return Kt.SignalingPromiseClient}),s.d(o,"IRtcClientConfigurationV1",function(){}),s.d(o,"IRtcClientConfiguration",function(){}),s.d(o,"IRtcConnectionStatsInfo",function(){}),s.d(o,"IRtcSendConfiguration",function(){}),s.d(o,"IRtcSessionMetricsMessageCounts",function(){}),s.d(o,"IRtcStreamMessage",function(){}),s.d(o,"IRtcStreamPayload",function(){}),s.d(o,"IStreamControl",function(){}),s.d(o,"RtcClient",function(){return Ir}),s.d(o,"RtcClientV1",function(){return na}),s.d(o,"createRtcStreamMessage",function(){return In});var _=s(28),$=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class et extends _.a{adminSignup(bn,En){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/admin-signup",{token:En,method:"POST",body:JSON.stringify(bn)})})}login(bn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login",{method:"POST",body:JSON.stringify(bn),allowUnsafeRetries:!0})})}loginWithGoogleToken(bn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login-google",{method:"POST",body:JSON.stringify(bn),allowUnsafeRetries:!0})})}refresh(bn,En){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:bn,tokenExpirationSeconds:En}),allowUnsafeRetries:!0})})}respondToNewPasswordRequiredChallenge(bn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/respond-to-new-password-required-challenge",{method:"POST",body:JSON.stringify(bn)})})}forgotPassword(bn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/forgot-password",{method:"POST",body:JSON.stringify({email:bn})})})}confirmForgotPassword(bn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/confirm-forgot-password",{method:"POST",body:JSON.stringify(bn)})})}resendInvitation(bn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/resend-invitation",{method:"POST",body:JSON.stringify({email:bn})})})}changePassword({token:bn,refreshToken:En,currentPassword:Bn,newPassword:ur}){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/change-password",{token:bn,method:"POST",body:JSON.stringify({refreshToken:En,currentPassword:Bn,newPassword:ur})})})}getDeviceCredentials(bn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/device-credentials",{token:bn,method:"POST",allowUnsafeRetries:!0})})}impersonate(bn,En){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/impersonate",{token:bn,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({userId:En})})})}createServiceAccount(bn,En,Bn,ur){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/service-account",{token:bn,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({name:En,roleId:Bn,tags:ur})})})}getFeatures(bn){return $(this,void 0,void 0,function*(){return(yield this.fetch("auth/features",{token:bn})).features})}}var tt=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class j extends _.a{createPeer(bn,En){return tt(this,void 0,void 0,function*(){return yield this.fetch("peers",{token:bn,method:"POST",body:JSON.stringify(En)})})}getPeers(bn){return tt(this,void 0,void 0,function*(){return(yield this.fetch("peers",{token:bn})).items})}refreshPeer(bn,En){return tt(this,void 0,void 0,function*(){yield this.fetch(`peers/${En}/refresh`,{token:bn,method:"POST",allowUnsafeRetries:!0})})}createSession(bn,En){return tt(this,void 0,void 0,function*(){return yield this.fetch("sessions",{token:bn,method:"POST",body:JSON.stringify(En)})})}refreshSession(bn,En){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${En}/refresh`,{token:bn,method:"POST",allowUnsafeRetries:!0})})}deleteSession(bn,En){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${En}`,{token:bn,method:"DELETE",allowUnsafeRetries:!0})})}getSessions(bn){return tt(this,void 0,void 0,function*(){return(yield this.fetch("sessions",{token:bn})).items})}getIceServers(bn){return tt(this,void 0,void 0,function*(){return(yield this.fetch("ice-servers",{token:bn})).items})}addSignals(bn,En,Bn){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${En}/add-signals`,{token:bn,method:"POST",body:JSON.stringify(Bn)})})}takeSignals(bn,En){return tt(this,void 0,void 0,function*(){return(yield this.fetch(`sessions/${En}/take-signals`,{token:bn,method:"POST"})).items})}}var it=s(1),st=s(8),ht=s(14),vt=s.n(ht),ft=s(104),pt=s.n(ft),ct=s(0),yt=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class Et{constructor(bn){this.name="LogReporter",this.type="simple",this.message=bn}send(bn){return yt(this,void 0,void 0,function*(){var En,Bn;ct.a.info(this.message,(En=bn.reduce((ur,pr)=>Object.assign(Object.assign({},ur),{[pr.name]:pr.stat}),{}),Bn=ur=>{const{sum:pr,count:Zr}=ur,Xr=pr/Zr;return Object.assign(Object.assign({},ur),{average:Xr})},Object.keys(En).reduce((ur,pr)=>Object.assign(Object.assign({},ur),{[pr]:Bn(En[pr])}),{})))})}}var Ot=s(4),Lt=s(39);function Tt(Gr){return!!Gr.match(/^[a-zA-Z0-9-_.,:?'"()@\/\\#$+ ]{1,255}$/)}var It=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};function mt({func:Gr,delay:bn,immediate:En}){let Bn=!1,ur=setTimeout(function Zr(){return It(this,void 0,void 0,function*(){if(Bn)return;const Xr=new Date().getTime();try{pr=Gr(),yield pr}finally{if(!Bn){const qr=new Date().getTime();ur=setTimeout(Zr,Math.max(bn-(qr-Xr),0))}}})},En?0:bn),pr=Promise.resolve();return{stop(){return It(this,void 0,void 0,function*(){Bn=!0,clearTimeout(ur),yield pr})}}}var Bt=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};const nn=s(226),sn=!!Ot.c,xt=new class{constructor(Gr){this.samplePeriodSeconds=60,this.buffer={},this.reporters=[],this.flushInterval=mt({func:()=>this.flushStats(),delay:this.samplePeriodSeconds*it.a.second}),this.tags=this.filterTags((Gr==null?void 0:Gr.tags)||{app:Ot.a,version:Ot.j,namespace:Ot.i,instanceId:Lt.a})}shutdown(){return Bt(this,void 0,void 0,function*(){yield this.flushInterval.stop(),yield this.flushStats(),yield Object(st.a)(2*it.a.second)})}aggregate(Gr,bn,En){this.addToBuffer(this.buffer,this.encodeKey({metric:Gr,tags:this.filterTags(En||{})}),typeof bn=="number"?{min:bn,max:bn,sum:bn,count:1}:bn)}increment(Gr,bn){this.aggregate(Gr,1,bn)}timer(Gr,bn,En){return Bt(this,void 0,void 0,function*(){const Bn=nn(),ur=yield bn(),pr=nn();return this.aggregate(Gr,pr-Bn,En),ur})}registerStatsReporter(Gr){this.reporters.push(Gr)}setTag(Gr,bn){const En=this.filterTags({[Gr]:bn});this.tags=Object.assign(Object.assign({},this.tags),En)}addToBuffer(Gr,bn,En){if(Gr[bn]){const{min:Bn,max:ur,sum:pr,count:Zr}=Gr[bn];Gr[bn]={min:Math.min(Bn,En.min),max:Math.max(ur,En.max),sum:pr+En.sum,count:Zr+En.count}}else Gr[bn]=En}write(Gr){return Bt(this,void 0,void 0,function*(){yield Promise.all(this.reporters.map(bn=>Bt(this,void 0,void 0,function*(){let En;const Bn={};switch(bn.type){case"simple":for(const[pr,Zr]of Object.entries(Gr)){const{metric:Xr}=this.decodeKey(pr);this.addToBuffer(Bn,this.encodeKey({metric:Xr}),Zr)}En=Bn;break;case"tagged":En=Gr;break;default:(function(pr){throw new Error(`Unreachable type encountered (${pr})`)})(bn.type)}const ur=Object.entries(En);if(ur.length>0)return bn.send(ur.map(([pr,Zr])=>{const{metric:Xr,tags:qr}=this.decodeKey(pr);return{name:Xr,tags:Object.assign(Object.assign({},qr),this.tags),stat:Zr}}),this.samplePeriodSeconds).catch(pr=>{ct.a.debug(`Failed to write stats to ${bn.name}`,{error:pr})})})))})}flushStats(){return Bt(this,void 0,void 0,function*(){yield this.write(this.buffer),this.buffer={}})}encodeKey(Gr){return vt()(Object.assign(Object.assign({},Gr),Object.keys(Gr.tags||{}).length>0?{tags:Gr.tags}:{}))}decodeKey(Gr){return JSON.parse(Gr)}filterTags(Gr){return Object.entries(Gr||{}).reduce((bn,[En,Bn])=>(Tt(En)&&Tt(Bn)&&(bn[En]=Bn),bn),{})}};sn||["local","on-prem"].includes(Ot.i)||xt.registerStatsReporter(new Et("stats"));var St=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class Nt extends class{constructor(bn){this.options=bn,this.cache=new pt.a(Object.assign(Object.assign(Object.assign({},bn.dispose||bn.disposeAfter?{ttlAutopurge:!0}:{}),bn),{dispose:(...En)=>{var Bn;En[2]==="evict"&&xt.increment("lru-eviction",{name:bn.name}),(Bn=bn.dispose)===null||Bn===void 0||Bn.call(bn,...En)},disposeAfter:(...En)=>{var Bn;this.updateStats(),(Bn=bn.disposeAfter)===null||Bn===void 0||Bn.call(bn,...En)}})),this.stringify=bn.fastStringify?JSON.stringify:vt.a}set(bn,En,Bn){const ur=this.stringify(bn);if(!this.cache.set(ur,En,{ttl:Bn})){const pr=this.cache.sizeCalculation?this.cache.sizeCalculation(En,ur):"unknown";throw Error(`Value too large (${pr} > ${this.cache.max})`)}this.updateStats()}get(bn){const{name:En}=this.options,Bn=this.stringify(bn),ur=this.cache.getRemainingTTL(Bn);return ur<=0?xt.increment("cache-miss",{name:En}):ur!==1/0&&xt.aggregate("cache-item-ttl",ur,{name:En}),this.cache.get(Bn)}delete(bn){this.cache.delete(this.stringify(bn))}peek(bn){return this.cache.peek(this.stringify(bn))}size(){return this.cache.size}clear(){this.cache.clear()}forEach(bn){this.cache.forEach(bn)}purgeStale(){return this.cache.purgeStale()}updateStats(){const{name:bn}=this.options;xt.aggregate("cache-item-count",this.cache.size,{name:bn}),this.cache.calculatedSize!==void 0&&xt.aggregate("cache-length",this.cache.calculatedSize,{name:bn})}}{constructor(bn){if(super(bn),this.expireRejectedPromiseValues=bn.expireRejectedPromiseValues===void 0||bn.expireRejectedPromiseValues,this.rejectedPromiseValueTtl=bn.rejectedPromiseValueTtl!==void 0?bn.rejectedPromiseValueTtl:it.a.second,this.rejectedPromiseValueTtl<0)throw new Error("rejectedPromiseValueTtl must not be negative")}set(bn,En,Bn){super.set(bn,En,Bn),this.expireRejectedPromiseValues&&En.catch(()=>St(this,void 0,void 0,function*(){yield Object(st.a)(this.rejectedPromiseValueTtl),this.peek(bn)===En&&this.delete(bn)}))}}var Ct=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class Vt{constructor(bn,En,Bn){this.authClient=bn,this.email=En,this.password=Bn,this.tokenTtlMs=1*it.a.hour,this.tokenCache=new Nt({name:"Credentials-tokenCache",max:100,ttl:this.tokenTtlMs-5*it.a.minute,fastStringify:!0})}getToken(){return Ct(this,void 0,void 0,function*(){let bn=this.tokenCache.get(this.email);return bn||(bn=(()=>Ct(this,void 0,void 0,function*(){const{authentication:En}=yield this.authClient.login({email:this.email,password:this.password,tokenExpirationSeconds:this.tokenTtlMs/it.a.second});if(!En)throw new Error("User account not verified.");return En.accessToken}))(),this.tokenCache.set(this.email,bn)),bn})}}var Kt=s(97),Gt=s(40),Ut=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class Ht extends Gt.a{constructor(bn){super(bn)}postLanRtcOffer(bn){return Ut(this,void 0,void 0,function*(){return yield this.fetch("v1/lan-rtc-offer",{method:"POST",body:JSON.stringify(bn)})})}}var qt=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};function Pt(Gr){return qt(this,void 0,void 0,function*(){return(yield Promise.all(Gr.map(bn=>bn.catch(En=>En)))).filter(bn=>bn instanceof Error)})}function wt(Gr){if(Gr!==void 0)return Gr;throw new Error("Value is undefined")}function $t(Gr,bn){const En=Gr.reduce((Bn,ur)=>[...Bn,...ur.urls],[]).filter(Bn=>Xt(Bn,bn)).sort(Bn=>un(Bn,"udp")?-1:0).shift();if(En)return Object.assign(Object.assign({},wt(Gr.find(Bn=>Bn.urls.includes(En)))),{urls:[En]})}function Xt(Gr,bn){switch(bn){case"stun":return/^stuns?:/.test(Gr);case"turn":return/^turns?:/.test(Gr)}}function un(Gr,bn){return Gr.endsWith(`transport=${bn}`)}var dn=s(9),mn=s(24),an=s(229),en=s(29);const Mt={ordered:!1,maxPacketLifeTime:300*it.a.millisecond},jt={ordered:!0},Qt={ordered:!0},gn={ordered:!1,maxRetransmits:0},hn={ordered:!1,maxRetransmits:0},An=Gr=>"received"in Gr&&Gr.received!==void 0,Mn=Gr=>!("received"in Gr)||Gr.received===void 0,Yn=2*it.a.second;function Nr(Gr,bn={}){const En=Array.from(Gr.values()),Bn=En.filter(An),ur=Bn.length>0,pr=Math.max(...Bn.map(Mr=>Mr.received));let Zr;if(ur){const Mr=En.length,Tr=Bn.length,Wo=Bn.map(gr=>gr.received-gr.sent),{standardDeviation:Vn,mean:Sn,jitter:Cn}=function(gr){const _r=gr.length;if(_r===0)return{mean:NaN,standardDeviation:-1,jitter:NaN};const fr=gr.reduce((po,io)=>po+io,0)/_r,xr=Math.sqrt(gr.map(po=>Math.pow(po-fr,2)).reduce((po,io)=>po+io)/_r);let Yr=0;for(let po=1;po<_r;++po)Yr+=Math.abs(gr[po]-gr[po-1]);return{mean:fr,standardDeviation:xr,jitter:Yr/(_r-1)}}(Wo),Hn=En.filter(gr=>gr.sent<pr-Yn),Jn=Hn.filter(Mn),ir=Jn.length===0?0:Jn.length/Hn.length;Zr={pingsSent:Mr,pongsReceived:Tr,average:Sn,standardDeviation:Vn,jitter:Cn,max:Math.max(...Wo),min:Math.min(...Wo),loss:ir}}else Zr=null;const{temporalNow:Xr=Date.now()}=bn,qr=(ur?pr:Xr)-4*Yn;return Array.from(Gr.entries()).forEach(Mr=>{const[Tr,Wo]=Mr;Wo.sent<qr&&Gr.delete(Tr)}),Zr}function ro({entityId:Gr,streamName:bn,streamType:En}){return`${Gr}.${bn}.${En}`}var to=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class zr{constructor(bn,En){this.sessionId=bn,this.connection=En,this.counts={localSent:new Map,localReceived:new Map,remoteSent:new Map,remoteReceived:new Map},this.sessionId=bn,this.connection=En}updateRemoteMessagesCounts(bn){if(bn.payload.streamsInfo){this.counts.remoteSent=new Map,this.counts.remoteReceived=new Map;for(const En of bn.payload.streamsInfo.items)this.counts.remoteSent.set(En.streamId,En.sentCount),this.counts.remoteReceived.set(En.streamId,En.receivedCount)}}getLocalStreamsInfo(bn){const{localSent:En,localReceived:Bn}=this.counts;return{items:[...new Set([...En.keys(),...Bn.keys()])].map(ur=>{var pr,Zr;return{streamId:ur,sentCount:(pr=En.get(ur))!==null&&pr!==void 0?pr:0,receivedCount:(Zr=Bn.get(ur))!==null&&Zr!==void 0?Zr:0}}),timestamp:bn}}incrementLocalSent(bn){const{localSent:En}=this.counts,Bn=ro(bn.header.stream);En.set(Bn,(En.get(Bn)||0)+1)}incrementLocalReceived(bn){const{localReceived:En}=this.counts,Bn=ro(bn.header.stream),ur=En.get(Bn)||0;if(ur===0){const{streamName:pr,streamType:Zr}=bn.header.stream;ct.a.debug("RTC client received first message for stream",{streamName:pr,streamType:Zr})}En.set(Bn,ur+1)}uploadMetrics(){return to(this,void 0,void 0,function*(){const{sessionId:bn}=this,En=yield this.connection.peerConnection.getStats(),Bn={};En.forEach(Mr=>Bn[Mr.id]=Mr),ct.a.debug("rtc-stats",Object.assign(Object.assign({},Bn),{sessionId:bn}));const{localSent:ur,localReceived:pr,remoteSent:Zr,remoteReceived:Xr}=this.counts,qr=[...new Set([...ur.keys(),...pr.keys()])].reduce((Mr,Tr)=>{const Wo=ur.get(Tr),Vn=pr.get(Tr),Sn=Zr.get(Tr),Cn=Xr.get(Tr);return Object.assign(Object.assign({},Mr),{[`local-${Tr}-sent`]:Wo,[`local-${Tr}-received`]:Vn,[`remote-${Tr}-sent`]:Sn,[`remote-${Tr}-received`]:Cn})},{sessionId:bn});ct.a.debug("rtc-message-report",Object.assign({deviceId:this.connection.getRemoteDeviceId()},qr))})}}function In(Gr,bn,En){return{header:{stream:Gr,created:Date.now(),frameId:En||""},payload:bn}}function kn(Gr){return new Set(["disconnected","failed","closed"]).has(Gr.iceConnectionState)}function Kn(Gr){switch(Gr.header.stream.streamType){case"twist":{const{twist:bn}=Gr.payload;if(!bn)throw Error("twist not in payload of RTC message with type twist");return{header:Gr.header,payload:{twist:{linear:Object.assign({x:0,y:0,z:0},bn.linear),angular:Object.assign({x:0,y:0,z:0},bn.angular)}}}}case"pose":{const{pose:bn}=Gr.payload;if(!bn)throw Error("pose not in payload of RTC message with type pose");return{header:Gr.header,payload:{pose:{translation:Object.assign({x:0,y:0,z:0},bn.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},bn.rotation)}}}}case"pose-with-covariance":{const{poseWithCovariance:bn}=Gr.payload;if(!bn)throw Error("poseWithCovariance not in payload of RTC message with type pose-with-covariance");const En=new Array(36).fill(0);return bn.covariance.forEach((Bn,ur)=>{if(ur>=36)throw Error("covariance contains more than 36 elements");En[ur]=Bn}),{header:Gr.header,payload:{poseWithCovariance:{pose:{translation:Object.assign({x:0,y:0,z:0},bn.pose.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},bn.pose.rotation)},covariance:En}}}}case"point":{const{point:bn}=Gr.payload;if(!bn)throw Error("point not in payload of RTC message with type point");return{header:Gr.header,payload:{point:Object.assign({x:0,y:0,z:0},bn)}}}default:return Gr}}var vr=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class yr{constructor(bn,En,Bn){this.peerConnection=bn,this.config=En,this.dataChannelNotifier=Bn,this.connectTimeoutMs=20*it.a.second,this.iceGatheringTimeoutMs=15*it.a.second,this.pingUpdateTimeoutMs=1*it.a.second,this.pingV2UpdateTimeoutMs=250*it.a.millisecond,this.pingV2MetricsGatherTimeoutMs=1*it.a.second,this.streamsInfoUpdateTimeoutMs=2*it.a.second,this.reassemblyTimeoutMs=500*it.a.millisecond,this.reassemblyTableCleanupMs=1*it.a.second,this.heartbeatTimeoutMs=20*it.a.millisecond,this.streamLatestTimestamp=new Map,this.reassemblyTable=new Map,this.reassemblyTableLastTimestamp=new Map,this.closeCalled=!1,this.gotOffer=!1,this.hasIceCandidate=!1,this.pingV2Map=new Map,this.sendPingV2=()=>{const{latestTryOnceStreamChannel:pr}=this;if(!pr)return;const Zr=new Date().getTime(),Xr=Object(an.a)();this.sendSystemMessage(pr,{type:"ping-v2",payload:{timestamp:Zr,id:Xr}}),this.pingV2Map.set(Xr,{sent:Zr})},this.gatherPingV2Metrics=()=>{const pr=Nr(this.pingV2Map);pr&&(this.pingInfo=pr,xt.aggregate("rtc-ping-average",pr.average),xt.aggregate("rtc-ping-loss",pr.loss),xt.aggregate("rtc-jitter",pr.jitter))};const{isOffer:ur}=En.baseConfig;ur?this.initializeChannels(bn):bn.ondatachannel=pr=>{switch(pr.channel.label){case"stream.latest-ttl":this.latestTtlStreamChannel=pr.channel;break;case"stream.reliable":this.reliableStreamChannel=pr.channel;break;case"stream.latest-reliable":this.latestReliableStreamChannel=pr.channel;break;case"stream.latest-try-once":this.latestTryOnceStreamChannel=pr.channel;break;case"heartbeat":return void(this.heartbeatChannel=pr.channel);default:return void this.dataChannelNotifier(pr.channel)}this.setupChannel(pr.channel)},this.pingUpdateTimeout=setInterval(()=>{const{reliableStreamChannel:pr}=this;pr&&this.sendSystemMessage(pr,{type:"ping"})},this.pingUpdateTimeoutMs),this.pingV2UpdateTimeout=setInterval(this.sendPingV2,this.pingV2UpdateTimeoutMs),this.pingV2MetricsGatherTimeout=setInterval(this.gatherPingV2Metrics,this.pingV2MetricsGatherTimeoutMs),this.streamsInfoUpdateTimeout=setInterval(()=>{const{latestTtlStreamChannel:pr}=this;pr&&this.sendSystemMessage(pr,{type:"streams-info"})},this.streamsInfoUpdateTimeoutMs),this.reassemblyTableCleanupTimeout=setInterval(()=>{const pr=new Date().getTime();this.reassemblyTableLastTimestamp.forEach((Zr,Xr,qr)=>{pr>Xr+this.reassemblyTimeoutMs&&this.reassemblyTable.delete(Zr)})},this.reassemblyTableCleanupMs),this.heartbeatTimeout=setInterval(()=>{const{heartbeatChannel:pr}=this;pr&&pr.readyState==="open"&&pr.send(new Uint8Array([1]))},this.heartbeatTimeoutMs)}handleSignal(bn){return vr(this,void 0,void 0,function*(){const{peerConnection:En}=this,{track:Bn}=this.config.baseConfig,ur=(()=>{try{return JSON.parse(bn.getPayload())}catch{return}})();if(!ur)return void ct.a.error("Received unparseable signal.");ct.a.debug("Handling signal",{description:ur});const{sdp:pr,type:Zr}=ur;if(!pr||!Zr)return void ct.a.warn("Received non-SDP signal");const{signalingState:Xr,connectionState:qr}=En;if(Xr!=="stable"||qr!=="connected")if(En.remoteDescription)ct.a.warn(`Received SDP after remote description was set: ${pr}`);else{if(Zr==="offer"){if(Xr!=="stable")return void ct.a.warn("Received offer SDP when signaling is ongoing.");yield En.setRemoteDescription(ur);const Mr=yield En.createAnswer();yield En.setLocalDescription(Mr);const Tr=bn.clone();return Bn==null||Bn("Answer Received",Tr),Tr.setPayload(JSON.stringify(Mr)),Tr.setReceiverId(bn.getSenderId()),Tr.setSenderId(bn.getReceiverId()),Tr}if(Zr==="answer"){if(Xr==="stable")return void ct.a.warn("Received answer SDP when signaling hasn't started.");yield En.setRemoteDescription(ur)}}else ct.a.warn(`Received SDP when already connected: ${pr}`)})}send(bn,En){const Bn=this.getChannelFromLabel(En.channelLabel);Bn?this.sendOnChannel(Bn,bn):ct.a.warn("Send called with unexpected channel label",{channelLabel:En.channelLabel})}controlRemoteStream(bn){this.sendSystemMessage(wt(this.reliableStreamChannel),{type:"stream-control",streamControl:bn})}isActive(){return new Set(["new","checking","connected","completed"]).has(this.peerConnection.iceConnectionState)||this.isReady()}isReady(){const{reliableStreamChannel:bn,latestTtlStreamChannel:En,latestTryOnceStreamChannel:Bn,latestReliableStreamChannel:ur}=this;return(bn==null?void 0:bn.readyState)==="open"&&(En==null?void 0:En.readyState)==="open"&&(Bn==null?void 0:Bn.readyState)==="open"&&(ur==null?void 0:ur.readyState)==="open"}close(){return vr(this,void 0,void 0,function*(){if(this.closeCalled)return;this.closeCalled=!0,this.sessionMetrics&&(yield this.sessionMetrics.uploadMetrics()),Wr(this.pingUpdateTimeout),Wr(this.pingV2UpdateTimeout),Wr(this.pingV2MetricsGatherTimeout),Wr(this.reassemblyTableCleanupTimeout),Wr(this.streamsInfoUpdateTimeout),Wr(this.heartbeatTimeout);const{peerConnection:bn,reliableStreamChannel:En,latestTtlStreamChannel:Bn,latestTryOnceStreamChannel:ur,latestReliableStreamChannel:pr}=this;bn.close(),En==null||En.close(),Bn==null||Bn.close(),ur==null||ur.close(),pr==null||pr.close()})}getPing(){return this.pingTimeMs}getPingInfo(){return this.pingInfo}getLastMessageTimestamp(){return this.lastMessageTimestamp}getSessionCreatedTimestamp(){var bn;return(bn=this.config.remoteConfig)===null||bn===void 0?void 0:bn.sessionCreatedTimestamp}setSessionCreatedTimestamp(bn){this.config.remoteConfig&&(this.config.remoteConfig.sessionCreatedTimestamp=bn)}getSessionId(){var bn;return(bn=this.config.remoteConfig)===null||bn===void 0?void 0:bn.sessionId}setSessionId(bn){this.config.remoteConfig&&(this.config.remoteConfig.sessionId=bn,this.sessionMetrics=new zr(bn,this))}getRemotePeerId(){return this.config.baseConfig.remotePeerId}getRemoteDeviceId(){var bn;return(bn=this.config.baseConfig)===null||bn===void 0?void 0:bn.remoteDeviceId}setRemoteDeviceId(bn){this.config.baseConfig.remoteDeviceId=bn}getSessionMetricsMessageCounts(){var bn;return(bn=this.sessionMetrics)===null||bn===void 0?void 0:bn.counts}getConnectionStatsInfo(){return vr(this,void 0,void 0,function*(){const{peerConnection:bn}=this;if(!bn)return;const En=yield bn.getStats(null),Bn=[];En.forEach(qr=>{Bn.push(qr)});const ur=Bn.find(qr=>qr.type==="transport");if(!ur)return;const pr=Bn.find(qr=>(qr.type==="candidate-pair"||qr.type==="candidatepair")&&qr.id===ur.selectedCandidatePairId);if(!pr)return;const Zr=Bn.find(qr=>qr.id===pr.localCandidateId),Xr=Bn.find(qr=>qr.id===pr.remoteCandidateId);return Zr&&Xr&&(Zr.address=Zr.address||Zr.ip,Xr.address=Xr.address||Xr.ip,Zr.address!==void 0&&Xr.address!==void 0)?{transport:ur,localCandidate:Zr,remoteCandidate:Xr}:void 0})}initializeChannels(bn){this.heartbeatChannel=bn.createDataChannel("heartbeat",hn),this.heartbeatChannel.binaryType="arraybuffer",this.latestTtlStreamChannel=bn.createDataChannel("stream.latest-ttl",Mt),this.latestTtlStreamChannel.binaryType="arraybuffer",this.reliableStreamChannel=bn.createDataChannel("stream.reliable",jt),this.reliableStreamChannel.binaryType="arraybuffer",this.latestReliableStreamChannel=bn.createDataChannel("stream.latest-reliable",Qt),this.latestReliableStreamChannel.binaryType="arraybuffer",this.latestTryOnceStreamChannel=bn.createDataChannel("stream.latest-try-once",gn),this.latestTryOnceStreamChannel.binaryType="arraybuffer",this.setupChannel(this.latestTtlStreamChannel),this.setupChannel(this.reliableStreamChannel),this.setupChannel(this.latestReliableStreamChannel),this.setupChannel(this.latestTryOnceStreamChannel)}getOffer(){var bn,En,Bn;return vr(this,void 0,void 0,function*(){const{gotOffer:ur}=this,{peerConnection:pr,config:Zr}=this;if(this.config.baseConfig.isLan)throw new Error('"getOffer" method can only be called with internet connections. LAN connections should call the "getLanOffer" method.');const Xr=(bn=this.config.remoteConfig)===null||bn===void 0?void 0:bn.sessionId;if(ur)return void ct.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,kn(this.peerConnection))return void ct.a.debug("Failed to generate offer because the peer connection was inactive.");const qr=Zr.baseConfig.track;pr.onicecandidate=()=>{this.hasIceCandidate=!0},pr.oniceconnectionstatechange=()=>vr(this,void 0,void 0,function*(){const Sn=pr.iceConnectionState;if(Sn==="connected"||Sn==="completed"){const Cn=yield this.getConnectionStatsInfo(),Hn=Cn?function(Jn){const ir=Jn.localCandidate.candidateType,gr=Jn.remoteCandidate.candidateType;return ir==="host"&&gr==="host"?"local":ir==="relay"||gr==="relay"?"TURN":"STUN"}(Cn):void 0;ct.a.info(`ICE connection state changed to ${Sn}`,{sessionId:Xr,connectionStatsInfo:Cn,iceMode:Hn}),qr==null||qr("ICE connection state change",{iceConnectionState:Sn,sessionId:Xr,connectionStatsInfo:Cn,iceMode:Hn})}}),yield pr.setLocalDescription(yield pr.createOffer());const Mr=new Date().getTime();for(;;){const Sn=new Date().getTime()-Mr;if(Sn>this.connectTimeoutMs)return void ct.a.debug("Failed to generate offer because ICE gathering timed out.");if(Sn>this.iceGatheringTimeoutMs&&this.hasIceCandidate){ct.a.debug("ICE gathering partially completed; proceeding",{iceTransportPolicy:pr.getConfiguration().iceTransportPolicy,waitTime:Sn}),qr==null||qr("ICE gathering partially completed",{sessionId:Xr,iceTransportPolicy:pr.getConfiguration().iceTransportPolicy,waitTime:Sn});break}if(pr.iceGatheringState==="complete"){ct.a.debug("ICE gathering complete",{iceTransportPolicy:pr.getConfiguration().iceTransportPolicy,waitTime:Sn}),qr==null||qr("ICE gathering completed",{sessionId:Xr,iceTransportPolicy:pr.getConfiguration().iceTransportPolicy,waitTime:Sn});break}yield Object(st.a)(.1*it.a.second)}const Tr=(En=this.peerConnection.getConfiguration().iceServers)!==null&&En!==void 0?En:[];for(const Sn of Tr)Sn.credentialType=void 0;const Wo=JSON.stringify(Tr),Vn=new dn.Signal;return Vn.setPayload(JSON.stringify(pr.localDescription)),Vn.setSenderId(this.config.baseConfig.localPeerId),Vn.setReceiverId(this.config.baseConfig.remotePeerId),Vn.setIceServers(Wo),Vn.setIceTransportPolicy((Bn=this.peerConnection.getConfiguration().iceTransportPolicy)!==null&&Bn!==void 0?Bn:"all"),this.config.baseConfig.sessionType!==void 0?Vn.setSessionType(this.config.baseConfig.sessionType):Vn.setSessionType(dn.SessionType.TELEOP),ct.a.debug("Sending offer signal with description",{description:Vn.getPayload()}),Vn})}getLanOffer(){return vr(this,void 0,void 0,function*(){const{peerConnection:bn,gotOffer:En}=this;if(!this.config.baseConfig.isLan)throw new Error('"getLanOffer" method can only be used with LAN connections. Internet connections should call the "getOffer" method.');if(En)return void ct.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,kn(this.peerConnection))return void ct.a.debug("Failed to generate offer because the peer connection was inactive.");yield bn.setLocalDescription(yield bn.createOffer());const Bn=new Date().getTime();for(;;){if(new Date().getTime()-Bn>this.iceGatheringTimeoutMs)return void ct.a.debug("Failed to generate offer because ICE gathering timed out.");if(bn.iceGatheringState==="complete")break;yield Object(st.a)(.1*it.a.second)}const ur=bn.localDescription;if(ur)return ct.a.debug("Sending LAN offer signal with description",{description:ur}),ur;ct.a.error("Failed to generate LAN offer description")})}handleLanAnswer(bn){return vr(this,void 0,void 0,function*(){const{peerConnection:En}=this;if(!this.config.baseConfig.isLan)throw new Error('"handleLanAnswer" method can only be used with LAN connections. Internet connections should call the "handleSignal" method.');yield En.setRemoteDescription(bn)})}getChannelFromLabel(bn){switch(bn){case"stream.latest-ttl":return this.latestTtlStreamChannel;case"stream.reliable":return this.reliableStreamChannel;case"stream.latest-reliable":return this.latestReliableStreamChannel;case"stream.latest-try-once":return this.latestTryOnceStreamChannel}}sendOnChannel(bn,En){let Bn;try{Bn=Object(en.encode)(JSON.stringify(En))}catch(ur){return void ct.a.warn("Failed to encode RTC message",{error:ur})}try{bn.send(Bn),this.sessionMetrics&&this.sessionMetrics.incrementLocalSent(En)}catch(ur){ct.a.warn("Failed to send message to channel",{error:ur,channel:bn.label})}}channelNotRecognized(bn){return bn!==this.latestTtlStreamChannel&&bn!==this.latestReliableStreamChannel&&bn!==this.latestTryOnceStreamChannel&&bn!==this.reliableStreamChannel}setupChannel(bn){bn.onmessage=En=>{if(this.channelNotRecognized(bn))return void ct.a.warn("Received message on unrecognized data channel.");let Bn;try{Bn=JSON.parse(Object(en.decode)(En.data))}catch(ur){return void ct.a.warn("Received unparseable message on RTC stream data channel",{error:ur,channel:bn.label})}Bn.communicationType==="message-chunk"?this.receiveChannelMessageChunk(bn,Bn):this.receiveChannelMessage(bn,Bn)},bn.onerror=En=>{ct.a.warn(`Channel error: ${En.error}`,{error:En.error,sessionId:this.getSessionId(),channelLabel:bn.label})},bn.onopen=()=>{ct.a.debug("Channel opened",{sessionId:this.getSessionId(),channelLabel:bn.label})},bn.onclose=()=>{const En={bufferedAmount:bn.bufferedAmount,sessionId:this.getSessionId(),channelLabel:bn.label};this.closeCalled===!1?ct.a.debug("Unexpected channel closed",En):ct.a.debug("Channel closed",En)}}receiveChannelMessage(bn,En){const{config:Bn}=this,{remotePeerId:ur}=this.config.baseConfig;this.lastMessageTimestamp=new Date().getTime(),En=Kn(En),this.sessionMetrics&&this.sessionMetrics.incrementLocalReceived(En),this.handleSystemMessage(bn,En)||(bn===this.latestTryOnceStreamChannel||bn===this.latestTtlStreamChannel||bn===this.latestReliableStreamChannel)&&!this.isLatestMessage(En)||Bn.baseConfig.receive(ur,En)}receiveChannelMessageChunk(bn,En){const Bn=this.reassemblyTable.get(En.id)||[];if(Bn.push(En),Bn.length===En.total){const ur=function(pr){const Zr=pr.sort((Xr,qr)=>Xr.seq<qr.seq?-1:1).map(Xr=>Xr.part).reduce((Xr,qr)=>Xr+qr);try{return JSON.parse(Zr)}catch{return void ct.a.warn("Could not reassemble RTC message chunks")}}(Bn);return ur&&this.receiveChannelMessage(bn,ur),void this.reassemblyTable.delete(En.id)}this.reassemblyTable.set(En.id,Bn),this.reassemblyTableLastTimestamp.set(En.id,new Date().getTime())}handleSystemMessage(bn,En){var Bn,ur;const{config:pr}=this,{baseConfig:Zr}=pr,{remotePeerId:Xr}=Zr;switch(En.header.stream.streamType){case"ping":return this.sendSystemMessage(bn,{type:"pong",timestamp:wt(En.payload.ping)}),!0;case"pong":{const qr=new Date().getTime()-wt(En.payload.pong);return this.pingTimeMs=qr,xt.aggregate("rtc-ping-time",qr),!0}case"ping-v2":return this.sendPingV2(),!0;case"pong-v2":{const qr=wt(En.payload.pongV2),Mr=this.pingV2Map.get(qr.id);return(Mr==null?void 0:Mr.sent)!==qr.timestamp?(ct.a.warn("Pong timestamp doesn't match stored value",{currentEntry:Mr,pong:qr}),!0):(this.pingV2Map.set(qr.id,{sent:qr.timestamp,received:new Date().getTime()}),!0)}case"streams-info":{const{sessionMetrics:qr}=this,Mr=(Bn=En.payload.streamsInfo)===null||Bn===void 0?void 0:Bn.timestamp;return!!Mr&&(qr==null||qr.updateRemoteMessagesCounts(En),(ur=Zr.onStreamsInfoUpdate)===null||ur===void 0||ur.call(Zr,Xr,Mr),!0)}case"stream-control":return!0;default:return!1}}sendSystemMessage(bn,En){var Bn;const{localUserId:ur,localPeerId:pr}=this.config.baseConfig;if(bn.readyState!=="open")return;const Zr={entityId:ur??pr,streamName:`$.${En.type}`,streamType:En.type};let Xr;switch(En.type){case"ping":Xr={ping:new Date().getTime()};break;case"pong":Xr={pong:En.timestamp};break;case"ping-v2":Xr={pingV2:En.payload};break;case"pong-v2":Xr={pongV2:En.payload};break;case"stream-control":Xr={streamControl:En.streamControl};break;case"streams-info":Xr={streamsInfo:(Bn=this.sessionMetrics)===null||Bn===void 0?void 0:Bn.getLocalStreamsInfo(new Date().getTime())}}this.sendOnChannel(bn,In(Zr,Xr))}isLatestMessage(bn){const En=ro(bn.header.stream),Bn=(this.streamLatestTimestamp.get(En)||0)<=bn.header.created;return Bn&&this.streamLatestTimestamp.set(En,bn.header.created),Bn}}function Wr(Gr){Gr&&clearInterval(Gr)}function Hr(Gr){var bn,En;return{userId:(bn=Gr.getUserId())===null||bn===void 0?void 0:bn.getValue(),deviceId:(En=Gr.getDeviceId())===null||En===void 0?void 0:En.getValue(),organizationId:Gr.getOrganizationId(),id:Gr.getPeerId(),capabilities:[],capabilitySet:{}}}var Lr=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class Ir{constructor(bn){this.config=bn,this.grpcCallDeadline=5*it.a.second,this.refreshIntervalDelayMs=2*it.a.second,this.iceServersTtl=30*it.a.minute,this.connections=[],this.localConnections=[],this.isConnectionInitiator=new Map,this.isOutgoingConnection=new Map,this.peerDataChannelListeners=[];const{refreshIntervalDelayMs:En}=this;this.refreshInterval=mt({func:()=>Lr(this,void 0,void 0,function*(){try{yield this.update()}catch(Bn){ct.a.warn("RTC refresh failed",{error:Bn})}}),delay:En,immediate:!0})}send(bn,En,Bn){const ur=this.getActiveConnection(bn);ur?ur.isReady()?ur.send(En,Bn):ct.a.warn("Send called with unready connection."):ct.a.warn("Send called with no connection.")}controlRemoteStream(bn,En){const Bn=this.getActiveConnection(bn);Bn?Bn.isReady()?Bn.controlRemoteStream(En):ct.a.warn("controlRemoteStream called with unready connection."):ct.a.warn("controlRemoteStream called with no connection.")}getLocalPeer(){return Lr(this,void 0,void 0,function*(){for(;!this.localPeer;)yield Object(st.a)(.1*it.a.second);return Hr(this.localPeer)})}connect(bn,En){var Bn,ur,pr;return Lr(this,void 0,void 0,function*(){if(this.config.lanOnlyMode===!0)throw new Error("connect method called in local only mode.");const{track:Zr,signalingClient:Xr}=this.config,{localPeer:qr,receiveSignalStream:Mr,iceServers:Tr}=this;if(!qr||!Mr||!Tr)return void ct.a.warn("Connect called prior to local peer, receiveSignalStream, and ICE servers ready");if(this.getActiveConnection(bn))return void ct.a.warn("Connect called for peer with existing connection.");if(this.isOutgoingConnection.get(bn))return void ct.a.warn("Connect called for peer with an existing outgoing connection offer.");this.isOutgoingConnection.set(bn,!0);const Wo=function(gr,_r,fr){const{rtcIceTransportPolicies:xr,rtcIceServerProtocol:Yr,useAllServers:po}=_r||{},io=gr.map(ko=>Object.assign(Object.assign({},ko),{urls:ko.urls.filter(Do=>{const Lo=(xr===void 0||xr.some(zo=>Xt(Do,zo)))&&(Yr===void 0||un(Do,Yr));return Lo||ct.a.debug(`Ignoring ICE server: ${Do}`,{organizationId:fr}),Lo})})).filter(({urls:ko})=>ko.filter(Do=>Do).length>0);return po?io:[$t(io,"stun"),$t(io,"turn")].filter(ko=>ko!==void 0).map(ko=>wt(ko))}(Tr,En);ct.a.debug("Received ICE servers:",Tr),ct.a.debug("Using ICE servers:",Wo);const Vn=new yr(yield this.createRTCPeerConnection(Wo),{baseConfig:{isOffer:!0,isLan:!1,receive:(gr,_r)=>this.config.receive(gr,_r),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(gr,_r)=>{var fr,xr;return(xr=(fr=this.config).onStreamsInfoUpdate)===null||xr===void 0?void 0:xr.call(fr,gr,_r)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(Bn=qr.getUserId())===null||Bn===void 0?void 0:Bn.getValue(),localPeerId:qr.getPeerId(),remotePeerId:bn,sessionType:this.config.sessionType},remoteConfig:{}},gr=>this.onCustomDataChannel(bn,gr)),Sn=yield Vn.getOffer();if(!Sn)return ct.a.error("Failed to generate offer."),void this.isOutgoingConnection.delete(bn);ct.a.debug("Sending offer."),Zr==null||Zr("Sending offer",Sn);const Cn=new dn.SendSignalRequest;Cn.setSignal(Sn);const Hn=yield(()=>Lr(this,void 0,void 0,function*(){try{return yield Xr.sendSignal(Cn,yield this.getMetadata({}))}catch(gr){ct.a.warn("Error when sending signal",{error:gr})}}))();if(!this.isOutgoingConnection.get(bn))return void ct.a.debug("No offer set after receiving offer signal response.");ct.a.debug("Offer sent.");const Jn=(ur=Hn==null?void 0:Hn.getSessionId())===null||ur===void 0?void 0:ur.getValue(),ir=(pr=Hn==null?void 0:Hn.getSessionCreatedTimestamp())===null||pr===void 0?void 0:pr.getValue();return Jn&&ir?(Vn.setSessionId(Jn),Vn.setSessionCreatedTimestamp(ir),this.isOutgoingConnection.delete(bn),this.connections.push(Vn),this.isConnectionInitiator.set(Vn,!0),this.setupHandlers(Vn),Jn):(ct.a.warn("No session ID or no session created timestamp on send signal response."),void this.isOutgoingConnection.delete(bn))})}connectLan(bn){var En,Bn;return Lr(this,void 0,void 0,function*(){const ur=new Ht(bn),pr=new yr(yield this.createRTCPeerConnection([]),{baseConfig:{isOffer:!0,isLan:!0,receive:(Mr,Tr)=>this.config.receive(Mr,Tr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(Mr,Tr)=>{var Wo,Vn;return(Vn=(Wo=this.config).onStreamsInfoUpdate)===null||Vn===void 0?void 0:Vn.call(Wo,Mr,Tr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(Bn=(En=this.localPeer)===null||En===void 0?void 0:En.getUserId())===null||Bn===void 0?void 0:Bn.getValue(),localPeerId:"lan_client",remotePeerId:bn}},Mr=>this.onCustomDataChannel(bn,Mr)),Zr=yield pr.getLanOffer();if(!Zr)return ct.a.warn("Could not generate LAN offer"),!1;const Xr=yield ur.postLanRtcOffer({offer:JSON.stringify(Zr)}),qr=new RTCSessionDescription(JSON.parse(Xr.answer));return yield pr.handleLanAnswer(qr),this.localConnections.push(pr),this.isConnectionInitiator.set(pr,!0),Object(an.a)()})}getConnections(){return[...this.connections,...this.localConnections]}createCustomDataChannel(bn,En,Bn,ur,pr){const Zr=this.getActiveConnection(bn);if(Zr&&this.isConnectionInitiator.has(Zr)){const qr=Zr.peerConnection.createDataChannel("custom."+En,Bn);return ur&&(qr.binaryType="arraybuffer"),pr(bn,qr),()=>{}}const Xr=(qr,Mr)=>{bn===qr&&Mr.label==="custom."+En&&pr(bn,Mr)};return this.peerDataChannelListeners.push(Xr),()=>{this.peerDataChannelListeners=this.peerDataChannelListeners.filter(qr=>qr!==Xr)}}onCustomDataChannel(bn,En){this.peerDataChannelListeners.forEach(Bn=>Bn(bn,En))}getConnectionStatus(bn){if(this.isOutgoingConnection.get(bn))return"connecting";const En=this.getActiveConnection(bn);return En?En.isReady()?"connected":"connecting":"disconnected"}getConnectionStatsInfo(bn){return Lr(this,void 0,void 0,function*(){const En=this.getActiveConnection(bn);if(En)return yield En.getConnectionStatsInfo()})}disconnect(bn){return Lr(this,void 0,void 0,function*(){const En=this.getActiveConnection(bn);En&&(yield En.close())})}getPeers(){return Lr(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:bn}=this.config,En=yield(()=>Lr(this,void 0,void 0,function*(){try{return yield bn.getPeers(new dn.GetPeersRequest,yield this.getMetadata({}))}catch(pr){ct.a.warn("Error when getting peers",{error:pr})}}))();if(!En)return[];const Bn=En.getPeersList();if(!Bn)return[];const ur=pr=>{var Zr,Xr;return(Xr=(Zr=pr.getPeerCreatedTimestamp())===null||Zr===void 0?void 0:Zr.getValue())!==null&&Xr!==void 0?Xr:0};return Bn.sort((pr,Zr)=>ur(Zr)-ur(pr)).map(pr=>Hr(pr))})}getSessions(){return Lr(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:bn}=this.config,En=yield(()=>Lr(this,void 0,void 0,function*(){try{return yield bn.getPeers(new dn.GetPeersRequest,yield this.getMetadata({}))}catch(pr){ct.a.warn("Error when getting peers",{error:pr})}}))();if(!En)return{};const Bn=En.getPeersList(),ur={};for(const pr of Bn)ur[pr.getPeerId()]=pr.getSessionIdsList();return ur})}getPing(bn){const En=this.getActiveConnection(bn);if(En)return En.getPing();ct.a.warn("Attempted to get ping time from inactive peer.")}getPingInfo(bn){const En=this.getActiveConnection(bn);if(En)return En.getPingInfo();ct.a.warn("Attempted to get ping time from inactive peer.")}getLastMessageTimestamp(bn){const En=this.getActiveConnection(bn);if(En)return En.getLastMessageTimestamp();ct.a.warn("Attempted to get last message time from inactive peer.")}getSessionMetricsMessageCounts(bn){const En=this.getActiveConnection(bn);if(En)return En.getSessionMetricsMessageCounts();ct.a.warn("Attempted to get session metrics counts from inactive peer.")}isReady(){if(this.config.lanOnlyMode)return!0;const{localPeer:bn,receiveSignalStream:En,iceServers:Bn}=this;return!!(bn&&En&&Bn)}shutdown(){return Lr(this,void 0,void 0,function*(){ct.a.info("Shutdown called on RTC client"),yield this.refreshInterval.stop(),this.receiveSignalStream&&this.receiveSignalStream.cancel();const bn=this.connections;this.connections=[],yield this.closeConnections(bn);const{localPeer:En}=this;if(!En||this.config.lanOnlyMode)return;const{signalingClient:Bn}=this.config;yield(()=>Lr(this,void 0,void 0,function*(){try{const ur=new dn.DeletePeerRequest;ur.setPeerId(En.getPeerId()),yield Bn.deletePeer(ur,yield this.getMetadata({}))}catch(ur){return void ct.a.warn("Error deleting local peer",{error:ur})}}))()})}createPeer(){return Lr(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createPeer method cannot be used in local-only mode.");const{signalingClient:bn}=this.config,En=yield(()=>Lr(this,void 0,void 0,function*(){try{return yield bn.createPeer(new dn.CreatePeerRequest,yield this.getMetadata({}))}catch(ur){throw new Error(`Was not able to create peer: ${JSON.stringify(ur)}`)}}))(),Bn=En==null?void 0:En.getPeer();if(!Bn)throw new Error("Response did not provide peer.");return this.localPeer=Bn})}createReceiveSignalStream(){return Lr(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createReceiveSignalStream method cannot be used in local-only mode.");const{signalingClient:bn}=this.config,{localPeer:En,iceServers:Bn}=this;if(!En||!Bn)return;const{receiveSignalStream:ur}=this;ur&&ur.cancel();const pr=new dn.ReceiveSignalStreamRequest;pr.setPeerId(En.getPeerId());const Zr=yield(()=>Lr(this,void 0,void 0,function*(){try{return bn.receiveSignalStream(pr,yield this.getMetadata({hasDeadline:!1}))}catch(Xr){throw new Error(`Unable to create receive signal stream: ${JSON.stringify(Xr)}`)}}))();if(!Zr)throw new Error("Response did not provide stream.");return Zr.on("data",Xr=>Lr(this,void 0,void 0,function*(){var qr,Mr,Tr,Wo;const Vn=Xr.getSignal(),Sn=(qr=Vn==null?void 0:Vn.getSessionId())===null||qr===void 0?void 0:qr.getValue(),Cn=Vn==null?void 0:Vn.getSenderId(),Hn=Vn==null?void 0:Vn.getReceiverId(),Jn=(Mr=Vn==null?void 0:Vn.getSessionCreatedTimestamp())===null||Mr===void 0?void 0:Mr.getValue();if(!(Vn&&Sn&&Cn&&Hn&&Jn))return void ct.a.warn("Received signal with missing information.");const ir=this.getActiveConnection(Cn);if(ir)if(ir.getSessionId()!==Sn){if(ct.a.debug("Received signal: different session for a peer we're already connected to."),(ir.getSessionCreatedTimestamp()||0)>Jn)return;const gr=new yr(yield this.createRTCPeerConnection(Bn),{baseConfig:{isOffer:!1,isLan:!1,receive:(_r,fr)=>this.config.receive(_r,fr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(_r,fr)=>{var xr,Yr;return(Yr=(xr=this.config).onStreamsInfoUpdate)===null||Yr===void 0?void 0:Yr.call(xr,_r,fr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:En.getPeerId(),localUserId:(Wo=En.getUserId())===null||Wo===void 0?void 0:Wo.getValue(),remotePeerId:Cn},remoteConfig:{sessionId:Sn,sessionCreatedTimestamp:Jn}},_r=>this.onCustomDataChannel(Cn,_r));yield gr.handleSignal(Vn),this.connections.push(gr)}else ct.a.debug("Received signal: for an existing connection."),yield ir.handleSignal(Vn);else{ct.a.debug("Received signal: new connection.");const gr=new yr(yield this.createRTCPeerConnection(Bn),{baseConfig:{isOffer:!1,isLan:!1,receive:(_r,fr)=>this.config.receive(_r,fr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(_r,fr)=>{var xr,Yr;return(Yr=(xr=this.config).onStreamsInfoUpdate)===null||Yr===void 0?void 0:Yr.call(xr,_r,fr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:En.getPeerId(),localUserId:(Tr=En.getUserId())===null||Tr===void 0?void 0:Tr.getValue(),remotePeerId:Cn},remoteConfig:{sessionId:Sn,sessionCreatedTimestamp:Jn}},_r=>this.onCustomDataChannel(Cn,_r));yield gr.handleSignal(Vn),this.connections.push(gr)}})),Zr.on("end",()=>{Zr.cancel(),this.receiveSignalStream=void 0}),Zr.on("error",Xr=>{switch(Xr.code){case mn.StatusCode.CANCELLED:case mn.StatusCode.UNAVAILABLE:case mn.StatusCode.UNKNOWN:ct.a.debug("Receive signal stream error",{error:Xr});break;case mn.StatusCode.UNAUTHENTICATED:ct.a.warn("Receive signal stream error",{error:Xr});break;default:ct.a.error("Receive signal stream error",{error:Xr})}Zr.cancel(),this.receiveSignalStream=void 0}),this.receiveSignalStream=Zr})}createRTCPeerConnection(bn){var En;return Lr(this,void 0,void 0,function*(){const Bn=(En=this.config.alternateRTCPeerConnection)!==null&&En!==void 0?En:window.RTCPeerConnection;if(!Bn)throw function(){const{userAgent:ur}=navigator;return ur.includes("Firefox/")?"Firefox":ur.includes("Edg/")?"Edge":ur.includes("Chrome/")?"Chrome":ur.includes("Safari/")?"Safari":ur.includes("MSIE/")||ur.includes("Trident/")?"IE":"Other"}()!=="Chrome"?new Error("WebRTC is not enabled. Please try again with the latest version of Google Chrome."):new Error("WebRTC is not enabled. Please ensure WebRTC is not disabled by ad blocking software.");return new Bn({iceServers:bn})})}closeConnections(bn){return Lr(this,void 0,void 0,function*(){const En=yield Pt(bn.map(Bn=>Lr(this,void 0,void 0,function*(){yield Bn.close()})));for(const Bn of En)ct.a.warn("Request to close session failed",{error:Bn})})}getActiveConnection(bn){return this.getConnections().find(En=>En.getRemotePeerId()===bn&&En.isActive())}update(){var bn;return Lr(this,void 0,void 0,function*(){if(this.localConnections=this.localConnections.filter(Xr=>Xr.isActive()),this.config.lanOnlyMode)return;const{signalingClient:En}=this.config;if(!this.localPeer||!this.receiveSignalStream||!this.iceServers)return this.localPeer||(yield this.createPeer()),this.iceServers||(yield this.updateIceServers()),void(this.receiveSignalStream||(yield this.createReceiveSignalStream()));yield this.closeConnections(this.connections.filter(Xr=>!Xr.isActive())),this.connections=this.connections.filter(Xr=>Xr.isActive());const{localPeer:Bn}=this,ur=this.connections.filter(Xr=>Xr.getSessionId).map(Xr=>wt(Xr.getSessionId()));Bn.setSessionIdsList(ur);const pr=new dn.RefreshPeerRequest;pr.setPeer(Bn);try{yield En.refreshPeer(pr,yield this.getMetadata({}))}catch(Xr){Xr.code===mn.StatusCode.NOT_FOUND?(ct.a.warn("Peer expired, creating new peer",{peerId:Bn.getPeerId()}),yield this.reset()):ct.a.warn("Error calling RefreshPeer",{error:Xr})}const Zr=yield this.getPeers();for(const Xr of this.connections)Xr.setRemoteDeviceId((bn=Zr.find(qr=>qr.id===Xr.getRemotePeerId()))===null||bn===void 0?void 0:bn.deviceId)})}reset(){return Lr(this,void 0,void 0,function*(){yield this.closeConnections(this.connections),this.connections=[],this.isOutgoingConnection=new Map,yield this.createPeer(),yield this.createReceiveSignalStream()})}updateIceServers(){return Lr(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)return;const{iceServersLastUpdate:bn,iceServersTtl:En}=this,Bn=new Date().getTime();if(!bn||Bn-bn>En)try{const ur=(yield this.config.signalingClient.getIceServers(new dn.GetIceServersRequest,yield this.getMetadata({}))).getIceServers();this.iceServers=JSON.parse(ur),this.iceServersLastUpdate=Bn}catch(ur){ct.a.warn("Error in updateIceServers",{error:ur})}})}setupHandlers(bn){const{peerConnection:En}=bn,Bn=bn.getSessionCreatedTimestamp();En.onconnectionstatechange=()=>Lr(this,void 0,void 0,function*(){const ur=En.connectionState;if(Bn)switch(ur){case"connected":xt.aggregate("rtc-connect-time",new Date().getTime()-Bn);break;case"failed":xt.increment("rtc-connect-failed")}})}getMetadata(bn){return Lr(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getMetadata method cannot be called in local-only mode");const{getToken:En}=this.config,{grpcCallDeadline:Bn}=this,{hasDeadline:ur}=bn,pr=ur===!1?void 0:new Date().getTime()+Bn;return{authorization:yield En(),deadline:pr}})}}var jr=s(10),Co=s(11),Jo=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class ps{constructor(bn,En){this.sessionId=bn,this.connection=En,this.sentMessagesCounts=new Map,this.receivedMessagesCounts=new Map,this.sessionId=bn,this.connection=En}incrementMessageSent(bn){const En=ro(bn.header.stream);this.sentMessagesCounts.set(En,(this.sentMessagesCounts.get(En)||0)+1)}incrementMessageReceived(bn){const En=ro(bn.header.stream);this.receivedMessagesCounts.set(En,(this.receivedMessagesCounts.get(En)||0)+1)}uploadMetrics(){return Jo(this,void 0,void 0,function*(){const{sessionId:bn}=this,En=yield this.connection.peerConnection.getStats(),Bn={};En.forEach(pr=>Bn[pr.id]=pr),ct.a.debug("rtc-stats",Object.assign(Object.assign({},Bn),{sessionId:bn}));const ur=[...new Set(Array.from(this.sentMessagesCounts.keys()).concat(Array.from(this.receivedMessagesCounts.keys())))].reduce((pr,Zr)=>{const Xr=this.sentMessagesCounts.get(Zr),qr=this.receivedMessagesCounts.get(Zr);return Object.assign(Object.assign({},pr),{[`${Zr}-sent`]:Xr,[`${Zr}-received`]:qr})},{sessionId:bn});ct.a.debug("rtc-message-report",ur)})}}function ds(Gr,bn){return ro(Gr)===ro(bn)}var Ss=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class Al{constructor(bn,En){this.peerConnection=bn,this.config=En,this.connectTimeoutMs=10*it.a.second,this.gatherIceTimeoutMs=5*it.a.second,this.pingUpdateTimeoutMs=2*it.a.second,this.streamLatestTimestamp=new Map,this.closeCalled=!1,this.connectCalled=!1,this.sentOffer=!1,this.receivedIceCandidate=!1;const{isOffer:Bn}=En;Bn?this.initializeChannels(bn):bn.ondatachannel=ur=>{switch(ur.channel.label){case"stream.latest-ttl":this.latestTtlStreamChannel=ur.channel;break;case"stream.reliable":this.reliableStreamChannel=ur.channel;break;case"stream.latest-reliable":this.latestReliableStreamChannel=ur.channel;break;case"stream.latest-try-once":this.latestTryOnceStreamChannel=ur.channel}this.setupChannel(ur.channel)},this.sessionMetrics=new ps(this.getSessionId(),this)}connect(){return Ss(this,void 0,void 0,function*(){if(this.connectCalled)return;this.connectCalled=!0,this.pingUpdateTimeout=setInterval(()=>{const{reliableStreamChannel:ur}=this;ur&&this.sendSystemMessage(ur,{type:"ping"})},this.pingUpdateTimeoutMs),this.connectTimeout=setTimeout(()=>Ss(this,void 0,void 0,function*(){this.isReady()||(ct.a.warn("RTC connect timed out, closing connection"),yield this.close())}),this.connectTimeoutMs);const{peerConnection:bn,config:{isOffer:En,sessionId:Bn}}=this;if(En){const ur=yield bn.createOffer();yield bn.setLocalDescription(ur)}En&&(this.gatherIceTimeout=setTimeout(()=>Ss(this,void 0,void 0,function*(){this.sentOffer||(ct.a.warn("ICE gathering timed out"),this.receivedIceCandidate?(ct.a.warn("Attempting to connect with partial ICE candidate pool"),yield this.sendOffer()):yield this.close())}),this.gatherIceTimeoutMs),bn.onicecandidate=ur=>Ss(this,void 0,void 0,function*(){ur.candidate?this.receivedIceCandidate=!0:yield this.sendOffer()}),bn.onicegatheringstatechange=()=>Ss(this,void 0,void 0,function*(){bn.iceGatheringState==="complete"&&(yield this.sendOffer())}),bn.onnegotiationneeded=()=>{ct.a.debug("Negotiation needed",{sessionId:Bn})})})}handleSignal(bn){return Ss(this,void 0,void 0,function*(){const{peerConnection:En,config:{sessionId:Bn,sendSignal:ur}}=this,{description:pr}=JSON.parse(bn.payload);if(ct.a.debug("Handling signal",{sessionId:Bn,description:JSON.stringify(pr)}),pr)if(En.signalingState!=="stable"||En.connectionState!=="connected")if(En.remoteDescription)ct.a.warn(`Received SDP signal during negotiation when remote description is already set: ${JSON.stringify(bn)}`);else if(pr.type==="offer"){yield En.setRemoteDescription(pr);const Zr=yield En.createAnswer();yield En.setLocalDescription(Zr),yield ur({payload:JSON.stringify({description:Zr})})}else pr.type==="answer"&&(yield En.setRemoteDescription(pr));else ct.a.warn(`Received SDP signal when signaling is stable and connected: ${JSON.stringify(bn)}`);else ct.a.warn(`Received non-SDP signal: ${JSON.stringify(bn)}`)})}send(bn,En){const Bn=this.getChannelFromLabel(En.channelLabel);Bn?this.sendOnChannel(Bn,bn):ct.a.warn("Send called with unexpected channel label",{channelLabel:En.channelLabel})}controlRemoteStream(bn){this.sendSystemMessage(wt(this.reliableStreamChannel),{type:"stream-control",streamControl:bn})}isActive(){return new Set(["new","connecting","connected"]).has(this.peerConnection.connectionState)}isReady(){const{peerConnection:bn,latestTtlStreamChannel:En,reliableStreamChannel:Bn,latestTryOnceStreamChannel:ur}=this;return!!(Bn&&En&&ur)&&bn.connectionState==="connected"&&Bn.readyState==="open"&&En.readyState==="open"&&ur.readyState==="open"}isClosed(){const{peerConnection:bn,reliableStreamChannel:En,latestTryOnceStreamChannel:Bn,latestTtlStreamChannel:ur}=this;return!(bn.connectionState!=="closed"||En!==void 0&&En.readyState!=="closed"||Bn!==void 0&&Bn.readyState!=="closed"||ur!==void 0&&ur.readyState!=="closed")}needsClosing(){const{peerConnection:bn,latestTtlStreamChannel:En,reliableStreamChannel:Bn,latestTryOnceStreamChannel:ur}=this;if(this.isClosed())return!1;const pr=new Set(["closing","closed"]),Zr=Xr=>Xr&&pr.has(Xr.readyState);return kn(bn)||Zr(En)||Zr(Bn)||Zr(ur)}close(){return Ss(this,void 0,void 0,function*(){this.closeCalled||(this.closeCalled=!0,yield this.sessionMetrics.uploadMetrics(),this.pingUpdateTimeout&&clearInterval(this.pingUpdateTimeout),this.connectTimeout&&clearTimeout(this.connectTimeout),this.gatherIceTimeout&&clearTimeout(this.gatherIceTimeout),this.peerConnection.close())})}getPing(){return this.pingTimeMs}getLastMessageTimestamp(){return this.lastMessageTimestamp}getSessionId(){return this.config.sessionId}getRemotePeer(){return this.config.remotePeer}initializeChannels(bn){this.latestTtlStreamChannel=bn.createDataChannel("stream.latest-ttl",Mt),this.reliableStreamChannel=bn.createDataChannel("stream.reliable",jt),this.latestReliableStreamChannel=bn.createDataChannel("stream.latest-reliable",Qt),this.latestTryOnceStreamChannel=bn.createDataChannel("stream.latest-try-once",gn),this.setupChannel(this.latestTtlStreamChannel),this.setupChannel(this.reliableStreamChannel),this.setupChannel(this.latestReliableStreamChannel),this.setupChannel(this.latestTryOnceStreamChannel)}sendOffer(){return Ss(this,void 0,void 0,function*(){if(this.sentOffer||(this.sentOffer=!0,kn(this.peerConnection)))return;const{peerConnection:bn,config:{sendSignal:En}}=this,Bn=yield bn.createOffer();yield bn.setLocalDescription(Bn);const ur={payload:JSON.stringify({description:Bn})};yield En(ur)})}getChannelFromLabel(bn){switch(bn){case"stream.latest-ttl":return this.latestTtlStreamChannel;case"stream.reliable":return this.reliableStreamChannel;case"stream.latest-reliable":return this.latestReliableStreamChannel;case"stream.latest-try-once":return this.latestTryOnceStreamChannel}}sendOnChannel(bn,En){let Bn;try{Bn=Object(en.encode)(JSON.stringify(En))}catch(ur){return void ct.a.warn("Failed to encode RTC message",{error:ur})}try{bn.send(Bn),this.sessionMetrics.incrementMessageSent(En)}catch(ur){ct.a.warn("Failed to send message to channel",{error:ur,channel:bn.label})}}channelNotRecognized(bn){return bn!==this.latestTtlStreamChannel&&bn!==this.latestReliableStreamChannel&&bn!==this.latestTryOnceStreamChannel&&bn!==this.reliableStreamChannel}setupChannel(bn){bn.onmessage=En=>{if(this.channelNotRecognized(bn))return void ct.a.warn("Received message on unrecognized data channel.");let Bn;try{Bn=JSON.parse(Object(en.decode)(En.data))}catch(ur){return void ct.a.warn("Received unparseable RTC message",{error:ur,channel:bn.label})}if(this.lastMessageTimestamp=new Date().getTime(),Bn=Kn(Bn),this.sessionMetrics.incrementMessageReceived(Bn),!this.handleSystemMessage(bn,Bn)){if(!this.hasCapabilities(Bn))return void ct.a.warn("Received RTC message that was not within the capability scope of the connection.");(bn===this.latestTryOnceStreamChannel||bn===this.latestTtlStreamChannel||bn===this.latestReliableStreamChannel)&&!this.isLatestMessage(Bn)||this.config.receive(this.config.remotePeer.id,Bn)}},bn.onerror=En=>{ct.a.warn(`Channel error: ${En.error}`,{error:En.error,sessionId:this.getSessionId(),channelLabel:bn.label})},bn.onopen=()=>{ct.a.debug("Channel opened",{sessionId:this.getSessionId(),channelLabel:bn.label})},bn.onclose=()=>{const En={bufferedAmount:bn.bufferedAmount,sessionId:this.getSessionId(),channelLabel:bn.label};this.closeCalled===!1?ct.a.debug("Unexpected channel closed",En):ct.a.debug("Channel closed",En)}}handleSystemMessage(bn,En){switch(En.header.stream.streamType){case"ping":return this.sendSystemMessage(bn,{type:"pong",timestamp:wt(En.payload.ping)}),!0;case"pong":{const Bn=new Date().getTime()-wt(En.payload.pong);return this.pingTimeMs=Bn,xt.aggregate("rtc-ping-time",Bn),!0}case"stream-control":return!0;default:return!1}}sendSystemMessage(bn,En){if(bn.readyState!=="open")return;const Bn={entityId:wt(this.config.localPeer.deviceId||this.config.localPeer.userId),streamName:`$.${En.type}`,streamType:En.type};let ur;switch(En.type){case"ping":ur={ping:new Date().getTime()};break;case"pong":ur={pong:En.timestamp};break;case"stream-control":ur={streamControl:En.streamControl}}this.sendOnChannel(bn,In(Bn,ur))}hasCapabilities(bn){var En,Bn;const{localPeer:ur,remotePeer:pr}=this.config,Zr=(En=ur.capabilitySet.streaming)===null||En===void 0?void 0:En.streams,Xr=Zr&&Zr.some(Tr=>Tr.receive&&ds(Tr.stream,bn.header.stream)),qr=(Bn=pr.capabilitySet.streaming)===null||Bn===void 0?void 0:Bn.streams,Mr=qr&&qr.some(Tr=>Tr.send&&ds(Tr.stream,bn.header.stream));return Xr||Mr}isLatestMessage(bn){const En=ro(bn.header.stream),Bn=(this.streamLatestTimestamp.get(En)||0)<=bn.header.created;return Bn&&this.streamLatestTimestamp.set(En,bn.header.created),Bn}}var qo=function(Gr,bn,En,Bn){return new(En||(En=Promise))(function(ur,pr){function Zr(Mr){try{qr(Bn.next(Mr))}catch(Tr){pr(Tr)}}function Xr(Mr){try{qr(Bn.throw(Mr))}catch(Tr){pr(Tr)}}function qr(Mr){var Tr;Mr.done?ur(Mr.value):(Tr=Mr.value,Tr instanceof En?Tr:new En(function(Wo){Wo(Tr)})).then(Zr,Xr)}qr((Bn=Bn.apply(Gr,bn||[])).next())})};class na{constructor(bn){this.config=bn,this.connections=[],this.connectingSessions=new Map,this.updateInterval=mt({func:()=>qo(this,void 0,void 0,function*(){try{yield this.update()}catch(En){ct.a.warn("RTC update failed",{error:En})}}),delay:250*it.a.millisecond,immediate:!0}),this.localPeer=this.createPeer()}send(bn,En,Bn){const ur=this.getActiveConnection(bn);ur?ur.isReady()?ur.send(En,Bn):ct.a.warn("Attempted to send with an active connection to that peer which was not yet ready."):ct.a.warn("Attempted to send with no active connection to that peer.")}controlRemoteStream(bn,En){const Bn=this.getActiveConnection(bn);Bn?Bn.isReady()?Bn.controlRemoteStream(En):ct.a.warn("Attempted to control remote stream with an active connection to that peer which was not yet ready."):ct.a.warn("Attempted to control remote stream with no active connection to that peer.")}connect(bn){return qo(this,void 0,void 0,function*(){const En=yield this.getLocalPeer();if(this.getActiveConnection(bn))return void ct.a.warn("Attempted to connect to peer with an already active connection.");let Bn;try{Bn=yield this.config.signalingClient.createSession(yield this.config.getToken(),{offerPeerId:En.id,answerPeerId:bn})}catch(ur){Object(jr.a)(ur,Co.a,pr=>pr.statusCode===404),ct.a.warn("Attempted to connect to peer that does not exist.")}if(Bn)for(this.connectingSessions.set(Bn.id,new Date().getTime()),yield this.connectToSession(Bn);;)switch(yield Object(st.a)(.1),this.getConnectionStatus(bn)){case"connecting":continue;case"connected":return Bn.id;case"disconnected":return}})}getConnectionStatus(bn){const En=this.getActiveConnection(bn);return En?En.isReady()?"connected":"connecting":"disconnected"}getIceMode(bn){const En=this.getActiveConnection(bn);if(En)return En.iceMode}disconnect(bn){return qo(this,void 0,void 0,function*(){const En=this.getActiveConnection(bn);En&&(yield this.closeConnection(En))})}getLocalPeer(){return qo(this,void 0,void 0,function*(){return yield this.localPeer})}getPeers(){return qo(this,void 0,void 0,function*(){return yield this.config.signalingClient.getPeers(yield this.config.getToken())})}getPing(bn){const En=this.getActiveConnection(bn);if(En)return En.getPing();ct.a.warn("Attempted to get ping time from inactive peer.")}getLastMessageTimestamp(bn){const En=this.getActiveConnection(bn);if(En)return En.getLastMessageTimestamp();ct.a.warn("Attempted to get ping time from inactive peer.")}shutdown(){return qo(this,void 0,void 0,function*(){yield this.updateInterval.stop();const bn=this.connections;this.connections=[],yield this.closeConnections(bn)})}closeConnection(bn){return qo(this,void 0,void 0,function*(){this.connectingSessions.delete(bn.getSessionId()),yield bn.close();try{yield this.config.signalingClient.deleteSession(yield this.config.getToken(),bn.getSessionId())}catch(En){Object(jr.a)(En,Co.a,Bn=>Bn.statusCode===404)}})}getSessions(){return qo(this,void 0,void 0,function*(){const bn=yield this.getLocalPeer();return(yield this.config.signalingClient.getSessions(yield this.config.getToken())).filter(En=>En.offer.peer.id===bn.id||En.answer.peer.id===bn.id)})}createPeer(){return qo(this,void 0,void 0,function*(){return yield this.config.signalingClient.createPeer(yield this.config.getToken(),{capabilitySet:this.config.capabilitySet||{}})})}createRTCPeerConnection(bn={}){return qo(this,void 0,void 0,function*(){return new(this.config.alternateRTCPeerConnection||RTCPeerConnection)(Object.assign({iceServers:yield this.config.signalingClient.getIceServers(yield this.config.getToken())},bn))})}closeConnections(bn){return qo(this,void 0,void 0,function*(){const En=yield Pt(bn.map(Bn=>qo(this,void 0,void 0,function*(){yield this.closeConnection(Bn)})));for(const Bn of En)ct.a.warn("Request to close session failed",{error:Bn})})}reset(){return qo(this,void 0,void 0,function*(){yield this.closeConnections(this.connections),this.connections=[],this.connectingSessions=new Map,this.localPeer=this.createPeer(),yield this.localPeer})}getActiveConnection(bn){return this.connections.find(En=>En.getRemotePeer().id===bn&&En.isActive())}update(){return qo(this,void 0,void 0,function*(){const bn=yield this.getLocalPeer();try{yield this.config.signalingClient.refreshPeer(yield this.config.getToken(),bn.id)}catch(En){Object(jr.a)(En,Co.a,Bn=>Bn.statusCode===404),ct.a.warn("Peer expired, creating new peer",{peerId:bn.id}),yield this.reset()}yield this.handleSessions(yield this.getSessions())})}handleSessions(bn){return qo(this,void 0,void 0,function*(){yield this.syncConnectionsAndSessions(bn);const En=bn.map(Bn=>({session:Bn,connection:this.connections.find(ur=>ur.getSessionId()===Bn.id)}));yield Promise.all(En.map(({session:Bn,connection:ur})=>qo(this,void 0,void 0,function*(){return yield this.maintainConnection(Bn,ur)})))})}syncConnectionsAndSessions(bn){return qo(this,void 0,void 0,function*(){const En=new Set(bn.map(pr=>pr.id)),Bn=pr=>En.has(pr.getSessionId())||this.connectingSessions.has(pr.getSessionId());this.connections=this.connections.filter(pr=>Bn(pr));const ur=this.connections.filter(pr=>!Bn(pr)||pr.needsClosing());yield Promise.all(ur.map(pr=>qo(this,void 0,void 0,function*(){yield this.closeConnection(pr)})))})}maintainConnection(bn,En){return qo(this,void 0,void 0,function*(){const Bn=yield this.getLocalPeer(),ur=bn.offer.peer.id===Bn.id;if(En){if(En.isReady())try{yield this.config.signalingClient.refreshSession(yield this.config.getToken(),bn.id)}catch(pr){Object(jr.a)(pr,Co.a,Zr=>Zr.statusCode===404),ct.a.debug("Refresh session not found",{sessionId:bn.id})}else if(En.isActive())try{yield this.consumeSignals(En)}catch(pr){ct.a.warn("Failed to ingest signals, closing connection",{error:pr}),yield this.closeConnection(En)}}else{if(ur)return;yield this.connectToSession(bn)}})}connectToSession(bn){return qo(this,void 0,void 0,function*(){const En=yield this.getLocalPeer(),Bn=bn.offer.peer.id===En.id,ur=yield this.createRTCPeerConnection(),pr=new Al(ur,{localPeer:Bn?bn.offer.peer:bn.answer.peer,remotePeer:Bn?bn.answer.peer:bn.offer.peer,sessionId:bn.id,isOffer:Bn,sendSignal:Zr=>this.sendSignal(bn.id,Zr),receive:(Zr,Xr)=>this.config.receive(Zr,Xr)});if(this.connections.find(Zr=>Zr.getSessionId()===bn.id))return ct.a.warn("connectToSession called on a session that already has a connection.",{sessionId:bn.id}),void(yield pr.close());this.setupHandlers(pr),this.connections.push(pr);try{yield pr.connect()}catch(Zr){ct.a.warn("Failed to handle negotiation, closing connection",{error:Zr}),yield this.closeConnection(pr)}})}setupHandlers(bn){const{peerConnection:En}=bn,Bn=bn.getSessionId();En.onconnectionstatechange=()=>qo(this,void 0,void 0,function*(){const ur=this.connectingSessions.get(Bn);if(ur===void 0)return;const pr=En.connectionState;switch(kn(En)&&this.connectingSessions.delete(Bn),pr){case"connected":{this.connectingSessions.delete(Bn);const Zr=new Date().getTime()-ur;xt.aggregate("rtc-connect-time",Zr);break}case"failed":xt.increment("rtc-connect-failed"),yield this.closeConnection(bn)}})}consumeSignals(bn){return qo(this,void 0,void 0,function*(){let En=[];try{En=yield this.config.signalingClient.takeSignals(yield this.config.getToken(),bn.getSessionId())}catch(Bn){Object(jr.a)(Bn,Co.a,ur=>ur.statusCode===404)}for(const Bn of En)yield bn.handleSignal(Bn)})}sendSignal(bn,En){return qo(this,void 0,void 0,function*(){try{yield this.config.signalingClient.addSignals(yield this.config.getToken(),bn,{signals:[En]})}catch(Bn){Object(jr.a)(Bn,Co.a,ur=>ur.statusCode===404)}})}}},function(i,o,s){var _={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let $;const et=new Uint8Array(16);function tt(){if(!$&&($=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $(et)}const j=[];for(let st=0;st<256;++st)j.push((st+256).toString(16).slice(1));function it(st,ht=0){return(j[st[ht+0]]+j[st[ht+1]]+j[st[ht+2]]+j[st[ht+3]]+"-"+j[st[ht+4]]+j[st[ht+5]]+"-"+j[st[ht+6]]+j[st[ht+7]]+"-"+j[st[ht+8]]+j[st[ht+9]]+"-"+j[st[ht+10]]+j[st[ht+11]]+j[st[ht+12]]+j[st[ht+13]]+j[st[ht+14]]+j[st[ht+15]]).toLowerCase()}o.a=function(st,ht,vt){if(_.randomUUID&&!ht&&!st)return _.randomUUID();const ft=(st=st||{}).random||(st.rng||tt)();if(ft[6]=15&ft[6]|64,ft[8]=63&ft[8]|128,ht){vt=vt||0;for(let pt=0;pt<16;++pt)ht[vt+pt]=ft[pt];return ht}return it(ft)}},,function(i,o,s){s.r(o),s.d(o,"LogClient",function(){return j});var _=s(28),$=s(10),et=s(11),tt=function(it,st,ht,vt){return new(ht||(ht=Promise))(function(ft,pt){function ct(Ot){try{Et(vt.next(Ot))}catch(Lt){pt(Lt)}}function yt(Ot){try{Et(vt.throw(Ot))}catch(Lt){pt(Lt)}}function Et(Ot){var Lt;Ot.done?ft(Ot.value):(Lt=Ot.value,Lt instanceof ht?Lt:new ht(function(Tt){Tt(Lt)})).then(ct,yt)}Et((vt=vt.apply(it,st||[])).next())})};class j extends _.a{log(st){return tt(this,void 0,void 0,function*(){const ht=j.token;try{yield this.fetch("logs",{token:ht,method:"POST",body:JSON.stringify({logs:st}),allowUnsafeRetries:!0})}catch(vt){Object($.a)(vt,et.a,ft=>ft.statusCode===401&&ht!==void 0),j.token===ht&&delete j.token,yield this.log(st)}})}}}])})})(dist$1);function defined$2(i,o){if(i!==void 0)return i;throw new Error(o||"Value is undefined")}let FORMANT_API_URL$1="https://api.formant.io";typeof window<"u"&&(FORMANT_API_URL$1=window.FORMANT_API_URL||FORMANT_API_URL$1);let urlParams$2=new URLSearchParams("");typeof window<"u"&&(urlParams$2=new URLSearchParams(window.location.search));const envDev$1=urlParams$2.get("formant_dev");envDev$1&&(FORMANT_API_URL$1="https://api-dev.formant.io");const envStage$1=urlParams$2.get("formant_stage");envStage$1&&(FORMANT_API_URL$1="https://api-stage.formant.io");const envLocal=urlParams$2.get("formant_local");envLocal&&(FORMANT_API_URL$1="https://api.formant.local");let App$2=class{static sendAppMessage(o){window.parent.postMessage(o,"*")}static getCurrentModuleContext(){let o=new URLSearchParams("");return typeof window<"u"&&(o=new URLSearchParams(window.location.search)),o.get("module")}static async getCurrentModuleConfiguration(){let o=new URLSearchParams("");typeof window<"u"&&(o=new URLSearchParams(window.location.search));const s=o.get("configuration");return s===null||s.trim()===""?void 0:(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/module-configurations/`+s,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).configuration}static isModule(){return this.getCurrentModuleContext()!==null}static goToTime(o){this.sendAppMessage({type:"go_to_time",time:o.getTime()})}static goToDevice(o){this.sendAppMessage({type:"go_to_device",deviceId:o})}static showMessage(o){this.sendAppMessage({type:"show_message",message:o})}static requestModuleData(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"request_module_data",module:o})}static setModuleDateTimeRange(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"set_module_data_time_range",module:_,before:o,after:s||0})}static refreshAuthToken(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"refresh_auth_token",module:o})}static sendChannelData(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"send_channel_data",source:_,channel:o,data:s})}static setupModuleMenus(o){const s=this.getCurrentModuleContext();if(!s)throw new Error("No module context");this.sendAppMessage({type:"setup_module_menus",module:s,menus:o})}static addMenuListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_menu_item_clicked"&&o(_.menu)})}static addAccessTokenRefreshListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="auth_token"&&o(_.token)})}static addModuleDataListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_data"&&o({streams:_.streams,time:_.time,queryRange:_.queryRange})})}static addChannelDataListener(o,s){window.addEventListener("message",_=>{const $=_.data;$.type==="channel_data"&&$.channel===o&&s({source:$.source,data:$.data})})}};const _Authentication$1=class{static async login(o,s){try{const _=await fetch(`${FORMANT_API_URL$1}/v1/admin/auth/login`,{method:"POST",body:JSON.stringify({email:o,password:s}),headers:{"Content-Type":"application/json"}}),$=await _.json();if(_.status!==200)throw new Error($.message);return await _Authentication$1.loginWithToken($.authentication.accessToken,$.authentication.refreshToken),$.authentication}catch(_){return _Authentication$1.waitingForAuth.forEach($=>$(!1)),_Authentication$1.waitingForAuth=[],Promise.reject(_)}}static async loginWithToken(o,s){const _=JSON.parse(atob(o.split(".")[1]));try{let $;if(_Authentication$1.isShareToken=_["formant:claims"]&&_["formant:claims"].type=="share",_["formant:claims"]&&(_Authentication$1.currentOrganization=_["formant:claims"].organizationId),_["custom:organization_id"]&&(_Authentication$1.currentOrganization=_["custom:organization_id"]),_Authentication$1.isShareToken||($=_.sub),_["formant:claims"]&&_["formant:claims"].userId&&($=_["formant:claims"].userId),$){const et=await fetch(`${FORMANT_API_URL$1}/v1/admin/users/${$}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}}),tt=await et.json();if(et.status!==200)throw new Error(tt.message);_Authentication$1.currentUser=tt}_Authentication$1.token=o,_Authentication$1.waitingForAuth.forEach(et=>et(!0))}catch($){console.error($),_Authentication$1.waitingForAuth.forEach(et=>et(!1))}_Authentication$1.waitingForAuth=[],s&&(_Authentication$1.refreshToken=s,setInterval(async()=>{if(_Authentication$1.refreshToken){const et=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:_Authentication$1.refreshToken})})).json();_Authentication$1.token=et.authentication.accessToken}},1e3*60*60))}static isAuthenticated(){return _Authentication$1.token!==void 0}static getCurrentUser(){return _Authentication$1.currentUser}static async waitTilAuthenticated(){return _Authentication$1.token!==void 0?!0:new Promise(o=>{_Authentication$1.waitingForAuth.push(function(s){o(s)})})}static async listenForRefresh(){App$2.addAccessTokenRefreshListener(o=>{this.loginWithToken(o)}),setInterval(async()=>{App$2.refreshAuthToken()},1e3*60*60)}};let Authentication$1=_Authentication$1;__publicField$1(Authentication$1,"token");__publicField$1(Authentication$1,"refreshToken");__publicField$1(Authentication$1,"currentUser");__publicField$1(Authentication$1,"currentOrganization");__publicField$1(Authentication$1,"isShareToken",!1);__publicField$1(Authentication$1,"defaultDeviceId");__publicField$1(Authentication$1,"waitingForAuth",[]);function delay$1(i){return new Promise(o=>setTimeout(o,i))}let DataChannel$1=class{constructor(o){__publicField$1(this,"ready",!1),__publicField$1(this,"listeners",[]),__publicField$1(this,"openListeners",[]),__publicField$1(this,"closeListeners",[]),__publicField$1(this,"errorListeners",[]),__publicField$1(this,"binaryListeners",[]),__publicField$1(this,"error"),__publicField$1(this,"decoder",new TextDecoder),this.dataChannel=o,this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=()=>{this.ready=!0,this.openListeners.forEach(s=>s())},this.dataChannel.onclose=()=>{this.ready=!1,this.closeListeners.forEach(s=>s())},this.dataChannel.onerror=s=>{console.error(s),this.error="An error occurred in DataChannel",this.errorListeners.forEach(_=>_(s))},this.dataChannel.onmessage=s=>{this.listeners.forEach(_=>{const $=new Uint8Array(s.data),et=this.decoder.decode($);_(et)}),this.binaryListeners.forEach(_=>{_(new Uint8Array(s.data))})}}addOpenListener(o){this.openListeners.push(o)}removeOpenListener(o){this.openListeners=this.openListeners.filter(s=>s!==o)}addCloseListener(o){this.closeListeners.push(o)}removeCloseListener(o){this.closeListeners=this.closeListeners.filter(s=>s!==o)}addErrorListener(o){this.errorListeners.push(o)}removeErrorListener(o){this.errorListeners=this.errorListeners.filter(s=>s!==o)}async waitTilReady(){return this.ready?!0:new Promise((s,_)=>{let $=window.setInterval(()=>{this.ready&&(window.clearInterval($),s(!0)),this.error&&_(this.error)},10)})}send(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}sendBinary(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}addListener(o){this.listeners.push(o)}removeListener(o){const s=this.listeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.listeners.splice(s,1)}addBinaryListener(o){this.binaryListeners.push(o)}removeBinaryListener(o){const s=this.binaryListeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.binaryListeners.splice(s,1)}},CaptureStream$1=class{constructor(o){__publicField$1(this,"token"),this.captureSession=o}async ingestJSON(o){if(!this.token){const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/capture-sessions/${this.captureSession.code}/authenticate`,{method:"POST"})).json();this.token=_.token}await fetch(`${FORMANT_API_URL$1}/v1/ingest`,{method:"POST",body:JSON.stringify({deviceId:this.captureSession.deviceId,name:this.captureSession.streamName,type:"json",points:[[Date.now(),JSON.stringify(o)]]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}})}},Manipulator$1=class{constructor(o,s){__publicField$1(this,"currentListeners",[]),__publicField$1(this,"onRealtimeMessage",(_,$)=>{$.payload.jointState&&this.currentListeners.forEach(et=>{$.payload.jointState&&et($.payload.jointState)})}),this.device=o,this.config=s}async synchronize(){this.device.addRealtimeListener(this.onRealtimeMessage),this.device.startListeningToRealtimeDataStream(this.config.currentJointStateStream)}async desynchronize(){this.device.removeRealtimeListener(this.onRealtimeMessage),this.device.stopListeningToRealtimeDataStream(this.config.currentJointStateStream)}async addCurrentJointStateListener(o){this.currentListeners.push(o)}},RequestDataChannel$1=class{constructor(o,s,_){__publicField$1(this,"channel"),__publicField$1(this,"requestIdToResponseMap",new Map),this.device=o,this.channel_name=s,this.timeout=_}addOpenListener(o){defined$2(this.channel,"channel not initalized").addOpenListener(o)}removeOpenListener(o){defined$2(this.channel,"channel not initalized").removeOpenListener(o)}addCloseListener(o){defined$2(this.channel,"channel not initalized").addCloseListener(o)}removeCloseListener(o){defined$2(this.channel,"channel not initalized").removeCloseListener(o)}addErrorListener(o){defined$2(this.channel,"channel not initalized").addErrorListener(o)}removeErrorListener(o){defined$2(this.channel,"channel not initalized").removeErrorListener(o)}},BinaryRequestDataChannel$1=class extends RequestDataChannel$1{constructor(){super(...arguments),__publicField$1(this,"RESPONSE_SUCCESS_BYTE",0),__publicField$1(this,"decoder",new TextDecoder)}generateBinaryId(){const o=new Uint8Array(16);for(let s=0;s<o.length;s++)o[s]=Math.floor(Math.random()*256);return o}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addBinaryListener(o=>{const _=o.slice(0,16).toString();if(_.length===0)throw new Error("Invalid response");const $=o.slice(16);if($.length===0)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,$)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateBinaryId(),tt=et.toString();_.set(tt,!0),s.sendBinary(new Uint8Array([...et,...o]));const j=new Date().getTime();for(;new Date().getTime()<j+$;)if(await delay$1(50),_.has(tt)){const it=_.get(tt);if(it!==!0){_.delete(tt);const st=it[0]===this.RESPONSE_SUCCESS_BYTE,ht=it.slice(1);if(st)return ht;throw console.error({name:"AdapterError",message:this.decoder.decode(ht)}),new Error("Binary request datachannel adapter error")}}throw _.delete(tt),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Binary request data channel request timed out")}},TextRequestDataChannel$1=class extends RequestDataChannel$1{generateTextId(){return Math.random().toString(36).substring(2)+"-"+Math.random().toString(36).substring(2)}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addListener(o=>{const s=JSON.parse(o),{id:_,data:$,error:et}=s;if(!_)throw new Error("Invalid response");if(!$&&!et)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,s)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateTextId();_.set(et,!0),s.send(JSON.stringify({id:et,data:o}));const tt=new Date().getTime();for(;new Date().getTime()<tt+$;)if(await delay$1(50),_.has(et)){const j=_.get(et);if(j!==!0){_.delete(et);const{data:it,error:st}=j;if(it)return it;if(st)throw console.error({name:"AdapterError",message:st}),new Error("Text request datachannel adapter error")}}throw _.delete(et),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Text request datachannel request timed out")}};const urlParams$1$1=new URLSearchParams(window.location.search),rtcClientVersion=urlParams$1$1.get("rtc_client");let Device$1=class{constructor(o,s,_){__publicField$1(this,"rtcClient"),__publicField$1(this,"remoteDevicePeerId"),__publicField$1(this,"realtimeListeners",[]),__publicField$1(this,"handleMessage",($,et)=>{this.realtimeListeners.forEach(tt=>tt($,et))}),this.id=o,this.name=s,this.organizationId=_}async getLatestTelemetry(){return(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}async getConfiguration(){let o=await fetch(`${FORMANT_API_URL$1}/v1/admin/devices/${this.id}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}});const s=await o.json();if(!s.state.reportedConfiguration)throw new Error("Device has no configuration, has it ever been turned on?");const _=s.state.reportedConfiguration.version;return o=await fetch(`${FORMANT_API_URL$1}/v1/admin/devices/${this.id}/configurations/${_}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}}),(await o.json()).document}async getFileUrl(o){return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[o]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).fileUrls}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{let s;if(rtcClientVersion==="1"?s=new dist$1.exports.RtcClientV1({signalingClient:new dist$1.exports.RtcSignalingClient(FORMANT_API_URL$1+"/v1/signaling"),getToken:async()=>defined$2(Authentication$1.token,"Realtime when user isn't authorized"),receive:this.handleMessage}):s=new dist$1.exports.RtcClient({signalingClient:new dist$1.exports.SignalingPromiseClient(FORMANT_API_URL$1,null,null),getToken:async()=>defined$2(Authentication$1.token,"Realtime when user isn't authorized"),receive:this.handleMessage,sessionType:o}),s.isReady)for(;!s.isReady();)await delay$1(100);const $=(await s.getPeers()).find(et=>et.deviceId===this.id);if(!$)throw new Error("Cannot find peer, is the robot offline?");for(this.remoteDevicePeerId=$.id,await s.connect(this.remoteDevicePeerId);s.getConnectionStatus(this.remoteDevicePeerId)!=="connected";)await delay$1(100);this.rtcClient=s}}async sendRealtimeMessage(o,s={channelLabel:"stream.reliable"}){const _=defined$2(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.send(defined$2($).id,o,s)}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeAudioStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="audio_common_msgs/AudioData"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});return it}async getRealtimeVideoStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="formant/H264VideoFrame"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});return it}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator$1(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async changeStreamAudioType(o,s){const _=defined$2(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.controlRemoteStream(defined$2($).id,{streamName:o,setAudioFormat:s})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){const s=(await defined$2(this.rtcClient,"Realtime connection has not been started").getPeers()).find(_=>_.deviceId===this.id);return defined$2(s,"Could not find remote peer for device "+this.id)}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async isInRealtimeSession(){let o=await Fleet$1.getPeers(),s=await Fleet$1.getRealtimeSessions(),_=o.find($=>$.deviceId===this.id);return _?s[_.id].length>0:!1}async getAvailableCommands(){return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/command-templates/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items.map(_=>({name:_.name,id:_.id,command:_.command,description:_.description,parameterEnabled:_.parameterEnabled,parameterValue:_.parameterValue,parameterMeta:_.parameterMeta,enabled:_.enabled}))}async sendCommand(o,s,_,$){var et;const j=(await this.getAvailableCommands()).find(ht=>ht.name===o);if(!j)throw new Error(`Could not find command with name "${o}"`);let it;if(s===void 0)if(j.parameterEnabled&&j.parameterValue)it=j.parameterValue;else throw new Error("Command has no default parameter value, you must provide one");else it=s;let st={value:it,scrubberTime:(_||new Date).toISOString(),meta:__spreadValues$1(__spreadValues$1({},j.parameterMeta),$)};await fetch(`${FORMANT_API_URL$1}/v1/admin/commands`,{method:"POST",body:JSON.stringify({commandTemplateId:j.id,organizationId:this.organizationId,deviceId:this.id,command:j.command,parameter:st,userId:(et=Authentication$1.currentUser)==null?void 0:et.id}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})}async createCustomDataChannel(o,s){if(rtcClientVersion==="1")throw new Error("createCustomDataChannel is not supported in rtcClientVersion 1");const _=defined$2(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined$2($).id,o,__spreadValues$1({ordered:!0},s),!1,(j,it)=>{const st=new DataChannel$1(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel$1(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel$1(this,o,s)}async createCaptureStream(o){const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/capture-sessions`,{method:"POST",body:JSON.stringify({deviceId:this.id,streamName:o,tags:{}}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json();return new CaptureStream$1(_)}async getTelemetry(o,s,_,$){return await Fleet$1.getTelemetry(this.id,o,s,_,$)}async getTelemetryStreams(){var o,s;const _=await this.getConfiguration(),$=await fetch(`${FORMANT_API_URL$1}/v1/queries/metadata/stream-names`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}}),et=[],tt=[];return(s=(o=_.telemetry)==null?void 0:o.streams)==null||s.forEach(st=>{st.disabled!==!0&&et.push(st.name),st.onDemand===!0&&tt.push(st.name)}),console.log(tt),(await $.json()).items.filter(st=>!et.includes(st)).map(st=>({name:st,onDemand:tt.includes(st)}))}async createInterventionRequest(o,s,_,$){return await(await fetch(`${FORMANT_API_URL$1}/v1/admin/intervention-requests`,{method:"POST",body:JSON.stringify({message:o,interventionType:s,time:new Date().toISOString(),deviceId:this.id,tags:$,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()}async addInterventionResponse(o,s,_){return await(await fetch(`${FORMANT_API_URL$1}/v1/admin/intervention-responses`,{method:"POST",body:JSON.stringify({interventionId:o,interventionType:s,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()}},PeerDevice$1=class{constructor(o){__publicField$1(this,"rtcClient"),__publicField$1(this,"remoteDevicePeerId"),__publicField$1(this,"realtimeListeners",[]),__publicField$1(this,"id"),__publicField$1(this,"handleMessage",(s,_)=>{this.realtimeListeners.forEach($=>$(s,_))}),this.peerUrl=o}async getLatestTelemetry(){const s=await(await fetch(`${this.peerUrl}/telemetry`)).json();return Object.entries(s).map(([$,et])=>({deviceId:this.id,streamName:$,streamType:"json",currentValue:et,currentValueTime:et.timestamp,tags:{}}))}async getDeviceId(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.id}async getConfiguration(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.document}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{const s=new dist$1.exports.RtcClient({lanOnlyMode:!0,receive:this.handleMessage,sessionType:o});for(await s.connectLan(this.peerUrl);s.getConnectionStatus(this.peerUrl)!=="connected";)await delay$1(100);this.rtcClient=s}}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeVideoStreams(){var o,s,_;const $=await this.getConfiguration(),et=[];for(const tt of(o=$.teleop.hardwareStreams)!=null?o:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});for(const tt of(s=$.teleop.rosStreams)!=null?s:[])tt.topicType=="formant/H264VideoFrame"&&et.push({name:tt.topicName});for(const tt of(_=$.teleop.customStreams)!=null?_:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});return et}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator$1(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined$2(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$2(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){return{id:this.peerUrl,organizationId:"",deviceId:this.id,capabilities:[],capabilitySet:{}}}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async createCustomDataChannel(o,s){const _=defined$2(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined$2($).id,o,__spreadValues$1({ordered:!0},s),!1,(j,it)=>{const st=new DataChannel$1(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel$1(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel$1(this,o,s)}};const _Fleet$1=class{static async setDefaultDevice(o){_Fleet$1.defaultDeviceId=o}static async getCurrentDevice(){if(!Authentication$1.token)throw new Error("Not authenticated");if(!_Fleet$1.defaultDeviceId)throw new Error("No known default device");const $=(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/device-details/query`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items.find(tt=>tt.id===_Fleet$1.defaultDeviceId).name,et=new Device$1(_Fleet$1.defaultDeviceId,$,defined$2(Authentication$1.currentOrganization));return _Fleet$1.knownContext.push(new WeakRef(et)),et}static async getPeerDevice(o){const s=new PeerDevice$1(o);return s.id=await s.getDeviceId(),s}static async getDevice(o){if(!Authentication$1.token)throw new Error("Not authenticated");const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/devices/${o}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json(),$=_.name,et=new Device$1(o,$,_.organizationId);return _Fleet$1.knownContext.push(new WeakRef(et)),et}static async getDevices(){if(!Authentication$1.token)throw new Error("Not authenticated");const s=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/device-details/query`,{method:"POST",body:JSON.stringify({enabled:!0,type:"default"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json();return s.items,s.items.map(_=>new Device$1(_.id,_.name,_.organizationId))}static async getOnlineDevices(){if(!Authentication$1.token)throw new Error("Not authenticated");const _=(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/online-devices`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items;return(await _Fleet$1.getDevices()).filter(et=>_.includes(et.id))}static async getPeers(){if(!Authentication$1.token)throw new Error("Not authenticated");return await new dist$1.exports.RtcClient({signalingClient:new dist$1.exports.SignalingPromiseClient(FORMANT_API_URL$1,null,null),getToken:async()=>defined$2(Authentication$1.token,"Realtime when user isn't authorized"),receive:()=>{}}).getPeers()}static async getRealtimeSessions(){if(!Authentication$1.token)throw new Error("Not authenticated");return await new dist$1.exports.RtcClient({signalingClient:new dist$1.exports.SignalingPromiseClient(FORMANT_API_URL$1,null,null),getToken:async()=>defined$2(Authentication$1.token,"Realtime when user isn't authorized"),receive:()=>{}}).getSessions()}static async getRealtimeDevices(){if(!Authentication$1.token)throw new Error("Not authenticated");const _=(await(await fetch(`${FORMANT_API_URL$1}/v1/signaling/peers`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items.map(et=>et.deviceId);return(await _Fleet$1.getDevices()).filter(et=>_.includes(et.id))}static async getLatestTelemetry(o){let s=o;return o&&!Array.isArray(o)&&(o=[o]),(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:s}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getTelemetry(o,s,_,$,et){let tt=o;Array.isArray(o)||(tt=[o]);let j=s;return Array.isArray(s)||(j=[s]),(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/queries`,{method:"POST",body:JSON.stringify({deviceIds:tt,end:$.toISOString(),names:j,start:_.toISOString(),tags:et}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getFileUrl(o){const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[o]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json();if(_.fileUrls.length===0)throw new Error("File not found");return _.fileUrls[0]}static async queryTelemetry(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/queries`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async aggregateTelemetry(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/queries`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).aggregates}static async queryEvents(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/events/query`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getEvent(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/events/query/id=${o}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getInterventions(){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/intervention-requests`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}};let Fleet$1=_Fleet$1;__publicField$1(Fleet$1,"defaultDeviceId");__publicField$1(Fleet$1,"knownContext",[]);let urlParams$3=new URLSearchParams("");typeof window<"u"&&(urlParams$3=new URLSearchParams(window.location.search));const urlDevice$1=urlParams$3.get("device");urlDevice$1&&Fleet$1.setDefaultDevice(urlDevice$1);const urlAuth$1=urlParams$3.get("auth");urlAuth$1&&Authentication$1.loginWithToken(urlAuth$1);const moduleName$1=urlParams$3.get("module");moduleName$1&&Authentication$1.listenForRefresh();dist$1.exports.IRtcSendConfiguration;dist$1.exports.IRtcStreamMessage;dist$1.exports.IRtcStreamPayload;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(i[_]=s[_])}return i},_extends$1.apply(this,arguments)}function isPlainObject$1(i){return i!==null&&typeof i=="object"&&i.constructor===Object}function deepClone(i){if(!isPlainObject$1(i))return i;const o={};return Object.keys(i).forEach(s=>{o[s]=deepClone(i[s])}),o}function deepmerge(i,o,s={clone:!0}){const _=s.clone?_extends$1({},i):i;return isPlainObject$1(i)&&isPlainObject$1(o)&&Object.keys(o).forEach($=>{$!=="__proto__"&&(isPlainObject$1(o[$])&&$ in i&&isPlainObject$1(i[$])?_[$]=deepmerge(i[$],o[$],s):s.clone?_[$]=isPlainObject$1(o[$])?deepClone(o[$]):o[$]:_[$]=o[$])}),_}function formatMuiErrorMessage(i){let o="https://mui.com/production-error/?code="+i;for(let s=1;s<arguments.length;s+=1)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified MUI error #"+i+"; visit "+o+" for the full message."}function capitalize(i){if(typeof i!="string")throw new Error(formatMuiErrorMessage(7));return i.charAt(0).toUpperCase()+i.slice(1)}function resolveProps(i,o){const s=_extends$1({},o);return Object.keys(i).forEach(_=>{if(_.toString().match(/^(components|slots)$/))s[_]=_extends$1({},i[_],s[_]);else if(_.toString().match(/^(componentsProps|slotProps)$/)){const $=i[_]||{},et=o[_];s[_]={},!et||!Object.keys(et)?s[_]=$:!$||!Object.keys($)?s[_]=et:(s[_]=_extends$1({},et),Object.keys($).forEach(tt=>{s[_][tt]=resolveProps($[tt],et[tt])}))}else s[_]===void 0&&(s[_]=i[_])}),s}function memoize$1(i){var o=Object.create(null);return function(s){return o[s]===void 0&&(o[s]=i(s)),o[s]}}function sheetForTag(i){if(i.sheet)return i.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===i)return document.styleSheets[o]}function createStyleElement(i){var o=document.createElement("style");return o.setAttribute("data-emotion",i.key),i.nonce!==void 0&&o.setAttribute("nonce",i.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var StyleSheet=function(){function i(s){var _=this;this._insertTag=function($){var et;_.tags.length===0?_.insertionPoint?et=_.insertionPoint.nextSibling:_.prepend?et=_.container.firstChild:et=_.before:et=_.tags[_.tags.length-1].nextSibling,_.container.insertBefore($,et),_.tags.push($)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var o=i.prototype;return o.hydrate=function(_){_.forEach(this._insertTag)},o.insert=function(_){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var $=this.tags[this.tags.length-1];if(this.isSpeedy){var et=sheetForTag($);try{et.insertRule(_,et.cssRules.length)}catch{}}else $.appendChild(document.createTextNode(_));this.ctr++},o.flush=function(){this.tags.forEach(function(_){return _.parentNode&&_.parentNode.removeChild(_)}),this.tags=[],this.ctr=0},i}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(i,o){return charat(i,0)^45?(((o<<2^charat(i,0))<<2^charat(i,1))<<2^charat(i,2))<<2^charat(i,3):0}function trim(i){return i.trim()}function match(i,o){return(i=o.exec(i))?i[0]:i}function replace(i,o,s){return i.replace(o,s)}function indexof(i,o){return i.indexOf(o)}function charat(i,o){return i.charCodeAt(o)|0}function substr(i,o,s){return i.slice(o,s)}function strlen(i){return i.length}function sizeof(i){return i.length}function append(i,o){return o.push(i),i}function combine(i,o){return i.map(o).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(i,o,s,_,$,et,tt){return{value:i,root:o,parent:s,type:_,props:$,children:et,line,column,length:tt,return:""}}function copy(i,o){return assign(node("",null,null,"",null,null,0),i,{length:-i.length},o)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(i,o){return substr(characters,i,o)}function token(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(i){return line=column=1,length=strlen(characters=i),position=0,[]}function dealloc(i){return characters="",i}function delimit(i){return trim(slice(position-1,delimiter(i===91?i+2:i===40?i+1:i)))}function whitespace(i){for(;(character=peek())&&character<33;)next();return token(i)>2||token(character)>3?"":" "}function escaping(i,o){for(;--o&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(i,caret()+(o<6&&peek()==32&&next()==32))}function delimiter(i){for(;next();)switch(character){case i:return position;case 34:case 39:i!==34&&i!==39&&delimiter(character);break;case 40:i===41&&delimiter(i);break;case 92:next();break}return position}function commenter(i,o){for(;next()&&i+character!==47+10;)if(i+character===42+42&&peek()===47)break;return"/*"+slice(o,position-1)+"*"+from(i===47?i:next())}function identifier(i){for(;!token(peek());)next();return slice(i,position)}function compile(i){return dealloc(parse$1("",null,null,null,[""],i=alloc(i),0,[0],i))}function parse$1(i,o,s,_,$,et,tt,j,it){for(var st=0,ht=0,vt=tt,ft=0,pt=0,ct=0,yt=1,Et=1,Ot=1,Lt=0,Tt="",It=$,mt=et,Bt=_,nn=Tt;Et;)switch(ct=Lt,Lt=next()){case 40:if(ct!=108&&charat(nn,vt-1)==58){indexof(nn+=replace(delimit(Lt),"&","&\f"),"&\f")!=-1&&(Ot=-1);break}case 34:case 39:case 91:nn+=delimit(Lt);break;case 9:case 10:case 13:case 32:nn+=whitespace(ct);break;case 92:nn+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),o,s),it);break;default:nn+="/"}break;case 123*yt:j[st++]=strlen(nn)*Ot;case 125*yt:case 59:case 0:switch(Lt){case 0:case 125:Et=0;case 59+ht:pt>0&&strlen(nn)-vt&&append(pt>32?declaration(nn+";",_,s,vt-1):declaration(replace(nn," ","")+";",_,s,vt-2),it);break;case 59:nn+=";";default:if(append(Bt=ruleset(nn,o,s,st,ht,$,j,Tt,It=[],mt=[],vt),et),Lt===123)if(ht===0)parse$1(nn,o,Bt,Bt,It,et,vt,j,mt);else switch(ft===99&&charat(nn,3)===110?100:ft){case 100:case 109:case 115:parse$1(i,Bt,Bt,_&&append(ruleset(i,Bt,Bt,0,0,$,j,Tt,$,It=[],vt),mt),$,mt,vt,j,_?It:mt);break;default:parse$1(nn,Bt,Bt,Bt,[""],mt,0,j,mt)}}st=ht=pt=0,yt=Ot=1,Tt=nn="",vt=tt;break;case 58:vt=1+strlen(nn),pt=ct;default:if(yt<1){if(Lt==123)--yt;else if(Lt==125&&yt++==0&&prev()==125)continue}switch(nn+=from(Lt),Lt*yt){case 38:Ot=ht>0?1:(nn+="\f",-1);break;case 44:j[st++]=(strlen(nn)-1)*Ot,Ot=1;break;case 64:peek()===45&&(nn+=delimit(next())),ft=peek(),ht=vt=strlen(Tt=nn+=identifier(caret())),Lt++;break;case 45:ct===45&&strlen(nn)==2&&(yt=0)}}return et}function ruleset(i,o,s,_,$,et,tt,j,it,st,ht){for(var vt=$-1,ft=$===0?et:[""],pt=sizeof(ft),ct=0,yt=0,Et=0;ct<_;++ct)for(var Ot=0,Lt=substr(i,vt+1,vt=abs(yt=tt[ct])),Tt=i;Ot<pt;++Ot)(Tt=trim(yt>0?ft[Ot]+" "+Lt:replace(Lt,/&\f/g,ft[Ot])))&&(it[Et++]=Tt);return node(i,o,s,$===0?RULESET:j,it,st,ht)}function comment(i,o,s){return node(i,o,s,COMMENT,from(char()),substr(i,2,-2),0)}function declaration(i,o,s,_){return node(i,o,s,DECLARATION,substr(i,0,_),substr(i,_+1,-1),_)}function serialize(i,o){for(var s="",_=sizeof(i),$=0;$<_;$++)s+=o(i[$],$,i,o)||"";return s}function stringify(i,o,s,_){switch(i.type){case IMPORT:case DECLARATION:return i.return=i.return||i.value;case COMMENT:return"";case KEYFRAMES:return i.return=i.value+"{"+serialize(i.children,_)+"}";case RULESET:i.value=i.props.join(",")}return strlen(s=serialize(i.children,_))?i.return=i.value+"{"+s+"}":""}function middleware(i){var o=sizeof(i);return function(s,_,$,et){for(var tt="",j=0;j<o;j++)tt+=i[j](s,_,$,et)||"";return tt}}function rulesheet(i){return function(o){o.root||(o=o.return)&&i(o)}}var identifierWithPointTracking=function i(o,s,_){for(var $=0,et=0;$=et,et=peek(),$===38&&et===12&&(s[_]=1),!token(et);)next();return slice(o,position)},toRules=function i(o,s){var _=-1,$=44;do switch(token($)){case 0:$===38&&peek()===12&&(s[_]=1),o[_]+=identifierWithPointTracking(position-1,s,_);break;case 2:o[_]+=delimit($);break;case 4:if($===44){o[++_]=peek()===58?"&\f":"",s[_]=o[_].length;break}default:o[_]+=from($)}while($=next());return o},getRules=function i(o,s){return dealloc(toRules(alloc(o),s))},fixedElements=new WeakMap,compat=function i(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var s=o.value,_=o.parent,$=o.column===_.column&&o.line===_.line;_.type!=="rule";)if(_=_.parent,!_)return;if(!(o.props.length===1&&s.charCodeAt(0)!==58&&!fixedElements.get(_))&&!$){fixedElements.set(o,!0);for(var et=[],tt=getRules(s,et),j=_.props,it=0,st=0;it<tt.length;it++)for(var ht=0;ht<j.length;ht++,st++)o.props[st]=et[it]?tt[it].replace(/&\f/g,j[ht]):j[ht]+" "+tt[it]}}},removeLabel=function i(o){if(o.type==="decl"){var s=o.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(o.return="",o.value="")}};function prefix(i,o){switch(hash(i,o)){case 5103:return WEBKIT+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+i+MOZ+i+MS+i+i;case 6828:case 4268:return WEBKIT+i+MS+i+i;case 6165:return WEBKIT+i+MS+"flex-"+i+i;case 5187:return WEBKIT+i+replace(i,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+i;case 5443:return WEBKIT+i+MS+"flex-item-"+replace(i,/flex-|-self/,"")+i;case 4675:return WEBKIT+i+MS+"flex-line-pack"+replace(i,/align-content|flex-|-self/,"")+i;case 5548:return WEBKIT+i+MS+replace(i,"shrink","negative")+i;case 5292:return WEBKIT+i+MS+replace(i,"basis","preferred-size")+i;case 6060:return WEBKIT+"box-"+replace(i,"-grow","")+WEBKIT+i+MS+replace(i,"grow","positive")+i;case 4554:return WEBKIT+replace(i,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+i;case 6187:return replace(replace(replace(i,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),i,"")+i;case 5495:case 3959:return replace(i,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(i,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+i+i;case 4095:case 3583:case 4068:case 2532:return replace(i,/(.+)-inline(.+)/,WEBKIT+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(i)-1-o>6)switch(charat(i,o+1)){case 109:if(charat(i,o+4)!==45)break;case 102:return replace(i,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(i,o+3)==108?"$3":"$2-$3"))+i;case 115:return~indexof(i,"stretch")?prefix(replace(i,"stretch","fill-available"),o)+i:i}break;case 4949:if(charat(i,o+1)!==115)break;case 6444:switch(charat(i,strlen(i)-3-(~indexof(i,"!important")&&10))){case 107:return replace(i,":",":"+WEBKIT)+i;case 101:return replace(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(i,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+i}break;case 5936:switch(charat(i,o+11)){case 114:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return WEBKIT+i+MS+i+i}return i}var prefixer=function i(o,s,_,$){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix(o.value,o.length);break;case KEYFRAMES:return serialize([copy(o,{value:replace(o.value,"@","@"+WEBKIT)})],$);case RULESET:if(o.length)return combine(o.props,function(et){switch(match(et,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(o,{props:[replace(et,/:(read-\w+)/,":"+MOZ+"$1")]})],$);case"::placeholder":return serialize([copy(o,{props:[replace(et,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(o,{props:[replace(et,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(o,{props:[replace(et,/:(plac\w+)/,MS+"input-$1")]})],$)}return""})}},defaultStylisPlugins=[prefixer],createCache=function i(o){var s=o.key;if(s==="css"){var _=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(_,function(yt){var Et=yt.getAttribute("data-emotion");Et.indexOf(" ")!==-1&&(document.head.appendChild(yt),yt.setAttribute("data-s",""))})}var $=o.stylisPlugins||defaultStylisPlugins,et={},tt,j=[];tt=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(yt){for(var Et=yt.getAttribute("data-emotion").split(" "),Ot=1;Ot<Et.length;Ot++)et[Et[Ot]]=!0;j.push(yt)});var it,st=[compat,removeLabel];{var ht,vt=[stringify,rulesheet(function(yt){ht.insert(yt)})],ft=middleware(st.concat($,vt)),pt=function(Et){return serialize(compile(Et),ft)};it=function(Et,Ot,Lt,Tt){ht=Lt,pt(Et?Et+"{"+Ot.styles+"}":Ot.styles),Tt&&(ct.inserted[Ot.name]=!0)}}var ct={key:s,sheet:new StyleSheet({key:s,container:tt,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:et,registered:{},insert:it};return ct.sheet.hydrate(j),ct},reactIsExports={},reactIs$1={get exports(){return reactIsExports},set exports(i){reactIsExports=i}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(i){if(typeof i=="object"&&i!==null){var o=i.$$typeof;switch(o){case c:switch(i=i.type,i){case l:case m:case e:case g:case f:case p:return i;default:switch(i=i&&i.$$typeof,i){case k:case n:case t:case r:case h:return i;default:return o}}case d:return o}}}function A(i){return z(i)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(i){return A(i)||z(i)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(i){return z(i)===k};reactIs_production_min.isContextProvider=function(i){return z(i)===h};reactIs_production_min.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===c};reactIs_production_min.isForwardRef=function(i){return z(i)===n};reactIs_production_min.isFragment=function(i){return z(i)===e};reactIs_production_min.isLazy=function(i){return z(i)===t};reactIs_production_min.isMemo=function(i){return z(i)===r};reactIs_production_min.isPortal=function(i){return z(i)===d};reactIs_production_min.isProfiler=function(i){return z(i)===g};reactIs_production_min.isStrictMode=function(i){return z(i)===f};reactIs_production_min.isSuspense=function(i){return z(i)===p};reactIs_production_min.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===e||i===m||i===g||i===f||i===p||i===q||typeof i=="object"&&i!==null&&(i.$$typeof===t||i.$$typeof===r||i.$$typeof===h||i.$$typeof===k||i.$$typeof===n||i.$$typeof===w||i.$$typeof===x||i.$$typeof===y||i.$$typeof===v)};reactIs_production_min.typeOf=z;(function(i){i.exports=reactIs_production_min})(reactIs$1);var reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser$1=!0,registerStyles=function i(o,s,_){var $=o.key+"-"+s.name;(_===!1||isBrowser$1===!1)&&o.registered[$]===void 0&&(o.registered[$]=s.styles)},insertStyles=function i(o,s,_){registerStyles(o,s,_);var $=o.key+"-"+s.name;if(o.inserted[s.name]===void 0){var et=s;do o.insert(s===et?"."+$:"",et,o.sheet,!0),et=et.next;while(et!==void 0)}};function murmur2(i){for(var o=0,s,_=0,$=i.length;$>=4;++_,$-=4)s=i.charCodeAt(_)&255|(i.charCodeAt(++_)&255)<<8|(i.charCodeAt(++_)&255)<<16|(i.charCodeAt(++_)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,o=(s&65535)*1540483477+((s>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch($){case 3:o^=(i.charCodeAt(_+2)&255)<<16;case 2:o^=(i.charCodeAt(_+1)&255)<<8;case 1:o^=i.charCodeAt(_)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function i(o){return o.charCodeAt(1)===45},isProcessableValue=function i(o){return o!=null&&typeof o!="boolean"},processStyleName=memoize$1(function(i){return isCustomProperty(i)?i:i.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function i(o,s){switch(o){case"animation":case"animationName":if(typeof s=="string")return s.replace(animationRegex,function(_,$,et){return cursor={name:$,styles:et,next:cursor},$})}return unitlessKeys[o]!==1&&!isCustomProperty(o)&&typeof s=="number"&&s!==0?s+"px":s},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(i,o,s){if(s==null)return"";if(s.__emotion_styles!==void 0)return s;switch(typeof s){case"boolean":return"";case"object":{if(s.anim===1)return cursor={name:s.name,styles:s.styles,next:cursor},s.name;if(s.styles!==void 0){var _=s.next;if(_!==void 0)for(;_!==void 0;)cursor={name:_.name,styles:_.styles,next:cursor},_=_.next;var $=s.styles+";";return $}return createStringFromObject(i,o,s)}case"function":{if(i!==void 0){var et=cursor,tt=s(i);return cursor=et,handleInterpolation(i,o,tt)}break}}if(o==null)return s;var j=o[s];return j!==void 0?j:s}function createStringFromObject(i,o,s){var _="";if(Array.isArray(s))for(var $=0;$<s.length;$++)_+=handleInterpolation(i,o,s[$])+";";else for(var et in s){var tt=s[et];if(typeof tt!="object")o!=null&&o[tt]!==void 0?_+=et+"{"+o[tt]+"}":isProcessableValue(tt)&&(_+=processStyleName(et)+":"+processStyleValue(et,tt)+";");else if(Array.isArray(tt)&&typeof tt[0]=="string"&&(o==null||o[tt[0]]===void 0))for(var j=0;j<tt.length;j++)isProcessableValue(tt[j])&&(_+=processStyleName(et)+":"+processStyleValue(et,tt[j])+";");else{var it=handleInterpolation(i,o,tt);switch(et){case"animation":case"animationName":{_+=processStyleName(et)+":"+it+";";break}default:_+=et+"{"+it+"}"}}}return _}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function i(o,s,_){if(o.length===1&&typeof o[0]=="object"&&o[0]!==null&&o[0].styles!==void 0)return o[0];var $=!0,et="";cursor=void 0;var tt=o[0];tt==null||tt.raw===void 0?($=!1,et+=handleInterpolation(_,s,tt)):et+=tt[0];for(var j=1;j<o.length;j++)et+=handleInterpolation(_,s,o[j]),$&&(et+=tt[j]);labelPattern.lastIndex=0;for(var it="",st;(st=labelPattern.exec(et))!==null;)it+="-"+st[1];var ht=murmur2(et)+it;return{name:ht,styles:et,next:cursor}},useInsertionEffect=React$2["useInsertionEffect"]?React$2["useInsertionEffect"]:!1,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function i(o){return reactExports.forwardRef(function(s,_){var $=reactExports.useContext(EmotionCacheContext);return o(s,$,_)})},ThemeContext$2=reactExports.createContext({}),Global=withEmotionCache(function(i,o){var s=i.styles,_=serializeStyles([s],void 0,reactExports.useContext(ThemeContext$2)),$=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var et=o.key+"-global",tt=new o.sheet.constructor({key:et,nonce:o.sheet.nonce,container:o.sheet.container,speedy:o.sheet.isSpeedy}),j=!1,it=document.querySelector('style[data-emotion="'+et+" "+_.name+'"]');return o.sheet.tags.length&&(tt.before=o.sheet.tags[0]),it!==null&&(j=!0,it.setAttribute("data-emotion",et),tt.hydrate([it])),$.current=[tt,j],function(){tt.flush()}},[o]),useInsertionEffectWithLayoutFallback(function(){var et=$.current,tt=et[0],j=et[1];if(j){et[1]=!1;return}if(_.next!==void 0&&insertStyles(o,_.next,!0),tt.tags.length){var it=tt.tags[tt.tags.length-1].nextElementSibling;tt.before=it,tt.flush()}o.insert("",_,tt,!1)},[o,_.name]),null});function isEmpty(i){return i==null||Object.keys(i).length===0}function GlobalStyles$1(i){const{styles:o,defaultTheme:s={}}=i;return jsx(Global,{styles:typeof o=="function"?$=>o(isEmpty($)?s:$):o})}function merge$1(i,o){return o?deepmerge(i,o,{clone:!1}):i}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${values[i]}px)`};function handleBreakpoints(i,o,s){const _=i.theme||{};if(Array.isArray(o)){const et=_.breakpoints||defaultBreakpoints;return o.reduce((tt,j,it)=>(tt[et.up(et.keys[it])]=s(o[it]),tt),{})}if(typeof o=="object"){const et=_.breakpoints||defaultBreakpoints;return Object.keys(o).reduce((tt,j)=>{if(Object.keys(et.values||values).indexOf(j)!==-1){const it=et.up(j);tt[it]=s(o[j],j)}else{const it=j;tt[it]=o[it]}return tt},{})}return s(o)}function createEmptyBreakpointObject(i={}){var o;return((o=i.keys)==null?void 0:o.reduce((_,$)=>{const et=i.up($);return _[et]={},_},{}))||{}}function removeUnusedBreakpoints(i,o){return i.reduce((s,_)=>{const $=s[_];return(!$||Object.keys($).length===0)&&delete s[_],s},o)}function getPath(i,o,s=!0){if(!o||typeof o!="string")return null;if(i&&i.vars&&s){const _=`vars.${o}`.split(".").reduce(($,et)=>$&&$[et]?$[et]:null,i);if(_!=null)return _}return o.split(".").reduce((_,$)=>_&&_[$]!=null?_[$]:null,i)}function getStyleValue(i,o,s,_=s){let $;return typeof i=="function"?$=i(s):Array.isArray(i)?$=i[s]||_:$=getPath(i,s)||_,o&&($=o($,_,i)),$}function style$1(i){const{prop:o,cssProperty:s=i.prop,themeKey:_,transform:$}=i,et=tt=>{if(tt[o]==null)return null;const j=tt[o],it=tt.theme,st=getPath(it,_)||{};return handleBreakpoints(tt,j,vt=>{let ft=getStyleValue(st,$,vt);return vt===ft&&typeof vt=="string"&&(ft=getStyleValue(st,$,`${o}${vt==="default"?"":capitalize(vt)}`,vt)),s===!1?ft:{[s]:ft}})};return et.propTypes={},et.filterProps=[o],et}function compose(...i){const o=i.reduce((_,$)=>($.filterProps.forEach(et=>{_[et]=$}),_),{}),s=_=>Object.keys(_).reduce(($,et)=>o[et]?merge$1($,o[et](_)):$,{});return s.propTypes={},s.filterProps=i.reduce((_,$)=>_.concat($.filterProps),[]),s}function memoize(i){const o={};return s=>(o[s]===void 0&&(o[s]=i(s)),o[s])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(i=>{if(i.length>2)if(aliases[i])i=aliases[i];else return[i];const[o,s]=i.split(""),_=properties[o],$=directions[s]||"";return Array.isArray($)?$.map(et=>_+et):[_+$]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(i,o,s,_){var $;const et=($=getPath(i,o,!1))!=null?$:s;return typeof et=="number"?tt=>typeof tt=="string"?tt:et*tt:Array.isArray(et)?tt=>typeof tt=="string"?tt:et[tt]:typeof et=="function"?et:()=>{}}function createUnarySpacing(i){return createUnaryUnit(i,"spacing",8)}function getValue(i,o){if(typeof o=="string"||o==null)return o;const s=Math.abs(o),_=i(s);return o>=0?_:typeof _=="number"?-_:`-${_}`}function getStyleFromPropValue(i,o){return s=>i.reduce((_,$)=>(_[$]=getValue(o,s),_),{})}function resolveCssProperty(i,o,s,_){if(o.indexOf(s)===-1)return null;const $=getCssProperties(s),et=getStyleFromPropValue($,_),tt=i[s];return handleBreakpoints(i,tt,et)}function style(i,o){const s=createUnarySpacing(i.theme);return Object.keys(i).map(_=>resolveCssProperty(i,o,_,s)).reduce(merge$1,{})}function margin(i){return style(i,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(i){return style(i,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function borderTransform(i){return typeof i!="number"?i:`${i}px solid`}const border=style$1({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$1({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$1({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$1({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$1({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$1({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$1({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$1({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$1({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$1({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const o=createUnaryUnit(i.theme,"shape.borderRadius",4),s=_=>({borderRadius:getValue(o,_)});return handleBreakpoints(i,i.borderRadius,s)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=i=>{if(i.gap!==void 0&&i.gap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_=>({gap:getValue(o,_)});return handleBreakpoints(i,i.gap,s)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_=>({columnGap:getValue(o,_)});return handleBreakpoints(i,i.columnGap,s)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_=>({rowGap:getValue(o,_)});return handleBreakpoints(i,i.rowGap,s)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(i,o){return o==="grey"?o:i}const color$1=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor);function sizingTransform(i){return i<=1&&i!==0?`${i*100}%`:i}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const o=s=>{var _,$,et;return{maxWidth:((_=i.theme)==null||($=_.breakpoints)==null||(et=$.values)==null?void 0:et[s])||values[s]||sizingTransform(s)}};return handleBreakpoints(i,i.maxWidth,o)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...i){const o=i.reduce((_,$)=>_.concat(Object.keys($)),[]),s=new Set(o);return i.every(_=>s.size===Object.keys(_).length)}function callIfFn(i,o){return typeof i=="function"?i(o):i}function unstable_createStyleFunctionSx(){function i(s,_,$,et){const tt={[s]:_,theme:$},j=et[s];if(!j)return{[s]:_};const{cssProperty:it=s,themeKey:st,transform:ht,style:vt}=j;if(_==null)return null;const ft=getPath($,st)||{};return vt?vt(tt):handleBreakpoints(tt,_,ct=>{let yt=getStyleValue(ft,ht,ct);return ct===yt&&typeof ct=="string"&&(yt=getStyleValue(ft,ht,`${s}${ct==="default"?"":capitalize(ct)}`,ct)),it===!1?yt:{[it]:yt}})}function o(s){var _;const{sx:$,theme:et={}}=s||{};if(!$)return null;const tt=(_=et.unstable_sxConfig)!=null?_:defaultSxConfig$1;function j(it){let st=it;if(typeof it=="function")st=it(et);else if(typeof it!="object")return it;if(!st)return null;const ht=createEmptyBreakpointObject(et.breakpoints),vt=Object.keys(ht);let ft=ht;return Object.keys(st).forEach(pt=>{const ct=callIfFn(st[pt],et);if(ct!=null)if(typeof ct=="object")if(tt[pt])ft=merge$1(ft,i(pt,ct,et,tt));else{const yt=handleBreakpoints({theme:et},ct,Et=>({[pt]:Et}));objectsHaveSameKeys(yt,ct)?ft[pt]=o({sx:ct,theme:et}):ft=merge$1(ft,yt)}else ft=merge$1(ft,i(pt,ct,et,tt))}),removeUnusedBreakpoints(vt,ft)}return Array.isArray($)?$.map(j):j($)}return o}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx;function _objectWithoutPropertiesLoose$1(i,o){if(i==null)return{};var s={},_=Object.keys(i),$,et;for(et=0;et<_.length;et++)$=_[et],!(o.indexOf($)>=0)&&(s[$]=i[$]);return s}const _excluded$5=["values","unit","step"],sortBreakpointsValues=i=>{const o=Object.keys(i).map(s=>({key:s,val:i[s]}))||[];return o.sort((s,_)=>s.val-_.val),o.reduce((s,_)=>_extends$1({},s,{[_.key]:_.val}),{})};function createBreakpoints(i){const{values:o={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:s="px",step:_=5}=i,$=_objectWithoutPropertiesLoose$1(i,_excluded$5),et=sortBreakpointsValues(o),tt=Object.keys(et);function j(ft){return`@media (min-width:${typeof o[ft]=="number"?o[ft]:ft}${s})`}function it(ft){return`@media (max-width:${(typeof o[ft]=="number"?o[ft]:ft)-_/100}${s})`}function st(ft,pt){const ct=tt.indexOf(pt);return`@media (min-width:${typeof o[ft]=="number"?o[ft]:ft}${s}) and (max-width:${(ct!==-1&&typeof o[tt[ct]]=="number"?o[tt[ct]]:pt)-_/100}${s})`}function ht(ft){return tt.indexOf(ft)+1<tt.length?st(ft,tt[tt.indexOf(ft)+1]):j(ft)}function vt(ft){const pt=tt.indexOf(ft);return pt===0?j(tt[1]):pt===tt.length-1?it(tt[pt]):st(ft,tt[tt.indexOf(ft)+1]).replace("@media","@media not all and")}return _extends$1({keys:tt,values:et,up:j,down:it,between:st,only:ht,not:vt,unit:s},$)}const shape={borderRadius:4},shape$1=shape;function createSpacing(i=8){if(i.mui)return i;const o=createUnarySpacing({spacing:i}),s=(..._)=>(_.length===0?[1]:_).map(et=>{const tt=o(et);return typeof tt=="number"?`${tt}px`:tt}).join(" ");return s.mui=!0,s}const _excluded$4=["breakpoints","palette","spacing","shape"];function createTheme$1(i={},...o){const{breakpoints:s={},palette:_={},spacing:$,shape:et={}}=i,tt=_objectWithoutPropertiesLoose$1(i,_excluded$4),j=createBreakpoints(s),it=createSpacing($);let st=deepmerge({breakpoints:j,direction:"ltr",components:{},palette:_extends$1({mode:"light"},_),spacing:it,shape:_extends$1({},shape$1,et)},tt);return st=o.reduce((ht,vt)=>deepmerge(ht,vt),st),st.unstable_sxConfig=_extends$1({},defaultSxConfig$1,tt==null?void 0:tt.unstable_sxConfig),st.unstable_sx=function(vt){return styleFunctionSx$1({sx:vt,theme:this})},st}const ThemeContext=reactExports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$2(){return reactExports.useContext(ThemeContext$1)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(i,o){return typeof o=="function"?o(i):_extends$1({},i,o)}function ThemeProvider$1(i){const{children:o,theme:s}=i,_=useTheme$2(),$=reactExports.useMemo(()=>{const et=_===null?s:mergeOuterLocalTheme(_,s);return et!=null&&(et[nested]=_!==null),et},[s,_]);return jsx(ThemeContext$1.Provider,{value:$,children:o})}function isObjectEmpty(i){return Object.keys(i).length===0}function useTheme$1(i=null){const o=useTheme$2();return!o||isObjectEmpty(o)?i:o}const systemDefaultTheme=createTheme$1();function useTheme(i=systemDefaultTheme){return useTheme$1(i)}function getThemeProps(i){const{theme:o,name:s,props:_}=i;return!o||!o.components||!o.components[s]||!o.components[s].defaultProps?_:resolveProps(o.components[s].defaultProps,_)}function useThemeProps$1({props:i,name:o,defaultTheme:s}){const _=useTheme(s);return getThemeProps({theme:_,name:o,props:i})}function clamp(i,o=0,s=1){return Math.min(Math.max(o,i),s)}function hexToRgb(i){i=i.slice(1);const o=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let s=i.match(o);return s&&s[0].length===1&&(s=s.map(_=>_+_)),s?`rgb${s.length===4?"a":""}(${s.map((_,$)=>$<3?parseInt(_,16):Math.round(parseInt(_,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(i){if(i.type)return i;if(i.charAt(0)==="#")return decomposeColor(hexToRgb(i));const o=i.indexOf("("),s=i.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(s)===-1)throw new Error(formatMuiErrorMessage(9,i));let _=i.substring(o+1,i.length-1),$;if(s==="color"){if(_=_.split(" "),$=_.shift(),_.length===4&&_[3].charAt(0)==="/"&&(_[3]=_[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf($)===-1)throw new Error(formatMuiErrorMessage(10,$))}else _=_.split(",");return _=_.map(et=>parseFloat(et)),{type:s,values:_,colorSpace:$}}function recomposeColor(i){const{type:o,colorSpace:s}=i;let{values:_}=i;return o.indexOf("rgb")!==-1?_=_.map(($,et)=>et<3?parseInt($,10):$):o.indexOf("hsl")!==-1&&(_[1]=`${_[1]}%`,_[2]=`${_[2]}%`),o.indexOf("color")!==-1?_=`${s} ${_.join(" ")}`:_=`${_.join(", ")}`,`${o}(${_})`}function hslToRgb(i){i=decomposeColor(i);const{values:o}=i,s=o[0],_=o[1]/100,$=o[2]/100,et=_*Math.min($,1-$),tt=(st,ht=(st+s/30)%12)=>$-et*Math.max(Math.min(ht-3,9-ht,1),-1);let j="rgb";const it=[Math.round(tt(0)*255),Math.round(tt(8)*255),Math.round(tt(4)*255)];return i.type==="hsla"&&(j+="a",it.push(o[3])),recomposeColor({type:j,values:it})}function getLuminance(i){i=decomposeColor(i);let o=i.type==="hsl"||i.type==="hsla"?decomposeColor(hslToRgb(i)).values:i.values;return o=o.map(s=>(i.type!=="color"&&(s/=255),s<=.03928?s/12.92:((s+.055)/1.055)**2.4)),Number((.2126*o[0]+.7152*o[1]+.0722*o[2]).toFixed(3))}function getContrastRatio(i,o){const s=getLuminance(i),_=getLuminance(o);return(Math.max(s,_)+.05)/(Math.min(s,_)+.05)}function darken(i,o){if(i=decomposeColor(i),o=clamp(o),i.type.indexOf("hsl")!==-1)i.values[2]*=1-o;else if(i.type.indexOf("rgb")!==-1||i.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)i.values[s]*=1-o;return recomposeColor(i)}function lighten(i,o){if(i=decomposeColor(i),o=clamp(o),i.type.indexOf("hsl")!==-1)i.values[2]+=(100-i.values[2])*o;else if(i.type.indexOf("rgb")!==-1)for(let s=0;s<3;s+=1)i.values[s]+=(255-i.values[s])*o;else if(i.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)i.values[s]+=(1-i.values[s])*o;return recomposeColor(i)}const EMPTY_THEME={};function InnerThemeProvider(i){const o=useTheme();return jsx(ThemeContext$2.Provider,{value:typeof o=="object"?o:EMPTY_THEME,children:i.children})}function ThemeProvider(i){const{children:o,theme:s}=i;return jsx(ThemeProvider$1,{theme:s,children:jsx(InnerThemeProvider,{children:o})})}function createMixins(i,o){return _extends$1({toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}}},o)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$3=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(i,o,s,_){const $=_.light||_,et=_.dark||_*1.5;i[o]||(i.hasOwnProperty(s)?i[o]=i[s]:o==="light"?i.light=lighten(i.main,$):o==="dark"&&(i.dark=darken(i.main,et)))}function getDefaultPrimary(i="light"){return i==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(i="light"){return i==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(i="light"){return i==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(i="light"){return i==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(i="light"){return i==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(i="light"){return i==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(i){const{mode:o="light",contrastThreshold:s=3,tonalOffset:_=.2}=i,$=_objectWithoutPropertiesLoose$1(i,_excluded$3),et=i.primary||getDefaultPrimary(o),tt=i.secondary||getDefaultSecondary(o),j=i.error||getDefaultError(o),it=i.info||getDefaultInfo(o),st=i.success||getDefaultSuccess(o),ht=i.warning||getDefaultWarning(o);function vt(yt){return getContrastRatio(yt,dark.text.primary)>=s?dark.text.primary:light.text.primary}const ft=({color:yt,name:Et,mainShade:Ot=500,lightShade:Lt=300,darkShade:Tt=700})=>{if(yt=_extends$1({},yt),!yt.main&&yt[Ot]&&(yt.main=yt[Ot]),!yt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Et?` (${Et})`:"",Ot));if(typeof yt.main!="string")throw new Error(formatMuiErrorMessage(12,Et?` (${Et})`:"",JSON.stringify(yt.main)));return addLightOrDark(yt,"light",Lt,_),addLightOrDark(yt,"dark",Tt,_),yt.contrastText||(yt.contrastText=vt(yt.main)),yt},pt={dark,light};return deepmerge(_extends$1({common:_extends$1({},common$1),mode:o,primary:ft({color:et,name:"primary"}),secondary:ft({color:tt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:ft({color:j,name:"error"}),warning:ft({color:ht,name:"warning"}),info:ft({color:it,name:"info"}),success:ft({color:st,name:"success"}),grey:grey$1,contrastThreshold:s,getContrastText:vt,augmentColor:ft,tonalOffset:_},pt[o]),$)}const _excluded$2=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$1(i){return Math.round(i*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(i,o){const s=typeof o=="function"?o(i):o,{fontFamily:_=defaultFontFamily,fontSize:$=14,fontWeightLight:et=300,fontWeightRegular:tt=400,fontWeightMedium:j=500,fontWeightBold:it=700,htmlFontSize:st=16,allVariants:ht,pxToRem:vt}=s,ft=_objectWithoutPropertiesLoose$1(s,_excluded$2),pt=$/14,ct=vt||(Ot=>`${Ot/st*pt}rem`),yt=(Ot,Lt,Tt,It,mt)=>_extends$1({fontFamily:_,fontWeight:Ot,fontSize:ct(Lt),lineHeight:Tt},_===defaultFontFamily?{letterSpacing:`${round$1(It/Lt)}em`}:{},mt,ht),Et={h1:yt(et,96,1.167,-1.5),h2:yt(et,60,1.2,-.5),h3:yt(tt,48,1.167,0),h4:yt(tt,34,1.235,.25),h5:yt(tt,24,1.334,0),h6:yt(j,20,1.6,.15),subtitle1:yt(tt,16,1.75,.15),subtitle2:yt(j,14,1.57,.1),body1:yt(tt,16,1.5,.15),body2:yt(tt,14,1.43,.15),button:yt(j,14,1.75,.4,caseAllCaps),caption:yt(tt,12,1.66,.4),overline:yt(tt,12,2.66,1,caseAllCaps)};return deepmerge(_extends$1({htmlFontSize:st,pxToRem:ct,fontFamily:_,fontSize:$,fontWeightLight:et,fontWeightRegular:tt,fontWeightMedium:j,fontWeightBold:it},Et),ft,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],shadows$1=shadows,_excluded$1=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(i){return`${Math.round(i)}ms`}function getAutoHeightDuration(i){if(!i)return 0;const o=i/36;return Math.round((4+15*o**.25+o/5)*10)}function createTransitions(i){const o=_extends$1({},easing,i.easing),s=_extends$1({},duration,i.duration);return _extends$1({getAutoHeightDuration,create:($=["all"],et={})=>{const{duration:tt=s.standard,easing:j=o.easeInOut,delay:it=0}=et;return _objectWithoutPropertiesLoose$1(et,_excluded$1),(Array.isArray($)?$:[$]).map(st=>`${st} ${typeof tt=="string"?tt:formatMs(tt)} ${j} ${typeof it=="string"?it:formatMs(it)}`).join(",")}},i,{easing:o,duration:s})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(i={},...o){const{mixins:s={},palette:_={},transitions:$={},typography:et={}}=i,tt=_objectWithoutPropertiesLoose$1(i,_excluded);if(i.vars)throw new Error(formatMuiErrorMessage(18));const j=createPalette(_),it=createTheme$1(i);let st=deepmerge(it,{mixins:createMixins(it.breakpoints,s),palette:j,shadows:shadows$1.slice(),typography:createTypography(j,et),transitions:createTransitions($),zIndex:_extends$1({},zIndex$1)});return st=deepmerge(st,tt),st=o.reduce((ht,vt)=>deepmerge(ht,vt),st),st.unstable_sxConfig=_extends$1({},defaultSxConfig$1,tt==null?void 0:tt.unstable_sxConfig),st.unstable_sx=function(vt){return styleFunctionSx$1({sx:vt,theme:this})},st}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1;function useThemeProps({props:i,name:o}){return useThemeProps$1({props:i,name:o,defaultTheme:defaultTheme$2})}function GlobalStyles(i){return jsx(GlobalStyles$1,_extends$1({},i,{defaultTheme:defaultTheme$2}))}const html=(i,o)=>_extends$1({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},o&&!i.vars&&{colorScheme:i.palette.mode}),body=i=>_extends$1({color:(i.vars||i).palette.text.primary},i.typography.body1,{backgroundColor:(i.vars||i).palette.background.default,"@media print":{backgroundColor:(i.vars||i).palette.common.white}}),styles=(i,o=!1)=>{var s,_;const $={};o&&i.colorSchemes&&Object.entries(i.colorSchemes).forEach(([j,it])=>{var st;$[i.getColorSchemeSelector(j).replace(/\s*&/,"")]={colorScheme:(st=it.palette)==null?void 0:st.mode}});let et=_extends$1({html:html(i,o),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:i.typography.fontWeightBold},body:_extends$1({margin:0},body(i),{"&::backdrop":{backgroundColor:(i.vars||i).palette.background.default}})},$);const tt=(s=i.components)==null||(_=s.MuiCssBaseline)==null?void 0:_.styleOverrides;return tt&&(et=[et,tt]),et};function CssBaseline(i){const o=useThemeProps({props:i,name:"MuiCssBaseline"}),{children:s,enableColorScheme:_=!1}=o;return jsxs(reactExports.Fragment,{children:[jsx(GlobalStyles,{styles:$=>styles($,_)}),s]})}function _setPrototypeOf$1(i,o){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,$){return _.__proto__=$,_},_setPrototypeOf$1(i,o)}function _inheritsLoose(i,o){i.prototype=Object.create(o.prototype),i.prototype.constructor=i,_setPrototypeOf$1(i,o)}var __defProp2=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols2=Object.getOwnPropertySymbols,__hasOwnProp2=Object.prototype.hasOwnProperty,__propIsEnum2=Object.prototype.propertyIsEnumerable,__defNormalProp2=(i,o,s)=>o in i?__defProp2(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s,__spreadValues2=(i,o)=>{for(var s in o||(o={}))__hasOwnProp2.call(o,s)&&__defNormalProp2(i,s,o[s]);if(__getOwnPropSymbols2)for(var s of __getOwnPropSymbols2(o))__propIsEnum2.call(o,s)&&__defNormalProp2(i,s,o[s]);return i},__spreadProps=(i,o)=>__defProps(i,__getOwnPropDescs(o));const baseTheme=createTheme({typography:{fontFamily:"'Moderat', 'Inter', 'Source Sans Pro', sans-serif",h1:{fontStyle:"normal",fontWeight:"normal",fontSize:"2rem",lineHeight:"2.5rem",letterSpacing:0},h2:{fontStyle:"normal",fontWeight:"normal",fontSize:"1.5rem",lineHeight:"2.125rem",letterSpacing:"0.069rem",fontFeatureSettings:'"zero" on'},h3:{fontStyle:"normal",fontWeight:500,fontSize:"1.125rem",lineHeight:"1.688rem",letterSpacing:"0.069rem"},h4:{fontStyle:"normal",fontWeight:700,fontSize:"0.813rem",lineHeight:"1.375rem",letterSpacing:"0.069rem",textTransform:"uppercase"},h5:{fontStyle:"normal",fontWeight:700,fontSize:"0.813rem",lineHeight:"1.125rem",letterSpacing:"0.038rem",textTransform:"uppercase"},h6:{fontStyle:"normal",fontWeight:"normal",fontSize:"0.625rem",lineHeight:"0.938rem",letterSpacing:"0.063rem"},body1:{fontStyle:"normal",fontWeight:"normal",fontSize:"1rem",lineHeight:"1.688rem",letterSpacing:"0.063rem",fontFeatureSettings:'"zero" on'},body2:{fontStyle:"normal",fontWeight:"normal",fontSize:"1rem",lineHeight:"1.688rem",letterSpacing:"0.063rem",fontFeatureSettings:'"zero" on',fontVariantNumeric:"tabular-nums"},button:{fontWeight:500,fontSize:"0.875rem",lineHeight:"1.05rem",letterSpacing:"0.053.rem",textTransform:"uppercase"}}}),lightPalette={palette:{mode:"light",success:{main:"#34dea9",dark:"#2d8376"},info:{main:"#297ceb",dark:"#256faf",light:"#3BABFF"},error:{main:"#fd76a7",dark:"#7f5072"},warning:{main:"#ffb179",dark:"#94645f"},primary:{main:"#657197",light:"#BAC4E2",dark:"#3B4668"},secondary:{main:"#3babff",dark:"#76a7dc"},background:{default:"#FFFFFF",paper:"#F1F3F9"},common:{black:"#ffffff",white:"#000000"}}},darkPalette={palette:{mode:"dark",primary:{main:"#657197",dark:"#3B4668",light:"#BAC4E2",contrastText:"#ffffff"},secondary:{main:"#18d2ff",light:"#18d2ff",dark:"#256faf"},background:{default:"#2d3855",paper:"#2d3855"},common:{black:"#000000",white:"#ffffff"},text:{primary:"#bac4e2"},error:{main:"#ea719d",dark:"#7F5072"},warning:{main:"#a961e4",dark:"#564A94"},info:{main:"#20a0ff",dark:"#256FAF"},success:{main:"#2ec495",dark:"#2D8376"}}};function createComponents(i){const o={components:{MuiCssBaseline:{styleOverrides:{body:{"&::-webkit-scrollbar, & *::-webkit-scrollbar":{background:"transparent",width:"0.5rem",height:"0.5rem"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{background:i.palette.primary.light,borderRadius:"0.25rem"},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:i.palette.primary.light},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:i.palette.primary.light}}}},MuiLink:{styleOverrides:{root:{color:i.palette.secondary.main}}},MuiDialogActions:{styleOverrides:{root:{padding:baseTheme.spacing(3)}}},MuiInputLabel:{styleOverrides:{root:{color:i.palette.primary.light,"&.Mui-focused":{color:i.palette.secondary.main}},outlined:{borderRadius:4,padding:"0.125rem 0.375rem","&.Mui-focused":{backgroundColor:"#2d3855"}}}},MuiFilledInput:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,borderTop:"1px solid transparent",":before":{borderBottom:`1px dotted ${i.palette.primary.light}`},"&.Mui-focused":{background:i.palette.common.black,border:`1px solid ${i.palette.secondary.main}`,borderBottom:"none",borderTop:`1px solid ${i.palette.secondary.main}`},":after":{borderBottom:`1px solid ${i.palette.secondary.main}`}}}},MuiOutlinedInput:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottom:`1px dotted ${i.palette.primary.light}`,"&.Mui-focused":{border:`1px solid ${i.palette.secondary.main}`,backgroundColor:i.palette.common.black}},notchedOutline:{border:"transparent"},input:{"&:-webkit-autofill":{"-webkit-box-shadow":`0 0 0 100px ${i.palette.primary.dark} inset`,"-webkit-text-fill-color":i.palette.primary.light}}}},MuiFormHelperText:{styleOverrides:{root:{color:i.palette.error.main}}},MuiTooltip:{styleOverrides:{tooltip:{backgroundColor:"rgba(0, 0, 0, 0.87)",color:"white",padding:baseTheme.spacing(1.2)}}},MuiDialogTitle:{styleOverrides:{root:__spreadValues2({color:i.palette.common.white,fontStyle:"normal",fontWeight:500},baseTheme.typography.h3)}},MuiDialogContentText:{styleOverrides:{root:{color:i.palette.primary.light}}},MuiButtonBase:{defaultProps:{disableRipple:!0}},MuiButton:{styleOverrides:{root:{willChange:"background-color , color , border-color , box-shadow",transition:"background-color 200ms ease-in-out 0ms , color 200ms ease-in-out 0ms , border-color 200ms ease-in-out 0ms , box-shadow 200ms ease-in-out 0ms",borderRadius:40,boxShadow:`0 0 0 0rem ${i.palette.primary.main}`,"&.Mui-disabled":{color:i.palette.primary.main}},sizeSmall:{height:"1.25rem",fontWeight:500,fontSize:"0.688rem",lineHeight:"0.825rem",letterSpacing:"0.047rem"},sizeMedium:{height:"1.813rem",fontWeight:500},sizeLarge:{height:"2.563rem",fontWeight:500,fontSize:"0.875rem",lineHeight:"1.05rem",letterSpacing:"0.053rem"},containedPrimary:{background:i.palette.primary.light,color:i.palette.common.black,"@media(hover: hover)":{"&:hover":{boxShadow:`0 0 0 0.4rem ${i.palette.primary.light}`,background:i.palette.primary.light}}},containedSecondary:{color:i.palette.common.black,"@media(hover: hover)":{"&:hover":{boxShadow:`0 0 0 0.4rem ${i.palette.secondary.main}`,background:i.palette.secondary.main}}},outlinedPrimary:{color:i.palette.primary.light}}},MuiDialog:{styleOverrides:{paper:{background:i.palette.background.paper}}},MuiNativeSelect:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,borderTop:"1px solid transparent"},icon:{color:i.palette.primary.light}}},MuiSelect:{styleOverrides:{icon:{color:i.palette.primary.light}}},MuiSnackbarContent:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,color:i.palette.primary.light}}},MuiSwitch:{styleOverrides:{switchBase:{"&.Mui-checked+.MuiSwitch-track":{backgroundColor:i.palette.common.black},"&.Mui-checked .MuiSwitch-thumb":{backgroundColor:i.palette.secondary.main}},thumb:{backgroundColor:i.palette.primary.light},track:{backgroundColor:i.palette.common.black}}}}};return createTheme(i,o)}const darkTheme=createComponents(createTheme(baseTheme,darkPalette)),lightTheme=createComponents(createTheme(baseTheme,lightPalette)),defaultTheme=darkTheme,FormantContext=reactExports.createContext(void 0);function FormantProvider({theme:i,children:o}){const s=createTheme(i==="dark"?darkTheme:i==="light"?lightTheme:defaultTheme),_={};return reactExports.createElement(ThemeProvider,{theme:s},reactExports.createElement(CssBaseline,null,reactExports.createElement(FormantContext.Provider,{value:_},o)))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(i,o){(function(){var s,_="4.17.21",$=200,et="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",tt="Expected a function",j="Invalid `variable` option passed into `_.template`",it="__lodash_hash_undefined__",st=500,ht="__lodash_placeholder__",vt=1,ft=2,pt=4,ct=1,yt=2,Et=1,Ot=2,Lt=4,Tt=8,It=16,mt=32,Bt=64,nn=128,sn=256,xt=512,St=30,Nt="...",Ct=800,Vt=16,Kt=1,Gt=2,Ut=3,Ht=1/0,qt=9007199254740991,Pt=17976931348623157e292,wt=0/0,$t=4294967295,Xt=$t-1,un=$t>>>1,dn=[["ary",nn],["bind",Et],["bindKey",Ot],["curry",Tt],["curryRight",It],["flip",xt],["partial",mt],["partialRight",Bt],["rearg",sn]],mn="[object Arguments]",an="[object Array]",en="[object AsyncFunction]",Mt="[object Boolean]",jt="[object Date]",Qt="[object DOMException]",gn="[object Error]",hn="[object Function]",An="[object GeneratorFunction]",Mn="[object Map]",Yn="[object Number]",Nr="[object Null]",ro="[object Object]",to="[object Promise]",zr="[object Proxy]",In="[object RegExp]",kn="[object Set]",Kn="[object String]",vr="[object Symbol]",yr="[object Undefined]",Wr="[object WeakMap]",Hr="[object WeakSet]",Lr="[object ArrayBuffer]",Ir="[object DataView]",jr="[object Float32Array]",Co="[object Float64Array]",Jo="[object Int8Array]",ps="[object Int16Array]",ds="[object Int32Array]",Ss="[object Uint8Array]",Al="[object Uint8ClampedArray]",qo="[object Uint16Array]",na="[object Uint32Array]",Gr=/\b__p \+= '';/g,bn=/\b(__p \+=) '' \+/g,En=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bn=/&(?:amp|lt|gt|quot|#39);/g,ur=/[&<>"']/g,pr=RegExp(Bn.source),Zr=RegExp(ur.source),Xr=/<%-([\s\S]+?)%>/g,qr=/<%([\s\S]+?)%>/g,Mr=/<%=([\s\S]+?)%>/g,Tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wo=/^\w*$/,Vn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sn=/[\\^$.*+?()[\]{}|]/g,Cn=RegExp(Sn.source),Hn=/^\s+/,Jn=/\s/,ir=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gr=/\{\n\/\* \[wrapped with (.+)\] \*/,_r=/,? & /,fr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xr=/[()=,{}\[\]\/\s]/,Yr=/\\(\\)?/g,po=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,io=/\w*$/,ko=/^[-+]0x[0-9a-f]+$/i,Do=/^0b[01]+$/i,Lo=/^\[object .+?Constructor\]$/,zo=/^0o[0-7]+$/i,ts=/^(?:0|[1-9]\d*)$/,ms=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Eo=/($^)/,Rs=/['\n\r\u2028\u2029\\]/g,As="\\ud800-\\udfff",Su="\\u0300-\\u036f",cu="\\ufe20-\\ufe2f",$r="\\u20d0-\\u20ff",xa=Su+cu+$r,Gs="\\u2700-\\u27bf",hu="a-z\\xdf-\\xf6\\xf8-\\xff",ru="\\xac\\xb1\\xd7\\xf7",Au="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",El="\\u2000-\\u206f",nm=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tp="A-Z\\xc0-\\xd6\\xd8-\\xde",wo="\\ufe0e\\ufe0f",as=ru+Au+El+nm,us="[']",Eu="["+As+"]",np="["+as+"]",rs="["+xa+"]",Uu="\\d+",zu="["+Gs+"]",fu="["+hu+"]",Bl="[^"+As+as+Uu+Gs+hu+tp+"]",ys="\\ud83c[\\udffb-\\udfff]",Cm="(?:"+rs+"|"+ys+")",Us="[^"+As+"]",Vu="(?:\\ud83c[\\udde6-\\uddff]){2}",Qs="[\\ud800-\\udbff][\\udc00-\\udfff]",Wu="["+tp+"]",rp="\\u200d",jp="(?:"+fu+"|"+Bl+")",ga="(?:"+Wu+"|"+Bl+")",Xl="(?:"+us+"(?:d|ll|m|re|s|t|ve))?",Il="(?:"+us+"(?:D|LL|M|RE|S|T|VE))?",_s=Cm+"?",zs="["+wo+"]?",Fp="(?:"+rp+"(?:"+[Us,Vu,Qs].join("|")+")"+zs+_s+")*",ip="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",on=zs+_s+Fp,_n="(?:"+[zu,Vu,Qs].join("|")+")"+on,Rn="(?:"+[Us+rs+"?",rs,Vu,Qs,Eu].join("|")+")",Nn=RegExp(us,"g"),rr=RegExp(rs,"g"),Ln=RegExp(ys+"(?="+ys+")|"+Rn+on,"g"),Xn=RegExp([Wu+"?"+fu+"+"+Xl+"(?="+[np,Wu,"$"].join("|")+")",ga+"+"+Il+"(?="+[np,Wu+jp,"$"].join("|")+")",Wu+"?"+jp+"+"+Xl,Wu+"+"+Il,zt,ip,Uu,_n].join("|"),"g"),Er=RegExp("["+rp+As+xa+wo+"]"),Cr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jo=-1,bo={};bo[jr]=bo[Co]=bo[Jo]=bo[ps]=bo[ds]=bo[Ss]=bo[Al]=bo[qo]=bo[na]=!0,bo[mn]=bo[an]=bo[Lr]=bo[Mt]=bo[Ir]=bo[jt]=bo[gn]=bo[hn]=bo[Mn]=bo[Yn]=bo[ro]=bo[In]=bo[kn]=bo[Kn]=bo[Wr]=!1;var Mo={};Mo[mn]=Mo[an]=Mo[Lr]=Mo[Ir]=Mo[Mt]=Mo[jt]=Mo[jr]=Mo[Co]=Mo[Jo]=Mo[ps]=Mo[ds]=Mo[Mn]=Mo[Yn]=Mo[ro]=Mo[In]=Mo[kn]=Mo[Kn]=Mo[vr]=Mo[Ss]=Mo[Al]=Mo[qo]=Mo[na]=!0,Mo[gn]=Mo[hn]=Mo[Wr]=!1;var Ko={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ns={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Io={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iu=parseFloat,Rm=parseInt,Gu=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,e_=typeof self=="object"&&self&&self.Object===Object&&self,Tl=Gu||e_||Function("return this")(),Ey=o&&!o.nodeType&&o,_p=Ey&&!0&&i&&!i.nodeType&&i,op=_p&&_p.exports===Ey,t_=op&&Gu.process,du=function(){try{var Rr=_p&&_p.require&&_p.require("util").types;return Rr||t_&&t_.binding&&t_.binding("util")}catch{}}(),sv=du&&du.isArrayBuffer,n_=du&&du.isDate,av=du&&du.isMap,r_=du&&du.isRegExp,i_=du&&du.isSet,rm=du&&du.isTypedArray;function gu(Rr,so,Kr){switch(Kr.length){case 0:return Rr.call(so);case 1:return Rr.call(so,Kr[0]);case 2:return Rr.call(so,Kr[0],Kr[1]);case 3:return Rr.call(so,Kr[0],Kr[1],Kr[2])}return Rr.apply(so,Kr)}function lv(Rr,so,Kr,Uo){for(var gs=-1,Fs=Rr==null?0:Rr.length;++gs<Fs;){var Ml=Rr[gs];so(Uo,Ml,Kr(Ml),Rr)}return Uo}function pu(Rr,so){for(var Kr=-1,Uo=Rr==null?0:Rr.length;++Kr<Uo&&so(Rr[Kr],Kr,Rr)!==!1;);return Rr}function uv(Rr,so){for(var Kr=Rr==null?0:Rr.length;Kr--&&so(Rr[Kr],Kr,Rr)!==!1;);return Rr}function sp(Rr,so){for(var Kr=-1,Uo=Rr==null?0:Rr.length;++Kr<Uo;)if(!so(Rr[Kr],Kr,Rr))return!1;return!0}function bs(Rr,so){for(var Kr=-1,Uo=Rr==null?0:Rr.length,gs=0,Fs=[];++Kr<Uo;){var Ml=Rr[Kr];so(Ml,Kr,Rr)&&(Fs[gs++]=Ml)}return Fs}function im(Rr,so){var Kr=Rr==null?0:Rr.length;return!!Kr&&lp(Rr,so,0)>-1}function $m(Rr,so,Kr){for(var Uo=-1,gs=Rr==null?0:Rr.length;++Uo<gs;)if(Kr(so,Rr[Uo]))return!0;return!1}function _a(Rr,so){for(var Kr=-1,Uo=Rr==null?0:Rr.length,gs=Array(Uo);++Kr<Uo;)gs[Kr]=so(Rr[Kr],Kr,Rr);return gs}function ap(Rr,so){for(var Kr=-1,Uo=so.length,gs=Rr.length;++Kr<Uo;)Rr[gs+Kr]=so[Kr];return Rr}function o_(Rr,so,Kr,Uo){var gs=-1,Fs=Rr==null?0:Rr.length;for(Uo&&Fs&&(Kr=Rr[++gs]);++gs<Fs;)Kr=so(Kr,Rr[gs],gs,Rr);return Kr}function s_(Rr,so,Kr,Uo){var gs=Rr==null?0:Rr.length;for(Uo&&gs&&(Kr=Rr[--gs]);gs--;)Kr=so(Kr,Rr[gs],gs,Rr);return Kr}function Ty(Rr,so){for(var Kr=-1,Uo=Rr==null?0:Rr.length;++Kr<Uo;)if(so(Rr[Kr],Kr,Rr))return!0;return!1}var a_=qm("length");function Cy(Rr){return Rr.split("")}function om(Rr){return Rr.match(fr)||[]}function Im(Rr,so,Kr){var Uo;return Kr(Rr,function(gs,Fs,Ml){if(so(gs,Fs,Ml))return Uo=Fs,!1}),Uo}function Ts(Rr,so,Kr,Uo){for(var gs=Rr.length,Fs=Kr+(Uo?1:-1);Uo?Fs--:++Fs<gs;)if(so(Rr[Fs],Fs,Rr))return Fs;return-1}function lp(Rr,so,Kr){return so===so?a0(Rr,so,Kr):Ts(Rr,hv,Kr)}function cv(Rr,so,Kr,Uo){for(var gs=Kr-1,Fs=Rr.length;++gs<Fs;)if(Uo(Rr[gs],so))return gs;return-1}function hv(Rr){return Rr!==Rr}function fv(Rr,so){var Kr=Rr==null?0:Rr.length;return Kr?Ry(Rr,so)/Kr:wt}function qm(Rr){return function(so){return so==null?s:so[Rr]}}function l_(Rr){return function(so){return Rr==null?s:Rr[so]}}function dv(Rr,so,Kr,Uo,gs){return gs(Rr,function(Fs,Ml,Js){Kr=Uo?(Uo=!1,Fs):so(Kr,Fs,Ml,Js)}),Kr}function o0(Rr,so){var Kr=Rr.length;for(Rr.sort(so);Kr--;)Rr[Kr]=Rr[Kr].value;return Rr}function Ry(Rr,so){for(var Kr,Uo=-1,gs=Rr.length;++Uo<gs;){var Fs=so(Rr[Uo]);Fs!==s&&(Kr=Kr===s?Fs:Kr+Fs)}return Kr}function Zm(Rr,so){for(var Kr=-1,Uo=Array(Rr);++Kr<Rr;)Uo[Kr]=so(Kr);return Uo}function gv(Rr,so){return _a(so,function(Kr){return[Kr,Rr[Kr]]})}function Iy(Rr){return Rr&&Rr.slice(0,l0(Rr)+1).replace(Hn,"")}function mu(Rr){return function(so){return Rr(so)}}function u_(Rr,so){return _a(so,function(Kr){return Rr[Kr]})}function Oy(Rr,so){return Rr.has(so)}function Ym(Rr,so){for(var Kr=-1,Uo=Rr.length;++Kr<Uo&&lp(so,Rr[Kr],0)>-1;);return Kr}function Km(Rr,so){for(var Kr=Rr.length;Kr--&&lp(so,Rr[Kr],0)>-1;);return Kr}function s0(Rr,so){for(var Kr=Rr.length,Uo=0;Kr--;)Rr[Kr]===so&&++Uo;return Uo}var c_=l_(Ko),h_=l_(ns);function vp(Rr){return"\\"+Cl[Rr]}function pv(Rr,so){return Rr==null?s:Rr[so]}function Om(Rr){return Er.test(Rr)}function mv(Rr){return Cr.test(Rr)}function yv(Rr){for(var so,Kr=[];!(so=Rr.next()).done;)Kr.push(so.value);return Kr}function Xm(Rr){var so=-1,Kr=Array(Rr.size);return Rr.forEach(function(Uo,gs){Kr[++so]=[gs,Uo]}),Kr}function _v(Rr,so){return function(Kr){return Rr(so(Kr))}}function bp(Rr,so){for(var Kr=-1,Uo=Rr.length,gs=0,Fs=[];++Kr<Uo;){var Ml=Rr[Kr];(Ml===so||Ml===ht)&&(Rr[Kr]=ht,Fs[gs++]=Kr)}return Fs}function f_(Rr){var so=-1,Kr=Array(Rr.size);return Rr.forEach(function(Uo){Kr[++so]=Uo}),Kr}function My(Rr){var so=-1,Kr=Array(Rr.size);return Rr.forEach(function(Uo){Kr[++so]=[Uo,Uo]}),Kr}function a0(Rr,so,Kr){for(var Uo=Kr-1,gs=Rr.length;++Uo<gs;)if(Rr[Uo]===so)return Uo;return-1}function d_(Rr,so,Kr){for(var Uo=Kr+1;Uo--;)if(Rr[Uo]===so)return Uo;return Uo}function Qm(Rr){return Om(Rr)?p_(Rr):a_(Rr)}function Pu(Rr){return Om(Rr)?vv(Rr):Cy(Rr)}function l0(Rr){for(var so=Rr.length;so--&&Jn.test(Rr.charAt(so)););return so}var g_=l_(Io);function p_(Rr){for(var so=Ln.lastIndex=0;Ln.test(Rr);)++so;return so}function vv(Rr){return Rr.match(Ln)||[]}function bv(Rr){return Rr.match(Xn)||[]}var Jm=function Rr(so){so=so==null?Tl:ey.defaults(Tl.Object(),so,ey.pick(Tl,Qr));var Kr=so.Array,Uo=so.Date,gs=so.Error,Fs=so.Function,Ml=so.Math,Js=so.Object,m_=so.RegExp,u0=so.String,Tu=so.TypeError,wp=Kr.prototype,ty=Fs.prototype,sm=Js.prototype,Hu=so["__core-js_shared__"],Np=ty.toString,Hs=sm.hasOwnProperty,xp=0,Ms=function(){var gt=/[^.]+$/.exec(Hu&&Hu.keys&&Hu.keys.IE_PROTO||"");return gt?"Symbol(src)_1."+gt:""}(),$u=sm.toString,E1=Np.call(Js),c0=Tl._,ny=m_("^"+Np.call(Hs).replace(Sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y_=op?so.Buffer:s,Sp=so.Symbol,ry=so.Uint8Array,__=y_?y_.allocUnsafe:s,am=_v(Js.getPrototypeOf,Js),iy=Js.create,lm=sm.propertyIsEnumerable,Mm=wp.splice,Py=Sp?Sp.isConcatSpreadable:s,Up=Sp?Sp.iterator:s,yu=Sp?Sp.toStringTag:s,um=function(){try{var gt=Lu(Js,"defineProperty");return gt({},"",{}),gt}catch{}}(),Ro=so.clearTimeout!==Tl.clearTimeout&&so.clearTimeout,ku=Uo&&Uo.now!==Tl.Date.now&&Uo.now,wv=so.setTimeout!==Tl.setTimeout&&so.setTimeout,ky=Ml.ceil,oy=Ml.floor,up=Js.getOwnPropertySymbols,h0=y_?y_.isBuffer:s,Dy=so.isFinite,xv=wp.join,v_=_v(Js.keys,Js),Fl=Ml.max,Nl=Ml.min,zp=Uo.now,Du=so.parseInt,Ly=Ml.random,f0=wp.reverse,sy=Lu(so,"DataView"),Pm=Lu(so,"Map"),b_=Lu(so,"Promise"),Vp=Lu(so,"Set"),cm=Lu(so,"WeakMap"),Wp=Lu(Js,"create"),By=cm&&new cm,km={},w_=Jp(sy),d0=Jp(Pm),Sv=Jp(b_),Dm=Jp(Vp),g0=Jp(cm),Lm=Sp?Sp.prototype:s,Gp=Lm?Lm.valueOf:s,x_=Lm?Lm.toString:s;function zn(gt){if(Wl(gt)&&!ws(gt)&&!(gt instanceof Is)){if(gt instanceof Cu)return gt;if(Hs.call(gt,"__wrapped__"))return bm(gt)}return new Cu(gt)}var hm=function(){function gt(){}return function(Rt){if(!Dl(Rt))return{};if(iy)return iy(Rt);gt.prototype=Rt;var Jt=new gt;return gt.prototype=s,Jt}}();function $l(){}function Cu(gt,Rt){this.__wrapped__=gt,this.__actions__=[],this.__chain__=!!Rt,this.__index__=0,this.__values__=s}zn.templateSettings={escape:Xr,evaluate:qr,interpolate:Mr,variable:"",imports:{_:zn}},zn.prototype=$l.prototype,zn.prototype.constructor=zn,Cu.prototype=hm($l.prototype),Cu.prototype.constructor=Cu;function Is(gt){this.__wrapped__=gt,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$t,this.__views__=[]}function T1(){var gt=new Is(this.__wrapped__);return gt.__actions__=Ku(this.__actions__),gt.__dir__=this.__dir__,gt.__filtered__=this.__filtered__,gt.__iteratees__=Ku(this.__iteratees__),gt.__takeCount__=this.__takeCount__,gt.__views__=Ku(this.__views__),gt}function C1(){if(this.__filtered__){var gt=new Is(this);gt.__dir__=-1,gt.__filtered__=!0}else gt=this.clone(),gt.__dir__*=-1;return gt}function Hp(){var gt=this.__wrapped__.value(),Rt=this.__dir__,Jt=ws(gt),yn=Rt<0,Pn=Jt?gt.length:0,qn=Ww(0,Pn,this.__views__),cr=qn.start,wr=qn.end,Pr=wr-cr,uo=yn?wr:cr-1,ao=this.__iteratees__,fo=ao.length,Po=0,Vo=Nl(Pr,this.__takeCount__);if(!Jt||!yn&&Pn==Pr&&Vo==Pr)return M1(gt,this.__actions__);var Qo=[];e:for(;Pr--&&Po<Vo;){uo+=Rt;for(var xs=-1,cs=gt[uo];++xs<fo;){var Ps=ao[xs],Bs=Ps.iteratee,ju=Ps.type,Fu=Bs(cs);if(ju==Gt)cs=Fu;else if(!Fu){if(ju==Kt)continue e;break e}}Qo[Po++]=cs}return Qo}Is.prototype=hm($l.prototype),Is.prototype.constructor=Is;function $p(gt){var Rt=-1,Jt=gt==null?0:gt.length;for(this.clear();++Rt<Jt;){var yn=gt[Rt];this.set(yn[0],yn[1])}}function ay(){this.__data__=Wp?Wp(null):{},this.size=0}function Ap(gt){var Rt=this.has(gt)&&delete this.__data__[gt];return this.size-=Rt?1:0,Rt}function S_(gt){var Rt=this.__data__;if(Wp){var Jt=Rt[gt];return Jt===it?s:Jt}return Hs.call(Rt,gt)?Rt[gt]:s}function Oo(gt){var Rt=this.__data__;return Wp?Rt[gt]!==s:Hs.call(Rt,gt)}function p0(gt,Rt){var Jt=this.__data__;return this.size+=this.has(gt)?0:1,Jt[gt]=Wp&&Rt===s?it:Rt,this}$p.prototype.clear=ay,$p.prototype.delete=Ap,$p.prototype.get=S_,$p.prototype.has=Oo,$p.prototype.set=p0;function Ep(gt){var Rt=-1,Jt=gt==null?0:gt.length;for(this.clear();++Rt<Jt;){var yn=gt[Rt];this.set(yn[0],yn[1])}}function jy(){this.__data__=[],this.size=0}function fm(gt){var Rt=this.__data__,Jt=Bm(Rt,gt);if(Jt<0)return!1;var yn=Rt.length-1;return Jt==yn?Rt.pop():Mm.call(Rt,Jt,1),--this.size,!0}function m0(gt){var Rt=this.__data__,Jt=Bm(Rt,gt);return Jt<0?s:Rt[Jt][1]}function y0(gt){return Bm(this.__data__,gt)>-1}function Fy(gt,Rt){var Jt=this.__data__,yn=Bm(Jt,gt);return yn<0?(++this.size,Jt.push([gt,Rt])):Jt[yn][1]=Rt,this}Ep.prototype.clear=jy,Ep.prototype.delete=fm,Ep.prototype.get=m0,Ep.prototype.has=y0,Ep.prototype.set=Fy;function Tp(gt){var Rt=-1,Jt=gt==null?0:gt.length;for(this.clear();++Rt<Jt;){var yn=gt[Rt];this.set(yn[0],yn[1])}}function Av(){this.size=0,this.__data__={hash:new $p,map:new(Pm||Ep),string:new $p}}function _0(gt){var Rt=Bv(this,gt).delete(gt);return this.size-=Rt?1:0,Rt}function Ev(gt){return Bv(this,gt).get(gt)}function Ny(gt){return Bv(this,gt).has(gt)}function A_(gt,Rt){var Jt=Bv(this,gt),yn=Jt.size;return Jt.set(gt,Rt),this.size+=Jt.size==yn?0:1,this}Tp.prototype.clear=Av,Tp.prototype.delete=_0,Tp.prototype.get=Ev,Tp.prototype.has=Ny,Tp.prototype.set=A_;function cp(gt){var Rt=-1,Jt=gt==null?0:gt.length;for(this.__data__=new Tp;++Rt<Jt;)this.add(gt[Rt])}function E_(gt){return this.__data__.set(gt,it),this}function T_(gt){return this.__data__.has(gt)}cp.prototype.add=cp.prototype.push=E_,cp.prototype.has=T_;function qu(gt){var Rt=this.__data__=new Ep(gt);this.size=Rt.size}function v0(){this.__data__=new Ep,this.size=0}function Tv(gt){var Rt=this.__data__,Jt=Rt.delete(gt);return this.size=Rt.size,Jt}function b0(gt){return this.__data__.get(gt)}function w0(gt){return this.__data__.has(gt)}function Cv(gt,Rt){var Jt=this.__data__;if(Jt instanceof Ep){var yn=Jt.__data__;if(!Pm||yn.length<$-1)return yn.push([gt,Rt]),this.size=++Jt.size,this;Jt=this.__data__=new Tp(yn)}return Jt.set(gt,Rt),this.size=Jt.size,this}qu.prototype.clear=v0,qu.prototype.delete=Tv,qu.prototype.get=b0,qu.prototype.has=w0,qu.prototype.set=Cv;function Uy(gt,Rt){var Jt=ws(gt),yn=!Jt&&yy(gt),Pn=!Jt&&!yn&&_y(gt),qn=!Jt&&!yn&&!Pn&&q_(gt),cr=Jt||yn||Pn||qn,wr=cr?Zm(gt.length,u0):[],Pr=wr.length;for(var uo in gt)(Rt||Hs.call(gt,uo))&&!(cr&&(uo=="length"||Pn&&(uo=="offset"||uo=="parent")||qn&&(uo=="buffer"||uo=="byteLength"||uo=="byteOffset")||vm(uo,Pr)))&&wr.push(uo);return wr}function Rv(gt){var Rt=gt.length;return Rt?gt[Jl(0,Rt-1)]:s}function x0(gt,Rt){return N0(Ku(gt),kt(Rt,0,gt.length))}function S0(gt){return N0(Ku(gt))}function zy(gt,Rt,Jt){(Jt!==s&&!_h(gt[Rt],Jt)||Jt===s&&!(Rt in gt))&&lt(gt,Rt,Jt)}function ly(gt,Rt,Jt){var yn=gt[Rt];(!(Hs.call(gt,Rt)&&_h(yn,Jt))||Jt===s&&!(Rt in gt))&&lt(gt,Rt,Jt)}function Bm(gt,Rt){for(var Jt=gt.length;Jt--;)if(_h(gt[Jt][0],Rt))return Jt;return-1}function Vy(gt,Rt,Jt,yn){return vn(gt,function(Pn,qn,cr){Rt(yn,Pn,Jt(Pn),cr)}),yn}function dt(gt,Rt){return gt&&pm(Rt,tu(Rt),gt)}function ot(gt,Rt){return gt&&pm(Rt,Bu(Rt),gt)}function lt(gt,Rt,Jt){Rt=="__proto__"&&um?um(gt,Rt,{configurable:!0,enumerable:!0,value:Jt,writable:!0}):gt[Rt]=Jt}function bt(gt,Rt){for(var Jt=-1,yn=Rt.length,Pn=Kr(yn),qn=gt==null;++Jt<yn;)Pn[Jt]=qn?s:o1(gt,Rt[Jt]);return Pn}function kt(gt,Rt,Jt){return gt===gt&&(Jt!==s&&(gt=gt<=Jt?gt:Jt),Rt!==s&&(gt=gt>=Rt?gt:Rt)),gt}function Ft(gt,Rt,Jt,yn,Pn,qn){var cr,wr=Rt&vt,Pr=Rt&ft,uo=Rt&pt;if(Jt&&(cr=Pn?Jt(gt,yn,Pn,qn):Jt(gt)),cr!==s)return cr;if(!Dl(gt))return gt;var ao=ws(gt);if(ao){if(cr=gS(gt),!wr)return Ku(gt,cr)}else{var fo=lu(gt),Po=fo==hn||fo==An;if(_y(gt))return L1(gt,wr);if(fo==ro||fo==mn||Po&&!Pn){if(cr=Pr||Po?{}:D0(gt),!wr)return Pr?U1(gt,ot(cr,gt)):hS(gt,dt(cr,gt))}else{if(!Mo[fo])return Pn?gt:{};cr=pS(gt,fo,wr)}}qn||(qn=new qu);var Vo=qn.get(gt);if(Vo)return Vo;qn.set(gt,cr),kx(gt)?gt.forEach(function(cs){cr.add(Ft(cs,Rt,Jt,cs,gt,qn))}):$_(gt)&&gt.forEach(function(cs,Ps){cr.set(Ps,Ft(cs,Rt,Jt,Ps,gt,qn))});var Qo=uo?Pr?Lv:dy:Pr?Bu:tu,xs=ao?s:Qo(gt);return pu(xs||gt,function(cs,Ps){xs&&(Ps=cs,cs=gt[Ps]),ly(cr,Ps,Ft(cs,Rt,Jt,Ps,gt,qn))}),cr}function Yt(gt){var Rt=tu(gt);return function(Jt){return rn(Jt,gt,Rt)}}function rn(gt,Rt,Jt){var yn=Jt.length;if(gt==null)return!yn;for(gt=Js(gt);yn--;){var Pn=Jt[yn],qn=Rt[Pn],cr=gt[Pn];if(cr===s&&!(Pn in gt)||!qn(cr))return!1}return!0}function ln(gt,Rt,Jt){if(typeof gt!="function")throw new Tu(tt);return Hy(function(){gt.apply(s,Jt)},Rt)}function pn(gt,Rt,Jt,yn){var Pn=-1,qn=im,cr=!0,wr=gt.length,Pr=[],uo=Rt.length;if(!wr)return Pr;Jt&&(Rt=_a(Rt,mu(Jt))),yn?(qn=$m,cr=!1):Rt.length>=$&&(qn=Oy,cr=!1,Rt=new cp(Rt));e:for(;++Pn<wr;){var ao=gt[Pn],fo=Jt==null?ao:Jt(ao);if(ao=yn||ao!==0?ao:0,cr&&fo===fo){for(var Po=uo;Po--;)if(Rt[Po]===fo)continue e;Pr.push(ao)}else qn(Rt,fo,yn)||Pr.push(ao)}return Pr}var vn=mm(Gn),Tn=mm(or,!0);function Dn(gt,Rt){var Jt=!0;return vn(gt,function(yn,Pn,qn){return Jt=!!Rt(yn,Pn,qn),Jt}),Jt}function $n(gt,Rt,Jt){for(var yn=-1,Pn=gt.length;++yn<Pn;){var qn=gt[yn],cr=Rt(qn);if(cr!=null&&(wr===s?cr===cr&&!mp(cr):Jt(cr,wr)))var wr=cr,Pr=qn}return Pr}function Wn(gt,Rt,Jt,yn){var Pn=gt.length;for(Jt=Cs(Jt),Jt<0&&(Jt=-Jt>Pn?0:Pn+Jt),yn=yn===s||yn>Pn?Pn:Cs(yn),yn<0&&(yn+=Pn),yn=Jt>yn?0:Dx(yn);Jt<yn;)gt[Jt++]=Rt;return gt}function Zn(gt,Rt){var Jt=[];return vn(gt,function(yn,Pn,qn){Rt(yn,Pn,qn)&&Jt.push(yn)}),Jt}function Fn(gt,Rt,Jt,yn,Pn){var qn=-1,cr=gt.length;for(Jt||(Jt=Gw),Pn||(Pn=[]);++qn<cr;){var wr=gt[qn];Rt>0&&Jt(wr)?Rt>1?Fn(wr,Rt-1,Jt,yn,Pn):ap(Pn,wr):yn||(Pn[Pn.length]=wr)}return Pn}var jn=Ip(),Qn=Ip(!0);function Gn(gt,Rt){return gt&&jn(gt,Rt,tu)}function or(gt,Rt){return gt&&Qn(gt,Rt,tu)}function lr(gt,Rt){return bs(Rt,function(Jt){return zm(gt[Jt])})}function er(gt,Rt){Rt=cy(Rt,gt);for(var Jt=0,yn=Rt.length;gt!=null&&Jt<yn;)gt=gt[Qp(Rt[Jt++])];return Jt&&Jt==yn?gt:s}function dr(gt,Rt,Jt){var yn=Rt(gt);return ws(gt)?yn:ap(yn,Jt(gt))}function Ar(gt){return gt==null?gt===s?yr:Nr:yu&&yu in Js(gt)?Wy(gt):Yw(gt)}function Fr(gt,Rt){return gt>Rt}function Dr(gt,Rt){return gt!=null&&Hs.call(gt,Rt)}function co(gt,Rt){return gt!=null&&Rt in Js(gt)}function Sr(gt,Rt,Jt){return gt>=Nl(Rt,Jt)&&gt<Fl(Rt,Jt)}function _i(gt,Rt,Jt){for(var yn=Jt?$m:im,Pn=gt[0].length,qn=gt.length,cr=qn,wr=Kr(qn),Pr=1/0,uo=[];cr--;){var ao=gt[cr];cr&&Rt&&(ao=_a(ao,mu(Rt))),Pr=Nl(ao.length,Pr),wr[cr]=!Jt&&(Rt||Pn>=120&&ao.length>=120)?new cp(cr&&ao):s}ao=gt[0];var fo=-1,Po=wr[0];e:for(;++fo<Pn&&uo.length<Pr;){var Vo=ao[fo],Qo=Rt?Rt(Vo):Vo;if(Vo=Jt||Vo!==0?Vo:0,!(Po?Oy(Po,Qo):yn(uo,Qo,Jt))){for(cr=qn;--cr;){var xs=wr[cr];if(!(xs?Oy(xs,Qo):yn(gt[cr],Qo,Jt)))continue e}Po&&Po.push(Qo),uo.push(Vo)}}return uo}function eo(gt,Rt,Jt,yn){return Gn(gt,function(Pn,qn,cr){Rt(yn,Jt(Pn),qn,cr)}),yn}function Or(gt,Rt,Jt){Rt=cy(Rt,gt),gt=F0(gt,Rt);var yn=gt==null?gt:gt[Qp(Ju(Rt))];return yn==null?s:gu(yn,gt,Jt)}function br(gt){return Wl(gt)&&Ar(gt)==mn}function xo(gt){return Wl(gt)&&Ar(gt)==Lr}function mo(gt){return Wl(gt)&&Ar(gt)==jt}function vo(gt,Rt,Jt,yn,Pn){return gt===Rt?!0:gt==null||Rt==null||!Wl(gt)&&!Wl(Rt)?gt!==gt&&Rt!==Rt:yo(gt,Rt,Jt,yn,vo,Pn)}function yo(gt,Rt,Jt,yn,Pn,qn){var cr=ws(gt),wr=ws(Rt),Pr=cr?an:lu(gt),uo=wr?an:lu(Rt);Pr=Pr==mn?ro:Pr,uo=uo==mn?ro:uo;var ao=Pr==ro,fo=uo==ro,Po=Pr==uo;if(Po&&_y(gt)){if(!_y(Rt))return!1;cr=!0,ao=!1}if(Po&&!ao)return qn||(qn=new qu),cr||q_(gt)?eu(gt,Rt,Jt,yn,Pn,qn):Vw(gt,Rt,Pr,Jt,yn,Pn,qn);if(!(Jt&ct)){var Vo=ao&&Hs.call(gt,"__wrapped__"),Qo=fo&&Hs.call(Rt,"__wrapped__");if(Vo||Qo){var xs=Vo?gt.value():gt,cs=Qo?Rt.value():Rt;return qn||(qn=new qu),Pn(xs,cs,Jt,yn,qn)}}return Po?(qn||(qn=new qu),ym(gt,Rt,Jt,yn,Pn,qn)):!1}function Bo(gt){return Wl(gt)&&lu(gt)==Mn}function Ho(gt,Rt,Jt,yn){var Pn=Jt.length,qn=Pn,cr=!yn;if(gt==null)return!qn;for(gt=Js(gt);Pn--;){var wr=Jt[Pn];if(cr&&wr[2]?wr[1]!==gt[wr[0]]:!(wr[0]in gt))return!1}for(;++Pn<qn;){wr=Jt[Pn];var Pr=wr[0],uo=gt[Pr],ao=wr[1];if(cr&&wr[2]){if(uo===s&&!(Pr in gt))return!1}else{var fo=new qu;if(yn)var Po=yn(uo,ao,Pr,gt,Rt,fo);if(!(Po===s?vo(ao,uo,ct|yt,yn,fo):Po))return!1}}return!0}function Go(gt){if(!Dl(gt)||B0(gt))return!1;var Rt=zm(gt)?ny:Lo;return Rt.test(Jp(gt))}function No(gt){return Wl(gt)&&Ar(gt)==In}function _o(gt){return Wl(gt)&&lu(gt)==kn}function es(gt){return Wl(gt)&&vy(gt.length)&&!!bo[Ar(gt)]}function hs(gt){return typeof gt=="function"?gt:gt==null?_d:typeof gt=="object"?ws(gt)?hp(gt[0],gt[1]):ou(gt):iS(gt)}function Ns(gt){if(!k_(gt))return v_(gt);var Rt=[];for(var Jt in Js(gt))Hs.call(gt,Jt)&&Jt!="constructor"&&Rt.push(Jt);return Rt}function Vs(gt){if(!Dl(gt))return Zw(gt);var Rt=k_(gt),Jt=[];for(var yn in gt)yn=="constructor"&&(Rt||!Hs.call(gt,yn))||Jt.push(yn);return Jt}function Ds(gt,Rt){return gt<Rt}function Ul(gt,Rt){var Jt=-1,yn=_f(gt)?Kr(gt.length):[];return vn(gt,function(Pn,qn,cr){yn[++Jt]=Rt(Pn,qn,cr)}),yn}function ou(gt){var Rt=V1(gt);return Rt.length==1&&Rt[0][2]?qw(Rt[0][0],Rt[0][1]):function(Jt){return Jt===gt||Ho(Jt,gt,Rt)}}function hp(gt,Rt){return L0(gt)&&$w(Rt)?qw(Qp(gt),Rt):function(Jt){var yn=o1(Jt,gt);return yn===s&&yn===Rt?s1(Jt,gt):vo(Rt,yn,ct|yt)}}function Ws(gt,Rt,Jt,yn,Pn){gt!==Rt&&jn(Rt,function(qn,cr){if(Pn||(Pn=new qu),Dl(qn))_l(gt,Rt,cr,Jt,Ws,yn,Pn);else{var wr=yn?yn(Gy(gt,cr),qn,cr+"",gt,Rt,Pn):s;wr===s&&(wr=qn),zy(gt,cr,wr)}},Bu)}function _l(gt,Rt,Jt,yn,Pn,qn,cr){var wr=Gy(gt,Jt),Pr=Gy(Rt,Jt),uo=cr.get(Pr);if(uo){zy(gt,Jt,uo);return}var ao=qn?qn(wr,Pr,Jt+"",gt,Rt,cr):s,fo=ao===s;if(fo){var Po=ws(Pr),Vo=!Po&&_y(Pr),Qo=!Po&&!Vo&&q_(Pr);ao=Pr,Po||Vo||Qo?ws(wr)?ao=wr:Yl(wr)?ao=Ku(wr):Vo?(fo=!1,ao=L1(Pr,!0)):Qo?(fo=!1,ao=Ov(Pr,!0)):ao=[]:Sm(Pr)||yy(Pr)?(ao=wr,yy(wr)?ao=r1(wr):(!Dl(wr)||zm(wr))&&(ao=D0(Pr))):fo=!1}fo&&(cr.set(Pr,ao),Pn(ao,Pr,yn,qn,cr),cr.delete(Pr)),zy(gt,Jt,ao)}function Ls(gt,Rt){var Jt=gt.length;if(Jt)return Rt+=Rt<0?Jt:0,vm(Rt,Jt)?gt[Rt]:s}function Ol(gt,Rt,Jt){Rt.length?Rt=_a(Rt,function(qn){return ws(qn)?function(cr){return er(cr,qn.length===1?qn[0]:qn)}:qn}):Rt=[_d];var yn=-1;Rt=_a(Rt,mu(is()));var Pn=Ul(gt,function(qn,cr,wr){var Pr=_a(Rt,function(uo){return uo(qn)});return{criteria:Pr,index:++yn,value:qn}});return o0(Pn,function(qn,cr){return O0(qn,cr,Jt)})}function su(gt,Rt){return $s(gt,Rt,function(Jt,yn){return s1(gt,yn)})}function $s(gt,Rt,Jt){for(var yn=-1,Pn=Rt.length,qn={};++yn<Pn;){var cr=Rt[yn],wr=er(gt,cr);Jt(wr,cr)&&_u(qn,cy(cr,gt),wr)}return qn}function Ru(gt){return function(Rt){return er(Rt,gt)}}function qp(gt,Rt,Jt,yn){var Pn=yn?cv:lp,qn=-1,cr=Rt.length,wr=gt;for(gt===Rt&&(Rt=Ku(Rt)),Jt&&(wr=_a(gt,mu(Jt)));++qn<cr;)for(var Pr=0,uo=Rt[qn],ao=Jt?Jt(uo):uo;(Pr=Pn(wr,ao,Pr,yn))>-1;)wr!==gt&&Mm.call(wr,Pr,1),Mm.call(gt,Pr,1);return gt}function Zu(gt,Rt){for(var Jt=gt?Rt.length:0,yn=Jt-1;Jt--;){var Pn=Rt[Jt];if(Jt==yn||Pn!==qn){var qn=Pn;vm(Pn)?Mm.call(gt,Pn,1):T0(gt,Pn)}}return gt}function Jl(gt,Rt){return gt+oy(Ly()*(Rt-gt+1))}function uy(gt,Rt,Jt,yn){for(var Pn=-1,qn=Fl(ky((Rt-gt)/(Jt||1)),0),cr=Kr(qn);qn--;)cr[yn?qn:++Pn]=gt,gt+=Jt;return cr}function Cp(gt,Rt){var Jt="";if(!gt||Rt<1||Rt>qt)return Jt;do Rt%2&&(Jt+=gt),Rt=oy(Rt/2),Rt&&(gt+=gt);while(Rt);return Jt}function Xo(gt,Rt){return L_(Xp(gt,Rt,_d),gt+"")}function Rp(gt){return Rv(X_(gt))}function dm(gt,Rt){var Jt=X_(gt);return N0(Jt,kt(Rt,0,Jt.length))}function _u(gt,Rt,Jt,yn){if(!Dl(gt))return gt;Rt=cy(Rt,gt);for(var Pn=-1,qn=Rt.length,cr=qn-1,wr=gt;wr!=null&&++Pn<qn;){var Pr=Qp(Rt[Pn]),uo=Jt;if(Pr==="__proto__"||Pr==="constructor"||Pr==="prototype")return gt;if(Pn!=cr){var ao=wr[Pr];uo=yn?yn(ao,Pr,wr):s,uo===s&&(uo=Dl(ao)?ao:vm(Rt[Pn+1])?[]:{})}ly(wr,Pr,uo),wr=wr[Pr]}return gt}var C_=By?function(gt,Rt){return By.set(gt,Rt),gt}:_d,A0=um?function(gt,Rt){return um(gt,"toString",{configurable:!0,enumerable:!1,value:g1(Rt),writable:!0})}:_d;function Bw(gt){return N0(X_(gt))}function fp(gt,Rt,Jt){var yn=-1,Pn=gt.length;Rt<0&&(Rt=-Rt>Pn?0:Pn+Rt),Jt=Jt>Pn?Pn:Jt,Jt<0&&(Jt+=Pn),Pn=Rt>Jt?0:Jt-Rt>>>0,Rt>>>=0;for(var qn=Kr(Pn);++yn<Pn;)qn[yn]=gt[yn+Rt];return qn}function jw(gt,Rt){var Jt;return vn(gt,function(yn,Pn,qn){return Jt=Rt(yn,Pn,qn),!Jt}),!!Jt}function R_(gt,Rt,Jt){var yn=0,Pn=gt==null?yn:gt.length;if(typeof Rt=="number"&&Rt===Rt&&Pn<=un){for(;yn<Pn;){var qn=yn+Pn>>>1,cr=gt[qn];cr!==null&&!mp(cr)&&(Jt?cr<=Rt:cr<Rt)?yn=qn+1:Pn=qn}return Pn}return E0(gt,Rt,_d,Jt)}function E0(gt,Rt,Jt,yn){var Pn=0,qn=gt==null?0:gt.length;if(qn===0)return 0;Rt=Jt(Rt);for(var cr=Rt!==Rt,wr=Rt===null,Pr=mp(Rt),uo=Rt===s;Pn<qn;){var ao=oy((Pn+qn)/2),fo=Jt(gt[ao]),Po=fo!==s,Vo=fo===null,Qo=fo===fo,xs=mp(fo);if(cr)var cs=yn||Qo;else uo?cs=Qo&&(yn||Po):wr?cs=Qo&&Po&&(yn||!Vo):Pr?cs=Qo&&Po&&!Vo&&(yn||!xs):Vo||xs?cs=!1:cs=yn?fo<=Rt:fo<Rt;cs?Pn=ao+1:qn=ao}return Nl(qn,Xt)}function R1(gt,Rt){for(var Jt=-1,yn=gt.length,Pn=0,qn=[];++Jt<yn;){var cr=gt[Jt],wr=Rt?Rt(cr):cr;if(!Jt||!_h(wr,Pr)){var Pr=wr;qn[Pn++]=cr===0?0:cr}}return qn}function I1(gt){return typeof gt=="number"?gt:mp(gt)?wt:+gt}function Yu(gt){if(typeof gt=="string")return gt;if(ws(gt))return _a(gt,Yu)+"";if(mp(gt))return x_?x_.call(gt):"";var Rt=gt+"";return Rt=="0"&&1/gt==-Ht?"-0":Rt}function jm(gt,Rt,Jt){var yn=-1,Pn=im,qn=gt.length,cr=!0,wr=[],Pr=wr;if(Jt)cr=!1,Pn=$m;else if(qn>=$){var uo=Rt?null:zw(gt);if(uo)return f_(uo);cr=!1,Pn=Oy,Pr=new cp}else Pr=Rt?[]:wr;e:for(;++yn<qn;){var ao=gt[yn],fo=Rt?Rt(ao):ao;if(ao=Jt||ao!==0?ao:0,cr&&fo===fo){for(var Po=Pr.length;Po--;)if(Pr[Po]===fo)continue e;Rt&&Pr.push(fo),wr.push(ao)}else Pn(Pr,fo,Jt)||(Pr!==wr&&Pr.push(fo),wr.push(ao))}return wr}function T0(gt,Rt){return Rt=cy(Rt,gt),gt=F0(gt,Rt),gt==null||delete gt[Qp(Ju(Rt))]}function O1(gt,Rt,Jt,yn){return _u(gt,Rt,Jt(er(gt,Rt)),yn)}function Iv(gt,Rt,Jt,yn){for(var Pn=gt.length,qn=yn?Pn:-1;(yn?qn--:++qn<Pn)&&Rt(gt[qn],qn,gt););return Jt?fp(gt,yn?0:qn,yn?qn+1:Pn):fp(gt,yn?qn+1:0,yn?Pn:qn)}function M1(gt,Rt){var Jt=gt;return Jt instanceof Is&&(Jt=Jt.value()),o_(Rt,function(yn,Pn){return Pn.func.apply(Pn.thisArg,ap([yn],Pn.args))},Jt)}function C0(gt,Rt,Jt){var yn=gt.length;if(yn<2)return yn?jm(gt[0]):[];for(var Pn=-1,qn=Kr(yn);++Pn<yn;)for(var cr=gt[Pn],wr=-1;++wr<yn;)wr!=Pn&&(qn[Pn]=pn(qn[Pn]||cr,gt[wr],Rt,Jt));return jm(Fn(qn,1),Rt,Jt)}function P1(gt,Rt,Jt){for(var yn=-1,Pn=gt.length,qn=Rt.length,cr={};++yn<Pn;){var wr=yn<qn?Rt[yn]:s;Jt(cr,gt[yn],wr)}return cr}function R0(gt){return Yl(gt)?gt:[]}function k1(gt){return typeof gt=="function"?gt:_d}function cy(gt,Rt){return ws(gt)?gt:L0(gt,Rt)?[gt]:U0(Ys(gt))}var I_=Xo;function Fm(gt,Rt,Jt){var yn=gt.length;return Jt=Jt===s?yn:Jt,!Rt&&Jt>=yn?gt:fp(gt,Rt,Jt)}var D1=Ro||function(gt){return Tl.clearTimeout(gt)};function L1(gt,Rt){if(Rt)return gt.slice();var Jt=gt.length,yn=__?__(Jt):new gt.constructor(Jt);return gt.copy(yn),yn}function B1(gt){var Rt=new gt.constructor(gt.byteLength);return new ry(Rt).set(new ry(gt)),Rt}function I0(gt,Rt){var Jt=Rt?B1(gt.buffer):gt.buffer;return new gt.constructor(Jt,gt.byteOffset,gt.byteLength)}function Fw(gt){var Rt=new gt.constructor(gt.source,io.exec(gt));return Rt.lastIndex=gt.lastIndex,Rt}function j1(gt){return Gp?Js(Gp.call(gt)):{}}function Ov(gt,Rt){var Jt=Rt?B1(gt.buffer):gt.buffer;return new gt.constructor(Jt,gt.byteOffset,gt.length)}function gm(gt,Rt){if(gt!==Rt){var Jt=gt!==s,yn=gt===null,Pn=gt===gt,qn=mp(gt),cr=Rt!==s,wr=Rt===null,Pr=Rt===Rt,uo=mp(Rt);if(!wr&&!uo&&!qn&&gt>Rt||qn&&cr&&Pr&&!wr&&!uo||yn&&cr&&Pr||!Jt&&Pr||!Pn)return 1;if(!yn&&!qn&&!uo&&gt<Rt||uo&&Jt&&Pn&&!yn&&!qn||wr&&Jt&&Pn||!cr&&Pn||!Pr)return-1}return 0}function O0(gt,Rt,Jt){for(var yn=-1,Pn=gt.criteria,qn=Rt.criteria,cr=Pn.length,wr=Jt.length;++yn<cr;){var Pr=gm(Pn[yn],qn[yn]);if(Pr){if(yn>=wr)return Pr;var uo=Jt[yn];return Pr*(uo=="desc"?-1:1)}}return gt.index-Rt.index}function F1(gt,Rt,Jt,yn){for(var Pn=-1,qn=gt.length,cr=Jt.length,wr=-1,Pr=Rt.length,uo=Fl(qn-cr,0),ao=Kr(Pr+uo),fo=!yn;++wr<Pr;)ao[wr]=Rt[wr];for(;++Pn<cr;)(fo||Pn<qn)&&(ao[Jt[Pn]]=gt[Pn]);for(;uo--;)ao[wr++]=gt[Pn++];return ao}function N1(gt,Rt,Jt,yn){for(var Pn=-1,qn=gt.length,cr=-1,wr=Jt.length,Pr=-1,uo=Rt.length,ao=Fl(qn-wr,0),fo=Kr(ao+uo),Po=!yn;++Pn<ao;)fo[Pn]=gt[Pn];for(var Vo=Pn;++Pr<uo;)fo[Vo+Pr]=Rt[Pr];for(;++cr<wr;)(Po||Pn<qn)&&(fo[Vo+Jt[cr]]=gt[Pn++]);return fo}function Ku(gt,Rt){var Jt=-1,yn=gt.length;for(Rt||(Rt=Kr(yn));++Jt<yn;)Rt[Jt]=gt[Jt];return Rt}function pm(gt,Rt,Jt,yn){var Pn=!Jt;Jt||(Jt={});for(var qn=-1,cr=Rt.length;++qn<cr;){var wr=Rt[qn],Pr=yn?yn(Jt[wr],gt[wr],wr,Jt,gt):s;Pr===s&&(Pr=gt[wr]),Pn?lt(Jt,wr,Pr):ly(Jt,wr,Pr)}return Jt}function hS(gt,Rt){return pm(gt,P_(gt),Rt)}function U1(gt,Rt){return pm(gt,jv(gt),Rt)}function hy(gt,Rt){return function(Jt,yn){var Pn=ws(Jt)?lv:Vy,qn=Rt?Rt():{};return Pn(Jt,gt,is(yn,2),qn)}}function Zp(gt){return Xo(function(Rt,Jt){var yn=-1,Pn=Jt.length,qn=Pn>1?Jt[Pn-1]:s,cr=Pn>2?Jt[2]:s;for(qn=gt.length>3&&typeof qn=="function"?(Pn--,qn):s,cr&&Zl(Jt[0],Jt[1],cr)&&(qn=Pn<3?s:qn,Pn=1),Rt=Js(Rt);++yn<Pn;){var wr=Jt[yn];wr&&gt(Rt,wr,yn,qn)}return Rt})}function mm(gt,Rt){return function(Jt,yn){if(Jt==null)return Jt;if(!_f(Jt))return gt(Jt,yn);for(var Pn=Jt.length,qn=Rt?Pn:-1,cr=Js(Jt);(Rt?qn--:++qn<Pn)&&yn(cr[qn],qn,cr)!==!1;);return Jt}}function Ip(gt){return function(Rt,Jt,yn){for(var Pn=-1,qn=Js(Rt),cr=yn(Rt),wr=cr.length;wr--;){var Pr=cr[gt?wr:++Pn];if(Jt(qn[Pr],Pr,qn)===!1)break}return Rt}}function fy(gt,Rt,Jt){var yn=Rt&Et,Pn=Mv(gt);function qn(){var cr=this&&this!==Tl&&this instanceof qn?Pn:gt;return cr.apply(yn?Jt:this,arguments)}return qn}function Nm(gt){return function(Rt){Rt=Ys(Rt);var Jt=Om(Rt)?Pu(Rt):s,yn=Jt?Jt[0]:Rt.charAt(0),Pn=Jt?Fm(Jt,1).join(""):Rt.slice(1);return yn[gt]()+Pn}}function Op(gt){return function(Rt){return o_(tv(bw(Rt).replace(Nn,"")),gt,"")}}function Mv(gt){return function(){var Rt=arguments;switch(Rt.length){case 0:return new gt;case 1:return new gt(Rt[0]);case 2:return new gt(Rt[0],Rt[1]);case 3:return new gt(Rt[0],Rt[1],Rt[2]);case 4:return new gt(Rt[0],Rt[1],Rt[2],Rt[3]);case 5:return new gt(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4]);case 6:return new gt(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]);case 7:return new gt(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5],Rt[6])}var Jt=hm(gt.prototype),yn=gt.apply(Jt,Rt);return Dl(yn)?yn:Jt}}function fS(gt,Rt,Jt){var yn=Mv(gt);function Pn(){for(var qn=arguments.length,cr=Kr(qn),wr=qn,Pr=M_(Pn);wr--;)cr[wr]=arguments[wr];var uo=qn<3&&cr[0]!==Pr&&cr[qn-1]!==Pr?[]:bp(cr,Pr);if(qn-=uo.length,qn<Jt)return Dv(gt,Rt,Pv,Pn.placeholder,s,cr,uo,s,s,Jt-qn);var ao=this&&this!==Tl&&this instanceof Pn?yn:gt;return gu(ao,this,cr)}return Pn}function Nw(gt){return function(Rt,Jt,yn){var Pn=Js(Rt);if(!_f(Rt)){var qn=is(Jt,3);Rt=tu(Rt),Jt=function(wr){return qn(Pn[wr],wr,Pn)}}var cr=gt(Rt,Jt,yn);return cr>-1?Pn[qn?Rt[cr]:cr]:s}}function Uw(gt){return _m(function(Rt){var Jt=Rt.length,yn=Jt,Pn=Cu.prototype.thru;for(gt&&Rt.reverse();yn--;){var qn=Rt[yn];if(typeof qn!="function")throw new Tu(tt);if(Pn&&!cr&&O_(qn)=="wrapper")var cr=new Cu([],!0)}for(yn=cr?yn:Jt;++yn<Jt;){qn=Rt[yn];var wr=O_(qn),Pr=wr=="wrapper"?k0(qn):s;Pr&&gy(Pr[0])&&Pr[1]==(nn|Tt|mt|sn)&&!Pr[4].length&&Pr[9]==1?cr=cr[O_(Pr[0])].apply(cr,Pr[3]):cr=qn.length==1&&gy(qn)?cr[wr]():cr.thru(qn)}return function(){var uo=arguments,ao=uo[0];if(cr&&uo.length==1&&ws(ao))return cr.plant(ao).value();for(var fo=0,Po=Jt?Rt[fo].apply(this,uo):ao;++fo<Jt;)Po=Rt[fo].call(this,Po);return Po}})}function Pv(gt,Rt,Jt,yn,Pn,qn,cr,wr,Pr,uo){var ao=Rt&nn,fo=Rt&Et,Po=Rt&Ot,Vo=Rt&(Tt|It),Qo=Rt&xt,xs=Po?s:Mv(gt);function cs(){for(var Ps=arguments.length,Bs=Kr(Ps),ju=Ps;ju--;)Bs[ju]=arguments[ju];if(Vo)var Fu=M_(cs),_g=s0(Bs,Fu);if(yn&&(Bs=F1(Bs,yn,Pn,Vo)),qn&&(Bs=N1(Bs,qn,cr,Vo)),Ps-=_g,Vo&&Ps<uo){var Gl=bp(Bs,Fu);return Dv(gt,Rt,Pv,cs.placeholder,Jt,Bs,Gl,wr,Pr,uo-Ps)}var Dp=fo?Jt:this,Tm=Po?Dp[gt]:gt;return Ps=Bs.length,wr?Bs=D_(Bs,wr):Qo&&Ps>1&&Bs.reverse(),ao&&Pr<Ps&&(Bs.length=Pr),this&&this!==Tl&&this instanceof cs&&(Tm=xs||Mv(Tm)),Tm.apply(Dp,Bs)}return cs}function kv(gt,Rt){return function(Jt,yn){return eo(Jt,gt,Rt(yn),{})}}function Xu(gt,Rt){return function(Jt,yn){var Pn;if(Jt===s&&yn===s)return Rt;if(Jt!==s&&(Pn=Jt),yn!==s){if(Pn===s)return yn;typeof Jt=="string"||typeof yn=="string"?(Jt=Yu(Jt),yn=Yu(yn)):(Jt=I1(Jt),yn=I1(yn)),Pn=gt(Jt,yn)}return Pn}}function z1(gt){return _m(function(Rt){return Rt=_a(Rt,mu(is())),Xo(function(Jt){var yn=this;return gt(Rt,function(Pn){return gu(Pn,yn,Jt)})})})}function M0(gt,Rt){Rt=Rt===s?" ":Yu(Rt);var Jt=Rt.length;if(Jt<2)return Jt?Cp(Rt,gt):Rt;var yn=Cp(Rt,ky(gt/Qm(Rt)));return Om(Rt)?Fm(Pu(yn),0,gt).join(""):yn.slice(0,gt)}function zl(gt,Rt,Jt,yn){var Pn=Rt&Et,qn=Mv(gt);function cr(){for(var wr=-1,Pr=arguments.length,uo=-1,ao=yn.length,fo=Kr(ao+Pr),Po=this&&this!==Tl&&this instanceof cr?qn:gt;++uo<ao;)fo[uo]=yn[uo];for(;Pr--;)fo[uo++]=arguments[++wr];return gu(Po,Pn?Jt:this,fo)}return cr}function Zo(gt){return function(Rt,Jt,yn){return yn&&typeof yn!="number"&&Zl(Rt,Jt,yn)&&(Jt=yn=s),Rt=Am(Rt),Jt===s?(Jt=Rt,Rt=0):Jt=Am(Jt),yn=yn===s?Rt<Jt?1:-1:Am(yn),uy(Rt,Jt,yn,gt)}}function Yp(gt){return function(Rt,Jt){return typeof Rt=="string"&&typeof Jt=="string"||(Rt=kp(Rt),Jt=kp(Jt)),gt(Rt,Jt)}}function Dv(gt,Rt,Jt,yn,Pn,qn,cr,wr,Pr,uo){var ao=Rt&Tt,fo=ao?cr:s,Po=ao?s:cr,Vo=ao?qn:s,Qo=ao?s:qn;Rt|=ao?mt:Bt,Rt&=~(ao?Bt:mt),Rt&Lt||(Rt&=~(Et|Ot));var xs=[gt,Rt,Pn,Vo,fo,Qo,Po,wr,Pr,uo],cs=Jt.apply(s,xs);return gy(gt)&&py(cs,xs),cs.placeholder=yn,H1(cs,gt,Rt)}function Os(gt){var Rt=Ml[gt];return function(Jt,yn){if(Jt=kp(Jt),yn=yn==null?0:Nl(Cs(yn),292),yn&&Dy(Jt)){var Pn=(Ys(Jt)+"e").split("e"),qn=Rt(Pn[0]+"e"+(+Pn[1]+yn));return Pn=(Ys(qn)+"e").split("e"),+(Pn[0]+"e"+(+Pn[1]-yn))}return Rt(Jt)}}var zw=Vp&&1/f_(new Vp([,-0]))[1]==Ht?function(gt){return new Vp(gt)}:Qy;function P0(gt){return function(Rt){var Jt=lu(Rt);return Jt==Mn?Xm(Rt):Jt==kn?My(Rt):gv(Rt,gt(Rt))}}function au(gt,Rt,Jt,yn,Pn,qn,cr,wr){var Pr=Rt&Ot;if(!Pr&&typeof gt!="function")throw new Tu(tt);var uo=yn?yn.length:0;if(uo||(Rt&=~(mt|Bt),yn=Pn=s),cr=cr===s?cr:Fl(Cs(cr),0),wr=wr===s?wr:Cs(wr),uo-=Pn?Pn.length:0,Rt&Bt){var ao=yn,fo=Pn;yn=Pn=s}var Po=Pr?s:k0(gt),Vo=[gt,Rt,Jt,yn,Pn,ao,fo,qn,cr,wr];if(Po&&Qu(Vo,Po),gt=Vo[0],Rt=Vo[1],Jt=Vo[2],yn=Vo[3],Pn=Vo[4],wr=Vo[9]=Vo[9]===s?Pr?0:gt.length:Fl(Vo[9]-uo,0),!wr&&Rt&(Tt|It)&&(Rt&=~(Tt|It)),!Rt||Rt==Et)var Qo=fy(gt,Rt,Jt);else Rt==Tt||Rt==It?Qo=fS(gt,Rt,wr):(Rt==mt||Rt==(Et|mt))&&!Pn.length?Qo=zl(gt,Rt,Jt,yn):Qo=Pv.apply(s,Vo);var xs=Po?C_:py;return H1(xs(Qo,Vo),gt,Rt)}function Kp(gt,Rt,Jt,yn){return gt===s||_h(gt,sm[Jt])&&!Hs.call(yn,Jt)?Rt:gt}function dp(gt,Rt,Jt,yn,Pn,qn){return Dl(gt)&&Dl(Rt)&&(qn.set(Rt,gt),Ws(gt,Rt,s,dp,qn),qn.delete(Rt)),gt}function gp(gt){return Sm(gt)?s:gt}function eu(gt,Rt,Jt,yn,Pn,qn){var cr=Jt&ct,wr=gt.length,Pr=Rt.length;if(wr!=Pr&&!(cr&&Pr>wr))return!1;var uo=qn.get(gt),ao=qn.get(Rt);if(uo&&ao)return uo==Rt&&ao==gt;var fo=-1,Po=!0,Vo=Jt&yt?new cp:s;for(qn.set(gt,Rt),qn.set(Rt,gt);++fo<wr;){var Qo=gt[fo],xs=Rt[fo];if(yn)var cs=cr?yn(xs,Qo,fo,Rt,gt,qn):yn(Qo,xs,fo,gt,Rt,qn);if(cs!==s){if(cs)continue;Po=!1;break}if(Vo){if(!Ty(Rt,function(Ps,Bs){if(!Oy(Vo,Bs)&&(Qo===Ps||Pn(Qo,Ps,Jt,yn,qn)))return Vo.push(Bs)})){Po=!1;break}}else if(!(Qo===xs||Pn(Qo,xs,Jt,yn,qn))){Po=!1;break}}return qn.delete(gt),qn.delete(Rt),Po}function Vw(gt,Rt,Jt,yn,Pn,qn,cr){switch(Jt){case Ir:if(gt.byteLength!=Rt.byteLength||gt.byteOffset!=Rt.byteOffset)return!1;gt=gt.buffer,Rt=Rt.buffer;case Lr:return!(gt.byteLength!=Rt.byteLength||!qn(new ry(gt),new ry(Rt)));case Mt:case jt:case Yn:return _h(+gt,+Rt);case gn:return gt.name==Rt.name&&gt.message==Rt.message;case In:case Kn:return gt==Rt+"";case Mn:var wr=Xm;case kn:var Pr=yn&ct;if(wr||(wr=f_),gt.size!=Rt.size&&!Pr)return!1;var uo=cr.get(gt);if(uo)return uo==Rt;yn|=yt,cr.set(gt,Rt);var ao=eu(wr(gt),wr(Rt),yn,Pn,qn,cr);return cr.delete(gt),ao;case vr:if(Gp)return Gp.call(gt)==Gp.call(Rt)}return!1}function ym(gt,Rt,Jt,yn,Pn,qn){var cr=Jt&ct,wr=dy(gt),Pr=wr.length,uo=dy(Rt),ao=uo.length;if(Pr!=ao&&!cr)return!1;for(var fo=Pr;fo--;){var Po=wr[fo];if(!(cr?Po in Rt:Hs.call(Rt,Po)))return!1}var Vo=qn.get(gt),Qo=qn.get(Rt);if(Vo&&Qo)return Vo==Rt&&Qo==gt;var xs=!0;qn.set(gt,Rt),qn.set(Rt,gt);for(var cs=cr;++fo<Pr;){Po=wr[fo];var Ps=gt[Po],Bs=Rt[Po];if(yn)var ju=cr?yn(Bs,Ps,Po,Rt,gt,qn):yn(Ps,Bs,Po,gt,Rt,qn);if(!(ju===s?Ps===Bs||Pn(Ps,Bs,Jt,yn,qn):ju)){xs=!1;break}cs||(cs=Po=="constructor")}if(xs&&!cs){var Fu=gt.constructor,_g=Rt.constructor;Fu!=_g&&"constructor"in gt&&"constructor"in Rt&&!(typeof Fu=="function"&&Fu instanceof Fu&&typeof _g=="function"&&_g instanceof _g)&&(xs=!1)}return qn.delete(gt),qn.delete(Rt),xs}function _m(gt){return L_(Xp(gt,s,Qw),gt+"")}function dy(gt){return dr(gt,tu,P_)}function Lv(gt){return dr(gt,Bu,jv)}var k0=By?function(gt){return By.get(gt)}:Qy;function O_(gt){for(var Rt=gt.name+"",Jt=km[Rt],yn=Hs.call(km,Rt)?Jt.length:0;yn--;){var Pn=Jt[yn],qn=Pn.func;if(qn==null||qn==gt)return Pn.name}return Rt}function M_(gt){var Rt=Hs.call(zn,"placeholder")?zn:gt;return Rt.placeholder}function is(){var gt=zn.iteratee||Tw;return gt=gt===Tw?hs:gt,arguments.length?gt(arguments[0],arguments[1]):gt}function Bv(gt,Rt){var Jt=gt.__data__;return mS(Rt)?Jt[typeof Rt=="string"?"string":"hash"]:Jt.map}function V1(gt){for(var Rt=tu(gt),Jt=Rt.length;Jt--;){var yn=Rt[Jt],Pn=gt[yn];Rt[Jt]=[yn,Pn,$w(Pn)]}return Rt}function Lu(gt,Rt){var Jt=pv(gt,Rt);return Go(Jt)?Jt:s}function Wy(gt){var Rt=Hs.call(gt,yu),Jt=gt[yu];try{gt[yu]=s;var yn=!0}catch{}var Pn=$u.call(gt);return yn&&(Rt?gt[yu]=Jt:delete gt[yu]),Pn}var P_=up?function(gt){return gt==null?[]:(gt=Js(gt),bs(up(gt),function(Rt){return lm.call(gt,Rt)}))}:y1,jv=up?function(gt){for(var Rt=[];gt;)ap(Rt,P_(gt)),gt=am(gt);return Rt}:y1,lu=Ar;(sy&&lu(new sy(new ArrayBuffer(1)))!=Ir||Pm&&lu(new Pm)!=Mn||b_&&lu(b_.resolve())!=to||Vp&&lu(new Vp)!=kn||cm&&lu(new cm)!=Wr)&&(lu=function(gt){var Rt=Ar(gt),Jt=Rt==ro?gt.constructor:s,yn=Jt?Jp(Jt):"";if(yn)switch(yn){case w_:return Ir;case d0:return Mn;case Sv:return to;case Dm:return kn;case g0:return Wr}return Rt});function Ww(gt,Rt,Jt){for(var yn=-1,Pn=Jt.length;++yn<Pn;){var qn=Jt[yn],cr=qn.size;switch(qn.type){case"drop":gt+=cr;break;case"dropRight":Rt-=cr;break;case"take":Rt=Nl(Rt,gt+cr);break;case"takeRight":gt=Fl(gt,Rt-cr);break}}return{start:gt,end:Rt}}function dS(gt){var Rt=gt.match(gr);return Rt?Rt[1].split(_r):[]}function W1(gt,Rt,Jt){Rt=cy(Rt,gt);for(var yn=-1,Pn=Rt.length,qn=!1;++yn<Pn;){var cr=Qp(Rt[yn]);if(!(qn=gt!=null&&Jt(gt,cr)))break;gt=gt[cr]}return qn||++yn!=Pn?qn:(Pn=gt==null?0:gt.length,!!Pn&&vy(Pn)&&vm(cr,Pn)&&(ws(gt)||yy(gt)))}function gS(gt){var Rt=gt.length,Jt=new gt.constructor(Rt);return Rt&&typeof gt[0]=="string"&&Hs.call(gt,"index")&&(Jt.index=gt.index,Jt.input=gt.input),Jt}function D0(gt){return typeof gt.constructor=="function"&&!k_(gt)?hm(am(gt)):{}}function pS(gt,Rt,Jt){var yn=gt.constructor;switch(Rt){case Lr:return B1(gt);case Mt:case jt:return new yn(+gt);case Ir:return I0(gt,Jt);case jr:case Co:case Jo:case ps:case ds:case Ss:case Al:case qo:case na:return Ov(gt,Jt);case Mn:return new yn;case Yn:case Kn:return new yn(gt);case In:return Fw(gt);case kn:return new yn;case vr:return j1(gt)}}function G1(gt,Rt){var Jt=Rt.length;if(!Jt)return gt;var yn=Jt-1;return Rt[yn]=(Jt>1?"& ":"")+Rt[yn],Rt=Rt.join(Jt>2?", ":" "),gt.replace(ir,`{
/* [wrapped with `+Rt+`] */
`)}function Gw(gt){return ws(gt)||yy(gt)||!!(Py&&gt&&gt[Py])}function vm(gt,Rt){var Jt=typeof gt;return Rt=Rt??qt,!!Rt&&(Jt=="number"||Jt!="symbol"&&ts.test(gt))&&gt>-1&&gt%1==0&&gt<Rt}function Zl(gt,Rt,Jt){if(!Dl(Jt))return!1;var yn=typeof Rt;return(yn=="number"?_f(Jt)&&vm(Rt,Jt.length):yn=="string"&&Rt in Jt)?_h(Jt[Rt],gt):!1}function L0(gt,Rt){if(ws(gt))return!1;var Jt=typeof gt;return Jt=="number"||Jt=="symbol"||Jt=="boolean"||gt==null||mp(gt)?!0:Wo.test(gt)||!Tr.test(gt)||Rt!=null&&gt in Js(Rt)}function mS(gt){var Rt=typeof gt;return Rt=="string"||Rt=="number"||Rt=="symbol"||Rt=="boolean"?gt!=="__proto__":gt===null}function gy(gt){var Rt=O_(gt),Jt=zn[Rt];if(typeof Jt!="function"||!(Rt in Is.prototype))return!1;if(gt===Jt)return!0;var yn=k0(Jt);return!!yn&&gt===yn[0]}function B0(gt){return!!Ms&&Ms in gt}var Hw=Hu?zm:_1;function k_(gt){var Rt=gt&&gt.constructor,Jt=typeof Rt=="function"&&Rt.prototype||sm;return gt===Jt}function $w(gt){return gt===gt&&!Dl(gt)}function qw(gt,Rt){return function(Jt){return Jt==null?!1:Jt[gt]===Rt&&(Rt!==s||gt in Js(Jt))}}function j0(gt){var Rt=qv(gt,function(yn){return Jt.size===st&&Jt.clear(),yn}),Jt=Rt.cache;return Rt}function Qu(gt,Rt){var Jt=gt[1],yn=Rt[1],Pn=Jt|yn,qn=Pn<(Et|Ot|nn),cr=yn==nn&&Jt==Tt||yn==nn&&Jt==sn&&gt[7].length<=Rt[8]||yn==(nn|sn)&&Rt[7].length<=Rt[8]&&Jt==Tt;if(!(qn||cr))return gt;yn&Et&&(gt[2]=Rt[2],Pn|=Jt&Et?0:Lt);var wr=Rt[3];if(wr){var Pr=gt[3];gt[3]=Pr?F1(Pr,wr,Rt[4]):wr,gt[4]=Pr?bp(gt[3],ht):Rt[4]}return wr=Rt[5],wr&&(Pr=gt[5],gt[5]=Pr?N1(Pr,wr,Rt[6]):wr,gt[6]=Pr?bp(gt[5],ht):Rt[6]),wr=Rt[7],wr&&(gt[7]=wr),yn&nn&&(gt[8]=gt[8]==null?Rt[8]:Nl(gt[8],Rt[8])),gt[9]==null&&(gt[9]=Rt[9]),gt[0]=Rt[0],gt[1]=Pn,gt}function Zw(gt){var Rt=[];if(gt!=null)for(var Jt in Js(gt))Rt.push(Jt);return Rt}function Yw(gt){return $u.call(gt)}function Xp(gt,Rt,Jt){return Rt=Fl(Rt===s?gt.length-1:Rt,0),function(){for(var yn=arguments,Pn=-1,qn=Fl(yn.length-Rt,0),cr=Kr(qn);++Pn<qn;)cr[Pn]=yn[Rt+Pn];Pn=-1;for(var wr=Kr(Rt+1);++Pn<Rt;)wr[Pn]=yn[Pn];return wr[Rt]=Jt(cr),gu(gt,this,wr)}}function F0(gt,Rt){return Rt.length<2?gt:er(gt,fp(Rt,0,-1))}function D_(gt,Rt){for(var Jt=gt.length,yn=Nl(Rt.length,Jt),Pn=Ku(gt);yn--;){var qn=Rt[yn];gt[yn]=vm(qn,Jt)?Pn[qn]:s}return gt}function Gy(gt,Rt){if(!(Rt==="constructor"&&typeof gt[Rt]=="function")&&Rt!="__proto__")return gt[Rt]}var py=$1(C_),Hy=wv||function(gt,Rt){return Tl.setTimeout(gt,Rt)},L_=$1(A0);function H1(gt,Rt,Jt){var yn=Rt+"";return L_(gt,G1(yn,B_(dS(yn),Jt)))}function $1(gt){var Rt=0,Jt=0;return function(){var yn=zp(),Pn=Vt-(yn-Jt);if(Jt=yn,Pn>0){if(++Rt>=Ct)return arguments[0]}else Rt=0;return gt.apply(s,arguments)}}function N0(gt,Rt){var Jt=-1,yn=gt.length,Pn=yn-1;for(Rt=Rt===s?yn:Rt;++Jt<Rt;){var qn=Jl(Jt,Pn),cr=gt[qn];gt[qn]=gt[Jt],gt[Jt]=cr}return gt.length=Rt,gt}var U0=j0(function(gt){var Rt=[];return gt.charCodeAt(0)===46&&Rt.push(""),gt.replace(Vn,function(Jt,yn,Pn,qn){Rt.push(Pn?qn.replace(Yr,"$1"):yn||Jt)}),Rt});function Qp(gt){if(typeof gt=="string"||mp(gt))return gt;var Rt=gt+"";return Rt=="0"&&1/gt==-Ht?"-0":Rt}function Jp(gt){if(gt!=null){try{return Np.call(gt)}catch{}try{return gt+""}catch{}}return""}function B_(gt,Rt){return pu(dn,function(Jt){var yn="_."+Jt[0];Rt&Jt[1]&&!im(gt,yn)&&gt.push(yn)}),gt.sort()}function bm(gt){if(gt instanceof Is)return gt.clone();var Rt=new Cu(gt.__wrapped__,gt.__chain__);return Rt.__actions__=Ku(gt.__actions__),Rt.__index__=gt.__index__,Rt.__values__=gt.__values__,Rt}function q1(gt,Rt,Jt){(Jt?Zl(gt,Rt,Jt):Rt===s)?Rt=1:Rt=Fl(Cs(Rt),0);var yn=gt==null?0:gt.length;if(!yn||Rt<1)return[];for(var Pn=0,qn=0,cr=Kr(ky(yn/Rt));Pn<yn;)cr[qn++]=fp(gt,Pn,Pn+=Rt);return cr}function Kw(gt){for(var Rt=-1,Jt=gt==null?0:gt.length,yn=0,Pn=[];++Rt<Jt;){var qn=gt[Rt];qn&&(Pn[yn++]=qn)}return Pn}function Fv(){var gt=arguments.length;if(!gt)return[];for(var Rt=Kr(gt-1),Jt=arguments[0],yn=gt;yn--;)Rt[yn-1]=arguments[yn];return ap(ws(Jt)?Ku(Jt):[Jt],Fn(Rt,1))}var Nv=Xo(function(gt,Rt){return Yl(gt)?pn(gt,Fn(Rt,1,Yl,!0)):[]}),pp=Xo(function(gt,Rt){var Jt=Ju(Rt);return Yl(Jt)&&(Jt=s),Yl(gt)?pn(gt,Fn(Rt,1,Yl,!0),is(Jt,2)):[]}),Uv=Xo(function(gt,Rt){var Jt=Ju(Rt);return Yl(Jt)&&(Jt=s),Yl(gt)?pn(gt,Fn(Rt,1,Yl,!0),s,Jt):[]});function Iu(gt,Rt,Jt){var yn=gt==null?0:gt.length;return yn?(Rt=Jt||Rt===s?1:Cs(Rt),fp(gt,Rt<0?0:Rt,yn)):[]}function Mp(gt,Rt,Jt){var yn=gt==null?0:gt.length;return yn?(Rt=Jt||Rt===s?1:Cs(Rt),Rt=yn-Rt,fp(gt,0,Rt<0?0:Rt)):[]}function Z1(gt,Rt){return gt&&gt.length?Iv(gt,is(Rt,3),!0,!0):[]}function Vl(gt,Rt){return gt&&gt.length?Iv(gt,is(Rt,3),!0):[]}function Xw(gt,Rt,Jt,yn){var Pn=gt==null?0:gt.length;return Pn?(Jt&&typeof Jt!="number"&&Zl(gt,Rt,Jt)&&(Jt=0,yn=Pn),Wn(gt,Rt,Jt,yn)):[]}function j_(gt,Rt,Jt){var yn=gt==null?0:gt.length;if(!yn)return-1;var Pn=Jt==null?0:Cs(Jt);return Pn<0&&(Pn=Fl(yn+Pn,0)),Ts(gt,is(Rt,3),Pn)}function Pp(gt,Rt,Jt){var yn=gt==null?0:gt.length;if(!yn)return-1;var Pn=yn-1;return Jt!==s&&(Pn=Cs(Jt),Pn=Jt<0?Fl(yn+Pn,0):Nl(Pn,yn-1)),Ts(gt,is(Rt,3),Pn,!0)}function Qw(gt){var Rt=gt==null?0:gt.length;return Rt?Fn(gt,1):[]}function yS(gt){var Rt=gt==null?0:gt.length;return Rt?Fn(gt,Ht):[]}function Jw(gt,Rt){var Jt=gt==null?0:gt.length;return Jt?(Rt=Rt===s?1:Cs(Rt),Fn(gt,Rt)):[]}function ex(gt){for(var Rt=-1,Jt=gt==null?0:gt.length,yn={};++Rt<Jt;){var Pn=gt[Rt];yn[Pn[0]]=Pn[1]}return yn}function my(gt){return gt&&gt.length?gt[0]:s}function tx(gt,Rt,Jt){var yn=gt==null?0:gt.length;if(!yn)return-1;var Pn=Jt==null?0:Cs(Jt);return Pn<0&&(Pn=Fl(yn+Pn,0)),lp(gt,Rt,Pn)}function nx(gt){var Rt=gt==null?0:gt.length;return Rt?fp(gt,0,-1):[]}var rx=Xo(function(gt){var Rt=_a(gt,R0);return Rt.length&&Rt[0]===gt[0]?_i(Rt):[]}),ix=Xo(function(gt){var Rt=Ju(gt),Jt=_a(gt,R0);return Rt===Ju(Jt)?Rt=s:Jt.pop(),Jt.length&&Jt[0]===gt[0]?_i(Jt,is(Rt,2)):[]}),_S=Xo(function(gt){var Rt=Ju(gt),Jt=_a(gt,R0);return Rt=typeof Rt=="function"?Rt:s,Rt&&Jt.pop(),Jt.length&&Jt[0]===gt[0]?_i(Jt,s,Rt):[]});function Y1(gt,Rt){return gt==null?"":xv.call(gt,Rt)}function Ju(gt){var Rt=gt==null?0:gt.length;return Rt?gt[Rt-1]:s}function K1(gt,Rt,Jt){var yn=gt==null?0:gt.length;if(!yn)return-1;var Pn=yn;return Jt!==s&&(Pn=Cs(Jt),Pn=Pn<0?Fl(yn+Pn,0):Nl(Pn,yn-1)),Rt===Rt?d_(gt,Rt,Pn):Ts(gt,hv,Pn,!0)}function Ou(gt,Rt){return gt&&gt.length?Ls(gt,Cs(Rt)):s}var ox=Xo(sx);function sx(gt,Rt){return gt&&gt.length&&Rt&&Rt.length?qp(gt,Rt):gt}function ax(gt,Rt,Jt){return gt&&gt.length&&Rt&&Rt.length?qp(gt,Rt,is(Jt,2)):gt}function vS(gt,Rt,Jt){return gt&&gt.length&&Rt&&Rt.length?qp(gt,Rt,s,Jt):gt}var bS=_m(function(gt,Rt){var Jt=gt==null?0:gt.length,yn=bt(gt,Rt);return Zu(gt,_a(Rt,function(Pn){return vm(Pn,Jt)?+Pn:Pn}).sort(gm)),yn});function lx(gt,Rt){var Jt=[];if(!(gt&&gt.length))return Jt;var yn=-1,Pn=[],qn=gt.length;for(Rt=is(Rt,3);++yn<qn;){var cr=gt[yn];Rt(cr,yn,gt)&&(Jt.push(cr),Pn.push(yn))}return Zu(gt,Pn),Jt}function z0(gt){return gt==null?gt:f0.call(gt)}function ux(gt,Rt,Jt){var yn=gt==null?0:gt.length;return yn?(Jt&&typeof Jt!="number"&&Zl(gt,Rt,Jt)?(Rt=0,Jt=yn):(Rt=Rt==null?0:Cs(Rt),Jt=Jt===s?yn:Cs(Jt)),fp(gt,Rt,Jt)):[]}function X1(gt,Rt){return R_(gt,Rt)}function Um(gt,Rt,Jt){return E0(gt,Rt,is(Jt,2))}function _c(gt,Rt){var Jt=gt==null?0:gt.length;if(Jt){var yn=R_(gt,Rt);if(yn<Jt&&_h(gt[yn],Rt))return yn}return-1}function wS(gt,Rt){return R_(gt,Rt,!0)}function Q1(gt,Rt,Jt){return E0(gt,Rt,is(Jt,2),!0)}function xS(gt,Rt){var Jt=gt==null?0:gt.length;if(Jt){var yn=R_(gt,Rt,!0)-1;if(_h(gt[yn],Rt))return yn}return-1}function SS(gt){return gt&&gt.length?R1(gt):[]}function AS(gt,Rt){return gt&&gt.length?R1(gt,is(Rt,2)):[]}function zv(gt){var Rt=gt==null?0:gt.length;return Rt?fp(gt,1,Rt):[]}function V0(gt,Rt,Jt){return gt&&gt.length?(Rt=Jt||Rt===s?1:Cs(Rt),fp(gt,0,Rt<0?0:Rt)):[]}function cx(gt,Rt,Jt){var yn=gt==null?0:gt.length;return yn?(Rt=Jt||Rt===s?1:Cs(Rt),Rt=yn-Rt,fp(gt,Rt<0?0:Rt,yn)):[]}function $y(gt,Rt){return gt&&gt.length?Iv(gt,is(Rt,3),!1,!0):[]}function Vv(gt,Rt){return gt&&gt.length?Iv(gt,is(Rt,3)):[]}var ES=Xo(function(gt){return jm(Fn(gt,1,Yl,!0))}),TS=Xo(function(gt){var Rt=Ju(gt);return Yl(Rt)&&(Rt=s),jm(Fn(gt,1,Yl,!0),is(Rt,2))}),CS=Xo(function(gt){var Rt=Ju(gt);return Rt=typeof Rt=="function"?Rt:s,jm(Fn(gt,1,Yl,!0),s,Rt)});function RS(gt){return gt&&gt.length?jm(gt):[]}function IS(gt,Rt){return gt&&gt.length?jm(gt,is(Rt,2)):[]}function OS(gt,Rt){return Rt=typeof Rt=="function"?Rt:s,gt&&gt.length?jm(gt,s,Rt):[]}function J1(gt){if(!(gt&&gt.length))return[];var Rt=0;return gt=bs(gt,function(Jt){if(Yl(Jt))return Rt=Fl(Jt.length,Rt),!0}),Zm(Rt,function(Jt){return _a(gt,qm(Jt))})}function W0(gt,Rt){if(!(gt&&gt.length))return[];var Jt=J1(gt);return Rt==null?Jt:_a(Jt,function(yn){return gu(Rt,s,yn)})}var PS=Xo(function(gt,Rt){return Yl(gt)?pn(gt,Rt):[]}),F_=Xo(function(gt){return C0(bs(gt,Yl))}),kS=Xo(function(gt){var Rt=Ju(gt);return Yl(Rt)&&(Rt=s),C0(bs(gt,Yl),is(Rt,2))}),Pl=Xo(function(gt){var Rt=Ju(gt);return Rt=typeof Rt=="function"?Rt:s,C0(bs(gt,Yl),s,Rt)}),G0=Xo(J1);function hx(gt,Rt){return P1(gt||[],Rt||[],ly)}function H0(gt,Rt){return P1(gt||[],Rt||[],_u)}var $0=Xo(function(gt){var Rt=gt.length,Jt=Rt>1?gt[Rt-1]:s;return Jt=typeof Jt=="function"?(gt.pop(),Jt):s,W0(gt,Jt)});function N_(gt){var Rt=zn(gt);return Rt.__chain__=!0,Rt}function fx(gt,Rt){return Rt(gt),gt}function Wv(gt,Rt){return Rt(gt)}var Gv=_m(function(gt){var Rt=gt.length,Jt=Rt?gt[0]:0,yn=this.__wrapped__,Pn=function(qn){return bt(qn,gt)};return Rt>1||this.__actions__.length||!(yn instanceof Is)||!vm(Jt)?this.thru(Pn):(yn=yn.slice(Jt,+Jt+(Rt?1:0)),yn.__actions__.push({func:Wv,args:[Pn],thisArg:s}),new Cu(yn,this.__chain__).thru(function(qn){return Rt&&!qn.length&&qn.push(s),qn}))});function ew(){return N_(this)}function tw(){return new Cu(this.value(),this.__chain__)}function DS(){this.__values__===s&&(this.__values__=Zy(this.value()));var gt=this.__index__>=this.__values__.length,Rt=gt?s:this.__values__[this.__index__++];return{done:gt,value:Rt}}function dx(){return this}function Hv(gt){for(var Rt,Jt=this;Jt instanceof $l;){var yn=bm(Jt);yn.__index__=0,yn.__values__=s,Rt?Pn.__wrapped__=yn:Rt=yn;var Pn=yn;Jt=Jt.__wrapped__}return Pn.__wrapped__=gt,Rt}function LS(){var gt=this.__wrapped__;if(gt instanceof Is){var Rt=gt;return this.__actions__.length&&(Rt=new Is(this)),Rt=Rt.reverse(),Rt.__actions__.push({func:Wv,args:[z0],thisArg:s}),new Cu(Rt,this.__chain__)}return this.thru(z0)}function nw(){return M1(this.__wrapped__,this.__actions__)}var BS=hy(function(gt,Rt,Jt){Hs.call(gt,Jt)?++gt[Jt]:lt(gt,Jt,1)});function rw(gt,Rt,Jt){var yn=ws(gt)?sp:Dn;return Jt&&Zl(gt,Rt,Jt)&&(Rt=s),yn(gt,is(Rt,3))}function iw(gt,Rt){var Jt=ws(gt)?bs:Zn;return Jt(gt,is(Rt,3))}var q0=Nw(j_),jS=Nw(Pp);function FS(gt,Rt){return Fn(Y0(gt,Rt),1)}function NS(gt,Rt){return Fn(Y0(gt,Rt),Ht)}function US(gt,Rt,Jt){return Jt=Jt===s?1:Cs(Jt),Fn(Y0(gt,Rt),Jt)}function gx(gt,Rt){var Jt=ws(gt)?pu:vn;return Jt(gt,is(Rt,3))}function px(gt,Rt){var Jt=ws(gt)?uv:Tn;return Jt(gt,is(Rt,3))}var Z0=hy(function(gt,Rt,Jt){Hs.call(gt,Jt)?gt[Jt].push(Rt):lt(gt,Jt,[Rt])});function zS(gt,Rt,Jt,yn){gt=_f(gt)?gt:X_(gt),Jt=Jt&&!yn?Cs(Jt):0;var Pn=gt.length;return Jt<0&&(Jt=Fl(Pn+Jt,0)),t1(gt)?Jt<=Pn&&gt.indexOf(Rt,Jt)>-1:!!Pn&&lp(gt,Rt,Jt)>-1}var mx=Xo(function(gt,Rt,Jt){var yn=-1,Pn=typeof Rt=="function",qn=_f(gt)?Kr(gt.length):[];return vn(gt,function(cr){qn[++yn]=Pn?gu(Rt,cr,Jt):Or(cr,Rt,Jt)}),qn}),U_=hy(function(gt,Rt,Jt){lt(gt,Jt,Rt)});function Y0(gt,Rt){var Jt=ws(gt)?_a:Ul;return Jt(gt,is(Rt,3))}function VS(gt,Rt,Jt,yn){return gt==null?[]:(ws(Rt)||(Rt=Rt==null?[]:[Rt]),Jt=yn?s:Jt,ws(Jt)||(Jt=Jt==null?[]:[Jt]),Ol(gt,Rt,Jt))}var WS=hy(function(gt,Rt,Jt){gt[Jt?0:1].push(Rt)},function(){return[[],[]]});function yx(gt,Rt,Jt){var yn=ws(gt)?o_:dv,Pn=arguments.length<3;return yn(gt,is(Rt,4),Jt,Pn,vn)}function _x(gt,Rt,Jt){var yn=ws(gt)?s_:dv,Pn=arguments.length<3;return yn(gt,is(Rt,4),Jt,Pn,Tn)}function GS(gt,Rt){var Jt=ws(gt)?bs:Zn;return Jt(gt,J0(is(Rt,3)))}function HS(gt){var Rt=ws(gt)?Rv:Rp;return Rt(gt)}function $S(gt,Rt,Jt){(Jt?Zl(gt,Rt,Jt):Rt===s)?Rt=1:Rt=Cs(Rt);var yn=ws(gt)?x0:dm;return yn(gt,Rt)}function ow(gt){var Rt=ws(gt)?S0:Bw;return Rt(gt)}function K0(gt){if(gt==null)return 0;if(_f(gt))return t1(gt)?Qm(gt):gt.length;var Rt=lu(gt);return Rt==Mn||Rt==kn?gt.size:Ns(gt).length}function X0(gt,Rt,Jt){var yn=ws(gt)?Ty:jw;return Jt&&Zl(gt,Rt,Jt)&&(Rt=s),yn(gt,is(Rt,3))}var qS=Xo(function(gt,Rt){if(gt==null)return[];var Jt=Rt.length;return Jt>1&&Zl(gt,Rt[0],Rt[1])?Rt=[]:Jt>2&&Zl(Rt[0],Rt[1],Rt[2])&&(Rt=[Rt[0]]),Ol(gt,Fn(Rt,1),[])}),Q0=ku||function(){return Tl.Date.now()};function $v(gt,Rt){if(typeof Rt!="function")throw new Tu(tt);return gt=Cs(gt),function(){if(--gt<1)return Rt.apply(this,arguments)}}function z_(gt,Rt,Jt){return Rt=Jt?s:Rt,Rt=gt&&Rt==null?gt.length:Rt,au(gt,nn,s,s,s,s,Rt)}function sw(gt,Rt){var Jt;if(typeof Rt!="function")throw new Tu(tt);return gt=Cs(gt),function(){return--gt>0&&(Jt=Rt.apply(this,arguments)),gt<=1&&(Rt=s),Jt}}var qy=Xo(function(gt,Rt,Jt){var yn=Et;if(Jt.length){var Pn=bp(Jt,M_(qy));yn|=mt}return au(gt,yn,Rt,Jt,Pn)}),aw=Xo(function(gt,Rt,Jt){var yn=Et|Ot;if(Jt.length){var Pn=bp(Jt,M_(aw));yn|=mt}return au(Rt,yn,gt,Jt,Pn)});function vx(gt,Rt,Jt){Rt=Jt?s:Rt;var yn=au(gt,Tt,s,s,s,s,s,Rt);return yn.placeholder=vx.placeholder,yn}function lw(gt,Rt,Jt){Rt=Jt?s:Rt;var yn=au(gt,It,s,s,s,s,s,Rt);return yn.placeholder=lw.placeholder,yn}function uw(gt,Rt,Jt){var yn,Pn,qn,cr,wr,Pr,uo=0,ao=!1,fo=!1,Po=!0;if(typeof gt!="function")throw new Tu(tt);Rt=kp(Rt)||0,Dl(Jt)&&(ao=!!Jt.leading,fo="maxWait"in Jt,qn=fo?Fl(kp(Jt.maxWait)||0,Rt):qn,Po="trailing"in Jt?!!Jt.trailing:Po);function Vo(Gl){var Dp=yn,Tm=Pn;return yn=Pn=s,uo=Gl,cr=gt.apply(Tm,Dp),cr}function Qo(Gl){return uo=Gl,wr=Hy(Ps,Rt),ao?Vo(Gl):cr}function xs(Gl){var Dp=Gl-Pr,Tm=Gl-uo,Mw=Rt-Dp;return fo?Nl(Mw,qn-Tm):Mw}function cs(Gl){var Dp=Gl-Pr,Tm=Gl-uo;return Pr===s||Dp>=Rt||Dp<0||fo&&Tm>=qn}function Ps(){var Gl=Q0();if(cs(Gl))return Bs(Gl);wr=Hy(Ps,xs(Gl))}function Bs(Gl){return wr=s,Po&&yn?Vo(Gl):(yn=Pn=s,cr)}function ju(){wr!==s&&D1(wr),uo=0,yn=Pr=Pn=wr=s}function Fu(){return wr===s?cr:Bs(Q0())}function _g(){var Gl=Q0(),Dp=cs(Gl);if(yn=arguments,Pn=this,Pr=Gl,Dp){if(wr===s)return Qo(Pr);if(fo)return D1(wr),wr=Hy(Ps,Rt),Vo(Pr)}return wr===s&&(wr=Hy(Ps,Rt)),cr}return _g.cancel=ju,_g.flush=Fu,_g}var bx=Xo(function(gt,Rt){return ln(gt,1,Rt)}),wx=Xo(function(gt,Rt,Jt){return ln(gt,kp(Rt)||0,Jt)});function xx(gt){return au(gt,xt)}function qv(gt,Rt){if(typeof gt!="function"||Rt!=null&&typeof Rt!="function")throw new Tu(tt);var Jt=function(){var yn=arguments,Pn=Rt?Rt.apply(this,yn):yn[0],qn=Jt.cache;if(qn.has(Pn))return qn.get(Pn);var cr=gt.apply(this,yn);return Jt.cache=qn.set(Pn,cr)||qn,cr};return Jt.cache=new(qv.Cache||Tp),Jt}qv.Cache=Tp;function J0(gt){if(typeof gt!="function")throw new Tu(tt);return function(){var Rt=arguments;switch(Rt.length){case 0:return!gt.call(this);case 1:return!gt.call(this,Rt[0]);case 2:return!gt.call(this,Rt[0],Rt[1]);case 3:return!gt.call(this,Rt[0],Rt[1],Rt[2])}return!gt.apply(this,Rt)}}function ZS(gt){return sw(2,gt)}var Sx=I_(function(gt,Rt){Rt=Rt.length==1&&ws(Rt[0])?_a(Rt[0],mu(is())):_a(Fn(Rt,1),mu(is()));var Jt=Rt.length;return Xo(function(yn){for(var Pn=-1,qn=Nl(yn.length,Jt);++Pn<qn;)yn[Pn]=Rt[Pn].call(this,yn[Pn]);return gu(gt,this,yn)})}),V_=Xo(function(gt,Rt){var Jt=bp(Rt,M_(V_));return au(gt,mt,s,Rt,Jt)}),cw=Xo(function(gt,Rt){var Jt=bp(Rt,M_(cw));return au(gt,Bt,s,Rt,Jt)}),Mu=_m(function(gt,Rt){return au(gt,sn,s,s,s,Rt)});function Zv(gt,Rt){if(typeof gt!="function")throw new Tu(tt);return Rt=Rt===s?Rt:Cs(Rt),Xo(gt,Rt)}function W_(gt,Rt){if(typeof gt!="function")throw new Tu(tt);return Rt=Rt==null?0:Fl(Cs(Rt),0),Xo(function(Jt){var yn=Jt[Rt],Pn=Fm(Jt,0,Rt);return yn&&ap(Pn,yn),gu(gt,this,Pn)})}function Yv(gt,Rt,Jt){var yn=!0,Pn=!0;if(typeof gt!="function")throw new Tu(tt);return Dl(Jt)&&(yn="leading"in Jt?!!Jt.leading:yn,Pn="trailing"in Jt?!!Jt.trailing:Pn),uw(gt,Rt,{leading:yn,maxWait:Rt,trailing:Pn})}function Ax(gt){return z_(gt,1)}function Ex(gt,Rt){return V_(k1(Rt),gt)}function YS(){if(!arguments.length)return[];var gt=arguments[0];return ws(gt)?gt:[gt]}function KS(gt){return Ft(gt,pt)}function XS(gt,Rt){return Rt=typeof Rt=="function"?Rt:s,Ft(gt,pt,Rt)}function QS(gt){return Ft(gt,vt|pt)}function JS(gt,Rt){return Rt=typeof Rt=="function"?Rt:s,Ft(gt,vt|pt,Rt)}function eA(gt,Rt){return Rt==null||rn(gt,Rt,tu(Rt))}function _h(gt,Rt){return gt===Rt||gt!==gt&&Rt!==Rt}var tA=Yp(Fr),Tx=Yp(function(gt,Rt){return gt>=Rt}),yy=br(function(){return arguments}())?br:function(gt){return Wl(gt)&&Hs.call(gt,"callee")&&!lm.call(gt,"callee")},ws=Kr.isArray,nA=sv?mu(sv):xo;function _f(gt){return gt!=null&&vy(gt.length)&&!zm(gt)}function Yl(gt){return Wl(gt)&&_f(gt)}function rA(gt){return gt===!0||gt===!1||Wl(gt)&&Ar(gt)==Mt}var _y=h0||_1,Cx=n_?mu(n_):mo;function iA(gt){return Wl(gt)&&gt.nodeType===1&&!Sm(gt)}function uu(gt){if(gt==null)return!0;if(_f(gt)&&(ws(gt)||typeof gt=="string"||typeof gt.splice=="function"||_y(gt)||q_(gt)||yy(gt)))return!gt.length;var Rt=lu(gt);if(Rt==Mn||Rt==kn)return!gt.size;if(k_(gt))return!Ns(gt).length;for(var Jt in gt)if(Hs.call(gt,Jt))return!1;return!0}function wm(gt,Rt){return vo(gt,Rt)}function hw(gt,Rt,Jt){Jt=typeof Jt=="function"?Jt:s;var yn=Jt?Jt(gt,Rt):s;return yn===s?vo(gt,Rt,s,Jt):!!yn}function G_(gt){if(!Wl(gt))return!1;var Rt=Ar(gt);return Rt==gn||Rt==Qt||typeof gt.message=="string"&&typeof gt.name=="string"&&!Sm(gt)}function H_(gt){return typeof gt=="number"&&Dy(gt)}function zm(gt){if(!Dl(gt))return!1;var Rt=Ar(gt);return Rt==hn||Rt==An||Rt==en||Rt==zr}function Rx(gt){return typeof gt=="number"&&gt==Cs(gt)}function vy(gt){return typeof gt=="number"&&gt>-1&&gt%1==0&&gt<=qt}function Dl(gt){var Rt=typeof gt;return gt!=null&&(Rt=="object"||Rt=="function")}function Wl(gt){return gt!=null&&typeof gt=="object"}var $_=av?mu(av):Bo;function Ix(gt,Rt){return gt===Rt||Ho(gt,Rt,V1(Rt))}function Ox(gt,Rt,Jt){return Jt=typeof Jt=="function"?Jt:s,Ho(gt,Rt,V1(Rt),Jt)}function Zs(gt){return xm(gt)&&gt!=+gt}function fw(gt){if(Hw(gt))throw new gs(et);return Go(gt)}function Mx(gt){return gt===null}function Px(gt){return gt==null}function xm(gt){return typeof gt=="number"||Wl(gt)&&Ar(gt)==Yn}function Sm(gt){if(!Wl(gt)||Ar(gt)!=ro)return!1;var Rt=am(gt);if(Rt===null)return!0;var Jt=Hs.call(Rt,"constructor")&&Rt.constructor;return typeof Jt=="function"&&Jt instanceof Jt&&Np.call(Jt)==E1}var e1=r_?mu(r_):No;function oA(gt){return Rx(gt)&&gt>=-qt&&gt<=qt}var kx=i_?mu(i_):_o;function t1(gt){return typeof gt=="string"||!ws(gt)&&Wl(gt)&&Ar(gt)==Kn}function mp(gt){return typeof gt=="symbol"||Wl(gt)&&Ar(gt)==vr}var q_=rm?mu(rm):es;function sA(gt){return gt===s}function aA(gt){return Wl(gt)&&lu(gt)==Wr}function lA(gt){return Wl(gt)&&Ar(gt)==Hr}var uA=Yp(Ds),n1=Yp(function(gt,Rt){return gt<=Rt});function Zy(gt){if(!gt)return[];if(_f(gt))return t1(gt)?Pu(gt):Ku(gt);if(Up&&gt[Up])return yv(gt[Up]());var Rt=lu(gt),Jt=Rt==Mn?Xm:Rt==kn?f_:X_;return Jt(gt)}function Am(gt){if(!gt)return gt===0?gt:0;if(gt=kp(gt),gt===Ht||gt===-Ht){var Rt=gt<0?-1:1;return Rt*Pt}return gt===gt?gt:0}function Cs(gt){var Rt=Am(gt),Jt=Rt%1;return Rt===Rt?Jt?Rt-Jt:Rt:0}function Dx(gt){return gt?kt(Cs(gt),0,$t):0}function kp(gt){if(typeof gt=="number")return gt;if(mp(gt))return wt;if(Dl(gt)){var Rt=typeof gt.valueOf=="function"?gt.valueOf():gt;gt=Dl(Rt)?Rt+"":Rt}if(typeof gt!="string")return gt===0?gt:+gt;gt=Iy(gt);var Jt=Do.test(gt);return Jt||zo.test(gt)?Rm(gt.slice(2),Jt?2:8):ko.test(gt)?wt:+gt}function r1(gt){return pm(gt,Bu(gt))}function dw(gt){return gt?kt(Cs(gt),-qt,qt):gt===0?gt:0}function Ys(gt){return gt==null?"":Yu(gt)}var yp=Zp(function(gt,Rt){if(k_(Rt)||_f(Rt)){pm(Rt,tu(Rt),gt);return}for(var Jt in Rt)Hs.call(Rt,Jt)&&ly(gt,Jt,Rt[Jt])}),Z_=Zp(function(gt,Rt){pm(Rt,Bu(Rt),gt)}),Vm=Zp(function(gt,Rt,Jt,yn){pm(Rt,Bu(Rt),gt,yn)}),gw=Zp(function(gt,Rt,Jt,yn){pm(Rt,tu(Rt),gt,yn)}),i1=_m(bt);function cA(gt,Rt){var Jt=hm(gt);return Rt==null?Jt:dt(Jt,Rt)}var Lx=Xo(function(gt,Rt){gt=Js(gt);var Jt=-1,yn=Rt.length,Pn=yn>2?Rt[2]:s;for(Pn&&Zl(Rt[0],Rt[1],Pn)&&(yn=1);++Jt<yn;)for(var qn=Rt[Jt],cr=Bu(qn),wr=-1,Pr=cr.length;++wr<Pr;){var uo=cr[wr],ao=gt[uo];(ao===s||_h(ao,sm[uo])&&!Hs.call(gt,uo))&&(gt[uo]=qn[uo])}return gt}),Bx=Xo(function(gt){return gt.push(s,dp),gu(a1,s,gt)});function hA(gt,Rt){return Im(gt,is(Rt,3),Gn)}function jx(gt,Rt){return Im(gt,is(Rt,3),or)}function Fx(gt,Rt){return gt==null?gt:jn(gt,is(Rt,3),Bu)}function pw(gt,Rt){return gt==null?gt:Qn(gt,is(Rt,3),Bu)}function Nx(gt,Rt){return gt&&Gn(gt,is(Rt,3))}function fA(gt,Rt){return gt&&or(gt,is(Rt,3))}function Ux(gt){return gt==null?[]:lr(gt,tu(gt))}function Wm(gt){return gt==null?[]:lr(gt,Bu(gt))}function o1(gt,Rt,Jt){var yn=gt==null?s:er(gt,Rt);return yn===s?Jt:yn}function zx(gt,Rt){return gt!=null&&W1(gt,Rt,Dr)}function s1(gt,Rt){return gt!=null&&W1(gt,Rt,co)}var Vx=kv(function(gt,Rt,Jt){Rt!=null&&typeof Rt.toString!="function"&&(Rt=$u.call(Rt)),gt[Rt]=Jt},g1(_d)),dA=kv(function(gt,Rt,Jt){Rt!=null&&typeof Rt.toString!="function"&&(Rt=$u.call(Rt)),Hs.call(gt,Rt)?gt[Rt].push(Jt):gt[Rt]=[Jt]},is),gA=Xo(Or);function tu(gt){return _f(gt)?Uy(gt):Ns(gt)}function Bu(gt){return _f(gt)?Uy(gt,!0):Vs(gt)}function Kv(gt,Rt){var Jt={};return Rt=is(Rt,3),Gn(gt,function(yn,Pn,qn){lt(Jt,Rt(yn,Pn,qn),yn)}),Jt}function Wx(gt,Rt){var Jt={};return Rt=is(Rt,3),Gn(gt,function(yn,Pn,qn){lt(Jt,Pn,Rt(yn,Pn,qn))}),Jt}var Gx=Zp(function(gt,Rt,Jt){Ws(gt,Rt,Jt)}),a1=Zp(function(gt,Rt,Jt,yn){Ws(gt,Rt,Jt,yn)}),Y_=_m(function(gt,Rt){var Jt={};if(gt==null)return Jt;var yn=!1;Rt=_a(Rt,function(qn){return qn=cy(qn,gt),yn||(yn=qn.length>1),qn}),pm(gt,Lv(gt),Jt),yn&&(Jt=Ft(Jt,vt|ft|pt,gp));for(var Pn=Rt.length;Pn--;)T0(Jt,Rt[Pn]);return Jt});function Hx(gt,Rt){return mw(gt,J0(is(Rt)))}var l1=_m(function(gt,Rt){return gt==null?{}:su(gt,Rt)});function mw(gt,Rt){if(gt==null)return{};var Jt=_a(Lv(gt),function(yn){return[yn]});return Rt=is(Rt),$s(gt,Jt,function(yn,Pn){return Rt(yn,Pn[0])})}function u1(gt,Rt,Jt){Rt=cy(Rt,gt);var yn=-1,Pn=Rt.length;for(Pn||(Pn=1,gt=s);++yn<Pn;){var qn=gt==null?s:gt[Qp(Rt[yn])];qn===s&&(yn=Pn,qn=Jt),gt=zm(qn)?qn.call(gt):qn}return gt}function c1(gt,Rt,Jt){return gt==null?gt:_u(gt,Rt,Jt)}function pA(gt,Rt,Jt,yn){return yn=typeof yn=="function"?yn:s,gt==null?gt:_u(gt,Rt,Jt,yn)}var $x=P0(tu),qx=P0(Bu);function mA(gt,Rt,Jt){var yn=ws(gt),Pn=yn||_y(gt)||q_(gt);if(Rt=is(Rt,4),Jt==null){var qn=gt&&gt.constructor;Pn?Jt=yn?new qn:[]:Dl(gt)?Jt=zm(qn)?hm(am(gt)):{}:Jt={}}return(Pn?pu:Gn)(gt,function(cr,wr,Pr){return Rt(Jt,cr,wr,Pr)}),Jt}function yA(gt,Rt){return gt==null?!0:T0(gt,Rt)}function K_(gt,Rt,Jt){return gt==null?gt:O1(gt,Rt,k1(Jt))}function yw(gt,Rt,Jt,yn){return yn=typeof yn=="function"?yn:s,gt==null?gt:O1(gt,Rt,k1(Jt),yn)}function X_(gt){return gt==null?[]:u_(gt,tu(gt))}function Zx(gt){return gt==null?[]:u_(gt,Bu(gt))}function _A(gt,Rt,Jt){return Jt===s&&(Jt=Rt,Rt=s),Jt!==s&&(Jt=kp(Jt),Jt=Jt===Jt?Jt:0),Rt!==s&&(Rt=kp(Rt),Rt=Rt===Rt?Rt:0),kt(kp(gt),Rt,Jt)}function _w(gt,Rt,Jt){return Rt=Am(Rt),Jt===s?(Jt=Rt,Rt=0):Jt=Am(Jt),gt=kp(gt),Sr(gt,Rt,Jt)}function vA(gt,Rt,Jt){if(Jt&&typeof Jt!="boolean"&&Zl(gt,Rt,Jt)&&(Rt=Jt=s),Jt===s&&(typeof Rt=="boolean"?(Jt=Rt,Rt=s):typeof gt=="boolean"&&(Jt=gt,gt=s)),gt===s&&Rt===s?(gt=0,Rt=1):(gt=Am(gt),Rt===s?(Rt=gt,gt=0):Rt=Am(Rt)),gt>Rt){var yn=gt;gt=Rt,Rt=yn}if(Jt||gt%1||Rt%1){var Pn=Ly();return Nl(gt+Pn*(Rt-gt+iu("1e-"+((Pn+"").length-1))),Rt)}return Jl(gt,Rt)}var by=Op(function(gt,Rt,Jt){return Rt=Rt.toLowerCase(),gt+(Jt?vw(Rt):Rt)});function vw(gt){return Ky(Ys(gt).toLowerCase())}function bw(gt){return gt=Ys(gt),gt&&gt.replace(ms,c_).replace(rr,"")}function f1(gt,Rt,Jt){gt=Ys(gt),Rt=Yu(Rt);var yn=gt.length;Jt=Jt===s?yn:kt(Cs(Jt),0,yn);var Pn=Jt;return Jt-=Rt.length,Jt>=0&&gt.slice(Jt,Pn)==Rt}function ww(gt){return gt=Ys(gt),gt&&Zr.test(gt)?gt.replace(ur,h_):gt}function bA(gt){return gt=Ys(gt),gt&&Cn.test(gt)?gt.replace(Sn,"\\$&"):gt}var wA=Op(function(gt,Rt,Jt){return gt+(Jt?"-":"")+Rt.toLowerCase()}),Yx=Op(function(gt,Rt,Jt){return gt+(Jt?" ":"")+Rt.toLowerCase()}),Kx=Nm("toLowerCase");function Xv(gt,Rt,Jt){gt=Ys(gt),Rt=Cs(Rt);var yn=Rt?Qm(gt):0;if(!Rt||yn>=Rt)return gt;var Pn=(Rt-yn)/2;return M0(oy(Pn),Jt)+gt+M0(ky(Pn),Jt)}function Gm(gt,Rt,Jt){gt=Ys(gt),Rt=Cs(Rt);var yn=Rt?Qm(gt):0;return Rt&&yn<Rt?gt+M0(Rt-yn,Jt):gt}function xw(gt,Rt,Jt){gt=Ys(gt),Rt=Cs(Rt);var yn=Rt?Qm(gt):0;return Rt&&yn<Rt?M0(Rt-yn,Jt)+gt:gt}function Q_(gt,Rt,Jt){return Jt||Rt==null?Rt=0:Rt&&(Rt=+Rt),Du(Ys(gt).replace(Hn,""),Rt||0)}function J_(gt,Rt,Jt){return(Jt?Zl(gt,Rt,Jt):Rt===s)?Rt=1:Rt=Cs(Rt),Cp(Ys(gt),Rt)}function em(){var gt=arguments,Rt=Ys(gt[0]);return gt.length<3?Rt:Rt.replace(gt[1],gt[2])}var tm=Op(function(gt,Rt,Jt){return gt+(Jt?"_":"")+Rt.toLowerCase()});function xA(gt,Rt,Jt){return Jt&&typeof Jt!="number"&&Zl(gt,Rt,Jt)&&(Rt=Jt=s),Jt=Jt===s?$t:Jt>>>0,Jt?(gt=Ys(gt),gt&&(typeof Rt=="string"||Rt!=null&&!e1(Rt))&&(Rt=Yu(Rt),!Rt&&Om(gt))?Fm(Pu(gt),0,Jt):gt.split(Rt,Jt)):[]}var Xx=Op(function(gt,Rt,Jt){return gt+(Jt?" ":"")+Ky(Rt)});function SA(gt,Rt,Jt){return gt=Ys(gt),Jt=Jt==null?0:kt(Cs(Jt),0,gt.length),Rt=Yu(Rt),gt.slice(Jt,Jt+Rt.length)==Rt}function Sw(gt,Rt,Jt){var yn=zn.templateSettings;Jt&&Zl(gt,Rt,Jt)&&(Rt=s),gt=Ys(gt),Rt=Vm({},Rt,yn,Kp);var Pn=Vm({},Rt.imports,yn.imports,Kp),qn=tu(Pn),cr=u_(Pn,qn),wr,Pr,uo=0,ao=Rt.interpolate||Eo,fo="__p += '",Po=m_((Rt.escape||Eo).source+"|"+ao.source+"|"+(ao===Mr?po:Eo).source+"|"+(Rt.evaluate||Eo).source+"|$","g"),Vo="//# sourceURL="+(Hs.call(Rt,"sourceURL")?(Rt.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jo+"]")+`
`;gt.replace(Po,function(cs,Ps,Bs,ju,Fu,_g){return Bs||(Bs=ju),fo+=gt.slice(uo,_g).replace(Rs,vp),Ps&&(wr=!0,fo+=`' +
__e(`+Ps+`) +
'`),Fu&&(Pr=!0,fo+=`';
`+Fu+`;
__p += '`),Bs&&(fo+=`' +
((__t = (`+Bs+`)) == null ? '' : __t) +
'`),uo=_g+cs.length,cs}),fo+=`';
`;var Qo=Hs.call(Rt,"variable")&&Rt.variable;if(!Qo)fo=`with (obj) {
`+fo+`
}
`;else if(xr.test(Qo))throw new gs(j);fo=(Pr?fo.replace(Gr,""):fo).replace(bn,"$1").replace(En,"$1;"),fo="function("+(Qo||"obj")+`) {
`+(Qo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(wr?", __e = _.escape":"")+(Pr?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fo+`return __p
}`;var xs=Qv(function(){return Fs(qn,Vo+"return "+fo).apply(s,cr)});if(xs.source=fo,G_(xs))throw xs;return xs}function Em(gt){return Ys(gt).toLowerCase()}function Yy(gt){return Ys(gt).toUpperCase()}function Qx(gt,Rt,Jt){if(gt=Ys(gt),gt&&(Jt||Rt===s))return Iy(gt);if(!gt||!(Rt=Yu(Rt)))return gt;var yn=Pu(gt),Pn=Pu(Rt),qn=Ym(yn,Pn),cr=Km(yn,Pn)+1;return Fm(yn,qn,cr).join("")}function Jx(gt,Rt,Jt){if(gt=Ys(gt),gt&&(Jt||Rt===s))return gt.slice(0,l0(gt)+1);if(!gt||!(Rt=Yu(Rt)))return gt;var yn=Pu(gt),Pn=Km(yn,Pu(Rt))+1;return Fm(yn,0,Pn).join("")}function AA(gt,Rt,Jt){if(gt=Ys(gt),gt&&(Jt||Rt===s))return gt.replace(Hn,"");if(!gt||!(Rt=Yu(Rt)))return gt;var yn=Pu(gt),Pn=Ym(yn,Pu(Rt));return Fm(yn,Pn).join("")}function d1(gt,Rt){var Jt=St,yn=Nt;if(Dl(Rt)){var Pn="separator"in Rt?Rt.separator:Pn;Jt="length"in Rt?Cs(Rt.length):Jt,yn="omission"in Rt?Yu(Rt.omission):yn}gt=Ys(gt);var qn=gt.length;if(Om(gt)){var cr=Pu(gt);qn=cr.length}if(Jt>=qn)return gt;var wr=Jt-Qm(yn);if(wr<1)return yn;var Pr=cr?Fm(cr,0,wr).join(""):gt.slice(0,wr);if(Pn===s)return Pr+yn;if(cr&&(wr+=Pr.length-wr),e1(Pn)){if(gt.slice(wr).search(Pn)){var uo,ao=Pr;for(Pn.global||(Pn=m_(Pn.source,Ys(io.exec(Pn))+"g")),Pn.lastIndex=0;uo=Pn.exec(ao);)var fo=uo.index;Pr=Pr.slice(0,fo===s?wr:fo)}}else if(gt.indexOf(Yu(Pn),wr)!=wr){var Po=Pr.lastIndexOf(Pn);Po>-1&&(Pr=Pr.slice(0,Po))}return Pr+yn}function Aw(gt){return gt=Ys(gt),gt&&pr.test(gt)?gt.replace(Bn,g_):gt}var ev=Op(function(gt,Rt,Jt){return gt+(Jt?" ":"")+Rt.toUpperCase()}),Ky=Nm("toUpperCase");function tv(gt,Rt,Jt){return gt=Ys(gt),Rt=Jt?s:Rt,Rt===s?mv(gt)?bv(gt):om(gt):gt.match(Rt)||[]}var Qv=Xo(function(gt,Rt){try{return gu(gt,s,Rt)}catch(Jt){return G_(Jt)?Jt:new gs(Jt)}}),eS=_m(function(gt,Rt){return pu(Rt,function(Jt){Jt=Qp(Jt),lt(gt,Jt,qy(gt[Jt],gt))}),gt});function Jv(gt){var Rt=gt==null?0:gt.length,Jt=is();return gt=Rt?_a(gt,function(yn){if(typeof yn[1]!="function")throw new Tu(tt);return[Jt(yn[0]),yn[1]]}):[],Xo(function(yn){for(var Pn=-1;++Pn<Rt;){var qn=gt[Pn];if(gu(qn[0],this,yn))return gu(qn[1],this,yn)}})}function Ew(gt){return Yt(Ft(gt,vt))}function g1(gt){return function(){return gt}}function nv(gt,Rt){return gt==null||gt!==gt?Rt:gt}var tS=Uw(),nS=Uw(!0);function _d(gt){return gt}function Tw(gt){return hs(typeof gt=="function"?gt:Ft(gt,vt))}function rS(gt){return ou(Ft(gt,vt))}function Xy(gt,Rt){return hp(gt,Ft(Rt,vt))}var EA=Xo(function(gt,Rt){return function(Jt){return Or(Jt,gt,Rt)}}),wy=Xo(function(gt,Rt){return function(Jt){return Or(gt,Jt,Rt)}});function Cw(gt,Rt,Jt){var yn=tu(Rt),Pn=lr(Rt,yn);Jt==null&&!(Dl(Rt)&&(Pn.length||!yn.length))&&(Jt=Rt,Rt=gt,gt=this,Pn=lr(Rt,tu(Rt)));var qn=!(Dl(Jt)&&"chain"in Jt)||!!Jt.chain,cr=zm(gt);return pu(Pn,function(wr){var Pr=Rt[wr];gt[wr]=Pr,cr&&(gt.prototype[wr]=function(){var uo=this.__chain__;if(qn||uo){var ao=gt(this.__wrapped__),fo=ao.__actions__=Ku(this.__actions__);return fo.push({func:Pr,args:arguments,thisArg:gt}),ao.__chain__=uo,ao}return Pr.apply(gt,ap([this.value()],arguments))})}),gt}function _b(){return Tl._===this&&(Tl._=c0),this}function Qy(){}function e0(gt){return gt=Cs(gt),Xo(function(Rt){return Ls(Rt,gt)})}var t0=z1(_a),p1=z1(sp),TA=z1(Ty);function iS(gt){return L0(gt)?qm(Qp(gt)):Ru(gt)}function rv(gt){return function(Rt){return gt==null?s:er(gt,Rt)}}var m1=Zo(),CA=Zo(!0);function y1(){return[]}function _1(){return!1}function RA(){return{}}function oS(){return""}function IA(){return!0}function sS(gt,Rt){if(gt=Cs(gt),gt<1||gt>qt)return[];var Jt=$t,yn=Nl(gt,$t);Rt=is(Rt),gt-=$t;for(var Pn=Zm(yn,Rt);++Jt<gt;)Rt(Jt);return Pn}function OA(gt){return ws(gt)?_a(gt,Qp):mp(gt)?[gt]:Ku(U0(Ys(gt)))}function aS(gt){var Rt=++xp;return Ys(gt)+Rt}var MA=Xu(function(gt,Rt){return gt+Rt},0),PA=Os("ceil"),v1=Xu(function(gt,Rt){return gt/Rt},1),b1=Os("floor");function w1(gt){return gt&&gt.length?$n(gt,_d,Fr):s}function kA(gt,Rt){return gt&&gt.length?$n(gt,is(Rt,2),Fr):s}function Rw(gt){return fv(gt,_d)}function Iw(gt,Rt){return fv(gt,is(Rt,2))}function xy(gt){return gt&&gt.length?$n(gt,_d,Ds):s}function DA(gt,Rt){return gt&&gt.length?$n(gt,is(Rt,2),Ds):s}var Ow=Xu(function(gt,Rt){return gt*Rt},1),lS=Os("round"),x1=Xu(function(gt,Rt){return gt-Rt},0);function LA(gt){return gt&&gt.length?Ry(gt,_d):0}function BA(gt,Rt){return gt&&gt.length?Ry(gt,is(Rt,2)):0}return zn.after=$v,zn.ary=z_,zn.assign=yp,zn.assignIn=Z_,zn.assignInWith=Vm,zn.assignWith=gw,zn.at=i1,zn.before=sw,zn.bind=qy,zn.bindAll=eS,zn.bindKey=aw,zn.castArray=YS,zn.chain=N_,zn.chunk=q1,zn.compact=Kw,zn.concat=Fv,zn.cond=Jv,zn.conforms=Ew,zn.constant=g1,zn.countBy=BS,zn.create=cA,zn.curry=vx,zn.curryRight=lw,zn.debounce=uw,zn.defaults=Lx,zn.defaultsDeep=Bx,zn.defer=bx,zn.delay=wx,zn.difference=Nv,zn.differenceBy=pp,zn.differenceWith=Uv,zn.drop=Iu,zn.dropRight=Mp,zn.dropRightWhile=Z1,zn.dropWhile=Vl,zn.fill=Xw,zn.filter=iw,zn.flatMap=FS,zn.flatMapDeep=NS,zn.flatMapDepth=US,zn.flatten=Qw,zn.flattenDeep=yS,zn.flattenDepth=Jw,zn.flip=xx,zn.flow=tS,zn.flowRight=nS,zn.fromPairs=ex,zn.functions=Ux,zn.functionsIn=Wm,zn.groupBy=Z0,zn.initial=nx,zn.intersection=rx,zn.intersectionBy=ix,zn.intersectionWith=_S,zn.invert=Vx,zn.invertBy=dA,zn.invokeMap=mx,zn.iteratee=Tw,zn.keyBy=U_,zn.keys=tu,zn.keysIn=Bu,zn.map=Y0,zn.mapKeys=Kv,zn.mapValues=Wx,zn.matches=rS,zn.matchesProperty=Xy,zn.memoize=qv,zn.merge=Gx,zn.mergeWith=a1,zn.method=EA,zn.methodOf=wy,zn.mixin=Cw,zn.negate=J0,zn.nthArg=e0,zn.omit=Y_,zn.omitBy=Hx,zn.once=ZS,zn.orderBy=VS,zn.over=t0,zn.overArgs=Sx,zn.overEvery=p1,zn.overSome=TA,zn.partial=V_,zn.partialRight=cw,zn.partition=WS,zn.pick=l1,zn.pickBy=mw,zn.property=iS,zn.propertyOf=rv,zn.pull=ox,zn.pullAll=sx,zn.pullAllBy=ax,zn.pullAllWith=vS,zn.pullAt=bS,zn.range=m1,zn.rangeRight=CA,zn.rearg=Mu,zn.reject=GS,zn.remove=lx,zn.rest=Zv,zn.reverse=z0,zn.sampleSize=$S,zn.set=c1,zn.setWith=pA,zn.shuffle=ow,zn.slice=ux,zn.sortBy=qS,zn.sortedUniq=SS,zn.sortedUniqBy=AS,zn.split=xA,zn.spread=W_,zn.tail=zv,zn.take=V0,zn.takeRight=cx,zn.takeRightWhile=$y,zn.takeWhile=Vv,zn.tap=fx,zn.throttle=Yv,zn.thru=Wv,zn.toArray=Zy,zn.toPairs=$x,zn.toPairsIn=qx,zn.toPath=OA,zn.toPlainObject=r1,zn.transform=mA,zn.unary=Ax,zn.union=ES,zn.unionBy=TS,zn.unionWith=CS,zn.uniq=RS,zn.uniqBy=IS,zn.uniqWith=OS,zn.unset=yA,zn.unzip=J1,zn.unzipWith=W0,zn.update=K_,zn.updateWith=yw,zn.values=X_,zn.valuesIn=Zx,zn.without=PS,zn.words=tv,zn.wrap=Ex,zn.xor=F_,zn.xorBy=kS,zn.xorWith=Pl,zn.zip=G0,zn.zipObject=hx,zn.zipObjectDeep=H0,zn.zipWith=$0,zn.entries=$x,zn.entriesIn=qx,zn.extend=Z_,zn.extendWith=Vm,Cw(zn,zn),zn.add=MA,zn.attempt=Qv,zn.camelCase=by,zn.capitalize=vw,zn.ceil=PA,zn.clamp=_A,zn.clone=KS,zn.cloneDeep=QS,zn.cloneDeepWith=JS,zn.cloneWith=XS,zn.conformsTo=eA,zn.deburr=bw,zn.defaultTo=nv,zn.divide=v1,zn.endsWith=f1,zn.eq=_h,zn.escape=ww,zn.escapeRegExp=bA,zn.every=rw,zn.find=q0,zn.findIndex=j_,zn.findKey=hA,zn.findLast=jS,zn.findLastIndex=Pp,zn.findLastKey=jx,zn.floor=b1,zn.forEach=gx,zn.forEachRight=px,zn.forIn=Fx,zn.forInRight=pw,zn.forOwn=Nx,zn.forOwnRight=fA,zn.get=o1,zn.gt=tA,zn.gte=Tx,zn.has=zx,zn.hasIn=s1,zn.head=my,zn.identity=_d,zn.includes=zS,zn.indexOf=tx,zn.inRange=_w,zn.invoke=gA,zn.isArguments=yy,zn.isArray=ws,zn.isArrayBuffer=nA,zn.isArrayLike=_f,zn.isArrayLikeObject=Yl,zn.isBoolean=rA,zn.isBuffer=_y,zn.isDate=Cx,zn.isElement=iA,zn.isEmpty=uu,zn.isEqual=wm,zn.isEqualWith=hw,zn.isError=G_,zn.isFinite=H_,zn.isFunction=zm,zn.isInteger=Rx,zn.isLength=vy,zn.isMap=$_,zn.isMatch=Ix,zn.isMatchWith=Ox,zn.isNaN=Zs,zn.isNative=fw,zn.isNil=Px,zn.isNull=Mx,zn.isNumber=xm,zn.isObject=Dl,zn.isObjectLike=Wl,zn.isPlainObject=Sm,zn.isRegExp=e1,zn.isSafeInteger=oA,zn.isSet=kx,zn.isString=t1,zn.isSymbol=mp,zn.isTypedArray=q_,zn.isUndefined=sA,zn.isWeakMap=aA,zn.isWeakSet=lA,zn.join=Y1,zn.kebabCase=wA,zn.last=Ju,zn.lastIndexOf=K1,zn.lowerCase=Yx,zn.lowerFirst=Kx,zn.lt=uA,zn.lte=n1,zn.max=w1,zn.maxBy=kA,zn.mean=Rw,zn.meanBy=Iw,zn.min=xy,zn.minBy=DA,zn.stubArray=y1,zn.stubFalse=_1,zn.stubObject=RA,zn.stubString=oS,zn.stubTrue=IA,zn.multiply=Ow,zn.nth=Ou,zn.noConflict=_b,zn.noop=Qy,zn.now=Q0,zn.pad=Xv,zn.padEnd=Gm,zn.padStart=xw,zn.parseInt=Q_,zn.random=vA,zn.reduce=yx,zn.reduceRight=_x,zn.repeat=J_,zn.replace=em,zn.result=u1,zn.round=lS,zn.runInContext=Rr,zn.sample=HS,zn.size=K0,zn.snakeCase=tm,zn.some=X0,zn.sortedIndex=X1,zn.sortedIndexBy=Um,zn.sortedIndexOf=_c,zn.sortedLastIndex=wS,zn.sortedLastIndexBy=Q1,zn.sortedLastIndexOf=xS,zn.startCase=Xx,zn.startsWith=SA,zn.subtract=x1,zn.sum=LA,zn.sumBy=BA,zn.template=Sw,zn.times=sS,zn.toFinite=Am,zn.toInteger=Cs,zn.toLength=Dx,zn.toLower=Em,zn.toNumber=kp,zn.toSafeInteger=dw,zn.toString=Ys,zn.toUpper=Yy,zn.trim=Qx,zn.trimEnd=Jx,zn.trimStart=AA,zn.truncate=d1,zn.unescape=Aw,zn.uniqueId=aS,zn.upperCase=ev,zn.upperFirst=Ky,zn.each=gx,zn.eachRight=px,zn.first=my,Cw(zn,function(){var gt={};return Gn(zn,function(Rt,Jt){Hs.call(zn.prototype,Jt)||(gt[Jt]=Rt)}),gt}(),{chain:!1}),zn.VERSION=_,pu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(gt){zn[gt].placeholder=zn}),pu(["drop","take"],function(gt,Rt){Is.prototype[gt]=function(Jt){Jt=Jt===s?1:Fl(Cs(Jt),0);var yn=this.__filtered__&&!Rt?new Is(this):this.clone();return yn.__filtered__?yn.__takeCount__=Nl(Jt,yn.__takeCount__):yn.__views__.push({size:Nl(Jt,$t),type:gt+(yn.__dir__<0?"Right":"")}),yn},Is.prototype[gt+"Right"]=function(Jt){return this.reverse()[gt](Jt).reverse()}}),pu(["filter","map","takeWhile"],function(gt,Rt){var Jt=Rt+1,yn=Jt==Kt||Jt==Ut;Is.prototype[gt]=function(Pn){var qn=this.clone();return qn.__iteratees__.push({iteratee:is(Pn,3),type:Jt}),qn.__filtered__=qn.__filtered__||yn,qn}}),pu(["head","last"],function(gt,Rt){var Jt="take"+(Rt?"Right":"");Is.prototype[gt]=function(){return this[Jt](1).value()[0]}}),pu(["initial","tail"],function(gt,Rt){var Jt="drop"+(Rt?"":"Right");Is.prototype[gt]=function(){return this.__filtered__?new Is(this):this[Jt](1)}}),Is.prototype.compact=function(){return this.filter(_d)},Is.prototype.find=function(gt){return this.filter(gt).head()},Is.prototype.findLast=function(gt){return this.reverse().find(gt)},Is.prototype.invokeMap=Xo(function(gt,Rt){return typeof gt=="function"?new Is(this):this.map(function(Jt){return Or(Jt,gt,Rt)})}),Is.prototype.reject=function(gt){return this.filter(J0(is(gt)))},Is.prototype.slice=function(gt,Rt){gt=Cs(gt);var Jt=this;return Jt.__filtered__&&(gt>0||Rt<0)?new Is(Jt):(gt<0?Jt=Jt.takeRight(-gt):gt&&(Jt=Jt.drop(gt)),Rt!==s&&(Rt=Cs(Rt),Jt=Rt<0?Jt.dropRight(-Rt):Jt.take(Rt-gt)),Jt)},Is.prototype.takeRightWhile=function(gt){return this.reverse().takeWhile(gt).reverse()},Is.prototype.toArray=function(){return this.take($t)},Gn(Is.prototype,function(gt,Rt){var Jt=/^(?:filter|find|map|reject)|While$/.test(Rt),yn=/^(?:head|last)$/.test(Rt),Pn=zn[yn?"take"+(Rt=="last"?"Right":""):Rt],qn=yn||/^find/.test(Rt);Pn&&(zn.prototype[Rt]=function(){var cr=this.__wrapped__,wr=yn?[1]:arguments,Pr=cr instanceof Is,uo=wr[0],ao=Pr||ws(cr),fo=function(Ps){var Bs=Pn.apply(zn,ap([Ps],wr));return yn&&Po?Bs[0]:Bs};ao&&Jt&&typeof uo=="function"&&uo.length!=1&&(Pr=ao=!1);var Po=this.__chain__,Vo=!!this.__actions__.length,Qo=qn&&!Po,xs=Pr&&!Vo;if(!qn&&ao){cr=xs?cr:new Is(this);var cs=gt.apply(cr,wr);return cs.__actions__.push({func:Wv,args:[fo],thisArg:s}),new Cu(cs,Po)}return Qo&&xs?gt.apply(this,wr):(cs=this.thru(fo),Qo?yn?cs.value()[0]:cs.value():cs)})}),pu(["pop","push","shift","sort","splice","unshift"],function(gt){var Rt=wp[gt],Jt=/^(?:push|sort|unshift)$/.test(gt)?"tap":"thru",yn=/^(?:pop|shift)$/.test(gt);zn.prototype[gt]=function(){var Pn=arguments;if(yn&&!this.__chain__){var qn=this.value();return Rt.apply(ws(qn)?qn:[],Pn)}return this[Jt](function(cr){return Rt.apply(ws(cr)?cr:[],Pn)})}}),Gn(Is.prototype,function(gt,Rt){var Jt=zn[Rt];if(Jt){var yn=Jt.name+"";Hs.call(km,yn)||(km[yn]=[]),km[yn].push({name:Rt,func:Jt})}}),km[Pv(s,Ot).name]=[{name:"wrapper",func:s}],Is.prototype.clone=T1,Is.prototype.reverse=C1,Is.prototype.value=Hp,zn.prototype.at=Gv,zn.prototype.chain=ew,zn.prototype.commit=tw,zn.prototype.next=DS,zn.prototype.plant=Hv,zn.prototype.reverse=LS,zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=nw,zn.prototype.first=zn.prototype.head,Up&&(zn.prototype[Up]=dx),zn},ey=Jm();_p?((_p.exports=ey)._=ey,Ey._=ey):Tl._=ey}).call(commonjsGlobal)})(lodash,lodash.exports);var lib={},uaParser_min={exports:{}};(function(i,o){(function(s,_){var $="1.0.2",et="",tt="?",j="function",it="undefined",st="object",ht="string",vt="major",ft="model",pt="name",ct="type",yt="vendor",Et="version",Ot="architecture",Lt="console",Tt="mobile",It="tablet",mt="smarttv",Bt="wearable",nn="embedded",sn=255,xt="Amazon",St="Apple",Nt="ASUS",Ct="BlackBerry",Vt="Browser",Kt="Chrome",Gt="Edge",Ut="Firefox",Ht="Google",qt="Huawei",Pt="LG",wt="Microsoft",$t="Motorola",Xt="Opera",un="Samsung",dn="Sony",mn="Xiaomi",an="Zebra",en="Facebook",Mt=function(Kn,vr){var yr={};for(var Wr in Kn)vr[Wr]&&vr[Wr].length%2===0?yr[Wr]=vr[Wr].concat(Kn[Wr]):yr[Wr]=Kn[Wr];return yr},jt=function(Kn){for(var vr={},yr=0;yr<Kn.length;yr++)vr[Kn[yr].toUpperCase()]=Kn[yr];return vr},Qt=function(Kn,vr){return typeof Kn===ht?gn(vr).indexOf(gn(Kn))!==-1:!1},gn=function(Kn){return Kn.toLowerCase()},hn=function(Kn){return typeof Kn===ht?Kn.replace(/[^\d\.]/g,et).split(".")[0]:_},An=function(Kn,vr){if(typeof Kn===ht)return Kn=Kn.replace(/^\s\s*/,et).replace(/\s\s*$/,et),typeof vr===it?Kn:Kn.substring(0,sn)},Mn=function(Kn,vr){for(var yr=0,Wr,Hr,Lr,Ir,jr,Co;yr<vr.length&&!jr;){var Jo=vr[yr],ps=vr[yr+1];for(Wr=Hr=0;Wr<Jo.length&&!jr;)if(jr=Jo[Wr++].exec(Kn),jr)for(Lr=0;Lr<ps.length;Lr++)Co=jr[++Hr],Ir=ps[Lr],typeof Ir===st&&Ir.length>0?Ir.length===2?typeof Ir[1]==j?this[Ir[0]]=Ir[1].call(this,Co):this[Ir[0]]=Ir[1]:Ir.length===3?typeof Ir[1]===j&&!(Ir[1].exec&&Ir[1].test)?this[Ir[0]]=Co?Ir[1].call(this,Co,Ir[2]):_:this[Ir[0]]=Co?Co.replace(Ir[1],Ir[2]):_:Ir.length===4&&(this[Ir[0]]=Co?Ir[3].call(this,Co.replace(Ir[1],Ir[2])):_):this[Ir]=Co||_;yr+=2}},Yn=function(Kn,vr){for(var yr in vr)if(typeof vr[yr]===st&&vr[yr].length>0){for(var Wr=0;Wr<vr[yr].length;Wr++)if(Qt(vr[yr][Wr],Kn))return yr===tt?_:yr}else if(Qt(vr[yr],Kn))return yr===tt?_:yr;return Kn},Nr={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ro={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},to={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Et,[pt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Et,[pt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[pt,Et],[/opios[\/ ]+([\w\.]+)/i],[Et,[pt,Xt+" Mini"]],[/\bopr\/([\w\.]+)/i],[Et,[pt,Xt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[pt,Et],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Et,[pt,"UC"+Vt]],[/\bqbcore\/([\w\.]+)/i],[Et,[pt,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[Et,[pt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Et,[pt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Et,[pt,"IE"]],[/yabrowser\/([\w\.]+)/i],[Et,[pt,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[pt,/(.+)/,"$1 Secure "+Vt],Et],[/\bfocus\/([\w\.]+)/i],[Et,[pt,Ut+" Focus"]],[/\bopt\/([\w\.]+)/i],[Et,[pt,Xt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Et,[pt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Et,[pt,"Dolphin"]],[/coast\/([\w\.]+)/i],[Et,[pt,Xt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Et,[pt,"MIUI "+Vt]],[/fxios\/([-\w\.]+)/i],[Et,[pt,Ut]],[/\bqihu|(qi?ho?o?|360)browser/i],[[pt,"360 "+Vt]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[pt,/(.+)/,"$1 "+Vt],Et],[/(comodo_dragon)\/([\w\.]+)/i],[[pt,/_/g," "],Et],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[pt,Et],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[pt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[pt,en],Et],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[pt,Et],[/\bgsa\/([\w\.]+) .*safari\//i],[Et,[pt,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Et,[pt,Kt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[pt,Kt+" WebView"],Et],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Et,[pt,"Android "+Vt]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[pt,Et],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[Et,[pt,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[Et,pt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[pt,[Et,Yn,Nr]],[/(webkit|khtml)\/([\w\.]+)/i],[pt,Et],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[pt,"Netscape"],Et],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Et,[pt,Ut+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[pt,Et]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Ot,"amd64"]],[/(ia32(?=;))/i],[[Ot,gn]],[/((?:i[346]|x)86)[;\)]/i],[[Ot,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Ot,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Ot,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Ot,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Ot,/ower/,et,gn]],[/(sun4\w)[;\)]/i],[[Ot,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Ot,gn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[ft,[yt,un],[ct,It]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[ft,[yt,un],[ct,Tt]],[/\((ip(?:hone|od)[\w ]*);/i],[ft,[yt,St],[ct,Tt]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[ft,[yt,St],[ct,It]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[ft,[yt,qt],[ct,It]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[ft,[yt,qt],[ct,Tt]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[ft,/_/g," "],[yt,mn],[ct,Tt]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[ft,/_/g," "],[yt,mn],[ct,It]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[ft,[yt,"OPPO"],[ct,Tt]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[ft,[yt,"Vivo"],[ct,Tt]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[ft,[yt,"Realme"],[ct,Tt]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[ft,[yt,$t],[ct,Tt]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[ft,[yt,$t],[ct,It]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[ft,[yt,Pt],[ct,It]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[ft,[yt,Pt],[ct,Tt]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[ft,[yt,"Lenovo"],[ct,It]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[ft,/_/g," "],[yt,"Nokia"],[ct,Tt]],[/(pixel c)\b/i],[ft,[yt,Ht],[ct,It]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[ft,[yt,Ht],[ct,Tt]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[ft,[yt,dn],[ct,Tt]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[ft,"Xperia Tablet"],[yt,dn],[ct,It]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[ft,[yt,"OnePlus"],[ct,Tt]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[ft,[yt,xt],[ct,It]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[ft,/(.+)/g,"Fire Phone $1"],[yt,xt],[ct,Tt]],[/(playbook);[-\w\),; ]+(rim)/i],[ft,yt,[ct,It]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[ft,[yt,Ct],[ct,Tt]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[ft,[yt,Nt],[ct,It]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[ft,[yt,Nt],[ct,Tt]],[/(nexus 9)/i],[ft,[yt,"HTC"],[ct,It]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[yt,[ft,/_/g," "],[ct,Tt]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[ft,[yt,"Acer"],[ct,It]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[ft,[yt,"Meizu"],[ct,Tt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[ft,[yt,"Sharp"],[ct,Tt]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[yt,ft,[ct,Tt]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[yt,ft,[ct,It]],[/(surface duo)/i],[ft,[yt,wt],[ct,It]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[ft,[yt,"Fairphone"],[ct,Tt]],[/(u304aa)/i],[ft,[yt,"AT&T"],[ct,Tt]],[/\bsie-(\w*)/i],[ft,[yt,"Siemens"],[ct,Tt]],[/\b(rct\w+) b/i],[ft,[yt,"RCA"],[ct,It]],[/\b(venue[\d ]{2,7}) b/i],[ft,[yt,"Dell"],[ct,It]],[/\b(q(?:mv|ta)\w+) b/i],[ft,[yt,"Verizon"],[ct,It]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[ft,[yt,"Barnes & Noble"],[ct,It]],[/\b(tm\d{3}\w+) b/i],[ft,[yt,"NuVision"],[ct,It]],[/\b(k88) b/i],[ft,[yt,"ZTE"],[ct,It]],[/\b(nx\d{3}j) b/i],[ft,[yt,"ZTE"],[ct,Tt]],[/\b(gen\d{3}) b.+49h/i],[ft,[yt,"Swiss"],[ct,Tt]],[/\b(zur\d{3}) b/i],[ft,[yt,"Swiss"],[ct,It]],[/\b((zeki)?tb.*\b) b/i],[ft,[yt,"Zeki"],[ct,It]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[yt,"Dragon Touch"],ft,[ct,It]],[/\b(ns-?\w{0,9}) b/i],[ft,[yt,"Insignia"],[ct,It]],[/\b((nxa|next)-?\w{0,9}) b/i],[ft,[yt,"NextBook"],[ct,It]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[yt,"Voice"],ft,[ct,Tt]],[/\b(lvtel\-)?(v1[12]) b/i],[[yt,"LvTel"],ft,[ct,Tt]],[/\b(ph-1) /i],[ft,[yt,"Essential"],[ct,Tt]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[ft,[yt,"Envizen"],[ct,It]],[/\b(trio[-\w\. ]+) b/i],[ft,[yt,"MachSpeed"],[ct,It]],[/\btu_(1491) b/i],[ft,[yt,"Rotor"],[ct,It]],[/(shield[\w ]+) b/i],[ft,[yt,"Nvidia"],[ct,It]],[/(sprint) (\w+)/i],[yt,ft,[ct,Tt]],[/(kin\.[onetw]{3})/i],[[ft,/\./g," "],[yt,wt],[ct,Tt]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[ft,[yt,an],[ct,It]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[ft,[yt,an],[ct,Tt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[yt,ft,[ct,Lt]],[/droid.+; (shield) bui/i],[ft,[yt,"Nvidia"],[ct,Lt]],[/(playstation [345portablevi]+)/i],[ft,[yt,dn],[ct,Lt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[ft,[yt,wt],[ct,Lt]],[/smart-tv.+(samsung)/i],[yt,[ct,mt]],[/hbbtv.+maple;(\d+)/i],[[ft,/^/,"SmartTV"],[yt,un],[ct,mt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[yt,Pt],[ct,mt]],[/(apple) ?tv/i],[yt,[ft,St+" TV"],[ct,mt]],[/crkey/i],[[ft,Kt+"cast"],[yt,Ht],[ct,mt]],[/droid.+aft(\w)( bui|\))/i],[ft,[yt,xt],[ct,mt]],[/\(dtv[\);].+(aquos)/i],[ft,[yt,"Sharp"],[ct,mt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[yt,An],[ft,An],[ct,mt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[ct,mt]],[/((pebble))app/i],[yt,ft,[ct,Bt]],[/droid.+; (glass) \d/i],[ft,[yt,Ht],[ct,Bt]],[/droid.+; (wt63?0{2,3})\)/i],[ft,[yt,an],[ct,Bt]],[/(quest( 2)?)/i],[ft,[yt,en],[ct,Bt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[yt,[ct,nn]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[ft,[ct,Tt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[ft,[ct,It]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[ct,It]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[ct,Tt]],[/(android[-\w\. ]{0,9});.+buil/i],[ft,[yt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Et,[pt,Gt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Et,[pt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[pt,Et],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Et,pt]],os:[[/microsoft (windows) (vista|xp)/i],[pt,Et],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[pt,[Et,Yn,ro]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[pt,"Windows"],[Et,Yn,ro]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[Et,/_/g,"."],[pt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[pt,"Mac OS"],[Et,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[Et,pt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[pt,Et],[/\(bb(10);/i],[Et,[pt,Ct]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Et,[pt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Et,[pt,Ut+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Et,[pt,"webOS"]],[/crkey\/([\d\.]+)/i],[Et,[pt,Kt+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[pt,"Chromium OS"],Et],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[pt,Et],[/(sunos) ?([\w\.\d]*)/i],[[pt,"Solaris"],Et],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[pt,Et]]},zr=function(Kn,vr){if(typeof Kn===st&&(vr=Kn,Kn=_),!(this instanceof zr))return new zr(Kn,vr).getResult();var yr=Kn||(typeof s!==it&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:et),Wr=vr?Mt(to,vr):to;return this.getBrowser=function(){var Hr={};return Hr[pt]=_,Hr[Et]=_,Mn.call(Hr,yr,Wr.browser),Hr.major=hn(Hr.version),Hr},this.getCPU=function(){var Hr={};return Hr[Ot]=_,Mn.call(Hr,yr,Wr.cpu),Hr},this.getDevice=function(){var Hr={};return Hr[yt]=_,Hr[ft]=_,Hr[ct]=_,Mn.call(Hr,yr,Wr.device),Hr},this.getEngine=function(){var Hr={};return Hr[pt]=_,Hr[Et]=_,Mn.call(Hr,yr,Wr.engine),Hr},this.getOS=function(){var Hr={};return Hr[pt]=_,Hr[Et]=_,Mn.call(Hr,yr,Wr.os),Hr},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return yr},this.setUA=function(Hr){return yr=typeof Hr===ht&&Hr.length>sn?An(Hr,sn):Hr,this},this.setUA(yr),this};zr.VERSION=$,zr.BROWSER=jt([pt,Et,vt]),zr.CPU=jt([Ot]),zr.DEVICE=jt([ft,yt,ct,Lt,Tt,mt,It,Bt,nn]),zr.ENGINE=zr.OS=jt([pt,Et]),i.exports&&(o=i.exports=zr),o.UAParser=zr;var In=typeof s!==it&&(s.jQuery||s.Zepto);if(In&&!In.ua){var kn=new zr;In.ua=kn.getResult(),In.ua.get=function(){return kn.getUA()},In.ua.set=function(Kn){kn.setUA(Kn);var vr=kn.getResult();for(var yr in vr)In.ua[yr]=vr[yr]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);Object.defineProperty(lib,"__esModule",{value:!0});function _interopDefault(i){return i&&typeof i=="object"&&"default"in i?i.default:i}var React=React$1,React__default=_interopDefault(React),UAParser=uaParser_min.exports,ClientUAInstance=new UAParser,browser=ClientUAInstance.getBrowser(),cpu=ClientUAInstance.getCPU(),device=ClientUAInstance.getDevice(),engine=ClientUAInstance.getEngine(),os=ClientUAInstance.getOS(),ua=ClientUAInstance.getUA(),setUa=function i(o){return ClientUAInstance.setUA(o)},parseUserAgent=function i(o){if(!o){console.error("No userAgent string was provided");return}var s=new UAParser(o);return{UA:s,browser:s.getBrowser(),cpu:s.getCPU(),device:s.getDevice(),engine:s.getEngine(),os:s.getOS(),ua:s.getUA(),setUserAgent:function($){return s.setUA($)}}},UAHelper=Object.freeze({ClientUAInstance,browser,cpu,device,engine,os,ua,setUa,parseUserAgent});function ownKeys(i,o){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(i);o&&(_=_.filter(function($){return Object.getOwnPropertyDescriptor(i,$).enumerable})),s.push.apply(s,_)}return s}function _objectSpread2(i){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(s),!0).forEach(function(_){_defineProperty(i,_,s[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(_){Object.defineProperty(i,_,Object.getOwnPropertyDescriptor(s,_))})}return i}function _typeof(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(o){return typeof o}:_typeof=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(i)}function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var s=0;s<o.length;s++){var _=o[s];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}function _createClass(i,o,s){return o&&_defineProperties(i.prototype,o),s&&_defineProperties(i,s),i}function _defineProperty(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}function _extends(){return _extends=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(i[_]=s[_])}return i},_extends.apply(this,arguments)}function _inherits(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf(i)}function _setPrototypeOf(i,o){return _setPrototypeOf=Object.setPrototypeOf||function(_,$){return _.__proto__=$,_},_setPrototypeOf(i,o)}function _objectWithoutPropertiesLoose(i,o){if(i==null)return{};var s={},_=Object.keys(i),$,et;for(et=0;et<_.length;et++)$=_[et],!(o.indexOf($)>=0)&&(s[$]=i[$]);return s}function _objectWithoutProperties(i,o){if(i==null)return{};var s=_objectWithoutPropertiesLoose(i,o),_,$;if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(i);for($=0;$<et.length;$++)_=et[$],!(o.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(i,_)&&(s[_]=i[_])}return s}function _assertThisInitialized(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _possibleConstructorReturn(i,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}function _slicedToArray(i,o){return _arrayWithHoles(i)||_iterableToArrayLimit(i,o)||_unsupportedIterableToArray(i,o)||_nonIterableRest()}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _iterableToArrayLimit(i,o){var s=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(s!=null){var _=[],$=!0,et=!1,tt,j;try{for(s=s.call(i);!($=(tt=s.next()).done)&&(_.push(tt.value),!(o&&_.length===o));$=!0);}catch(it){et=!0,j=it}finally{try{!$&&s.return!=null&&s.return()}finally{if(et)throw j}}return _}}function _unsupportedIterableToArray(i,o){if(i){if(typeof i=="string")return _arrayLikeToArray(i,o);var s=Object.prototype.toString.call(i).slice(8,-1);if(s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set")return Array.from(i);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(i,o)}}function _arrayLikeToArray(i,o){(o==null||o>i.length)&&(o=i.length);for(var s=0,_=new Array(o);s<o;s++)_[s]=i[s];return _}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},InitialDeviceTypes={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkDeviceType=function i(o){switch(o){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};case DeviceTypes.Embedded:return{isEmbedded:!0};default:return InitialDeviceTypes}},setUserAgent=function i(o){return setUa(o)},setDefaults=function i(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return o||s},getNavigatorInstance=function i(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function i(o){var s=getNavigatorInstance();return s&&s.platform&&(s.platform.indexOf(o)!==-1||s.platform==="MacIntel"&&s.maxTouchPoints>1&&!window.MSStream)},browserPayload=function i(o,s,_,$,et){return{isBrowser:o,browserMajorVersion:setDefaults(s.major),browserFullVersion:setDefaults(s.version),browserName:setDefaults(s.name),engineName:setDefaults(_.name),engineVersion:setDefaults(_.version),osName:setDefaults($.name),osVersion:setDefaults($.version),userAgent:setDefaults(et)}},mobilePayload=function i(o,s,_,$){return _objectSpread2({},o,{vendor:setDefaults(s.vendor),model:setDefaults(s.model),os:setDefaults(_.name),osVersion:setDefaults(_.version),ua:setDefaults($)})},smartTvPayload=function i(o,s,_,$){return{isSmartTV:o,engineName:setDefaults(s.name),engineVersion:setDefaults(s.version),osName:setDefaults(_.name),osVersion:setDefaults(_.version),userAgent:setDefaults($)}},consolePayload=function i(o,s,_,$){return{isConsole:o,engineName:setDefaults(s.name),engineVersion:setDefaults(s.version),osName:setDefaults(_.name),osVersion:setDefaults(_.version),userAgent:setDefaults($)}},wearablePayload=function i(o,s,_,$){return{isWearable:o,engineName:setDefaults(s.name),engineVersion:setDefaults(s.version),osName:setDefaults(_.name),osVersion:setDefaults(_.version),userAgent:setDefaults($)}},embeddedPayload=function i(o,s,_,$,et){return{isEmbedded:o,vendor:setDefaults(s.vendor),model:setDefaults(s.model),engineName:setDefaults(_.name),engineVersion:setDefaults(_.version),osName:setDefaults($.name),osVersion:setDefaults($.version),userAgent:setDefaults(et)}};function deviceDetect(i){var o=i?parseUserAgent(i):UAHelper,s=o.device,_=o.browser,$=o.engine,et=o.os,tt=o.ua,j=checkDeviceType(s.type),it=j.isBrowser,st=j.isMobile,ht=j.isTablet,vt=j.isSmartTV,ft=j.isConsole,pt=j.isWearable,ct=j.isEmbedded;if(it)return browserPayload(it,_,$,et,tt);if(vt)return smartTvPayload(vt,$,et,tt);if(ft)return consolePayload(ft,$,et,tt);if(st||ht)return mobilePayload(j,s,et,tt);if(pt)return wearablePayload(pt,$,et,tt);if(ct)return embeddedPayload(ct,s,$,et,tt)}var isMobileType=function i(o){var s=o.type;return s===DeviceTypes.Mobile},isTabletType=function i(o){var s=o.type;return s===DeviceTypes.Tablet},isMobileAndTabletType=function i(o){var s=o.type;return s===DeviceTypes.Mobile||s===DeviceTypes.Tablet},isSmartTVType=function i(o){var s=o.type;return s===DeviceTypes.SmartTv},isBrowserType=function i(o){var s=o.type;return s===DeviceTypes.Browser},isWearableType=function i(o){var s=o.type;return s===DeviceTypes.Wearable},isConsoleType=function i(o){var s=o.type;return s===DeviceTypes.Console},isEmbeddedType=function i(o){var s=o.type;return s===DeviceTypes.Embedded},getMobileVendor=function i(o){var s=o.vendor;return setDefaults(s)},getMobileModel=function i(o){var s=o.model;return setDefaults(s)},getDeviceType=function i(o){var s=o.type;return setDefaults(s,"browser")},isAndroidType=function i(o){var s=o.name;return s===OsTypes.Android},isWindowsType=function i(o){var s=o.name;return s===OsTypes.Windows},isMacOsType=function i(o){var s=o.name;return s===OsTypes.MAC_OS},isWinPhoneType=function i(o){var s=o.name;return s===OsTypes.WindowsPhone},isIOSType=function i(o){var s=o.name;return s===OsTypes.IOS},getOsVersion=function i(o){var s=o.version;return setDefaults(s)},getOsName=function i(o){var s=o.name;return setDefaults(s)},isChromeType=function i(o){var s=o.name;return s===BrowserTypes.Chrome},isFirefoxType=function i(o){var s=o.name;return s===BrowserTypes.Firefox},isChromiumType=function i(o){var s=o.name;return s===BrowserTypes.Chromium},isEdgeType=function i(o){var s=o.name;return s===BrowserTypes.Edge},isYandexType=function i(o){var s=o.name;return s===BrowserTypes.Yandex},isSafariType=function i(o){var s=o.name;return s===BrowserTypes.Safari||s===BrowserTypes.MobileSafari},isMobileSafariType=function i(o){var s=o.name;return s===BrowserTypes.MobileSafari},isOperaType=function i(o){var s=o.name;return s===BrowserTypes.Opera},isIEType=function i(o){var s=o.name;return s===BrowserTypes.InternetExplorer||s===BrowserTypes.Ie},isMIUIType=function i(o){var s=o.name;return s===BrowserTypes.MIUI},isSamsungBrowserType=function i(o){var s=o.name;return s===BrowserTypes.SamsungBrowser},getBrowserFullVersion=function i(o){var s=o.version;return setDefaults(s)},getBrowserVersion=function i(o){var s=o.major;return setDefaults(s)},getBrowserName=function i(o){var s=o.name;return setDefaults(s)},getEngineName=function i(o){var s=o.name;return setDefaults(s)},getEngineVersion=function i(o){var s=o.version;return setDefaults(s)},isElectronType=function i(){var o=getNavigatorInstance(),s=o&&o.userAgent&&o.userAgent.toLowerCase();return typeof s=="string"?/electron/.test(s):!1},isEdgeChromiumType=function i(o){return typeof o=="string"&&o.indexOf("Edg/")!==-1},getIOS13=function i(){var o=getNavigatorInstance();return o&&(/iPad|iPhone|iPod/.test(o.platform)||o.platform==="MacIntel"&&o.maxTouchPoints>1)&&!window.MSStream},getIPad13=function i(){return isIOS13Check("iPad")},getIphone13=function i(){return isIOS13Check("iPhone")},getIPod13=function i(){return isIOS13Check("iPod")},getUseragent=function i(o){return setDefaults(o)};function buildSelectorsObject(i){var o=i||UAHelper,s=o.device,_=o.browser,$=o.os,et=o.engine,tt=o.ua;return{isSmartTV:isSmartTVType(s),isConsole:isConsoleType(s),isWearable:isWearableType(s),isEmbedded:isEmbeddedType(s),isMobileSafari:isMobileSafariType(_)||getIPad13(),isChromium:isChromiumType(_),isMobile:isMobileAndTabletType(s)||getIPad13(),isMobileOnly:isMobileType(s),isTablet:isTabletType(s)||getIPad13(),isBrowser:isBrowserType(s),isDesktop:isBrowserType(s),isAndroid:isAndroidType($),isWinPhone:isWinPhoneType($),isIOS:isIOSType($)||getIPad13(),isChrome:isChromeType(_),isFirefox:isFirefoxType(_),isSafari:isSafariType(_),isOpera:isOperaType(_),isIE:isIEType(_),osVersion:getOsVersion($),osName:getOsName($),fullBrowserVersion:getBrowserFullVersion(_),browserVersion:getBrowserVersion(_),browserName:getBrowserName(_),mobileVendor:getMobileVendor(s),mobileModel:getMobileModel(s),engineName:getEngineName(et),engineVersion:getEngineVersion(et),getUA:getUseragent(tt),isEdge:isEdgeType(_)||isEdgeChromiumType(tt),isYandex:isYandexType(_),deviceType:getDeviceType(s),isIOS13:getIOS13(),isIPad13:getIPad13(),isIPhone13:getIphone13(),isIPod13:getIPod13(),isElectron:isElectronType(),isEdgeChromium:isEdgeChromiumType(tt),isLegacyEdge:isEdgeType(_)&&!isEdgeChromiumType(tt),isWindows:isWindowsType($),isMacOs:isMacOsType($),isMIUI:isMIUIType(_),isSamsungBrowser:isSamsungBrowserType(_)}}var isSmartTV=isSmartTVType(device),isConsole=isConsoleType(device),isWearable=isWearableType(device),isEmbedded=isEmbeddedType(device),isMobileSafari=isMobileSafariType(browser)||getIPad13(),isChromium=isChromiumType(browser),isMobile=isMobileAndTabletType(device)||getIPad13(),isMobileOnly=isMobileType(device),isTablet=isTabletType(device)||getIPad13(),isBrowser=isBrowserType(device),isDesktop=isBrowserType(device),isAndroid=isAndroidType(os),isWinPhone=isWinPhoneType(os),isIOS=isIOSType(os)||getIPad13(),isChrome=isChromeType(browser),isFirefox=isFirefoxType(browser),isSafari=isSafariType(browser),isOpera=isOperaType(browser),isIE=isIEType(browser),osVersion=getOsVersion(os),osName=getOsName(os),fullBrowserVersion=getBrowserFullVersion(browser),browserVersion=getBrowserVersion(browser),browserName=getBrowserName(browser),mobileVendor=getMobileVendor(device),mobileModel=getMobileModel(device),engineName=getEngineName(engine),engineVersion=getEngineVersion(engine),getUA=getUseragent(ua),isEdge=isEdgeType(browser)||isEdgeChromiumType(ua),isYandex=isYandexType(browser),deviceType=getDeviceType(device),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(ua),isLegacyEdge=isEdgeType(browser)&&!isEdgeChromiumType(ua),isWindows=isWindowsType(os),isMacOs=isMacOsType(os),isMIUI=isMIUIType(browser),isSamsungBrowser=isSamsungBrowserType(browser),getSelectorsByUserAgent=function i(o){if(!o||typeof o!="string"){console.error("No valid user agent string was provided");return}var s=parseUserAgent(o),_=s.device,$=s.browser,et=s.os,tt=s.engine,j=s.ua;return buildSelectorsObject({device:_,browser:$,os:et,engine:tt,ua:j})},AndroidView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isAndroid?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},BrowserView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isBrowser?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},IEView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIE?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},IOSView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIOS?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},MobileView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isMobile?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},TabletView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isTablet?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},WinPhoneView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWinPhone?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},MobileOnlyView=function i(o){var s=o.renderWithFragment,_=o.children;o.viewClassName,o.style;var $=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},SmartTVView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isSmartTV?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},ConsoleView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isConsole?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},WearableView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWearable?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},CustomView=function i(o){var s=o.renderWithFragment,_=o.children;o.viewClassName,o.style;var $=o.condition,et=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style","condition"]);return $?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",et,_):null};function withOrientationChange(i){return function(o){_inherits(s,o);function s(_){var $;return _classCallCheck(this,s),$=_possibleConstructorReturn(this,_getPrototypeOf(s).call(this,_)),$.isEventListenerAdded=!1,$.handleOrientationChange=$.handleOrientationChange.bind(_assertThisInitialized($)),$.onOrientationChange=$.onOrientationChange.bind(_assertThisInitialized($)),$.onPageLoad=$.onPageLoad.bind(_assertThisInitialized($)),$.state={isLandscape:!1,isPortrait:!1},$}return _createClass(s,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var $=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:$===0,isLandscape:$===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(i,_extends({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),s}(React__default.Component)}function useMobileOrientation(){var i=React.useState(function(){var et=window.innerWidth>window.innerHeight?90:0;return{isPortrait:et===0,isLandscape:et===90,orientation:et===0?"portrait":"landscape"}}),o=_slicedToArray(i,2),s=o[0],_=o[1],$=React.useCallback(function(){var et=window.innerWidth>window.innerHeight?90:0,tt={isPortrait:et===0,isLandscape:et===90,orientation:et===0?"portrait":"landscape"};s.orientation!==tt.orientation&&_(tt)},[s.orientation]);return React.useEffect(function(){return(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&($(),window.addEventListener("load",$,!1),window.addEventListener("resize",$,!1)),function(){window.removeEventListener("resize",$,!1),window.removeEventListener("load",$,!1)}},[$]),s}function useDeviceData(i){var o=i||window.navigator.userAgent;return parseUserAgent(o)}function useDeviceSelectors(i){var o=i||window.navigator.userAgent,s=useDeviceData(o),_=buildSelectorsObject(s);return[_,s]}lib.AndroidView=AndroidView;lib.BrowserTypes=BrowserTypes;lib.BrowserView=BrowserView;lib.ConsoleView=ConsoleView;lib.CustomView=CustomView;lib.IEView=IEView;lib.IOSView=IOSView;lib.MobileOnlyView=MobileOnlyView;lib.MobileView=MobileView;lib.OsTypes=OsTypes;lib.SmartTVView=SmartTVView;lib.TabletView=TabletView;lib.WearableView=WearableView;lib.WinPhoneView=WinPhoneView;lib.browserName=browserName;lib.browserVersion=browserVersion;lib.deviceDetect=deviceDetect;lib.deviceType=deviceType;lib.engineName=engineName;lib.engineVersion=engineVersion;lib.fullBrowserVersion=fullBrowserVersion;lib.getSelectorsByUserAgent=getSelectorsByUserAgent;lib.getUA=getUA;lib.isAndroid=isAndroid;lib.isBrowser=isBrowser;lib.isChrome=isChrome;lib.isChromium=isChromium;lib.isConsole=isConsole;lib.isDesktop=isDesktop;lib.isEdge=isEdge;lib.isEdgeChromium=isEdgeChromium;lib.isElectron=isElectron;lib.isEmbedded=isEmbedded;lib.isFirefox=isFirefox;lib.isIE=isIE;lib.isIOS=isIOS;lib.isIOS13=isIOS13;lib.isIPad13=isIPad13;lib.isIPhone13=isIPhone13;lib.isIPod13=isIPod13;lib.isLegacyEdge=isLegacyEdge;lib.isMIUI=isMIUI;lib.isMacOs=isMacOs;lib.isMobile=isMobile;lib.isMobileOnly=isMobileOnly;lib.isMobileSafari=isMobileSafari;lib.isOpera=isOpera;lib.isSafari=isSafari;lib.isSamsungBrowser=isSamsungBrowser;lib.isSmartTV=isSmartTV;lib.isTablet=isTablet;lib.isWearable=isWearable;lib.isWinPhone=isWinPhone;lib.isWindows=isWindows;lib.isYandex=isYandex;lib.mobileModel=mobileModel;lib.mobileVendor=mobileVendor;lib.osName=osName;lib.osVersion=osVersion;lib.parseUserAgent=parseUserAgent;lib.setUserAgent=setUserAgent;lib.useDeviceData=useDeviceData;lib.useDeviceSelectors=useDeviceSelectors;lib.useMobileOrientation=useMobileOrientation;lib.withOrientationChange=withOrientationChange;var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,o,s)=>o in i?__defProp(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s,__spreadValues=(i,o)=>{for(var s in o||(o={}))__hasOwnProp.call(o,s)&&__defNormalProp(i,s,o[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(o))__propIsEnum.call(o,s)&&__defNormalProp(i,s,o[s]);return i},__publicField=(i,o,s)=>(__defNormalProp(i,typeof o!="symbol"?o+"":o,s),s),dist={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(module,exports){(function(i,o){module.exports=o()})(window,function(){return function(i){function o(st){for(var ht,vt,ft=st[0],pt=st[1],ct=0,yt=[];ct<ft.length;ct++)vt=ft[ct],Object.prototype.hasOwnProperty.call(_,vt)&&_[vt]&&yt.push(_[vt][0]),_[vt]=0;for(ht in pt)Object.prototype.hasOwnProperty.call(pt,ht)&&(i[ht]=pt[ht]);for(it&&it(st);yt.length;)yt.shift()()}var s={},_={0:0};function $(st){if(s[st])return s[st].exports;var ht=s[st]={i:st,l:!1,exports:{}};return i[st].call(ht.exports,ht,ht.exports,$),ht.l=!0,ht.exports}$.e=function(){return Promise.resolve()},$.m=i,$.c=s,$.d=function(st,ht,vt){$.o(st,ht)||Object.defineProperty(st,ht,{enumerable:!0,get:vt})},$.r=function(st){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(st,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(st,"__esModule",{value:!0})},$.t=function(st,ht){if(1&ht&&(st=$(st)),8&ht||4&ht&&typeof st=="object"&&st&&st.__esModule)return st;var vt=Object.create(null);if($.r(vt),Object.defineProperty(vt,"default",{enumerable:!0,value:st}),2&ht&&typeof st!="string")for(var ft in st)$.d(vt,ft,function(pt){return st[pt]}.bind(null,ft));return vt},$.n=function(st){var ht=st&&st.__esModule?function(){return st.default}:function(){return st};return $.d(ht,"a",ht),ht},$.o=function(st,ht){return Object.prototype.hasOwnProperty.call(st,ht)},$.p="",$.oe=function(st){throw console.error(st),st};var et=window.webpackJsonpFormantRealtimeSDK=window.webpackJsonpFormantRealtimeSDK||[],tt=et.push.bind(et);et.push=o,et=et.slice();for(var j=0;j<et.length;j++)o(et[j]);var it=tt;return $($.s=226)}([function(i,o,s){s.d(o,"a",function(){return qt});const _=Math.pow(2,20),$=_;var et=s(54),tt=s.n(et),j=s(15),it=s(53),st=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),ht=new Uint8Array(16);function vt(){if(!st)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return st(ht)}for(var ft=[],pt=0;pt<256;++pt)ft[pt]=(pt+256).toString(16).substr(1);var ct=function(wt,$t){var Xt=$t||0,un=ft;return[un[wt[Xt++]],un[wt[Xt++]],un[wt[Xt++]],un[wt[Xt++]],"-",un[wt[Xt++]],un[wt[Xt++]],"-",un[wt[Xt++]],un[wt[Xt++]],"-",un[wt[Xt++]],un[wt[Xt++]],"-",un[wt[Xt++]],un[wt[Xt++]],un[wt[Xt++]],un[wt[Xt++]],un[wt[Xt++]],un[wt[Xt++]]].join("")},yt=function(wt,$t,Xt){var un=$t&&Xt||0;typeof wt=="string"&&($t=wt==="binary"?new Array(16):null,wt=null);var dn=(wt=wt||{}).random||(wt.rng||vt)();if(dn[6]=15&dn[6]|64,dn[8]=63&dn[8]|128,$t)for(var mn=0;mn<16;++mn)$t[un+mn]=dn[mn];return $t||ct(dn)},Et=s(16),Ot=s(6),Lt=s(29),Tt=s(35),It=s.n(Tt);function mt(wt){return It()(wt,{cycles:!0})}var Bt=function(wt,$t){var Xt={};for(var un in wt)Object.prototype.hasOwnProperty.call(wt,un)&&$t.indexOf(un)<0&&(Xt[un]=wt[un]);if(wt!=null&&typeof Object.getOwnPropertySymbols=="function"){var dn=0;for(un=Object.getOwnPropertySymbols(wt);dn<un.length;dn++)$t.indexOf(un[dn])<0&&Object.prototype.propertyIsEnumerable.call(wt,un[dn])&&(Xt[un[dn]]=wt[un[dn]])}return Xt};function nn(wt,$t={}){const Xt=en=>$t.redacted!==!1?Object(Lt.a)(en):en;if(!wt.stack)return{message:mt(Xt(wt))};const{name:un,message:dn,stack:mn}=wt,an=Bt(wt,["name","message","stack"]);return{name:un,message:dn!==void 0?dn:mt(Xt(wt)),stack:mn,meta:an&&Object.keys(an).length===0?void 0:Xt(an)}}function sn(wt,$t={}){const{message:Xt,stack:un,meta:dn}=nn(wt,$t);return`${un||Xt||""}${dn&&Object.keys(dn).length>0?` -- ${mt(dn)}`:""}`}var xt=s(99),St=s.n(xt),Nt=function(wt,$t,Xt,un){return new(Xt||(Xt=Promise))(function(dn,mn){function an(jt){try{Mt(un.next(jt))}catch(Qt){mn(Qt)}}function en(jt){try{Mt(un.throw(jt))}catch(Qt){mn(Qt)}}function Mt(jt){var Qt;jt.done?dn(jt.value):(Qt=jt.value,Qt instanceof Xt?Qt:new Xt(function(gn){gn(Qt)})).then(an,en)}Mt((un=un.apply(wt,$t||[])).next())})},Ct=function(wt,$t){var Xt={};for(var un in wt)Object.prototype.hasOwnProperty.call(wt,un)&&$t.indexOf(un)<0&&(Xt[un]=wt[un]);if(wt!=null&&typeof Object.getOwnPropertySymbols=="function"){var dn=0;for(un=Object.getOwnPropertySymbols(wt);dn<un.length;dn++)$t.indexOf(un[dn])<0&&Object.prototype.propertyIsEnumerable.call(wt,un[dn])&&(Xt[un[dn]]=wt[un[dn]])}return Xt};class Vt extends St.a{constructor($t,Xt){super(),this.endpoint=$t,this.meta=Xt,this.logClient=this.getLogClient()}getLogClient(){return Nt(this,void 0,void 0,function*(){const{LogClient:$t}=yield Promise.resolve().then(s.bind(null,228));return new $t(this.endpoint)})}log($t,Xt){return Nt(this,void 0,void 0,function*(){const{level:un,message:dn,error:mn}=$t,an=Ct($t,["level","message","error"]);this.emit("logged");try{yield(yield this.logClient).log([{timestamp:new Date().toISOString(),level:un,message:dn.substring(0,1e3),error:mn!==void 0?nn(mn):void 0,meta:Object.assign(Object.assign({},an),this.meta())}])}catch(en){console.error(`Failed to log to log-api: ${sn(en)}`)}Xt()})}}var Kt=function(wt,$t){var Xt={};for(var un in wt)Object.prototype.hasOwnProperty.call(wt,un)&&$t.indexOf(un)<0&&(Xt[un]=wt[un]);if(wt!=null&&typeof Object.getOwnPropertySymbols=="function"){var dn=0;for(un=Object.getOwnPropertySymbols(wt);dn<un.length;dn++)$t.indexOf(un[dn])<0&&Object.prototype.propertyIsEnumerable.call(wt,un[dn])&&(Xt[un[dn]]=wt[un[dn]])}return Xt};const Gt={app:Ot.a,namespace:Ot.i,buildTag:Ot.b,instanceId:yt()};let Ut={};const Ht=Ot.e?Et.format.printf(wt=>{var{timestamp:$t,level:Xt,message:un,error:dn}=wt,mn=Kt(wt,["timestamp","level","message","error"]);const an=Object.assign(Object.assign({timestamp:$t?new Date($t).getTime():new Date().getTime(),level:Xt.toUpperCase(),message:un},dn?{error:nn(dn)}:{}),{meta:Object.assign(Object.assign(Object.assign({},Gt),Ut),mn)});try{return JSON.stringify(an)}catch{return tt()(an)}}):Et.format.printf(wt=>{var{timestamp:$t,level:Xt,message:un,error:dn}=wt,mn=Kt(wt,["timestamp","level","message","error"]);let an=`${$t||new Date().toISOString()} ${Xt.toUpperCase()}: ${un} `;if(Object.keys(mn).length>0)try{an+=JSON.stringify(mn)}catch{an+=tt()(mn)}return dn&&(an+=`
${sn(dn)}`),an}),qt=Object(Et.createLogger)({level:Ot.f});if(Ot.g&&qt.add(new Et.transports.Console({format:Ht,level:"debug"})),Ot.d&&qt.add(new Vt(Ot.d,()=>Object.assign(Object.assign(Object.assign({},Gt),Ut),{level:"debug"}))),Ot.h){const wt=it.resolve(j.tmpdir(),`silly-${Ot.a}.log`);qt.debug("Logging silly logs to file",{filename:wt}),qt.add(new Et.transports.File({filename:wt,maxsize:1*$,maxFiles:10,format:Et.format.combine((Pt="silly",Object(Et.format)($t=>$t.level===Pt&&$t)()),Ht),level:"silly"}))}var Pt},function(i,o,s){s.d(o,"a",function(){return _});const _={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}},function(i,o){var s,_,$=i.exports={};function et(){throw new Error("setTimeout has not been defined")}function tt(){throw new Error("clearTimeout has not been defined")}function j(Et){if(s===setTimeout)return setTimeout(Et,0);if((s===et||!s)&&setTimeout)return s=setTimeout,setTimeout(Et,0);try{return s(Et,0)}catch{try{return s.call(null,Et,0)}catch{return s.call(this,Et,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:et}catch{s=et}try{_=typeof clearTimeout=="function"?clearTimeout:tt}catch{_=tt}})();var it,st=[],ht=!1,vt=-1;function ft(){ht&&it&&(ht=!1,it.length?st=it.concat(st):vt=-1,st.length&&pt())}function pt(){if(!ht){var Et=j(ft);ht=!0;for(var Ot=st.length;Ot;){for(it=st,st=[];++vt<Ot;)it&&it[vt].run();vt=-1,Ot=st.length}it=null,ht=!1,function(Lt){if(_===clearTimeout)return clearTimeout(Lt);if((_===tt||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(Lt);try{_(Lt)}catch{try{return _.call(null,Lt)}catch{return _.call(this,Lt)}}}(Et)}}function ct(Et,Ot){this.fun=Et,this.array=Ot}function yt(){}$.nextTick=function(Et){var Ot=new Array(arguments.length-1);if(arguments.length>1)for(var Lt=1;Lt<arguments.length;Lt++)Ot[Lt-1]=arguments[Lt];st.push(new ct(Et,Ot)),st.length!==1||ht||j(pt)},ct.prototype.run=function(){this.fun.apply(null,this.array)},$.title="browser",$.browser=!0,$.env={},$.argv=[],$.version="",$.versions={},$.on=yt,$.addListener=yt,$.once=yt,$.off=yt,$.removeListener=yt,$.removeAllListeners=yt,$.emit=yt,$.prependListener=yt,$.prependOnceListener=yt,$.listeners=function(Et){return[]},$.binding=function(Et){throw new Error("process.binding is not supported")},$.cwd=function(){return"/"},$.chdir=function(Et){throw new Error("process.chdir is not supported")},$.umask=function(){return 0}},function(i,o,s){Object.defineProperty(o,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(o,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(o,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(o,"configs",{value:s(117)})},function(i,o,s){(function(_){var $=s(125),et=s(126),tt=s(38);function j(){return st.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function it(Mt,jt){if(j()<jt)throw new RangeError("Invalid typed array length");return st.TYPED_ARRAY_SUPPORT?(Mt=new Uint8Array(jt)).__proto__=st.prototype:(Mt===null&&(Mt=new st(jt)),Mt.length=jt),Mt}function st(Mt,jt,Qt){if(!(st.TYPED_ARRAY_SUPPORT||this instanceof st))return new st(Mt,jt,Qt);if(typeof Mt=="number"){if(typeof jt=="string")throw new Error("If encoding is specified then the first argument must be a string");return ft(this,Mt)}return ht(this,Mt,jt,Qt)}function ht(Mt,jt,Qt,gn){if(typeof jt=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&jt instanceof ArrayBuffer?function(hn,An,Mn,Yn){if(An.byteLength,Mn<0||An.byteLength<Mn)throw new RangeError("'offset' is out of bounds");if(An.byteLength<Mn+(Yn||0))throw new RangeError("'length' is out of bounds");return An=Mn===void 0&&Yn===void 0?new Uint8Array(An):Yn===void 0?new Uint8Array(An,Mn):new Uint8Array(An,Mn,Yn),st.TYPED_ARRAY_SUPPORT?(hn=An).__proto__=st.prototype:hn=pt(hn,An),hn}(Mt,jt,Qt,gn):typeof jt=="string"?function(hn,An,Mn){if(typeof Mn=="string"&&Mn!==""||(Mn="utf8"),!st.isEncoding(Mn))throw new TypeError('"encoding" must be a valid string encoding');var Yn=0|yt(An,Mn),Nr=(hn=it(hn,Yn)).write(An,Mn);return Nr!==Yn&&(hn=hn.slice(0,Nr)),hn}(Mt,jt,Qt):function(hn,An){if(st.isBuffer(An)){var Mn=0|ct(An.length);return(hn=it(hn,Mn)).length===0||An.copy(hn,0,0,Mn),hn}if(An){if(typeof ArrayBuffer<"u"&&An.buffer instanceof ArrayBuffer||"length"in An)return typeof An.length!="number"||(Yn=An.length)!=Yn?it(hn,0):pt(hn,An);if(An.type==="Buffer"&&tt(An.data))return pt(hn,An.data)}var Yn;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Mt,jt)}function vt(Mt){if(typeof Mt!="number")throw new TypeError('"size" argument must be a number');if(Mt<0)throw new RangeError('"size" argument must not be negative')}function ft(Mt,jt){if(vt(jt),Mt=it(Mt,jt<0?0:0|ct(jt)),!st.TYPED_ARRAY_SUPPORT)for(var Qt=0;Qt<jt;++Qt)Mt[Qt]=0;return Mt}function pt(Mt,jt){var Qt=jt.length<0?0:0|ct(jt.length);Mt=it(Mt,Qt);for(var gn=0;gn<Qt;gn+=1)Mt[gn]=255&jt[gn];return Mt}function ct(Mt){if(Mt>=j())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j().toString(16)+" bytes");return 0|Mt}function yt(Mt,jt){if(st.isBuffer(Mt))return Mt.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(Mt)||Mt instanceof ArrayBuffer))return Mt.byteLength;typeof Mt!="string"&&(Mt=""+Mt);var Qt=Mt.length;if(Qt===0)return 0;for(var gn=!1;;)switch(jt){case"ascii":case"latin1":case"binary":return Qt;case"utf8":case"utf-8":case void 0:return mn(Mt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Qt;case"hex":return Qt>>>1;case"base64":return an(Mt).length;default:if(gn)return mn(Mt).length;jt=(""+jt).toLowerCase(),gn=!0}}function Et(Mt,jt,Qt){var gn=!1;if((jt===void 0||jt<0)&&(jt=0),jt>this.length||((Qt===void 0||Qt>this.length)&&(Qt=this.length),Qt<=0)||(Qt>>>=0)<=(jt>>>=0))return"";for(Mt||(Mt="utf8");;)switch(Mt){case"hex":return Kt(this,jt,Qt);case"utf8":case"utf-8":return Nt(this,jt,Qt);case"ascii":return Ct(this,jt,Qt);case"latin1":case"binary":return Vt(this,jt,Qt);case"base64":return St(this,jt,Qt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,jt,Qt);default:if(gn)throw new TypeError("Unknown encoding: "+Mt);Mt=(Mt+"").toLowerCase(),gn=!0}}function Ot(Mt,jt,Qt){var gn=Mt[jt];Mt[jt]=Mt[Qt],Mt[Qt]=gn}function Lt(Mt,jt,Qt,gn,hn){if(Mt.length===0)return-1;if(typeof Qt=="string"?(gn=Qt,Qt=0):Qt>2147483647?Qt=2147483647:Qt<-2147483648&&(Qt=-2147483648),Qt=+Qt,isNaN(Qt)&&(Qt=hn?0:Mt.length-1),Qt<0&&(Qt=Mt.length+Qt),Qt>=Mt.length){if(hn)return-1;Qt=Mt.length-1}else if(Qt<0){if(!hn)return-1;Qt=0}if(typeof jt=="string"&&(jt=st.from(jt,gn)),st.isBuffer(jt))return jt.length===0?-1:Tt(Mt,jt,Qt,gn,hn);if(typeof jt=="number")return jt&=255,st.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?hn?Uint8Array.prototype.indexOf.call(Mt,jt,Qt):Uint8Array.prototype.lastIndexOf.call(Mt,jt,Qt):Tt(Mt,[jt],Qt,gn,hn);throw new TypeError("val must be string, number or Buffer")}function Tt(Mt,jt,Qt,gn,hn){var An,Mn=1,Yn=Mt.length,Nr=jt.length;if(gn!==void 0&&((gn=String(gn).toLowerCase())==="ucs2"||gn==="ucs-2"||gn==="utf16le"||gn==="utf-16le")){if(Mt.length<2||jt.length<2)return-1;Mn=2,Yn/=2,Nr/=2,Qt/=2}function ro(kn,Kn){return Mn===1?kn[Kn]:kn.readUInt16BE(Kn*Mn)}if(hn){var to=-1;for(An=Qt;An<Yn;An++)if(ro(Mt,An)===ro(jt,to===-1?0:An-to)){if(to===-1&&(to=An),An-to+1===Nr)return to*Mn}else to!==-1&&(An-=An-to),to=-1}else for(Qt+Nr>Yn&&(Qt=Yn-Nr),An=Qt;An>=0;An--){for(var zr=!0,In=0;In<Nr;In++)if(ro(Mt,An+In)!==ro(jt,In)){zr=!1;break}if(zr)return An}return-1}function It(Mt,jt,Qt,gn){Qt=Number(Qt)||0;var hn=Mt.length-Qt;gn?(gn=Number(gn))>hn&&(gn=hn):gn=hn;var An=jt.length;if(An%2!=0)throw new TypeError("Invalid hex string");gn>An/2&&(gn=An/2);for(var Mn=0;Mn<gn;++Mn){var Yn=parseInt(jt.substr(2*Mn,2),16);if(isNaN(Yn))return Mn;Mt[Qt+Mn]=Yn}return Mn}function mt(Mt,jt,Qt,gn){return en(mn(jt,Mt.length-Qt),Mt,Qt,gn)}function Bt(Mt,jt,Qt,gn){return en(function(hn){for(var An=[],Mn=0;Mn<hn.length;++Mn)An.push(255&hn.charCodeAt(Mn));return An}(jt),Mt,Qt,gn)}function nn(Mt,jt,Qt,gn){return Bt(Mt,jt,Qt,gn)}function sn(Mt,jt,Qt,gn){return en(an(jt),Mt,Qt,gn)}function xt(Mt,jt,Qt,gn){return en(function(hn,An){for(var Mn,Yn,Nr,ro=[],to=0;to<hn.length&&!((An-=2)<0);++to)Mn=hn.charCodeAt(to),Yn=Mn>>8,Nr=Mn%256,ro.push(Nr),ro.push(Yn);return ro}(jt,Mt.length-Qt),Mt,Qt,gn)}function St(Mt,jt,Qt){return jt===0&&Qt===Mt.length?$.fromByteArray(Mt):$.fromByteArray(Mt.slice(jt,Qt))}function Nt(Mt,jt,Qt){Qt=Math.min(Mt.length,Qt);for(var gn=[],hn=jt;hn<Qt;){var An,Mn,Yn,Nr,ro=Mt[hn],to=null,zr=ro>239?4:ro>223?3:ro>191?2:1;if(hn+zr<=Qt)switch(zr){case 1:ro<128&&(to=ro);break;case 2:(192&(An=Mt[hn+1]))==128&&(Nr=(31&ro)<<6|63&An)>127&&(to=Nr);break;case 3:An=Mt[hn+1],Mn=Mt[hn+2],(192&An)==128&&(192&Mn)==128&&(Nr=(15&ro)<<12|(63&An)<<6|63&Mn)>2047&&(Nr<55296||Nr>57343)&&(to=Nr);break;case 4:An=Mt[hn+1],Mn=Mt[hn+2],Yn=Mt[hn+3],(192&An)==128&&(192&Mn)==128&&(192&Yn)==128&&(Nr=(15&ro)<<18|(63&An)<<12|(63&Mn)<<6|63&Yn)>65535&&Nr<1114112&&(to=Nr)}to===null?(to=65533,zr=1):to>65535&&(to-=65536,gn.push(to>>>10&1023|55296),to=56320|1023&to),gn.push(to),hn+=zr}return function(In){var kn=In.length;if(kn<=4096)return String.fromCharCode.apply(String,In);for(var Kn="",vr=0;vr<kn;)Kn+=String.fromCharCode.apply(String,In.slice(vr,vr+=4096));return Kn}(gn)}o.Buffer=st,o.SlowBuffer=function(Mt){return+Mt!=Mt&&(Mt=0),st.alloc(+Mt)},o.INSPECT_MAX_BYTES=50,st.TYPED_ARRAY_SUPPORT=_.TYPED_ARRAY_SUPPORT!==void 0?_.TYPED_ARRAY_SUPPORT:function(){try{var Mt=new Uint8Array(1);return Mt.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Mt.foo()===42&&typeof Mt.subarray=="function"&&Mt.subarray(1,1).byteLength===0}catch{return!1}}(),o.kMaxLength=j(),st.poolSize=8192,st._augment=function(Mt){return Mt.__proto__=st.prototype,Mt},st.from=function(Mt,jt,Qt){return ht(null,Mt,jt,Qt)},st.TYPED_ARRAY_SUPPORT&&(st.prototype.__proto__=Uint8Array.prototype,st.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&st[Symbol.species]===st&&Object.defineProperty(st,Symbol.species,{value:null,configurable:!0})),st.alloc=function(Mt,jt,Qt){return function(gn,hn,An,Mn){return vt(hn),hn<=0?it(gn,hn):An!==void 0?typeof Mn=="string"?it(gn,hn).fill(An,Mn):it(gn,hn).fill(An):it(gn,hn)}(null,Mt,jt,Qt)},st.allocUnsafe=function(Mt){return ft(null,Mt)},st.allocUnsafeSlow=function(Mt){return ft(null,Mt)},st.isBuffer=function(Mt){return!(Mt==null||!Mt._isBuffer)},st.compare=function(Mt,jt){if(!st.isBuffer(Mt)||!st.isBuffer(jt))throw new TypeError("Arguments must be Buffers");if(Mt===jt)return 0;for(var Qt=Mt.length,gn=jt.length,hn=0,An=Math.min(Qt,gn);hn<An;++hn)if(Mt[hn]!==jt[hn]){Qt=Mt[hn],gn=jt[hn];break}return Qt<gn?-1:gn<Qt?1:0},st.isEncoding=function(Mt){switch(String(Mt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},st.concat=function(Mt,jt){if(!tt(Mt))throw new TypeError('"list" argument must be an Array of Buffers');if(Mt.length===0)return st.alloc(0);var Qt;if(jt===void 0)for(jt=0,Qt=0;Qt<Mt.length;++Qt)jt+=Mt[Qt].length;var gn=st.allocUnsafe(jt),hn=0;for(Qt=0;Qt<Mt.length;++Qt){var An=Mt[Qt];if(!st.isBuffer(An))throw new TypeError('"list" argument must be an Array of Buffers');An.copy(gn,hn),hn+=An.length}return gn},st.byteLength=yt,st.prototype._isBuffer=!0,st.prototype.swap16=function(){var Mt=this.length;if(Mt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var jt=0;jt<Mt;jt+=2)Ot(this,jt,jt+1);return this},st.prototype.swap32=function(){var Mt=this.length;if(Mt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var jt=0;jt<Mt;jt+=4)Ot(this,jt,jt+3),Ot(this,jt+1,jt+2);return this},st.prototype.swap64=function(){var Mt=this.length;if(Mt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var jt=0;jt<Mt;jt+=8)Ot(this,jt,jt+7),Ot(this,jt+1,jt+6),Ot(this,jt+2,jt+5),Ot(this,jt+3,jt+4);return this},st.prototype.toString=function(){var Mt=0|this.length;return Mt===0?"":arguments.length===0?Nt(this,0,Mt):Et.apply(this,arguments)},st.prototype.equals=function(Mt){if(!st.isBuffer(Mt))throw new TypeError("Argument must be a Buffer");return this===Mt||st.compare(this,Mt)===0},st.prototype.inspect=function(){var Mt="",jt=o.INSPECT_MAX_BYTES;return this.length>0&&(Mt=this.toString("hex",0,jt).match(/.{2}/g).join(" "),this.length>jt&&(Mt+=" ... ")),"<Buffer "+Mt+">"},st.prototype.compare=function(Mt,jt,Qt,gn,hn){if(!st.isBuffer(Mt))throw new TypeError("Argument must be a Buffer");if(jt===void 0&&(jt=0),Qt===void 0&&(Qt=Mt?Mt.length:0),gn===void 0&&(gn=0),hn===void 0&&(hn=this.length),jt<0||Qt>Mt.length||gn<0||hn>this.length)throw new RangeError("out of range index");if(gn>=hn&&jt>=Qt)return 0;if(gn>=hn)return-1;if(jt>=Qt)return 1;if(this===Mt)return 0;for(var An=(hn>>>=0)-(gn>>>=0),Mn=(Qt>>>=0)-(jt>>>=0),Yn=Math.min(An,Mn),Nr=this.slice(gn,hn),ro=Mt.slice(jt,Qt),to=0;to<Yn;++to)if(Nr[to]!==ro[to]){An=Nr[to],Mn=ro[to];break}return An<Mn?-1:Mn<An?1:0},st.prototype.includes=function(Mt,jt,Qt){return this.indexOf(Mt,jt,Qt)!==-1},st.prototype.indexOf=function(Mt,jt,Qt){return Lt(this,Mt,jt,Qt,!0)},st.prototype.lastIndexOf=function(Mt,jt,Qt){return Lt(this,Mt,jt,Qt,!1)},st.prototype.write=function(Mt,jt,Qt,gn){if(jt===void 0)gn="utf8",Qt=this.length,jt=0;else if(Qt===void 0&&typeof jt=="string")gn=jt,Qt=this.length,jt=0;else{if(!isFinite(jt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");jt|=0,isFinite(Qt)?(Qt|=0,gn===void 0&&(gn="utf8")):(gn=Qt,Qt=void 0)}var hn=this.length-jt;if((Qt===void 0||Qt>hn)&&(Qt=hn),Mt.length>0&&(Qt<0||jt<0)||jt>this.length)throw new RangeError("Attempt to write outside buffer bounds");gn||(gn="utf8");for(var An=!1;;)switch(gn){case"hex":return It(this,Mt,jt,Qt);case"utf8":case"utf-8":return mt(this,Mt,jt,Qt);case"ascii":return Bt(this,Mt,jt,Qt);case"latin1":case"binary":return nn(this,Mt,jt,Qt);case"base64":return sn(this,Mt,jt,Qt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,Mt,jt,Qt);default:if(An)throw new TypeError("Unknown encoding: "+gn);gn=(""+gn).toLowerCase(),An=!0}},st.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ct(Mt,jt,Qt){var gn="";Qt=Math.min(Mt.length,Qt);for(var hn=jt;hn<Qt;++hn)gn+=String.fromCharCode(127&Mt[hn]);return gn}function Vt(Mt,jt,Qt){var gn="";Qt=Math.min(Mt.length,Qt);for(var hn=jt;hn<Qt;++hn)gn+=String.fromCharCode(Mt[hn]);return gn}function Kt(Mt,jt,Qt){var gn=Mt.length;(!jt||jt<0)&&(jt=0),(!Qt||Qt<0||Qt>gn)&&(Qt=gn);for(var hn="",An=jt;An<Qt;++An)hn+=dn(Mt[An]);return hn}function Gt(Mt,jt,Qt){for(var gn=Mt.slice(jt,Qt),hn="",An=0;An<gn.length;An+=2)hn+=String.fromCharCode(gn[An]+256*gn[An+1]);return hn}function Ut(Mt,jt,Qt){if(Mt%1!=0||Mt<0)throw new RangeError("offset is not uint");if(Mt+jt>Qt)throw new RangeError("Trying to access beyond buffer length")}function Ht(Mt,jt,Qt,gn,hn,An){if(!st.isBuffer(Mt))throw new TypeError('"buffer" argument must be a Buffer instance');if(jt>hn||jt<An)throw new RangeError('"value" argument is out of bounds');if(Qt+gn>Mt.length)throw new RangeError("Index out of range")}function qt(Mt,jt,Qt,gn){jt<0&&(jt=65535+jt+1);for(var hn=0,An=Math.min(Mt.length-Qt,2);hn<An;++hn)Mt[Qt+hn]=(jt&255<<8*(gn?hn:1-hn))>>>8*(gn?hn:1-hn)}function Pt(Mt,jt,Qt,gn){jt<0&&(jt=4294967295+jt+1);for(var hn=0,An=Math.min(Mt.length-Qt,4);hn<An;++hn)Mt[Qt+hn]=jt>>>8*(gn?hn:3-hn)&255}function wt(Mt,jt,Qt,gn,hn,An){if(Qt+gn>Mt.length)throw new RangeError("Index out of range");if(Qt<0)throw new RangeError("Index out of range")}function $t(Mt,jt,Qt,gn,hn){return hn||wt(Mt,0,Qt,4),et.write(Mt,jt,Qt,gn,23,4),Qt+4}function Xt(Mt,jt,Qt,gn,hn){return hn||wt(Mt,0,Qt,8),et.write(Mt,jt,Qt,gn,52,8),Qt+8}st.prototype.slice=function(Mt,jt){var Qt,gn=this.length;if((Mt=~~Mt)<0?(Mt+=gn)<0&&(Mt=0):Mt>gn&&(Mt=gn),(jt=jt===void 0?gn:~~jt)<0?(jt+=gn)<0&&(jt=0):jt>gn&&(jt=gn),jt<Mt&&(jt=Mt),st.TYPED_ARRAY_SUPPORT)(Qt=this.subarray(Mt,jt)).__proto__=st.prototype;else{var hn=jt-Mt;Qt=new st(hn,void 0);for(var An=0;An<hn;++An)Qt[An]=this[An+Mt]}return Qt},st.prototype.readUIntLE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=this[Mt],hn=1,An=0;++An<jt&&(hn*=256);)gn+=this[Mt+An]*hn;return gn},st.prototype.readUIntBE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=this[Mt+--jt],hn=1;jt>0&&(hn*=256);)gn+=this[Mt+--jt]*hn;return gn},st.prototype.readUInt8=function(Mt,jt){return jt||Ut(Mt,1,this.length),this[Mt]},st.prototype.readUInt16LE=function(Mt,jt){return jt||Ut(Mt,2,this.length),this[Mt]|this[Mt+1]<<8},st.prototype.readUInt16BE=function(Mt,jt){return jt||Ut(Mt,2,this.length),this[Mt]<<8|this[Mt+1]},st.prototype.readUInt32LE=function(Mt,jt){return jt||Ut(Mt,4,this.length),(this[Mt]|this[Mt+1]<<8|this[Mt+2]<<16)+16777216*this[Mt+3]},st.prototype.readUInt32BE=function(Mt,jt){return jt||Ut(Mt,4,this.length),16777216*this[Mt]+(this[Mt+1]<<16|this[Mt+2]<<8|this[Mt+3])},st.prototype.readIntLE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=this[Mt],hn=1,An=0;++An<jt&&(hn*=256);)gn+=this[Mt+An]*hn;return gn>=(hn*=128)&&(gn-=Math.pow(2,8*jt)),gn},st.prototype.readIntBE=function(Mt,jt,Qt){Mt|=0,jt|=0,Qt||Ut(Mt,jt,this.length);for(var gn=jt,hn=1,An=this[Mt+--gn];gn>0&&(hn*=256);)An+=this[Mt+--gn]*hn;return An>=(hn*=128)&&(An-=Math.pow(2,8*jt)),An},st.prototype.readInt8=function(Mt,jt){return jt||Ut(Mt,1,this.length),128&this[Mt]?-1*(255-this[Mt]+1):this[Mt]},st.prototype.readInt16LE=function(Mt,jt){jt||Ut(Mt,2,this.length);var Qt=this[Mt]|this[Mt+1]<<8;return 32768&Qt?4294901760|Qt:Qt},st.prototype.readInt16BE=function(Mt,jt){jt||Ut(Mt,2,this.length);var Qt=this[Mt+1]|this[Mt]<<8;return 32768&Qt?4294901760|Qt:Qt},st.prototype.readInt32LE=function(Mt,jt){return jt||Ut(Mt,4,this.length),this[Mt]|this[Mt+1]<<8|this[Mt+2]<<16|this[Mt+3]<<24},st.prototype.readInt32BE=function(Mt,jt){return jt||Ut(Mt,4,this.length),this[Mt]<<24|this[Mt+1]<<16|this[Mt+2]<<8|this[Mt+3]},st.prototype.readFloatLE=function(Mt,jt){return jt||Ut(Mt,4,this.length),et.read(this,Mt,!0,23,4)},st.prototype.readFloatBE=function(Mt,jt){return jt||Ut(Mt,4,this.length),et.read(this,Mt,!1,23,4)},st.prototype.readDoubleLE=function(Mt,jt){return jt||Ut(Mt,8,this.length),et.read(this,Mt,!0,52,8)},st.prototype.readDoubleBE=function(Mt,jt){return jt||Ut(Mt,8,this.length),et.read(this,Mt,!1,52,8)},st.prototype.writeUIntLE=function(Mt,jt,Qt,gn){Mt=+Mt,jt|=0,Qt|=0,gn||Ht(this,Mt,jt,Qt,Math.pow(2,8*Qt)-1,0);var hn=1,An=0;for(this[jt]=255&Mt;++An<Qt&&(hn*=256);)this[jt+An]=Mt/hn&255;return jt+Qt},st.prototype.writeUIntBE=function(Mt,jt,Qt,gn){Mt=+Mt,jt|=0,Qt|=0,gn||Ht(this,Mt,jt,Qt,Math.pow(2,8*Qt)-1,0);var hn=Qt-1,An=1;for(this[jt+hn]=255&Mt;--hn>=0&&(An*=256);)this[jt+hn]=Mt/An&255;return jt+Qt},st.prototype.writeUInt8=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,1,255,0),st.TYPED_ARRAY_SUPPORT||(Mt=Math.floor(Mt)),this[jt]=255&Mt,jt+1},st.prototype.writeUInt16LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[jt]=255&Mt,this[jt+1]=Mt>>>8):qt(this,Mt,jt,!0),jt+2},st.prototype.writeUInt16BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>8,this[jt+1]=255&Mt):qt(this,Mt,jt,!1),jt+2},st.prototype.writeUInt32LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[jt+3]=Mt>>>24,this[jt+2]=Mt>>>16,this[jt+1]=Mt>>>8,this[jt]=255&Mt):Pt(this,Mt,jt,!0),jt+4},st.prototype.writeUInt32BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>24,this[jt+1]=Mt>>>16,this[jt+2]=Mt>>>8,this[jt+3]=255&Mt):Pt(this,Mt,jt,!1),jt+4},st.prototype.writeIntLE=function(Mt,jt,Qt,gn){if(Mt=+Mt,jt|=0,!gn){var hn=Math.pow(2,8*Qt-1);Ht(this,Mt,jt,Qt,hn-1,-hn)}var An=0,Mn=1,Yn=0;for(this[jt]=255&Mt;++An<Qt&&(Mn*=256);)Mt<0&&Yn===0&&this[jt+An-1]!==0&&(Yn=1),this[jt+An]=(Mt/Mn>>0)-Yn&255;return jt+Qt},st.prototype.writeIntBE=function(Mt,jt,Qt,gn){if(Mt=+Mt,jt|=0,!gn){var hn=Math.pow(2,8*Qt-1);Ht(this,Mt,jt,Qt,hn-1,-hn)}var An=Qt-1,Mn=1,Yn=0;for(this[jt+An]=255&Mt;--An>=0&&(Mn*=256);)Mt<0&&Yn===0&&this[jt+An+1]!==0&&(Yn=1),this[jt+An]=(Mt/Mn>>0)-Yn&255;return jt+Qt},st.prototype.writeInt8=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,1,127,-128),st.TYPED_ARRAY_SUPPORT||(Mt=Math.floor(Mt)),Mt<0&&(Mt=255+Mt+1),this[jt]=255&Mt,jt+1},st.prototype.writeInt16LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[jt]=255&Mt,this[jt+1]=Mt>>>8):qt(this,Mt,jt,!0),jt+2},st.prototype.writeInt16BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>8,this[jt+1]=255&Mt):qt(this,Mt,jt,!1),jt+2},st.prototype.writeInt32LE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,2147483647,-2147483648),st.TYPED_ARRAY_SUPPORT?(this[jt]=255&Mt,this[jt+1]=Mt>>>8,this[jt+2]=Mt>>>16,this[jt+3]=Mt>>>24):Pt(this,Mt,jt,!0),jt+4},st.prototype.writeInt32BE=function(Mt,jt,Qt){return Mt=+Mt,jt|=0,Qt||Ht(this,Mt,jt,4,2147483647,-2147483648),Mt<0&&(Mt=4294967295+Mt+1),st.TYPED_ARRAY_SUPPORT?(this[jt]=Mt>>>24,this[jt+1]=Mt>>>16,this[jt+2]=Mt>>>8,this[jt+3]=255&Mt):Pt(this,Mt,jt,!1),jt+4},st.prototype.writeFloatLE=function(Mt,jt,Qt){return $t(this,Mt,jt,!0,Qt)},st.prototype.writeFloatBE=function(Mt,jt,Qt){return $t(this,Mt,jt,!1,Qt)},st.prototype.writeDoubleLE=function(Mt,jt,Qt){return Xt(this,Mt,jt,!0,Qt)},st.prototype.writeDoubleBE=function(Mt,jt,Qt){return Xt(this,Mt,jt,!1,Qt)},st.prototype.copy=function(Mt,jt,Qt,gn){if(Qt||(Qt=0),gn||gn===0||(gn=this.length),jt>=Mt.length&&(jt=Mt.length),jt||(jt=0),gn>0&&gn<Qt&&(gn=Qt),gn===Qt||Mt.length===0||this.length===0)return 0;if(jt<0)throw new RangeError("targetStart out of bounds");if(Qt<0||Qt>=this.length)throw new RangeError("sourceStart out of bounds");if(gn<0)throw new RangeError("sourceEnd out of bounds");gn>this.length&&(gn=this.length),Mt.length-jt<gn-Qt&&(gn=Mt.length-jt+Qt);var hn,An=gn-Qt;if(this===Mt&&Qt<jt&&jt<gn)for(hn=An-1;hn>=0;--hn)Mt[hn+jt]=this[hn+Qt];else if(An<1e3||!st.TYPED_ARRAY_SUPPORT)for(hn=0;hn<An;++hn)Mt[hn+jt]=this[hn+Qt];else Uint8Array.prototype.set.call(Mt,this.subarray(Qt,Qt+An),jt);return An},st.prototype.fill=function(Mt,jt,Qt,gn){if(typeof Mt=="string"){if(typeof jt=="string"?(gn=jt,jt=0,Qt=this.length):typeof Qt=="string"&&(gn=Qt,Qt=this.length),Mt.length===1){var hn=Mt.charCodeAt(0);hn<256&&(Mt=hn)}if(gn!==void 0&&typeof gn!="string")throw new TypeError("encoding must be a string");if(typeof gn=="string"&&!st.isEncoding(gn))throw new TypeError("Unknown encoding: "+gn)}else typeof Mt=="number"&&(Mt&=255);if(jt<0||this.length<jt||this.length<Qt)throw new RangeError("Out of range index");if(Qt<=jt)return this;var An;if(jt>>>=0,Qt=Qt===void 0?this.length:Qt>>>0,Mt||(Mt=0),typeof Mt=="number")for(An=jt;An<Qt;++An)this[An]=Mt;else{var Mn=st.isBuffer(Mt)?Mt:mn(new st(Mt,gn).toString()),Yn=Mn.length;for(An=0;An<Qt-jt;++An)this[An+jt]=Mn[An%Yn]}return this};var un=/[^+\/0-9A-Za-z-_]/g;function dn(Mt){return Mt<16?"0"+Mt.toString(16):Mt.toString(16)}function mn(Mt,jt){var Qt;jt=jt||1/0;for(var gn=Mt.length,hn=null,An=[],Mn=0;Mn<gn;++Mn){if((Qt=Mt.charCodeAt(Mn))>55295&&Qt<57344){if(!hn){if(Qt>56319){(jt-=3)>-1&&An.push(239,191,189);continue}if(Mn+1===gn){(jt-=3)>-1&&An.push(239,191,189);continue}hn=Qt;continue}if(Qt<56320){(jt-=3)>-1&&An.push(239,191,189),hn=Qt;continue}Qt=65536+(hn-55296<<10|Qt-56320)}else hn&&(jt-=3)>-1&&An.push(239,191,189);if(hn=null,Qt<128){if((jt-=1)<0)break;An.push(Qt)}else if(Qt<2048){if((jt-=2)<0)break;An.push(Qt>>6|192,63&Qt|128)}else if(Qt<65536){if((jt-=3)<0)break;An.push(Qt>>12|224,Qt>>6&63|128,63&Qt|128)}else{if(!(Qt<1114112))throw new Error("Invalid code point");if((jt-=4)<0)break;An.push(Qt>>18|240,Qt>>12&63|128,Qt>>6&63|128,63&Qt|128)}}return An}function an(Mt){return $.toByteArray(function(jt){if((jt=function(Qt){return Qt.trim?Qt.trim():Qt.replace(/^\s+|\s+$/g,"")}(jt).replace(un,"")).length<2)return"";for(;jt.length%4!=0;)jt+="=";return jt}(Mt))}function en(Mt,jt,Qt,gn){for(var hn=0;hn<gn&&!(hn+Qt>=jt.length||hn>=Mt.length);++hn)jt[hn+Qt]=Mt[hn];return hn}}).call(this,s(5))},function(i,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}i.exports=s},function(i,o,s){(function(_){s.d(o,"a",function(){return tt}),s.d(o,"i",function(){return j}),s.d(o,"j",function(){return it}),s.d(o,"b",function(){return st}),s.d(o,"f",function(){return ht}),s.d(o,"e",function(){return vt}),s.d(o,"g",function(){return ft}),s.d(o,"d",function(){return pt}),s.d(o,"c",function(){return ct}),s.d(o,"h",function(){return yt});var $=s(98);const et=$.from(Object.assign(Object.assign({},_.env),{ENVIRONMENT:_.env.ENV,APP:"realtime-sdk",NAMESPACE:"production",VERSION:_.env.VERSION,BUILD_TAG:_.env.BUILD_TAG,GIT_COMMIT:_.env.GIT_COMMIT,LOG_LEVEL:_.env.LOG_LEVEL,LOG_JSON:"false",LOG_API_ENDPOINT:_.env.LOG_API_ENDPOINT,JEST_WORKER_ID:_.env.JEST_WORKER_ID,ENABLE_SENTRY:_.env.ENABLE_SENTRY,SENTRY_DSN:_.env.SENTRY_DSN,STABLE_AGENT_VERSION:_.env.STABLE_AGENT_VERSION})),tt=(et.get("ENVIRONMENT").default("").asString(),et.get("APP").default("").asString()),j=(et.get("APP_PATH").default("").asString(),et.get("API_ENDPOINT").default("").asString(),et.get("NAMESPACE").default("").asString()),it=et.get("VERSION").default("").asString(),st=et.get("BUILD_TAG").default("").asString(),ht=(et.get("GIT_COMMIT").default("").asString(),et.get("ENABLE_SENTRY").default("false").asBool(),et.get("SENTRY_DSN").default("").asString(),et.get("LOG_LEVEL").default("debug").asString()),vt=et.get("LOG_JSON").default("true").asBool(),ft=et.get("LOG_TO_CONSOLE").default("true").asBool(),pt=(et.get("STABLE_AGENT_VERSION").default("").asString(),et.get("LOG_API_ENDPOINT").asString()),ct=et.get("JEST_WORKER_ID").asString(),yt=(et.get("SHEET_EXPORT_MAX_ROW_COUNT").default("10000").asIntPositive(),et.get("LOG_TO_FILE").default("false").asBoolStrict())}).call(this,s(2))},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){_&&(s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(s,_){if(_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}}},function(i,o,s){var _=s(95),$=_,et=Function("return this")(),tt=s(94);$.object.extend(proto,tt),$.exportSymbol("proto.v1.signaling.api.CreatePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.CreatePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.Peer",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamRequest",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamResponse",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalRequest",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SessionType",null,et),$.exportSymbol("proto.v1.signaling.api.Signal",null,et),proto.v1.signaling.api.Peer=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.Peer.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.Peer,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Peer.displayName="proto.v1.signaling.api.Peer"),proto.v1.signaling.api.Signal=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.Signal,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Signal.displayName="proto.v1.signaling.api.Signal"),proto.v1.signaling.api.CreatePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerRequest.displayName="proto.v1.signaling.api.CreatePeerRequest"),proto.v1.signaling.api.CreatePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerResponse.displayName="proto.v1.signaling.api.CreatePeerResponse"),proto.v1.signaling.api.DeletePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerRequest.displayName="proto.v1.signaling.api.DeletePeerRequest"),proto.v1.signaling.api.DeletePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerResponse.displayName="proto.v1.signaling.api.DeletePeerResponse"),proto.v1.signaling.api.RefreshPeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerRequest.displayName="proto.v1.signaling.api.RefreshPeerRequest"),proto.v1.signaling.api.RefreshPeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerResponse.displayName="proto.v1.signaling.api.RefreshPeerResponse"),proto.v1.signaling.api.GetPeersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetPeersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersRequest.displayName="proto.v1.signaling.api.GetPeersRequest"),proto.v1.signaling.api.GetPeersResponse=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.GetPeersResponse.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.GetPeersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersResponse.displayName="proto.v1.signaling.api.GetPeersResponse"),proto.v1.signaling.api.GetIceServersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersRequest.displayName="proto.v1.signaling.api.GetIceServersRequest"),proto.v1.signaling.api.GetIceServersResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersResponse.displayName="proto.v1.signaling.api.GetIceServersResponse"),proto.v1.signaling.api.SendSignalRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalRequest.displayName="proto.v1.signaling.api.SendSignalRequest"),proto.v1.signaling.api.SendSignalResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalResponse.displayName="proto.v1.signaling.api.SendSignalResponse"),proto.v1.signaling.api.ReceiveSignalStreamRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.displayName="proto.v1.signaling.api.ReceiveSignalStreamRequest"),proto.v1.signaling.api.ReceiveSignalStreamResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.displayName="proto.v1.signaling.api.ReceiveSignalStreamResponse"),proto.v1.signaling.api.Peer.repeatedFields_=[5],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Peer.prototype.toObject=function(j){return proto.v1.signaling.api.Peer.toObject(j,this)},proto.v1.signaling.api.Peer.toObject=function(j,it){var st,ht={peerId:_.Message.getFieldWithDefault(it,1,""),organizationId:_.Message.getFieldWithDefault(it,2,""),userId:(st=it.getUserId())&&tt.StringValue.toObject(j,st),deviceId:(st=it.getDeviceId())&&tt.StringValue.toObject(j,st),sessionIdsList:(st=_.Message.getRepeatedField(it,5))==null?void 0:st,peerCreatedTimestamp:(st=it.getPeerCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Peer.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Peer;return proto.v1.signaling.api.Peer.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Peer.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;case 2:st=it.readString(),j.setOrganizationId(st);break;case 3:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setUserId(st);break;case 4:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setDeviceId(st);break;case 5:st=it.readString(),j.addSessionIds(st);break;case 6:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setPeerCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Peer.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Peer.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Peer.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getPeerId()).length>0&&it.writeString(1,st),(st=j.getOrganizationId()).length>0&&it.writeString(2,st),(st=j.getUserId())!=null&&it.writeMessage(3,st,tt.StringValue.serializeBinaryToWriter),(st=j.getDeviceId())!=null&&it.writeMessage(4,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionIdsList()).length>0&&it.writeRepeatedString(5,st),(st=j.getPeerCreatedTimestamp())!=null&&it.writeMessage(6,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.Peer.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.Peer.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},proto.v1.signaling.api.Peer.prototype.getOrganizationId=function(){return _.Message.getFieldWithDefault(this,2,"")},proto.v1.signaling.api.Peer.prototype.setOrganizationId=function(j){return _.Message.setProto3StringField(this,2,j)},proto.v1.signaling.api.Peer.prototype.getUserId=function(){return _.Message.getWrapperField(this,tt.StringValue,3)},proto.v1.signaling.api.Peer.prototype.setUserId=function(j){return _.Message.setWrapperField(this,3,j)},proto.v1.signaling.api.Peer.prototype.clearUserId=function(){return this.setUserId(void 0)},proto.v1.signaling.api.Peer.prototype.hasUserId=function(){return _.Message.getField(this,3)!=null},proto.v1.signaling.api.Peer.prototype.getDeviceId=function(){return _.Message.getWrapperField(this,tt.StringValue,4)},proto.v1.signaling.api.Peer.prototype.setDeviceId=function(j){return _.Message.setWrapperField(this,4,j)},proto.v1.signaling.api.Peer.prototype.clearDeviceId=function(){return this.setDeviceId(void 0)},proto.v1.signaling.api.Peer.prototype.hasDeviceId=function(){return _.Message.getField(this,4)!=null},proto.v1.signaling.api.Peer.prototype.getSessionIdsList=function(){return _.Message.getRepeatedField(this,5)},proto.v1.signaling.api.Peer.prototype.setSessionIdsList=function(j){return _.Message.setField(this,5,j||[])},proto.v1.signaling.api.Peer.prototype.addSessionIds=function(j,it){return _.Message.addToRepeatedField(this,5,j,it)},proto.v1.signaling.api.Peer.prototype.clearSessionIdsList=function(){return this.setSessionIdsList([])},proto.v1.signaling.api.Peer.prototype.getPeerCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,6)},proto.v1.signaling.api.Peer.prototype.setPeerCreatedTimestamp=function(j){return _.Message.setWrapperField(this,6,j)},proto.v1.signaling.api.Peer.prototype.clearPeerCreatedTimestamp=function(){return this.setPeerCreatedTimestamp(void 0)},proto.v1.signaling.api.Peer.prototype.hasPeerCreatedTimestamp=function(){return _.Message.getField(this,6)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Signal.prototype.toObject=function(j){return proto.v1.signaling.api.Signal.toObject(j,this)},proto.v1.signaling.api.Signal.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st),senderId:_.Message.getFieldWithDefault(it,3,""),receiverId:_.Message.getFieldWithDefault(it,4,""),payload:_.Message.getFieldWithDefault(it,5,""),iceServers:_.Message.getFieldWithDefault(it,6,""),iceTransportPolicy:_.Message.getFieldWithDefault(it,7,""),sessionType:_.Message.getFieldWithDefault(it,8,0)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Signal.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Signal;return proto.v1.signaling.api.Signal.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Signal.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;case 3:st=it.readString(),j.setSenderId(st);break;case 4:st=it.readString(),j.setReceiverId(st);break;case 5:st=it.readString(),j.setPayload(st);break;case 6:st=it.readString(),j.setIceServers(st);break;case 7:st=it.readString(),j.setIceTransportPolicy(st);break;case 8:st=it.readEnum(),j.setSessionType(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Signal.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Signal.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Signal.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter),(st=j.getSenderId()).length>0&&it.writeString(3,st),(st=j.getReceiverId()).length>0&&it.writeString(4,st),(st=j.getPayload()).length>0&&it.writeString(5,st),(st=j.getIceServers()).length>0&&it.writeString(6,st),(st=j.getIceTransportPolicy()).length>0&&it.writeString(7,st),(st=j.getSessionType())!==0&&it.writeEnum(8,st)},proto.v1.signaling.api.Signal.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.Signal.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.Signal.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.Signal.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.Signal.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.Signal.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},proto.v1.signaling.api.Signal.prototype.getSenderId=function(){return _.Message.getFieldWithDefault(this,3,"")},proto.v1.signaling.api.Signal.prototype.setSenderId=function(j){return _.Message.setProto3StringField(this,3,j)},proto.v1.signaling.api.Signal.prototype.getReceiverId=function(){return _.Message.getFieldWithDefault(this,4,"")},proto.v1.signaling.api.Signal.prototype.setReceiverId=function(j){return _.Message.setProto3StringField(this,4,j)},proto.v1.signaling.api.Signal.prototype.getPayload=function(){return _.Message.getFieldWithDefault(this,5,"")},proto.v1.signaling.api.Signal.prototype.setPayload=function(j){return _.Message.setProto3StringField(this,5,j)},proto.v1.signaling.api.Signal.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,6,"")},proto.v1.signaling.api.Signal.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,6,j)},proto.v1.signaling.api.Signal.prototype.getIceTransportPolicy=function(){return _.Message.getFieldWithDefault(this,7,"")},proto.v1.signaling.api.Signal.prototype.setIceTransportPolicy=function(j){return _.Message.setProto3StringField(this,7,j)},proto.v1.signaling.api.Signal.prototype.getSessionType=function(){return _.Message.getFieldWithDefault(this,8,0)},proto.v1.signaling.api.Signal.prototype.setSessionType=function(j){return _.Message.setProto3EnumField(this,8,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerRequest.toObject(j,this)},proto.v1.signaling.api.CreatePeerRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.CreatePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerRequest;return proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.CreatePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerResponse.toObject(j,this)},proto.v1.signaling.api.CreatePeerResponse.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.CreatePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerResponse;return proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.CreatePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.CreatePeerResponse.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.CreatePeerResponse.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.CreatePeerResponse.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.CreatePeerResponse.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerRequest.toObject(j,this)},proto.v1.signaling.api.DeletePeerRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerRequest;return proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.DeletePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.DeletePeerRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.DeletePeerRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerResponse.toObject(j,this)},proto.v1.signaling.api.DeletePeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerResponse;return proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.DeletePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerRequest.toObject(j,this)},proto.v1.signaling.api.RefreshPeerRequest.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.RefreshPeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerRequest;return proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.RefreshPeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.RefreshPeerRequest.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.RefreshPeerRequest.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.RefreshPeerRequest.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.RefreshPeerRequest.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerResponse.toObject(j,this)},proto.v1.signaling.api.RefreshPeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.RefreshPeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerResponse;return proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.RefreshPeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersRequest.toObject(j,this)},proto.v1.signaling.api.GetPeersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersRequest;return proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetPeersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter=function(j,it){},proto.v1.signaling.api.GetPeersResponse.repeatedFields_=[1],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersResponse.toObject(j,this)},proto.v1.signaling.api.GetPeersResponse.toObject=function(j,it){var st={peersList:_.Message.toObjectList(it.getPeersList(),proto.v1.signaling.api.Peer.toObject,j)};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersResponse;return proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.addPeers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetPeersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeersList()).length>0&&it.writeRepeatedMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.GetPeersResponse.prototype.getPeersList=function(){return _.Message.getRepeatedWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.GetPeersResponse.prototype.setPeersList=function(j){return _.Message.setRepeatedWrapperField(this,1,j)},proto.v1.signaling.api.GetPeersResponse.prototype.addPeers=function(j,it){return _.Message.addToRepeatedWrapperField(this,1,j,proto.v1.signaling.api.Peer,it)},proto.v1.signaling.api.GetPeersResponse.prototype.clearPeersList=function(){return this.setPeersList([])},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersRequest.toObject(j,this)},proto.v1.signaling.api.GetIceServersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersRequest;return proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetIceServersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersResponse.toObject(j,this)},proto.v1.signaling.api.GetIceServersResponse.toObject=function(j,it){var st={iceServers:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersResponse;return proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setIceServers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetIceServersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getIceServers()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.GetIceServersResponse.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.GetIceServersResponse.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalRequest.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalRequest.toObject(j,this)},proto.v1.signaling.api.SendSignalRequest.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalRequest;return proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalRequest.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.SendSignalRequest.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalRequest.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.SendSignalRequest.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalResponse.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalResponse.toObject(j,this)},proto.v1.signaling.api.SendSignalResponse.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalResponse;return proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamRequest;return proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamResponse;return proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SessionType={UNKNOWN:0,TELEOP:1,PORT_FORWARD:2,OBSERVE:3},$.object.extend(o,proto.v1.signaling.api)},function(i,o,s){function _(ft){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt})(ft)}function $(ft,pt){return!pt||_(pt)!=="object"&&typeof pt!="function"?et(ft):pt}function et(ft){if(ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft}function tt(ft){var pt=typeof Map=="function"?new Map:void 0;return(tt=function(ct){if(ct===null||(yt=ct,Function.toString.call(yt).indexOf("[native code]")===-1))return ct;var yt;if(typeof ct!="function")throw new TypeError("Super expression must either be null or a function");if(pt!==void 0){if(pt.has(ct))return pt.get(ct);pt.set(ct,Et)}function Et(){return j(ct,arguments,ht(this).constructor)}return Et.prototype=Object.create(ct.prototype,{constructor:{value:Et,enumerable:!1,writable:!0,configurable:!0}}),st(Et,ct)})(ft)}function j(ft,pt,ct){return(j=it()?Reflect.construct:function(yt,Et,Ot){var Lt=[null];Lt.push.apply(Lt,Et);var Tt=new(Function.bind.apply(yt,Lt));return Ot&&st(Tt,Ot.prototype),Tt}).apply(null,arguments)}function it(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function st(ft,pt){return(st=Object.setPrototypeOf||function(ct,yt){return ct.__proto__=yt,ct})(ft,pt)}function ht(ft){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(pt){return pt.__proto__||Object.getPrototypeOf(pt)})(ft)}var vt=function(ft){(function(Ot,Lt){if(typeof Lt!="function"&&Lt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(Lt&&Lt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),Lt&&st(Ot,Lt)})(Et,ft);var pt,ct,yt=(pt=Et,ct=it(),function(){var Ot,Lt=ht(pt);if(ct){var Tt=ht(this).constructor;Ot=Reflect.construct(Lt,arguments,Tt)}else Ot=Lt.apply(this,arguments);return $(this,Ot)});function Et(Ot){var Lt;return function(Tt,It){if(!(Tt instanceof It))throw new TypeError("Cannot call a class as a function")}(this,Et),Lt=yt.call(this,`Format functions must be synchronous taking a two arguments: (info, opts)
Found: `.concat(Ot.toString().split(`
`)[0],`
`)),Error.captureStackTrace(et(Lt),Et),Lt}return Et}(tt(Error));i.exports=function(ft){if(ft.length>2)throw new vt(ft);function pt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=yt}function ct(yt){return new pt(yt)}return pt.prototype.transform=ft,ct.Format=pt,ct}},function(i,o,s){(function(_){var $=Object.getOwnPropertyDescriptors||function(Ut){for(var Ht=Object.keys(Ut),qt={},Pt=0;Pt<Ht.length;Pt++)qt[Ht[Pt]]=Object.getOwnPropertyDescriptor(Ut,Ht[Pt]);return qt},et=/%[sdj%]/g;o.format=function(Ut){if(!Lt(Ut)){for(var Ht=[],qt=0;qt<arguments.length;qt++)Ht.push(it(arguments[qt]));return Ht.join(" ")}qt=1;for(var Pt=arguments,wt=Pt.length,$t=String(Ut).replace(et,function(un){if(un==="%%")return"%";if(qt>=wt)return un;switch(un){case"%s":return String(Pt[qt++]);case"%d":return Number(Pt[qt++]);case"%j":try{return JSON.stringify(Pt[qt++])}catch{return"[Circular]"}default:return un}}),Xt=Pt[qt];qt<wt;Xt=Pt[++qt])Et(Xt)||!mt(Xt)?$t+=" "+Xt:$t+=" "+it(Xt);return $t},o.deprecate=function(Ut,Ht){if(_!==void 0&&_.noDeprecation===!0)return Ut;if(_===void 0)return function(){return o.deprecate(Ut,Ht).apply(this,arguments)};var qt=!1;return function(){if(!qt){if(_.throwDeprecation)throw new Error(Ht);_.traceDeprecation?console.trace(Ht):console.error(Ht),qt=!0}return Ut.apply(this,arguments)}};var tt,j={};function it(Ut,Ht){var qt={seen:[],stylize:ht};return arguments.length>=3&&(qt.depth=arguments[2]),arguments.length>=4&&(qt.colors=arguments[3]),yt(Ht)?qt.showHidden=Ht:Ht&&o._extend(qt,Ht),Tt(qt.showHidden)&&(qt.showHidden=!1),Tt(qt.depth)&&(qt.depth=2),Tt(qt.colors)&&(qt.colors=!1),Tt(qt.customInspect)&&(qt.customInspect=!0),qt.colors&&(qt.stylize=st),vt(qt,Ut,qt.depth)}function st(Ut,Ht){var qt=it.styles[Ht];return qt?"\x1B["+it.colors[qt][0]+"m"+Ut+"\x1B["+it.colors[qt][1]+"m":Ut}function ht(Ut,Ht){return Ut}function vt(Ut,Ht,qt){if(Ut.customInspect&&Ht&&sn(Ht.inspect)&&Ht.inspect!==o.inspect&&(!Ht.constructor||Ht.constructor.prototype!==Ht)){var Pt=Ht.inspect(qt,Ut);return Lt(Pt)||(Pt=vt(Ut,Pt,qt)),Pt}var wt=function(Mt,jt){if(Tt(jt))return Mt.stylize("undefined","undefined");if(Lt(jt)){var Qt="'"+JSON.stringify(jt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Mt.stylize(Qt,"string")}if(Ot(jt))return Mt.stylize(""+jt,"number");if(yt(jt))return Mt.stylize(""+jt,"boolean");if(Et(jt))return Mt.stylize("null","null")}(Ut,Ht);if(wt)return wt;var $t=Object.keys(Ht),Xt=function(Mt){var jt={};return Mt.forEach(function(Qt,gn){jt[Qt]=!0}),jt}($t);if(Ut.showHidden&&($t=Object.getOwnPropertyNames(Ht)),nn(Ht)&&($t.indexOf("message")>=0||$t.indexOf("description")>=0))return ft(Ht);if($t.length===0){if(sn(Ht)){var un=Ht.name?": "+Ht.name:"";return Ut.stylize("[Function"+un+"]","special")}if(It(Ht))return Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp");if(Bt(Ht))return Ut.stylize(Date.prototype.toString.call(Ht),"date");if(nn(Ht))return ft(Ht)}var dn,mn="",an=!1,en=["{","}"];return ct(Ht)&&(an=!0,en=["[","]"]),sn(Ht)&&(mn=" [Function"+(Ht.name?": "+Ht.name:"")+"]"),It(Ht)&&(mn=" "+RegExp.prototype.toString.call(Ht)),Bt(Ht)&&(mn=" "+Date.prototype.toUTCString.call(Ht)),nn(Ht)&&(mn=" "+ft(Ht)),$t.length!==0||an&&Ht.length!=0?qt<0?It(Ht)?Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp"):Ut.stylize("[Object]","special"):(Ut.seen.push(Ht),dn=an?function(Mt,jt,Qt,gn,hn){for(var An=[],Mn=0,Yn=jt.length;Mn<Yn;++Mn)Vt(jt,String(Mn))?An.push(pt(Mt,jt,Qt,gn,String(Mn),!0)):An.push("");return hn.forEach(function(Nr){Nr.match(/^\d+$/)||An.push(pt(Mt,jt,Qt,gn,Nr,!0))}),An}(Ut,Ht,qt,Xt,$t):$t.map(function(Mt){return pt(Ut,Ht,qt,Xt,Mt,an)}),Ut.seen.pop(),function(Mt,jt,Qt){return Mt.reduce(function(gn,hn){return hn.indexOf(`
`)>=0,gn+hn.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Qt[0]+(jt===""?"":jt+`
 `)+" "+Mt.join(`,
  `)+" "+Qt[1]:Qt[0]+jt+" "+Mt.join(", ")+" "+Qt[1]}(dn,mn,en)):en[0]+mn+en[1]}function ft(Ut){return"["+Error.prototype.toString.call(Ut)+"]"}function pt(Ut,Ht,qt,Pt,wt,$t){var Xt,un,dn;if((dn=Object.getOwnPropertyDescriptor(Ht,wt)||{value:Ht[wt]}).get?un=dn.set?Ut.stylize("[Getter/Setter]","special"):Ut.stylize("[Getter]","special"):dn.set&&(un=Ut.stylize("[Setter]","special")),Vt(Pt,wt)||(Xt="["+wt+"]"),un||(Ut.seen.indexOf(dn.value)<0?(un=Et(qt)?vt(Ut,dn.value,null):vt(Ut,dn.value,qt-1)).indexOf(`
`)>-1&&(un=$t?un.split(`
`).map(function(mn){return"  "+mn}).join(`
`).substr(2):`
`+un.split(`
`).map(function(mn){return"   "+mn}).join(`
`)):un=Ut.stylize("[Circular]","special")),Tt(Xt)){if($t&&wt.match(/^\d+$/))return un;(Xt=JSON.stringify(""+wt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Xt=Xt.substr(1,Xt.length-2),Xt=Ut.stylize(Xt,"name")):(Xt=Xt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Xt=Ut.stylize(Xt,"string"))}return Xt+": "+un}function ct(Ut){return Array.isArray(Ut)}function yt(Ut){return typeof Ut=="boolean"}function Et(Ut){return Ut===null}function Ot(Ut){return typeof Ut=="number"}function Lt(Ut){return typeof Ut=="string"}function Tt(Ut){return Ut===void 0}function It(Ut){return mt(Ut)&&xt(Ut)==="[object RegExp]"}function mt(Ut){return typeof Ut=="object"&&Ut!==null}function Bt(Ut){return mt(Ut)&&xt(Ut)==="[object Date]"}function nn(Ut){return mt(Ut)&&(xt(Ut)==="[object Error]"||Ut instanceof Error)}function sn(Ut){return typeof Ut=="function"}function xt(Ut){return Object.prototype.toString.call(Ut)}function St(Ut){return Ut<10?"0"+Ut.toString(10):Ut.toString(10)}o.debuglog=function(Ut){if(Tt(tt)&&(tt=_.env.NODE_DEBUG||""),Ut=Ut.toUpperCase(),!j[Ut])if(new RegExp("\\b"+Ut+"\\b","i").test(tt)){var Ht=_.pid;j[Ut]=function(){var qt=o.format.apply(o,arguments);console.error("%s %d: %s",Ut,Ht,qt)}}else j[Ut]=function(){};return j[Ut]},o.inspect=it,it.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},it.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=ct,o.isBoolean=yt,o.isNull=Et,o.isNullOrUndefined=function(Ut){return Ut==null},o.isNumber=Ot,o.isString=Lt,o.isSymbol=function(Ut){return typeof Ut=="symbol"},o.isUndefined=Tt,o.isRegExp=It,o.isObject=mt,o.isDate=Bt,o.isError=nn,o.isFunction=sn,o.isPrimitive=function(Ut){return Ut===null||typeof Ut=="boolean"||typeof Ut=="number"||typeof Ut=="string"||typeof Ut=="symbol"||Ut===void 0},o.isBuffer=s(106);var Nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ct(){var Ut=new Date,Ht=[St(Ut.getHours()),St(Ut.getMinutes()),St(Ut.getSeconds())].join(":");return[Ut.getDate(),Nt[Ut.getMonth()],Ht].join(" ")}function Vt(Ut,Ht){return Object.prototype.hasOwnProperty.call(Ut,Ht)}o.log=function(){console.log("%s - %s",Ct(),o.format.apply(o,arguments))},o.inherits=s(107),o._extend=function(Ut,Ht){if(!Ht||!mt(Ht))return Ut;for(var qt=Object.keys(Ht),Pt=qt.length;Pt--;)Ut[qt[Pt]]=Ht[qt[Pt]];return Ut};var Kt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Gt(Ut,Ht){if(!Ut){var qt=new Error("Promise was rejected with a falsy value");qt.reason=Ut,Ut=qt}return Ht(Ut)}o.promisify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');if(Kt&&Ut[Kt]){var Ht;if(typeof(Ht=Ut[Kt])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ht,Kt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Ht}function Ht(){for(var qt,Pt,wt=new Promise(function(un,dn){qt=un,Pt=dn}),$t=[],Xt=0;Xt<arguments.length;Xt++)$t.push(arguments[Xt]);$t.push(function(un,dn){un?Pt(un):qt(dn)});try{Ut.apply(this,$t)}catch(un){Pt(un)}return wt}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Kt&&Object.defineProperty(Ht,Kt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ht,$(Ut))},o.promisify.custom=Kt,o.callbackify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');function Ht(){for(var qt=[],Pt=0;Pt<arguments.length;Pt++)qt.push(arguments[Pt]);var wt=qt.pop();if(typeof wt!="function")throw new TypeError("The last argument must be of type Function");var $t=this,Xt=function(){return wt.apply($t,arguments)};Ut.apply(this,qt).then(function(un){_.nextTick(Xt,null,un)},function(un){_.nextTick(Gt,un,Xt)})}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Object.defineProperties(Ht,$(Ut)),Ht}}).call(this,s(2))},function(i,o,s){s.d(o,"a",function(){return _});const _=$=>new Promise(et=>setTimeout(et,$||0))},function(i,o,s){(function(_){var $=_!==void 0&&_||typeof self<"u"&&self||window,et=Function.prototype.apply;function tt(j,it){this._id=j,this._clearFn=it}o.setTimeout=function(){return new tt(et.call(setTimeout,$,arguments),clearTimeout)},o.setInterval=function(){return new tt(et.call(setInterval,$,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(j){j&&j.close()},tt.prototype.unref=tt.prototype.ref=function(){},tt.prototype.close=function(){this._clearFn.call($,this._id)},o.enroll=function(j,it){clearTimeout(j._idleTimeoutId),j._idleTimeout=it},o.unenroll=function(j){clearTimeout(j._idleTimeoutId),j._idleTimeout=-1},o._unrefActive=o.active=function(j){clearTimeout(j._idleTimeoutId);var it=j._idleTimeout;it>=0&&(j._idleTimeoutId=setTimeout(function(){j._onTimeout&&j._onTimeout()},it))},s(140),o.setImmediate=typeof self<"u"&&self.setImmediate||_!==void 0&&_.setImmediate||this&&this.setImmediate,o.clearImmediate=typeof self<"u"&&self.clearImmediate||_!==void 0&&_.clearImmediate||this&&this.clearImmediate}).call(this,s(5))},function(i,o,s){(function(_){_===void 0||!_.version||_.version.indexOf("v0.")===0||_.version.indexOf("v1.")===0&&_.version.indexOf("v1.8.")!==0?i.exports={nextTick:function($,et,tt,j){if(typeof $!="function")throw new TypeError('"callback" argument must be a function');var it,st,ht=arguments.length;switch(ht){case 0:case 1:return _.nextTick($);case 2:return _.nextTick(function(){$.call(null,et)});case 3:return _.nextTick(function(){$.call(null,et,tt)});case 4:return _.nextTick(function(){$.call(null,et,tt,j)});default:for(it=new Array(ht-1),st=0;st<it.length;)it[st++]=arguments[st];return _.nextTick(function(){$.apply(null,it)})}}}:i.exports=_}).call(this,s(2))},function(i,o,s){(function(_){function $(et){return Object.prototype.toString.call(et)}o.isArray=function(et){return Array.isArray?Array.isArray(et):$(et)==="[object Array]"},o.isBoolean=function(et){return typeof et=="boolean"},o.isNull=function(et){return et===null},o.isNullOrUndefined=function(et){return et==null},o.isNumber=function(et){return typeof et=="number"},o.isString=function(et){return typeof et=="string"},o.isSymbol=function(et){return typeof et=="symbol"},o.isUndefined=function(et){return et===void 0},o.isRegExp=function(et){return $(et)==="[object RegExp]"},o.isObject=function(et){return typeof et=="object"&&et!==null},o.isDate=function(et){return $(et)==="[object Date]"},o.isError=function(et){return $(et)==="[object Error]"||et instanceof Error},o.isFunction=function(et){return typeof et=="function"},o.isPrimitive=function(et){return et===null||typeof et=="boolean"||typeof et=="number"||typeof et=="string"||typeof et=="symbol"||et===void 0},o.isBuffer=_.isBuffer}).call(this,s(4).Buffer)},function(i,o){o.endianness=function(){return"LE"},o.hostname=function(){return typeof location<"u"?location.hostname:""},o.loadavg=function(){return[]},o.uptime=function(){return 0},o.freemem=function(){return Number.MAX_VALUE},o.totalmem=function(){return Number.MAX_VALUE},o.cpus=function(){return[]},o.type=function(){return"Browser"},o.release=function(){return typeof navigator<"u"?navigator.appVersion:""},o.networkInterfaces=o.getNetworkInterfaces=function(){return{}},o.arch=function(){return"javascript"},o.platform=function(){return"browser"},o.tmpdir=o.tmpDir=function(){return"/tmp"},o.EOL=`
`,o.homedir=function(){return"/"}},function(i,o,s){var _=s(56),$=s(59).warn,et=o;et.version=s(137).version,et.transports=s(138),et.config=s(47),et.addColors=_.levels,et.format=_.format,et.createLogger=s(85),et.ExceptionHandler=s(86),et.RejectionHandler=s(90),et.Container=s(209),et.Transport=s(17),et.loggers=new et.Container;var tt=et.createLogger();Object.keys(et.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(function(j){return et[j]=function(){return tt[j].apply(tt,arguments)}}),Object.defineProperty(et,"level",{get:function(){return tt.level},set:function(j){tt.level=j}}),Object.defineProperty(et,"exceptions",{get:function(){return tt.exceptions}}),["exitOnError"].forEach(function(j){Object.defineProperty(et,j,{get:function(){return tt[j]},set:function(it){tt[j]=it}})}),Object.defineProperty(et,"default",{get:function(){return{exceptionHandlers:tt.exceptionHandlers,rejectionHandlers:tt.rejectionHandlers,transports:tt.transports}}}),$.deprecated(et,"setLevels"),$.forFunctions(et,"useFormat",["cli"]),$.forProperties(et,"useFormat",["padLevels","stripColors"]),$.forFunctions(et,"deprecated",["addRewriter","addFilter","clone","extend"]),$.forProperties(et,"deprecated",["emitErrs","levelLength"]),$.moved(et,"createLogger","Logger")},function(i,o,s){var _=s(10),$=s(141),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.handleRejections=it.handleRejections,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(st(),vt)throw vt;return}return this.log(ft,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(j[ht].callback(),vt)throw it(null),vt}else this.log(ft,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){},i.exports.LegacyTransportStream=s(147)},function(i,o,s){var _,$=typeof Reflect=="object"?Reflect:null,et=$&&typeof $.apply=="function"?$.apply:function(Et,Ot,Lt){return Function.prototype.apply.call(Et,Ot,Lt)};_=$&&typeof $.ownKeys=="function"?$.ownKeys:Object.getOwnPropertySymbols?function(Et){return Object.getOwnPropertyNames(Et).concat(Object.getOwnPropertySymbols(Et))}:function(Et){return Object.getOwnPropertyNames(Et)};var tt=Number.isNaN||function(Et){return Et!=Et};function j(){j.init.call(this)}i.exports=j,j.EventEmitter=j,j.prototype._events=void 0,j.prototype._eventsCount=0,j.prototype._maxListeners=void 0;var it=10;function st(Et){return Et._maxListeners===void 0?j.defaultMaxListeners:Et._maxListeners}function ht(Et,Ot,Lt,Tt){var It,mt,Bt,nn;if(typeof Lt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Lt);if((mt=Et._events)===void 0?(mt=Et._events=Object.create(null),Et._eventsCount=0):(mt.newListener!==void 0&&(Et.emit("newListener",Ot,Lt.listener?Lt.listener:Lt),mt=Et._events),Bt=mt[Ot]),Bt===void 0)Bt=mt[Ot]=Lt,++Et._eventsCount;else if(typeof Bt=="function"?Bt=mt[Ot]=Tt?[Lt,Bt]:[Bt,Lt]:Tt?Bt.unshift(Lt):Bt.push(Lt),(It=st(Et))>0&&Bt.length>It&&!Bt.warned){Bt.warned=!0;var sn=new Error("Possible EventEmitter memory leak detected. "+Bt.length+" "+String(Ot)+" listeners added. Use emitter.setMaxListeners() to increase limit");sn.name="MaxListenersExceededWarning",sn.emitter=Et,sn.type=Ot,sn.count=Bt.length,nn=sn,console&&console.warn&&console.warn(nn)}return Et}function vt(){for(var Et=[],Ot=0;Ot<arguments.length;Ot++)Et.push(arguments[Ot]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,et(this.listener,this.target,Et))}function ft(Et,Ot,Lt){var Tt={fired:!1,wrapFn:void 0,target:Et,type:Ot,listener:Lt},It=vt.bind(Tt);return It.listener=Lt,Tt.wrapFn=It,It}function pt(Et,Ot,Lt){var Tt=Et._events;if(Tt===void 0)return[];var It=Tt[Ot];return It===void 0?[]:typeof It=="function"?Lt?[It.listener||It]:[It]:Lt?function(mt){for(var Bt=new Array(mt.length),nn=0;nn<Bt.length;++nn)Bt[nn]=mt[nn].listener||mt[nn];return Bt}(It):yt(It,It.length)}function ct(Et){var Ot=this._events;if(Ot!==void 0){var Lt=Ot[Et];if(typeof Lt=="function")return 1;if(Lt!==void 0)return Lt.length}return 0}function yt(Et,Ot){for(var Lt=new Array(Ot),Tt=0;Tt<Ot;++Tt)Lt[Tt]=Et[Tt];return Lt}Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return it},set:function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Et+".");it=Et}}),j.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},j.prototype.setMaxListeners=function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Et+".");return this._maxListeners=Et,this},j.prototype.getMaxListeners=function(){return st(this)},j.prototype.emit=function(Et){for(var Ot=[],Lt=1;Lt<arguments.length;Lt++)Ot.push(arguments[Lt]);var Tt=Et==="error",It=this._events;if(It!==void 0)Tt=Tt&&It.error===void 0;else if(!Tt)return!1;if(Tt){var mt;if(Ot.length>0&&(mt=Ot[0]),mt instanceof Error)throw mt;var Bt=new Error("Unhandled error."+(mt?" ("+mt.message+")":""));throw Bt.context=mt,Bt}var nn=It[Et];if(nn===void 0)return!1;if(typeof nn=="function")et(nn,this,Ot);else{var sn=nn.length,xt=yt(nn,sn);for(Lt=0;Lt<sn;++Lt)et(xt[Lt],this,Ot)}return!0},j.prototype.addListener=function(Et,Ot){return ht(this,Et,Ot,!1)},j.prototype.on=j.prototype.addListener,j.prototype.prependListener=function(Et,Ot){return ht(this,Et,Ot,!0)},j.prototype.once=function(Et,Ot){if(typeof Ot!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ot);return this.on(Et,ft(this,Et,Ot)),this},j.prototype.prependOnceListener=function(Et,Ot){if(typeof Ot!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ot);return this.prependListener(Et,ft(this,Et,Ot)),this},j.prototype.removeListener=function(Et,Ot){var Lt,Tt,It,mt,Bt;if(typeof Ot!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ot);if((Tt=this._events)===void 0)return this;if((Lt=Tt[Et])===void 0)return this;if(Lt===Ot||Lt.listener===Ot)--this._eventsCount==0?this._events=Object.create(null):(delete Tt[Et],Tt.removeListener&&this.emit("removeListener",Et,Lt.listener||Ot));else if(typeof Lt!="function"){for(It=-1,mt=Lt.length-1;mt>=0;mt--)if(Lt[mt]===Ot||Lt[mt].listener===Ot){Bt=Lt[mt].listener,It=mt;break}if(It<0)return this;It===0?Lt.shift():function(nn,sn){for(;sn+1<nn.length;sn++)nn[sn]=nn[sn+1];nn.pop()}(Lt,It),Lt.length===1&&(Tt[Et]=Lt[0]),Tt.removeListener!==void 0&&this.emit("removeListener",Et,Bt||Ot)}return this},j.prototype.off=j.prototype.removeListener,j.prototype.removeAllListeners=function(Et){var Ot,Lt,Tt;if((Lt=this._events)===void 0)return this;if(Lt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Lt[Et]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Lt[Et]),this;if(arguments.length===0){var It,mt=Object.keys(Lt);for(Tt=0;Tt<mt.length;++Tt)(It=mt[Tt])!=="removeListener"&&this.removeAllListeners(It);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Ot=Lt[Et])=="function")this.removeListener(Et,Ot);else if(Ot!==void 0)for(Tt=Ot.length-1;Tt>=0;Tt--)this.removeListener(Et,Ot[Tt]);return this},j.prototype.listeners=function(Et){return pt(this,Et,!0)},j.prototype.rawListeners=function(Et){return pt(this,Et,!1)},j.listenerCount=function(Et,Ot){return typeof Et.listenerCount=="function"?Et.listenerCount(Ot):ct.call(Et,Ot)},j.prototype.listenerCount=ct,j.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]}},function(i,o,s){var _=s(146).Buffer,$=_.isEncoding||function(ct){switch((ct=""+ct)&&ct.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function et(ct){var yt;switch(this.encoding=function(Et){var Ot=function(Lt){if(!Lt)return"utf8";for(var Tt;;)switch(Lt){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Lt;default:if(Tt)return;Lt=(""+Lt).toLowerCase(),Tt=!0}}(Et);if(typeof Ot!="string"&&(_.isEncoding===$||!$(Et)))throw new Error("Unknown encoding: "+Et);return Ot||Et}(ct),this.encoding){case"utf16le":this.text=it,this.end=st,yt=4;break;case"utf8":this.fillLast=j,yt=4;break;case"base64":this.text=ht,this.end=vt,yt=3;break;default:return this.write=ft,void(this.end=pt)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(yt)}function tt(ct){return ct<=127?0:ct>>5==6?2:ct>>4==14?3:ct>>3==30?4:ct>>6==2?-1:-2}function j(ct){var yt=this.lastTotal-this.lastNeed,Et=function(Ot,Lt,Tt){if((192&Lt[0])!=128)return Ot.lastNeed=0,"";if(Ot.lastNeed>1&&Lt.length>1){if((192&Lt[1])!=128)return Ot.lastNeed=1,"";if(Ot.lastNeed>2&&Lt.length>2&&(192&Lt[2])!=128)return Ot.lastNeed=2,""}}(this,ct);return Et!==void 0?Et:this.lastNeed<=ct.length?(ct.copy(this.lastChar,yt,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ct.copy(this.lastChar,yt,0,ct.length),void(this.lastNeed-=ct.length))}function it(ct,yt){if((ct.length-yt)%2==0){var Et=ct.toString("utf16le",yt);if(Et){var Ot=Et.charCodeAt(Et.length-1);if(Ot>=55296&&Ot<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ct[ct.length-2],this.lastChar[1]=ct[ct.length-1],Et.slice(0,-1)}return Et}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ct[ct.length-1],ct.toString("utf16le",yt,ct.length-1)}function st(ct){var yt=ct&&ct.length?this.write(ct):"";if(this.lastNeed){var Et=this.lastTotal-this.lastNeed;return yt+this.lastChar.toString("utf16le",0,Et)}return yt}function ht(ct,yt){var Et=(ct.length-yt)%3;return Et===0?ct.toString("base64",yt):(this.lastNeed=3-Et,this.lastTotal=3,Et===1?this.lastChar[0]=ct[ct.length-1]:(this.lastChar[0]=ct[ct.length-2],this.lastChar[1]=ct[ct.length-1]),ct.toString("base64",yt,ct.length-Et))}function vt(ct){var yt=ct&&ct.length?this.write(ct):"";return this.lastNeed?yt+this.lastChar.toString("base64",0,3-this.lastNeed):yt}function ft(ct){return ct.toString(this.encoding)}function pt(ct){return ct&&ct.length?this.write(ct):""}o.StringDecoder=et,et.prototype.write=function(ct){if(ct.length===0)return"";var yt,Et;if(this.lastNeed){if((yt=this.fillLast(ct))===void 0)return"";Et=this.lastNeed,this.lastNeed=0}else Et=0;return Et<ct.length?yt?yt+this.text(ct,Et):this.text(ct,Et):yt||""},et.prototype.end=function(ct){var yt=ct&&ct.length?this.write(ct):"";return this.lastNeed?yt+"":yt},et.prototype.text=function(ct,yt){var Et=function(Lt,Tt,It){var mt=Tt.length-1;if(mt<It)return 0;var Bt=tt(Tt[mt]);return Bt>=0?(Bt>0&&(Lt.lastNeed=Bt-1),Bt):--mt<It||Bt===-2?0:(Bt=tt(Tt[mt]))>=0?(Bt>0&&(Lt.lastNeed=Bt-2),Bt):--mt<It||Bt===-2?0:(Bt=tt(Tt[mt]))>=0?(Bt>0&&(Bt===2?Bt=0:Lt.lastNeed=Bt-3),Bt):0}(this,ct,yt);if(!this.lastNeed)return ct.toString("utf8",yt);this.lastTotal=Et;var Ot=ct.length-(Et-this.lastNeed);return ct.copy(this.lastChar,0,Ot),ct.toString("utf8",yt,Ot)},et.prototype.fillLast=function(ct){if(this.lastNeed<=ct.length)return ct.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ct.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ct.length),this.lastNeed-=ct.length}},function(i,o,s){var _=s(13),$=Object.keys||function(ct){var yt=[];for(var Et in ct)yt.push(Et);return yt};i.exports=vt;var et=s(14);et.inherits=s(7);var tt=s(67),j=s(44);et.inherits(vt,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];vt.prototype[ht]||(vt.prototype[ht]=j.prototype[ht])}function vt(ct){if(!(this instanceof vt))return new vt(ct);tt.call(this,ct),j.call(this,ct),ct&&ct.readable===!1&&(this.readable=!1),ct&&ct.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ct&&ct.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ft)}function ft(){this.allowHalfOpen||this._writableState.ended||_.nextTick(pt,this)}function pt(ct){ct.end()}Object.defineProperty(vt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(vt.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ct){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ct,this._writableState.destroyed=ct)}}),vt.prototype._destroy=function(ct,yt){this.push(null),this.end(),_.nextTick(yt,ct)}},function(i,o,s){(function(_){function $(zt){var on=0;return function(){return on<zt.length?{done:!1,value:zt[on++]}:{done:!0}}}var et=typeof Object.defineProperties=="function"?Object.defineProperty:function(zt,on,_n){zt!=Array.prototype&&zt!=Object.prototype&&(zt[on]=_n.value)},tt=function(zt){zt=[typeof window=="object"&&window,typeof self=="object"&&self,typeof _=="object"&&_,zt];for(var on=0;on<zt.length;++on){var _n=zt[on];if(_n&&_n.Math==Math)return _n}throw Error("Cannot find global object")}(this);function j(zt,on){if(on){var _n=tt;zt=zt.split(".");for(var Rn=0;Rn<zt.length-1;Rn++){var Nn=zt[Rn];Nn in _n||(_n[Nn]={}),_n=_n[Nn]}(on=on(Rn=_n[zt=zt[zt.length-1]]))!=Rn&&on!=null&&et(_n,zt,{configurable:!0,writable:!0,value:on})}}function it(zt){var on=typeof Symbol<"u"&&Symbol.iterator&&zt[Symbol.iterator];return on?on.call(zt):{next:$(zt)}}j("Object.is",function(zt){return zt||function(on,_n){return on===_n?on!==0||1/on==1/_n:on!=on&&_n!=_n}}),j("Array.prototype.includes",function(zt){return zt||function(on,_n){var Rn=this;Rn instanceof String&&(Rn=String(Rn));var Nn=Rn.length;for(0>(_n=_n||0)&&(_n=Math.max(_n+Nn,0));_n<Nn;_n++){var rr=Rn[_n];if(rr===on||Object.is(rr,on))return!0}return!1}}),j("Promise",function(zt){function on(Ln){this.b=0,this.c=void 0,this.a=[];var Xn=this.f();try{Ln(Xn.resolve,Xn.reject)}catch(Er){Xn.reject(Er)}}function _n(){this.a=null}function Rn(Ln){return Ln instanceof on?Ln:new on(function(Xn){Xn(Ln)})}if(zt)return zt;_n.prototype.b=function(Ln){if(this.a==null){this.a=[];var Xn=this;this.c(function(){Xn.g()})}this.a.push(Ln)};var Nn=tt.setTimeout;_n.prototype.c=function(Ln){Nn(Ln,0)},_n.prototype.g=function(){for(;this.a&&this.a.length;){var Ln=this.a;this.a=[];for(var Xn=0;Xn<Ln.length;++Xn){var Er=Ln[Xn];Ln[Xn]=null;try{Er()}catch(Cr){this.f(Cr)}}}this.a=null},_n.prototype.f=function(Ln){this.c(function(){throw Ln})},on.prototype.f=function(){function Ln(Cr){return function(Qr){Er||(Er=!0,Cr.call(Xn,Qr))}}var Xn=this,Er=!1;return{resolve:Ln(this.m),reject:Ln(this.g)}},on.prototype.m=function(Ln){if(Ln===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(Ln instanceof on)this.o(Ln);else{e:switch(typeof Ln){case"object":var Xn=Ln!=null;break e;case"function":Xn=!0;break e;default:Xn=!1}Xn?this.l(Ln):this.h(Ln)}},on.prototype.l=function(Ln){var Xn=void 0;try{Xn=Ln.then}catch(Er){return void this.g(Er)}typeof Xn=="function"?this.u(Xn,Ln):this.h(Ln)},on.prototype.g=function(Ln){this.i(2,Ln)},on.prototype.h=function(Ln){this.i(1,Ln)},on.prototype.i=function(Ln,Xn){if(this.b!=0)throw Error("Cannot settle("+Ln+", "+Xn+"): Promise already settled in state"+this.b);this.b=Ln,this.c=Xn,this.j()},on.prototype.j=function(){if(this.a!=null){for(var Ln=0;Ln<this.a.length;++Ln)rr.b(this.a[Ln]);this.a=null}};var rr=new _n;return on.prototype.o=function(Ln){var Xn=this.f();Ln.w(Xn.resolve,Xn.reject)},on.prototype.u=function(Ln,Xn){var Er=this.f();try{Ln.call(Xn,Er.resolve,Er.reject)}catch(Cr){Er.reject(Cr)}},on.prototype.then=function(Ln,Xn){function Er(bo,Mo){return typeof bo=="function"?function(Ko){try{Cr(bo(Ko))}catch(ns){Qr(ns)}}:Mo}var Cr,Qr,jo=new on(function(bo,Mo){Cr=bo,Qr=Mo});return this.w(Er(Ln,Cr),Er(Xn,Qr)),jo},on.prototype.catch=function(Ln){return this.then(void 0,Ln)},on.prototype.w=function(Ln,Xn){function Er(){switch(Cr.b){case 1:Ln(Cr.c);break;case 2:Xn(Cr.c);break;default:throw Error("Unexpected state: "+Cr.b)}}var Cr=this;this.a==null?rr.b(Er):this.a.push(Er)},on.resolve=Rn,on.reject=function(Ln){return new on(function(Xn,Er){Er(Ln)})},on.race=function(Ln){return new on(function(Xn,Er){for(var Cr=it(Ln),Qr=Cr.next();!Qr.done;Qr=Cr.next())Rn(Qr.value).w(Xn,Er)})},on.all=function(Ln){var Xn=it(Ln),Er=Xn.next();return Er.done?Rn([]):new on(function(Cr,Qr){function jo(Ko){return function(ns){bo[Ko]=ns,--Mo==0&&Cr(bo)}}var bo=[],Mo=0;do bo.push(void 0),Mo++,Rn(Er.value).w(jo(bo.length-1),Qr),Er=Xn.next();while(!Er.done)})},on});var st=st||{},ht=this||self;function vt(zt,on){zt=zt.split("."),on=on||ht;for(var _n=0;_n<zt.length;_n++)if((on=on[zt[_n]])==null)return null;return on}function ft(){}function pt(zt){var on=typeof zt;if(on=="object"){if(!zt)return"null";if(zt instanceof Array)return"array";if(zt instanceof Object)return on;var _n=Object.prototype.toString.call(zt);if(_n=="[object Window]")return"object";if(_n=="[object Array]"||typeof zt.length=="number"&&zt.splice!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("splice"))return"array";if(_n=="[object Function]"||zt.call!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("call"))return"function"}else if(on=="function"&&zt.call===void 0)return"object";return on}function ct(zt){var on=typeof zt;return on=="object"&&zt!=null||on=="function"}function yt(zt,on,_n){return zt.call.apply(zt.bind,arguments)}function Et(zt,on,_n){if(!zt)throw Error();if(2<arguments.length){var Rn=Array.prototype.slice.call(arguments,2);return function(){var Nn=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Nn,Rn),zt.apply(on,Nn)}}return function(){return zt.apply(on,arguments)}}function Ot(zt,on,_n){return(Ot=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yt:Et).apply(null,arguments)}function Lt(zt,on){function _n(){}_n.prototype=on.prototype,zt.S=on.prototype,zt.prototype=new _n,zt.prototype.constructor=zt}function Tt(){this.a={}}function It(zt,on,_n,Rn){this.f=zt,this.c=on,this.b=_n,this.a=Rn}function mt(zt,on,_n,Rn){_n=_n===void 0?{}:_n,this.c=zt,this.a=_n,this.b=on,this.f=Rn===void 0?null:Rn}function Bt(zt,on,_n,Rn,Nn,rr){this.name=zt,this.a=Nn,this.b=rr}function nn(zt,on,_n){_n=_n===void 0?{}:_n;var Rn=Rn===void 0?new Tt:Rn;return new It(on,zt,_n,Rn)}function sn(zt,on,_n,Rn){return Rn instanceof Bt?Rn:new Bt(zt,_n,Rn.b||on.constructor,Rn.f,Rn.a,Rn.c)}function xt(zt){this.a=zt}function St(zt){switch(zt){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}}function Nt(zt){if(Error.captureStackTrace)Error.captureStackTrace(this,Nt);else{var on=Error().stack;on&&(this.stack=on)}zt&&(this.message=String(zt))}function Ct(zt,on){for(var _n="",Rn=(zt=zt.split("%s")).length-1,Nn=0;Nn<Rn;Nn++)_n+=zt[Nn]+(Nn<on.length?on[Nn]:"%s");Nt.call(this,_n+zt[Rn])}function Vt(){this.j=null,this.i=[],this.l=0,this.b=Kt,this.f=this.a=this.h=0,this.c=null,this.g=0}Tt.prototype.get=function(zt){return this.a[zt]},Tt.prototype.f=function(){return Object.keys(this.a)},It.prototype.getRequestMessage=function(){return this.f},It.prototype.getMethodDescriptor=function(){return this.c},It.prototype.getMetadata=function(){return this.b},It.prototype.getCallOptions=function(){return this.a},mt.prototype.getResponseMessage=function(){return this.c},mt.prototype.getMetadata=function(){return this.a},mt.prototype.getMethodDescriptor=function(){return this.b},mt.prototype.getStatus=function(){return this.f},xt.prototype.on=function(zt,on){return zt=="data"||zt=="error"?this:this.a.on(zt,on)},xt.prototype.removeListener=function(zt,on){return this.a.removeListener(zt,on)},xt.prototype.cancel=function(){this.a.cancel()},Lt(Nt,Error),Nt.prototype.name="CustomError",Lt(Ct,Nt),Ct.prototype.name="AssertionError";var Kt=0,Gt=1,Ut=2,Ht=3,qt=0,Pt=128;function wt(zt,on,_n,Rn){throw zt.b=Ht,zt.j="The stream is broken @"+zt.l+"/"+_n+". Error: "+Rn+`. With input:
`+on,Error(zt.j)}var $t=Array.prototype.indexOf?function(zt,on){return Array.prototype.indexOf.call(zt,on,void 0)}:function(zt,on){if(typeof zt=="string")return typeof on!="string"||on.length!=1?-1:zt.indexOf(on,0);for(var _n=0;_n<zt.length;_n++)if(_n in zt&&zt[_n]===on)return _n;return-1},Xt,un=String.prototype.trim?function(zt){return zt.trim()}:function(zt){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(zt)[1]};function dn(zt,on){return zt.indexOf(on)!=-1}function mn(zt,on){return zt<on?-1:zt>on?1:0}e:{var an=ht.navigator;if(an){var en=an.userAgent;if(en){Xt=en;break e}}Xt=""}var Mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jt(zt){var on=1;zt=zt.split(":");for(var _n=[];0<on&&zt.length;)_n.push(zt.shift()),on--;return zt.length&&_n.push(zt.join(":")),_n}function Qt(zt){return Qt[" "](zt),zt}Qt[" "]=ft;var gn,hn,An=dn(Xt,"Opera"),Mn=dn(Xt,"Trident")||dn(Xt,"MSIE"),Yn=dn(Xt,"Edge"),Nr=dn(Xt,"Gecko")&&!(dn(Xt.toLowerCase(),"webkit")&&!dn(Xt,"Edge"))&&!(dn(Xt,"Trident")||dn(Xt,"MSIE"))&&!dn(Xt,"Edge"),ro=dn(Xt.toLowerCase(),"webkit")&&!dn(Xt,"Edge");function to(){var zt=ht.document;return zt?zt.documentMode:void 0}e:{var zr="",In=(hn=Xt,Nr?/rv:([^\);]+)(\)|;)/.exec(hn):Yn?/Edge\/([\d\.]+)/.exec(hn):Mn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hn):ro?/WebKit\/(\S+)/.exec(hn):An?/(?:Version)[ \/]?(\S+)/.exec(hn):void 0);if(In&&(zr=In?In[1]:""),Mn){var kn=to();if(kn!=null&&kn>parseFloat(zr)){gn=String(kn);break e}}gn=zr}var Kn,vr={};function yr(zt){return function(on,_n){var Rn=vr;return Object.prototype.hasOwnProperty.call(Rn,on)?Rn[on]:Rn[on]=_n(on)}(zt,function(){for(var on=0,_n=un(String(gn)).split("."),Rn=un(String(zt)).split("."),Nn=Math.max(_n.length,Rn.length),rr=0;on==0&&rr<Nn;rr++){var Ln=_n[rr]||"",Xn=Rn[rr]||"";do{if(Ln=/(\d*)(\D*)(.*)/.exec(Ln)||["","","",""],Xn=/(\d*)(\D*)(.*)/.exec(Xn)||["","","",""],Ln[0].length==0&&Xn[0].length==0)break;on=mn(Ln[1].length==0?0:parseInt(Ln[1],10),Xn[1].length==0?0:parseInt(Xn[1],10))||mn(Ln[2].length==0,Xn[2].length==0)||mn(Ln[2],Xn[2]),Ln=Ln[3],Xn=Xn[3]}while(on==0)}return 0<=on})}if(ht.document&&Mn){var Wr=to();Kn=Wr||parseInt(gn,10)||void 0}else Kn=void 0;var Hr=Kn;function Lr(){this.F=this.F}Lr.prototype.F=!1;var Ir,jr=Object.freeze||function(zt){return zt};(Ir=!Mn)||(Ir=9<=Number(Hr));var Co=Ir,Jo=Mn&&!yr("9"),ps=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var zt=!1,on=Object.defineProperty({},"passive",{get:function(){zt=!0}});try{ht.addEventListener("test",ft,on),ht.removeEventListener("test",ft,on)}catch{}return zt}();function ds(zt,on){this.type=zt,this.a=this.target=on,this.defaultPrevented=!1}function Ss(zt,on){if(ds.call(this,zt?zt.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,zt){var _n=this.type=zt.type,Rn=zt.changedTouches&&zt.changedTouches.length?zt.changedTouches[0]:null;if(this.target=zt.target||zt.srcElement,this.a=on,on=zt.relatedTarget){if(Nr){e:{try{Qt(on.nodeName);var Nn=!0;break e}catch{}Nn=!1}Nn||(on=null)}}else _n=="mouseover"?on=zt.fromElement:_n=="mouseout"&&(on=zt.toElement);this.relatedTarget=on,Rn?(this.clientX=Rn.clientX!==void 0?Rn.clientX:Rn.pageX,this.clientY=Rn.clientY!==void 0?Rn.clientY:Rn.pageY,this.screenX=Rn.screenX||0,this.screenY=Rn.screenY||0):(this.clientX=zt.clientX!==void 0?zt.clientX:zt.pageX,this.clientY=zt.clientY!==void 0?zt.clientY:zt.pageY,this.screenX=zt.screenX||0,this.screenY=zt.screenY||0),this.button=zt.button,this.key=zt.key||"",this.ctrlKey=zt.ctrlKey,this.altKey=zt.altKey,this.shiftKey=zt.shiftKey,this.metaKey=zt.metaKey,this.pointerId=zt.pointerId||0,this.pointerType=typeof zt.pointerType=="string"?zt.pointerType:Al[zt.pointerType]||"",this.c=zt,zt.defaultPrevented&&this.b()}}ds.prototype.b=function(){this.defaultPrevented=!0},Lt(Ss,ds);var Al=jr({2:"touch",3:"pen",4:"mouse"});Ss.prototype.b=function(){Ss.S.b.call(this);var zt=this.c;if(zt.preventDefault)zt.preventDefault();else if(zt.returnValue=!1,Jo)try{(zt.ctrlKey||112<=zt.keyCode&&123>=zt.keyCode)&&(zt.keyCode=-1)}catch{}};var qo="closure_listenable_"+(1e6*Math.random()|0),na=0;function Gr(zt,on,_n,Rn,Nn){this.listener=zt,this.proxy=null,this.src=on,this.type=_n,this.capture=!!Rn,this.A=Nn,this.key=++na,this.s=this.v=!1}function bn(zt){zt.s=!0,zt.listener=null,zt.proxy=null,zt.src=null,zt.A=null}function En(zt){this.src=zt,this.a={},this.b=0}function Bn(zt,on){var _n=on.type;if(_n in zt.a){var Rn,Nn=zt.a[_n],rr=$t(Nn,on);(Rn=0<=rr)&&Array.prototype.splice.call(Nn,rr,1),Rn&&(bn(on),zt.a[_n].length==0&&(delete zt.a[_n],zt.b--))}}function ur(zt,on,_n,Rn){for(var Nn=0;Nn<zt.length;++Nn){var rr=zt[Nn];if(!rr.s&&rr.listener==on&&rr.capture==!!_n&&rr.A==Rn)return Nn}return-1}En.prototype.add=function(zt,on,_n,Rn,Nn){var rr=zt.toString();(zt=this.a[rr])||(zt=this.a[rr]=[],this.b++);var Ln=ur(zt,on,Rn,Nn);return-1<Ln?(on=zt[Ln],_n||(on.v=!1)):((on=new Gr(on,this.src,rr,!!Rn,Nn)).v=_n,zt.push(on)),on};var pr="closure_lm_"+(1e6*Math.random()|0),Zr={};function Xr(zt,on,_n,Rn,Nn){if(Rn&&Rn.once)(function Ln(Xn,Er,Cr,Qr,jo){if(Array.isArray(Er))for(var bo=0;bo<Er.length;bo++)Ln(Xn,Er[bo],Cr,Qr,jo);else Cr=Jn(Cr),Xn&&Xn[qo]?Xn.f.add(String(Er),Cr,!0,ct(Qr)?!!Qr.capture:!!Qr,jo):qr(Xn,Er,Cr,!0,Qr,jo)})(zt,on,_n,Rn,Nn);else if(Array.isArray(on))for(var rr=0;rr<on.length;rr++)Xr(zt,on[rr],_n,Rn,Nn);else _n=Jn(_n),zt&&zt[qo]?zt.f.add(String(on),_n,!1,ct(Rn)?!!Rn.capture:!!Rn,Nn):qr(zt,on,_n,!1,Rn,Nn)}function qr(zt,on,_n,Rn,Nn,rr){if(!on)throw Error("Invalid event type");var Ln=ct(Nn)?!!Nn.capture:!!Nn,Xn=Cn(zt);if(Xn||(zt[pr]=Xn=new En(zt)),!(_n=Xn.add(on,_n,Rn,Ln,rr)).proxy)if(Rn=function(){var Er=Sn,Cr=Co?function(Qr){return Er.call(Cr.src,Cr.listener,Qr)}:function(Qr){if(!(Qr=Er.call(Cr.src,Cr.listener,Qr)))return Qr};return Cr}(),_n.proxy=Rn,Rn.src=zt,Rn.listener=_n,zt.addEventListener)ps||(Nn=Ln),Nn===void 0&&(Nn=!1),zt.addEventListener(on.toString(),Rn,Nn);else if(zt.attachEvent)zt.attachEvent(Tr(on.toString()),Rn);else{if(!zt.addListener||!zt.removeListener)throw Error("addEventListener and attachEvent are unavailable.");zt.addListener(Rn)}}function Mr(zt){if(typeof zt!="number"&&zt&&!zt.s){var on=zt.src;if(on&&on[qo])Bn(on.f,zt);else{var _n=zt.type,Rn=zt.proxy;on.removeEventListener?on.removeEventListener(_n,Rn,zt.capture):on.detachEvent?on.detachEvent(Tr(_n),Rn):on.addListener&&on.removeListener&&on.removeListener(Rn),(_n=Cn(on))?(Bn(_n,zt),_n.b==0&&(_n.src=null,on[pr]=null)):bn(zt)}}}function Tr(zt){return zt in Zr?Zr[zt]:Zr[zt]="on"+zt}function Wo(zt,on,_n,Rn){var Nn=!0;if((zt=Cn(zt))&&(on=zt.a[on.toString()]))for(on=on.concat(),zt=0;zt<on.length;zt++){var rr=on[zt];rr&&rr.capture==_n&&!rr.s&&(rr=Vn(rr,Rn),Nn=Nn&&rr!==!1)}return Nn}function Vn(zt,on){var _n=zt.listener,Rn=zt.A||zt.src;return zt.v&&Mr(zt),_n.call(Rn,on)}function Sn(zt,on){if(zt.s)return!0;if(!Co){var _n=on||vt("window.event");on=new Ss(_n,this);var Rn=!0;if(!(0>_n.keyCode||_n.returnValue!=null)){e:{var Nn=!1;if(_n.keyCode==0)try{_n.keyCode=-1;break e}catch{Nn=!0}(Nn||_n.returnValue==null)&&(_n.returnValue=!0)}for(_n=[],Nn=on.a;Nn;Nn=Nn.parentNode)_n.push(Nn);for(zt=zt.type,Nn=_n.length-1;0<=Nn;Nn--){on.a=_n[Nn];var rr=Wo(_n[Nn],zt,!0,on);Rn=Rn&&rr}for(Nn=0;Nn<_n.length;Nn++)on.a=_n[Nn],rr=Wo(_n[Nn],zt,!1,on),Rn=Rn&&rr}return Rn}return Vn(zt,new Ss(on,this))}function Cn(zt){return(zt=zt[pr])instanceof En?zt:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jn(zt){return pt(zt)=="function"?zt:(zt[Hn]||(zt[Hn]=function(on){return zt.handleEvent(on)}),zt[Hn])}function ir(){Lr.call(this),this.f=new En(this),this.N=this}function gr(zt,on){zt=zt.N;var _n=on.type||on;if(typeof on=="string")on=new ds(on,zt);else if(on instanceof ds)on.target=on.target||zt;else{var Rn=on;(function(Nn,rr){for(var Ln,Xn,Er=1;Er<arguments.length;Er++){for(Ln in Xn=arguments[Er])Nn[Ln]=Xn[Ln];for(var Cr=0;Cr<Mt.length;Cr++)Ln=Mt[Cr],Object.prototype.hasOwnProperty.call(Xn,Ln)&&(Nn[Ln]=Xn[Ln])}})(on=new ds(_n,zt),Rn)}_r(zt=on.a=zt,_n,!0,on),_r(zt,_n,!1,on)}function _r(zt,on,_n,Rn){if(on=zt.f.a[String(on)]){on=on.concat();for(var Nn=!0,rr=0;rr<on.length;++rr){var Ln=on[rr];if(Ln&&!Ln.s&&Ln.capture==_n){var Xn=Ln.listener,Er=Ln.A||Ln.src;Ln.v&&Bn(zt.f,Ln),Nn=Xn.call(Er,Rn)!==!1&&Nn}}}}function fr(zt,on,_n){if(pt(zt)=="function")_n&&(zt=Ot(zt,_n));else{if(!zt||typeof zt.handleEvent!="function")throw Error("Invalid listener argument");zt=Ot(zt.handleEvent,zt)}return 2147483647<Number(on)?-1:ht.setTimeout(zt,on||0)}function xr(zt,on,_n){this.reset(zt,on,_n,void 0,void 0)}Lt(ir,Lr),ir.prototype[qo]=!0,ir.prototype.addEventListener=function(zt,on,_n,Rn){Xr(this,zt,on,_n,Rn)},ir.prototype.removeEventListener=function(zt,on,_n,Rn){(function Nn(rr,Ln,Xn,Er,Cr){if(Array.isArray(Ln))for(var Qr=0;Qr<Ln.length;Qr++)Nn(rr,Ln[Qr],Xn,Er,Cr);else Er=ct(Er)?!!Er.capture:!!Er,Xn=Jn(Xn),rr&&rr[qo]?(rr=rr.f,(Ln=String(Ln).toString())in rr.a&&-1<(Xn=ur(Qr=rr.a[Ln],Xn,Er,Cr))&&(bn(Qr[Xn]),Array.prototype.splice.call(Qr,Xn,1),Qr.length==0&&(delete rr.a[Ln],rr.b--))):rr&&(rr=Cn(rr))&&(Ln=rr.a[Ln.toString()],rr=-1,Ln&&(rr=ur(Ln,Xn,Er,Cr)),(Xn=-1<rr?Ln[rr]:null)&&Mr(Xn))})(this,zt,on,_n,Rn)},xr.prototype.a=null;function Yr(zt){this.f=zt,this.b=this.c=this.a=null}function po(zt,on){this.name=zt,this.value=on}xr.prototype.reset=function(zt,on,_n,Rn,Nn){delete this.a},po.prototype.toString=function(){return this.name};var io=new po("SEVERE",1e3),ko=new po("CONFIG",700),Do=new po("FINE",500);function Lo(zt){return zt.c?zt.c:zt.a?Lo(zt.a):(function(on,_n){throw new Ct("Failure"+(on?": "+on:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)}Yr.prototype.log=function(zt,on,_n){if(zt.value>=Lo(this).value)for(pt(on)=="function"&&(on=on()),zt=new xr(zt,String(on),this.f),_n&&(zt.a=_n),_n=this;_n;)_n=_n.a};var zo,ts={},ms=null;function Eo(zt,on){zt&&zt.log(Do,on,void 0)}function Rs(){}function As(zt){var on;return(on=zt.a)||(on={},$r(zt)&&(on[0]=!0,on[1]=!0),on=zt.a=on),on}function Su(){}function cu(zt){return(zt=$r(zt))?new ActiveXObject(zt):new XMLHttpRequest}function $r(zt){if(!zt.b&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var on=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],_n=0;_n<on.length;_n++){var Rn=on[_n];try{return new ActiveXObject(Rn),zt.b=Rn}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return zt.b}function xa(zt,on){this.b={},this.a=[],this.c=0;var _n=arguments.length;if(1<_n){if(_n%2)throw Error("Uneven number of arguments");for(var Rn=0;Rn<_n;Rn+=2)this.set(arguments[Rn],arguments[Rn+1])}else zt&&hu(this,zt)}function Gs(zt){if(zt.c!=zt.a.length){for(var on=0,_n=0;on<zt.a.length;){var Rn=zt.a[on];ru(zt.b,Rn)&&(zt.a[_n++]=Rn),on++}zt.a.length=_n}if(zt.c!=zt.a.length){var Nn={};for(_n=on=0;on<zt.a.length;)ru(Nn,Rn=zt.a[on])||(zt.a[_n++]=Rn,Nn[Rn]=1),on++;zt.a.length=_n}}function hu(zt,on){if(on instanceof xa)for(var _n=on.f(),Rn=0;Rn<_n.length;Rn++)zt.set(_n[Rn],on.get(_n[Rn]));else for(_n in on)zt.set(_n,on[_n])}function ru(zt,on){return Object.prototype.hasOwnProperty.call(zt,on)}Rs.prototype.a=null,Lt(Su,Rs),zo=new Su,xa.prototype.f=function(){return Gs(this),this.a.concat()},xa.prototype.get=function(zt,on){return ru(this.b,zt)?this.b[zt]:on},xa.prototype.set=function(zt,on){ru(this.b,zt)||(this.c++,this.a.push(zt)),this.b[zt]=on},xa.prototype.forEach=function(zt,on){for(var _n=this.f(),Rn=0;Rn<_n.length;Rn++){var Nn=_n[Rn],rr=this.get(Nn);zt.call(on,rr,Nn,this)}};var Au=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function El(zt){ir.call(this),this.headers=new xa,this.D=zt||null,this.c=!1,this.C=this.a=null,this.J=this.o="",this.g=0,this.i="",this.h=this.I=this.m=this.G=!1,this.l=0,this.u=null,this.j=nm,this.B=this.H=!1}Lt(El,ir);var nm="",tp=El.prototype,wo=function zt(on){var _n;if(ms||(ms=new Yr(""),ts[""]=ms,ms.c=ko),!(_n=ts[on])){_n=new Yr(on);var Rn=on.lastIndexOf("."),Nn=on.substr(Rn+1);(Rn=zt(on.substr(0,Rn))).b||(Rn.b={}),Rn.b[Nn]=_n,_n.a=Rn,ts[on]=_n}return _n}("goog.net.XhrIo");tp.b=wo;var as=/^https?$/i,us=["POST","PUT"];function Eu(zt,on,_n){if(zt.a)throw Error("[goog.net.XhrIo] Object is active with another request="+zt.o+"; newUri="+on);zt.o=on,zt.i="",zt.g=0,zt.J="POST",zt.G=!1,zt.c=!0,zt.a=zt.D?cu(zt.D):cu(zo),zt.C=zt.D?As(zt.D):As(zo),zt.a.onreadystatechange=Ot(zt.K,zt);try{Eo(zt.b,Us(zt,"Opening Xhr")),zt.I=!0,zt.a.open("POST",String(on),!0),zt.I=!1}catch(rr){return Eo(zt.b,Us(zt,"Error opening Xhr: "+rr.message)),void rs(zt,rr)}on=_n||"";var Rn=function(rr){e:{for(var Ln=np,Xn=rr.length,Er=typeof rr=="string"?rr.split(""):rr,Cr=0;Cr<Xn;Cr++)if(Cr in Er&&Ln.call(void 0,Er[Cr],Cr,rr)){Ln=Cr;break e}Ln=-1}return 0>Ln?null:typeof rr=="string"?rr.charAt(Ln):rr[Ln]}((_n=new xa(zt.headers)).f()),Nn=ht.FormData&&on instanceof ht.FormData;!(0<=$t(us,"POST"))||Rn||Nn||_n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_n.forEach(function(rr,Ln){this.a.setRequestHeader(Ln,rr)},zt),zt.j&&(zt.a.responseType=zt.j),"withCredentials"in zt.a&&zt.a.withCredentials!==zt.H&&(zt.a.withCredentials=zt.H);try{Bl(zt),0<zt.l&&(zt.B=function(rr){return Mn&&yr(9)&&typeof rr.timeout=="number"&&rr.ontimeout!==void 0}(zt.a),Eo(zt.b,Us(zt,"Will abort after "+zt.l+"ms if incomplete, xhr2 "+zt.B)),zt.B?(zt.a.timeout=zt.l,zt.a.ontimeout=Ot(zt.L,zt)):zt.u=fr(zt.L,zt.l,zt)),Eo(zt.b,Us(zt,"Sending request")),zt.m=!0,zt.a.send(on),zt.m=!1}catch(rr){Eo(zt.b,Us(zt,"Send error: "+rr.message)),rs(zt,rr)}}function np(zt){return zt.toLowerCase()=="content-type"}function rs(zt,on){zt.c=!1,zt.a&&(zt.h=!0,zt.a.abort(),zt.h=!1),zt.i=on,zt.g=5,Uu(zt),fu(zt)}function Uu(zt){zt.G||(zt.G=!0,gr(zt,"complete"),gr(zt,"error"))}function zu(zt){if(zt.c&&st!==void 0){if(zt.C[1]&&ys(zt)==4&&zt.getStatus()==2)Eo(zt.b,Us(zt,"Local request error detected and ignored"));else if(zt.m&&ys(zt)==4)fr(zt.K,0,zt);else if(gr(zt,"readystatechange"),ys(zt)==4){Eo(zt.b,Us(zt,"Request complete")),zt.c=!1;try{var on,_n=zt.getStatus();e:switch(_n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Rn=!0;break e;default:Rn=!1}if(!(on=Rn)){var Nn;if(Nn=_n===0){var rr=String(zt.o).match(Au)[1]||null;if(!rr&&ht.self&&ht.self.location){var Ln=ht.self.location.protocol;rr=Ln.substr(0,Ln.length-1)}Nn=!as.test(rr?rr.toLowerCase():"")}on=Nn}if(on)gr(zt,"complete"),gr(zt,"success");else{zt.g=6;try{var Xn=2<ys(zt)?zt.a.statusText:""}catch(Er){Eo(zt.b,"Can not get status: "+Er.message),Xn=""}zt.i=Xn+" ["+zt.getStatus()+"]",Uu(zt)}}finally{fu(zt)}}}}function fu(zt){if(zt.a){Bl(zt);var on=zt.a,_n=zt.C[0]?ft:null;zt.a=null,zt.C=null,gr(zt,"ready");try{on.onreadystatechange=_n}catch(Rn){(zt=zt.b)&&zt.log(io,"Problem encountered resetting onreadystatechange: "+Rn.message,void 0)}}}function Bl(zt){zt.a&&zt.B&&(zt.a.ontimeout=null),zt.u&&(ht.clearTimeout(zt.u),zt.u=null)}function ys(zt){return zt.a?zt.a.readyState:0}function Cm(zt,on){if(zt.a&&ys(zt)==4)return(zt=zt.a.getResponseHeader(on))===null?void 0:zt}function Us(zt,on){return on+" ["+zt.J+" "+zt.o+" "+zt.getStatus()+"]"}El.prototype.L=function(){st!==void 0&&this.a&&(this.i="Timed out after "+this.l+"ms, aborting",this.g=8,Eo(this.b,Us(this,this.i)),gr(this,"timeout"),this.abort(8))},El.prototype.abort=function(zt){this.a&&this.c&&(Eo(this.b,Us(this,"Aborting")),this.c=!1,this.h=!0,this.a.abort(),this.h=!1,this.g=zt||7,gr(this,"complete"),gr(this,"abort"),fu(this))},El.prototype.K=function(){this.F||(this.I||this.m||this.h?zu(this):this.O())},El.prototype.O=function(){zu(this)},El.prototype.getStatus=function(){try{return 2<ys(this)?this.a.status:-1}catch{return-1}};var Vu={},Qs=null;function Wu(zt){var on=zt.length,_n=3*on/4;_n%3?_n=Math.floor(_n):dn("=.",zt[on-1])&&(_n=dn("=.",zt[on-2])?_n-2:_n-1);var Rn=new Uint8Array(_n),Nn=0;return function(rr,Ln){function Xn(Mo){for(;Er<rr.length;){var Ko=rr.charAt(Er++),ns=Qs[Ko];if(ns!=null)return ns;if(!/^[\s\xa0]*$/.test(Ko))throw Error("Unknown base64 encoding at char: "+Ko)}return Mo}rp();for(var Er=0;;){var Cr=Xn(-1),Qr=Xn(0),jo=Xn(64),bo=Xn(64);if(bo===64&&Cr===-1)break;Ln(Cr<<2|Qr>>4),jo!=64&&(Ln(Qr<<4&240|jo>>2),bo!=64&&Ln(jo<<6&192|bo))}}(zt,function(rr){Rn[Nn++]=rr}),Rn.subarray(0,Nn)}function rp(){if(!Qs){Qs={};for(var zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),on=["+/=","+/","-_=","-_.","-_"],_n=0;5>_n;_n++){var Rn=zt.concat(on[_n].split(""));Vu[_n]=Rn;for(var Nn=0;Nn<Rn.length;Nn++){var rr=Rn[Nn];Qs[rr]===void 0&&(Qs[rr]=Nn)}}}}var jp=["content-type","grpc-status","grpc-message"];function ga(zt){this.a=zt.T,this.l=null,this.b=[],this.h=[],this.g=[],this.f=[],this.c=[],this.j=!1,this.i=0,this.m=new Vt;var on=this;Xr(this.a,"readystatechange",function(){var _n=on.a;if(_n=_n.a?_n.a.getResponseHeader("Content-Type"):null){if((_n=_n.toLowerCase()).lastIndexOf("application/grpc-web-text",0)==0){_n=on.a;try{var Rn=_n.a?_n.a.responseText:""}catch(Cr){Eo(_n.b,"Can not get responseText: "+Cr.message),Rn=""}if(Rn=(_n=Rn||"").length-_n.length%4,(_n=_n.substr(on.i,Rn-on.i)).length==0)return;on.i=Rn,_n=Wu(_n)}else{if(_n.lastIndexOf("application/grpc",0)!=0)return void Il(on,{code:2,message:"Unknown Content-type received.",metadata:{}});_n=new Uint8Array(function(Cr){try{if(!Cr.a)return null;if("response"in Cr.a)return Cr.a.response;switch(Cr.j){case nm:case"text":return Cr.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Cr.a)return Cr.a.mozResponseArrayBuffer}var Qr=Cr.b;return Qr&&Qr.log(io,"Response type "+Cr.j+" is not supported on this browser",void 0),null}catch(jo){return Eo(Cr.b,"Can not get response: "+jo.message),null}}(on.a))}Rn=null;try{Rn=function(Cr,Qr){function jo(iu){Io.f++,Io.a=(Io.a<<8)+iu,Io.f==4&&(Io.b=Ut,Io.g=0,typeof Uint8Array<"u"?Io.c=new Uint8Array(Io.a):Io.c=Array(Io.a),Io.a==0&&Mo())}function bo(iu){Io.c[Io.g++]=iu,Io.g==Io.a&&Mo()}function Mo(){var iu={};iu[Io.h]=Io.c,Io.i.push(iu),Io.b=Kt}var Ko,ns,Io=Cr,Cl=0;for(Ko=Qr instanceof Uint8Array||Qr instanceof Array?Qr:new Uint8Array(Qr);Cl<Ko.length;){switch(Io.b){case Ht:wt(Io,Ko,Cl,"stream already broken");break;case Kt:(ns=Ko[Cl])==qt||ns==Pt?Io.h=ns:wt(Io,Ko,Cl,"invalid frame byte"),Io.b=Gt,Io.a=0,Io.f=0;break;case Gt:jo(Ko[Cl]);break;case Ut:bo(Ko[Cl]);break;default:throw Error("unexpected parser state: "+Io.b)}Io.l++,Cl++}return Cr=Io.i,Io.i=[],0<Cr.length?Cr:null}(on.m,_n)}catch{Il(on,{code:2,message:"Error in parsing response body",metadata:{}})}if(Rn)for(_n=0;_n<Rn.length;_n++){if(qt in Rn[_n]){var Nn=Rn[_n][qt];if(Nn)try{var rr=on.l(Nn);if(rr){Nn=on;for(var Ln=rr,Xn=0;Xn<Nn.b.length;Xn++)Nn.b[Xn](Ln)}}catch{Il(on,{code:2,message:"Error in response deserializer function.",metadata:{}})}}if(Pt in Rn[_n]&&0<Rn[_n][Pt].length){for(Nn="",Ln=0;Ln<Rn[_n][Pt].length;Ln++)Nn+=String.fromCharCode(Rn[_n][Pt][Ln]);for(Nn=Nn.trim().split(`\r
`),Ln={},Xn=0;Xn<Nn.length;Xn++){var Er=Nn[Xn].indexOf(":");Ln[Nn[Xn].substring(0,Er).trim()]=Nn[Xn].substring(Er+1).trim()}Nn=Ln,Ln=0,Xn="","grpc-status"in Nn&&(Ln=Nn["grpc-status"],delete Nn["grpc-status"]),"grpc-message"in Nn&&(Xn=Nn["grpc-message"],delete Nn["grpc-message"]),Il(on,{code:Number(Ln),message:Xn,metadata:Nn})}}}}),Xr(this.a,"complete",function(){var _n=on.a.g,Rn="",Nn={},rr=function(Xn){var Er={};Xn=(Xn.a&&ys(Xn)==4&&Xn.a.getAllResponseHeaders()||"").split(`\r
`);for(var Cr=0;Cr<Xn.length;Cr++)if(!/^[\s\xa0]*$/.test(Xn[Cr])){var Qr=jt(Xn[Cr]),jo=Qr[0];if(typeof(Qr=Qr[1])=="string"){Qr=Qr.trim();var bo=Er[jo]||[];Er[jo]=bo,bo.push(Qr)}}return function(Mo,Ko){var ns,Io={};for(ns in Mo)Io[ns]=Ko.call(void 0,Mo[ns],ns,Mo);return Io}(Er,function(Mo){return Mo.join(", ")})}(on.a);if(Object.keys(rr).forEach(function(Xn){jp.includes(Xn)||(Nn[Xn]=rr[Xn])}),function(Xn,Er){for(var Cr=0;Cr<Xn.g.length;Cr++)Xn.g[Cr](Er)}(on,Nn),_n!=0){switch(_n){case 7:var Ln=10;break;case 8:Ln=4;break;case 6:Ln=function(Xn){switch(Xn){case 200:return 0;case 400:return 3;case 401:return 16;case 403:return 7;case 404:return 5;case 409:return 10;case 412:return 9;case 429:return 8;case 499:return 1;case 500:return 2;case 501:return 12;case 503:return 14;case 504:return 4;default:return 2}}(on.a.getStatus());break;default:Ln=14}Ln==10&&on.j||Il(on,{code:Ln,message:St(_n),metadata:{}})}else _n=!1,"grpc-status"in rr&&(Ln=Cm(on.a,"grpc-status"),"grpc-message"in rr&&(Rn=Cm(on.a,"grpc-message")),Number(Ln)!=0&&(Il(on,{code:Number(Ln),message:Rn,metadata:rr}),_n=!0)),_n||function(Xn){for(var Er=0;Er<Xn.c.length;Er++)Xn.c[Er]()}(on)})}function Xl(zt,on){-1<(on=zt.indexOf(on))&&zt.splice(on,1)}function Il(zt,on){if(on.code!=0)for(var _n={code:on.code,message:decodeURIComponent(on.message||""),metadata:on.metadata},Rn=0;Rn<zt.f.length;Rn++)zt.f[Rn](_n);for(on={code:on.code,details:decodeURIComponent(on.message||""),metadata:on.metadata},_n=0;_n<zt.h.length;_n++)zt.h[_n](on)}function _s(zt){this.a=vt("format",zt)||"text",this.f=vt("suppressCorsPreflight",zt)||!1,this.c=vt("withCredentials",zt)||!1,this.b=vt("streamInterceptors",zt)||[],this.g=vt("unaryInterceptors",zt)||[]}function zs(zt,on,_n){var Rn=on.getMethodDescriptor(),Nn=_n+Rn.name;(_n=new El).H=zt.c;var rr=new ga({T:_n});if(rr.l=Rn.b,hu(_n.headers,on.getMetadata()),zt.a=="text"?(_n.headers.set("Content-Type","application/grpc-web-text"),_n.headers.set("Accept","application/grpc-web-text")):_n.headers.set("Content-Type","application/grpc-web+proto"),_n.headers.set("X-User-Agent","grpc-web-javascript/0.1"),_n.headers.set("X-Grpc-Web","1"),ru(_n.headers.b,"deadline")){var Ln=_n.headers.get("deadline");Ln=Math.round(Ln-new Date().getTime());var Xn=_n.headers;ru(Xn.b,"deadline")&&(delete Xn.b.deadline,Xn.c--,Xn.a.length>2*Xn.c&&Gs(Xn)),1/0===Ln&&(Ln=0),0<Ln&&_n.headers.set("grpc-timeout",Ln+"m")}if(zt.f){Gs(Xn=_n.headers),Ln={};for(var Er=0;Er<Xn.a.length;Er++){var Cr=Xn.a[Er];Ln[Cr]=Xn.b[Cr]}(Xn=_n.headers).b={},Xn.a.length=0,Xn.c=0;e:{for(Qr in Ln){var Qr=!1;break e}Qr=!0}Qr||(Ln=function(Mo){var Ko="";return function(ns,Io){for(var Cl in ns)Io.call(void 0,ns[Cl],Cl,ns)}(Mo,function(ns,Io){Ko+=Io,Ko+=":",Ko+=ns,Ko+=`\r
`}),Ko}(Ln),typeof Nn=="string"?(Qr=encodeURIComponent("$httpHeaders"),(Qr+=Ln=Ln!=null?"="+encodeURIComponent(String(Ln)):"")&&(0>(Ln=Nn.indexOf("#"))&&(Ln=Nn.length),0>(Xn=Nn.indexOf("?"))||Xn>Ln?(Xn=Ln,Er=""):Er=Nn.substring(Xn+1,Ln),Ln=(Nn=[Nn.substr(0,Xn),Er,Nn.substr(Ln)])[1],Nn[1]=Qr?Ln?Ln+"&"+Qr:Qr:Ln,Nn=Nn[0]+(Nn[1]?"?"+Nn[1]:"")+Nn[2])):Nn.a("$httpHeaders",Ln))}for(Rn=(on=(0,Rn.a)(on.getRequestMessage())).length,Qr=[0,0,0,0],Ln=new Uint8Array(5+Rn),Xn=3;0<=Xn;Xn--)Qr[Xn]=Rn%256,Rn>>>=8;if(Ln.set(new Uint8Array(Qr),1),Ln.set(on,5),on=Ln,zt.a=="text"){var jo;for(zt=on,jo===void 0&&(jo=0),rp(),jo=Vu[jo],on=[],Rn=0;Rn<zt.length;Rn+=3){Cr=zt[Rn];var bo=(Qr=Rn+1<zt.length)?zt[Rn+1]:0;Xn=Cr>>2,Cr=(3&Cr)<<4|bo>>4,bo=(15&bo)<<2|(Er=(Ln=Rn+2<zt.length)?zt[Rn+2]:0)>>6,Er&=63,Ln||(Er=64,Qr||(bo=64)),on.push(jo[Xn],jo[Cr],jo[bo]||"",jo[Er]||"")}on=on.join("")}else zt.a=="binary"&&(_n.j="arraybuffer");return Eu(_n,Nn,on),rr}function Fp(zt,on,_n){var Rn=null,Nn=!1;zt.on("data",function(rr){Rn=rr}),zt.on("error",function(rr){rr.code==0||Nn||(Nn=!0,on(rr,null))}),zt.on("status",function(rr){rr.code==0||Nn?_n&&on(null,null,rr):(Nn=!0,on({code:rr.code,message:rr.details,metadata:rr.metadata},null))}),_n&&zt.on("metadata",function(rr){on(null,null,null,rr)}),zt.on("end",function(){Nn||(Rn==null?on({code:2,message:"Incomplete response"}):on(null,Rn)),_n&&on(null,null)})}function ip(zt,on){var _n=zt;return on.forEach(function(Rn){var Nn=_n;_n=function(rr){return Rn.intercept(rr,Nn)}}),_n}ga.prototype.on=function(zt,on){return zt=="data"?this.b.push(on):zt=="status"?this.h.push(on):zt=="metadata"?this.g.push(on):zt=="end"?this.c.push(on):zt=="error"&&this.f.push(on),this},ga.prototype.removeListener=function(zt,on){return zt=="data"?Xl(this.b,on):zt=="status"?Xl(this.h,on):zt=="metadata"?Xl(this.g,on):zt=="end"?Xl(this.c,on):zt=="error"&&Xl(this.f,on),this},ga.prototype.cancel=function(){this.j=!0,this.a.abort()},ga.prototype.cancel=ga.prototype.cancel,ga.prototype.removeListener=ga.prototype.removeListener,ga.prototype.on=ga.prototype.on,_s.prototype.P=function(zt,on,_n,Rn,Nn){var rr=this;Rn=sn(zt,on,"unary",Rn);var Ln=zt.substr(0,zt.length-Rn.name.length);return Fp(zt=ip(function(Xn){return zs(rr,Xn,Ln)},this.b).call(this,nn(Rn,on,_n)),Nn,!1),new xt(zt)},_s.prototype.M=function(zt,on,_n,Rn){var Nn=this;Rn=sn(zt,on,"unary",Rn);var rr=zt.substr(0,zt.length-Rn.name.length);return ip(function(Ln){return new Promise(function(Xn,Er){var Cr,Qr,jo;Fp(zs(Nn,Ln,rr),function(bo,Mo,Ko,ns){bo?Er(bo):Mo?jo=Mo:Ko?Qr=Ko:ns?Cr=ns:(bo=Ln.getMethodDescriptor(),Xn(new mt(jo,bo,Mo=(Mo=Cr)===void 0?{}:Mo,Qr===void 0?null:Qr)))},!0)})},this.g).call(this,nn(Rn,on,_n)).then(function(Ln){return Ln.getResponseMessage()})},_s.prototype.unaryCall=function(zt,on,_n,Rn){return this.M(zt,on,_n,Rn)},_s.prototype.R=function(zt,on,_n,Rn){var Nn=this;Rn=sn(zt,on,"server_streaming",Rn);var rr=zt.substr(0,zt.length-Rn.name.length);return ip(function(Ln){return zs(Nn,Ln,rr)},this.b).call(this,nn(Rn,on,_n))},_s.prototype.serverStreaming=_s.prototype.R,_s.prototype.unaryCall=_s.prototype.unaryCall,_s.prototype.thenableCall=_s.prototype.M,_s.prototype.rpcCall=_s.prototype.P,i.exports.AbstractClientBase={MethodInfo:function(zt,on,_n,Rn,Nn){this.name=Rn,this.b=Nn,this.f=zt,this.a=on,this.c=_n}},i.exports.GrpcWebClientBase=_s,i.exports.StatusCode={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,UNAUTHENTICATED:16,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15},i.exports.MethodDescriptor=Bt,i.exports.MethodType={UNARY:"unary",SERVER_STREAMING:"server_streaming"}}).call(this,s(5))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.isAsyncIterable=o.isAsyncGenerator=o.isAsync=void 0;var _,$=s(151),et=(_=$)&&_.__esModule?_:{default:_};function tt(j){return j[Symbol.toStringTag]==="AsyncFunction"}o.default=function(j){if(typeof j!="function")throw new Error("expected a function");return tt(j)?(0,et.default)(j):j},o.isAsync=tt,o.isAsyncGenerator=function(j){return j[Symbol.toStringTag]==="AsyncGenerator"},o.isAsyncIterable=function(j){return typeof j[Symbol.asyncIterator]=="function"}},function(i,o,s){var _={};function $(tt,j,it){it||(it=Error);var st=function(ht){var vt,ft;function pt(ct,yt,Et){return ht.call(this,function(Ot,Lt,Tt){return typeof j=="string"?j:j(Ot,Lt,Tt)}(ct,yt,Et))||this}return ft=ht,(vt=pt).prototype=Object.create(ft.prototype),vt.prototype.constructor=vt,vt.__proto__=ft,pt}(it);st.prototype.name=it.name,st.prototype.code=tt,_[tt]=st}function et(tt,j){if(Array.isArray(tt)){var it=tt.length;return tt=tt.map(function(st){return String(st)}),it>2?"one of ".concat(j," ").concat(tt.slice(0,it-1).join(", "),", or ")+tt[it-1]:it===2?"one of ".concat(j," ").concat(tt[0]," or ").concat(tt[1]):"of ".concat(j," ").concat(tt[0])}return"of ".concat(j," ").concat(String(tt))}$("ERR_INVALID_OPT_VALUE",function(tt,j){return'The value "'+j+'" is invalid for option "'+tt+'"'},TypeError),$("ERR_INVALID_ARG_TYPE",function(tt,j,it){var st,ht,vt;if(typeof j=="string"&&(ht="not ",j.substr(0,ht.length)===ht)?(st="must not be",j=j.replace(/^not /,"")):st="must be",function(pt,ct,yt){return(yt===void 0||yt>pt.length)&&(yt=pt.length),pt.substring(yt-ct.length,yt)===ct}(tt," argument"))vt="The ".concat(tt," ").concat(st," ").concat(et(j,"type"));else{var ft=function(pt,ct,yt){return typeof yt!="number"&&(yt=0),!(yt+ct.length>pt.length)&&pt.indexOf(ct,yt)!==-1}(tt,".")?"property":"argument";vt='The "'.concat(tt,'" ').concat(ft," ").concat(st," ").concat(et(j,"type"))}return vt+=". Received type ".concat(typeof it)},TypeError),$("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),$("ERR_METHOD_NOT_IMPLEMENTED",function(tt){return"The "+tt+" method is not implemented"}),$("ERR_STREAM_PREMATURE_CLOSE","Premature close"),$("ERR_STREAM_DESTROYED",function(tt){return"Cannot call "+tt+" after a stream was destroyed"}),$("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),$("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),$("ERR_STREAM_WRITE_AFTER_END","write after end"),$("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),$("ERR_UNKNOWN_ENCODING",function(tt){return"Unknown encoding: "+tt},TypeError),$("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=_},function(i,o,s){(function(_){var $=Object.keys||function(pt){var ct=[];for(var yt in pt)ct.push(yt);return ct};i.exports=ht;var et=s(75),tt=s(79);s(7)(ht,et);for(var j=$(tt.prototype),it=0;it<j.length;it++){var st=j[it];ht.prototype[st]||(ht.prototype[st]=tt.prototype[st])}function ht(pt){if(!(this instanceof ht))return new ht(pt);et.call(this,pt),tt.call(this,pt),this.allowHalfOpen=!0,pt&&(pt.readable===!1&&(this.readable=!1),pt.writable===!1&&(this.writable=!1),pt.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",vt)))}function vt(){this._writableState.ended||_.nextTick(ft,this)}function ft(pt){pt.end()}Object.defineProperty(ht.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(ht.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ht.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ht.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(pt){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=pt,this._writableState.destroyed=pt)}})}).call(this,s(2))},function(i,o,s){s.d(o,"a",function(){return tt});var _=s(36),$=s(6);const et={"app-id":["app-id must match formant/*"]};class tt extends _.a{constructor(it,st={}){super(it,Object.assign({validateHeaders:ht=>`${ht.get("app-id")}`.startsWith("formant/")?{}:et,headers:Object.assign(Object.assign({},tt.headers),{"App-ID":`formant/${$.a}`,"App-Version":$.j})},st)),this.endpoint=it}}tt.headers={}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_,$=_.length){if(!$)throw new Error("arity is undefined");return function(...et){return typeof et[$-1]=="function"?_.apply(this,et):new Promise((tt,j)=>{et[$-1]=(it,...st)=>{if(it)return j(it);tt(st.length>1?st:st[0])},_.apply(this,et)})}},i.exports=o.default},function(i,o,s){(o=i.exports=s(67)).Stream=o,o.Readable=o,o.Writable=s(44),o.Duplex=s(20),o.Transform=s(70),o.PassThrough=s(164)},function(i,o,s){(o=i.exports=s(75)).Stream=o,o.Readable=o,o.Writable=s(79),o.Duplex=s(24),o.Transform=s(80),o.PassThrough=s(183),o.finished=s(45),o.pipeline=s(184)},function(i,o,s){s.d(o,"a",function(){return $});const _=["password","secret","token","key","buffer"];function $(et,tt=new Set){return tt.has(et)?"[ RECURSIVE ]":!(j=et)||typeof j!="object"&&typeof j!="function"?et:(tt.add(et),Object.keys(et).reduce((it,st)=>(it[st]=_.some(ht=>st.toLowerCase().includes(ht.toLowerCase()))?"[ REDACTED ]":$(et[st],tt),it),{}));var j}},function(i,o){i.exports=_,_.default=_,_.stable=et,_.stableStringify=et;var s=[];function _(tt,j,it){(function vt(ft,pt,ct,yt){var Et;if(typeof ft=="object"&&ft!==null){for(Et=0;Et<ct.length;Et++)if(ct[Et]===ft)return yt[pt]="[Circular]",void s.push([yt,pt,ft]);if(ct.push(ft),Array.isArray(ft))for(Et=0;Et<ft.length;Et++)vt(ft[Et],Et,ct,ft);else{var Ot=Object.keys(ft);for(Et=0;Et<Ot.length;Et++){var Lt=Ot[Et];vt(ft[Lt],Lt,ct,ft)}}ct.pop()}})(tt,"",[],void 0);for(var st=JSON.stringify(tt,j,it);s.length!==0;){var ht=s.pop();ht[0][ht[1]]=ht[2]}return st}function $(tt,j){return tt<j?-1:tt>j?1:0}function et(tt,j,it){for(var st=function ft(pt,ct,yt,Et){var Ot;if(typeof pt=="object"&&pt!==null){for(Ot=0;Ot<yt.length;Ot++)if(yt[Ot]===pt)return Et[ct]="[Circular]",void s.push([Et,ct,pt]);if(typeof pt.toJSON=="function")return;if(yt.push(pt),Array.isArray(pt))for(Ot=0;Ot<pt.length;Ot++)ft(pt[Ot],Ot,yt,pt);else{var Lt={},Tt=Object.keys(pt).sort($);for(Ot=0;Ot<Tt.length;Ot++){var It=Tt[Ot];ft(pt[It],It,yt,pt),Lt[It]=pt[It]}if(Et===void 0)return Lt;s.push([Et,ct,pt]),Et[ct]=Lt}yt.pop()}}(tt,"",[],void 0)||tt,ht=JSON.stringify(st,j,it);s.length!==0;){var vt=s.pop();vt[0][vt[1]]=vt[2]}return ht}},function(i,o,s){var _=s(13),$=Object.keys||function(ct){var yt=[];for(var Et in ct)yt.push(Et);return yt};i.exports=vt;var et=Object.create(s(14));et.inherits=s(7);var tt=s(142),j=s(60);et.inherits(vt,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];vt.prototype[ht]||(vt.prototype[ht]=j.prototype[ht])}function vt(ct){if(!(this instanceof vt))return new vt(ct);tt.call(this,ct),j.call(this,ct),ct&&ct.readable===!1&&(this.readable=!1),ct&&ct.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ct&&ct.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ft)}function ft(){this.allowHalfOpen||this._writableState.ended||_.nextTick(pt,this)}function pt(ct){ct.end()}Object.defineProperty(vt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(vt.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ct){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ct,this._writableState.destroyed=ct)}}),vt.prototype._destroy=function(ct,yt){this.push(null),this.end(),_.nextTick(yt,ct)}},function(i,o,s){var _=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function $(j,it){return Object.prototype.hasOwnProperty.call(j,it)}o.assign=function(j){for(var it=Array.prototype.slice.call(arguments,1);it.length;){var st=it.shift();if(st){if(typeof st!="object")throw new TypeError(st+"must be non-object");for(var ht in st)$(st,ht)&&(j[ht]=st[ht])}}return j},o.shrinkBuf=function(j,it){return j.length===it?j:j.subarray?j.subarray(0,it):(j.length=it,j)};var et={arraySet:function(j,it,st,ht,vt){if(it.subarray&&j.subarray)j.set(it.subarray(st,st+ht),vt);else for(var ft=0;ft<ht;ft++)j[vt+ft]=it[st+ft]},flattenChunks:function(j){var it,st,ht,vt,ft,pt;for(ht=0,it=0,st=j.length;it<st;it++)ht+=j[it].length;for(pt=new Uint8Array(ht),vt=0,it=0,st=j.length;it<st;it++)ft=j[it],pt.set(ft,vt),vt+=ft.length;return pt}},tt={arraySet:function(j,it,st,ht,vt){for(var ft=0;ft<ht;ft++)j[vt+ft]=it[st+ft]},flattenChunks:function(j){return[].concat.apply([],j)}};o.setTyped=function(j){j?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,et)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,tt))},o.setTyped(_)},function(i,o,s){i.exports=s(185)},function(i,o,s){i.exports=function(_){return _}},function(i,o,s){i.exports=function(_,$){$||($={}),typeof $=="function"&&($={cmp:$});var et,tt=typeof $.cycles=="boolean"&&$.cycles,j=$.cmp&&(et=$.cmp,function(st){return function(ht,vt){var ft={key:ht,value:st[ht]},pt={key:vt,value:st[vt]};return et(ft,pt)}}),it=[];return function st(ht){if(ht&&ht.toJSON&&typeof ht.toJSON=="function"&&(ht=ht.toJSON()),ht!==void 0){if(typeof ht=="number")return isFinite(ht)?""+ht:"null";if(typeof ht!="object")return JSON.stringify(ht);var vt,ft;if(Array.isArray(ht)){for(ft="[",vt=0;vt<ht.length;vt++)vt&&(ft+=","),ft+=st(ht[vt])||"null";return ft+"]"}if(ht===null)return"null";if(it.indexOf(ht)!==-1){if(tt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var pt=it.push(ht)-1,ct=Object.keys(ht).sort(j&&j(ht));for(ft="",vt=0;vt<ct.length;vt++){var yt=ct[vt],Et=st(ht[yt]);Et&&(ft&&(ft+=","),ft+=JSON.stringify(yt)+":"+Et)}return it.splice(pt,1),"{"+ft+"}"}}(_)}},function(i,o,s){s.d(o,"a",function(){return Lt});var _=s(11),$=s(0);function et(Tt,It,mt=()=>!0){if(Tt instanceof It&&mt(Tt))return Tt;throw Tt}var tt=s(1),j=s(100),it=s.n(j),st=s(101),ht=s.n(st);class vt extends Error{constructor(It,mt,Bt){super(`Connection failure: ${It.message}`),this.cause=It,this.url=mt,this.retryable=Bt}}var ft=s(29);class pt extends Error{constructor(It,mt,Bt,nn,sn={},xt){super(`Unexpected response (${Bt}) for ${It} ${mt}: ${JSON.stringify(xt?Object(ft.a)([...xt.entries()].reduce((St,[Nt,Ct])=>(St[Nt]=Ct,St),{})):{})} -- ${JSON.stringify(Object(ft.a)(nn))}`),this.method=It,this.url=mt,this.statusCode=Bt,this.body=nn,this.validationErrors=sn,this.headers=xt}}class ct extends Error{constructor(It,mt){super(`Invalid headers (${JSON.stringify(It)}) for response: ${mt.message}`),this.validationErrors=It,this.responseError=mt}}var yt=function(Tt,It,mt,Bt){return new(mt||(mt=Promise))(function(nn,sn){function xt(Ct){try{Nt(Bt.next(Ct))}catch(Vt){sn(Vt)}}function St(Ct){try{Nt(Bt.throw(Ct))}catch(Vt){sn(Vt)}}function Nt(Ct){var Vt;Ct.done?nn(Ct.value):(Vt=Ct.value,Vt instanceof mt?Vt:new mt(function(Kt){Kt(Vt)})).then(xt,St)}Nt((Bt=Bt.apply(Tt,It||[])).next())})},Et=function(Tt,It){var mt={};for(var Bt in Tt)Object.prototype.hasOwnProperty.call(Tt,Bt)&&It.indexOf(Bt)<0&&(mt[Bt]=Tt[Bt]);if(Tt!=null&&typeof Object.getOwnPropertySymbols=="function"){var nn=0;for(Bt=Object.getOwnPropertySymbols(Tt);nn<Bt.length;nn++)It.indexOf(Bt[nn])<0&&Object.prototype.propertyIsEnumerable.call(Tt,Bt[nn])&&(mt[Bt[nn]]=Tt[Bt[nn]])}return mt};const Ot=new Set(["GET","HEAD","PUT","QUERY","DELETE","OPTIONS","TRACE"]);class Lt{constructor(It,mt={}){if(this.endpoint=It,this.validateHeaders=Bt=>mt.validateHeaders?mt.validateHeaders(Bt):{},this.verbose=mt.verbose!==!1,this.headers=mt.headers||{},mt.retries!==void 0&&!(mt.retries>=0))throw new Error("retries must be positive or zero");if(this.configuredRetries=mt.retries,mt.timeoutMs!==void 0&&!(mt.timeoutMs>0))throw new Error("timeoutMs must be positive");if(this.timeoutMs=mt.timeoutMs,mt.maxBackoffDelayMs!==void 0&&!(mt.maxBackoffDelayMs>0))throw new Error("maxBackoffDelayMs must be positive");this.maxBackoffDelayMs=mt.maxBackoffDelayMs||30*tt.a.second}getRetries(){return this.configuredRetries!==void 0?this.configuredRetries:this.constructor.retries}fetch(It,mt={}){return yt(this,void 0,void 0,function*(){return(yield this.fetchVerbose(It,mt)).body})}fetchVerbose(It,mt={}){return yt(this,void 0,void 0,function*(){let Bt=100*tt.a.millisecond,nn=0;const sn=this.timeoutMs!==void 0?new Date().getTime()+this.timeoutMs:void 0,xt=sn?()=>Math.max(sn-new Date().getTime(),0):void 0;for(;;)try{return yield this.doFetch(It,mt,xt)}catch(St){const Nt=et(St,vt);if((xt==null?void 0:xt())===0||nn===this.getRetries()||!Nt.retryable)throw Nt;nn++,Bt=Math.min(...xt?[xt()]:[],Bt*(2+.1*(Math.random()-.5)),this.maxBackoffDelayMs),yield Object(_.a)(Bt),this.verbose&&$.a.warn(`Connection failure, retrying. Error: ${St.cause.message}`,{url:St.url,error:St.cause,attempt:nn})}})}doFetch(It,mt,Bt){return yt(this,void 0,void 0,function*(){const{token:nn,json:sn,allowUnsafeRetries:xt}=mt,St=Et(mt,["token","json","allowUnsafeRetries"]),Nt=(St.method||"GET").toUpperCase(),Ct=this.endpoint!==void 0?`${this.endpoint}${It?`/${It}`:""}`:It,Vt=new it.a;let Kt;if(Bt){const Gt=Bt();Gt>0?Kt=setTimeout(()=>{Vt.abort()},Gt):Vt.abort()}try{let Gt;yield Promise.race([this.constructor.waitForConnectivity(),new Promise(Xt=>{Gt=setTimeout(Xt,Bt?Math.min(tt.a.minute,Bt()):tt.a.minute)})]),Gt&&clearTimeout(Gt);const Ut=yield ht()(Ct,Object.assign(Object.assign({},St),{headers:Object.assign(Object.assign(Object.assign(Object.assign({},sn!==!1?{"Content-Type":"application/json"}:{}),this.headers),St.headers||{}),nn!==void 0?{Authorization:`Bearer ${nn}`}:{}),signal:Vt.signal})),Ht=Ut.headers.get("content-type")||"",qt=Ht&&Ht.startsWith("application/json"),Pt=qt?yield Ut.json():yield Ut.text(),wt=()=>new pt(Nt,Ct,Ut.status,Pt,Pt&&Pt.validationErrors||{},Ut.headers);if(!Ut.ok)throw this.verbose&&$.a[Ut.status>=500?"warn":"info"]("Response error",{method:Nt,url:Ct,statusCode:Ut.status}),wt();const $t=this.validateHeaders(Ut.headers);if(Object.keys($t).length!==0)throw new ct($t,wt());if(Ut.status===204)return{body:void 0,headers:Ut.headers};if(sn&&!qt)throw new Error(`Response is not JSON: ${JSON.stringify(Pt)}`);return{body:Pt,headers:Ut.headers}}catch(Gt){const Ut=xt||Ot.has(Nt);if(Gt.message==="Network request failed")throw new vt(Gt,Ct,Ut);if(Gt.type==="system"&&["EAI_AGAIN","ECONNREFUSED","EHOSTUNREACH","ENOTFOUND"].find(wt=>wt===Gt.code))throw new vt(Gt,Ct,!0);if(Gt.type==="system"&&["ETIMEDOUT","ECONNRESET","ESOCKETTIMEDOUT","EPIPE"].find(wt=>wt===Gt.code))throw new vt(Gt,Ct,Ut);if(Gt.name==="AbortError")throw new vt(Gt,Ct,Ut);const Ht=et(Gt,pt),{statusCode:qt}=Ht;if(qt===408||qt===429||qt===502||qt===503||qt===504)throw this.verbose&&!Ut&&$.a.warn("Potentially unsafe retry"),new vt(Gt,Ct,!0);const Pt=this.validateHeaders(Ht.headers);throw Object.keys(Pt).length!==0?new ct(Pt,Ht):(yield this.constructor.onResponseError(Ht),Gt)}finally{Kt&&clearTimeout(Kt)}})}}Lt.retries=8,Lt.waitForConnectivity=()=>yt(void 0,void 0,void 0,function*(){}),Lt.onResponseError=()=>yt(void 0,void 0,void 0,function*(){})},function(i,o,s){function _(vt,ft){if(!(vt instanceof ft))throw new TypeError("Cannot call a class as a function")}function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(57),tt=s(3),j=tt.LEVEL,it=tt.MESSAGE;et.enabled=!0;var st=/\s+/,ht=function(){function vt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,vt),yt.colors&&this.addColors(yt.colors),this.options=yt}var ft,pt,ct;return ft=vt,ct=[{key:"addColors",value:function(yt){var Et=Object.keys(yt).reduce(function(Ot,Lt){return Ot[Lt]=st.test(yt[Lt])?yt[Lt].split(st):yt[Lt],Ot},{});return vt.allColors=Object.assign({},vt.allColors||{},Et),vt.allColors}}],(pt=[{key:"addColors",value:function(yt){return vt.addColors(yt)}},{key:"colorize",value:function(yt,Et,Ot){if(Ot===void 0&&(Ot=Et),!Array.isArray(vt.allColors[yt]))return et[vt.allColors[yt]](Ot);for(var Lt=0,Tt=vt.allColors[yt].length;Lt<Tt;Lt++)Ot=et[vt.allColors[yt][Lt]](Ot);return Ot}},{key:"transform",value:function(yt,Et){return Et.all&&typeof yt[it]=="string"&&(yt[it]=this.colorize(yt[j],yt.level,yt[it])),(Et.level||Et.all||!Et.message)&&(yt.level=this.colorize(yt[j],yt.level)),(Et.all||Et.message)&&(yt.message=this.colorize(yt[j],yt.level,yt.message)),yt}}])&&$(ft.prototype,pt),ct&&$(ft,ct),vt}();i.exports=function(vt){return new ht(vt)},i.exports.Colorizer=i.exports.Format=ht},function(i,o){var s={}.toString;i.exports=Array.isArray||function(_){return s.call(_)=="[object Array]"}},function(i,o,s){(function(_){function $(et){try{if(!_.localStorage)return!1}catch{return!1}var tt=_.localStorage[et];return tt!=null&&String(tt).toLowerCase()==="true"}i.exports=function(et,tt){if($("noDeprecation"))return et;var j=!1;return function(){if(!j){if($("throwDeprecation"))throw new Error(tt);$("traceDeprecation")?console.trace(tt):console.warn(tt),j=!0}return et.apply(this,arguments)}}}).call(this,s(5))},function(i,o,s){var _=s(4),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _&&typeof _.length=="number"&&_.length>=0&&_.length%1==0},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default={},i.exports=o.default},function(i,o,s){var _=s(4),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){(function(_,$,et){var tt=s(13);function j(St){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Ct,Vt,Kt){var Gt=Ct.entry;for(Ct.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Kt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Ct:Vt.corkedRequestsFree=Ct})(Nt,St)}}i.exports=Tt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Tt.WritableState=Lt;var ht=s(14);ht.inherits=s(7);var vt={deprecate:s(39)},ft=s(68),pt=s(43).Buffer,ct=et.Uint8Array||function(){},yt,Et=s(69);function Ot(){}function Lt(St,Nt){it=it||s(20),St=St||{};var Ct=Nt instanceof it;this.objectMode=!!St.objectMode,Ct&&(this.objectMode=this.objectMode||!!St.writableObjectMode);var Vt=St.highWaterMark,Kt=St.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Ct&&(Kt||Kt===0)?Kt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=St.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=St.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var wt=qt._writableState,$t=wt.sync,Xt=wt.writecb;if(function(dn){dn.writing=!1,dn.writecb=null,dn.length-=dn.writelen,dn.writelen=0}(wt),Pt)(function(dn,mn,an,en,Mt){--mn.pendingcb,an?(tt.nextTick(Mt,en),tt.nextTick(xt,dn,mn),dn._writableState.errorEmitted=!0,dn.emit("error",en)):(Mt(en),dn._writableState.errorEmitted=!0,dn.emit("error",en),xt(dn,mn))})(qt,wt,$t,Pt,Xt);else{var un=nn(wt);un||wt.corked||wt.bufferProcessing||!wt.bufferedRequest||Bt(qt,wt),$t?st(mt,qt,wt,un,Xt):mt(qt,wt,un,Xt)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Tt(St){if(it=it||s(20),!(yt.call(Tt,this)||this instanceof it))return new Tt(St);this._writableState=new Lt(St,this),this.writable=!0,St&&(typeof St.write=="function"&&(this._write=St.write),typeof St.writev=="function"&&(this._writev=St.writev),typeof St.destroy=="function"&&(this._destroy=St.destroy),typeof St.final=="function"&&(this._final=St.final)),ft.call(this)}function It(St,Nt,Ct,Vt,Kt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Ct?St._writev(Kt,Nt.onwrite):St._write(Kt,Gt,Nt.onwrite),Nt.sync=!1}function mt(St,Nt,Ct,Vt){Ct||function(Kt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Kt.emit("drain"))}(St,Nt),Nt.pendingcb--,Vt(),xt(St,Nt)}function Bt(St,Nt){Nt.bufferProcessing=!0;var Ct=Nt.bufferedRequest;if(St._writev&&Ct&&Ct.next){var Vt=Nt.bufferedRequestCount,Kt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Ct;for(var Ut=0,Ht=!0;Ct;)Kt[Ut]=Ct,Ct.isBuf||(Ht=!1),Ct=Ct.next,Ut+=1;Kt.allBuffers=Ht,It(St,Nt,!0,Nt.length,Kt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Ct;){var qt=Ct.chunk,Pt=Ct.encoding,wt=Ct.callback;if(It(St,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,wt),Ct=Ct.next,Nt.bufferedRequestCount--,Nt.writing)break}Ct===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Ct,Nt.bufferProcessing=!1}function nn(St){return St.ending&&St.length===0&&St.bufferedRequest===null&&!St.finished&&!St.writing}function sn(St,Nt){St._final(function(Ct){Nt.pendingcb--,Ct&&St.emit("error",Ct),Nt.prefinished=!0,St.emit("prefinish"),xt(St,Nt)})}function xt(St,Nt){var Ct=nn(Nt);return Ct&&(function(Vt,Kt){Kt.prefinished||Kt.finalCalled||(typeof Vt._final=="function"?(Kt.pendingcb++,Kt.finalCalled=!0,tt.nextTick(sn,Vt,Kt)):(Kt.prefinished=!0,Vt.emit("prefinish")))}(St,Nt),Nt.pendingcb===0&&(Nt.finished=!0,St.emit("finish"))),Ct}ht.inherits(Tt,ft),Lt.prototype.getBuffer=function(){for(var St=this.bufferedRequest,Nt=[];St;)Nt.push(St),St=St.next;return Nt},function(){try{Object.defineProperty(Lt.prototype,"buffer",{get:vt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Tt,Symbol.hasInstance,{value:function(St){return!!yt.call(this,St)||this===Tt&&St&&St._writableState instanceof Lt}})):yt=function(St){return St instanceof this},Tt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Tt.prototype.write=function(St,Nt,Ct){var Vt,Kt=this._writableState,Gt=!1,Ut=!Kt.objectMode&&(Vt=St,pt.isBuffer(Vt)||Vt instanceof ct);return Ut&&!pt.isBuffer(St)&&(St=function(Ht){return pt.from(Ht)}(St)),typeof Nt=="function"&&(Ct=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Kt.defaultEncoding),typeof Ct!="function"&&(Ct=Ot),Kt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Ct):(Ut||function(Ht,qt,Pt,wt){var $t=!0,Xt=!1;return Pt===null?Xt=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(Xt=new TypeError("Invalid non-string/buffer chunk")),Xt&&(Ht.emit("error",Xt),tt.nextTick(wt,Xt),$t=!1),$t}(this,Kt,St,Ct))&&(Kt.pendingcb++,Gt=function(Ht,qt,Pt,wt,$t,Xt){if(!Pt){var un=function(en,Mt,jt){return en.objectMode||en.decodeStrings===!1||typeof Mt!="string"||(Mt=pt.from(Mt,jt)),Mt}(qt,wt,$t);wt!==un&&(Pt=!0,$t="buffer",wt=un)}var dn=qt.objectMode?1:wt.length;qt.length+=dn;var mn=qt.length<qt.highWaterMark;if(mn||(qt.needDrain=!0),qt.writing||qt.corked){var an=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:wt,encoding:$t,isBuf:Pt,callback:Xt,next:null},an?an.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else It(Ht,qt,!1,dn,wt,$t,Xt);return mn}(this,Kt,Ut,St,Nt,Ct)),Gt},Tt.prototype.cork=function(){this._writableState.corked++},Tt.prototype.uncork=function(){var St=this._writableState;St.corked&&(St.corked--,St.writing||St.corked||St.finished||St.bufferProcessing||!St.bufferedRequest||Bt(this,St))},Tt.prototype.setDefaultEncoding=function(St){if(typeof St=="string"&&(St=St.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((St+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+St);return this._writableState.defaultEncoding=St,this},Object.defineProperty(Tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Tt.prototype._write=function(St,Nt,Ct){Ct(new Error("_write() is not implemented"))},Tt.prototype._writev=null,Tt.prototype.end=function(St,Nt,Ct){var Vt=this._writableState;typeof St=="function"?(Ct=St,St=null,Nt=null):typeof Nt=="function"&&(Ct=Nt,Nt=null),St!=null&&this.write(St,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Kt,Gt,Ut){Gt.ending=!0,xt(Kt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Kt.once("finish",Ut)),Gt.ended=!0,Kt.writable=!1}(this,Vt,Ct)},Object.defineProperty(Tt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(St){this._writableState&&(this._writableState.destroyed=St)}}),Tt.prototype.destroy=Et.destroy,Tt.prototype._undestroy=Et.undestroy,Tt.prototype._destroy=function(St,Nt){this.end(),Nt(St)}}).call(this,s(2),s(12).setImmediate,s(5))},function(i,o,s){var _=s(23).codes.ERR_STREAM_PREMATURE_CLOSE;function $(){}i.exports=function et(tt,j,it){if(typeof j=="function")return et(tt,null,j);j||(j={}),it=function(Tt){var It=!1;return function(){if(!It){It=!0;for(var mt=arguments.length,Bt=new Array(mt),nn=0;nn<mt;nn++)Bt[nn]=arguments[nn];Tt.apply(this,Bt)}}}(it||$);var st=j.readable||j.readable!==!1&&tt.readable,ht=j.writable||j.writable!==!1&&tt.writable,vt=function(){tt.writable||pt()},ft=tt._writableState&&tt._writableState.finished,pt=function(){ht=!1,ft=!0,st||it.call(tt)},ct=tt._readableState&&tt._readableState.endEmitted,yt=function(){st=!1,ct=!0,ht||it.call(tt)},Et=function(Tt){it.call(tt,Tt)},Ot=function(){var Tt;return st&&!ct?(tt._readableState&&tt._readableState.ended||(Tt=new _),it.call(tt,Tt)):ht&&!ft?(tt._writableState&&tt._writableState.ended||(Tt=new _),it.call(tt,Tt)):void 0},Lt=function(){tt.req.on("finish",pt)};return function(Tt){return Tt.setHeader&&typeof Tt.abort=="function"}(tt)?(tt.on("complete",pt),tt.on("abort",Ot),tt.req?Lt():tt.on("request",Lt)):ht&&!tt._writableState&&(tt.on("end",vt),tt.on("close",vt)),tt.on("end",yt),tt.on("finish",pt),j.error!==!1&&tt.on("error",Et),tt.on("close",Ot),function(){tt.removeListener("complete",pt),tt.removeListener("abort",Ot),tt.removeListener("request",Lt),tt.req&&tt.req.removeListener("finish",pt),tt.removeListener("end",vt),tt.removeListener("close",vt),tt.removeListener("finish",pt),tt.removeListener("end",yt),tt.removeListener("error",Et),tt.removeListener("close",Ot)}}},function(i,o,s){var _=s(193),$=s(195);function et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}o.parse=Tt,o.resolve=function(It,mt){return Tt(It,!1,!0).resolve(mt)},o.resolveObject=function(It,mt){return It?Tt(It,!1,!0).resolveObject(mt):mt},o.format=function(It){return $.isString(It)&&(It=Tt(It)),It instanceof et?It.format():et.prototype.format.call(It)},o.Url=et;var tt=/^([a-z0-9.+-]+:)/i,j=/:[0-9]*$/,it=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,st=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),ht=["'"].concat(st),vt=["%","/","?",";","#"].concat(ht),ft=["/","?","#"],pt=/^[+a-z0-9A-Z_-]{0,63}$/,ct=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yt={javascript:!0,"javascript:":!0},Et={javascript:!0,"javascript:":!0},Ot={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Lt=s(196);function Tt(It,mt,Bt){if(It&&$.isObject(It)&&It instanceof et)return It;var nn=new et;return nn.parse(It,mt,Bt),nn}et.prototype.parse=function(It,mt,Bt){if(!$.isString(It))throw new TypeError("Parameter 'url' must be a string, not "+typeof It);var nn=It.indexOf("?"),sn=nn!==-1&&nn<It.indexOf("#")?"?":"#",xt=It.split(sn);xt[0]=xt[0].replace(/\\/g,"/");var St=It=xt.join(sn);if(St=St.trim(),!Bt&&It.split("#").length===1){var Nt=it.exec(St);if(Nt)return this.path=St,this.href=St,this.pathname=Nt[1],Nt[2]?(this.search=Nt[2],this.query=mt?Lt.parse(this.search.substr(1)):this.search.substr(1)):mt&&(this.search="",this.query={}),this}var Ct=tt.exec(St);if(Ct){var Vt=(Ct=Ct[0]).toLowerCase();this.protocol=Vt,St=St.substr(Ct.length)}if(Bt||Ct||St.match(/^\/\/[^@\/]+@[^@\/]+/)){var Kt=St.substr(0,2)==="//";!Kt||Ct&&Et[Ct]||(St=St.substr(2),this.slashes=!0)}if(!Et[Ct]&&(Kt||Ct&&!Ot[Ct])){for(var Gt,Ut,Ht=-1,qt=0;qt<ft.length;qt++)(Pt=St.indexOf(ft[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt);for((Ut=Ht===-1?St.lastIndexOf("@"):St.lastIndexOf("@",Ht))!==-1&&(Gt=St.slice(0,Ut),St=St.slice(Ut+1),this.auth=decodeURIComponent(Gt)),Ht=-1,qt=0;qt<vt.length;qt++){var Pt;(Pt=St.indexOf(vt[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt)}Ht===-1&&(Ht=St.length),this.host=St.slice(0,Ht),St=St.slice(Ht),this.parseHost(),this.hostname=this.hostname||"";var wt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!wt)for(var $t=this.hostname.split(/\./),Xt=(qt=0,$t.length);qt<Xt;qt++){var un=$t[qt];if(un&&!un.match(pt)){for(var dn="",mn=0,an=un.length;mn<an;mn++)un.charCodeAt(mn)>127?dn+="x":dn+=un[mn];if(!dn.match(pt)){var en=$t.slice(0,qt),Mt=$t.slice(qt+1),jt=un.match(ct);jt&&(en.push(jt[1]),Mt.unshift(jt[2])),Mt.length&&(St="/"+Mt.join(".")+St),this.hostname=en.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),wt||(this.hostname=_.toASCII(this.hostname));var Qt=this.port?":"+this.port:"",gn=this.hostname||"";this.host=gn+Qt,this.href+=this.host,wt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),St[0]!=="/"&&(St="/"+St))}if(!yt[Vt])for(qt=0,Xt=ht.length;qt<Xt;qt++){var hn=ht[qt];if(St.indexOf(hn)!==-1){var An=encodeURIComponent(hn);An===hn&&(An=escape(hn)),St=St.split(hn).join(An)}}var Mn=St.indexOf("#");Mn!==-1&&(this.hash=St.substr(Mn),St=St.slice(0,Mn));var Yn=St.indexOf("?");if(Yn!==-1?(this.search=St.substr(Yn),this.query=St.substr(Yn+1),mt&&(this.query=Lt.parse(this.query)),St=St.slice(0,Yn)):mt&&(this.search="",this.query={}),St&&(this.pathname=St),Ot[Vt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Qt=this.pathname||"";var Nr=this.search||"";this.path=Qt+Nr}return this.href=this.format(),this},et.prototype.format=function(){var It=this.auth||"";It&&(It=(It=encodeURIComponent(It)).replace(/%3A/i,":"),It+="@");var mt=this.protocol||"",Bt=this.pathname||"",nn=this.hash||"",sn=!1,xt="";this.host?sn=It+this.host:this.hostname&&(sn=It+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(sn+=":"+this.port)),this.query&&$.isObject(this.query)&&Object.keys(this.query).length&&(xt=Lt.stringify(this.query));var St=this.search||xt&&"?"+xt||"";return mt&&mt.substr(-1)!==":"&&(mt+=":"),this.slashes||(!mt||Ot[mt])&&sn!==!1?(sn="//"+(sn||""),Bt&&Bt.charAt(0)!=="/"&&(Bt="/"+Bt)):sn||(sn=""),nn&&nn.charAt(0)!=="#"&&(nn="#"+nn),St&&St.charAt(0)!=="?"&&(St="?"+St),mt+sn+(Bt=Bt.replace(/[?#]/g,function(Nt){return encodeURIComponent(Nt)}))+(St=St.replace("#","%23"))+nn},et.prototype.resolve=function(It){return this.resolveObject(Tt(It,!1,!0)).format()},et.prototype.resolveObject=function(It){if($.isString(It)){var mt=new et;mt.parse(It,!1,!0),It=mt}for(var Bt=new et,nn=Object.keys(this),sn=0;sn<nn.length;sn++){var xt=nn[sn];Bt[xt]=this[xt]}if(Bt.hash=It.hash,It.href==="")return Bt.href=Bt.format(),Bt;if(It.slashes&&!It.protocol){for(var St=Object.keys(It),Nt=0;Nt<St.length;Nt++){var Ct=St[Nt];Ct!=="protocol"&&(Bt[Ct]=It[Ct])}return Ot[Bt.protocol]&&Bt.hostname&&!Bt.pathname&&(Bt.path=Bt.pathname="/"),Bt.href=Bt.format(),Bt}if(It.protocol&&It.protocol!==Bt.protocol){if(!Ot[It.protocol]){for(var Vt=Object.keys(It),Kt=0;Kt<Vt.length;Kt++){var Gt=Vt[Kt];Bt[Gt]=It[Gt]}return Bt.href=Bt.format(),Bt}if(Bt.protocol=It.protocol,It.host||Et[It.protocol])Bt.pathname=It.pathname;else{for(var Ut=(It.pathname||"").split("/");Ut.length&&!(It.host=Ut.shift()););It.host||(It.host=""),It.hostname||(It.hostname=""),Ut[0]!==""&&Ut.unshift(""),Ut.length<2&&Ut.unshift(""),Bt.pathname=Ut.join("/")}if(Bt.search=It.search,Bt.query=It.query,Bt.host=It.host||"",Bt.auth=It.auth,Bt.hostname=It.hostname||It.host,Bt.port=It.port,Bt.pathname||Bt.search){var Ht=Bt.pathname||"",qt=Bt.search||"";Bt.path=Ht+qt}return Bt.slashes=Bt.slashes||It.slashes,Bt.href=Bt.format(),Bt}var Pt=Bt.pathname&&Bt.pathname.charAt(0)==="/",wt=It.host||It.pathname&&It.pathname.charAt(0)==="/",$t=wt||Pt||Bt.host&&It.pathname,Xt=$t,un=Bt.pathname&&Bt.pathname.split("/")||[],dn=(Ut=It.pathname&&It.pathname.split("/")||[],Bt.protocol&&!Ot[Bt.protocol]);if(dn&&(Bt.hostname="",Bt.port=null,Bt.host&&(un[0]===""?un[0]=Bt.host:un.unshift(Bt.host)),Bt.host="",It.protocol&&(It.hostname=null,It.port=null,It.host&&(Ut[0]===""?Ut[0]=It.host:Ut.unshift(It.host)),It.host=null),$t=$t&&(Ut[0]===""||un[0]==="")),wt)Bt.host=It.host||It.host===""?It.host:Bt.host,Bt.hostname=It.hostname||It.hostname===""?It.hostname:Bt.hostname,Bt.search=It.search,Bt.query=It.query,un=Ut;else if(Ut.length)un||(un=[]),un.pop(),un=un.concat(Ut),Bt.search=It.search,Bt.query=It.query;else if(!$.isNullOrUndefined(It.search))return dn&&(Bt.hostname=Bt.host=un.shift(),(jt=!!(Bt.host&&Bt.host.indexOf("@")>0)&&Bt.host.split("@"))&&(Bt.auth=jt.shift(),Bt.host=Bt.hostname=jt.shift())),Bt.search=It.search,Bt.query=It.query,$.isNull(Bt.pathname)&&$.isNull(Bt.search)||(Bt.path=(Bt.pathname?Bt.pathname:"")+(Bt.search?Bt.search:"")),Bt.href=Bt.format(),Bt;if(!un.length)return Bt.pathname=null,Bt.search?Bt.path="/"+Bt.search:Bt.path=null,Bt.href=Bt.format(),Bt;for(var mn=un.slice(-1)[0],an=(Bt.host||It.host||un.length>1)&&(mn==="."||mn==="..")||mn==="",en=0,Mt=un.length;Mt>=0;Mt--)(mn=un[Mt])==="."?un.splice(Mt,1):mn===".."?(un.splice(Mt,1),en++):en&&(un.splice(Mt,1),en--);if(!$t&&!Xt)for(;en--;en)un.unshift("..");!$t||un[0]===""||un[0]&&un[0].charAt(0)==="/"||un.unshift(""),an&&un.join("/").substr(-1)!=="/"&&un.push("");var jt,Qt=un[0]===""||un[0]&&un[0].charAt(0)==="/";return dn&&(Bt.hostname=Bt.host=Qt?"":un.length?un.shift():"",(jt=!!(Bt.host&&Bt.host.indexOf("@")>0)&&Bt.host.split("@"))&&(Bt.auth=jt.shift(),Bt.host=Bt.hostname=jt.shift())),($t=$t||Bt.host&&un.length)&&!Qt&&un.unshift(""),un.length?Bt.pathname=un.join("/"):(Bt.pathname=null,Bt.path=null),$.isNull(Bt.pathname)&&$.isNull(Bt.search)||(Bt.path=(Bt.pathname?Bt.pathname:"")+(Bt.search?Bt.search:"")),Bt.auth=It.auth||Bt.auth,Bt.slashes=Bt.slashes||It.slashes,Bt.href=Bt.format(),Bt},et.prototype.parseHost=function(){var It=this.host,mt=j.exec(It);mt&&((mt=mt[0])!==":"&&(this.port=mt.substr(1)),It=It.substr(0,It.length-mt.length)),It&&(this.hostname=It)}},function(i,o,s){var _=s(56),$=s(3).configs;o.cli=_.levels($.cli),o.npm=_.levels($.npm),o.syslog=_.levels($.syslog),o.addColors=_.levels},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=j(s(202)),$=j(s(203)),et=j(s(22)),tt=j(s(26));function j(it){return it&&it.__esModule?it:{default:it}}o.default=(0,tt.default)(function(it,st,ht){return(0,_.default)(it,(0,$.default)((0,et.default)(st)),ht)},3),i.exports=o.default},function(i,o,s){function _($){Error.captureStackTrace(this,this.constructor),this.name="EnvVarError",this.message=`env-var: ${$}`}(0,s(10).inherits)(_,Error),i.exports=_},function(i,o,s){i.exports=function(_){const $=parseInt(_,10);if(isNaN($)||_.toString().indexOf(".")!==-1)throw new Error("should be a valid integer");return $}},function(i,o,s){i.exports=function(_){const $=parseFloat(_);if(isNaN($))throw new Error("should be a valid float");return $}},function(i,o,s){i.exports=function(_){try{return JSON.parse(_)}catch{throw new Error("should be valid (parseable) JSON")}}},function(i,o,s){(function(_){function $(j,it){for(var st=0,ht=j.length-1;ht>=0;ht--){var vt=j[ht];vt==="."?j.splice(ht,1):vt===".."?(j.splice(ht,1),st++):st&&(j.splice(ht,1),st--)}if(it)for(;st--;st)j.unshift("..");return j}function et(j,it){if(j.filter)return j.filter(it);for(var st=[],ht=0;ht<j.length;ht++)it(j[ht],ht,j)&&st.push(j[ht]);return st}o.resolve=function(){for(var j="",it=!1,st=arguments.length-1;st>=-1&&!it;st--){var ht=st>=0?arguments[st]:_.cwd();if(typeof ht!="string")throw new TypeError("Arguments to path.resolve must be strings");ht&&(j=ht+"/"+j,it=ht.charAt(0)==="/")}return(it?"/":"")+(j=$(et(j.split("/"),function(vt){return!!vt}),!it).join("/"))||"."},o.normalize=function(j){var it=o.isAbsolute(j),st=tt(j,-1)==="/";return(j=$(et(j.split("/"),function(ht){return!!ht}),!it).join("/"))||it||(j="."),j&&st&&(j+="/"),(it?"/":"")+j},o.isAbsolute=function(j){return j.charAt(0)==="/"},o.join=function(){var j=Array.prototype.slice.call(arguments,0);return o.normalize(et(j,function(it,st){if(typeof it!="string")throw new TypeError("Arguments to path.join must be strings");return it}).join("/"))},o.relative=function(j,it){function st(Et){for(var Ot=0;Ot<Et.length&&Et[Ot]==="";Ot++);for(var Lt=Et.length-1;Lt>=0&&Et[Lt]==="";Lt--);return Ot>Lt?[]:Et.slice(Ot,Lt-Ot+1)}j=o.resolve(j).substr(1),it=o.resolve(it).substr(1);for(var ht=st(j.split("/")),vt=st(it.split("/")),ft=Math.min(ht.length,vt.length),pt=ft,ct=0;ct<ft;ct++)if(ht[ct]!==vt[ct]){pt=ct;break}var yt=[];for(ct=pt;ct<ht.length;ct++)yt.push("..");return(yt=yt.concat(vt.slice(pt))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(j){if(typeof j!="string"&&(j+=""),j.length===0)return".";for(var it=j.charCodeAt(0),st=it===47,ht=-1,vt=!0,ft=j.length-1;ft>=1;--ft)if((it=j.charCodeAt(ft))===47){if(!vt){ht=ft;break}}else vt=!1;return ht===-1?st?"/":".":st&&ht===1?"/":j.slice(0,ht)},o.basename=function(j,it){var st=function(ht){typeof ht!="string"&&(ht+="");var vt,ft=0,pt=-1,ct=!0;for(vt=ht.length-1;vt>=0;--vt)if(ht.charCodeAt(vt)===47){if(!ct){ft=vt+1;break}}else pt===-1&&(ct=!1,pt=vt+1);return pt===-1?"":ht.slice(ft,pt)}(j);return it&&st.substr(-1*it.length)===it&&(st=st.substr(0,st.length-it.length)),st},o.extname=function(j){typeof j!="string"&&(j+="");for(var it=-1,st=0,ht=-1,vt=!0,ft=0,pt=j.length-1;pt>=0;--pt){var ct=j.charCodeAt(pt);if(ct!==47)ht===-1&&(vt=!1,ht=pt+1),ct===46?it===-1?it=pt:ft!==1&&(ft=1):it!==-1&&(ft=-1);else if(!vt){st=pt+1;break}}return it===-1||ht===-1||ft===0||ft===1&&it===ht-1&&it===st+1?"":j.slice(it,ht)};var tt="ab".substr(-1)==="b"?function(j,it,st){return j.substr(it,st)}:function(j,it,st){return it<0&&(it=j.length+it),j.substr(it,st)}}).call(this,s(2))},function(i,o){function s(_,$){var et=[],tt=[];return $==null&&($=function(j,it){return et[0]===it?"[Circular ~]":"[Circular ~."+tt.slice(0,et.indexOf(it)).join(".")+"]"}),function(j,it){if(et.length>0){var st=et.indexOf(this);~st?et.splice(st+1):et.push(this),~st?tt.splice(st,1/0,j):tt.push(j),~et.indexOf(it)&&(it=$.call(this,j,it))}else et.push(it);return _==null?it:_.call(this,j,it)}}(i.exports=function(_,$,et,tt){return JSON.stringify(_,s($,tt),et)}).getSerialize=s},function(i,o,s){s(225),i.exports={encode:_=>new TextEncoder().encode(_),decode:_=>new TextDecoder().decode(_)}},function(i,o,s){var _=o.format=s(9);o.levels=s(104),Object.defineProperty(_,"align",{value:s(121)}),Object.defineProperty(_,"cli",{value:s(122)}),Object.defineProperty(_,"combine",{value:s(123)}),Object.defineProperty(_,"colorize",{value:s(37)}),Object.defineProperty(_,"json",{value:s(124)}),Object.defineProperty(_,"label",{value:s(127)}),Object.defineProperty(_,"logstash",{value:s(128)}),Object.defineProperty(_,"metadata",{value:s(129)}),Object.defineProperty(_,"padLevels",{value:s(58)}),Object.defineProperty(_,"prettyPrint",{value:s(130)}),Object.defineProperty(_,"printf",{value:s(131)}),Object.defineProperty(_,"simple",{value:s(132)}),Object.defineProperty(_,"splat",{value:s(133)}),Object.defineProperty(_,"timestamp",{value:s(134)}),Object.defineProperty(_,"uncolorize",{value:s(136)})},function(i,o,s){var _=s(105);i.exports=_},function(i,o,s){function _(ft){return function(pt){if(Array.isArray(pt))return $(pt)}(ft)||function(pt){if(typeof Symbol<"u"&&Symbol.iterator in Object(pt))return Array.from(pt)}(ft)||function(pt,ct){if(pt){if(typeof pt=="string")return $(pt,ct);var yt=Object.prototype.toString.call(pt).slice(8,-1);if(yt==="Object"&&pt.constructor&&(yt=pt.constructor.name),yt==="Map"||yt==="Set")return Array.from(pt);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return $(pt,ct)}}(ft)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(ft,pt){(pt==null||pt>ft.length)&&(pt=ft.length);for(var ct=0,yt=new Array(pt);ct<pt;ct++)yt[ct]=ft[ct];return yt}function et(ft,pt){if(!(ft instanceof pt))throw new TypeError("Cannot call a class as a function")}function tt(ft,pt){for(var ct=0;ct<pt.length;ct++){var yt=pt[ct];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(ft,yt.key,yt)}}var j=s(3),it=j.configs,st=j.LEVEL,ht=j.MESSAGE,vt=function(){function ft(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{levels:it.npm.levels};et(this,ft),this.paddings=ft.paddingForLevels(Et.levels,Et.filler),this.options=Et}var pt,ct,yt;return pt=ft,yt=[{key:"getLongestLevel",value:function(Et){var Ot=Object.keys(Et).map(function(Lt){return Lt.length});return Math.max.apply(Math,_(Ot))}},{key:"paddingForLevel",value:function(Et,Ot,Lt){var Tt=Lt+1-Et.length,It=Math.floor(Tt/Ot.length);return"".concat(Ot).concat(Ot.repeat(It)).slice(0,Tt)}},{key:"paddingForLevels",value:function(Et){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",Lt=ft.getLongestLevel(Et);return Object.keys(Et).reduce(function(Tt,It){return Tt[It]=ft.paddingForLevel(It,Ot,Lt),Tt},{})}}],(ct=[{key:"transform",value:function(Et,Ot){return Et.message="".concat(this.paddings[Et[st]]).concat(Et.message),Et[ht]&&(Et[ht]="".concat(this.paddings[Et[st]]).concat(Et[ht])),Et}}])&&tt(pt.prototype,ct),yt&&tt(pt,yt),ft}();i.exports=function(ft){return new vt(ft)},i.exports.Padder=i.exports.Format=vt},function(i,o,s){var _=s(10).format;o.warn={deprecated:function($){return function(){throw new Error(_("{ %s } was removed in winston@3.0.0.",$))}},useFormat:function($){return function(){throw new Error([_("{ %s } was removed in winston@3.0.0.",$),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions:function($,et,tt){tt.forEach(function(j){$[j]=o.warn[et](j)})},moved:function($,et,tt){function j(){return function(){throw new Error([_("winston.%s was moved in winston@3.0.0.",tt),_("Use a winston.%s instead.",et)].join(`
`))}}Object.defineProperty($,tt,{get:j,set:j})},forProperties:function($,et,tt){tt.forEach(function(j){var it=o.warn[et](j);Object.defineProperty($,j,{get:it,set:it})})}}},function(i,o,s){(function(_,$,et){var tt=s(13);function j(St){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Ct,Vt,Kt){var Gt=Ct.entry;for(Ct.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Kt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Ct:Vt.corkedRequestsFree=Ct})(Nt,St)}}i.exports=Tt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Tt.WritableState=Lt;var ht=Object.create(s(14));ht.inherits=s(7);var vt={deprecate:s(39)},ft=s(61),pt=s(40).Buffer,ct=et.Uint8Array||function(){},yt,Et=s(62);function Ot(){}function Lt(St,Nt){it=it||s(31),St=St||{};var Ct=Nt instanceof it;this.objectMode=!!St.objectMode,Ct&&(this.objectMode=this.objectMode||!!St.writableObjectMode);var Vt=St.highWaterMark,Kt=St.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Ct&&(Kt||Kt===0)?Kt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=St.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=St.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var wt=qt._writableState,$t=wt.sync,Xt=wt.writecb;if(function(dn){dn.writing=!1,dn.writecb=null,dn.length-=dn.writelen,dn.writelen=0}(wt),Pt)(function(dn,mn,an,en,Mt){--mn.pendingcb,an?(tt.nextTick(Mt,en),tt.nextTick(xt,dn,mn),dn._writableState.errorEmitted=!0,dn.emit("error",en)):(Mt(en),dn._writableState.errorEmitted=!0,dn.emit("error",en),xt(dn,mn))})(qt,wt,$t,Pt,Xt);else{var un=nn(wt);un||wt.corked||wt.bufferProcessing||!wt.bufferedRequest||Bt(qt,wt),$t?st(mt,qt,wt,un,Xt):mt(qt,wt,un,Xt)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Tt(St){if(it=it||s(31),!(yt.call(Tt,this)||this instanceof it))return new Tt(St);this._writableState=new Lt(St,this),this.writable=!0,St&&(typeof St.write=="function"&&(this._write=St.write),typeof St.writev=="function"&&(this._writev=St.writev),typeof St.destroy=="function"&&(this._destroy=St.destroy),typeof St.final=="function"&&(this._final=St.final)),ft.call(this)}function It(St,Nt,Ct,Vt,Kt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Ct?St._writev(Kt,Nt.onwrite):St._write(Kt,Gt,Nt.onwrite),Nt.sync=!1}function mt(St,Nt,Ct,Vt){Ct||function(Kt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Kt.emit("drain"))}(St,Nt),Nt.pendingcb--,Vt(),xt(St,Nt)}function Bt(St,Nt){Nt.bufferProcessing=!0;var Ct=Nt.bufferedRequest;if(St._writev&&Ct&&Ct.next){var Vt=Nt.bufferedRequestCount,Kt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Ct;for(var Ut=0,Ht=!0;Ct;)Kt[Ut]=Ct,Ct.isBuf||(Ht=!1),Ct=Ct.next,Ut+=1;Kt.allBuffers=Ht,It(St,Nt,!0,Nt.length,Kt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Ct;){var qt=Ct.chunk,Pt=Ct.encoding,wt=Ct.callback;if(It(St,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,wt),Ct=Ct.next,Nt.bufferedRequestCount--,Nt.writing)break}Ct===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Ct,Nt.bufferProcessing=!1}function nn(St){return St.ending&&St.length===0&&St.bufferedRequest===null&&!St.finished&&!St.writing}function sn(St,Nt){St._final(function(Ct){Nt.pendingcb--,Ct&&St.emit("error",Ct),Nt.prefinished=!0,St.emit("prefinish"),xt(St,Nt)})}function xt(St,Nt){var Ct=nn(Nt);return Ct&&(function(Vt,Kt){Kt.prefinished||Kt.finalCalled||(typeof Vt._final=="function"?(Kt.pendingcb++,Kt.finalCalled=!0,tt.nextTick(sn,Vt,Kt)):(Kt.prefinished=!0,Vt.emit("prefinish")))}(St,Nt),Nt.pendingcb===0&&(Nt.finished=!0,St.emit("finish"))),Ct}ht.inherits(Tt,ft),Lt.prototype.getBuffer=function(){for(var St=this.bufferedRequest,Nt=[];St;)Nt.push(St),St=St.next;return Nt},function(){try{Object.defineProperty(Lt.prototype,"buffer",{get:vt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Tt,Symbol.hasInstance,{value:function(St){return!!yt.call(this,St)||this===Tt&&St&&St._writableState instanceof Lt}})):yt=function(St){return St instanceof this},Tt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Tt.prototype.write=function(St,Nt,Ct){var Vt,Kt=this._writableState,Gt=!1,Ut=!Kt.objectMode&&(Vt=St,pt.isBuffer(Vt)||Vt instanceof ct);return Ut&&!pt.isBuffer(St)&&(St=function(Ht){return pt.from(Ht)}(St)),typeof Nt=="function"&&(Ct=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Kt.defaultEncoding),typeof Ct!="function"&&(Ct=Ot),Kt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Ct):(Ut||function(Ht,qt,Pt,wt){var $t=!0,Xt=!1;return Pt===null?Xt=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(Xt=new TypeError("Invalid non-string/buffer chunk")),Xt&&(Ht.emit("error",Xt),tt.nextTick(wt,Xt),$t=!1),$t}(this,Kt,St,Ct))&&(Kt.pendingcb++,Gt=function(Ht,qt,Pt,wt,$t,Xt){if(!Pt){var un=function(en,Mt,jt){return en.objectMode||en.decodeStrings===!1||typeof Mt!="string"||(Mt=pt.from(Mt,jt)),Mt}(qt,wt,$t);wt!==un&&(Pt=!0,$t="buffer",wt=un)}var dn=qt.objectMode?1:wt.length;qt.length+=dn;var mn=qt.length<qt.highWaterMark;if(mn||(qt.needDrain=!0),qt.writing||qt.corked){var an=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:wt,encoding:$t,isBuf:Pt,callback:Xt,next:null},an?an.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else It(Ht,qt,!1,dn,wt,$t,Xt);return mn}(this,Kt,Ut,St,Nt,Ct)),Gt},Tt.prototype.cork=function(){this._writableState.corked++},Tt.prototype.uncork=function(){var St=this._writableState;St.corked&&(St.corked--,St.writing||St.corked||St.finished||St.bufferProcessing||!St.bufferedRequest||Bt(this,St))},Tt.prototype.setDefaultEncoding=function(St){if(typeof St=="string"&&(St=St.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((St+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+St);return this._writableState.defaultEncoding=St,this},Object.defineProperty(Tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Tt.prototype._write=function(St,Nt,Ct){Ct(new Error("_write() is not implemented"))},Tt.prototype._writev=null,Tt.prototype.end=function(St,Nt,Ct){var Vt=this._writableState;typeof St=="function"?(Ct=St,St=null,Nt=null):typeof Nt=="function"&&(Ct=Nt,Nt=null),St!=null&&this.write(St,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Kt,Gt,Ut){Gt.ending=!0,xt(Kt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Kt.once("finish",Ut)),Gt.ended=!0,Kt.writable=!1}(this,Vt,Ct)},Object.defineProperty(Tt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(St){this._writableState&&(this._writableState.destroyed=St)}}),Tt.prototype.destroy=Et.destroy,Tt.prototype._undestroy=Et.undestroy,Tt.prototype._destroy=function(St,Nt){this.end(),Nt(St)}}).call(this,s(2),s(12).setImmediate,s(5))},function(i,o,s){i.exports=s(18).EventEmitter},function(i,o,s){var _=s(13);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o){},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(155)),$=tt(s(22)),et=tt(s(26));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)(function(j,it,st,ht){return(0,_.default)(it)(j,(0,$.default)(st),ht)},4),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){function $(...et){if(_!==null){var tt=_;_=null,tt.apply(this,et)}}return Object.assign($,_),$},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){if(_===null)throw new Error("Callback was already called.");var et=_;_=null,et.apply(this,$)}},i.exports=o.default},function(i,o,s){(function(_,$){var et=s(13);i.exports=It;var tt,j=s(38);It.ReadableState=Tt,s(18).EventEmitter;var it=function(Pt,wt){return Pt.listeners(wt).length},st=s(68),ht=s(43).Buffer,vt=_.Uint8Array||function(){},ft=s(14);ft.inherits=s(7);var pt=s(161),ct=void 0;ct=pt&&pt.debuglog?pt.debuglog("stream"):function(){};var yt,Et=s(162),Ot=s(69);ft.inherits(It,st);var Lt=["error","close","destroy","pause","resume"];function Tt(Pt,wt){Pt=Pt||{};var $t=wt instanceof(tt=tt||s(20));this.objectMode=!!Pt.objectMode,$t&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var Xt=Pt.highWaterMark,un=Pt.readableHighWaterMark,dn=this.objectMode?16:16384;this.highWaterMark=Xt||Xt===0?Xt:$t&&(un||un===0)?un:dn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(19).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function It(Pt){if(tt=tt||s(20),!(this instanceof It))return new It(Pt);this._readableState=new Tt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function mt(Pt,wt,$t,Xt,un){var dn,mn=Pt._readableState;return wt===null?(mn.reading=!1,function(an,en){if(!en.ended){if(en.decoder){var Mt=en.decoder.end();Mt&&Mt.length&&(en.buffer.push(Mt),en.length+=en.objectMode?1:Mt.length)}en.ended=!0,sn(an)}}(Pt,mn)):(un||(dn=function(an,en){var Mt;jt=en,ht.isBuffer(jt)||jt instanceof vt||typeof en=="string"||en===void 0||an.objectMode||(Mt=new TypeError("Invalid non-string/buffer chunk"));var jt;return Mt}(mn,wt)),dn?Pt.emit("error",dn):mn.objectMode||wt&&wt.length>0?(typeof wt=="string"||mn.objectMode||Object.getPrototypeOf(wt)===ht.prototype||(wt=function(an){return ht.from(an)}(wt)),Xt?mn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Bt(Pt,mn,wt,!0):mn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(mn.reading=!1,mn.decoder&&!$t?(wt=mn.decoder.write(wt),mn.objectMode||wt.length!==0?Bt(Pt,mn,wt,!1):St(Pt,mn)):Bt(Pt,mn,wt,!1))):Xt||(mn.reading=!1)),function(an){return!an.ended&&(an.needReadable||an.length<an.highWaterMark||an.length===0)}(mn)}function Bt(Pt,wt,$t,Xt){wt.flowing&&wt.length===0&&!wt.sync?(Pt.emit("data",$t),Pt.read(0)):(wt.length+=wt.objectMode?1:$t.length,Xt?wt.buffer.unshift($t):wt.buffer.push($t),wt.needReadable&&sn(Pt)),St(Pt,wt)}Object.defineProperty(It.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),It.prototype.destroy=Ot.destroy,It.prototype._undestroy=Ot.undestroy,It.prototype._destroy=function(Pt,wt){this.push(null),wt(Pt)},It.prototype.push=function(Pt,wt){var $t,Xt=this._readableState;return Xt.objectMode?$t=!0:typeof Pt=="string"&&((wt=wt||Xt.defaultEncoding)!==Xt.encoding&&(Pt=ht.from(Pt,wt),wt=""),$t=!0),mt(this,Pt,wt,!1,$t)},It.prototype.unshift=function(Pt){return mt(this,Pt,null,!0,!1)},It.prototype.isPaused=function(){return this._readableState.flowing===!1},It.prototype.setEncoding=function(Pt){return yt||(yt=s(19).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,wt){return Pt<=0||wt.length===0&&wt.ended?0:wt.objectMode?1:Pt!=Pt?wt.flowing&&wt.length?wt.buffer.head.data.length:wt.length:(Pt>wt.highWaterMark&&(wt.highWaterMark=function($t){return $t>=8388608?$t=8388608:($t--,$t|=$t>>>1,$t|=$t>>>2,$t|=$t>>>4,$t|=$t>>>8,$t|=$t>>>16,$t++),$t}(Pt)),Pt<=wt.length?Pt:wt.ended?wt.length:(wt.needReadable=!0,0))}function sn(Pt){var wt=Pt._readableState;wt.needReadable=!1,wt.emittedReadable||(ct("emitReadable",wt.flowing),wt.emittedReadable=!0,wt.sync?et.nextTick(xt,Pt):xt(Pt))}function xt(Pt){ct("emit readable"),Pt.emit("readable"),Kt(Pt)}function St(Pt,wt){wt.readingMore||(wt.readingMore=!0,et.nextTick(Nt,Pt,wt))}function Nt(Pt,wt){for(var $t=wt.length;!wt.reading&&!wt.flowing&&!wt.ended&&wt.length<wt.highWaterMark&&(ct("maybeReadMore read 0"),Pt.read(0),$t!==wt.length);)$t=wt.length;wt.readingMore=!1}function Ct(Pt){ct("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,wt){wt.reading||(ct("resume read 0"),Pt.read(0)),wt.resumeScheduled=!1,wt.awaitDrain=0,Pt.emit("resume"),Kt(Pt),wt.flowing&&!wt.reading&&Pt.read(0)}function Kt(Pt){var wt=Pt._readableState;for(ct("flow",wt.flowing);wt.flowing&&Pt.read()!==null;);}function Gt(Pt,wt){return wt.length===0?null:(wt.objectMode?$t=wt.buffer.shift():!Pt||Pt>=wt.length?($t=wt.decoder?wt.buffer.join(""):wt.buffer.length===1?wt.buffer.head.data:wt.buffer.concat(wt.length),wt.buffer.clear()):$t=function(Xt,un,dn){var mn;return Xt<un.head.data.length?(mn=un.head.data.slice(0,Xt),un.head.data=un.head.data.slice(Xt)):mn=Xt===un.head.data.length?un.shift():dn?function(an,en){var Mt=en.head,jt=1,Qt=Mt.data;for(an-=Qt.length;Mt=Mt.next;){var gn=Mt.data,hn=an>gn.length?gn.length:an;if(hn===gn.length?Qt+=gn:Qt+=gn.slice(0,an),(an-=hn)===0){hn===gn.length?(++jt,Mt.next?en.head=Mt.next:en.head=en.tail=null):(en.head=Mt,Mt.data=gn.slice(hn));break}++jt}return en.length-=jt,Qt}(Xt,un):function(an,en){var Mt=ht.allocUnsafe(an),jt=en.head,Qt=1;for(jt.data.copy(Mt),an-=jt.data.length;jt=jt.next;){var gn=jt.data,hn=an>gn.length?gn.length:an;if(gn.copy(Mt,Mt.length-an,0,hn),(an-=hn)===0){hn===gn.length?(++Qt,jt.next?en.head=jt.next:en.head=en.tail=null):(en.head=jt,jt.data=gn.slice(hn));break}++Qt}return en.length-=Qt,Mt}(Xt,un),mn}(Pt,wt.buffer,wt.decoder),$t);var $t}function Ut(Pt){var wt=Pt._readableState;if(wt.length>0)throw new Error('"endReadable()" called on non-empty stream');wt.endEmitted||(wt.ended=!0,et.nextTick(Ht,wt,Pt))}function Ht(Pt,wt){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,wt.readable=!1,wt.emit("end"))}function qt(Pt,wt){for(var $t=0,Xt=Pt.length;$t<Xt;$t++)if(Pt[$t]===wt)return $t;return-1}It.prototype.read=function(Pt){ct("read",Pt),Pt=parseInt(Pt,10);var wt=this._readableState,$t=Pt;if(Pt!==0&&(wt.emittedReadable=!1),Pt===0&&wt.needReadable&&(wt.length>=wt.highWaterMark||wt.ended))return ct("read: emitReadable",wt.length,wt.ended),wt.length===0&&wt.ended?Ut(this):sn(this),null;if((Pt=nn(Pt,wt))===0&&wt.ended)return wt.length===0&&Ut(this),null;var Xt,un=wt.needReadable;return ct("need readable",un),(wt.length===0||wt.length-Pt<wt.highWaterMark)&&ct("length less than watermark",un=!0),wt.ended||wt.reading?ct("reading or ended",un=!1):un&&(ct("do read"),wt.reading=!0,wt.sync=!0,wt.length===0&&(wt.needReadable=!0),this._read(wt.highWaterMark),wt.sync=!1,wt.reading||(Pt=nn($t,wt))),(Xt=Pt>0?Gt(Pt,wt):null)===null?(wt.needReadable=!0,Pt=0):wt.length-=Pt,wt.length===0&&(wt.ended||(wt.needReadable=!0),$t!==Pt&&wt.ended&&Ut(this)),Xt!==null&&this.emit("data",Xt),Xt},It.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},It.prototype.pipe=function(Pt,wt){var $t=this,Xt=this._readableState;switch(Xt.pipesCount){case 0:Xt.pipes=Pt;break;case 1:Xt.pipes=[Xt.pipes,Pt];break;default:Xt.pipes.push(Pt)}Xt.pipesCount+=1,ct("pipe count=%d opts=%j",Xt.pipesCount,wt);var un=(!wt||wt.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?mn:An;function dn(Mn,Yn){ct("onunpipe"),Mn===$t&&Yn&&Yn.hasUnpiped===!1&&(Yn.hasUnpiped=!0,ct("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",an),Pt.removeListener("error",Qt),Pt.removeListener("unpipe",dn),$t.removeListener("end",mn),$t.removeListener("end",An),$t.removeListener("data",jt),en=!0,!Xt.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||an())}function mn(){ct("onend"),Pt.end()}Xt.endEmitted?et.nextTick(un):$t.once("end",un),Pt.on("unpipe",dn);var an=function(Mn){return function(){var Yn=Mn._readableState;ct("pipeOnDrain",Yn.awaitDrain),Yn.awaitDrain&&Yn.awaitDrain--,Yn.awaitDrain===0&&it(Mn,"data")&&(Yn.flowing=!0,Kt(Mn))}}($t);Pt.on("drain",an);var en=!1,Mt=!1;function jt(Mn){ct("ondata"),Mt=!1,Pt.write(Mn)!==!1||Mt||((Xt.pipesCount===1&&Xt.pipes===Pt||Xt.pipesCount>1&&qt(Xt.pipes,Pt)!==-1)&&!en&&(ct("false write response, pause",$t._readableState.awaitDrain),$t._readableState.awaitDrain++,Mt=!0),$t.pause())}function Qt(Mn){ct("onerror",Mn),An(),Pt.removeListener("error",Qt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),An()}function hn(){ct("onfinish"),Pt.removeListener("close",gn),An()}function An(){ct("unpipe"),$t.unpipe(Pt)}return $t.on("data",jt),function(Mn,Yn,Nr){if(typeof Mn.prependListener=="function")return Mn.prependListener(Yn,Nr);Mn._events&&Mn._events[Yn]?j(Mn._events[Yn])?Mn._events[Yn].unshift(Nr):Mn._events[Yn]=[Nr,Mn._events[Yn]]:Mn.on(Yn,Nr)}(Pt,"error",Qt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",$t),Xt.flowing||(ct("pipe resume"),$t.resume()),Pt},It.prototype.unpipe=function(Pt){var wt=this._readableState,$t={hasUnpiped:!1};if(wt.pipesCount===0)return this;if(wt.pipesCount===1)return Pt&&Pt!==wt.pipes||(Pt||(Pt=wt.pipes),wt.pipes=null,wt.pipesCount=0,wt.flowing=!1,Pt&&Pt.emit("unpipe",this,$t)),this;if(!Pt){var Xt=wt.pipes,un=wt.pipesCount;wt.pipes=null,wt.pipesCount=0,wt.flowing=!1;for(var dn=0;dn<un;dn++)Xt[dn].emit("unpipe",this,$t);return this}var mn=qt(wt.pipes,Pt);return mn===-1||(wt.pipes.splice(mn,1),wt.pipesCount-=1,wt.pipesCount===1&&(wt.pipes=wt.pipes[0]),Pt.emit("unpipe",this,$t)),this},It.prototype.on=function(Pt,wt){var $t=st.prototype.on.call(this,Pt,wt);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var Xt=this._readableState;Xt.endEmitted||Xt.readableListening||(Xt.readableListening=Xt.needReadable=!0,Xt.emittedReadable=!1,Xt.reading?Xt.length&&sn(this):et.nextTick(Ct,this))}return $t},It.prototype.addListener=It.prototype.on,It.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ct("resume"),Pt.flowing=!0,function(wt,$t){$t.resumeScheduled||($t.resumeScheduled=!0,et.nextTick(Vt,wt,$t))}(this,Pt)),this},It.prototype.pause=function(){return ct("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ct("pause"),this._readableState.flowing=!1,this.emit("pause")),this},It.prototype.wrap=function(Pt){var wt=this,$t=this._readableState,Xt=!1;for(var un in Pt.on("end",function(){if(ct("wrapped end"),$t.decoder&&!$t.ended){var mn=$t.decoder.end();mn&&mn.length&&wt.push(mn)}wt.push(null)}),Pt.on("data",function(mn){ct("wrapped data"),$t.decoder&&(mn=$t.decoder.write(mn)),$t.objectMode&&mn==null||($t.objectMode||mn&&mn.length)&&(wt.push(mn)||(Xt=!0,Pt.pause()))}),Pt)this[un]===void 0&&typeof Pt[un]=="function"&&(this[un]=function(mn){return function(){return Pt[mn].apply(Pt,arguments)}}(un));for(var dn=0;dn<Lt.length;dn++)Pt.on(Lt[dn],this.emit.bind(this,Lt[dn]));return this._read=function(mn){ct("wrapped _read",mn),Xt&&(Xt=!1,Pt.resume())},this},Object.defineProperty(It.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),It._fromList=Gt}).call(this,s(5),s(2))},function(i,o,s){i.exports=s(18).EventEmitter},function(i,o,s){var _=s(13);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o,s){i.exports=tt;var _=s(20),$=s(14);function et(st,ht){var vt=this._transformState;vt.transforming=!1;var ft=vt.writecb;if(!ft)return this.emit("error",new Error("write callback called multiple times"));vt.writechunk=null,vt.writecb=null,ht!=null&&this.push(ht),ft(st);var pt=this._readableState;pt.reading=!1,(pt.needReadable||pt.length<pt.highWaterMark)&&this._read(pt.highWaterMark)}function tt(st){if(!(this instanceof tt))return new tt(st);_.call(this,st),this._transformState={afterTransform:et.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,st&&(typeof st.transform=="function"&&(this._transform=st.transform),typeof st.flush=="function"&&(this._flush=st.flush)),this.on("prefinish",j)}function j(){var st=this;typeof this._flush=="function"?this._flush(function(ht,vt){it(st,ht,vt)}):it(this,null,null)}function it(st,ht,vt){if(ht)return st.emit("error",ht);if(vt!=null&&st.push(vt),st._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(st._transformState.transforming)throw new Error("Calling transform done when still transforming");return st.push(null)}$.inherits=s(7),$.inherits(tt,_),tt.prototype.push=function(st,ht){return this._transformState.needTransform=!1,_.prototype.push.call(this,st,ht)},tt.prototype._transform=function(st,ht,vt){throw new Error("_transform() is not implemented")},tt.prototype._write=function(st,ht,vt){var ft=this._transformState;if(ft.writecb=vt,ft.writechunk=st,ft.writeencoding=ht,!ft.transforming){var pt=this._readableState;(ft.needTransform||pt.needReadable||pt.length<pt.highWaterMark)&&this._read(pt.highWaterMark)}},tt.prototype._read=function(st){var ht=this._transformState;ht.writechunk!==null&&ht.writecb&&!ht.transforming?(ht.transforming=!0,this._transform(ht.writechunk,ht.writeencoding,ht.afterTransform)):ht.needTransform=!0},tt.prototype._destroy=function(st,ht){var vt=this;_.prototype._destroy.call(this,st,function(ft){ht(ft),vt.emit("close")})}},function(i,o,s){i.exports=s(44)},function(i,o,s){(function(_){var $=s(169);function et(xt,St){if(xt===St)return 0;for(var Nt=xt.length,Ct=St.length,Vt=0,Kt=Math.min(Nt,Ct);Vt<Kt;++Vt)if(xt[Vt]!==St[Vt]){Nt=xt[Vt],Ct=St[Vt];break}return Nt<Ct?-1:Ct<Nt?1:0}function tt(xt){return _.Buffer&&typeof _.Buffer.isBuffer=="function"?_.Buffer.isBuffer(xt):!(xt==null||!xt._isBuffer)}var j=s(10),it=Object.prototype.hasOwnProperty,st=Array.prototype.slice,ht=function(){}.name==="foo";function vt(xt){return Object.prototype.toString.call(xt)}function ft(xt){return!tt(xt)&&typeof _.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(xt):!!xt&&(xt instanceof DataView||!!(xt.buffer&&xt.buffer instanceof ArrayBuffer)))}var pt=i.exports=Tt,ct=/\s*function\s+([^\(\s]*)\s*/;function yt(xt){if(j.isFunction(xt)){if(ht)return xt.name;var St=xt.toString().match(ct);return St&&St[1]}}function Et(xt,St){return typeof xt=="string"?xt.length<St?xt:xt.slice(0,St):xt}function Ot(xt){if(ht||!j.isFunction(xt))return j.inspect(xt);var St=yt(xt);return"[Function"+(St?": "+St:"")+"]"}function Lt(xt,St,Nt,Ct,Vt){throw new pt.AssertionError({message:Nt,actual:xt,expected:St,operator:Ct,stackStartFunction:Vt})}function Tt(xt,St){xt||Lt(xt,!0,St,"==",pt.ok)}function It(xt,St,Nt,Ct){if(xt===St)return!0;if(tt(xt)&&tt(St))return et(xt,St)===0;if(j.isDate(xt)&&j.isDate(St))return xt.getTime()===St.getTime();if(j.isRegExp(xt)&&j.isRegExp(St))return xt.source===St.source&&xt.global===St.global&&xt.multiline===St.multiline&&xt.lastIndex===St.lastIndex&&xt.ignoreCase===St.ignoreCase;if(xt!==null&&typeof xt=="object"||St!==null&&typeof St=="object"){if(ft(xt)&&ft(St)&&vt(xt)===vt(St)&&!(xt instanceof Float32Array||xt instanceof Float64Array))return et(new Uint8Array(xt.buffer),new Uint8Array(St.buffer))===0;if(tt(xt)!==tt(St))return!1;var Vt=(Ct=Ct||{actual:[],expected:[]}).actual.indexOf(xt);return Vt!==-1&&Vt===Ct.expected.indexOf(St)||(Ct.actual.push(xt),Ct.expected.push(St),function(Kt,Gt,Ut,Ht){if(Kt==null||Gt==null)return!1;if(j.isPrimitive(Kt)||j.isPrimitive(Gt))return Kt===Gt;if(Ut&&Object.getPrototypeOf(Kt)!==Object.getPrototypeOf(Gt))return!1;var qt=mt(Kt),Pt=mt(Gt);if(qt&&!Pt||!qt&&Pt)return!1;if(qt)return Kt=st.call(Kt),Gt=st.call(Gt),It(Kt,Gt,Ut);var wt,$t,Xt=sn(Kt),un=sn(Gt);if(Xt.length!==un.length)return!1;for(Xt.sort(),un.sort(),$t=Xt.length-1;$t>=0;$t--)if(Xt[$t]!==un[$t])return!1;for($t=Xt.length-1;$t>=0;$t--)if(wt=Xt[$t],!It(Kt[wt],Gt[wt],Ut,Ht))return!1;return!0}(xt,St,Nt,Ct))}return Nt?xt===St:xt==St}function mt(xt){return Object.prototype.toString.call(xt)=="[object Arguments]"}function Bt(xt,St){if(!xt||!St)return!1;if(Object.prototype.toString.call(St)=="[object RegExp]")return St.test(xt);try{if(xt instanceof St)return!0}catch{}return!Error.isPrototypeOf(St)&&St.call({},xt)===!0}function nn(xt,St,Nt,Ct){var Vt;if(typeof St!="function")throw new TypeError('"block" argument must be a function');typeof Nt=="string"&&(Ct=Nt,Nt=null),Vt=function(Ut){var Ht;try{Ut()}catch(qt){Ht=qt}return Ht}(St),Ct=(Nt&&Nt.name?" ("+Nt.name+").":".")+(Ct?" "+Ct:"."),xt&&!Vt&&Lt(Vt,Nt,"Missing expected exception"+Ct);var Kt=typeof Ct=="string",Gt=!xt&&Vt&&!Nt;if((!xt&&j.isError(Vt)&&Kt&&Bt(Vt,Nt)||Gt)&&Lt(Vt,Nt,"Got unwanted exception"+Ct),xt&&Vt&&Nt&&!Bt(Vt,Nt)||!xt&&Vt)throw Vt}pt.AssertionError=function(xt){this.name="AssertionError",this.actual=xt.actual,this.expected=xt.expected,this.operator=xt.operator,xt.message?(this.message=xt.message,this.generatedMessage=!1):(this.message=function(Ut){return Et(Ot(Ut.actual),128)+" "+Ut.operator+" "+Et(Ot(Ut.expected),128)}(this),this.generatedMessage=!0);var St=xt.stackStartFunction||Lt;if(Error.captureStackTrace)Error.captureStackTrace(this,St);else{var Nt=new Error;if(Nt.stack){var Ct=Nt.stack,Vt=yt(St),Kt=Ct.indexOf(`
`+Vt);if(Kt>=0){var Gt=Ct.indexOf(`
`,Kt+1);Ct=Ct.substring(Gt+1)}this.stack=Ct}}},j.inherits(pt.AssertionError,Error),pt.fail=Lt,pt.ok=Tt,pt.equal=function(xt,St,Nt){xt!=St&&Lt(xt,St,Nt,"==",pt.equal)},pt.notEqual=function(xt,St,Nt){xt==St&&Lt(xt,St,Nt,"!=",pt.notEqual)},pt.deepEqual=function(xt,St,Nt){It(xt,St,!1)||Lt(xt,St,Nt,"deepEqual",pt.deepEqual)},pt.deepStrictEqual=function(xt,St,Nt){It(xt,St,!0)||Lt(xt,St,Nt,"deepStrictEqual",pt.deepStrictEqual)},pt.notDeepEqual=function(xt,St,Nt){It(xt,St,!1)&&Lt(xt,St,Nt,"notDeepEqual",pt.notDeepEqual)},pt.notDeepStrictEqual=function xt(St,Nt,Ct){It(St,Nt,!0)&&Lt(St,Nt,Ct,"notDeepStrictEqual",xt)},pt.strictEqual=function(xt,St,Nt){xt!==St&&Lt(xt,St,Nt,"===",pt.strictEqual)},pt.notStrictEqual=function(xt,St,Nt){xt===St&&Lt(xt,St,Nt,"!==",pt.notStrictEqual)},pt.throws=function(xt,St,Nt){nn(!0,xt,St,Nt)},pt.doesNotThrow=function(xt,St,Nt){nn(!1,xt,St,Nt)},pt.ifError=function(xt){if(xt)throw xt},pt.strict=$(function xt(St,Nt){St||Lt(St,!0,Nt,"==",xt)},pt,{equal:pt.strictEqual,deepEqual:pt.deepStrictEqual,notEqual:pt.notStrictEqual,notDeepEqual:pt.notDeepStrictEqual}),pt.strict.strict=pt.strict;var sn=Object.keys||function(xt){var St=[];for(var Nt in xt)it.call(xt,Nt)&&St.push(Nt);return St}}).call(this,s(5))},function(i,o,s){i.exports=function(_,$,et,tt){for(var j=65535&_|0,it=_>>>16&65535|0,st=0;et!==0;){et-=st=et>2e3?2e3:et;do it=it+(j=j+$[tt++]|0)|0;while(--st);j%=65521,it%=65521}return j|it<<16|0}},function(i,o,s){var _=function(){for(var $,et=[],tt=0;tt<256;tt++){$=tt;for(var j=0;j<8;j++)$=1&$?3988292384^$>>>1:$>>>1;et[tt]=$}return et}();i.exports=function($,et,tt,j){var it=_,st=j+tt;$^=-1;for(var ht=j;ht<st;ht++)$=$>>>8^it[255&($^et[ht])];return-1^$}},function(i,o,s){(function(_,$){var et;i.exports=St,St.ReadableState=xt,s(18).EventEmitter;var tt=function(an,en){return an.listeners(en).length},j=s(76),it=s(4).Buffer,st=_.Uint8Array||function(){},ht,vt=s(178);ht=vt&&vt.debuglog?vt.debuglog("stream"):function(){};var ft,pt,ct,yt=s(179),Et=s(77),Ot=s(78).getHighWaterMark,Lt=s(23).codes,Tt=Lt.ERR_INVALID_ARG_TYPE,It=Lt.ERR_STREAM_PUSH_AFTER_EOF,mt=Lt.ERR_METHOD_NOT_IMPLEMENTED,Bt=Lt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s(7)(St,j);var nn=Et.errorOrDestroy,sn=["error","close","destroy","pause","resume"];function xt(an,en,Mt){et=et||s(24),an=an||{},typeof Mt!="boolean"&&(Mt=en instanceof et),this.objectMode=!!an.objectMode,Mt&&(this.objectMode=this.objectMode||!!an.readableObjectMode),this.highWaterMark=Ot(this,an,"readableHighWaterMark",Mt),this.buffer=new yt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=an.emitClose!==!1,this.autoDestroy=!!an.autoDestroy,this.destroyed=!1,this.defaultEncoding=an.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,an.encoding&&(ft||(ft=s(19).StringDecoder),this.decoder=new ft(an.encoding),this.encoding=an.encoding)}function St(an){if(et=et||s(24),!(this instanceof St))return new St(an);var en=this instanceof et;this._readableState=new xt(an,this,en),this.readable=!0,an&&(typeof an.read=="function"&&(this._read=an.read),typeof an.destroy=="function"&&(this._destroy=an.destroy)),j.call(this)}function Nt(an,en,Mt,jt,Qt){ht("readableAddChunk",en);var gn,hn=an._readableState;if(en===null)hn.reading=!1,function(An,Mn){if(ht("onEofChunk"),!Mn.ended){if(Mn.decoder){var Yn=Mn.decoder.end();Yn&&Yn.length&&(Mn.buffer.push(Yn),Mn.length+=Mn.objectMode?1:Yn.length)}Mn.ended=!0,Mn.sync?Kt(An):(Mn.needReadable=!1,Mn.emittedReadable||(Mn.emittedReadable=!0,Gt(An)))}}(an,hn);else if(Qt||(gn=function(An,Mn){var Yn;Nr=Mn,it.isBuffer(Nr)||Nr instanceof st||typeof Mn=="string"||Mn===void 0||An.objectMode||(Yn=new Tt("chunk",["string","Buffer","Uint8Array"],Mn));var Nr;return Yn}(hn,en)),gn)nn(an,gn);else if(hn.objectMode||en&&en.length>0)if(typeof en=="string"||hn.objectMode||Object.getPrototypeOf(en)===it.prototype||(en=function(An){return it.from(An)}(en)),jt)hn.endEmitted?nn(an,new Bt):Ct(an,hn,en,!0);else if(hn.ended)nn(an,new It);else{if(hn.destroyed)return!1;hn.reading=!1,hn.decoder&&!Mt?(en=hn.decoder.write(en),hn.objectMode||en.length!==0?Ct(an,hn,en,!1):Ut(an,hn)):Ct(an,hn,en,!1)}else jt||(hn.reading=!1,Ut(an,hn));return!hn.ended&&(hn.length<hn.highWaterMark||hn.length===0)}function Ct(an,en,Mt,jt){en.flowing&&en.length===0&&!en.sync?(en.awaitDrain=0,an.emit("data",Mt)):(en.length+=en.objectMode?1:Mt.length,jt?en.buffer.unshift(Mt):en.buffer.push(Mt),en.needReadable&&Kt(an)),Ut(an,en)}Object.defineProperty(St.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(an){this._readableState&&(this._readableState.destroyed=an)}}),St.prototype.destroy=Et.destroy,St.prototype._undestroy=Et.undestroy,St.prototype._destroy=function(an,en){en(an)},St.prototype.push=function(an,en){var Mt,jt=this._readableState;return jt.objectMode?Mt=!0:typeof an=="string"&&((en=en||jt.defaultEncoding)!==jt.encoding&&(an=it.from(an,en),en=""),Mt=!0),Nt(this,an,en,!1,Mt)},St.prototype.unshift=function(an){return Nt(this,an,null,!0,!1)},St.prototype.isPaused=function(){return this._readableState.flowing===!1},St.prototype.setEncoding=function(an){ft||(ft=s(19).StringDecoder);var en=new ft(an);this._readableState.decoder=en,this._readableState.encoding=this._readableState.decoder.encoding;for(var Mt=this._readableState.buffer.head,jt="";Mt!==null;)jt+=en.write(Mt.data),Mt=Mt.next;return this._readableState.buffer.clear(),jt!==""&&this._readableState.buffer.push(jt),this._readableState.length=jt.length,this};function Vt(an,en){return an<=0||en.length===0&&en.ended?0:en.objectMode?1:an!=an?en.flowing&&en.length?en.buffer.head.data.length:en.length:(an>en.highWaterMark&&(en.highWaterMark=function(Mt){return Mt>=1073741824?Mt=1073741824:(Mt--,Mt|=Mt>>>1,Mt|=Mt>>>2,Mt|=Mt>>>4,Mt|=Mt>>>8,Mt|=Mt>>>16,Mt++),Mt}(an)),an<=en.length?an:en.ended?en.length:(en.needReadable=!0,0))}function Kt(an){var en=an._readableState;ht("emitReadable",en.needReadable,en.emittedReadable),en.needReadable=!1,en.emittedReadable||(ht("emitReadable",en.flowing),en.emittedReadable=!0,$.nextTick(Gt,an))}function Gt(an){var en=an._readableState;ht("emitReadable_",en.destroyed,en.length,en.ended),en.destroyed||!en.length&&!en.ended||(an.emit("readable"),en.emittedReadable=!1),en.needReadable=!en.flowing&&!en.ended&&en.length<=en.highWaterMark,$t(an)}function Ut(an,en){en.readingMore||(en.readingMore=!0,$.nextTick(Ht,an,en))}function Ht(an,en){for(;!en.reading&&!en.ended&&(en.length<en.highWaterMark||en.flowing&&en.length===0);){var Mt=en.length;if(ht("maybeReadMore read 0"),an.read(0),Mt===en.length)break}en.readingMore=!1}function qt(an){var en=an._readableState;en.readableListening=an.listenerCount("readable")>0,en.resumeScheduled&&!en.paused?en.flowing=!0:an.listenerCount("data")>0&&an.resume()}function Pt(an){ht("readable nexttick read 0"),an.read(0)}function wt(an,en){ht("resume",en.reading),en.reading||an.read(0),en.resumeScheduled=!1,an.emit("resume"),$t(an),en.flowing&&!en.reading&&an.read(0)}function $t(an){var en=an._readableState;for(ht("flow",en.flowing);en.flowing&&an.read()!==null;);}function Xt(an,en){return en.length===0?null:(en.objectMode?Mt=en.buffer.shift():!an||an>=en.length?(Mt=en.decoder?en.buffer.join(""):en.buffer.length===1?en.buffer.first():en.buffer.concat(en.length),en.buffer.clear()):Mt=en.buffer.consume(an,en.decoder),Mt);var Mt}function un(an){var en=an._readableState;ht("endReadable",en.endEmitted),en.endEmitted||(en.ended=!0,$.nextTick(dn,en,an))}function dn(an,en){if(ht("endReadableNT",an.endEmitted,an.length),!an.endEmitted&&an.length===0&&(an.endEmitted=!0,en.readable=!1,en.emit("end"),an.autoDestroy)){var Mt=en._writableState;(!Mt||Mt.autoDestroy&&Mt.finished)&&en.destroy()}}function mn(an,en){for(var Mt=0,jt=an.length;Mt<jt;Mt++)if(an[Mt]===en)return Mt;return-1}St.prototype.read=function(an){ht("read",an),an=parseInt(an,10);var en=this._readableState,Mt=an;if(an!==0&&(en.emittedReadable=!1),an===0&&en.needReadable&&((en.highWaterMark!==0?en.length>=en.highWaterMark:en.length>0)||en.ended))return ht("read: emitReadable",en.length,en.ended),en.length===0&&en.ended?un(this):Kt(this),null;if((an=Vt(an,en))===0&&en.ended)return en.length===0&&un(this),null;var jt,Qt=en.needReadable;return ht("need readable",Qt),(en.length===0||en.length-an<en.highWaterMark)&&ht("length less than watermark",Qt=!0),en.ended||en.reading?ht("reading or ended",Qt=!1):Qt&&(ht("do read"),en.reading=!0,en.sync=!0,en.length===0&&(en.needReadable=!0),this._read(en.highWaterMark),en.sync=!1,en.reading||(an=Vt(Mt,en))),(jt=an>0?Xt(an,en):null)===null?(en.needReadable=en.length<=en.highWaterMark,an=0):(en.length-=an,en.awaitDrain=0),en.length===0&&(en.ended||(en.needReadable=!0),Mt!==an&&en.ended&&un(this)),jt!==null&&this.emit("data",jt),jt},St.prototype._read=function(an){nn(this,new mt("_read()"))},St.prototype.pipe=function(an,en){var Mt=this,jt=this._readableState;switch(jt.pipesCount){case 0:jt.pipes=an;break;case 1:jt.pipes=[jt.pipes,an];break;default:jt.pipes.push(an)}jt.pipesCount+=1,ht("pipe count=%d opts=%j",jt.pipesCount,en);var Qt=(!en||en.end!==!1)&&an!==$.stdout&&an!==$.stderr?hn:zr;function gn(In,kn){ht("onunpipe"),In===Mt&&kn&&kn.hasUnpiped===!1&&(kn.hasUnpiped=!0,ht("cleanup"),an.removeListener("close",ro),an.removeListener("finish",to),an.removeListener("drain",An),an.removeListener("error",Nr),an.removeListener("unpipe",gn),Mt.removeListener("end",hn),Mt.removeListener("end",zr),Mt.removeListener("data",Yn),Mn=!0,!jt.awaitDrain||an._writableState&&!an._writableState.needDrain||An())}function hn(){ht("onend"),an.end()}jt.endEmitted?$.nextTick(Qt):Mt.once("end",Qt),an.on("unpipe",gn);var An=function(In){return function(){var kn=In._readableState;ht("pipeOnDrain",kn.awaitDrain),kn.awaitDrain&&kn.awaitDrain--,kn.awaitDrain===0&&tt(In,"data")&&(kn.flowing=!0,$t(In))}}(Mt);an.on("drain",An);var Mn=!1;function Yn(In){ht("ondata");var kn=an.write(In);ht("dest.write",kn),kn===!1&&((jt.pipesCount===1&&jt.pipes===an||jt.pipesCount>1&&mn(jt.pipes,an)!==-1)&&!Mn&&(ht("false write response, pause",jt.awaitDrain),jt.awaitDrain++),Mt.pause())}function Nr(In){ht("onerror",In),zr(),an.removeListener("error",Nr),tt(an,"error")===0&&nn(an,In)}function ro(){an.removeListener("finish",to),zr()}function to(){ht("onfinish"),an.removeListener("close",ro),zr()}function zr(){ht("unpipe"),Mt.unpipe(an)}return Mt.on("data",Yn),function(In,kn,Kn){if(typeof In.prependListener=="function")return In.prependListener(kn,Kn);In._events&&In._events[kn]?Array.isArray(In._events[kn])?In._events[kn].unshift(Kn):In._events[kn]=[Kn,In._events[kn]]:In.on(kn,Kn)}(an,"error",Nr),an.once("close",ro),an.once("finish",to),an.emit("pipe",Mt),jt.flowing||(ht("pipe resume"),Mt.resume()),an},St.prototype.unpipe=function(an){var en=this._readableState,Mt={hasUnpiped:!1};if(en.pipesCount===0)return this;if(en.pipesCount===1)return an&&an!==en.pipes||(an||(an=en.pipes),en.pipes=null,en.pipesCount=0,en.flowing=!1,an&&an.emit("unpipe",this,Mt)),this;if(!an){var jt=en.pipes,Qt=en.pipesCount;en.pipes=null,en.pipesCount=0,en.flowing=!1;for(var gn=0;gn<Qt;gn++)jt[gn].emit("unpipe",this,{hasUnpiped:!1});return this}var hn=mn(en.pipes,an);return hn===-1||(en.pipes.splice(hn,1),en.pipesCount-=1,en.pipesCount===1&&(en.pipes=en.pipes[0]),an.emit("unpipe",this,Mt)),this},St.prototype.on=function(an,en){var Mt=j.prototype.on.call(this,an,en),jt=this._readableState;return an==="data"?(jt.readableListening=this.listenerCount("readable")>0,jt.flowing!==!1&&this.resume()):an==="readable"&&(jt.endEmitted||jt.readableListening||(jt.readableListening=jt.needReadable=!0,jt.flowing=!1,jt.emittedReadable=!1,ht("on readable",jt.length,jt.reading),jt.length?Kt(this):jt.reading||$.nextTick(Pt,this))),Mt},St.prototype.addListener=St.prototype.on,St.prototype.removeListener=function(an,en){var Mt=j.prototype.removeListener.call(this,an,en);return an==="readable"&&$.nextTick(qt,this),Mt},St.prototype.removeAllListeners=function(an){var en=j.prototype.removeAllListeners.apply(this,arguments);return an!=="readable"&&an!==void 0||$.nextTick(qt,this),en},St.prototype.resume=function(){var an=this._readableState;return an.flowing||(ht("resume"),an.flowing=!an.readableListening,function(en,Mt){Mt.resumeScheduled||(Mt.resumeScheduled=!0,$.nextTick(wt,en,Mt))}(this,an)),an.paused=!1,this},St.prototype.pause=function(){return ht("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ht("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},St.prototype.wrap=function(an){var en=this,Mt=this._readableState,jt=!1;for(var Qt in an.on("end",function(){if(ht("wrapped end"),Mt.decoder&&!Mt.ended){var hn=Mt.decoder.end();hn&&hn.length&&en.push(hn)}en.push(null)}),an.on("data",function(hn){ht("wrapped data"),Mt.decoder&&(hn=Mt.decoder.write(hn)),Mt.objectMode&&hn==null||(Mt.objectMode||hn&&hn.length)&&(en.push(hn)||(jt=!0,an.pause()))}),an)this[Qt]===void 0&&typeof an[Qt]=="function"&&(this[Qt]=function(hn){return function(){return an[hn].apply(an,arguments)}}(Qt));for(var gn=0;gn<sn.length;gn++)an.on(sn[gn],this.emit.bind(this,sn[gn]));return this._read=function(hn){ht("wrapped _read",hn),jt&&(jt=!1,an.resume())},this},typeof Symbol=="function"&&(St.prototype[Symbol.asyncIterator]=function(){return pt===void 0&&(pt=s(181)),pt(this)}),Object.defineProperty(St.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(St.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(St.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(an){this._readableState&&(this._readableState.flowing=an)}}),St._fromList=Xt,Object.defineProperty(St.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(St.from=function(an,en){return ct===void 0&&(ct=s(182)),ct(St,an,en)})}).call(this,s(5),s(2))},function(i,o,s){i.exports=s(18).EventEmitter},function(i,o,s){(function(_){function $(j,it){tt(j,it),et(j)}function et(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function tt(j,it){j.emit("error",it)}i.exports={destroy:function(j,it){var st=this,ht=this._readableState&&this._readableState.destroyed,vt=this._writableState&&this._writableState.destroyed;return ht||vt?(it?it(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(tt,this,j)):_.nextTick(tt,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(ft){!it&&ft?st._writableState?st._writableState.errorEmitted?_.nextTick(et,st):(st._writableState.errorEmitted=!0,_.nextTick($,st,ft)):_.nextTick($,st,ft):it?(_.nextTick(et,st),it(ft)):_.nextTick(et,st)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(j,it){var st=j._readableState,ht=j._writableState;st&&st.autoDestroy||ht&&ht.autoDestroy?j.destroy(it):j.emit("error",it)}}}).call(this,s(2))},function(i,o,s){var _=s(23).codes.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function($,et,tt,j){var it=function(st,ht,vt){return st.highWaterMark!=null?st.highWaterMark:ht?st[vt]:null}(et,j,tt);if(it!=null){if(!isFinite(it)||Math.floor(it)!==it||it<0)throw new _(j?tt:"highWaterMark",it);return Math.floor(it)}return $.objectMode?16:16384}}},function(i,o,s){(function(_,$){function et(Ht){var qt=this;this.next=null,this.entry=null,this.finish=function(){(function(Pt,wt,$t){var Xt=Pt.entry;for(Pt.entry=null;Xt;){var un=Xt.callback;wt.pendingcb--,un($t),Xt=Xt.next}wt.corkedRequestsFree.next=Pt})(qt,Ht)}}var tt;i.exports=St,St.WritableState=xt;var j={deprecate:s(39)},it=s(76),st=s(4).Buffer,ht=_.Uint8Array||function(){},vt,ft=s(77),pt=s(78).getHighWaterMark,ct=s(23).codes,yt=ct.ERR_INVALID_ARG_TYPE,Et=ct.ERR_METHOD_NOT_IMPLEMENTED,Ot=ct.ERR_MULTIPLE_CALLBACK,Lt=ct.ERR_STREAM_CANNOT_PIPE,Tt=ct.ERR_STREAM_DESTROYED,It=ct.ERR_STREAM_NULL_VALUES,mt=ct.ERR_STREAM_WRITE_AFTER_END,Bt=ct.ERR_UNKNOWN_ENCODING,nn=ft.errorOrDestroy;function sn(){}function xt(Ht,qt,Pt){tt=tt||s(24),Ht=Ht||{},typeof Pt!="boolean"&&(Pt=qt instanceof tt),this.objectMode=!!Ht.objectMode,Pt&&(this.objectMode=this.objectMode||!!Ht.writableObjectMode),this.highWaterMark=pt(this,Ht,"writableHighWaterMark",Pt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var wt=Ht.decodeStrings===!1;this.decodeStrings=!wt,this.defaultEncoding=Ht.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($t){(function(Xt,un){var dn=Xt._writableState,mn=dn.sync,an=dn.writecb;if(typeof an!="function")throw new Ot;if(function(Mt){Mt.writing=!1,Mt.writecb=null,Mt.length-=Mt.writelen,Mt.writelen=0}(dn),un)(function(Mt,jt,Qt,gn,hn){--jt.pendingcb,Qt?($.nextTick(hn,gn),$.nextTick(Ut,Mt,jt),Mt._writableState.errorEmitted=!0,nn(Mt,gn)):(hn(gn),Mt._writableState.errorEmitted=!0,nn(Mt,gn),Ut(Mt,jt))})(Xt,dn,mn,un,an);else{var en=Kt(dn)||Xt.destroyed;en||dn.corked||dn.bufferProcessing||!dn.bufferedRequest||Vt(Xt,dn),mn?$.nextTick(Ct,Xt,dn,en,an):Ct(Xt,dn,en,an)}})(qt,$t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ht.emitClose!==!1,this.autoDestroy=!!Ht.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new et(this)}function St(Ht){var qt=this instanceof(tt=tt||s(24));if(!qt&&!vt.call(St,this))return new St(Ht);this._writableState=new xt(Ht,this,qt),this.writable=!0,Ht&&(typeof Ht.write=="function"&&(this._write=Ht.write),typeof Ht.writev=="function"&&(this._writev=Ht.writev),typeof Ht.destroy=="function"&&(this._destroy=Ht.destroy),typeof Ht.final=="function"&&(this._final=Ht.final)),it.call(this)}function Nt(Ht,qt,Pt,wt,$t,Xt,un){qt.writelen=wt,qt.writecb=un,qt.writing=!0,qt.sync=!0,qt.destroyed?qt.onwrite(new Tt("write")):Pt?Ht._writev($t,qt.onwrite):Ht._write($t,Xt,qt.onwrite),qt.sync=!1}function Ct(Ht,qt,Pt,wt){Pt||function($t,Xt){Xt.length===0&&Xt.needDrain&&(Xt.needDrain=!1,$t.emit("drain"))}(Ht,qt),qt.pendingcb--,wt(),Ut(Ht,qt)}function Vt(Ht,qt){qt.bufferProcessing=!0;var Pt=qt.bufferedRequest;if(Ht._writev&&Pt&&Pt.next){var wt=qt.bufferedRequestCount,$t=new Array(wt),Xt=qt.corkedRequestsFree;Xt.entry=Pt;for(var un=0,dn=!0;Pt;)$t[un]=Pt,Pt.isBuf||(dn=!1),Pt=Pt.next,un+=1;$t.allBuffers=dn,Nt(Ht,qt,!0,qt.length,$t,"",Xt.finish),qt.pendingcb++,qt.lastBufferedRequest=null,Xt.next?(qt.corkedRequestsFree=Xt.next,Xt.next=null):qt.corkedRequestsFree=new et(qt),qt.bufferedRequestCount=0}else{for(;Pt;){var mn=Pt.chunk,an=Pt.encoding,en=Pt.callback;if(Nt(Ht,qt,!1,qt.objectMode?1:mn.length,mn,an,en),Pt=Pt.next,qt.bufferedRequestCount--,qt.writing)break}Pt===null&&(qt.lastBufferedRequest=null)}qt.bufferedRequest=Pt,qt.bufferProcessing=!1}function Kt(Ht){return Ht.ending&&Ht.length===0&&Ht.bufferedRequest===null&&!Ht.finished&&!Ht.writing}function Gt(Ht,qt){Ht._final(function(Pt){qt.pendingcb--,Pt&&nn(Ht,Pt),qt.prefinished=!0,Ht.emit("prefinish"),Ut(Ht,qt)})}function Ut(Ht,qt){var Pt=Kt(qt);if(Pt&&(function($t,Xt){Xt.prefinished||Xt.finalCalled||(typeof $t._final!="function"||Xt.destroyed?(Xt.prefinished=!0,$t.emit("prefinish")):(Xt.pendingcb++,Xt.finalCalled=!0,$.nextTick(Gt,$t,Xt)))}(Ht,qt),qt.pendingcb===0&&(qt.finished=!0,Ht.emit("finish"),qt.autoDestroy))){var wt=Ht._readableState;(!wt||wt.autoDestroy&&wt.endEmitted)&&Ht.destroy()}return Pt}s(7)(St,it),xt.prototype.getBuffer=function(){for(var Ht=this.bufferedRequest,qt=[];Ht;)qt.push(Ht),Ht=Ht.next;return qt},function(){try{Object.defineProperty(xt.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(vt=Function.prototype[Symbol.hasInstance],Object.defineProperty(St,Symbol.hasInstance,{value:function(Ht){return!!vt.call(this,Ht)||this===St&&Ht&&Ht._writableState instanceof xt}})):vt=function(Ht){return Ht instanceof this},St.prototype.pipe=function(){nn(this,new Lt)},St.prototype.write=function(Ht,qt,Pt){var wt,$t=this._writableState,Xt=!1,un=!$t.objectMode&&(wt=Ht,st.isBuffer(wt)||wt instanceof ht);return un&&!st.isBuffer(Ht)&&(Ht=function(dn){return st.from(dn)}(Ht)),typeof qt=="function"&&(Pt=qt,qt=null),un?qt="buffer":qt||(qt=$t.defaultEncoding),typeof Pt!="function"&&(Pt=sn),$t.ending?function(dn,mn){var an=new mt;nn(dn,an),$.nextTick(mn,an)}(this,Pt):(un||function(dn,mn,an,en){var Mt;return an===null?Mt=new It:typeof an=="string"||mn.objectMode||(Mt=new yt("chunk",["string","Buffer"],an)),!Mt||(nn(dn,Mt),$.nextTick(en,Mt),!1)}(this,$t,Ht,Pt))&&($t.pendingcb++,Xt=function(dn,mn,an,en,Mt,jt){if(!an){var Qt=function(Mn,Yn,Nr){return Mn.objectMode||Mn.decodeStrings===!1||typeof Yn!="string"||(Yn=st.from(Yn,Nr)),Yn}(mn,en,Mt);en!==Qt&&(an=!0,Mt="buffer",en=Qt)}var gn=mn.objectMode?1:en.length;mn.length+=gn;var hn=mn.length<mn.highWaterMark;if(hn||(mn.needDrain=!0),mn.writing||mn.corked){var An=mn.lastBufferedRequest;mn.lastBufferedRequest={chunk:en,encoding:Mt,isBuf:an,callback:jt,next:null},An?An.next=mn.lastBufferedRequest:mn.bufferedRequest=mn.lastBufferedRequest,mn.bufferedRequestCount+=1}else Nt(dn,mn,!1,gn,en,Mt,jt);return hn}(this,$t,un,Ht,qt,Pt)),Xt},St.prototype.cork=function(){this._writableState.corked++},St.prototype.uncork=function(){var Ht=this._writableState;Ht.corked&&(Ht.corked--,Ht.writing||Ht.corked||Ht.bufferProcessing||!Ht.bufferedRequest||Vt(this,Ht))},St.prototype.setDefaultEncoding=function(Ht){if(typeof Ht=="string"&&(Ht=Ht.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ht+"").toLowerCase())>-1))throw new Bt(Ht);return this._writableState.defaultEncoding=Ht,this},Object.defineProperty(St.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(St.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),St.prototype._write=function(Ht,qt,Pt){Pt(new Et("_write()"))},St.prototype._writev=null,St.prototype.end=function(Ht,qt,Pt){var wt=this._writableState;return typeof Ht=="function"?(Pt=Ht,Ht=null,qt=null):typeof qt=="function"&&(Pt=qt,qt=null),Ht!=null&&this.write(Ht,qt),wt.corked&&(wt.corked=1,this.uncork()),wt.ending||function($t,Xt,un){Xt.ending=!0,Ut($t,Xt),un&&(Xt.finished?$.nextTick(un):$t.once("finish",un)),Xt.ended=!0,$t.writable=!1}(this,wt,Pt),this},Object.defineProperty(St.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(St.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ht){this._writableState&&(this._writableState.destroyed=Ht)}}),St.prototype.destroy=ft.destroy,St.prototype._undestroy=ft.undestroy,St.prototype._destroy=function(Ht,qt){qt(Ht)}}).call(this,s(5),s(2))},function(i,o,s){i.exports=ht;var _=s(23).codes,$=_.ERR_METHOD_NOT_IMPLEMENTED,et=_.ERR_MULTIPLE_CALLBACK,tt=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=_.ERR_TRANSFORM_WITH_LENGTH_0,it=s(24);function st(pt,ct){var yt=this._transformState;yt.transforming=!1;var Et=yt.writecb;if(Et===null)return this.emit("error",new et);yt.writechunk=null,yt.writecb=null,ct!=null&&this.push(ct),Et(pt);var Ot=this._readableState;Ot.reading=!1,(Ot.needReadable||Ot.length<Ot.highWaterMark)&&this._read(Ot.highWaterMark)}function ht(pt){if(!(this instanceof ht))return new ht(pt);it.call(this,pt),this._transformState={afterTransform:st.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,pt&&(typeof pt.transform=="function"&&(this._transform=pt.transform),typeof pt.flush=="function"&&(this._flush=pt.flush)),this.on("prefinish",vt)}function vt(){var pt=this;typeof this._flush!="function"||this._readableState.destroyed?ft(this,null,null):this._flush(function(ct,yt){ft(pt,ct,yt)})}function ft(pt,ct,yt){if(ct)return pt.emit("error",ct);if(yt!=null&&pt.push(yt),pt._writableState.length)throw new j;if(pt._transformState.transforming)throw new tt;return pt.push(null)}s(7)(ht,it),ht.prototype.push=function(pt,ct){return this._transformState.needTransform=!1,it.prototype.push.call(this,pt,ct)},ht.prototype._transform=function(pt,ct,yt){yt(new $("_transform()"))},ht.prototype._write=function(pt,ct,yt){var Et=this._transformState;if(Et.writecb=yt,Et.writechunk=pt,Et.writeencoding=ct,!Et.transforming){var Ot=this._readableState;(Et.needTransform||Ot.needReadable||Ot.length<Ot.highWaterMark)&&this._read(Ot.highWaterMark)}},ht.prototype._read=function(pt){var ct=this._transformState;ct.writechunk===null||ct.transforming?ct.needTransform=!0:(ct.transforming=!0,this._transform(ct.writechunk,ct.writeencoding,ct.afterTransform))},ht.prototype._destroy=function(pt,ct){it.prototype._destroy.call(this,pt,function(yt){ct(yt)})}},function(i,o,s){(function(_){var $=s(189),et=s(83),tt=s(191),j=s(192),it=s(46),st=o;st.request=function(ht,vt){ht=typeof ht=="string"?it.parse(ht):tt(ht);var ft=_.location.protocol.search(/^https?:$/)===-1?"http:":"",pt=ht.protocol||ft,ct=ht.hostname||ht.host,yt=ht.port,Et=ht.path||"/";ct&&ct.indexOf(":")!==-1&&(ct="["+ct+"]"),ht.url=(ct?pt+"//"+ct:"")+(yt?":"+yt:"")+Et,ht.method=(ht.method||"GET").toUpperCase(),ht.headers=ht.headers||{};var Ot=new $(ht);return vt&&Ot.on("response",vt),Ot},st.get=function(ht,vt){var ft=st.request(ht,vt);return ft.end(),ft},st.ClientRequest=$,st.IncomingMessage=et.IncomingMessage,st.Agent=function(){},st.Agent.defaultMaxSockets=4,st.globalAgent=new st.Agent,st.STATUS_CODES=j,st.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,s(5))},function(i,o,s){(function(_){o.fetch=st(_.fetch)&&st(_.ReadableStream),o.writableStream=st(_.WritableStream),o.abortController=st(_.AbortController),o.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),o.blobConstructor=!0}catch{}var $;function et(){if($!==void 0)return $;if(_.XMLHttpRequest){$=new _.XMLHttpRequest;try{$.open("GET",_.XDomainRequest?"/":"https://example.com")}catch{$=null}}else $=null;return $}function tt(ht){var vt=et();if(!vt)return!1;try{return vt.responseType=ht,vt.responseType===ht}catch{}return!1}var j=_.ArrayBuffer!==void 0,it=j&&st(_.ArrayBuffer.prototype.slice);function st(ht){return typeof ht=="function"}o.arraybuffer=o.fetch||j&&tt("arraybuffer"),o.msstream=!o.fetch&&it&&tt("ms-stream"),o.mozchunkedarraybuffer=!o.fetch&&j&&tt("moz-chunked-arraybuffer"),o.overrideMimeType=o.fetch||!!et()&&st(et().overrideMimeType),o.vbArray=st(_.VBArray),$=null}).call(this,s(5))},function(i,o,s){(function(_,$,et){var tt=s(82),j=s(7),it=s(27),st=o.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ht=o.IncomingMessage=function(vt,ft,pt,ct){var yt=this;if(it.Readable.call(yt),yt._mode=pt,yt.headers={},yt.rawHeaders=[],yt.trailers={},yt.rawTrailers=[],yt.on("end",function(){_.nextTick(function(){yt.emit("close")})}),pt==="fetch"){if(yt._fetchResponse=ft,yt.url=ft.url,yt.statusCode=ft.status,yt.statusMessage=ft.statusText,ft.headers.forEach(function(It,mt){yt.headers[mt.toLowerCase()]=It,yt.rawHeaders.push(mt,It)}),tt.writableStream){var Et=new WritableStream({write:function(It){return new Promise(function(mt,Bt){yt._destroyed?Bt():yt.push(new $(It))?mt():yt._resumeFetch=mt})},close:function(){et.clearTimeout(ct),yt._destroyed||yt.push(null)},abort:function(It){yt._destroyed||yt.emit("error",It)}});try{return void ft.body.pipeTo(Et).catch(function(It){et.clearTimeout(ct),yt._destroyed||yt.emit("error",It)})}catch{}}var Ot=ft.body.getReader();(function It(){Ot.read().then(function(mt){if(!yt._destroyed){if(mt.done)return et.clearTimeout(ct),void yt.push(null);yt.push(new $(mt.value)),It()}}).catch(function(mt){et.clearTimeout(ct),yt._destroyed||yt.emit("error",mt)})})()}else if(yt._xhr=vt,yt._pos=0,yt.url=vt.responseURL,yt.statusCode=vt.status,yt.statusMessage=vt.statusText,vt.getAllResponseHeaders().split(/\r?\n/).forEach(function(It){var mt=It.match(/^([^:]+):\s*(.*)/);if(mt){var Bt=mt[1].toLowerCase();Bt==="set-cookie"?(yt.headers[Bt]===void 0&&(yt.headers[Bt]=[]),yt.headers[Bt].push(mt[2])):yt.headers[Bt]!==void 0?yt.headers[Bt]+=", "+mt[2]:yt.headers[Bt]=mt[2],yt.rawHeaders.push(mt[1],mt[2])}}),yt._charset="x-user-defined",!tt.overrideMimeType){var Lt=yt.rawHeaders["mime-type"];if(Lt){var Tt=Lt.match(/;\s*charset=([^;])(;|$)/);Tt&&(yt._charset=Tt[1].toLowerCase())}yt._charset||(yt._charset="utf-8")}};j(ht,it.Readable),ht.prototype._read=function(){var vt=this._resumeFetch;vt&&(this._resumeFetch=null,vt())},ht.prototype._onXHRProgress=function(){var vt=this,ft=vt._xhr,pt=null;switch(vt._mode){case"text:vbarray":if(ft.readyState!==st.DONE)break;try{pt=new et.VBArray(ft.responseBody).toArray()}catch{}if(pt!==null){vt.push(new $(pt));break}case"text":try{pt=ft.responseText}catch{vt._mode="text:vbarray";break}if(pt.length>vt._pos){var ct=pt.substr(vt._pos);if(vt._charset==="x-user-defined"){for(var yt=new $(ct.length),Et=0;Et<ct.length;Et++)yt[Et]=255&ct.charCodeAt(Et);vt.push(yt)}else vt.push(ct,vt._charset);vt._pos=pt.length}break;case"arraybuffer":if(ft.readyState!==st.DONE||!ft.response)break;pt=ft.response,vt.push(new $(new Uint8Array(pt)));break;case"moz-chunked-arraybuffer":if(pt=ft.response,ft.readyState!==st.LOADING||!pt)break;vt.push(new $(new Uint8Array(pt)));break;case"ms-stream":if(pt=ft.response,ft.readyState!==st.LOADING)break;var Ot=new et.MSStreamReader;Ot.onprogress=function(){Ot.result.byteLength>vt._pos&&(vt.push(new $(new Uint8Array(Ot.result.slice(vt._pos)))),vt._pos=Ot.result.byteLength)},Ot.onload=function(){vt.push(null)},Ot.readAsArrayBuffer(pt)}vt._xhr.readyState===st.DONE&&vt._mode!=="ms-stream"&&vt.push(null)}}).call(this,s(2),s(4).Buffer,s(5))},function(i,o,s){const _=$=>$!==null&&typeof $=="object"&&typeof $.pipe=="function";_.writable=$=>_($)&&$.writable!==!1&&typeof $._write=="function"&&typeof $._writableState=="object",_.readable=$=>_($)&&$.readable!==!1&&typeof $._read=="function"&&typeof $._readableState=="object",_.duplex=$=>_.writable($)&&_.readable($),_.transform=$=>_.duplex($)&&typeof $._transform=="function"&&typeof $._transformState=="object",i.exports=_},function(i,o,s){function _(yt){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function $(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function et(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&tt(yt,Et)}function tt(yt,Et){return(tt=Object.setPrototypeOf||function(Ot,Lt){return Ot.__proto__=Lt,Ot})(yt,Et)}function j(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Ot,Lt=st(yt);if(Et){var Tt=st(this).constructor;Ot=Reflect.construct(Lt,arguments,Tt)}else Ot=Lt.apply(this,arguments);return it(this,Ot)}}function it(yt,Et){return!Et||_(Et)!=="object"&&typeof Et!="function"?function(Ot){if(Ot===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ot}(yt):Et}function st(yt){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var ht=s(3).LEVEL,vt=s(47),ft=s(201),pt=s(33)("winston:create-logger");function ct(yt){return"is"+yt.charAt(0).toUpperCase()+yt.slice(1)+"Enabled"}i.exports=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt.levels=yt.levels||vt.npm.levels;var Et=function(Lt){et(It,Lt);var Tt=j(It);function It(mt){return $(this,It),Tt.call(this,mt)}return It}(ft),Ot=new Et(yt);return Object.keys(yt.levels).forEach(function(Lt){pt('Define prototype method for "%s"',Lt),Lt!=="log"?(Et.prototype[Lt]=function(){for(var Tt=this||Ot,It=arguments.length,mt=new Array(It),Bt=0;Bt<It;Bt++)mt[Bt]=arguments[Bt];if(mt.length===1){var nn=mt[0],sn=nn&&nn.message&&nn||{message:nn};return sn.level=sn[ht]=Lt,Tt._addDefaultMeta(sn),Tt.write(sn),this||Ot}return mt.length===0?(Tt.log(Lt,""),Tt):Tt.log.apply(Tt,[Lt].concat(mt))},Et.prototype[ct(Lt)]=function(){return(this||Ot).isLevelEnabled(Lt)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')}),Ot}},function(i,o,s){(function(_){function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(15),tt=s(48),j=s(33)("winston:exception"),it=s(87),st=s(88),ht=s(89);i.exports=function(){function vt(ct){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,vt),!ct)throw new Error("Logger is required to handle exceptions");this.logger=ct,this.handlers=new Map}var ft,pt;return ft=vt,(pt=[{key:"handle",value:function(){for(var ct=this,yt=arguments.length,Et=new Array(yt),Ot=0;Ot<yt;Ot++)Et[Ot]=arguments[Ot];Et.forEach(function(Lt){if(Array.isArray(Lt))return Lt.forEach(function(Tt){return ct._addHandler(Tt)});ct._addHandler(Lt)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),_.on("uncaughtException",this.catcher))}},{key:"unhandle",value:function(){var ct=this;this.catcher&&(_.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ct.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ct){var yt=ct.message;return yt||typeof ct!="string"||(yt=ct),{error:ct,level:"error",message:["uncaughtException: ".concat(yt||"(no error message)"),ct.stack||"  No stack trace"].join(`
`),stack:ct.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ct)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ct){return(ct?st.parse(ct):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ct){if(!this.handlers.has(ct)){ct.handleExceptions=!0;var yt=new ht(ct);this.handlers.set(ct,yt),this.logger.pipe(yt)}}},{key:"_uncaughtException",value:function(ct){var yt,Et=this.getAllInfo(ct),Ot=this._getExceptionHandlers(),Lt=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ct):this.logger.exitOnError;function Tt(){j("doExit",Lt),j("process._exiting",_._exiting),Lt&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Ot.length&&Lt&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),Lt=!1),!Ot||Ot.length===0)return _.nextTick(Tt);tt(Ot,function(It,mt){var Bt=it(mt),nn=It.transport||It;function sn(xt){return function(){j(xt),Bt()}}nn._ending=!0,nn.once("finish",sn("finished")),nn.once("error",sn("error"))},function(){return Lt&&Tt()}),this.logger.log(Et),Lt&&(yt=setTimeout(Tt,3e3))}},{key:"_getExceptionHandlers",value:function(){return this.logger.transports.filter(function(ct){return(ct.transport||ct).handleExceptions})}}])&&$(ft.prototype,pt),vt}()}).call(this,s(2))},function(i,o,s){var _=s(204);i.exports=function($){var et,tt=0;function j(){return tt||(tt=1,et=$.apply(this,arguments),$=null),et}return j.displayName=_($),j}},function(i,o){function s(_){for(var $ in _)this[$]=_[$]}o.get=function(_){var $=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var et={},tt=Error.prepareStackTrace;Error.prepareStackTrace=function(it,st){return st},Error.captureStackTrace(et,_||o.get);var j=et.stack;return Error.prepareStackTrace=tt,Error.stackTraceLimit=$,j},o.parse=function(_){if(!_.stack)return[];var $=this;return _.stack.split(`
`).slice(1).map(function(et){if(et.match(/^\s*[-]{4,}$/))return $._createParsedCallSite({fileName:et,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var tt=et.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(tt){var j=null,it=null,st=null,ht=null,vt=null,ft=tt[5]==="native";if(tt[1]){var pt=(st=tt[1]).lastIndexOf(".");if(st[pt-1]=="."&&pt--,pt>0){j=st.substr(0,pt),it=st.substr(pt+1);var ct=j.indexOf(".Module");ct>0&&(st=st.substr(ct+1),j=j.substr(0,ct))}ht=null}it&&(ht=j,vt=it),it==="<anonymous>"&&(vt=null,st=null);var yt={fileName:tt[2]||null,lineNumber:parseInt(tt[3],10)||null,functionName:st,typeName:ht,methodName:vt,columnNumber:parseInt(tt[4],10)||null,native:ft};return $._createParsedCallSite(yt)}}).filter(function(et){return!!et})},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach(function(_){s.prototype[_]=null,s.prototype["get"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),["topLevel","eval","native","constructor"].forEach(function(_){s.prototype[_]=!1,s.prototype["is"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),o._createParsedCallSite=function(_){return new s(_)}},function(i,o,s){function _(ht){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vt){return typeof vt}:function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt})(ht)}function $(ht,vt){for(var ft=0;ft<vt.length;ft++){var pt=vt[ft];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(ht,pt.key,pt)}}function et(ht,vt){return(et=Object.setPrototypeOf||function(ft,pt){return ft.__proto__=pt,ft})(ht,vt)}function tt(ht){var vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var ft,pt=it(ht);if(vt){var ct=it(this).constructor;ft=Reflect.construct(pt,arguments,ct)}else ft=pt.apply(this,arguments);return j(this,ft)}}function j(ht,vt){return!vt||_(vt)!=="object"&&typeof vt!="function"?function(ft){if(ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft}(ht):vt}function it(ht){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(vt){return vt.__proto__||Object.getPrototypeOf(vt)})(ht)}var st=s(28).Writable;i.exports=function(ht){(function(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&et(yt,Et)})(ct,ht);var vt,ft,pt=tt(ct);function ct(yt){var Et;if(function(Ot,Lt){if(!(Ot instanceof Lt))throw new TypeError("Cannot call a class as a function")}(this,ct),Et=pt.call(this,{objectMode:!0}),!yt)throw new Error("ExceptionStream requires a TransportStream instance.");return Et.handleExceptions=!0,Et.transport=yt,Et}return vt=ct,(ft=[{key:"_write",value:function(yt,Et,Ot){return yt.exception?this.transport.log(yt,Ot):(Ot(),!0)}}])&&$(vt.prototype,ft),ct}(st)},function(i,o,s){(function(_){function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(15),tt=s(48),j=s(33)("winston:rejection"),it=s(87),st=s(88),ht=s(89);i.exports=function(){function vt(ct){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,vt),!ct)throw new Error("Logger is required to handle rejections");this.logger=ct,this.handlers=new Map}var ft,pt;return ft=vt,(pt=[{key:"handle",value:function(){for(var ct=this,yt=arguments.length,Et=new Array(yt),Ot=0;Ot<yt;Ot++)Et[Ot]=arguments[Ot];Et.forEach(function(Lt){if(Array.isArray(Lt))return Lt.forEach(function(Tt){return ct._addHandler(Tt)});ct._addHandler(Lt)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),_.on("unhandledRejection",this.catcher))}},{key:"unhandle",value:function(){var ct=this;this.catcher&&(_.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ct.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ct){var yt=ct.message;return yt||typeof ct!="string"||(yt=ct),{error:ct,level:"error",message:["unhandledRejection: ".concat(yt||"(no error message)"),ct.stack||"  No stack trace"].join(`
`),stack:ct.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ct)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ct){return(ct?st.parse(ct):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ct){if(!this.handlers.has(ct)){ct.handleRejections=!0;var yt=new ht(ct);this.handlers.set(ct,yt),this.logger.pipe(yt)}}},{key:"_unhandledRejection",value:function(ct){var yt,Et=this.getAllInfo(ct),Ot=this._getRejectionHandlers(),Lt=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ct):this.logger.exitOnError;function Tt(){j("doExit",Lt),j("process._exiting",_._exiting),Lt&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Ot.length&&Lt&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),Lt=!1),!Ot||Ot.length===0)return _.nextTick(Tt);tt(Ot,function(It,mt){var Bt=it(mt),nn=It.transport||It;function sn(xt){return function(){j(xt),Bt()}}nn._ending=!0,nn.once("finish",sn("finished")),nn.once("error",sn("error"))},function(){return Lt&&Tt()}),this.logger.log(Et),Lt&&(yt=setTimeout(Tt,3e3))}},{key:"_getRejectionHandlers",value:function(){return this.logger.transports.filter(function(ct){return(ct.transport||ct).handleRejections})}}])&&$(ft.prototype,pt),vt}()}).call(this,s(2))},function(i,o,s){const _=s(50);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive integer");return et}},function(i,o,s){const _=s(46).URL,$=s(34);i.exports=function(et){const tt=$(et);try{return new _(tt)}catch{throw new Error("should be a valid URL")}}},function(i,o,s){const _={};_.web=s(21),s(94);const $={v1:{}};$.v1.signaling={},$.v1.signaling.api=s(8),$.v1.signaling.api.SignalingClient=function(ft,pt,ct){ct||(ct={}),ct.format="text",this.client_=new _.web.GrpcWebClientBase(ct),this.hostname_=ft},$.v1.signaling.api.SignalingPromiseClient=function(ft,pt,ct){ct||(ct={}),ct.format="text",this.client_=new _.web.GrpcWebClientBase(ct),this.hostname_=ft};const et=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/CreatePeer",_.web.MethodType.UNARY,$.v1.signaling.api.CreatePeerRequest,$.v1.signaling.api.CreatePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.CreatePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.createPeer=function(ft,pt,ct){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",ft,pt||{},et,ct)},$.v1.signaling.api.SignalingPromiseClient.prototype.createPeer=function(ft,pt){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",ft,pt||{},et)};const tt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/DeletePeer",_.web.MethodType.UNARY,$.v1.signaling.api.DeletePeerRequest,$.v1.signaling.api.DeletePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.DeletePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.deletePeer=function(ft,pt,ct){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",ft,pt||{},tt,ct)},$.v1.signaling.api.SignalingPromiseClient.prototype.deletePeer=function(ft,pt){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",ft,pt||{},tt)};const j=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/RefreshPeer",_.web.MethodType.UNARY,$.v1.signaling.api.RefreshPeerRequest,$.v1.signaling.api.RefreshPeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.RefreshPeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.refreshPeer=function(ft,pt,ct){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",ft,pt||{},j,ct)},$.v1.signaling.api.SignalingPromiseClient.prototype.refreshPeer=function(ft,pt){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",ft,pt||{},j)};const it=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetPeers",_.web.MethodType.UNARY,$.v1.signaling.api.GetPeersRequest,$.v1.signaling.api.GetPeersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetPeersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getPeers=function(ft,pt,ct){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",ft,pt||{},it,ct)},$.v1.signaling.api.SignalingPromiseClient.prototype.getPeers=function(ft,pt){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",ft,pt||{},it)};const st=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetIceServers",_.web.MethodType.UNARY,$.v1.signaling.api.GetIceServersRequest,$.v1.signaling.api.GetIceServersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetIceServersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getIceServers=function(ft,pt,ct){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",ft,pt||{},st,ct)},$.v1.signaling.api.SignalingPromiseClient.prototype.getIceServers=function(ft,pt){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",ft,pt||{},st)};const ht=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/SendSignal",_.web.MethodType.UNARY,$.v1.signaling.api.SendSignalRequest,$.v1.signaling.api.SendSignalResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.SendSignalResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.sendSignal=function(ft,pt,ct){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",ft,pt||{},ht,ct)},$.v1.signaling.api.SignalingPromiseClient.prototype.sendSignal=function(ft,pt){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",ft,pt||{},ht)};const vt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/ReceiveSignalStream",_.web.MethodType.SERVER_STREAMING,$.v1.signaling.api.ReceiveSignalStreamRequest,$.v1.signaling.api.ReceiveSignalStreamResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.ReceiveSignalStreamResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.receiveSignalStream=function(ft,pt){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",ft,pt||{},vt)},$.v1.signaling.api.SignalingPromiseClient.prototype.receiveSignalStream=function(ft,pt){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",ft,pt||{},vt)},i.exports=$.v1.signaling.api},function(i,o,s){var _=s(95),$=_,et=Function("return this")();$.exportSymbol("proto.google.protobuf.BoolValue",null,et),$.exportSymbol("proto.google.protobuf.BytesValue",null,et),$.exportSymbol("proto.google.protobuf.DoubleValue",null,et),$.exportSymbol("proto.google.protobuf.FloatValue",null,et),$.exportSymbol("proto.google.protobuf.Int32Value",null,et),$.exportSymbol("proto.google.protobuf.Int64Value",null,et),$.exportSymbol("proto.google.protobuf.StringValue",null,et),$.exportSymbol("proto.google.protobuf.UInt32Value",null,et),$.exportSymbol("proto.google.protobuf.UInt64Value",null,et),proto.google.protobuf.DoubleValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.DoubleValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.DoubleValue.displayName="proto.google.protobuf.DoubleValue"),proto.google.protobuf.FloatValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.FloatValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.FloatValue.displayName="proto.google.protobuf.FloatValue"),proto.google.protobuf.Int64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int64Value.displayName="proto.google.protobuf.Int64Value"),proto.google.protobuf.UInt64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt64Value.displayName="proto.google.protobuf.UInt64Value"),proto.google.protobuf.Int32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int32Value.displayName="proto.google.protobuf.Int32Value"),proto.google.protobuf.UInt32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt32Value.displayName="proto.google.protobuf.UInt32Value"),proto.google.protobuf.BoolValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BoolValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BoolValue.displayName="proto.google.protobuf.BoolValue"),proto.google.protobuf.StringValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.StringValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.StringValue.displayName="proto.google.protobuf.StringValue"),proto.google.protobuf.BytesValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BytesValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BytesValue.displayName="proto.google.protobuf.BytesValue"),_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DoubleValue.prototype.toObject=function(tt){return proto.google.protobuf.DoubleValue.toObject(tt,this)},proto.google.protobuf.DoubleValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.DoubleValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.DoubleValue;return proto.google.protobuf.DoubleValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.DoubleValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readDouble();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.DoubleValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.DoubleValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.DoubleValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeDouble(1,it)},proto.google.protobuf.DoubleValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.DoubleValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FloatValue.prototype.toObject=function(tt){return proto.google.protobuf.FloatValue.toObject(tt,this)},proto.google.protobuf.FloatValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.FloatValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.FloatValue;return proto.google.protobuf.FloatValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.FloatValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readFloat();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.FloatValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.FloatValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.FloatValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeFloat(1,it)},proto.google.protobuf.FloatValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.FloatValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int64Value.prototype.toObject=function(tt){return proto.google.protobuf.Int64Value.toObject(tt,this)},proto.google.protobuf.Int64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int64Value;return proto.google.protobuf.Int64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt64(1,it)},proto.google.protobuf.Int64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt64Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt64Value.toObject(tt,this)},proto.google.protobuf.UInt64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt64Value;return proto.google.protobuf.UInt64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint64(1,it)},proto.google.protobuf.UInt64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int32Value.prototype.toObject=function(tt){return proto.google.protobuf.Int32Value.toObject(tt,this)},proto.google.protobuf.Int32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int32Value;return proto.google.protobuf.Int32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt32(1,it)},proto.google.protobuf.Int32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt32Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt32Value.toObject(tt,this)},proto.google.protobuf.UInt32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt32Value;return proto.google.protobuf.UInt32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint32(1,it)},proto.google.protobuf.UInt32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BoolValue.prototype.toObject=function(tt){return proto.google.protobuf.BoolValue.toObject(tt,this)},proto.google.protobuf.BoolValue.toObject=function(tt,j){var it={value:_.Message.getBooleanFieldWithDefault(j,1,!1)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BoolValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BoolValue;return proto.google.protobuf.BoolValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BoolValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBool();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BoolValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BoolValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BoolValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())&&j.writeBool(1,it)},proto.google.protobuf.BoolValue.prototype.getValue=function(){return _.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.BoolValue.prototype.setValue=function(tt){return _.Message.setProto3BooleanField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.StringValue.prototype.toObject=function(tt){return proto.google.protobuf.StringValue.toObject(tt,this)},proto.google.protobuf.StringValue.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,"")};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.StringValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.StringValue;return proto.google.protobuf.StringValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.StringValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readString();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.StringValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.StringValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.StringValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue()).length>0&&j.writeString(1,it)},proto.google.protobuf.StringValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.StringValue.prototype.setValue=function(tt){return _.Message.setProto3StringField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BytesValue.prototype.toObject=function(tt){return proto.google.protobuf.BytesValue.toObject(tt,this)},proto.google.protobuf.BytesValue.toObject=function(tt,j){var it={value:j.getValue_asB64()};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BytesValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BytesValue;return proto.google.protobuf.BytesValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BytesValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBytes();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BytesValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BytesValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BytesValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue_asU8()).length>0&&j.writeBytes(1,it)},proto.google.protobuf.BytesValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.BytesValue.prototype.getValue_asB64=function(){return _.Message.bytesAsB64(this.getValue())},proto.google.protobuf.BytesValue.prototype.getValue_asU8=function(){return _.Message.bytesAsU8(this.getValue())},proto.google.protobuf.BytesValue.prototype.setValue=function(tt){return _.Message.setProto3BytesField(this,1,tt)},$.object.extend(o,proto.google.protobuf)},function(module,exports,__webpack_require__){(function(global,Buffer){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(i,o,s){i instanceof String&&(i=String(i));for(var _=i.length,$=0;$<_;$++){var et=i[$];if(o.call(s,et,$,i))return{i:$,v:et}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,o,s){i!=Array.prototype&&i!=Object.prototype&&(i[o]=s.value)},$jscomp.getGlobal=function(i){return typeof window<"u"&&window===i?i:global!==void 0&&global!=null?global:i},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,o,s,_){if(o){for(s=$jscomp.global,i=i.split("."),_=0;_<i.length-1;_++){var $=i[_];$ in s||(s[$]={}),s=s[$]}(o=o(_=s[i=i[i.length-1]]))!=_&&o!=null&&$jscomp.defineProperty(s,i,{configurable:!0,writable:!0,value:o})}},$jscomp.polyfill("Array.prototype.findIndex",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).i}},"es6","es3"),$jscomp.checkStringArgs=function(i,o,s){if(i==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(o instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return i+""},$jscomp.polyfill("String.prototype.endsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"endsWith");o+="",s===void 0&&(s=_.length),s=Math.max(0,Math.min(0|s,_.length));for(var $=o.length;0<$&&0<s;)if(_[--s]!=o[--$])return!1;return 0>=$}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"startsWith");o+="";var $=_.length,et=o.length;s=Math.max(0,Math.min(0|s,_.length));for(var tt=0;tt<et&&s<$;)if(_[s++]!=o[tt++])return!1;return tt>=et}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(i){return i||function(o){var s=$jscomp.checkStringArgs(this,null,"repeat");if(0>o||1342177279<o)throw new RangeError("Invalid count value");o|=0;for(var _="";o;)1&o&&(_+=s),(o>>>=1)&&(s+=s);return _}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.isDef=function(i){return i!==void 0},goog.isString=function(i){return typeof i=="string"},goog.isBoolean=function(i){return typeof i=="boolean"},goog.isNumber=function(i){return typeof i=="number"},goog.exportPath_=function(i,o,s){i=i.split("."),s=s||goog.global,i[0]in s||s.execScript===void 0||s.execScript("var "+i[0]);for(var _;i.length&&(_=i.shift());)!i.length&&goog.isDef(o)?s[_]=o:s=s[_]&&s[_]!==Object.prototype[_]?s[_]:s[_]={}},goog.define=function(i,o){return o},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(i){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(i)},goog.constructNamespace_=function(i,o){goog.exportPath_(i,o)},goog.getScriptNonce=function(i){return i&&i!=goog.global?goog.getScriptNonce_(i.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(i)?i:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(i){if(!goog.isString(i)||!i||i.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+i+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=i},goog.module.get=function(i){return goog.module.getInternal_(i)},goog.module.getInternal_=function(i){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var i=goog.global.$jscomp;return!!i&&typeof i.getCurrentModulePath=="function"&&!!i.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(i){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=i;else{var o=goog.global.$jscomp;if(!o||typeof o.getCurrentModulePath!="function")throw Error('Module with namespace "'+i+'" has been loaded incorrectly.');o=o.require(o.getCurrentModulePath()),goog.loadedModules_[i]={exports:o,type:goog.ModuleType.ES6,moduleId:i}}},goog.setTestOnly=function(i){if(goog.DISALLOW_TEST_ONLY_CODE)throw i=i||"",Error("Importing test-only code into non-debug environment"+(i?": "+i:"."))},goog.forwardDeclare=function(i){},goog.getObjectByName=function(i,o){i=i.split("."),o=o||goog.global;for(var s=0;s<i.length;s++)if(o=o[i[s]],!goog.isDefAndNotNull(o))return null;return o},goog.globalize=function(i,o){for(var s in o=o||goog.global,i)o[s]=i[s]},goog.addDependency=function(i,o,s,_){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(i){goog.global.console&&goog.global.console.error(i)},goog.require=function(i){},goog.requireType=function(i){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(i){i.instance_=void 0,i.getInstance=function(){return i.instance_?i.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=i),i.instance_=new i)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(i){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(i){return"(function(){"+i+`
;})();
`},goog.loadModule=function(i){var o=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(i))var s=i.call(void 0,{});else{if(!goog.isString(i))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(i=goog.workaroundSafari10EvalBug(i)),s=goog.loadModuleFromSource_.call(void 0,i)}var _=goog.moduleLoaderState_.moduleName;if(!goog.isString(_)||!_)throw Error('Invalid module name "'+_+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(_,s):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof s=="object"&&s!=null&&Object.seal(s),goog.loadedModules_[_]={exports:s,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=o}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(i){i=i.split("/");for(var o=0;o<i.length;)i[o]=="."?i.splice(o,1):o&&i[o]==".."&&i[o-1]&&i[o-1]!=".."?i.splice(--o,2):o++;return i.join("/")},goog.loadFileSync_=function(i){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(i);try{var o=new goog.global.XMLHttpRequest;return o.open("get",i,!1),o.send(),o.status==0||o.status==200?o.responseText:null}catch{return null}},goog.transpile_=function(i,o,s){var _=goog.global.$jscomp;_||(goog.global.$jscomp=_={});var $=_.transpile;if(!$){var et=goog.basePath+goog.TRANSPILER,tt=goog.loadFileSync_(et);if(tt){if(function(){(0,eval)(tt+`
//# sourceURL=`+et)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,$=(_=goog.global.$jscomp).transpile}}return $||($=_.transpile=function(j,it){return goog.logToConsole_(it+" requires transpilation but no transpiler was found."),j}),$(i,o,s)},goog.typeOf=function(i){var o=typeof i;if(o=="object"){if(!i)return"null";if(i instanceof Array)return"array";if(i instanceof Object)return o;var s=Object.prototype.toString.call(i);if(s=="[object Window]")return"object";if(s=="[object Array]"||typeof i.length=="number"&&i.splice!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("splice"))return"array";if(s=="[object Function]"||i.call!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("call"))return"function"}else if(o=="function"&&i.call===void 0)return"object";return o},goog.isNull=function(i){return i===null},goog.isDefAndNotNull=function(i){return i!=null},goog.isArray=function(i){return goog.typeOf(i)=="array"},goog.isArrayLike=function(i){var o=goog.typeOf(i);return o=="array"||o=="object"&&typeof i.length=="number"},goog.isDateLike=function(i){return goog.isObject(i)&&typeof i.getFullYear=="function"},goog.isFunction=function(i){return goog.typeOf(i)=="function"},goog.isObject=function(i){var o=typeof i;return o=="object"&&i!=null||o=="function"},goog.getUid=function(i){return i[goog.UID_PROPERTY_]||(i[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(i){return!!i[goog.UID_PROPERTY_]},goog.removeUid=function(i){i!==null&&"removeAttribute"in i&&i.removeAttribute(goog.UID_PROPERTY_);try{delete i[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(typeof i.clone=="function")return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.cloneObject(i[s]);return o}return i},goog.bindNative_=function(i,o,s){return i.call.apply(i.bind,arguments)},goog.bindJs_=function(i,o,s){if(!i)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,_),i.apply(o,$)}}return function(){return i.apply(o,arguments)}},goog.bind=function(i,o,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=s.slice();return _.push.apply(_,arguments),i.apply(this,_)}},goog.mixin=function(i,o){for(var s in o)i[s]=o[s]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(i){if(goog.global.execScript)goog.global.execScript(i,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(i);else{var o=goog.global.document,s=o.createElement("SCRIPT");s.type="text/javascript",s.defer=!1,s.appendChild(o.createTextNode(i)),o.head.appendChild(s),o.head.removeChild(s)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(i,o){if(String(i).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+i);var s=function($){return goog.cssNameMapping_[$]||$},_=function($){$=$.split("-");for(var et=[],tt=0;tt<$.length;tt++)et.push(s($[tt]));return et.join("-")};return _=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?s:_:function($){return $},i=o?i+"-"+_(o):_(i),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(i):i},goog.setCssNameMapping=function(i,o){goog.cssNameMapping_=i,goog.cssNameMappingStyle_=o},goog.getMsg=function(i,o,s){return s&&s.html&&(i=i.replace(/</g,"&lt;")),o&&(i=i.replace(/\{\$([^}]+)}/g,function(_,$){return o!=null&&$ in o?o[$]:_})),i},goog.getMsgWithFallback=function(i,o){return i},goog.exportSymbol=function(i,o,s){goog.exportPath_(i,o,s)},goog.exportProperty=function(i,o,s){i[o]=s},goog.inherits=function(i,o){function s(){}s.prototype=o.prototype,i.superClass_=o.prototype,i.prototype=new s,i.prototype.constructor=i,i.base=function(_,$,et){for(var tt=Array(arguments.length-2),j=2;j<arguments.length;j++)tt[j-2]=arguments[j];return o.prototype[$].apply(_,tt)}},goog.base=function(i,o,s){var _=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!_)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(_.superClass_!==void 0){for(var $=Array(arguments.length-1),et=1;et<arguments.length;et++)$[et-1]=arguments[et];return _.superClass_.constructor.apply(i,$)}if(typeof o!="string"&&typeof o!="symbol")throw Error("method names provided to goog.base must be a string or a symbol");for($=Array(arguments.length-2),et=2;et<arguments.length;et++)$[et-2]=arguments[et];et=!1;for(var tt=i.constructor.prototype;tt;tt=Object.getPrototypeOf(tt))if(tt[o]===_)et=!0;else if(et)return tt[o].apply(i,$);if(i[o]===_)return i.constructor.prototype[o].apply(i,$);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(i){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");i.call(goog.global)},goog.defineClass=function(i,o){var s=o.constructor,_=o.statics;return s&&s!=Object.prototype.constructor||(s=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),s=goog.defineClass.createSealingConstructor_(s,i),i&&goog.inherits(s,i),delete o.constructor,delete o.statics,goog.defineClass.applyProperties_(s.prototype,o),_!=null&&(_ instanceof Function?_(s):goog.defineClass.applyProperties_(s,_)),s},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(i,o){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return i;var s=!goog.defineClass.isUnsealable_(o),_=function(){var $=i.apply(this,arguments)||this;return $[goog.UID_PROPERTY_]=$[goog.UID_PROPERTY_],this.constructor===_&&s&&Object.seal instanceof Function&&Object.seal($),$};return _},goog.defineClass.isUnsealable_=function(i){return i&&i.prototype&&i.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s]);for(var _=0;_<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;_++)s=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[_],Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},goog.tagUnsealableClass=function(i){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(i){return i},goog.createTrustedTypesPolicy=function(i){var o=null;if(typeof TrustedTypes>"u"||!TrustedTypes.createPolicy)return o;try{o=TrustedTypes.createPolicy(i,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(s){goog.logToConsole_(s.message)}return o},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(i){var o=jspb.BinaryConstants.FieldType,s=jspb.BinaryConstants.WireType;switch(i){case o.INT32:case o.INT64:case o.UINT32:case o.UINT64:case o.SINT32:case o.SINT64:case o.BOOL:case o.ENUM:case o.VHASH64:return s.VARINT;case o.DOUBLE:case o.FIXED64:case o.SFIXED64:case o.FHASH64:return s.FIXED64;case o.STRING:case o.MESSAGE:case o.BYTES:return s.DELIMITED;case o.FLOAT:case o.FIXED32:case o.SFIXED32:return s.FIXED32;default:return s.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(i){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var o=Error().stack;o&&(this.stack=o)}i&&(this.message=String(i)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(i,o){goog.debug.Error.call(this,goog.asserts.subs_(i,o)),this.messagePattern=i},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(i){throw i},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(i,o){for(var s="",_=(i=i.split("%s")).length-1,$=0;$<_;$++)s+=i[$]+($<o.length?o[$]:"%s");return s+i[_]},goog.asserts.doAssertFailure_=function(i,o,s,_){var $="Assertion failed";if(s){$+=": "+s;var et=_}else i&&($+=": "+i,et=o);i=new goog.asserts.AssertionError(""+$,et||[]),goog.asserts.errorHandler_(i)},goog.asserts.setErrorHandler=function(i){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=i)},goog.asserts.assert=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!i&&goog.asserts.doAssertFailure_("",null,o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertExists=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&i==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.fail=function(i,o){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(i)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertString=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(i)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertFunction=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(i)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObject=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(i)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertArray=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(i)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertBoolean=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(i)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertElement=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(i)&&i.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertInstanceof=function(i,o,s,_){return!goog.asserts.ENABLE_ASSERTS||i instanceof o||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(o),goog.asserts.getType_(i)],s,Array.prototype.slice.call(arguments,3)),i},goog.asserts.assertFinite=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||typeof i=="number"&&isFinite(i)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var i in Object.prototype)goog.asserts.fail(i+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(i){return i[i.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.indexOf.call(i,o,s)}:function(i,o,s){if(s=s==null?0:0>s?Math.max(0,i.length+s):s,goog.isString(i))return goog.isString(o)&&o.length==1?i.indexOf(o,s):-1;for(;s<i.length;s++)if(s in i&&i[s]===o)return s;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.lastIndexOf.call(i,o,s??i.length-1)}:function(i,o,s){if(0>(s=s??i.length-1)&&(s=Math.max(0,i.length+s)),goog.isString(i))return goog.isString(o)&&o.length==1?i.lastIndexOf(o,s):-1;for(;0<=s;s--)if(s in i&&i[s]===o)return s;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(i,o,s){goog.asserts.assert(i.length!=null),Array.prototype.forEach.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)et in $&&o.call(s,$[et],et,i)},goog.array.forEachRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;--_)_ in $&&o.call(s,$[_],_,i)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.filter.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=[],et=0,tt=goog.isString(i)?i.split(""):i,j=0;j<_;j++)if(j in tt){var it=tt[j];o.call(s,it,j,i)&&($[et++]=it)}return $},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.map.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=Array(_),et=goog.isString(i)?i.split(""):i,tt=0;tt<_;tt++)tt in et&&($[tt]=o.call(s,et[tt],tt,i));return $},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduce.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEach(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),goog.asserts.assert(o!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduceRight.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEachRight(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.some.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.every.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&!o.call(s,$[et],et,i))return!1;return!0},goog.array.count=function(i,o,s){var _=0;return goog.array.forEach(i,function($,et,tt){o.call(s,$,et,tt)&&++_},s),_},goog.array.find=function(i,o,s){return 0>(o=goog.array.findIndex(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndex=function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return et;return-1},goog.array.findRight=function(i,o,s){return 0>(o=goog.array.findIndexRight(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndexRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;_--)if(_ in $&&o.call(s,$[_],_,i))return _;return-1},goog.array.contains=function(i,o){return 0<=goog.array.indexOf(i,o)},goog.array.isEmpty=function(i){return i.length==0},goog.array.clear=function(i){if(!goog.isArray(i))for(var o=i.length-1;0<=o;o--)delete i[o];i.length=0},goog.array.insert=function(i,o){goog.array.contains(i,o)||i.push(o)},goog.array.insertAt=function(i,o,s){goog.array.splice(i,s,0,o)},goog.array.insertArrayAt=function(i,o,s){goog.partial(goog.array.splice,i,s,0).apply(null,o)},goog.array.insertBefore=function(i,o,s){var _;arguments.length==2||0>(_=goog.array.indexOf(i,s))?i.push(o):goog.array.insertAt(i,o,_)},goog.array.remove=function(i,o){var s;return(s=0<=(o=goog.array.indexOf(i,o)))&&goog.array.removeAt(i,o),s},goog.array.removeLast=function(i,o){return 0<=(o=goog.array.lastIndexOf(i,o))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAt=function(i,o){return goog.asserts.assert(i.length!=null),Array.prototype.splice.call(i,o,1).length==1},goog.array.removeIf=function(i,o,s){return 0<=(o=goog.array.findIndex(i,o,s))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAllIf=function(i,o,s){var _=0;return goog.array.forEachRight(i,function($,et){o.call(s,$,et,i)&&goog.array.removeAt(i,et)&&_++}),_},goog.array.concat=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(i){var o=i.length;if(0<o){for(var s=Array(o),_=0;_<o;_++)s[_]=i[_];return s}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(i,o){for(var s=1;s<arguments.length;s++){var _=arguments[s];if(goog.isArrayLike(_)){var $=i.length||0,et=_.length||0;i.length=$+et;for(var tt=0;tt<et;tt++)i[$+tt]=_[tt]}else i.push(_)}},goog.array.splice=function(i,o,s,_){return goog.asserts.assert(i.length!=null),Array.prototype.splice.apply(i,goog.array.slice(arguments,1))},goog.array.slice=function(i,o,s){return goog.asserts.assert(i.length!=null),2>=arguments.length?Array.prototype.slice.call(i,o):Array.prototype.slice.call(i,o,s)},goog.array.removeDuplicates=function(i,o,s){o=o||i;var _=function(it){return goog.isObject(it)?"o"+goog.getUid(it):(typeof it).charAt(0)+it};s=s||_,_={};for(var $=0,et=0;et<i.length;){var tt=i[et++],j=s(tt);Object.prototype.hasOwnProperty.call(_,j)||(_[j]=!0,o[$++]=tt)}o.length=$},goog.array.binarySearch=function(i,o,s){return goog.array.binarySearch_(i,s||goog.array.defaultCompare,!1,o)},goog.array.binarySelect=function(i,o,s){return goog.array.binarySearch_(i,o,!0,void 0,s)},goog.array.binarySearch_=function(i,o,s,_,$){for(var et,tt=0,j=i.length;tt<j;){var it=tt+j>>1,st=s?o.call($,i[it],it,i):o(_,i[it]);0<st?tt=it+1:(j=it,et=!st)}return et?tt:~tt},goog.array.sort=function(i,o){i.sort(o||goog.array.defaultCompare)},goog.array.stableSort=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]={index:_,value:i[_]};var $=o||goog.array.defaultCompare;for(goog.array.sort(s,function(et,tt){return $(et.value,tt.value)||et.index-tt.index}),_=0;_<i.length;_++)i[_]=s[_].value},goog.array.sortByKey=function(i,o,s){var _=s||goog.array.defaultCompare;goog.array.sort(i,function($,et){return _(o($),o(et))})},goog.array.sortObjectsByKey=function(i,o,s){goog.array.sortByKey(i,function(_){return _[o]},s)},goog.array.isSorted=function(i,o,s){o=o||goog.array.defaultCompare;for(var _=1;_<i.length;_++){var $=o(i[_-1],i[_]);if(0<$||$==0&&s)return!1}return!0},goog.array.equals=function(i,o,s){if(!goog.isArrayLike(i)||!goog.isArrayLike(o)||i.length!=o.length)return!1;var _=i.length;s=s||goog.array.defaultCompareEquality;for(var $=0;$<_;$++)if(!s(i[$],o[$]))return!1;return!0},goog.array.compare3=function(i,o,s){s=s||goog.array.defaultCompare;for(var _=Math.min(i.length,o.length),$=0;$<_;$++){var et=s(i[$],o[$]);if(et!=0)return et}return goog.array.defaultCompare(i.length,o.length)},goog.array.defaultCompare=function(i,o){return i>o?1:i<o?-1:0},goog.array.inverseDefaultCompare=function(i,o){return-goog.array.defaultCompare(i,o)},goog.array.defaultCompareEquality=function(i,o){return i===o},goog.array.binaryInsert=function(i,o,s){return 0>(s=goog.array.binarySearch(i,o,s))&&(goog.array.insertAt(i,o,-(s+1)),!0)},goog.array.binaryRemove=function(i,o,s){return 0<=(o=goog.array.binarySearch(i,o,s))&&goog.array.removeAt(i,o)},goog.array.bucket=function(i,o,s){for(var _={},$=0;$<i.length;$++){var et=i[$],tt=o.call(s,et,$,i);goog.isDef(tt)&&(_[tt]||(_[tt]=[])).push(et)}return _},goog.array.toObject=function(i,o,s){var _={};return goog.array.forEach(i,function($,et){_[o.call(s,$,et,i)]=$}),_},goog.array.range=function(i,o,s){var _=[],$=0,et=i;if(o!==void 0&&($=i,et=o),0>(s=s||1)*(et-$))return[];if(0<s)for(i=$;i<et;i+=s)_.push(i);else for(i=$;i>et;i+=s)_.push(i);return _},goog.array.repeat=function(i,o){for(var s=[],_=0;_<o;_++)s[_]=i;return s},goog.array.flatten=function(i){for(var o=[],s=0;s<arguments.length;s++){var _=arguments[s];if(goog.isArray(_))for(var $=0;$<_.length;$+=8192){var et=goog.array.slice(_,$,$+8192);et=goog.array.flatten.apply(null,et);for(var tt=0;tt<et.length;tt++)o.push(et[tt])}else o.push(_)}return o},goog.array.rotate=function(i,o){return goog.asserts.assert(i.length!=null),i.length&&(0<(o%=i.length)?Array.prototype.unshift.apply(i,i.splice(-o,o)):0>o&&Array.prototype.push.apply(i,i.splice(0,-o))),i},goog.array.moveItem=function(i,o,s){goog.asserts.assert(0<=o&&o<i.length),goog.asserts.assert(0<=s&&s<i.length),o=Array.prototype.splice.call(i,o,1),Array.prototype.splice.call(i,s,0,o[0])},goog.array.zip=function(i){if(!arguments.length)return[];for(var o=[],s=arguments[0].length,_=1;_<arguments.length;_++)arguments[_].length<s&&(s=arguments[_].length);for(_=0;_<s;_++){for(var $=[],et=0;et<arguments.length;et++)$.push(arguments[et][_]);o.push($)}return o},goog.array.shuffle=function(i,o){o=o||Math.random;for(var s=i.length-1;0<s;s--){var _=Math.floor(o()*(s+1)),$=i[s];i[s]=i[_],i[_]=$}},goog.array.copyByIndex=function(i,o){var s=[];return goog.array.forEach(o,function(_){s.push(i[_])}),s},goog.array.concatMap=function(i,o,s){return goog.array.concat.apply([],goog.array.map(i,o,s))},goog.crypt={},goog.crypt.stringToByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);255<$&&(o[s++]=255&$,$>>=8),o[s++]=$}return o},goog.crypt.byteArrayToString=function(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var o="",s=0;s<i.length;s+=8192){var _=goog.array.slice(i,s,s+8192);o+=String.fromCharCode.apply(null,_)}return o},goog.crypt.byteArrayToHex=function(i,o){return goog.array.map(i,function(s){return 1<(s=s.toString(16)).length?s:"0"+s}).join(o||"")},goog.crypt.hexToByteArray=function(i){goog.asserts.assert(i.length%2==0,"Key string length must be multiple of 2");for(var o=[],s=0;s<i.length;s+=2)o.push(parseInt(i.substring(s,s+2),16));return o},goog.crypt.stringToUtf8ByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);128>$?o[s++]=$:(2048>$?o[s++]=$>>6|192:((64512&$)==55296&&_+1<i.length&&(64512&i.charCodeAt(_+1))==56320?($=65536+((1023&$)<<10)+(1023&i.charCodeAt(++_)),o[s++]=$>>18|240,o[s++]=$>>12&63|128):o[s++]=$>>12|224,o[s++]=$>>6&63|128),o[s++]=63&$|128)}return o},goog.crypt.utf8ByteArrayToString=function(i){for(var o=[],s=0,_=0;s<i.length;){var $=i[s++];if(128>$)o[_++]=String.fromCharCode($);else if(191<$&&224>$){var et=i[s++];o[_++]=String.fromCharCode((31&$)<<6|63&et)}else if(239<$&&365>$){et=i[s++];var tt=i[s++];$=((7&$)<<18|(63&et)<<12|(63&tt)<<6|63&i[s++])-65536,o[_++]=String.fromCharCode(55296+($>>10)),o[_++]=String.fromCharCode(56320+(1023&$))}else et=i[s++],tt=i[s++],o[_++]=String.fromCharCode((15&$)<<12|(63&et)<<6|63&tt)}return o.join("")},goog.crypt.xorByteArray=function(i,o){goog.asserts.assert(i.length==o.length,"XOR array lengths must match");for(var s=[],_=0;_<i.length;_++)s.push(i[_]^o[_]);return s},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(i,o){return i.lastIndexOf(o,0)==0},goog.string.internal.endsWith=function(i,o){var s=i.length-o.length;return 0<=s&&i.indexOf(o,s)==s},goog.string.internal.caseInsensitiveStartsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(0,o.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(i.length-o.length,o.length))==0},goog.string.internal.caseInsensitiveEquals=function(i,o){return i.toLowerCase()==o.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(i){return/^[\s\xa0]*$/.test(i)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},goog.string.internal.caseInsensitiveCompare=function(i,o){return(i=String(i).toLowerCase())<(o=String(o).toLowerCase())?-1:i==o?0:1},goog.string.internal.newLineToBr=function(i,o){return i.replace(/(\r\n|\r|\n)/g,o?"<br />":"<br>")},goog.string.internal.htmlEscape=function(i,o){if(o)i=i.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(i))return i;i.indexOf("&")!=-1&&(i=i.replace(goog.string.internal.AMP_RE_,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace(goog.string.internal.LT_RE_,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(goog.string.internal.GT_RE_,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(goog.string.internal.QUOT_RE_,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(goog.string.internal.NULL_RE_,"&#0;"))}return i},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(i,o){return goog.string.internal.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.internal.contains=function(i,o){return i.indexOf(o)!=-1},goog.string.internal.caseInsensitiveContains=function(i,o){return goog.string.internal.contains(i.toLowerCase(),o.toLowerCase())},goog.string.internal.compareVersions=function(i,o){var s=0;i=goog.string.internal.trim(String(i)).split("."),o=goog.string.internal.trim(String(o)).split(".");for(var _=Math.max(i.length,o.length),$=0;s==0&&$<_;$++){var et=i[$]||"",tt=o[$]||"";do{if(et=/(\d*)(\D*)(.*)/.exec(et)||["","","",""],tt=/(\d*)(\D*)(.*)/.exec(tt)||["","","",""],et[0].length==0&&tt[0].length==0)break;s=et[1].length==0?0:parseInt(et[1],10);var j=tt[1].length==0?0:parseInt(tt[1],10);s=goog.string.internal.compareElements_(s,j)||goog.string.internal.compareElements_(et[2].length==0,tt[2].length==0)||goog.string.internal.compareElements_(et[2],tt[2]),et=et[3],tt=tt[3]}while(s==0)}return s},goog.string.internal.compareElements_=function(i,o){return i<o?-1:i>o?1:0},goog.string.TypedString=function(){},goog.string.Const=function(i,o){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=i===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&o||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(i){return i instanceof goog.string.Const&&i.constructor===goog.string.Const&&i.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?i.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+i+"'"),"type_error:Const")},goog.string.Const.from=function(i){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,i)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(i){return goog.fs.url.getUrlObject_().createObjectURL(i)},goog.fs.url.revokeObjectUrl=function(i){goog.fs.url.getUrlObject_().revokeObjectURL(i)},goog.fs.url.getUrlObject_=function(){var i=goog.fs.url.findUrlObject_();if(i!=null)return i;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(i,o){return typeof i=="number"?0<i?goog.i18n.bidi.Dir.LTR:0>i?goog.i18n.bidi.Dir.RTL:o?null:goog.i18n.bidi.Dir.NEUTRAL:i==null?null:i?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z------\uD801\uD804-\uD839\uD83C-\uDBFF---",goog.i18n.bidi.rtlChars_="--\uD802-\uD803\uD83A-\uD83B--",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(i,o){return o?i.replace(goog.i18n.bidi.htmlSkipReg_,""):i},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(i,o){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(i,o){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(i){return goog.i18n.bidi.rtlRe_.test(i)},goog.i18n.bidi.isLtrChar=function(i){return goog.i18n.bidi.ltrRe_.test(i)},goog.i18n.bidi.isNeutralChar=function(i){return!goog.i18n.bidi.isLtrChar(i)&&!goog.i18n.bidi.isRtlChar(i)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(i,o){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(i,o){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(i,o){return i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o),goog.i18n.bidi.isRequiredLtrRe_.test(i)||!goog.i18n.bidi.hasAnyLtr(i)&&!goog.i18n.bidi.hasAnyRtl(i)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(i,o){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(i,o){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(i){return goog.i18n.bidi.rtlLocalesRe_.test(i)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(i,o){return o=(o===void 0?goog.i18n.bidi.hasAnyRtl(i):o)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,i.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+i+"</span>"},goog.i18n.bidi.enforceRtlInText=function(i){return goog.i18n.bidi.Format.RLE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+i+"</span>"},goog.i18n.bidi.enforceLtrInText=function(i){return goog.i18n.bidi.Format.LRE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(i){return i.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(i){return i.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(i,o){var s=0,_=0,$=!1;for(i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o).split(goog.i18n.bidi.wordSeparatorRe_),o=0;o<i.length;o++){var et=i[o];goog.i18n.bidi.startsWithRtl(et)?(s++,_++):goog.i18n.bidi.isRequiredLtrRe_.test(et)?$=!0:goog.i18n.bidi.hasAnyLtr(et)?_++:goog.i18n.bidi.hasNumeralsRe_.test(et)&&($=!0)}return _==0?$?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:s/_>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(i,o){return goog.i18n.bidi.estimateDirection(i,o)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(i,o){i&&(o=goog.i18n.bidi.toDir(o))&&(i.style.textAlign=o==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,i.dir=o==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(i,o){switch(goog.i18n.bidi.estimateDirection(o)){case goog.i18n.bidi.Dir.LTR:i.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:i.dir="rtl";break;default:i.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.trustedURL_=null,this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(i,o){var s=goog.html.TrustedResourceUrl.unwrap(this),_=(s=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(s))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(s[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",s[2]||"",i)+goog.html.TrustedResourceUrl.stringifyParams_("#",_,o))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(i){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(i){return i instanceof goog.html.TrustedResourceUrl&&i.constructor===goog.html.TrustedResourceUrl&&i.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.unwrapTrustedURL=function(i){return i.trustedURL_?i.trustedURL_:goog.html.TrustedResourceUrl.unwrap(i)},goog.html.TrustedResourceUrl.format=function(i,o){var s=goog.string.Const.unwrap(i);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(s))throw Error("Invalid TrustedResourceUrl format: "+s);return i=s.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(_,$){if(!Object.prototype.hasOwnProperty.call(o,$))throw Error('Found marker, "'+$+'", in format string, "'+s+'", but no valid label mapping found in args: '+JSON.stringify(o));return(_=o[$])instanceof goog.string.Const?goog.string.Const.unwrap(_):encodeURIComponent(String(_))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(i,o,s,_){return goog.html.TrustedResourceUrl.format(i,o).cloneWithParams(s,_)},goog.html.TrustedResourceUrl.fromConstant=function(i){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.TrustedResourceUrl.fromConstants=function(i){for(var o="",s=0;s<i.length;s++)o+=goog.string.Const.unwrap(i[s]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.TrustedResourceUrl;return o.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(i):i,goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY&&(o.trustedURL_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i)),o},goog.html.TrustedResourceUrl.stringifyParams_=function(i,o,s){if(s==null)return o;if(goog.isString(s))return s?i+encodeURIComponent(s):"";for(var _ in s){var $=s[_];$=goog.isArray($)?$:[$];for(var et=0;et<$.length;et++){var tt=$[et];tt!=null&&(o||(o=i),o+=(o.length>i.length?"&":"")+encodeURIComponent(_)+"="+encodeURIComponent(String(tt)))}}return o},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeUrlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(i){return goog.html.SafeUrl.unwrapTrustedURL(i).toString()},goog.html.SafeUrl.unwrapTrustedURL=function(i){return i instanceof goog.html.SafeUrl&&i.constructor===goog.html.SafeUrl&&i.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(i){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(i)},goog.html.SafeUrl.fromBlob=function(i){return i=goog.html.SAFE_MIME_TYPE_PATTERN_.test(i.type)?goog.fs.url.createObjectUrl(i):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.DATA_URL_PATTERN_=/^data:([^,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(i){var o=(i=i.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return o=o&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(o[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o?i:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"tel:")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(i){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(i))||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"fb-messenger://share")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromWhatsAppUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"whatsapp://send")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromSmsUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(i){var o=i.indexOf("#");if(0<o&&(i=i.substring(0,o)),!(o=i.match(/[?&]body=/gi)))return!0;if(1<o.length)return!1;if(!(i=i.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(i)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(i)},goog.html.SafeUrl.fromSshUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"ssh://")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(i,o,s){return(i=i.exec(o))?(i=i[1],(s instanceof goog.string.Const?[goog.string.Const.unwrap(s)]:s.map(function(_){return goog.string.Const.unwrap(_)})).indexOf(i)==-1&&(o=goog.html.SafeUrl.INNOCUOUS_STRING)):o=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.fromTrustedResourceUrl=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(i))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(i){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SAFE_URL_PATTERN_.test(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(i,o){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),o&&/^data:/i.test(i)&&(o=goog.html.SafeUrl.fromDataUrl(i)).getTypedStringValue()==i?o:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(i),"%s does not match the safe URL pattern",i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.SafeUrl;return o.privateDoNotAccessOrElseSafeUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i):i,o},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(i,";"),"Last character of style string is not ';': "+i),goog.asserts.assert(goog.string.internal.contains(i,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+i),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(i){return i instanceof goog.html.SafeStyle&&i.constructor===goog.html.SafeStyle&&i.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=i,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(i){var o,s="";for(o in i){if(!/^[-_a-zA-Z0-9]+$/.test(o))throw Error("Name allows only [-_a-zA-Z0-9], got: "+o);var _=i[o];_!=null&&(s+=o+":"+(_=goog.isArray(_)?goog.array.map(_,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(_))+";")}return s?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(s):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(i){if(i instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(i).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(i=i instanceof goog.string.Const?goog.string.Const.unwrap(i):goog.html.SafeStyle.sanitizePropertyValueString_(String(i)),/[{;}]/.test(i))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[i]);return i},goog.html.SafeStyle.sanitizePropertyValueString_=function(i){var o=i.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(o)?goog.html.SafeStyle.COMMENT_RE_.test(i)?(goog.asserts.fail("String value disallows comments, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(i)?goog.html.SafeStyle.hasBalancedSquareBrackets_(i)?goog.html.SafeStyle.sanitizeUrl_(i):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(i){for(var o=!0,s=!0,_=0;_<i.length;_++){var $=i.charAt(_);$=="'"&&s?o=!o:$=='"'&&o&&(s=!s)}return o&&s},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(i){for(var o=!0,s=/^[-_a-zA-Z0-9]$/,_=0;_<i.length;_++){var $=i.charAt(_);if($=="]"){if(o)return!1;o=!0}else if($=="["){if(!o)return!1;o=!1}else if(!o&&!s.test($))return!1}return o},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.FUNCTIONS_RE_=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(i){return i.replace(goog.html.SafeStyle.URL_RE_,function(o,s,_,$){var et="";return _=_.replace(/^(['"])(.*)\1$/,function(tt,j,it){return et=j,it}),o=goog.html.SafeUrl.sanitize(_).getTypedStringValue(),s+et+o+et+$})},goog.html.SafeStyle.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyle.unwrap(_)};return goog.array.forEach(arguments,s),o?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o):goog.html.SafeStyle.EMPTY},goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeScript.fromConstantAndArgs=function(i,o){for(var s=[],_=1;_<arguments.length;_++)s.push(goog.html.SafeScript.stringify_(arguments[_]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(i)+")("+s.join(", ")+");")},goog.html.SafeScript.fromJson=function(i){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(i))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(i){return goog.html.SafeScript.unwrapTrustedScript(i).toString()},goog.html.SafeScript.unwrapTrustedScript=function(i){return i instanceof goog.html.SafeScript&&i.constructor===goog.html.SafeScript&&i.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(i){return JSON.stringify(i).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(i):i,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.object={},goog.object.is=function(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o},goog.object.forEach=function(i,o,s){for(var _ in i)o.call(s,i[_],_,i)},goog.object.filter=function(i,o,s){var _,$={};for(_ in i)o.call(s,i[_],_,i)&&($[_]=i[_]);return $},goog.object.map=function(i,o,s){var _,$={};for(_ in i)$[_]=o.call(s,i[_],_,i);return $},goog.object.some=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return!0;return!1},goog.object.every=function(i,o,s){for(var _ in i)if(!o.call(s,i[_],_,i))return!1;return!0},goog.object.getCount=function(i){var o,s=0;for(o in i)s++;return s},goog.object.getAnyKey=function(i){for(var o in i)return o},goog.object.getAnyValue=function(i){for(var o in i)return i[o]},goog.object.contains=function(i,o){return goog.object.containsValue(i,o)},goog.object.getValues=function(i){var o,s=[],_=0;for(o in i)s[_++]=i[o];return s},goog.object.getKeys=function(i){var o,s=[],_=0;for(o in i)s[_++]=o;return s},goog.object.getValueByKeys=function(i,o){var s=goog.isArrayLike(o),_=s?o:arguments;for(s=s?0:1;s<_.length;s++){if(i==null)return;i=i[_[s]]}return i},goog.object.containsKey=function(i,o){return i!==null&&o in i},goog.object.containsValue=function(i,o){for(var s in i)if(i[s]==o)return!0;return!1},goog.object.findKey=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return _},goog.object.findValue=function(i,o,s){return(o=goog.object.findKey(i,o,s))&&i[o]},goog.object.isEmpty=function(i){for(var o in i)return!1;return!0},goog.object.clear=function(i){for(var o in i)delete i[o]},goog.object.remove=function(i,o){var s;return(s=o in i)&&delete i[o],s},goog.object.add=function(i,o,s){if(i!==null&&o in i)throw Error('The object already contains the key "'+o+'"');goog.object.set(i,o,s)},goog.object.get=function(i,o,s){return i!==null&&o in i?i[o]:s},goog.object.set=function(i,o,s){i[o]=s},goog.object.setIfUndefined=function(i,o,s){return o in i?i[o]:i[o]=s},goog.object.setWithReturnValueIfNotSet=function(i,o,s){return o in i?i[o]:(s=s(),i[o]=s)},goog.object.equals=function(i,o){for(var s in i)if(!(s in o)||i[s]!==o[s])return!1;for(var _ in o)if(!(_ in i))return!1;return!0},goog.object.clone=function(i){var o,s={};for(o in i)s[o]=i[o];return s},goog.object.unsafeClone=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(goog.isFunction(i.clone))return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.object.unsafeClone(i[s]);return o}return i},goog.object.transpose=function(i){var o,s={};for(o in i)s[i[o]]=o;return s},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(i,o){for(var s,_,$=1;$<arguments.length;$++){for(s in _=arguments[$])i[s]=_[s];for(var et=0;et<goog.object.PROTOTYPE_FIELDS_.length;et++)s=goog.object.PROTOTYPE_FIELDS_[et],Object.prototype.hasOwnProperty.call(_,s)&&(i[s]=_[s])}},goog.object.create=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(o%2)throw Error("Uneven number of arguments");for(var s={},_=0;_<o;_+=2)s[arguments[_]]=arguments[_+1];return s},goog.object.createSet=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var s={},_=0;_<o;_++)s[arguments[_]]=!0;return s},goog.object.createImmutableView=function(i){var o=i;return Object.isFrozen&&!Object.isFrozen(i)&&(o=Object.create(i),Object.freeze(o)),o},goog.object.isImmutableView=function(i){return!!Object.isFrozen&&Object.isFrozen(i)},goog.object.getAllPropertyNames=function(i,o,s){if(!i)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(i);for(var _={};i&&(i!==Object.prototype||o)&&(i!==Function.prototype||s);){for(var $=Object.getOwnPropertyNames(i),et=0;et<$.length;et++)_[$[et]]=!0;i=Object.getPrototypeOf(i)}return goog.object.getKeys(_)},goog.object.getSuperClass=function(i){return(i=Object.getPrototypeOf(i.prototype))&&i.constructor},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(i,o){if(goog.string.internal.contains(i,"<"))throw Error("Selector does not allow '<', got: "+i);var s=i.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(s))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+i);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(s))throw Error("() and [] in selector must be balanced, got: "+i);return o instanceof goog.html.SafeStyle||(o=goog.html.SafeStyle.create(o)),i=i+"{"+goog.html.SafeStyle.unwrap(o).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(i){for(var o={"(":")","[":"]"},s=[],_=0;_<i.length;_++){var $=i[_];if(o[$])s.push(o[$]);else if(goog.object.contains(o,$)&&s.pop()!=$)return!1}return s.length==0},goog.html.SafeStyleSheet.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyleSheet.unwrap(_)};return goog.array.forEach(arguments,s),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeStyleSheet.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(i,"<"),"Forbidden '<' character in style sheet string: "+i),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(i){return i instanceof goog.html.SafeStyleSheet&&i.constructor===goog.html.SafeStyleSheet&&i.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=i,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(i){return goog.dom.tags.VOID_TAGS_[i]===!0},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(i){this.tagName_=i},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var i=goog.labs.userAgent.util.getNavigator_();return i&&(i=i.userAgent)?i:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(i){goog.labs.userAgent.util.userAgent_=i||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(o,i)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(o,i)},goog.labs.userAgent.util.extractVersionTuples=function(i){for(var o,s=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,_=[];o=s.exec(i);)_.push([o[1],o[2],o[3]||void 0]);return _},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function i($){return $=goog.array.find($,_),s[$]||""}var o=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(o);o=goog.labs.userAgent.util.extractVersionTuples(o);var s={};goog.array.forEach(o,function($){s[$[0]]=$[1]});var _=goog.partial(goog.object.containsKey,s);return goog.labs.userAgent.browser.isOpera()?i(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?i(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?i(["Edg"]):goog.labs.userAgent.browser.isChrome()?i(["Chrome","CriOS"]):(o=o[2])&&o[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(i){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),i)},goog.labs.userAgent.browser.getIEVersion_=function(i){var o=/rv: *([\d\.]*)/.exec(i);if(o&&o[1])return o[1];o="";var s=/MSIE +([\d\.]+)/.exec(i);if(s&&s[1])if(i=/Trident\/(\d.\d)/.exec(i),s[1]=="7.0")if(i&&i[1])switch(i[1]){case"4.0":o="8.0";break;case"5.0":o="9.0";break;case"6.0":o="10.0";break;case"7.0":o="11.0"}else o="7.0";else o=s[1];return o},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(i){return goog.html.SafeHtml.unwrapTrustedHTML(i).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(i){return i instanceof goog.html.SafeHtml&&i.constructor===goog.html.SafeHtml&&i.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(i){if(i instanceof goog.html.SafeHtml)return i;var o=typeof i=="object",s=null;return o&&i.implementsGoogI18nBidiDirectionalString&&(s=i.getDirection()),i=o&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(i),s)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(i,o,s){return goog.html.SafeHtml.verifyTagName(String(i)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(i),o,s)},goog.html.SafeHtml.verifyTagName=function(i){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(i))throw Error("Invalid tag name <"+i+">.");if(i.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+i+"> is not allowed for SafeHtml.")},goog.html.SafeHtml.createIframe=function(i,o,s,_){i&&goog.html.TrustedResourceUrl.unwrap(i);var $={};return $.src=i||null,$.srcdoc=o&&goog.html.SafeHtml.unwrap(o),i=goog.html.SafeHtml.combineAttributes($,{sandbox:""},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.createSandboxIframe=function(i,o,s,_){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var $={};return $.src=i?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)):null,$.srcdoc=o||null,$.sandbox="",i=goog.html.SafeHtml.combineAttributes($,{},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(i,o){return goog.html.TrustedResourceUrl.unwrap(i),i=goog.html.SafeHtml.combineAttributes({src:i},{},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",i)},goog.html.SafeHtml.createScript=function(i,o){for(var s in o){var _=s.toLowerCase();if(_=="language"||_=="src"||_=="text"||_=="type")throw Error('Cannot set "'+_+'" attribute')}for(s="",i=goog.array.concat(i),_=0;_<i.length;_++)s+=goog.html.SafeScript.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",o,i)},goog.html.SafeHtml.createStyle=function(i,o){o=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},o);var s="";i=goog.array.concat(i);for(var _=0;_<i.length;_++)s+=goog.html.SafeStyleSheet.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",o,i)},goog.html.SafeHtml.createMetaRefresh=function(i,o){return i=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(o||0)+"; url="+i})},goog.html.SafeHtml.getAttrNameAndValue_=function(i,o,s){if(s instanceof goog.string.Const)s=goog.string.Const.unwrap(s);else if(o.toLowerCase()=="style")s=goog.html.SafeHtml.getStyleValue_(s);else{if(/^on/i.test(o))throw Error('Attribute "'+o+'" requires goog.string.Const value, "'+s+'" given.');if(o.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(s instanceof goog.html.TrustedResourceUrl)s=goog.html.TrustedResourceUrl.unwrap(s);else if(s instanceof goog.html.SafeUrl)s=goog.html.SafeUrl.unwrap(s);else{if(!goog.isString(s))throw Error('Attribute "'+o+'" on tag "'+i+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+s+'" given.');s=goog.html.SafeUrl.sanitize(s).getTypedStringValue()}}return s.implementsGoogStringTypedString&&(s=s.getTypedStringValue()),goog.asserts.assert(goog.isString(s)||goog.isNumber(s),"String or number value expected, got "+typeof s+" with value: "+s),o+'="'+goog.string.internal.htmlEscape(String(s))+'"'},goog.html.SafeHtml.getStyleValue_=function(i){if(!goog.isObject(i))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof i+" given: "+i);return i instanceof goog.html.SafeStyle||(i=goog.html.SafeStyle.create(i)),goog.html.SafeStyle.unwrap(i)},goog.html.SafeHtml.createWithDir=function(i,o,s,_){return(o=goog.html.SafeHtml.create(o,s,_)).dir_=i,o},goog.html.SafeHtml.join=function(i,o){var s=(i=goog.html.SafeHtml.htmlEscape(i)).getDirection(),_=[],$=function(et){goog.isArray(et)?goog.array.forEach(et,$):(et=goog.html.SafeHtml.htmlEscape(et),_.push(goog.html.SafeHtml.unwrap(et)),et=et.getDirection(),s==goog.i18n.bidi.Dir.NEUTRAL?s=et:et!=goog.i18n.bidi.Dir.NEUTRAL&&s!=et&&(s=null))};return goog.array.forEach(o,$),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(_.join(goog.html.SafeHtml.unwrap(i)),s)},goog.html.SafeHtml.concat=function(i){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(i,o){var s=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return s.dir_=i,s},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(i,o){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(i,o)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i,o){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(i):i,this.dir_=o,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(i,o,s){var _=null,$="<"+i+goog.html.SafeHtml.stringifyAttributes(i,o);return goog.isDefAndNotNull(s)?goog.isArray(s)||(s=[s]):s=[],goog.dom.tags.isVoidTag(i.toLowerCase())?(goog.asserts.assert(!s.length,"Void tag <"+i+"> does not allow content."),$+=">"):(_=goog.html.SafeHtml.concat(s),$+=">"+goog.html.SafeHtml.unwrap(_)+"</"+i+">",_=_.getDirection()),(i=o&&o.dir)&&(_=/^(ltr|rtl|auto)$/i.test(i)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse($,_)},goog.html.SafeHtml.stringifyAttributes=function(i,o){var s="";if(o)for(var _ in o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(_))throw Error('Invalid attribute name "'+_+'".');var $=o[_];goog.isDefAndNotNull($)&&(s+=" "+goog.html.SafeHtml.getAttrNameAndValue_(i,_,$))}return s},goog.html.SafeHtml.combineAttributes=function(i,o,s){var _,$={};for(_ in i)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=i[_];for(_ in o)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=o[_];for(_ in s){var et=_.toLowerCase();if(et in i)throw Error('Cannot override "'+et+'" attribute, got "'+_+'" with value "'+s[_]+'"');et in o&&delete $[et],$[_]=s[_]}return $},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(i,o,s){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,s||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(i){if(goog.asserts.ENABLE_ASSERTS){var o=goog.dom.asserts.getWindow_(i);o&&(!i||!(i instanceof o.Location)&&i instanceof o.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(i))}return i},goog.dom.asserts.assertIsElementType_=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=goog.dom.asserts.getWindow_(i);s&&s[o]!==void 0&&(i&&(i instanceof s[o]||!(i instanceof s.Location||i instanceof s.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",o,goog.dom.asserts.debugStringForType_(i)))}return i},goog.dom.asserts.assertIsHTMLAnchorElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(i){if(!goog.isObject(i))return i===void 0?"undefined":i===null?"null":typeof i;try{return i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch{return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(i){try{var o=i&&i.ownerDocument,s=o&&(o.defaultView||o.parentWindow);if((s=s||goog.global).Element&&s.Location)return s}catch{}return null},goog.functions={},goog.functions.constant=function(i){return function(){return i}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(i,o){return i},goog.functions.error=function(i){return function(){throw Error(i)}},goog.functions.fail=function(i){return function(){throw i}},goog.functions.lock=function(i,o){return o=o||0,function(){return i.apply(this,Array.prototype.slice.call(arguments,0,o))}},goog.functions.nth=function(i){return function(){return arguments[i]}},goog.functions.partialRight=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=Array.prototype.slice.call(arguments);return _.push.apply(_,s),i.apply(this,_)}},goog.functions.withReturnValue=function(i,o){return goog.functions.sequence(i,goog.functions.constant(o))},goog.functions.equalTo=function(i,o){return function(s){return o?i==s:i===s}},goog.functions.compose=function(i,o){var s=arguments,_=s.length;return function(){var $;_&&($=s[_-1].apply(this,arguments));for(var et=_-2;0<=et;et--)$=s[et].call(this,$);return $}},goog.functions.sequence=function(i){var o=arguments,s=o.length;return function(){for(var _,$=0;$<s;$++)_=o[$].apply(this,arguments);return _}},goog.functions.and=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(!o[_].apply(this,arguments))return!1;return!0}},goog.functions.or=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(o[_].apply(this,arguments))return!0;return!1}},goog.functions.not=function(i){return function(){return!i.apply(this,arguments)}},goog.functions.create=function(i,o){var s=function(){};return s.prototype=i.prototype,s=new s,i.apply(s,Array.prototype.slice.call(arguments,1)),s},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(i){var o,s=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(s||(o=i(),s=!0),o):i()}},goog.functions.once=function(i){var o=i;return function(){if(o){var s=o;o=null,s()}}},goog.functions.debounce=function(i,o,s){var _=0;return function($){goog.global.clearTimeout(_);var et=arguments;_=goog.global.setTimeout(function(){i.apply(s,et)},o)}},goog.functions.throttle=function(i,o,s){var _=0,$=!1,et=[],tt=function(){_=0,$&&($=!1,j())},j=function(){_=goog.global.setTimeout(tt,o),i.apply(s,et)};return function(it){et=arguments,_?$=!0:j()}},goog.functions.rateLimit=function(i,o,s){var _=0,$=function(){_=0};return function(et){_||(_=goog.global.setTimeout($,o),i.apply(s,arguments))}},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(i,o,s){i.insertAdjacentHTML(o,goog.html.SafeHtml.unwrapTrustedHTML(s))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var i=document.createElement("div"),o=document.createElement("div");return o.appendChild(document.createElement("div")),i.appendChild(o),!(goog.DEBUG&&!i.firstChild)&&(o=i.firstChild.firstChild,i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!o.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(i,o){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;i.lastChild;)i.removeChild(i.lastChild);i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setInnerHtml=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=i.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[s])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+i.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(i,o)},goog.dom.safe.setOuterHtml=function(i,o){i.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setFormElementAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLFormElement(i).action=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setButtonFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLButtonElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setInputFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLInputElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setStyle=function(i,o){i.style.cssText=goog.html.SafeStyle.unwrap(o)},goog.dom.safe.documentWrite=function(i,o){i.write(goog.html.SafeHtml.unwrapTrustedHTML(o))},goog.dom.safe.setAnchorHref=function(i,o){goog.dom.asserts.assertIsHTMLAnchorElement(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setImageSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLImageElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:image\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setAudioSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLAudioElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:audio\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setVideoSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLVideoElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:video\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setEmbedSrc=function(i,o){goog.dom.asserts.assertIsHTMLEmbedElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setFrameSrc=function(i,o){goog.dom.asserts.assertIsHTMLFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrcdoc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setLinkHrefAndRel=function(i,o,s){goog.dom.asserts.assertIsHTMLLinkElement(i),i.rel=s,goog.string.internal.caseInsensitiveContains(s,"stylesheet")?(goog.asserts.assert(o instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),i.href=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)):i.href=o instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrapTrustedURL(o):o instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrapTrustedURL(o):goog.html.SafeUrl.unwrapTrustedURL(goog.html.SafeUrl.sanitizeAssertUnchanged(o))},goog.dom.safe.setObjectData=function(i,o){goog.dom.asserts.assertIsHTMLObjectElement(i),i.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setScriptSrc=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setScriptContent=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.text=goog.html.SafeScript.unwrapTrustedScript(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setLocationHref=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.assignLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.assign(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.replaceLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.replace(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.openInWindow=function(i,o,s,_,$){return i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),(o||goog.global).open(goog.html.SafeUrl.unwrapTrustedURL(i),s?goog.string.Const.unwrap(s):"",_,$)},goog.dom.safe.parseFromStringHtml=function(i,o){return goog.dom.safe.parseFromString(i,o,"text/html")},goog.dom.safe.parseFromString=function(i,o,s){return i.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(o),s)},goog.dom.safe.createImageFromBlob=function(i){if(!/^image\/.*/g.test(i.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var o=goog.global.URL.createObjectURL(i);return(i=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(o)},goog.dom.safe.setImageSrc(i,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),o)),i},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(i,o){for(var s=i.split("%s"),_="",$=Array.prototype.slice.call(arguments,1);$.length&&1<s.length;)_+=s.shift()+$.shift();return _+s.join("%s")},goog.string.collapseWhitespace=function(i){return i.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(i){return i.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(i){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(i))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(i){return!/[^\t\n\r ]/.test(i)},goog.string.isAlpha=function(i){return!/[^a-zA-Z]/.test(i)},goog.string.isNumeric=function(i){return!/[^0-9]/.test(i)},goog.string.isAlphaNumeric=function(i){return!/[^a-zA-Z0-9]/.test(i)},goog.string.isSpace=function(i){return i==" "},goog.string.isUnicodeChar=function(i){return i.length==1&&" "<=i&&"~">=i||""<=i&&"">=i},goog.string.stripNewlines=function(i){return i.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(i){return i.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(i){return i.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(i){return i.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(i){return i.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(i){return i.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(i){return i.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(i,o,s){if(i==o)return 0;if(!i)return-1;if(!o)return 1;for(var _=i.toLowerCase().match(s),$=o.toLowerCase().match(s),et=Math.min(_.length,$.length),tt=0;tt<et;tt++){s=_[tt];var j=$[tt];if(s!=j)return i=parseInt(s,10),!isNaN(i)&&(o=parseInt(j,10),!isNaN(o)&&i-o)?i-o:s<j?-1:1}return _.length!=$.length?_.length-$.length:i<o?-1:1},goog.string.intAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\D+/g)},goog.string.floatAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(i){return encodeURIComponent(String(i))},goog.string.urlDecode=function(i){return decodeURIComponent(i.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(i,o){return i=goog.string.internal.htmlEscape(i,o),goog.string.DETECT_DOUBLE_ESCAPING&&(i=i.replace(goog.string.E_RE_,"&#101;")),i},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(i){return goog.string.contains(i,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(i):goog.string.unescapePureXmlEntities_(i):i},goog.string.unescapeEntitiesWithDocument=function(i,o){return goog.string.contains(i,"&")?goog.string.unescapeEntitiesUsingDom_(i,o):i},goog.string.unescapeEntitiesUsingDom_=function(i,o){var s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},_=o?o.createElement("div"):goog.global.document.createElement("div");return i.replace(goog.string.HTML_ENTITY_PATTERN_,function($,et){var tt=s[$];return tt||(et.charAt(0)=="#"&&(et=Number("0"+et.substr(1)),isNaN(et)||(tt=String.fromCharCode(et))),tt||(goog.dom.safe.setInnerHtml(_,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),$+" ")),tt=_.firstChild.nodeValue.slice(0,-1)),s[$]=tt)})},goog.string.unescapePureXmlEntities_=function(i){return i.replace(/&([^;]+);/g,function(o,s){switch(s){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return s.charAt(0)!="#"||(s=Number("0"+s.substr(1)),isNaN(s))?o:String.fromCharCode(s)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(i,o){return goog.string.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.preserveSpaces=function(i){return i.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(i,o){for(var s=o.length,_=0;_<s;_++){var $=s==1?o:o.charAt(_);if(i.charAt(0)==$&&i.charAt(i.length-1)==$)return i.substring(1,i.length-1)}return i},goog.string.truncate=function(i,o,s){return s&&(i=goog.string.unescapeEntities(i)),i.length>o&&(i=i.substring(0,o-3)+"..."),s&&(i=goog.string.htmlEscape(i)),i},goog.string.truncateMiddle=function(i,o,s,_){if(s&&(i=goog.string.unescapeEntities(i)),_&&i.length>o){_>o&&(_=o);var $=i.length-_;i=i.substring(0,o-_)+"..."+i.substring($)}else i.length>o&&(_=Math.floor(o/2),$=i.length-_,i=i.substring(0,_+o%2)+"..."+i.substring($));return s&&(i=goog.string.htmlEscape(i)),i},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(i){i=String(i);for(var o=['"'],s=0;s<i.length;s++){var _=i.charAt(s),$=_.charCodeAt(0);o[s+1]=goog.string.specialEscapeChars_[_]||(31<$&&127>$?_:goog.string.escapeChar(_))}return o.push('"'),o.join("")},goog.string.escapeString=function(i){for(var o=[],s=0;s<i.length;s++)o[s]=goog.string.escapeChar(i.charAt(s));return o.join("")},goog.string.escapeChar=function(i){if(i in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[i];if(i in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[i]=goog.string.specialEscapeChars_[i];var o=i.charCodeAt(0);if(31<o&&127>o)var s=i;else 256>o?(s="\\x",(16>o||256<o)&&(s+="0")):(s="\\u",4096>o&&(s+="0")),s+=o.toString(16).toUpperCase();return goog.string.jsEscapeCache_[i]=s},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(i,o){return i&&o?i.split(o).length-1:0},goog.string.removeAt=function(i,o,s){var _=i;return 0<=o&&o<i.length&&0<s&&(_=i.substr(0,o)+i.substr(o+s,i.length-o-s)),_},goog.string.remove=function(i,o){return i.replace(o,"")},goog.string.removeAll=function(i,o){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,"")},goog.string.replaceAll=function(i,o,s){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,s.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(i){return String(i).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(i,o){return i.repeat(o)}:function(i,o){return Array(o+1).join(i)},goog.string.padNumber=function(i,o,s){return(s=(i=goog.isDef(s)?i.toFixed(s):String(i)).indexOf("."))==-1&&(s=i.length),goog.string.repeat("0",Math.max(0,o-s))+i},goog.string.makeSafe=function(i){return i==null?"":String(i)},goog.string.buildString=function(i){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(i){for(var o=0,s=0;s<i.length;++s)o=31*o+i.charCodeAt(s)>>>0;return o},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(i){var o=Number(i);return o==0&&goog.string.isEmptyOrWhitespace(i)?NaN:o},goog.string.isLowerCamelCase=function(i){return/^[a-z]+([A-Z][a-z]*)*$/.test(i)},goog.string.isUpperCamelCase=function(i){return/^([A-Z][a-z]*)+$/.test(i)},goog.string.toCamelCase=function(i){return String(i).replace(/\-([a-z])/g,function(o,s){return s.toUpperCase()})},goog.string.toSelectorCase=function(i){return String(i).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(i,o){return o=goog.isString(o)?goog.string.regExpEscape(o):"\\s",i.replace(new RegExp("(^"+(o?"|["+o+"]+":"")+")([a-z])","g"),function(s,_,$){return _+$.toUpperCase()})},goog.string.capitalize=function(i){return String(i.charAt(0)).toUpperCase()+String(i.substr(1)).toLowerCase()},goog.string.parseInt=function(i){return isFinite(i)&&(i=String(i)),goog.isString(i)?/^\s*-?0x/i.test(i)?parseInt(i,16):parseInt(i,10):NaN},goog.string.splitLimit=function(i,o,s){i=i.split(o);for(var _=[];0<s&&i.length;)_.push(i.shift()),s--;return i.length&&_.push(i.join(o)),_},goog.string.lastComponent=function(i,o){if(!o)return i;typeof o=="string"&&(o=[o]);for(var s=-1,_=0;_<o.length;_++)if(o[_]!=""){var $=i.lastIndexOf(o[_]);$>s&&(s=$)}return s==-1?i:i.slice(s+1)},goog.string.editDistance=function(i,o){var s=[],_=[];if(i==o)return 0;if(!i.length||!o.length)return Math.max(i.length,o.length);for(var $=0;$<o.length+1;$++)s[$]=$;for($=0;$<i.length;$++){_[0]=$+1;for(var et=0;et<o.length;et++)_[et+1]=Math.min(_[et]+1,s[et+1]+1,s[et]+Number(i[$]!=o[et]));for(et=0;et<s.length;et++)s[et]=_[et]}return _[o.length]},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent(),o="";return goog.labs.userAgent.platform.isWindows()?o=(i=(o=/Windows (?:NT|Phone) ([0-9.]+)/).exec(i))?i[1]:"0.0":goog.labs.userAgent.platform.isIos()?o=(i=(o=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(i))&&i[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?o=(i=(o=/Mac OS X ([0-9_.]+)/).exec(i))?i[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?o=(i=(o=/(?:KaiOS)\/(\S+)/i).exec(i))&&i[1]:goog.labs.userAgent.platform.isAndroid()?o=(i=(o=/Android\s+([^\);]+)(\)|;)/).exec(i))&&i[1]:goog.labs.userAgent.platform.isChromeOS()&&(o=(i=(o=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(i))&&i[1]),o||""},goog.labs.userAgent.platform.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),i)},goog.reflect={},goog.reflect.object=function(i,o){return o},goog.reflect.objectProperty=function(i,o){return i},goog.reflect.sinkValue=function(i){return goog.reflect.sinkValue[" "](i),i},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(i,o){try{return goog.reflect.sinkValue(i[o]),!0}catch{}return!1},goog.reflect.cache=function(i,o,s,_){return _=_?_(o):o,Object.prototype.hasOwnProperty.call(i,_)?i[_]:i[_]=s(o)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent();if(i){i=goog.labs.userAgent.util.extractVersionTuples(i);var o,s=goog.labs.userAgent.engine.getEngineTuple_(i);if(s)return s[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(i,"Firefox"):s[1];if((i=i[0])&&(o=i[2])&&(o=/Trident\/([^\s;]+)/.exec(o)))return o[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(i){if(!goog.labs.userAgent.engine.isEdge())return i[1];for(var o=0;o<i.length;o++){var s=i[o];if(s[0]=="Edge")return s}},goog.labs.userAgent.engine.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),i)},goog.labs.userAgent.engine.getVersionForKey_=function(i,o){return(i=goog.array.find(i,function(s){return o==s[0]}))&&i[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var i=goog.userAgent.getNavigatorTyped();return i&&i.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var i=goog.userAgent.getNavigatorTyped();return!!i&&goog.string.contains(i.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var i="",o=goog.userAgent.getVersionRegexResult_();return o&&(i=o?o[1]:""),goog.userAgent.IE&&(o=goog.userAgent.getDocumentMode_())!=null&&o>parseFloat(i)?String(o):i},goog.userAgent.getVersionRegexResult_=function(){var i=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(i):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(i):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(i):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(i):void 0},goog.userAgent.getDocumentMode_=function(){var i=goog.global.document;return i?i.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(i,o){return goog.string.compareVersions(i,o)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(i){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,i,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,i)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(i){return Number(goog.userAgent.DOCUMENT_MODE)>=i},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(i){return goog.string.contains(goog.crypt.base64.paddingChars_,i)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(i,o){goog.asserts.assert(goog.isArrayLike(i),"encodeByteArray takes an array as a parameter"),o===void 0&&(o=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),o=goog.crypt.base64.byteToCharMaps_[o];for(var s=[],_=0;_<i.length;_+=3){var $=i[_],et=_+1<i.length,tt=et?i[_+1]:0,j=_+2<i.length,it=j?i[_+2]:0,st=$>>2;$=(3&$)<<4|tt>>4,tt=(15&tt)<<2|it>>6,it&=63,j||(it=64,et||(tt=64)),s.push(o[st],o[$],o[tt]||"",o[it]||"")}return s.join("")},goog.crypt.base64.encodeString=function(i,o){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!o?goog.global.btoa(i):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(i),o)},goog.crypt.base64.decodeString=function(i,o){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!o)return goog.global.atob(i);var s="";return goog.crypt.base64.decodeStringInternal_(i,function(_){s+=String.fromCharCode(_)}),s},goog.crypt.base64.decodeStringToByteArray=function(i,o){var s=[];return goog.crypt.base64.decodeStringInternal_(i,function(_){s.push(_)}),s},goog.crypt.base64.decodeStringToUint8Array=function(i){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var o=i.length,s=3*o/4;s%3?s=Math.floor(s):goog.crypt.base64.isPadding_(i[o-1])&&(s=goog.crypt.base64.isPadding_(i[o-2])?s-2:s-1);var _=new Uint8Array(s),$=0;return goog.crypt.base64.decodeStringInternal_(i,function(et){_[$++]=et}),_.subarray(0,$)},goog.crypt.base64.decodeStringInternal_=function(i,o){function s(it){for(;_<i.length;){var st=i.charAt(_++),ht=goog.crypt.base64.charToByteMap_[st];if(ht!=null)return ht;if(!goog.string.isEmptyOrWhitespace(st))throw Error("Unknown base64 encoding at char: "+st)}return it}goog.crypt.base64.init_();for(var _=0;;){var $=s(-1),et=s(0),tt=s(64),j=s(64);if(j===64&&$===-1)break;o($<<2|et>>4),tt!=64&&(o(et<<4&240|tt>>2),j!=64&&o(tt<<6&192|j))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var i=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),o=["+/=","+/","-_=","-_.","-_"],s=0;5>s;s++){var _=i.concat(o[s].split(""));goog.crypt.base64.byteToCharMaps_[s]=_;for(var $=0;$<_.length;$++){var et=_[$],tt=goog.crypt.base64.charToByteMap_[et];tt===void 0?goog.crypt.base64.charToByteMap_[et]=$:goog.asserts.assert(tt===$)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(i){var o=i>>>0;i=Math.floor((i-o)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=o,jspb.utils.split64High=i},jspb.utils.splitInt64=function(i){var o=0>i,s=(i=Math.abs(i))>>>0;i=Math.floor((i-s)/jspb.BinaryConstants.TWO_TO_32),i>>>=0,o&&(i=~i>>>0,4294967295<(s=1+(~s>>>0))&&(s=0,4294967295<++i&&(i=0))),jspb.utils.split64Low=s,jspb.utils.split64High=i},jspb.utils.splitZigzag64=function(i){var o=0>i;i=2*Math.abs(i),jspb.utils.splitUint64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;o&&(i==0?s==0?s=i=4294967295:(s--,i=4294967295):i--),jspb.utils.split64Low=i,jspb.utils.split64High=s},jspb.utils.splitFloat32=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)0<1/i?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(i))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(i>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|2139095040)>>>0;else if(i<jspb.BinaryConstants.FLOAT32_MIN)i=Math.round(i/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|i)>>>0;else{var s=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-s),i=8388607&Math.round(i*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|s+127<<23|i)>>>0}},jspb.utils.splitFloat64=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)jspb.utils.split64High=0<1/i?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(i))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(i>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(o<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(i<jspb.BinaryConstants.FLOAT64_MIN){var s=i/Math.pow(2,-1074);i=s/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(o<<31|i)>>>0,jspb.utils.split64Low=s>>>0}else{var _=0;if(2<=(s=i))for(;2<=s&&1023>_;)_++,s/=2;else for(;1>s&&-1022<_;)s*=2,_--;i=(s=i*Math.pow(2,-_))*jspb.BinaryConstants.TWO_TO_20&1048575,s=s*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(o<<31|_+1023<<20|i)>>>0,jspb.utils.split64Low=s}},jspb.utils.splitHash64=function(i){var o=i.charCodeAt(0),s=i.charCodeAt(1),_=i.charCodeAt(2),$=i.charCodeAt(3),et=i.charCodeAt(4),tt=i.charCodeAt(5),j=i.charCodeAt(6);i=i.charCodeAt(7),jspb.utils.split64Low=o+(s<<8)+(_<<16)+($<<24)>>>0,jspb.utils.split64High=et+(tt<<8)+(j<<16)+(i<<24)>>>0},jspb.utils.joinUint64=function(i,o){return o*jspb.BinaryConstants.TWO_TO_32+(i>>>0)},jspb.utils.joinInt64=function(i,o){var s=2147483648&o;return s&&(o=~o>>>0,(i=1+~i>>>0)==0&&(o=o+1>>>0)),i=jspb.utils.joinUint64(i,o),s?-i:i},jspb.utils.toZigzag64=function(i,o,s){var _=o>>31;return s(i<<1^_,(o<<1|i>>>31)^_)},jspb.utils.joinZigzag64=function(i,o){return jspb.utils.fromZigzag64(i,o,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(i,o,s){var _=-(1&i);return s((i>>>1|o<<31)^_,o>>>1^_)},jspb.utils.joinFloat32=function(i,o){o=2*(i>>31)+1;var s=i>>>23&255;return i&=8388607,s==255?i?NaN:1/0*o:s==0?o*Math.pow(2,-149)*i:o*Math.pow(2,s-150)*(i+Math.pow(2,23))},jspb.utils.joinFloat64=function(i,o){var s=2*(o>>31)+1,_=o>>>20&2047;return i=jspb.BinaryConstants.TWO_TO_32*(1048575&o)+i,_==2047?i?NaN:1/0*s:_==0?s*Math.pow(2,-1074)*i:s*Math.pow(2,_-1075)*(i+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(i,o){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,o>>>0&255,o>>>8&255,o>>>16&255,o>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(i,o){function s($,et){return $=$?String($):"",et?"0000000".slice($.length)+$:$}if(2097151>=o)return""+(jspb.BinaryConstants.TWO_TO_32*o+i);var _=(i>>>24|o<<8)>>>0&16777215;return i=(16777215&i)+6777216*_+6710656*(o=o>>16&65535),_+=8147497*o,o*=2,1e7<=i&&(_+=Math.floor(i/1e7),i%=1e7),1e7<=_&&(o+=Math.floor(_/1e7),_%=1e7),s(o,0)+s(_,o)+s(i,1)},jspb.utils.joinSignedDecimalString=function(i,o){var s=2147483648&o;return s&&(o=~o+((i=1+~i>>>0)==0?1:0)>>>0),i=jspb.utils.joinUnsignedDecimalString(i,o),s?"-"+i:i},jspb.utils.hash64ToDecimalString=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinSignedDecimalString(i,s):jspb.utils.joinUnsignedDecimalString(i,s)},jspb.utils.hash64ArrayToDecimalStrings=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]=jspb.utils.hash64ToDecimalString(i[_],o);return s},jspb.utils.decimalStringToHash64=function(i){function o(et,tt){for(var j=0;8>j&&(et!==1||0<tt);j++)tt=et*_[j]+tt,_[j]=255&tt,tt>>>=8}goog.asserts.assert(0<i.length);var s=!1;i[0]==="-"&&(s=!0,i=i.slice(1));for(var _=[0,0,0,0,0,0,0,0],$=0;$<i.length;$++)o(10,i.charCodeAt($)-jspb.utils.ZERO_CHAR_CODE_);return s&&(function(){for(var et=0;8>et;et++)_[et]=255&~_[et]}(),o(1,1)),goog.crypt.byteArrayToString(_)},jspb.utils.splitDecimalString=function(i){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i))},jspb.utils.toHexDigit_=function(i){return String.fromCharCode(10>i?jspb.utils.ZERO_CHAR_CODE_+i:jspb.utils.A_CHAR_CODE_-10+i)},jspb.utils.fromHexCharCode_=function(i){return i>=jspb.utils.A_CHAR_CODE_?i-jspb.utils.A_CHAR_CODE_+10:i-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(i){var o=Array(18);o[0]="0",o[1]="x";for(var s=0;8>s;s++){var _=i.charCodeAt(7-s);o[2*s+2]=jspb.utils.toHexDigit_(_>>4),o[2*s+3]=jspb.utils.toHexDigit_(15&_)}return o.join("")},jspb.utils.hexStringToHash64=function(i){i=i.toLowerCase(),goog.asserts.assert(i.length==18),goog.asserts.assert(i[0]=="0"),goog.asserts.assert(i[1]=="x");for(var o="",s=0;8>s;s++){var _=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+2)),$=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+3));o=String.fromCharCode(16*_+$)+o}return o},jspb.utils.hash64ToNumber=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinInt64(i,s):jspb.utils.joinUint64(i,s)},jspb.utils.numberToHash64=function(i){return jspb.utils.splitInt64(i),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(i,o,s){for(var _=0,$=o;$<s;$++)_+=i[$]>>7;return s-o-_},jspb.utils.countVarintFields=function(i,o,s,_){var $=0;if(128>(_=8*_+jspb.BinaryConstants.WireType.VARINT))for(;o<s&&i[o++]==_;)for($++;;){var et=i[o++];if(!(128&et))break}else for(;o<s;){for(et=_;128<et;){if(i[o]!=(127&et|128))return $;o++,et>>=7}if(i[o++]!=et)break;for($++;128&(et=i[o++]););}return $},jspb.utils.countFixedFields_=function(i,o,s,_,$){var et=0;if(128>_)for(;o<s&&i[o++]==_;)et++,o+=$;else for(;o<s;){for(var tt=_;128<tt;){if(i[o++]!=(127&tt|128))return et;tt>>=7}if(i[o++]!=tt)break;et++,o+=$}return et},jspb.utils.countFixed32Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(i,o,s,_){var $=0;for(_=8*_+jspb.BinaryConstants.WireType.DELIMITED;o<s;){for(var et=_;128<et;){if(i[o++]!=(127&et|128))return $;et>>=7}if(i[o++]!=et)break;$++;for(var tt=0,j=1;tt+=(127&(et=i[o++]))*j,j*=128,(128&et)!=0;);o+=tt}return $},jspb.utils.debugBytesToTextFormat=function(i){var o='"';if(i){i=jspb.utils.byteSourceToUint8Array(i);for(var s=0;s<i.length;s++)o+="\\x",16>i[s]&&(o+="0"),o+=i[s].toString(16)}return o+'"'},jspb.utils.debugScalarToTextFormat=function(i){return typeof i=="string"?goog.string.quote(i):i.toString()},jspb.utils.stringToByteArray=function(i){for(var o=new Uint8Array(i.length),s=0;s<i.length;s++){var _=i.charCodeAt(s);if(255<_)throw Error("Conversion error: string contains codepoint outside of byte range");o[s]=_}return o},jspb.utils.byteSourceToUint8Array=function(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer||Buffer!==void 0&&i.constructor===Buffer||i.constructor===Array?new Uint8Array(i):i.constructor===String?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(i,o,s){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,i&&this.setBlock(i,o,s)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(i,o,s){if(jspb.BinaryDecoder.instanceCache_.length){var _=jspb.BinaryDecoder.instanceCache_.pop();return i&&_.setBlock(i,o,s),_}return new jspb.BinaryDecoder(i,o,s)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(i,o,s){this.bytes_=jspb.utils.byteSourceToUint8Array(i),this.start_=o!==void 0?o:0,this.end_=s!==void 0?this.start_+s:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(i){this.end_=i},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(i){this.cursor_=i},jspb.BinaryDecoder.prototype.advance=function(i){this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(i){for(var o=128,s=0,_=0,$=0;4>$&&128<=o;$++)s|=(127&(o=this.bytes_[this.cursor_++]))<<7*$;if(128<=o&&(s|=(127&(o=this.bytes_[this.cursor_++]))<<28,_|=(127&o)>>4),128<=o)for($=0;5>$&&128<=o;$++)_|=(127&(o=this.bytes_[this.cursor_++]))<<7*$+3;if(128>o)return i(s>>>0,_>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(i){return this.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(i){var o=this.bytes_,s=this.cursor_;this.cursor_+=8;for(var _=0,$=0,et=s+7;et>=s;et--)_=_<<8|o[et],$=$<<8|o[et+4];return i(_,$)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(i){for(;128<i;)this.cursor_--,i>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var i=this.bytes_,o=i[this.cursor_+0],s=127&o;return 128>o?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+1]))<<7,128>o?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+2]))<<14,128>o?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+3]))<<21,128>o?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(15&(o=i[this.cursor_+4]))<<28,128>o?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),s>>>0):(this.cursor_+=5,128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),s)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var i=this.readUnsignedVarint32();return i>>>1^-(1&i)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i},jspb.BinaryDecoder.prototype.readUint16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8|s<<16|_<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUint64(i,o)},jspb.BinaryDecoder.prototype.readUint64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUnsignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readInt8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8|s<<16|_<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinInt64(i,o)},jspb.BinaryDecoder.prototype.readInt64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinSignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readFloat=function(){var i=this.readUint32();return jspb.utils.joinFloat32(i,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinFloat64(i,o)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(i){var o=this.bytes_,s=this.cursor_;i=s+i;for(var _=[],$="";s<i;){var et=o[s++];if(128>et)_.push(et);else{if(192>et)continue;if(224>et){var tt=o[s++];_.push((31&et)<<6|63&tt)}else if(240>et){tt=o[s++];var j=o[s++];_.push((15&et)<<12|(63&tt)<<6|63&j)}else 248>et&&(et=(7&et)<<18|(63&(tt=o[s++]))<<12|(63&(j=o[s++]))<<6|63&o[s++],et-=65536,_.push(55296+(et>>10&1023),56320+(1023&et)))}8192<=_.length&&($+=String.fromCharCode.apply(null,_),_.length=0)}return $+=goog.crypt.byteArrayToString(_),this.cursor_=s,$},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var i=this.readUnsignedVarint32();return this.readString(i)},jspb.BinaryDecoder.prototype.readBytes=function(i){if(0>i||this.cursor_+i>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var o=this.bytes_.subarray(this.cursor_,this.cursor_+i);return this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_),o},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var i=this.bytes_,o=this.cursor_,s=i[o+0],_=i[o+1],$=i[o+2],et=i[o+3],tt=i[o+4],j=i[o+5],it=i[o+6];return i=i[o+7],this.cursor_+=8,String.fromCharCode(s,_,$,et,tt,j,it,i)},jspb.BinaryReader=function(i,o,s){this.decoder_=jspb.BinaryDecoder.alloc(i,o,s),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(i,o,s){if(jspb.BinaryReader.instanceCache_.length){var _=jspb.BinaryReader.instanceCache_.pop();return i&&_.decoder_.setBlock(i,o,s),_}return new jspb.BinaryReader(i,o,s)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(i,o,s){this.decoder_.setBlock(i,o,s),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(i){this.decoder_.advance(i)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var i=this.decoder_.readUnsignedVarint32(),o=i>>>3;return(i&=7)!=jspb.BinaryConstants.WireType.VARINT&&i!=jspb.BinaryConstants.WireType.FIXED32&&i!=jspb.BinaryConstants.WireType.FIXED64&&i!=jspb.BinaryConstants.WireType.DELIMITED&&i!=jspb.BinaryConstants.WireType.START_GROUP&&i!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",i,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=o,this.nextWireType_=i,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var i=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==i;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var i=this.decoder_.readUnsignedVarint32();this.decoder_.advance(i)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var i=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=i&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(i,o){this.readCallbacks_===null&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[i]),this.readCallbacks_[i]=o},jspb.BinaryReader.prototype.runReadCallback=function(i){return goog.asserts.assert(this.readCallbacks_!==null),i=this.readCallbacks_[i],goog.asserts.assert(i),i(this)},jspb.BinaryReader.prototype.readAny=function(i){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(i);var o=jspb.BinaryConstants.FieldType;switch(i){case o.DOUBLE:return this.readDouble();case o.FLOAT:return this.readFloat();case o.INT64:return this.readInt64();case o.UINT64:return this.readUint64();case o.INT32:return this.readInt32();case o.FIXED64:return this.readFixed64();case o.FIXED32:return this.readFixed32();case o.BOOL:return this.readBool();case o.STRING:return this.readString();case o.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case o.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case o.BYTES:return this.readBytes();case o.UINT32:return this.readUint32();case o.ENUM:return this.readEnum();case o.SFIXED32:return this.readSfixed32();case o.SFIXED64:return this.readSfixed64();case o.SINT32:return this.readSint32();case o.SINT64:return this.readSint64();case o.FHASH64:return this.readFixedHash64();case o.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(i,o){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var s=this.decoder_.getEnd(),_=this.decoder_.readUnsignedVarint32();_=this.decoder_.getCursor()+_,this.decoder_.setEnd(_),o(i,this),this.decoder_.setCursor(_),this.decoder_.setEnd(s)},jspb.BinaryReader.prototype.readGroup=function(i,o,s){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==i),s(o,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32(),o=this.decoder_.getCursor(),s=o+i;return i=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),o,i),this.decoder_.setCursor(s),i},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(i)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(i)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(i)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(i)},jspb.BinaryReader.prototype.readPackedField_=function(i){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var o=this.decoder_.readUnsignedVarint32();o=this.decoder_.getCursor()+o;for(var s=[];this.decoder_.getCursor()<o;)s.push(i.call(this.decoder_));return s},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(i,o){this.arr_=i,this.valueCtor_=o,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},jspb.Map.prototype.loadFromArray_=function(){for(var i=0;i<this.arr_.length;i++){var o=this.arr_[i],s=o[0];this.map_[s.toString()]=new jspb.Map.Entry_(s,o[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var i,o=this.map_;for(i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var s=o[i].valueWrapper;s&&s.toArray()}}}else{for(this.arr_.length=0,(o=this.stringKeys_()).sort(),i=0;i<o.length;i++){var _=this.map_[o[i]];(s=_.valueWrapper)&&s.toArray(),this.arr_.push([_.key,_.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(i,o){for(var s=this.toArray(),_=[],$=0;$<s.length;$++){var et=this.map_[s[$][0].toString()];this.wrapEntry_(et);var tt=et.valueWrapper;tt?(goog.asserts.assert(o),_.push([et.key,o(i,tt)])):_.push([et.key,et.value])}return _},jspb.Map.fromObject=function(i,o,s){o=new jspb.Map([],o);for(var _=0;_<i.length;_++){var $=i[_][0],et=s(i[_][1]);o.set($,et)}return o},jspb.Map.ArrayIteratorIterable_=function(i){this.idx_=0,this.arr_=i},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(i){i=i.toString();var o=this.map_.hasOwnProperty(i);return delete this.map_[i],this.arrClean=!1,o},jspb.Map.prototype.getEntryList=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,_.value])}return i},jspb.Map.prototype.entries=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,this.wrapEntry_(_)])}return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.keys=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.map_[o[s]].key);return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.values=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.wrapEntry_(this.map_[o[s]]));return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.forEach=function(i,o){var s=this.stringKeys_();s.sort();for(var _=0;_<s.length;_++){var $=this.map_[s[_]];i.call(o,this.wrapEntry_($),$.key,this)}},jspb.Map.prototype.set=function(i,o){var s=new jspb.Map.Entry_(i);return this.valueCtor_?(s.valueWrapper=o,s.value=o.toArray()):s.value=o,this.map_[i.toString()]=s,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(i){return this.valueCtor_?(i.valueWrapper||(i.valueWrapper=new this.valueCtor_(i.value)),i.valueWrapper):i.value},jspb.Map.prototype.get=function(i){if(i=this.map_[i.toString()])return this.wrapEntry_(i)},jspb.Map.prototype.has=function(i){return i.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(i,o,s,_,$){var et=this.stringKeys_();et.sort();for(var tt=0;tt<et.length;tt++){var j=this.map_[et[tt]];o.beginSubMessage(i),s.call(o,1,j.key),this.valueCtor_?_.call(o,2,this.wrapEntry_(j),$):_.call(o,2,j.value),o.endSubMessage()}},jspb.Map.deserializeBinary=function(i,o,s,_,$,et,tt){for(;o.nextField()&&!o.isEndGroup();){var j=o.getFieldNumber();j==1?et=s.call(o):j==2&&(i.valueCtor_?(goog.asserts.assert($),tt||(tt=new i.valueCtor_),_.call(o,tt,$)):tt=_.call(o))}goog.asserts.assert(et!=null),goog.asserts.assert(tt!=null),i.set(et,tt)},jspb.Map.prototype.stringKeys_=function(){var i,o=this.map_,s=[];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},jspb.Map.Entry_=function(i,o){this.key=i,this.value=o,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(i,o,s,_,$){this.fieldIndex=i,this.fieldName=o,this.ctor=s,this.toObjectFn=_,this.isRepeated=$},jspb.ExtensionFieldBinaryInfo=function(i,o,s,_,$,et){this.fieldInfo=i,this.binaryReaderFn=o,this.binaryWriterFn=s,this.binaryMessageSerializeFn=_,this.binaryMessageDeserializeFn=$,this.isPacked=et},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(i,o){return o+i.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(i,o){return o-i.arrayIndexOffset_},jspb.Message.initialize=function(i,o,s,_,$,et){if(i.wrappers_=null,o||(o=s?[s]:[]),i.messageId_=s?String(s):void 0,i.arrayIndexOffset_=s===0?-1:0,i.array=o,jspb.Message.initPivotAndExtensionObject_(i,_),i.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(i.repeatedFields=$),$)for(o=0;o<$.length;o++)(s=$[o])<i.pivot_?(s=jspb.Message.getIndex_(i,s),i.array[s]=i.array[s]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[s]=i.extensionObject_[s]||jspb.Message.EMPTY_LIST_SENTINEL_);if(et&&et.length)for(o=0;o<et.length;o++)jspb.Message.computeOneofCase(i,et[o])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(i){return jspb.Message.ASSUME_LOCAL_ARRAYS?i instanceof Array:Array.isArray(i)},jspb.Message.isExtensionObject_=function(i){return!(i===null||typeof i!="object"||jspb.Message.isArray_(i)||jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(i,o){var s=i.array.length,_=-1;if(s&&(_=s-1,s=i.array[_],jspb.Message.isExtensionObject_(s)))return i.pivot_=jspb.Message.getFieldNumber_(i,_),void(i.extensionObject_=s);-1<o?(i.pivot_=Math.max(o,jspb.Message.getFieldNumber_(i,_+1)),i.extensionObject_=null):i.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(i){var o=jspb.Message.getIndex_(i,i.pivot_);i.array[o]||(i.extensionObject_=i.array[o]={})},jspb.Message.toObjectList=function(i,o,s){for(var _=[],$=0;$<i.length;$++)_[$]=o.call(i[$],s,i[$]);return _},jspb.Message.toObjectExtension=function(i,o,s,_,$){for(var et in s){var tt=s[et],j=_.call(i,tt);if(j!=null){for(var it in tt.fieldName)if(tt.fieldName.hasOwnProperty(it))break;o[it]=tt.toObjectFn?tt.isRepeated?jspb.Message.toObjectList(j,tt.toObjectFn,$):tt.toObjectFn($,j):j}}},jspb.Message.serializeBinaryExtensions=function(i,o,s,_){for(var $ in s){var et=s[$],tt=et.fieldInfo;if(!et.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var j=_.call(i,tt);if(j!=null)if(tt.isMessageType()){if(!et.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");et.binaryWriterFn.call(o,tt.fieldIndex,j,et.binaryMessageSerializeFn)}else et.binaryWriterFn.call(o,tt.fieldIndex,j)}},jspb.Message.readBinaryExtension=function(i,o,s,_,$){var et=s[o.getFieldNumber()];if(et){if(s=et.fieldInfo,!et.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(s.isMessageType()){var tt=new s.ctor;et.binaryReaderFn.call(o,tt,et.binaryMessageDeserializeFn)}else tt=et.binaryReaderFn.call(o);s.isRepeated&&!et.isPacked?(o=_.call(i,s))?o.push(tt):$.call(i,s,[tt]):$.call(i,s,tt)}else o.skipField()},jspb.Message.getField=function(i,o){if(o<i.pivot_){o=jspb.Message.getIndex_(i,o);var s=i.array[o];return s===jspb.Message.EMPTY_LIST_SENTINEL_?i.array[o]=[]:s}if(i.extensionObject_)return(s=i.extensionObject_[o])===jspb.Message.EMPTY_LIST_SENTINEL_?i.extensionObject_[o]=[]:s},jspb.Message.getRepeatedField=function(i,o){return jspb.Message.getField(i,o)},jspb.Message.getOptionalFloatingPointField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:+i},jspb.Message.getBooleanField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:!!i},jspb.Message.getRepeatedFloatingPointField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=+s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.getRepeatedBooleanField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=!!s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.bytesAsB64=function(i){return i==null||typeof i=="string"?i:jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array?goog.crypt.base64.encodeByteArray(i):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(i)),null)},jspb.Message.bytesAsU8=function(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(i)),null)},jspb.Message.bytesListAsB64=function(i){return jspb.Message.assertConsistentTypes_(i),i.length&&typeof i[0]!="string"?goog.array.map(i,jspb.Message.bytesAsB64):i},jspb.Message.bytesListAsU8=function(i){return jspb.Message.assertConsistentTypes_(i),!i.length||i[0]instanceof Uint8Array?i:goog.array.map(i,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(i){if(goog.DEBUG&&i&&1<i.length){var o=goog.typeOf(i[0]);goog.array.forEach(i,function(s){goog.typeOf(s)!=o&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(s)+" expected "+o)})}},jspb.Message.getFieldWithDefault=function(i,o,s){return(i=jspb.Message.getField(i,o))==null?s:i},jspb.Message.getBooleanFieldWithDefault=function(i,o,s){return(i=jspb.Message.getBooleanField(i,o))==null?s:i},jspb.Message.getFloatingPointFieldWithDefault=function(i,o,s){return(i=jspb.Message.getOptionalFloatingPointField(i,o))==null?s:i},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),o in i.wrappers_)return i.wrappers_[o];var $=jspb.Message.getField(i,o);if(!$){if(s)return;$=[],jspb.Message.setField(i,o,$)}return i.wrappers_[o]=new jspb.Map($,_)},jspb.Message.setField=function(i,o,s){return goog.asserts.assertInstanceof(i,jspb.Message),o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=s:(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[o]=s),i},jspb.Message.setProto3IntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3FloatField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3BooleanField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,!1)},jspb.Message.setProto3StringField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3BytesField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3EnumField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3StringIntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"0")},jspb.Message.setFieldIgnoringDefault_=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),s!==_?jspb.Message.setField(i,o,s):o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(i),delete i.extensionObject_[o]),i},jspb.Message.addToRepeatedField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),o=jspb.Message.getRepeatedField(i,o),_!=null?o.splice(_,0,s):o.push(s),i},jspb.Message.setOneofField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),(s=jspb.Message.computeOneofCase(i,s))&&s!==o&&_!==void 0&&(i.wrappers_&&s in i.wrappers_&&(i.wrappers_[s]=void 0),jspb.Message.setField(i,s,void 0)),jspb.Message.setField(i,o,_)},jspb.Message.computeOneofCase=function(i,o){for(var s,_,$=0;$<o.length;$++){var et=o[$],tt=jspb.Message.getField(i,et);tt!=null&&(s=et,_=tt,jspb.Message.setField(i,et,void 0))}return s?(jspb.Message.setField(i,s,_),s):0},jspb.Message.getWrapperField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){var $=jspb.Message.getField(i,s);(_||$)&&(i.wrappers_[s]=new o($))}return i.wrappers_[s]},jspb.Message.getRepeatedWrapperField=function(i,o,s){return jspb.Message.wrapRepeatedField_(i,o,s),(o=i.wrappers_[s])==jspb.Message.EMPTY_LIST_SENTINEL_&&(o=i.wrappers_[s]=[]),o},jspb.Message.wrapRepeatedField_=function(i,o,s){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){for(var _=jspb.Message.getRepeatedField(i,s),$=[],et=0;et<_.length;et++)$[et]=new o(_[et]);i.wrappers_[s]=$}},jspb.Message.setWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var _=s&&s.toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.setOneofWrapperField=function(i,o,s,_){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var $=_&&_.toArray();return i.wrappers_[o]=_,jspb.Message.setOneofField(i,o,s,$)},jspb.Message.setRepeatedWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={}),s=s||[];for(var _=[],$=0;$<s.length;$++)_[$]=s[$].toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.addToRepeatedWrapperField=function(i,o,s,_,$){jspb.Message.wrapRepeatedField_(i,_,o);var et=i.wrappers_[o];return et||(et=i.wrappers_[o]=[]),s=s||new _,i=jspb.Message.getRepeatedField(i,o),$!=null?(et.splice($,0,s),i.splice($,0,s.toArray())):(et.push(s),i.push(s.toArray())),s},jspb.Message.toMap=function(i,o,s,_){for(var $={},et=0;et<i.length;et++)$[o.call(i[et])]=s?s.call(i[et],_,i[et]):i[et];return $},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var i in this.wrappers_){var o=this.wrappers_[i];if(Array.isArray(o))for(var s=0;s<o.length;s++)o[s]&&o[s].toArray();else o&&o.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(i){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var o=i.fieldIndex;if(i.isRepeated){if(i.isMessageType())return this.wrappers_[o]||(this.wrappers_[o]=goog.array.map(this.extensionObject_[o]||[],function(s){return new i.ctor(s)})),this.wrappers_[o]}else if(i.isMessageType())return!this.wrappers_[o]&&this.extensionObject_[o]&&(this.wrappers_[o]=new i.ctor(this.extensionObject_[o])),this.wrappers_[o];return this.extensionObject_[o]}},jspb.Message.prototype.setExtension=function(i,o){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var s=i.fieldIndex;return i.isRepeated?(o=o||[],i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=goog.array.map(o,function(_){return _.toArray()})):this.extensionObject_[s]=o):i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=o&&o.toArray()):this.extensionObject_[s]=o,this},jspb.Message.difference=function(i,o){if(!(i instanceof o.constructor))throw Error("Messages have different types.");var s=i.toArray();o=o.toArray();var _=[],$=0,et=s.length>o.length?s.length:o.length;for(i.getJsPbMessageId()&&(_[0]=i.getJsPbMessageId(),$=1);$<et;$++)jspb.Message.compareFields(s[$],o[$])||(_[$]=o[$]);return new i.constructor(_)},jspb.Message.equals=function(i,o){return i==o||!(!i||!o)&&i instanceof o.constructor&&jspb.Message.compareFields(i.toArray(),o.toArray())},jspb.Message.compareExtensions=function(i,o){i=i||{},o=o||{};var s,_={};for(s in i)_[s]=0;for(s in o)_[s]=0;for(s in _)if(!jspb.Message.compareFields(i[s],o[s]))return!1;return!0},jspb.Message.compareFields=function(i,o){if(i==o)return!0;if(!goog.isObject(i)||!goog.isObject(o))return!!(typeof i=="number"&&isNaN(i)||typeof o=="number"&&isNaN(o))&&String(i)==String(o);if(i.constructor!=o.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i.constructor===Uint8Array){if(i.length!=o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!=o[s])return!1;return!0}if(i.constructor===Array){var _=void 0,$=void 0,et=Math.max(i.length,o.length);for(s=0;s<et;s++){var tt=i[s],j=o[s];if(tt&&tt.constructor==Object&&(goog.asserts.assert(_===void 0),goog.asserts.assert(s===i.length-1),_=tt,tt=void 0),j&&j.constructor==Object&&(goog.asserts.assert($===void 0),goog.asserts.assert(s===o.length-1),$=j,j=void 0),!jspb.Message.compareFields(tt,j))return!1}return!_&&!$||(_=_||{},$=$||{},jspb.Message.compareExtensions(_,$))}if(i.constructor===Object)return jspb.Message.compareExtensions(i,o);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(i){return jspb.Message.cloneMessage(i)},jspb.Message.cloneMessage=function(i){return new i.constructor(jspb.Message.clone_(i.toArray()))},jspb.Message.copyInto=function(i,o){goog.asserts.assertInstanceof(i,jspb.Message),goog.asserts.assertInstanceof(o,jspb.Message),goog.asserts.assert(i.constructor==o.constructor,"Copy source and target message should have the same type."),i=jspb.Message.clone(i);for(var s=o.toArray(),_=i.toArray(),$=s.length=0;$<_.length;$++)s[$]=_[$];o.wrappers_=i.wrappers_,o.extensionObject_=i.extensionObject_},jspb.Message.clone_=function(i){if(Array.isArray(i)){for(var o=Array(i.length),s=0;s<i.length;s++){var _=i[s];_!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_)}return o}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)return new Uint8Array(i);for(s in o={},i)(_=i[s])!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_);return o},jspb.Message.registerMessageType=function(i,o){o.messageId=i},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(i,o){this.lo=i,this.hi=o},jspb.arith.UInt64.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(i){return new jspb.arith.UInt64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(i){return new jspb.arith.UInt64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(i,o){var s=65535&i,_=65535&o,$=o>>>16;for(o=s*_+65536*(s*$&65535)+65536*((i>>>=16)*_&65535),s=i*$+(s*$>>>16)+(i*_>>>16);4294967296<=o;)o-=4294967296,s+=1;return new jspb.arith.UInt64(o>>>0,s>>>0)},jspb.arith.UInt64.prototype.mul=function(i){var o=jspb.arith.UInt64.mul32x32(this.lo,i);return(i=jspb.arith.UInt64.mul32x32(this.hi,i)).hi=i.lo,i.lo=0,o.add(i)},jspb.arith.UInt64.prototype.div=function(i){if(i==0)return[];var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(this.lo,this.hi);i=new jspb.arith.UInt64(i,0);for(var _=new jspb.arith.UInt64(1,0);!i.msb();)i=i.leftShift(),_=_.leftShift();for(;!_.zero();)0>=i.cmp(s)&&(o=o.add(_),s=s.sub(i)),i=i.rightShift(),_=_.rightShift();return[o,s]},jspb.arith.UInt64.prototype.toString=function(){for(var i="",o=this;!o.zero();){var s=(o=o.div(10))[0];i=o[1].lo+i,o=s}return i==""&&(i="0"),i},jspb.arith.UInt64.fromString=function(i){for(var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(0,0),_=0;_<i.length;_++){if("0">i[_]||"9"<i[_])return null;var $=parseInt(i[_],10);s.lo=$,o=o.mul(10).add(s)}return o},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(i,o){this.lo=i,this.hi=o},jspb.arith.Int64.prototype.add=function(i){return new jspb.arith.Int64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(i){return new jspb.arith.Int64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var i=(2147483648&this.hi)!=0,o=new jspb.arith.UInt64(this.lo,this.hi);return i&&(o=new jspb.arith.UInt64(0,0).sub(o)),(i?"-":"")+o.toString()},jspb.arith.Int64.fromString=function(i){var o=0<i.length&&i[0]=="-";return o&&(i=i.substring(1)),(i=jspb.arith.UInt64.fromString(i))===null?null:(o&&(i=new jspb.arith.UInt64(0,0).sub(i)),new jspb.arith.Int64(i.lo,i.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var i=this.buffer_;return this.buffer_=[],i},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(i,o){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32);0<o||127<i;)this.buffer_.push(127&i|128),i=(i>>>7|o<<25)>>>0,o>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(i,o){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(i),this.writeUint32(o)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(i){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32);127<i;)this.buffer_.push(127&i|128),i>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(i){if(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),0<=i)this.writeUnsignedVarint32(i);else{for(var o=0;9>o;o++)this.buffer_.push(127&i|128),i>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((i<<1^i>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(i){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(i))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(i){var o=this;jspb.utils.splitHash64(i),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(s,_){o.writeSplitVarint64(s>>>0,_>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&256>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&65536>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-128<=i&&128>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-32768<=i&&32768>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(+i>=-jspb.BinaryConstants.TWO_TO_63&&+i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT32_MAX&&i<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(i),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT64_MAX&&i<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(i){goog.asserts.assert(typeof i=="boolean"||typeof i=="number"),this.buffer_.push(i?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(i)},jspb.BinaryEncoder.prototype.writeBytes=function(i){this.buffer_.push.apply(this.buffer_,i)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(i){jspb.utils.splitHash64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(i){jspb.utils.splitHash64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(i){for(var o=this.buffer_.length,s=0;s<i.length;s++){var _=i.charCodeAt(s);if(128>_)this.buffer_.push(_);else if(2048>_)this.buffer_.push(_>>6|192),this.buffer_.push(63&_|128);else if(65536>_)if(55296<=_&&56319>=_&&s+1<i.length){var $=i.charCodeAt(s+1);56320<=$&&57343>=$&&(_=1024*(_-55296)+$-56320+65536,this.buffer_.push(_>>18|240),this.buffer_.push(_>>12&63|128),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128),s++)}else this.buffer_.push(_>>12|224),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128)}return this.buffer_.length-o},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(i){var o=this.encoder_.end();this.blocks_.push(o),this.blocks_.push(i),this.totalLength_+=o.length+i.length},jspb.BinaryWriter.prototype.beginDelimited_=function(i){return this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),i=this.encoder_.end(),this.blocks_.push(i),this.totalLength_+=i.length,i.push(this.totalLength_),i},jspb.BinaryWriter.prototype.endDelimited_=function(i){var o=i.pop();for(o=this.totalLength_+this.encoder_.length()-o,goog.asserts.assert(0<=o);127<o;)i.push(127&o|128),o>>>=7,this.totalLength_++;i.push(o),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(i,o,s){this.appendUint8Array_(i.subarray(o,s))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(i,o,s){i!=null&&o!=null&&s!=null&&this.writeSerializedMessage(i,o,s)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(this.bookmarks_.length==0);for(var i=new Uint8Array(this.totalLength_+this.encoder_.length()),o=this.blocks_,s=o.length,_=0,$=0;$<s;$++){var et=o[$];i.set(et,_),_+=et.length}return o=this.encoder_.end(),i.set(o,_),_+=o.length,goog.asserts.assert(_==i.length),this.blocks_=[i],i},jspb.BinaryWriter.prototype.getResultBase64String=function(i){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),i)},jspb.BinaryWriter.prototype.beginSubMessage=function(i){this.bookmarks_.push(this.beginDelimited_(i))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(i,o){goog.asserts.assert(1<=i&&i==Math.floor(i)),this.encoder_.writeUnsignedVarint32(8*i+o)},jspb.BinaryWriter.prototype.writeAny=function(i,o,s){var _=jspb.BinaryConstants.FieldType;switch(i){case _.DOUBLE:this.writeDouble(o,s);break;case _.FLOAT:this.writeFloat(o,s);break;case _.INT64:this.writeInt64(o,s);break;case _.UINT64:this.writeUint64(o,s);break;case _.INT32:this.writeInt32(o,s);break;case _.FIXED64:this.writeFixed64(o,s);break;case _.FIXED32:this.writeFixed32(o,s);break;case _.BOOL:this.writeBool(o,s);break;case _.STRING:this.writeString(o,s);break;case _.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case _.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case _.BYTES:this.writeBytes(o,s);break;case _.UINT32:this.writeUint32(o,s);break;case _.ENUM:this.writeEnum(o,s);break;case _.SFIXED32:this.writeSfixed32(o,s);break;case _.SFIXED64:this.writeSfixed64(o,s);break;case _.SINT32:this.writeSint32(o,s);break;case _.SINT64:this.writeSint64(o,s);break;case _.FHASH64:this.writeFixedHash64(o,s);break;case _.VHASH64:this.writeVarintHash64(o,s);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(o))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(o))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(o))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(o))},jspb.BinaryWriter.prototype.writeInt32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeInt64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeUint32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeUint64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSint32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(i,o))},jspb.BinaryWriter.prototype.writeSint64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(i,o))},jspb.BinaryWriter.prototype.writeSintHash64=function(i,o){o!=null&&this.writeZigzagVarintHash64_(i,o)},jspb.BinaryWriter.prototype.writeSint64String=function(i,o){o!=null&&this.writeZigzagVarint64String_(i,o)},jspb.BinaryWriter.prototype.writeFixed32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(o))},jspb.BinaryWriter.prototype.writeFixed64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(o))},jspb.BinaryWriter.prototype.writeFixed64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(o))},jspb.BinaryWriter.prototype.writeSfixed64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(o))},jspb.BinaryWriter.prototype.writeSfixed64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeFloat=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(o))},jspb.BinaryWriter.prototype.writeDouble=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(o))},jspb.BinaryWriter.prototype.writeBool=function(i,o){o!=null&&(goog.asserts.assert(typeof o=="boolean"||typeof o=="number"),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(o))},jspb.BinaryWriter.prototype.writeEnum=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeString=function(i,o){o!=null&&(i=this.beginDelimited_(i),this.encoder_.writeString(o),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeBytes=function(i,o){o!=null&&(o=jspb.utils.byteSourceToUint8Array(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),this.appendUint8Array_(o))},jspb.BinaryWriter.prototype.writeMessage=function(i,o,s){o!=null&&(i=this.beginDelimited_(i),s(o,this),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeMessageSet=function(i,o,s){o!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(i),i=this.beginDelimited_(3),s(o,this),this.endDelimited_(i),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(i,o,s){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o,this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(o))},jspb.BinaryWriter.prototype.writeVarintHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(o))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o,s)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o,s)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT);var _=this.encoder_;jspb.utils.toZigzag64(o,s,function($,et){_.writeSplitVarint64($>>>0,et>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitFixed64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitZigzagVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64String_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarintHash64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFloat(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeDouble(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBool(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeEnum(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedString=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeString(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBytes(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++){var $=this.beginDelimited_(i);s(o[_],this),this.endDelimited_($)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++)this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o[_],this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixedHash64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeVarintHash64(i,o[s])},jspb.BinaryWriter.prototype.writePackedInt32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitFixed64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitVarint64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=this.encoder_,et=0;et<o.length;et++)jspb.utils.toZigzag64(s(o[et]),_(o[et]),function(tt,j){$.writeSplitVarint64(tt>>>0,j>>>0)});this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.Int64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.UInt64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(o[s]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeUint32(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeUint64(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++){var s=jspb.arith.UInt64.fromString(o[i]);this.encoder_.writeSplitFixed64(s.lo,s.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeInt32(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64String(o[i])},jspb.BinaryWriter.prototype.writePackedFloat=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeFloat(o[i])},jspb.BinaryWriter.prototype.writePackedDouble=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeDouble(o[i])},jspb.BinaryWriter.prototype.writePackedBool=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),i=0;i<o.length;i++)this.encoder_.writeBool(o[i])},jspb.BinaryWriter.prototype.writePackedEnum=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeEnum(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeFixedHash64(o[i])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeVarintHash64(o[s]);this.endDelimited_(i)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(this,__webpack_require__(5),__webpack_require__(4).Buffer)},function(i,o){var s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(s){var _=new Uint8Array(16);i.exports=function(){return s(_),_}}else{var $=new Array(16);i.exports=function(){for(var et,tt=0;tt<16;tt++)!(3&tt)&&(et=4294967296*Math.random()),$[tt]=et>>>((3&tt)<<3)&255;return $}}},function(i,o){for(var s=[],_=0;_<256;++_)s[_]=(_+256).toString(16).substr(1);i.exports=function($,et){var tt=et||0,j=s;return[j[$[tt++]],j[$[tt++]],j[$[tt++]],j[$[tt++]],"-",j[$[tt++]],j[$[tt++]],"-",j[$[tt++]],j[$[tt++]],"-",j[$[tt++]],j[$[tt++]],"-",j[$[tt++]],j[$[tt++]],j[$[tt++]],j[$[tt++]],j[$[tt++]],j[$[tt++]]].join("")}},function(i,o,s){(function(_){const $=s(210),et=s(49),tt=(j,it)=>({from:tt,EnvVarError:s(49),get:function(st){if(!st)return j;if(arguments.length>1)throw new et("It looks like you passed more than one argument to env.get(). Since env-var@6.0.0 this is no longer supported. To set a default value use env.get(TARGET).default(DEFAULT)");return $(j,st,it||{})}});i.exports=tt(_.env)}).call(this,s(2))},function(i,o,s){var _=s(10),$=s(71),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(st(),vt)throw vt;return}return this.log(ft,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var vt=void 0,ft=void 0;try{ft=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(pt){vt=pt}if(vt||!ft){if(j[ht].callback(),vt)throw it(null),vt}else this.log(ft,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){}},function(i,o,s){const{AbortController:_,AbortSignal:$}=typeof self<"u"?self:typeof window<"u"?window:void 0;i.exports=_,i.exports.AbortSignal=$,i.exports.default=_},function(i,o){var s=function(_){function $(){this.fetch=!1,this.DOMException=_.DOMException}return $.prototype=_,new $}(typeof self<"u"?self:this);(function(_){(function($){var et="URLSearchParams"in _,tt="Symbol"in _&&"iterator"in Symbol,j="FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch{return!1}}(),it="FormData"in _,st="ArrayBuffer"in _;if(st)var ht=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],vt=ArrayBuffer.isView||function(Nt){return Nt&&ht.indexOf(Object.prototype.toString.call(Nt))>-1};function ft(Nt){if(typeof Nt!="string"&&(Nt=String(Nt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Nt))throw new TypeError("Invalid character in header field name");return Nt.toLowerCase()}function pt(Nt){return typeof Nt!="string"&&(Nt=String(Nt)),Nt}function ct(Nt){var Ct={next:function(){var Vt=Nt.shift();return{done:Vt===void 0,value:Vt}}};return tt&&(Ct[Symbol.iterator]=function(){return Ct}),Ct}function yt(Nt){this.map={},Nt instanceof yt?Nt.forEach(function(Ct,Vt){this.append(Vt,Ct)},this):Array.isArray(Nt)?Nt.forEach(function(Ct){this.append(Ct[0],Ct[1])},this):Nt&&Object.getOwnPropertyNames(Nt).forEach(function(Ct){this.append(Ct,Nt[Ct])},this)}function Et(Nt){if(Nt.bodyUsed)return Promise.reject(new TypeError("Already read"));Nt.bodyUsed=!0}function Ot(Nt){return new Promise(function(Ct,Vt){Nt.onload=function(){Ct(Nt.result)},Nt.onerror=function(){Vt(Nt.error)}})}function Lt(Nt){var Ct=new FileReader,Vt=Ot(Ct);return Ct.readAsArrayBuffer(Nt),Vt}function Tt(Nt){if(Nt.slice)return Nt.slice(0);var Ct=new Uint8Array(Nt.byteLength);return Ct.set(new Uint8Array(Nt)),Ct.buffer}function It(){return this.bodyUsed=!1,this._initBody=function(Nt){var Ct;this._bodyInit=Nt,Nt?typeof Nt=="string"?this._bodyText=Nt:j&&Blob.prototype.isPrototypeOf(Nt)?this._bodyBlob=Nt:it&&FormData.prototype.isPrototypeOf(Nt)?this._bodyFormData=Nt:et&&URLSearchParams.prototype.isPrototypeOf(Nt)?this._bodyText=Nt.toString():st&&j&&(Ct=Nt)&&DataView.prototype.isPrototypeOf(Ct)?(this._bodyArrayBuffer=Tt(Nt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):st&&(ArrayBuffer.prototype.isPrototypeOf(Nt)||vt(Nt))?this._bodyArrayBuffer=Tt(Nt):this._bodyText=Nt=Object.prototype.toString.call(Nt):this._bodyText="",this.headers.get("content-type")||(typeof Nt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):et&&URLSearchParams.prototype.isPrototypeOf(Nt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},j&&(this.blob=function(){var Nt=Et(this);if(Nt)return Nt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Et(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Lt)}),this.text=function(){var Nt,Ct,Vt,Kt=Et(this);if(Kt)return Kt;if(this._bodyBlob)return Nt=this._bodyBlob,Ct=new FileReader,Vt=Ot(Ct),Ct.readAsText(Nt),Vt;if(this._bodyArrayBuffer)return Promise.resolve(function(Gt){for(var Ut=new Uint8Array(Gt),Ht=new Array(Ut.length),qt=0;qt<Ut.length;qt++)Ht[qt]=String.fromCharCode(Ut[qt]);return Ht.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},it&&(this.formData=function(){return this.text().then(nn)}),this.json=function(){return this.text().then(JSON.parse)},this}yt.prototype.append=function(Nt,Ct){Nt=ft(Nt),Ct=pt(Ct);var Vt=this.map[Nt];this.map[Nt]=Vt?Vt+", "+Ct:Ct},yt.prototype.delete=function(Nt){delete this.map[ft(Nt)]},yt.prototype.get=function(Nt){return Nt=ft(Nt),this.has(Nt)?this.map[Nt]:null},yt.prototype.has=function(Nt){return this.map.hasOwnProperty(ft(Nt))},yt.prototype.set=function(Nt,Ct){this.map[ft(Nt)]=pt(Ct)},yt.prototype.forEach=function(Nt,Ct){for(var Vt in this.map)this.map.hasOwnProperty(Vt)&&Nt.call(Ct,this.map[Vt],Vt,this)},yt.prototype.keys=function(){var Nt=[];return this.forEach(function(Ct,Vt){Nt.push(Vt)}),ct(Nt)},yt.prototype.values=function(){var Nt=[];return this.forEach(function(Ct){Nt.push(Ct)}),ct(Nt)},yt.prototype.entries=function(){var Nt=[];return this.forEach(function(Ct,Vt){Nt.push([Vt,Ct])}),ct(Nt)},tt&&(yt.prototype[Symbol.iterator]=yt.prototype.entries);var mt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Bt(Nt,Ct){var Vt,Kt,Gt=(Ct=Ct||{}).body;if(Nt instanceof Bt){if(Nt.bodyUsed)throw new TypeError("Already read");this.url=Nt.url,this.credentials=Nt.credentials,Ct.headers||(this.headers=new yt(Nt.headers)),this.method=Nt.method,this.mode=Nt.mode,this.signal=Nt.signal,Gt||Nt._bodyInit==null||(Gt=Nt._bodyInit,Nt.bodyUsed=!0)}else this.url=String(Nt);if(this.credentials=Ct.credentials||this.credentials||"same-origin",!Ct.headers&&this.headers||(this.headers=new yt(Ct.headers)),this.method=(Vt=Ct.method||this.method||"GET",Kt=Vt.toUpperCase(),mt.indexOf(Kt)>-1?Kt:Vt),this.mode=Ct.mode||this.mode||null,this.signal=Ct.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Gt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Gt)}function nn(Nt){var Ct=new FormData;return Nt.trim().split("&").forEach(function(Vt){if(Vt){var Kt=Vt.split("="),Gt=Kt.shift().replace(/\+/g," "),Ut=Kt.join("=").replace(/\+/g," ");Ct.append(decodeURIComponent(Gt),decodeURIComponent(Ut))}}),Ct}function sn(Nt,Ct){Ct||(Ct={}),this.type="default",this.status=Ct.status===void 0?200:Ct.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Ct?Ct.statusText:"OK",this.headers=new yt(Ct.headers),this.url=Ct.url||"",this._initBody(Nt)}Bt.prototype.clone=function(){return new Bt(this,{body:this._bodyInit})},It.call(Bt.prototype),It.call(sn.prototype),sn.prototype.clone=function(){return new sn(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new yt(this.headers),url:this.url})},sn.error=function(){var Nt=new sn(null,{status:0,statusText:""});return Nt.type="error",Nt};var xt=[301,302,303,307,308];sn.redirect=function(Nt,Ct){if(xt.indexOf(Ct)===-1)throw new RangeError("Invalid status code");return new sn(null,{status:Ct,headers:{location:Nt}})},$.DOMException=_.DOMException;try{new $.DOMException}catch{$.DOMException=function(Ct,Vt){this.message=Ct,this.name=Vt;var Kt=Error(Ct);this.stack=Kt.stack},$.DOMException.prototype=Object.create(Error.prototype),$.DOMException.prototype.constructor=$.DOMException}function St(Nt,Ct){return new Promise(function(Vt,Kt){var Gt=new Bt(Nt,Ct);if(Gt.signal&&Gt.signal.aborted)return Kt(new $.DOMException("Aborted","AbortError"));var Ut=new XMLHttpRequest;function Ht(){Ut.abort()}Ut.onload=function(){var qt,Pt,wt={status:Ut.status,statusText:Ut.statusText,headers:(qt=Ut.getAllResponseHeaders()||"",Pt=new yt,qt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Xt){var un=Xt.split(":"),dn=un.shift().trim();if(dn){var mn=un.join(":").trim();Pt.append(dn,mn)}}),Pt)};wt.url="responseURL"in Ut?Ut.responseURL:wt.headers.get("X-Request-URL");var $t="response"in Ut?Ut.response:Ut.responseText;Vt(new sn($t,wt))},Ut.onerror=function(){Kt(new TypeError("Network request failed"))},Ut.ontimeout=function(){Kt(new TypeError("Network request failed"))},Ut.onabort=function(){Kt(new $.DOMException("Aborted","AbortError"))},Ut.open(Gt.method,Gt.url,!0),Gt.credentials==="include"?Ut.withCredentials=!0:Gt.credentials==="omit"&&(Ut.withCredentials=!1),"responseType"in Ut&&j&&(Ut.responseType="blob"),Gt.headers.forEach(function(qt,Pt){Ut.setRequestHeader(Pt,qt)}),Gt.signal&&(Gt.signal.addEventListener("abort",Ht),Ut.onreadystatechange=function(){Ut.readyState===4&&Gt.signal.removeEventListener("abort",Ht)}),Ut.send(Gt._bodyInit===void 0?null:Gt._bodyInit)})}St.polyfill=!0,_.fetch||(_.fetch=St,_.Headers=yt,_.Request=Bt,_.Response=sn),$.Headers=yt,$.Request=Bt,$.Response=sn,$.fetch=St})({})})(s),delete s.fetch.polyfill,(o=s.fetch).default=s.fetch,o.fetch=s.fetch,o.Headers=s.Headers,o.Request=s.Request,o.Response=s.Response,i.exports=o},function(i,o,s){(function(_){const $=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,et=typeof AbortController=="function"?AbortController:Object.assign(class{constructor(){this.signal=new et.AbortSignal}abort(){this.signal.dispatchEvent("abort")}},{AbortSignal:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(Ot){if(Ot==="abort"){this.aborted=!0;const Lt={type:Ot,target:this};this.onabort(Lt),this._listeners.forEach(Tt=>Tt(Lt),this)}}onabort(){}addEventListener(Ot,Lt){Ot==="abort"&&this._listeners.push(Lt)}removeEventListener(Ot,Lt){Ot==="abort"&&(this._listeners=this._listeners.filter(Tt=>Tt!==Lt))}}}),tt=new Set,j=(Ot,Lt)=>{const Tt=`LRU_CACHE_OPTION_${Ot}`;ht(Tt)&&vt(Tt,`${Ot} option`,`options.${Lt}`,Et)},it=(Ot,Lt)=>{const Tt=`LRU_CACHE_METHOD_${Ot}`;if(ht(Tt)){const{prototype:It}=Et,{get:mt}=Object.getOwnPropertyDescriptor(It,Ot);vt(Tt,`${Ot} method`,`cache.${Lt}()`,mt)}},st=(...Ot)=>{typeof _=="object"&&_&&typeof _.emitWarning=="function"?_.emitWarning(...Ot):console.error(...Ot)},ht=Ot=>!tt.has(Ot),vt=(Ot,Lt,Tt,It)=>{tt.add(Ot),st(`The ${Lt} is deprecated. Please use ${Tt} instead.`,"DeprecationWarning",Ot,It)},ft=Ot=>Ot&&Ot===Math.floor(Ot)&&Ot>0&&isFinite(Ot),pt=Ot=>ft(Ot)?Ot<=Math.pow(2,8)?Uint8Array:Ot<=Math.pow(2,16)?Uint16Array:Ot<=Math.pow(2,32)?Uint32Array:Ot<=Number.MAX_SAFE_INTEGER?ct:null:null;class ct extends Array{constructor(Lt){super(Lt),this.fill(0)}}class yt{constructor(Lt){if(Lt===0)return[];const Tt=pt(Lt);this.heap=new Tt(Lt),this.length=0}push(Lt){this.heap[this.length++]=Lt}pop(){return this.heap[--this.length]}}class Et{constructor(Lt={}){const{max:Tt=0,ttl:It,ttlResolution:mt=1,ttlAutopurge:Bt,updateAgeOnGet:nn,updateAgeOnHas:sn,allowStale:xt,dispose:St,disposeAfter:Nt,noDisposeOnSet:Ct,noUpdateTTL:Vt,maxSize:Kt=0,sizeCalculation:Gt,fetchMethod:Ut}=Lt,{length:Ht,maxAge:qt,stale:Pt}=Lt instanceof Et?{}:Lt;if(Tt!==0&&!ft(Tt))throw new TypeError("max option must be a nonnegative integer");const wt=Tt?pt(Tt):Array;if(!wt)throw new Error("invalid max value: "+Tt);if(this.max=Tt,this.maxSize=Kt,this.sizeCalculation=Gt||Ht,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=Ut||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.keyMap=new Map,this.keyList=new Array(Tt).fill(null),this.valList=new Array(Tt).fill(null),this.next=new wt(Tt),this.prev=new wt(Tt),this.head=0,this.tail=0,this.free=new yt(Tt),this.initialFill=1,this.size=0,typeof St=="function"&&(this.dispose=St),typeof Nt=="function"?(this.disposeAfter=Nt,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!Ct,this.noUpdateTTL=!!Vt,this.maxSize!==0){if(!ft(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!xt||!!Pt,this.updateAgeOnGet=!!nn,this.updateAgeOnHas=!!sn,this.ttlResolution=ft(mt)||mt===0?mt:1,this.ttlAutopurge=!!Bt,this.ttl=It||qt||0,this.ttl){if(!ft(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const $t="LRU_CACHE_UNBOUNDED";ht($t)&&(tt.add($t),st("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",$t,Et))}Pt&&j("stale","allowStale"),qt&&j("maxAge","ttl"),Ht&&j("length","sizeCalculation")}getRemainingTTL(Lt){return this.has(Lt,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new ct(this.max),this.starts=new ct(this.max),this.setItemTTL=(It,mt)=>{if(this.starts[It]=mt!==0?$.now():0,this.ttls[It]=mt,mt!==0&&this.ttlAutopurge){const Bt=setTimeout(()=>{this.isStale(It)&&this.delete(this.keyList[It])},mt+1);Bt.unref&&Bt.unref()}},this.updateItemAge=It=>{this.starts[It]=this.ttls[It]!==0?$.now():0};let Lt=0;const Tt=()=>{const It=$.now();if(this.ttlResolution>0){Lt=It;const mt=setTimeout(()=>Lt=0,this.ttlResolution);mt.unref&&mt.unref()}return It};this.getRemainingTTL=It=>{const mt=this.keyMap.get(It);return mt===void 0?0:this.ttls[mt]===0||this.starts[mt]===0?1/0:this.starts[mt]+this.ttls[mt]-(Lt||Tt())},this.isStale=It=>this.ttls[It]!==0&&this.starts[It]!==0&&(Lt||Tt())-this.starts[It]>this.ttls[It]}updateItemAge(Lt){}setItemTTL(Lt,Tt){}isStale(Lt){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new ct(this.max),this.removeItemSize=Lt=>this.calculatedSize-=this.sizes[Lt],this.requireSize=(Lt,Tt,It,mt)=>{if(!ft(It)){if(!mt)throw new TypeError("invalid size value (must be positive integer)");if(typeof mt!="function")throw new TypeError("sizeCalculation must be a function");if(It=mt(Tt,Lt),!ft(It))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return It},this.addItemSize=(Lt,Tt,It,mt)=>{this.sizes[Lt]=mt;const Bt=this.maxSize-this.sizes[Lt];for(;this.calculatedSize>Bt;)this.evict(!0);this.calculatedSize+=this.sizes[Lt]}}removeItemSize(Lt){}addItemSize(Lt,Tt,It,mt){}requireSize(Lt,Tt,It,mt){if(It||mt)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:Lt=this.allowStale}={}){if(this.size)for(let Tt=this.tail;this.isValidIndex(Tt)&&(!Lt&&this.isStale(Tt)||(yield Tt),Tt!==this.head);)Tt=this.prev[Tt]}*rindexes({allowStale:Lt=this.allowStale}={}){if(this.size)for(let Tt=this.head;this.isValidIndex(Tt)&&(!Lt&&this.isStale(Tt)||(yield Tt),Tt!==this.tail);)Tt=this.next[Tt]}isValidIndex(Lt){return this.keyMap.get(this.keyList[Lt])===Lt}*entries(){for(const Lt of this.indexes())yield[this.keyList[Lt],this.valList[Lt]]}*rentries(){for(const Lt of this.rindexes())yield[this.keyList[Lt],this.valList[Lt]]}*keys(){for(const Lt of this.indexes())yield this.keyList[Lt]}*rkeys(){for(const Lt of this.rindexes())yield this.keyList[Lt]}*values(){for(const Lt of this.indexes())yield this.valList[Lt]}*rvalues(){for(const Lt of this.rindexes())yield this.valList[Lt]}[Symbol.iterator](){return this.entries()}find(Lt,Tt={}){for(const It of this.indexes())if(Lt(this.valList[It],this.keyList[It],this))return this.get(this.keyList[It],Tt)}forEach(Lt,Tt=this){for(const It of this.indexes())Lt.call(Tt,this.valList[It],this.keyList[It],this)}rforEach(Lt,Tt=this){for(const It of this.rindexes())Lt.call(Tt,this.valList[It],this.keyList[It],this)}get prune(){return it("prune","purgeStale"),this.purgeStale}purgeStale(){let Lt=!1;for(const Tt of this.rindexes({allowStale:!0}))this.isStale(Tt)&&(this.delete(this.keyList[Tt]),Lt=!0);return Lt}dump(){const Lt=[];for(const Tt of this.indexes()){const It=this.keyList[Tt],mt={value:this.valList[Tt]};this.ttls&&(mt.ttl=this.ttls[Tt]),this.sizes&&(mt.size=this.sizes[Tt]),Lt.unshift([It,mt])}return Lt}load(Lt){this.clear();for(const[Tt,It]of Lt)this.set(Tt,It.value,It)}dispose(Lt,Tt,It){}set(Lt,Tt,{ttl:It=this.ttl,noDisposeOnSet:mt=this.noDisposeOnSet,size:Bt=0,sizeCalculation:nn=this.sizeCalculation,noUpdateTTL:sn=this.noUpdateTTL}={}){Bt=this.requireSize(Lt,Tt,Bt,nn);let xt=this.size===0?void 0:this.keyMap.get(Lt);if(xt===void 0)xt=this.newIndex(),this.keyList[xt]=Lt,this.valList[xt]=Tt,this.keyMap.set(Lt,xt),this.next[this.tail]=xt,this.prev[xt]=this.tail,this.tail=xt,this.size++,this.addItemSize(xt,Tt,Lt,Bt),sn=!1;else{const St=this.valList[xt];Tt!==St&&(this.isBackgroundFetch(St)?St.__abortController.abort():mt||(this.dispose(St,Lt,"set"),this.disposeAfter&&this.disposed.push([St,Lt,"set"])),this.removeItemSize(xt),this.valList[xt]=Tt,this.addItemSize(xt,Tt,Lt,Bt)),this.moveToTail(xt)}if(It===0||this.ttl!==0||this.ttls||this.initializeTTLTracking(),sn||this.setItemTTL(xt,It),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const Lt=this.valList[this.head];return this.evict(!0),Lt}}evict(Lt){const Tt=this.head,It=this.keyList[Tt],mt=this.valList[Tt];return this.isBackgroundFetch(mt)?mt.__abortController.abort():(this.dispose(mt,It,"evict"),this.disposeAfter&&this.disposed.push([mt,It,"evict"])),this.removeItemSize(Tt),Lt&&(this.keyList[Tt]=null,this.valList[Tt]=null,this.free.push(Tt)),this.head=this.next[Tt],this.keyMap.delete(It),this.size--,Tt}has(Lt,{updateAgeOnHas:Tt=this.updateAgeOnHas}={}){const It=this.keyMap.get(Lt);return It!==void 0&&!this.isStale(It)&&(Tt&&this.updateItemAge(It),!0)}peek(Lt,{allowStale:Tt=this.allowStale}={}){const It=this.keyMap.get(Lt);if(It!==void 0&&(Tt||!this.isStale(It)))return this.valList[It]}backgroundFetch(Lt,Tt,It){const mt=Tt===void 0?void 0:this.valList[Tt];if(this.isBackgroundFetch(mt))return mt;const Bt=new et,nn={signal:Bt.signal,options:It},sn=Promise.resolve(this.fetchMethod(Lt,mt,nn)).then(xt=>(Bt.signal.aborted||this.set(Lt,xt,nn.options),xt));return sn.__abortController=Bt,sn.__staleWhileFetching=mt,Tt===void 0?(this.set(Lt,sn,nn.options),Tt=this.keyMap.get(Lt)):this.valList[Tt]=sn,sn}isBackgroundFetch(Lt){return Lt&&typeof Lt=="object"&&typeof Lt.then=="function"&&Object.prototype.hasOwnProperty.call(Lt,"__staleWhileFetching")}async fetch(Lt,{allowStale:Tt=this.allowStale,updateAgeOnGet:It=this.updateAgeOnGet,ttl:mt=this.ttl,noDisposeOnSet:Bt=this.noDisposeOnSet,size:nn=0,sizeCalculation:sn=this.sizeCalculation,noUpdateTTL:xt=this.noUpdateTTL}={}){if(!this.fetchMethod)return this.get(Lt,{allowStale:Tt,updateAgeOnGet:It});const St={allowStale:Tt,updateAgeOnGet:It,ttl:mt,noDisposeOnSet:Bt,size:nn,sizeCalculation:sn,noUpdateTTL:xt};let Nt=this.keyMap.get(Lt);if(Nt===void 0)return this.backgroundFetch(Lt,Nt,St);{const Ct=this.valList[Nt];if(this.isBackgroundFetch(Ct))return Tt&&Ct.__staleWhileFetching!==void 0?Ct.__staleWhileFetching:Ct;if(!this.isStale(Nt))return this.moveToTail(Nt),It&&this.updateItemAge(Nt),Ct;const Vt=this.backgroundFetch(Lt,Nt,St);return Tt&&Vt.__staleWhileFetching!==void 0?Vt.__staleWhileFetching:Vt}}get(Lt,{allowStale:Tt=this.allowStale,updateAgeOnGet:It=this.updateAgeOnGet}={}){const mt=this.keyMap.get(Lt);if(mt!==void 0){const Bt=this.valList[mt],nn=this.isBackgroundFetch(Bt);return this.isStale(mt)?nn?Tt?Bt.__staleWhileFetching:void 0:(this.delete(Lt),Tt?Bt:void 0):nn?void 0:(this.moveToTail(mt),It&&this.updateItemAge(mt),Bt)}}connect(Lt,Tt){this.prev[Tt]=Lt,this.next[Lt]=Tt}moveToTail(Lt){Lt!==this.tail&&(Lt===this.head?this.head=this.next[Lt]:this.connect(this.prev[Lt],this.next[Lt]),this.connect(this.tail,Lt),this.tail=Lt)}get del(){return it("del","delete"),this.delete}delete(Lt){let Tt=!1;if(this.size!==0){const It=this.keyMap.get(Lt);if(It!==void 0)if(Tt=!0,this.size===1)this.clear();else{this.removeItemSize(It);const mt=this.valList[It];this.isBackgroundFetch(mt)?mt.__abortController.abort():(this.dispose(mt,Lt,"delete"),this.disposeAfter&&this.disposed.push([mt,Lt,"delete"])),this.keyMap.delete(Lt),this.keyList[It]=null,this.valList[It]=null,It===this.tail?this.tail=this.prev[It]:It===this.head?this.head=this.next[It]:(this.next[this.prev[It]]=this.next[It],this.prev[this.next[It]]=this.prev[It]),this.size--,this.free.push(It)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return Tt}clear(){for(const Lt of this.rindexes({allowStale:!0})){const Tt=this.valList[Lt];if(this.isBackgroundFetch(Tt))Tt.__abortController.abort();else{const It=this.keyList[Lt];this.dispose(Tt,It,"delete"),this.disposeAfter&&this.disposed.push([Tt,It,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return it("reset","clear"),this.clear}get length(){return((Lt,Tt)=>{const It=`LRU_CACHE_PROPERTY_${Lt}`;if(ht(It)){const{prototype:mt}=Et,{get:Bt}=Object.getOwnPropertyDescriptor(mt,Lt);vt(It,`${Lt} property`,`cache.${Tt}`,Bt)}})("length","size"),this.size}static get AbortController(){return et}}i.exports=Et}).call(this,s(2))},function(i,o,s){var _=s(223),$=s(224),et=$;et.v1=_,et.v4=$,i.exports=et},function(i,o,s){var _=s(37).Colorizer;i.exports=function($){return _.addColors($.colors||$),$}},function(i,o,s){var _={};i.exports=_,_.themes={};var $=s(10),et=_.styles=s(108),tt=Object.defineProperties,j=new RegExp(/[\r\n]+/g);_.supportsColor=s(109).supportsColor,_.enabled===void 0&&(_.enabled=_.supportsColor()!==!1),_.enable=function(){_.enabled=!0},_.disable=function(){_.enabled=!1},_.stripColors=_.strip=function(Et){return(""+Et).replace(/\x1B\[\d+m/g,"")},_.stylize=function(Et,Ot){return _.enabled?et[Ot].open+Et+et[Ot].close:Et+""};var it=/[|\\{}()[\]^$+*?.]/g;function st(Et){var Ot=function Lt(){return pt.apply(Lt,arguments)};return Ot._styles=Et,Ot.__proto__=ft,Ot}var ht,vt=(ht={},et.grey=et.gray,Object.keys(et).forEach(function(Et){et[Et].closeRe=new RegExp(function(Ot){if(typeof Ot!="string")throw new TypeError("Expected a string");return Ot.replace(it,"\\$&")}(et[Et].close),"g"),ht[Et]={get:function(){return st(this._styles.concat(Et))}}}),ht),ft=tt(function(){},vt);function pt(){var Et=Array.prototype.slice.call(arguments),Ot=Et.map(function(Bt){return Bt!==void 0&&Bt.constructor===String?Bt:$.inspect(Bt)}).join(" ");if(!_.enabled||!Ot)return Ot;for(var Lt=Ot.indexOf(`
`)!=-1,Tt=this._styles,It=Tt.length;It--;){var mt=et[Tt[It]];Ot=mt.open+Ot.replace(mt.closeRe,mt.open)+mt.close,Lt&&(Ot=Ot.replace(j,function(Bt){return mt.close+Bt+mt.open}))}return Ot}_.setTheme=function(Et){if(typeof Et!="string")for(var Ot in Et)(function(Lt){_[Lt]=function(Tt){if(typeof Et[Lt]=="object"){var It=Tt;for(var mt in Et[Lt])It=_[Et[Lt][mt]](It);return It}return _[Et[Lt]](Tt)}})(Ot);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var ct=function(Et,Ot){var Lt=Ot.split("");return(Lt=Lt.map(Et)).join("")};for(var yt in _.trap=s(111),_.zalgo=s(112),_.maps={},_.maps.america=s(113)(_),_.maps.zebra=s(114)(_),_.maps.rainbow=s(115)(_),_.maps.random=s(116)(_),_.maps)(function(Et){_[Et]=function(Ot){return ct(_.maps[Et],Ot)}})(yt);tt(_,function(){var Et={};return Object.keys(vt).forEach(function(Ot){Et[Ot]={get:function(){return st([Ot])}}}),Et}())},function(i,o){i.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(s,_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}},function(i,o){var s={};i.exports=s;var _={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(_).forEach(function($){var et=_[$],tt=s[$]=[];tt.open="\x1B["+et[0]+"m",tt.close="\x1B["+et[1]+"m"})},function(i,o,s){(function(_){var $=s(15),et=s(110),tt=_.env,j=void 0;function it(st){return function(ht){return ht!==0&&{level:ht,hasBasic:!0,has256:ht>=2,has16m:ht>=3}}(function(ht){if(j===!1)return 0;if(et("color=16m")||et("color=full")||et("color=truecolor"))return 3;if(et("color=256"))return 2;if(ht&&!ht.isTTY&&j!==!0)return 0;var vt=j?1:0;if(_.platform==="win32"){var ft=$.release().split(".");return Number(_.versions.node.split(".")[0])>=8&&Number(ft[0])>=10&&Number(ft[2])>=10586?Number(ft[2])>=14931?3:2:1}if("CI"in tt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(ct){return ct in tt})||tt.CI_NAME==="codeship"?1:vt;if("TEAMCITY_VERSION"in tt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(tt.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in tt){var pt=parseInt((tt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(tt.TERM_PROGRAM){case"iTerm.app":return pt>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test("xterm-256color")?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test("xterm-256color")||"COLORTERM"in tt?1:vt}(st))}et("no-color")||et("no-colors")||et("color=false")?j=!1:(et("color")||et("colors")||et("color=true")||et("color=always"))&&(j=!0),"FORCE_COLOR"in tt&&(j=tt.FORCE_COLOR.length===0||parseInt(tt.FORCE_COLOR,10)!==0),i.exports={supportsColor:it,stdout:it(_.stdout),stderr:it(_.stderr)}}).call(this,s(2))},function(i,o,s){(function(_){i.exports=function($,et){var tt=(et=et||_.argv).indexOf("--"),j=/^-{1,2}/.test($)?"":"--",it=et.indexOf(j+$);return it!==-1&&(tt===-1||it<tt)}}).call(this,s(2))},function(i,o){i.exports=function(s,_){var $="";s=(s=s||"Run the trap, drop the bass").split("");var et={a:["@","","","","","",""],b:["","","","","",""],c:["","",""],d:["","","","","",""],e:["","","","","","","",""],f:[""],g:[""],h:["","","","","",""],i:[""],j:[""],k:["","","",""],l:[""],m:["","","","","",""],n:["","","","","",""],o:["","","","","","","","",""],p:["",""],q:[""],r:["","","","","",""],s:["","","",""],t:["","",""],u:["",""],v:[""],w:["","","",""],x:["","","",""],y:["","",""],z:["",""]};return s.forEach(function(tt){tt=tt.toLowerCase();var j=et[tt]||[" "],it=Math.floor(Math.random()*j.length);$+=et[tt]!==void 0?et[tt][it]:tt}),$}},function(i,o){i.exports=function(s,_){s=s||"   he is here   ";var $={up:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],down:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mid:["","","","","","","","","","","","","","","","","","","","",""," "]},et=[].concat($.up,$.down,$.mid);function tt(it){return Math.floor(Math.random()*it)}function j(it){var st=!1;return et.filter(function(ht){st=ht===it}),st}return function(it,st){var ht,vt,ft="";for(vt in(st=st||{}).up=st.up===void 0||st.up,st.mid=st.mid===void 0||st.mid,st.down=st.down===void 0||st.down,st.size=st.size!==void 0?st.size:"maxi",it=it.split(""))if(!j(vt)){switch(ft+=it[vt],ht={up:0,down:0,mid:0},st.size){case"mini":ht.up=tt(8),ht.mid=tt(2),ht.down=tt(8);break;case"maxi":ht.up=tt(16)+3,ht.mid=tt(4)+1,ht.down=tt(64)+3;break;default:ht.up=tt(8)+1,ht.mid=tt(6)/2,ht.down=tt(8)+1}var pt=["up","mid","down"];for(var ct in pt)for(var yt=pt[ct],Et=0;Et<=ht[yt];Et++)st[yt]&&(ft+=$[yt][tt($[yt].length)])}return ft}(s,_)}},function(i,o){i.exports=function(s){return function(_,$,et){if(_===" ")return _;switch($%3){case 0:return s.red(_);case 1:return s.white(_);case 2:return s.blue(_)}}}},function(i,o){i.exports=function(s){return function(_,$,et){return $%2==0?_:s.inverse(_)}}},function(i,o){i.exports=function(s){var _=["red","yellow","green","blue","magenta"];return function($,et,tt){return $===" "?$:s[_[et++%_.length]]($)}}},function(i,o){i.exports=function(s){var _=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta"];return function($,et,tt){return $===" "?$:s[_[Math.round(Math.random()*(_.length-2))]]($)}}},function(i,o,s){Object.defineProperty(o,"cli",{value:s(118)}),Object.defineProperty(o,"npm",{value:s(119)}),Object.defineProperty(o,"syslog",{value:s(120)})},function(i,o,s){o.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},o.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},function(i,o,s){o.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},o.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},function(i,o,s){o.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},o.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},function(i,o,s){var _=s(9);i.exports=_(function($){return $.message="	".concat($.message),$})},function(i,o,s){function _(vt,ft){if(!(vt instanceof ft))throw new TypeError("Cannot call a class as a function")}function $(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var et=s(37).Colorizer,tt=s(58).Padder,j=s(3),it=j.configs,st=j.MESSAGE,ht=function(){function vt(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,vt),ct.levels||(ct.levels=it.npm.levels),this.colorizer=new et(ct),this.padder=new tt(ct),this.options=ct}var ft,pt;return ft=vt,(pt=[{key:"transform",value:function(ct,yt){return this.colorizer.transform(this.padder.transform(ct,yt),yt),ct[st]="".concat(ct.level,":").concat(ct.message),ct}}])&&$(ft.prototype,pt),vt}();i.exports=function(vt){return new ht(vt)},i.exports.Format=ht},function(i,o,s){var _=s(9);function $(tt){if(tt.every(et))return function(j){for(var it=j,st=0;st<tt.length;st++)if(!(it=tt[st].transform(it,tt[st].options)))return!1;return it}}function et(tt){if(typeof tt.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}i.exports=function(){for(var tt=arguments.length,j=new Array(tt),it=0;it<tt;it++)j[it]=arguments[it];var st=_($(j)),ht=st();return ht.Format=st.Format,ht},i.exports.cascade=$},function(i,o,s){(function(_){var $=s(9),et=s(3).MESSAGE,tt=s(30);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$(function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it})}).call(this,s(4).Buffer)},function(i,o,s){o.byteLength=function(vt){var ft=st(vt),pt=ft[0],ct=ft[1];return 3*(pt+ct)/4-ct},o.toByteArray=function(vt){for(var ft,pt=st(vt),ct=pt[0],yt=pt[1],Et=new et(function(It,mt,Bt){return 3*(mt+Bt)/4-Bt}(0,ct,yt)),Ot=0,Lt=yt>0?ct-4:ct,Tt=0;Tt<Lt;Tt+=4)ft=$[vt.charCodeAt(Tt)]<<18|$[vt.charCodeAt(Tt+1)]<<12|$[vt.charCodeAt(Tt+2)]<<6|$[vt.charCodeAt(Tt+3)],Et[Ot++]=ft>>16&255,Et[Ot++]=ft>>8&255,Et[Ot++]=255&ft;return yt===2&&(ft=$[vt.charCodeAt(Tt)]<<2|$[vt.charCodeAt(Tt+1)]>>4,Et[Ot++]=255&ft),yt===1&&(ft=$[vt.charCodeAt(Tt)]<<10|$[vt.charCodeAt(Tt+1)]<<4|$[vt.charCodeAt(Tt+2)]>>2,Et[Ot++]=ft>>8&255,Et[Ot++]=255&ft),Et},o.fromByteArray=function(vt){for(var ft,pt=vt.length,ct=pt%3,yt=[],Et=0,Ot=pt-ct;Et<Ot;Et+=16383)yt.push(ht(vt,Et,Et+16383>Ot?Ot:Et+16383));return ct===1?(ft=vt[pt-1],yt.push(_[ft>>2]+_[ft<<4&63]+"==")):ct===2&&(ft=(vt[pt-2]<<8)+vt[pt-1],yt.push(_[ft>>10]+_[ft>>4&63]+_[ft<<2&63]+"=")),yt.join("")};for(var _=[],$=[],et=typeof Uint8Array<"u"?Uint8Array:Array,tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,it=tt.length;j<it;++j)_[j]=tt[j],$[tt.charCodeAt(j)]=j;function st(vt){var ft=vt.length;if(ft%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var pt=vt.indexOf("=");return pt===-1&&(pt=ft),[pt,pt===ft?0:4-pt%4]}function ht(vt,ft,pt){for(var ct,yt,Et=[],Ot=ft;Ot<pt;Ot+=3)ct=(vt[Ot]<<16&16711680)+(vt[Ot+1]<<8&65280)+(255&vt[Ot+2]),Et.push(_[(yt=ct)>>18&63]+_[yt>>12&63]+_[yt>>6&63]+_[63&yt]);return Et.join("")}$["-".charCodeAt(0)]=62,$["_".charCodeAt(0)]=63},function(i,o){o.read=function(s,_,$,et,tt){var j,it,st=8*tt-et-1,ht=(1<<st)-1,vt=ht>>1,ft=-7,pt=$?tt-1:0,ct=$?-1:1,yt=s[_+pt];for(pt+=ct,j=yt&(1<<-ft)-1,yt>>=-ft,ft+=st;ft>0;j=256*j+s[_+pt],pt+=ct,ft-=8);for(it=j&(1<<-ft)-1,j>>=-ft,ft+=et;ft>0;it=256*it+s[_+pt],pt+=ct,ft-=8);if(j===0)j=1-vt;else{if(j===ht)return it?NaN:1/0*(yt?-1:1);it+=Math.pow(2,et),j-=vt}return(yt?-1:1)*it*Math.pow(2,j-et)},o.write=function(s,_,$,et,tt,j){var it,st,ht,vt=8*j-tt-1,ft=(1<<vt)-1,pt=ft>>1,ct=tt===23?Math.pow(2,-24)-Math.pow(2,-77):0,yt=et?0:j-1,Et=et?1:-1,Ot=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(st=isNaN(_)?1:0,it=ft):(it=Math.floor(Math.log(_)/Math.LN2),_*(ht=Math.pow(2,-it))<1&&(it--,ht*=2),(_+=it+pt>=1?ct/ht:ct*Math.pow(2,1-pt))*ht>=2&&(it++,ht/=2),it+pt>=ft?(st=0,it=ft):it+pt>=1?(st=(_*ht-1)*Math.pow(2,tt),it+=pt):(st=_*Math.pow(2,pt-1)*Math.pow(2,tt),it=0));tt>=8;s[$+yt]=255&st,yt+=Et,st/=256,tt-=8);for(it=it<<tt|st,vt+=tt;vt>0;s[$+yt]=255&it,yt+=Et,it/=256,vt-=8);s[$+yt-Et]|=128*Ot}},function(i,o,s){var _=s(9);i.exports=_(function($,et){return et.message?($.message="[".concat(et.label,"] ").concat($.message),$):($.label=et.label,$)})},function(i,o,s){var _=s(9),$=s(3).MESSAGE,et=s(30);i.exports=_(function(tt){var j={};return tt.message&&(j["@message"]=tt.message,delete tt.message),tt.timestamp&&(j["@timestamp"]=tt.timestamp,delete tt.timestamp),j["@fields"]=tt,tt[$]=et(j),tt})},function(i,o,s){var _=s(9);function $(tt,j,it){var st,ht,vt,ft=j.reduce(function(ct,yt){return ct[yt]=tt[yt],delete tt[yt],ct},{}),pt=Object.keys(tt).reduce(function(ct,yt){return ct[yt]=tt[yt],delete tt[yt],ct},{});return Object.assign(tt,ft,(vt=pt,(ht=it)in(st={})?Object.defineProperty(st,ht,{value:vt,enumerable:!0,configurable:!0,writable:!0}):st[ht]=vt,st)),tt}function et(tt,j,it){return tt[it]=j.reduce(function(st,ht){return st[ht]=tt[ht],delete tt[ht],st},{}),tt}i.exports=_(function(tt){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it="metadata";j.key&&(it=j.key);var st=[];return j.fillExcept||j.fillWith||(st.push("level"),st.push("message")),j.fillExcept&&(st=j.fillExcept),st.length>0?$(tt,st,it):j.fillWith?et(tt,j.fillWith,it):tt})},function(i,o,s){var _=s(10).inspect,$=s(9),et=s(3),tt=et.LEVEL,j=et.MESSAGE,it=et.SPLAT;i.exports=$(function(st){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=Object.assign({},st);return delete vt[tt],delete vt[j],delete vt[it],st[j]=_(vt,!1,ht.depth||null,ht.colorize),st})},function(i,o,s){function _(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var $=s(3).MESSAGE,et=function(){function tt(st){(function(ht,vt){if(!(ht instanceof vt))throw new TypeError("Cannot call a class as a function")})(this,tt),this.template=st}var j,it;return j=tt,(it=[{key:"transform",value:function(st){return st[$]=this.template(st),st}}])&&_(j.prototype,it),tt}();i.exports=function(tt){return new et(tt)},i.exports.Printf=i.exports.Format=et},function(i,o,s){var _=s(9),$=s(3).MESSAGE,et=s(30);i.exports=_(function(tt){var j=et(Object.assign({},tt,{level:void 0,message:void 0,splat:void 0})),it=tt.padding&&tt.padding[tt.level]||"";return tt[$]=j!=="{}"?"".concat(tt.level,":").concat(it," ").concat(tt.message," ").concat(j):"".concat(tt.level,":").concat(it," ").concat(tt.message),tt})},function(i,o,s){function _(vt){return function(ft){if(Array.isArray(ft))return $(ft)}(vt)||function(ft){if(typeof Symbol<"u"&&Symbol.iterator in Object(ft))return Array.from(ft)}(vt)||function(ft,pt){if(ft){if(typeof ft=="string")return $(ft,pt);var ct=Object.prototype.toString.call(ft).slice(8,-1);if(ct==="Object"&&ft.constructor&&(ct=ft.constructor.name),ct==="Map"||ct==="Set")return Array.from(ft);if(ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct))return $(ft,pt)}}(vt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(vt,ft){(ft==null||ft>vt.length)&&(ft=vt.length);for(var pt=0,ct=new Array(ft);pt<ft;pt++)ct[pt]=vt[pt];return ct}function et(vt,ft){for(var pt=0;pt<ft.length;pt++){var ct=ft[pt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(vt,ct.key,ct)}}var tt=s(10),j=s(3).SPLAT,it=/%[scdjifoO%]/g,st=/%%/g,ht=function(){function vt(ct){(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")})(this,vt),this.options=ct}var ft,pt;return ft=vt,(pt=[{key:"_splat",value:function(ct,yt){var Et=ct.message,Ot=ct[j]||ct.splat||[],Lt=Et.match(st),Tt=Lt&&Lt.length||0,It=yt.length-Tt-Ot.length,mt=It<0?Ot.splice(It,-1*It):[],Bt=mt.length;if(Bt)for(var nn=0;nn<Bt;nn++)Object.assign(ct,mt[nn]);return ct.message=tt.format.apply(tt,[Et].concat(_(Ot))),ct}},{key:"transform",value:function(ct){var yt=ct.message,Et=ct[j]||ct.splat;if(!Et||!Et.length)return ct;var Ot=yt&&yt.match&&yt.match(it);if(!Ot&&(Et||Et.length)){var Lt=Et.length>1?Et.splice(0):Et,Tt=Lt.length;if(Tt)for(var It=0;It<Tt;It++)Object.assign(ct,Lt[It]);return ct}return Ot?this._splat(ct,Ot):ct}}])&&et(ft.prototype,pt),vt}();i.exports=function(vt){return new ht(vt)}},function(i,o,s){var _=s(135),$=s(9);i.exports=$(function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tt.format&&(et.timestamp=typeof tt.format=="function"?tt.format():_.format(new Date,tt.format)),et.timestamp||(et.timestamp=new Date().toISOString()),tt.alias&&(et[tt.alias]=et.timestamp),et})},function(i,o,s){s.r(o),s.d(o,"assign",function(){return it}),s.d(o,"format",function(){return St}),s.d(o,"parse",function(){return Nt}),s.d(o,"defaultI18n",function(){return ft}),s.d(o,"setGlobalDateI18n",function(){return ct}),s.d(o,"setGlobalDateMasks",function(){return xt});var _=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$="[^\\s]+",et=/\[([^]*?)\]/gm;function tt(Vt,Kt){for(var Gt=[],Ut=0,Ht=Vt.length;Ut<Ht;Ut++)Gt.push(Vt[Ut].substr(0,Kt));return Gt}var j=function(Vt){return function(Kt,Gt){var Ut=Gt[Vt].map(function(Ht){return Ht.toLowerCase()}).indexOf(Kt.toLowerCase());return Ut>-1?Ut:null}};function it(Vt){for(var Kt=[],Gt=1;Gt<arguments.length;Gt++)Kt[Gt-1]=arguments[Gt];for(var Ut=0,Ht=Kt;Ut<Ht.length;Ut++){var qt=Ht[Ut];for(var Pt in qt)Vt[Pt]=qt[Pt]}return Vt}var st=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ht=["January","February","March","April","May","June","July","August","September","October","November","December"],vt=tt(ht,3),ft={dayNamesShort:tt(st,3),dayNames:st,monthNamesShort:vt,monthNames:ht,amPm:["am","pm"],DoFn:function(Vt){return Vt+["th","st","nd","rd"][Vt%10>3?0:(Vt-Vt%10!=10?1:0)*Vt%10]}},pt=it({},ft),ct=function(Vt){return pt=it(pt,Vt)},yt=function(Vt){return Vt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Et=function(Vt,Kt){for(Kt===void 0&&(Kt=2),Vt=String(Vt);Vt.length<Kt;)Vt="0"+Vt;return Vt},Ot={D:function(Vt){return String(Vt.getDate())},DD:function(Vt){return Et(Vt.getDate())},Do:function(Vt,Kt){return Kt.DoFn(Vt.getDate())},d:function(Vt){return String(Vt.getDay())},dd:function(Vt){return Et(Vt.getDay())},ddd:function(Vt,Kt){return Kt.dayNamesShort[Vt.getDay()]},dddd:function(Vt,Kt){return Kt.dayNames[Vt.getDay()]},M:function(Vt){return String(Vt.getMonth()+1)},MM:function(Vt){return Et(Vt.getMonth()+1)},MMM:function(Vt,Kt){return Kt.monthNamesShort[Vt.getMonth()]},MMMM:function(Vt,Kt){return Kt.monthNames[Vt.getMonth()]},YY:function(Vt){return Et(String(Vt.getFullYear()),4).substr(2)},YYYY:function(Vt){return Et(Vt.getFullYear(),4)},h:function(Vt){return String(Vt.getHours()%12||12)},hh:function(Vt){return Et(Vt.getHours()%12||12)},H:function(Vt){return String(Vt.getHours())},HH:function(Vt){return Et(Vt.getHours())},m:function(Vt){return String(Vt.getMinutes())},mm:function(Vt){return Et(Vt.getMinutes())},s:function(Vt){return String(Vt.getSeconds())},ss:function(Vt){return Et(Vt.getSeconds())},S:function(Vt){return String(Math.round(Vt.getMilliseconds()/100))},SS:function(Vt){return Et(Math.round(Vt.getMilliseconds()/10),2)},SSS:function(Vt){return Et(Vt.getMilliseconds(),3)},a:function(Vt,Kt){return Vt.getHours()<12?Kt.amPm[0]:Kt.amPm[1]},A:function(Vt,Kt){return Vt.getHours()<12?Kt.amPm[0].toUpperCase():Kt.amPm[1].toUpperCase()},ZZ:function(Vt){var Kt=Vt.getTimezoneOffset();return(Kt>0?"-":"+")+Et(100*Math.floor(Math.abs(Kt)/60)+Math.abs(Kt)%60,4)},Z:function(Vt){var Kt=Vt.getTimezoneOffset();return(Kt>0?"-":"+")+Et(Math.floor(Math.abs(Kt)/60),2)+":"+Et(Math.abs(Kt)%60,2)}},Lt=function(Vt){return+Vt-1},Tt=[null,"[1-9]\\d?"],It=[null,$],mt=["isPm",$,function(Vt,Kt){var Gt=Vt.toLowerCase();return Gt===Kt.amPm[0]?0:Gt===Kt.amPm[1]?1:null}],Bt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(Vt){var Kt=(Vt+"").match(/([+-]|\d\d)/gi);if(Kt){var Gt=60*+Kt[1]+parseInt(Kt[2],10);return Kt[0]==="+"?Gt:-Gt}return 0}],nn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+$,function(Vt){return parseInt(Vt,10)}],M:["month","[1-9]\\d?",Lt],MM:["month","\\d\\d",Lt],YY:["year","\\d\\d",function(Vt){var Kt=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+Vt>68?Kt-1:Kt)+Vt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(Vt){return 100*+Vt}],SS:["millisecond","\\d\\d",function(Vt){return 10*+Vt}],SSS:["millisecond","\\d{3}"],d:Tt,dd:Tt,ddd:It,dddd:It,MMM:["month",$,j("monthNamesShort")],MMMM:["month",$,j("monthNames")],a:mt,A:mt,ZZ:Bt,Z:Bt},sn={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},xt=function(Vt){return it(sn,Vt)},St=function(Vt,Kt,Gt){if(Kt===void 0&&(Kt=sn.default),Gt===void 0&&(Gt={}),typeof Vt=="number"&&(Vt=new Date(Vt)),Object.prototype.toString.call(Vt)!=="[object Date]"||isNaN(Vt.getTime()))throw new Error("Invalid Date pass to format");var Ut=[];Kt=(Kt=sn[Kt]||Kt).replace(et,function(qt,Pt){return Ut.push(Pt),"@@@"});var Ht=it(it({},pt),Gt);return(Kt=Kt.replace(_,function(qt){return Ot[qt](Vt,Ht)})).replace(/@@@/g,function(){return Ut.shift()})};function Nt(Vt,Kt,Gt){if(Gt===void 0&&(Gt={}),typeof Kt!="string")throw new Error("Invalid format in fecha parse");if(Kt=sn[Kt]||Kt,Vt.length>1e3)return null;var Ut={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Ht=[],qt=[],Pt=Kt.replace(et,function(hn,An){return qt.push(yt(An)),"@@@"}),wt={},$t={};Pt=yt(Pt).replace(_,function(hn){var An=nn[hn],Mn=An[0],Yn=An[1],Nr=An[3];if(wt[Mn])throw new Error("Invalid format. "+Mn+" specified twice in format");return wt[Mn]=!0,Nr&&($t[Nr]=!0),Ht.push(An),"("+Yn+")"}),Object.keys($t).forEach(function(hn){if(!wt[hn])throw new Error("Invalid format. "+hn+" is required in specified format")}),Pt=Pt.replace(/@@@/g,function(){return qt.shift()});var Xt=Vt.match(new RegExp(Pt,"i"));if(!Xt)return null;for(var un=it(it({},pt),Gt),dn=1;dn<Xt.length;dn++){var mn=Ht[dn-1],an=mn[0],en=mn[2],Mt=en?en(Xt[dn],un):+Xt[dn];if(Mt==null)return null;Ut[an]=Mt}Ut.isPm===1&&Ut.hour!=null&&+Ut.hour!=12?Ut.hour=+Ut.hour+12:Ut.isPm===0&&+Ut.hour==12&&(Ut.hour=0);for(var jt=new Date(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute,Ut.second,Ut.millisecond),Qt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],gn=(dn=0,Qt.length);dn<gn;dn++)if(wt[Qt[dn][0]]&&Ut[Qt[dn][0]]!==jt[Qt[dn][1]]())return null;return Ut.timezoneOffset==null?jt:new Date(Date.UTC(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute-Ut.timezoneOffset,Ut.second,Ut.millisecond))}var Ct={format:St,parse:Nt,defaultI18n:ft,setGlobalDateI18n:ct,setGlobalDateMasks:xt};o.default=Ct},function(i,o,s){var _=s(57),$=s(9),et=s(3).MESSAGE;i.exports=$(function(tt,j){return j.level!==!1&&(tt.level=_.strip(tt.level)),j.message!==!1&&(tt.message=_.strip(tt.message)),j.raw!==!1&&tt[et]&&(tt[et]=_.strip(tt[et])),tt})},function(i){i.exports=JSON.parse('{"name":"winston","description":"A logger for just about everything.","version":"3.3.3","author":"Charlie Robbins <charlie.robbins@gmail.com>","maintainers":["Jarrett Cruger <jcrugzz@gmail.com>","Chris Alderson <chrisalderson@protonmail.com>","David Hyde <dabh@stanford.edu>"],"repository":{"type":"git","url":"https://github.com/winstonjs/winston.git"},"keywords":["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],"dependencies":{"async":"^3.1.0","@dabh/diagnostics":"^2.0.2","is-stream":"^2.0.0","logform":"^2.2.0","one-time":"^1.0.0","readable-stream":"^3.4.0","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.4.0"},"devDependencies":{"@babel/cli":"^7.10.3","@babel/core":"^7.10.3","@babel/preset-env":"^7.10.3","@types/node":"^14.0.13","abstract-winston-transport":"^0.5.1","assume":"^2.2.0","colors":"^1.4.0","cross-spawn-async":"^2.2.5","eslint-config-populist":"^4.2.0","hock":"^1.4.1","mocha":"^8.0.1","nyc":"^15.1.0","rimraf":"^3.0.2","split2":"^3.1.1","std-mocks":"^1.0.1","through2":"^3.0.1","winston-compat":"^0.1.5"},"main":"./lib/winston","browser":"./dist/winston","types":"./index.d.ts","scripts":{"lint":"populist lib/*.js lib/winston/*.js lib/winston/**/*.js","pretest":"npm run lint","test":"nyc --reporter=text --reporter lcov npm run test:mocha","test:mocha":"mocha test/*.test.js test/**/*.test.js --exit","build":"./node_modules/.bin/rimraf dist && babel lib -d dist","prepublishOnly":"npm run build"},"engines":{"node":">= 6.4.0"},"license":"MIT"}')},function(i,o,s){Object.defineProperty(o,"Console",{configurable:!0,enumerable:!0,get:function(){return s(139)}}),Object.defineProperty(o,"File",{configurable:!0,enumerable:!0,get:function(){return s(148)}}),Object.defineProperty(o,"Http",{configurable:!0,enumerable:!0,get:function(){return s(188)}}),Object.defineProperty(o,"Stream",{configurable:!0,enumerable:!0,get:function(){return s(200)}})},function(i,o,s){(function(_){function $(Et){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Et)}function et(Et,Ot){if(!(Et instanceof Ot))throw new TypeError("Cannot call a class as a function")}function tt(Et,Ot){for(var Lt=0;Lt<Ot.length;Lt++){var Tt=Ot[Lt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(Et,Tt.key,Tt)}}function j(Et,Ot){return(j=Object.setPrototypeOf||function(Lt,Tt){return Lt.__proto__=Tt,Lt})(Et,Ot)}function it(Et){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Lt,Tt=ht(Et);if(Ot){var It=ht(this).constructor;Lt=Reflect.construct(Tt,arguments,It)}else Lt=Tt.apply(this,arguments);return st(this,Lt)}}function st(Et,Ot){return!Ot||$(Ot)!=="object"&&typeof Ot!="function"?function(Lt){if(Lt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Lt}(Et):Ot}function ht(Et){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Ot){return Ot.__proto__||Object.getPrototypeOf(Ot)})(Et)}var vt=s(15),ft=s(3),pt=ft.LEVEL,ct=ft.MESSAGE,yt=s(17);i.exports=function(Et){(function(mt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function");mt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:mt,writable:!0,configurable:!0}}),Bt&&j(mt,Bt)})(It,Et);var Ot,Lt,Tt=it(It);function It(){var mt,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return et(this,It),(mt=Tt.call(this,Bt)).name=Bt.name||"console",mt.stderrLevels=mt._stringArrayToSet(Bt.stderrLevels),mt.consoleWarnLevels=mt._stringArrayToSet(Bt.consoleWarnLevels),mt.eol=Bt.eol||vt.EOL,mt.setMaxListeners(30),mt}return Ot=It,(Lt=[{key:"log",value:function(mt,Bt){var nn=this;return _(function(){return nn.emit("logged",mt)}),this.stderrLevels[mt[pt]]?(console._stderr?console._stderr.write("".concat(mt[ct]).concat(this.eol)):console.error(mt[ct]),void(Bt&&Bt())):this.consoleWarnLevels[mt[pt]]?(console._stderr?console._stderr.write("".concat(mt[ct]).concat(this.eol)):console.warn(mt[ct]),void(Bt&&Bt())):(console._stdout?console._stdout.write("".concat(mt[ct]).concat(this.eol)):console.log(mt[ct]),void(Bt&&Bt()))}},{key:"_stringArrayToSet",value:function(mt,Bt){if(!mt)return{};if(Bt=Bt||"Cannot make set from type other than Array of string elements",!Array.isArray(mt))throw new Error(Bt);return mt.reduce(function(nn,sn){if(typeof sn!="string")throw new Error(Bt);return nn[sn]=!0,nn},{})}}])&&tt(Ot.prototype,Lt),It}(yt)}).call(this,s(12).setImmediate)},function(i,o,s){(function(_,$){(function(et,tt){if(!et.setImmediate){var j,it,st,ht,vt,ft=1,pt={},ct=!1,yt=et.document,Et=Object.getPrototypeOf&&Object.getPrototypeOf(et);Et=Et&&Et.setTimeout?Et:et,{}.toString.call(et.process)==="[object process]"?j=function(Tt){$.nextTick(function(){Lt(Tt)})}:function(){if(et.postMessage&&!et.importScripts){var Tt=!0,It=et.onmessage;return et.onmessage=function(){Tt=!1},et.postMessage("","*"),et.onmessage=It,Tt}}()?(ht="setImmediate$"+Math.random()+"$",vt=function(Tt){Tt.source===et&&typeof Tt.data=="string"&&Tt.data.indexOf(ht)===0&&Lt(+Tt.data.slice(ht.length))},et.addEventListener?et.addEventListener("message",vt,!1):et.attachEvent("onmessage",vt),j=function(Tt){et.postMessage(ht+Tt,"*")}):et.MessageChannel?((st=new MessageChannel).port1.onmessage=function(Tt){Lt(Tt.data)},j=function(Tt){st.port2.postMessage(Tt)}):yt&&"onreadystatechange"in yt.createElement("script")?(it=yt.documentElement,j=function(Tt){var It=yt.createElement("script");It.onreadystatechange=function(){Lt(Tt),It.onreadystatechange=null,it.removeChild(It),It=null},it.appendChild(It)}):j=function(Tt){setTimeout(Lt,0,Tt)},Et.setImmediate=function(Tt){typeof Tt!="function"&&(Tt=new Function(""+Tt));for(var It=new Array(arguments.length-1),mt=0;mt<It.length;mt++)It[mt]=arguments[mt+1];var Bt={callback:Tt,args:It};return pt[ft]=Bt,j(ft),ft++},Et.clearImmediate=Ot}function Ot(Tt){delete pt[Tt]}function Lt(Tt){if(ct)setTimeout(Lt,0,Tt);else{var It=pt[Tt];if(It){ct=!0;try{(function(mt){var Bt=mt.callback,nn=mt.args;switch(nn.length){case 0:Bt();break;case 1:Bt(nn[0]);break;case 2:Bt(nn[0],nn[1]);break;case 3:Bt(nn[0],nn[1],nn[2]);break;default:Bt.apply(void 0,nn)}})(It)}finally{Ot(Tt),ct=!1}}}}})(typeof self>"u"?_===void 0?this:_:self)}).call(this,s(5),s(2))},function(i,o,s){i.exports=s(60)},function(i,o,s){(function(_,$){var et=s(13);i.exports=It;var tt,j=s(38);It.ReadableState=Tt,s(18).EventEmitter;var it=function(Pt,wt){return Pt.listeners(wt).length},st=s(61),ht=s(40).Buffer,vt=_.Uint8Array||function(){},ft=Object.create(s(14));ft.inherits=s(7);var pt=s(143),ct=void 0;ct=pt&&pt.debuglog?pt.debuglog("stream"):function(){};var yt,Et=s(144),Ot=s(62);ft.inherits(It,st);var Lt=["error","close","destroy","pause","resume"];function Tt(Pt,wt){Pt=Pt||{};var $t=wt instanceof(tt=tt||s(31));this.objectMode=!!Pt.objectMode,$t&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var Xt=Pt.highWaterMark,un=Pt.readableHighWaterMark,dn=this.objectMode?16:16384;this.highWaterMark=Xt||Xt===0?Xt:$t&&(un||un===0)?un:dn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(19).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function It(Pt){if(tt=tt||s(31),!(this instanceof It))return new It(Pt);this._readableState=new Tt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function mt(Pt,wt,$t,Xt,un){var dn,mn=Pt._readableState;return wt===null?(mn.reading=!1,function(an,en){if(!en.ended){if(en.decoder){var Mt=en.decoder.end();Mt&&Mt.length&&(en.buffer.push(Mt),en.length+=en.objectMode?1:Mt.length)}en.ended=!0,sn(an)}}(Pt,mn)):(un||(dn=function(an,en){var Mt;jt=en,ht.isBuffer(jt)||jt instanceof vt||typeof en=="string"||en===void 0||an.objectMode||(Mt=new TypeError("Invalid non-string/buffer chunk"));var jt;return Mt}(mn,wt)),dn?Pt.emit("error",dn):mn.objectMode||wt&&wt.length>0?(typeof wt=="string"||mn.objectMode||Object.getPrototypeOf(wt)===ht.prototype||(wt=function(an){return ht.from(an)}(wt)),Xt?mn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Bt(Pt,mn,wt,!0):mn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(mn.reading=!1,mn.decoder&&!$t?(wt=mn.decoder.write(wt),mn.objectMode||wt.length!==0?Bt(Pt,mn,wt,!1):St(Pt,mn)):Bt(Pt,mn,wt,!1))):Xt||(mn.reading=!1)),function(an){return!an.ended&&(an.needReadable||an.length<an.highWaterMark||an.length===0)}(mn)}function Bt(Pt,wt,$t,Xt){wt.flowing&&wt.length===0&&!wt.sync?(Pt.emit("data",$t),Pt.read(0)):(wt.length+=wt.objectMode?1:$t.length,Xt?wt.buffer.unshift($t):wt.buffer.push($t),wt.needReadable&&sn(Pt)),St(Pt,wt)}Object.defineProperty(It.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),It.prototype.destroy=Ot.destroy,It.prototype._undestroy=Ot.undestroy,It.prototype._destroy=function(Pt,wt){this.push(null),wt(Pt)},It.prototype.push=function(Pt,wt){var $t,Xt=this._readableState;return Xt.objectMode?$t=!0:typeof Pt=="string"&&((wt=wt||Xt.defaultEncoding)!==Xt.encoding&&(Pt=ht.from(Pt,wt),wt=""),$t=!0),mt(this,Pt,wt,!1,$t)},It.prototype.unshift=function(Pt){return mt(this,Pt,null,!0,!1)},It.prototype.isPaused=function(){return this._readableState.flowing===!1},It.prototype.setEncoding=function(Pt){return yt||(yt=s(19).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,wt){return Pt<=0||wt.length===0&&wt.ended?0:wt.objectMode?1:Pt!=Pt?wt.flowing&&wt.length?wt.buffer.head.data.length:wt.length:(Pt>wt.highWaterMark&&(wt.highWaterMark=function($t){return $t>=8388608?$t=8388608:($t--,$t|=$t>>>1,$t|=$t>>>2,$t|=$t>>>4,$t|=$t>>>8,$t|=$t>>>16,$t++),$t}(Pt)),Pt<=wt.length?Pt:wt.ended?wt.length:(wt.needReadable=!0,0))}function sn(Pt){var wt=Pt._readableState;wt.needReadable=!1,wt.emittedReadable||(ct("emitReadable",wt.flowing),wt.emittedReadable=!0,wt.sync?et.nextTick(xt,Pt):xt(Pt))}function xt(Pt){ct("emit readable"),Pt.emit("readable"),Kt(Pt)}function St(Pt,wt){wt.readingMore||(wt.readingMore=!0,et.nextTick(Nt,Pt,wt))}function Nt(Pt,wt){for(var $t=wt.length;!wt.reading&&!wt.flowing&&!wt.ended&&wt.length<wt.highWaterMark&&(ct("maybeReadMore read 0"),Pt.read(0),$t!==wt.length);)$t=wt.length;wt.readingMore=!1}function Ct(Pt){ct("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,wt){wt.reading||(ct("resume read 0"),Pt.read(0)),wt.resumeScheduled=!1,wt.awaitDrain=0,Pt.emit("resume"),Kt(Pt),wt.flowing&&!wt.reading&&Pt.read(0)}function Kt(Pt){var wt=Pt._readableState;for(ct("flow",wt.flowing);wt.flowing&&Pt.read()!==null;);}function Gt(Pt,wt){return wt.length===0?null:(wt.objectMode?$t=wt.buffer.shift():!Pt||Pt>=wt.length?($t=wt.decoder?wt.buffer.join(""):wt.buffer.length===1?wt.buffer.head.data:wt.buffer.concat(wt.length),wt.buffer.clear()):$t=function(Xt,un,dn){var mn;return Xt<un.head.data.length?(mn=un.head.data.slice(0,Xt),un.head.data=un.head.data.slice(Xt)):mn=Xt===un.head.data.length?un.shift():dn?function(an,en){var Mt=en.head,jt=1,Qt=Mt.data;for(an-=Qt.length;Mt=Mt.next;){var gn=Mt.data,hn=an>gn.length?gn.length:an;if(hn===gn.length?Qt+=gn:Qt+=gn.slice(0,an),(an-=hn)===0){hn===gn.length?(++jt,Mt.next?en.head=Mt.next:en.head=en.tail=null):(en.head=Mt,Mt.data=gn.slice(hn));break}++jt}return en.length-=jt,Qt}(Xt,un):function(an,en){var Mt=ht.allocUnsafe(an),jt=en.head,Qt=1;for(jt.data.copy(Mt),an-=jt.data.length;jt=jt.next;){var gn=jt.data,hn=an>gn.length?gn.length:an;if(gn.copy(Mt,Mt.length-an,0,hn),(an-=hn)===0){hn===gn.length?(++Qt,jt.next?en.head=jt.next:en.head=en.tail=null):(en.head=jt,jt.data=gn.slice(hn));break}++Qt}return en.length-=Qt,Mt}(Xt,un),mn}(Pt,wt.buffer,wt.decoder),$t);var $t}function Ut(Pt){var wt=Pt._readableState;if(wt.length>0)throw new Error('"endReadable()" called on non-empty stream');wt.endEmitted||(wt.ended=!0,et.nextTick(Ht,wt,Pt))}function Ht(Pt,wt){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,wt.readable=!1,wt.emit("end"))}function qt(Pt,wt){for(var $t=0,Xt=Pt.length;$t<Xt;$t++)if(Pt[$t]===wt)return $t;return-1}It.prototype.read=function(Pt){ct("read",Pt),Pt=parseInt(Pt,10);var wt=this._readableState,$t=Pt;if(Pt!==0&&(wt.emittedReadable=!1),Pt===0&&wt.needReadable&&(wt.length>=wt.highWaterMark||wt.ended))return ct("read: emitReadable",wt.length,wt.ended),wt.length===0&&wt.ended?Ut(this):sn(this),null;if((Pt=nn(Pt,wt))===0&&wt.ended)return wt.length===0&&Ut(this),null;var Xt,un=wt.needReadable;return ct("need readable",un),(wt.length===0||wt.length-Pt<wt.highWaterMark)&&ct("length less than watermark",un=!0),wt.ended||wt.reading?ct("reading or ended",un=!1):un&&(ct("do read"),wt.reading=!0,wt.sync=!0,wt.length===0&&(wt.needReadable=!0),this._read(wt.highWaterMark),wt.sync=!1,wt.reading||(Pt=nn($t,wt))),(Xt=Pt>0?Gt(Pt,wt):null)===null?(wt.needReadable=!0,Pt=0):wt.length-=Pt,wt.length===0&&(wt.ended||(wt.needReadable=!0),$t!==Pt&&wt.ended&&Ut(this)),Xt!==null&&this.emit("data",Xt),Xt},It.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},It.prototype.pipe=function(Pt,wt){var $t=this,Xt=this._readableState;switch(Xt.pipesCount){case 0:Xt.pipes=Pt;break;case 1:Xt.pipes=[Xt.pipes,Pt];break;default:Xt.pipes.push(Pt)}Xt.pipesCount+=1,ct("pipe count=%d opts=%j",Xt.pipesCount,wt);var un=(!wt||wt.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?mn:An;function dn(Mn,Yn){ct("onunpipe"),Mn===$t&&Yn&&Yn.hasUnpiped===!1&&(Yn.hasUnpiped=!0,ct("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",an),Pt.removeListener("error",Qt),Pt.removeListener("unpipe",dn),$t.removeListener("end",mn),$t.removeListener("end",An),$t.removeListener("data",jt),en=!0,!Xt.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||an())}function mn(){ct("onend"),Pt.end()}Xt.endEmitted?et.nextTick(un):$t.once("end",un),Pt.on("unpipe",dn);var an=function(Mn){return function(){var Yn=Mn._readableState;ct("pipeOnDrain",Yn.awaitDrain),Yn.awaitDrain&&Yn.awaitDrain--,Yn.awaitDrain===0&&it(Mn,"data")&&(Yn.flowing=!0,Kt(Mn))}}($t);Pt.on("drain",an);var en=!1,Mt=!1;function jt(Mn){ct("ondata"),Mt=!1,Pt.write(Mn)!==!1||Mt||((Xt.pipesCount===1&&Xt.pipes===Pt||Xt.pipesCount>1&&qt(Xt.pipes,Pt)!==-1)&&!en&&(ct("false write response, pause",$t._readableState.awaitDrain),$t._readableState.awaitDrain++,Mt=!0),$t.pause())}function Qt(Mn){ct("onerror",Mn),An(),Pt.removeListener("error",Qt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),An()}function hn(){ct("onfinish"),Pt.removeListener("close",gn),An()}function An(){ct("unpipe"),$t.unpipe(Pt)}return $t.on("data",jt),function(Mn,Yn,Nr){if(typeof Mn.prependListener=="function")return Mn.prependListener(Yn,Nr);Mn._events&&Mn._events[Yn]?j(Mn._events[Yn])?Mn._events[Yn].unshift(Nr):Mn._events[Yn]=[Nr,Mn._events[Yn]]:Mn.on(Yn,Nr)}(Pt,"error",Qt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",$t),Xt.flowing||(ct("pipe resume"),$t.resume()),Pt},It.prototype.unpipe=function(Pt){var wt=this._readableState,$t={hasUnpiped:!1};if(wt.pipesCount===0)return this;if(wt.pipesCount===1)return Pt&&Pt!==wt.pipes||(Pt||(Pt=wt.pipes),wt.pipes=null,wt.pipesCount=0,wt.flowing=!1,Pt&&Pt.emit("unpipe",this,$t)),this;if(!Pt){var Xt=wt.pipes,un=wt.pipesCount;wt.pipes=null,wt.pipesCount=0,wt.flowing=!1;for(var dn=0;dn<un;dn++)Xt[dn].emit("unpipe",this,$t);return this}var mn=qt(wt.pipes,Pt);return mn===-1||(wt.pipes.splice(mn,1),wt.pipesCount-=1,wt.pipesCount===1&&(wt.pipes=wt.pipes[0]),Pt.emit("unpipe",this,$t)),this},It.prototype.on=function(Pt,wt){var $t=st.prototype.on.call(this,Pt,wt);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var Xt=this._readableState;Xt.endEmitted||Xt.readableListening||(Xt.readableListening=Xt.needReadable=!0,Xt.emittedReadable=!1,Xt.reading?Xt.length&&sn(this):et.nextTick(Ct,this))}return $t},It.prototype.addListener=It.prototype.on,It.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ct("resume"),Pt.flowing=!0,function(wt,$t){$t.resumeScheduled||($t.resumeScheduled=!0,et.nextTick(Vt,wt,$t))}(this,Pt)),this},It.prototype.pause=function(){return ct("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ct("pause"),this._readableState.flowing=!1,this.emit("pause")),this},It.prototype.wrap=function(Pt){var wt=this,$t=this._readableState,Xt=!1;for(var un in Pt.on("end",function(){if(ct("wrapped end"),$t.decoder&&!$t.ended){var mn=$t.decoder.end();mn&&mn.length&&wt.push(mn)}wt.push(null)}),Pt.on("data",function(mn){ct("wrapped data"),$t.decoder&&(mn=$t.decoder.write(mn)),$t.objectMode&&mn==null||($t.objectMode||mn&&mn.length)&&(wt.push(mn)||(Xt=!0,Pt.pause()))}),Pt)this[un]===void 0&&typeof Pt[un]=="function"&&(this[un]=function(mn){return function(){return Pt[mn].apply(Pt,arguments)}}(un));for(var dn=0;dn<Lt.length;dn++)Pt.on(Lt[dn],this.emit.bind(this,Lt[dn]));return this._read=function(mn){ct("wrapped _read",mn),Xt&&(Xt=!1,Pt.resume())},this},Object.defineProperty(It.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),It._fromList=Gt}).call(this,s(5),s(2))},function(i,o){},function(i,o,s){var _=s(40).Buffer,$=s(145);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),vt=this.head,ft=0;vt;)j=vt.data,it=ht,st=ft,j.copy(it,st),ft+=vt.data.length,vt=vt.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){var _=s(4),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){var _=s(10),$=s(3).LEVEL,et=s(17),tt=i.exports=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");function it(st){this.emit("error",st,this.transport)}this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=it.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(var st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([this.transport.name+" is a legacy winston transport. Consider upgrading: ","- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){(function(_,$){function et(xt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St})(xt)}function tt(xt,St){if(!(xt instanceof St))throw new TypeError("Cannot call a class as a function")}function j(xt,St){for(var Nt=0;Nt<St.length;Nt++){var Ct=St[Nt];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(xt,Ct.key,Ct)}}function it(xt,St){return(it=Object.setPrototypeOf||function(Nt,Ct){return Nt.__proto__=Ct,Nt})(xt,St)}function st(xt){var St=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Nt,Ct=ft(xt);if(St){var Vt=ft(this).constructor;Nt=Reflect.construct(Ct,arguments,Vt)}else Nt=Ct.apply(this,arguments);return ht(this,Nt)}}function ht(xt,St){return!St||et(St)!=="object"&&typeof St!="function"?vt(xt):St}function vt(xt){if(xt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xt}function ft(xt){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(St){return St.__proto__||Object.getPrototypeOf(St)})(xt)}var pt=s(63),ct=s(53),yt=s(149),Et=s(159),Ot=s(3).MESSAGE,Lt=s(28),Tt=Lt.Stream,It=Lt.PassThrough,mt=s(17),Bt=s(33)("winston:file"),nn=s(15),sn=s(187);i.exports=function(xt){(function(Kt,Gt){if(typeof Gt!="function"&&Gt!==null)throw new TypeError("Super expression must either be null or a function");Kt.prototype=Object.create(Gt&&Gt.prototype,{constructor:{value:Kt,writable:!0,configurable:!0}}),Gt&&it(Kt,Gt)})(Vt,xt);var St,Nt,Ct=st(Vt);function Vt(){var Kt,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function Ut(Ht){for(var qt=arguments.length,Pt=new Array(qt>1?qt-1:0),wt=1;wt<qt;wt++)Pt[wt-1]=arguments[wt];Pt.slice(1).forEach(function($t){if(Gt[$t])throw new Error("Cannot set ".concat($t," and ").concat(Ht," together"))})}if(tt(this,Vt),(Kt=Ct.call(this,Gt)).name=Gt.name||"file",Kt._stream=new It,Kt._stream.setMaxListeners(30),Kt._onError=Kt._onError.bind(vt(Kt)),Gt.filename||Gt.dirname)Ut("filename or dirname","stream"),Kt._basename=Kt.filename=Gt.filename?ct.basename(Gt.filename):"winston.log",Kt.dirname=Gt.dirname||ct.dirname(Gt.filename),Kt.options=Gt.options||{flags:"a"};else{if(!Gt.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),Ut("stream","filename","maxsize"),Kt._dest=Kt._stream.pipe(Kt._setupStream(Gt.stream)),Kt.dirname=ct.dirname(Kt._dest.path)}return Kt.maxsize=Gt.maxsize||null,Kt.rotationFormat=Gt.rotationFormat||!1,Kt.zippedArchive=Gt.zippedArchive||!1,Kt.maxFiles=Gt.maxFiles||null,Kt.eol=Gt.eol||nn.EOL,Kt.tailable=Gt.tailable||!1,Kt._size=0,Kt._pendingSize=0,Kt._created=0,Kt._drain=!1,Kt._opening=!1,Kt._ending=!1,Kt.dirname&&Kt._createLogDirIfNotExist(Kt.dirname),Kt.open(),Kt}return St=Vt,(Nt=[{key:"finishIfEnding",value:function(){var Kt=this;this._ending&&(this._opening?this.once("open",function(){Kt._stream.once("finish",function(){return Kt.emit("finish")}),_(function(){return Kt._stream.end()})}):(this._stream.once("finish",function(){return Kt.emit("finish")}),_(function(){return Kt._stream.end()})))}},{key:"log",value:function(Kt){var Gt=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};if(this.silent)return Ut(),!0;if(this._drain)this._stream.once("drain",function(){Gt._drain=!1,Gt.log(Kt,Ut)});else{if(!this._rotate){var Ht="".concat(Kt[Ot]).concat(this.eol),qt=$.byteLength(Ht);this._pendingSize+=qt,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);var Pt=this._stream.write(Ht,wt.bind(this));return Pt?Ut():(this._drain=!0,this._stream.once("drain",function(){Gt._drain=!1,Ut()})),Bt("written",Pt,this._drain),this.finishIfEnding(),Pt}this._stream.once("rotate",function(){Gt._rotate=!1,Gt.log(Kt,Ut)})}function wt(){var $t=this;this._size+=qt,this._pendingSize-=qt,Bt("logged %s %s",this._size,Ht),this.emit("logged",Kt),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream(function(){return $t._rotateFile()}))}}},{key:"query",value:function(Kt,Gt){typeof Kt=="function"&&(Gt=Kt,Kt={}),Kt=function(Xt){return(Xt=Xt||{}).rows=Xt.rows||Xt.limit||10,Xt.start=Xt.start||0,Xt.until=Xt.until||new Date,et(Xt.until)!=="object"&&(Xt.until=new Date(Xt.until)),Xt.from=Xt.from||Xt.until-864e5,et(Xt.from)!=="object"&&(Xt.from=new Date(Xt.from)),Xt.order=Xt.order||"desc",Xt}(Kt);var Ut=ct.join(this.dirname,this.filename),Ht="",qt=[],Pt=0,wt=pt.createReadStream(Ut,{encoding:"utf8"});function $t(Xt,un){try{var dn=JSON.parse(Xt);(function(mn){if(mn&&et(mn)==="object"){var an=new Date(mn.timestamp);if(!(Kt.from&&an<Kt.from||Kt.until&&an>Kt.until||Kt.level&&Kt.level!==mn.level))return!0}})(dn)&&function(mn){Kt.rows&&qt.length>=Kt.rows&&Kt.order!=="desc"?wt.readable&&wt.destroy():(Kt.fields&&(mn=Kt.fields.reduce(function(an,en){return an[en]=mn[en],an},{})),Kt.order==="desc"&&qt.length>=Kt.rows&&qt.shift(),qt.push(mn))}(dn)}catch(mn){un||wt.emit("error",mn)}}wt.on("error",function(Xt){if(wt.readable&&wt.destroy(),Gt)return Xt.code!=="ENOENT"?Gt(Xt):Gt(null,qt)}),wt.on("data",function(Xt){for(var un=(Xt=(Ht+Xt).split(/\n+/)).length-1,dn=0;dn<un;dn++)(!Kt.start||Pt>=Kt.start)&&$t(Xt[dn]),Pt++;Ht=Xt[un]}),wt.on("close",function(){Ht&&$t(Ht,!0),Kt.order==="desc"&&(qt=qt.reverse()),Gt&&Gt(null,qt)})}},{key:"stream",value:function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Gt=ct.join(this.dirname,this.filename),Ut=new Tt,Ht={file:Gt,start:Kt.start};return Ut.destroy=sn(Ht,function(qt,Pt){if(qt)return Ut.emit("error",qt);try{Ut.emit("data",Pt),Pt=JSON.parse(Pt),Ut.emit("log",Pt)}catch(wt){Ut.emit("error",wt)}}),Ut}},{key:"open",value:function(){var Kt=this;this.filename&&(this._opening||(this._opening=!0,this.stat(function(Gt,Ut){if(Gt)return Kt.emit("error",Gt);Bt("stat done: %s { size: %s }",Kt.filename,Ut),Kt._size=Ut,Kt._dest=Kt._createStream(Kt._stream),Kt._opening=!1,Kt.once("open",function(){Kt._stream.eventNames().includes("rotate")?Kt._stream.emit("rotate"):Kt._rotate=!1})})))}},{key:"stat",value:function(Kt){var Gt=this,Ut=this._getFile(),Ht=ct.join(this.dirname,Ut);pt.stat(Ht,function(qt,Pt){return qt&&qt.code==="ENOENT"?(Bt("ENOENTok",Ht),Gt.filename=Ut,Kt(null,0)):qt?(Bt("err ".concat(qt.code," ").concat(Ht)),Kt(qt)):!Pt||Gt._needsNewFile(Pt.size)?Gt._incFile(function(){return Gt.stat(Kt)}):(Gt.filename=Ut,void Kt(null,Pt.size))})}},{key:"close",value:function(Kt){var Gt=this;this._stream&&this._stream.end(function(){Kt&&Kt(),Gt.emit("flush"),Gt.emit("closed")})}},{key:"_needsNewFile",value:function(Kt){return Kt=Kt||this._size,this.maxsize&&Kt>=this.maxsize}},{key:"_onError",value:function(Kt){this.emit("error",Kt)}},{key:"_setupStream",value:function(Kt){return Kt.on("error",this._onError),Kt}},{key:"_cleanupStream",value:function(Kt){return Kt.removeListener("error",this._onError),Kt}},{key:"_rotateFile",value:function(){var Kt=this;this._incFile(function(){return Kt.open()})}},{key:"_endStream",value:function(){var Kt=this,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this._dest?(this._stream.unpipe(this._dest),this._dest.end(function(){Kt._cleanupStream(Kt._dest),Gt()})):Gt()}},{key:"_createStream",value:function(Kt){var Gt=this,Ut=ct.join(this.dirname,this.filename);Bt("create stream start",Ut,this.options);var Ht=pt.createWriteStream(Ut,this.options).on("error",function(Pt){return Bt(Pt)}).on("close",function(){return Bt("close",Ht.path,Ht.bytesWritten)}).on("open",function(){Bt("file open ok",Ut),Gt.emit("open",Ut),Kt.pipe(Ht),Gt.rotatedWhileOpening&&(Gt._stream=new It,Gt._stream.setMaxListeners(30),Gt._rotateFile(),Gt.rotatedWhileOpening=!1,Gt._cleanupStream(Ht),Kt.end())});if(Bt("create stream ok",Ut),this.zippedArchive){var qt=Et.createGzip();return qt.pipe(Ht),qt}return Ht}},{key:"_incFile",value:function(Kt){Bt("_incFile",this.filename);var Gt=ct.extname(this._basename),Ut=ct.basename(this._basename,Gt);this.tailable?this._checkMaxFilesTailable(Gt,Ut,Kt):(this._created+=1,this._checkMaxFilesIncrementing(Gt,Ut,Kt))}},{key:"_getFile",value:function(){var Kt=ct.extname(this._basename),Gt=ct.basename(this._basename,Kt),Ut=this.rotationFormat?this.rotationFormat():this._created,Ht=!this.tailable&&this._created?"".concat(Gt).concat(Ut).concat(Kt):"".concat(Gt).concat(Kt);return this.zippedArchive&&!this.tailable?"".concat(Ht,".gz"):Ht}},{key:"_checkMaxFilesIncrementing",value:function(Kt,Gt,Ut){if(!this.maxFiles||this._created<this.maxFiles)return _(Ut);var Ht=this._created-this.maxFiles,qt=Ht!==0?Ht:"",Pt=this.zippedArchive?".gz":"",wt="".concat(Gt).concat(qt).concat(Kt).concat(Pt),$t=ct.join(this.dirname,wt);pt.unlink($t,Ut)}},{key:"_checkMaxFilesTailable",value:function(Kt,Gt,Ut){var Ht=this,qt=[];if(this.maxFiles){for(var Pt=this.zippedArchive?".gz":"",wt=this.maxFiles-1;wt>1;wt--)qt.push(function($t,Xt){var un=this,dn="".concat(Gt).concat($t-1).concat(Kt).concat(Pt),mn=ct.join(this.dirname,dn);pt.exists(mn,function(an){if(!an)return Xt(null);dn="".concat(Gt).concat($t).concat(Kt).concat(Pt),pt.rename(mn,ct.join(un.dirname,dn),Xt)})}.bind(this,wt));yt(qt,function(){pt.rename(ct.join(Ht.dirname,"".concat(Gt).concat(Kt)),ct.join(Ht.dirname,"".concat(Gt,"1").concat(Kt).concat(Pt)),Ut)})}}},{key:"_createLogDirIfNotExist",value:function(Kt){pt.existsSync(Kt)||pt.mkdirSync(Kt,{recursive:!0})}}])&&j(St.prototype,Nt),Vt}(mt)}).call(this,s(12).setImmediate,s(4).Buffer)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j){return(0,_.default)($.default,tt,j)};var _=et(s(150)),$=et(s(154));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(41)),$=tt(s(22)),et=tt(s(26));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)((j,it,st)=>{var ht=(0,_.default)(it)?[]:{};j(it,(vt,ft,pt)=>{(0,$.default)(vt)((ct,...yt)=>{yt.length<2&&([yt]=yt),ht[ft]=yt,pt(ct)})},vt=>st(vt,ht))},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(st){return(0,et.isAsync)(st)?function(...ht){const vt=ht.pop();return j(st.apply(this,ht),vt)}:(0,_.default)(function(ht,vt){var ft;try{ft=st.apply(this,ht)}catch(pt){return vt(pt)}if(ft&&typeof ft.then=="function")return j(ft,vt);vt(null,ft)})};var _=tt(s(152)),$=tt(s(153)),et=s(22);function tt(st){return st&&st.__esModule?st:{default:st}}function j(st,ht){return st.then(vt=>{it(ht,null,vt)},vt=>{it(ht,vt&&vt.message?vt:new Error(vt))})}function it(st,ht,vt){try{st(ht,vt)}catch(ft){(0,$.default)(pt=>{throw pt},ft)}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){var et=$.pop();return _.call(this,$,et)}},i.exports=o.default},function(i,o,s){(function(_,$){Object.defineProperty(o,"__esModule",{value:!0}),o.fallback=it,o.wrap=st;var et,tt=o.hasSetImmediate=typeof _=="function"&&_,j=o.hasNextTick=typeof $=="object"&&typeof $.nextTick=="function";function it(ht){setTimeout(ht,0)}function st(ht){return(vt,...ft)=>ht(()=>vt(...ft))}et=tt?_:j?$.nextTick:it,o.default=st(et)}).call(this,s(12).setImmediate,s(2))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=et(s(64)),$=et(s(26));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}o.default=(0,$.default)(function(tt,j,it){return(0,_.default)(tt,1,j,it)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=st(s(65)),$=st(s(156)),et=st(s(66)),tt=s(22),j=st(s(158)),it=st(s(42));function st(ht){return ht&&ht.__esModule?ht:{default:ht}}o.default=ht=>(vt,ft,pt)=>{if(pt=(0,_.default)(pt),ht<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!vt)return pt(null);if((0,tt.isAsyncGenerator)(vt))return(0,j.default)(vt,ht,ft,pt);if((0,tt.isAsyncIterable)(vt))return(0,j.default)(vt[Symbol.asyncIterator](),ht,ft,pt);var ct=(0,$.default)(vt),yt=!1,Et=!1,Ot=0,Lt=!1;function Tt(mt,Bt){if(!Et)if(Ot-=1,mt)yt=!0,pt(mt);else if(mt===!1)yt=!0,Et=!0;else{if(Bt===it.default||yt&&Ot<=0)return yt=!0,pt(null);Lt||It()}}function It(){for(Lt=!0;Ot<ht&&!yt;){var mt=ct();if(mt===null)return yt=!0,void(Ot<=0&&pt(null));Ot+=1,ft(mt.value,mt.key,(0,et.default)(Tt))}Lt=!1}It()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt){if((0,_.default)(tt))return function(ft){var pt=-1,ct=ft.length;return function(){return++pt<ct?{value:ft[pt],key:pt}:null}}(tt);var j=(0,$.default)(tt);return j?function(ft){var pt=-1;return function(){var ct=ft.next();return ct.done?null:(pt++,{value:ct.value,key:pt})}}(j):(it=tt,st=it?Object.keys(it):[],ht=-1,vt=st.length,function(){var ft=st[++ht];return ht<vt?{value:it[ft],key:ft}:null});var it,st,ht,vt};var _=et(s(41)),$=et(s(157));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _[Symbol.iterator]&&_[Symbol.iterator]()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j,it,st){let ht=!1,vt=!1,ft=!1,pt=0,ct=0;function yt(){pt>=j||ft||ht||(ft=!0,tt.next().then(({value:Lt,done:Tt})=>{if(!vt&&!ht){if(ft=!1,Tt)return ht=!0,void(pt<=0&&st(null));pt++,it(Lt,ct,Et),ct++,yt()}}).catch(Ot))}function Et(Lt,Tt){if(pt-=1,!vt)return Lt?Ot(Lt):Lt===!1?(ht=!0,void(vt=!0)):Tt===et.default||ht&&pt<=0?(ht=!0,st(null)):void yt()}function Ot(Lt){vt||(ft=!1,ht=!0,st(Lt))}yt()};var _,$=s(42),et=(_=$)&&_.__esModule?_:{default:_};i.exports=o.default},function(i,o,s){(function(_){var $=s(4).Buffer,et=s(160).Transform,tt=s(168),j=s(10),it=s(72).ok,st=s(4).kMaxLength,ht="Cannot create final Buffer. It would be larger than 0x"+st.toString(16)+" bytes";tt.Z_MIN_WINDOWBITS=8,tt.Z_MAX_WINDOWBITS=15,tt.Z_DEFAULT_WINDOWBITS=15,tt.Z_MIN_CHUNK=64,tt.Z_MAX_CHUNK=1/0,tt.Z_DEFAULT_CHUNK=16384,tt.Z_MIN_MEMLEVEL=1,tt.Z_MAX_MEMLEVEL=9,tt.Z_DEFAULT_MEMLEVEL=8,tt.Z_MIN_LEVEL=-1,tt.Z_MAX_LEVEL=9,tt.Z_DEFAULT_LEVEL=tt.Z_DEFAULT_COMPRESSION;for(var vt=Object.keys(tt),ft=0;ft<vt.length;ft++){var pt=vt[ft];pt.match(/^Z/)&&Object.defineProperty(o,pt,{enumerable:!0,value:tt[pt],writable:!1})}for(var ct={Z_OK:tt.Z_OK,Z_STREAM_END:tt.Z_STREAM_END,Z_NEED_DICT:tt.Z_NEED_DICT,Z_ERRNO:tt.Z_ERRNO,Z_STREAM_ERROR:tt.Z_STREAM_ERROR,Z_DATA_ERROR:tt.Z_DATA_ERROR,Z_MEM_ERROR:tt.Z_MEM_ERROR,Z_BUF_ERROR:tt.Z_BUF_ERROR,Z_VERSION_ERROR:tt.Z_VERSION_ERROR},yt=Object.keys(ct),Et=0;Et<yt.length;Et++){var Ot=yt[Et];ct[ct[Ot]]=Ot}function Lt(Gt,Ut,Ht){var qt=[],Pt=0;function wt(){for(var Xt;(Xt=Gt.read())!==null;)qt.push(Xt),Pt+=Xt.length;Gt.once("readable",wt)}function $t(){var Xt,un=null;Pt>=st?un=new RangeError(ht):Xt=$.concat(qt,Pt),qt=[],Gt.close(),Ht(un,Xt)}Gt.on("error",function(Xt){Gt.removeListener("end",$t),Gt.removeListener("readable",wt),Ht(Xt)}),Gt.on("end",$t),Gt.end(Ut),wt()}function Tt(Gt,Ut){if(typeof Ut=="string"&&(Ut=$.from(Ut)),!$.isBuffer(Ut))throw new TypeError("Not a string or buffer");var Ht=Gt._finishFlushFlag;return Gt._processChunk(Ut,Ht)}function It(Gt){if(!(this instanceof It))return new It(Gt);Ct.call(this,Gt,tt.DEFLATE)}function mt(Gt){if(!(this instanceof mt))return new mt(Gt);Ct.call(this,Gt,tt.INFLATE)}function Bt(Gt){if(!(this instanceof Bt))return new Bt(Gt);Ct.call(this,Gt,tt.GZIP)}function nn(Gt){if(!(this instanceof nn))return new nn(Gt);Ct.call(this,Gt,tt.GUNZIP)}function sn(Gt){if(!(this instanceof sn))return new sn(Gt);Ct.call(this,Gt,tt.DEFLATERAW)}function xt(Gt){if(!(this instanceof xt))return new xt(Gt);Ct.call(this,Gt,tt.INFLATERAW)}function St(Gt){if(!(this instanceof St))return new St(Gt);Ct.call(this,Gt,tt.UNZIP)}function Nt(Gt){return Gt===tt.Z_NO_FLUSH||Gt===tt.Z_PARTIAL_FLUSH||Gt===tt.Z_SYNC_FLUSH||Gt===tt.Z_FULL_FLUSH||Gt===tt.Z_FINISH||Gt===tt.Z_BLOCK}function Ct(Gt,Ut){var Ht=this;if(this._opts=Gt=Gt||{},this._chunkSize=Gt.chunkSize||o.Z_DEFAULT_CHUNK,et.call(this,Gt),Gt.flush&&!Nt(Gt.flush))throw new Error("Invalid flush flag: "+Gt.flush);if(Gt.finishFlush&&!Nt(Gt.finishFlush))throw new Error("Invalid flush flag: "+Gt.finishFlush);if(this._flushFlag=Gt.flush||tt.Z_NO_FLUSH,this._finishFlushFlag=Gt.finishFlush!==void 0?Gt.finishFlush:tt.Z_FINISH,Gt.chunkSize&&(Gt.chunkSize<o.Z_MIN_CHUNK||Gt.chunkSize>o.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+Gt.chunkSize);if(Gt.windowBits&&(Gt.windowBits<o.Z_MIN_WINDOWBITS||Gt.windowBits>o.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+Gt.windowBits);if(Gt.level&&(Gt.level<o.Z_MIN_LEVEL||Gt.level>o.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+Gt.level);if(Gt.memLevel&&(Gt.memLevel<o.Z_MIN_MEMLEVEL||Gt.memLevel>o.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+Gt.memLevel);if(Gt.strategy&&Gt.strategy!=o.Z_FILTERED&&Gt.strategy!=o.Z_HUFFMAN_ONLY&&Gt.strategy!=o.Z_RLE&&Gt.strategy!=o.Z_FIXED&&Gt.strategy!=o.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+Gt.strategy);if(Gt.dictionary&&!$.isBuffer(Gt.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new tt.Zlib(Ut);var qt=this;this._hadError=!1,this._handle.onerror=function($t,Xt){Vt(qt),qt._hadError=!0;var un=new Error($t);un.errno=Xt,un.code=o.codes[Xt],qt.emit("error",un)};var Pt=o.Z_DEFAULT_COMPRESSION;typeof Gt.level=="number"&&(Pt=Gt.level);var wt=o.Z_DEFAULT_STRATEGY;typeof Gt.strategy=="number"&&(wt=Gt.strategy),this._handle.init(Gt.windowBits||o.Z_DEFAULT_WINDOWBITS,Pt,Gt.memLevel||o.Z_DEFAULT_MEMLEVEL,wt,Gt.dictionary),this._buffer=$.allocUnsafe(this._chunkSize),this._offset=0,this._level=Pt,this._strategy=wt,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!Ht._handle},configurable:!0,enumerable:!0})}function Vt(Gt,Ut){Ut&&_.nextTick(Ut),Gt._handle&&(Gt._handle.close(),Gt._handle=null)}function Kt(Gt){Gt.emit("close")}Object.defineProperty(o,"codes",{enumerable:!0,value:Object.freeze(ct),writable:!1}),o.Deflate=It,o.Inflate=mt,o.Gzip=Bt,o.Gunzip=nn,o.DeflateRaw=sn,o.InflateRaw=xt,o.Unzip=St,o.createDeflate=function(Gt){return new It(Gt)},o.createInflate=function(Gt){return new mt(Gt)},o.createDeflateRaw=function(Gt){return new sn(Gt)},o.createInflateRaw=function(Gt){return new xt(Gt)},o.createGzip=function(Gt){return new Bt(Gt)},o.createGunzip=function(Gt){return new nn(Gt)},o.createUnzip=function(Gt){return new St(Gt)},o.deflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new It(Ut),Gt,Ht)},o.deflateSync=function(Gt,Ut){return Tt(new It(Ut),Gt)},o.gzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new Bt(Ut),Gt,Ht)},o.gzipSync=function(Gt,Ut){return Tt(new Bt(Ut),Gt)},o.deflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new sn(Ut),Gt,Ht)},o.deflateRawSync=function(Gt,Ut){return Tt(new sn(Ut),Gt)},o.unzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new St(Ut),Gt,Ht)},o.unzipSync=function(Gt,Ut){return Tt(new St(Ut),Gt)},o.inflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new mt(Ut),Gt,Ht)},o.inflateSync=function(Gt,Ut){return Tt(new mt(Ut),Gt)},o.gunzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new nn(Ut),Gt,Ht)},o.gunzipSync=function(Gt,Ut){return Tt(new nn(Ut),Gt)},o.inflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Lt(new xt(Ut),Gt,Ht)},o.inflateRawSync=function(Gt,Ut){return Tt(new xt(Ut),Gt)},j.inherits(Ct,et),Ct.prototype.params=function(Gt,Ut,Ht){if(Gt<o.Z_MIN_LEVEL||Gt>o.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+Gt);if(Ut!=o.Z_FILTERED&&Ut!=o.Z_HUFFMAN_ONLY&&Ut!=o.Z_RLE&&Ut!=o.Z_FIXED&&Ut!=o.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+Ut);if(this._level!==Gt||this._strategy!==Ut){var qt=this;this.flush(tt.Z_SYNC_FLUSH,function(){it(qt._handle,"zlib binding closed"),qt._handle.params(Gt,Ut),qt._hadError||(qt._level=Gt,qt._strategy=Ut,Ht&&Ht())})}else _.nextTick(Ht)},Ct.prototype.reset=function(){return it(this._handle,"zlib binding closed"),this._handle.reset()},Ct.prototype._flush=function(Gt){this._transform($.alloc(0),"",Gt)},Ct.prototype.flush=function(Gt,Ut){var Ht=this,qt=this._writableState;(typeof Gt=="function"||Gt===void 0&&!Ut)&&(Ut=Gt,Gt=tt.Z_FULL_FLUSH),qt.ended?Ut&&_.nextTick(Ut):qt.ending?Ut&&this.once("end",Ut):qt.needDrain?Ut&&this.once("drain",function(){return Ht.flush(Gt,Ut)}):(this._flushFlag=Gt,this.write($.alloc(0),"",Ut))},Ct.prototype.close=function(Gt){Vt(this,Gt),_.nextTick(Kt,this)},Ct.prototype._transform=function(Gt,Ut,Ht){var qt,Pt=this._writableState,wt=(Pt.ending||Pt.ended)&&(!Gt||Pt.length===Gt.length);return Gt===null||$.isBuffer(Gt)?this._handle?(wt?qt=this._finishFlushFlag:(qt=this._flushFlag,Gt.length>=Pt.length&&(this._flushFlag=this._opts.flush||tt.Z_NO_FLUSH)),void this._processChunk(Gt,qt,Ht)):Ht(new Error("zlib binding closed")):Ht(new Error("invalid input"))},Ct.prototype._processChunk=function(Gt,Ut,Ht){var qt=Gt&&Gt.length,Pt=this._chunkSize-this._offset,wt=0,$t=this,Xt=typeof Ht=="function";if(!Xt){var un,dn=[],mn=0;this.on("error",function(Qt){un=Qt}),it(this._handle,"zlib binding closed");do var an=this._handle.writeSync(Ut,Gt,wt,qt,this._buffer,this._offset,Pt);while(!this._hadError&&jt(an[0],an[1]));if(this._hadError)throw un;if(mn>=st)throw Vt(this),new RangeError(ht);var en=$.concat(dn,mn);return Vt(this),en}it(this._handle,"zlib binding closed");var Mt=this._handle.write(Ut,Gt,wt,qt,this._buffer,this._offset,Pt);function jt(Qt,gn){if(this&&(this.buffer=null,this.callback=null),!$t._hadError){var hn=Pt-gn;if(it(hn>=0,"have should not go down"),hn>0){var An=$t._buffer.slice($t._offset,$t._offset+hn);$t._offset+=hn,Xt?$t.push(An):(dn.push(An),mn+=An.length)}if((gn===0||$t._offset>=$t._chunkSize)&&(Pt=$t._chunkSize,$t._offset=0,$t._buffer=$.allocUnsafe($t._chunkSize)),gn===0){if(wt+=qt-Qt,qt=Qt,!Xt)return!0;var Mn=$t._handle.write(Ut,Gt,wt,qt,$t._buffer,$t._offset,$t._chunkSize);return Mn.callback=jt,void(Mn.buffer=Gt)}if(!Xt)return!1;Ht()}}Mt.buffer=Gt,Mt.callback=jt},j.inherits(It,Ct),j.inherits(mt,Ct),j.inherits(Bt,Ct),j.inherits(nn,Ct),j.inherits(sn,Ct),j.inherits(xt,Ct),j.inherits(St,Ct)}).call(this,s(2))},function(i,o,s){i.exports=$;var _=s(18).EventEmitter;function $(){_.call(this)}s(7)($,_),$.Readable=s(27),$.Writable=s(71),$.Duplex=s(165),$.Transform=s(166),$.PassThrough=s(167),$.Stream=$,$.prototype.pipe=function(et,tt){var j=this;function it(yt){et.writable&&et.write(yt)===!1&&j.pause&&j.pause()}function st(){j.readable&&j.resume&&j.resume()}j.on("data",it),et.on("drain",st),et._isStdio||tt&&tt.end===!1||(j.on("end",vt),j.on("close",ft));var ht=!1;function vt(){ht||(ht=!0,et.end())}function ft(){ht||(ht=!0,typeof et.destroy=="function"&&et.destroy())}function pt(yt){if(ct(),_.listenerCount(this,"error")===0)throw yt}function ct(){j.removeListener("data",it),et.removeListener("drain",st),j.removeListener("end",vt),j.removeListener("close",ft),j.removeListener("error",pt),et.removeListener("error",pt),j.removeListener("end",ct),j.removeListener("close",ct),et.removeListener("close",ct)}return j.on("error",pt),et.on("error",pt),j.on("end",ct),j.on("close",ct),et.on("close",ct),et.emit("pipe",j),et}},function(i,o){},function(i,o,s){var _=s(43).Buffer,$=s(163);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),vt=this.head,ft=0;vt;)j=vt.data,it=ht,st=ft,j.copy(it,st),ft+=vt.data.length,vt=vt.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){i.exports=et;var _=s(70),$=s(14);function et(tt){if(!(this instanceof et))return new et(tt);_.call(this,tt)}$.inherits=s(7),$.inherits(et,_),et.prototype._transform=function(tt,j,it){it(null,tt)}},function(i,o,s){i.exports=s(20)},function(i,o,s){i.exports=s(27).Transform},function(i,o,s){i.exports=s(27).PassThrough},function(i,o,s){(function(_,$){var et=s(72),tt=s(170),j=s(171),it=s(174),st=s(177);for(var ht in st)o[ht]=st[ht];o.NONE=0,o.DEFLATE=1,o.INFLATE=2,o.GZIP=3,o.GUNZIP=4,o.DEFLATERAW=5,o.INFLATERAW=6,o.UNZIP=7;function vt(ft){if(typeof ft!="number"||ft<o.DEFLATE||ft>o.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=ft,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}vt.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,et(this.init_done,"close before init"),et(this.mode<=o.UNZIP),this.mode===o.DEFLATE||this.mode===o.GZIP||this.mode===o.DEFLATERAW?j.deflateEnd(this.strm):this.mode!==o.INFLATE&&this.mode!==o.GUNZIP&&this.mode!==o.INFLATERAW&&this.mode!==o.UNZIP||it.inflateEnd(this.strm),this.mode=o.NONE,this.dictionary=null)},vt.prototype.write=function(ft,pt,ct,yt,Et,Ot,Lt){return this._write(!0,ft,pt,ct,yt,Et,Ot,Lt)},vt.prototype.writeSync=function(ft,pt,ct,yt,Et,Ot,Lt){return this._write(!1,ft,pt,ct,yt,Et,Ot,Lt)},vt.prototype._write=function(ft,pt,ct,yt,Et,Ot,Lt,Tt){if(et.equal(arguments.length,8),et(this.init_done,"write before init"),et(this.mode!==o.NONE,"already finalized"),et.equal(!1,this.write_in_progress,"write already in progress"),et.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,et.equal(!1,pt===void 0,"must provide flush value"),this.write_in_progress=!0,pt!==o.Z_NO_FLUSH&&pt!==o.Z_PARTIAL_FLUSH&&pt!==o.Z_SYNC_FLUSH&&pt!==o.Z_FULL_FLUSH&&pt!==o.Z_FINISH&&pt!==o.Z_BLOCK)throw new Error("Invalid flush value");if(ct==null&&(ct=_.alloc(0),Et=0,yt=0),this.strm.avail_in=Et,this.strm.input=ct,this.strm.next_in=yt,this.strm.avail_out=Tt,this.strm.output=Ot,this.strm.next_out=Lt,this.flush=pt,!ft)return this._process(),this._checkError()?this._afterSync():void 0;var It=this;return $.nextTick(function(){It._process(),It._after()}),this},vt.prototype._afterSync=function(){var ft=this.strm.avail_out,pt=this.strm.avail_in;return this.write_in_progress=!1,[pt,ft]},vt.prototype._process=function(){var ft=null;switch(this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflate(this.strm,this.flush);break;case o.UNZIP:switch(this.strm.avail_in>0&&(ft=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(ft===null)break;if(this.strm.input[ft]!==31){this.mode=o.INFLATE;break}if(this.gzip_id_bytes_read=1,ft++,this.strm.avail_in===1)break;case 1:if(ft===null)break;this.strm.input[ft]===139?(this.gzip_id_bytes_read=2,this.mode=o.GUNZIP):this.mode=o.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:for(this.err=it.inflate(this.strm,this.flush),this.err===o.Z_NEED_DICT&&this.dictionary&&(this.err=it.inflateSetDictionary(this.strm,this.dictionary),this.err===o.Z_OK?this.err=it.inflate(this.strm,this.flush):this.err===o.Z_DATA_ERROR&&(this.err=o.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===o.GUNZIP&&this.err===o.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=it.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},vt.prototype._checkError=function(){switch(this.err){case o.Z_OK:case o.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===o.Z_FINISH)return this._error("unexpected end of file"),!1;break;case o.Z_STREAM_END:break;case o.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},vt.prototype._after=function(){if(this._checkError()){var ft=this.strm.avail_out,pt=this.strm.avail_in;this.write_in_progress=!1,this.callback(pt,ft),this.pending_close&&this.close()}},vt.prototype._error=function(ft){this.strm.msg&&(ft=this.strm.msg),this.onerror(ft,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},vt.prototype.init=function(ft,pt,ct,yt,Et){et(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),et(ft>=8&&ft<=15,"invalid windowBits"),et(pt>=-1&&pt<=9,"invalid compression level"),et(ct>=1&&ct<=9,"invalid memlevel"),et(yt===o.Z_FILTERED||yt===o.Z_HUFFMAN_ONLY||yt===o.Z_RLE||yt===o.Z_FIXED||yt===o.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(pt,ft,ct,yt,Et),this._setDictionary()},vt.prototype.params=function(){throw new Error("deflateParams Not supported")},vt.prototype.reset=function(){this._reset(),this._setDictionary()},vt.prototype._init=function(ft,pt,ct,yt,Et){switch(this.level=ft,this.windowBits=pt,this.memLevel=ct,this.strategy=yt,this.flush=o.Z_NO_FLUSH,this.err=o.Z_OK,this.mode!==o.GZIP&&this.mode!==o.GUNZIP||(this.windowBits+=16),this.mode===o.UNZIP&&(this.windowBits+=32),this.mode!==o.DEFLATERAW&&this.mode!==o.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new tt,this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflateInit2(this.strm,this.level,o.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:case o.UNZIP:this.err=it.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==o.Z_OK&&this._error("Init error"),this.dictionary=Et,this.write_in_progress=!1,this.init_done=!0},vt.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:this.err=j.deflateSetDictionary(this.strm,this.dictionary)}this.err!==o.Z_OK&&this._error("Failed to set dictionary")}},vt.prototype._reset=function(){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:case o.GZIP:this.err=j.deflateReset(this.strm);break;case o.INFLATE:case o.INFLATERAW:case o.GUNZIP:this.err=it.inflateReset(this.strm)}this.err!==o.Z_OK&&this._error("Failed to reset stream")},o.Zlib=vt}).call(this,s(4).Buffer,s(2))},function(i,o,s){var _=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;function tt(j){if(j==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(j)}i.exports=function(){try{if(!Object.assign)return!1;var j=new String("abc");if(j[5]="de",Object.getOwnPropertyNames(j)[0]==="5")return!1;for(var it={},st=0;st<10;st++)it["_"+String.fromCharCode(st)]=st;if(Object.getOwnPropertyNames(it).map(function(vt){return it[vt]}).join("")!=="0123456789")return!1;var ht={};return"abcdefghijklmnopqrst".split("").forEach(function(vt){ht[vt]=vt}),Object.keys(Object.assign({},ht)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(j,it){for(var st,ht,vt=tt(j),ft=1;ft<arguments.length;ft++){for(var pt in st=Object(arguments[ft]))$.call(st,pt)&&(vt[pt]=st[pt]);if(_){ht=_(st);for(var ct=0;ct<ht.length;ct++)et.call(st,ht[ct])&&(vt[ht[ct]]=st[ht[ct]])}}return vt}},function(i,o,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(i,o,s){var _,$=s(32),et=s(172),tt=s(73),j=s(74),it=s(173);function st(xt,St){return xt.msg=it[St],St}function ht(xt){return(xt<<1)-(xt>4?9:0)}function vt(xt){for(var St=xt.length;--St>=0;)xt[St]=0}function ft(xt){var St=xt.state,Nt=St.pending;Nt>xt.avail_out&&(Nt=xt.avail_out),Nt!==0&&($.arraySet(xt.output,St.pending_buf,St.pending_out,Nt,xt.next_out),xt.next_out+=Nt,St.pending_out+=Nt,xt.total_out+=Nt,xt.avail_out-=Nt,St.pending-=Nt,St.pending===0&&(St.pending_out=0))}function pt(xt,St){et._tr_flush_block(xt,xt.block_start>=0?xt.block_start:-1,xt.strstart-xt.block_start,St),xt.block_start=xt.strstart,ft(xt.strm)}function ct(xt,St){xt.pending_buf[xt.pending++]=St}function yt(xt,St){xt.pending_buf[xt.pending++]=St>>>8&255,xt.pending_buf[xt.pending++]=255&St}function Et(xt,St){var Nt,Ct,Vt=xt.max_chain_length,Kt=xt.strstart,Gt=xt.prev_length,Ut=xt.nice_match,Ht=xt.strstart>xt.w_size-262?xt.strstart-(xt.w_size-262):0,qt=xt.window,Pt=xt.w_mask,wt=xt.prev,$t=xt.strstart+258,Xt=qt[Kt+Gt-1],un=qt[Kt+Gt];xt.prev_length>=xt.good_match&&(Vt>>=2),Ut>xt.lookahead&&(Ut=xt.lookahead);do if(qt[(Nt=St)+Gt]===un&&qt[Nt+Gt-1]===Xt&&qt[Nt]===qt[Kt]&&qt[++Nt]===qt[Kt+1]){Kt+=2,Nt++;do;while(qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&qt[++Kt]===qt[++Nt]&&Kt<$t);if(Ct=258-($t-Kt),Kt=$t-258,Ct>Gt){if(xt.match_start=St,Gt=Ct,Ct>=Ut)break;Xt=qt[Kt+Gt-1],un=qt[Kt+Gt]}}while((St=wt[St&Pt])>Ht&&--Vt!=0);return Gt<=xt.lookahead?Gt:xt.lookahead}function Ot(xt){var St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt=xt.w_size;do{if(Vt=xt.window_size-xt.lookahead-xt.strstart,xt.strstart>=wt+(wt-262)){$.arraySet(xt.window,xt.window,wt,wt,0),xt.match_start-=wt,xt.strstart-=wt,xt.block_start-=wt,St=Nt=xt.hash_size;do Ct=xt.head[--St],xt.head[St]=Ct>=wt?Ct-wt:0;while(--Nt);St=Nt=wt;do Ct=xt.prev[--St],xt.prev[St]=Ct>=wt?Ct-wt:0;while(--Nt);Vt+=wt}if(xt.strm.avail_in===0)break;if(Gt=xt.strm,Ut=xt.window,Ht=xt.strstart+xt.lookahead,qt=Vt,Pt=void 0,(Pt=Gt.avail_in)>qt&&(Pt=qt),Nt=Pt===0?0:(Gt.avail_in-=Pt,$.arraySet(Ut,Gt.input,Gt.next_in,Pt,Ht),Gt.state.wrap===1?Gt.adler=tt(Gt.adler,Ut,Pt,Ht):Gt.state.wrap===2&&(Gt.adler=j(Gt.adler,Ut,Pt,Ht)),Gt.next_in+=Pt,Gt.total_in+=Pt,Pt),xt.lookahead+=Nt,xt.lookahead+xt.insert>=3)for(Kt=xt.strstart-xt.insert,xt.ins_h=xt.window[Kt],xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[Kt+1])&xt.hash_mask;xt.insert&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[Kt+3-1])&xt.hash_mask,xt.prev[Kt&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=Kt,Kt++,xt.insert--,!(xt.lookahead+xt.insert<3)););}while(xt.lookahead<262&&xt.strm.avail_in!==0)}function Lt(xt,St){for(var Nt,Ct;;){if(xt.lookahead<262){if(Ot(xt),xt.lookahead<262&&St===0)return 1;if(xt.lookahead===0)break}if(Nt=0,xt.lookahead>=3&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart),Nt!==0&&xt.strstart-Nt<=xt.w_size-262&&(xt.match_length=Et(xt,Nt)),xt.match_length>=3)if(Ct=et._tr_tally(xt,xt.strstart-xt.match_start,xt.match_length-3),xt.lookahead-=xt.match_length,xt.match_length<=xt.max_lazy_match&&xt.lookahead>=3){xt.match_length--;do xt.strstart++,xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart;while(--xt.match_length!=0);xt.strstart++}else xt.strstart+=xt.match_length,xt.match_length=0,xt.ins_h=xt.window[xt.strstart],xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+1])&xt.hash_mask;else Ct=et._tr_tally(xt,0,xt.window[xt.strstart]),xt.lookahead--,xt.strstart++;if(Ct&&(pt(xt,!1),xt.strm.avail_out===0))return 1}return xt.insert=xt.strstart<2?xt.strstart:2,St===4?(pt(xt,!0),xt.strm.avail_out===0?3:4):xt.last_lit&&(pt(xt,!1),xt.strm.avail_out===0)?1:2}function Tt(xt,St){for(var Nt,Ct,Vt;;){if(xt.lookahead<262){if(Ot(xt),xt.lookahead<262&&St===0)return 1;if(xt.lookahead===0)break}if(Nt=0,xt.lookahead>=3&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart),xt.prev_length=xt.match_length,xt.prev_match=xt.match_start,xt.match_length=2,Nt!==0&&xt.prev_length<xt.max_lazy_match&&xt.strstart-Nt<=xt.w_size-262&&(xt.match_length=Et(xt,Nt),xt.match_length<=5&&(xt.strategy===1||xt.match_length===3&&xt.strstart-xt.match_start>4096)&&(xt.match_length=2)),xt.prev_length>=3&&xt.match_length<=xt.prev_length){Vt=xt.strstart+xt.lookahead-3,Ct=et._tr_tally(xt,xt.strstart-1-xt.prev_match,xt.prev_length-3),xt.lookahead-=xt.prev_length-1,xt.prev_length-=2;do++xt.strstart<=Vt&&(xt.ins_h=(xt.ins_h<<xt.hash_shift^xt.window[xt.strstart+3-1])&xt.hash_mask,Nt=xt.prev[xt.strstart&xt.w_mask]=xt.head[xt.ins_h],xt.head[xt.ins_h]=xt.strstart);while(--xt.prev_length!=0);if(xt.match_available=0,xt.match_length=2,xt.strstart++,Ct&&(pt(xt,!1),xt.strm.avail_out===0))return 1}else if(xt.match_available){if((Ct=et._tr_tally(xt,0,xt.window[xt.strstart-1]))&&pt(xt,!1),xt.strstart++,xt.lookahead--,xt.strm.avail_out===0)return 1}else xt.match_available=1,xt.strstart++,xt.lookahead--}return xt.match_available&&(Ct=et._tr_tally(xt,0,xt.window[xt.strstart-1]),xt.match_available=0),xt.insert=xt.strstart<2?xt.strstart:2,St===4?(pt(xt,!0),xt.strm.avail_out===0?3:4):xt.last_lit&&(pt(xt,!1),xt.strm.avail_out===0)?1:2}function It(xt,St,Nt,Ct,Vt){this.good_length=xt,this.max_lazy=St,this.nice_length=Nt,this.max_chain=Ct,this.func=Vt}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new $.Buf16(1146),this.dyn_dtree=new $.Buf16(122),this.bl_tree=new $.Buf16(78),vt(this.dyn_ltree),vt(this.dyn_dtree),vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new $.Buf16(16),this.heap=new $.Buf16(573),vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new $.Buf16(573),vt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Bt(xt){var St;return xt&&xt.state?(xt.total_in=xt.total_out=0,xt.data_type=2,(St=xt.state).pending=0,St.pending_out=0,St.wrap<0&&(St.wrap=-St.wrap),St.status=St.wrap?42:113,xt.adler=St.wrap===2?0:1,St.last_flush=0,et._tr_init(St),0):st(xt,-2)}function nn(xt){var St,Nt=Bt(xt);return Nt===0&&((St=xt.state).window_size=2*St.w_size,vt(St.head),St.max_lazy_match=_[St.level].max_lazy,St.good_match=_[St.level].good_length,St.nice_match=_[St.level].nice_length,St.max_chain_length=_[St.level].max_chain,St.strstart=0,St.block_start=0,St.lookahead=0,St.insert=0,St.match_length=St.prev_length=2,St.match_available=0,St.ins_h=0),Nt}function sn(xt,St,Nt,Ct,Vt,Kt){if(!xt)return-2;var Gt=1;if(St===-1&&(St=6),Ct<0?(Gt=0,Ct=-Ct):Ct>15&&(Gt=2,Ct-=16),Vt<1||Vt>9||Nt!==8||Ct<8||Ct>15||St<0||St>9||Kt<0||Kt>4)return st(xt,-2);Ct===8&&(Ct=9);var Ut=new mt;return xt.state=Ut,Ut.strm=xt,Ut.wrap=Gt,Ut.gzhead=null,Ut.w_bits=Ct,Ut.w_size=1<<Ut.w_bits,Ut.w_mask=Ut.w_size-1,Ut.hash_bits=Vt+7,Ut.hash_size=1<<Ut.hash_bits,Ut.hash_mask=Ut.hash_size-1,Ut.hash_shift=~~((Ut.hash_bits+3-1)/3),Ut.window=new $.Buf8(2*Ut.w_size),Ut.head=new $.Buf16(Ut.hash_size),Ut.prev=new $.Buf16(Ut.w_size),Ut.lit_bufsize=1<<Vt+6,Ut.pending_buf_size=4*Ut.lit_bufsize,Ut.pending_buf=new $.Buf8(Ut.pending_buf_size),Ut.d_buf=1*Ut.lit_bufsize,Ut.l_buf=3*Ut.lit_bufsize,Ut.level=St,Ut.strategy=Kt,Ut.method=Nt,nn(xt)}_=[new It(0,0,0,0,function(xt,St){var Nt=65535;for(Nt>xt.pending_buf_size-5&&(Nt=xt.pending_buf_size-5);;){if(xt.lookahead<=1){if(Ot(xt),xt.lookahead===0&&St===0)return 1;if(xt.lookahead===0)break}xt.strstart+=xt.lookahead,xt.lookahead=0;var Ct=xt.block_start+Nt;if((xt.strstart===0||xt.strstart>=Ct)&&(xt.lookahead=xt.strstart-Ct,xt.strstart=Ct,pt(xt,!1),xt.strm.avail_out===0)||xt.strstart-xt.block_start>=xt.w_size-262&&(pt(xt,!1),xt.strm.avail_out===0))return 1}return xt.insert=0,St===4?(pt(xt,!0),xt.strm.avail_out===0?3:4):(xt.strstart>xt.block_start&&(pt(xt,!1),xt.strm.avail_out),1)}),new It(4,4,8,4,Lt),new It(4,5,16,8,Lt),new It(4,6,32,32,Lt),new It(4,4,16,16,Tt),new It(8,16,32,32,Tt),new It(8,16,128,128,Tt),new It(8,32,128,256,Tt),new It(32,128,258,1024,Tt),new It(32,258,258,4096,Tt)],o.deflateInit=function(xt,St){return sn(xt,St,8,15,8,0)},o.deflateInit2=sn,o.deflateReset=nn,o.deflateResetKeep=Bt,o.deflateSetHeader=function(xt,St){return xt&&xt.state?xt.state.wrap!==2?-2:(xt.state.gzhead=St,0):-2},o.deflate=function(xt,St){var Nt,Ct,Vt,Kt;if(!xt||!xt.state||St>5||St<0)return xt?st(xt,-2):-2;if(Ct=xt.state,!xt.output||!xt.input&&xt.avail_in!==0||Ct.status===666&&St!==4)return st(xt,xt.avail_out===0?-5:-2);if(Ct.strm=xt,Nt=Ct.last_flush,Ct.last_flush=St,Ct.status===42)if(Ct.wrap===2)xt.adler=0,ct(Ct,31),ct(Ct,139),ct(Ct,8),Ct.gzhead?(ct(Ct,(Ct.gzhead.text?1:0)+(Ct.gzhead.hcrc?2:0)+(Ct.gzhead.extra?4:0)+(Ct.gzhead.name?8:0)+(Ct.gzhead.comment?16:0)),ct(Ct,255&Ct.gzhead.time),ct(Ct,Ct.gzhead.time>>8&255),ct(Ct,Ct.gzhead.time>>16&255),ct(Ct,Ct.gzhead.time>>24&255),ct(Ct,Ct.level===9?2:Ct.strategy>=2||Ct.level<2?4:0),ct(Ct,255&Ct.gzhead.os),Ct.gzhead.extra&&Ct.gzhead.extra.length&&(ct(Ct,255&Ct.gzhead.extra.length),ct(Ct,Ct.gzhead.extra.length>>8&255)),Ct.gzhead.hcrc&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending,0)),Ct.gzindex=0,Ct.status=69):(ct(Ct,0),ct(Ct,0),ct(Ct,0),ct(Ct,0),ct(Ct,0),ct(Ct,Ct.level===9?2:Ct.strategy>=2||Ct.level<2?4:0),ct(Ct,3),Ct.status=113);else{var Gt=8+(Ct.w_bits-8<<4)<<8;Gt|=(Ct.strategy>=2||Ct.level<2?0:Ct.level<6?1:Ct.level===6?2:3)<<6,Ct.strstart!==0&&(Gt|=32),Gt+=31-Gt%31,Ct.status=113,yt(Ct,Gt),Ct.strstart!==0&&(yt(Ct,xt.adler>>>16),yt(Ct,65535&xt.adler)),xt.adler=1}if(Ct.status===69)if(Ct.gzhead.extra){for(Vt=Ct.pending;Ct.gzindex<(65535&Ct.gzhead.extra.length)&&(Ct.pending!==Ct.pending_buf_size||(Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),ft(xt),Vt=Ct.pending,Ct.pending!==Ct.pending_buf_size));)ct(Ct,255&Ct.gzhead.extra[Ct.gzindex]),Ct.gzindex++;Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),Ct.gzindex===Ct.gzhead.extra.length&&(Ct.gzindex=0,Ct.status=73)}else Ct.status=73;if(Ct.status===73)if(Ct.gzhead.name){Vt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),ft(xt),Vt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Kt=1;break}Kt=Ct.gzindex<Ct.gzhead.name.length?255&Ct.gzhead.name.charCodeAt(Ct.gzindex++):0,ct(Ct,Kt)}while(Kt!==0);Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),Kt===0&&(Ct.gzindex=0,Ct.status=91)}else Ct.status=91;if(Ct.status===91)if(Ct.gzhead.comment){Vt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),ft(xt),Vt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Kt=1;break}Kt=Ct.gzindex<Ct.gzhead.comment.length?255&Ct.gzhead.comment.charCodeAt(Ct.gzindex++):0,ct(Ct,Kt)}while(Kt!==0);Ct.gzhead.hcrc&&Ct.pending>Vt&&(xt.adler=j(xt.adler,Ct.pending_buf,Ct.pending-Vt,Vt)),Kt===0&&(Ct.status=103)}else Ct.status=103;if(Ct.status===103&&(Ct.gzhead.hcrc?(Ct.pending+2>Ct.pending_buf_size&&ft(xt),Ct.pending+2<=Ct.pending_buf_size&&(ct(Ct,255&xt.adler),ct(Ct,xt.adler>>8&255),xt.adler=0,Ct.status=113)):Ct.status=113),Ct.pending!==0){if(ft(xt),xt.avail_out===0)return Ct.last_flush=-1,0}else if(xt.avail_in===0&&ht(St)<=ht(Nt)&&St!==4)return st(xt,-5);if(Ct.status===666&&xt.avail_in!==0)return st(xt,-5);if(xt.avail_in!==0||Ct.lookahead!==0||St!==0&&Ct.status!==666){var Ut=Ct.strategy===2?function(Ht,qt){for(var Pt;;){if(Ht.lookahead===0&&(Ot(Ht),Ht.lookahead===0)){if(qt===0)return 1;break}if(Ht.match_length=0,Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++,Pt&&(pt(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(pt(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(pt(Ht,!1),Ht.strm.avail_out===0)?1:2}(Ct,St):Ct.strategy===3?function(Ht,qt){for(var Pt,wt,$t,Xt,un=Ht.window;;){if(Ht.lookahead<=258){if(Ot(Ht),Ht.lookahead<=258&&qt===0)return 1;if(Ht.lookahead===0)break}if(Ht.match_length=0,Ht.lookahead>=3&&Ht.strstart>0&&(wt=un[$t=Ht.strstart-1])===un[++$t]&&wt===un[++$t]&&wt===un[++$t]){Xt=Ht.strstart+258;do;while(wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&wt===un[++$t]&&$t<Xt);Ht.match_length=258-(Xt-$t),Ht.match_length>Ht.lookahead&&(Ht.match_length=Ht.lookahead)}if(Ht.match_length>=3?(Pt=et._tr_tally(Ht,1,Ht.match_length-3),Ht.lookahead-=Ht.match_length,Ht.strstart+=Ht.match_length,Ht.match_length=0):(Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++),Pt&&(pt(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(pt(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(pt(Ht,!1),Ht.strm.avail_out===0)?1:2}(Ct,St):_[Ct.level].func(Ct,St);if(Ut!==3&&Ut!==4||(Ct.status=666),Ut===1||Ut===3)return xt.avail_out===0&&(Ct.last_flush=-1),0;if(Ut===2&&(St===1?et._tr_align(Ct):St!==5&&(et._tr_stored_block(Ct,0,0,!1),St===3&&(vt(Ct.head),Ct.lookahead===0&&(Ct.strstart=0,Ct.block_start=0,Ct.insert=0))),ft(xt),xt.avail_out===0))return Ct.last_flush=-1,0}return St!==4?0:Ct.wrap<=0?1:(Ct.wrap===2?(ct(Ct,255&xt.adler),ct(Ct,xt.adler>>8&255),ct(Ct,xt.adler>>16&255),ct(Ct,xt.adler>>24&255),ct(Ct,255&xt.total_in),ct(Ct,xt.total_in>>8&255),ct(Ct,xt.total_in>>16&255),ct(Ct,xt.total_in>>24&255)):(yt(Ct,xt.adler>>>16),yt(Ct,65535&xt.adler)),ft(xt),Ct.wrap>0&&(Ct.wrap=-Ct.wrap),Ct.pending!==0?0:1)},o.deflateEnd=function(xt){var St;return xt&&xt.state?(St=xt.state.status)!==42&&St!==69&&St!==73&&St!==91&&St!==103&&St!==113&&St!==666?st(xt,-2):(xt.state=null,St===113?st(xt,-3):0):-2},o.deflateSetDictionary=function(xt,St){var Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt=St.length;if(!xt||!xt.state||(Kt=(Nt=xt.state).wrap)===2||Kt===1&&Nt.status!==42||Nt.lookahead)return-2;for(Kt===1&&(xt.adler=tt(xt.adler,St,Pt,0)),Nt.wrap=0,Pt>=Nt.w_size&&(Kt===0&&(vt(Nt.head),Nt.strstart=0,Nt.block_start=0,Nt.insert=0),qt=new $.Buf8(Nt.w_size),$.arraySet(qt,St,Pt-Nt.w_size,Nt.w_size,0),St=qt,Pt=Nt.w_size),Gt=xt.avail_in,Ut=xt.next_in,Ht=xt.input,xt.avail_in=Pt,xt.next_in=0,xt.input=St,Ot(Nt);Nt.lookahead>=3;){Ct=Nt.strstart,Vt=Nt.lookahead-2;do Nt.ins_h=(Nt.ins_h<<Nt.hash_shift^Nt.window[Ct+3-1])&Nt.hash_mask,Nt.prev[Ct&Nt.w_mask]=Nt.head[Nt.ins_h],Nt.head[Nt.ins_h]=Ct,Ct++;while(--Vt);Nt.strstart=Ct,Nt.lookahead=2,Ot(Nt)}return Nt.strstart+=Nt.lookahead,Nt.block_start=Nt.strstart,Nt.insert=Nt.lookahead,Nt.lookahead=0,Nt.match_length=Nt.prev_length=2,Nt.match_available=0,xt.next_in=Ut,xt.input=Ht,xt.avail_in=Gt,Nt.wrap=Kt,0},o.deflateInfo="pako deflate (from Nodeca project)"},function(i,o,s){var _=s(32);function $(wt){for(var $t=wt.length;--$t>=0;)wt[$t]=0}var et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=new Array(576);$(st);var ht=new Array(60);$(ht);var vt=new Array(512);$(vt);var ft=new Array(256);$(ft);var pt=new Array(29);$(pt);var ct,yt,Et,Ot=new Array(30);function Lt(wt,$t,Xt,un,dn){this.static_tree=wt,this.extra_bits=$t,this.extra_base=Xt,this.elems=un,this.max_length=dn,this.has_stree=wt&&wt.length}function Tt(wt,$t){this.dyn_tree=wt,this.max_code=0,this.stat_desc=$t}function It(wt){return wt<256?vt[wt]:vt[256+(wt>>>7)]}function mt(wt,$t){wt.pending_buf[wt.pending++]=255&$t,wt.pending_buf[wt.pending++]=$t>>>8&255}function Bt(wt,$t,Xt){wt.bi_valid>16-Xt?(wt.bi_buf|=$t<<wt.bi_valid&65535,mt(wt,wt.bi_buf),wt.bi_buf=$t>>16-wt.bi_valid,wt.bi_valid+=Xt-16):(wt.bi_buf|=$t<<wt.bi_valid&65535,wt.bi_valid+=Xt)}function nn(wt,$t,Xt){Bt(wt,Xt[2*$t],Xt[2*$t+1])}function sn(wt,$t){var Xt=0;do Xt|=1&wt,wt>>>=1,Xt<<=1;while(--$t>0);return Xt>>>1}function xt(wt,$t,Xt){var un,dn,mn=new Array(16),an=0;for(un=1;un<=15;un++)mn[un]=an=an+Xt[un-1]<<1;for(dn=0;dn<=$t;dn++){var en=wt[2*dn+1];en!==0&&(wt[2*dn]=sn(mn[en]++,en))}}function St(wt){var $t;for($t=0;$t<286;$t++)wt.dyn_ltree[2*$t]=0;for($t=0;$t<30;$t++)wt.dyn_dtree[2*$t]=0;for($t=0;$t<19;$t++)wt.bl_tree[2*$t]=0;wt.dyn_ltree[512]=1,wt.opt_len=wt.static_len=0,wt.last_lit=wt.matches=0}function Nt(wt){wt.bi_valid>8?mt(wt,wt.bi_buf):wt.bi_valid>0&&(wt.pending_buf[wt.pending++]=wt.bi_buf),wt.bi_buf=0,wt.bi_valid=0}function Ct(wt,$t,Xt,un){var dn=2*$t,mn=2*Xt;return wt[dn]<wt[mn]||wt[dn]===wt[mn]&&un[$t]<=un[Xt]}function Vt(wt,$t,Xt){for(var un=wt.heap[Xt],dn=Xt<<1;dn<=wt.heap_len&&(dn<wt.heap_len&&Ct($t,wt.heap[dn+1],wt.heap[dn],wt.depth)&&dn++,!Ct($t,un,wt.heap[dn],wt.depth));)wt.heap[Xt]=wt.heap[dn],Xt=dn,dn<<=1;wt.heap[Xt]=un}function Kt(wt,$t,Xt){var un,dn,mn,an,en=0;if(wt.last_lit!==0)do un=wt.pending_buf[wt.d_buf+2*en]<<8|wt.pending_buf[wt.d_buf+2*en+1],dn=wt.pending_buf[wt.l_buf+en],en++,un===0?nn(wt,dn,$t):(nn(wt,(mn=ft[dn])+256+1,$t),(an=et[mn])!==0&&Bt(wt,dn-=pt[mn],an),nn(wt,mn=It(--un),Xt),(an=tt[mn])!==0&&Bt(wt,un-=Ot[mn],an));while(en<wt.last_lit);nn(wt,256,$t)}function Gt(wt,$t){var Xt,un,dn,mn=$t.dyn_tree,an=$t.stat_desc.static_tree,en=$t.stat_desc.has_stree,Mt=$t.stat_desc.elems,jt=-1;for(wt.heap_len=0,wt.heap_max=573,Xt=0;Xt<Mt;Xt++)mn[2*Xt]!==0?(wt.heap[++wt.heap_len]=jt=Xt,wt.depth[Xt]=0):mn[2*Xt+1]=0;for(;wt.heap_len<2;)mn[2*(dn=wt.heap[++wt.heap_len]=jt<2?++jt:0)]=1,wt.depth[dn]=0,wt.opt_len--,en&&(wt.static_len-=an[2*dn+1]);for($t.max_code=jt,Xt=wt.heap_len>>1;Xt>=1;Xt--)Vt(wt,mn,Xt);dn=Mt;do Xt=wt.heap[1],wt.heap[1]=wt.heap[wt.heap_len--],Vt(wt,mn,1),un=wt.heap[1],wt.heap[--wt.heap_max]=Xt,wt.heap[--wt.heap_max]=un,mn[2*dn]=mn[2*Xt]+mn[2*un],wt.depth[dn]=(wt.depth[Xt]>=wt.depth[un]?wt.depth[Xt]:wt.depth[un])+1,mn[2*Xt+1]=mn[2*un+1]=dn,wt.heap[1]=dn++,Vt(wt,mn,1);while(wt.heap_len>=2);wt.heap[--wt.heap_max]=wt.heap[1],function(Qt,gn){var hn,An,Mn,Yn,Nr,ro,to=gn.dyn_tree,zr=gn.max_code,In=gn.stat_desc.static_tree,kn=gn.stat_desc.has_stree,Kn=gn.stat_desc.extra_bits,vr=gn.stat_desc.extra_base,yr=gn.stat_desc.max_length,Wr=0;for(Yn=0;Yn<=15;Yn++)Qt.bl_count[Yn]=0;for(to[2*Qt.heap[Qt.heap_max]+1]=0,hn=Qt.heap_max+1;hn<573;hn++)(Yn=to[2*to[2*(An=Qt.heap[hn])+1]+1]+1)>yr&&(Yn=yr,Wr++),to[2*An+1]=Yn,An>zr||(Qt.bl_count[Yn]++,Nr=0,An>=vr&&(Nr=Kn[An-vr]),ro=to[2*An],Qt.opt_len+=ro*(Yn+Nr),kn&&(Qt.static_len+=ro*(In[2*An+1]+Nr)));if(Wr!==0){do{for(Yn=yr-1;Qt.bl_count[Yn]===0;)Yn--;Qt.bl_count[Yn]--,Qt.bl_count[Yn+1]+=2,Qt.bl_count[yr]--,Wr-=2}while(Wr>0);for(Yn=yr;Yn!==0;Yn--)for(An=Qt.bl_count[Yn];An!==0;)(Mn=Qt.heap[--hn])>zr||(to[2*Mn+1]!==Yn&&(Qt.opt_len+=(Yn-to[2*Mn+1])*to[2*Mn],to[2*Mn+1]=Yn),An--)}}(wt,$t),xt(mn,jt,wt.bl_count)}function Ut(wt,$t,Xt){var un,dn,mn=-1,an=$t[1],en=0,Mt=7,jt=4;for(an===0&&(Mt=138,jt=3),$t[2*(Xt+1)+1]=65535,un=0;un<=Xt;un++)dn=an,an=$t[2*(un+1)+1],++en<Mt&&dn===an||(en<jt?wt.bl_tree[2*dn]+=en:dn!==0?(dn!==mn&&wt.bl_tree[2*dn]++,wt.bl_tree[32]++):en<=10?wt.bl_tree[34]++:wt.bl_tree[36]++,en=0,mn=dn,an===0?(Mt=138,jt=3):dn===an?(Mt=6,jt=3):(Mt=7,jt=4))}function Ht(wt,$t,Xt){var un,dn,mn=-1,an=$t[1],en=0,Mt=7,jt=4;for(an===0&&(Mt=138,jt=3),un=0;un<=Xt;un++)if(dn=an,an=$t[2*(un+1)+1],!(++en<Mt&&dn===an)){if(en<jt)do nn(wt,dn,wt.bl_tree);while(--en!=0);else dn!==0?(dn!==mn&&(nn(wt,dn,wt.bl_tree),en--),nn(wt,16,wt.bl_tree),Bt(wt,en-3,2)):en<=10?(nn(wt,17,wt.bl_tree),Bt(wt,en-3,3)):(nn(wt,18,wt.bl_tree),Bt(wt,en-11,7));en=0,mn=dn,an===0?(Mt=138,jt=3):dn===an?(Mt=6,jt=3):(Mt=7,jt=4)}}$(Ot);var qt=!1;function Pt(wt,$t,Xt,un){Bt(wt,0+(un?1:0),3),function(dn,mn,an,en){Nt(dn),en&&(mt(dn,an),mt(dn,~an)),_.arraySet(dn.pending_buf,dn.window,mn,an,dn.pending),dn.pending+=an}(wt,$t,Xt,!0)}o._tr_init=function(wt){qt||(function(){var $t,Xt,un,dn,mn,an=new Array(16);for(un=0,dn=0;dn<28;dn++)for(pt[dn]=un,$t=0;$t<1<<et[dn];$t++)ft[un++]=dn;for(ft[un-1]=dn,mn=0,dn=0;dn<16;dn++)for(Ot[dn]=mn,$t=0;$t<1<<tt[dn];$t++)vt[mn++]=dn;for(mn>>=7;dn<30;dn++)for(Ot[dn]=mn<<7,$t=0;$t<1<<tt[dn]-7;$t++)vt[256+mn++]=dn;for(Xt=0;Xt<=15;Xt++)an[Xt]=0;for($t=0;$t<=143;)st[2*$t+1]=8,$t++,an[8]++;for(;$t<=255;)st[2*$t+1]=9,$t++,an[9]++;for(;$t<=279;)st[2*$t+1]=7,$t++,an[7]++;for(;$t<=287;)st[2*$t+1]=8,$t++,an[8]++;for(xt(st,287,an),$t=0;$t<30;$t++)ht[2*$t+1]=5,ht[2*$t]=sn($t,5);ct=new Lt(st,et,257,286,15),yt=new Lt(ht,tt,0,30,15),Et=new Lt(new Array(0),j,0,19,7)}(),qt=!0),wt.l_desc=new Tt(wt.dyn_ltree,ct),wt.d_desc=new Tt(wt.dyn_dtree,yt),wt.bl_desc=new Tt(wt.bl_tree,Et),wt.bi_buf=0,wt.bi_valid=0,St(wt)},o._tr_stored_block=Pt,o._tr_flush_block=function(wt,$t,Xt,un){var dn,mn,an=0;wt.level>0?(wt.strm.data_type===2&&(wt.strm.data_type=function(en){var Mt,jt=4093624447;for(Mt=0;Mt<=31;Mt++,jt>>>=1)if(1&jt&&en.dyn_ltree[2*Mt]!==0)return 0;if(en.dyn_ltree[18]!==0||en.dyn_ltree[20]!==0||en.dyn_ltree[26]!==0)return 1;for(Mt=32;Mt<256;Mt++)if(en.dyn_ltree[2*Mt]!==0)return 1;return 0}(wt)),Gt(wt,wt.l_desc),Gt(wt,wt.d_desc),an=function(en){var Mt;for(Ut(en,en.dyn_ltree,en.l_desc.max_code),Ut(en,en.dyn_dtree,en.d_desc.max_code),Gt(en,en.bl_desc),Mt=18;Mt>=3&&en.bl_tree[2*it[Mt]+1]===0;Mt--);return en.opt_len+=3*(Mt+1)+5+5+4,Mt}(wt),dn=wt.opt_len+3+7>>>3,(mn=wt.static_len+3+7>>>3)<=dn&&(dn=mn)):dn=mn=Xt+5,Xt+4<=dn&&$t!==-1?Pt(wt,$t,Xt,un):wt.strategy===4||mn===dn?(Bt(wt,2+(un?1:0),3),Kt(wt,st,ht)):(Bt(wt,4+(un?1:0),3),function(en,Mt,jt,Qt){var gn;for(Bt(en,Mt-257,5),Bt(en,jt-1,5),Bt(en,Qt-4,4),gn=0;gn<Qt;gn++)Bt(en,en.bl_tree[2*it[gn]+1],3);Ht(en,en.dyn_ltree,Mt-1),Ht(en,en.dyn_dtree,jt-1)}(wt,wt.l_desc.max_code+1,wt.d_desc.max_code+1,an+1),Kt(wt,wt.dyn_ltree,wt.dyn_dtree)),St(wt),un&&Nt(wt)},o._tr_tally=function(wt,$t,Xt){return wt.pending_buf[wt.d_buf+2*wt.last_lit]=$t>>>8&255,wt.pending_buf[wt.d_buf+2*wt.last_lit+1]=255&$t,wt.pending_buf[wt.l_buf+wt.last_lit]=255&Xt,wt.last_lit++,$t===0?wt.dyn_ltree[2*Xt]++:(wt.matches++,$t--,wt.dyn_ltree[2*(ft[Xt]+256+1)]++,wt.dyn_dtree[2*It($t)]++),wt.last_lit===wt.lit_bufsize-1},o._tr_align=function(wt){Bt(wt,2,3),nn(wt,256,st),function($t){$t.bi_valid===16?(mt($t,$t.bi_buf),$t.bi_buf=0,$t.bi_valid=0):$t.bi_valid>=8&&($t.pending_buf[$t.pending++]=255&$t.bi_buf,$t.bi_buf>>=8,$t.bi_valid-=8)}(wt)}},function(i,o,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(i,o,s){var _=s(32),$=s(73),et=s(74),tt=s(175),j=s(176);function it(Tt){return(Tt>>>24&255)+(Tt>>>8&65280)+((65280&Tt)<<8)+((255&Tt)<<24)}function st(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ht(Tt){var It;return Tt&&Tt.state?(It=Tt.state,Tt.total_in=Tt.total_out=It.total=0,Tt.msg="",It.wrap&&(Tt.adler=1&It.wrap),It.mode=1,It.last=0,It.havedict=0,It.dmax=32768,It.head=null,It.hold=0,It.bits=0,It.lencode=It.lendyn=new _.Buf32(852),It.distcode=It.distdyn=new _.Buf32(592),It.sane=1,It.back=-1,0):-2}function vt(Tt){var It;return Tt&&Tt.state?((It=Tt.state).wsize=0,It.whave=0,It.wnext=0,ht(Tt)):-2}function ft(Tt,It){var mt,Bt;return Tt&&Tt.state?(Bt=Tt.state,It<0?(mt=0,It=-It):(mt=1+(It>>4),It<48&&(It&=15)),It&&(It<8||It>15)?-2:(Bt.window!==null&&Bt.wbits!==It&&(Bt.window=null),Bt.wrap=mt,Bt.wbits=It,vt(Tt))):-2}function pt(Tt,It){var mt,Bt;return Tt?(Bt=new st,Tt.state=Bt,Bt.window=null,(mt=ft(Tt,It))!==0&&(Tt.state=null),mt):-2}var ct,yt,Et=!0;function Ot(Tt){if(Et){var It;for(ct=new _.Buf32(512),yt=new _.Buf32(32),It=0;It<144;)Tt.lens[It++]=8;for(;It<256;)Tt.lens[It++]=9;for(;It<280;)Tt.lens[It++]=7;for(;It<288;)Tt.lens[It++]=8;for(j(1,Tt.lens,0,288,ct,0,Tt.work,{bits:9}),It=0;It<32;)Tt.lens[It++]=5;j(2,Tt.lens,0,32,yt,0,Tt.work,{bits:5}),Et=!1}Tt.lencode=ct,Tt.lenbits=9,Tt.distcode=yt,Tt.distbits=5}function Lt(Tt,It,mt,Bt){var nn,sn=Tt.state;return sn.window===null&&(sn.wsize=1<<sn.wbits,sn.wnext=0,sn.whave=0,sn.window=new _.Buf8(sn.wsize)),Bt>=sn.wsize?(_.arraySet(sn.window,It,mt-sn.wsize,sn.wsize,0),sn.wnext=0,sn.whave=sn.wsize):((nn=sn.wsize-sn.wnext)>Bt&&(nn=Bt),_.arraySet(sn.window,It,mt-Bt,nn,sn.wnext),(Bt-=nn)?(_.arraySet(sn.window,It,mt-Bt,Bt,0),sn.wnext=Bt,sn.whave=sn.wsize):(sn.wnext+=nn,sn.wnext===sn.wsize&&(sn.wnext=0),sn.whave<sn.wsize&&(sn.whave+=nn))),0}o.inflateReset=vt,o.inflateReset2=ft,o.inflateResetKeep=ht,o.inflateInit=function(Tt){return pt(Tt,15)},o.inflateInit2=pt,o.inflate=function(Tt,It){var mt,Bt,nn,sn,xt,St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt,$t,Xt,un,dn,mn,an,en,Mt,jt=0,Qt=new _.Buf8(4),gn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Tt||!Tt.state||!Tt.output||!Tt.input&&Tt.avail_in!==0)return-2;(mt=Tt.state).mode===12&&(mt.mode=13),xt=Tt.next_out,nn=Tt.output,Nt=Tt.avail_out,sn=Tt.next_in,Bt=Tt.input,St=Tt.avail_in,Ct=mt.hold,Vt=mt.bits,Kt=St,Gt=Nt,an=0;e:for(;;)switch(mt.mode){case 1:if(mt.wrap===0){mt.mode=13;break}for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(2&mt.wrap&&Ct===35615){mt.check=0,Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0),Ct=0,Vt=0,mt.mode=2;break}if(mt.flags=0,mt.head&&(mt.head.done=!1),!(1&mt.wrap)||(((255&Ct)<<8)+(Ct>>8))%31){Tt.msg="incorrect header check",mt.mode=30;break}if((15&Ct)!=8){Tt.msg="unknown compression method",mt.mode=30;break}if(Vt-=4,mn=8+(15&(Ct>>>=4)),mt.wbits===0)mt.wbits=mn;else if(mn>mt.wbits){Tt.msg="invalid window size",mt.mode=30;break}mt.dmax=1<<mn,Tt.adler=mt.check=1,mt.mode=512&Ct?10:12,Ct=0,Vt=0;break;case 2:for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(mt.flags=Ct,(255&mt.flags)!=8){Tt.msg="unknown compression method",mt.mode=30;break}if(57344&mt.flags){Tt.msg="unknown header flags set",mt.mode=30;break}mt.head&&(mt.head.text=Ct>>8&1),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0)),Ct=0,Vt=0,mt.mode=3;case 3:for(;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.head&&(mt.head.time=Ct),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,Qt[2]=Ct>>>16&255,Qt[3]=Ct>>>24&255,mt.check=et(mt.check,Qt,4,0)),Ct=0,Vt=0,mt.mode=4;case 4:for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.head&&(mt.head.xflags=255&Ct,mt.head.os=Ct>>8),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0)),Ct=0,Vt=0,mt.mode=5;case 5:if(1024&mt.flags){for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.length=Ct,mt.head&&(mt.head.extra_len=Ct),512&mt.flags&&(Qt[0]=255&Ct,Qt[1]=Ct>>>8&255,mt.check=et(mt.check,Qt,2,0)),Ct=0,Vt=0}else mt.head&&(mt.head.extra=null);mt.mode=6;case 6:if(1024&mt.flags&&((Ut=mt.length)>St&&(Ut=St),Ut&&(mt.head&&(mn=mt.head.extra_len-mt.length,mt.head.extra||(mt.head.extra=new Array(mt.head.extra_len)),_.arraySet(mt.head.extra,Bt,sn,Ut,mn)),512&mt.flags&&(mt.check=et(mt.check,Bt,Ut,sn)),St-=Ut,sn+=Ut,mt.length-=Ut),mt.length))break e;mt.length=0,mt.mode=7;case 7:if(2048&mt.flags){if(St===0)break e;Ut=0;do mn=Bt[sn+Ut++],mt.head&&mn&&mt.length<65536&&(mt.head.name+=String.fromCharCode(mn));while(mn&&Ut<St);if(512&mt.flags&&(mt.check=et(mt.check,Bt,Ut,sn)),St-=Ut,sn+=Ut,mn)break e}else mt.head&&(mt.head.name=null);mt.length=0,mt.mode=8;case 8:if(4096&mt.flags){if(St===0)break e;Ut=0;do mn=Bt[sn+Ut++],mt.head&&mn&&mt.length<65536&&(mt.head.comment+=String.fromCharCode(mn));while(mn&&Ut<St);if(512&mt.flags&&(mt.check=et(mt.check,Bt,Ut,sn)),St-=Ut,sn+=Ut,mn)break e}else mt.head&&(mt.head.comment=null);mt.mode=9;case 9:if(512&mt.flags){for(;Vt<16;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(Ct!==(65535&mt.check)){Tt.msg="header crc mismatch",mt.mode=30;break}Ct=0,Vt=0}mt.head&&(mt.head.hcrc=mt.flags>>9&1,mt.head.done=!0),Tt.adler=mt.check=0,mt.mode=12;break;case 10:for(;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Tt.adler=mt.check=it(Ct),Ct=0,Vt=0,mt.mode=11;case 11:if(mt.havedict===0)return Tt.next_out=xt,Tt.avail_out=Nt,Tt.next_in=sn,Tt.avail_in=St,mt.hold=Ct,mt.bits=Vt,2;Tt.adler=mt.check=1,mt.mode=12;case 12:if(It===5||It===6)break e;case 13:if(mt.last){Ct>>>=7&Vt,Vt-=7&Vt,mt.mode=27;break}for(;Vt<3;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}switch(mt.last=1&Ct,Vt-=1,3&(Ct>>>=1)){case 0:mt.mode=14;break;case 1:if(Ot(mt),mt.mode=20,It===6){Ct>>>=2,Vt-=2;break e}break;case 2:mt.mode=17;break;case 3:Tt.msg="invalid block type",mt.mode=30}Ct>>>=2,Vt-=2;break;case 14:for(Ct>>>=7&Vt,Vt-=7&Vt;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if((65535&Ct)!=(Ct>>>16^65535)){Tt.msg="invalid stored block lengths",mt.mode=30;break}if(mt.length=65535&Ct,Ct=0,Vt=0,mt.mode=15,It===6)break e;case 15:mt.mode=16;case 16:if(Ut=mt.length){if(Ut>St&&(Ut=St),Ut>Nt&&(Ut=Nt),Ut===0)break e;_.arraySet(nn,Bt,sn,Ut,xt),St-=Ut,sn+=Ut,Nt-=Ut,xt+=Ut,mt.length-=Ut;break}mt.mode=12;break;case 17:for(;Vt<14;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(mt.nlen=257+(31&Ct),Ct>>>=5,Vt-=5,mt.ndist=1+(31&Ct),Ct>>>=5,Vt-=5,mt.ncode=4+(15&Ct),Ct>>>=4,Vt-=4,mt.nlen>286||mt.ndist>30){Tt.msg="too many length or distance symbols",mt.mode=30;break}mt.have=0,mt.mode=18;case 18:for(;mt.have<mt.ncode;){for(;Vt<3;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.lens[gn[mt.have++]]=7&Ct,Ct>>>=3,Vt-=3}for(;mt.have<19;)mt.lens[gn[mt.have++]]=0;if(mt.lencode=mt.lendyn,mt.lenbits=7,en={bits:mt.lenbits},an=j(0,mt.lens,0,19,mt.lencode,0,mt.work,en),mt.lenbits=en.bits,an){Tt.msg="invalid code lengths set",mt.mode=30;break}mt.have=0,mt.mode=19;case 19:for(;mt.have<mt.nlen+mt.ndist;){for(;wt=(jt=mt.lencode[Ct&(1<<mt.lenbits)-1])>>>16&255,$t=65535&jt,!((Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if($t<16)Ct>>>=Pt,Vt-=Pt,mt.lens[mt.have++]=$t;else{if($t===16){for(Mt=Pt+2;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(Ct>>>=Pt,Vt-=Pt,mt.have===0){Tt.msg="invalid bit length repeat",mt.mode=30;break}mn=mt.lens[mt.have-1],Ut=3+(3&Ct),Ct>>>=2,Vt-=2}else if($t===17){for(Mt=Pt+3;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Vt-=Pt,mn=0,Ut=3+(7&(Ct>>>=Pt)),Ct>>>=3,Vt-=3}else{for(Mt=Pt+7;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Vt-=Pt,mn=0,Ut=11+(127&(Ct>>>=Pt)),Ct>>>=7,Vt-=7}if(mt.have+Ut>mt.nlen+mt.ndist){Tt.msg="invalid bit length repeat",mt.mode=30;break}for(;Ut--;)mt.lens[mt.have++]=mn}}if(mt.mode===30)break;if(mt.lens[256]===0){Tt.msg="invalid code -- missing end-of-block",mt.mode=30;break}if(mt.lenbits=9,en={bits:mt.lenbits},an=j(1,mt.lens,0,mt.nlen,mt.lencode,0,mt.work,en),mt.lenbits=en.bits,an){Tt.msg="invalid literal/lengths set",mt.mode=30;break}if(mt.distbits=6,mt.distcode=mt.distdyn,en={bits:mt.distbits},an=j(2,mt.lens,mt.nlen,mt.ndist,mt.distcode,0,mt.work,en),mt.distbits=en.bits,an){Tt.msg="invalid distances set",mt.mode=30;break}if(mt.mode=20,It===6)break e;case 20:mt.mode=21;case 21:if(St>=6&&Nt>=258){Tt.next_out=xt,Tt.avail_out=Nt,Tt.next_in=sn,Tt.avail_in=St,mt.hold=Ct,mt.bits=Vt,tt(Tt,Gt),xt=Tt.next_out,nn=Tt.output,Nt=Tt.avail_out,sn=Tt.next_in,Bt=Tt.input,St=Tt.avail_in,Ct=mt.hold,Vt=mt.bits,mt.mode===12&&(mt.back=-1);break}for(mt.back=0;wt=(jt=mt.lencode[Ct&(1<<mt.lenbits)-1])>>>16&255,$t=65535&jt,!((Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(wt&&!(240&wt)){for(Xt=Pt,un=wt,dn=$t;wt=(jt=mt.lencode[dn+((Ct&(1<<Xt+un)-1)>>Xt)])>>>16&255,$t=65535&jt,!(Xt+(Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Ct>>>=Xt,Vt-=Xt,mt.back+=Xt}if(Ct>>>=Pt,Vt-=Pt,mt.back+=Pt,mt.length=$t,wt===0){mt.mode=26;break}if(32&wt){mt.back=-1,mt.mode=12;break}if(64&wt){Tt.msg="invalid literal/length code",mt.mode=30;break}mt.extra=15&wt,mt.mode=22;case 22:if(mt.extra){for(Mt=mt.extra;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.length+=Ct&(1<<mt.extra)-1,Ct>>>=mt.extra,Vt-=mt.extra,mt.back+=mt.extra}mt.was=mt.length,mt.mode=23;case 23:for(;wt=(jt=mt.distcode[Ct&(1<<mt.distbits)-1])>>>16&255,$t=65535&jt,!((Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(!(240&wt)){for(Xt=Pt,un=wt,dn=$t;wt=(jt=mt.distcode[dn+((Ct&(1<<Xt+un)-1)>>Xt)])>>>16&255,$t=65535&jt,!(Xt+(Pt=jt>>>24)<=Vt);){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}Ct>>>=Xt,Vt-=Xt,mt.back+=Xt}if(Ct>>>=Pt,Vt-=Pt,mt.back+=Pt,64&wt){Tt.msg="invalid distance code",mt.mode=30;break}mt.offset=$t,mt.extra=15&wt,mt.mode=24;case 24:if(mt.extra){for(Mt=mt.extra;Vt<Mt;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}mt.offset+=Ct&(1<<mt.extra)-1,Ct>>>=mt.extra,Vt-=mt.extra,mt.back+=mt.extra}if(mt.offset>mt.dmax){Tt.msg="invalid distance too far back",mt.mode=30;break}mt.mode=25;case 25:if(Nt===0)break e;if(Ut=Gt-Nt,mt.offset>Ut){if((Ut=mt.offset-Ut)>mt.whave&&mt.sane){Tt.msg="invalid distance too far back",mt.mode=30;break}Ut>mt.wnext?(Ut-=mt.wnext,Ht=mt.wsize-Ut):Ht=mt.wnext-Ut,Ut>mt.length&&(Ut=mt.length),qt=mt.window}else qt=nn,Ht=xt-mt.offset,Ut=mt.length;Ut>Nt&&(Ut=Nt),Nt-=Ut,mt.length-=Ut;do nn[xt++]=qt[Ht++];while(--Ut);mt.length===0&&(mt.mode=21);break;case 26:if(Nt===0)break e;nn[xt++]=mt.length,Nt--,mt.mode=21;break;case 27:if(mt.wrap){for(;Vt<32;){if(St===0)break e;St--,Ct|=Bt[sn++]<<Vt,Vt+=8}if(Gt-=Nt,Tt.total_out+=Gt,mt.total+=Gt,Gt&&(Tt.adler=mt.check=mt.flags?et(mt.check,nn,Gt,xt-Gt):$(mt.check,nn,Gt,xt-Gt)),Gt=Nt,(mt.flags?Ct:it(Ct))!==mt.check){Tt.msg="incorrect data check",mt.mode=30;break}Ct=0,Vt=0}mt.mode=28;case 28:if(mt.wrap&&mt.flags){for(;Vt<32;){if(St===0)break e;St--,Ct+=Bt[sn++]<<Vt,Vt+=8}if(Ct!==(4294967295&mt.total)){Tt.msg="incorrect length check",mt.mode=30;break}Ct=0,Vt=0}mt.mode=29;case 29:an=1;break e;case 30:an=-3;break e;case 31:return-4;case 32:default:return-2}return Tt.next_out=xt,Tt.avail_out=Nt,Tt.next_in=sn,Tt.avail_in=St,mt.hold=Ct,mt.bits=Vt,(mt.wsize||Gt!==Tt.avail_out&&mt.mode<30&&(mt.mode<27||It!==4))&&Lt(Tt,Tt.output,Tt.next_out,Gt-Tt.avail_out)?(mt.mode=31,-4):(Kt-=Tt.avail_in,Gt-=Tt.avail_out,Tt.total_in+=Kt,Tt.total_out+=Gt,mt.total+=Gt,mt.wrap&&Gt&&(Tt.adler=mt.check=mt.flags?et(mt.check,nn,Gt,Tt.next_out-Gt):$(mt.check,nn,Gt,Tt.next_out-Gt)),Tt.data_type=mt.bits+(mt.last?64:0)+(mt.mode===12?128:0)+(mt.mode===20||mt.mode===15?256:0),(Kt===0&&Gt===0||It===4)&&an===0&&(an=-5),an)},o.inflateEnd=function(Tt){if(!Tt||!Tt.state)return-2;var It=Tt.state;return It.window&&(It.window=null),Tt.state=null,0},o.inflateGetHeader=function(Tt,It){var mt;return Tt&&Tt.state&&2&(mt=Tt.state).wrap?(mt.head=It,It.done=!1,0):-2},o.inflateSetDictionary=function(Tt,It){var mt,Bt=It.length;return Tt&&Tt.state?(mt=Tt.state).wrap!==0&&mt.mode!==11?-2:mt.mode===11&&$(1,It,Bt,0)!==mt.check?-3:Lt(Tt,It,Bt,Bt)?(mt.mode=31,-4):(mt.havedict=1,0):-2},o.inflateInfo="pako inflate (from Nodeca project)"},function(i,o,s){i.exports=function(_,$){var et,tt,j,it,st,ht,vt,ft,pt,ct,yt,Et,Ot,Lt,Tt,It,mt,Bt,nn,sn,xt,St,Nt,Ct,Vt;et=_.state,tt=_.next_in,Ct=_.input,j=tt+(_.avail_in-5),it=_.next_out,Vt=_.output,st=it-($-_.avail_out),ht=it+(_.avail_out-257),vt=et.dmax,ft=et.wsize,pt=et.whave,ct=et.wnext,yt=et.window,Et=et.hold,Ot=et.bits,Lt=et.lencode,Tt=et.distcode,It=(1<<et.lenbits)-1,mt=(1<<et.distbits)-1;e:do{Ot<15&&(Et+=Ct[tt++]<<Ot,Ot+=8,Et+=Ct[tt++]<<Ot,Ot+=8),Bt=Lt[Et&It];t:for(;;){if(Et>>>=nn=Bt>>>24,Ot-=nn,(nn=Bt>>>16&255)===0)Vt[it++]=65535&Bt;else{if(!(16&nn)){if(!(64&nn)){Bt=Lt[(65535&Bt)+(Et&(1<<nn)-1)];continue t}if(32&nn){et.mode=12;break e}_.msg="invalid literal/length code",et.mode=30;break e}sn=65535&Bt,(nn&=15)&&(Ot<nn&&(Et+=Ct[tt++]<<Ot,Ot+=8),sn+=Et&(1<<nn)-1,Et>>>=nn,Ot-=nn),Ot<15&&(Et+=Ct[tt++]<<Ot,Ot+=8,Et+=Ct[tt++]<<Ot,Ot+=8),Bt=Tt[Et&mt];n:for(;;){if(Et>>>=nn=Bt>>>24,Ot-=nn,!(16&(nn=Bt>>>16&255))){if(!(64&nn)){Bt=Tt[(65535&Bt)+(Et&(1<<nn)-1)];continue n}_.msg="invalid distance code",et.mode=30;break e}if(xt=65535&Bt,Ot<(nn&=15)&&(Et+=Ct[tt++]<<Ot,(Ot+=8)<nn&&(Et+=Ct[tt++]<<Ot,Ot+=8)),(xt+=Et&(1<<nn)-1)>vt){_.msg="invalid distance too far back",et.mode=30;break e}if(Et>>>=nn,Ot-=nn,xt>(nn=it-st)){if((nn=xt-nn)>pt&&et.sane){_.msg="invalid distance too far back",et.mode=30;break e}if(St=0,Nt=yt,ct===0){if(St+=ft-nn,nn<sn){sn-=nn;do Vt[it++]=yt[St++];while(--nn);St=it-xt,Nt=Vt}}else if(ct<nn){if(St+=ft+ct-nn,(nn-=ct)<sn){sn-=nn;do Vt[it++]=yt[St++];while(--nn);if(St=0,ct<sn){sn-=nn=ct;do Vt[it++]=yt[St++];while(--nn);St=it-xt,Nt=Vt}}}else if(St+=ct-nn,nn<sn){sn-=nn;do Vt[it++]=yt[St++];while(--nn);St=it-xt,Nt=Vt}for(;sn>2;)Vt[it++]=Nt[St++],Vt[it++]=Nt[St++],Vt[it++]=Nt[St++],sn-=3;sn&&(Vt[it++]=Nt[St++],sn>1&&(Vt[it++]=Nt[St++]))}else{St=it-xt;do Vt[it++]=Vt[St++],Vt[it++]=Vt[St++],Vt[it++]=Vt[St++],sn-=3;while(sn>2);sn&&(Vt[it++]=Vt[St++],sn>1&&(Vt[it++]=Vt[St++]))}break}}break}}while(tt<j&&it<ht);tt-=sn=Ot>>3,Et&=(1<<(Ot-=sn<<3))-1,_.next_in=tt,_.next_out=it,_.avail_in=tt<j?j-tt+5:5-(tt-j),_.avail_out=it<ht?ht-it+257:257-(it-ht),et.hold=Et,et.bits=Ot}},function(i,o,s){var _=s(32),$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],j=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(it,st,ht,vt,ft,pt,ct,yt){var Et,Ot,Lt,Tt,It,mt,Bt,nn,sn,xt=yt.bits,St=0,Nt=0,Ct=0,Vt=0,Kt=0,Gt=0,Ut=0,Ht=0,qt=0,Pt=0,wt=null,$t=0,Xt=new _.Buf16(16),un=new _.Buf16(16),dn=null,mn=0;for(St=0;St<=15;St++)Xt[St]=0;for(Nt=0;Nt<vt;Nt++)Xt[st[ht+Nt]]++;for(Kt=xt,Vt=15;Vt>=1&&Xt[Vt]===0;Vt--);if(Kt>Vt&&(Kt=Vt),Vt===0)return ft[pt++]=20971520,ft[pt++]=20971520,yt.bits=1,0;for(Ct=1;Ct<Vt&&Xt[Ct]===0;Ct++);for(Kt<Ct&&(Kt=Ct),Ht=1,St=1;St<=15;St++)if(Ht<<=1,(Ht-=Xt[St])<0)return-1;if(Ht>0&&(it===0||Vt!==1))return-1;for(un[1]=0,St=1;St<15;St++)un[St+1]=un[St]+Xt[St];for(Nt=0;Nt<vt;Nt++)st[ht+Nt]!==0&&(ct[un[st[ht+Nt]]++]=Nt);if(it===0?(wt=dn=ct,mt=19):it===1?(wt=$,$t-=257,dn=et,mn-=257,mt=256):(wt=tt,dn=j,mt=-1),Pt=0,Nt=0,St=Ct,It=pt,Gt=Kt,Ut=0,Lt=-1,Tt=(qt=1<<Kt)-1,it===1&&qt>852||it===2&&qt>592)return 1;for(;;){Bt=St-Ut,ct[Nt]<mt?(nn=0,sn=ct[Nt]):ct[Nt]>mt?(nn=dn[mn+ct[Nt]],sn=wt[$t+ct[Nt]]):(nn=96,sn=0),Et=1<<St-Ut,Ct=Ot=1<<Gt;do ft[It+(Pt>>Ut)+(Ot-=Et)]=Bt<<24|nn<<16|sn|0;while(Ot!==0);for(Et=1<<St-1;Pt&Et;)Et>>=1;if(Et!==0?(Pt&=Et-1,Pt+=Et):Pt=0,Nt++,--Xt[St]==0){if(St===Vt)break;St=st[ht+ct[Nt]]}if(St>Kt&&(Pt&Tt)!==Lt){for(Ut===0&&(Ut=Kt),It+=Ct,Ht=1<<(Gt=St-Ut);Gt+Ut<Vt&&!((Ht-=Xt[Gt+Ut])<=0);)Gt++,Ht<<=1;if(qt+=1<<Gt,it===1&&qt>852||it===2&&qt>592)return 1;ft[Lt=Pt&Tt]=Kt<<24|Gt<<16|It-pt|0}}return Pt!==0&&(ft[It+Pt]=St-Ut<<24|64<<16|0),yt.bits=Kt,0}},function(i,o,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(i,o){},function(i,o,s){function _(st,ht){var vt=Object.keys(st);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(st);ht&&(ft=ft.filter(function(pt){return Object.getOwnPropertyDescriptor(st,pt).enumerable})),vt.push.apply(vt,ft)}return vt}function $(st,ht,vt){return ht in st?Object.defineProperty(st,ht,{value:vt,enumerable:!0,configurable:!0,writable:!0}):st[ht]=vt,st}function et(st,ht){for(var vt=0;vt<ht.length;vt++){var ft=ht[vt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(st,ft.key,ft)}}var tt=s(4).Buffer,j=s(180).inspect,it=j&&j.custom||"inspect";i.exports=function(){function st(){(function(ft,pt){if(!(ft instanceof pt))throw new TypeError("Cannot call a class as a function")})(this,st),this.head=null,this.tail=null,this.length=0}var ht,vt;return ht=st,(vt=[{key:"push",value:function(ft){var pt={data:ft,next:null};this.length>0?this.tail.next=pt:this.head=pt,this.tail=pt,++this.length}},{key:"unshift",value:function(ft){var pt={data:ft,next:this.head};this.length===0&&(this.tail=pt),this.head=pt,++this.length}},{key:"shift",value:function(){if(this.length!==0){var ft=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,ft}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ft){if(this.length===0)return"";for(var pt=this.head,ct=""+pt.data;pt=pt.next;)ct+=ft+pt.data;return ct}},{key:"concat",value:function(ft){if(this.length===0)return tt.alloc(0);for(var pt,ct,yt,Et=tt.allocUnsafe(ft>>>0),Ot=this.head,Lt=0;Ot;)pt=Ot.data,ct=Et,yt=Lt,tt.prototype.copy.call(pt,ct,yt),Lt+=Ot.data.length,Ot=Ot.next;return Et}},{key:"consume",value:function(ft,pt){var ct;return ft<this.head.data.length?(ct=this.head.data.slice(0,ft),this.head.data=this.head.data.slice(ft)):ct=ft===this.head.data.length?this.shift():pt?this._getString(ft):this._getBuffer(ft),ct}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ft){var pt=this.head,ct=1,yt=pt.data;for(ft-=yt.length;pt=pt.next;){var Et=pt.data,Ot=ft>Et.length?Et.length:ft;if(Ot===Et.length?yt+=Et:yt+=Et.slice(0,ft),(ft-=Ot)==0){Ot===Et.length?(++ct,pt.next?this.head=pt.next:this.head=this.tail=null):(this.head=pt,pt.data=Et.slice(Ot));break}++ct}return this.length-=ct,yt}},{key:"_getBuffer",value:function(ft){var pt=tt.allocUnsafe(ft),ct=this.head,yt=1;for(ct.data.copy(pt),ft-=ct.data.length;ct=ct.next;){var Et=ct.data,Ot=ft>Et.length?Et.length:ft;if(Et.copy(pt,pt.length-ft,0,Ot),(ft-=Ot)==0){Ot===Et.length?(++yt,ct.next?this.head=ct.next:this.head=this.tail=null):(this.head=ct,ct.data=Et.slice(Ot));break}++yt}return this.length-=yt,pt}},{key:it,value:function(ft,pt){return j(this,function(ct){for(var yt=1;yt<arguments.length;yt++){var Et=arguments[yt]!=null?arguments[yt]:{};yt%2?_(Object(Et),!0).forEach(function(Ot){$(ct,Ot,Et[Ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ct,Object.getOwnPropertyDescriptors(Et)):_(Object(Et)).forEach(function(Ot){Object.defineProperty(ct,Ot,Object.getOwnPropertyDescriptor(Et,Ot))})}return ct}({},pt,{depth:0,customInspect:!1}))}}])&&et(ht.prototype,vt),st}()},function(i,o){},function(i,o,s){(function(_){var $;function et(Tt,It,mt){return It in Tt?Object.defineProperty(Tt,It,{value:mt,enumerable:!0,configurable:!0,writable:!0}):Tt[It]=mt,Tt}var tt=s(45),j=Symbol("lastResolve"),it=Symbol("lastReject"),st=Symbol("error"),ht=Symbol("ended"),vt=Symbol("lastPromise"),ft=Symbol("handlePromise"),pt=Symbol("stream");function ct(Tt,It){return{value:Tt,done:It}}function yt(Tt){var It=Tt[j];if(It!==null){var mt=Tt[pt].read();mt!==null&&(Tt[vt]=null,Tt[j]=null,Tt[it]=null,It(ct(mt,!1)))}}function Et(Tt){_.nextTick(yt,Tt)}var Ot=Object.getPrototypeOf(function(){}),Lt=Object.setPrototypeOf((et($={get stream(){return this[pt]},next:function(){var Tt=this,It=this[st];if(It!==null)return Promise.reject(It);if(this[ht])return Promise.resolve(ct(void 0,!0));if(this[pt].destroyed)return new Promise(function(sn,xt){_.nextTick(function(){Tt[st]?xt(Tt[st]):sn(ct(void 0,!0))})});var mt,Bt=this[vt];if(Bt)mt=new Promise(function(sn,xt){return function(St,Nt){sn.then(function(){xt[ht]?St(ct(void 0,!0)):xt[ft](St,Nt)},Nt)}}(Bt,this));else{var nn=this[pt].read();if(nn!==null)return Promise.resolve(ct(nn,!1));mt=new Promise(this[ft])}return this[vt]=mt,mt}},Symbol.asyncIterator,function(){return this}),et($,"return",function(){var Tt=this;return new Promise(function(It,mt){Tt[pt].destroy(null,function(Bt){Bt?mt(Bt):It(ct(void 0,!0))})})}),$),Ot);i.exports=function(Tt){var It,mt=Object.create(Lt,(et(It={},pt,{value:Tt,writable:!0}),et(It,j,{value:null,writable:!0}),et(It,it,{value:null,writable:!0}),et(It,st,{value:null,writable:!0}),et(It,ht,{value:Tt._readableState.endEmitted,writable:!0}),et(It,ft,{value:function(Bt,nn){var sn=mt[pt].read();sn?(mt[vt]=null,mt[j]=null,mt[it]=null,Bt(ct(sn,!1))):(mt[j]=Bt,mt[it]=nn)},writable:!0}),It));return mt[vt]=null,tt(Tt,function(Bt){if(Bt&&Bt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var nn=mt[it];return nn!==null&&(mt[vt]=null,mt[j]=null,mt[it]=null,nn(Bt)),void(mt[st]=Bt)}var sn=mt[j];sn!==null&&(mt[vt]=null,mt[j]=null,mt[it]=null,sn(ct(void 0,!0))),mt[ht]=!0}),Tt.on("readable",Et.bind(null,mt)),mt}}).call(this,s(2))},function(i,o){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(i,o,s){i.exports=$;var _=s(80);function $(et){if(!(this instanceof $))return new $(et);_.call(this,et)}s(7)($,_),$.prototype._transform=function(et,tt,j){j(null,et)}},function(i,o,s){var _,$=s(23).codes,et=$.ERR_MISSING_ARGS,tt=$.ERR_STREAM_DESTROYED;function j(ft){if(ft)throw ft}function it(ft,pt,ct,yt){yt=function(Lt){var Tt=!1;return function(){Tt||(Tt=!0,Lt.apply(void 0,arguments))}}(yt);var Et=!1;ft.on("close",function(){Et=!0}),_===void 0&&(_=s(45)),_(ft,{readable:pt,writable:ct},function(Lt){if(Lt)return yt(Lt);Et=!0,yt()});var Ot=!1;return function(Lt){if(!Et&&!Ot)return Ot=!0,function(Tt){return Tt.setHeader&&typeof Tt.abort=="function"}(ft)?ft.abort():typeof ft.destroy=="function"?ft.destroy():void yt(Lt||new tt("pipe"))}}function st(ft){ft()}function ht(ft,pt){return ft.pipe(pt)}function vt(ft){return ft.length?typeof ft[ft.length-1]!="function"?j:ft.pop():j}i.exports=function(){for(var ft=arguments.length,pt=new Array(ft),ct=0;ct<ft;ct++)pt[ct]=arguments[ct];var yt,Et=vt(pt);if(Array.isArray(pt[0])&&(pt=pt[0]),pt.length<2)throw new et("streams");var Ot=pt.map(function(Lt,Tt){var It=Tt<pt.length-1;return it(Lt,It,Tt>0,function(mt){yt||(yt=mt),mt&&Ot.forEach(st),It||(Ot.forEach(st),Et(yt))})});return pt.reduce(ht)}},function(i,o,s){var _=s(186)(function $(et,tt){return(tt=tt||{}).namespace=et,tt.prod=!0,tt.dev=!1,tt.force||$.force?$.yep(tt):$.nope(tt)});i.exports=_},function(i,o){var s=[],_=[],$=function(){};function et(ct){return!~s.indexOf(ct)&&(s.push(ct),!0)}function tt(ct){$=ct}function j(ct){for(var yt=[],Et=0;Et<s.length;Et++)if(s[Et].async)yt.push(s[Et]);else if(s[Et](ct))return!0;return!!yt.length&&new Promise(function(Ot){Promise.all(yt.map(function(Lt){return Lt(ct)})).then(function(Lt){Ot(Lt.some(Boolean))})})}function it(ct){return!~_.indexOf(ct)&&(_.push(ct),!0)}function st(){$.apply($,arguments)}function ht(ct){for(var yt=0;yt<_.length;yt++)ct=_[yt].apply(_[yt],arguments);return ct}function vt(ct,yt){var Et=Object.prototype.hasOwnProperty;for(var Ot in yt)Et.call(yt,Ot)&&(ct[Ot]=yt[Ot]);return ct}function ft(ct){return ct.enabled=!1,ct.modify=it,ct.set=tt,ct.use=et,vt(function(){return!1},ct)}function pt(ct){return ct.enabled=!0,ct.modify=it,ct.set=tt,ct.use=et,vt(function(){var yt=Array.prototype.slice.call(arguments,0);return st.call(st,ct,ht(yt,ct)),!0},ct)}i.exports=function(ct){return ct.introduce=vt,ct.enabled=j,ct.process=ht,ct.modify=it,ct.write=st,ct.nope=ft,ct.yep=pt,ct.set=tt,ct.use=et,ct}},function(i,o,s){(function(_){var $=s(63),et=s(19).StringDecoder,tt=s(28).Stream;function j(){}i.exports=function(it,st){var ht=_.alloc(65536),vt=new et("utf8"),ft=new tt,pt="",ct=0,yt=0;return it.start===-1&&delete it.start,ft.readable=!0,ft.destroy=function(){ft.destroyed=!0,ft.emit("end"),ft.emit("close")},$.open(it.file,"a+","0644",function(Et,Ot){if(Et)return st?st(Et):ft.emit("error",Et),void ft.destroy();(function Lt(){if(!ft.destroyed)return $.read(Ot,ht,0,ht.length,ct,function(Tt,It){if(Tt)return st?st(Tt):ft.emit("error",Tt),void ft.destroy();if(!It)return pt&&((it.start==null||yt>it.start)&&(st?st(null,pt):ft.emit("line",pt)),yt++,pt=""),setTimeout(Lt,1e3);var mt=vt.write(ht.slice(0,It));st||ft.emit("data",mt);for(var Bt=(mt=(pt+mt).split(/\n+/)).length-1,nn=0;nn<Bt;nn++)(it.start==null||yt>it.start)&&(st?st(null,mt[nn]):ft.emit("line",mt[nn])),yt++;return pt=mt[Bt],ct+=It,Lt()});$.close(Ot,j)})()}),st?ft.destroy:ft}}).call(this,s(4).Buffer)},function(i,o,s){(function(_,$){function et(Tt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(It){return typeof It}:function(It){return It&&typeof Symbol=="function"&&It.constructor===Symbol&&It!==Symbol.prototype?"symbol":typeof It})(Tt)}function tt(Tt,It){var mt=Object.keys(Tt);if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(Tt);It&&(Bt=Bt.filter(function(nn){return Object.getOwnPropertyDescriptor(Tt,nn).enumerable})),mt.push.apply(mt,Bt)}return mt}function j(Tt){for(var It=1;It<arguments.length;It++){var mt=arguments[It]!=null?arguments[It]:{};It%2?tt(Object(mt),!0).forEach(function(Bt){it(Tt,Bt,mt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Tt,Object.getOwnPropertyDescriptors(mt)):tt(Object(mt)).forEach(function(Bt){Object.defineProperty(Tt,Bt,Object.getOwnPropertyDescriptor(mt,Bt))})}return Tt}function it(Tt,It,mt){return It in Tt?Object.defineProperty(Tt,It,{value:mt,enumerable:!0,configurable:!0,writable:!0}):Tt[It]=mt,Tt}function st(Tt,It){if(!(Tt instanceof It))throw new TypeError("Cannot call a class as a function")}function ht(Tt,It){for(var mt=0;mt<It.length;mt++){var Bt=It[mt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Tt,Bt.key,Bt)}}function vt(Tt,It){return(vt=Object.setPrototypeOf||function(mt,Bt){return mt.__proto__=Bt,mt})(Tt,It)}function ft(Tt){var It=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var mt,Bt=ct(Tt);if(It){var nn=ct(this).constructor;mt=Reflect.construct(Bt,arguments,nn)}else mt=Bt.apply(this,arguments);return pt(this,mt)}}function pt(Tt,It){return!It||et(It)!=="object"&&typeof It!="function"?function(mt){if(mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mt}(Tt):It}function ct(Tt){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(It){return It.__proto__||Object.getPrototypeOf(It)})(Tt)}var yt=s(81),Et=s(199),Ot=s(28).Stream,Lt=s(17);i.exports=function(Tt){(function(sn,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");sn.prototype=Object.create(xt&&xt.prototype,{constructor:{value:sn,writable:!0,configurable:!0}}),xt&&vt(sn,xt)})(nn,Tt);var It,mt,Bt=ft(nn);function nn(){var sn,xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,nn),(sn=Bt.call(this,xt)).options=xt,sn.name=xt.name||"http",sn.ssl=!!xt.ssl,sn.host=xt.host||"localhost",sn.port=xt.port,sn.auth=xt.auth,sn.path=xt.path||"",sn.agent=xt.agent,sn.headers=xt.headers||{},sn.headers["content-type"]="application/json",sn.port||(sn.port=sn.ssl?443:80),sn}return It=nn,(mt=[{key:"log",value:function(sn,xt){var St=this;this._request(sn,function(Nt,Ct){Ct&&Ct.statusCode!==200&&(Nt=new Error("Invalid HTTP Status Code: ".concat(Ct.statusCode))),Nt?St.emit("warn",Nt):St.emit("logged",sn)}),xt&&_(xt)}},{key:"query",value:function(sn,xt){typeof sn=="function"&&(xt=sn,sn={}),(sn={method:"query",params:this.normalizeQuery(sn)}).params.path&&(sn.path=sn.params.path,delete sn.params.path),sn.params.auth&&(sn.auth=sn.params.auth,delete sn.params.auth),this._request(sn,function(St,Nt,Ct){if(Nt&&Nt.statusCode!==200&&(St=new Error("Invalid HTTP Status Code: ".concat(Nt.statusCode))),St)return xt(St);if(typeof Ct=="string")try{Ct=JSON.parse(Ct)}catch(Vt){return xt(Vt)}xt(null,Ct)})}},{key:"stream",value:function(){var sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xt=new Ot;(sn={method:"stream",params:sn}).params.path&&(sn.path=sn.params.path,delete sn.params.path),sn.params.auth&&(sn.auth=sn.params.auth,delete sn.params.auth);var St="",Nt=this._request(sn);return xt.destroy=function(){return Nt.destroy()},Nt.on("data",function(Ct){for(var Vt=(Ct=(St+Ct).split(/\n+/)).length-1,Kt=0;Kt<Vt;Kt++)try{xt.emit("log",JSON.parse(Ct[Kt]))}catch(Gt){xt.emit("error",Gt)}St=Ct[Vt]}),Nt.on("error",function(Ct){return xt.emit("error",Ct)}),xt}},{key:"_request",value:function(sn,xt){var St=(sn=sn||{}).auth||this.auth,Nt=sn.path||this.path||"";delete sn.auth,delete sn.path;var Ct=Object.assign({},this.headers);St&&St.bearer&&(Ct.Authorization="Bearer ".concat(St.bearer));var Vt=(this.ssl?Et:yt).request(j(j({},this.options),{},{method:"POST",host:this.host,port:this.port,path:"/".concat(Nt.replace(/^\//,"")),headers:Ct,auth:St&&St.username&&St.password?"".concat(St.username,":").concat(St.password):"",agent:this.agent}));Vt.on("error",xt),Vt.on("response",function(Kt){return Kt.on("end",function(){return xt(null,Kt)}).resume()}),Vt.end($.from(JSON.stringify(sn),"utf8"))}}])&&ht(It.prototype,mt),nn}(Lt)}).call(this,s(12).setImmediate,s(4).Buffer)},function(i,o,s){(function(_,$,et){var tt=s(82),j=s(7),it=s(83),st=s(27),ht=s(190),vt=it.IncomingMessage,ft=it.readyStates,pt=i.exports=function(yt){var Et,Ot=this;st.Writable.call(Ot),Ot._opts=yt,Ot._body=[],Ot._headers={},yt.auth&&Ot.setHeader("Authorization","Basic "+new _(yt.auth).toString("base64")),Object.keys(yt.headers).forEach(function(Tt){Ot.setHeader(Tt,yt.headers[Tt])});var Lt=!0;if(yt.mode==="disable-fetch"||"requestTimeout"in yt&&!tt.abortController)Lt=!1,Et=!0;else if(yt.mode==="prefer-streaming")Et=!1;else if(yt.mode==="allow-wrong-content-type")Et=!tt.overrideMimeType;else{if(yt.mode&&yt.mode!=="default"&&yt.mode!=="prefer-fast")throw new Error("Invalid value for opts.mode");Et=!0}Ot._mode=function(Tt,It){return tt.fetch&&It?"fetch":tt.mozchunkedarraybuffer?"moz-chunked-arraybuffer":tt.msstream?"ms-stream":tt.arraybuffer&&Tt?"arraybuffer":tt.vbArray&&Tt?"text:vbarray":"text"}(Et,Lt),Ot._fetchTimer=null,Ot.on("finish",function(){Ot._onFinish()})};j(pt,st.Writable),pt.prototype.setHeader=function(yt,Et){var Ot=yt.toLowerCase();ct.indexOf(Ot)===-1&&(this._headers[Ot]={name:yt,value:Et})},pt.prototype.getHeader=function(yt){var Et=this._headers[yt.toLowerCase()];return Et?Et.value:null},pt.prototype.removeHeader=function(yt){delete this._headers[yt.toLowerCase()]},pt.prototype._onFinish=function(){var yt=this;if(!yt._destroyed){var Et=yt._opts,Ot=yt._headers,Lt=null;Et.method!=="GET"&&Et.method!=="HEAD"&&(Lt=tt.arraybuffer?ht(_.concat(yt._body)):tt.blobConstructor?new $.Blob(yt._body.map(function(nn){return ht(nn)}),{type:(Ot["content-type"]||{}).value||""}):_.concat(yt._body).toString());var Tt=[];if(Object.keys(Ot).forEach(function(nn){var sn=Ot[nn].name,xt=Ot[nn].value;Array.isArray(xt)?xt.forEach(function(St){Tt.push([sn,St])}):Tt.push([sn,xt])}),yt._mode==="fetch"){var It=null;if(tt.abortController){var mt=new AbortController;It=mt.signal,yt._fetchAbortController=mt,"requestTimeout"in Et&&Et.requestTimeout!==0&&(yt._fetchTimer=$.setTimeout(function(){yt.emit("requestTimeout"),yt._fetchAbortController&&yt._fetchAbortController.abort()},Et.requestTimeout))}$.fetch(yt._opts.url,{method:yt._opts.method,headers:Tt,body:Lt||void 0,mode:"cors",credentials:Et.withCredentials?"include":"same-origin",signal:It}).then(function(nn){yt._fetchResponse=nn,yt._connect()},function(nn){$.clearTimeout(yt._fetchTimer),yt._destroyed||yt.emit("error",nn)})}else{var Bt=yt._xhr=new $.XMLHttpRequest;try{Bt.open(yt._opts.method,yt._opts.url,!0)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}"responseType"in Bt&&(Bt.responseType=yt._mode.split(":")[0]),"withCredentials"in Bt&&(Bt.withCredentials=!!Et.withCredentials),yt._mode==="text"&&"overrideMimeType"in Bt&&Bt.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in Et&&(Bt.timeout=Et.requestTimeout,Bt.ontimeout=function(){yt.emit("requestTimeout")}),Tt.forEach(function(nn){Bt.setRequestHeader(nn[0],nn[1])}),yt._response=null,Bt.onreadystatechange=function(){switch(Bt.readyState){case ft.LOADING:case ft.DONE:yt._onXHRProgress()}},yt._mode==="moz-chunked-arraybuffer"&&(Bt.onprogress=function(){yt._onXHRProgress()}),Bt.onerror=function(){yt._destroyed||yt.emit("error",new Error("XHR error"))};try{Bt.send(Lt)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}}}},pt.prototype._onXHRProgress=function(){(function(yt){try{var Et=yt.status;return Et!==null&&Et!==0}catch{return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},pt.prototype._connect=function(){var yt=this;yt._destroyed||(yt._response=new vt(yt._xhr,yt._fetchResponse,yt._mode,yt._fetchTimer),yt._response.on("error",function(Et){yt.emit("error",Et)}),yt.emit("response",yt._response))},pt.prototype._write=function(yt,Et,Ot){this._body.push(yt),Ot()},pt.prototype.abort=pt.prototype.destroy=function(){this._destroyed=!0,$.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},pt.prototype.end=function(yt,Et,Ot){typeof yt=="function"&&(Ot=yt,yt=void 0),st.Writable.prototype.end.call(this,yt,Et,Ot)},pt.prototype.flushHeaders=function(){},pt.prototype.setTimeout=function(){},pt.prototype.setNoDelay=function(){},pt.prototype.setSocketKeepAlive=function(){};var ct=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,s(4).Buffer,s(5),s(2))},function(i,o,s){var _=s(4).Buffer;i.exports=function($){if($ instanceof Uint8Array){if($.byteOffset===0&&$.byteLength===$.buffer.byteLength)return $.buffer;if(typeof $.buffer.slice=="function")return $.buffer.slice($.byteOffset,$.byteOffset+$.byteLength)}if(_.isBuffer($)){for(var et=new Uint8Array($.length),tt=$.length,j=0;j<tt;j++)et[j]=$[j];return et.buffer}throw new Error("Argument must be a Buffer")}},function(i,o){i.exports=function(){for(var _={},$=0;$<arguments.length;$++){var et=arguments[$];for(var tt in et)s.call(et,tt)&&(_[tt]=et[tt])}return _};var s=Object.prototype.hasOwnProperty},function(i,o){i.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(i,o,s){(function(_,$){var et;(function(tt){o&&o.nodeType,_&&_.nodeType;var j=typeof $=="object"&&$;j.global!==j&&j.window!==j&&j.self;var it,st=2147483647,ht=/^xn--/,vt=/[^\x20-\x7E]/,ft=/[\x2E\u3002\uFF0E\uFF61]/g,pt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ct=Math.floor,yt=String.fromCharCode;function Et(xt){throw new RangeError(pt[xt])}function Ot(xt,St){for(var Nt=xt.length,Ct=[];Nt--;)Ct[Nt]=St(xt[Nt]);return Ct}function Lt(xt,St){var Nt=xt.split("@"),Ct="";return Nt.length>1&&(Ct=Nt[0]+"@",xt=Nt[1]),Ct+Ot((xt=xt.replace(ft,".")).split("."),St).join(".")}function Tt(xt){for(var St,Nt,Ct=[],Vt=0,Kt=xt.length;Vt<Kt;)(St=xt.charCodeAt(Vt++))>=55296&&St<=56319&&Vt<Kt?(64512&(Nt=xt.charCodeAt(Vt++)))==56320?Ct.push(((1023&St)<<10)+(1023&Nt)+65536):(Ct.push(St),Vt--):Ct.push(St);return Ct}function It(xt){return Ot(xt,function(St){var Nt="";return St>65535&&(Nt+=yt((St-=65536)>>>10&1023|55296),St=56320|1023&St),Nt+=yt(St)}).join("")}function mt(xt,St){return xt+22+75*(xt<26)-((St!=0)<<5)}function Bt(xt,St,Nt){var Ct=0;for(xt=Nt?ct(xt/700):xt>>1,xt+=ct(xt/St);xt>455;Ct+=36)xt=ct(xt/35);return ct(Ct+36*xt/(xt+38))}function nn(xt){var St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt,$t=[],Xt=xt.length,un=0,dn=128,mn=72;for((Nt=xt.lastIndexOf("-"))<0&&(Nt=0),Ct=0;Ct<Nt;++Ct)xt.charCodeAt(Ct)>=128&&Et("not-basic"),$t.push(xt.charCodeAt(Ct));for(Vt=Nt>0?Nt+1:0;Vt<Xt;){for(Kt=un,Gt=1,Ut=36;Vt>=Xt&&Et("invalid-input"),((Ht=(wt=xt.charCodeAt(Vt++))-48<10?wt-22:wt-65<26?wt-65:wt-97<26?wt-97:36)>=36||Ht>ct((st-un)/Gt))&&Et("overflow"),un+=Ht*Gt,!(Ht<(qt=Ut<=mn?1:Ut>=mn+26?26:Ut-mn));Ut+=36)Gt>ct(st/(Pt=36-qt))&&Et("overflow"),Gt*=Pt;mn=Bt(un-Kt,St=$t.length+1,Kt==0),ct(un/St)>st-dn&&Et("overflow"),dn+=ct(un/St),un%=St,$t.splice(un++,0,dn)}return It($t)}function sn(xt){var St,Nt,Ct,Vt,Kt,Gt,Ut,Ht,qt,Pt,wt,$t,Xt,un,dn,mn=[];for($t=(xt=Tt(xt)).length,St=128,Nt=0,Kt=72,Gt=0;Gt<$t;++Gt)(wt=xt[Gt])<128&&mn.push(yt(wt));for(Ct=Vt=mn.length,Vt&&mn.push("-");Ct<$t;){for(Ut=st,Gt=0;Gt<$t;++Gt)(wt=xt[Gt])>=St&&wt<Ut&&(Ut=wt);for(Ut-St>ct((st-Nt)/(Xt=Ct+1))&&Et("overflow"),Nt+=(Ut-St)*Xt,St=Ut,Gt=0;Gt<$t;++Gt)if((wt=xt[Gt])<St&&++Nt>st&&Et("overflow"),wt==St){for(Ht=Nt,qt=36;!(Ht<(Pt=qt<=Kt?1:qt>=Kt+26?26:qt-Kt));qt+=36)dn=Ht-Pt,un=36-Pt,mn.push(yt(mt(Pt+dn%un,0))),Ht=ct(dn/un);mn.push(yt(mt(Ht,0))),Kt=Bt(Nt,Xt,Ct==Vt),Nt=0,++Ct}++Nt,++St}return mn.join("")}it={version:"1.4.1",ucs2:{decode:Tt,encode:It},decode:nn,encode:sn,toASCII:function(xt){return Lt(xt,function(St){return vt.test(St)?"xn--"+sn(St):St})},toUnicode:function(xt){return Lt(xt,function(St){return ht.test(St)?nn(St.slice(4).toLowerCase()):St})}},(et=function(){return it}.call(o,s,o,_))===void 0||(_.exports=et)})()}).call(this,s(194)(i),s(5))},function(i,o){i.exports=function(s){return s.webpackPolyfill||(s.deprecate=function(){},s.paths=[],s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),s.webpackPolyfill=1),s}},function(i,o,s){i.exports={isString:function(_){return typeof _=="string"},isObject:function(_){return typeof _=="object"&&_!==null},isNull:function(_){return _===null},isNullOrUndefined:function(_){return _==null}}},function(i,o,s){o.decode=o.parse=s(197),o.encode=o.stringify=s(198)},function(i,o,s){function _(et,tt){return Object.prototype.hasOwnProperty.call(et,tt)}i.exports=function(et,tt,j,it){tt=tt||"&",j=j||"=";var st={};if(typeof et!="string"||et.length===0)return st;var ht=/\+/g;et=et.split(tt);var vt=1e3;it&&typeof it.maxKeys=="number"&&(vt=it.maxKeys);var ft=et.length;vt>0&&ft>vt&&(ft=vt);for(var pt=0;pt<ft;++pt){var ct,yt,Et,Ot,Lt=et[pt].replace(ht,"%20"),Tt=Lt.indexOf(j);Tt>=0?(ct=Lt.substr(0,Tt),yt=Lt.substr(Tt+1)):(ct=Lt,yt=""),Et=decodeURIComponent(ct),Ot=decodeURIComponent(yt),_(st,Et)?$(st[Et])?st[Et].push(Ot):st[Et]=[st[Et],Ot]:st[Et]=Ot}return st};var $=Array.isArray||function(et){return Object.prototype.toString.call(et)==="[object Array]"}},function(i,o,s){var _=function(j){switch(typeof j){case"string":return j;case"boolean":return j?"true":"false";case"number":return isFinite(j)?j:"";default:return""}};i.exports=function(j,it,st,ht){return it=it||"&",st=st||"=",j===null&&(j=void 0),typeof j=="object"?et(tt(j),function(vt){var ft=encodeURIComponent(_(vt))+st;return $(j[vt])?et(j[vt],function(pt){return ft+encodeURIComponent(_(pt))}).join(it):ft+encodeURIComponent(_(j[vt]))}).join(it):ht?encodeURIComponent(_(ht))+st+encodeURIComponent(_(j)):""};var $=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"};function et(j,it){if(j.map)return j.map(it);for(var st=[],ht=0;ht<j.length;ht++)st.push(it(j[ht],ht));return st}var tt=Object.keys||function(j){var it=[];for(var st in j)Object.prototype.hasOwnProperty.call(j,st)&&it.push(st);return it}},function(i,o,s){var _=s(81),$=s(46),et=i.exports;for(var tt in _)_.hasOwnProperty(tt)&&(et[tt]=_[tt]);function j(it){if(typeof it=="string"&&(it=$.parse(it)),it.protocol||(it.protocol="https:"),it.protocol!=="https:")throw new Error('Protocol "'+it.protocol+'" not supported. Expected "https:"');return it}et.request=function(it,st){return it=j(it),_.request.call(this,it,st)},et.get=function(it,st){return it=j(it),_.get.call(this,it,st)}},function(i,o,s){(function(_){function $(yt){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function et(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function tt(yt,Et){for(var Ot=0;Ot<Et.length;Ot++){var Lt=Et[Ot];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(yt,Lt.key,Lt)}}function j(yt,Et){return(j=Object.setPrototypeOf||function(Ot,Lt){return Ot.__proto__=Lt,Ot})(yt,Et)}function it(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Ot,Lt=ht(yt);if(Et){var Tt=ht(this).constructor;Ot=Reflect.construct(Lt,arguments,Tt)}else Ot=Lt.apply(this,arguments);return st(this,Ot)}}function st(yt,Et){return!Et||$(Et)!=="object"&&typeof Et!="function"?function(Ot){if(Ot===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ot}(yt):Et}function ht(yt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var vt=s(84),ft=s(3).MESSAGE,pt=s(15),ct=s(17);i.exports=function(yt){(function(It,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Super expression must either be null or a function");It.prototype=Object.create(mt&&mt.prototype,{constructor:{value:It,writable:!0,configurable:!0}}),mt&&j(It,mt)})(Tt,yt);var Et,Ot,Lt=it(Tt);function Tt(){var It,mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et(this,Tt),It=Lt.call(this,mt),!mt.stream||!vt(mt.stream))throw new Error("options.stream is required.");return It._stream=mt.stream,It._stream.setMaxListeners(1/0),It.isObjectMode=mt.stream._writableState.objectMode,It.eol=mt.eol||pt.EOL,It}return Et=Tt,(Ot=[{key:"log",value:function(It,mt){var Bt=this;if(_(function(){return Bt.emit("logged",It)}),this.isObjectMode)return this._stream.write(It),void(mt&&mt());this._stream.write("".concat(It[ft]).concat(this.eol)),mt&&mt()}}])&&tt(Et.prototype,Ot),Tt}(ct)}).call(this,s(12).setImmediate)},function(i,o,s){(function(_){function $(Ct,Vt,Kt){return Vt in Ct?Object.defineProperty(Ct,Vt,{value:Kt,enumerable:!0,configurable:!0,writable:!0}):Ct[Vt]=Kt,Ct}function et(Ct){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt})(Ct)}function tt(Ct,Vt){for(var Kt=0;Kt<Vt.length;Kt++){var Gt=Vt[Kt];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Ct,Gt.key,Gt)}}function j(Ct,Vt){return(j=Object.setPrototypeOf||function(Kt,Gt){return Kt.__proto__=Gt,Kt})(Ct,Vt)}function it(Ct){var Vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Kt,Gt=ht(Ct);if(Vt){var Ut=ht(this).constructor;Kt=Reflect.construct(Gt,arguments,Ut)}else Kt=Gt.apply(this,arguments);return st(this,Kt)}}function st(Ct,Vt){return!Vt||et(Vt)!=="object"&&typeof Vt!="function"?function(Kt){if(Kt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt}(Ct):Vt}function ht(Ct){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)})(Ct)}var vt=s(28),ft=vt.Stream,pt=vt.Transform,ct=s(48),yt=s(3),Et=yt.LEVEL,Ot=yt.SPLAT,Lt=s(84),Tt=s(86),It=s(90),mt=s(205),Bt=s(206),nn=s(59).warn,sn=s(47),xt=/%[scdjifoO%]/g,St=function(Ct){(function(Ht,qt){if(typeof qt!="function"&&qt!==null)throw new TypeError("Super expression must either be null or a function");Ht.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Ht,writable:!0,configurable:!0}}),qt&&j(Ht,qt)})(Ut,Ct);var Vt,Kt,Gt=it(Ut);function Ut(Ht){var qt;return function(Pt,wt){if(!(Pt instanceof wt))throw new TypeError("Cannot call a class as a function")}(this,Ut),(qt=Gt.call(this,{objectMode:!0})).configure(Ht),qt}return Vt=Ut,(Kt=[{key:"child",value:function(Ht){var qt=this;return Object.create(qt,{write:{value:function(Pt){var wt=Object.assign({},Ht,Pt);Pt instanceof Error&&(wt.stack=Pt.stack,wt.message=Pt.message),qt.write(wt)}}})}},{key:"configure",value:function(){var Ht=this,qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pt=qt.silent,wt=qt.format,$t=qt.defaultMeta,Xt=qt.levels,un=qt.level,dn=un===void 0?"info":un,mn=qt.exitOnError,an=mn===void 0||mn,en=qt.transports,Mt=qt.colors,jt=qt.emitErrs,Qt=qt.formatters,gn=qt.padLevels,hn=qt.rewriters,An=qt.stripColors,Mn=qt.exceptionHandlers,Yn=qt.rejectionHandlers;if(this.transports.length&&this.clear(),this.silent=Pt,this.format=wt||this.format||s(207)(),this.defaultMeta=$t||null,this.levels=Xt||this.levels||sn.npm.levels,this.level=dn,this.exceptions=new Tt(this),this.rejections=new It(this),this.profilers={},this.exitOnError=an,en&&(en=Array.isArray(en)?en:[en]).forEach(function(Nr){return Ht.add(Nr)}),Mt||jt||Qt||gn||hn||An)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));Mn&&this.exceptions.handle(Mn),Yn&&this.rejections.handle(Yn)}},{key:"isLevelEnabled",value:function(Ht){var qt=this,Pt=Nt(this.levels,Ht);if(Pt===null)return!1;var wt=Nt(this.levels,this.level);return wt!==null&&(this.transports&&this.transports.length!==0?this.transports.findIndex(function($t){var Xt=Nt(qt.levels,$t.level);return Xt===null&&(Xt=wt),Xt>=Pt})!==-1:wt>=Pt)}},{key:"log",value:function(Ht,qt){for(var Pt,wt,$t=arguments.length,Xt=new Array($t>2?$t-2:0),un=2;un<$t;un++)Xt[un-2]=arguments[un];if(arguments.length===1)return Ht[Et]=Ht.level,this._addDefaultMeta(Ht),this.write(Ht),this;if(arguments.length===2)return qt&&et(qt)==="object"?(qt[Et]=qt.level=Ht,this._addDefaultMeta(qt),this.write(qt),this):(this.write(($(wt={},Et,Ht),$(wt,"level",Ht),$(wt,"message",qt),wt)),this);var dn=Xt[0];if(et(dn)==="object"&&dn!==null){var mn=qt&&qt.match&&qt.match(xt);if(!mn){var an,en=Object.assign({},this.defaultMeta,dn,($(an={},Et,Ht),$(an,Ot,Xt),$(an,"level",Ht),$(an,"message",qt),an));return dn.message&&(en.message="".concat(en.message," ").concat(dn.message)),dn.stack&&(en.stack=dn.stack),this.write(en),this}}return this.write(Object.assign({},this.defaultMeta,($(Pt={},Et,Ht),$(Pt,Ot,Xt),$(Pt,"level",Ht),$(Pt,"message",qt),Pt))),this}},{key:"_transform",value:function(Ht,qt,Pt){if(this.silent)return Pt();Ht[Et]||(Ht[Et]=Ht.level),this.levels[Ht[Et]]||this.levels[Ht[Et]]===0||console.error("[winston] Unknown logger level: %s",Ht[Et]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports %j",Ht);try{this.push(this.format.transform(Ht,this.format.options))}catch(wt){throw wt}finally{Pt()}}},{key:"_final",value:function(Ht){var qt=this.transports.slice();ct(qt,function(Pt,wt){if(!Pt||Pt.finished)return _(wt);Pt.once("finish",wt),Pt.end()},Ht)}},{key:"add",value:function(Ht){var qt=!Lt(Ht)||Ht.log.length>2?new mt({transport:Ht}):Ht;if(!qt._writableState||!qt._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",qt),this._onEvent("warn",qt),this.pipe(qt),Ht.handleExceptions&&this.exceptions.handle(),Ht.handleRejections&&this.rejections.handle(),this}},{key:"remove",value:function(Ht){if(!Ht)return this;var qt=Ht;return(!Lt(Ht)||Ht.log.length>2)&&(qt=this.transports.filter(function(Pt){return Pt.transport===Ht})[0]),qt&&this.unpipe(qt),this}},{key:"clear",value:function(){return this.unpipe(),this}},{key:"close",value:function(){return this.clear(),this.emit("close"),this}},{key:"setLevels",value:function(){nn.deprecated("setLevels")}},{key:"query",value:function(Ht,qt){typeof Ht=="function"&&(qt=Ht,Ht={}),Ht=Ht||{};var Pt={},wt=Object.assign({},Ht.query||{});ct(this.transports.filter(function($t){return!!$t.query}),function($t,Xt){(function(un,dn){Ht.query&&typeof un.formatQuery=="function"&&(Ht.query=un.formatQuery(wt)),un.query(Ht,function(mn,an){if(mn)return dn(mn);typeof un.formatResults=="function"&&(an=un.formatResults(an,Ht.format)),dn(null,an)})})($t,function(un,dn){Xt&&((dn=un||dn)&&(Pt[$t.name]=dn),Xt()),Xt=null})},function(){return qt(null,Pt)})}},{key:"stream",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=new ft,Pt=[];return qt._streams=Pt,qt.destroy=function(){for(var wt=Pt.length;wt--;)Pt[wt].destroy()},this.transports.filter(function(wt){return!!wt.stream}).forEach(function(wt){var $t=wt.stream(Ht);$t&&(Pt.push($t),$t.on("log",function(Xt){Xt.transport=Xt.transport||[],Xt.transport.push(wt.name),qt.emit("log",Xt)}),$t.on("error",function(Xt){Xt.transport=Xt.transport||[],Xt.transport.push(wt.name),qt.emit("error",Xt)}))}),qt}},{key:"startTimer",value:function(){return new Bt(this)}},{key:"profile",value:function(Ht){var qt=Date.now();if(this.profilers[Ht]){var Pt=this.profilers[Ht];delete this.profilers[Ht];for(var wt=arguments.length,$t=new Array(wt>1?wt-1:0),Xt=1;Xt<wt;Xt++)$t[Xt-1]=arguments[Xt];typeof $t[$t.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),$t.pop());var un=et($t[$t.length-1])==="object"?$t.pop():{};return un.level=un.level||"info",un.durationMs=qt-Pt,un.message=un.message||Ht,this.write(un)}return this.profilers[Ht]=qt,this}},{key:"handleExceptions",value:function(){var Ht;console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),(Ht=this.exceptions).handle.apply(Ht,arguments)}},{key:"unhandleExceptions",value:function(){var Ht;console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),(Ht=this.exceptions).unhandle.apply(Ht,arguments)}},{key:"cli",value:function(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}},{key:"_onEvent",value:function(Ht,qt){qt["__winston"+Ht]||(qt["__winston"+Ht]=function(Pt){Ht!=="error"||this.transports.includes(qt)||this.add(qt),this.emit(Ht,Pt,qt)}.bind(this),qt.on(Ht,qt["__winston"+Ht]))}},{key:"_addDefaultMeta",value:function(Ht){this.defaultMeta&&Object.assign(Ht,this.defaultMeta)}}])&&tt(Vt.prototype,Kt),Ut}(pt);function Nt(Ct,Vt){var Kt=Ct[Vt];return Kt||Kt===0?Kt:null}Object.defineProperty(St.prototype,"transports",{configurable:!1,enumerable:!0,get:function(){var Ct=this._readableState.pipes;return Array.isArray(Ct)?Ct:[Ct].filter(Boolean)}}),i.exports=St}).call(this,s(12).setImmediate)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=ht(s(41)),$=ht(s(42)),et=ht(s(64)),tt=ht(s(65)),j=ht(s(66)),it=ht(s(22)),st=ht(s(26));function ht(pt){return pt&&pt.__esModule?pt:{default:pt}}function vt(pt,ct,yt){yt=(0,tt.default)(yt);var Et=0,Ot=0,{length:Lt}=pt,Tt=!1;function It(mt,Bt){mt===!1&&(Tt=!0),Tt!==!0&&(mt?yt(mt):++Ot!==Lt&&Bt!==$.default||yt(null))}for(Lt===0&&yt(null);Et<Lt;Et++)ct(pt[Et],Et,(0,j.default)(It))}function ft(pt,ct,yt){return(0,et.default)(pt,1/0,ct,yt)}o.default=(0,st.default)(function(pt,ct,yt){return((0,_.default)(pt)?vt:ft)(pt,(0,it.default)(ct),yt)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return($,et,tt)=>_($,tt)},i.exports=o.default},function(i,o,s){var _=Object.prototype.toString;i.exports=function($){if(typeof $.displayName=="string"&&$.constructor.name)return $.displayName;if(typeof $.name=="string"&&$.name)return $.name;if(typeof $=="object"&&$.constructor&&typeof $.constructor.name=="string")return $.constructor.name;var et=$.toString(),tt=_.call($).slice(8,-1);return(et=tt==="Function"?et.substring(et.indexOf("(")+1,et.indexOf(")")):tt)||"anonymous"}},function(i,o,s){const _=s(10),{LEVEL:$}=s(3),et=s(17),tt=i.exports=function(j={}){if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(it){this.emit("error",it,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(let st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){function _(et){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(et)}function $(et,tt){for(var j=0;j<tt.length;j++){var it=tt[j];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(et,it.key,it)}}i.exports=function(){function et(it){if(function(st,ht){if(!(st instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,et),!it)throw new Error("Logger is required for profiling.");this.logger=it,this.start=Date.now()}var tt,j;return tt=et,(j=[{key:"done",value:function(){for(var it=arguments.length,st=new Array(it),ht=0;ht<it;ht++)st[ht]=arguments[ht];typeof st[st.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),st.pop());var vt=_(st[st.length-1])==="object"?st.pop():{};return vt.level=vt.level||"info",vt.durationMs=Date.now()-this.start,this.logger.write(vt)}}])&&$(tt.prototype,j),et}()},function(i,o,s){(function(_){const $=s(208),{MESSAGE:et}=s(3),tt=s(30);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$((it,st={})=>(it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it))}).call(this,s(4).Buffer)},function(i,o,s){class _ extends Error{constructor(et){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${et.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,_)}}i.exports=$=>{if($.length>2)throw new _($);function et(j={}){this.options=j}function tt(j){return new et(j)}return et.prototype.transform=$,tt.Format=et,tt}},function(i,o,s){function _(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")}function $(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var et=s(85);i.exports=function(){function tt(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,tt),this.loggers=new Map,this.options=st}var j,it;return j=tt,(it=[{key:"add",value:function(st,ht){var vt=this;if(!this.loggers.has(st)){var ft=(ht=Object.assign({},ht||this.options)).transports||this.options.transports;ht.transports=ft?ft.slice():[];var pt=et(ht);pt.on("close",function(){return vt._delete(st)}),this.loggers.set(st,pt)}return this.loggers.get(st)}},{key:"get",value:function(st,ht){return this.add(st,ht)}},{key:"has",value:function(st){return!!this.loggers.has(st)}},{key:"close",value:function(st){var ht=this;if(st)return this._removeLogger(st);this.loggers.forEach(function(vt,ft){return ht._removeLogger(ft)})}},{key:"_removeLogger",value:function(st){this.loggers.has(st)&&(this.loggers.get(st).close(),this._delete(st))}},{key:"_delete",value:function(st){this.loggers.delete(st)}}])&&$(j.prototype,it),tt}()},function(i,o,s){(function(_){const $=s(49),et=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;i.exports=function(tt,j,it){let st,ht,vt=!1,ft=!1;function pt(Et,Ot){let Lt=`"${j}" ${Ot}`;throw Et&&(Lt=`${Lt}, but is set to "${Et}"`),ht&&(Lt=`${Lt}. An example of a valid value would be: ${ht}`),new $(Lt)}function ct(Et){return function(){let Ot=tt[j];if(Ot===void 0)if(st===void 0&&ft)pt(void 0,"is a required variable, but it was not set");else{if(st===void 0)return;Ot=st}ft&&Ot.trim().length===0&&pt(void 0,"is a required variable, but its value was empty"),vt&&(Ot.match(et)||pt(Ot,"should be a valid base64 string if using convertFromBase64"),Ot=_.from(Ot,"base64").toString());const Lt=[Ot].concat(Array.prototype.slice.call(arguments));try{return Et.apply(Et,Lt)}catch(Tt){pt(Ot,Tt.message)}}}const yt={asArray:ct(s(211)),asBoolStrict:ct(s(212)),asBool:ct(s(213)),asPortNumber:ct(s(214)),asEnum:ct(s(215)),asFloatNegative:ct(s(216)),asFloatPositive:ct(s(217)),asFloat:ct(s(51)),asIntNegative:ct(s(218)),asIntPositive:ct(s(91)),asInt:ct(s(50)),asJsonArray:ct(s(219)),asJsonObject:ct(s(220)),asJson:ct(s(52)),asString:ct(s(34)),asUrlObject:ct(s(92)),asUrlString:ct(s(221)),convertFromBase64:function(){return vt=!0,yt},default:function(Et){if(typeof Et=="number")st=Et.toString();else if(Array.isArray(Et)||typeof Et=="object"&&Et!==null)st=JSON.stringify(Et);else{if(typeof Et!="string")throw new $("values passed to default() must be of Number, String, Array, or Object type");st=Et}return yt},required:function(Et){return ft=Et===void 0||Et,yt},example:function(Et){return ht=Et,yt}};return Object.entries(it).forEach(([Et,Ot])=>{yt[Et]=ct(Ot)}),yt}}).call(this,s(4).Buffer)},function(i,o,s){const _=s(34);i.exports=function($,et){return et=et||",",$.length?_($).split(et).filter(Boolean):[]}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if($!=="false"&&$!=="true")throw new Error('should be either "true", "false", "TRUE", or "FALSE"');return $!=="false"}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if(["false","0","true","1"].indexOf($)===-1)throw new Error('should be either "true", "false", "TRUE", "FALSE", 1, or 0');return!($==="0"||$==="false")}},function(i,o,s){const _=s(91);i.exports=function($){var et=_($);if(et>65535)throw new Error("cannot assign a port number greater than 65535");return et}},function(i,o,s){const _=s(34);i.exports=function($,et){const tt=_($);if(et.indexOf(tt)<0)throw new Error(`should be one of [${et.join(", ")}]`);return tt}},function(i,o,s){const _=s(51);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative float");return et}},function(i,o,s){const _=s(51);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive float");return et}},function(i,o,s){const _=s(50);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative integer");return et}},function(i,o,s){const _=s(52);i.exports=function($){var et=_($);if(!Array.isArray(et))throw new Error("should be a parseable JSON Array");return et}},function(i,o,s){const _=s(52);i.exports=function($){var et=_($);if(Array.isArray(et))throw new Error("should be a parseable JSON Object");return et}},function(i,o,s){const _=s(92);i.exports=function($){return _($).toString()}},function(i,o,s){(function(_){(function(){var $,et,tt,j,it,st;typeof performance<"u"&&performance!==null&&performance.now?i.exports=function(){return performance.now()}:_!=null&&_.hrtime?(i.exports=function(){return($()-it)/1e6},et=_.hrtime,j=($=function(){var ht;return 1e9*(ht=et())[0]+ht[1]})(),st=1e9*_.uptime(),it=j-st):Date.now?(i.exports=function(){return Date.now()-tt},tt=Date.now()):(i.exports=function(){return new Date().getTime()-tt},tt=new Date().getTime())}).call(this)}).call(this,s(2))},function(i,o,s){var _,$,et=s(96),tt=s(97),j=0,it=0;i.exports=function(st,ht,vt){var ft=ht&&vt||0,pt=ht||[],ct=(st=st||{}).node||_,yt=st.clockseq!==void 0?st.clockseq:$;if(ct==null||yt==null){var Et=et();ct==null&&(ct=_=[1|Et[0],Et[1],Et[2],Et[3],Et[4],Et[5]]),yt==null&&(yt=$=16383&(Et[6]<<8|Et[7]))}var Ot=st.msecs!==void 0?st.msecs:new Date().getTime(),Lt=st.nsecs!==void 0?st.nsecs:it+1,Tt=Ot-j+(Lt-it)/1e4;if(Tt<0&&st.clockseq===void 0&&(yt=yt+1&16383),(Tt<0||Ot>j)&&st.nsecs===void 0&&(Lt=0),Lt>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");j=Ot,it=Lt,$=yt;var It=(1e4*(268435455&(Ot+=122192928e5))+Lt)%4294967296;pt[ft++]=It>>>24&255,pt[ft++]=It>>>16&255,pt[ft++]=It>>>8&255,pt[ft++]=255&It;var mt=Ot/4294967296*1e4&268435455;pt[ft++]=mt>>>8&255,pt[ft++]=255&mt,pt[ft++]=mt>>>24&15|16,pt[ft++]=mt>>>16&255,pt[ft++]=yt>>>8|128,pt[ft++]=255&yt;for(var Bt=0;Bt<6;++Bt)pt[ft+Bt]=ct[Bt];return ht||tt(pt)}},function(i,o,s){var _=s(96),$=s(97);i.exports=function(et,tt,j){var it=tt&&j||0;typeof et=="string"&&(tt=et==="binary"?new Array(16):null,et=null);var st=(et=et||{}).random||(et.rng||_)();if(st[6]=15&st[6]|64,st[8]=63&st[8]|128,tt)for(var ht=0;ht<16;++ht)tt[it+ht]=st[ht];return tt||$(st)}},function(i,o,s){(function(_){(function($){function et(j){if((j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextEncoder': The encoding label provided ('"+j+"') is invalid.")}function tt(j,it){if(it=it===void 0?{fatal:!1}:it,(j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+j+"') is invalid.");if(it.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}if($.TextEncoder&&$.TextDecoder)return!1;Object.defineProperty(et.prototype,"encoding",{value:"utf-8"}),et.prototype.encode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");it=0;for(var st=j.length,ht=0,vt=Math.max(32,st+(st>>1)+7),ft=new Uint8Array(vt>>3<<3);it<st;){var pt=j.charCodeAt(it++);if(55296<=pt&&56319>=pt){if(it<st){var ct=j.charCodeAt(it);(64512&ct)==56320&&(++it,pt=((1023&pt)<<10)+(1023&ct)+65536)}if(55296<=pt&&56319>=pt)continue}if(ht+4>ft.length&&(vt+=8,vt=(vt*=1+it/j.length*2)>>3<<3,(ct=new Uint8Array(vt)).set(ft),ft=ct),(4294967168&pt)==0)ft[ht++]=pt;else{if(!(4294965248&pt))ft[ht++]=pt>>6&31|192;else if(!(4294901760&pt))ft[ht++]=pt>>12&15|224,ft[ht++]=pt>>6&63|128;else{if(4292870144&pt)continue;ft[ht++]=pt>>18&7|240,ft[ht++]=pt>>12&63|128,ft[ht++]=pt>>6&63|128}ft[ht++]=63&pt|128}}return ft.slice(0,ht)},Object.defineProperty(tt.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(tt.prototype,"fatal",{value:!1}),Object.defineProperty(tt.prototype,"ignoreBOM",{value:!1}),tt.prototype.decode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");it=0;for(var st=(j=new Uint8Array(j)).length,ht=[];it<st;){var vt=j[it++];if(vt===0)break;if(!(128&vt))ht.push(vt);else if((224&vt)==192){var ft=63&j[it++];ht.push((31&vt)<<6|ft)}else if((240&vt)==224){ft=63&j[it++];var pt=63&j[it++];ht.push((31&vt)<<12|ft<<6|pt)}else(248&vt)==240&&(65535<(vt=(7&vt)<<18|(ft=63&j[it++])<<12|(pt=63&j[it++])<<6|63&j[it++])&&(vt-=65536,ht.push(vt>>>10&1023|55296),vt=56320|1023&vt),ht.push(vt))}return String.fromCharCode.apply(null,ht)},$.TextEncoder=et,$.TextDecoder=tt})(typeof window<"u"?window:_!==void 0?_:this)}).call(this,s(5))},function(i,o,s){s.r(o),s.d(o,"AuthClient",function(){return et}),s.d(o,"RtcSignalingClient",function(){return j}),s.d(o,"Credentials",function(){return Ot}),s.d(o,"SignalingPromiseClient",function(){return Lt.SignalingPromiseClient}),s.d(o,"IRtcClientConfiguration",function(){}),s.d(o,"IRtcConnectConfiguration",function(){}),s.d(o,"IRtcConnectionStatsInfo",function(){}),s.d(o,"IRtcSendConfiguration",function(){}),s.d(o,"IRtcSessionMetricsMessageCounts",function(){}),s.d(o,"IRtcStreamMessage",function(){}),s.d(o,"IStreamControl",function(){}),s.d(o,"RtcClient",function(){return to}),s.d(o,"createRtcStreamMessage",function(){return hn}),s.d(o,"IRtcStream",function(){}),s.d(o,"IRtcStreamPayload",function(){});var _=s(25),$=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class et extends _.a{adminSignup(In,kn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/admin-signup",{token:kn,method:"POST",body:JSON.stringify(In)})})}login(In){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login",{method:"POST",body:JSON.stringify(In),allowUnsafeRetries:!0})})}loginWithGoogleToken(In){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login-google",{method:"POST",body:JSON.stringify(In),allowUnsafeRetries:!0})})}refresh(In,kn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:In,tokenExpirationSeconds:kn}),allowUnsafeRetries:!0})})}respondToNewPasswordRequiredChallenge(In){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/respond-to-new-password-required-challenge",{method:"POST",body:JSON.stringify(In)})})}forgotPassword(In){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/forgot-password",{method:"POST",body:JSON.stringify({email:In})})})}confirmForgotPassword(In){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/confirm-forgot-password",{method:"POST",body:JSON.stringify(In)})})}resendInvitation(In){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/resend-invitation",{method:"POST",body:JSON.stringify({email:In})})})}changePassword({token:In,refreshToken:kn,currentPassword:Kn,newPassword:vr}){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/change-password",{token:In,method:"POST",body:JSON.stringify({refreshToken:kn,currentPassword:Kn,newPassword:vr})})})}getDeviceCredentials(In){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/device-credentials",{token:In,method:"POST",allowUnsafeRetries:!0})})}impersonate(In,kn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/impersonate",{token:In,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({userId:kn})})})}createServiceAccount(In,kn,Kn,vr){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/service-account",{token:In,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({name:kn,roleId:Kn,tags:vr})})})}getFeatures(In){return $(this,void 0,void 0,function*(){return(yield this.fetch("auth/features",{token:In})).features})}}var tt=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class j extends _.a{createPeer(In,kn){return tt(this,void 0,void 0,function*(){return yield this.fetch("peers",{token:In,method:"POST",body:JSON.stringify(kn)})})}getPeers(In){return tt(this,void 0,void 0,function*(){return(yield this.fetch("peers",{token:In})).items})}refreshPeer(In,kn){return tt(this,void 0,void 0,function*(){yield this.fetch(`peers/${kn}/refresh`,{token:In,method:"POST",allowUnsafeRetries:!0})})}createSession(In,kn){return tt(this,void 0,void 0,function*(){return yield this.fetch("sessions",{token:In,method:"POST",body:JSON.stringify(kn)})})}refreshSession(In,kn){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${kn}/refresh`,{token:In,method:"POST",allowUnsafeRetries:!0})})}deleteSession(In,kn){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${kn}`,{token:In,method:"DELETE",allowUnsafeRetries:!0})})}getSessions(In){return tt(this,void 0,void 0,function*(){return(yield this.fetch("sessions",{token:In})).items})}getIceServers(In){return tt(this,void 0,void 0,function*(){return(yield this.fetch("ice-servers",{token:In})).items})}addSignals(In,kn,Kn){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${kn}/add-signals`,{token:In,method:"POST",body:JSON.stringify(Kn)})})}takeSignals(In,kn){return tt(this,void 0,void 0,function*(){return(yield this.fetch(`sessions/${kn}/take-signals`,{token:In,method:"POST"})).items})}}var it=s(1),st=s(11),ht=s(35),vt=s.n(ht),ft=s(102),pt=s.n(ft),ct=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class yt extends class{constructor(In){this.cache=new pt.a(Object.assign(Object.assign({},In.dispose||In.disposeAfter?{ttlAutopurge:!0}:{}),In)),this.stringify=In.fastStringify?JSON.stringify:vt.a}set(In,kn,Kn){const vr=this.stringify(In);if(!this.cache.set(vr,kn,{ttl:Kn})){const yr=this.cache.sizeCalculation?this.cache.sizeCalculation(kn,vr):"unknown";throw Error(`Value too large (${yr} > ${this.cache.max})`)}}get(In){return this.cache.get(this.stringify(In))}delete(In){this.cache.delete(this.stringify(In))}size(){return this.cache.size}clear(){this.cache.clear()}forEach(In){return this.cache.forEach(In)}}{constructor(In){if(super(In),this.expireRejectedPromiseValues=In.expireRejectedPromiseValues===void 0||In.expireRejectedPromiseValues,this.rejectedPromiseValueTtl=In.rejectedPromiseValueTtl!==void 0?In.rejectedPromiseValueTtl:it.a.second,this.rejectedPromiseValueTtl<0)throw new Error("rejectedPromiseValueTtl must not be negative")}set(In,kn,Kn){const vr=this.stringify(In);this.cache.set(vr,kn,{ttl:Kn}),this.expireRejectedPromiseValues&&Promise.resolve(kn).catch(()=>ct(this,void 0,void 0,function*(){yield Object(st.a)(this.rejectedPromiseValueTtl),this.cache.peek(vr)===kn&&this.cache.delete(vr)}))}}var Et=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class Ot{constructor(In,kn,Kn){this.authClient=In,this.email=kn,this.password=Kn,this.tokenTtlMs=1*it.a.hour,this.tokenCache=new yt({max:100,ttl:this.tokenTtlMs-5*it.a.minute,fastStringify:!0})}getToken(){return Et(this,void 0,void 0,function*(){let In=this.tokenCache.get(this.email);return In||(In=(()=>Et(this,void 0,void 0,function*(){const{authentication:kn}=yield this.authClient.login({email:this.email,password:this.password,tokenExpirationSeconds:this.tokenTtlMs/it.a.second});if(!kn)throw new Error("User account not verified.");return kn.accessToken}))(),this.tokenCache.set(this.email,In)),In})}}var Lt=s(93),Tt=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};function It(zr){return Tt(this,void 0,void 0,function*(){return(yield Promise.all(zr.map(In=>In.catch(kn=>kn)))).filter(In=>In instanceof Error)})}function mt(zr){if(zr!==void 0)return zr;throw new Error("Value is undefined")}var Bt=s(0),nn=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};function sn({func:zr,delay:In,immediate:kn}){let Kn=!1,vr=setTimeout(function Wr(){return nn(this,void 0,void 0,function*(){if(Kn)return;const Hr=new Date().getTime();try{yr=zr(),yield yr}finally{if(!Kn){const Lr=new Date().getTime();vr=setTimeout(Wr,Math.max(In-(Lr-Hr),0))}}})},kn?0:In),yr=Promise.resolve();return{stop(){return nn(this,void 0,void 0,function*(){Kn=!0,clearTimeout(vr),yield yr})}}}function xt(zr,In){return Object.keys(zr).reduce((kn,Kn)=>Object.assign(Object.assign({},kn),{[Kn]:In(zr[Kn])}),{})}var St=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class Nt{constructor(In){this.message=In}send(In){return St(this,void 0,void 0,function*(){Bt.a.info(this.message,xt(In,kn=>{const{sum:Kn,count:vr}=kn,yr=Kn/vr;return Object.assign(Object.assign({},kn),{average:yr})}))})}}var Ct=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};const Vt=s(222);var Kt=s(6);const Gt=!!Kt.c,Ut=new class{constructor(zr=60){this.buffer={},this.metrics={},this.reporters=[],this.flushInterval=sn({func:()=>this.flushStats(),delay:zr*it.a.second})}shutdown(){return Ct(this,void 0,void 0,function*(){yield this.flushInterval.stop(),yield this.flushStats(),yield Object(st.a)(2*it.a.second)})}aggregate(zr,In){if(this.buffer[zr]){const{min:kn,max:Kn,sum:vr,count:yr}=this.buffer[zr];this.buffer[zr]={min:Math.min(kn,In),max:Math.max(Kn,In),sum:vr+In,count:yr+1}}else this.buffer[zr]={min:In,max:In,sum:In,count:1}}increment(zr){this.aggregate(zr,1)}timer(zr,In){return Ct(this,void 0,void 0,function*(){const kn=Vt(),Kn=yield In(),vr=Vt();return this.aggregate(zr,vr-kn),Kn})}metric(zr,In){this.metrics[zr]=In}registerStatsReporter(zr){this.reporters.push(zr)}write(zr){return Ct(this,void 0,void 0,function*(){if(Object.values(zr).length===0)return;const In=yield It(this.reporters.map(kn=>kn.send(zr)));for(const kn of In)Bt.a.warn("Failed to write stats",{error:kn})})}flushStats(){return Ct(this,void 0,void 0,function*(){const zr=Object.assign(Object.assign({},this.buffer),xt(this.metrics,In=>{const kn=In();return{min:kn,max:kn,sum:kn,count:1}}));Object.keys(zr).length>0&&(yield this.write(zr),this.buffer={})})}};Gt||["local","on-prem"].includes(Kt.i)||Ut.registerStatsReporter(new Nt("stats"));var Ht=s(8),qt=s(21),Pt=s(103),wt=s(36),$t=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class Xt extends wt.a{constructor(In){super(In)}postLanRtcOffer(In){return $t(this,void 0,void 0,function*(){return yield this.fetch("v1/lan-rtc-offer",{method:"POST",body:JSON.stringify(In)})})}}var un=s(55);const dn={ordered:!1,maxPacketLifeTime:300*it.a.millisecond},mn={ordered:!0},an={ordered:!0},en={ordered:!1,maxRetransmits:0},Mt={ordered:!1,maxRetransmits:0};function jt({entityId:zr,streamName:In,streamType:kn}){return`${zr}.${In}.${kn}`}var Qt=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class gn{constructor(In,kn){this.sessionId=In,this.connection=kn,this.counts={localSent:new Map,localReceived:new Map,remoteSent:new Map,remoteReceived:new Map},this.sessionId=In,this.connection=kn}updateRemoteMessagesCounts(In){if(In.payload.streamsInfo){this.counts.remoteSent=new Map,this.counts.remoteReceived=new Map;for(const kn of In.payload.streamsInfo.items)this.counts.remoteSent.set(kn.streamId,kn.sentCount),this.counts.remoteReceived.set(kn.streamId,kn.receivedCount)}}getLocalStreamsInfo(In){const{localSent:kn,localReceived:Kn}=this.counts;return{items:[...new Set([...kn.keys(),...Kn.keys()])].map(vr=>{var yr,Wr;return{streamId:vr,sentCount:(yr=kn.get(vr))!==null&&yr!==void 0?yr:0,receivedCount:(Wr=Kn.get(vr))!==null&&Wr!==void 0?Wr:0}}),timestamp:In}}incrementLocalSent(In){const{localSent:kn}=this.counts,Kn=jt(In.header.stream);kn.set(Kn,(kn.get(Kn)||0)+1)}incrementLocalReceived(In){const{localReceived:kn}=this.counts,Kn=jt(In.header.stream),vr=kn.get(Kn)||0;if(vr===0){const{streamName:yr,streamType:Wr}=In.header.stream;Bt.a.debug("RTC client received first message for stream",{streamName:yr,streamType:Wr})}kn.set(Kn,vr+1)}uploadMetrics(){return Qt(this,void 0,void 0,function*(){const{sessionId:In}=this,kn=yield this.connection.peerConnection.getStats(),Kn={};kn.forEach(Ir=>Kn[Ir.id]=Ir),Bt.a.debug("rtc-stats",Object.assign(Object.assign({},Kn),{sessionId:In}));const{localSent:vr,localReceived:yr,remoteSent:Wr,remoteReceived:Hr}=this.counts,Lr=[...new Set([...vr.keys(),...yr.keys()])].reduce((Ir,jr)=>{const Co=vr.get(jr),Jo=yr.get(jr),ps=Wr.get(jr),ds=Hr.get(jr);return Object.assign(Object.assign({},Ir),{[`local-${jr}-sent`]:Co,[`local-${jr}-received`]:Jo,[`remote-${jr}-sent`]:ps,[`remote-${jr}-received`]:ds})},{sessionId:In});Bt.a.debug("rtc-message-report",Object.assign({deviceId:this.connection.getRemoteDeviceId()},Lr))})}}function hn(zr,In){return{header:{stream:zr,created:Date.now(),frameId:""},payload:In}}function An(zr){return new Set(["disconnected","failed","closed"]).has(zr.iceConnectionState)}var Mn=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class Yn{constructor(In,kn,Kn){this.peerConnection=In,this.config=kn,this.dataChannelNotifier=Kn,this.connectTimeoutMs=20*it.a.second,this.iceGatheringTimeoutMs=15*it.a.second,this.pingUpdateTimeoutMs=1*it.a.second,this.streamsInfoUpdateTimeoutMs=2*it.a.second,this.reassemblyTimeoutMs=500*it.a.millisecond,this.reassemblyTableCleanupMs=1*it.a.second,this.heartbeatTimeoutMs=20*it.a.millisecond,this.streamLatestTimestamp=new Map,this.reassemblyTable=new Map,this.reassemblyTableLastTimestamp=new Map,this.closeCalled=!1,this.gotOffer=!1,this.hasIceCandidate=!1;const{isOffer:vr}=kn.baseConfig;vr?this.initializeChannels(In):In.ondatachannel=yr=>{switch(yr.channel.label){case"stream.latest-ttl":this.latestTtlStreamChannel=yr.channel;break;case"stream.reliable":this.reliableStreamChannel=yr.channel;break;case"stream.latest-reliable":this.latestReliableStreamChannel=yr.channel;break;case"stream.latest-try-once":this.latestTryOnceStreamChannel=yr.channel;break;case"heartbeat":return void(this.heartbeatChannel=yr.channel);default:return void this.dataChannelNotifier(yr.channel)}this.setupChannel(yr.channel)},this.pingUpdateTimeout=setInterval(()=>{const{reliableStreamChannel:yr}=this;yr&&this.sendSystemMessage(yr,{type:"ping"})},this.pingUpdateTimeoutMs),this.streamsInfoUpdateTimeout=setInterval(()=>{const{latestTtlStreamChannel:yr}=this;yr&&this.sendSystemMessage(yr,{type:"streams-info"})},this.streamsInfoUpdateTimeoutMs),this.reassemblyTableCleanupTimeout=setInterval(()=>{const yr=new Date().getTime();this.reassemblyTableLastTimestamp.forEach((Wr,Hr,Lr)=>{yr>Hr+this.reassemblyTimeoutMs&&this.reassemblyTable.delete(Wr)})},this.reassemblyTableCleanupMs),this.heartbeatTimeout=setInterval(()=>{const{heartbeatChannel:yr}=this;yr&&yr.readyState==="open"&&yr.send(new Uint8Array([1]))},this.heartbeatTimeoutMs)}handleSignal(In){return Mn(this,void 0,void 0,function*(){const{peerConnection:kn}=this,{track:Kn}=this.config.baseConfig,vr=(()=>{try{return JSON.parse(In.getPayload())}catch{return}})();if(!vr)return void Bt.a.error("Received unparseable signal.");Bt.a.debug("Handling signal",{description:vr});const{sdp:yr,type:Wr}=vr;if(!yr||!Wr)return void Bt.a.warn("Received non-SDP signal");const{signalingState:Hr,connectionState:Lr}=kn;if(Hr!=="stable"||Lr!=="connected")if(kn.remoteDescription)Bt.a.warn(`Received SDP after remote description was set: ${yr}`);else{if(Wr==="offer"){if(Hr!=="stable")return void Bt.a.warn("Received offer SDP when signaling is ongoing.");yield kn.setRemoteDescription(vr);const Ir=yield kn.createAnswer();yield kn.setLocalDescription(Ir);const jr=In.clone();return Kn==null||Kn("Answer Received",jr),jr.setPayload(JSON.stringify(Ir)),jr.setReceiverId(In.getSenderId()),jr.setSenderId(In.getReceiverId()),jr}if(Wr==="answer"){if(Hr==="stable")return void Bt.a.warn("Received answer SDP when signaling hasn't started.");yield kn.setRemoteDescription(vr)}}else Bt.a.warn(`Received SDP when already connected: ${yr}`)})}send(In,kn){const Kn=this.getChannelFromLabel(kn.channelLabel);Kn?this.sendOnChannel(Kn,In):Bt.a.warn("Send called with unexpected channel label",{channelLabel:kn.channelLabel})}controlRemoteStream(In){this.sendSystemMessage(mt(this.reliableStreamChannel),{type:"stream-control",streamControl:In})}isActive(){return new Set(["new","checking","connected","completed"]).has(this.peerConnection.iceConnectionState)||this.isReady()}isReady(){const{reliableStreamChannel:In,latestTtlStreamChannel:kn,latestTryOnceStreamChannel:Kn,latestReliableStreamChannel:vr}=this;return(In==null?void 0:In.readyState)==="open"&&(kn==null?void 0:kn.readyState)==="open"&&(Kn==null?void 0:Kn.readyState)==="open"&&(vr==null?void 0:vr.readyState)==="open"}close(){return Mn(this,void 0,void 0,function*(){if(this.closeCalled)return;this.closeCalled=!0,this.sessionMetrics&&(yield this.sessionMetrics.uploadMetrics()),this.pingUpdateTimeout&&clearInterval(this.pingUpdateTimeout),this.reassemblyTableCleanupTimeout&&clearInterval(this.reassemblyTableCleanupTimeout),this.streamsInfoUpdateTimeout&&clearInterval(this.streamsInfoUpdateTimeout),this.heartbeatTimeout&&clearInterval(this.heartbeatTimeout);const{peerConnection:In,reliableStreamChannel:kn,latestTtlStreamChannel:Kn,latestTryOnceStreamChannel:vr,latestReliableStreamChannel:yr}=this;In.close(),kn==null||kn.close(),Kn==null||Kn.close(),vr==null||vr.close(),yr==null||yr.close()})}getPing(){return this.pingTimeMs}getLastMessageTimestamp(){return this.lastMessageTimestamp}getSessionCreatedTimestamp(){var In;return(In=this.config.remoteConfig)===null||In===void 0?void 0:In.sessionCreatedTimestamp}setSessionCreatedTimestamp(In){this.config.remoteConfig&&(this.config.remoteConfig.sessionCreatedTimestamp=In)}getSessionId(){var In;return(In=this.config.remoteConfig)===null||In===void 0?void 0:In.sessionId}setSessionId(In){this.config.remoteConfig&&(this.config.remoteConfig.sessionId=In,this.sessionMetrics=new gn(In,this))}getRemotePeerId(){return this.config.baseConfig.remotePeerId}getRemoteDeviceId(){var In;return(In=this.config.baseConfig)===null||In===void 0?void 0:In.remoteDeviceId}setRemoteDeviceId(In){this.config.baseConfig.remoteDeviceId=In}getSessionMetricsMessageCounts(){var In;return(In=this.sessionMetrics)===null||In===void 0?void 0:In.counts}getConnectionStatsInfo(){return Mn(this,void 0,void 0,function*(){const{peerConnection:In}=this;if(!In)return;const kn=yield In.getStats(null),Kn=[];kn.forEach(Lr=>{Kn.push(Lr)});const vr=Kn.find(Lr=>Lr.type==="transport");if(!vr)return;const yr=Kn.find(Lr=>(Lr.type==="candidate-pair"||Lr.type==="candidatepair")&&Lr.id===vr.selectedCandidatePairId);if(!yr)return;const Wr=Kn.find(Lr=>Lr.id===yr.localCandidateId),Hr=Kn.find(Lr=>Lr.id===yr.remoteCandidateId);return Wr&&Hr&&(Wr.address=Wr.address||Wr.ip,Hr.address=Hr.address||Hr.ip,Wr.address!==void 0&&Hr.address!==void 0)?{transport:vr,localCandidate:Wr,remoteCandidate:Hr}:void 0})}initializeChannels(In){this.heartbeatChannel=In.createDataChannel("heartbeat",Mt),this.heartbeatChannel.binaryType="arraybuffer",this.latestTtlStreamChannel=In.createDataChannel("stream.latest-ttl",dn),this.latestTtlStreamChannel.binaryType="arraybuffer",this.reliableStreamChannel=In.createDataChannel("stream.reliable",mn),this.reliableStreamChannel.binaryType="arraybuffer",this.latestReliableStreamChannel=In.createDataChannel("stream.latest-reliable",an),this.latestReliableStreamChannel.binaryType="arraybuffer",this.latestTryOnceStreamChannel=In.createDataChannel("stream.latest-try-once",en),this.latestTryOnceStreamChannel.binaryType="arraybuffer",this.setupChannel(this.latestTtlStreamChannel),this.setupChannel(this.reliableStreamChannel),this.setupChannel(this.latestReliableStreamChannel),this.setupChannel(this.latestTryOnceStreamChannel)}getOffer(){var In,kn,Kn;return Mn(this,void 0,void 0,function*(){const{gotOffer:vr}=this,{peerConnection:yr,config:Wr}=this;if(this.config.baseConfig.isLan)throw new Error('"getOffer" method can only be called with internet connections. LAN connections should call the "getLanOffer" method.');const Hr=(In=this.config.remoteConfig)===null||In===void 0?void 0:In.sessionId;if(vr)return void Bt.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,An(this.peerConnection))return void Bt.a.debug("Failed to generate offer because the peer connection was inactive.");const Lr=Wr.baseConfig.track;yr.onicecandidate=()=>{this.hasIceCandidate=!0},yr.oniceconnectionstatechange=()=>Mn(this,void 0,void 0,function*(){const ps=yr.iceConnectionState;if(ps==="connected"||ps==="completed"){const ds=yield this.getConnectionStatsInfo(),Ss=ds?function(Al){const qo=Al.localCandidate.candidateType,na=Al.remoteCandidate.candidateType;return qo==="host"&&na==="host"?"local":qo==="relay"||na==="relay"?"TURN":"STUN"}(ds):void 0;Bt.a.info(`ICE connection state changed to ${ps}`,{sessionId:Hr,connectionStatsInfo:ds,iceMode:Ss}),Lr==null||Lr("ICE connection state change",{iceConnectionState:ps,sessionId:Hr,connectionStatsInfo:ds,iceMode:Ss})}}),yield yr.setLocalDescription(yield yr.createOffer());const Ir=new Date().getTime();for(;;){const ps=new Date().getTime()-Ir;if(ps>this.connectTimeoutMs)return void Bt.a.debug("Failed to generate offer because ICE gathering timed out.");if(ps>this.iceGatheringTimeoutMs&&this.hasIceCandidate){Bt.a.debug("ICE gathering partially completed; proceeding",{iceTransportPolicy:yr.getConfiguration().iceTransportPolicy,waitTime:ps}),Lr==null||Lr("ICE gathering partially completed",{sessionId:Hr,iceTransportPolicy:yr.getConfiguration().iceTransportPolicy,waitTime:ps});break}if(yr.iceGatheringState==="complete"){Bt.a.debug("ICE gathering complete",{iceTransportPolicy:yr.getConfiguration().iceTransportPolicy,waitTime:ps}),Lr==null||Lr("ICE gathering completed",{sessionId:Hr,iceTransportPolicy:yr.getConfiguration().iceTransportPolicy,waitTime:ps});break}yield Object(st.a)(.1*it.a.second)}const jr=(kn=this.peerConnection.getConfiguration().iceServers)!==null&&kn!==void 0?kn:[];for(const ps of jr)ps.credentialType=void 0;const Co=JSON.stringify(jr),Jo=new Ht.Signal;return Jo.setPayload(JSON.stringify(yr.localDescription)),Jo.setSenderId(this.config.baseConfig.localPeerId),Jo.setReceiverId(this.config.baseConfig.remotePeerId),Jo.setIceServers(Co),Jo.setIceTransportPolicy((Kn=this.peerConnection.getConfiguration().iceTransportPolicy)!==null&&Kn!==void 0?Kn:"all"),this.config.baseConfig.sessionType!==void 0?Jo.setSessionType(this.config.baseConfig.sessionType):Jo.setSessionType(Ht.SessionType.TELEOP),Bt.a.debug("Sending offer signal with description",{description:Jo.getPayload()}),Jo})}getLanOffer(){return Mn(this,void 0,void 0,function*(){const{peerConnection:In,gotOffer:kn}=this;if(!this.config.baseConfig.isLan)throw new Error('"getLanOffer" method can only be used with LAN connections. Internet connections should call the "getOffer" method.');if(kn)return void Bt.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,An(this.peerConnection))return void Bt.a.debug("Failed to generate offer because the peer connection was inactive.");yield In.setLocalDescription(yield In.createOffer());const Kn=new Date().getTime();for(;;){if(new Date().getTime()-Kn>this.iceGatheringTimeoutMs)return void Bt.a.debug("Failed to generate offer because ICE gathering timed out.");if(In.iceGatheringState==="complete")break;yield Object(st.a)(.1*it.a.second)}const vr=In.localDescription;if(vr)return Bt.a.debug("Sending LAN offer signal with description",{description:vr}),vr;Bt.a.error("Failed to generate LAN offer description")})}handleLanAnswer(In){return Mn(this,void 0,void 0,function*(){const{peerConnection:kn}=this;if(!this.config.baseConfig.isLan)throw new Error('"handleLanAnswer" method can only be used with LAN connections. Internet connections should call the "handleSignal" method.');yield kn.setRemoteDescription(In)})}getChannelFromLabel(In){switch(In){case"stream.latest-ttl":return this.latestTtlStreamChannel;case"stream.reliable":return this.reliableStreamChannel;case"stream.latest-reliable":return this.latestReliableStreamChannel;case"stream.latest-try-once":return this.latestTryOnceStreamChannel}}sendOnChannel(In,kn){let Kn;try{Kn=Object(un.encode)(JSON.stringify(kn))}catch(vr){return void Bt.a.warn("Failed to encode RTC message",{error:vr})}try{In.send(Kn),this.sessionMetrics&&this.sessionMetrics.incrementLocalSent(kn)}catch(vr){Bt.a.warn("Failed to send message to channel",{error:vr,channel:In.label})}}channelNotRecognized(In){return In!==this.latestTtlStreamChannel&&In!==this.latestReliableStreamChannel&&In!==this.latestTryOnceStreamChannel&&In!==this.reliableStreamChannel}setupChannel(In){In.onmessage=kn=>{if(this.channelNotRecognized(In))return void Bt.a.warn("Received message on unrecognized data channel.");let Kn;try{Kn=JSON.parse(Object(un.decode)(kn.data))}catch(vr){return void Bt.a.warn("Received unparseable message on RTC stream data channel",{error:vr,channel:In.label})}Kn.communicationType==="message-chunk"?this.receiveChannelMessageChunk(In,Kn):this.receiveChannelMessage(In,Kn)},In.onerror=kn=>{Bt.a.warn(`Channel error: ${kn.error}`,{error:kn.error,sessionId:this.getSessionId(),channelLabel:In.label})},In.onopen=()=>{Bt.a.debug("Channel opened",{sessionId:this.getSessionId(),channelLabel:In.label})},In.onclose=()=>{const kn={bufferedAmount:In.bufferedAmount,sessionId:this.getSessionId(),channelLabel:In.label};this.closeCalled===!1?Bt.a.debug("Unexpected channel closed",kn):Bt.a.debug("Channel closed",kn)}}receiveChannelMessage(In,kn){const{config:Kn}=this,{remotePeerId:vr}=this.config.baseConfig;this.lastMessageTimestamp=new Date().getTime(),kn=function(yr){switch(yr.header.stream.streamType){case"twist":{const{twist:Wr}=yr.payload;if(!Wr)throw Error("twist not in payload of RTC message with type twist");return{header:yr.header,payload:{twist:{linear:Object.assign({x:0,y:0,z:0},Wr.linear),angular:Object.assign({x:0,y:0,z:0},Wr.angular)}}}}case"pose":{const{pose:Wr}=yr.payload;if(!Wr)throw Error("pose not in payload of RTC message with type pose");return{header:yr.header,payload:{pose:{translation:Object.assign({x:0,y:0,z:0},Wr.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},Wr.rotation)}}}}case"pose-with-covariance":{const{poseWithCovariance:Wr}=yr.payload;if(!Wr)throw Error("poseWithCovariance not in payload of RTC message with type pose-with-covariance");const Hr=new Array(36).fill(0);return Wr.covariance.forEach((Lr,Ir)=>{if(Ir>=36)throw Error("covariance contains more than 36 elements");Hr[Ir]=Lr}),{header:yr.header,payload:{poseWithCovariance:{pose:{translation:Object.assign({x:0,y:0,z:0},Wr.pose.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},Wr.pose.rotation)},covariance:Hr}}}}case"point":{const{point:Wr}=yr.payload;if(!Wr)throw Error("point not in payload of RTC message with type point");return{header:yr.header,payload:{point:Object.assign({x:0,y:0,z:0},Wr)}}}default:return yr}}(kn),this.sessionMetrics&&this.sessionMetrics.incrementLocalReceived(kn),this.handleSystemMessage(In,kn)||(In===this.latestTryOnceStreamChannel||In===this.latestTtlStreamChannel||In===this.latestReliableStreamChannel)&&!this.isLatestMessage(kn)||Kn.baseConfig.receive(vr,kn)}receiveChannelMessageChunk(In,kn){const Kn=this.reassemblyTable.get(kn.id)||[];if(Kn.push(kn),Kn.length===kn.total){const vr=function(yr){const Wr=yr.sort((Hr,Lr)=>Hr.seq<Lr.seq?-1:1).map(Hr=>Hr.part).reduce((Hr,Lr)=>Hr+Lr);try{return JSON.parse(Wr)}catch{return void Bt.a.warn("Could not reassemble RTC message chunks")}}(Kn);return vr&&this.receiveChannelMessage(In,vr),void this.reassemblyTable.delete(kn.id)}this.reassemblyTable.set(kn.id,Kn),this.reassemblyTableLastTimestamp.set(kn.id,new Date().getTime())}handleSystemMessage(In,kn){var Kn,vr;const{config:yr}=this,{baseConfig:Wr}=yr,{remotePeerId:Hr}=Wr;switch(kn.header.stream.streamType){case"ping":return this.sendSystemMessage(In,{type:"pong",timestamp:mt(kn.payload.ping)}),!0;case"pong":{const Lr=new Date().getTime()-mt(kn.payload.pong);return this.pingTimeMs=Lr,Ut.aggregate("rtc-ping-time",Lr),!0}case"streams-info":{const{sessionMetrics:Lr}=this,Ir=(Kn=kn.payload.streamsInfo)===null||Kn===void 0?void 0:Kn.timestamp;return!!Ir&&(Lr==null||Lr.updateRemoteMessagesCounts(kn),(vr=Wr.onStreamsInfoUpdate)===null||vr===void 0||vr.call(Wr,Hr,Ir),!0)}case"stream-control":return!0;default:return!1}}sendSystemMessage(In,kn){var Kn;const{localUserId:vr,localPeerId:yr}=this.config.baseConfig;if(In.readyState!=="open")return;const Wr={entityId:vr??yr,streamName:`$.${kn.type}`,streamType:kn.type};let Hr;switch(kn.type){case"ping":Hr={ping:new Date().getTime()};break;case"pong":Hr={pong:kn.timestamp};break;case"stream-control":Hr={streamControl:kn.streamControl};break;case"streams-info":Hr={streamsInfo:(Kn=this.sessionMetrics)===null||Kn===void 0?void 0:Kn.getLocalStreamsInfo(new Date().getTime())}}this.sendOnChannel(In,hn(Wr,Hr))}isLatestMessage(In){const kn=jt(In.header.stream),Kn=(this.streamLatestTimestamp.get(kn)||0)<=In.header.created;return Kn&&this.streamLatestTimestamp.set(kn,In.header.created),Kn}}function Nr(zr){var In,kn;return{userId:(In=zr.getUserId())===null||In===void 0?void 0:In.getValue(),deviceId:(kn=zr.getDeviceId())===null||kn===void 0?void 0:kn.getValue(),organizationId:zr.getOrganizationId(),id:zr.getPeerId(),capabilities:[],capabilitySet:{}}}var ro=function(zr,In,kn,Kn){return new(kn||(kn=Promise))(function(vr,yr){function Wr(Ir){try{Lr(Kn.next(Ir))}catch(jr){yr(jr)}}function Hr(Ir){try{Lr(Kn.throw(Ir))}catch(jr){yr(jr)}}function Lr(Ir){var jr;Ir.done?vr(Ir.value):(jr=Ir.value,jr instanceof kn?jr:new kn(function(Co){Co(jr)})).then(Wr,Hr)}Lr((Kn=Kn.apply(zr,In||[])).next())})};class to{constructor(In){this.config=In,this.grpcCallDeadline=5*it.a.second,this.refreshIntervalDelayMs=2*it.a.second,this.iceServersTtl=30*it.a.minute,this.connections=[],this.localConnections=[],this.isConnectionInitiator=new Map,this.isOutgoingConnection=new Map,this.peerDataChannelListeners=[];const{refreshIntervalDelayMs:kn}=this;this.refreshInterval=sn({func:()=>ro(this,void 0,void 0,function*(){try{yield this.update()}catch(Kn){Bt.a.warn("RTC refresh failed",{error:Kn})}}),delay:kn,immediate:!0})}send(In,kn,Kn){const vr=this.getActiveConnection(In);vr?vr.isReady()?vr.send(kn,Kn):Bt.a.warn("Send called with unready connection."):Bt.a.warn("Send called with no connection.")}controlRemoteStream(In,kn){const Kn=this.getActiveConnection(In);Kn?Kn.isReady()?Kn.controlRemoteStream(kn):Bt.a.warn("controlRemoteStream called with unready connection."):Bt.a.warn("controlRemoteStream called with no connection.")}getLocalPeer(){return ro(this,void 0,void 0,function*(){for(;!this.localPeer;)yield Object(st.a)(.1*it.a.second);return Nr(this.localPeer)})}connect(In,kn){var Kn,vr,yr;return ro(this,void 0,void 0,function*(){if(this.config.lanOnlyMode===!0)throw new Error("connect method called in local only mode.");const{track:Wr,signalingClient:Hr}=this.config,{localPeer:Lr,receiveSignalStream:Ir,iceServers:jr}=this;if(!Lr||!Ir||!jr)return void Bt.a.warn("Connect called prior to local peer, receiveSignalStream, and ICE servers ready");if(this.getActiveConnection(In))return void Bt.a.warn("Connect called for peer with existing connection.");if(this.isOutgoingConnection.get(In))return void Bt.a.warn("Connect called for peer with an existing outgoing connection offer.");this.isOutgoingConnection.set(In,!0);const Co=new Yn(yield this.createRTCPeerConnection(jr,kn),{baseConfig:{isOffer:!0,isLan:!1,receive:(qo,na)=>this.config.receive(qo,na),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(qo,na)=>{var Gr,bn;return(bn=(Gr=this.config).onStreamsInfoUpdate)===null||bn===void 0?void 0:bn.call(Gr,qo,na)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(Kn=Lr.getUserId())===null||Kn===void 0?void 0:Kn.getValue(),localPeerId:Lr.getPeerId(),remotePeerId:In,sessionType:kn==null?void 0:kn.sessionType},remoteConfig:{}},qo=>this.onCustomDataChannel(In,qo)),Jo=yield Co.getOffer();if(!Jo)return Bt.a.error("Failed to generate offer."),void this.isOutgoingConnection.delete(In);Bt.a.debug("Sending offer."),Wr==null||Wr("Sending offer",Jo);const ps=new Ht.SendSignalRequest;ps.setSignal(Jo);const ds=yield(()=>ro(this,void 0,void 0,function*(){try{return yield Hr.sendSignal(ps,yield this.getMetadata({}))}catch(qo){Bt.a.warn("Error when sending signal",{error:qo})}}))();if(!this.isOutgoingConnection.get(In))return void Bt.a.debug("No offer set after receiving offer signal response.");Bt.a.debug("Offer sent.");const Ss=(vr=ds==null?void 0:ds.getSessionId())===null||vr===void 0?void 0:vr.getValue(),Al=(yr=ds==null?void 0:ds.getSessionCreatedTimestamp())===null||yr===void 0?void 0:yr.getValue();return Ss&&Al?(Co.setSessionId(Ss),Co.setSessionCreatedTimestamp(Al),this.isOutgoingConnection.delete(In),this.connections.push(Co),this.isConnectionInitiator.set(Co,!0),this.setupHandlers(Co),Ss):(Bt.a.warn("No session ID or no session created timestamp on send signal response."),void this.isOutgoingConnection.delete(In))})}connectLan(In){var kn,Kn;return ro(this,void 0,void 0,function*(){const vr=new Xt(In),yr=new Yn(yield this.createRTCPeerConnection([]),{baseConfig:{isOffer:!0,isLan:!0,receive:(Ir,jr)=>this.config.receive(Ir,jr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(Ir,jr)=>{var Co,Jo;return(Jo=(Co=this.config).onStreamsInfoUpdate)===null||Jo===void 0?void 0:Jo.call(Co,Ir,jr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(Kn=(kn=this.localPeer)===null||kn===void 0?void 0:kn.getUserId())===null||Kn===void 0?void 0:Kn.getValue(),localPeerId:"lan_client",remotePeerId:In}},Ir=>this.onCustomDataChannel(In,Ir)),Wr=yield yr.getLanOffer();if(!Wr)return Bt.a.warn("Could not generate LAN offer"),!1;const Hr=yield vr.postLanRtcOffer({offer:JSON.stringify(Wr)}),Lr=new RTCSessionDescription(JSON.parse(Hr.answer));return yield yr.handleLanAnswer(Lr),this.localConnections.push(yr),this.isConnectionInitiator.set(yr,!0),Object(Pt.v4)()})}getConnections(){return[...this.connections,...this.localConnections]}createCustomDataChannel(In,kn,Kn,vr,yr){const Wr=this.getActiveConnection(In);if(Wr&&this.isConnectionInitiator.has(Wr)){const Lr=Wr.peerConnection.createDataChannel("custom."+kn,Kn);return vr&&(Lr.binaryType="arraybuffer"),yr(In,Lr),()=>{}}const Hr=(Lr,Ir)=>{In===Lr&&Ir.label==="custom."+kn&&yr(In,Ir)};return this.peerDataChannelListeners.push(Hr),()=>{this.peerDataChannelListeners=this.peerDataChannelListeners.filter(Lr=>Lr!==Hr)}}onCustomDataChannel(In,kn){this.peerDataChannelListeners.forEach(Kn=>Kn(In,kn))}getConnectionStatus(In){if(this.isOutgoingConnection.get(In))return"connecting";const kn=this.getActiveConnection(In);return kn?kn.isReady()?"connected":"connecting":"disconnected"}getConnectionStatsInfo(In){return ro(this,void 0,void 0,function*(){const kn=this.getActiveConnection(In);if(kn)return yield kn.getConnectionStatsInfo()})}disconnect(In){return ro(this,void 0,void 0,function*(){const kn=this.getActiveConnection(In);kn&&(yield kn.close())})}getPeers(){return ro(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:In}=this.config,kn=yield(()=>ro(this,void 0,void 0,function*(){try{return yield In.getPeers(new Ht.GetPeersRequest,yield this.getMetadata({}))}catch(yr){Bt.a.warn("Error when getting peers",{error:yr})}}))();if(!kn)return[];const Kn=kn.getPeersList();if(!Kn)return[];const vr=yr=>{var Wr,Hr;return(Hr=(Wr=yr.getPeerCreatedTimestamp())===null||Wr===void 0?void 0:Wr.getValue())!==null&&Hr!==void 0?Hr:0};return Kn.sort((yr,Wr)=>vr(Wr)-vr(yr)).map(yr=>Nr(yr))})}getSessions(){return ro(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:In}=this.config,kn=yield(()=>ro(this,void 0,void 0,function*(){try{return yield In.getPeers(new Ht.GetPeersRequest,yield this.getMetadata({}))}catch(yr){Bt.a.warn("Error when getting peers",{error:yr})}}))();if(!kn)return{};const Kn=kn.getPeersList(),vr={};for(const yr of Kn)vr[yr.getPeerId()]=yr.getSessionIdsList();return vr})}getPing(In){const kn=this.getActiveConnection(In);if(kn)return kn.getPing();Bt.a.warn("Attempted to get ping time from inactive peer.")}getLastMessageTimestamp(In){const kn=this.getActiveConnection(In);if(kn)return kn.getLastMessageTimestamp();Bt.a.warn("Attempted to get last message time from inactive peer.")}getSessionMetricsMessageCounts(In){const kn=this.getActiveConnection(In);if(kn)return kn.getSessionMetricsMessageCounts();Bt.a.warn("Attempted to get session metrics counts from inactive peer.")}isReady(){if(this.config.lanOnlyMode)return!0;const{localPeer:In,receiveSignalStream:kn,iceServers:Kn}=this;return!!(In&&kn&&Kn)}shutdown(){return ro(this,void 0,void 0,function*(){Bt.a.info("Shutdown called on RTC client"),yield this.refreshInterval.stop(),this.receiveSignalStream&&this.receiveSignalStream.cancel();const In=this.connections;this.connections=[],yield this.closeConnections(In);const{localPeer:kn}=this;if(!kn||this.config.lanOnlyMode)return;const{signalingClient:Kn}=this.config;yield(()=>ro(this,void 0,void 0,function*(){try{const vr=new Ht.DeletePeerRequest;vr.setPeerId(kn.getPeerId()),yield Kn.deletePeer(vr,yield this.getMetadata({}))}catch(vr){return void Bt.a.warn("Error deleting local peer",{error:vr})}}))()})}createPeer(){return ro(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createPeer method cannot be used in local-only mode.");const{signalingClient:In}=this.config,kn=yield(()=>ro(this,void 0,void 0,function*(){try{return yield In.createPeer(new Ht.CreatePeerRequest,yield this.getMetadata({}))}catch(vr){throw new Error(`Was not able to create peer: ${JSON.stringify(vr)}`)}}))(),Kn=kn==null?void 0:kn.getPeer();if(!Kn)throw new Error("Response did not provide peer.");return this.localPeer=Kn})}createReceiveSignalStream(){return ro(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createReceiveSignalStream method cannot be used in local-only mode.");const{signalingClient:In}=this.config,{localPeer:kn,iceServers:Kn}=this;if(!kn||!Kn)return;const{receiveSignalStream:vr}=this;vr&&vr.cancel();const yr=new Ht.ReceiveSignalStreamRequest;yr.setPeerId(kn.getPeerId());const Wr=yield(()=>ro(this,void 0,void 0,function*(){try{return In.receiveSignalStream(yr,yield this.getMetadata({hasDeadline:!1}))}catch(Hr){throw new Error(`Unable to create receive signal stream: ${JSON.stringify(Hr)}`)}}))();if(!Wr)throw new Error("Response did not provide stream.");return Wr.on("data",Hr=>ro(this,void 0,void 0,function*(){var Lr,Ir,jr,Co;const Jo=Hr.getSignal(),ps=(Lr=Jo==null?void 0:Jo.getSessionId())===null||Lr===void 0?void 0:Lr.getValue(),ds=Jo==null?void 0:Jo.getSenderId(),Ss=Jo==null?void 0:Jo.getReceiverId(),Al=(Ir=Jo==null?void 0:Jo.getSessionCreatedTimestamp())===null||Ir===void 0?void 0:Ir.getValue();if(!(Jo&&ps&&ds&&Ss&&Al))return void Bt.a.warn("Received signal with missing information.");const qo=this.getActiveConnection(ds);if(qo)if(qo.getSessionId()!==ps){if(Bt.a.debug("Received signal: different session for a peer we're already connected to."),(qo.getSessionCreatedTimestamp()||0)>Al)return;const na=new Yn(yield this.createRTCPeerConnection(Kn),{baseConfig:{isOffer:!1,isLan:!1,receive:(Gr,bn)=>this.config.receive(Gr,bn),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(Gr,bn)=>{var En,Bn;return(Bn=(En=this.config).onStreamsInfoUpdate)===null||Bn===void 0?void 0:Bn.call(En,Gr,bn)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:kn.getPeerId(),localUserId:(Co=kn.getUserId())===null||Co===void 0?void 0:Co.getValue(),remotePeerId:ds},remoteConfig:{sessionId:ps,sessionCreatedTimestamp:Al}},Gr=>this.onCustomDataChannel(ds,Gr));yield na.handleSignal(Jo),this.connections.push(na)}else Bt.a.debug("Received signal: for an existing connection."),yield qo.handleSignal(Jo);else{Bt.a.debug("Received signal: new connection.");const na=new Yn(yield this.createRTCPeerConnection(Kn),{baseConfig:{isOffer:!1,isLan:!1,receive:(Gr,bn)=>this.config.receive(Gr,bn),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(Gr,bn)=>{var En,Bn;return(Bn=(En=this.config).onStreamsInfoUpdate)===null||Bn===void 0?void 0:Bn.call(En,Gr,bn)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:kn.getPeerId(),localUserId:(jr=kn.getUserId())===null||jr===void 0?void 0:jr.getValue(),remotePeerId:ds},remoteConfig:{sessionId:ps,sessionCreatedTimestamp:Al}},Gr=>this.onCustomDataChannel(ds,Gr));yield na.handleSignal(Jo),this.connections.push(na)}})),Wr.on("end",()=>{Wr.cancel(),this.receiveSignalStream=void 0}),Wr.on("error",Hr=>{switch(Hr.code){case qt.StatusCode.CANCELLED:case qt.StatusCode.UNAVAILABLE:case qt.StatusCode.UNKNOWN:Bt.a.debug("Receive signal stream error",{error:Hr});break;case qt.StatusCode.UNAUTHENTICATED:Bt.a.warn("Receive signal stream error",{error:Hr});break;default:Bt.a.error("Receive signal stream error",{error:Hr})}Wr.cancel(),this.receiveSignalStream=void 0}),this.receiveSignalStream=Wr})}createRTCPeerConnection(In,kn){var Kn;return ro(this,void 0,void 0,function*(){const vr=kn==null?void 0:kn.rtcIceTransportPolicies,yr=kn!=null&&kn.rtcIceServerProtocol?[kn==null?void 0:kn.rtcIceServerProtocol]:void 0,Wr=In.map(Lr=>Object.assign(Object.assign({},Lr),{urls:typeof Lr.urls=="string"?[Lr.urls]:Lr.urls})).map(Lr=>Object.assign(Object.assign({},Lr),{urls:Lr.urls.filter(Ir=>{const jr=(vr===void 0||vr.some(Co=>((Jo,ps)=>{switch(ps){case"stun":return/^stuns?:/.test(Jo);case"turn":return/^turns?:/.test(Jo)}})(Ir,Co)))&&(yr===void 0||yr.some(Co=>((Jo,ps)=>Jo.endsWith(`transport=${ps}`))(Ir,Co)));return jr||Bt.a.debug(`Ignoring ICE server: ${Ir}`),jr})})).filter(({urls:Lr})=>Lr.filter(Ir=>Ir).length>0),Hr=(Kn=this.config.alternateRTCPeerConnection)!==null&&Kn!==void 0?Kn:window.RTCPeerConnection;if(!Hr)throw new Error("RTCPeerConnection class not found. WebRTC must be enabled.");return new Hr(Object.assign({iceServers:Wr,iceTransportPolicy:(vr==null?void 0:vr.length)===1&&vr[0]==="turn"?"relay":"all"},kn))})}closeConnections(In){return ro(this,void 0,void 0,function*(){const kn=yield It(In.map(Kn=>ro(this,void 0,void 0,function*(){yield Kn.close()})));for(const Kn of kn)Bt.a.warn("Request to close session failed",{error:Kn})})}getActiveConnection(In){return this.getConnections().find(kn=>kn.getRemotePeerId()===In&&kn.isActive())}update(){var In;return ro(this,void 0,void 0,function*(){if(this.localConnections=this.localConnections.filter(Hr=>Hr.isActive()),this.config.lanOnlyMode)return;const{signalingClient:kn}=this.config;if(!this.localPeer||!this.receiveSignalStream||!this.iceServers)return this.localPeer||(yield this.createPeer()),this.iceServers||(yield this.updateIceServers()),void(this.receiveSignalStream||(yield this.createReceiveSignalStream()));yield this.closeConnections(this.connections.filter(Hr=>!Hr.isActive())),this.connections=this.connections.filter(Hr=>Hr.isActive());const{localPeer:Kn}=this,vr=this.connections.filter(Hr=>Hr.getSessionId).map(Hr=>mt(Hr.getSessionId()));Kn.setSessionIdsList(vr);const yr=new Ht.RefreshPeerRequest;yr.setPeer(Kn);try{yield kn.refreshPeer(yr,yield this.getMetadata({}))}catch(Hr){Hr.code===qt.StatusCode.NOT_FOUND?(Bt.a.warn("Peer expired, creating new peer",{peerId:Kn.getPeerId()}),yield this.reset()):Bt.a.warn("Error calling RefreshPeer",{error:Hr})}const Wr=yield this.getPeers();for(const Hr of this.connections)Hr.setRemoteDeviceId((In=Wr.find(Lr=>Lr.id===Hr.getRemotePeerId()))===null||In===void 0?void 0:In.deviceId)})}reset(){return ro(this,void 0,void 0,function*(){yield this.closeConnections(this.connections),this.connections=[],this.isOutgoingConnection=new Map,yield this.createPeer(),yield this.createReceiveSignalStream()})}updateIceServers(){return ro(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)return;const{iceServersLastUpdate:In,iceServersTtl:kn}=this,Kn=new Date().getTime();if(!In||Kn-In>kn)try{const vr=(yield this.config.signalingClient.getIceServers(new Ht.GetIceServersRequest,yield this.getMetadata({}))).getIceServers();this.iceServers=JSON.parse(vr),this.iceServersLastUpdate=Kn}catch(vr){Bt.a.warn("Error in updateIceServers",{error:vr})}})}setupHandlers(In){const{peerConnection:kn}=In,Kn=In.getSessionCreatedTimestamp();kn.onconnectionstatechange=()=>ro(this,void 0,void 0,function*(){const vr=kn.connectionState;if(Kn)switch(vr){case"connected":Ut.aggregate("rtc-connect-time",new Date().getTime()-Kn);break;case"failed":Ut.increment("rtc-connect-failed")}})}getMetadata(In){return ro(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getMetadata method cannot be called in local-only mode");const{getToken:kn}=this.config,{grpcCallDeadline:Kn}=this,{hasDeadline:vr}=In,yr=vr===!1?void 0:new Date().getTime()+Kn;return{authorization:yield kn(),deadline:yr}})}}},,function(i,o,s){s.r(o),s.d(o,"LogClient",function(){return et});var _=s(25),$=function(tt,j,it,st){return new(it||(it=Promise))(function(ht,vt){function ft(yt){try{ct(st.next(yt))}catch(Et){vt(Et)}}function pt(yt){try{ct(st.throw(yt))}catch(Et){vt(Et)}}function ct(yt){var Et;yt.done?ht(yt.value):(Et=yt.value,Et instanceof it?Et:new it(function(Ot){Ot(Et)})).then(ft,pt)}ct((st=st.apply(tt,j||[])).next())})};class et extends _.a{log(j){return $(this,void 0,void 0,function*(){yield this.fetch("logs",{method:"POST",body:JSON.stringify({logs:j}),allowUnsafeRetries:!0})})}}}])})})(dist);function defined$1(i,o){if(i!==void 0)return i;throw new Error(o||"Value is undefined")}let FORMANT_API_URL="https://api.formant.io";typeof window<"u"&&(FORMANT_API_URL=window.FORMANT_API_URL||FORMANT_API_URL);let urlParams$1=new URLSearchParams("");typeof window<"u"&&(urlParams$1=new URLSearchParams(window.location.search));const envDev=urlParams$1.get("formant_dev");envDev&&(FORMANT_API_URL="https://api-dev.formant.io");const envStage=urlParams$1.get("formant_stage");envStage&&(FORMANT_API_URL="https://api-stage.formant.io");let App$1=class{static sendAppMessage(o){window.parent.postMessage(o,"*")}static getCurrentModuleContext(){let o=new URLSearchParams("");return typeof window<"u"&&(o=new URLSearchParams(window.location.search)),o.get("module")}static async getCurrentModuleConfiguration(){let o=new URLSearchParams("");typeof window<"u"&&(o=new URLSearchParams(window.location.search));const s=o.get("configuration");return s===null||s.trim()===""?void 0:(await(await fetch(`${FORMANT_API_URL}/v1/admin/module-configurations/`+s,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).configuration}static isModule(){return this.getCurrentModuleContext()!==null}static goToTime(o){this.sendAppMessage({type:"go_to_time",time:o.getTime()})}static goToDevice(o){this.sendAppMessage({type:"go_to_device",deviceId:o})}static showMessage(o){this.sendAppMessage({type:"show_message",message:o})}static requestModuleData(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"request_module_data",module:o})}static setModuleDateTimeRange(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"set_module_data_time_range",module:_,before:o,after:s||0})}static refreshAuthToken(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"refresh_auth_token",module:o})}static sendChannelData(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"send_channel_data",source:_,channel:o,data:s})}static setupModuleMenus(o){const s=this.getCurrentModuleContext();if(!s)throw new Error("No module context");this.sendAppMessage({type:"setup_module_menus",module:s,menus:o})}static addMenuListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_menu_item_clicked"&&o(_.menu)})}static addAccessTokenRefreshListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="auth_token"&&o(_.token)})}static addModuleDataListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_data"&&o({streams:_.streams,time:_.time,queryRange:_.queryRange})})}static addChannelDataListener(o,s){window.addEventListener("message",_=>{const $=_.data;$.type==="channel_data"&&$.channel===o&&s({source:$.source,data:$.data})})}};const _Authentication=class{static async login(i,o){try{const s=await fetch(`${FORMANT_API_URL}/v1/admin/auth/login`,{method:"POST",body:JSON.stringify({email:i,password:o}),headers:{"Content-Type":"application/json"}}),_=await s.json();if(s.status!==200)throw new Error(_.message);return await _Authentication.loginWithToken(_.authentication.accessToken,_.authentication.refreshToken),_.authentication}catch(s){return _Authentication.waitingForAuth.forEach(_=>_(!1)),_Authentication.waitingForAuth=[],Promise.reject(s)}}static async loginWithToken(i,o){const s=JSON.parse(atob(i.split(".")[1]));try{let _;if(_Authentication.isShareToken=s["formant:claims"]&&s["formant:claims"].type=="share",s["formant:claims"]&&(_Authentication.currentOrganization=s["formant:claims"].organizationId),s["custom:organization_id"]&&(_Authentication.currentOrganization=s["custom:organization_id"]),_Authentication.isShareToken||(_=s.sub),s["formant:claims"]&&s["formant:claims"].userId&&(_=s["formant:claims"].userId),_){const $=await fetch(`${FORMANT_API_URL}/v1/admin/users/${_}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}}),et=await $.json();if($.status!==200)throw new Error(et.message);_Authentication.currentUser=et}_Authentication.token=i,_Authentication.waitingForAuth.forEach($=>$(!0))}catch(_){console.error(_),_Authentication.waitingForAuth.forEach($=>$(!1))}_Authentication.waitingForAuth=[],o&&(_Authentication.refreshToken=o,setInterval(async()=>{if(_Authentication.refreshToken){const $=await(await fetch(`${FORMANT_API_URL}/v1/admin/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:_Authentication.refreshToken})})).json();_Authentication.token=$.authentication.accessToken}},1e3*60*60))}static isAuthenticated(){return _Authentication.token!==void 0}static getCurrentUser(){return _Authentication.currentUser}static async waitTilAuthenticated(){return _Authentication.token!==void 0?!0:new Promise(i=>{_Authentication.waitingForAuth.push(function(o){i(o)})})}static async listenForRefresh(){App$1.addAccessTokenRefreshListener(i=>{this.loginWithToken(i)}),setInterval(async()=>{App$1.refreshAuthToken()},1e3*60*60)}};let Authentication=_Authentication;__publicField(Authentication,"token");__publicField(Authentication,"refreshToken");__publicField(Authentication,"currentUser");__publicField(Authentication,"currentOrganization");__publicField(Authentication,"isShareToken",!1);__publicField(Authentication,"defaultDeviceId");__publicField(Authentication,"waitingForAuth",[]);function delay(i){return new Promise(o=>setTimeout(o,i))}class DataChannel{constructor(o){__publicField(this,"ready",!1),__publicField(this,"listeners",[]),__publicField(this,"openListeners",[]),__publicField(this,"closeListeners",[]),__publicField(this,"errorListeners",[]),__publicField(this,"binaryListeners",[]),__publicField(this,"error"),__publicField(this,"decoder",new TextDecoder),this.dataChannel=o,this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=()=>{this.ready=!0,this.openListeners.forEach(s=>s())},this.dataChannel.onclose=()=>{this.ready=!1,this.closeListeners.forEach(s=>s())},this.dataChannel.onerror=s=>{console.error(s),this.error="An error occurred in DataChannel",this.errorListeners.forEach(_=>_(s))},this.dataChannel.onmessage=s=>{this.listeners.forEach(_=>{const $=new Uint8Array(s.data),et=this.decoder.decode($);_(et)}),this.binaryListeners.forEach(_=>{_(new Uint8Array(s.data))})}}addOpenListener(o){this.openListeners.push(o)}removeOpenListener(o){this.openListeners=this.openListeners.filter(s=>s!==o)}addCloseListener(o){this.closeListeners.push(o)}removeCloseListener(o){this.closeListeners=this.closeListeners.filter(s=>s!==o)}addErrorListener(o){this.errorListeners.push(o)}removeErrorListener(o){this.errorListeners=this.errorListeners.filter(s=>s!==o)}async waitTilReady(){return this.ready?!0:new Promise((s,_)=>{let $=window.setInterval(()=>{this.ready&&(window.clearInterval($),s(!0)),this.error&&_(this.error)},10)})}send(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}sendBinary(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}addListener(o){this.listeners.push(o)}removeListener(o){const s=this.listeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.listeners.splice(s,1)}addBinaryListener(o){this.binaryListeners.push(o)}removeBinaryListener(o){const s=this.binaryListeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.binaryListeners.splice(s,1)}}class CaptureStream{constructor(o){__publicField(this,"token"),this.captureSession=o}async ingestJSON(o){if(!this.token){const _=await(await fetch(`${FORMANT_API_URL}/v1/admin/capture-sessions/${this.captureSession.code}/authenticate`,{method:"POST"})).json();this.token=_.token}await fetch(`${FORMANT_API_URL}/v1/ingest`,{method:"POST",body:JSON.stringify({deviceId:this.captureSession.deviceId,name:this.captureSession.streamName,type:"json",points:[[Date.now(),JSON.stringify(o)]]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}})}}class Manipulator{constructor(o,s){__publicField(this,"currentListeners",[]),__publicField(this,"onRealtimeMessage",(_,$)=>{$.payload.jointState&&this.currentListeners.forEach(et=>{$.payload.jointState&&et($.payload.jointState)})}),this.device=o,this.config=s}async synchronize(){this.device.addRealtimeListener(this.onRealtimeMessage),this.device.startListeningToRealtimeDataStream(this.config.currentJointStateStream)}async desynchronize(){this.device.removeRealtimeListener(this.onRealtimeMessage),this.device.stopListeningToRealtimeDataStream(this.config.currentJointStateStream)}async addCurrentJointStateListener(o){this.currentListeners.push(o)}}class RequestDataChannel{constructor(o,s,_){__publicField(this,"channel"),__publicField(this,"requestIdToResponseMap",new Map),this.device=o,this.channel_name=s,this.timeout=_}addOpenListener(o){defined$1(this.channel,"channel not initalized").addOpenListener(o)}removeOpenListener(o){defined$1(this.channel,"channel not initalized").removeOpenListener(o)}addCloseListener(o){defined$1(this.channel,"channel not initalized").addCloseListener(o)}removeCloseListener(o){defined$1(this.channel,"channel not initalized").removeCloseListener(o)}addErrorListener(o){defined$1(this.channel,"channel not initalized").addErrorListener(o)}removeErrorListener(o){defined$1(this.channel,"channel not initalized").removeErrorListener(o)}}class BinaryRequestDataChannel extends RequestDataChannel{constructor(){super(...arguments),__publicField(this,"RESPONSE_SUCCESS_BYTE",0),__publicField(this,"decoder",new TextDecoder)}generateBinaryId(){const o=new Uint8Array(16);for(let s=0;s<o.length;s++)o[s]=Math.floor(Math.random()*256);return o}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addBinaryListener(o=>{const _=o.slice(0,16).toString();if(_.length===0)throw new Error("Invalid response");const $=o.slice(16);if($.length===0)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,$)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateBinaryId(),tt=et.toString();_.set(tt,!0),s.sendBinary(new Uint8Array([...et,...o]));const j=new Date().getTime();for(;new Date().getTime()<j+$;)if(await delay(50),_.has(tt)){const it=_.get(tt);if(it!==!0){_.delete(tt);const st=it[0]===this.RESPONSE_SUCCESS_BYTE,ht=it.slice(1);if(st)return ht;throw console.error({name:"AdapterError",message:this.decoder.decode(ht)}),new Error("Binary request datachannel adapter error")}}throw _.delete(tt),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Binary request data channel request timed out")}}class TextRequestDataChannel extends RequestDataChannel{generateTextId(){return Math.random().toString(36).substring(2)+"-"+Math.random().toString(36).substring(2)}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addListener(o=>{const s=JSON.parse(o),{id:_,data:$,error:et}=s;if(!_)throw new Error("Invalid response");if(!$&&!et)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,s)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateTextId();_.set(et,!0),s.send(JSON.stringify({id:et,data:o}));const tt=new Date().getTime();for(;new Date().getTime()<tt+$;)if(await delay(50),_.has(et)){const j=_.get(et);if(j!==!0){_.delete(et);const{data:it,error:st}=j;if(it)return it;if(st)throw console.error({name:"AdapterError",message:st}),new Error("Text request datachannel adapter error")}}throw _.delete(et),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Text request datachannel request timed out")}}const SessionType={Teleop:1,Observe:3};class Device{constructor(o,s,_){__publicField(this,"rtcClient"),__publicField(this,"remoteDevicePeerId"),__publicField(this,"realtimeListeners",[]),__publicField(this,"handleMessage",($,et)=>{this.realtimeListeners.forEach(tt=>tt($,et))}),this.id=o,this.name=s,this.organizationId=_}async getLatestTelemetry(){return(await(await fetch(`${FORMANT_API_URL}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}async getConfiguration(){let o=await fetch(`${FORMANT_API_URL}/v1/admin/devices/${this.id}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}});const s=await o.json();if(!s.state.reportedConfiguration)throw new Error("Device has no configuration, has it ever been turned on?");const _=s.state.reportedConfiguration.version;return o=await fetch(`${FORMANT_API_URL}/v1/admin/devices/${this.id}/configurations/${_}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}}),(await o.json()).document}async getFileUrl(o){return(await(await fetch(`${FORMANT_API_URL}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[o]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).fileUrls}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{const s=new dist.exports.RtcClient({signalingClient:new dist.exports.SignalingPromiseClient(FORMANT_API_URL,null,null),getToken:async()=>defined$1(Authentication.token,"Realtime when user isn't authorized"),receive:this.handleMessage});for(;!s.isReady();)await delay(100);const $=(await s.getPeers()).find(et=>et.deviceId===this.id);if(!$)throw new Error("Cannot find peer, is the robot offline?");for(this.remoteDevicePeerId=$.id,await s.connect(this.remoteDevicePeerId,o||{sessionType:SessionType.Teleop});s.getConnectionStatus(this.remoteDevicePeerId)!=="connected";)await delay(100);this.rtcClient=s}}async sendRealtimeMessage(o,s={channelLabel:"stream.reliable"}){const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.send(defined$1($).id,o,s)}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeAudioStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="audio_common_msgs/AudioData"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});return it}async getRealtimeVideoStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="formant/H264VideoFrame"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});return it}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async changeStreamAudioType(o,s){const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.controlRemoteStream(defined$1($).id,{streamName:o,setAudioFormat:s})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){const s=(await defined$1(this.rtcClient,"Realtime connection has not been started").getPeers()).find(_=>_.deviceId===this.id);return defined$1(s,"Could not find remote peer for device "+this.id)}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async isInRealtimeSession(){let o=await Fleet.getPeers(),s=await Fleet.getRealtimeSessions(),_=o.find($=>$.deviceId===this.id);return _?s[_.id].length>0:!1}async getAvailableCommands(){return(await(await fetch(`${FORMANT_API_URL}/v1/admin/command-templates/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items.map(_=>({name:_.name,id:_.id,command:_.command,description:_.description,parameterEnabled:_.parameterEnabled,parameterValue:_.parameterValue,parameterMeta:_.parameterMeta,enabled:_.enabled}))}async sendCommand(o,s,_,$){var et;const j=(await this.getAvailableCommands()).find(ht=>ht.name===o);if(!j)throw new Error(`Could not find command with name "${o}"`);let it;if(s===void 0)if(j.parameterEnabled&&j.parameterValue)it=j.parameterValue;else throw new Error("Command has no default parameter value, you must provide one");else it=s;let st={value:it,scrubberTime:(_||new Date).toISOString(),meta:__spreadValues(__spreadValues({},j.parameterMeta),$)};await fetch(`${FORMANT_API_URL}/v1/admin/commands`,{method:"POST",body:JSON.stringify({commandTemplateId:j.id,organizationId:this.organizationId,deviceId:this.id,command:j.command,parameter:st,userId:(et=Authentication.currentUser)==null?void 0:et.id}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})}async createCustomDataChannel(o,s){const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined$1($).id,o,__spreadValues({ordered:!0},s),!1,(j,it)=>{const st=new DataChannel(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel(this,o,s)}async createCaptureStream(o){const _=await(await fetch(`${FORMANT_API_URL}/v1/admin/capture-sessions`,{method:"POST",body:JSON.stringify({deviceId:this.id,streamName:o,tags:{}}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json();return new CaptureStream(_)}async getTelemetry(o,s,_,$){return await Fleet.getTelemetry(this.id,o,s,_,$)}async getTelemetryStreams(){var o,s;const _=await this.getConfiguration(),$=await fetch(`${FORMANT_API_URL}/v1/queries/metadata/stream-names`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}}),et=[],tt=[];return(s=(o=_.telemetry)==null?void 0:o.streams)==null||s.forEach(st=>{st.disabled!==!0&&et.push(st.name),st.onDemand===!0&&tt.push(st.name)}),console.log(tt),(await $.json()).items.filter(st=>!et.includes(st)).map(st=>({name:st,onDemand:tt.includes(st)}))}async createInterventionRequest(o,s,_,$){return await(await fetch(`${FORMANT_API_URL}/v1/admin/intervention-requests`,{method:"POST",body:JSON.stringify({message:o,interventionType:s,time:new Date().toISOString(),deviceId:this.id,tags:$,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()}async addInterventionResponse(o,s,_){return await(await fetch(`${FORMANT_API_URL}/v1/admin/intervention-responses`,{method:"POST",body:JSON.stringify({interventionId:o,interventionType:s,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()}}class PeerDevice{constructor(o){__publicField(this,"rtcClient"),__publicField(this,"remoteDevicePeerId"),__publicField(this,"realtimeListeners",[]),__publicField(this,"id"),__publicField(this,"handleMessage",(s,_)=>{this.realtimeListeners.forEach($=>$(s,_))}),this.peerUrl=o}async getLatestTelemetry(){const s=await(await fetch(`${this.peerUrl}/telemetry`)).json();return Object.entries(s).map(([$,et])=>({deviceId:this.id,streamName:$,streamType:"json",currentValue:et,currentValueTime:et.timestamp,tags:{}}))}async getDeviceId(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.id}async getConfiguration(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.document}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{const s=new dist.exports.RtcClient({lanOnlyMode:!0,receive:this.handleMessage});for(await s.connectLan(this.peerUrl);s.getConnectionStatus(this.peerUrl)!=="connected";)await delay(100);this.rtcClient=s}}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeVideoStreams(){var o,s,_;const $=await this.getConfiguration(),et=[];for(const tt of(o=$.teleop.hardwareStreams)!=null?o:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});for(const tt of(s=$.teleop.rosStreams)!=null?s:[])tt.topicType=="formant/H264VideoFrame"&&et.push({name:tt.topicName});for(const tt of(_=$.teleop.customStreams)!=null?_:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});return et}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){return{id:this.peerUrl,organizationId:"",deviceId:this.id,capabilities:[],capabilitySet:{}}}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async createCustomDataChannel(o,s){const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined$1($).id,o,__spreadValues({ordered:!0},s),!1,(j,it)=>{const st=new DataChannel(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel(this,o,s)}}const _Fleet=class{static async setDefaultDevice(i){_Fleet.defaultDeviceId=i}static async getCurrentDevice(){if(!Authentication.token)throw new Error("Not authenticated");if(!_Fleet.defaultDeviceId)throw new Error("No known default device");const _=(await(await fetch(`${FORMANT_API_URL}/v1/admin/device-details/query`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items.find(et=>et.id===_Fleet.defaultDeviceId).name,$=new Device(_Fleet.defaultDeviceId,_,defined$1(Authentication.currentOrganization));return _Fleet.knownContext.push(new WeakRef($)),$}static async getPeerDevice(i){const o=new PeerDevice(i);return o.id=await o.getDeviceId(),o}static async getDevice(i){if(!Authentication.token)throw new Error("Not authenticated");const s=await(await fetch(`${FORMANT_API_URL}/v1/admin/devices/${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json(),_=s.name,$=new Device(i,_,s.organizationId);return _Fleet.knownContext.push(new WeakRef($)),$}static async getDevices(){if(!Authentication.token)throw new Error("Not authenticated");const o=await(await fetch(`${FORMANT_API_URL}/v1/admin/device-details/query`,{method:"POST",body:JSON.stringify({enabled:!0,type:"default"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json();return o.items,o.items.map(s=>new Device(s.id,s.name,s.organizationId))}static async getOnlineDevices(){if(!Authentication.token)throw new Error("Not authenticated");const s=(await(await fetch(`${FORMANT_API_URL}/v1/queries/online-devices`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items;return(await _Fleet.getDevices()).filter($=>s.includes($.id))}static async getPeers(){if(!Authentication.token)throw new Error("Not authenticated");return await new dist.exports.RtcClient({signalingClient:new dist.exports.SignalingPromiseClient(FORMANT_API_URL,null,null),getToken:async()=>defined$1(Authentication.token,"Realtime when user isn't authorized"),receive:()=>{}}).getPeers()}static async getRealtimeSessions(){if(!Authentication.token)throw new Error("Not authenticated");return await new dist.exports.RtcClient({signalingClient:new dist.exports.SignalingPromiseClient(FORMANT_API_URL,null,null),getToken:async()=>defined$1(Authentication.token,"Realtime when user isn't authorized"),receive:()=>{}}).getSessions()}static async getRealtimeDevices(){if(!Authentication.token)throw new Error("Not authenticated");const s=(await(await fetch(`${FORMANT_API_URL}/v1/signaling/peers`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items.map($=>$.deviceId);return(await _Fleet.getDevices()).filter($=>s.includes($.id))}static async getLatestTelemetry(i){let o=i;return i&&!Array.isArray(i)&&(i=[i]),(await(await fetch(`${FORMANT_API_URL}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:o}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getTelemetry(i,o,s,_,$){let et=i;Array.isArray(i)||(et=[i]);let tt=o;return Array.isArray(o)||(tt=[o]),(await(await fetch(`${FORMANT_API_URL}/v1/queries/queries`,{method:"POST",body:JSON.stringify({deviceIds:et,end:_.toISOString(),names:tt,start:s.toISOString(),tags:$}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getFileUrl(i){const s=await(await fetch(`${FORMANT_API_URL}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[i]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json();if(s.fileUrls.length===0)throw new Error("File not found");return s.fileUrls[0]}static async queryTelemetry(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/queries/queries`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async aggregateTelemetry(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/queries/queries`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).aggregates}static async queryEvents(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/admin/events/query`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getEvent(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/admin/events/query/id=${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getInterventions(){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/admin/intervention-requests`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}};let Fleet=_Fleet;__publicField(Fleet,"defaultDeviceId");__publicField(Fleet,"knownContext",[]);let urlParams=new URLSearchParams("");typeof window<"u"&&(urlParams=new URLSearchParams(window.location.search));const urlDevice=urlParams.get("device");urlDevice&&Fleet.setDefaultDevice(urlDevice);const urlAuth=urlParams.get("auth");urlAuth&&Authentication.loginWithToken(urlAuth);const moduleName=urlParams.get("module");moduleName&&Authentication.listenForRefresh();dist.exports.IRtcSendConfiguration;dist.exports.IRtcStreamMessage;dist.exports.IRtcStreamPayload;const useDevice=i=>{const[o,s]=reactExports.useState();reactExports.useEffect(()=>{_()},[]);const _=async()=>{try{if(await Authentication.waitTilAuthenticated()){if(i){const et=await Fleet.getDevice(i);s(et);return}const $=await Fleet.getCurrentDevice();s($)}}catch{throw new Error("Authentication failed, please authenticate and try again")}};return o};/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const requestAnimFrame=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function throttled(i,o,s){const _=s||(tt=>Array.prototype.slice.call(tt));let $=!1,et=[];return function(...tt){et=_(tt),$||($=!0,requestAnimFrame.call(window,()=>{$=!1,i.apply(o,et)}))}}function debounce(i,o){let s;return function(..._){return o?(clearTimeout(s),s=setTimeout(i,o,_)):i.apply(this,_),o}}const _toLeftRightCenter=i=>i==="start"?"left":i==="end"?"right":"center",_alignStartEnd=(i,o,s)=>i==="start"?o:i==="end"?s:(o+s)/2,_textX=(i,o,s,_)=>i===(_?"left":"right")?s:i==="center"?(o+s)/2:o;function noop$1(){}const uid=function(){let i=0;return function(){return i++}}();function isNullOrUndef(i){return i===null||typeof i>"u"}function isArray(i){if(Array.isArray&&Array.isArray(i))return!0;const o=Object.prototype.toString.call(i);return o.substr(0,7)==="[object"&&o.substr(-6)==="Array]"}function isObject(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}const isNumberFinite=i=>(typeof i=="number"||i instanceof Number)&&isFinite(+i);function finiteOrDefault(i,o){return isNumberFinite(i)?i:o}function valueOrDefault(i,o){return typeof i>"u"?o:i}const toPercentage=(i,o)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:i/o,toDimension=(i,o)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*o:+i;function callback(i,o,s){if(i&&typeof i.call=="function")return i.apply(s,o)}function each(i,o,s,_){let $,et,tt;if(isArray(i))if(et=i.length,_)for($=et-1;$>=0;$--)o.call(s,i[$],$);else for($=0;$<et;$++)o.call(s,i[$],$);else if(isObject(i))for(tt=Object.keys(i),et=tt.length,$=0;$<et;$++)o.call(s,i[tt[$]],tt[$])}function _elementsEqual(i,o){let s,_,$,et;if(!i||!o||i.length!==o.length)return!1;for(s=0,_=i.length;s<_;++s)if($=i[s],et=o[s],$.datasetIndex!==et.datasetIndex||$.index!==et.index)return!1;return!0}function clone$1(i){if(isArray(i))return i.map(clone$1);if(isObject(i)){const o=Object.create(null),s=Object.keys(i),_=s.length;let $=0;for(;$<_;++$)o[s[$]]=clone$1(i[s[$]]);return o}return i}function isValidKey(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function _merger(i,o,s,_){if(!isValidKey(i))return;const $=o[i],et=s[i];isObject($)&&isObject(et)?merge($,et,_):o[i]=clone$1(et)}function merge(i,o,s){const _=isArray(o)?o:[o],$=_.length;if(!isObject(i))return i;s=s||{};const et=s.merger||_merger;for(let tt=0;tt<$;++tt){if(o=_[tt],!isObject(o))continue;const j=Object.keys(o);for(let it=0,st=j.length;it<st;++it)et(j[it],i,o,s)}return i}function mergeIf(i,o){return merge(i,o,{merger:_mergerIf})}function _mergerIf(i,o,s){if(!isValidKey(i))return;const _=o[i],$=s[i];isObject(_)&&isObject($)?mergeIf(_,$):Object.prototype.hasOwnProperty.call(o,i)||(o[i]=clone$1($))}const emptyString="",dot=".";function indexOfDotOrLength(i,o){const s=i.indexOf(dot,o);return s===-1?i.length:s}function resolveObjectKey(i,o){if(o===emptyString)return i;let s=0,_=indexOfDotOrLength(o,s);for(;i&&_>s;)i=i[o.substr(s,_-s)],s=_+1,_=indexOfDotOrLength(o,s);return i}function _capitalize(i){return i.charAt(0).toUpperCase()+i.slice(1)}const defined=i=>typeof i<"u",isFunction=i=>typeof i=="function",setsEqual=(i,o)=>{if(i.size!==o.size)return!1;for(const s of i)if(!o.has(s))return!1;return!0};function _isClickEvent(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function niceNum(i){const o=Math.round(i);i=almostEquals(i,o,i/1e3)?o:i;const s=Math.pow(10,Math.floor(log10(i))),_=i/s;return(_<=1?1:_<=2?2:_<=5?5:10)*s}function _factorize(i){const o=[],s=Math.sqrt(i);let _;for(_=1;_<s;_++)i%_===0&&(o.push(_),o.push(i/_));return s===(s|0)&&o.push(s),o.sort(($,et)=>$-et).pop(),o}function isNumber(i){return!isNaN(parseFloat(i))&&isFinite(i)}function almostEquals(i,o,s){return Math.abs(i-o)<s}function almostWhole(i,o){const s=Math.round(i);return s-o<=i&&s+o>=i}function _setMinAndMaxByKey(i,o,s){let _,$,et;for(_=0,$=i.length;_<$;_++)et=i[_][s],isNaN(et)||(o.min=Math.min(o.min,et),o.max=Math.max(o.max,et))}function toRadians(i){return i*(PI/180)}function toDegrees(i){return i*(180/PI)}function _decimalPlaces(i){if(!isNumberFinite(i))return;let o=1,s=0;for(;Math.round(i*o)/o!==i;)o*=10,s++;return s}function getAngleFromPoint(i,o){const s=o.x-i.x,_=o.y-i.y,$=Math.sqrt(s*s+_*_);let et=Math.atan2(_,s);return et<-.5*PI&&(et+=TAU),{angle:et,distance:$}}function distanceBetweenPoints(i,o){return Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))}function _angleDiff(i,o){return(i-o+PITAU)%TAU-PI}function _normalizeAngle(i){return(i%TAU+TAU)%TAU}function _angleBetween(i,o,s,_){const $=_normalizeAngle(i),et=_normalizeAngle(o),tt=_normalizeAngle(s),j=_normalizeAngle(et-$),it=_normalizeAngle(tt-$),st=_normalizeAngle($-et),ht=_normalizeAngle($-tt);return $===et||$===tt||_&&et===tt||j>it&&st<ht}function _limitValue(i,o,s){return Math.max(o,Math.min(s,i))}function _int16Range(i){return _limitValue(i,-32768,32767)}function _isBetween(i,o,s,_=1e-6){return i>=Math.min(o,s)-_&&i<=Math.max(o,s)+_}const atEdge=i=>i===0||i===1,elasticIn=(i,o,s)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-o)*TAU/s)),elasticOut=(i,o,s)=>Math.pow(2,-10*i)*Math.sin((i-o)*TAU/s)+1,effects={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*HALF_PI)+1,easeOutSine:i=>Math.sin(i*HALF_PI),easeInOutSine:i=>-.5*(Math.cos(PI*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>atEdge(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>atEdge(i)?i:elasticIn(i,.075,.3),easeOutElastic:i=>atEdge(i)?i:elasticOut(i,.075,.3),easeInOutElastic(i){return atEdge(i)?i:i<.5?.5*elasticIn(i*2,.1125,.45):.5+.5*elasticOut(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let o=1.70158;return(i/=.5)<1?.5*(i*i*(((o*=1.525)+1)*i-o)):.5*((i-=2)*i*(((o*=1.525)+1)*i+o)+2)},easeInBounce:i=>1-effects.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?effects.easeInBounce(i*2)*.5:effects.easeOutBounce(i*2-1)*.5+.5};/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex="0123456789ABCDEF",h1=i=>hex[i&15],h2=i=>hex[(i&240)>>4]+hex[i&15],eq=i=>(i&240)>>4===(i&15);function isShort(i){return eq(i.r)&&eq(i.g)&&eq(i.b)&&eq(i.a)}function hexParse(i){var o=i.length,s;return i[0]==="#"&&(o===4||o===5?s={r:255&map$1[i[1]]*17,g:255&map$1[i[2]]*17,b:255&map$1[i[3]]*17,a:o===5?map$1[i[4]]*17:255}:(o===7||o===9)&&(s={r:map$1[i[1]]<<4|map$1[i[2]],g:map$1[i[3]]<<4|map$1[i[4]],b:map$1[i[5]]<<4|map$1[i[6]],a:o===9?map$1[i[7]]<<4|map$1[i[8]]:255})),s}function hexString(i){var o=isShort(i)?h1:h2;return i&&"#"+o(i.r)+o(i.g)+o(i.b)+(i.a<255?o(i.a):"")}function round(i){return i+.5|0}const lim=(i,o,s)=>Math.max(Math.min(i,s),o);function p2b(i){return lim(round(i*2.55),0,255)}function n2b(i){return lim(round(i*255),0,255)}function b2n(i){return lim(round(i/2.55)/100,0,1)}function n2p(i){return lim(round(i*100),0,100)}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(i){const o=RGB_RE.exec(i);let s=255,_,$,et;if(o){if(o[7]!==_){const tt=+o[7];s=255&(o[8]?p2b(tt):tt*255)}return _=+o[1],$=+o[3],et=+o[5],_=255&(o[2]?p2b(_):_),$=255&(o[4]?p2b($):$),et=255&(o[6]?p2b(et):et),{r:_,g:$,b:et,a:s}}}function rgbString(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${b2n(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(i,o,s){const _=o*Math.min(s,1-s),$=(et,tt=(et+i/30)%12)=>s-_*Math.max(Math.min(tt-3,9-tt,1),-1);return[$(0),$(8),$(4)]}function hsv2rgbn(i,o,s){const _=($,et=($+i/60)%6)=>s-s*o*Math.max(Math.min(et,4-et,1),0);return[_(5),_(3),_(1)]}function hwb2rgbn(i,o,s){const _=hsl2rgbn(i,1,.5);let $;for(o+s>1&&($=1/(o+s),o*=$,s*=$),$=0;$<3;$++)_[$]*=1-o-s,_[$]+=o;return _}function rgb2hsl(i){const s=i.r/255,_=i.g/255,$=i.b/255,et=Math.max(s,_,$),tt=Math.min(s,_,$),j=(et+tt)/2;let it,st,ht;return et!==tt&&(ht=et-tt,st=j>.5?ht/(2-et-tt):ht/(et+tt),it=et===s?(_-$)/ht+(_<$?6:0):et===_?($-s)/ht+2:(s-_)/ht+4,it=it*60+.5),[it|0,st||0,j]}function calln(i,o,s,_){return(Array.isArray(o)?i(o[0],o[1],o[2]):i(o,s,_)).map(n2b)}function hsl2rgb(i,o,s){return calln(hsl2rgbn,i,o,s)}function hwb2rgb(i,o,s){return calln(hwb2rgbn,i,o,s)}function hsv2rgb(i,o,s){return calln(hsv2rgbn,i,o,s)}function hue(i){return(i%360+360)%360}function hueParse(i){const o=HUE_RE.exec(i);let s=255,_;if(!o)return;o[5]!==_&&(s=o[6]?p2b(+o[5]):n2b(+o[5]));const $=hue(+o[2]),et=+o[3]/100,tt=+o[4]/100;return o[1]==="hwb"?_=hwb2rgb($,et,tt):o[1]==="hsv"?_=hsv2rgb($,et,tt):_=hsl2rgb($,et,tt),{r:_[0],g:_[1],b:_[2],a:s}}function rotate(i,o){var s=rgb2hsl(i);s[0]=hue(s[0]+o),s=hsl2rgb(s),i.r=s[0],i.g=s[1],i.b=s[2]}function hslString(i){if(!i)return;const o=rgb2hsl(i),s=o[0],_=n2p(o[1]),$=n2p(o[2]);return i.a<255?`hsla(${s}, ${_}%, ${$}%, ${b2n(i.a)})`:`hsl(${s}, ${_}%, ${$}%)`}const map$1$1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const i={},o=Object.keys(names),s=Object.keys(map$1$1);let _,$,et,tt,j;for(_=0;_<o.length;_++){for(tt=j=o[_],$=0;$<s.length;$++)et=s[$],j=j.replace(et,map$1$1[et]);et=parseInt(names[tt],16),i[j]=[et>>16&255,et>>8&255,et&255]}return i}let names$1;function nameParse(i){names$1||(names$1=unpack(),names$1.transparent=[0,0,0,0]);const o=names$1[i.toLowerCase()];return o&&{r:o[0],g:o[1],b:o[2],a:o.length===4?o[3]:255}}function modHSL(i,o,s){if(i){let _=rgb2hsl(i);_[o]=Math.max(0,Math.min(_[o]+_[o]*s,o===0?360:1)),_=hsl2rgb(_),i.r=_[0],i.g=_[1],i.b=_[2]}}function clone(i,o){return i&&Object.assign(o||{},i)}function fromObject(i){var o={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(o={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(o.a=n2b(i[3]))):(o=clone(i,{r:0,g:0,b:0,a:1}),o.a=n2b(o.a)),o}function functionParse(i){return i.charAt(0)==="r"?rgbParse(i):hueParse(i)}class Color{constructor(o){if(o instanceof Color)return o;const s=typeof o;let _;s==="object"?_=fromObject(o):s==="string"&&(_=hexParse(o)||nameParse(o)||functionParse(o)),this._rgb=_,this._valid=!!_}get valid(){return this._valid}get rgb(){var o=clone(this._rgb);return o&&(o.a=b2n(o.a)),o}set rgb(o){this._rgb=fromObject(o)}rgbString(){return this._valid?rgbString(this._rgb):this._rgb}hexString(){return this._valid?hexString(this._rgb):this._rgb}hslString(){return this._valid?hslString(this._rgb):this._rgb}mix(o,s){const _=this;if(o){const $=_.rgb,et=o.rgb;let tt;const j=s===tt?.5:s,it=2*j-1,st=$.a-et.a,ht=((it*st===-1?it:(it+st)/(1+it*st))+1)/2;tt=1-ht,$.r=255&ht*$.r+tt*et.r+.5,$.g=255&ht*$.g+tt*et.g+.5,$.b=255&ht*$.b+tt*et.b+.5,$.a=j*$.a+(1-j)*et.a,_.rgb=$}return _}clone(){return new Color(this.rgb)}alpha(o){return this._rgb.a=n2b(o),this}clearer(o){const s=this._rgb;return s.a*=1-o,this}greyscale(){const o=this._rgb,s=round(o.r*.3+o.g*.59+o.b*.11);return o.r=o.g=o.b=s,this}opaquer(o){const s=this._rgb;return s.a*=1+o,this}negate(){const o=this._rgb;return o.r=255-o.r,o.g=255-o.g,o.b=255-o.b,this}lighten(o){return modHSL(this._rgb,2,o),this}darken(o){return modHSL(this._rgb,2,-o),this}saturate(o){return modHSL(this._rgb,1,o),this}desaturate(o){return modHSL(this._rgb,1,-o),this}rotate(o){return rotate(this._rgb,o),this}}function index_esm(i){return new Color(i)}const isPatternOrGradient=i=>i instanceof CanvasGradient||i instanceof CanvasPattern;function color(i){return isPatternOrGradient(i)?i:index_esm(i)}function getHoverColor(i){return isPatternOrGradient(i)?i:index_esm(i).saturate(.5).darken(.1).hexString()}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(i,o){if(!o)return i;const s=o.split(".");for(let _=0,$=s.length;_<$;++_){const et=s[_];i=i[et]||(i[et]=Object.create(null))}return i}function set(i,o,s){return typeof o=="string"?merge(getScope$1(i,o),s):merge(getScope$1(i,""),o)}class Defaults{constructor(o){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,_)=>getHoverColor(_.backgroundColor),this.hoverBorderColor=(s,_)=>getHoverColor(_.borderColor),this.hoverColor=(s,_)=>getHoverColor(_.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(o)}set(o,s){return set(this,o,s)}get(o){return getScope$1(this,o)}describe(o,s){return set(descriptors,o,s)}override(o,s){return set(overrides,o,s)}route(o,s,_,$){const et=getScope$1(this,o),tt=getScope$1(this,_),j="_"+s;Object.defineProperties(et,{[j]:{value:et[s],writable:!0},[s]:{enumerable:!0,get(){const it=this[j],st=tt[$];return isObject(it)?Object.assign({},st,it):valueOrDefault(it,st)},set(it){this[j]=it}}})}}var defaults=new Defaults({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function toFontString(i){return!i||isNullOrUndef(i.size)||isNullOrUndef(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function _measureText(i,o,s,_,$){let et=o[$];return et||(et=o[$]=i.measureText($).width,s.push($)),et>_&&(_=et),_}function _longestText(i,o,s,_){_=_||{};let $=_.data=_.data||{},et=_.garbageCollect=_.garbageCollect||[];_.font!==o&&($=_.data={},et=_.garbageCollect=[],_.font=o),i.save(),i.font=o;let tt=0;const j=s.length;let it,st,ht,vt,ft;for(it=0;it<j;it++)if(vt=s[it],vt!=null&&isArray(vt)!==!0)tt=_measureText(i,$,et,tt,vt);else if(isArray(vt))for(st=0,ht=vt.length;st<ht;st++)ft=vt[st],ft!=null&&!isArray(ft)&&(tt=_measureText(i,$,et,tt,ft));i.restore();const pt=et.length/2;if(pt>s.length){for(it=0;it<pt;it++)delete $[et[it]];et.splice(0,pt)}return tt}function _alignPixel(i,o,s){const _=i.currentDevicePixelRatio,$=s!==0?Math.max(s/2,.5):0;return Math.round((o-$)*_)/_+$}function clearCanvas(i,o){o=o||i.getContext("2d"),o.save(),o.resetTransform(),o.clearRect(0,0,i.width,i.height),o.restore()}function drawPoint(i,o,s,_){let $,et,tt,j,it;const st=o.pointStyle,ht=o.rotation,vt=o.radius;let ft=(ht||0)*RAD_PER_DEG;if(st&&typeof st=="object"&&($=st.toString(),$==="[object HTMLImageElement]"||$==="[object HTMLCanvasElement]")){i.save(),i.translate(s,_),i.rotate(ft),i.drawImage(st,-st.width/2,-st.height/2,st.width,st.height),i.restore();return}if(!(isNaN(vt)||vt<=0)){switch(i.beginPath(),st){default:i.arc(s,_,vt,0,TAU),i.closePath();break;case"triangle":i.moveTo(s+Math.sin(ft)*vt,_-Math.cos(ft)*vt),ft+=TWO_THIRDS_PI,i.lineTo(s+Math.sin(ft)*vt,_-Math.cos(ft)*vt),ft+=TWO_THIRDS_PI,i.lineTo(s+Math.sin(ft)*vt,_-Math.cos(ft)*vt),i.closePath();break;case"rectRounded":it=vt*.516,j=vt-it,et=Math.cos(ft+QUARTER_PI)*j,tt=Math.sin(ft+QUARTER_PI)*j,i.arc(s-et,_-tt,it,ft-PI,ft-HALF_PI),i.arc(s+tt,_-et,it,ft-HALF_PI,ft),i.arc(s+et,_+tt,it,ft,ft+HALF_PI),i.arc(s-tt,_+et,it,ft+HALF_PI,ft+PI),i.closePath();break;case"rect":if(!ht){j=Math.SQRT1_2*vt,i.rect(s-j,_-j,2*j,2*j);break}ft+=QUARTER_PI;case"rectRot":et=Math.cos(ft)*vt,tt=Math.sin(ft)*vt,i.moveTo(s-et,_-tt),i.lineTo(s+tt,_-et),i.lineTo(s+et,_+tt),i.lineTo(s-tt,_+et),i.closePath();break;case"crossRot":ft+=QUARTER_PI;case"cross":et=Math.cos(ft)*vt,tt=Math.sin(ft)*vt,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt),i.moveTo(s+tt,_-et),i.lineTo(s-tt,_+et);break;case"star":et=Math.cos(ft)*vt,tt=Math.sin(ft)*vt,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt),i.moveTo(s+tt,_-et),i.lineTo(s-tt,_+et),ft+=QUARTER_PI,et=Math.cos(ft)*vt,tt=Math.sin(ft)*vt,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt),i.moveTo(s+tt,_-et),i.lineTo(s-tt,_+et);break;case"line":et=Math.cos(ft)*vt,tt=Math.sin(ft)*vt,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt);break;case"dash":i.moveTo(s,_),i.lineTo(s+Math.cos(ft)*vt,_+Math.sin(ft)*vt);break}i.fill(),o.borderWidth>0&&i.stroke()}}function _isPointInArea(i,o,s){return s=s||.5,!o||i&&i.x>o.left-s&&i.x<o.right+s&&i.y>o.top-s&&i.y<o.bottom+s}function clipArea(i,o){i.save(),i.beginPath(),i.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),i.clip()}function unclipArea(i){i.restore()}function _steppedLineTo(i,o,s,_,$){if(!o)return i.lineTo(s.x,s.y);if($==="middle"){const et=(o.x+s.x)/2;i.lineTo(et,o.y),i.lineTo(et,s.y)}else $==="after"!=!!_?i.lineTo(o.x,s.y):i.lineTo(s.x,o.y);i.lineTo(s.x,s.y)}function _bezierCurveTo(i,o,s,_){if(!o)return i.lineTo(s.x,s.y);i.bezierCurveTo(_?o.cp1x:o.cp2x,_?o.cp1y:o.cp2y,_?s.cp2x:s.cp1x,_?s.cp2y:s.cp1y,s.x,s.y)}function renderText(i,o,s,_,$,et={}){const tt=isArray(o)?o:[o],j=et.strokeWidth>0&&et.strokeColor!=="";let it,st;for(i.save(),i.font=$.string,setRenderOpts(i,et),it=0;it<tt.length;++it)st=tt[it],j&&(et.strokeColor&&(i.strokeStyle=et.strokeColor),isNullOrUndef(et.strokeWidth)||(i.lineWidth=et.strokeWidth),i.strokeText(st,s,_,et.maxWidth)),i.fillText(st,s,_,et.maxWidth),decorateText(i,s,_,st,et),_+=$.lineHeight;i.restore()}function setRenderOpts(i,o){o.translation&&i.translate(o.translation[0],o.translation[1]),isNullOrUndef(o.rotation)||i.rotate(o.rotation),o.color&&(i.fillStyle=o.color),o.textAlign&&(i.textAlign=o.textAlign),o.textBaseline&&(i.textBaseline=o.textBaseline)}function decorateText(i,o,s,_,$){if($.strikethrough||$.underline){const et=i.measureText(_),tt=o-et.actualBoundingBoxLeft,j=o+et.actualBoundingBoxRight,it=s-et.actualBoundingBoxAscent,st=s+et.actualBoundingBoxDescent,ht=$.strikethrough?(it+st)/2:st;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=$.decorationWidth||2,i.moveTo(tt,ht),i.lineTo(j,ht),i.stroke()}}function addRoundedRectPath(i,o){const{x:s,y:_,w:$,h:et,radius:tt}=o;i.arc(s+tt.topLeft,_+tt.topLeft,tt.topLeft,-HALF_PI,PI,!0),i.lineTo(s,_+et-tt.bottomLeft),i.arc(s+tt.bottomLeft,_+et-tt.bottomLeft,tt.bottomLeft,PI,HALF_PI,!0),i.lineTo(s+$-tt.bottomRight,_+et),i.arc(s+$-tt.bottomRight,_+et-tt.bottomRight,tt.bottomRight,HALF_PI,0,!0),i.lineTo(s+$,_+tt.topRight),i.arc(s+$-tt.topRight,_+tt.topRight,tt.topRight,0,-HALF_PI,!0),i.lineTo(s+tt.topLeft,_)}const LINE_HEIGHT=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),FONT_STYLE=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(i,o){const s=(""+i).match(LINE_HEIGHT);if(!s||s[1]==="normal")return o*1.2;switch(i=+s[2],s[3]){case"px":return i;case"%":i/=100;break}return o*i}const numberOrZero=i=>+i||0;function _readValueToProps(i,o){const s={},_=isObject(o),$=_?Object.keys(o):o,et=isObject(i)?_?tt=>valueOrDefault(i[tt],i[o[tt]]):tt=>i[tt]:()=>i;for(const tt of $)s[tt]=numberOrZero(et(tt));return s}function toTRBL(i){return _readValueToProps(i,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(i){return _readValueToProps(i,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(i){const o=toTRBL(i);return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function toFont(i,o){i=i||{},o=o||defaults.font;let s=valueOrDefault(i.size,o.size);typeof s=="string"&&(s=parseInt(s,10));let _=valueOrDefault(i.style,o.style);_&&!(""+_).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+_+'"'),_="");const $={family:valueOrDefault(i.family,o.family),lineHeight:toLineHeight(valueOrDefault(i.lineHeight,o.lineHeight),s),size:s,style:_,weight:valueOrDefault(i.weight,o.weight),string:""};return $.string=toFontString($),$}function resolve(i,o,s,_){let $=!0,et,tt,j;for(et=0,tt=i.length;et<tt;++et)if(j=i[et],j!==void 0&&(o!==void 0&&typeof j=="function"&&(j=j(o),$=!1),s!==void 0&&isArray(j)&&(j=j[s%j.length],$=!1),j!==void 0))return _&&!$&&(_.cacheable=!1),j}function _addGrace(i,o,s){const{min:_,max:$}=i,et=toDimension(o,($-_)/2),tt=(j,it)=>s&&j===0?0:j+it;return{min:tt(_,-Math.abs(et)),max:tt($,et)}}function createContext(i,o){return Object.assign(Object.create(i),o)}function _lookup(i,o,s){s=s||(tt=>i[tt]<o);let _=i.length-1,$=0,et;for(;_-$>1;)et=$+_>>1,s(et)?$=et:_=et;return{lo:$,hi:_}}const _lookupByKey=(i,o,s)=>_lookup(i,s,_=>i[_][o]<s),_rlookupByKey=(i,o,s)=>_lookup(i,s,_=>i[_][o]>=s);function _filterBetween(i,o,s){let _=0,$=i.length;for(;_<$&&i[_]<o;)_++;for(;$>_&&i[$-1]>s;)$--;return _>0||$<i.length?i.slice(_,$):i}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(i,o){if(i._chartjs){i._chartjs.listeners.push(o);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),arrayEvents.forEach(s=>{const _="_onData"+_capitalize(s),$=i[s];Object.defineProperty(i,s,{configurable:!0,enumerable:!1,value(...et){const tt=$.apply(this,et);return i._chartjs.listeners.forEach(j=>{typeof j[_]=="function"&&j[_](...et)}),tt}})})}function unlistenArrayEvents(i,o){const s=i._chartjs;if(!s)return;const _=s.listeners,$=_.indexOf(o);$!==-1&&_.splice($,1),!(_.length>0)&&(arrayEvents.forEach(et=>{delete i[et]}),delete i._chartjs)}function _arrayUnique(i){const o=new Set;let s,_;for(s=0,_=i.length;s<_;++s)o.add(i[s]);return o.size===_?i:Array.from(o)}function _createResolver(i,o=[""],s=i,_,$=()=>i[0]){defined(_)||(_=_resolve("_fallback",i));const et={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:_,_getTarget:$,override:tt=>_createResolver([tt,...i],o,s,_)};return new Proxy(et,{deleteProperty(tt,j){return delete tt[j],delete tt._keys,delete i[0][j],!0},get(tt,j){return _cached(tt,j,()=>_resolveWithPrefixes(j,o,i,tt))},getOwnPropertyDescriptor(tt,j){return Reflect.getOwnPropertyDescriptor(tt._scopes[0],j)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(tt,j){return getKeysFromAllScopes(tt).includes(j)},ownKeys(tt){return getKeysFromAllScopes(tt)},set(tt,j,it){const st=tt._storage||(tt._storage=$());return tt[j]=st[j]=it,delete tt._keys,!0}})}function _attachContext(i,o,s,_){const $={_cacheable:!1,_proxy:i,_context:o,_subProxy:s,_stack:new Set,_descriptors:_descriptors(i,_),setContext:et=>_attachContext(i,et,s,_),override:et=>_attachContext(i.override(et),o,s,_)};return new Proxy($,{deleteProperty(et,tt){return delete et[tt],delete i[tt],!0},get(et,tt,j){return _cached(et,tt,()=>_resolveWithContext(et,tt,j))},getOwnPropertyDescriptor(et,tt){return et._descriptors.allKeys?Reflect.has(i,tt)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,tt)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(et,tt){return Reflect.has(i,tt)},ownKeys(){return Reflect.ownKeys(i)},set(et,tt,j){return i[tt]=j,delete et[tt],!0}})}function _descriptors(i,o={scriptable:!0,indexable:!0}){const{_scriptable:s=o.scriptable,_indexable:_=o.indexable,_allKeys:$=o.allKeys}=i;return{allKeys:$,scriptable:s,indexable:_,isScriptable:isFunction(s)?s:()=>s,isIndexable:isFunction(_)?_:()=>_}}const readKey=(i,o)=>i?i+_capitalize(o):o,needsSubResolver=(i,o)=>isObject(o)&&i!=="adapters"&&(Object.getPrototypeOf(o)===null||o.constructor===Object);function _cached(i,o,s){if(Object.prototype.hasOwnProperty.call(i,o))return i[o];const _=s();return i[o]=_,_}function _resolveWithContext(i,o,s){const{_proxy:_,_context:$,_subProxy:et,_descriptors:tt}=i;let j=_[o];return isFunction(j)&&tt.isScriptable(o)&&(j=_resolveScriptable(o,j,i,s)),isArray(j)&&j.length&&(j=_resolveArray(o,j,i,tt.isIndexable)),needsSubResolver(o,j)&&(j=_attachContext(j,$,et&&et[o],tt)),j}function _resolveScriptable(i,o,s,_){const{_proxy:$,_context:et,_subProxy:tt,_stack:j}=s;if(j.has(i))throw new Error("Recursion detected: "+Array.from(j).join("->")+"->"+i);return j.add(i),o=o(et,tt||_),j.delete(i),needsSubResolver(i,o)&&(o=createSubResolver($._scopes,$,i,o)),o}function _resolveArray(i,o,s,_){const{_proxy:$,_context:et,_subProxy:tt,_descriptors:j}=s;if(defined(et.index)&&_(i))o=o[et.index%o.length];else if(isObject(o[0])){const it=o,st=$._scopes.filter(ht=>ht!==it);o=[];for(const ht of it){const vt=createSubResolver(st,$,i,ht);o.push(_attachContext(vt,et,tt&&tt[i],j))}}return o}function resolveFallback(i,o,s){return isFunction(i)?i(o,s):i}const getScope=(i,o)=>i===!0?o:typeof i=="string"?resolveObjectKey(o,i):void 0;function addScopes(i,o,s,_,$){for(const et of o){const tt=getScope(s,et);if(tt){i.add(tt);const j=resolveFallback(tt._fallback,s,$);if(defined(j)&&j!==s&&j!==_)return j}else if(tt===!1&&defined(_)&&s!==_)return null}return!1}function createSubResolver(i,o,s,_){const $=o._rootScopes,et=resolveFallback(o._fallback,s,_),tt=[...i,...$],j=new Set;j.add(_);let it=addScopesFromKey(j,tt,s,et||s,_);return it===null||defined(et)&&et!==s&&(it=addScopesFromKey(j,tt,et,it,_),it===null)?!1:_createResolver(Array.from(j),[""],$,et,()=>subGetTarget(o,s,_))}function addScopesFromKey(i,o,s,_,$){for(;s;)s=addScopes(i,o,s,_,$);return s}function subGetTarget(i,o,s){const _=i._getTarget();o in _||(_[o]={});const $=_[o];return isArray($)&&isObject(s)?s:$}function _resolveWithPrefixes(i,o,s,_){let $;for(const et of o)if($=_resolve(readKey(et,i),s),defined($))return needsSubResolver(i,$)?createSubResolver(s,_,i,$):$}function _resolve(i,o){for(const s of o){if(!s)continue;const _=s[i];if(defined(_))return _}}function getKeysFromAllScopes(i){let o=i._keys;return o||(o=i._keys=resolveKeysFromAllScopes(i._scopes)),o}function resolveKeysFromAllScopes(i){const o=new Set;for(const s of i)for(const _ of Object.keys(s).filter($=>!$.startsWith("_")))o.add(_);return Array.from(o)}const EPSILON=Number.EPSILON||1e-14,getPoint=(i,o)=>o<i.length&&!i[o].skip&&i[o],getValueAxis=i=>i==="x"?"y":"x";function splineCurve(i,o,s,_){const $=i.skip?o:i,et=o,tt=s.skip?o:s,j=distanceBetweenPoints(et,$),it=distanceBetweenPoints(tt,et);let st=j/(j+it),ht=it/(j+it);st=isNaN(st)?0:st,ht=isNaN(ht)?0:ht;const vt=_*st,ft=_*ht;return{previous:{x:et.x-vt*(tt.x-$.x),y:et.y-vt*(tt.y-$.y)},next:{x:et.x+ft*(tt.x-$.x),y:et.y+ft*(tt.y-$.y)}}}function monotoneAdjust(i,o,s){const _=i.length;let $,et,tt,j,it,st=getPoint(i,0);for(let ht=0;ht<_-1;++ht)if(it=st,st=getPoint(i,ht+1),!(!it||!st)){if(almostEquals(o[ht],0,EPSILON)){s[ht]=s[ht+1]=0;continue}$=s[ht]/o[ht],et=s[ht+1]/o[ht],j=Math.pow($,2)+Math.pow(et,2),!(j<=9)&&(tt=3/Math.sqrt(j),s[ht]=$*tt*o[ht],s[ht+1]=et*tt*o[ht])}}function monotoneCompute(i,o,s="x"){const _=getValueAxis(s),$=i.length;let et,tt,j,it=getPoint(i,0);for(let st=0;st<$;++st){if(tt=j,j=it,it=getPoint(i,st+1),!j)continue;const ht=j[s],vt=j[_];tt&&(et=(ht-tt[s])/3,j[`cp1${s}`]=ht-et,j[`cp1${_}`]=vt-et*o[st]),it&&(et=(it[s]-ht)/3,j[`cp2${s}`]=ht+et,j[`cp2${_}`]=vt+et*o[st])}}function splineCurveMonotone(i,o="x"){const s=getValueAxis(o),_=i.length,$=Array(_).fill(0),et=Array(_);let tt,j,it,st=getPoint(i,0);for(tt=0;tt<_;++tt)if(j=it,it=st,st=getPoint(i,tt+1),!!it){if(st){const ht=st[o]-it[o];$[tt]=ht!==0?(st[s]-it[s])/ht:0}et[tt]=j?st?sign($[tt-1])!==sign($[tt])?0:($[tt-1]+$[tt])/2:$[tt-1]:$[tt]}monotoneAdjust(i,$,et),monotoneCompute(i,et,o)}function capControlPoint(i,o,s){return Math.max(Math.min(i,s),o)}function capBezierPoints(i,o){let s,_,$,et,tt,j=_isPointInArea(i[0],o);for(s=0,_=i.length;s<_;++s)tt=et,et=j,j=s<_-1&&_isPointInArea(i[s+1],o),et&&($=i[s],tt&&($.cp1x=capControlPoint($.cp1x,o.left,o.right),$.cp1y=capControlPoint($.cp1y,o.top,o.bottom)),j&&($.cp2x=capControlPoint($.cp2x,o.left,o.right),$.cp2y=capControlPoint($.cp2y,o.top,o.bottom)))}function _updateBezierControlPoints(i,o,s,_,$){let et,tt,j,it;if(o.spanGaps&&(i=i.filter(st=>!st.skip)),o.cubicInterpolationMode==="monotone")splineCurveMonotone(i,$);else{let st=_?i[i.length-1]:i[0];for(et=0,tt=i.length;et<tt;++et)j=i[et],it=splineCurve(st,j,i[Math.min(et+1,tt-(_?0:1))%tt],o.tension),j.cp1x=it.previous.x,j.cp1y=it.previous.y,j.cp2x=it.next.x,j.cp2y=it.next.y,st=j}o.capBezierPoints&&capBezierPoints(i,s)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(i){let o=i.parentNode;return o&&o.toString()==="[object ShadowRoot]"&&(o=o.host),o}function parseMaxStyle(i,o,s){let _;return typeof i=="string"?(_=parseInt(i,10),i.indexOf("%")!==-1&&(_=_/100*o.parentNode[s])):_=i,_}const getComputedStyle=i=>window.getComputedStyle(i,null);function getStyle(i,o){return getComputedStyle(i).getPropertyValue(o)}const positions=["top","right","bottom","left"];function getPositionedStyle(i,o,s){const _={};s=s?"-"+s:"";for(let $=0;$<4;$++){const et=positions[$];_[et]=parseFloat(i[o+"-"+et+s])||0}return _.width=_.left+_.right,_.height=_.top+_.bottom,_}const useOffsetPos=(i,o,s)=>(i>0||o>0)&&(!s||!s.shadowRoot);function getCanvasPosition(i,o){const s=i.native||i,_=s.touches,$=_&&_.length?_[0]:s,{offsetX:et,offsetY:tt}=$;let j=!1,it,st;if(useOffsetPos(et,tt,s.target))it=et,st=tt;else{const ht=o.getBoundingClientRect();it=$.clientX-ht.left,st=$.clientY-ht.top,j=!0}return{x:it,y:st,box:j}}function getRelativePosition$1(i,o){const{canvas:s,currentDevicePixelRatio:_}=o,$=getComputedStyle(s),et=$.boxSizing==="border-box",tt=getPositionedStyle($,"padding"),j=getPositionedStyle($,"border","width"),{x:it,y:st,box:ht}=getCanvasPosition(i,s),vt=tt.left+(ht&&j.left),ft=tt.top+(ht&&j.top);let{width:pt,height:ct}=o;return et&&(pt-=tt.width+j.width,ct-=tt.height+j.height),{x:Math.round((it-vt)/pt*s.width/_),y:Math.round((st-ft)/ct*s.height/_)}}function getContainerSize(i,o,s){let _,$;if(o===void 0||s===void 0){const et=_getParentNode(i);if(!et)o=i.clientWidth,s=i.clientHeight;else{const tt=et.getBoundingClientRect(),j=getComputedStyle(et),it=getPositionedStyle(j,"border","width"),st=getPositionedStyle(j,"padding");o=tt.width-st.width-it.width,s=tt.height-st.height-it.height,_=parseMaxStyle(j.maxWidth,et,"clientWidth"),$=parseMaxStyle(j.maxHeight,et,"clientHeight")}}return{width:o,height:s,maxWidth:_||INFINITY,maxHeight:$||INFINITY}}const round1=i=>Math.round(i*10)/10;function getMaximumSize(i,o,s,_){const $=getComputedStyle(i),et=getPositionedStyle($,"margin"),tt=parseMaxStyle($.maxWidth,i,"clientWidth")||INFINITY,j=parseMaxStyle($.maxHeight,i,"clientHeight")||INFINITY,it=getContainerSize(i,o,s);let{width:st,height:ht}=it;if($.boxSizing==="content-box"){const vt=getPositionedStyle($,"border","width"),ft=getPositionedStyle($,"padding");st-=ft.width+vt.width,ht-=ft.height+vt.height}return st=Math.max(0,st-et.width),ht=Math.max(0,_?Math.floor(st/_):ht-et.height),st=round1(Math.min(st,tt,it.maxWidth)),ht=round1(Math.min(ht,j,it.maxHeight)),st&&!ht&&(ht=round1(st/2)),{width:st,height:ht}}function retinaScale(i,o,s){const _=o||1,$=Math.floor(i.height*_),et=Math.floor(i.width*_);i.height=$/_,i.width=et/_;const tt=i.canvas;return tt.style&&(s||!tt.style.height&&!tt.style.width)&&(tt.style.height=`${i.height}px`,tt.style.width=`${i.width}px`),i.currentDevicePixelRatio!==_||tt.height!==$||tt.width!==et?(i.currentDevicePixelRatio=_,tt.height=$,tt.width=et,i.ctx.setTransform(_,0,0,_,0,0),!0):!1}const supportsEventListenerOptions=function(){let i=!1;try{const o={get passive(){return i=!0,!1}};window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{}return i}();function readUsedSize(i,o){const s=getStyle(i,o),_=s&&s.match(/^(\d+)(\.\d+)?px$/);return _?+_[1]:void 0}function _pointInLine(i,o,s,_){return{x:i.x+s*(o.x-i.x),y:i.y+s*(o.y-i.y)}}function _steppedInterpolation(i,o,s,_){return{x:i.x+s*(o.x-i.x),y:_==="middle"?s<.5?i.y:o.y:_==="after"?s<1?i.y:o.y:s>0?o.y:i.y}}function _bezierInterpolation(i,o,s,_){const $={x:i.cp2x,y:i.cp2y},et={x:o.cp1x,y:o.cp1y},tt=_pointInLine(i,$,s),j=_pointInLine($,et,s),it=_pointInLine(et,o,s),st=_pointInLine(tt,j,s),ht=_pointInLine(j,it,s);return _pointInLine(st,ht,s)}const intlCache=new Map;function getNumberFormat(i,o){o=o||{};const s=i+JSON.stringify(o);let _=intlCache.get(s);return _||(_=new Intl.NumberFormat(i,o),intlCache.set(s,_)),_}function formatNumber(i,o,s){return getNumberFormat(o,s).format(i)}const getRightToLeftAdapter=function(i,o){return{x(s){return i+i+o-s},setWidth(s){o=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,_){return s-_},leftForLtr(s,_){return s-_}}},getLeftToRightAdapter=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,o){return i+o},leftForLtr(i,o){return i}}};function getRtlAdapter(i,o,s){return i?getRightToLeftAdapter(o,s):getLeftToRightAdapter()}function overrideTextDirection(i,o){let s,_;(o==="ltr"||o==="rtl")&&(s=i.canvas.style,_=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",o,"important"),i.prevTextDirection=_)}function restoreTextDirection(i,o){o!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",o[0],o[1]))}function propertyFn(i){return i==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(o,s)=>o-s,normalize:o=>o}}function normalizeSegment({start:i,end:o,count:s,loop:_,style:$}){return{start:i%s,end:o%s,loop:_&&(o-i+1)%s===0,style:$}}function getSegment(i,o,s){const{property:_,start:$,end:et}=s,{between:tt,normalize:j}=propertyFn(_),it=o.length;let{start:st,end:ht,loop:vt}=i,ft,pt;if(vt){for(st+=it,ht+=it,ft=0,pt=it;ft<pt&&tt(j(o[st%it][_]),$,et);++ft)st--,ht--;st%=it,ht%=it}return ht<st&&(ht+=it),{start:st,end:ht,loop:vt,style:i.style}}function _boundSegment(i,o,s){if(!s)return[i];const{property:_,start:$,end:et}=s,tt=o.length,{compare:j,between:it,normalize:st}=propertyFn(_),{start:ht,end:vt,loop:ft,style:pt}=getSegment(i,o,s),ct=[];let yt=!1,Et=null,Ot,Lt,Tt;const It=()=>it($,Tt,Ot)&&j($,Tt)!==0,mt=()=>j(et,Ot)===0||it(et,Tt,Ot),Bt=()=>yt||It(),nn=()=>!yt||mt();for(let sn=ht,xt=ht;sn<=vt;++sn)Lt=o[sn%tt],!Lt.skip&&(Ot=st(Lt[_]),Ot!==Tt&&(yt=it(Ot,$,et),Et===null&&Bt()&&(Et=j(Ot,$)===0?sn:xt),Et!==null&&nn()&&(ct.push(normalizeSegment({start:Et,end:sn,loop:ft,count:tt,style:pt})),Et=null),xt=sn,Tt=Ot));return Et!==null&&ct.push(normalizeSegment({start:Et,end:vt,loop:ft,count:tt,style:pt})),ct}function _boundSegments(i,o){const s=[],_=i.segments;for(let $=0;$<_.length;$++){const et=_boundSegment(_[$],i.points,o);et.length&&s.push(...et)}return s}function findStartAndEnd(i,o,s,_){let $=0,et=o-1;if(s&&!_)for(;$<o&&!i[$].skip;)$++;for(;$<o&&i[$].skip;)$++;for($%=o,s&&(et+=$);et>$&&i[et%o].skip;)et--;return et%=o,{start:$,end:et}}function solidSegments(i,o,s,_){const $=i.length,et=[];let tt=o,j=i[o],it;for(it=o+1;it<=s;++it){const st=i[it%$];st.skip||st.stop?j.skip||(_=!1,et.push({start:o%$,end:(it-1)%$,loop:_}),o=tt=st.stop?it:null):(tt=it,j.skip&&(o=it)),j=st}return tt!==null&&et.push({start:o%$,end:tt%$,loop:_}),et}function _computeSegments(i,o){const s=i.points,_=i.options.spanGaps,$=s.length;if(!$)return[];const et=!!i._loop,{start:tt,end:j}=findStartAndEnd(s,$,et,_);if(_===!0)return splitByStyles(i,[{start:tt,end:j,loop:et}],s,o);const it=j<tt?j+$:j,st=!!i._fullLoop&&tt===0&&j===$-1;return splitByStyles(i,solidSegments(s,tt,it,st),s,o)}function splitByStyles(i,o,s,_){return!_||!_.setContext||!s?o:doSplitByStyles(i,o,s,_)}function doSplitByStyles(i,o,s,_){const $=i._chart.getContext(),et=readStyle(i.options),{_datasetIndex:tt,options:{spanGaps:j}}=i,it=s.length,st=[];let ht=et,vt=o[0].start,ft=vt;function pt(ct,yt,Et,Ot){const Lt=j?-1:1;if(ct!==yt){for(ct+=it;s[ct%it].skip;)ct-=Lt;for(;s[yt%it].skip;)yt+=Lt;ct%it!==yt%it&&(st.push({start:ct%it,end:yt%it,loop:Et,style:Ot}),ht=Ot,vt=yt%it)}}for(const ct of o){vt=j?vt:ct.start;let yt=s[vt%it],Et;for(ft=vt+1;ft<=ct.end;ft++){const Ot=s[ft%it];Et=readStyle(_.setContext(createContext($,{type:"segment",p0:yt,p1:Ot,p0DataIndex:(ft-1)%it,p1DataIndex:ft%it,datasetIndex:tt}))),styleChanged(Et,ht)&&pt(vt,ft-1,ct.loop,ht),yt=Ot,ht=Et}vt<ft-1&&pt(vt,ft-1,ct.loop,ht)}return st}function readStyle(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function styleChanged(i,o){return o&&JSON.stringify(i)!==JSON.stringify(o)}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(o,s,_,$){const et=s.listeners[$],tt=s.duration;et.forEach(j=>j({chart:o,initial:s.initial,numSteps:tt,currentStep:Math.min(_-s.start,tt)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(o=Date.now()){let s=0;this._charts.forEach((_,$)=>{if(!_.running||!_.items.length)return;const et=_.items;let tt=et.length-1,j=!1,it;for(;tt>=0;--tt)it=et[tt],it._active?(it._total>_.duration&&(_.duration=it._total),it.tick(o),j=!0):(et[tt]=et[et.length-1],et.pop());j&&($.draw(),this._notify($,_,o,"progress")),et.length||(_.running=!1,this._notify($,_,o,"complete"),_.initial=!1),s+=et.length}),this._lastDate=o,s===0&&(this._running=!1)}_getAnims(o){const s=this._charts;let _=s.get(o);return _||(_={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(o,_)),_}listen(o,s,_){this._getAnims(o).listeners[s].push(_)}add(o,s){!s||!s.length||this._getAnims(o).items.push(...s)}has(o){return this._getAnims(o).items.length>0}start(o){const s=this._charts.get(o);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((_,$)=>Math.max(_,$._duration),0),this._refresh())}running(o){if(!this._running)return!1;const s=this._charts.get(o);return!(!s||!s.running||!s.items.length)}stop(o){const s=this._charts.get(o);if(!s||!s.items.length)return;const _=s.items;let $=_.length-1;for(;$>=0;--$)_[$].cancel();s.items=[],this._notify(o,s,Date.now(),"complete")}remove(o){return this._charts.delete(o)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(i,o,s){return s>.5?o:i},color(i,o,s){const _=color(i||transparent),$=_.valid&&color(o||transparent);return $&&$.valid?$.mix(_,s).hexString():o},number(i,o,s){return i+(o-i)*s}};class Animation{constructor(o,s,_,$){const et=s[_];$=resolve([o.to,$,et,o.from]);const tt=resolve([o.from,et,$]);this._active=!0,this._fn=o.fn||interpolators[o.type||typeof tt],this._easing=effects[o.easing]||effects.linear,this._start=Math.floor(Date.now()+(o.delay||0)),this._duration=this._total=Math.floor(o.duration),this._loop=!!o.loop,this._target=s,this._prop=_,this._from=tt,this._to=$,this._promises=void 0}active(){return this._active}update(o,s,_){if(this._active){this._notify(!1);const $=this._target[this._prop],et=_-this._start,tt=this._duration-et;this._start=_,this._duration=Math.floor(Math.max(tt,o.duration)),this._total+=et,this._loop=!!o.loop,this._to=resolve([o.to,s,$,o.from]),this._from=resolve([o.from,$,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(o){const s=o-this._start,_=this._duration,$=this._prop,et=this._from,tt=this._loop,j=this._to;let it;if(this._active=et!==j&&(tt||s<_),!this._active){this._target[$]=j,this._notify(!0);return}if(s<0){this._target[$]=et;return}it=s/_%2,it=tt&&it>1?2-it:it,it=this._easing(Math.min(1,Math.max(0,it))),this._target[$]=this._fn(et,j,it)}wait(){const o=this._promises||(this._promises=[]);return new Promise((s,_)=>{o.push({res:s,rej:_})})}_notify(o){const s=o?"res":"rej",_=this._promises||[];for(let $=0;$<_.length;$++)_[$][s]()}}const numbers=["x","y","borderWidth","radius","tension"],colors$1=["color","borderColor","backgroundColor"];defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const animationOptions=Object.keys(defaults.animation);defaults.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>i!=="onProgress"&&i!=="onComplete"&&i!=="fn"});defaults.set("animations",{colors:{type:"color",properties:colors$1},numbers:{type:"number",properties:numbers}});defaults.describe("animations",{_fallback:"animation"});defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>i|0}}}});class Animations{constructor(o,s){this._chart=o,this._properties=new Map,this.configure(s)}configure(o){if(!isObject(o))return;const s=this._properties;Object.getOwnPropertyNames(o).forEach(_=>{const $=o[_];if(!isObject($))return;const et={};for(const tt of animationOptions)et[tt]=$[tt];(isArray($.properties)&&$.properties||[_]).forEach(tt=>{(tt===_||!s.has(tt))&&s.set(tt,et)})})}_animateOptions(o,s){const _=s.options,$=resolveTargetOptions(o,_);if(!$)return[];const et=this._createAnimations($,_);return _.$shared&&awaitAll(o.options.$animations,_).then(()=>{o.options=_},()=>{}),et}_createAnimations(o,s){const _=this._properties,$=[],et=o.$animations||(o.$animations={}),tt=Object.keys(s),j=Date.now();let it;for(it=tt.length-1;it>=0;--it){const st=tt[it];if(st.charAt(0)==="$")continue;if(st==="options"){$.push(...this._animateOptions(o,s));continue}const ht=s[st];let vt=et[st];const ft=_.get(st);if(vt)if(ft&&vt.active()){vt.update(ft,ht,j);continue}else vt.cancel();if(!ft||!ft.duration){o[st]=ht;continue}et[st]=vt=new Animation(ft,o,st,ht),$.push(vt)}return $}update(o,s){if(this._properties.size===0){Object.assign(o,s);return}const _=this._createAnimations(o,s);if(_.length)return animator.add(this._chart,_),!0}}function awaitAll(i,o){const s=[],_=Object.keys(o);for(let $=0;$<_.length;$++){const et=i[_[$]];et&&et.active()&&s.push(et.wait())}return Promise.all(s)}function resolveTargetOptions(i,o){if(!o)return;let s=i.options;if(!s){i.options=o;return}return s.$shared&&(i.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function scaleClip(i,o){const s=i&&i.options||{},_=s.reverse,$=s.min===void 0?o:0,et=s.max===void 0?o:0;return{start:_?et:$,end:_?$:et}}function defaultClip(i,o,s){if(s===!1)return!1;const _=scaleClip(i,s),$=scaleClip(o,s);return{top:$.end,right:_.end,bottom:$.start,left:_.start}}function toClip(i){let o,s,_,$;return isObject(i)?(o=i.top,s=i.right,_=i.bottom,$=i.left):o=s=_=$=i,{top:o,right:s,bottom:_,left:$,disabled:i===!1}}function getSortedDatasetIndices(i,o){const s=[],_=i._getSortedDatasetMetas(o);let $,et;for($=0,et=_.length;$<et;++$)s.push(_[$].index);return s}function applyStack(i,o,s,_={}){const $=i.keys,et=_.mode==="single";let tt,j,it,st;if(o!==null){for(tt=0,j=$.length;tt<j;++tt){if(it=+$[tt],it===s){if(_.all)continue;break}st=i.values[it],isNumberFinite(st)&&(et||o===0||sign(o)===sign(st))&&(o+=st)}return o}}function convertObjectDataToArray(i){const o=Object.keys(i),s=new Array(o.length);let _,$,et;for(_=0,$=o.length;_<$;++_)et=o[_],s[_]={x:et,y:i[et]};return s}function isStacked(i,o){const s=i&&i.options.stacked;return s||s===void 0&&o.stack!==void 0}function getStackKey(i,o,s){return`${i.id}.${o.id}.${s.stack||s.type}`}function getUserBounds(i){const{min:o,max:s,minDefined:_,maxDefined:$}=i.getUserBounds();return{min:_?o:Number.NEGATIVE_INFINITY,max:$?s:Number.POSITIVE_INFINITY}}function getOrCreateStack(i,o,s){const _=i[o]||(i[o]={});return _[s]||(_[s]={})}function getLastIndexInStack(i,o,s,_){for(const $ of o.getMatchingVisibleMetas(_).reverse()){const et=i[$.index];if(s&&et>0||!s&&et<0)return $.index}return null}function updateStacks(i,o){const{chart:s,_cachedMeta:_}=i,$=s._stacks||(s._stacks={}),{iScale:et,vScale:tt,index:j}=_,it=et.axis,st=tt.axis,ht=getStackKey(et,tt,_),vt=o.length;let ft;for(let pt=0;pt<vt;++pt){const ct=o[pt],{[it]:yt,[st]:Et}=ct,Ot=ct._stacks||(ct._stacks={});ft=Ot[st]=getOrCreateStack($,ht,yt),ft[j]=Et,ft._top=getLastIndexInStack(ft,tt,!0,_.type),ft._bottom=getLastIndexInStack(ft,tt,!1,_.type)}}function getFirstScaleId(i,o){const s=i.scales;return Object.keys(s).filter(_=>s[_].axis===o).shift()}function createDatasetContext(i,o){return createContext(i,{active:!1,dataset:void 0,datasetIndex:o,index:o,mode:"default",type:"dataset"})}function createDataContext(i,o,s){return createContext(i,{active:!1,dataIndex:o,parsed:void 0,raw:void 0,element:s,index:o,mode:"default",type:"data"})}function clearStacks(i,o){const s=i.controller.index,_=i.vScale&&i.vScale.axis;if(_){o=o||i._parsed;for(const $ of o){const et=$._stacks;if(!et||et[_]===void 0||et[_][s]===void 0)return;delete et[_][s]}}}const isDirectUpdateMode=i=>i==="reset"||i==="none",cloneIfNotShared=(i,o)=>o?i:Object.assign({},i),createStack=(i,o,s)=>i&&!o.hidden&&o._stacked&&{keys:getSortedDatasetIndices(s,!0),values:null};class DatasetController{constructor(o,s){this.chart=o,this._ctx=o.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const o=this._cachedMeta;this.configure(),this.linkScales(),o._stacked=isStacked(o.vScale,o),this.addElements()}updateIndex(o){this.index!==o&&clearStacks(this._cachedMeta),this.index=o}linkScales(){const o=this.chart,s=this._cachedMeta,_=this.getDataset(),$=(vt,ft,pt,ct)=>vt==="x"?ft:vt==="r"?ct:pt,et=s.xAxisID=valueOrDefault(_.xAxisID,getFirstScaleId(o,"x")),tt=s.yAxisID=valueOrDefault(_.yAxisID,getFirstScaleId(o,"y")),j=s.rAxisID=valueOrDefault(_.rAxisID,getFirstScaleId(o,"r")),it=s.indexAxis,st=s.iAxisID=$(it,et,tt,j),ht=s.vAxisID=$(it,tt,et,j);s.xScale=this.getScaleForId(et),s.yScale=this.getScaleForId(tt),s.rScale=this.getScaleForId(j),s.iScale=this.getScaleForId(st),s.vScale=this.getScaleForId(ht)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(o){return this.chart.scales[o]}_getOtherScale(o){const s=this._cachedMeta;return o===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const o=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),o._stacked&&clearStacks(o)}_dataCheck(){const o=this.getDataset(),s=o.data||(o.data=[]),_=this._data;if(isObject(s))this._data=convertObjectDataToArray(s);else if(_!==s){if(_){unlistenArrayEvents(_,this);const $=this._cachedMeta;clearStacks($),$._parsed=[]}s&&Object.isExtensible(s)&&listenArrayEvents(s,this),this._syncList=[],this._data=s}}addElements(){const o=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(o.dataset=new this.datasetElementType)}buildOrUpdateElements(o){const s=this._cachedMeta,_=this.getDataset();let $=!1;this._dataCheck();const et=s._stacked;s._stacked=isStacked(s.vScale,s),s.stack!==_.stack&&($=!0,clearStacks(s),s.stack=_.stack),this._resyncElements(o),($||et!==s._stacked)&&updateStacks(this,s._parsed)}configure(){const o=this.chart.config,s=o.datasetScopeKeys(this._type),_=o.getOptionScopes(this.getDataset(),s,!0);this.options=o.createResolver(_,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(o,s){const{_cachedMeta:_,_data:$}=this,{iScale:et,_stacked:tt}=_,j=et.axis;let it=o===0&&s===$.length?!0:_._sorted,st=o>0&&_._parsed[o-1],ht,vt,ft;if(this._parsing===!1)_._parsed=$,_._sorted=!0,ft=$;else{isArray($[o])?ft=this.parseArrayData(_,$,o,s):isObject($[o])?ft=this.parseObjectData(_,$,o,s):ft=this.parsePrimitiveData(_,$,o,s);const pt=()=>vt[j]===null||st&&vt[j]<st[j];for(ht=0;ht<s;++ht)_._parsed[ht+o]=vt=ft[ht],it&&(pt()&&(it=!1),st=vt);_._sorted=it}tt&&updateStacks(this,ft)}parsePrimitiveData(o,s,_,$){const{iScale:et,vScale:tt}=o,j=et.axis,it=tt.axis,st=et.getLabels(),ht=et===tt,vt=new Array($);let ft,pt,ct;for(ft=0,pt=$;ft<pt;++ft)ct=ft+_,vt[ft]={[j]:ht||et.parse(st[ct],ct),[it]:tt.parse(s[ct],ct)};return vt}parseArrayData(o,s,_,$){const{xScale:et,yScale:tt}=o,j=new Array($);let it,st,ht,vt;for(it=0,st=$;it<st;++it)ht=it+_,vt=s[ht],j[it]={x:et.parse(vt[0],ht),y:tt.parse(vt[1],ht)};return j}parseObjectData(o,s,_,$){const{xScale:et,yScale:tt}=o,{xAxisKey:j="x",yAxisKey:it="y"}=this._parsing,st=new Array($);let ht,vt,ft,pt;for(ht=0,vt=$;ht<vt;++ht)ft=ht+_,pt=s[ft],st[ht]={x:et.parse(resolveObjectKey(pt,j),ft),y:tt.parse(resolveObjectKey(pt,it),ft)};return st}getParsed(o){return this._cachedMeta._parsed[o]}getDataElement(o){return this._cachedMeta.data[o]}applyStack(o,s,_){const $=this.chart,et=this._cachedMeta,tt=s[o.axis],j={keys:getSortedDatasetIndices($,!0),values:s._stacks[o.axis]};return applyStack(j,tt,et.index,{mode:_})}updateRangeFromParsed(o,s,_,$){const et=_[s.axis];let tt=et===null?NaN:et;const j=$&&_._stacks[s.axis];$&&j&&($.values=j,tt=applyStack($,et,this._cachedMeta.index)),o.min=Math.min(o.min,tt),o.max=Math.max(o.max,tt)}getMinMax(o,s){const _=this._cachedMeta,$=_._parsed,et=_._sorted&&o===_.iScale,tt=$.length,j=this._getOtherScale(o),it=createStack(s,_,this.chart),st={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ht,max:vt}=getUserBounds(j);let ft,pt;function ct(){pt=$[ft];const yt=pt[j.axis];return!isNumberFinite(pt[o.axis])||ht>yt||vt<yt}for(ft=0;ft<tt&&!(!ct()&&(this.updateRangeFromParsed(st,o,pt,it),et));++ft);if(et){for(ft=tt-1;ft>=0;--ft)if(!ct()){this.updateRangeFromParsed(st,o,pt,it);break}}return st}getAllParsedValues(o){const s=this._cachedMeta._parsed,_=[];let $,et,tt;for($=0,et=s.length;$<et;++$)tt=s[$][o.axis],isNumberFinite(tt)&&_.push(tt);return _}getMaxOverflow(){return!1}getLabelAndValue(o){const s=this._cachedMeta,_=s.iScale,$=s.vScale,et=this.getParsed(o);return{label:_?""+_.getLabelForValue(et[_.axis]):"",value:$?""+$.getLabelForValue(et[$.axis]):""}}_update(o){const s=this._cachedMeta;this.update(o||"default"),s._clip=toClip(valueOrDefault(this.options.clip,defaultClip(s.xScale,s.yScale,this.getMaxOverflow())))}update(o){}draw(){const o=this._ctx,s=this.chart,_=this._cachedMeta,$=_.data||[],et=s.chartArea,tt=[],j=this._drawStart||0,it=this._drawCount||$.length-j,st=this.options.drawActiveElementsOnTop;let ht;for(_.dataset&&_.dataset.draw(o,et,j,it),ht=j;ht<j+it;++ht){const vt=$[ht];vt.hidden||(vt.active&&st?tt.push(vt):vt.draw(o,et))}for(ht=0;ht<tt.length;++ht)tt[ht].draw(o,et)}getStyle(o,s){const _=s?"active":"default";return o===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(_):this.resolveDataElementOptions(o||0,_)}getContext(o,s,_){const $=this.getDataset();let et;if(o>=0&&o<this._cachedMeta.data.length){const tt=this._cachedMeta.data[o];et=tt.$context||(tt.$context=createDataContext(this.getContext(),o,tt)),et.parsed=this.getParsed(o),et.raw=$.data[o],et.index=et.dataIndex=o}else et=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),et.dataset=$,et.index=et.datasetIndex=this.index;return et.active=!!s,et.mode=_,et}resolveDatasetElementOptions(o){return this._resolveElementOptions(this.datasetElementType.id,o)}resolveDataElementOptions(o,s){return this._resolveElementOptions(this.dataElementType.id,s,o)}_resolveElementOptions(o,s="default",_){const $=s==="active",et=this._cachedDataOpts,tt=o+"-"+s,j=et[tt],it=this.enableOptionSharing&&defined(_);if(j)return cloneIfNotShared(j,it);const st=this.chart.config,ht=st.datasetElementScopeKeys(this._type,o),vt=$?[`${o}Hover`,"hover",o,""]:[o,""],ft=st.getOptionScopes(this.getDataset(),ht),pt=Object.keys(defaults.elements[o]),ct=()=>this.getContext(_,$),yt=st.resolveNamedOptions(ft,pt,ct,vt);return yt.$shared&&(yt.$shared=it,et[tt]=Object.freeze(cloneIfNotShared(yt,it))),yt}_resolveAnimations(o,s,_){const $=this.chart,et=this._cachedDataOpts,tt=`animation-${s}`,j=et[tt];if(j)return j;let it;if($.options.animation!==!1){const ht=this.chart.config,vt=ht.datasetAnimationScopeKeys(this._type,s),ft=ht.getOptionScopes(this.getDataset(),vt);it=ht.createResolver(ft,this.getContext(o,_,s))}const st=new Animations($,it&&it.animations);return it&&it._cacheable&&(et[tt]=Object.freeze(st)),st}getSharedOptions(o){if(o.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},o))}includeOptions(o,s){return!s||isDirectUpdateMode(o)||this.chart._animationsDisabled}updateElement(o,s,_,$){isDirectUpdateMode($)?Object.assign(o,_):this._resolveAnimations(s,$).update(o,_)}updateSharedOptions(o,s,_){o&&!isDirectUpdateMode(s)&&this._resolveAnimations(void 0,s).update(o,_)}_setStyle(o,s,_,$){o.active=$;const et=this.getStyle(s,$);this._resolveAnimations(s,_,$).update(o,{options:!$&&this.getSharedOptions(et)||et})}removeHoverStyle(o,s,_){this._setStyle(o,_,"active",!1)}setHoverStyle(o,s,_){this._setStyle(o,_,"active",!0)}_removeDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!1)}_setDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!0)}_resyncElements(o){const s=this._data,_=this._cachedMeta.data;for(const[j,it,st]of this._syncList)this[j](it,st);this._syncList=[];const $=_.length,et=s.length,tt=Math.min(et,$);tt&&this.parse(0,tt),et>$?this._insertElements($,et-$,o):et<$&&this._removeElements(et,$-et)}_insertElements(o,s,_=!0){const $=this._cachedMeta,et=$.data,tt=o+s;let j;const it=st=>{for(st.length+=s,j=st.length-1;j>=tt;j--)st[j]=st[j-s]};for(it(et),j=o;j<tt;++j)et[j]=new this.dataElementType;this._parsing&&it($._parsed),this.parse(o,s),_&&this.updateElements(et,o,s,"reset")}updateElements(o,s,_,$){}_removeElements(o,s){const _=this._cachedMeta;if(this._parsing){const $=_._parsed.splice(o,s);_._stacked&&clearStacks(_,$)}_.data.splice(o,s)}_sync(o){if(this._parsing)this._syncList.push(o);else{const[s,_,$]=o;this[s](_,$)}this.chart._dataChanges.push([this.index,...o])}_onDataPush(){const o=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-o,o])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(o,s){s&&this._sync(["_removeElements",o,s]);const _=arguments.length-2;_&&this._sync(["_insertElements",o,_])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}DatasetController.defaults={};DatasetController.prototype.datasetElementType=null;DatasetController.prototype.dataElementType=null;function getAllScaleValues(i,o){if(!i._cache.$bar){const s=i.getMatchingVisibleMetas(o);let _=[];for(let $=0,et=s.length;$<et;$++)_=_.concat(s[$].controller.getAllParsedValues(i));i._cache.$bar=_arrayUnique(_.sort(($,et)=>$-et))}return i._cache.$bar}function computeMinSampleSize(i){const o=i.iScale,s=getAllScaleValues(o,i.type);let _=o._length,$,et,tt,j;const it=()=>{tt===32767||tt===-32768||(defined(j)&&(_=Math.min(_,Math.abs(tt-j)||_)),j=tt)};for($=0,et=s.length;$<et;++$)tt=o.getPixelForValue(s[$]),it();for(j=void 0,$=0,et=o.ticks.length;$<et;++$)tt=o.getPixelForTick($),it();return _}function computeFitCategoryTraits(i,o,s,_){const $=s.barThickness;let et,tt;return isNullOrUndef($)?(et=o.min*s.categoryPercentage,tt=s.barPercentage):(et=$*_,tt=1),{chunk:et/_,ratio:tt,start:o.pixels[i]-et/2}}function computeFlexCategoryTraits(i,o,s,_){const $=o.pixels,et=$[i];let tt=i>0?$[i-1]:null,j=i<$.length-1?$[i+1]:null;const it=s.categoryPercentage;tt===null&&(tt=et-(j===null?o.end-o.start:j-et)),j===null&&(j=et+et-tt);const st=et-(et-Math.min(tt,j))/2*it;return{chunk:Math.abs(j-tt)/2*it/_,ratio:s.barPercentage,start:st}}function parseFloatBar(i,o,s,_){const $=s.parse(i[0],_),et=s.parse(i[1],_),tt=Math.min($,et),j=Math.max($,et);let it=tt,st=j;Math.abs(tt)>Math.abs(j)&&(it=j,st=tt),o[s.axis]=st,o._custom={barStart:it,barEnd:st,start:$,end:et,min:tt,max:j}}function parseValue(i,o,s,_){return isArray(i)?parseFloatBar(i,o,s,_):o[s.axis]=s.parse(i,_),o}function parseArrayOrPrimitive(i,o,s,_){const $=i.iScale,et=i.vScale,tt=$.getLabels(),j=$===et,it=[];let st,ht,vt,ft;for(st=s,ht=s+_;st<ht;++st)ft=o[st],vt={},vt[$.axis]=j||$.parse(tt[st],st),it.push(parseValue(ft,vt,et,st));return it}function isFloatBar(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function barSign(i,o,s){return i!==0?sign(i):(o.isHorizontal()?1:-1)*(o.min>=s?1:-1)}function borderProps(i){let o,s,_,$,et;return i.horizontal?(o=i.base>i.x,s="left",_="right"):(o=i.base<i.y,s="bottom",_="top"),o?($="end",et="start"):($="start",et="end"),{start:s,end:_,reverse:o,top:$,bottom:et}}function setBorderSkipped(i,o,s,_){let $=o.borderSkipped;const et={};if(!$){i.borderSkipped=et;return}const{start:tt,end:j,reverse:it,top:st,bottom:ht}=borderProps(i);$==="middle"&&s&&(i.enableBorderRadius=!0,(s._top||0)===_?$=st:(s._bottom||0)===_?$=ht:(et[parseEdge(ht,tt,j,it)]=!0,$=st)),et[parseEdge($,tt,j,it)]=!0,i.borderSkipped=et}function parseEdge(i,o,s,_){return _?(i=swap(i,o,s),i=startEnd(i,s,o)):i=startEnd(i,o,s),i}function swap(i,o,s){return i===o?s:i===s?o:i}function startEnd(i,o,s){return i==="start"?o:i==="end"?s:i}function setInflateAmount(i,{inflateAmount:o},s){i.inflateAmount=o==="auto"?s===1?.33:0:o}class BarController extends DatasetController{parsePrimitiveData(o,s,_,$){return parseArrayOrPrimitive(o,s,_,$)}parseArrayData(o,s,_,$){return parseArrayOrPrimitive(o,s,_,$)}parseObjectData(o,s,_,$){const{iScale:et,vScale:tt}=o,{xAxisKey:j="x",yAxisKey:it="y"}=this._parsing,st=et.axis==="x"?j:it,ht=tt.axis==="x"?j:it,vt=[];let ft,pt,ct,yt;for(ft=_,pt=_+$;ft<pt;++ft)yt=s[ft],ct={},ct[et.axis]=et.parse(resolveObjectKey(yt,st),ft),vt.push(parseValue(resolveObjectKey(yt,ht),ct,tt,ft));return vt}updateRangeFromParsed(o,s,_,$){super.updateRangeFromParsed(o,s,_,$);const et=_._custom;et&&s===this._cachedMeta.vScale&&(o.min=Math.min(o.min,et.min),o.max=Math.max(o.max,et.max))}getMaxOverflow(){return 0}getLabelAndValue(o){const s=this._cachedMeta,{iScale:_,vScale:$}=s,et=this.getParsed(o),tt=et._custom,j=isFloatBar(tt)?"["+tt.start+", "+tt.end+"]":""+$.getLabelForValue(et[$.axis]);return{label:""+_.getLabelForValue(et[_.axis]),value:j}}initialize(){this.enableOptionSharing=!0,super.initialize();const o=this._cachedMeta;o.stack=this.getDataset().stack}update(o){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,o)}updateElements(o,s,_,$){const et=$==="reset",{index:tt,_cachedMeta:{vScale:j}}=this,it=j.getBasePixel(),st=j.isHorizontal(),ht=this._getRuler(),vt=this.resolveDataElementOptions(s,$),ft=this.getSharedOptions(vt),pt=this.includeOptions($,ft);this.updateSharedOptions(ft,$,vt);for(let ct=s;ct<s+_;ct++){const yt=this.getParsed(ct),Et=et||isNullOrUndef(yt[j.axis])?{base:it,head:it}:this._calculateBarValuePixels(ct),Ot=this._calculateBarIndexPixels(ct,ht),Lt=(yt._stacks||{})[j.axis],Tt={horizontal:st,base:Et.base,enableBorderRadius:!Lt||isFloatBar(yt._custom)||tt===Lt._top||tt===Lt._bottom,x:st?Et.head:Ot.center,y:st?Ot.center:Et.head,height:st?Ot.size:Math.abs(Et.size),width:st?Math.abs(Et.size):Ot.size};pt&&(Tt.options=ft||this.resolveDataElementOptions(ct,o[ct].active?"active":$));const It=Tt.options||o[ct].options;setBorderSkipped(Tt,It,Lt,tt),setInflateAmount(Tt,It,ht.ratio),this.updateElement(o[ct],ct,Tt,$)}}_getStacks(o,s){const $=this._cachedMeta.iScale,et=$.getMatchingVisibleMetas(this._type),tt=$.options.stacked,j=et.length,it=[];let st,ht;for(st=0;st<j;++st)if(ht=et[st],!!ht.controller.options.grouped){if(typeof s<"u"){const vt=ht.controller.getParsed(s)[ht.controller._cachedMeta.vScale.axis];if(isNullOrUndef(vt)||isNaN(vt))continue}if((tt===!1||it.indexOf(ht.stack)===-1||tt===void 0&&ht.stack===void 0)&&it.push(ht.stack),ht.index===o)break}return it.length||it.push(void 0),it}_getStackCount(o){return this._getStacks(void 0,o).length}_getStackIndex(o,s,_){const $=this._getStacks(o,_),et=s!==void 0?$.indexOf(s):-1;return et===-1?$.length-1:et}_getRuler(){const o=this.options,s=this._cachedMeta,_=s.iScale,$=[];let et,tt;for(et=0,tt=s.data.length;et<tt;++et)$.push(_.getPixelForValue(this.getParsed(et)[_.axis],et));const j=o.barThickness;return{min:j||computeMinSampleSize(s),pixels:$,start:_._startPixel,end:_._endPixel,stackCount:this._getStackCount(),scale:_,grouped:o.grouped,ratio:j?1:o.categoryPercentage*o.barPercentage}}_calculateBarValuePixels(o){const{_cachedMeta:{vScale:s,_stacked:_},options:{base:$,minBarLength:et}}=this,tt=$||0,j=this.getParsed(o),it=j._custom,st=isFloatBar(it);let ht=j[s.axis],vt=0,ft=_?this.applyStack(s,j,_):ht,pt,ct;ft!==ht&&(vt=ft-ht,ft=ht),st&&(ht=it.barStart,ft=it.barEnd-it.barStart,ht!==0&&sign(ht)!==sign(it.barEnd)&&(vt=0),vt+=ht);const yt=!isNullOrUndef($)&&!st?$:vt;let Et=s.getPixelForValue(yt);if(this.chart.getDataVisibility(o)?pt=s.getPixelForValue(vt+ft):pt=Et,ct=pt-Et,Math.abs(ct)<et&&(ct=barSign(ct,s,tt)*et,ht===tt&&(Et-=ct/2),pt=Et+ct),Et===s.getPixelForValue(tt)){const Ot=sign(ct)*s.getLineWidthForValue(tt)/2;Et+=Ot,ct-=Ot}return{size:ct,base:Et,head:pt,center:pt+ct/2}}_calculateBarIndexPixels(o,s){const _=s.scale,$=this.options,et=$.skipNull,tt=valueOrDefault($.maxBarThickness,1/0);let j,it;if(s.grouped){const st=et?this._getStackCount(o):s.stackCount,ht=$.barThickness==="flex"?computeFlexCategoryTraits(o,s,$,st):computeFitCategoryTraits(o,s,$,st),vt=this._getStackIndex(this.index,this._cachedMeta.stack,et?o:void 0);j=ht.start+ht.chunk*vt+ht.chunk/2,it=Math.min(tt,ht.chunk*ht.ratio)}else j=_.getPixelForValue(this.getParsed(o)[_.axis],o),it=Math.min(tt,s.min*s.ratio);return{base:j-it/2,head:j+it/2,center:j,size:it}}draw(){const o=this._cachedMeta,s=o.vScale,_=o.data,$=_.length;let et=0;for(;et<$;++et)this.getParsed(et)[s.axis]!==null&&_[et].draw(this._ctx)}}BarController.id="bar";BarController.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};BarController.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(o,s,_,$){const et=super.parsePrimitiveData(o,s,_,$);for(let tt=0;tt<et.length;tt++)et[tt]._custom=this.resolveDataElementOptions(tt+_).radius;return et}parseArrayData(o,s,_,$){const et=super.parseArrayData(o,s,_,$);for(let tt=0;tt<et.length;tt++){const j=s[_+tt];et[tt]._custom=valueOrDefault(j[2],this.resolveDataElementOptions(tt+_).radius)}return et}parseObjectData(o,s,_,$){const et=super.parseObjectData(o,s,_,$);for(let tt=0;tt<et.length;tt++){const j=s[_+tt];et[tt]._custom=valueOrDefault(j&&j.r&&+j.r,this.resolveDataElementOptions(tt+_).radius)}return et}getMaxOverflow(){const o=this._cachedMeta.data;let s=0;for(let _=o.length-1;_>=0;--_)s=Math.max(s,o[_].size(this.resolveDataElementOptions(_))/2);return s>0&&s}getLabelAndValue(o){const s=this._cachedMeta,{xScale:_,yScale:$}=s,et=this.getParsed(o),tt=_.getLabelForValue(et.x),j=$.getLabelForValue(et.y),it=et._custom;return{label:s.label,value:"("+tt+", "+j+(it?", "+it:"")+")"}}update(o){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,o)}updateElements(o,s,_,$){const et=$==="reset",{iScale:tt,vScale:j}=this._cachedMeta,it=this.resolveDataElementOptions(s,$),st=this.getSharedOptions(it),ht=this.includeOptions($,st),vt=tt.axis,ft=j.axis;for(let pt=s;pt<s+_;pt++){const ct=o[pt],yt=!et&&this.getParsed(pt),Et={},Ot=Et[vt]=et?tt.getPixelForDecimal(.5):tt.getPixelForValue(yt[vt]),Lt=Et[ft]=et?j.getBasePixel():j.getPixelForValue(yt[ft]);Et.skip=isNaN(Ot)||isNaN(Lt),ht&&(Et.options=this.resolveDataElementOptions(pt,ct.active?"active":$),et&&(Et.options.radius=0)),this.updateElement(ct,pt,Et,$)}this.updateSharedOptions(st,$,it)}resolveDataElementOptions(o,s){const _=this.getParsed(o);let $=super.resolveDataElementOptions(o,s);$.$shared&&($=Object.assign({},$,{$shared:!1}));const et=$.radius;return s!=="active"&&($.radius=0),$.radius+=valueOrDefault(_&&_._custom,et),$}}BubbleController.id="bubble";BubbleController.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function getRatioAndOffset(i,o,s){let _=1,$=1,et=0,tt=0;if(o<TAU){const j=i,it=j+o,st=Math.cos(j),ht=Math.sin(j),vt=Math.cos(it),ft=Math.sin(it),pt=(Tt,It,mt)=>_angleBetween(Tt,j,it,!0)?1:Math.max(It,It*s,mt,mt*s),ct=(Tt,It,mt)=>_angleBetween(Tt,j,it,!0)?-1:Math.min(It,It*s,mt,mt*s),yt=pt(0,st,vt),Et=pt(HALF_PI,ht,ft),Ot=ct(PI,st,vt),Lt=ct(PI+HALF_PI,ht,ft);_=(yt-Ot)/2,$=(Et-Lt)/2,et=-(yt+Ot)/2,tt=-(Et+Lt)/2}return{ratioX:_,ratioY:$,offsetX:et,offsetY:tt}}class DoughnutController extends DatasetController{constructor(o,s){super(o,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(o,s){const _=this.getDataset().data,$=this._cachedMeta;if(this._parsing===!1)$._parsed=_;else{let et=it=>+_[it];if(isObject(_[o])){const{key:it="value"}=this._parsing;et=st=>+resolveObjectKey(_[st],it)}let tt,j;for(tt=o,j=o+s;tt<j;++tt)$._parsed[tt]=et(tt)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let o=TAU,s=-TAU;for(let _=0;_<this.chart.data.datasets.length;++_)if(this.chart.isDatasetVisible(_)){const $=this.chart.getDatasetMeta(_).controller,et=$._getRotation(),tt=$._getCircumference();o=Math.min(o,et),s=Math.max(s,et+tt)}return{rotation:o,circumference:s-o}}update(o){const s=this.chart,{chartArea:_}=s,$=this._cachedMeta,et=$.data,tt=this.getMaxBorderWidth()+this.getMaxOffset(et)+this.options.spacing,j=Math.max((Math.min(_.width,_.height)-tt)/2,0),it=Math.min(toPercentage(this.options.cutout,j),1),st=this._getRingWeight(this.index),{circumference:ht,rotation:vt}=this._getRotationExtents(),{ratioX:ft,ratioY:pt,offsetX:ct,offsetY:yt}=getRatioAndOffset(vt,ht,it),Et=(_.width-tt)/ft,Ot=(_.height-tt)/pt,Lt=Math.max(Math.min(Et,Ot)/2,0),Tt=toDimension(this.options.radius,Lt),It=Math.max(Tt*it,0),mt=(Tt-It)/this._getVisibleDatasetWeightTotal();this.offsetX=ct*Tt,this.offsetY=yt*Tt,$.total=this.calculateTotal(),this.outerRadius=Tt-mt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-mt*st,0),this.updateElements(et,0,et.length,o)}_circumference(o,s){const _=this.options,$=this._cachedMeta,et=this._getCircumference();return s&&_.animation.animateRotate||!this.chart.getDataVisibility(o)||$._parsed[o]===null||$.data[o].hidden?0:this.calculateCircumference($._parsed[o]*et/TAU)}updateElements(o,s,_,$){const et=$==="reset",tt=this.chart,j=tt.chartArea,st=tt.options.animation,ht=(j.left+j.right)/2,vt=(j.top+j.bottom)/2,ft=et&&st.animateScale,pt=ft?0:this.innerRadius,ct=ft?0:this.outerRadius,yt=this.resolveDataElementOptions(s,$),Et=this.getSharedOptions(yt),Ot=this.includeOptions($,Et);let Lt=this._getRotation(),Tt;for(Tt=0;Tt<s;++Tt)Lt+=this._circumference(Tt,et);for(Tt=s;Tt<s+_;++Tt){const It=this._circumference(Tt,et),mt=o[Tt],Bt={x:ht+this.offsetX,y:vt+this.offsetY,startAngle:Lt,endAngle:Lt+It,circumference:It,outerRadius:ct,innerRadius:pt};Ot&&(Bt.options=Et||this.resolveDataElementOptions(Tt,mt.active?"active":$)),Lt+=It,this.updateElement(mt,Tt,Bt,$)}this.updateSharedOptions(Et,$,yt)}calculateTotal(){const o=this._cachedMeta,s=o.data;let _=0,$;for($=0;$<s.length;$++){const et=o._parsed[$];et!==null&&!isNaN(et)&&this.chart.getDataVisibility($)&&!s[$].hidden&&(_+=Math.abs(et))}return _}calculateCircumference(o){const s=this._cachedMeta.total;return s>0&&!isNaN(o)?TAU*(Math.abs(o)/s):0}getLabelAndValue(o){const s=this._cachedMeta,_=this.chart,$=_.data.labels||[],et=formatNumber(s._parsed[o],_.options.locale);return{label:$[o]||"",value:et}}getMaxBorderWidth(o){let s=0;const _=this.chart;let $,et,tt,j,it;if(!o){for($=0,et=_.data.datasets.length;$<et;++$)if(_.isDatasetVisible($)){tt=_.getDatasetMeta($),o=tt.data,j=tt.controller;break}}if(!o)return 0;for($=0,et=o.length;$<et;++$)it=j.resolveDataElementOptions($),it.borderAlign!=="inner"&&(s=Math.max(s,it.borderWidth||0,it.hoverBorderWidth||0));return s}getMaxOffset(o){let s=0;for(let _=0,$=o.length;_<$;++_){const et=this.resolveDataElementOptions(_);s=Math.max(s,et.offset||0,et.hoverOffset||0)}return s}_getRingWeightOffset(o){let s=0;for(let _=0;_<o;++_)this.chart.isDatasetVisible(_)&&(s+=this._getRingWeight(_));return s}_getRingWeight(o){return Math.max(valueOrDefault(this.chart.data.datasets[o].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}DoughnutController.id="doughnut";DoughnutController.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};DoughnutController.descriptors={_scriptable:i=>i!=="spacing",_indexable:i=>i!=="spacing"};DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const o=i.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:s}}=i.legend.options;return o.labels.map((_,$)=>{const tt=i.getDatasetMeta(0).controller.getStyle($);return{text:_,fillStyle:tt.backgroundColor,strokeStyle:tt.borderColor,lineWidth:tt.borderWidth,pointStyle:s,hidden:!i.getDataVisibility($),index:$}})}return[]}},onClick(i,o,s){s.chart.toggleDataVisibility(o.index),s.chart.update()}},tooltip:{callbacks:{title(){return""},label(i){let o=i.label;const s=": "+i.formattedValue;return isArray(o)?(o=o.slice(),o[0]+=s):o+=s,o}}}}};class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}update(o){const s=this._cachedMeta,{dataset:_,data:$=[],_dataset:et}=s,tt=this.chart._animationsDisabled;let{start:j,count:it}=getStartAndCountOfVisiblePoints(s,$,tt);this._drawStart=j,this._drawCount=it,scaleRangesChanged(s)&&(j=0,it=$.length),_._chart=this.chart,_._datasetIndex=this.index,_._decimated=!!et._decimated,_.points=$;const st=this.resolveDatasetElementOptions(o);this.options.showLine||(st.borderWidth=0),st.segment=this.options.segment,this.updateElement(_,void 0,{animated:!tt,options:st},o),this.updateElements($,j,it,o)}updateElements(o,s,_,$){const et=$==="reset",{iScale:tt,vScale:j,_stacked:it,_dataset:st}=this._cachedMeta,ht=this.resolveDataElementOptions(s,$),vt=this.getSharedOptions(ht),ft=this.includeOptions($,vt),pt=tt.axis,ct=j.axis,{spanGaps:yt,segment:Et}=this.options,Ot=isNumber(yt)?yt:Number.POSITIVE_INFINITY,Lt=this.chart._animationsDisabled||et||$==="none";let Tt=s>0&&this.getParsed(s-1);for(let It=s;It<s+_;++It){const mt=o[It],Bt=this.getParsed(It),nn=Lt?mt:{},sn=isNullOrUndef(Bt[ct]),xt=nn[pt]=tt.getPixelForValue(Bt[pt],It),St=nn[ct]=et||sn?j.getBasePixel():j.getPixelForValue(it?this.applyStack(j,Bt,it):Bt[ct],It);nn.skip=isNaN(xt)||isNaN(St)||sn,nn.stop=It>0&&Bt[pt]-Tt[pt]>Ot,Et&&(nn.parsed=Bt,nn.raw=st.data[It]),ft&&(nn.options=vt||this.resolveDataElementOptions(It,mt.active?"active":$)),Lt||this.updateElement(mt,It,nn,$),Tt=Bt}this.updateSharedOptions(vt,$,ht)}getMaxOverflow(){const o=this._cachedMeta,s=o.dataset,_=s.options&&s.options.borderWidth||0,$=o.data||[];if(!$.length)return _;const et=$[0].size(this.resolveDataElementOptions(0)),tt=$[$.length-1].size(this.resolveDataElementOptions($.length-1));return Math.max(_,et,tt)/2}draw(){const o=this._cachedMeta;o.dataset.updateControlPoints(this.chart.chartArea,o.iScale.axis),super.draw()}}LineController.id="line";LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function getStartAndCountOfVisiblePoints(i,o,s){const _=o.length;let $=0,et=_;if(i._sorted){const{iScale:tt,_parsed:j}=i,it=tt.axis,{min:st,max:ht,minDefined:vt,maxDefined:ft}=tt.getUserBounds();vt&&($=_limitValue(Math.min(_lookupByKey(j,tt.axis,st).lo,s?_:_lookupByKey(o,it,tt.getPixelForValue(st)).lo),0,_-1)),ft?et=_limitValue(Math.max(_lookupByKey(j,tt.axis,ht).hi+1,s?0:_lookupByKey(o,it,tt.getPixelForValue(ht)).hi+1),$,_)-$:et=_-$}return{start:$,count:et}}function scaleRangesChanged(i){const{xScale:o,yScale:s,_scaleRanges:_}=i,$={xmin:o.min,xmax:o.max,ymin:s.min,ymax:s.max};if(!_)return i._scaleRanges=$,!0;const et=_.xmin!==o.min||_.xmax!==o.max||_.ymin!==s.min||_.ymax!==s.max;return Object.assign(_,$),et}class PolarAreaController extends DatasetController{constructor(o,s){super(o,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(o){const s=this._cachedMeta,_=this.chart,$=_.data.labels||[],et=formatNumber(s._parsed[o].r,_.options.locale);return{label:$[o]||"",value:et}}update(o){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,o)}_updateRadius(){const o=this.chart,s=o.chartArea,_=o.options,$=Math.min(s.right-s.left,s.bottom-s.top),et=Math.max($/2,0),tt=Math.max(_.cutoutPercentage?et/100*_.cutoutPercentage:1,0),j=(et-tt)/o.getVisibleDatasetCount();this.outerRadius=et-j*this.index,this.innerRadius=this.outerRadius-j}updateElements(o,s,_,$){const et=$==="reset",tt=this.chart,j=this.getDataset(),st=tt.options.animation,ht=this._cachedMeta.rScale,vt=ht.xCenter,ft=ht.yCenter,pt=ht.getIndexAngle(0)-.5*PI;let ct=pt,yt;const Et=360/this.countVisibleElements();for(yt=0;yt<s;++yt)ct+=this._computeAngle(yt,$,Et);for(yt=s;yt<s+_;yt++){const Ot=o[yt];let Lt=ct,Tt=ct+this._computeAngle(yt,$,Et),It=tt.getDataVisibility(yt)?ht.getDistanceFromCenterForValue(j.data[yt]):0;ct=Tt,et&&(st.animateScale&&(It=0),st.animateRotate&&(Lt=Tt=pt));const mt={x:vt,y:ft,innerRadius:0,outerRadius:It,startAngle:Lt,endAngle:Tt,options:this.resolveDataElementOptions(yt,Ot.active?"active":$)};this.updateElement(Ot,yt,mt,$)}}countVisibleElements(){const o=this.getDataset(),s=this._cachedMeta;let _=0;return s.data.forEach(($,et)=>{!isNaN(o.data[et])&&this.chart.getDataVisibility(et)&&_++}),_}_computeAngle(o,s,_){return this.chart.getDataVisibility(o)?toRadians(this.resolveDataElementOptions(o,s).angle||_):0}}PolarAreaController.id="polarArea";PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const o=i.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:s}}=i.legend.options;return o.labels.map((_,$)=>{const tt=i.getDatasetMeta(0).controller.getStyle($);return{text:_,fillStyle:tt.backgroundColor,strokeStyle:tt.borderColor,lineWidth:tt.borderWidth,pointStyle:s,hidden:!i.getDataVisibility($),index:$}})}return[]}},onClick(i,o,s){s.chart.toggleDataVisibility(o.index),s.chart.update()}},tooltip:{callbacks:{title(){return""},label(i){return i.chart.data.labels[i.dataIndex]+": "+i.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class PieController extends DoughnutController{}PieController.id="pie";PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class RadarController extends DatasetController{getLabelAndValue(o){const s=this._cachedMeta.vScale,_=this.getParsed(o);return{label:s.getLabels()[o],value:""+s.getLabelForValue(_[s.axis])}}update(o){const s=this._cachedMeta,_=s.dataset,$=s.data||[],et=s.iScale.getLabels();if(_.points=$,o!=="resize"){const tt=this.resolveDatasetElementOptions(o);this.options.showLine||(tt.borderWidth=0);const j={_loop:!0,_fullLoop:et.length===$.length,options:tt};this.updateElement(_,void 0,j,o)}this.updateElements($,0,$.length,o)}updateElements(o,s,_,$){const et=this.getDataset(),tt=this._cachedMeta.rScale,j=$==="reset";for(let it=s;it<s+_;it++){const st=o[it],ht=this.resolveDataElementOptions(it,st.active?"active":$),vt=tt.getPointPositionForValue(it,et.data[it]),ft=j?tt.xCenter:vt.x,pt=j?tt.yCenter:vt.y,ct={x:ft,y:pt,angle:vt.angle,skip:isNaN(ft)||isNaN(pt),options:ht};this.updateElement(st,it,ct,$)}}}RadarController.id="radar";RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class ScatterController extends LineController{}ScatterController.id="scatter";ScatterController.defaults={showLine:!1,fill:!1};ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(i){return"("+i.label+", "+i.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var controllers=Object.freeze({__proto__:null,BarController,BubbleController,DoughnutController,LineController,PolarAreaController,PieController,RadarController,ScatterController});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapter{constructor(o){this.options=o||{}}formats(){return abstract()}parse(o,s){return abstract()}format(o,s){return abstract()}add(o,s,_){return abstract()}diff(o,s,_){return abstract()}startOf(o,s,_){return abstract()}endOf(o,s){return abstract()}}DateAdapter.override=function(i){Object.assign(DateAdapter.prototype,i)};var adapters={_date:DateAdapter};function getRelativePosition(i,o){return"native"in i?{x:i.x,y:i.y}:getRelativePosition$1(i,o)}function evaluateAllVisibleItems(i,o){const s=i.getSortedVisibleDatasetMetas();let _,$,et;for(let tt=0,j=s.length;tt<j;++tt){({index:_,data:$}=s[tt]);for(let it=0,st=$.length;it<st;++it)et=$[it],et.skip||o(et,_,it)}}function binarySearch(i,o,s,_){const{controller:$,data:et,_sorted:tt}=i,j=$._cachedMeta.iScale;if(j&&o===j.axis&&o!=="r"&&tt&&et.length){const it=j._reversePixels?_rlookupByKey:_lookupByKey;if(_){if($._sharedOptions){const st=et[0],ht=typeof st.getRange=="function"&&st.getRange(o);if(ht){const vt=it(et,o,s-ht),ft=it(et,o,s+ht);return{lo:vt.lo,hi:ft.hi}}}}else return it(et,o,s)}return{lo:0,hi:et.length-1}}function optimizedEvaluateItems(i,o,s,_,$){const et=i.getSortedVisibleDatasetMetas(),tt=s[o];for(let j=0,it=et.length;j<it;++j){const{index:st,data:ht}=et[j],{lo:vt,hi:ft}=binarySearch(et[j],o,tt,$);for(let pt=vt;pt<=ft;++pt){const ct=ht[pt];ct.skip||_(ct,st,pt)}}}function getDistanceMetricForAxis(i){const o=i.indexOf("x")!==-1,s=i.indexOf("y")!==-1;return function(_,$){const et=o?Math.abs(_.x-$.x):0,tt=s?Math.abs(_.y-$.y):0;return Math.sqrt(Math.pow(et,2)+Math.pow(tt,2))}}function getIntersectItems(i,o,s,_){const $=[];return _isPointInArea(o,i.chartArea,i._minPadding)&&optimizedEvaluateItems(i,s,o,function(tt,j,it){tt.inRange(o.x,o.y,_)&&$.push({element:tt,datasetIndex:j,index:it})},!0),$}function getNearestRadialItems(i,o,s,_){let $=[];function et(tt,j,it){const{startAngle:st,endAngle:ht}=tt.getProps(["startAngle","endAngle"],_),{angle:vt}=getAngleFromPoint(tt,{x:o.x,y:o.y});_angleBetween(vt,st,ht)&&$.push({element:tt,datasetIndex:j,index:it})}return optimizedEvaluateItems(i,s,o,et),$}function getNearestCartesianItems(i,o,s,_,$){let et=[];const tt=getDistanceMetricForAxis(s);let j=Number.POSITIVE_INFINITY;function it(st,ht,vt){const ft=st.inRange(o.x,o.y,$);if(_&&!ft)return;const pt=st.getCenterPoint($);if(!_isPointInArea(pt,i.chartArea,i._minPadding)&&!ft)return;const yt=tt(o,pt);yt<j?(et=[{element:st,datasetIndex:ht,index:vt}],j=yt):yt===j&&et.push({element:st,datasetIndex:ht,index:vt})}return optimizedEvaluateItems(i,s,o,it),et}function getNearestItems(i,o,s,_,$){return _isPointInArea(o,i.chartArea,i._minPadding)?s==="r"&&!_?getNearestRadialItems(i,o,s,$):getNearestCartesianItems(i,o,s,_,$):[]}function getAxisItems(i,o,s,_){const $=getRelativePosition(o,i),et=[],tt=s.axis,j=tt==="x"?"inXRange":"inYRange";let it=!1;return evaluateAllVisibleItems(i,(st,ht,vt)=>{st[j]($[tt],_)&&et.push({element:st,datasetIndex:ht,index:vt}),st.inRange($.x,$.y,_)&&(it=!0)}),s.intersect&&!it?[]:et}var Interaction={modes:{index(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"x",tt=s.intersect?getIntersectItems(i,$,et,_):getNearestItems(i,$,et,!1,_),j=[];return tt.length?(i.getSortedVisibleDatasetMetas().forEach(it=>{const st=tt[0].index,ht=it.data[st];ht&&!ht.skip&&j.push({element:ht,datasetIndex:it.index,index:st})}),j):[]},dataset(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"xy";let tt=s.intersect?getIntersectItems(i,$,et,_):getNearestItems(i,$,et,!1,_);if(tt.length>0){const j=tt[0].datasetIndex,it=i.getDatasetMeta(j).data;tt=[];for(let st=0;st<it.length;++st)tt.push({element:it[st],datasetIndex:j,index:st})}return tt},point(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"xy";return getIntersectItems(i,$,et,_)},nearest(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"xy";return getNearestItems(i,$,et,s.intersect,_)},x(i,o,s,_){return getAxisItems(i,o,{axis:"x",intersect:s.intersect},_)},y(i,o,s,_){return getAxisItems(i,o,{axis:"y",intersect:s.intersect},_)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(i,o){return i.filter(s=>s.pos===o)}function filterDynamicPositionByAxis(i,o){return i.filter(s=>STATIC_POSITIONS.indexOf(s.pos)===-1&&s.box.axis===o)}function sortByWeight(i,o){return i.sort((s,_)=>{const $=o?_:s,et=o?s:_;return $.weight===et.weight?$.index-et.index:$.weight-et.weight})}function wrapBoxes(i){const o=[];let s,_,$,et,tt,j;for(s=0,_=(i||[]).length;s<_;++s)$=i[s],{position:et,options:{stack:tt,stackWeight:j=1}}=$,o.push({index:s,box:$,pos:et,horizontal:$.isHorizontal(),weight:$.weight,stack:tt&&et+tt,stackWeight:j});return o}function buildStacks(i){const o={};for(const s of i){const{stack:_,pos:$,stackWeight:et}=s;if(!_||!STATIC_POSITIONS.includes($))continue;const tt=o[_]||(o[_]={count:0,placed:0,weight:0,size:0});tt.count++,tt.weight+=et}return o}function setLayoutDims(i,o){const s=buildStacks(i),{vBoxMaxWidth:_,hBoxMaxHeight:$}=o;let et,tt,j;for(et=0,tt=i.length;et<tt;++et){j=i[et];const{fullSize:it}=j.box,st=s[j.stack],ht=st&&j.stackWeight/st.weight;j.horizontal?(j.width=ht?ht*_:it&&o.availableWidth,j.height=$):(j.width=_,j.height=ht?ht*$:it&&o.availableHeight)}return s}function buildLayoutBoxes(i){const o=wrapBoxes(i),s=sortByWeight(o.filter(st=>st.box.fullSize),!0),_=sortByWeight(filterByPosition(o,"left"),!0),$=sortByWeight(filterByPosition(o,"right")),et=sortByWeight(filterByPosition(o,"top"),!0),tt=sortByWeight(filterByPosition(o,"bottom")),j=filterDynamicPositionByAxis(o,"x"),it=filterDynamicPositionByAxis(o,"y");return{fullSize:s,leftAndTop:_.concat(et),rightAndBottom:$.concat(it).concat(tt).concat(j),chartArea:filterByPosition(o,"chartArea"),vertical:_.concat($).concat(it),horizontal:et.concat(tt).concat(j)}}function getCombinedMax(i,o,s,_){return Math.max(i[s],o[s])+Math.max(i[_],o[_])}function updateMaxPadding(i,o){i.top=Math.max(i.top,o.top),i.left=Math.max(i.left,o.left),i.bottom=Math.max(i.bottom,o.bottom),i.right=Math.max(i.right,o.right)}function updateDims(i,o,s,_){const{pos:$,box:et}=s,tt=i.maxPadding;if(!isObject($)){s.size&&(i[$]-=s.size);const vt=_[s.stack]||{size:0,count:1};vt.size=Math.max(vt.size,s.horizontal?et.height:et.width),s.size=vt.size/vt.count,i[$]+=s.size}et.getPadding&&updateMaxPadding(tt,et.getPadding());const j=Math.max(0,o.outerWidth-getCombinedMax(tt,i,"left","right")),it=Math.max(0,o.outerHeight-getCombinedMax(tt,i,"top","bottom")),st=j!==i.w,ht=it!==i.h;return i.w=j,i.h=it,s.horizontal?{same:st,other:ht}:{same:ht,other:st}}function handleMaxPadding(i){const o=i.maxPadding;function s(_){const $=Math.max(o[_]-i[_],0);return i[_]+=$,$}i.y+=s("top"),i.x+=s("left"),s("right"),s("bottom")}function getMargins(i,o){const s=o.maxPadding;function _($){const et={left:0,top:0,right:0,bottom:0};return $.forEach(tt=>{et[tt]=Math.max(o[tt],s[tt])}),et}return _(i?["left","right"]:["top","bottom"])}function fitBoxes(i,o,s,_){const $=[];let et,tt,j,it,st,ht;for(et=0,tt=i.length,st=0;et<tt;++et){j=i[et],it=j.box,it.update(j.width||o.w,j.height||o.h,getMargins(j.horizontal,o));const{same:vt,other:ft}=updateDims(o,s,j,_);st|=vt&&$.length,ht=ht||ft,it.fullSize||$.push(j)}return st&&fitBoxes($,o,s,_)||ht}function setBoxDims(i,o,s,_,$){i.top=s,i.left=o,i.right=o+_,i.bottom=s+$,i.width=_,i.height=$}function placeBoxes(i,o,s,_){const $=s.padding;let{x:et,y:tt}=o;for(const j of i){const it=j.box,st=_[j.stack]||{count:1,placed:0,weight:1},ht=j.stackWeight/st.weight||1;if(j.horizontal){const vt=o.w*ht,ft=st.size||it.height;defined(st.start)&&(tt=st.start),it.fullSize?setBoxDims(it,$.left,tt,s.outerWidth-$.right-$.left,ft):setBoxDims(it,o.left+st.placed,tt,vt,ft),st.start=tt,st.placed+=vt,tt=it.bottom}else{const vt=o.h*ht,ft=st.size||it.width;defined(st.start)&&(et=st.start),it.fullSize?setBoxDims(it,et,$.top,ft,s.outerHeight-$.bottom-$.top):setBoxDims(it,et,o.top+st.placed,ft,vt),st.start=et,st.placed+=vt,et=it.right}}o.x=et,o.y=tt}defaults.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var layouts={addBox(i,o){i.boxes||(i.boxes=[]),o.fullSize=o.fullSize||!1,o.position=o.position||"top",o.weight=o.weight||0,o._layers=o._layers||function(){return[{z:0,draw(s){o.draw(s)}}]},i.boxes.push(o)},removeBox(i,o){const s=i.boxes?i.boxes.indexOf(o):-1;s!==-1&&i.boxes.splice(s,1)},configure(i,o,s){o.fullSize=s.fullSize,o.position=s.position,o.weight=s.weight},update(i,o,s,_){if(!i)return;const $=toPadding(i.options.layout.padding),et=Math.max(o-$.width,0),tt=Math.max(s-$.height,0),j=buildLayoutBoxes(i.boxes),it=j.vertical,st=j.horizontal;each(i.boxes,yt=>{typeof yt.beforeLayout=="function"&&yt.beforeLayout()});const ht=it.reduce((yt,Et)=>Et.box.options&&Et.box.options.display===!1?yt:yt+1,0)||1,vt=Object.freeze({outerWidth:o,outerHeight:s,padding:$,availableWidth:et,availableHeight:tt,vBoxMaxWidth:et/2/ht,hBoxMaxHeight:tt/2}),ft=Object.assign({},$);updateMaxPadding(ft,toPadding(_));const pt=Object.assign({maxPadding:ft,w:et,h:tt,x:$.left,y:$.top},$),ct=setLayoutDims(it.concat(st),vt);fitBoxes(j.fullSize,pt,vt,ct),fitBoxes(it,pt,vt,ct),fitBoxes(st,pt,vt,ct)&&fitBoxes(it,pt,vt,ct),handleMaxPadding(pt),placeBoxes(j.leftAndTop,pt,vt,ct),pt.x+=pt.w,pt.y+=pt.h,placeBoxes(j.rightAndBottom,pt,vt,ct),i.chartArea={left:pt.left,top:pt.top,right:pt.left+pt.w,bottom:pt.top+pt.h,height:pt.h,width:pt.w},each(j.chartArea,yt=>{const Et=yt.box;Object.assign(Et,i.chartArea),Et.update(pt.w,pt.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(o,s){}releaseContext(o){return!1}addEventListener(o,s,_){}removeEventListener(o,s,_){}getDevicePixelRatio(){return 1}getMaximumSize(o,s,_,$){return s=Math.max(0,s||o.width),_=_||o.height,{width:s,height:Math.max(0,$?Math.floor(s/$):_)}}isAttached(o){return!0}updateConfig(o){}}class BasicPlatform extends BasePlatform{acquireContext(o){return o&&o.getContext&&o.getContext("2d")||null}updateConfig(o){o.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=i=>i===null||i==="";function initCanvas(i,o){const s=i.style,_=i.getAttribute("height"),$=i.getAttribute("width");if(i[EXPANDO_KEY]={initial:{height:_,width:$,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",isNullOrEmpty($)){const et=readUsedSize(i,"width");et!==void 0&&(i.width=et)}if(isNullOrEmpty(_))if(i.style.height==="")i.height=i.width/(o||2);else{const et=readUsedSize(i,"height");et!==void 0&&(i.height=et)}return i}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(i,o,s){i.addEventListener(o,s,eventListenerOptions)}function removeListener(i,o,s){i.canvas.removeEventListener(o,s,eventListenerOptions)}function fromNativeEvent(i,o){const s=EVENT_TYPES[i.type]||i.type,{x:_,y:$}=getRelativePosition$1(i,o);return{type:s,chart:o,native:i,x:_!==void 0?_:null,y:$!==void 0?$:null}}function nodeListContains(i,o){for(const s of i)if(s===o||s.contains(o))return!0}function createAttachObserver(i,o,s){const _=i.canvas,$=new MutationObserver(et=>{let tt=!1;for(const j of et)tt=tt||nodeListContains(j.addedNodes,_),tt=tt&&!nodeListContains(j.removedNodes,_);tt&&s()});return $.observe(document,{childList:!0,subtree:!0}),$}function createDetachObserver(i,o,s){const _=i.canvas,$=new MutationObserver(et=>{let tt=!1;for(const j of et)tt=tt||nodeListContains(j.removedNodes,_),tt=tt&&!nodeListContains(j.addedNodes,_);tt&&s()});return $.observe(document,{childList:!0,subtree:!0}),$}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const i=window.devicePixelRatio;i!==oldDevicePixelRatio&&(oldDevicePixelRatio=i,drpListeningCharts.forEach((o,s)=>{s.currentDevicePixelRatio!==i&&o()}))}function listenDevicePixelRatioChanges(i,o){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(i,o)}function unlistenDevicePixelRatioChanges(i){drpListeningCharts.delete(i),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(i,o,s){const _=i.canvas,$=_&&_getParentNode(_);if(!$)return;const et=throttled((j,it)=>{const st=$.clientWidth;s(j,it),st<$.clientWidth&&s()},window),tt=new ResizeObserver(j=>{const it=j[0],st=it.contentRect.width,ht=it.contentRect.height;st===0&&ht===0||et(st,ht)});return tt.observe($),listenDevicePixelRatioChanges(i,et),tt}function releaseObserver(i,o,s){s&&s.disconnect(),o==="resize"&&unlistenDevicePixelRatioChanges(i)}function createProxyAndListen(i,o,s){const _=i.canvas,$=throttled(et=>{i.ctx!==null&&s(fromNativeEvent(et,i))},i,et=>{const tt=et[0];return[tt,tt.offsetX,tt.offsetY]});return addListener(_,o,$),$}class DomPlatform extends BasePlatform{acquireContext(o,s){const _=o&&o.getContext&&o.getContext("2d");return _&&_.canvas===o?(initCanvas(o,s),_):null}releaseContext(o){const s=o.canvas;if(!s[EXPANDO_KEY])return!1;const _=s[EXPANDO_KEY].initial;["height","width"].forEach(et=>{const tt=_[et];isNullOrUndef(tt)?s.removeAttribute(et):s.setAttribute(et,tt)});const $=_.style||{};return Object.keys($).forEach(et=>{s.style[et]=$[et]}),s.width=s.width,delete s[EXPANDO_KEY],!0}addEventListener(o,s,_){this.removeEventListener(o,s);const $=o.$proxies||(o.$proxies={}),tt={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[s]||createProxyAndListen;$[s]=tt(o,s,_)}removeEventListener(o,s){const _=o.$proxies||(o.$proxies={}),$=_[s];if(!$)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[s]||removeListener)(o,s,$),_[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(o,s,_,$){return getMaximumSize(o,s,_,$)}isAttached(o){const s=_getParentNode(o);return!!(s&&s.isConnected)}}function _detectPlatform(i){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?BasicPlatform:DomPlatform}class Element{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(o){const{x:s,y:_}=this.getProps(["x","y"],o);return{x:s,y:_}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(o,s){const _=this.$animations;if(!s||!_)return this;const $={};return o.forEach(et=>{$[et]=_[et]&&_[et].active()?_[et]._to:this[et]}),$}}Element.defaults={};Element.defaultRoutes=void 0;const formatters={values(i){return isArray(i)?i:""+i},numeric(i,o,s){if(i===0)return"0";const _=this.chart.options.locale;let $,et=i;if(s.length>1){const st=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(st<1e-4||st>1e15)&&($="scientific"),et=calculateDelta(i,s)}const tt=log10(Math.abs(et)),j=Math.max(Math.min(-1*Math.floor(tt),20),0),it={notation:$,minimumFractionDigits:j,maximumFractionDigits:j};return Object.assign(it,this.options.ticks.format),formatNumber(i,_,it)},logarithmic(i,o,s){if(i===0)return"0";const _=i/Math.pow(10,Math.floor(log10(i)));return _===1||_===2||_===5?formatters.numeric.call(this,i,o,s):""}};function calculateDelta(i,o){let s=o.length>3?o[2].value-o[1].value:o[1].value-o[0].value;return Math.abs(s)>=1&&i!==Math.floor(i)&&(s=i-Math.floor(i)),s}var Ticks={formatters};defaults.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,o)=>o.lineWidth,tickColor:(i,o)=>o.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});defaults.route("scale.ticks","color","","color");defaults.route("scale.grid","color","","borderColor");defaults.route("scale.grid","borderColor","","borderColor");defaults.route("scale.title","color","","color");defaults.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&i!=="callback"&&i!=="parser",_indexable:i=>i!=="borderDash"&&i!=="tickBorderDash"});defaults.describe("scales",{_fallback:"scale"});defaults.describe("scale.ticks",{_scriptable:i=>i!=="backdropPadding"&&i!=="callback",_indexable:i=>i!=="backdropPadding"});function autoSkip(i,o){const s=i.options.ticks,_=s.maxTicksLimit||determineMaxTicks(i),$=s.major.enabled?getMajorIndices(o):[],et=$.length,tt=$[0],j=$[et-1],it=[];if(et>_)return skipMajors(o,it,$,et/_),it;const st=calculateSpacing($,o,_);if(et>0){let ht,vt;const ft=et>1?Math.round((j-tt)/(et-1)):null;for(skip(o,it,st,isNullOrUndef(ft)?0:tt-ft,tt),ht=0,vt=et-1;ht<vt;ht++)skip(o,it,st,$[ht],$[ht+1]);return skip(o,it,st,j,isNullOrUndef(ft)?o.length:j+ft),it}return skip(o,it,st),it}function determineMaxTicks(i){const o=i.options.offset,s=i._tickSize(),_=i._length/s+(o?0:1),$=i._maxLength/s;return Math.floor(Math.min(_,$))}function calculateSpacing(i,o,s){const _=getEvenSpacing(i),$=o.length/s;if(!_)return Math.max($,1);const et=_factorize(_);for(let tt=0,j=et.length-1;tt<j;tt++){const it=et[tt];if(it>$)return it}return Math.max($,1)}function getMajorIndices(i){const o=[];let s,_;for(s=0,_=i.length;s<_;s++)i[s].major&&o.push(s);return o}function skipMajors(i,o,s,_){let $=0,et=s[0],tt;for(_=Math.ceil(_),tt=0;tt<i.length;tt++)tt===et&&(o.push(i[tt]),$++,et=s[$*_])}function skip(i,o,s,_,$){const et=valueOrDefault(_,0),tt=Math.min(valueOrDefault($,i.length),i.length);let j=0,it,st,ht;for(s=Math.ceil(s),$&&(it=$-_,s=it/Math.floor(it/s)),ht=et;ht<0;)j++,ht=Math.round(et+j*s);for(st=Math.max(et,0);st<tt;st++)st===ht&&(o.push(i[st]),j++,ht=Math.round(et+j*s))}function getEvenSpacing(i){const o=i.length;let s,_;if(o<2)return!1;for(_=i[0],s=1;s<o;++s)if(i[s]-i[s-1]!==_)return!1;return _}const reverseAlign=i=>i==="left"?"right":i==="right"?"left":i,offsetFromEdge=(i,o,s)=>o==="top"||o==="left"?i[o]+s:i[o]-s;function sample(i,o){const s=[],_=i.length/o,$=i.length;let et=0;for(;et<$;et+=_)s.push(i[Math.floor(et)]);return s}function getPixelForGridLine(i,o,s){const _=i.ticks.length,$=Math.min(o,_-1),et=i._startPixel,tt=i._endPixel,j=1e-6;let it=i.getPixelForTick($),st;if(!(s&&(_===1?st=Math.max(it-et,tt-it):o===0?st=(i.getPixelForTick(1)-it)/2:st=(it-i.getPixelForTick($-1))/2,it+=$<o?st:-st,it<et-j||it>tt+j)))return it}function garbageCollect(i,o){each(i,s=>{const _=s.gc,$=_.length/2;let et;if($>o){for(et=0;et<$;++et)delete s.data[_[et]];_.splice(0,$)}})}function getTickMarkLength(i){return i.drawTicks?i.tickLength:0}function getTitleHeight(i,o){if(!i.display)return 0;const s=toFont(i.font,o),_=toPadding(i.padding);return(isArray(i.text)?i.text.length:1)*s.lineHeight+_.height}function createScaleContext(i,o){return createContext(i,{scale:o,type:"scale"})}function createTickContext(i,o,s){return createContext(i,{tick:s,index:o,type:"tick"})}function titleAlign(i,o,s){let _=_toLeftRightCenter(i);return(s&&o!=="right"||!s&&o==="right")&&(_=reverseAlign(_)),_}function titleArgs(i,o,s,_){const{top:$,left:et,bottom:tt,right:j,chart:it}=i,{chartArea:st,scales:ht}=it;let vt=0,ft,pt,ct;const yt=tt-$,Et=j-et;if(i.isHorizontal()){if(pt=_alignStartEnd(_,et,j),isObject(s)){const Ot=Object.keys(s)[0],Lt=s[Ot];ct=ht[Ot].getPixelForValue(Lt)+yt-o}else s==="center"?ct=(st.bottom+st.top)/2+yt-o:ct=offsetFromEdge(i,s,o);ft=j-et}else{if(isObject(s)){const Ot=Object.keys(s)[0],Lt=s[Ot];pt=ht[Ot].getPixelForValue(Lt)-Et+o}else s==="center"?pt=(st.left+st.right)/2-Et+o:pt=offsetFromEdge(i,s,o);ct=_alignStartEnd(_,tt,$),vt=s==="left"?-HALF_PI:HALF_PI}return{titleX:pt,titleY:ct,maxWidth:ft,rotation:vt}}class Scale extends Element{constructor(o){super(),this.id=o.id,this.type=o.type,this.options=void 0,this.ctx=o.ctx,this.chart=o.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(o){this.options=o.setContext(this.getContext()),this.axis=o.axis,this._userMin=this.parse(o.min),this._userMax=this.parse(o.max),this._suggestedMin=this.parse(o.suggestedMin),this._suggestedMax=this.parse(o.suggestedMax)}parse(o,s){return o}getUserBounds(){let{_userMin:o,_userMax:s,_suggestedMin:_,_suggestedMax:$}=this;return o=finiteOrDefault(o,Number.POSITIVE_INFINITY),s=finiteOrDefault(s,Number.NEGATIVE_INFINITY),_=finiteOrDefault(_,Number.POSITIVE_INFINITY),$=finiteOrDefault($,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(o,_),max:finiteOrDefault(s,$),minDefined:isNumberFinite(o),maxDefined:isNumberFinite(s)}}getMinMax(o){let{min:s,max:_,minDefined:$,maxDefined:et}=this.getUserBounds(),tt;if($&&et)return{min:s,max:_};const j=this.getMatchingVisibleMetas();for(let it=0,st=j.length;it<st;++it)tt=j[it].controller.getMinMax(this,o),$||(s=Math.min(s,tt.min)),et||(_=Math.max(_,tt.max));return s=et&&s>_?_:s,_=$&&s>_?s:_,{min:finiteOrDefault(s,finiteOrDefault(_,s)),max:finiteOrDefault(_,finiteOrDefault(s,_))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const o=this.chart.data;return this.options.labels||(this.isHorizontal()?o.xLabels:o.yLabels)||o.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(o,s,_){const{beginAtZero:$,grace:et,ticks:tt}=this.options,j=tt.sampleSize;this.beforeUpdate(),this.maxWidth=o,this.maxHeight=s,this._margins=_=Object.assign({left:0,right:0,top:0,bottom:0},_),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+_.left+_.right:this.height+_.top+_.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,et,$),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const it=j<this.ticks.length;this._convertTicksToLabels(it?sample(this.ticks,j):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),tt.display&&(tt.autoSkip||tt.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null),it&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let o=this.options.reverse,s,_;this.isHorizontal()?(s=this.left,_=this.right):(s=this.top,_=this.bottom,o=!o),this._startPixel=s,this._endPixel=_,this._reversePixels=o,this._length=_-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(o){this.chart.notifyPlugins(o,this.getContext()),callback(this.options[o],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(o){const s=this.options.ticks;let _,$,et;for(_=0,$=o.length;_<$;_++)et=o[_],et.label=callback(s.callback,[et.value,_,o],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const o=this.options,s=o.ticks,_=this.ticks.length,$=s.minRotation||0,et=s.maxRotation;let tt=$,j,it,st;if(!this._isVisible()||!s.display||$>=et||_<=1||!this.isHorizontal()){this.labelRotation=$;return}const ht=this._getLabelSizes(),vt=ht.widest.width,ft=ht.highest.height,pt=_limitValue(this.chart.width-vt,0,this.maxWidth);j=o.offset?this.maxWidth/_:pt/(_-1),vt+6>j&&(j=pt/(_-(o.offset?.5:1)),it=this.maxHeight-getTickMarkLength(o.grid)-s.padding-getTitleHeight(o.title,this.chart.options.font),st=Math.sqrt(vt*vt+ft*ft),tt=toDegrees(Math.min(Math.asin(_limitValue((ht.highest.height+6)/j,-1,1)),Math.asin(_limitValue(it/st,-1,1))-Math.asin(_limitValue(ft/st,-1,1)))),tt=Math.max($,Math.min(et,tt))),this.labelRotation=tt}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const o={width:0,height:0},{chart:s,options:{ticks:_,title:$,grid:et}}=this,tt=this._isVisible(),j=this.isHorizontal();if(tt){const it=getTitleHeight($,s.options.font);if(j?(o.width=this.maxWidth,o.height=getTickMarkLength(et)+it):(o.height=this.maxHeight,o.width=getTickMarkLength(et)+it),_.display&&this.ticks.length){const{first:st,last:ht,widest:vt,highest:ft}=this._getLabelSizes(),pt=_.padding*2,ct=toRadians(this.labelRotation),yt=Math.cos(ct),Et=Math.sin(ct);if(j){const Ot=_.mirror?0:Et*vt.width+yt*ft.height;o.height=Math.min(this.maxHeight,o.height+Ot+pt)}else{const Ot=_.mirror?0:yt*vt.width+Et*ft.height;o.width=Math.min(this.maxWidth,o.width+Ot+pt)}this._calculatePadding(st,ht,Et,yt)}}this._handleMargins(),j?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=o.height):(this.width=o.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(o,s,_,$){const{ticks:{align:et,padding:tt},position:j}=this.options,it=this.labelRotation!==0,st=j!=="top"&&this.axis==="x";if(this.isHorizontal()){const ht=this.getPixelForTick(0)-this.left,vt=this.right-this.getPixelForTick(this.ticks.length-1);let ft=0,pt=0;it?st?(ft=$*o.width,pt=_*s.height):(ft=_*o.height,pt=$*s.width):et==="start"?pt=s.width:et==="end"?ft=o.width:(ft=o.width/2,pt=s.width/2),this.paddingLeft=Math.max((ft-ht+tt)*this.width/(this.width-ht),0),this.paddingRight=Math.max((pt-vt+tt)*this.width/(this.width-vt),0)}else{let ht=s.height/2,vt=o.height/2;et==="start"?(ht=0,vt=o.height):et==="end"&&(ht=s.height,vt=0),this.paddingTop=ht+tt,this.paddingBottom=vt+tt}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:o,position:s}=this.options;return s==="top"||s==="bottom"||o==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(o){this.beforeTickToLabelConversion(),this.generateTickLabels(o);let s,_;for(s=0,_=o.length;s<_;s++)isNullOrUndef(o[s].label)&&(o.splice(s,1),_--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let o=this._labelSizes;if(!o){const s=this.options.ticks.sampleSize;let _=this.ticks;s<_.length&&(_=sample(_,s)),this._labelSizes=o=this._computeLabelSizes(_,_.length)}return o}_computeLabelSizes(o,s){const{ctx:_,_longestTextCache:$}=this,et=[],tt=[];let j=0,it=0,st,ht,vt,ft,pt,ct,yt,Et,Ot,Lt,Tt;for(st=0;st<s;++st){if(ft=o[st].label,pt=this._resolveTickFontOptions(st),_.font=ct=pt.string,yt=$[ct]=$[ct]||{data:{},gc:[]},Et=pt.lineHeight,Ot=Lt=0,!isNullOrUndef(ft)&&!isArray(ft))Ot=_measureText(_,yt.data,yt.gc,Ot,ft),Lt=Et;else if(isArray(ft))for(ht=0,vt=ft.length;ht<vt;++ht)Tt=ft[ht],!isNullOrUndef(Tt)&&!isArray(Tt)&&(Ot=_measureText(_,yt.data,yt.gc,Ot,Tt),Lt+=Et);et.push(Ot),tt.push(Lt),j=Math.max(Ot,j),it=Math.max(Lt,it)}garbageCollect($,s);const It=et.indexOf(j),mt=tt.indexOf(it),Bt=nn=>({width:et[nn]||0,height:tt[nn]||0});return{first:Bt(0),last:Bt(s-1),widest:Bt(It),highest:Bt(mt),widths:et,heights:tt}}getLabelForValue(o){return o}getPixelForValue(o,s){return NaN}getValueForPixel(o){}getPixelForTick(o){const s=this.ticks;return o<0||o>s.length-1?null:this.getPixelForValue(s[o].value)}getPixelForDecimal(o){this._reversePixels&&(o=1-o);const s=this._startPixel+o*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,s,0):s)}getDecimalForPixel(o){const s=(o-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:o,max:s}=this;return o<0&&s<0?s:o>0&&s>0?o:0}getContext(o){const s=this.ticks||[];if(o>=0&&o<s.length){const _=s[o];return _.$context||(_.$context=createTickContext(this.getContext(),o,_))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const o=this.options.ticks,s=toRadians(this.labelRotation),_=Math.abs(Math.cos(s)),$=Math.abs(Math.sin(s)),et=this._getLabelSizes(),tt=o.autoSkipPadding||0,j=et?et.widest.width+tt:0,it=et?et.highest.height+tt:0;return this.isHorizontal()?it*_>j*$?j/_:it/$:it*$<j*_?it/_:j/$}_isVisible(){const o=this.options.display;return o!=="auto"?!!o:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(o){const s=this.axis,_=this.chart,$=this.options,{grid:et,position:tt}=$,j=et.offset,it=this.isHorizontal(),ht=this.ticks.length+(j?1:0),vt=getTickMarkLength(et),ft=[],pt=et.setContext(this.getContext()),ct=pt.drawBorder?pt.borderWidth:0,yt=ct/2,Et=function(Gt){return _alignPixel(_,Gt,ct)};let Ot,Lt,Tt,It,mt,Bt,nn,sn,xt,St,Nt,Ct;if(tt==="top")Ot=Et(this.bottom),Bt=this.bottom-vt,sn=Ot-yt,St=Et(o.top)+yt,Ct=o.bottom;else if(tt==="bottom")Ot=Et(this.top),St=o.top,Ct=Et(o.bottom)-yt,Bt=Ot+yt,sn=this.top+vt;else if(tt==="left")Ot=Et(this.right),mt=this.right-vt,nn=Ot-yt,xt=Et(o.left)+yt,Nt=o.right;else if(tt==="right")Ot=Et(this.left),xt=o.left,Nt=Et(o.right)-yt,mt=Ot+yt,nn=this.left+vt;else if(s==="x"){if(tt==="center")Ot=Et((o.top+o.bottom)/2+.5);else if(isObject(tt)){const Gt=Object.keys(tt)[0],Ut=tt[Gt];Ot=Et(this.chart.scales[Gt].getPixelForValue(Ut))}St=o.top,Ct=o.bottom,Bt=Ot+yt,sn=Bt+vt}else if(s==="y"){if(tt==="center")Ot=Et((o.left+o.right)/2);else if(isObject(tt)){const Gt=Object.keys(tt)[0],Ut=tt[Gt];Ot=Et(this.chart.scales[Gt].getPixelForValue(Ut))}mt=Ot-yt,nn=mt-vt,xt=o.left,Nt=o.right}const Vt=valueOrDefault($.ticks.maxTicksLimit,ht),Kt=Math.max(1,Math.ceil(ht/Vt));for(Lt=0;Lt<ht;Lt+=Kt){const Gt=et.setContext(this.getContext(Lt)),Ut=Gt.lineWidth,Ht=Gt.color,qt=et.borderDash||[],Pt=Gt.borderDashOffset,wt=Gt.tickWidth,$t=Gt.tickColor,Xt=Gt.tickBorderDash||[],un=Gt.tickBorderDashOffset;Tt=getPixelForGridLine(this,Lt,j),Tt!==void 0&&(It=_alignPixel(_,Tt,Ut),it?mt=nn=xt=Nt=It:Bt=sn=St=Ct=It,ft.push({tx1:mt,ty1:Bt,tx2:nn,ty2:sn,x1:xt,y1:St,x2:Nt,y2:Ct,width:Ut,color:Ht,borderDash:qt,borderDashOffset:Pt,tickWidth:wt,tickColor:$t,tickBorderDash:Xt,tickBorderDashOffset:un}))}return this._ticksLength=ht,this._borderValue=Ot,ft}_computeLabelItems(o){const s=this.axis,_=this.options,{position:$,ticks:et}=_,tt=this.isHorizontal(),j=this.ticks,{align:it,crossAlign:st,padding:ht,mirror:vt}=et,ft=getTickMarkLength(_.grid),pt=ft+ht,ct=vt?-ht:pt,yt=-toRadians(this.labelRotation),Et=[];let Ot,Lt,Tt,It,mt,Bt,nn,sn,xt,St,Nt,Ct,Vt="middle";if($==="top")Bt=this.bottom-ct,nn=this._getXAxisLabelAlignment();else if($==="bottom")Bt=this.top+ct,nn=this._getXAxisLabelAlignment();else if($==="left"){const Gt=this._getYAxisLabelAlignment(ft);nn=Gt.textAlign,mt=Gt.x}else if($==="right"){const Gt=this._getYAxisLabelAlignment(ft);nn=Gt.textAlign,mt=Gt.x}else if(s==="x"){if($==="center")Bt=(o.top+o.bottom)/2+pt;else if(isObject($)){const Gt=Object.keys($)[0],Ut=$[Gt];Bt=this.chart.scales[Gt].getPixelForValue(Ut)+pt}nn=this._getXAxisLabelAlignment()}else if(s==="y"){if($==="center")mt=(o.left+o.right)/2-pt;else if(isObject($)){const Gt=Object.keys($)[0],Ut=$[Gt];mt=this.chart.scales[Gt].getPixelForValue(Ut)}nn=this._getYAxisLabelAlignment(ft).textAlign}s==="y"&&(it==="start"?Vt="top":it==="end"&&(Vt="bottom"));const Kt=this._getLabelSizes();for(Ot=0,Lt=j.length;Ot<Lt;++Ot){Tt=j[Ot],It=Tt.label;const Gt=et.setContext(this.getContext(Ot));sn=this.getPixelForTick(Ot)+et.labelOffset,xt=this._resolveTickFontOptions(Ot),St=xt.lineHeight,Nt=isArray(It)?It.length:1;const Ut=Nt/2,Ht=Gt.color,qt=Gt.textStrokeColor,Pt=Gt.textStrokeWidth;tt?(mt=sn,$==="top"?st==="near"||yt!==0?Ct=-Nt*St+St/2:st==="center"?Ct=-Kt.highest.height/2-Ut*St+St:Ct=-Kt.highest.height+St/2:st==="near"||yt!==0?Ct=St/2:st==="center"?Ct=Kt.highest.height/2-Ut*St:Ct=Kt.highest.height-Nt*St,vt&&(Ct*=-1)):(Bt=sn,Ct=(1-Nt)*St/2);let wt;if(Gt.showLabelBackdrop){const $t=toPadding(Gt.backdropPadding),Xt=Kt.heights[Ot],un=Kt.widths[Ot];let dn=Bt+Ct-$t.top,mn=mt-$t.left;switch(Vt){case"middle":dn-=Xt/2;break;case"bottom":dn-=Xt;break}switch(nn){case"center":mn-=un/2;break;case"right":mn-=un;break}wt={left:mn,top:dn,width:un+$t.width,height:Xt+$t.height,color:Gt.backdropColor}}Et.push({rotation:yt,label:It,font:xt,color:Ht,strokeColor:qt,strokeWidth:Pt,textOffset:Ct,textAlign:nn,textBaseline:Vt,translation:[mt,Bt],backdrop:wt})}return Et}_getXAxisLabelAlignment(){const{position:o,ticks:s}=this.options;if(-toRadians(this.labelRotation))return o==="top"?"left":"right";let $="center";return s.align==="start"?$="left":s.align==="end"&&($="right"),$}_getYAxisLabelAlignment(o){const{position:s,ticks:{crossAlign:_,mirror:$,padding:et}}=this.options,tt=this._getLabelSizes(),j=o+et,it=tt.widest.width;let st,ht;return s==="left"?$?(ht=this.right+et,_==="near"?st="left":_==="center"?(st="center",ht+=it/2):(st="right",ht+=it)):(ht=this.right-j,_==="near"?st="right":_==="center"?(st="center",ht-=it/2):(st="left",ht=this.left)):s==="right"?$?(ht=this.left+et,_==="near"?st="right":_==="center"?(st="center",ht-=it/2):(st="left",ht-=it)):(ht=this.left+j,_==="near"?st="left":_==="center"?(st="center",ht+=it/2):(st="right",ht=this.right)):st="right",{textAlign:st,x:ht}}_computeLabelArea(){if(this.options.ticks.mirror)return;const o=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:o.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:o.width}}drawBackground(){const{ctx:o,options:{backgroundColor:s},left:_,top:$,width:et,height:tt}=this;s&&(o.save(),o.fillStyle=s,o.fillRect(_,$,et,tt),o.restore())}getLineWidthForValue(o){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const $=this.ticks.findIndex(et=>et.value===o);return $>=0?s.setContext(this.getContext($)).lineWidth:0}drawGrid(o){const s=this.options.grid,_=this.ctx,$=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(o));let et,tt;const j=(it,st,ht)=>{!ht.width||!ht.color||(_.save(),_.lineWidth=ht.width,_.strokeStyle=ht.color,_.setLineDash(ht.borderDash||[]),_.lineDashOffset=ht.borderDashOffset,_.beginPath(),_.moveTo(it.x,it.y),_.lineTo(st.x,st.y),_.stroke(),_.restore())};if(s.display)for(et=0,tt=$.length;et<tt;++et){const it=$[et];s.drawOnChartArea&&j({x:it.x1,y:it.y1},{x:it.x2,y:it.y2},it),s.drawTicks&&j({x:it.tx1,y:it.ty1},{x:it.tx2,y:it.ty2},{color:it.tickColor,width:it.tickWidth,borderDash:it.tickBorderDash,borderDashOffset:it.tickBorderDashOffset})}}drawBorder(){const{chart:o,ctx:s,options:{grid:_}}=this,$=_.setContext(this.getContext()),et=_.drawBorder?$.borderWidth:0;if(!et)return;const tt=_.setContext(this.getContext(0)).lineWidth,j=this._borderValue;let it,st,ht,vt;this.isHorizontal()?(it=_alignPixel(o,this.left,et)-et/2,st=_alignPixel(o,this.right,tt)+tt/2,ht=vt=j):(ht=_alignPixel(o,this.top,et)-et/2,vt=_alignPixel(o,this.bottom,tt)+tt/2,it=st=j),s.save(),s.lineWidth=$.borderWidth,s.strokeStyle=$.borderColor,s.beginPath(),s.moveTo(it,ht),s.lineTo(st,vt),s.stroke(),s.restore()}drawLabels(o){if(!this.options.ticks.display)return;const _=this.ctx,$=this._computeLabelArea();$&&clipArea(_,$);const et=this._labelItems||(this._labelItems=this._computeLabelItems(o));let tt,j;for(tt=0,j=et.length;tt<j;++tt){const it=et[tt],st=it.font,ht=it.label;it.backdrop&&(_.fillStyle=it.backdrop.color,_.fillRect(it.backdrop.left,it.backdrop.top,it.backdrop.width,it.backdrop.height));let vt=it.textOffset;renderText(_,ht,0,vt,st,it)}$&&unclipArea(_)}drawTitle(){const{ctx:o,options:{position:s,title:_,reverse:$}}=this;if(!_.display)return;const et=toFont(_.font),tt=toPadding(_.padding),j=_.align;let it=et.lineHeight/2;s==="bottom"||s==="center"||isObject(s)?(it+=tt.bottom,isArray(_.text)&&(it+=et.lineHeight*(_.text.length-1))):it+=tt.top;const{titleX:st,titleY:ht,maxWidth:vt,rotation:ft}=titleArgs(this,it,s,j);renderText(o,_.text,0,0,et,{color:_.color,maxWidth:vt,rotation:ft,textAlign:titleAlign(j,s,$),textBaseline:"middle",translation:[st,ht]})}draw(o){this._isVisible()&&(this.drawBackground(),this.drawGrid(o),this.drawBorder(),this.drawTitle(),this.drawLabels(o))}_layers(){const o=this.options,s=o.ticks&&o.ticks.z||0,_=valueOrDefault(o.grid&&o.grid.z,-1);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:s,draw:$=>{this.draw($)}}]:[{z:_,draw:$=>{this.drawBackground(),this.drawGrid($),this.drawTitle()}},{z:_+1,draw:()=>{this.drawBorder()}},{z:s,draw:$=>{this.drawLabels($)}}]}getMatchingVisibleMetas(o){const s=this.chart.getSortedVisibleDatasetMetas(),_=this.axis+"AxisID",$=[];let et,tt;for(et=0,tt=s.length;et<tt;++et){const j=s[et];j[_]===this.id&&(!o||j.type===o)&&$.push(j)}return $}_resolveTickFontOptions(o){const s=this.options.ticks.setContext(this.getContext(o));return toFont(s.font)}_maxDigits(){const o=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/o}}class TypedRegistry{constructor(o,s,_){this.type=o,this.scope=s,this.override=_,this.items=Object.create(null)}isForType(o){return Object.prototype.isPrototypeOf.call(this.type.prototype,o.prototype)}register(o){const s=Object.getPrototypeOf(o);let _;isIChartComponent(s)&&(_=this.register(s));const $=this.items,et=o.id,tt=this.scope+"."+et;if(!et)throw new Error("class does not have id: "+o);return et in $||($[et]=o,registerDefaults(o,tt,_),this.override&&defaults.override(o.id,o.overrides)),tt}get(o){return this.items[o]}unregister(o){const s=this.items,_=o.id,$=this.scope;_ in s&&delete s[_],$&&_ in defaults[$]&&(delete defaults[$][_],this.override&&delete overrides[_])}}function registerDefaults(i,o,s){const _=merge(Object.create(null),[s?defaults.get(s):{},defaults.get(o),i.defaults]);defaults.set(o,_),i.defaultRoutes&&routeDefaults(o,i.defaultRoutes),i.descriptors&&defaults.describe(o,i.descriptors)}function routeDefaults(i,o){Object.keys(o).forEach(s=>{const _=s.split("."),$=_.pop(),et=[i].concat(_).join("."),tt=o[s].split("."),j=tt.pop(),it=tt.join(".");defaults.route(et,$,it,j)})}function isIChartComponent(i){return"id"in i&&"defaults"in i}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...o){this._each("register",o)}remove(...o){this._each("unregister",o)}addControllers(...o){this._each("register",o,this.controllers)}addElements(...o){this._each("register",o,this.elements)}addPlugins(...o){this._each("register",o,this.plugins)}addScales(...o){this._each("register",o,this.scales)}getController(o){return this._get(o,this.controllers,"controller")}getElement(o){return this._get(o,this.elements,"element")}getPlugin(o){return this._get(o,this.plugins,"plugin")}getScale(o){return this._get(o,this.scales,"scale")}removeControllers(...o){this._each("unregister",o,this.controllers)}removeElements(...o){this._each("unregister",o,this.elements)}removePlugins(...o){this._each("unregister",o,this.plugins)}removeScales(...o){this._each("unregister",o,this.scales)}_each(o,s,_){[...s].forEach($=>{const et=_||this._getRegistryForType($);_||et.isForType($)||et===this.plugins&&$.id?this._exec(o,et,$):each($,tt=>{const j=_||this._getRegistryForType(tt);this._exec(o,j,tt)})})}_exec(o,s,_){const $=_capitalize(o);callback(_["before"+$],[],_),s[o](_),callback(_["after"+$],[],_)}_getRegistryForType(o){for(let s=0;s<this._typedRegistries.length;s++){const _=this._typedRegistries[s];if(_.isForType(o))return _}return this.plugins}_get(o,s,_){const $=s.get(o);if($===void 0)throw new Error('"'+o+'" is not a registered '+_+".");return $}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(o,s,_,$){s==="beforeInit"&&(this._init=this._createDescriptors(o,!0),this._notify(this._init,o,"install"));const et=$?this._descriptors(o).filter($):this._descriptors(o),tt=this._notify(et,o,s,_);return s==="afterDestroy"&&(this._notify(et,o,"stop"),this._notify(this._init,o,"uninstall")),tt}_notify(o,s,_,$){$=$||{};for(const et of o){const tt=et.plugin,j=tt[_],it=[s,$,et.options];if(callback(j,it,tt)===!1&&$.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(o){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(o);return this._notifyStateChanges(o),s}_createDescriptors(o,s){const _=o&&o.config,$=valueOrDefault(_.options&&_.options.plugins,{}),et=allPlugins(_);return $===!1&&!s?[]:createDescriptors(o,et,$,s)}_notifyStateChanges(o){const s=this._oldCache||[],_=this._cache,$=(et,tt)=>et.filter(j=>!tt.some(it=>j.plugin.id===it.plugin.id));this._notify($(s,_),o,"stop"),this._notify($(_,s),o,"start")}}function allPlugins(i){const o=[],s=Object.keys(registry.plugins.items);for(let $=0;$<s.length;$++)o.push(registry.getPlugin(s[$]));const _=i.plugins||[];for(let $=0;$<_.length;$++){const et=_[$];o.indexOf(et)===-1&&o.push(et)}return o}function getOpts(i,o){return!o&&i===!1?null:i===!0?{}:i}function createDescriptors(i,o,s,_){const $=[],et=i.getContext();for(let tt=0;tt<o.length;tt++){const j=o[tt],it=j.id,st=getOpts(s[it],_);st!==null&&$.push({plugin:j,options:pluginOpts(i.config,j,st,et)})}return $}function pluginOpts(i,o,s,_){const $=i.pluginScopeKeys(o),et=i.getOptionScopes(s,$);return i.createResolver(et,_,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(i,o){const s=defaults.datasets[i]||{};return((o.datasets||{})[i]||{}).indexAxis||o.indexAxis||s.indexAxis||"x"}function getAxisFromDefaultScaleID(i,o){let s=i;return i==="_index_"?s=o:i==="_value_"&&(s=o==="x"?"y":"x"),s}function getDefaultScaleIDFromAxis(i,o){return i===o?"_index_":"_value_"}function axisFromPosition(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function determineAxis(i,o){return i==="x"||i==="y"?i:o.axis||axisFromPosition(o.position)||i.charAt(0).toLowerCase()}function mergeScaleConfig(i,o){const s=overrides[i.type]||{scales:{}},_=o.scales||{},$=getIndexAxis(i.type,o),et=Object.create(null),tt=Object.create(null);return Object.keys(_).forEach(j=>{const it=_[j];if(!isObject(it))return console.error(`Invalid scale configuration for scale: ${j}`);if(it._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${j}`);const st=determineAxis(j,it),ht=getDefaultScaleIDFromAxis(st,$),vt=s.scales||{};et[st]=et[st]||j,tt[j]=mergeIf(Object.create(null),[{axis:st},it,vt[st],vt[ht]])}),i.data.datasets.forEach(j=>{const it=j.type||i.type,st=j.indexAxis||getIndexAxis(it,o),vt=(overrides[it]||{}).scales||{};Object.keys(vt).forEach(ft=>{const pt=getAxisFromDefaultScaleID(ft,st),ct=j[pt+"AxisID"]||et[pt]||pt;tt[ct]=tt[ct]||Object.create(null),mergeIf(tt[ct],[{axis:pt},_[ct],vt[ft]])})}),Object.keys(tt).forEach(j=>{const it=tt[j];mergeIf(it,[defaults.scales[it.type],defaults.scale])}),tt}function initOptions(i){const o=i.options||(i.options={});o.plugins=valueOrDefault(o.plugins,{}),o.scales=mergeScaleConfig(i,o)}function initData(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function initConfig(i){return i=i||{},i.data=initData(i.data),initOptions(i),i}const keyCache=new Map,keysCached=new Set;function cachedKeys(i,o){let s=keyCache.get(i);return s||(s=o(),keyCache.set(i,s),keysCached.add(s)),s}const addIfFound=(i,o,s)=>{const _=resolveObjectKey(o,s);_!==void 0&&i.add(_)};class Config{constructor(o){this._config=initConfig(o),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(o){this._config.type=o}get data(){return this._config.data}set data(o){this._config.data=initData(o)}get options(){return this._config.options}set options(o){this._config.options=o}get plugins(){return this._config.plugins}update(){const o=this._config;this.clearCache(),initOptions(o)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(o){return cachedKeys(o,()=>[[`datasets.${o}`,""]])}datasetAnimationScopeKeys(o,s){return cachedKeys(`${o}.transition.${s}`,()=>[[`datasets.${o}.transitions.${s}`,`transitions.${s}`],[`datasets.${o}`,""]])}datasetElementScopeKeys(o,s){return cachedKeys(`${o}-${s}`,()=>[[`datasets.${o}.elements.${s}`,`datasets.${o}`,`elements.${s}`,""]])}pluginScopeKeys(o){const s=o.id,_=this.type;return cachedKeys(`${_}-plugin-${s}`,()=>[[`plugins.${s}`,...o.additionalOptionScopes||[]]])}_cachedScopes(o,s){const _=this._scopeCache;let $=_.get(o);return(!$||s)&&($=new Map,_.set(o,$)),$}getOptionScopes(o,s,_){const{options:$,type:et}=this,tt=this._cachedScopes(o,_),j=tt.get(s);if(j)return j;const it=new Set;s.forEach(ht=>{o&&(it.add(o),ht.forEach(vt=>addIfFound(it,o,vt))),ht.forEach(vt=>addIfFound(it,$,vt)),ht.forEach(vt=>addIfFound(it,overrides[et]||{},vt)),ht.forEach(vt=>addIfFound(it,defaults,vt)),ht.forEach(vt=>addIfFound(it,descriptors,vt))});const st=Array.from(it);return st.length===0&&st.push(Object.create(null)),keysCached.has(s)&&tt.set(s,st),st}chartOptionScopes(){const{options:o,type:s}=this;return[o,overrides[s]||{},defaults.datasets[s]||{},{type:s},defaults,descriptors]}resolveNamedOptions(o,s,_,$=[""]){const et={$shared:!0},{resolver:tt,subPrefixes:j}=getResolver(this._resolverCache,o,$);let it=tt;if(needContext(tt,s)){et.$shared=!1,_=isFunction(_)?_():_;const st=this.createResolver(o,_,j);it=_attachContext(tt,_,st)}for(const st of s)et[st]=it[st];return et}createResolver(o,s,_=[""],$){const{resolver:et}=getResolver(this._resolverCache,o,_);return isObject(s)?_attachContext(et,s,void 0,$):et}}function getResolver(i,o,s){let _=i.get(o);_||(_=new Map,i.set(o,_));const $=s.join();let et=_.get($);return et||(et={resolver:_createResolver(o,s),subPrefixes:s.filter(j=>!j.toLowerCase().includes("hover"))},_.set($,et)),et}const hasFunction=i=>isObject(i)&&Object.getOwnPropertyNames(i).reduce((o,s)=>o||isFunction(i[s]),!1);function needContext(i,o){const{isScriptable:s,isIndexable:_}=_descriptors(i);for(const $ of o){const et=s($),tt=_($),j=(tt||et)&&i[$];if(et&&(isFunction(j)||hasFunction(j))||tt&&isArray(j))return!0}return!1}var version="3.7.1";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(i,o){return i==="top"||i==="bottom"||KNOWN_POSITIONS.indexOf(i)===-1&&o==="x"}function compare2Level(i,o){return function(s,_){return s[i]===_[i]?s[o]-_[o]:s[i]-_[i]}}function onAnimationsComplete(i){const o=i.chart,s=o.options.animation;o.notifyPlugins("afterRender"),callback(s&&s.onComplete,[i],o)}function onAnimationProgress(i){const o=i.chart,s=o.options.animation;callback(s&&s.onProgress,[i],o)}function getCanvas(i){return _isDomSupported()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const instances={},getChart=i=>{const o=getCanvas(i);return Object.values(instances).filter(s=>s.canvas===o).pop()};function moveNumericKeys(i,o,s){const _=Object.keys(i);for(const $ of _){const et=+$;if(et>=o){const tt=i[$];delete i[$],(s>0||et>o)&&(i[et+s]=tt)}}}function determineLastEvent(i,o,s,_){return!s||i.type==="mouseout"?null:_?o:i}class Chart$1{constructor(o,s){const _=this.config=new Config(s),$=getCanvas(o),et=getChart($);if(et)throw new Error("Canvas is already in use. Chart with ID '"+et.id+"' must be destroyed before the canvas can be reused.");const tt=_.createResolver(_.chartOptionScopes(),this.getContext());this.platform=new(_.platform||_detectPlatform($)),this.platform.updateConfig(_);const j=this.platform.acquireContext($,tt.aspectRatio),it=j&&j.canvas,st=it&&it.height,ht=it&&it.width;if(this.id=uid(),this.ctx=j,this.canvas=it,this.width=ht,this.height=st,this._options=tt,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(vt=>this.update(vt),tt.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!j||!it){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:o,maintainAspectRatio:s},width:_,height:$,_aspectRatio:et}=this;return isNullOrUndef(o)?s&&et?et:$?_/$:null:o}get data(){return this.config.data}set data(o){this.config.data=o}get options(){return this._options}set options(o){this.config.options=o}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(o,s){animator.running(this)?this._resizeBeforeDraw={width:o,height:s}:this._resize(o,s)}_resize(o,s){const _=this.options,$=this.canvas,et=_.maintainAspectRatio&&this.aspectRatio,tt=this.platform.getMaximumSize($,o,s,et),j=_.devicePixelRatio||this.platform.getDevicePixelRatio(),it=this.width?"resize":"attach";this.width=tt.width,this.height=tt.height,this._aspectRatio=this.aspectRatio,retinaScale(this,j,!0)&&(this.notifyPlugins("resize",{size:tt}),callback(_.onResize,[this,tt],this),this.attached&&this._doResize(it)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};each(s,(_,$)=>{_.id=$})}buildOrUpdateScales(){const o=this.options,s=o.scales,_=this.scales,$=Object.keys(_).reduce((tt,j)=>(tt[j]=!1,tt),{});let et=[];s&&(et=et.concat(Object.keys(s).map(tt=>{const j=s[tt],it=determineAxis(tt,j),st=it==="r",ht=it==="x";return{options:j,dposition:st?"chartArea":ht?"bottom":"left",dtype:st?"radialLinear":ht?"category":"linear"}}))),each(et,tt=>{const j=tt.options,it=j.id,st=determineAxis(it,j),ht=valueOrDefault(j.type,tt.dtype);(j.position===void 0||positionIsHorizontal(j.position,st)!==positionIsHorizontal(tt.dposition))&&(j.position=tt.dposition),$[it]=!0;let vt=null;if(it in _&&_[it].type===ht)vt=_[it];else{const ft=registry.getScale(ht);vt=new ft({id:it,type:ht,ctx:this.ctx,chart:this}),_[vt.id]=vt}vt.init(j,o)}),each($,(tt,j)=>{tt||delete _[j]}),each(_,tt=>{layouts.configure(this,tt,tt.options),layouts.addBox(this,tt)})}_updateMetasets(){const o=this._metasets,s=this.data.datasets.length,_=o.length;if(o.sort(($,et)=>$.index-et.index),_>s){for(let $=s;$<_;++$)this._destroyDatasetMeta($);o.splice(s,_-s)}this._sortedMetasets=o.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:o,data:{datasets:s}}=this;o.length>s.length&&delete this._stacks,o.forEach((_,$)=>{s.filter(et=>et===_._dataset).length===0&&this._destroyDatasetMeta($)})}buildOrUpdateControllers(){const o=[],s=this.data.datasets;let _,$;for(this._removeUnreferencedMetasets(),_=0,$=s.length;_<$;_++){const et=s[_];let tt=this.getDatasetMeta(_);const j=et.type||this.config.type;if(tt.type&&tt.type!==j&&(this._destroyDatasetMeta(_),tt=this.getDatasetMeta(_)),tt.type=j,tt.indexAxis=et.indexAxis||getIndexAxis(j,this.options),tt.order=et.order||0,tt.index=_,tt.label=""+et.label,tt.visible=this.isDatasetVisible(_),tt.controller)tt.controller.updateIndex(_),tt.controller.linkScales();else{const it=registry.getController(j),{datasetElementType:st,dataElementType:ht}=defaults.datasets[j];Object.assign(it.prototype,{dataElementType:registry.getElement(ht),datasetElementType:st&&registry.getElement(st)}),tt.controller=new it(this,_),o.push(tt.controller)}}return this._updateMetasets(),o}_resetElements(){each(this.data.datasets,(o,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(o){const s=this.config;s.update();const _=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),$=this._animationsDisabled=!_.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:o,cancelable:!0})===!1)return;const et=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let tt=0;for(let st=0,ht=this.data.datasets.length;st<ht;st++){const{controller:vt}=this.getDatasetMeta(st),ft=!$&&et.indexOf(vt)===-1;vt.buildOrUpdateElements(ft),tt=Math.max(+vt.getMaxOverflow(),tt)}tt=this._minPadding=_.layout.autoPadding?tt:0,this._updateLayout(tt),$||each(et,st=>{st.reset()}),this._updateDatasets(o),this.notifyPlugins("afterUpdate",{mode:o}),this._layers.sort(compare2Level("z","_idx"));const{_active:j,_lastEvent:it}=this;it?this._eventHandler(it,!0):j.length&&this._updateHoverStyles(j,j,!0),this.render()}_updateScales(){each(this.scales,o=>{layouts.removeBox(this,o)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const o=this.options,s=new Set(Object.keys(this._listeners)),_=new Set(o.events);(!setsEqual(s,_)||!!this._responsiveListeners!==o.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:o}=this,s=this._getUniformDataChanges()||[];for(const{method:_,start:$,count:et}of s){const tt=_==="_removeElements"?-et:et;moveNumericKeys(o,$,tt)}}_getUniformDataChanges(){const o=this._dataChanges;if(!o||!o.length)return;this._dataChanges=[];const s=this.data.datasets.length,_=et=>new Set(o.filter(tt=>tt[0]===et).map((tt,j)=>j+","+tt.splice(1).join(","))),$=_(0);for(let et=1;et<s;et++)if(!setsEqual($,_(et)))return;return Array.from($).map(et=>et.split(",")).map(et=>({method:et[1],start:+et[2],count:+et[3]}))}_updateLayout(o){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,o);const s=this.chartArea,_=s.width<=0||s.height<=0;this._layers=[],each(this.boxes,$=>{_&&$.position==="chartArea"||($.configure&&$.configure(),this._layers.push(...$._layers()))},this),this._layers.forEach(($,et)=>{$._idx=et}),this.notifyPlugins("afterLayout")}_updateDatasets(o){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:o,cancelable:!0})!==!1){for(let s=0,_=this.data.datasets.length;s<_;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,_=this.data.datasets.length;s<_;++s)this._updateDataset(s,isFunction(o)?o({datasetIndex:s}):o);this.notifyPlugins("afterDatasetsUpdate",{mode:o})}}_updateDataset(o,s){const _=this.getDatasetMeta(o),$={meta:_,index:o,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",$)!==!1&&(_.controller._update(s),$.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",$))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let o;if(this._resizeBeforeDraw){const{width:_,height:$}=this._resizeBeforeDraw;this._resize(_,$),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(o=0;o<s.length&&s[o].z<=0;++o)s[o].draw(this.chartArea);for(this._drawDatasets();o<s.length;++o)s[o].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(o){const s=this._sortedMetasets,_=[];let $,et;for($=0,et=s.length;$<et;++$){const tt=s[$];(!o||tt.visible)&&_.push(tt)}return _}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const o=this.getSortedVisibleDatasetMetas();for(let s=o.length-1;s>=0;--s)this._drawDataset(o[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(o){const s=this.ctx,_=o._clip,$=!_.disabled,et=this.chartArea,tt={meta:o,index:o.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",tt)!==!1&&($&&clipArea(s,{left:_.left===!1?0:et.left-_.left,right:_.right===!1?this.width:et.right+_.right,top:_.top===!1?0:et.top-_.top,bottom:_.bottom===!1?this.height:et.bottom+_.bottom}),o.controller.draw(),$&&unclipArea(s),tt.cancelable=!1,this.notifyPlugins("afterDatasetDraw",tt))}getElementsAtEventForMode(o,s,_,$){const et=Interaction.modes[s];return typeof et=="function"?et(this,o,_,$):[]}getDatasetMeta(o){const s=this.data.datasets[o],_=this._metasets;let $=_.filter(et=>et&&et._dataset===s).pop();return $||($={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:o,_dataset:s,_parsed:[],_sorted:!1},_.push($)),$}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(o){const s=this.data.datasets[o];if(!s)return!1;const _=this.getDatasetMeta(o);return typeof _.hidden=="boolean"?!_.hidden:!s.hidden}setDatasetVisibility(o,s){const _=this.getDatasetMeta(o);_.hidden=!s}toggleDataVisibility(o){this._hiddenIndices[o]=!this._hiddenIndices[o]}getDataVisibility(o){return!this._hiddenIndices[o]}_updateVisibility(o,s,_){const $=_?"show":"hide",et=this.getDatasetMeta(o),tt=et.controller._resolveAnimations(void 0,$);defined(s)?(et.data[s].hidden=!_,this.update()):(this.setDatasetVisibility(o,_),tt.update(et,{visible:_}),this.update(j=>j.datasetIndex===o?$:void 0))}hide(o,s){this._updateVisibility(o,s,!1)}show(o,s){this._updateVisibility(o,s,!0)}_destroyDatasetMeta(o){const s=this._metasets[o];s&&s.controller&&s.controller._destroy(),delete this._metasets[o]}_stop(){let o,s;for(this.stop(),animator.remove(this),o=0,s=this.data.datasets.length;o<s;++o)this._destroyDatasetMeta(o)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:o,ctx:s}=this;this._stop(),this.config.clearCache(),o&&(this.unbindEvents(),clearCanvas(o,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...o){return this.canvas.toDataURL(...o)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const o=this._listeners,s=this.platform,_=(et,tt)=>{s.addEventListener(this,et,tt),o[et]=tt},$=(et,tt,j)=>{et.offsetX=tt,et.offsetY=j,this._eventHandler(et)};each(this.options.events,et=>_(et,$))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const o=this._responsiveListeners,s=this.platform,_=(it,st)=>{s.addEventListener(this,it,st),o[it]=st},$=(it,st)=>{o[it]&&(s.removeEventListener(this,it,st),delete o[it])},et=(it,st)=>{this.canvas&&this.resize(it,st)};let tt;const j=()=>{$("attach",j),this.attached=!0,this.resize(),_("resize",et),_("detach",tt)};tt=()=>{this.attached=!1,$("resize",et),this._stop(),this._resize(0,0),_("attach",j)},s.isAttached(this.canvas)?j():tt()}unbindEvents(){each(this._listeners,(o,s)=>{this.platform.removeEventListener(this,s,o)}),this._listeners={},each(this._responsiveListeners,(o,s)=>{this.platform.removeEventListener(this,s,o)}),this._responsiveListeners=void 0}updateHoverStyle(o,s,_){const $=_?"set":"remove";let et,tt,j,it;for(s==="dataset"&&(et=this.getDatasetMeta(o[0].datasetIndex),et.controller["_"+$+"DatasetHoverStyle"]()),j=0,it=o.length;j<it;++j){tt=o[j];const st=tt&&this.getDatasetMeta(tt.datasetIndex).controller;st&&st[$+"HoverStyle"](tt.element,tt.datasetIndex,tt.index)}}getActiveElements(){return this._active||[]}setActiveElements(o){const s=this._active||[],_=o.map(({datasetIndex:et,index:tt})=>{const j=this.getDatasetMeta(et);if(!j)throw new Error("No dataset found at index "+et);return{datasetIndex:et,element:j.data[tt],index:tt}});!_elementsEqual(_,s)&&(this._active=_,this._lastEvent=null,this._updateHoverStyles(_,s))}notifyPlugins(o,s,_){return this._plugins.notify(this,o,s,_)}_updateHoverStyles(o,s,_){const $=this.options.hover,et=(it,st)=>it.filter(ht=>!st.some(vt=>ht.datasetIndex===vt.datasetIndex&&ht.index===vt.index)),tt=et(s,o),j=_?o:et(o,s);tt.length&&this.updateHoverStyle(tt,$.mode,!1),j.length&&$.mode&&this.updateHoverStyle(j,$.mode,!0)}_eventHandler(o,s){const _={event:o,replay:s,cancelable:!0,inChartArea:_isPointInArea(o,this.chartArea,this._minPadding)},$=tt=>(tt.options.events||this.options.events).includes(o.native.type);if(this.notifyPlugins("beforeEvent",_,$)===!1)return;const et=this._handleEvent(o,s,_.inChartArea);return _.cancelable=!1,this.notifyPlugins("afterEvent",_,$),(et||_.changed)&&this.render(),this}_handleEvent(o,s,_){const{_active:$=[],options:et}=this,tt=s,j=this._getActiveElements(o,$,_,tt),it=_isClickEvent(o),st=determineLastEvent(o,this._lastEvent,_,it);_&&(this._lastEvent=null,callback(et.onHover,[o,j,this],this),it&&callback(et.onClick,[o,j,this],this));const ht=!_elementsEqual(j,$);return(ht||s)&&(this._active=j,this._updateHoverStyles(j,$,s)),this._lastEvent=st,ht}_getActiveElements(o,s,_,$){if(o.type==="mouseout")return[];if(!_)return s;const et=this.options.hover;return this.getElementsAtEventForMode(o,et.mode,et,$)}}const invalidatePlugins=()=>each(Chart$1.instances,i=>i._plugins.invalidate()),enumerable=!0;Object.defineProperties(Chart$1,{defaults:{enumerable,value:defaults},instances:{enumerable,value:instances},overrides:{enumerable,value:overrides},registry:{enumerable,value:registry},version:{enumerable,value:version},getChart:{enumerable,value:getChart},register:{enumerable,value:(...i)=>{registry.add(...i),invalidatePlugins()}},unregister:{enumerable,value:(...i)=>{registry.remove(...i),invalidatePlugins()}}});function clipArc(i,o,s){const{startAngle:_,pixelMargin:$,x:et,y:tt,outerRadius:j,innerRadius:it}=o;let st=$/j;i.beginPath(),i.arc(et,tt,j,_-st,s+st),it>$?(st=$/it,i.arc(et,tt,it,s+st,_-st,!0)):i.arc(et,tt,$,s+HALF_PI,_-HALF_PI),i.closePath(),i.clip()}function toRadiusCorners(i){return _readValueToProps(i,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(i,o,s,_){const $=toRadiusCorners(i.options.borderRadius),et=(s-o)/2,tt=Math.min(et,_*o/2),j=it=>{const st=(s-Math.min(et,it))*_/2;return _limitValue(it,0,Math.min(et,st))};return{outerStart:j($.outerStart),outerEnd:j($.outerEnd),innerStart:_limitValue($.innerStart,0,tt),innerEnd:_limitValue($.innerEnd,0,tt)}}function rThetaToXY(i,o,s,_){return{x:s+i*Math.cos(o),y:_+i*Math.sin(o)}}function pathArc(i,o,s,_,$){const{x:et,y:tt,startAngle:j,pixelMargin:it,innerRadius:st}=o,ht=Math.max(o.outerRadius+_+s-it,0),vt=st>0?st+_+s+it:0;let ft=0;const pt=$-j;if(_){const Ut=st>0?st-_:0,Ht=ht>0?ht-_:0,qt=(Ut+Ht)/2,Pt=qt!==0?pt*qt/(qt+_):pt;ft=(pt-Pt)/2}const ct=Math.max(.001,pt*ht-s/PI)/ht,yt=(pt-ct)/2,Et=j+yt+ft,Ot=$-yt-ft,{outerStart:Lt,outerEnd:Tt,innerStart:It,innerEnd:mt}=parseBorderRadius$1(o,vt,ht,Ot-Et),Bt=ht-Lt,nn=ht-Tt,sn=Et+Lt/Bt,xt=Ot-Tt/nn,St=vt+It,Nt=vt+mt,Ct=Et+It/St,Vt=Ot-mt/Nt;if(i.beginPath(),i.arc(et,tt,ht,sn,xt),Tt>0){const Ut=rThetaToXY(nn,xt,et,tt);i.arc(Ut.x,Ut.y,Tt,xt,Ot+HALF_PI)}const Kt=rThetaToXY(Nt,Ot,et,tt);if(i.lineTo(Kt.x,Kt.y),mt>0){const Ut=rThetaToXY(Nt,Vt,et,tt);i.arc(Ut.x,Ut.y,mt,Ot+HALF_PI,Vt+Math.PI)}if(i.arc(et,tt,vt,Ot-mt/vt,Et+It/vt,!0),It>0){const Ut=rThetaToXY(St,Ct,et,tt);i.arc(Ut.x,Ut.y,It,Ct+Math.PI,Et-HALF_PI)}const Gt=rThetaToXY(Bt,Et,et,tt);if(i.lineTo(Gt.x,Gt.y),Lt>0){const Ut=rThetaToXY(Bt,sn,et,tt);i.arc(Ut.x,Ut.y,Lt,Et-HALF_PI,sn)}i.closePath()}function drawArc(i,o,s,_){const{fullCircles:$,startAngle:et,circumference:tt}=o;let j=o.endAngle;if($){pathArc(i,o,s,_,et+TAU);for(let it=0;it<$;++it)i.fill();isNaN(tt)||(j=et+tt%TAU,tt%TAU===0&&(j+=TAU))}return pathArc(i,o,s,_,j),i.fill(),j}function drawFullCircleBorders(i,o,s){const{x:_,y:$,startAngle:et,pixelMargin:tt,fullCircles:j}=o,it=Math.max(o.outerRadius-tt,0),st=o.innerRadius+tt;let ht;for(s&&clipArc(i,o,et+TAU),i.beginPath(),i.arc(_,$,st,et+TAU,et,!0),ht=0;ht<j;++ht)i.stroke();for(i.beginPath(),i.arc(_,$,it,et,et+TAU),ht=0;ht<j;++ht)i.stroke()}function drawBorder(i,o,s,_,$){const{options:et}=o,{borderWidth:tt,borderJoinStyle:j}=et,it=et.borderAlign==="inner";tt&&(it?(i.lineWidth=tt*2,i.lineJoin=j||"round"):(i.lineWidth=tt,i.lineJoin=j||"bevel"),o.fullCircles&&drawFullCircleBorders(i,o,it),it&&clipArc(i,o,$),pathArc(i,o,s,_,$),i.stroke())}class ArcElement extends Element{constructor(o){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,o&&Object.assign(this,o)}inRange(o,s,_){const $=this.getProps(["x","y"],_),{angle:et,distance:tt}=getAngleFromPoint($,{x:o,y:s}),{startAngle:j,endAngle:it,innerRadius:st,outerRadius:ht,circumference:vt}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],_),ft=this.options.spacing/2,ct=valueOrDefault(vt,it-j)>=TAU||_angleBetween(et,j,it),yt=_isBetween(tt,st+ft,ht+ft);return ct&&yt}getCenterPoint(o){const{x:s,y:_,startAngle:$,endAngle:et,innerRadius:tt,outerRadius:j}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],o),{offset:it,spacing:st}=this.options,ht=($+et)/2,vt=(tt+j+st+it)/2;return{x:s+Math.cos(ht)*vt,y:_+Math.sin(ht)*vt}}tooltipPosition(o){return this.getCenterPoint(o)}draw(o){const{options:s,circumference:_}=this,$=(s.offset||0)/2,et=(s.spacing||0)/2;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=_>TAU?Math.floor(_/TAU):0,_===0||this.innerRadius<0||this.outerRadius<0)return;o.save();let tt=0;if($){tt=$/2;const it=(this.startAngle+this.endAngle)/2;o.translate(Math.cos(it)*tt,Math.sin(it)*tt),this.circumference>=PI&&(tt=$)}o.fillStyle=s.backgroundColor,o.strokeStyle=s.borderColor;const j=drawArc(o,this,tt,et);drawBorder(o,this,tt,et,j),o.restore()}}ArcElement.id="arc";ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};function setStyle(i,o,s=o){i.lineCap=valueOrDefault(s.borderCapStyle,o.borderCapStyle),i.setLineDash(valueOrDefault(s.borderDash,o.borderDash)),i.lineDashOffset=valueOrDefault(s.borderDashOffset,o.borderDashOffset),i.lineJoin=valueOrDefault(s.borderJoinStyle,o.borderJoinStyle),i.lineWidth=valueOrDefault(s.borderWidth,o.borderWidth),i.strokeStyle=valueOrDefault(s.borderColor,o.borderColor)}function lineTo(i,o,s){i.lineTo(s.x,s.y)}function getLineMethod(i){return i.stepped?_steppedLineTo:i.tension||i.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(i,o,s={}){const _=i.length,{start:$=0,end:et=_-1}=s,{start:tt,end:j}=o,it=Math.max($,tt),st=Math.min(et,j),ht=$<tt&&et<tt||$>j&&et>j;return{count:_,start:it,loop:o.loop,ilen:st<it&&!ht?_+st-it:st-it}}function pathSegment(i,o,s,_){const{points:$,options:et}=o,{count:tt,start:j,loop:it,ilen:st}=pathVars($,s,_),ht=getLineMethod(et);let{move:vt=!0,reverse:ft}=_||{},pt,ct,yt;for(pt=0;pt<=st;++pt)ct=$[(j+(ft?st-pt:pt))%tt],!ct.skip&&(vt?(i.moveTo(ct.x,ct.y),vt=!1):ht(i,yt,ct,ft,et.stepped),yt=ct);return it&&(ct=$[(j+(ft?st:0))%tt],ht(i,yt,ct,ft,et.stepped)),!!it}function fastPathSegment(i,o,s,_){const $=o.points,{count:et,start:tt,ilen:j}=pathVars($,s,_),{move:it=!0,reverse:st}=_||{};let ht=0,vt=0,ft,pt,ct,yt,Et,Ot;const Lt=It=>(tt+(st?j-It:It))%et,Tt=()=>{yt!==Et&&(i.lineTo(ht,Et),i.lineTo(ht,yt),i.lineTo(ht,Ot))};for(it&&(pt=$[Lt(0)],i.moveTo(pt.x,pt.y)),ft=0;ft<=j;++ft){if(pt=$[Lt(ft)],pt.skip)continue;const It=pt.x,mt=pt.y,Bt=It|0;Bt===ct?(mt<yt?yt=mt:mt>Et&&(Et=mt),ht=(vt*ht+It)/++vt):(Tt(),i.lineTo(It,mt),ct=Bt,vt=0,yt=Et=mt),Ot=mt}Tt()}function _getSegmentMethod(i){const o=i.options,s=o.borderDash&&o.borderDash.length;return!i._decimated&&!i._loop&&!o.tension&&o.cubicInterpolationMode!=="monotone"&&!o.stepped&&!s?fastPathSegment:pathSegment}function _getInterpolationMethod(i){return i.stepped?_steppedInterpolation:i.tension||i.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(i,o,s,_){let $=o._path;$||($=o._path=new Path2D,o.path($,s,_)&&$.closePath()),setStyle(i,o.options),i.stroke($)}function strokePathDirect(i,o,s,_){const{segments:$,options:et}=o,tt=_getSegmentMethod(o);for(const j of $)setStyle(i,et,j.style),i.beginPath(),tt(i,o,j,{start:s,end:s+_-1})&&i.closePath(),i.stroke()}const usePath2D=typeof Path2D=="function";function draw(i,o,s,_){usePath2D&&!o.options.segment?strokePathWithCache(i,o,s,_):strokePathDirect(i,o,s,_)}class LineElement extends Element{constructor(o){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,o&&Object.assign(this,o)}updateControlPoints(o,s){const _=this.options;if((_.tension||_.cubicInterpolationMode==="monotone")&&!_.stepped&&!this._pointsUpdated){const $=_.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,_,o,$,s),this._pointsUpdated=!0}}set points(o){this._points=o,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const o=this.segments,s=this.points;return o.length&&s[o[0].start]}last(){const o=this.segments,s=this.points,_=o.length;return _&&s[o[_-1].end]}interpolate(o,s){const _=this.options,$=o[s],et=this.points,tt=_boundSegments(this,{property:s,start:$,end:$});if(!tt.length)return;const j=[],it=_getInterpolationMethod(_);let st,ht;for(st=0,ht=tt.length;st<ht;++st){const{start:vt,end:ft}=tt[st],pt=et[vt],ct=et[ft];if(pt===ct){j.push(pt);continue}const yt=Math.abs(($-pt[s])/(ct[s]-pt[s])),Et=it(pt,ct,yt,_.stepped);Et[s]=o[s],j.push(Et)}return j.length===1?j[0]:j}pathSegment(o,s,_){return _getSegmentMethod(this)(o,this,s,_)}path(o,s,_){const $=this.segments,et=_getSegmentMethod(this);let tt=this._loop;s=s||0,_=_||this.points.length-s;for(const j of $)tt&=et(o,this,j,{start:s,end:s+_-1});return!!tt}draw(o,s,_,$){const et=this.options||{};(this.points||[]).length&&et.borderWidth&&(o.save(),draw(o,this,_,$),o.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}LineElement.id="line";LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};LineElement.descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"&&i!=="fill"};function inRange$1(i,o,s,_){const $=i.options,{[s]:et}=i.getProps([s],_);return Math.abs(o-et)<$.radius+$.hitRadius}class PointElement extends Element{constructor(o){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,o&&Object.assign(this,o)}inRange(o,s,_){const $=this.options,{x:et,y:tt}=this.getProps(["x","y"],_);return Math.pow(o-et,2)+Math.pow(s-tt,2)<Math.pow($.hitRadius+$.radius,2)}inXRange(o,s){return inRange$1(this,o,"x",s)}inYRange(o,s){return inRange$1(this,o,"y",s)}getCenterPoint(o){const{x:s,y:_}=this.getProps(["x","y"],o);return{x:s,y:_}}size(o){o=o||this.options||{};let s=o.radius||0;s=Math.max(s,s&&o.hoverRadius||0);const _=s&&o.borderWidth||0;return(s+_)*2}draw(o,s){const _=this.options;this.skip||_.radius<.1||!_isPointInArea(this,s,this.size(_)/2)||(o.strokeStyle=_.borderColor,o.lineWidth=_.borderWidth,o.fillStyle=_.backgroundColor,drawPoint(o,_,this.x,this.y))}getRange(){const o=this.options||{};return o.radius+o.hitRadius}}PointElement.id="point";PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function getBarBounds(i,o){const{x:s,y:_,base:$,width:et,height:tt}=i.getProps(["x","y","base","width","height"],o);let j,it,st,ht,vt;return i.horizontal?(vt=tt/2,j=Math.min(s,$),it=Math.max(s,$),st=_-vt,ht=_+vt):(vt=et/2,j=s-vt,it=s+vt,st=Math.min(_,$),ht=Math.max(_,$)),{left:j,top:st,right:it,bottom:ht}}function skipOrLimit(i,o,s,_){return i?0:_limitValue(o,s,_)}function parseBorderWidth(i,o,s){const _=i.options.borderWidth,$=i.borderSkipped,et=toTRBL(_);return{t:skipOrLimit($.top,et.top,0,s),r:skipOrLimit($.right,et.right,0,o),b:skipOrLimit($.bottom,et.bottom,0,s),l:skipOrLimit($.left,et.left,0,o)}}function parseBorderRadius(i,o,s){const{enableBorderRadius:_}=i.getProps(["enableBorderRadius"]),$=i.options.borderRadius,et=toTRBLCorners($),tt=Math.min(o,s),j=i.borderSkipped,it=_||isObject($);return{topLeft:skipOrLimit(!it||j.top||j.left,et.topLeft,0,tt),topRight:skipOrLimit(!it||j.top||j.right,et.topRight,0,tt),bottomLeft:skipOrLimit(!it||j.bottom||j.left,et.bottomLeft,0,tt),bottomRight:skipOrLimit(!it||j.bottom||j.right,et.bottomRight,0,tt)}}function boundingRects(i){const o=getBarBounds(i),s=o.right-o.left,_=o.bottom-o.top,$=parseBorderWidth(i,s/2,_/2),et=parseBorderRadius(i,s/2,_/2);return{outer:{x:o.left,y:o.top,w:s,h:_,radius:et},inner:{x:o.left+$.l,y:o.top+$.t,w:s-$.l-$.r,h:_-$.t-$.b,radius:{topLeft:Math.max(0,et.topLeft-Math.max($.t,$.l)),topRight:Math.max(0,et.topRight-Math.max($.t,$.r)),bottomLeft:Math.max(0,et.bottomLeft-Math.max($.b,$.l)),bottomRight:Math.max(0,et.bottomRight-Math.max($.b,$.r))}}}}function inRange(i,o,s,_){const $=o===null,et=s===null,j=i&&!($&&et)&&getBarBounds(i,_);return j&&($||_isBetween(o,j.left,j.right))&&(et||_isBetween(s,j.top,j.bottom))}function hasRadius(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function addNormalRectPath(i,o){i.rect(o.x,o.y,o.w,o.h)}function inflateRect(i,o,s={}){const _=i.x!==s.x?-o:0,$=i.y!==s.y?-o:0,et=(i.x+i.w!==s.x+s.w?o:0)-_,tt=(i.y+i.h!==s.y+s.h?o:0)-$;return{x:i.x+_,y:i.y+$,w:i.w+et,h:i.h+tt,radius:i.radius}}class BarElement extends Element{constructor(o){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,o&&Object.assign(this,o)}draw(o){const{inflateAmount:s,options:{borderColor:_,backgroundColor:$}}=this,{inner:et,outer:tt}=boundingRects(this),j=hasRadius(tt.radius)?addRoundedRectPath:addNormalRectPath;o.save(),(tt.w!==et.w||tt.h!==et.h)&&(o.beginPath(),j(o,inflateRect(tt,s,et)),o.clip(),j(o,inflateRect(et,-s,tt)),o.fillStyle=_,o.fill("evenodd")),o.beginPath(),j(o,inflateRect(et,s)),o.fillStyle=$,o.fill(),o.restore()}inRange(o,s,_){return inRange(this,o,s,_)}inXRange(o,s){return inRange(this,o,null,s)}inYRange(o,s){return inRange(this,null,o,s)}getCenterPoint(o){const{x:s,y:_,base:$,horizontal:et}=this.getProps(["x","y","base","horizontal"],o);return{x:et?(s+$)/2:s,y:et?_:(_+$)/2}}getRange(o){return o==="x"?this.width/2:this.height/2}}BarElement.id="bar";BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var elements=Object.freeze({__proto__:null,ArcElement,LineElement,PointElement,BarElement});function lttbDecimation(i,o,s,_,$){const et=$.samples||_;if(et>=s)return i.slice(o,o+s);const tt=[],j=(s-2)/(et-2);let it=0;const st=o+s-1;let ht=o,vt,ft,pt,ct,yt;for(tt[it++]=i[ht],vt=0;vt<et-2;vt++){let Et=0,Ot=0,Lt;const Tt=Math.floor((vt+1)*j)+1+o,It=Math.min(Math.floor((vt+2)*j)+1,s)+o,mt=It-Tt;for(Lt=Tt;Lt<It;Lt++)Et+=i[Lt].x,Ot+=i[Lt].y;Et/=mt,Ot/=mt;const Bt=Math.floor(vt*j)+1+o,nn=Math.min(Math.floor((vt+1)*j)+1,s)+o,{x:sn,y:xt}=i[ht];for(pt=ct=-1,Lt=Bt;Lt<nn;Lt++)ct=.5*Math.abs((sn-Et)*(i[Lt].y-xt)-(sn-i[Lt].x)*(Ot-xt)),ct>pt&&(pt=ct,ft=i[Lt],yt=Lt);tt[it++]=ft,ht=yt}return tt[it++]=i[st],tt}function minMaxDecimation(i,o,s,_){let $=0,et=0,tt,j,it,st,ht,vt,ft,pt,ct,yt;const Et=[],Ot=o+s-1,Lt=i[o].x,It=i[Ot].x-Lt;for(tt=o;tt<o+s;++tt){j=i[tt],it=(j.x-Lt)/It*_,st=j.y;const mt=it|0;if(mt===ht)st<ct?(ct=st,vt=tt):st>yt&&(yt=st,ft=tt),$=(et*$+j.x)/++et;else{const Bt=tt-1;if(!isNullOrUndef(vt)&&!isNullOrUndef(ft)){const nn=Math.min(vt,ft),sn=Math.max(vt,ft);nn!==pt&&nn!==Bt&&Et.push(__spreadProps(__spreadValues2({},i[nn]),{x:$})),sn!==pt&&sn!==Bt&&Et.push(__spreadProps(__spreadValues2({},i[sn]),{x:$}))}tt>0&&Bt!==pt&&Et.push(i[Bt]),Et.push(j),ht=mt,et=0,ct=yt=st,vt=ft=pt=tt}}return Et}function cleanDecimatedDataset(i){if(i._decimated){const o=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:o})}}function cleanDecimatedData(i){i.data.datasets.forEach(o=>{cleanDecimatedDataset(o)})}function getStartAndCountOfVisiblePointsSimplified(i,o){const s=o.length;let _=0,$;const{iScale:et}=i,{min:tt,max:j,minDefined:it,maxDefined:st}=et.getUserBounds();return it&&(_=_limitValue(_lookupByKey(o,et.axis,tt).lo,0,s-1)),st?$=_limitValue(_lookupByKey(o,et.axis,j).hi+1,_,s)-_:$=s-_,{start:_,count:$}}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,o,s)=>{if(!s.enabled){cleanDecimatedData(i);return}const _=i.width;i.data.datasets.forEach(($,et)=>{const{_data:tt,indexAxis:j}=$,it=i.getDatasetMeta(et),st=tt||$.data;if(resolve([j,i.options.indexAxis])==="y"||it.type!=="line")return;const ht=i.scales[it.xAxisID];if(ht.type!=="linear"&&ht.type!=="time"||i.options.parsing)return;let{start:vt,count:ft}=getStartAndCountOfVisiblePointsSimplified(it,st);const pt=s.threshold||4*_;if(ft<=pt){cleanDecimatedDataset($);return}isNullOrUndef(tt)&&($._data=st,delete $.data,Object.defineProperty($,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(yt){this._data=yt}}));let ct;switch(s.algorithm){case"lttb":ct=lttbDecimation(st,vt,ft,_,s);break;case"min-max":ct=minMaxDecimation(st,vt,ft,_);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}$._decimated=ct})},destroy(i){cleanDecimatedData(i)}};function getLineByIndex(i,o){const s=i.getDatasetMeta(o);return s&&i.isDatasetVisible(o)?s.dataset:null}function parseFillOption(i){const o=i.options,s=o.fill;let _=valueOrDefault(s&&s.target,s);return _===void 0&&(_=!!o.backgroundColor),_===!1||_===null?!1:_===!0?"origin":_}function decodeFill(i,o,s){const _=parseFillOption(i);if(isObject(_))return isNaN(_.value)?!1:_;let $=parseFloat(_);return isNumberFinite($)&&Math.floor($)===$?((_[0]==="-"||_[0]==="+")&&($=o+$),$===o||$<0||$>=s?!1:$):["origin","start","end","stack","shape"].indexOf(_)>=0&&_}function computeLinearBoundary(i){const{scale:o={},fill:s}=i;let _=null,$;return s==="start"?_=o.bottom:s==="end"?_=o.top:isObject(s)?_=o.getPixelForValue(s.value):o.getBasePixel&&(_=o.getBasePixel()),isNumberFinite(_)?($=o.isHorizontal(),{x:$?_:null,y:$?null:_}):null}class simpleArc{constructor(o){this.x=o.x,this.y=o.y,this.radius=o.radius}pathSegment(o,s,_){const{x:$,y:et,radius:tt}=this;return s=s||{start:0,end:TAU},o.arc($,et,tt,s.end,s.start,!0),!_.bounds}interpolate(o){const{x:s,y:_,radius:$}=this,et=o.angle;return{x:s+Math.cos(et)*$,y:_+Math.sin(et)*$,angle:et}}}function computeCircularBoundary(i){const{scale:o,fill:s}=i,_=o.options,$=o.getLabels().length,et=[],tt=_.reverse?o.max:o.min,j=_.reverse?o.min:o.max;let it,st,ht;if(s==="start"?ht=tt:s==="end"?ht=j:isObject(s)?ht=s.value:ht=o.getBaseValue(),_.grid.circular)return st=o.getPointPositionForValue(0,tt),new simpleArc({x:st.x,y:st.y,radius:o.getDistanceFromCenterForValue(ht)});for(it=0;it<$;++it)et.push(o.getPointPositionForValue(it,ht));return et}function computeBoundary(i){return(i.scale||{}).getPointPositionForValue?computeCircularBoundary(i):computeLinearBoundary(i)}function findSegmentEnd(i,o,s){for(;o>i;o--){const _=s[o];if(!isNaN(_.x)&&!isNaN(_.y))break}return o}function pointsFromSegments(i,o){const{x:s=null,y:_=null}=i||{},$=o.points,et=[];return o.segments.forEach(({start:tt,end:j})=>{j=findSegmentEnd(tt,j,$);const it=$[tt],st=$[j];_!==null?(et.push({x:it.x,y:_}),et.push({x:st.x,y:_})):s!==null&&(et.push({x:s,y:it.y}),et.push({x:s,y:st.y}))}),et}function buildStackLine(i){const{scale:o,index:s,line:_}=i,$=[],et=_.segments,tt=_.points,j=getLinesBelow(o,s);j.push(createBoundaryLine({x:null,y:o.bottom},_));for(let it=0;it<et.length;it++){const st=et[it];for(let ht=st.start;ht<=st.end;ht++)addPointsBelow($,tt[ht],j)}return new LineElement({points:$,options:{}})}function getLinesBelow(i,o){const s=[],_=i.getMatchingVisibleMetas("line");for(let $=0;$<_.length;$++){const et=_[$];if(et.index===o)break;et.hidden||s.unshift(et.dataset)}return s}function addPointsBelow(i,o,s){const _=[];for(let $=0;$<s.length;$++){const et=s[$],{first:tt,last:j,point:it}=findPoint(et,o,"x");if(!(!it||tt&&j)){if(tt)_.unshift(it);else if(i.push(it),!j)break}}i.push(..._)}function findPoint(i,o,s){const _=i.interpolate(o,s);if(!_)return{};const $=_[s],et=i.segments,tt=i.points;let j=!1,it=!1;for(let st=0;st<et.length;st++){const ht=et[st],vt=tt[ht.start][s],ft=tt[ht.end][s];if(_isBetween($,vt,ft)){j=$===vt,it=$===ft;break}}return{first:j,last:it,point:_}}function getTarget(i){const{chart:o,fill:s,line:_}=i;if(isNumberFinite(s))return getLineByIndex(o,s);if(s==="stack")return buildStackLine(i);if(s==="shape")return!0;const $=computeBoundary(i);return $ instanceof simpleArc?$:createBoundaryLine($,_)}function createBoundaryLine(i,o){let s=[],_=!1;return isArray(i)?(_=!0,s=i):s=pointsFromSegments(i,o),s.length?new LineElement({points:s,options:{tension:0},_loop:_,_fullLoop:_}):null}function resolveTarget(i,o,s){let $=i[o].fill;const et=[o];let tt;if(!s)return $;for(;$!==!1&&et.indexOf($)===-1;){if(!isNumberFinite($))return $;if(tt=i[$],!tt)return!1;if(tt.visible)return $;et.push($),$=tt.fill}return!1}function _clip(i,o,s){const{segments:_,points:$}=o;let et=!0,tt=!1;i.beginPath();for(const j of _){const{start:it,end:st}=j,ht=$[it],vt=$[findSegmentEnd(it,st,$)];et?(i.moveTo(ht.x,ht.y),et=!1):(i.lineTo(ht.x,s),i.lineTo(ht.x,ht.y)),tt=!!o.pathSegment(i,j,{move:tt}),tt?i.closePath():i.lineTo(vt.x,s)}i.lineTo(o.first().x,s),i.closePath(),i.clip()}function getBounds(i,o,s,_){if(_)return;let $=o[i],et=s[i];return i==="angle"&&($=_normalizeAngle($),et=_normalizeAngle(et)),{property:i,start:$,end:et}}function _getEdge(i,o,s,_){return i&&o?_(i[s],o[s]):i?i[s]:o?o[s]:0}function _segments(i,o,s){const _=i.segments,$=i.points,et=o.points,tt=[];for(const j of _){let{start:it,end:st}=j;st=findSegmentEnd(it,st,$);const ht=getBounds(s,$[it],$[st],j.loop);if(!o.segments){tt.push({source:j,target:ht,start:$[it],end:$[st]});continue}const vt=_boundSegments(o,ht);for(const ft of vt){const pt=getBounds(s,et[ft.start],et[ft.end],ft.loop),ct=_boundSegment(j,$,pt);for(const yt of ct)tt.push({source:yt,target:ft,start:{[s]:_getEdge(ht,pt,"start",Math.max)},end:{[s]:_getEdge(ht,pt,"end",Math.min)}})}}return tt}function clipBounds(i,o,s){const{top:_,bottom:$}=o.chart.chartArea,{property:et,start:tt,end:j}=s||{};et==="x"&&(i.beginPath(),i.rect(tt,_,j-tt,$-_),i.clip())}function interpolatedLineTo(i,o,s,_){const $=o.interpolate(s,_);$&&i.lineTo($.x,$.y)}function _fill(i,o){const{line:s,target:_,property:$,color:et,scale:tt}=o,j=_segments(s,_,$);for(const{source:it,target:st,start:ht,end:vt}of j){const{style:{backgroundColor:ft=et}={}}=it,pt=_!==!0;i.save(),i.fillStyle=ft,clipBounds(i,tt,pt&&getBounds($,ht,vt)),i.beginPath();const ct=!!s.pathSegment(i,it);let yt;if(pt){ct?i.closePath():interpolatedLineTo(i,_,vt,$);const Et=!!_.pathSegment(i,st,{move:ct,reverse:!0});yt=ct&&Et,yt||interpolatedLineTo(i,_,ht,$)}i.closePath(),i.fill(yt?"evenodd":"nonzero"),i.restore()}}function doFill(i,o){const{line:s,target:_,above:$,below:et,area:tt,scale:j}=o,it=s._loop?"angle":o.axis;i.save(),it==="x"&&et!==$&&(_clip(i,_,tt.top),_fill(i,{line:s,target:_,color:$,scale:j,property:it}),i.restore(),i.save(),_clip(i,_,tt.bottom)),_fill(i,{line:s,target:_,color:et,scale:j,property:it}),i.restore()}function drawfill(i,o,s){const _=getTarget(o),{line:$,scale:et,axis:tt}=o,j=$.options,it=j.fill,st=j.backgroundColor,{above:ht=st,below:vt=st}=it||{};_&&$.points.length&&(clipArea(i,s),doFill(i,{line:$,target:_,above:ht,below:vt,area:s,scale:et,axis:tt}),unclipArea(i))}var plugin_filler={id:"filler",afterDatasetsUpdate(i,o,s){const _=(i.data.datasets||[]).length,$=[];let et,tt,j,it;for(tt=0;tt<_;++tt)et=i.getDatasetMeta(tt),j=et.dataset,it=null,j&&j.options&&j instanceof LineElement&&(it={visible:i.isDatasetVisible(tt),index:tt,fill:decodeFill(j,tt,_),chart:i,axis:et.controller.options.indexAxis,scale:et.vScale,line:j}),et.$filler=it,$.push(it);for(tt=0;tt<_;++tt)it=$[tt],!(!it||it.fill===!1)&&(it.fill=resolveTarget($,tt,s.propagate))},beforeDraw(i,o,s){const _=s.drawTime==="beforeDraw",$=i.getSortedVisibleDatasetMetas(),et=i.chartArea;for(let tt=$.length-1;tt>=0;--tt){const j=$[tt].$filler;j&&(j.line.updateControlPoints(et,j.axis),_&&drawfill(i.ctx,j,et))}},beforeDatasetsDraw(i,o,s){if(s.drawTime!=="beforeDatasetsDraw")return;const _=i.getSortedVisibleDatasetMetas();for(let $=_.length-1;$>=0;--$){const et=_[$].$filler;et&&drawfill(i.ctx,et,i.chartArea)}},beforeDatasetDraw(i,o,s){const _=o.meta.$filler;!_||_.fill===!1||s.drawTime!=="beforeDatasetDraw"||drawfill(i.ctx,_,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(i,o)=>{let{boxHeight:s=o,boxWidth:_=o}=i;return i.usePointStyle&&(s=Math.min(s,o),_=Math.min(_,o)),{boxWidth:_,boxHeight:s,itemHeight:Math.max(o,s)}},itemsEqual=(i,o)=>i!==null&&o!==null&&i.datasetIndex===o.datasetIndex&&i.index===o.index;class Legend extends Element{constructor(o){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,s,_){this.maxWidth=o,this.maxHeight=s,this._margins=_,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const o=this.options.labels||{};let s=callback(o.generateLabels,[this.chart],this)||[];o.filter&&(s=s.filter(_=>o.filter(_,this.chart.data))),o.sort&&(s=s.sort((_,$)=>o.sort(_,$,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:o,ctx:s}=this;if(!o.display){this.width=this.height=0;return}const _=o.labels,$=toFont(_.font),et=$.size,tt=this._computeTitleHeight(),{boxWidth:j,itemHeight:it}=getBoxSize(_,et);let st,ht;s.font=$.string,this.isHorizontal()?(st=this.maxWidth,ht=this._fitRows(tt,et,j,it)+10):(ht=this.maxHeight,st=this._fitCols(tt,et,j,it)+10),this.width=Math.min(st,o.maxWidth||this.maxWidth),this.height=Math.min(ht,o.maxHeight||this.maxHeight)}_fitRows(o,s,_,$){const{ctx:et,maxWidth:tt,options:{labels:{padding:j}}}=this,it=this.legendHitBoxes=[],st=this.lineWidths=[0],ht=$+j;let vt=o;et.textAlign="left",et.textBaseline="middle";let ft=-1,pt=-ht;return this.legendItems.forEach((ct,yt)=>{const Et=_+s/2+et.measureText(ct.text).width;(yt===0||st[st.length-1]+Et+2*j>tt)&&(vt+=ht,st[st.length-(yt>0?0:1)]=0,pt+=ht,ft++),it[yt]={left:0,top:pt,row:ft,width:Et,height:$},st[st.length-1]+=Et+j}),vt}_fitCols(o,s,_,$){const{ctx:et,maxHeight:tt,options:{labels:{padding:j}}}=this,it=this.legendHitBoxes=[],st=this.columnSizes=[],ht=tt-o;let vt=j,ft=0,pt=0,ct=0,yt=0;return this.legendItems.forEach((Et,Ot)=>{const Lt=_+s/2+et.measureText(Et.text).width;Ot>0&&pt+$+2*j>ht&&(vt+=ft+j,st.push({width:ft,height:pt}),ct+=ft+j,yt++,ft=pt=0),it[Ot]={left:ct,top:pt,col:yt,width:Lt,height:$},ft=Math.max(ft,Lt),pt+=$+j}),vt+=ft,st.push({width:ft,height:pt}),vt}adjustHitBoxes(){if(!this.options.display)return;const o=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:_,labels:{padding:$},rtl:et}}=this,tt=getRtlAdapter(et,this.left,this.width);if(this.isHorizontal()){let j=0,it=_alignStartEnd(_,this.left+$,this.right-this.lineWidths[j]);for(const st of s)j!==st.row&&(j=st.row,it=_alignStartEnd(_,this.left+$,this.right-this.lineWidths[j])),st.top+=this.top+o+$,st.left=tt.leftForLtr(tt.x(it),st.width),it+=st.width+$}else{let j=0,it=_alignStartEnd(_,this.top+o+$,this.bottom-this.columnSizes[j].height);for(const st of s)st.col!==j&&(j=st.col,it=_alignStartEnd(_,this.top+o+$,this.bottom-this.columnSizes[j].height)),st.top=it,st.left+=this.left+$,st.left=tt.leftForLtr(tt.x(st.left),st.width),it+=st.height+$}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const o=this.ctx;clipArea(o,this),this._draw(),unclipArea(o)}}_draw(){const{options:o,columnSizes:s,lineWidths:_,ctx:$}=this,{align:et,labels:tt}=o,j=defaults.color,it=getRtlAdapter(o.rtl,this.left,this.width),st=toFont(tt.font),{color:ht,padding:vt}=tt,ft=st.size,pt=ft/2;let ct;this.drawTitle(),$.textAlign=it.textAlign("left"),$.textBaseline="middle",$.lineWidth=.5,$.font=st.string;const{boxWidth:yt,boxHeight:Et,itemHeight:Ot}=getBoxSize(tt,ft),Lt=function(nn,sn,xt){if(isNaN(yt)||yt<=0||isNaN(Et)||Et<0)return;$.save();const St=valueOrDefault(xt.lineWidth,1);if($.fillStyle=valueOrDefault(xt.fillStyle,j),$.lineCap=valueOrDefault(xt.lineCap,"butt"),$.lineDashOffset=valueOrDefault(xt.lineDashOffset,0),$.lineJoin=valueOrDefault(xt.lineJoin,"miter"),$.lineWidth=St,$.strokeStyle=valueOrDefault(xt.strokeStyle,j),$.setLineDash(valueOrDefault(xt.lineDash,[])),tt.usePointStyle){const Nt={radius:yt*Math.SQRT2/2,pointStyle:xt.pointStyle,rotation:xt.rotation,borderWidth:St},Ct=it.xPlus(nn,yt/2),Vt=sn+pt;drawPoint($,Nt,Ct,Vt)}else{const Nt=sn+Math.max((ft-Et)/2,0),Ct=it.leftForLtr(nn,yt),Vt=toTRBLCorners(xt.borderRadius);$.beginPath(),Object.values(Vt).some(Kt=>Kt!==0)?addRoundedRectPath($,{x:Ct,y:Nt,w:yt,h:Et,radius:Vt}):$.rect(Ct,Nt,yt,Et),$.fill(),St!==0&&$.stroke()}$.restore()},Tt=function(nn,sn,xt){renderText($,xt.text,nn,sn+Ot/2,st,{strikethrough:xt.hidden,textAlign:it.textAlign(xt.textAlign)})},It=this.isHorizontal(),mt=this._computeTitleHeight();It?ct={x:_alignStartEnd(et,this.left+vt,this.right-_[0]),y:this.top+vt+mt,line:0}:ct={x:this.left+vt,y:_alignStartEnd(et,this.top+mt+vt,this.bottom-s[0].height),line:0},overrideTextDirection(this.ctx,o.textDirection);const Bt=Ot+vt;this.legendItems.forEach((nn,sn)=>{$.strokeStyle=nn.fontColor||ht,$.fillStyle=nn.fontColor||ht;const xt=$.measureText(nn.text).width,St=it.textAlign(nn.textAlign||(nn.textAlign=tt.textAlign)),Nt=yt+pt+xt;let Ct=ct.x,Vt=ct.y;it.setWidth(this.width),It?sn>0&&Ct+Nt+vt>this.right&&(Vt=ct.y+=Bt,ct.line++,Ct=ct.x=_alignStartEnd(et,this.left+vt,this.right-_[ct.line])):sn>0&&Vt+Bt>this.bottom&&(Ct=ct.x=Ct+s[ct.line].width+vt,ct.line++,Vt=ct.y=_alignStartEnd(et,this.top+mt+vt,this.bottom-s[ct.line].height));const Kt=it.x(Ct);Lt(Kt,Vt,nn),Ct=_textX(St,Ct+yt+pt,It?Ct+Nt:this.right,o.rtl),Tt(it.x(Ct),Vt,nn),It?ct.x+=Nt+vt:ct.y+=Bt}),restoreTextDirection(this.ctx,o.textDirection)}drawTitle(){const o=this.options,s=o.title,_=toFont(s.font),$=toPadding(s.padding);if(!s.display)return;const et=getRtlAdapter(o.rtl,this.left,this.width),tt=this.ctx,j=s.position,it=_.size/2,st=$.top+it;let ht,vt=this.left,ft=this.width;if(this.isHorizontal())ft=Math.max(...this.lineWidths),ht=this.top+st,vt=_alignStartEnd(o.align,vt,this.right-ft);else{const ct=this.columnSizes.reduce((yt,Et)=>Math.max(yt,Et.height),0);ht=st+_alignStartEnd(o.align,this.top,this.bottom-ct-o.labels.padding-this._computeTitleHeight())}const pt=_alignStartEnd(j,vt,vt+ft);tt.textAlign=et.textAlign(_toLeftRightCenter(j)),tt.textBaseline="middle",tt.strokeStyle=s.color,tt.fillStyle=s.color,tt.font=_.string,renderText(tt,s.text,pt,ht,_)}_computeTitleHeight(){const o=this.options.title,s=toFont(o.font),_=toPadding(o.padding);return o.display?s.lineHeight+_.height:0}_getLegendItemAt(o,s){let _,$,et;if(_isBetween(o,this.left,this.right)&&_isBetween(s,this.top,this.bottom)){for(et=this.legendHitBoxes,_=0;_<et.length;++_)if($=et[_],_isBetween(o,$.left,$.left+$.width)&&_isBetween(s,$.top,$.top+$.height))return this.legendItems[_]}return null}handleEvent(o){const s=this.options;if(!isListened(o.type,s))return;const _=this._getLegendItemAt(o.x,o.y);if(o.type==="mousemove"){const $=this._hoveredItem,et=itemsEqual($,_);$&&!et&&callback(s.onLeave,[o,$,this],this),this._hoveredItem=_,_&&!et&&callback(s.onHover,[o,_,this],this)}else _&&callback(s.onClick,[o,_,this],this)}}function isListened(i,o){return!!(i==="mousemove"&&(o.onHover||o.onLeave)||o.onClick&&(i==="click"||i==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(i,o,s){const _=i.legend=new Legend({ctx:i.ctx,options:s,chart:i});layouts.configure(i,_,s),layouts.addBox(i,_)},stop(i){layouts.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,o,s){const _=i.legend;layouts.configure(i,_,s),_.options=s},afterUpdate(i){const o=i.legend;o.buildLabels(),o.adjustHitBoxes()},afterEvent(i,o){o.replay||i.legend.handleEvent(o.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,o,s){const _=o.datasetIndex,$=s.chart;$.isDatasetVisible(_)?($.hide(_),o.hidden=!0):($.show(_),o.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const o=i.data.datasets,{labels:{usePointStyle:s,pointStyle:_,textAlign:$,color:et}}=i.legend.options;return i._getSortedDatasetMetas().map(tt=>{const j=tt.controller.getStyle(s?0:void 0),it=toPadding(j.borderWidth);return{text:o[tt.index].label,fillStyle:j.backgroundColor,fontColor:et,hidden:!tt.visible,lineCap:j.borderCapStyle,lineDash:j.borderDash,lineDashOffset:j.borderDashOffset,lineJoin:j.borderJoinStyle,lineWidth:(it.width+it.height)/4,strokeStyle:j.borderColor,pointStyle:_||j.pointStyle,rotation:j.rotation,textAlign:$||j.textAlign,borderRadius:0,datasetIndex:tt.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Title extends Element{constructor(o){super(),this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,s){const _=this.options;if(this.left=0,this.top=0,!_.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=o,this.height=this.bottom=s;const $=isArray(_.text)?_.text.length:1;this._padding=toPadding(_.padding);const et=$*toFont(_.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=et:this.width=et}isHorizontal(){const o=this.options.position;return o==="top"||o==="bottom"}_drawArgs(o){const{top:s,left:_,bottom:$,right:et,options:tt}=this,j=tt.align;let it=0,st,ht,vt;return this.isHorizontal()?(ht=_alignStartEnd(j,_,et),vt=s+o,st=et-_):(tt.position==="left"?(ht=_+o,vt=_alignStartEnd(j,$,s),it=PI*-.5):(ht=et-o,vt=_alignStartEnd(j,s,$),it=PI*.5),st=$-s),{titleX:ht,titleY:vt,maxWidth:st,rotation:it}}draw(){const o=this.ctx,s=this.options;if(!s.display)return;const _=toFont(s.font),et=_.lineHeight/2+this._padding.top,{titleX:tt,titleY:j,maxWidth:it,rotation:st}=this._drawArgs(et);renderText(o,s.text,0,0,_,{color:s.color,maxWidth:it,rotation:st,textAlign:_toLeftRightCenter(s.align),textBaseline:"middle",translation:[tt,j]})}}function createTitle(i,o){const s=new Title({ctx:i.ctx,options:o,chart:i});layouts.configure(i,s,o),layouts.addBox(i,s),i.titleBlock=s}var plugin_title={id:"title",_element:Title,start(i,o,s){createTitle(i,s)},stop(i){const o=i.titleBlock;layouts.removeBox(i,o),delete i.titleBlock},beforeUpdate(i,o,s){const _=i.titleBlock;layouts.configure(i,_,s),_.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const map=new WeakMap;var plugin_subtitle={id:"subtitle",start(i,o,s){const _=new Title({ctx:i.ctx,options:s,chart:i});layouts.configure(i,_,s),layouts.addBox(i,_),map.set(i,_)},stop(i){layouts.removeBox(i,map.get(i)),map.delete(i)},beforeUpdate(i,o,s){const _=map.get(i);layouts.configure(i,_,s),_.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(i){if(!i.length)return!1;let o,s,_=0,$=0,et=0;for(o=0,s=i.length;o<s;++o){const tt=i[o].element;if(tt&&tt.hasValue()){const j=tt.tooltipPosition();_+=j.x,$+=j.y,++et}}return{x:_/et,y:$/et}},nearest(i,o){if(!i.length)return!1;let s=o.x,_=o.y,$=Number.POSITIVE_INFINITY,et,tt,j;for(et=0,tt=i.length;et<tt;++et){const it=i[et].element;if(it&&it.hasValue()){const st=it.getCenterPoint(),ht=distanceBetweenPoints(o,st);ht<$&&($=ht,j=it)}}if(j){const it=j.tooltipPosition();s=it.x,_=it.y}return{x:s,y:_}}};function pushOrConcat(i,o){return o&&(isArray(o)?Array.prototype.push.apply(i,o):i.push(o)),i}function splitNewlines(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function createTooltipItem(i,o){const{element:s,datasetIndex:_,index:$}=o,et=i.getDatasetMeta(_).controller,{label:tt,value:j}=et.getLabelAndValue($);return{chart:i,label:tt,parsed:et.getParsed($),raw:i.data.datasets[_].data[$],formattedValue:j,dataset:et.getDataset(),dataIndex:$,datasetIndex:_,element:s}}function getTooltipSize(i,o){const s=i.chart.ctx,{body:_,footer:$,title:et}=i,{boxWidth:tt,boxHeight:j}=o,it=toFont(o.bodyFont),st=toFont(o.titleFont),ht=toFont(o.footerFont),vt=et.length,ft=$.length,pt=_.length,ct=toPadding(o.padding);let yt=ct.height,Et=0,Ot=_.reduce((It,mt)=>It+mt.before.length+mt.lines.length+mt.after.length,0);if(Ot+=i.beforeBody.length+i.afterBody.length,vt&&(yt+=vt*st.lineHeight+(vt-1)*o.titleSpacing+o.titleMarginBottom),Ot){const It=o.displayColors?Math.max(j,it.lineHeight):it.lineHeight;yt+=pt*It+(Ot-pt)*it.lineHeight+(Ot-1)*o.bodySpacing}ft&&(yt+=o.footerMarginTop+ft*ht.lineHeight+(ft-1)*o.footerSpacing);let Lt=0;const Tt=function(It){Et=Math.max(Et,s.measureText(It).width+Lt)};return s.save(),s.font=st.string,each(i.title,Tt),s.font=it.string,each(i.beforeBody.concat(i.afterBody),Tt),Lt=o.displayColors?tt+2+o.boxPadding:0,each(_,It=>{each(It.before,Tt),each(It.lines,Tt),each(It.after,Tt)}),Lt=0,s.font=ht.string,each(i.footer,Tt),s.restore(),Et+=ct.width,{width:Et,height:yt}}function determineYAlign(i,o){const{y:s,height:_}=o;return s<_/2?"top":s>i.height-_/2?"bottom":"center"}function doesNotFitWithAlign(i,o,s,_){const{x:$,width:et}=_,tt=s.caretSize+s.caretPadding;if(i==="left"&&$+et+tt>o.width||i==="right"&&$-et-tt<0)return!0}function determineXAlign(i,o,s,_){const{x:$,width:et}=s,{width:tt,chartArea:{left:j,right:it}}=i;let st="center";return _==="center"?st=$<=(j+it)/2?"left":"right":$<=et/2?st="left":$>=tt-et/2&&(st="right"),doesNotFitWithAlign(st,i,o,s)&&(st="center"),st}function determineAlignment(i,o,s){const _=s.yAlign||o.yAlign||determineYAlign(i,s);return{xAlign:s.xAlign||o.xAlign||determineXAlign(i,o,s,_),yAlign:_}}function alignX(i,o){let{x:s,width:_}=i;return o==="right"?s-=_:o==="center"&&(s-=_/2),s}function alignY(i,o,s){let{y:_,height:$}=i;return o==="top"?_+=s:o==="bottom"?_-=$+s:_-=$/2,_}function getBackgroundPoint(i,o,s,_){const{caretSize:$,caretPadding:et,cornerRadius:tt}=i,{xAlign:j,yAlign:it}=s,st=$+et,{topLeft:ht,topRight:vt,bottomLeft:ft,bottomRight:pt}=toTRBLCorners(tt);let ct=alignX(o,j);const yt=alignY(o,it,st);return it==="center"?j==="left"?ct+=st:j==="right"&&(ct-=st):j==="left"?ct-=Math.max(ht,ft)+$:j==="right"&&(ct+=Math.max(vt,pt)+$),{x:_limitValue(ct,0,_.width-o.width),y:_limitValue(yt,0,_.height-o.height)}}function getAlignedX(i,o,s){const _=toPadding(s.padding);return o==="center"?i.x+i.width/2:o==="right"?i.x+i.width-_.right:i.x+_.left}function getBeforeAfterBodyLines(i){return pushOrConcat([],splitNewlines(i))}function createTooltipContext(i,o,s){return createContext(i,{tooltip:o,tooltipItems:s,type:"tooltip"})}function overrideCallbacks(i,o){const s=o&&o.dataset&&o.dataset.tooltip&&o.dataset.tooltip.callbacks;return s?i.override(s):i}class Tooltip extends Element{constructor(o){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=o.chart||o._chart,this._chart=this.chart,this.options=o.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(o){this.options=o,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const o=this._cachedAnimations;if(o)return o;const s=this.chart,_=this.options.setContext(this.getContext()),$=_.enabled&&s.options.animation&&_.animations,et=new Animations(this.chart,$);return $._cacheable&&(this._cachedAnimations=Object.freeze(et)),et}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(o,s){const{callbacks:_}=s,$=_.beforeTitle.apply(this,[o]),et=_.title.apply(this,[o]),tt=_.afterTitle.apply(this,[o]);let j=[];return j=pushOrConcat(j,splitNewlines($)),j=pushOrConcat(j,splitNewlines(et)),j=pushOrConcat(j,splitNewlines(tt)),j}getBeforeBody(o,s){return getBeforeAfterBodyLines(s.callbacks.beforeBody.apply(this,[o]))}getBody(o,s){const{callbacks:_}=s,$=[];return each(o,et=>{const tt={before:[],lines:[],after:[]},j=overrideCallbacks(_,et);pushOrConcat(tt.before,splitNewlines(j.beforeLabel.call(this,et))),pushOrConcat(tt.lines,j.label.call(this,et)),pushOrConcat(tt.after,splitNewlines(j.afterLabel.call(this,et))),$.push(tt)}),$}getAfterBody(o,s){return getBeforeAfterBodyLines(s.callbacks.afterBody.apply(this,[o]))}getFooter(o,s){const{callbacks:_}=s,$=_.beforeFooter.apply(this,[o]),et=_.footer.apply(this,[o]),tt=_.afterFooter.apply(this,[o]);let j=[];return j=pushOrConcat(j,splitNewlines($)),j=pushOrConcat(j,splitNewlines(et)),j=pushOrConcat(j,splitNewlines(tt)),j}_createItems(o){const s=this._active,_=this.chart.data,$=[],et=[],tt=[];let j=[],it,st;for(it=0,st=s.length;it<st;++it)j.push(createTooltipItem(this.chart,s[it]));return o.filter&&(j=j.filter((ht,vt,ft)=>o.filter(ht,vt,ft,_))),o.itemSort&&(j=j.sort((ht,vt)=>o.itemSort(ht,vt,_))),each(j,ht=>{const vt=overrideCallbacks(o.callbacks,ht);$.push(vt.labelColor.call(this,ht)),et.push(vt.labelPointStyle.call(this,ht)),tt.push(vt.labelTextColor.call(this,ht))}),this.labelColors=$,this.labelPointStyles=et,this.labelTextColors=tt,this.dataPoints=j,j}update(o,s){const _=this.options.setContext(this.getContext()),$=this._active;let et,tt=[];if(!$.length)this.opacity!==0&&(et={opacity:0});else{const j=positioners[_.position].call(this,$,this._eventPosition);tt=this._createItems(_),this.title=this.getTitle(tt,_),this.beforeBody=this.getBeforeBody(tt,_),this.body=this.getBody(tt,_),this.afterBody=this.getAfterBody(tt,_),this.footer=this.getFooter(tt,_);const it=this._size=getTooltipSize(this,_),st=Object.assign({},j,it),ht=determineAlignment(this.chart,_,st),vt=getBackgroundPoint(_,st,ht,this.chart);this.xAlign=ht.xAlign,this.yAlign=ht.yAlign,et={opacity:1,x:vt.x,y:vt.y,width:it.width,height:it.height,caretX:j.x,caretY:j.y}}this._tooltipItems=tt,this.$context=void 0,et&&this._resolveAnimations().update(this,et),o&&_.external&&_.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(o,s,_,$){const et=this.getCaretPosition(o,_,$);s.lineTo(et.x1,et.y1),s.lineTo(et.x2,et.y2),s.lineTo(et.x3,et.y3)}getCaretPosition(o,s,_){const{xAlign:$,yAlign:et}=this,{caretSize:tt,cornerRadius:j}=_,{topLeft:it,topRight:st,bottomLeft:ht,bottomRight:vt}=toTRBLCorners(j),{x:ft,y:pt}=o,{width:ct,height:yt}=s;let Et,Ot,Lt,Tt,It,mt;return et==="center"?(It=pt+yt/2,$==="left"?(Et=ft,Ot=Et-tt,Tt=It+tt,mt=It-tt):(Et=ft+ct,Ot=Et+tt,Tt=It-tt,mt=It+tt),Lt=Et):($==="left"?Ot=ft+Math.max(it,ht)+tt:$==="right"?Ot=ft+ct-Math.max(st,vt)-tt:Ot=this.caretX,et==="top"?(Tt=pt,It=Tt-tt,Et=Ot-tt,Lt=Ot+tt):(Tt=pt+yt,It=Tt+tt,Et=Ot+tt,Lt=Ot-tt),mt=Tt),{x1:Et,x2:Ot,x3:Lt,y1:Tt,y2:It,y3:mt}}drawTitle(o,s,_){const $=this.title,et=$.length;let tt,j,it;if(et){const st=getRtlAdapter(_.rtl,this.x,this.width);for(o.x=getAlignedX(this,_.titleAlign,_),s.textAlign=st.textAlign(_.titleAlign),s.textBaseline="middle",tt=toFont(_.titleFont),j=_.titleSpacing,s.fillStyle=_.titleColor,s.font=tt.string,it=0;it<et;++it)s.fillText($[it],st.x(o.x),o.y+tt.lineHeight/2),o.y+=tt.lineHeight+j,it+1===et&&(o.y+=_.titleMarginBottom-j)}}_drawColorBox(o,s,_,$,et){const tt=this.labelColors[_],j=this.labelPointStyles[_],{boxHeight:it,boxWidth:st,boxPadding:ht}=et,vt=toFont(et.bodyFont),ft=getAlignedX(this,"left",et),pt=$.x(ft),ct=it<vt.lineHeight?(vt.lineHeight-it)/2:0,yt=s.y+ct;if(et.usePointStyle){const Et={radius:Math.min(st,it)/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:1},Ot=$.leftForLtr(pt,st)+st/2,Lt=yt+it/2;o.strokeStyle=et.multiKeyBackground,o.fillStyle=et.multiKeyBackground,drawPoint(o,Et,Ot,Lt),o.strokeStyle=tt.borderColor,o.fillStyle=tt.backgroundColor,drawPoint(o,Et,Ot,Lt)}else{o.lineWidth=tt.borderWidth||1,o.strokeStyle=tt.borderColor,o.setLineDash(tt.borderDash||[]),o.lineDashOffset=tt.borderDashOffset||0;const Et=$.leftForLtr(pt,st-ht),Ot=$.leftForLtr($.xPlus(pt,1),st-ht-2),Lt=toTRBLCorners(tt.borderRadius);Object.values(Lt).some(Tt=>Tt!==0)?(o.beginPath(),o.fillStyle=et.multiKeyBackground,addRoundedRectPath(o,{x:Et,y:yt,w:st,h:it,radius:Lt}),o.fill(),o.stroke(),o.fillStyle=tt.backgroundColor,o.beginPath(),addRoundedRectPath(o,{x:Ot,y:yt+1,w:st-2,h:it-2,radius:Lt}),o.fill()):(o.fillStyle=et.multiKeyBackground,o.fillRect(Et,yt,st,it),o.strokeRect(Et,yt,st,it),o.fillStyle=tt.backgroundColor,o.fillRect(Ot,yt+1,st-2,it-2))}o.fillStyle=this.labelTextColors[_]}drawBody(o,s,_){const{body:$}=this,{bodySpacing:et,bodyAlign:tt,displayColors:j,boxHeight:it,boxWidth:st,boxPadding:ht}=_,vt=toFont(_.bodyFont);let ft=vt.lineHeight,pt=0;const ct=getRtlAdapter(_.rtl,this.x,this.width),yt=function(sn){s.fillText(sn,ct.x(o.x+pt),o.y+ft/2),o.y+=ft+et},Et=ct.textAlign(tt);let Ot,Lt,Tt,It,mt,Bt,nn;for(s.textAlign=tt,s.textBaseline="middle",s.font=vt.string,o.x=getAlignedX(this,Et,_),s.fillStyle=_.bodyColor,each(this.beforeBody,yt),pt=j&&Et!=="right"?tt==="center"?st/2+ht:st+2+ht:0,It=0,Bt=$.length;It<Bt;++It){for(Ot=$[It],Lt=this.labelTextColors[It],s.fillStyle=Lt,each(Ot.before,yt),Tt=Ot.lines,j&&Tt.length&&(this._drawColorBox(s,o,It,ct,_),ft=Math.max(vt.lineHeight,it)),mt=0,nn=Tt.length;mt<nn;++mt)yt(Tt[mt]),ft=vt.lineHeight;each(Ot.after,yt)}pt=0,ft=vt.lineHeight,each(this.afterBody,yt),o.y-=et}drawFooter(o,s,_){const $=this.footer,et=$.length;let tt,j;if(et){const it=getRtlAdapter(_.rtl,this.x,this.width);for(o.x=getAlignedX(this,_.footerAlign,_),o.y+=_.footerMarginTop,s.textAlign=it.textAlign(_.footerAlign),s.textBaseline="middle",tt=toFont(_.footerFont),s.fillStyle=_.footerColor,s.font=tt.string,j=0;j<et;++j)s.fillText($[j],it.x(o.x),o.y+tt.lineHeight/2),o.y+=tt.lineHeight+_.footerSpacing}}drawBackground(o,s,_,$){const{xAlign:et,yAlign:tt}=this,{x:j,y:it}=o,{width:st,height:ht}=_,{topLeft:vt,topRight:ft,bottomLeft:pt,bottomRight:ct}=toTRBLCorners($.cornerRadius);s.fillStyle=$.backgroundColor,s.strokeStyle=$.borderColor,s.lineWidth=$.borderWidth,s.beginPath(),s.moveTo(j+vt,it),tt==="top"&&this.drawCaret(o,s,_,$),s.lineTo(j+st-ft,it),s.quadraticCurveTo(j+st,it,j+st,it+ft),tt==="center"&&et==="right"&&this.drawCaret(o,s,_,$),s.lineTo(j+st,it+ht-ct),s.quadraticCurveTo(j+st,it+ht,j+st-ct,it+ht),tt==="bottom"&&this.drawCaret(o,s,_,$),s.lineTo(j+pt,it+ht),s.quadraticCurveTo(j,it+ht,j,it+ht-pt),tt==="center"&&et==="left"&&this.drawCaret(o,s,_,$),s.lineTo(j,it+vt),s.quadraticCurveTo(j,it,j+vt,it),s.closePath(),s.fill(),$.borderWidth>0&&s.stroke()}_updateAnimationTarget(o){const s=this.chart,_=this.$animations,$=_&&_.x,et=_&&_.y;if($||et){const tt=positioners[o.position].call(this,this._active,this._eventPosition);if(!tt)return;const j=this._size=getTooltipSize(this,o),it=Object.assign({},tt,this._size),st=determineAlignment(s,o,it),ht=getBackgroundPoint(o,it,st,s);($._to!==ht.x||et._to!==ht.y)&&(this.xAlign=st.xAlign,this.yAlign=st.yAlign,this.width=j.width,this.height=j.height,this.caretX=tt.x,this.caretY=tt.y,this._resolveAnimations().update(this,ht))}}draw(o){const s=this.options.setContext(this.getContext());let _=this.opacity;if(!_)return;this._updateAnimationTarget(s);const $={width:this.width,height:this.height},et={x:this.x,y:this.y};_=Math.abs(_)<.001?0:_;const tt=toPadding(s.padding),j=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&j&&(o.save(),o.globalAlpha=_,this.drawBackground(et,o,$,s),overrideTextDirection(o,s.textDirection),et.y+=tt.top,this.drawTitle(et,o,s),this.drawBody(et,o,s),this.drawFooter(et,o,s),restoreTextDirection(o,s.textDirection),o.restore())}getActiveElements(){return this._active||[]}setActiveElements(o,s){const _=this._active,$=o.map(({datasetIndex:j,index:it})=>{const st=this.chart.getDatasetMeta(j);if(!st)throw new Error("Cannot find a dataset at index "+j);return{datasetIndex:j,element:st.data[it],index:it}}),et=!_elementsEqual(_,$),tt=this._positionChanged($,s);(et||tt)&&(this._active=$,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(o,s,_=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const $=this.options,et=this._active||[],tt=this._getActiveElements(o,et,s,_),j=this._positionChanged(tt,o),it=s||!_elementsEqual(tt,et)||j;return it&&(this._active=tt,($.enabled||$.external)&&(this._eventPosition={x:o.x,y:o.y},this.update(!0,s))),it}_getActiveElements(o,s,_,$){const et=this.options;if(o.type==="mouseout")return[];if(!$)return s;const tt=this.chart.getElementsAtEventForMode(o,et.mode,et,_);return et.reverse&&tt.reverse(),tt}_positionChanged(o,s){const{caretX:_,caretY:$,options:et}=this,tt=positioners[et.position].call(this,o,s);return tt!==!1&&(_!==tt.x||$!==tt.y)}}Tooltip.positioners=positioners;var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(i,o,s){s&&(i.tooltip=new Tooltip({chart:i,options:s}))},beforeUpdate(i,o,s){i.tooltip&&i.tooltip.initialize(s)},reset(i,o,s){i.tooltip&&i.tooltip.initialize(s)},afterDraw(i){const o=i.tooltip,s={tooltip:o};i.notifyPlugins("beforeTooltipDraw",s)!==!1&&(o&&o.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",s))},afterEvent(i,o){if(i.tooltip){const s=o.replay;i.tooltip.handleEvent(o.event,s,o.inChartArea)&&(o.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,o)=>o.bodyFont.size,boxWidth:(i,o)=>o.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop$1,title(i){if(i.length>0){const o=i[0],s=o.chart.data.labels,_=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return o.dataset.label||"";if(o.label)return o.label;if(_>0&&o.dataIndex<_)return s[o.dataIndex]}return""},afterTitle:noop$1,beforeBody:noop$1,beforeLabel:noop$1,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let o=i.dataset.label||"";o&&(o+=": ");const s=i.formattedValue;return isNullOrUndef(s)||(o+=s),o},labelColor(i){const s=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const s=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:noop$1,afterBody:noop$1,beforeFooter:noop$1,footer:noop$1,afterFooter:noop$1}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Decimation:plugin_decimation,Filler:plugin_filler,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});const addIfString=(i,o,s,_)=>(typeof o=="string"?(s=i.push(o)-1,_.unshift({index:s,label:o})):isNaN(o)&&(s=null),s);function findOrAddLabel(i,o,s,_){const $=i.indexOf(o);if($===-1)return addIfString(i,o,s,_);const et=i.lastIndexOf(o);return $!==et?s:$}const validIndex=(i,o)=>i===null?null:_limitValue(Math.round(i),0,o);class CategoryScale extends Scale{constructor(o){super(o),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(o){const s=this._addedLabels;if(s.length){const _=this.getLabels();for(const{index:$,label:et}of s)_[$]===et&&_.splice($,1);this._addedLabels=[]}super.init(o)}parse(o,s){if(isNullOrUndef(o))return null;const _=this.getLabels();return s=isFinite(s)&&_[s]===o?s:findOrAddLabel(_,o,valueOrDefault(s,o),this._addedLabels),validIndex(s,_.length-1)}determineDataLimits(){const{minDefined:o,maxDefined:s}=this.getUserBounds();let{min:_,max:$}=this.getMinMax(!0);this.options.bounds==="ticks"&&(o||(_=0),s||($=this.getLabels().length-1)),this.min=_,this.max=$}buildTicks(){const o=this.min,s=this.max,_=this.options.offset,$=[];let et=this.getLabels();et=o===0&&s===et.length-1?et:et.slice(o,s+1),this._valueRange=Math.max(et.length-(_?0:1),1),this._startValue=this.min-(_?.5:0);for(let tt=o;tt<=s;tt++)$.push({value:tt});return $}getLabelForValue(o){const s=this.getLabels();return o>=0&&o<s.length?s[o]:o}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(o){return typeof o!="number"&&(o=this.parse(o)),o===null?NaN:this.getPixelForDecimal((o-this._startValue)/this._valueRange)}getPixelForTick(o){const s=this.ticks;return o<0||o>s.length-1?null:this.getPixelForValue(s[o].value)}getValueForPixel(o){return Math.round(this._startValue+this.getDecimalForPixel(o)*this._valueRange)}getBasePixel(){return this.bottom}}CategoryScale.id="category";CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};function generateTicks$1(i,o){const s=[],{bounds:$,step:et,min:tt,max:j,precision:it,count:st,maxTicks:ht,maxDigits:vt,includeBounds:ft}=i,pt=et||1,ct=ht-1,{min:yt,max:Et}=o,Ot=!isNullOrUndef(tt),Lt=!isNullOrUndef(j),Tt=!isNullOrUndef(st),It=(Et-yt)/(vt+1);let mt=niceNum((Et-yt)/ct/pt)*pt,Bt,nn,sn,xt;if(mt<1e-14&&!Ot&&!Lt)return[{value:yt},{value:Et}];xt=Math.ceil(Et/mt)-Math.floor(yt/mt),xt>ct&&(mt=niceNum(xt*mt/ct/pt)*pt),isNullOrUndef(it)||(Bt=Math.pow(10,it),mt=Math.ceil(mt*Bt)/Bt),$==="ticks"?(nn=Math.floor(yt/mt)*mt,sn=Math.ceil(Et/mt)*mt):(nn=yt,sn=Et),Ot&&Lt&&et&&almostWhole((j-tt)/et,mt/1e3)?(xt=Math.round(Math.min((j-tt)/mt,ht)),mt=(j-tt)/xt,nn=tt,sn=j):Tt?(nn=Ot?tt:nn,sn=Lt?j:sn,xt=st-1,mt=(sn-nn)/xt):(xt=(sn-nn)/mt,almostEquals(xt,Math.round(xt),mt/1e3)?xt=Math.round(xt):xt=Math.ceil(xt));const St=Math.max(_decimalPlaces(mt),_decimalPlaces(nn));Bt=Math.pow(10,isNullOrUndef(it)?St:it),nn=Math.round(nn*Bt)/Bt,sn=Math.round(sn*Bt)/Bt;let Nt=0;for(Ot&&(ft&&nn!==tt?(s.push({value:tt}),nn<tt&&Nt++,almostEquals(Math.round((nn+Nt*mt)*Bt)/Bt,tt,relativeLabelSize(tt,It,i))&&Nt++):nn<tt&&Nt++);Nt<xt;++Nt)s.push({value:Math.round((nn+Nt*mt)*Bt)/Bt});return Lt&&ft&&sn!==j?s.length&&almostEquals(s[s.length-1].value,j,relativeLabelSize(j,It,i))?s[s.length-1].value=j:s.push({value:j}):(!Lt||sn===j)&&s.push({value:sn}),s}function relativeLabelSize(i,o,{horizontal:s,minRotation:_}){const $=toRadians(_),et=(s?Math.sin($):Math.cos($))||.001,tt=.75*o*(""+i).length;return Math.min(o/et,tt)}class LinearScaleBase extends Scale{constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(o,s){return isNullOrUndef(o)||(typeof o=="number"||o instanceof Number)&&!isFinite(+o)?null:+o}handleTickRangeOptions(){const{beginAtZero:o}=this.options,{minDefined:s,maxDefined:_}=this.getUserBounds();let{min:$,max:et}=this;const tt=it=>$=s?$:it,j=it=>et=_?et:it;if(o){const it=sign($),st=sign(et);it<0&&st<0?j(0):it>0&&st>0&&tt(0)}if($===et){let it=1;(et>=Number.MAX_SAFE_INTEGER||$<=Number.MIN_SAFE_INTEGER)&&(it=Math.abs(et*.05)),j(et+it),o||tt($-it)}this.min=$,this.max=et}getTickLimit(){const o=this.options.ticks;let{maxTicksLimit:s,stepSize:_}=o,$;return _?($=Math.ceil(this.max/_)-Math.floor(this.min/_)+1,$>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${_} would result generating up to ${$} ticks. Limiting to 1000.`),$=1e3)):($=this.computeTickLimit(),s=s||11),s&&($=Math.min(s,$)),$}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const o=this.options,s=o.ticks;let _=this.getTickLimit();_=Math.max(2,_);const $={maxTicks:_,bounds:o.bounds,min:o.min,max:o.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},et=this._range||this,tt=generateTicks$1($,et);return o.bounds==="ticks"&&_setMinAndMaxByKey(tt,this,"value"),o.reverse?(tt.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),tt}configure(){const o=this.ticks;let s=this.min,_=this.max;if(super.configure(),this.options.offset&&o.length){const $=(_-s)/Math.max(o.length-1,1)/2;s-=$,_+=$}this._startValue=s,this._endValue=_,this._valueRange=_-s}getLabelForValue(o){return formatNumber(o,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:o,max:s}=this.getMinMax(!0);this.min=isNumberFinite(o)?o:0,this.max=isNumberFinite(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const o=this.isHorizontal(),s=o?this.width:this.height,_=toRadians(this.options.ticks.minRotation),$=(o?Math.sin(_):Math.cos(_))||.001,et=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,et.lineHeight/$))}getPixelForValue(o){return o===null?NaN:this.getPixelForDecimal((o-this._startValue)/this._valueRange)}getValueForPixel(o){return this._startValue+this.getDecimalForPixel(o)*this._valueRange}}LinearScale.id="linear";LinearScale.defaults={ticks:{callback:Ticks.formatters.numeric}};function isMajor(i){return i/Math.pow(10,Math.floor(log10(i)))===1}function generateTicks(i,o){const s=Math.floor(log10(o.max)),_=Math.ceil(o.max/Math.pow(10,s)),$=[];let et=finiteOrDefault(i.min,Math.pow(10,Math.floor(log10(o.min)))),tt=Math.floor(log10(et)),j=Math.floor(et/Math.pow(10,tt)),it=tt<0?Math.pow(10,Math.abs(tt)):1;do $.push({value:et,major:isMajor(et)}),++j,j===10&&(j=1,++tt,it=tt>=0?1:it),et=Math.round(j*Math.pow(10,tt)*it)/it;while(tt<s||tt===s&&j<_);const st=finiteOrDefault(i.max,et);return $.push({value:st,major:isMajor(et)}),$}class LogarithmicScale extends Scale{constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(o,s){const _=LinearScaleBase.prototype.parse.apply(this,[o,s]);if(_===0){this._zero=!0;return}return isNumberFinite(_)&&_>0?_:null}determineDataLimits(){const{min:o,max:s}=this.getMinMax(!0);this.min=isNumberFinite(o)?Math.max(0,o):null,this.max=isNumberFinite(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:o,maxDefined:s}=this.getUserBounds();let _=this.min,$=this.max;const et=it=>_=o?_:it,tt=it=>$=s?$:it,j=(it,st)=>Math.pow(10,Math.floor(log10(it))+st);_===$&&(_<=0?(et(1),tt(10)):(et(j(_,-1)),tt(j($,1)))),_<=0&&et(j($,-1)),$<=0&&tt(j(_,1)),this._zero&&this.min!==this._suggestedMin&&_===j(this.min,0)&&et(j(_,-1)),this.min=_,this.max=$}buildTicks(){const o=this.options,s={min:this._userMin,max:this._userMax},_=generateTicks(s,this);return o.bounds==="ticks"&&_setMinAndMaxByKey(_,this,"value"),o.reverse?(_.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),_}getLabelForValue(o){return o===void 0?"0":formatNumber(o,this.chart.options.locale,this.options.ticks.format)}configure(){const o=this.min;super.configure(),this._startValue=log10(o),this._valueRange=log10(this.max)-log10(o)}getPixelForValue(o){return(o===void 0||o===0)&&(o=this.min),o===null||isNaN(o)?NaN:this.getPixelForDecimal(o===this.min?0:(log10(o)-this._startValue)/this._valueRange)}getValueForPixel(o){const s=this.getDecimalForPixel(o);return Math.pow(10,this._startValue+s*this._valueRange)}}LogarithmicScale.id="logarithmic";LogarithmicScale.defaults={ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}};function getTickBackdropHeight(i){const o=i.ticks;if(o.display&&i.display){const s=toPadding(o.backdropPadding);return valueOrDefault(o.font&&o.font.size,defaults.font.size)+s.height}return 0}function measureLabelSize(i,o,s){return s=isArray(s)?s:[s],{w:_longestText(i,o.string,s),h:s.length*o.lineHeight}}function determineLimits(i,o,s,_,$){return i===_||i===$?{start:o-s/2,end:o+s/2}:i<_||i>$?{start:o-s,end:o}:{start:o,end:o+s}}function fitWithPointLabels(i){const o={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},s=Object.assign({},o),_=[],$=[],et=i._pointLabels.length,tt=i.options.pointLabels,j=tt.centerPointLabels?PI/et:0;for(let it=0;it<et;it++){const st=tt.setContext(i.getPointLabelContext(it));$[it]=st.padding;const ht=i.getPointPosition(it,i.drawingArea+$[it],j),vt=toFont(st.font),ft=measureLabelSize(i.ctx,vt,i._pointLabels[it]);_[it]=ft;const pt=_normalizeAngle(i.getIndexAngle(it)+j),ct=Math.round(toDegrees(pt)),yt=determineLimits(ct,ht.x,ft.w,0,180),Et=determineLimits(ct,ht.y,ft.h,90,270);updateLimits(s,o,pt,yt,Et)}i.setCenterPoint(o.l-s.l,s.r-o.r,o.t-s.t,s.b-o.b),i._pointLabelItems=buildPointLabelItems(i,_,$)}function updateLimits(i,o,s,_,$){const et=Math.abs(Math.sin(s)),tt=Math.abs(Math.cos(s));let j=0,it=0;_.start<o.l?(j=(o.l-_.start)/et,i.l=Math.min(i.l,o.l-j)):_.end>o.r&&(j=(_.end-o.r)/et,i.r=Math.max(i.r,o.r+j)),$.start<o.t?(it=(o.t-$.start)/tt,i.t=Math.min(i.t,o.t-it)):$.end>o.b&&(it=($.end-o.b)/tt,i.b=Math.max(i.b,o.b+it))}function buildPointLabelItems(i,o,s){const _=[],$=i._pointLabels.length,et=i.options,tt=getTickBackdropHeight(et)/2,j=i.drawingArea,it=et.pointLabels.centerPointLabels?PI/$:0;for(let st=0;st<$;st++){const ht=i.getPointPosition(st,j+tt+s[st],it),vt=Math.round(toDegrees(_normalizeAngle(ht.angle+HALF_PI))),ft=o[st],pt=yForAngle(ht.y,ft.h,vt),ct=getTextAlignForAngle(vt),yt=leftForTextAlign(ht.x,ft.w,ct);_.push({x:ht.x,y:pt,textAlign:ct,left:yt,top:pt,right:yt+ft.w,bottom:pt+ft.h})}return _}function getTextAlignForAngle(i){return i===0||i===180?"center":i<180?"left":"right"}function leftForTextAlign(i,o,s){return s==="right"?i-=o:s==="center"&&(i-=o/2),i}function yForAngle(i,o,s){return s===90||s===270?i-=o/2:(s>270||s<90)&&(i-=o),i}function drawPointLabels(i,o){const{ctx:s,options:{pointLabels:_}}=i;for(let $=o-1;$>=0;$--){const et=_.setContext(i.getPointLabelContext($)),tt=toFont(et.font),{x:j,y:it,textAlign:st,left:ht,top:vt,right:ft,bottom:pt}=i._pointLabelItems[$],{backdropColor:ct}=et;if(!isNullOrUndef(ct)){const yt=toPadding(et.backdropPadding);s.fillStyle=ct,s.fillRect(ht-yt.left,vt-yt.top,ft-ht+yt.width,pt-vt+yt.height)}renderText(s,i._pointLabels[$],j,it+tt.lineHeight/2,tt,{color:et.color,textAlign:st,textBaseline:"middle"})}}function pathRadiusLine(i,o,s,_){const{ctx:$}=i;if(s)$.arc(i.xCenter,i.yCenter,o,0,TAU);else{let et=i.getPointPosition(0,o);$.moveTo(et.x,et.y);for(let tt=1;tt<_;tt++)et=i.getPointPosition(tt,o),$.lineTo(et.x,et.y)}}function drawRadiusLine(i,o,s,_){const $=i.ctx,et=o.circular,{color:tt,lineWidth:j}=o;!et&&!_||!tt||!j||s<0||($.save(),$.strokeStyle=tt,$.lineWidth=j,$.setLineDash(o.borderDash),$.lineDashOffset=o.borderDashOffset,$.beginPath(),pathRadiusLine(i,s,et,_),$.closePath(),$.stroke(),$.restore())}function createPointLabelContext(i,o,s){return createContext(i,{label:s,index:o,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(o){super(o),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const o=this._padding=toPadding(getTickBackdropHeight(this.options)/2),s=this.width=this.maxWidth-o.width,_=this.height=this.maxHeight-o.height;this.xCenter=Math.floor(this.left+s/2+o.left),this.yCenter=Math.floor(this.top+_/2+o.top),this.drawingArea=Math.floor(Math.min(s,_)/2)}determineDataLimits(){const{min:o,max:s}=this.getMinMax(!1);this.min=isNumberFinite(o)&&!isNaN(o)?o:0,this.max=isNumberFinite(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(o){LinearScaleBase.prototype.generateTickLabels.call(this,o),this._pointLabels=this.getLabels().map((s,_)=>{const $=callback(this.options.pointLabels.callback,[s,_],this);return $||$===0?$:""}).filter((s,_)=>this.chart.getDataVisibility(_))}fit(){const o=this.options;o.display&&o.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(o,s,_,$){this.xCenter+=Math.floor((o-s)/2),this.yCenter+=Math.floor((_-$)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(o,s,_,$))}getIndexAngle(o){const s=TAU/(this._pointLabels.length||1),_=this.options.startAngle||0;return _normalizeAngle(o*s+toRadians(_))}getDistanceFromCenterForValue(o){if(isNullOrUndef(o))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-o)*s:(o-this.min)*s}getValueForDistanceFromCenter(o){if(isNullOrUndef(o))return NaN;const s=o/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(o){const s=this._pointLabels||[];if(o>=0&&o<s.length){const _=s[o];return createPointLabelContext(this.getContext(),o,_)}}getPointPosition(o,s,_=0){const $=this.getIndexAngle(o)-HALF_PI+_;return{x:Math.cos($)*s+this.xCenter,y:Math.sin($)*s+this.yCenter,angle:$}}getPointPositionForValue(o,s){return this.getPointPosition(o,this.getDistanceFromCenterForValue(s))}getBasePosition(o){return this.getPointPositionForValue(o||0,this.getBaseValue())}getPointLabelPosition(o){const{left:s,top:_,right:$,bottom:et}=this._pointLabelItems[o];return{left:s,top:_,right:$,bottom:et}}drawBackground(){const{backgroundColor:o,grid:{circular:s}}=this.options;if(o){const _=this.ctx;_.save(),_.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),_.closePath(),_.fillStyle=o,_.fill(),_.restore()}}drawGrid(){const o=this.ctx,s=this.options,{angleLines:_,grid:$}=s,et=this._pointLabels.length;let tt,j,it;if(s.pointLabels.display&&drawPointLabels(this,et),$.display&&this.ticks.forEach((st,ht)=>{if(ht!==0){j=this.getDistanceFromCenterForValue(st.value);const vt=$.setContext(this.getContext(ht-1));drawRadiusLine(this,vt,j,et)}}),_.display){for(o.save(),tt=et-1;tt>=0;tt--){const st=_.setContext(this.getPointLabelContext(tt)),{color:ht,lineWidth:vt}=st;!vt||!ht||(o.lineWidth=vt,o.strokeStyle=ht,o.setLineDash(st.borderDash),o.lineDashOffset=st.borderDashOffset,j=this.getDistanceFromCenterForValue(s.ticks.reverse?this.min:this.max),it=this.getPointPosition(tt,j),o.beginPath(),o.moveTo(this.xCenter,this.yCenter),o.lineTo(it.x,it.y),o.stroke())}o.restore()}}drawBorder(){}drawLabels(){const o=this.ctx,s=this.options,_=s.ticks;if(!_.display)return;const $=this.getIndexAngle(0);let et,tt;o.save(),o.translate(this.xCenter,this.yCenter),o.rotate($),o.textAlign="center",o.textBaseline="middle",this.ticks.forEach((j,it)=>{if(it===0&&!s.reverse)return;const st=_.setContext(this.getContext(it)),ht=toFont(st.font);if(et=this.getDistanceFromCenterForValue(this.ticks[it].value),st.showLabelBackdrop){o.font=ht.string,tt=o.measureText(j.label).width,o.fillStyle=st.backdropColor;const vt=toPadding(st.backdropPadding);o.fillRect(-tt/2-vt.left,-et-ht.size/2-vt.top,tt+vt.width,ht.size+vt.height)}renderText(o,j.label,0,-et,ht,{color:st.color})}),o.restore()}drawTitle(){}}RadialLinearScale.id="radialLinear";RadialLinearScale.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(i){return i},padding:5,centerPointLabels:!1}};RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(i,o){return i-o}function parse(i,o){if(isNullOrUndef(o))return null;const s=i._adapter,{parser:_,round:$,isoWeekday:et}=i._parseOpts;let tt=o;return typeof _=="function"&&(tt=_(tt)),isNumberFinite(tt)||(tt=typeof _=="string"?s.parse(tt,_):s.parse(tt)),tt===null?null:($&&(tt=$==="week"&&(isNumber(et)||et===!0)?s.startOf(tt,"isoWeek",et):s.startOf(tt,$)),+tt)}function determineUnitForAutoTicks(i,o,s,_){const $=UNITS.length;for(let et=UNITS.indexOf(i);et<$-1;++et){const tt=INTERVALS[UNITS[et]],j=tt.steps?tt.steps:Number.MAX_SAFE_INTEGER;if(tt.common&&Math.ceil((s-o)/(j*tt.size))<=_)return UNITS[et]}return UNITS[$-1]}function determineUnitForFormatting(i,o,s,_,$){for(let et=UNITS.length-1;et>=UNITS.indexOf(s);et--){const tt=UNITS[et];if(INTERVALS[tt].common&&i._adapter.diff($,_,tt)>=o-1)return tt}return UNITS[s?UNITS.indexOf(s):0]}function determineMajorUnit(i){for(let o=UNITS.indexOf(i)+1,s=UNITS.length;o<s;++o)if(INTERVALS[UNITS[o]].common)return UNITS[o]}function addTick(i,o,s){if(!s)i[o]=!0;else if(s.length){const{lo:_,hi:$}=_lookup(s,o),et=s[_]>=o?s[_]:s[$];i[et]=!0}}function setMajorTicks(i,o,s,_){const $=i._adapter,et=+$.startOf(o[0].value,_),tt=o[o.length-1].value;let j,it;for(j=et;j<=tt;j=+$.add(j,1,_))it=s[j],it>=0&&(o[it].major=!0);return o}function ticksFromTimestamps(i,o,s){const _=[],$={},et=o.length;let tt,j;for(tt=0;tt<et;++tt)j=o[tt],$[j]=tt,_.push({value:j,major:!1});return et===0||!s?_:setMajorTicks(i,_,$,s)}class TimeScale extends Scale{constructor(o){super(o),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(o,s){const _=o.time||(o.time={}),$=this._adapter=new adapters._date(o.adapters.date);mergeIf(_.displayFormats,$.formats()),this._parseOpts={parser:_.parser,round:_.round,isoWeekday:_.isoWeekday},super.init(o),this._normalized=s.normalized}parse(o,s){return o===void 0?null:parse(this,o)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const o=this.options,s=this._adapter,_=o.time.unit||"day";let{min:$,max:et,minDefined:tt,maxDefined:j}=this.getUserBounds();function it(st){!tt&&!isNaN(st.min)&&($=Math.min($,st.min)),!j&&!isNaN(st.max)&&(et=Math.max(et,st.max))}(!tt||!j)&&(it(this._getLabelBounds()),(o.bounds!=="ticks"||o.ticks.source!=="labels")&&it(this.getMinMax(!1))),$=isNumberFinite($)&&!isNaN($)?$:+s.startOf(Date.now(),_),et=isNumberFinite(et)&&!isNaN(et)?et:+s.endOf(Date.now(),_)+1,this.min=Math.min($,et-1),this.max=Math.max($+1,et)}_getLabelBounds(){const o=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY;return o.length&&(s=o[0],_=o[o.length-1]),{min:s,max:_}}buildTicks(){const o=this.options,s=o.time,_=o.ticks,$=_.source==="labels"?this.getLabelTimestamps():this._generate();o.bounds==="ticks"&&$.length&&(this.min=this._userMin||$[0],this.max=this._userMax||$[$.length-1]);const et=this.min,tt=this.max,j=_filterBetween($,et,tt);return this._unit=s.unit||(_.autoSkip?determineUnitForAutoTicks(s.minUnit,this.min,this.max,this._getLabelCapacity(et)):determineUnitForFormatting(this,j.length,s.minUnit,this.min,this.max)),this._majorUnit=!_.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets($),o.reverse&&j.reverse(),ticksFromTimestamps(this,j,this._majorUnit)}initOffsets(o){let s=0,_=0,$,et;this.options.offset&&o.length&&($=this.getDecimalForValue(o[0]),o.length===1?s=1-$:s=(this.getDecimalForValue(o[1])-$)/2,et=this.getDecimalForValue(o[o.length-1]),o.length===1?_=et:_=(et-this.getDecimalForValue(o[o.length-2]))/2);const tt=o.length<3?.5:.25;s=_limitValue(s,0,tt),_=_limitValue(_,0,tt),this._offsets={start:s,end:_,factor:1/(s+1+_)}}_generate(){const o=this._adapter,s=this.min,_=this.max,$=this.options,et=$.time,tt=et.unit||determineUnitForAutoTicks(et.minUnit,s,_,this._getLabelCapacity(s)),j=valueOrDefault(et.stepSize,1),it=tt==="week"?et.isoWeekday:!1,st=isNumber(it)||it===!0,ht={};let vt=s,ft,pt;if(st&&(vt=+o.startOf(vt,"isoWeek",it)),vt=+o.startOf(vt,st?"day":tt),o.diff(_,s,tt)>1e5*j)throw new Error(s+" and "+_+" are too far apart with stepSize of "+j+" "+tt);const ct=$.ticks.source==="data"&&this.getDataTimestamps();for(ft=vt,pt=0;ft<_;ft=+o.add(ft,j,tt),pt++)addTick(ht,ft,ct);return(ft===_||$.bounds==="ticks"||pt===1)&&addTick(ht,ft,ct),Object.keys(ht).sort((yt,Et)=>yt-Et).map(yt=>+yt)}getLabelForValue(o){const s=this._adapter,_=this.options.time;return _.tooltipFormat?s.format(o,_.tooltipFormat):s.format(o,_.displayFormats.datetime)}_tickFormatFunction(o,s,_,$){const et=this.options,tt=et.time.displayFormats,j=this._unit,it=this._majorUnit,st=j&&tt[j],ht=it&&tt[it],vt=_[s],ft=it&&ht&&vt&&vt.major,pt=this._adapter.format(o,$||(ft?ht:st)),ct=et.ticks.callback;return ct?callback(ct,[pt,s,_],this):pt}generateTickLabels(o){let s,_,$;for(s=0,_=o.length;s<_;++s)$=o[s],$.label=this._tickFormatFunction($.value,s,o)}getDecimalForValue(o){return o===null?NaN:(o-this.min)/(this.max-this.min)}getPixelForValue(o){const s=this._offsets,_=this.getDecimalForValue(o);return this.getPixelForDecimal((s.start+_)*s.factor)}getValueForPixel(o){const s=this._offsets,_=this.getDecimalForPixel(o)/s.factor-s.end;return this.min+_*(this.max-this.min)}_getLabelSize(o){const s=this.options.ticks,_=this.ctx.measureText(o).width,$=toRadians(this.isHorizontal()?s.maxRotation:s.minRotation),et=Math.cos($),tt=Math.sin($),j=this._resolveTickFontOptions(0).size;return{w:_*et+j*tt,h:_*tt+j*et}}_getLabelCapacity(o){const s=this.options.time,_=s.displayFormats,$=_[s.unit]||_.millisecond,et=this._tickFormatFunction(o,0,ticksFromTimestamps(this,[o],this._majorUnit),$),tt=this._getLabelSize(et),j=Math.floor(this.isHorizontal()?this.width/tt.w:this.height/tt.h)-1;return j>0?j:1}getDataTimestamps(){let o=this._cache.data||[],s,_;if(o.length)return o;const $=this.getMatchingVisibleMetas();if(this._normalized&&$.length)return this._cache.data=$[0].controller.getAllParsedValues(this);for(s=0,_=$.length;s<_;++s)o=o.concat($[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(o)}getLabelTimestamps(){const o=this._cache.labels||[];let s,_;if(o.length)return o;const $=this.getLabels();for(s=0,_=$.length;s<_;++s)o.push(parse(this,$[s]));return this._cache.labels=this._normalized?o:this.normalize(o)}normalize(o){return _arrayUnique(o.sort(sorter))}}TimeScale.id="time";TimeScale.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function interpolate(i,o,s){let _=0,$=i.length-1,et,tt,j,it;s?(o>=i[_].pos&&o<=i[$].pos&&({lo:_,hi:$}=_lookupByKey(i,"pos",o)),{pos:et,time:j}=i[_],{pos:tt,time:it}=i[$]):(o>=i[_].time&&o<=i[$].time&&({lo:_,hi:$}=_lookupByKey(i,"time",o)),{time:et,pos:j}=i[_],{time:tt,pos:it}=i[$]);const st=tt-et;return st?j+(it-j)*(o-et)/st:j}class TimeSeriesScale extends TimeScale{constructor(o){super(o),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const o=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(o);this._minPos=interpolate(s,this.min),this._tableRange=interpolate(s,this.max)-this._minPos,super.initOffsets(o)}buildLookupTable(o){const{min:s,max:_}=this,$=[],et=[];let tt,j,it,st,ht;for(tt=0,j=o.length;tt<j;++tt)st=o[tt],st>=s&&st<=_&&$.push(st);if($.length<2)return[{time:s,pos:0},{time:_,pos:1}];for(tt=0,j=$.length;tt<j;++tt)ht=$[tt+1],it=$[tt-1],st=$[tt],Math.round((ht+it)/2)!==st&&et.push({time:st,pos:tt/(j-1)});return et}_getTimestampsForTable(){let o=this._cache.all||[];if(o.length)return o;const s=this.getDataTimestamps(),_=this.getLabelTimestamps();return s.length&&_.length?o=this.normalize(s.concat(_)):o=s.length?s:_,o=this._cache.all=o,o}getDecimalForValue(o){return(interpolate(this._table,o)-this._minPos)/this._tableRange}getValueForPixel(o){const s=this._offsets,_=this.getDecimalForPixel(o)/s.factor-s.end;return interpolate(this._table,_*this._tableRange+this._minPos,!0)}}TimeSeriesScale.id="timeseries";TimeSeriesScale.defaults=TimeScale.defaults;var scales=Object.freeze({__proto__:null,CategoryScale,LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale});const registerables=[controllers,elements,plugins,scales];Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);var loading="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACGFjVEwAAAAwAAAAAChseJYAAAAaZmNUTAAAAAAAAAAwAAAAMAAAAAAAAAAAAAQAZAAAR67u9QAAAK9JREFUaN7t0zEKwkAQheEVCxvPYGFla+UFbD1CwNY6ra23sPEAxgRNNKBpLWITA6IsBCV6A/txV1svsPB/8GCYah/LKAUA/4hI4xQWAxs7O/X4JNGtY1BkeXCWX4pMm50zBUZx5U3WWmbRVRbhRQ6rUvJl6bnzBbun397W0kvuMowrGZsy0+jmu1Ng/+iaEm8TsWmaubMxO7cO4dVXaT3/xs4AAAAAAAAAAAAAYH0AgOhTVFHYG+UAAAAaZmNUTAAAAAEAAAALAAAADwAAABUAAAAGAAQAZAAAZ7Lt7AAAAWFmZEFUAAAAAmjefZG/S0JxFMXPveKv7wu0paBcAh0iaHYKHGsIJBD6LyQS2qopsCGClpZoaWp6BZo0uDcIEUE/ECG33veJkz6R926DT9OUDlwuX/icA+d+qVT6DBuOU1aQDAAAUo1H1GZqK9XDH7Hu9XOaOGMTowsCQJm209nHDLFmWrCJoImgidEihgM+qJm1pSn4G0FTE/c1sW8gaKI5yw2d/IUJAPbuPs4UJG+IQEGgRGBAJCpIZ7NrT6NkAGi5wWObWA/SGfZgk010LiI0AV9nV9oW4XAIj036wnzbnYABgDrJS030Ml7WJobNXDytPBsT8G2OXIsD+d/UgckiWracSGFUcFzrpYapBNuGX1RBYIh0oxxYnYITD81kxPNeDUjIv4pv8q5o1k/Nl5tFBSlMwqjPhPFYj4Xd8Lsh3qIC/Lt797NhAKh8bUD4JgJJREVqMbg7+FdHwqg24sPnD+oal8W6KwosAAAAGmZjVEwAAAADAAAAEQAAABkAAAAVAAAABQAEAGQAALMDT1sAAAImZmRBVAAAAARo3p3UPWgUQRQH8FUEbcQvLPRACxVRiU2QJGDwNKD4BRHR4oIYJIpK1OJSKBI5gqASBY1E8AOSIim8Yr9mdu4M5FIIKiJiuK/dzO3ebQ4EwUrSqJjn2xyrG6sZH/xhmeK3b94woyhYALDkrT7d8gETfCuyxRhfnlULuUktD6/VPLxTp3Mc16SQtFY6o2pFIFoBXmFyDeymFDKqlZNjehFeYjTEaAObmySfYsLIkMa3PNNLP0b0EowjlF7ACkD1/JhUN4+M8oNhowzPERr9i83rerFdGLln2CsHDfszYvBkMfYxlYKlwtAAcXruGDbcx0SxEaN4ThgJ/thvOu8HTBv+wb48TburhKE+wtuum848YhDFHuvlQakhXyUz40lzBhCDELtr2N8fGvZ2YeQicWKXCJ9DDELsFua26UxIddNNK/09hANiEGB9iN1AKEWcI+LIVHVFgrreWVKBALuMudbA+BWZe9VpuSdP0QokMN2InQ8x6iSltnWUuhOd1IXTCHUtYDzAvl3IljYII/uzfNdBy/t5DKETUYzyF1Ld7LW84QOWB4cwEexXl+nuEUaaqL+mlVW/tltVWIx5bxSZV7CJ1XqbWQ1aEfqDUQ+OW25CGIlPwbIdrJbfjVAzIiHWYXn1wzJHvinjd2xlPiAGIdaGiZNqXGrIGzOz6maEolgL83dKIetIPbY+M1tBDAJsG/OHlP8qnMFqVt+3NtLBb68GzUQnZ+QFAAAAGmZjVEwAAAAFAAAAFgAAACIAAAAVAAAABQAEAGQAAAaksUUAAALMZmRBVAAAAAZo3q3WW0gUYRTAcQu6EUQPUZAVZQhGF6noRkJiYWiKRVgYGEuJSWQkFsUuxYqaUVQqRkp2sSxSY+c+m5BW9JhBsM7uzM7szmw+JD1E0I2k9nRGZ2va19PAgWUe/r8z3zzMZmTgBQDThlllyysc+3fG/7hkWZ8lBUaHB5lReMaE4EUgNGzfI4f7mXAlwyjAY1jCsYGhQMhHDvcySv1jVoEBHAajNiAzo1+GhLeZpPA9JrSyhw1PPMSwDTz5AygPyFt3M8rVO2wY7uO4gGQgoOSRwu2yPu8mF3l/C8NuoI9R3vj9MJ0Ub+Mj1R1cBDpxbOBuCmAUDylsb3aNi7xuw3AaMN6LT0SKX+TU7Zc5NYkA2MANB7jNKi3kF9nIq30tnApXcFIAPsGPTiGcTQr7WGOpn1e/NvEquIF2LsySt/bxWsN5XoMGnCYMX3KAVjaymxSu6x+bc47XLC+GL7gBXg13dY3MIMVP8dGKej4KZzHqBpr5SC35SE7w0ZcIwGkH8E0C0Y9+QVtACtdw+vrjgv6rVoiCG/ByWgd56ypR764WdEAAbKBuCvjp5dR1pHBlwFjoEYxPRzF8zAFOTgL6EHnrCsk4UykY4MHov4C2jxQu71dmHhANrUI0IAVUTQExz3NzNileJsRL94sxQAAOuQFR95KPpESIyWUYTwM+H+HUxaRwoWDmFInxiRIM73WAgzYgGT3krQvk2PVCKQ4IgAtIlgsx2mcsnzHn75DiHwowngJKp4AR8mdsq2TW5EkmIAA7HaAY4yWCcZh2HrjZJskc2YbxNGC8iPoZyw0m8jbIVhIBSAH5NiDGm8kvcrVsDeTKFiAAm/8C33eJiSxSOCdoLs+RrW8IQBrQSt56hfSuMVtOAAKwxgE2StYjcnjR4PjcZcGEkYVxG1iF5742aBX/l//YS4SxzEx5rBWB3qyn1h773m+SXYWCYYXpgQAAABpmY1RMAAAABwAAABsAAAArAAAAFQAAAAUABABkAACqa+X8AAADYGZkQVQAAAAIaN612GlIFVEUB3CLKCgqqA8RFQmStBethPEorGglizLbLJFKLLV9p16FFZK2K9FitFhJvlnuzJgUBkVfwqLSmTfvzbx572W0QH1opYU8nZtvcPTzvRcODPPlx/9yuPdwk5JwAUCnOlGfXI9Fv5N4LU2zuimBpnpNaII6rPuBxnr6jwtWIxirBUEHCSEF6z8aaNzHBasS9G3Vog53sQSEEuhXQl4MYI5dFRpTbor671uIeVFZ0K9xSXdVNMquiQYgCi5aI+gtgYA+lTl2Q7N6XRaNd4iCi95uRRv8fujMHKwQ9Q0XEbqCRdHrCfSO1LSGOUYTlMvBhguIdEDf0+TMwbOSmXZOCraUS0HwopVisJhLs5yUgtWnEUMUXPSSaPyqJMYQ5lipaA8qlczviIKLVlBUMGq4pDsqmUdKJBNOYFH0TAI9T4Kz2DcLaeheLJnxY4hRtLQN1f0PH3ZhD0rmqsOyCYjCcQ9aJhv57PcSr5oDcuixXw7BES8qm5/OBYJ9mXt7iTVunxz6iyh0QE9xaZZdcrhyD0KIggf9U6wYI5ljRZLTb7sc/rxTDoMXPSSHHnBJt5mE9mxBDFHYiRBF91OUWAuYY0ur9a6bSDhcRMLgorsoSkJ2AY8RIo/Yi/KJBQUIUnRrAt1Nwju4bOc6YtXlIdgB/bK5xujPHMsRreG5xPqDKHjRQmJd5JIuW4mcX4sIouCiG4n1t0gOTWTfLPea+6xU7I/ZxAYXXd+KPkniMeBmqnbhcsWGlQhSNMdNqthZzLFpePIvUSKvMhGk6Ko2tHl13csezMEMEklfpEQAUVjWDrX8XJplvmJLCxFb3B79sUJ1BjPH5mhWylwl8nMBQl40S7GruKSboTolsxUHEAUvmqmGfcyxNMnsma46b2eqDnjRDOI85zJN+5RY7jTEEAUXnfcfdXLZ7yUmSFOjT31qFFx0FkWJ82HG/Uhv5t4kEpsyRY22TEXQh9D0NrSES7NMUKNVkxFDFDzor3Q1ksocG629GThOi31DFNqhmiNxSTeyNn5wjBYDRKEDOps5Np687T5ci8VHIeaiE1vRF1zSpda+zhqKCKJA0bEJlM/jCt5rKWr80RAtDhQd0Yo2c3vMSa6NJidr8WcpCKZq8eZhquP7ByfqQHlEWABmAAAAGmZjVEwAAAAJAAAAMAAAACUAAAAAAAAACwAEAGQAAKmGMjkAAANYZmRBVAAAAApo3tXYaUgUYRgH8C2kKDuwqOy+sMNOpAMzFsOSLumgzNKskFLssKL73AorJLtLwsqgg1qoZuadmd2lwA/Rl5CoaHdn59rdRjqgPhSdSD49kw6Osn6M7X3h//35vc/zMMPrcPyjc0tUelxjAu9uMAG4ibnN+OEuxs3461wu6Oig4VQx/uJqLP46xg65x75eQwXAvOnLXLDuChbeBvLe7BAViAuslHGRDTZeZoNgh9QwwXIHLecMG3SfQwBCwIJcZQK/akgghQpAJaMOrmSlbwgBC1JlQh4G7lPTheOsdKyCleAUxoScb4ZcIsFsOhaa1HUtZ6XoCQSYkMoWiN9VW5tAB4KVCo5yEiAETtogp7lAKR1zBNDhEBd64uJCcMwO4aRPFx8Ee1Nh2EeUtP1c6DdCoA3kLDULvZuTa/Zi8QgBG6ShnA+MpwJQxur9dnDy512cDHbIES70mJoubCWhvdsQgBDYhcWbkAMmhCg5VACWu/2dNhFZLiMyWJDdJoSE1M2i0pkKRAlRl5QSBTYjwoRsb4bsIfJOakZpPVF8JYhoA/my9X6gPxWAdYySWkSUBoSAHbKFKNXUdKGQ1y6txcIRAhZkI1F+l3GhqXQstNfolc+rHwuJChZkQxPkqfn1pgKRK6hbVvIq5CPChKyzOsKreVQAMvGPdBmvvcpFhAkpaIEYq30vE6lALCZa1hJeA4TAilYQxUXNQi/kVXYRApa2hnxfJehDqQDME5WR83ntZw4Wb4fk8eodarowW9Ar5vI6IATskFxBdlIByGCl7lmC/naOoIMdspjoz6l51XPykaJMBCAELMiCvxC9iI45wpvOEMLPnEIYLEi2CSH6h9mPtJ5UGKaRSHq6EG6ciQgnFj+rBVJBzUJPEcJ3piMAIWCD/MoStFFUACaK9YPSxMhXhEAriKiz/82sJ3vfHBzgMYKDPVFtmBjVhmNSMKMxqWJEmyBGfkwSI4AQsENmiHr8X/V6euqLe3veQB9MMmYgBiGAEBiBQQiMwcIRAggBCzK1CfLCMZOPJsUTkOgx3D08BiRhTEjfGJCRMSCTmyF/WxhPQCefcbiL14BuCGgPMiQGZFwTxIj/DvjeJyZ469nOXqOxPUj/GJBRYtQYK+jOP0moWT95E2zZAAAAGmZjVEwAAAALAAAADgAAAAUAAAAVAAAAKwAEAGQAAH1y1dMAAAB5ZmRBVAAAAAxo3n3MsQ3CQAxG4c93qZmAOeip2IE9WINpKLJBJmCCjBGIKe4UoQhh6cmy/fsFGOcrcYt0KKhSwYCykSobYZxPxNTvIPpQe7hkC++l5+8nSLyxCitKZOvZdhWDiKf0sxIvxE6wJsXl+MAdC/8Fi2gEHzF0I+cJ3N4OAAAAGmZjVEwAAAANAAAAJgAAACsAAAAKAAAABQAEAGQAAHinmB8AAAQvZmRBVAAAAA5o3sWYXYhVVRTHf/9976iZZfmgYL2kTOaYhigZJcFQWI2pZWZICX1ARUWTfSmIcDFRQ/xAqpcQ66UHH2oUHbGQiR56yAStRHQaxFQsSCGl6c7Z557Vw73n3jNnxmAg716wH849m3t++7/W2nvtJUZoZqaje3+6F2DOklk/SDKug2kkk7u7e0dPKPcfFGp3VcyeW8aMfay1o3Xg/wZzI5k8dqC83OPaPcIDFdR+udz/7vVQbERgMUz0Ai+owgmPW/P9nmO3BQWLoMsj76nBCWIxLm4pbAoK1vHkzD5vfNRQq+rSCJ7r+fLE/GBgAG7M6JIXv3ugOoRHisSOUslcMLCOjtYrHpVStRrD5sybdWJlMDCAE8faPvXiqJfwyrhUfNjd3XtzMLBSSUmsQqcHaySC8NKkcjla3fQNNm+fd53cI+xpAQ7DVVcaFQq6e9mitt6mK5ZahfgdD/2ZJMDDqIGYzUFcmdqLT8w858W2wUkgvFj62VcnFwQDA5Dr3+Sl3xqJUAWsyLaXenqKwcBeWTS3P0Zr64qlgFLb5L8mvRwk+LOl0NZ9p75z2HxX+1MHSFwm5s43lk6/1HTFACTZgEs6PUqyR1VsTKgUbF0wxVLb0HVqt5M9nypWG3GxkMzufLztl6Yrllq/WtZ46Uq1LKqPYjl2O4K4MrWNS6b84Y3N1S0jHeDFQxu6Ti4KBgZQHIi3etQ7eF8TlYLbvrO7d3QwsNLyGVEsWz2k+jCm/lmxN4MEf9be2nf6kIMFje3DcHBVvjJt41NtF5uuWP0cTbTKi7iRCMKjm+KWlvVBFQN4dX/vx854TY3KA2ckDrtv6+JpR4IoBuCL0boILg26IwgXiR2YKRjYrkdnXPZo/ZDqA3f/6wf6ngkGBnB23LlPKujnfJZGZltWHjp+YzCwb9vb4witqpffjbP09pZo7HtBgj9ry/b/utfB4mz14Yx/Rjk3fdfCKWebrli9veDsbY8GstWHFzeULdkUxJWpdXW09nnTTl/tgdRdGsGK5QdOPxgMDMAl0QceXcxnaZQUh9zimwq2b8ldVyNYl0sCYtnso3PPvBAMDODwj3fsjuBIvZ1Vg4yNjQ9/0zc+GBglJVHiOj2yxgUGvGOii7S26dtF3uYdOPNFAVakZ2jtPI0cNvPwwqmnXSgwFL/v4e9cO2uUl9vSUOzrCw+Q2GaMyYM2QIzcxaJeWwkoZOYW6rFhOGvESCGjSHa+qmNyAcY4G/wdyR4R+8/eSrFwBhg/3F6ShXSALA9qOejcOxvu3bUWDDXI40WKxTlg44dTO6k3T8Ch9BLb6OwYqPZ7HrL6LJwyMPVFaeiC02cJwT1FxCmMGPjPPkOSAU0hnTIwOcihqqi2qKGQufIbB+erMXbwwkso2QYaUTdQ14pHu0YYDOe6mrsz785jevZfJmHP8r30AXEAAAAaZmNUTAAAAA8AAAAwAAAAKgAAAAAAAAAGAAQAZAAAcRPiHgAABDJmZEFUAAAAEGje1ZlvaFV1GMc/z+9e3TSt6IWC+cZkmbMVli9EJBiK1WxaVqtRUb2ooMhhWRPG4GLgjLUc9udFIb4L8UXN4VYSMojozQomNsStYX8Ui9CW4vXu/M45Ty/uufeec3YnBS5+PvB7cQ6/+/x+n/M83/M893eEWbDxwfGayUL+S5DG4h0durV2/sN1TXVT13stMxsAk1cLLZXNA0jjZCG/czbWmhUADxb5QAhoBWLXd4dHbr8hAAqGPotYi1AcEMCCzBzpuiEANjzWMGHRD62AFSiDqHn2289H1zsPADBVOy/nifxuiSCKQwIJezWnxnmApqa6Sz6Sq6RRcXhw//F7Rp9zHgBgeKT+Ux/5wQKVIfjCu4OD4zc7D5DLSWiNtllES2KOxuKw4LVfjzWE/8EO9Y0eNvCkRAsaBUG9bGDubn6iftzZCJRMCd+0kC9HQMCKzC1k2Ot0CpWs9dGG36zK+/G6UATRbYe+OLnJeQCAqWy+y8KvJSGXh2T2DQ0NZZ0HeKV5Td4T05F8I4GF+p//Xvyy0yIua0FVPug/9U0GWV8RtCJwsSaUO5/ftvKCsxEAEBENDG0WwooOBCtyWz6jnc5HoGTv9Z0+iOgLgmKiTQj4ZHR12yP1PzobgbKgxdtl4VKqzcgGvul1OoVK1rG14Q8f3VvsVGND2NDdd6rZeQCAYCrssZjxSAPljtUT2bd/cLzGeYBcyyrPE22PN3nFuiDL/wp0u9Mijlt7/9gx0E0SPc1I0JdDG6zY83j9eWcjUDI/lB0W8ZOCZiFzMrtviAgAbD96+iNUXi12qVGBg1DRtT1bVgw7HQGAK1m/0yIX4mK2ggmFXlTFeYADD626aNHd6UbPw6x7bWDsKecBAJYuOPexhZPpZs9X073z2ImbnAfINTb6HmZHSsxYWDrpzX/LaRHH7emjPx0R2GIA0bKgr2aNWXlg8x2/OBuBkhWMvmGRqdR50ryChl1Op1DJ+prqJqzK/iqp1NoyMPaA8wAAGnrv+HA+3Wb4YbY3lzrVcxKgf+tdly3SmTpLwoquHllz5kXnAQDWfr/soBWGy91qqTao7tn49cQtzgPkchL6oWmzoAlBG1lkPOlw9jWatnUDZz4z0Frskcp/QT2DNhzfvHzMuA4QiP+2hSupNmOuJ6a7GIEjfy6kxusBbUQxJhaWDBrvDsv5luzdNXEd6+mnz9G478o8idaiio/oeomo1k7zL/qg8NW5T0BfmqlMJzeTBIpVyth9rfK76UDx1vlaPgwzzFPFwIkswsbYl7jk+5jKR7oAECTpRDTlFEw059qbEYzEN5YEivuo+uCKZ0wYuDdLoKMYlv2rAhONsByh6UBJmMqc9GaST1wQicFMi67MlLZns0jmdQiWAPf954pZBagCk0onrbYZrZImkQ9JRVCTERQ4KyrP/APT7dIdHNFWEAAAABpmY1RMAAAAEQAAACwAAAAMAAAAAAAAACEABABkAgD8ivGfAAACBmZkQVQAAAASaN7Flb1rFEEYh5/f3AWDhQSCEBRJYnIgNiI2MYUggpADPwoRxT9B1CaxCcoJ2gSLQFoh2NhLNKeNH4WIeJWIFjkS9UBRG5EouZvdfS12b+/2ONvNDwZm2HdmnnfejxX/0eTq2o7dFKci3M835dEP5KBLK2snHXoqwAHCSOaVe6dKtwDUb+OhlcZeVwhfCiacGUhLtfLY1TygLzyqPxScdoCMNvBfF3Jg+exkw/XbFBTCRQ8THvASAVw5vPr5YB7A3jTrUSu+Ox07fZGFvi88Wf101JleCeSSkAiQ7Pj7mfEXeUCfWVlfcLK59t0Jh5npWPaFzRSgux7kAY/a4+uWBa/JSa1CeNvD95gh5VAkFjPAI0++nPNo2ktxKJINAXajXi418wKulku/AzQfg3Y4WnCkA1yrDQSmOxmvJLz0bn1z9D45a6o2vuzF24QhjXYKvOvHyGUvlXq98sYc5xXmDVypKAoid82DdRegAIaebww1m8W6jGHXLrK4nTz7NbPvBNuo6ccbDxxcVNKXHcDmVnHeo+E0d+MRtczNss0KFVz38KedpqL6bQyFH4FB0j8MCLwza3S9dpo/ythZZt0ToayNdfpooctOQAHrc3a63iOzQQFFFN5swwJEHecGJO3PXm5ZGAMlhdDTM3ugFc/VcSCyLFSY2PSekZ6t+Ps/kTTHxalO1YsAAAAaZmNUTAAAABMAAAAnAAAAFQAAAAAAAAAYAAQAZAIAtADR+wAAAwVmZEFUAAAAFGjexZZNaBVXFMd/5848Y56hxSCI+IXGBCXdCFnUjRBdNJoYhFJRsKtCLYJBrREJ2EZLm42gNigoSLtrURdqYlT8WkpBFyIVk/hJWosFIyjSvrkzc7qYybyZmNQYX5I/nMUMh3P+93/OufcI74CvunrnGpxWIZxlhF86m2rOM07s7+rdI6odRkGIzABGtbl1/bIu4n9jwueXbs8o8/K3DVTFwdTBNB1ZV9UzHnLbevrLZvrhXQOLo3iKAUTpt4Xgo/YNtZ4ZazDx8q0+UmWB2MQT3Txe5TrXVhc8YVcxnkQmUm2m51rGrNxnXb1zc+L0CeQlW4bDP69bsp33wO5zfVcEXT1U1jj2y1BzNWNSLjC5HzwkbwEriXn/ONrJe8KGwQ6L+IlyCBY+ULHfv1W55p7+5YTmpoBJnQxBD5xuWtJKCdDS3XsEla3DhiN8q3KF0DlkEZPqNTwYFLesgxLhtevvtchzK5KujPlfcvXnH3zqCysjZ4kMIRD55lTD/MFSkTvRUDto0f2ZwUAYlVztyd+nWUxH3ANF1YR7z2YPHqfEmFfx51ELd9K5RiVXkS9vsVA9/DS+MV/fqquzpSbXXl/ve5gd6VwjDkTtxYHKaWHQL1BpVJMmdeDajcZFq5lAbOy+f1ag2YyqXBjss1AZXR0yZIGHu50Jxr9Gd1qkMGJZay49WmqRLRbBz0yonrjVOP/ORJM7s7b6gVX5ccSBsL45YCE3rNdeoXzLJEFD7zsf/sr03Oyex6tcMVeThzi+FI3S9rBxYQeTiIbuh1+4yddJdQIZOKjJCyAYAYEBDdzDTDI+vrnop0S5Dy/88SXoMROrluxXsOnZmgW/MgWIyF3/u6K8UOgTZU76/XSE3158Mm8FIjoV5FwA1/PaLDJHBAzJvaaq4a6pIhYpd/npAsLwHko52Z0qMKpPMit0Su6in2a+08q/4aPFBdLJbDjgoG/EdgnCdoiIAYRF4o6ILM4m0mxijQcnQ0gzSU08XAJDA4aghJolF8Q+6Rj/AQB4LsR2B2nNAAAAGmZjVEwAAAAVAAAAIgAAAB4AAAAAAAAADwAEAGQAACn7SAcAAAOxZmRBVAAAABZo3r1XT2gcZRT//b7ZLc1APfRqttSmEDSkHgKBiJdSikibiGxJQYh/DlLwYPEQO2CkkZYQuhZXRA+C1autpqlbElAQFL15CWiT7aLm0Cw0h/6xSZudb+Z7PUxmdmbapLubrA++wwxv3veb3/d+772P2KJ9dWVhF8Sct4CDBK8Zwcm3Xn12Me7z7fRflwgcIwACUAIoyprvm558/sA/AKC2CkTDfOEBb7vAfg0ZMpDv0z73RY1q4IEGoAFoAi6406hMIfThVkB8Oj3/giJ+I0Cu/xUBGEvvfufogdtx328uXztDYizwE4TsQOHQa0M9P7fMiIjQU/xEA4z+NFhLy3/03k37K1tPusBS4MNo+YbFixfFahnIxJXrI1rQHw+qQbjAR+PjNGn/1196flVTOSnQ0EDv6o75Ey0dzXipalPuLShIjgAo60kIzO2rdfcND9PfiMXPfpj/1QJfrCeugMCtlhjxsOJoIBcxwWDVYEY3AgEAJMVXOKkBU09cQpO7m2bk/ZlKJzwpE2KHybnOxtSZoe58IzE+ni5/DcqbhEQJ3jQjNV8KGrBTueGu0XcajkHX0cB/8RhNATlRqgx44HHNoBZoBvR6RLEw+Fyl0TgfvNJ704NMht/rphgRoQ8UA7nG2CCXV3ZaE80y69fMeQ1VCfOrYSBvXP17xAP70/JzwbEvD3fdbVp5wz2uSznVFCODpartKpwNqIznBubuPOi60GotmhzsvuyBPzYMJMs1RwtzYZ8Il6es0UubyLWhUmD4nga9J8r35ZlKZ9aoMoGEXAlMfXe0K49tsHevlj/PPDFHjSpo0I5rnoBrBA62yVYz3oebMnKotDgAZX5PdFcBSDk3e6TrFLbR1GZyrSkpajDZXYllvQMT2Gbb8Gj6Z/8d0WB/cByMyrCijP3SglxbAtJXqtoa+iwpYXeMumtu5ZkLaIM9Fsia5ToEcgSgyAiIJdyyXDfszOkX+2dudFrwywDs+EhHwdSfR/bm0SbLPDpreAUftIOjiNhwLaMctNESQJ6evTGgYY4HmwtUffIqXh/MVdoJRCXkClOsD8Ph5KWWkfUm0GaLGHlqdmlEM5Sr1OUqGFtqg1wfn6ylqt2R9RcoyKXGv7k79zr70CalPMJIJmscDebI5OVH0Yz+HyACRn6q7oExCxB0IHZbI2CUyGKMnSihmPCTxHOK0aSP1OuFlezkyMD3TwPsCJHFbkaK5L5kUEluIkH5T24uiQ0SLYJ1YEaSQB4CgnuSISYCxzkAAAAaZmNUTAAAABcAAAAhAAAAIwAAAAEAAAAHAAQAZAAApfNfPQAABAtmZEFUAAAAGGjetVddaBxVFP6+u5u0a2IffBGbkGgVEhNrS6VarYp5UMTmpw1tqI1FwScJKIltU4mBQLtNlPQnWPsgiogUyqJ2w6apCBKQIEKfRLPNpmDEbYSqhBqSmJ07M8eH3UxmNj/sJjsHDiyzc8/97nfOd88ZosB245ufuwCe9j6V93c37wivtoaFBDA6OL5VWUaCQKnKBM9sMKtNu/qZlp1TK61ThQShbeOMBks1iCUHLKA0UMRe35n49uv4roCybhBQzJyOACjObwHU88821476woSI0FL2BQ2qbBY0HadF+4L0iPIFRDQ6dlgDz2kAXqfHDeCJ7x8fO1rwdEQiyZBdPHMzAFR66Zd4hoQd7iJVwJ+bNKvqWmpnC8aEUTx73AQqndNndjaJDlOhTYPipCbtW+eCeK9gTHwRS5RZlpUgUOI5LTHU2lTTAABXomMRBRxy/hOAECNoqccaDtbc2jATC5b0aqAkqxb0AtQxp2hhv6uBeS9TLF4IoG/D6bgYi+8yKK2ahMeBi282VScW33t1//akFp7zKAaApjRfufrLS+sGISJM2WpAA8rDAjE9Z8jp7PdTwfleDfyxTDEMnB8ZGQmuqybC0ZtHAuRleqsepN3W0VhzaaU1lwbHX1Nif6my1wBteTNxLpIMmUqdcS4hhwmJz9x755PV1r3VWHXZIEazUgcNnMobxD+h+RMaqFyiNO2pADp66urMVfsDKZbCOxqwl9JHaPK+vNLRHkuUFQkThHglCYmdaqxuzCVGfzTxOShvEOL0l/yYEPSlJekuLmozIMdyDZGicVIDM+4YOYNouzbxlEHV6mpI0AAMmx/17nt0Itc4XU3b75iQPnc9qRw1yZTwrAaYxcI0NxnhfOvKStlnNdStxXrKCcTrQ78dMYV7s7ukCek6/3LtdL4gelpqDYPSmTMThyLJkKakJellIf5A6dSn671x+xqqrprgdzmBkJDRaYAVWQMKtEj7WpLMxUyb7Ro015RofSxRphhc1iUJDn5Vv21/IQait4cSHwfXRMqiDwiUuDVNwAhQThRqNp0Lmt2rMvHC8OSegMiPBOjc8wIQ6L9ev+14Iad0tZokTZF+DdKtBoP4+z/NMApsK6Zj97XJVk3uTaeA7o7X/cOBh+76DuLpSDK0oKxwehQTd9uNb77n98/ggy0DMVNqniRYkZ4V6QJht/+0QUnm9AX2yPDtcgVrPC1JcUkS0V9fefAAfDIPE6aYH5IsSZ/cYcFQEuiEj+aAuH/49h5N+3B6Y8mM5gAFA5P7yif8BKEWJWnRHkh3SbgmJvUXi80wfLYgAGy5PnVUk09mPt8cSSrY3VMvPvyv3yCISDIU2oJxCiqyJuGxu5vLd6KOpt8g/gfmUtaG5klergAAABpmY1RMAAAAGQAAAB8AAAAjAAAADwAAAAcABABkAAC7TR7vAAADymZkQVQAAAAaaN61V11sFFUU/r47C1ipUR8koiGSWLBLRZO69UFsDG8KJUvAWGLE6IM2UQnUStDU2JXUoobKopLYxpioMUoNv21Rn4xBTQho1MTWtStEEGOr1loxdefO3OPDzuzPQGF3s3OS83Jzz3z3O/c795whZrHj+7/tBNhdtCh8sGn98ndRJVMXWvz80A/XafBpB4ABIN46gQWookUutKiN3aPAWnqnIwBCNCLqUKjgH+8baXTgbiSzoHlw7Lkr3pCuJnhR2kWErjJJDSoNIu+Y1DKnG1W2IuYHD36/gUAz82yzpxM+t3pd9M/QwAcGztRkOL3D8oHFT7mMjv/+Xz9CsBy4PffcVgA3GB+cWXAFtLe1xXQY4ASAtwdT17uumyIwv0BgIGT4gbUNLYUB7x8YXRyh2a0EyyzKp2SkIx6v/6di5jPG9BCYH1C3FlodwQADs88BGhUBF6wj3BoAGytinjycarLEHGM204V1nWyLL2sv3Pze0HdXO05kMrtP/EOKRWlujd/8Rdml5ookNUANwHcb+MO1nO3BzWMnlv9tA2ez+3KlSFvU7kRCVNngGrijuKYJh9L1WMstfwU3JxI0GkgUHtTz2xbfOvpw+eAENAs/JCPTV4zPWloT30TfssnjmkTOAdhkT9/AT1eWydxj7H0oY+HJxMqVzmwBiQSNFmzRgOQOTEITC9x5mc5y055j7UAGu1qin1wqqGNt9EsN7PWe3gLn5tf3jy6thLl2LHmq1EDjRLZq4N+AXubaFnrLu3MAtuFrO1ZHfyw1cNv6Jb/YkJ3FegE02LLzcOqe0pmTk5xnv1CuWqcytS9p8Oe8+LLizYi80td3Yk5Jd+5AOnfd3TBZLviu+xbN2MS2Atb+FdaPL6x9vIS0c2Rh7dk3K20OL665aa8GPwvWvg12PXNk7JqLg4u0X6y0SjHbwhYNuoEB5Cpqd/slu1o1bNPgWD8hjygpGkSMKHV7b0vdVyVPr5WY1nxWg1OFwtOEco1JQoShgr+xrm5Ck92BpgNN3vnEcPreUMEBQF079aoGU+c1HkHvo4O/Xh4qeH8sprVRmwLCgwYWGZ7rCE1whdY6lB5WwCrlDaKe+GYErH9nzY2nQ2Gee/ddbNZgJtvxcl5jaHpCS7tvH8br0g6xJ5h+G7x/w9DJ5lDBASBD87wGfgs8vbQhSX/kCg38o1VLpm2orvN7Phq/jp18KDTB5aceUUebTh0jECsSn8iEfRmWhgoOAM1H0iuUqKPKG8398VxBXg4dHABWDJ/6gECr9z/g/xvY/wMSR7zfnh0m2AAAABpmY1RMAAAAGwAAACcAAAAdAAAACQAAAA8ABABkAACQMqAdAAADhWZkQVQAAAAcaN7FmF1oHFUUx///u8nqdpFCHwStobRpNVp8qAgigtiHomaThvpQjClSEPTBB9102ypRWdQ0taUmLXlSFMWPhwpq2AbrB6QK+qI+CBLcxYRiqqJGUUp2mzkz9/iwXzOTzTbNx/TAebgzw8zvno//vXeIJvZ2Lr/R87w8gaQBwIob4kxfz23dWGNraXbzkqdDAJIE4IMThckgAlsUbjQ3eYdjtY8gAnCqo0/0dOSjgDONLqoq5605KYARADUn/plz9GVEZLFGF+M7Hn5EybQFUXUFYamZ/oe2fxUV3IK0vnp6JnHRFI9YaCWNlSaATl667o/XEKEtgJtNFA8ZxSZTqTWyDAej/dmdO90o4egfpHP5ja3KPKFB6YDmXtrdsRsRWzByiqMCJAnWu5OQmLEZXAWrwT05XrjLsexjpdZMtd5UR4+lbi0s9wODY4WUge0lMBs3PN7ffcuvVyYlqpy3HBaAAqLm5Kx68ReXC5bN5Ttdak6IPpd4qmT1y+Of/pC8IrhHz0z3uuDdAU0r69oLI3s2/7tcOFHsC0yYbC86icNLhuvO/bZOjB4VAv6oOeCPNyYvvL6SmnHJPxdMWDUzMD65aUlwraZ0UJRtlUj5nOmVSodDnBJwPlAqQMJ6sWNLgnMVB8uz8r/AjL3f1f7FSrttuOvmaQFGylmpOiHg3gNjhXsvCydgMhR6x6MeWi05mFM7KDC/CxnIjEuMZLNqmsOVU1j28qxOfZRqL6wW3Js9HRcd6nPh7Ljkjr/v/Hn/ZSJXj5pD/FUSDq62mLZ9t/UtgX4bbg5HMfT451Prm6W1Phvw+XMrkI5F9S5LKzRPC6i+xoAA13sl++xSIjdp1p1/Y62Wone7tn4jBqdrdVdPb3p/bmrbIjVXqTdq+twa7zocakbAYki24kJ9pVnkPv6+c8tna72Qf9i57YIDngjpHgTY0zs+vatRzTmuthxGRHZNsXVIgF9Cuod51eH7JiZagnCKkz+lbipEBffB3raSCw74olb17euLbY8F4Bh3BxGxnU1tfs8hvg7pK0R55P6zMxtqcNO72v+LfBdJqgMeEECDzcEN8GSg4TY9artn/Pw7hO4rHwe0uvsWGNw+8eCWvLmacNbGnhFgLrS0tboWJwCA134yM2V8p+vgrwcNjIOHntAzWk9DzPccAcSgDd5dG99A1cSCe4oH/geA/qt59cXVmAAAABpmY1RMAAAAHQAAACkAAAAOAAAABAAAABgABABkAADVd96AAAABxGZkQVQAAAAeaN7N1E1PE0EAxvE1mhg9Ga/GBF+KaSkB1AIK2k0LKqRo0VaBKm0VtLE06Dfo3XjxM8ClB8DOS/XEhS+gCQc7s7tdqx5IuOGhl47PgjUYE4+bmeR32jn8D7OPYfznFFl9qEhEe4nUVQmW4VUV3ou3hhZHqSMLVGw9J0K9gAK8BETvvv6wfVqLxiyxMjkiVR5hT+EZLO4H1wtaBKYrzRNzVLoZKtVjhD6BechRuV3e3DymRWSKWOUUtdRDRD6CGZiFDBG3tAhMkC9n7lJr7x4ip+E+PIAUtTcMXc4daq9MUFtNIiwBU4Do1jSzurUINLkzHGd2e4zZahxuA6IVot9oMzmjzN66yRwVRZwJsQM75rpzSovGCG9khhB4Da7DCNw44Nvk5DdEKF8V0RIXx//5eIX8ODnAG83LvKGuIiwCgzDMnM/pijrqRyDm7l1n7rJEynn8wH9dCDOnHEZgL/RBPwx4am7cl13mInR47ua8uaNy7c+FCx+/n73E3Z+ggggLQY+n5vo2OUkizMNzl0akFz3LZWz/Qhf/unoOgefhIgSgm7utIGkG/IqcwBvE3H37PXcq2dloZn3yntsv5ZpZTXufdM4AAAAaZmNUTAAAAB8AAAAvAAAADAAAAAEAAAAhAAQAZAAAQRf7KAAAAX9mZEFUAAAAIGjezZUxa1NhFIaf9yRIYiS4FUoIiv0BLpZ2M0OXZnITrLuT4GQXoUsWt44OTt261EFau3bqD2hLcLCF3CxO1UFK7809DrnJvUluO38vfHDPx7mH57x8nCNK9OL7ry2T9gxQdrLvdyfdp18IRNX5i/X9Qf3GRj0B5l6Ev6g9vPpKQFqA//so2RZqCzCpAJ9+OO10kpDgVQxWDqOWMeoLGkbuuuDb2eaTVwSmGecTTz5Laoydnrp+a175SICawi8dRmux0tdjYMc8c93Zvey2foYIbwC4a6R0NwbFQIyIJWLZbz1IegSqKkDzaPg2llYtc30yGo3003Dj2Z9Q4cX+oF5v0pfTnpvr59e11nM6SkKFt2qT7Ri1x8+E6Ulc70MEf3lw+Zgdt7Hzx9E/nDr5FkWQmvtVcbtaYbbmeT4Tl2zkPMfzuVwp5Amo4CW1C/FkWYqaOctCkZG+ET8iv2sBzIL4XMEyYC/5b7GZ6STj/hqljWTNGIr+A3aWb1YDMT8GAAAAGmZjVEwAAAAhAAAAMAAAACgAAAAAAAAACAAEAGQBAH8nJFcAAAQ9ZmRBVAAAACJo3s2ZT2gcVRzHv9/frKnrxnhvNGlpDq1BsGmwleAhoCht2pqqEBN6qJd6EUmJbaW0eGhSK1aM1oNFBS8eFgoJadeDnkoFT0XBxmyotrBpQYvRRpRk3sz8PMzs7OxmTTfJ/pkvPBbmzbx5n/f7895vlqiyrk1e2+i6iSyA5uh1Kke6X3riXLXfJ9UecMlNjHklkwdgmJBJ1ECJag525eKPXQ54kAAECglWiMQnO/Z33qgFQNUsoKq0xfrQEGIIGDDf5j194DRqpKpZIDNxfUCAZwQEoRD6q2MpT/Uc2PZHrQCqYoF0Opc0wBkDwG/h6v+curt4ATVUdSzQtPCWAdtFA5/P+z8x3H2429QSgOsd4MupbGvCdbIEUvmgFQBQXnq5//G9qLHWbQHHdc8omGI4eYUAxhIZQR20LoBPp6a7HBdDXmBKH4AQ4Pyr+7dm6wGw5iBWVS55GDekGBKGDAIY87atp1EnWWt9sHn7wKCSwwpAAXgAlIQnGHn9QOeVegGsyYU+SOeSi/hnLBq0hILA9MLDv11AHbUmgL+T/x6Fsl2gKKROAqpH3untdeoJsOo0emIq2wpFVoCizANg6tS+rftQZ63aAkuKdwVMie8ywYZFY4k3ggZoVQBvXp7daTwM+W7DEICefnx277bZRgBUnkZVuaQ8Z0AaAmED5u0NzigapIot8NqlG4MG6IlsVr4FqCfOv9A5H2uAV9K5pMHSWJlCZbo1dfszNFAVATC5eMyQbcyvvuYPbDpc77S56jTaN5VtbWIiyzBthhaY/Kqv40U0WPe1gDJx1g6Oyiz4v50gjiIGWhHg2czNXbbqoAAQLRQqFvSji3s6ZuMAICulTVv1fQPQwE+ZDgkD3qWxRhET/a8Fdl6+OeSQPSWFCoQ8OdG/+a9YAzydziVtOqNlCpXpxEO3PkeMVBZgodk5boFtYeBqfvV1+GqD0+Z902hHZu5RC+6MQCOZBxBg4ofdm/oRMy2zgKPOex6ZKjouQG1V9xhiqCKA1szcLkNvoLhQAagc/2XPltk4Akg0bRp64w5Ag6BIJ2ETv2uTM4qYKrRAy9e3D9rkU0WFit9O/vrclntxBfCDOJ1LJlswI4q24sDV6/MPPvYkeunE2gLSwrcN0CbUQuAqkBAdjvPkfQt8c6cNnjcDRTIsEf3V90RxS4quhX0ovZ7frRmem/yPTvl+K+iL3g8AlkbGUt6B8Pj3u9u/qxwgM/cFBIfK+Vb0m084SV2hr9j9lt1bugDL+nyYextUNl/ta/+zIheioFfLneUAuEFjsCcEu3HhxRrtK50UIYxMWKMALA9PQoBHHAs7AHxbEYB6+AmCTSvWBBGY6NeIEEZL6uRlLsbwHxtGYIrGKmQ/hzTZyoOY1huAuxFAVyUPeMGvG11JRiwQgSnvYgUYgQb3hzALFvVI9vmOXKUA/wHPJ3pHqnUMtAAAABpmY1RMAAAAIwAAABsAAAAoAAAAAAAAAAgABABkAAAH2SvHAAADw2ZkQVQAAAAkaN6t1n2IFHUcx/ExlbpQz8cyT82uy/OhujxFvRCpRDMtkkCs6zCCMEsKQ3ugUE+xIktFCPEBQzqT2Lyd55k9jBa74+jsfLrd2b19mN2d2yUpuL86Ag/uvn3GnTnX88R/vgPvf+fFb/jMMILAfF2WL8/4M9j1L6LSOpsjO7gt4WKw6/RwCPVfkq0qVqiz+VotbjxwByZ2HWaFiGgUTvX7CKfq7QjGp7BirWL0jXbc/I87sW2sUHugvew3MZK7IEaoNRghF+0oQrHO451jWTEjaO1uEaP0KzCgdAFgm4ueu/oiK6SqVysUMdqnATORj4bFiMo+9YBk/dgsWiQCAUoe2m/K16pZoSY1VvuTZA38LFkElIbQYPQQ+9RPybHW01KMmhBQctFfJKs3ELAms2JHpXj9MSAn0Q/IR89KsfdZoUOBfNkRKZ77Xo7TUXT8FmqFw+ExrNg3cmLPd3I3HQZ0BPnoCSnOO/X9aqJiv9zd9zWwA2gIVeIK+9R3KYmmPUqC9ind9CUgD+0/GIzPZYV2SsllnymJwc+BAaVGD/1Kjh8UmLc+aruSatuhJOljBJS+KKK9jSHmqW9VU29uU5P0IdoOzEU/cVE1uZUV2oipv6OmnC1qit5DPvqRkrQauafeoKYa31LT9DYgoOSjH6ipNbynwtQ3aXZfvZamBoBDqJaS2Kf+qmafeU2zaSOwTchDb2zWbd6pv2Rkl6/T7MFXgG1APvq6lv6Wfeov6Jm21XqG1moZWg/IQ//ZIGYnslrPapmGlXqWnge2Cq3x0HV6+l1WqA5TX6pnnTpgK9BKQEXUtp7jnnqNkd27yMjREkDL0BBqZHinXmUUZi4wcn1PAqtBtbdQkX3qlXru7BOGQ9UIKD1VRG/UcE+9wigsn2U6g3MAVSIXnQdsoZ47wD71h8yejulmD1UgoOSijxvO35Xn7XJWa4JR2DzJzNMUQEDJR2ebzhbmP818WVko74wDNgGVoFEhTLxTvy9U2DcmVKD7Q3kCSj46ucVZzXuq83/NFloK/wnAgFIJOgDULkeTzB57KnoYPYJmIjxe+zHDsavQXITl2gvR0+gZtFjP2vgw2HhlrqzQc/VFLJQ/5UKluehYD33QO2m5e1I8WqAElIASUHoUIwJKQAkozcd63XcUKPkfBqADdWpmKbBCejh2N3T8COiMm6hzG1pdgtZ46GIt+6kgmAXlbthw9AEXNW9Hp42AVpagC3xUd14Gdn0ObnjpXqDb6BHQiSXodA+dVYLiw9A/z8zd/NX7HzEvJHngoXNkAAAAGmZjVEwAAAAlAAAADgAAAAUAAAANAAAAKwAEAGQBAJ/K/NgAAABTZmRBVAAAACZo3mOQ2f74uvyOB7UMDf+ZGEgB4tsf/ZcEYuntD9NJ0igE1CQCxOLbH68iSSPv9sf/+YFYaPvjepI0cux4/I9r+5ON4jtfcJOiDwCu9COhqRjjzAAAABpmY1RMAAAAJwAAAA0AAAAFAAAAAAAAACsABABkAQAanuSfAAAAYGZkQVQAAAAoaN5jYNj2RIZhx5OvQPyfCYhZgJh9x+P/nDsfr2PACXY8ngvSgIyBmn8ANarg0fTkDromhp2Puxjwgu1PNqFpesGw+y4/AU3PFYAKz0I1PGbY+ciOgQAAAF9eSoCTwHWxAAAAGmZjVEwAAAApAAAAGgAAACMAAAABAAAACAAEAGQAACJuQm4AAAK1ZmRBVAAAACpo3u3VW0gUYRTA8cmNLqggGmSJYCYUCUKBoBTZBQJNIioqhCipEIokySCwixRZgd2IioouqGRsOLNz25nNaCkwNAV1173O7s6us0ZFPRRhkeTpTO7m4vPpqQ78nwa+H99whmEYwnltHcrr73J97WddkNpAl/sYpcPgoe0zEezHAOdeSob0sa5yPHRyJvSGG24lQ5qbIe0l6+7rYd3Qm4qwrveD3GAWGaTaPLXdnBteYK8QM8G+KeggGcLz/kyeG3krcSOgYiboxPCGg1ar1UIGddq8F602D7CcBxCEJPiMdVWQIQ+6goWPbN7v7TYvdCKWBAXO84R0nW/xPv4OIvcxBKEDIQTHOzlfARlyWQxsvMr74AaGINxNgA85TzPdOjuds1t4v+sS74dWLAne5n1Gm2M4nQxqEoP1p4UAnBX8cB6hJHid9+4mQxpUT3ajEPx4AqEm7EwCvMD7ewBgFhl0SNJu1otBaBCCcBwzwZNC4OcpIVBKhtTatBUHRG2iTtTgMDYNavdI17lGDjv2iCHYhwiCkAC/HFW9i8iQLVJ423YpDDulENRgJliL0H4h1EiGVNq1uZVSJFiN0FbMBHdNgaEj+IwMWitFmjbIEdiEIQhJcIccriZDSmU9t0zWP6+WdahAKAlWSZFu0gUoUaJtK+1RQBAQhDVT4MR6VSsmQ4rsetkye2yyGKESbFUCLJf1K3RXwa88X432LrHHoAhbjkgC/FSuGtlkTo4S27tQGYXFWL4Sgz+gotfR3cb5ISNDMcayFANyEJoGR4cYK9D9ntMc8ZY5qgHzsUzETHABQrmKsY7uNs9jhYwa/4aBBUsBn5KuMwLXTCQ1iyM+Pk/RC4gh4/FMiHHEzzHkoxhVePhkChRiHO/Smb8yanwzo4x1/H6NopHH/J9/Yn4ByYxYN7/uQDkAAAAaZmNUTAAAACsAAAAVAAAAHgAAAAUAAAAJAAQAZAEAs3ud4wAAAfBmZEFUAAAALGje7dRPSBRhGMfx8Q9pggUZFoqBEQgSgQSCZbSQXhQURA8S5GE7FJUHFfKgsHkxaS9FeglBUC97mNnZd+Yd96Kgl7IlaLfR3XF23d1xV7xIFyFEfXpGZmnxEjx63B98rx/emRdeQTjHvonhhe9iGM50SAY1MdyyLEVO1sQIfM1D16WfXhLo8UCxJOnrivQLghji4OB7IV/oKgmdkzbci34dfJiEaA5fkSJuEjglRyun5c3sF/8GzGF5+A/7C0jopBzzfpCj8FHehBnMwU/m/fojEjgqm3fGArE/7wIxmETY6+B48gXyjb9mhjoUMOAtouPYRCBq4wfvmX6LBA4o8U4324IX2BtmwDDiozbOjDES2OfTL/WyeLRfMeEZM8HGX2KDzEh5WLaChLYpiZEOJQ7dWC9m4wOIP1eMHhL4IGhWt6rbv11qAtqxHN6nxJfJl9PIk7NNPAnN6jY8xBz8qEtO3COBNTzZVM9Txw08BXcR/ocnPtOOCFB0TUuv3tDSUKel4DbCDr5/n2Wvk8ySoPW0fMmCSs2CKoRvOni9mnxFOyXfKhOWdiwMSrDLiF+xcZ6OCCtQSnwsLZcN5leKlWs7T+hPOt9tPIsKwYwonHta5lMeagrMqhUuZPaJufX49B8XVlhh/99fDnKESFU/MpsAAAAaZmNUTAAAAC0AAAALAAAADQAAABAAAAAIAAQAZAEA9UdUDgAAAThmZEFUAAAALmjefZBPK0RhFMZ/58wted+ZspYssFCWslBKFkpZsGEhn0EpCwsLyp+NBWXFN7DRlBQb38ByjJpYkJKbycJcZsY9FjNu103z1Ls4T7/zvKdHyOiqWO4tfNfvAsinfTFZC7Jw1Zp7X6J5j+HMyLXshgRa/APvn92OhsKyx4gwHEZ76WhsbqSiCWkmrzk9CEU1FCX13qrN3DZAkrx0fr8Uik60UsEBHiGCjYXF4bcEHj997H7Vxq4zTb53rVNKXYXnk9/AAKCaj9c/0f7srZ/Y6vHUVDNppPviqc9JXHaY92Y4wJnhseLl7MB8uoAgUtuKUB/9SaVe0++1bK0ByCRADaEmgjejJvFhODNUycKKUUobHyIvYdDc4R8p5FaAm/b8hMSLTA++01HXDz1smnZCfgAx7nr6AIqbTAAAABpmY1RMAAAALwAAAAYAAAAEAAAAFQAAAAcABABkAADHjO1dAAAAQGZkQVQAAAAwaN5jOL32cuzpdZf+o2CgGMOZtZeL0SVAYgyn115SAuIvCNVANlCMAQROr7lgeHrtxTlgDGSDxAAF5EHBroZQLgAAABpmY1RMAAAAMQAAAA8AAAAJAAAAFQAAAAUABABkAACeX6S1AAABHWZkQVQAAAAyaN6Nj0ErRGEYhZ/3u/d+N5ntWFpM2ZgNo252UhaSYiFlMT/BD7DzF+QPyMKsJKXLykZJjVm4UmpCMigsxuY2zL3zWhjCqJlnc+qczqkjAKoqld0oaCkZJzXP4jVfCnOFB7og1bDq1xvxPsjkn+xVIRLkSFvpVrAwctFRLm+fFxHdpDsVQdf7EreUX8y/A5hD1x04djxOHY/IuFwal2vjUBPDkxjqIsQICYwpshG76U1552wJQKb2bnMeaWTRfotiAattRbH6qf5vX63qrAAQ3o9ao8u+as6iWR8GrWrme6BjULFQkn/fraphvJYDMw1aBIKfsQF8dE3ohYO7AFgBmW87VzR1orfyF+HjMCRZaJwwM/T2AQyzafxz+v/6AAAAGmZjVEwAAAAzAAAAFgAAAA8AAAAVAAAABgAEAGQAAK3aH+QAAAHSZmRBVAAAADRo3q2Sv2uTURSGn3PviSVEu0h1cwhULEG0igHHDoI/0IBWQaEKXcRBSgfBRcg/UEUUXIMFhThUqSZxdq2KFQcbRDEZFFOhQ0oa/b7jkDb9Uqsl2hcul3Pv5TnvuedIoVDu6WssFkGG6NSCwawgLywMHqSH97+jC8mzqbcjHrnvMRTwBorhAdf59qVgd+I/9WHqXKq5Edh9Q3fURKiJ+219F8eCCHURGsjBH0iursHHmak3V/L5vP+r41tP55ISBLMKCQ+otdwq0K4ich65e+UCLg8N751ZFwxw40l50Etw1UNSzfoU2eWxrauQPyZsaMjFzOnUo3XBa5XNmmsMfkjGCI6qMOLN0u0ERBKYoRCqyNilzMDdDcFrNT79Pu1DuaZiZzxI27W1v8YUxscye253BV7R6HT5cAzuKezrBBseTJHR7Kndua7BAMcK5Z7e0E167GwLHGkwVt/iggM3TwzMuW7BxeP9S+Fi8vy8SK4mwvzyaC7via9hLIeZdO14tcPm0oc+TSpc6Ghqq4oj/w4Gdj7/kugNll4r1h8dSzWu/xcYYHvpc8Ybj9uuDWLGSTZDrlSdiJWqzXip0txWrE6wqcpX4uQr8ZXwF/buq2nt8Lx5AAAAGmZjVEwAAAA1AAAAGQAAABkAAAAVAAAABQAEAGQAAFT/qnAAAAKNZmRBVAAAADZo3q2UT0iUURTFz3nvUxOFKKyFRgvD0PzXTDLYrhZhRFJqDrWwRUHQosIoajm7Ni3KJLdmYDAFkxgTQUTQpiIxLbUU0ijaJIHZ92b8M99tMc44M/ZHne/AXbzN+3HPvecSAESEL/uGfVpQqGPqO3MWpr1HvN/gkhgOT+TlRqOPNbFfC6ABaAg0MCPAMMEX4sR6fcd2j6wbEgqNtmk4PfHPk4B4yfKbwAAht/IXrXuV/sr5tUCUDdlqSBgSBhnF5YqCe+bBbtuKTb4JDZ0NBoN61ZB5JydkQDv+KZAOxAqgTRYbUbdLrIrXrx68q1uVXQDQ0TfiyaU6p0RKtWCLBrZroPBv1iVtJaLKkZP7mmvu/xeSqUBA1DbPaCmgDmqRNg34/gF0LPDCgabKzjVBMtUV+uiz6FzWkBYN8A9A0ZD2xqbqm+uGJNTZP7ZXO+jSIrXLtiW7EktwqqWpsjsrCAB0hCfynIXFuxpojXeSOifYuQ69x5srxtO2a62Q84fK5ornyk/Yoroz19yQBbNK7gQCorKCAIDfz1j07c7ThuhNzxZgyPoiz5g/K7tSdenJUEHeXP6ghpQlZxNfhFEzWF4dCNBZdycJXW+otW3yTFpwSRiqXdrz4WhWdqXqRmPZ8wj5bMVporriGgQAZqmu2SBsEDaT58nX/nCs2jVIz+EdTw04mOgiAYzonHrXIABgk/0Z6wwD1ACA5RYkQgxr4VL6GQ8nWeUuRPG9coi0cyNSlXVOUtUaFP2pYOqXBjak3rSY6M2uQQCgIjz1VQMlKZ3A0SxWbkIMOJlxYn6iaHraVUgEuGrImaXtWjTExYG6ugVX7QKAjY8+b4KGVytr/EdDyRcA+A3D0hL1rKSxAAAAABpmY1RMAAAANwAAABkAAAAiAAAAFQAAAAUABABkAACrOn62AAADL2ZkQVQAAAA4aN6t1llIVFEcx3FLWqAeCgLDoEXKAsnQ9oVWi6IgKgwLRSEKFNswKorKQikyipKixcwsra7jXeYu0+KWWWpOonM9M+M4zThD9dJLkNBLzb+fmS2itHgOfGFA8MOZ//9eJiwMh4iGVMlsfq3UuqrBYsbWKc2RYTyPYXSMsIltVY+kNqqQTKpGtaJJz0XzQ4PoqG0SzdyXlpaYQSHlkjNFAmBFOnqIngCqQk+B1aF60UFNosNuF1tTmcCG/zNSKrGsBzIjC5Ik1j8m/cReio63dqk1XRCE8L9GCss9UcWys6sEyH1UhkRgChAN2dBjVAmoBj0D9qIHe9VoMef8NVSgsLhC2VV4W3HW3JUZuyezjwKwcmAyABUZqJ+5fWoUHYn/NafsbBp6R2FT7yssE1jjH7AvdZIjc9AbWCKxeZhbGeYWGmBJQpjbXi7rXiq6FuJ2Lf3PzQxVSo40LtAlPFdYEmGAJemqEF3RXCBBoPAimd3CkhCWhH5bEtms754pF6j7HxXKrKRIdtIdVAqo93kTxbYkbq+k4keto65LTs9NIH0wxu023Sdfci2/orjoGoACdAvh4aYSxdzM9SV7QXFVXgJ0GV0FcKMHa+SK5MmehHOKm4DRD+zb7VwzuUI5iqv5DKA8dB7AxR5sJ1fkhLX95ClrO+UC+QXL54octnq2HAVyHJ1EOVY3nba6q7kiexX39ANWDx0CcAQdQ9nW9vdckUS8Bfaonk/7Af2KHdYcY7lCu9SOtxlqB+1WPbQPUBY6qLj5/ihJU73vdgABRukoE1gmTySt2j9yu+b9nKJ6CRh9x0IZAhvNDdmk+mZt0V7TVs1L21AyoFTVG+T6Va3VfMkbgGxEm1EioCTNa+OKJBi+vDW6j9ZpPurFcLuz3IDZdvuwJbo/sAzISrQa4Wa0HrfjhsTbAslzdT8tQIvRUiArdN8XgJO4AJOxVTFGp3+W0UnxqBdbpPslbreYogdSphkBmgEAGMWiODTHCCzmhkx4GMyaaAvQFEBT0XQUo3dqXLcqQgtEjbcFuybYgvQd64rS30SH8T5jjM64cbZgQQSKxOe+f/8KwVMMQUzpBO4AAAAaZmNUTAAAADkAAAAZAAAAKQAAABUAAAAFAAQAZAAAmL3pFAAAA+1mZEFUAAAAOmjerddrbFNlHMfx6jKQiC5DvOEUMycacUNAmQuKI6BGYzQi4I0Fb4iYEYKXKF5ivRAFJBIVvOEmOHAetnO/tCIdDpAVq1l7+uy0Xdv17AzemBiMBF4o+/sbQ6yAyVifk3xfrp895/88zzqfDw8RnRWSWXVIis5qb7GrdiuJcT6ej2l2j9TFeMiS4vQd2iHZtBPtFu2DP4qx9rBor9zX0jmxIESQuupEiZECQEeDmH0C2yXaBIzCYiwSEaMLmcBGnDGyVWLPfyszakESABUZKIC2AwmhH8RjK6O9wPaJsf0RKbpEEISiISMNranyJpkd+gaIgFqxKhmAhkwURN8DakPtgPagDmA/ibGfwy32jUOGNips8ibZafhaYTu3yowB+2OI2JGIGJs3rDn5/XS2oLAKVI95hf87r/jJ8zoalmL1Be9AQWLTRJFtw7z6T5nX4E7s75Ciy7hsd0F0arA5Ov9nc/TvkWKPcTtXrTLGdvp5Hdoldk7gsyKBirDlG089X8Bkey9hplyggc3RLLMt27DtT8aCYvwhblfS5mD0XBzm1GkOM/PzWs3A0yg5tU1yF504zPLg+dJFew7XS7ZBcnZsAoSbg/JujjBX5HO5a/ZGII1oM9oCpPkY5lRyhTYozi+fAcjHmpT4Iq7IOtV582PFoU8QVkZfoq8k9hFXZK3qPPABgA/RevQp+kLuauOKvK0krlmlJOh9lIf9yhUZuAXeURJH3gWyGq0Fsg5t0GOlXKE31OT+t9QErQTyHlqDVvH+UrJCSx54TU0SMPoH44r423rOeUFN/fUSgFfQ68ivJvv9AhvNDVmqJSct01L0nJqiF9HLQF5Vk71cX9VivXvBEq2b6gH9iyUtrsjjemrNU0AWo2fRUkDLldRqbsDTkUjxAi3tLtTS9ASAReiZgVVhddyQuVrm0fl6mh5GwOg4dvRJIzue21/Ie/UMu1/P0Fz0IKBHUJ2Wlrit4k4jW3eXnqV7ANyH5qB5aL6Zns4FqDW7y2qN7G+zjCzdgfKwEBdg6vZMyc1GT3i60UMz0EwgsxFWRncb2RkFA5W6WzrJzHVMMXN0EwBgdAu6DQCw5oKBci1zxQTTjV8HoBLdgKYCmIZqjJxXE/DGDPvDK/DN8TLLXTHedH8vN126Gl0LYCKqQpPN3OEpevbW4f/6+J/yAssNXWT10qWozHIJGOVhh6833NsLekWjDK/6fMujUgBj0cVoHLoc2JWme/AqPTez4DkUB73qUQGPRgMqQWMAXIgusXq9Msur4nPi8LqKAn2hEYCOY3+WWH3rz9MOjOV6y/oweF+gr6442Ld8ZMCrOJMf/RuAQ7maj2/maQAAABpmY1RMAAAAOwAAABkAAAArAAAAFQAAAAUABABkAADdrYtsAAAEPmZkQVQAAAA8aN6tl01oXFUUx//nnjdNUlMkgl2EGtqhak2aSWvbMYW6iAjmo9Km1QErqVAholJEQQKCMAvBjS7EqktThYijJq2RaWnVVLPQSkQz6aS0oYSQGBctxZSkybyPe1y8eW8+Mm2TybvwmDswc3/vfP3vOQQAIkLnTo9HQ2JXG466rkKhG/sObJtFQIuSyYkKZylzhgktDIAhYAAsmGNQSkGGWTt90ed2pMuGJAbGuwzIF/7h/uPDvP2fDPm4yja+aog1mKuBKBuy0SLAIoIF5D3Z7+TtaZcF6l0wnMmRgdFXE4kErxiypEMDFrDgHki5w30QuaAcrNYW+nSLse2Pi9+O7V6RuwDg5On0Tog6bpAOs+BBBupYUF3owrx9zoVLDBzdfSjyzT0hxSseF1W/czysgFbW0sVAtHSsAIZog/DGns7IiVVBitfAQDpKIm8z4TADVAImTPrN5s6mj8qGeKu///JeJuczBppKuFAMkmN7OyO9a4IAQDI5UWGamS+V4PllLtRYUOQ8/uShHVcLsmu1kPb2hzOm2fCCBepdloUK99mKT0pc1JogABCLkTM2Wv+yTdS3LOUFzT9F0rE1Q9wMJH27yu42gYnCQibYhHfjedaotQjf0WeaFizo7hKFXP9E5NLBQCAA0NXZeMES9bMvQR6MqCcwCADYJO/7wc/CTKLoqVOpxsAgxw7W/2gBfxUIK4AMqebAIABgKRosTmlbUwQAjKAgJpAyiKABaBH3k2h7oJCM0CWBf7gH2l6WrNxpJRLCUxVX5hlSmX/DClsPBBaTWIwcC7hZkGUAHGddVWDuygaftAi0ABpufNYFmV3xoclKS7AxW4ieJaIyzq3ALLk1bz4aAlgDueBDZl6PNcwHBnFINcJL3WyWOaB0oClsQZo0Za0QNx5K9FhgFd89MhKyhGIFLRQAG5wKzJLb/9bEDEid5yYNgibRJvNwIJbE46IckndyzZ+vX99/0hGeCsSSv/dMvshC9QyBplw8ROODsruV/NWWnNiktEoxUFPUuQz17d/6lPe7si15+vy1+02TvmNCjVvhuXgIOfH835YF2ffDVM2iqc8wENWem5BVXqKv+zse+XVNkF2D1+oWoZMMNPiZlJP4GYdDrxX/Z+WQhPBjG6ZeWRK8x0BNweXkiuGiI3Lkl9aHbq66Ta0dnF3PbL+kIG8ZwNZlPTAAFllUkAMXO8LnV9ZwJ6arqtc7m1mpCBNaGXKYQRv8w2XZyDenNDpH928euvvocHb6CEA9BIQZecOPlBiA3Df39v8octqvtIVTdx+Czk5HAfotv/pV/psKSk1bwoTPqyyj5+qztTfu5XIDQEuxvPh3gqtBWWUFNEg05BxExWfbNv2+0pwxQJSG3OGOyGXOfxqSEI0Tcx11Y6ue492YzHwI4DiAUFbfrgO4DGAMIsOotJNo2bJUrjr8DzgKCvJ3CR9TAAAAGmZjVEwAAAA9AAAAIgAAACsAAAAMAAAABQAEAGQAAHrt1WoAAAS9ZmRBVAAAAD5o3r2Yb2iVZRjGf/f9nunmZrbAPoiKDu2Pc5t/h4J+MKJsM3SaByxUMDCKIgoi6NP5EAQRQWT1yVADo1M2TZuW2aQRWExkm1NKzcbUCEUU57Zz3vM+dx/On51zXDVl573h4cB77ufl4rru+3qf5xbGGGYmJw90Nzqjygv0qpT51xatXXSFcQoZS1Jb27mJ1cODhxVZpYV/3TToFqTDXLC38ZkFvSUFcry1Z7MaexRQjPTvqJtPCvZhRSryeW20Nnk3QHQsSUl40BfwBXwkt1KAK0xdbMiuwUhwsbO168V4PO6NLxBnrT5y20fIASoABQFgI1ummcnHsyOP/PrLVz1Lxk0agAMHehdGAveKitZ42FTBZipUKaBGTq586TIxLLBlyfr6L8cFSHHEYqbLFp6p8VywWpDNCo2FoApqySG8urSlfse4AymOI629jWrBG57IBgUZhSUTsdcaWxo+KCmQbBz+unu5J/KJQkMOyAhLJsK25S31u0oOJOs7kkx8psbGfInUQI3bSLBo5foFv99119xtNDXNTdxKntnkw678zvIFfKUyUG+3xUxLDgQgGo0GnV21z6dgr0+h//jGsmP1vdGSS5Mfe77rqqwajJxSbO5I8YLCmRNdtXWxmLiSMpKNLU823E7gtvuSJ1F6zVtSf3pdyaXJj00tdcd948e0IwtZUCmRN0MFAuCLvFPAiEBKpHH//rN1oQLZum7eDz6cSn8s0x9MH0hIsCxUIAAp7GAqVyMZeZzUA0TCBJJQ7Y4YqI2YXCAyP3Qggclpw1CRPLe1+aH4SH7E4+b1T/xtQLHyfE8Rz38g1BqJRiXw4XqB7QNBMKEiVGkAfEXUZdlIS5QIW5pY+8Vydys5oODlzimGJRPBfaEyMjSQfHgERIYR4VIsWjsQKhDfaZ2KFR8le0Nv36RnDZ5lT2zp+hBzPaE66/bOzrKUSbTgSgKk8LpDZST115SowMz8blHB4XkdoTESi5kmRd4q9g8fvvmouaYvNEZ6l55/Tk3mqWRtPc0IjvdCOyqubzs33TntVqgu6pb2vWvmPJbNKykjjx+9MGU4IfsEqy7wDsCTIJafWzIgKw71VbtkcDgpNCqSadk0GyLyxcHmh34qOZAVBy/MNFybj9TmpJAcG5fwyl4q3hMBmHKor8Y8b60K1264oThNcxP3AmBj3Lw/Jve9kHD2tuRqQvLvwEOe8eyx1TOu33HlLGu7vFDVdShUZu6o59Xs/cogsvvK09MGxwJg8cErkwa9xFZFXleYk3foyb/HDCm29ufmmqOjX8KP9O9UZFvxKEGNW4rsE3NHIs51Vwx6f16KzhgCmB7vr/AmBbOcar1ntlqFDQqT73jHyLopjpaTa2a1//tY4kj/TpBt2V6+Y+BSMF5gIPO8SotzjVEAGAqXRVzT6adquv97dOV0B8IQmdFTUHTKLhxVUeUjVUXumMnLrtxz89FP/WDCgv8DMWJoh/vrEX0X7IlikxsDS8VymMD3YkHsctPsE/c23vy2vw6VlxGiwP2jTf5GqaVse95QI17m2PF384ye8Zmztl8sZzjShMhKoA54FJgKlGU2+QpXFc4qrkdNOobKU22smj18r97zD55t9cK/Y9FxAAAAGmZjVEwAAAA/AAAAKAAAACoAAAAFAAAABgAEAGQAABkw4gcAAAUQZmRBVAAAAEBo3s3Ye0yVdRzH8ccbitc0BS+EhCh5AWaa6PA6pcuareFMVzKrpYU6rbTbWo1yrmY1ui1npdSapUd5nnN4riiCl0oOUIPznEeQA+f2HPynDZk43Fzy7fPAOXm42JDg8Py293Z2+D0Pr/34nd+eA8P8z+GSXCMr2OqSCtZBXWouZx0XKlj1QPmpqvnMYI2yAjW7vDuupyor2eqtmkWLiijwYoG69zdWpUtAlKFeYBsrueoci8UyLCLA4gJH4jlOvXEByIvIwP7eO+wf9lPq4oggz9i0hWdZ9WgJp54DVjvPqi29xN6sZB0bI74vc3NpaKlNSyrlHLuAtXfF2jsjb1dgHjOY4yynLTnHOk4C22Zgf+2ObSvnqvcwgz2KWccybIOqUk6l88E9G4YF0vH8oCMlnJunrU5LMZDAUidsgXrDzlbNGXSkccTInDO/iHPSaQA7Ya3qJcIeHnSk8UHiOecxEUhgKRxbzDo3M2YYRUXVYzjOWVcInIBCWIVzarlmWEVjnOTU1QWcRhyyAmdgeQPMqlmMWcYJTjtrsWp0EoVh7aYB/mi9vO4YcD+j4yiEtVprUkyD/MF6+U9A6ScUwp6wObeZBvitVfvge+COImCpHctpX5kGeKiwZsMhWw0dBuw7FMSWmgb4ua02+UsAv0bfoCD2L9MALRYa9pmt5mYeYF+gEJYx0/jYVtt40FZLnyJgKc9swP187dUDwH2EgCUDaxpcbqln1PuFV/7OLbxCH6L9hbUEbJtpgG/xV9LeAexd9B4CloD1mwb4us215Y3COnoTvQ1cECubBrhbqPvkVb6OXgNwL9pnYG11B02B215ZOSKHd/l28i7aBeRutAcZq9oxg2hIquhJX4SM15EGvsi7nnsJuO3oZQQs7eBdt3eK7plMEr4jzJO9JfMlL6WgNLw23ovkk3W2UK9t5evpBcCAJQO7jXdx7ROSRF/2bMlHc9BDAM5DC0TPK5ECbhZd2ZuFenoWbQEyGxnYrbb6jPYJMyXvvgTgHkSzUBDblCQF4gYalyW54jYIDU2INgK4CQWxJf9Omi55F86Q/RQn+ygehbBYWXvimYYJA4Vbh3s/KTTY1wP3FHoaZSED+4xYt7LT5Cmy/5dYIKehcCxWtyxe8E3sb9xy3DNTdJc9KrrpccFNTwAFLBnY9aL7eLcLxiv6pEmyX58MXAwKYae3Y/1OrGR8v+H4hvhVgse5Grg1aC1ah4JY/TFYerxwnOJfMUHWWyfKOgFLXbBNwO5g8EjUV9hGXPuI4N2RLnqalokeykDL0Uq0qgPbulZwr/jPm4wp8mWOBXIckMBSOHZKB9Y1VfLnTOevju4tbBHmpkqenDTJ61qIE+JhtBioJQhYCmJbM0R3Zq9uOEoJrIlW9ObRik7AUgh7Xyes7zpWNz9W8m+aJnjnxln06ND1xuuZeG8WfjZb9OUnS77rc0PHV+isRWHY5nTBu+ae/hxRsp46vCgQGAnkKGRgx/SAvf/OytJU2d+CbdCCPUsPtH/AOk6ERONECB5fyeFnbQc2sEB2p/Zt0/BXJw9V9CPDlEDbCCVAUfeGbf+Azbg7ti1Z8h+Zg9/RD/8vCyxllEZlCKDA0t2w43vAxnTHtsVLPiVB8izt/5NV1FMYOXCYUQLXgKWu2OgesBNDWMV/LUbWD8ca9xjwgUdzRtazAM1DxcA2Antr+B3sLWAbgS0eq/jzAM1KMK7p4/gHhfht8rs3/k0AAAAaZmNUTAAAAEEAAAArAAAAKQAAAAIAAAAHAAQAZAAAz3myWAAABXlmZEFUAAAAQmjezZhtTJVlGMf///s5xwAxZFM+kJKedL4Qh0wF23JFs0zAEp3HmlqrNluu1mpzbs4P50Nf2lxby16/qLWsKCIlEULFjbVpUY5DUFMZAidaL5NShMPzdvXhwHl5eBEQOefant3bc5499++5z/++7uv6E1MYP1Y07wTl43E8+hMh76Sars9yfbn6eN+vphJWB7JMADYAGfvRlQIe7nNZ7Y2VTS+Vl5dr0w5rQyoN4Q0DhAHCBGCNDZ4twvcWupb+cP6r5lU3ez8xxVF3rGWFZtmvaISHgrkEchSQTgjU4ISjrFCIwDOrNnu/nDZYZ/j9oh5a0erRbOtxCncSKFCQCDTjIWwQr64u8x5MCKwzTle2FGhi7VHgFgUwDB0HL0J5raAs/+2Eww7Fqa8DD2jk+wTylSAGVqAAUcTzBWXew0kBCwDV1ZfumKEPfEKRrRFYiYw33LTuL9x838Xbkg0mGsXFiweu6q1PG+DhcAYBDA5eCjND0I6IX1RSwAKAz+ezzjXlvqADR4dSXgz4mtPeFl9SyCA2amubZob6tAsEFsemOAKt55py8/x+2ipZYNevz7+hQ3ZFVjV6LV/l/WVTUsggNraW5Z01gTMGCZNDpyBhknuTSgZD8ek3resAqXNIAW4or0o22O2blp8ywAtxGw3AAK01SQcbrt6kKqrZMLRu0+tKRlhLqYAtACWm+CHvdQHArqrutD7071GQZZqg/tDGez4CKQmDNdEsGkAyplKTXAUAPew7alL8BrFNV/hgx4m2/Ylc2SxzaZsBhOJTGOeqrXVtGSb4hEPQOxJ7qtEywKvOTeYa6HPPtDWD0eUmCMxKtG4NBdIeSl1hOahrd16/ZoDiODmyHq5vT0kUqL++PcUUZhlktLABRJ0tyu3ViWD4JsMXqKX3ypJEwfb36kt0QItNXQYZVABggi1xYiYwQOQlTAK2ynPq1QBaVDgJs3lYeaaQnyhYU5N856FgCJsVABhiBxxpAobQt7Kx0T3doLsaG92G0BenVwImGFAAIESDQdpRzQIGkOP+a45v2lf1jwyfAeTErSpoD7i0BgUAF0o8HSZwPKrZMLQO7ENMWzEdbbtF7huhpj3+bomnIwJigAdGKnzzV3duny7Y31Zf3q4Dy8OpirFFzIFh9aznZMcZJShytMU9Lri8geJ5wdsJurn60jzaKkAg0+He1B8tXfTIsE7BsOkfttHAzJBYFZ66tozbBbquri1Dt1WFDmQ6tAqTtn/UhjG7pvNzCrZFXBIZsnjkvGlzQ2fp3T1TCVrybUemTuukAgrDnkHUnQH5RVWJ56lRW/FecLcBBGNOjnDqIAup0OCpasuZKtAHq9pyemE3GEBh1DOInKJBXXPvvqkjk1nTuVYJagmkOnshBfQQ2N91ff6H8NGaVGNYLlpnWseLpLyhgEzHHgGBfiVYf7rU0zAu+yijtuNR2OqYAlKdduXgeJmCt8RyHenemN03HsiVVd1phjbwrAJfV8CiuE4gOvYD8uT3JZ66CRlz6TXBIohUEsiIqdgdL5frCqyAoMZt2wGrT7sS9M3vB4B55V2pqWnWAirlhcjjirJFAbMccIN7Q0DgP01Ydr50Qf2kLM8ZJ7u8SqFaCe6KmGbD/zbn2Dv4e3q8Qxj3kc77v7toF/+8wRO4NTO5qnuO2229SeC5iKcqN508MkY+bGRw0SCHLGvG3osbs/8ZC2NiJkd1cI2m6CfkMQWJdhcjQoy66kMfJkrwHWD7rxQvPDee6SfnyJzoylOKL5PwEZg9DG6sVSf+pbAcNg7+WTK/eSLT3pp9VN+egpCrWJFrBcjTgGUE5iqIexDOoOBvDfgVlGYlbJidYlZfKVoYmsx0/wMN5mfvJKM07gAAABpmY1RMAAAAQwAAACsAAAAMAAAAAgAAAA8ABABkAACqQq/DAAABy2ZkQVQAAABEaN7Flb9rFEEYhp939k7QQhC0sbQwel4uihYRIRCIpL0IHng2VmlFUayELQOp7O1EkUsTibExqKUIGjgTA0YL/4FgYSB7s7ufxW72stff3QvDwvxgHmaeb1YMZHl1px1IjwU4s+X7zYuvGGI6nU5wslp7LrjnMAQ4yL7G55lu/YZCpeR9RZbe/Jwx0o8OXL4odamuP1yY+DJM4DA0d3Vq+0UA7T6s4QBMd+Zu1V+T9xcLIuyZF84LPODBRYHNMuSEodJjJ5JFD7v5vniER8TiaRiaK8FGV3abXlw+nOQlvCDGthlB5uen9nvYYrY/R1vtWmOrWYKNxaOBSXjc1+TbhXeMKLcXJj/F8MFLxMpPFhFLTwpnH6zvTFoSdAuxD51JdXOpeX6DEebl6o85sPdlFqjiGg4gSqvTXlC0zJnNUYMC3G3WNjzaLHTMbzlSMu0APNboD2a+xs7WGFN62NpgofVSNSoZLPXBY3epuuOCTZzrpgYy6/NI9UpWXLokK/taCYLv44KNTFsBhqQjPwiru/bbP6d6cKbsrA7+7p/7PS7Ys9HELw8HpZdJOu3+JTpe8hXwYm+lpWRcsK2WEo/2BovsP/LZyUqNvyewAAAAGmZjVEwAAABFAAAADQAAAAwAAAAFAAAACAAEAGQAABBMi7MAAAFBZmRBVAAAAEZo3n2STSuEURiGr/vxamws/QKbySTEwlYWVlNGGSULRWyUhY2NmrK0kI+yQ8LGYhpZSfIPSIMiSxtsKd5557GYDzMac+p06vRc57rPeY5oMtxdF9l8CmPMnHeCaG042fui/4Cz7G2/S9vmGhRggOA5isUSDaGT3N24OQdy2gynBqIFHwr+Ake5u4XQ2TAwCQyVIAfhFGSvddBe7n4xdNYFKp3sVYMJQFsTo4n7aryd04dpK/qugWrjlNe8ebQ0leo+p7zPZvap06xwDbRXi90rsXJR8Dk5nxz4rAiCTMbt2x4PDdrrDBJy9jvC+Gw6paj2Gtba95gO8cEQ8TuhII7fbuIz6XQ9ABAUxErV4BWTnoqxr7lMRsVGLQlC6BIqFQsMR/K55ZGej/8aH4T1r4Shy9Vk/KrZ9/oBXY1omw5NKvUAAAAaZmNUTAAAAEcAAAAgAAAAKQAAAAsAAAAFAAQAZAAAZJZ0ogAABJ5mZEFUAAAASGjexVhdbFRVEP6+ubtY/mxqJCYVGmwEhA1bfrdoNBpDFIuEtOBNwKiJJBBJfNCEF+PDPpj4QGJCJDH6QEpIUBZL25QAK5ImEuVHLG1xG40U+an1AUJCKOz2nnvv+LA/7K5tLbRcJzm5D+ec+31nZs6cmSHGKV3tXdVqwo97lj8LACxPrjNsbixbv2wQExCONnH22+4Ixdqs0BcIRAFUjrL0lgK9BE+q7+2PbVySemACqURqyo2QbhLo+wIsJxSSWyTj/+cvhH4+1Q19HbEjzrgIJBIJqyq8cCugHwtYnQekooiAFohwLNXdk0FSP7lkfv/Ktm1vVALt7RdWiI8vBVxWDFAO+F+ExnIf3+e2+o2Lz41IoKUtlaaiYkTAwlchwBCBqwJcz5GZRaBGgBnjMFWGwNsrmqIHyydCBqggAQGzP9ACIAicJbgvLDz20/lFl+Jx+sWb43GVF5f21Vq+t4bKtwjERjFVhQLf/Nza+8TKxujuEg3sa+vTshMogRYodtqNkbP349EnWlMxS70dAm4QgCOYSpX6QayxbleBwJ62Pi0sIHtCHt7b3LTw1ETu9veHep+1yC8I1GU1WmJKFeLdWGO0GQDEADAAjKI9LXeemyg4AKxuip5KP1JR75IHDYHCAGFAOj53nznUPT9LgIQBmx81CzdsW7fiLiZJGhrmDd90+jYZsDkLXEREMD0Da6/GVcQl9l/vfmaLbdPDJItt297pnsgWB9ifOz2KyKw6EU3Z3Jnsmb7j1bo7eIiSTPZMz9y1zhOYV3bN+4iA5GDrhZcE0vkAEXXy5EBr6gSJl/PxRu7vjZm4uOSnBoBb5JCBagAAmtv6ugRYmg9SEjQBB9pRiD0gQkET8ER6fQWo2dMHTmBY+asFBcngnRAAqocXXDRAJm+GwAnYNj0D3sxHxcBNAABGQPrjyqYmX+Kdf1bgtjMEwPpfnDA95CywACsfjgMnYHxZ7FMLiW3gBFxL63w//yIy2Fuw9dy5sFHahiy8BYFqwP270vazqTyIgANRPK7ikR8VMqLcCEwDv628+CaVi0hAlIWkRKJHBmY/bPCmI3/MNiq7/pWcEp2SUa+l9nh/5cMCX328v9LxpcUBqvJPcH649ONiiBiMlaw5fKVqssHXHr5SRYdJQ8bKbe+QBxJr5/8ghoBL1lNwsrajv2aywJ/v6K8Zgn/SAPX31E7k6pABxwpvz1VGOZWQEScU7p5z9Op2JNR6UOA3EmrVH7683RXpNkSkpBbIjrQBNifXzLkJAHzs6FUdoSS/SMVn6oX2Dq6rHle1tLxjcJqxht8R8EMBns5nPGX/TQO6/se1tccLxenMo9d09KaE3hawBYpjYd/v9e5alwfsOWkAmJ24NnXqNG8uRaJQXSPUDQLMHLHHoAoCtyxl45nX53aWlOcVyWsDoniytPtR0iMo/w7l5meUVr5jdlf+CtFv6Hqttrdcc5JxrCUG2GMIvVfFll6XYu81wIzsyDqUm4vrbm7eze11s3vVA/ZkvClLRgIv7ZIdGVhlCeOEviJQFiKVjtqyGev0KorvAD9+ueGp02P5zj9F+PJVVhzSogAAABpmY1RMAAAASQAAAA0AAAAJAAAAGAAAAAUABABkAAAnmz+BAAAAvWZkQVQAAABKaN5jOLPhovn///8ZGUgBp9dd+n963cV9t7fdZidRExCvvRxLtKZTUE1n1l4uRpc7tuqC9Jl1lyecWXdpyal1l4Pg3ji67vL/42svfTm99pISsgaQc4GG3YG7BIiBFhw/u/6SMcOBdZfnHVxz1RDdluPrLzsga0DC33E6+9CGq1rHgIqOA/FJiC1wjXj9e2j95UmHgM4/AsRgbwA1nCCkCQT2rr/stn/95csH1l/+DzLgMBADAOTpoMvneFgUAAAAGmZjVEwAAABLAAAADQAAAAwAAAAeAAAACAAEAGQBAGnzyCEAAAB4ZmRBVAAAAExo3u3OoQ3CUACE4f+uzENQtaQz4NiDKVAsQepKXRMGAE1SdgHxDlH/cCh+fV9y8O/H6dvgennsm+ggwCXH7W59rqJpmNuQm8EiGIqcblVDb6Uj2IAQBqvoVEWvktkyJghYMJvqvSTqx+e9gVaAs8APAjUhlh67PNsAAAAaZmNUTAAAAE0AAAATAAAAHAAAABsAAAARAAQAZAEAxHV91wAAAgZmZEFUAAAATmje7ZQ9aJNRFIaf935plUgt2bVoKREsouLP5KI4tKbiH1bQwa0FR0dxCOIiOrjo6CgqOLSVOhQJKA5CcYhIK1okpeomiNGafF/ucciPSe3fl7kHLme55+U57zn3wkZsxLKhdorMTPfHZkfkdFRmM879uj168uDvRDtid8dnriPdcGYIcD65HzjdFtmtsdkPgrQDhOHASqXOVFtkoaNLHqpiwoG0KdwSmyyb+7yZn+UiEDTIDAtLla2xyRaL5V0BBKKJTCxkh/uLscVC7/Z41YynnnkPEFssCmyv99REVM3GO2qk646R6emO0DQcSoSicSKUj00Wfese9tDTNEUEPkoEr2KRZbPmKtK1EBFC8xm/l+ktxCKbPfTpkky7JXCmuvHguRPrbZ6d/LhN3uUFqdrG18VyD4f6jtXvrUl2fGquu1ziqSC1xCsCVbLNd1cVyzwrpMrlyvNQHJa17BVIjycy6ZfrEjsyMddTxE8K+h0gtezVggUdV5bW/Cd2/okF88nCaCS76SH1r62GV4sOLr4Y2P59xc/xwMTXZBiULjt01UGfrMXoel4EO/U60zu17E+bnpy/gNmAk51z0LWkuNaWIfgRmM68GdqRW8maRBl75NQ6pWajBTjpS0L+xPTgzvxqA3P1dxbVNrqaRYQIkVXgwZ9K5763g735tdboL3R+tcS6Adb4AAAAGmZjVEwAAABPAAAAKAAAACkAAAADAAAABwAEAGQBAFnJ6ywAAAUEZmRBVAAAAFBo3s2YW2xUVRiF1/rPmdISSJ0IPFSug1EotIRbig8kNlGRUmILMgZMVKKBKBCjkfiCySSaGKPBeEkML6KihgypTa29IEo1jREJiLYpJC0FWgaMYqiGXpieOef3YWbOXCvl0nZWcjInM3Nyvqz97/3vvYibUEewI6/P1M2A7hLocgFAADLSA8qnVm4sOYDbkDmaPwWDQcPrWbjtD9h7BCwiAFEiAajIBktgBm5TNwSsq2tfYTjYZ4HLiCiUQEEiAZUGG/0OAwKtHVPAQ3UdmyKKzxxofrJDArr3hEKisP0C9BK8QsU5U+WDsscXnbtdQI70wxd1HTtF8R4BkTiMZgzncQEPiKD52Knic4EAHdxhZQXcX3f6RSreFYBZakwJ1JiKt6urFx3HGCsD8KOvzzxjOPoxAbrOxT/J3w0bz2/ZsPBnjJNSAN+v7ZovEjlFYKpbbxoteirqbHNwy/b1KwYxjnInSSCgMiydnwswNWVCkBDFJ3dbC57zV9PGOMtdtjxLO/0R6CoLROICLOLLP39b8KzfP/5w7hAHAipc1tku0OLoTHUd7JL88NLda5YMYIJkAkB4aVeVARQLmLQAK2jrttcmEM4FjBCvOOkzFjz6evWCHzDBMl9qOFNi2XhAkNauHL6JHJAZdjyrSAep3YKn9lbd911OAFrQ0sQmACAVQq1Hjsi0wMWMtbJY7UEctOUMYIRYBE1yEArTMNpzBnAYmB5fWqI1yOv9A77uXBripH2egsTVQxPUNUYATF7/CP7PHnEiJBapbt+NXjMebDmfnzOAw0DIImCR0Qs0pvTr/TkDGAE7ktyDRSBMlOSQg2zP2GIJluRODarTluIgCEvpX37ihCcnAJVotUgnWn8u6GzPX9P8406jym0NnWU7GjrLoEp3w7q48UItgKq0Q9Lpk8fnlGAMjpLZtKuxa9KAjSYC5TGGlkkG1gqiw/pO2lIDCyhesrL3yfEy76otWy2wPGkulA9G4HcXZV9Tz1FRlz4eYfSZMEvbKmaGxhJuQ2PXTNNhmwBeJm37DMVu99BkOQxkTBbQG1a7xneku3Cs4DYd6S60HamxQG/aYQ1hU79PaWtFzb0HRfEEoRBNzmL0l2GHa3sr5/TdSbh13/R4HdhNhJZlhATAwa8q529Oifb6wReGgZAFJjoLAQssE0Grr7579p2Ce6i+e/YQnFaLKIt1MCTNg5Bh5u3IGn14m3tXi+KwAAUJB9267BNwT8+1WftwizueTUE1Lk3u2S7UNwh43bgu8Z4hUaw5XOlrHTE8Kjzc8zAdqSO0IN362P1ZUey1bfPTy+uLRhWFLK+/PBlG+Gk4fFmo96YNZ7yUhgA89uM635Ebxm9TmkPlVK0lUOjmgBl1otcErBFFszhOmz1oXAj5Zw0BwMzgxYKCyfZcU7SUKo+SulGSMx8A1JTU7F9DWf1T5dyWUeWDAJDXdLHUEDSKg3tSHdRsrsZd6I8lrFOylMgIz+AS6FT8utbXNuoA01X95Wl5HvstAlsFYPLszpZPpzkcS8iyDicYzRr3F9h5r55cX/T3TSWsGWoMrTKFAYHziJsd3gA2q+vR7EcF+JZwAmcr5h27pQh4RDVcLBHhTiH8AtyV9uLsDsa/I/4RZZAOPgytmzWqk+Otnz9azufjulkh5GoBSgAsNKDTBfDEYC0CVwQ4Y1DbqWydmh9pvFA+7/rNvOY/L9Lne0Dh1moAAAAaZmNUTAAAAFEAAAAiAAAAKQAAAAIAAAAHAAQAZAEACVOYiAAABG5mZEFUAAAAUmjexZhdTFxFFMf/58xdCtiKKO0DSqtoVBahUkqkMTzw4AdtSYrVNdZE22hqNBgToyYaHvZNjUbjx0t9INYa06yhZEUoVdPW8GBsGlE2iIFCC2yIESOmLCwwe+/x4S67e7fAbgl7Pclks7tzZ35z7pnzPzOE67TBwGDeVSP2FINeZqA24wNCz9QdrDqRqZuRLUAgEFC3eCqOTsNsY+FSBsAQ2J8ArfIcAduyGT8rkO5gaDdbOBYD7bIAMNmTs1ACJBUq6Q3MCaRzQ0BOnRp8Qot8wUC+PVHK5JScPA4VYciEAqYJGCOxPql7/P6xbEBorT9PBgdbSfARA8ziXHVKu8CwThisen/s9475/WRhHbYqyPHg76+Q4EOG0DWTC4RFOhTRe80tlRewAbYiyGedQ4eJpJ2BNAgBE35TJr/oe6ziJ2ygXQPycefIncyxfga22KtP2RmC4JIxf+iF5t3z2GBzBKvfL6x5+MsEBAAmikNYn9+svc8faSETOTDHbvPUDPs0pF6DYDdAA1gifPXnr97nfL7cQDhejd8vTLuGQwzx2jsk0UaQv1jz+iM755BDS7yaxZqRAwrwMiiesAQsgLLk6Js5hnCAxAivWY4dQmDC2baWe8/DBTMAoLV7qEqb2OPImhAYFr0Nl8wAAMvy1GuSZOYUgEH97xy4+wdXQTSkmlJ1hASKpAsumgEAS6D7nDpCiFkYcB1EEyqTkm4DKaVCroIc+na8WENvTdQYILBgYXaufNRVkIhJBawoXdj++TqHWXRFkCiAvPT8kaFOyYnW6Btnr2oiSdUWDWw7fO5yvqsg5xsrIxoIawI0LYsdqb8jco+rIHYeocGEN8hui4Sq/wMklJT++Cti7HQfhGkgJT6gQYgJ+WovXvS4ChK1zD5NZNkxkgDa7vmrxOcqyNC+8nENfGPHCCWbyFvwC7sGAgAm6P20LYwYkbembuJpN0Aciav89PhZFjSmHSFnGEb1wN7bwq54BAC0Rf7UgI23Yi1mR+33o0WueQQASnsnTrLIk8kCKaFBP2+yqCm0f8dMzj0CABHQS0ugsMZy0MbjBfRAlNFX3jW63RWPAEBx70SDEpxRQIFDlW0PzSiitkuzZcewToVu6hnZFBPlI0iJR4xg9/4dY6uqbNGZ8YeURUF2wCShSHBJgT5YMI3jU82lWR1Ba7umCgvV4rNk0atM1l3x8eZA3LCm3G/uDTcqkU4Gila+khCwYFYJOoioly1rIDqvroR9ZVEA2BOYLFgsNG8HSzUJP8qwDjqOs4kxqD1j3XHD6clqAnoYuDX9ZmgFqOXvkfhvm1fsK5J+zdGeVQG0pWuqxPSY75LgiPOqQjIBYc2+NlDUIHrwuioxT0+4XrH4GXiYJRPQalCJvsKg7wwy3/ilqXxgXSVhXvdkFTFameBjwU0ZV+4E+peBgBL+9I99ZaGs7tAy2rnL+XkLxl4iaWBQlRJUMLCVAU8cSDMwzaAhRRIioT4jP9ZzpfGOhfSh/gMVwbrySbrr8QAAABpmY1RMAAAAUwAAABkAAAApAAAAAgAAAAcABABkAABi76wSAAAD82ZkQVQAAABUaN6tl19oW3UUx7/nd25qx+i2yLqHyWqpaFlqMtturnvYQxEVVwKraEAHMlEGSsUHFYbsIS8iQ1F0T/NB1MnASC2x3daqbMMJwzGpa4kdq22Xtfig4sD+W/O7+R0ffkmam9k2ae6B30O4uefD+Z7f+XMJFVoqkapZdNznBPQagPY1XxB6wSnXeSKR4B2B5iPzkj1GoO3lvkfANirnj98lR3c7BidZ0MYAGAK2DtaIAvMAImtGMvBN6llX5AsBag0JDAAjBFMEK7I5Am4J8BeASYg5seeZRyZXhSSSqZ6MwUcsUAaAgXVeArvCJKccxYNtw6FJipMp9bMi5FTyt9ddkQ+FQAYEIznHFiZZMb1M/N5j3S1XysjL3fZJ39hhh+RTBigvCQNgARzINSXmlejTkcsVJN9rH/eNP+Aod5hF6grO8/oLkhudxeej0d0LlVx7j1zxuChXXf9SgDpDOf2XZfosoEMvR7spW2ltqeIfgdYbMQ3q0CBowB4iZBSdvvlr6KVYrHKAR654XBS13RhlkZBHImBc12Za33py1zzWaQW5llrHDzIQsjIJjOSurJEj1QA8EE14s+iKwhBgIOePdu+8iCrNAYCeM2NhbbAvX8kGNtkw6l34YA4AuCbQYSC2kqVQ2cPvHHzoB98gS5CIU5Ap3zKkHz6ZjQT0sEDg6U/AiK8QTWix/Wk5Hy7zqG+QroF0UMOttzkpdNY7C/NNE75BOEsbNN/Vxv/5ep3V/b+QRQAOqCCThQnBR1N60+y/miCefgXadvjCVK1vkIudLXMamNFkm2EOxn/PSbNvkNwVThUiycFcQthXiAaN5mQqSOYq7PIVsqRopCgf9ghi7VevBnyDZEz2kiYyNicFWMPGP7fGfIOMdTWlNfBtfhLmYRmRtxEX5QsEADKg90vHrgZCe/dMHaoW4im6pnPp8yzodIrXIOB2ADry84EHZ6qOBAC0obhbnHwbVXBJanrbv5/Y7Atkuqvhx4yir7w3DdAkj2rNQ+GBdLBqiNWPXtVEtgN4o9oLJZfa+ycaqspJ3uoHb+1nwRADG3KbY/EmedshHGuevf9kuZ16xW5771D6ccdQ0oIAFkHJPvY7Qz4IZO/5/Jfo9oV1QQBgy+BMpyOmj4HNRftwKWyWhXqZzGCNoRFa4JuXYzsWy4YAQPDcdIQgZxm4r2T5LoUtH4M5Jplk0PGfuhpPlzWc6vr/2MqB7HEWedF+TuQ/JWRlkH1mlJF9FU3ATWdnOpgkzpAnlmGrR+UYObquMRs8Mx0mhR4mibFgy2owJRStapY3Xpiqnb3jHFAk+1ko7EB2skg9AwEGNJOcuP5U4xv/AaU65cQdibPpAAAAGmZjVEwAAABVAAAAGQAAACcAAAACAAAACQAEAGQAADJpvUAAAAOJZmRBVAAAAFZo3t2WS2hcZRiGn+//T0wKtiWg4iKNEK9M2tTEFuNCMbiwTRxsREfQjaAUFMGNLhQXs/KCoqgg6EK8IVKsYazSeKEpZCENhWhCFBKTknQ2XrBQc5tz+T8X58zNVJPMnJUvHGZz5n/O+36Xc4Qt6JvC9AHreMdCn1WwKBYwm/1RWQF6vM3uK3w+80Cg+qGDNofiBJwKjipMqrcvCywp/A4soO6tg/ffvPCfkGOFmSdDxxuqGAc44sOdaPwbwyY80Y88Y0f7JjMLkhf3z3Pk3wAfFH56yqq+bkEsUBuTBbXKcU/klbuGuyc2S+OSkHdHfn7EiL5XAVQPxyo/tmj0ePa+nu/ZojZA3hyZu9aYcNLCTqs1hwOeauFyb+2hbPbAKttQXU3yeTXrZvZjD3ZawIokT69Y9P3WIPNYdlgitqm6LjS9s7kQ7Q8Q4gsCwDfyyfkfMo/mctsH1MWVz6txfbPTFjIWTQoNHsxFbaXeZ+7ev0KDqsS12jt3xEAmzl+wEscUOT36bBOAOogvPG3Lc0AyByKnnh++6TRNygM4+tX8vsC52xyK0/LQKTh5kRTkAYRO+7USU9K2KpMvH7nhu/Qg0BPHVF0datwJUpKX1GOvRZKo4nqok6l0IUi3ReOOQrAKvjXTqUGGvlxsDwivdLWdJayHK13zqUH8SHYYKzVLUPDQPz9rcLovCVkFWiUpeKUmIqQo07Lrr4sBogEQCAQiBMhVd46da0sNcnqge9mHoo8QX+ALtnVZb0wNAhAYmSlv3PL2LQn7UoX4julAJIkqBkXG7E/byZQPSVRxZCXV3C1nz7ak6CQaDxBXiSx21Wl+uyKXGuTcUNdigH6x4Y0Iz5FXkwokWS2v+pJEVu20zN6DSw83C6kbuqtPLp6yyEDt69fChVZsz9RgR7FpJwCRk3yljSudRvuaRse7vp3fnYoTgPbR4qdG3YPV762yKz0TOjm8dM81F5pyAhChT/hIsW4442671RjGu07MdzbtBKBtdOl2T+VrCzvqPlFjZxc9x0tG/Nd+Gby+1JATgPVDneOBcff6hrW6nRZ33q6SkRd8uewkqtKwk8p7YLQ4YNERC7ur3VbjzEl/cWjPmYaclBUe6hgrKXf4SDGQ2gVaHdiG46rT4T1TYWB6fZG3fZGwPLAlZOzXwY6JpuPaoNHz1xmRrFX+CNzaMbZY+P+P/gZjNJnGDOT1EQAAABpmY1RMAAAAVwAAABMAAAAmAAAAAgAAAAgABABkAQCkfZTAAAACtmZkQVQAAABYaN7tlF1oT3EYxz/P7zn/mYtdSEYWeSkzMwu74I4bJMqUv+JGWZMoJa642J28lCgXSigvabI1TJJQklqrsTVqa5mQi2kXspdz5n8eF+f/Nm32P3O7b/3q/OqcT8/zPd/nEQpUY2OjliXK69XktMLCid6RQkDPWrpqXMhVhXVqoIBi6F/v6VSgpqbuPaHwKEQWhQihEB2EMF2L5J1Jdael+6galxRcVJHhMb4yhTbFbjmnTyeFXWv5cEyNiwqS9yFpqKnxwBM5v622su2fnl1++PGAGtcVRC0PhKHCe025w8ndFW+n/AHnmnuXO5fqUKwkBwE1Q42WMW9436GdNcMTFeHlXxoazI1oz23PKFHkL2/kZunYyrpkraQms8blX0bW9iQD2OCL4IvgAz6CL3L3x7uVB5PJyUHjotHQYG5k4eA9Q+YZYICJYOJ6i2aN7jhVtyCYKkbZNr/X9O7yTFYphlquxYSk6k9urR4qJNxZWGByIhV5g0raK3Mvzu4sf1XoyHkA+1v7qgKzjZlgpg3HOTtDDHkAw6FsUAEViyoz8LCOGztWPI8NCyRc4xCycRDjNzwipjwA37nVaulgZn2TzunBTCqjUZHs/AnWFRtW9fjzHJ9w3rjEC6Nzh5b1xYZ5RTI7+C25+YuiMXh/irRPCBtOz1RkfBYqTENuMFH800fMJzOL4IuUbnr5qTg2bGBz6a9A5GsABEj6oAO+lceGEVXTnd0Ukt4UplXTggVIV7ZFMutHqqdbWWeuRSEAAiO5vr09ERs2GuprXyT0hVybIov7B+bvjQPLReDpl2aQXfmr2pn0DxWPVbB56WjBlUVP7gJAKu+vjoktKfYTe2K1CcCWsjdAa+aag1IaHxYRjgP5K3oo9FLN8T3L6Mm3tWh4JIK7K2wv62BGM/o//QFuzQanlLTaOQAAABpmY1RMAAAAWQAAABQAAAAWAAAAAgAAAAgABABkAQDPl48GAAAB/2ZkQVQAAABaaN6dlL9rU2EUhp/zna/SpYOgi0UcioGmVlHuUP8ClxZUMIOToBQFQRAFB4dsDgri2EXEFikRkagVBREHQSnYUIMorYmIOAgVUdqbSJsch+ZHbzBtcl84cO/H5eE953vPFTpUJpPR/p7BcWd2VWGXtPlOOoHNZPOBqzKhcEgBBdRAMRRw3QCnsx9OOOOuGr11QLOsFb68KXAi+/G8N7ul4CIAQK3xPKvIJI5nb3PJYlvgjeynCx67qSAtABTMYw+8cT11bGh2yxmmHy2cUqq31WqwDe48zLsK584eH3zT0aVcfrg4IGo5xfoiMAOFbNktn0yPBWG7znzEWdrcD/95SqFPkTpkvYQ7C+XEmfspqWw29403TiEopEJkJEQIEUIRQoFQ5F7PXOL0VrBIy+m0ufmgmPdYsiVri2vbwoOTRw6sdJLZRsuvg+JRjyQjORPwZuPTHcIiwJJzl9ajIU13Zi+fju19RRfyAMMz34ZDKodb3Sl2jS7lAUKpjnikBmlsQu7d6MCLWMASsl/FUJMG0Is9JoZqDmVfs81akKvyPjawJAy5liA7NB8P+OTr9r/ITgDXnGG5vNJfiAf01lt/qdZqVeQnHWzF/1dvx9IS2J/IqfGFmHIEwSrmLgJrtbPfOLkSF9j8fT3/vpuqJahU5hjd8ysu8B/6h7Fbz1BUNQAAABpmY1RMAAAAWwAAABUAAAANAAAABQAAAAgABABkAQBGTvCFAAABdmZkQVQAAABcaN6tkcsrrVEYh593rfdzGVBmcimlk8gIfwIx2RNlIspIKWXCzMDEhHLSGZ2JtJXBV9KXS+r8Aaf2RAaKhHIZyOiULdvlew32pYNNmzy1Wq3eelq/3yt8QBiGviZoHQ2waW9SpxgeED7m3XkyOujy8dNvFTo8oJYVekABj6GWf2dnABjpotK56GBAsaSHCs2LctKCEPAGit14OAuQa2fxSZl3v95IJ6PDcSeyqJgrSCwnyf9KLBWYrATEOxe7bSczMxK/G39o43jCYz8VkyIxzRtr6mx+NtGSKqnTnq3TEW+25DF58ats9D2BsWTix19KQADat8+alXhXzape96YQlccVgxuJultKxGMm7vjfZkak+Q4hI8KdZO8Mbrk+3TS03l99zycQ3bnsFuyPYrltFnpcvUo1DvNqCaWgj8SdIDwg/zUsRzgd/YoQwCGyXyTAFL21ab6Io7dhE1gAHnJngb76iG8hPK8kPK/8DtUztGqCyuea2MoAAAAaZmNUTAAAAF0AAAAPAAAABgAAAAwAAAAIAAQAZAAAeXELuwAAAMFmZEFUAAAAXmjejY4xTgJRGIS/yXv7HlcQsDK21FyAxNBQk3AMD2BHY6VH8AIGjJBY2e4BoCBsAR3barbZ3d9iSTRbqF8zyZ+Z+UcAD4vtNBr3iVk3YAQg2FkxgjXq+EamW41W+3FS8RJAP42xFWwVfrrSDfybwsx56RcjoeYjyA4JlkeUeZWPq8l15kGnCigQhQB03kUKeoJ6TdrPuFNNC7E89kj0Dlw1J3sG5txcpvxB8+Z1F6EzBJ8zvtjwT74AljFC6d2II+4AAAASdEVYdFNvZnR3YXJlAGV6Z2lmLmNvbaDDs1gAAAAxdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIGV6Z2lmLmNvbSBBbmltYXRlZCBQTkcgbWFrZXKphWVeAAAAAElFTkSuQmCC",styles$3={"formant-loading-indicator":"_formant-loading-indicator_18ykx_1"};const LoadingIndicator=()=>React$1.createElement("div",{className:styles$3["formant-loading-indicator"]},React$1.createElement("img",{src:loading})),getConfiguraion=async()=>{if(await Authentication$1.waitTilAuthenticated()){const i=await App$2.getCurrentModuleConfiguration();return i?JSON.parse(i):null}},useConfiguration=()=>{const i=useDevice(),[o,s]=reactExports.useState(null);return reactExports.useEffect(()=>{i&&getConfiguraion().then(_=>{s(_)})},[i]),o},useScrubberTime=()=>{const[i,o]=reactExports.useState();reactExports.useEffect(()=>{App$2.addModuleDataListener(s)},[]);const s=_=>{let $=Object.entries(_.streams);$.length===0&&o(null);const et=$.reduce((tt,j)=>{const it=j[0],st=j[1];if(st===void 0)throw new Error("No stream.");if(st.loading||st.tooMuchData)return tt;if(st.data.length===0)return tt[it]=null,tt;const ht=st.data[0].points.at(-1);return ht?(tt.time=ht[0],tt):(tt[it]=null,tt)},{});Object.keys(et).length!==0&&o(et)};return i},MINUTES=6e4,HOURS=MINUTES*60,getEvents=async(i,o)=>{try{return await Authentication$1.waitTilAuthenticated()?await Fleet$1.queryEvents({names:[i],deviceIds:[o]}):[]}catch(s){throw s}},getLocationDataPoints=async(i,o,s,_)=>{try{if(await Authentication$1.waitTilAuthenticated())return await Fleet$1.queryTelemetry({start:s,end:_,names:[i],deviceIds:[o]})}catch($){console.log($)}},isoDateToMilliseconds=i=>new Date(i).getTime(),millisecondsToISODate=i=>new Date(i).toISOString(),handleConfiguration=async(i,o,s)=>{let _={start:"",end:""};const{start:$,end:et}=i;switch($.type){case"Event":const tt=await getEvents($.value,o);tt.length<1&&console.error("No events");const j=isoDateToMilliseconds(tt[0].createdAt);_.start=j;break;case"timeRange":_.start=s-HOURS*parseInt($.value);break}switch(et.type){case"Annotation":let tt=await getEvents($.value,o);tt.length<1&&console.error("No events"),_.start=tt[0].createdAt,_.end=tt[0].endTime;break;case"Event":tt=await getEvents(et.value,o),tt.length<1&&console.error("No events"),_.end=isoDateToMilliseconds(tt[0].createdAt);break;case"scrubber":_.end=s;break;case"timeRange":_.end=_.start+HOURS*parseInt(et.value);break}return _.start=millisecondsToISODate(_.start),_.end=millisecondsToISODate(_.end),_},useLocationDataPoints=(i,o)=>{const s=useScrubberTime(),[_,$]=reactExports.useState([]),[et,tt]=reactExports.useState(),[j,it]=reactExports.useState();return reactExports.useEffect(()=>{o&&o.end.type!=="scrubber"&&handleConfiguration(o,i.id).then(st=>{tt(st.start),it(st.end)})},[o]),reactExports.useEffect(()=>{o&&o.end.type==="scrubber"&&handleConfiguration(o,i.id,s==null?void 0:s.time).then(st=>{tt(st.start),it(st.end)})},[o,s]),reactExports.useEffect(()=>{if(!et||!j||!o)return;const{locationStream:st}=o;getLocationDataPoints(st,i.id,et,j).then(ht=>{if(ht===void 0){console.warn("No streams");return}$(ht[0].points.map(vt=>vt[1]))})},[i,et,j]),_},generateFeaturesObject=i=>({type:"FeatureCollection",features:i.map(o=>({type:"Feature",properties:{weight:40},geometry:{type:"Point",coordinates:[o.longitude,o.latitude]}}))}),useFeatures=i=>{const[o,s]=reactExports.useState({type:"FeatureCollection",features:[]});return reactExports.useEffect(()=>{i.length<1||s({...generateFeaturesObject(i)})},[i]),o},HeatmapLayer=({map:i,featureCollection:o})=>(reactExports.useEffect(()=>{i&&i.on("load",()=>{i.addSource("numeric",{type:"geojson",data:o}),i.addLayer({id:"numeric-heat",type:"heatmap",source:"numeric",maxzoom:15,paint:{"heatmap-weight":{property:"weight",type:"exponential",stops:[[1,0],[62,1]]},"heatmap-intensity":{stops:[[11,1],[15,3]]},"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(236,222,239,0)",.2,"rgb(208,209,230)",.4,"rgb(166,189,219)",.6,"rgb(103,169,207)",.8,"rgb(28,144,153)"],"heatmap-radius":{stops:[[11,15],[15,20]]},"heatmap-opacity":{default:1,stops:[[14,1],[15,0]]}}},"waterway-label"),i.addLayer({id:"numeric-point",type:"circle",source:"numeric",minzoom:14,paint:{"circle-radius":{property:"weight",type:"exponential",stops:[[{zoom:15,value:1},5],[{zoom:15,value:62},10],[{zoom:22,value:1},20],[{zoom:22,value:62},50]]},"circle-color":{property:"weight",type:"exponential",stops:[[0,"rgba(236,222,239,0)"],[10,"rgb(236,222,239)"],[20,"rgb(208,209,230)"],[30,"rgb(166,189,219)"],[40,"rgb(103,169,207)"],[50,"rgb(28,144,153)"],[60,"rgb(1,108,89)"]]},"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":{stops:[[14,0],[15,1]]}}},"waterway-label")})},[i]),null);mapboxgl.accessToken="pk.eyJ1IjoiYWxlbmpkZXYiLCJhIjoiY2t3NWt5ZmExMTcxMDJvbW5kdDR2eGs1diJ9.aYT7nc_i5rp2hY4dt3CLrw";function App(){const i=useDevice(),o=useConfiguration(),s=useLocationDataPoints(i,o),_=useFeatures(s),$=reactExports.useRef(null),et=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{et.current||!o||(et.current=new mapboxgl.Map({container:$.current,style:"mapbox://styles/alenjdev/ckwcflbv8201814n10hxbqz6q",center:[(o==null?void 0:o.longitude)??-77.47419738769531,(o==null?void 0:o.latitude)??39.043701171875],zoom:(o==null?void 0:o.zoom)??0}))},[o]),reactExports.useLayoutEffect(()=>{if(!et.current||_.features.length<1)return;const tt=et.current.getSource("numeric");tt&&tt.setData(_)},[_,o]),jsx("div",{className:styles$1.app,children:o?jsxs(Fragment,{children:[jsx("div",{ref:$,className:styles$1["map-container"]}),jsx(HeatmapLayer,{map:et.current,featureCollection:_})]}):jsx(LoadingIndicator,{})})}var Subscribable=function(){function i(){this.listeners=[]}var o=i.prototype;return o.subscribe=function(_){var $=this,et=_||function(){};return this.listeners.push(et),this.onSubscribe(),function(){$.listeners=$.listeners.filter(function(tt){return tt!==et}),$.onUnsubscribe()}},o.hasListeners=function(){return this.listeners.length>0},o.onSubscribe=function(){},o.onUnsubscribe=function(){},i}(),isServer=typeof window>"u";function noop(){}function functionalUpdate(i,o){return typeof i=="function"?i(o):i}function isValidTimeout(i){return typeof i=="number"&&i>=0&&i!==1/0}function ensureQueryKeyArray(i){return Array.isArray(i)?i:[i]}function timeUntilStale(i,o){return Math.max(i+(o||0)-Date.now(),0)}function parseQueryArgs(i,o,s){return isQueryKey(i)?typeof o=="function"?_extends$1({},s,{queryKey:i,queryFn:o}):_extends$1({},o,{queryKey:i}):i}function parseFilterArgs(i,o,s){return isQueryKey(i)?[_extends$1({},o,{queryKey:i}),s]:[i||{},o]}function mapQueryStatusFilter(i,o){if(i===!0&&o===!0||i==null&&o==null)return"all";if(i===!1&&o===!1)return"none";var s=i??!o;return s?"active":"inactive"}function matchQuery(i,o){var s=i.active,_=i.exact,$=i.fetching,et=i.inactive,tt=i.predicate,j=i.queryKey,it=i.stale;if(isQueryKey(j)){if(_){if(o.queryHash!==hashQueryKeyByOptions(j,o.options))return!1}else if(!partialMatchKey(o.queryKey,j))return!1}var st=mapQueryStatusFilter(s,et);if(st==="none")return!1;if(st!=="all"){var ht=o.isActive();if(st==="active"&&!ht||st==="inactive"&&ht)return!1}return!(typeof it=="boolean"&&o.isStale()!==it||typeof $=="boolean"&&o.isFetching()!==$||tt&&!tt(o))}function matchMutation(i,o){var s=i.exact,_=i.fetching,$=i.predicate,et=i.mutationKey;if(isQueryKey(et)){if(!o.options.mutationKey)return!1;if(s){if(hashQueryKey(o.options.mutationKey)!==hashQueryKey(et))return!1}else if(!partialMatchKey(o.options.mutationKey,et))return!1}return!(typeof _=="boolean"&&o.state.status==="loading"!==_||$&&!$(o))}function hashQueryKeyByOptions(i,o){var s=(o==null?void 0:o.queryKeyHashFn)||hashQueryKey;return s(i)}function hashQueryKey(i){var o=ensureQueryKeyArray(i);return stableValueHash(o)}function stableValueHash(i){return JSON.stringify(i,function(o,s){return isPlainObject(s)?Object.keys(s).sort().reduce(function(_,$){return _[$]=s[$],_},{}):s})}function partialMatchKey(i,o){return partialDeepEqual(ensureQueryKeyArray(i),ensureQueryKeyArray(o))}function partialDeepEqual(i,o){return i===o?!0:typeof i!=typeof o?!1:i&&o&&typeof i=="object"&&typeof o=="object"?!Object.keys(o).some(function(s){return!partialDeepEqual(i[s],o[s])}):!1}function replaceEqualDeep(i,o){if(i===o)return i;var s=Array.isArray(i)&&Array.isArray(o);if(s||isPlainObject(i)&&isPlainObject(o)){for(var _=s?i.length:Object.keys(i).length,$=s?o:Object.keys(o),et=$.length,tt=s?[]:{},j=0,it=0;it<et;it++){var st=s?it:$[it];tt[st]=replaceEqualDeep(i[st],o[st]),tt[st]===i[st]&&j++}return _===et&&j===_?i:tt}return o}function isPlainObject(i){if(!hasObjectPrototype(i))return!1;var o=i.constructor;if(typeof o>"u")return!0;var s=o.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(i){return Object.prototype.toString.call(i)==="[object Object]"}function isQueryKey(i){return typeof i=="string"||Array.isArray(i)}function sleep(i){return new Promise(function(o){setTimeout(o,i)})}function scheduleMicrotask(i){Promise.resolve().then(i).catch(function(o){return setTimeout(function(){throw o})})}function getAbortController(){if(typeof AbortController=="function")return new AbortController}var FocusManager=function(i){_inheritsLoose(o,i);function o(){var _;return _=i.call(this)||this,_.setup=function($){var et;if(!isServer&&((et=window)!=null&&et.addEventListener)){var tt=function(){return $()};return window.addEventListener("visibilitychange",tt,!1),window.addEventListener("focus",tt,!1),function(){window.removeEventListener("visibilitychange",tt),window.removeEventListener("focus",tt)}}},_}var s=o.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){if(!this.hasListeners()){var $;($=this.cleanup)==null||$.call(this),this.cleanup=void 0}},s.setEventListener=function($){var et,tt=this;this.setup=$,(et=this.cleanup)==null||et.call(this),this.cleanup=$(function(j){typeof j=="boolean"?tt.setFocused(j):tt.onFocus()})},s.setFocused=function($){this.focused=$,$&&this.onFocus()},s.onFocus=function(){this.listeners.forEach(function($){$()})},s.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},o}(Subscribable),focusManager=new FocusManager,OnlineManager=function(i){_inheritsLoose(o,i);function o(){var _;return _=i.call(this)||this,_.setup=function($){var et;if(!isServer&&((et=window)!=null&&et.addEventListener)){var tt=function(){return $()};return window.addEventListener("online",tt,!1),window.addEventListener("offline",tt,!1),function(){window.removeEventListener("online",tt),window.removeEventListener("offline",tt)}}},_}var s=o.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){if(!this.hasListeners()){var $;($=this.cleanup)==null||$.call(this),this.cleanup=void 0}},s.setEventListener=function($){var et,tt=this;this.setup=$,(et=this.cleanup)==null||et.call(this),this.cleanup=$(function(j){typeof j=="boolean"?tt.setOnline(j):tt.onOnline()})},s.setOnline=function($){this.online=$,$&&this.onOnline()},s.onOnline=function(){this.listeners.forEach(function($){$()})},s.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},o}(Subscribable),onlineManager=new OnlineManager;function defaultRetryDelay(i){return Math.min(1e3*Math.pow(2,i),3e4)}function isCancelable(i){return typeof(i==null?void 0:i.cancel)=="function"}var CancelledError=function i(o){this.revert=o==null?void 0:o.revert,this.silent=o==null?void 0:o.silent};function isCancelledError(i){return i instanceof CancelledError}var Retryer=function i(o){var s=this,_=!1,$,et,tt,j;this.abort=o.abort,this.cancel=function(ft){return $==null?void 0:$(ft)},this.cancelRetry=function(){_=!0},this.continueRetry=function(){_=!1},this.continue=function(){return et==null?void 0:et()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(ft,pt){tt=ft,j=pt});var it=function(pt){s.isResolved||(s.isResolved=!0,o.onSuccess==null||o.onSuccess(pt),et==null||et(),tt(pt))},st=function(pt){s.isResolved||(s.isResolved=!0,o.onError==null||o.onError(pt),et==null||et(),j(pt))},ht=function(){return new Promise(function(pt){et=pt,s.isPaused=!0,o.onPause==null||o.onPause()}).then(function(){et=void 0,s.isPaused=!1,o.onContinue==null||o.onContinue()})},vt=function ft(){if(!s.isResolved){var pt;try{pt=o.fn()}catch(ct){pt=Promise.reject(ct)}$=function(yt){if(!s.isResolved&&(st(new CancelledError(yt)),s.abort==null||s.abort(),isCancelable(pt)))try{pt.cancel()}catch{}},s.isTransportCancelable=isCancelable(pt),Promise.resolve(pt).then(it).catch(function(ct){var yt,Et;if(!s.isResolved){var Ot=(yt=o.retry)!=null?yt:3,Lt=(Et=o.retryDelay)!=null?Et:defaultRetryDelay,Tt=typeof Lt=="function"?Lt(s.failureCount,ct):Lt,It=Ot===!0||typeof Ot=="number"&&s.failureCount<Ot||typeof Ot=="function"&&Ot(s.failureCount,ct);if(_||!It){st(ct);return}s.failureCount++,o.onFail==null||o.onFail(s.failureCount,ct),sleep(Tt).then(function(){if(!focusManager.isFocused()||!onlineManager.isOnline())return ht()}).then(function(){_?st(ct):ft()})}})}};vt()},NotifyManager=function(){function i(){this.queue=[],this.transactions=0,this.notifyFn=function(s){s()},this.batchNotifyFn=function(s){s()}}var o=i.prototype;return o.batch=function(_){var $;this.transactions++;try{$=_()}finally{this.transactions--,this.transactions||this.flush()}return $},o.schedule=function(_){var $=this;this.transactions?this.queue.push(_):scheduleMicrotask(function(){$.notifyFn(_)})},o.batchCalls=function(_){var $=this;return function(){for(var et=arguments.length,tt=new Array(et),j=0;j<et;j++)tt[j]=arguments[j];$.schedule(function(){_.apply(void 0,tt)})}},o.flush=function(){var _=this,$=this.queue;this.queue=[],$.length&&scheduleMicrotask(function(){_.batchNotifyFn(function(){$.forEach(function(et){_.notifyFn(et)})})})},o.setNotifyFunction=function(_){this.notifyFn=_},o.setBatchNotifyFunction=function(_){this.batchNotifyFn=_},i}(),notifyManager=new NotifyManager,logger$1=console;function getLogger(){return logger$1}function setLogger(i){logger$1=i}var Query=function(){function i(s){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.cache=s.cache,this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.initialState=s.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=s.meta,this.scheduleGc()}var o=i.prototype;return o.setOptions=function(_){var $;this.options=_extends$1({},this.defaultOptions,_),this.meta=_==null?void 0:_.meta,this.cacheTime=Math.max(this.cacheTime||0,($=this.options.cacheTime)!=null?$:5*60*1e3)},o.setDefaultOptions=function(_){this.defaultOptions=_},o.scheduleGc=function(){var _=this;this.clearGcTimeout(),isValidTimeout(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){_.optionalRemove()},this.cacheTime))},o.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},o.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},o.setData=function(_,$){var et,tt,j=this.state.data,it=functionalUpdate(_,j);return(et=(tt=this.options).isDataEqual)!=null&&et.call(tt,j,it)?it=j:this.options.structuralSharing!==!1&&(it=replaceEqualDeep(j,it)),this.dispatch({data:it,type:"success",dataUpdatedAt:$==null?void 0:$.updatedAt}),it},o.setState=function(_,$){this.dispatch({type:"setState",state:_,setStateOptions:$})},o.cancel=function(_){var $,et=this.promise;return($=this.retryer)==null||$.cancel(_),et?et.then(noop).catch(noop):Promise.resolve()},o.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},o.reset=function(){this.destroy(),this.setState(this.initialState)},o.isActive=function(){return this.observers.some(function(_){return _.options.enabled!==!1})},o.isFetching=function(){return this.state.isFetching},o.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(_){return _.getCurrentResult().isStale})},o.isStaleByTime=function(_){return _===void 0&&(_=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,_)},o.onFocus=function(){var _,$=this.observers.find(function(et){return et.shouldFetchOnWindowFocus()});$&&$.refetch(),(_=this.retryer)==null||_.continue()},o.onOnline=function(){var _,$=this.observers.find(function(et){return et.shouldFetchOnReconnect()});$&&$.refetch(),(_=this.retryer)==null||_.continue()},o.addObserver=function(_){this.observers.indexOf(_)===-1&&(this.observers.push(_),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:_}))},o.removeObserver=function(_){this.observers.indexOf(_)!==-1&&(this.observers=this.observers.filter(function($){return $!==_}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:_}))},o.getObserversCount=function(){return this.observers.length},o.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},o.fetch=function(_,$){var et=this,tt,j,it;if(this.state.isFetching){if(this.state.dataUpdatedAt&&($!=null&&$.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var st;return(st=this.retryer)==null||st.continueRetry(),this.promise}}if(_&&this.setOptions(_),!this.options.queryFn){var ht=this.observers.find(function(Lt){return Lt.options.queryFn});ht&&this.setOptions(ht.options)}var vt=ensureQueryKeyArray(this.queryKey),ft=getAbortController(),pt={queryKey:vt,pageParam:void 0,meta:this.meta};Object.defineProperty(pt,"signal",{enumerable:!0,get:function(){if(ft)return et.abortSignalConsumed=!0,ft.signal}});var ct=function(){return et.options.queryFn?(et.abortSignalConsumed=!1,et.options.queryFn(pt)):Promise.reject("Missing queryFn")},yt={fetchOptions:$,options:this.options,queryKey:vt,state:this.state,fetchFn:ct,meta:this.meta};if((tt=this.options.behavior)!=null&&tt.onFetch){var Et;(Et=this.options.behavior)==null||Et.onFetch(yt)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((j=yt.fetchOptions)==null?void 0:j.meta)){var Ot;this.dispatch({type:"fetch",meta:(Ot=yt.fetchOptions)==null?void 0:Ot.meta})}return this.retryer=new Retryer({fn:yt.fetchFn,abort:ft==null||(it=ft.abort)==null?void 0:it.bind(ft),onSuccess:function(Tt){et.setData(Tt),et.cache.config.onSuccess==null||et.cache.config.onSuccess(Tt,et),et.cacheTime===0&&et.optionalRemove()},onError:function(Tt){isCancelledError(Tt)&&Tt.silent||et.dispatch({type:"error",error:Tt}),isCancelledError(Tt)||(et.cache.config.onError==null||et.cache.config.onError(Tt,et),getLogger().error(Tt)),et.cacheTime===0&&et.optionalRemove()},onFail:function(){et.dispatch({type:"failed"})},onPause:function(){et.dispatch({type:"pause"})},onContinue:function(){et.dispatch({type:"continue"})},retry:yt.options.retry,retryDelay:yt.options.retryDelay}),this.promise=this.retryer.promise,this.promise},o.dispatch=function(_){var $=this;this.state=this.reducer(this.state,_),notifyManager.batch(function(){$.observers.forEach(function(et){et.onQueryUpdate(_)}),$.cache.notify({query:$,type:"queryUpdated",action:_})})},o.getDefaultState=function(_){var $=typeof _.initialData=="function"?_.initialData():_.initialData,et=typeof _.initialData<"u",tt=et?typeof _.initialDataUpdatedAt=="function"?_.initialDataUpdatedAt():_.initialDataUpdatedAt:0,j=typeof $<"u";return{data:$,dataUpdateCount:0,dataUpdatedAt:j?tt??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:j?"success":"idle"}},o.reducer=function(_,$){var et,tt;switch($.type){case"failed":return _extends$1({},_,{fetchFailureCount:_.fetchFailureCount+1});case"pause":return _extends$1({},_,{isPaused:!0});case"continue":return _extends$1({},_,{isPaused:!1});case"fetch":return _extends$1({},_,{fetchFailureCount:0,fetchMeta:(et=$.meta)!=null?et:null,isFetching:!0,isPaused:!1},!_.dataUpdatedAt&&{error:null,status:"loading"});case"success":return _extends$1({},_,{data:$.data,dataUpdateCount:_.dataUpdateCount+1,dataUpdatedAt:(tt=$.dataUpdatedAt)!=null?tt:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var j=$.error;return isCancelledError(j)&&j.revert&&this.revertState?_extends$1({},this.revertState):_extends$1({},_,{error:j,errorUpdateCount:_.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:_.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return _extends$1({},_,{isInvalidated:!0});case"setState":return _extends$1({},_,$.state);default:return _}},i}(),QueryCache=function(i){_inheritsLoose(o,i);function o(_){var $;return $=i.call(this)||this,$.config=_||{},$.queries=[],$.queriesMap={},$}var s=o.prototype;return s.build=function($,et,tt){var j,it=et.queryKey,st=(j=et.queryHash)!=null?j:hashQueryKeyByOptions(it,et),ht=this.get(st);return ht||(ht=new Query({cache:this,queryKey:it,queryHash:st,options:$.defaultQueryOptions(et),state:tt,defaultOptions:$.getQueryDefaults(it),meta:et.meta}),this.add(ht)),ht},s.add=function($){this.queriesMap[$.queryHash]||(this.queriesMap[$.queryHash]=$,this.queries.push($),this.notify({type:"queryAdded",query:$}))},s.remove=function($){var et=this.queriesMap[$.queryHash];et&&($.destroy(),this.queries=this.queries.filter(function(tt){return tt!==$}),et===$&&delete this.queriesMap[$.queryHash],this.notify({type:"queryRemoved",query:$}))},s.clear=function(){var $=this;notifyManager.batch(function(){$.queries.forEach(function(et){$.remove(et)})})},s.get=function($){return this.queriesMap[$]},s.getAll=function(){return this.queries},s.find=function($,et){var tt=parseFilterArgs($,et),j=tt[0];return typeof j.exact>"u"&&(j.exact=!0),this.queries.find(function(it){return matchQuery(j,it)})},s.findAll=function($,et){var tt=parseFilterArgs($,et),j=tt[0];return Object.keys(j).length>0?this.queries.filter(function(it){return matchQuery(j,it)}):this.queries},s.notify=function($){var et=this;notifyManager.batch(function(){et.listeners.forEach(function(tt){tt($)})})},s.onFocus=function(){var $=this;notifyManager.batch(function(){$.queries.forEach(function(et){et.onFocus()})})},s.onOnline=function(){var $=this;notifyManager.batch(function(){$.queries.forEach(function(et){et.onOnline()})})},o}(Subscribable),Mutation=function(){function i(s){this.options=_extends$1({},s.defaultOptions,s.options),this.mutationId=s.mutationId,this.mutationCache=s.mutationCache,this.observers=[],this.state=s.state||getDefaultState(),this.meta=s.meta}var o=i.prototype;return o.setState=function(_){this.dispatch({type:"setState",state:_})},o.addObserver=function(_){this.observers.indexOf(_)===-1&&this.observers.push(_)},o.removeObserver=function(_){this.observers=this.observers.filter(function($){return $!==_})},o.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(noop).catch(noop)):Promise.resolve()},o.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},o.execute=function(){var _=this,$,et=this.state.status==="loading",tt=Promise.resolve();return et||(this.dispatch({type:"loading",variables:this.options.variables}),tt=tt.then(function(){_.mutationCache.config.onMutate==null||_.mutationCache.config.onMutate(_.state.variables,_)}).then(function(){return _.options.onMutate==null?void 0:_.options.onMutate(_.state.variables)}).then(function(j){j!==_.state.context&&_.dispatch({type:"loading",context:j,variables:_.state.variables})})),tt.then(function(){return _.executeMutation()}).then(function(j){$=j,_.mutationCache.config.onSuccess==null||_.mutationCache.config.onSuccess($,_.state.variables,_.state.context,_)}).then(function(){return _.options.onSuccess==null?void 0:_.options.onSuccess($,_.state.variables,_.state.context)}).then(function(){return _.options.onSettled==null?void 0:_.options.onSettled($,null,_.state.variables,_.state.context)}).then(function(){return _.dispatch({type:"success",data:$}),$}).catch(function(j){return _.mutationCache.config.onError==null||_.mutationCache.config.onError(j,_.state.variables,_.state.context,_),getLogger().error(j),Promise.resolve().then(function(){return _.options.onError==null?void 0:_.options.onError(j,_.state.variables,_.state.context)}).then(function(){return _.options.onSettled==null?void 0:_.options.onSettled(void 0,j,_.state.variables,_.state.context)}).then(function(){throw _.dispatch({type:"error",error:j}),j})})},o.executeMutation=function(){var _=this,$;return this.retryer=new Retryer({fn:function(){return _.options.mutationFn?_.options.mutationFn(_.state.variables):Promise.reject("No mutationFn found")},onFail:function(){_.dispatch({type:"failed"})},onPause:function(){_.dispatch({type:"pause"})},onContinue:function(){_.dispatch({type:"continue"})},retry:($=this.options.retry)!=null?$:0,retryDelay:this.options.retryDelay}),this.retryer.promise},o.dispatch=function(_){var $=this;this.state=reducer(this.state,_),notifyManager.batch(function(){$.observers.forEach(function(et){et.onMutationUpdate(_)}),$.mutationCache.notify($)})},i}();function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function reducer(i,o){switch(o.type){case"failed":return _extends$1({},i,{failureCount:i.failureCount+1});case"pause":return _extends$1({},i,{isPaused:!0});case"continue":return _extends$1({},i,{isPaused:!1});case"loading":return _extends$1({},i,{context:o.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:o.variables});case"success":return _extends$1({},i,{data:o.data,error:null,status:"success",isPaused:!1});case"error":return _extends$1({},i,{data:void 0,error:o.error,failureCount:i.failureCount+1,isPaused:!1,status:"error"});case"setState":return _extends$1({},i,o.state);default:return i}}var MutationCache=function(i){_inheritsLoose(o,i);function o(_){var $;return $=i.call(this)||this,$.config=_||{},$.mutations=[],$.mutationId=0,$}var s=o.prototype;return s.build=function($,et,tt){var j=new Mutation({mutationCache:this,mutationId:++this.mutationId,options:$.defaultMutationOptions(et),state:tt,defaultOptions:et.mutationKey?$.getMutationDefaults(et.mutationKey):void 0,meta:et.meta});return this.add(j),j},s.add=function($){this.mutations.push($),this.notify($)},s.remove=function($){this.mutations=this.mutations.filter(function(et){return et!==$}),$.cancel(),this.notify($)},s.clear=function(){var $=this;notifyManager.batch(function(){$.mutations.forEach(function(et){$.remove(et)})})},s.getAll=function(){return this.mutations},s.find=function($){return typeof $.exact>"u"&&($.exact=!0),this.mutations.find(function(et){return matchMutation($,et)})},s.findAll=function($){return this.mutations.filter(function(et){return matchMutation($,et)})},s.notify=function($){var et=this;notifyManager.batch(function(){et.listeners.forEach(function(tt){tt($)})})},s.onFocus=function(){this.resumePausedMutations()},s.onOnline=function(){this.resumePausedMutations()},s.resumePausedMutations=function(){var $=this.mutations.filter(function(et){return et.state.isPaused});return notifyManager.batch(function(){return $.reduce(function(et,tt){return et.then(function(){return tt.continue().catch(noop)})},Promise.resolve())})},o}(Subscribable);function infiniteQueryBehavior(){return{onFetch:function(o){o.fetchFn=function(){var s,_,$,et,tt,j,it=(s=o.fetchOptions)==null||(_=s.meta)==null?void 0:_.refetchPage,st=($=o.fetchOptions)==null||(et=$.meta)==null?void 0:et.fetchMore,ht=st==null?void 0:st.pageParam,vt=(st==null?void 0:st.direction)==="forward",ft=(st==null?void 0:st.direction)==="backward",pt=((tt=o.state.data)==null?void 0:tt.pages)||[],ct=((j=o.state.data)==null?void 0:j.pageParams)||[],yt=getAbortController(),Et=yt==null?void 0:yt.signal,Ot=ct,Lt=!1,Tt=o.options.queryFn||function(){return Promise.reject("Missing queryFn")},It=function(Kt,Gt,Ut,Ht){return Ot=Ht?[Gt].concat(Ot):[].concat(Ot,[Gt]),Ht?[Ut].concat(Kt):[].concat(Kt,[Ut])},mt=function(Kt,Gt,Ut,Ht){if(Lt)return Promise.reject("Cancelled");if(typeof Ut>"u"&&!Gt&&Kt.length)return Promise.resolve(Kt);var qt={queryKey:o.queryKey,signal:Et,pageParam:Ut,meta:o.meta},Pt=Tt(qt),wt=Promise.resolve(Pt).then(function(Xt){return It(Kt,Ut,Xt,Ht)});if(isCancelable(Pt)){var $t=wt;$t.cancel=Pt.cancel}return wt},Bt;if(!pt.length)Bt=mt([]);else if(vt){var nn=typeof ht<"u",sn=nn?ht:getNextPageParam(o.options,pt);Bt=mt(pt,nn,sn)}else if(ft){var xt=typeof ht<"u",St=xt?ht:getPreviousPageParam(o.options,pt);Bt=mt(pt,xt,St,!0)}else(function(){Ot=[];var Vt=typeof o.options.getNextPageParam>"u",Kt=it&&pt[0]?it(pt[0],0,pt):!0;Bt=Kt?mt([],Vt,ct[0]):Promise.resolve(It([],ct[0],pt[0]));for(var Gt=function(qt){Bt=Bt.then(function(Pt){var wt=it&&pt[qt]?it(pt[qt],qt,pt):!0;if(wt){var $t=Vt?ct[qt]:getNextPageParam(o.options,Pt);return mt(Pt,Vt,$t)}return Promise.resolve(It(Pt,ct[qt],pt[qt]))})},Ut=1;Ut<pt.length;Ut++)Gt(Ut)})();var Nt=Bt.then(function(Vt){return{pages:Vt,pageParams:Ot}}),Ct=Nt;return Ct.cancel=function(){Lt=!0,yt==null||yt.abort(),isCancelable(Bt)&&Bt.cancel()},Nt}}}}function getNextPageParam(i,o){return i.getNextPageParam==null?void 0:i.getNextPageParam(o[o.length-1],o)}function getPreviousPageParam(i,o){return i.getPreviousPageParam==null?void 0:i.getPreviousPageParam(o[0],o)}var QueryClient=function(){function i(s){s===void 0&&(s={}),this.queryCache=s.queryCache||new QueryCache,this.mutationCache=s.mutationCache||new MutationCache,this.defaultOptions=s.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var o=i.prototype;return o.mount=function(){var _=this;this.unsubscribeFocus=focusManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(_.mutationCache.onFocus(),_.queryCache.onFocus())}),this.unsubscribeOnline=onlineManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(_.mutationCache.onOnline(),_.queryCache.onOnline())})},o.unmount=function(){var _,$;(_=this.unsubscribeFocus)==null||_.call(this),($=this.unsubscribeOnline)==null||$.call(this)},o.isFetching=function(_,$){var et=parseFilterArgs(_,$),tt=et[0];return tt.fetching=!0,this.queryCache.findAll(tt).length},o.isMutating=function(_){return this.mutationCache.findAll(_extends$1({},_,{fetching:!0})).length},o.getQueryData=function(_,$){var et;return(et=this.queryCache.find(_,$))==null?void 0:et.state.data},o.getQueriesData=function(_){return this.getQueryCache().findAll(_).map(function($){var et=$.queryKey,tt=$.state,j=tt.data;return[et,j]})},o.setQueryData=function(_,$,et){var tt=parseQueryArgs(_),j=this.defaultQueryOptions(tt);return this.queryCache.build(this,j).setData($,et)},o.setQueriesData=function(_,$,et){var tt=this;return notifyManager.batch(function(){return tt.getQueryCache().findAll(_).map(function(j){var it=j.queryKey;return[it,tt.setQueryData(it,$,et)]})})},o.getQueryState=function(_,$){var et;return(et=this.queryCache.find(_,$))==null?void 0:et.state},o.removeQueries=function(_,$){var et=parseFilterArgs(_,$),tt=et[0],j=this.queryCache;notifyManager.batch(function(){j.findAll(tt).forEach(function(it){j.remove(it)})})},o.resetQueries=function(_,$,et){var tt=this,j=parseFilterArgs(_,$,et),it=j[0],st=j[1],ht=this.queryCache,vt=_extends$1({},it,{active:!0});return notifyManager.batch(function(){return ht.findAll(it).forEach(function(ft){ft.reset()}),tt.refetchQueries(vt,st)})},o.cancelQueries=function(_,$,et){var tt=this,j=parseFilterArgs(_,$,et),it=j[0],st=j[1],ht=st===void 0?{}:st;typeof ht.revert>"u"&&(ht.revert=!0);var vt=notifyManager.batch(function(){return tt.queryCache.findAll(it).map(function(ft){return ft.cancel(ht)})});return Promise.all(vt).then(noop).catch(noop)},o.invalidateQueries=function(_,$,et){var tt,j,it,st=this,ht=parseFilterArgs(_,$,et),vt=ht[0],ft=ht[1],pt=_extends$1({},vt,{active:(tt=(j=vt.refetchActive)!=null?j:vt.active)!=null?tt:!0,inactive:(it=vt.refetchInactive)!=null?it:!1});return notifyManager.batch(function(){return st.queryCache.findAll(vt).forEach(function(ct){ct.invalidate()}),st.refetchQueries(pt,ft)})},o.refetchQueries=function(_,$,et){var tt=this,j=parseFilterArgs(_,$,et),it=j[0],st=j[1],ht=notifyManager.batch(function(){return tt.queryCache.findAll(it).map(function(ft){return ft.fetch(void 0,_extends$1({},st,{meta:{refetchPage:it==null?void 0:it.refetchPage}}))})}),vt=Promise.all(ht).then(noop);return st!=null&&st.throwOnError||(vt=vt.catch(noop)),vt},o.fetchQuery=function(_,$,et){var tt=parseQueryArgs(_,$,et),j=this.defaultQueryOptions(tt);typeof j.retry>"u"&&(j.retry=!1);var it=this.queryCache.build(this,j);return it.isStaleByTime(j.staleTime)?it.fetch(j):Promise.resolve(it.state.data)},o.prefetchQuery=function(_,$,et){return this.fetchQuery(_,$,et).then(noop).catch(noop)},o.fetchInfiniteQuery=function(_,$,et){var tt=parseQueryArgs(_,$,et);return tt.behavior=infiniteQueryBehavior(),this.fetchQuery(tt)},o.prefetchInfiniteQuery=function(_,$,et){return this.fetchInfiniteQuery(_,$,et).then(noop).catch(noop)},o.cancelMutations=function(){var _=this,$=notifyManager.batch(function(){return _.mutationCache.getAll().map(function(et){return et.cancel()})});return Promise.all($).then(noop).catch(noop)},o.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},o.executeMutation=function(_){return this.mutationCache.build(this,_).execute()},o.getQueryCache=function(){return this.queryCache},o.getMutationCache=function(){return this.mutationCache},o.getDefaultOptions=function(){return this.defaultOptions},o.setDefaultOptions=function(_){this.defaultOptions=_},o.setQueryDefaults=function(_,$){var et=this.queryDefaults.find(function(tt){return hashQueryKey(_)===hashQueryKey(tt.queryKey)});et?et.defaultOptions=$:this.queryDefaults.push({queryKey:_,defaultOptions:$})},o.getQueryDefaults=function(_){var $;return _?($=this.queryDefaults.find(function(et){return partialMatchKey(_,et.queryKey)}))==null?void 0:$.defaultOptions:void 0},o.setMutationDefaults=function(_,$){var et=this.mutationDefaults.find(function(tt){return hashQueryKey(_)===hashQueryKey(tt.mutationKey)});et?et.defaultOptions=$:this.mutationDefaults.push({mutationKey:_,defaultOptions:$})},o.getMutationDefaults=function(_){var $;return _?($=this.mutationDefaults.find(function(et){return partialMatchKey(_,et.mutationKey)}))==null?void 0:$.defaultOptions:void 0},o.defaultQueryOptions=function(_){if(_!=null&&_._defaulted)return _;var $=_extends$1({},this.defaultOptions.queries,this.getQueryDefaults(_==null?void 0:_.queryKey),_,{_defaulted:!0});return!$.queryHash&&$.queryKey&&($.queryHash=hashQueryKeyByOptions($.queryKey,$)),$},o.defaultQueryObserverOptions=function(_){return this.defaultQueryOptions(_)},o.defaultMutationOptions=function(_){return _!=null&&_._defaulted?_:_extends$1({},this.defaultOptions.mutations,this.getMutationDefaults(_==null?void 0:_.mutationKey),_,{_defaulted:!0})},o.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},i}(),unstable_batchedUpdates=ReactDOM.unstable_batchedUpdates;notifyManager.setBatchNotifyFunction(unstable_batchedUpdates);var logger=console;setLogger(logger);var defaultContext=React$1.createContext(void 0),QueryClientSharingContext=React$1.createContext(!1);function getQueryClientContext(i){return i&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext}var QueryClientProvider=function i(o){var s=o.client,_=o.contextSharing,$=_===void 0?!1:_,et=o.children;React$1.useEffect(function(){return s.mount(),function(){s.unmount()}},[s]);var tt=getQueryClientContext($);return React$1.createElement(QueryClientSharingContext.Provider,{value:$},React$1.createElement(tt.Provider,{value:s},et))};const queryClient=new QueryClient;client.createRoot(document.getElementById("root")).render(jsx(FormantProvider,{children:jsx(QueryClientProvider,{client:queryClient,children:jsx(React$1.StrictMode,{children:jsx(App,{})})})}));
