function _mergeNamespaces(i,o){for(var s=0;s<o.length;s++){const _=o[s];if(typeof _!="string"&&!Array.isArray(_)){for(const $ in _)if($!=="default"&&!($ in i)){const et=Object.getOwnPropertyDescriptor(_,$);et&&Object.defineProperty(i,$,et.get?et:{enumerable:!0,get:()=>_[$]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))_($);new MutationObserver($=>{for(const et of $)if(et.type==="childList")for(const tt of et.addedNodes)tt.tagName==="LINK"&&tt.rel==="modulepreload"&&_(tt)}).observe(document,{childList:!0,subtree:!0});function s($){const et={};return $.integrity&&(et.integrity=$.integrity),$.referrerpolicy&&(et.referrerPolicy=$.referrerpolicy),$.crossorigin==="use-credentials"?et.credentials="include":$.crossorigin==="anonymous"?et.credentials="omit":et.credentials="same-origin",et}function _($){if($.ep)return;$.ep=!0;const et=s($);fetch($.href,et)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports(i){jsxRuntimeExports=i}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports(i){reactExports=i}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,o){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,o,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,o,s){var _,$={},et=null,tt=null;if(o!=null)for(_ in o.ref!==void 0&&(tt=o.ref),o.key!==void 0&&(et=""+o.key),o)J.call(o,_)&&!L$1.hasOwnProperty(_)&&($[_]=o[_]);var j=arguments.length-2;if(j===1)$.children=s;else if(1<j){for(var it=Array(j),st=0;st<j;st++)it[st]=arguments[st+2];$.children=it}if(i&&i.defaultProps)for(_ in j=i.defaultProps,j)$[_]===void 0&&($[_]=j[_]);return{$$typeof:l$2,type:i,key:et,ref:tt,props:$,_owner:K$1.current}}function N$1(i,o){return{$$typeof:l$2,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$2}function escape$1(i){var o={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return o[s]})}var P$1=/\/+/g;function Q$1(i,o){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):o.toString(36)}function R$1(i,o,s,_,$){var et=typeof i;(et==="undefined"||et==="boolean")&&(i=null);var tt=!1;if(i===null)tt=!0;else switch(et){case"string":case"number":tt=!0;break;case"object":switch(i.$$typeof){case l$2:case n$2:tt=!0}}if(tt)return tt=i,$=$(tt),i=_===""?"."+Q$1(tt,0):_,I$1($)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$1($,o,s,"",function(st){return st})):$!=null&&(O$1($)&&($=N$1($,s+(!$.key||tt&&tt.key===$.key?"":(""+$.key).replace(P$1,"$&/")+"/")+i)),o.push($)),1;if(tt=0,_=_===""?".":_+":",I$1(i))for(var j=0;j<i.length;j++){et=i[j];var it=_+Q$1(et,j);tt+=R$1(et,o,s,it,$)}else if(it=A$2(i),typeof it=="function")for(i=it.call(i),j=0;!(et=i.next()).done;)et=et.value,it=_+Q$1(et,j++),tt+=R$1(et,o,s,it,$);else if(et==="object")throw o=String(i),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return tt}function S$1(i,o,s){if(i==null)return i;var _=[],$=0;return R$1(i,_,"","",function(et){return o.call(s,et,$++)}),_}function T$1(i){if(i._status===-1){var o=i._result;o=o(),o.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=o)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(i,o,s){S$1(i,function(){o.apply(this,arguments)},s)},count:function(i){var o=0;return S$1(i,function(){o++}),o},toArray:function(i){return S$1(i,function(o){return o})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(i,o,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var _=C$1({},i.props),$=i.key,et=i.ref,tt=i._owner;if(o!=null){if(o.ref!==void 0&&(et=o.ref,tt=K$1.current),o.key!==void 0&&($=""+o.key),i.type&&i.type.defaultProps)var j=i.type.defaultProps;for(it in o)J.call(o,it)&&!L$1.hasOwnProperty(it)&&(_[it]=o[it]===void 0&&j!==void 0?j[it]:o[it])}var it=arguments.length-2;if(it===1)_.children=s;else if(1<it){j=Array(it);for(var st=0;st<it;st++)j[st]=arguments[st+2];_.children=j}return{$$typeof:l$2,type:i.type,key:$,ref:et,props:_,_owner:tt}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t$1,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var o=M$1.bind(null,i);return o.type=i,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$2,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,o){return{$$typeof:x$1,type:i,compare:o===void 0?null:o}};react_production_min.startTransition=function(i){var o=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,o){return U$1.current.useCallback(i,o)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,o){return U$1.current.useEffect(i,o)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,o,s){return U$1.current.useImperativeHandle(i,o,s)};react_production_min.useInsertionEffect=function(i,o){return U$1.current.useInsertionEffect(i,o)};react_production_min.useLayoutEffect=function(i,o){return U$1.current.useLayoutEffect(i,o)};react_production_min.useMemo=function(i,o){return U$1.current.useMemo(i,o)};react_production_min.useReducer=function(i,o,s){return U$1.current.useReducer(i,o,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,o,s){return U$1.current.useSyncExternalStore(i,o,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";(function(i){i.exports=react_production_min})(react);const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(i,o,s){var _,$={},et=null,tt=null;s!==void 0&&(et=""+s),o.key!==void 0&&(et=""+o.key),o.ref!==void 0&&(tt=o.ref);for(_ in o)m$2.call(o,_)&&!p$2.hasOwnProperty(_)&&($[_]=o[_]);if(i&&i.defaultProps)for(_ in o=i.defaultProps,o)$[_]===void 0&&($[_]=o[_]);return{$$typeof:k$1,type:i,key:et,ref:tt,props:$,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;(function(i){i.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(i){reactDomExports=i}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(i){schedulerExports=i}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(qt,Pt){var St=qt.length;qt.push(Pt);e:for(;0<St;){var Zt=St-1>>>1,tn=qt[Zt];if(0<$(tn,Pt))qt[Zt]=Pt,qt[St]=tn,St=Zt;else break e}}function s(qt){return qt.length===0?null:qt[0]}function _(qt){if(qt.length===0)return null;var Pt=qt[0],St=qt.pop();if(St!==Pt){qt[0]=St;e:for(var Zt=0,tn=qt.length,mn=tn>>>1;Zt<mn;){var yn=2*(Zt+1)-1,vn=qt[yn],un=yn+1,rn=qt[un];if(0>$(vn,St))un<tn&&0>$(rn,vn)?(qt[Zt]=rn,qt[un]=St,Zt=un):(qt[Zt]=vn,qt[yn]=St,Zt=yn);else if(un<tn&&0>$(rn,St))qt[Zt]=rn,qt[un]=St,Zt=un;else break e}}return Pt}function $(qt,Pt){var St=qt.sortIndex-Pt.sortIndex;return St!==0?St:qt.id-Pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var et=performance;i.unstable_now=function(){return et.now()}}else{var tt=Date,j=tt.now();i.unstable_now=function(){return tt.now()-j}}var it=[],st=[],ht=1,_t=null,gt=3,ft=!1,ut=!1,yt=!1,Et=typeof setTimeout=="function"?setTimeout:null,Mt=typeof clearTimeout=="function"?clearTimeout:null,Ft=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Rt(qt){for(var Pt=s(st);Pt!==null;){if(Pt.callback===null)_(st);else if(Pt.startTime<=qt)_(st),Pt.sortIndex=Pt.expirationTime,o(it,Pt);else break;Pt=s(st)}}function Ot(qt){if(yt=!1,Rt(qt),!ut)if(s(it)!==null)ut=!0,Ut(pt);else{var Pt=s(st);Pt!==null&&Ht(Ot,Pt.startTime-qt)}}function pt(qt,Pt){ut=!1,yt&&(yt=!1,Mt(on),on=-1),ft=!0;var St=gt;try{for(Rt(Pt),_t=s(it);_t!==null&&(!(_t.expirationTime>Pt)||qt&&!Nt());){var Zt=_t.callback;if(typeof Zt=="function"){_t.callback=null,gt=_t.priorityLevel;var tn=Zt(_t.expirationTime<=Pt);Pt=i.unstable_now(),typeof tn=="function"?_t.callback=tn:_t===s(it)&&_(it),Rt(Pt)}else _(it);_t=s(it)}if(_t!==null)var mn=!0;else{var yn=s(st);yn!==null&&Ht(Ot,yn.startTime-Pt),mn=!1}return mn}finally{_t=null,gt=St,ft=!1}}var Lt=!1,nn=null,on=-1,wt=5,xt=-1;function Nt(){return!(i.unstable_now()-xt<wt)}function Tt(){if(nn!==null){var qt=i.unstable_now();xt=qt;var Pt=!0;try{Pt=nn(!0,qt)}finally{Pt?Vt():(Lt=!1,nn=null)}}else Lt=!1}var Vt;if(typeof Ft=="function")Vt=function(){Ft(Tt)};else if(typeof MessageChannel<"u"){var Xt=new MessageChannel,Gt=Xt.port2;Xt.port1.onmessage=Tt,Vt=function(){Gt.postMessage(null)}}else Vt=function(){Et(Tt,0)};function Ut(qt){nn=qt,Lt||(Lt=!0,Vt())}function Ht(qt,Pt){on=Et(function(){qt(i.unstable_now())},Pt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(qt){qt.callback=null},i.unstable_continueExecution=function(){ut||ft||(ut=!0,Ut(pt))},i.unstable_forceFrameRate=function(qt){0>qt||125<qt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<qt?Math.floor(1e3/qt):5},i.unstable_getCurrentPriorityLevel=function(){return gt},i.unstable_getFirstCallbackNode=function(){return s(it)},i.unstable_next=function(qt){switch(gt){case 1:case 2:case 3:var Pt=3;break;default:Pt=gt}var St=gt;gt=Pt;try{return qt()}finally{gt=St}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(qt,Pt){switch(qt){case 1:case 2:case 3:case 4:case 5:break;default:qt=3}var St=gt;gt=qt;try{return Pt()}finally{gt=St}},i.unstable_scheduleCallback=function(qt,Pt,St){var Zt=i.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?Zt+St:Zt):St=Zt,qt){case 1:var tn=-1;break;case 2:tn=250;break;case 5:tn=1073741823;break;case 4:tn=1e4;break;default:tn=5e3}return tn=St+tn,qt={id:ht++,callback:Pt,priorityLevel:qt,startTime:St,expirationTime:tn,sortIndex:-1},St>Zt?(qt.sortIndex=St,o(st,qt),s(it)===null&&qt===s(st)&&(yt?(Mt(on),on=-1):yt=!0,Ht(Ot,St-Zt))):(qt.sortIndex=tn,o(it,qt),ut||ft||(ut=!0,Ut(pt))),qt},i.unstable_shouldYield=Nt,i.unstable_wrapCallback=function(qt){var Pt=gt;return function(){var St=gt;gt=Pt;try{return qt.apply(this,arguments)}finally{gt=St}}}})(scheduler_production_min);(function(i){i.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,o){ha(i,o),ha(i+"Capture",o)}function ha(i,o){for(ea[i]=o,i=0;i<o.length;i++)da.add(o[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,o,s,_){if(s!==null&&s.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return _?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,o,s,_){if(o===null||typeof o>"u"||pa(i,o,s,_))return!0;if(_)return!1;if(s!==null)switch(s.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$1(i,o,s,_,$,et,tt){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=_,this.attributeNamespace=$,this.mustUseProperty=s,this.propertyName=i,this.type=o,this.sanitizeURL=et,this.removeEmptyString=tt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v$1(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];z$1[o]=new v$1(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v$1(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v$1(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v$1(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v$1(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v$1(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,o,s,_){var $=z$1.hasOwnProperty(o)?z$1[o]:null;($!==null?$.type!==0:_||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,s,$,_)&&(s=null),_||$===null?oa(o)&&(s===null?i.removeAttribute(o):i.setAttribute(o,""+s)):$.mustUseProperty?i[$.propertyName]=s===null?$.type===3?!1:"":s:(o=$.attributeName,_=$.attributeNamespace,s===null?i.removeAttribute(o):($=$.type,s=$===3||$===4&&s===!0?"":""+s,_?i.setAttributeNS(_,o,s):i.setAttribute(o,s))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+i}var Na=!1;function Oa(i,o){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(st){var _=st}Reflect.construct(i,[],o)}else{try{o.call()}catch(st){_=st}i.call(o.prototype)}else{try{throw Error()}catch(st){_=st}i()}}catch(st){if(st&&_&&typeof st.stack=="string"){for(var $=st.stack.split(`
`),et=_.stack.split(`
`),tt=$.length-1,j=et.length-1;1<=tt&&0<=j&&$[tt]!==et[j];)j--;for(;1<=tt&&0<=j;tt--,j--)if($[tt]!==et[j]){if(tt!==1||j!==1)do if(tt--,j--,0>j||$[tt]!==et[j]){var it=`
`+$[tt].replace(" at new "," at ");return i.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",i.displayName)),it}while(1<=tt&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return o=i.displayName||null,o!==null?o:Qa(i.type)||"Memo";case Ha:o=i._payload,i=i._init;try{return Qa(i(o))}catch{}}return null}function Ra(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(i){var o=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),_=""+i[o];if(!i.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var $=s.get,et=s.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return $.call(this)},set:function(tt){_=""+tt,et.call(this,tt)}}),Object.defineProperty(i,o,{enumerable:s.enumerable}),{getValue:function(){return _},setValue:function(tt){_=""+tt},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var s=o.getValue(),_="";return i&&(_=Ta(i)?i.checked?"true":"false":i.value),i=_,i!==s?(o.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,o){var s=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,o){var s=o.defaultValue==null?"":o.defaultValue,_=o.checked!=null?o.checked:o.defaultChecked;s=Sa(o.value!=null?o.value:s),i._wrapperState={initialChecked:_,initialValue:s,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(i,o){o=o.checked,o!=null&&ta(i,"checked",o,!1)}function bb(i,o){ab(i,o);var s=Sa(o.value),_=o.type;if(s!=null)_==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(_==="submit"||_==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?cb(i,o.type,s):o.hasOwnProperty("defaultValue")&&cb(i,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function db(i,o,s){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var _=o.type;if(!(_!=="submit"&&_!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,s||o===i.value||(i.value=o),i.defaultValue=o}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,o,s){(o!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,o,s,_){if(i=i.options,o){o={};for(var $=0;$<s.length;$++)o["$"+s[$]]=!0;for(s=0;s<i.length;s++)$=o.hasOwnProperty("$"+i[s].value),i[s].selected!==$&&(i[s].selected=$),$&&_&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),o=null,$=0;$<i.length;$++){if(i[$].value===s){i[$].selected=!0,_&&(i[$].defaultSelected=!0);return}o!==null||i[$].disabled||(o=i[$])}o!==null&&(o.selected=!0)}}function gb(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,o){var s=o.value;if(s==null){if(s=o.children,o=o.defaultValue,s!=null){if(o!=null)throw Error(p$1(92));if(eb(s)){if(1<s.length)throw Error(p$1(93));s=s[0]}o=s}o==null&&(o=""),s=o}i._wrapperState={initialValue:Sa(s)}}function ib(i,o){var s=Sa(o.value),_=Sa(o.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),o.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),_!=null&&(i.defaultValue=""+_)}function jb(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,s,_,$){MSApp.execUnsafeLocalFunction(function(){return i(o,s,_,$)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ob(i,o){if(o){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=o;return}}i.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),pb[o]=pb[i]})});function rb(i,o,s){return o==null||typeof o=="boolean"||o===""?"":s||typeof o!="number"||o===0||pb.hasOwnProperty(i)&&pb[i]?(""+o).trim():o+"px"}function sb(i,o){i=i.style;for(var s in o)if(o.hasOwnProperty(s)){var _=s.indexOf("--")===0,$=rb(s,o[s],_);s==="float"&&(s="cssFloat"),_?i.setProperty(s,$):i[s]=$}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,o){if(o){if(tb[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$1(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$1(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$1(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$1(62))}}function vb(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p$1(280));var o=i.stateNode;o&&(o=Db(o),yb(i.stateNode,i.type,o))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,o=Ab;if(Ab=zb=null,Bb(i),o)for(i=0;i<o.length;i++)Bb(o[i])}}function Gb(i,o){return i(o)}function Hb(){}var Ib=!1;function Jb(i,o,s){if(Ib)return i(o,s);Ib=!0;try{return Gb(i,o,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,o){var s=i.stateNode;if(s===null)return null;var _=Db(s);if(_===null)return null;s=_[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(i=i.type,_=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!_;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p$1(231,o,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,o,s,_,$,et,tt,j,it){var st=Array.prototype.slice.call(arguments,3);try{o.apply(s,st)}catch(ht){this.onError(ht)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,o,s,_,$,et,tt,j,it){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,o,s,_,$,et,tt,j,it){if(Tb.apply(this,arguments),Ob){if(Ob){var st=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=st)}}function Vb(i){var o=i,s=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(s=o.return),i=o.return;while(i)}return o.tag===3?s:null}function Wb(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p$1(188))}function Yb(i){var o=i.alternate;if(!o){if(o=Vb(i),o===null)throw Error(p$1(188));return o!==i?null:i}for(var s=i,_=o;;){var $=s.return;if($===null)break;var et=$.alternate;if(et===null){if(_=$.return,_!==null){s=_;continue}break}if($.child===et.child){for(et=$.child;et;){if(et===s)return Xb($),i;if(et===_)return Xb($),o;et=et.sibling}throw Error(p$1(188))}if(s.return!==_.return)s=$,_=et;else{for(var tt=!1,j=$.child;j;){if(j===s){tt=!0,s=$,_=et;break}if(j===_){tt=!0,_=$,s=et;break}j=j.sibling}if(!tt){for(j=et.child;j;){if(j===s){tt=!0,s=et,_=$;break}if(j===_){tt=!0,_=et,s=$;break}j=j.sibling}if(!tt)throw Error(p$1(189))}}if(s.alternate!==_)throw Error(p$1(190))}if(s.tag!==3)throw Error(p$1(188));return s.stateNode.current===s?i:o}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=$b(i);if(o!==null)return o;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,o){var s=i.pendingLanes;if(s===0)return 0;var _=0,$=i.suspendedLanes,et=i.pingedLanes,tt=s&268435455;if(tt!==0){var j=tt&~$;j!==0?_=tc(j):(et&=tt,et!==0&&(_=tc(et)))}else tt=s&~$,tt!==0?_=tc(tt):et!==0&&(_=tc(et));if(_===0)return 0;if(o!==0&&o!==_&&!(o&$)&&($=_&-_,et=o&-o,$>=et||$===16&&(et&4194240)!==0))return o;if(_&4&&(_|=s&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=_;0<o;)s=31-oc(o),$=1<<s,_|=i[s],o&=~$;return _}function vc(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,o){for(var s=i.suspendedLanes,_=i.pingedLanes,$=i.expirationTimes,et=i.pendingLanes;0<et;){var tt=31-oc(et),j=1<<tt,it=$[tt];it===-1?(!(j&s)||j&_)&&($[tt]=vc(j,o)):it<=o&&(i.expiredLanes|=j),et&=~j}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var o=[],s=0;31>s;s++)o.push(i);return o}function Ac(i,o,s){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-oc(o),i[o]=s}function Bc(i,o){var s=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var _=i.eventTimes;for(i=i.expirationTimes;0<s;){var $=31-oc(s),et=1<<$;o[$]=0,_[$]=-1,i[$]=-1,s&=~et}}function Cc(i,o){var s=i.entangledLanes|=o;for(i=i.entanglements;s;){var _=31-oc(s),$=1<<_;$&o|i[_]&o&&(i[_]|=o),s&=~$}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,o){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(i,o,s,_,$,et){return i===null||i.nativeEvent!==et?(i={blockedOn:o,domEventName:s,eventSystemFlags:_,nativeEvent:et,targetContainers:[$]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),i):(i.eventSystemFlags|=_,o=i.targetContainers,$!==null&&o.indexOf($)===-1&&o.push($),i)}function Uc(i,o,s,_,$){switch(o){case"focusin":return Lc=Tc(Lc,i,o,s,_,$),!0;case"dragenter":return Mc=Tc(Mc,i,o,s,_,$),!0;case"mouseover":return Nc=Tc(Nc,i,o,s,_,$),!0;case"pointerover":var et=$.pointerId;return Oc.set(et,Tc(Oc.get(et)||null,i,o,s,_,$)),!0;case"gotpointercapture":return et=$.pointerId,Pc.set(et,Tc(Pc.get(et)||null,i,o,s,_,$)),!0}return!1}function Vc(i){var o=Wc(i.target);if(o!==null){var s=Vb(o);if(s!==null){if(o=s.tag,o===13){if(o=Wb(s),o!==null){i.blockedOn=o,Ic(i.priority,function(){Gc(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var s=Yc(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var _=new s.constructor(s.type,s);wb=_,s.target.dispatchEvent(_),wb=null}else return o=Cb(s),o!==null&&Fc(o),i.blockedOn=s,!1;o.shift()}return!0}function Zc(i,o,s){Xc(i)&&s.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,o){i.blockedOn===o&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function o($){return ad($,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var _=Kc[s];_.blockedOn===i&&(_.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(o),Pc.forEach(o),s=0;s<Qc.length;s++)_=Qc[s],_.blockedOn===i&&(_.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(i,o,s,_){var $=C,et=cd.transition;cd.transition=null;try{C=1,fd(i,o,s,_)}finally{C=$,cd.transition=et}}function gd(i,o,s,_){var $=C,et=cd.transition;cd.transition=null;try{C=4,fd(i,o,s,_)}finally{C=$,cd.transition=et}}function fd(i,o,s,_){if(dd){var $=Yc(i,o,s,_);if($===null)hd(i,o,_,id,s),Sc(i,_);else if(Uc($,i,o,s,_))_.stopPropagation();else if(Sc(i,_),o&4&&-1<Rc.indexOf(i)){for(;$!==null;){var et=Cb($);if(et!==null&&Ec(et),et=Yc(i,o,s,_),et===null&&hd(i,o,_,id,s),et===$)break;$=et}$!==null&&_.stopPropagation()}else hd(i,o,_,null,s)}}var id=null;function Yc(i,o,s,_){if(id=null,i=xb(_),i=Wc(i),i!==null)if(o=Vb(i),o===null)i=null;else if(s=o.tag,s===13){if(i=Wb(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,o=ld,s=o.length,_,$="value"in kd?kd.value:kd.textContent,et=$.length;for(i=0;i<s&&o[i]===$[i];i++);var tt=s-i;for(_=1;_<=tt&&o[s-_]===$[et-_];_++);return md=$.slice(i,1<_?1-_:void 0)}function od(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function o(s,_,$,et,tt){this._reactName=s,this._targetInst=$,this.type=_,this.nativeEvent=et,this.target=tt,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(s=i[j],this[j]=s?s(et):et[j]);return this.isDefaultPrevented=(et.defaultPrevented!=null?et.defaultPrevented:et.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Od[i])?!!o[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var o=Md[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(i,o){switch(i){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,o){switch(i){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return i=o.data,i===ee&&fe?null:i;default:return null}}function ke(i,o){if(ie)return i==="compositionend"||!ae&&ge(i,o)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!le[i.type]:o==="textarea"}function ne(i,o,s,_){Eb(_),o=oe(o,"onChange"),0<o.length&&(s=new td("onChange","change",null,s,_),i.push({event:s,listeners:o}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var o=ue(i);if(Wa(o))return i}function ve(i,o){if(i==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,i,xb(i)),Jb(re,o)}}function Ce(i,o,s){i==="focusin"?(Ae(),pe=o,qe=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,o){if(i==="click")return te(o)}function Fe(i,o){if(i==="input"||i==="change")return te(o)}function Ge(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,o){if(He(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var s=Object.keys(i),_=Object.keys(o);if(s.length!==_.length)return!1;for(_=0;_<s.length;_++){var $=s[_];if(!ja.call(o,$)||!He(i[$],o[$]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,o){var s=Je(i);i=0;for(var _;s;){if(s.nodeType===3){if(_=i+s.textContent.length,i<=o&&_>=o)return{node:s,offset:o-i};i=_}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Le(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var i=window,o=Xa();o instanceof i.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)i=o.contentWindow;else break;o=Xa(i.document)}return o}function Ne(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Oe(i){var o=Me(),s=i.focusedElem,_=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(_!==null&&Ne(s)){if(o=_.start,i=_.end,i===void 0&&(i=o),"selectionStart"in s)s.selectionStart=o,s.selectionEnd=Math.min(i,s.value.length);else if(i=(o=s.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var $=s.textContent.length,et=Math.min(_.start,$);_=_.end===void 0?et:Math.min(_.end,$),!i.extend&&et>_&&($=_,_=et,et=$),$=Ke(s,et);var tt=Ke(s,_);$&&tt&&(i.rangeCount!==1||i.anchorNode!==$.node||i.anchorOffset!==$.offset||i.focusNode!==tt.node||i.focusOffset!==tt.offset)&&(o=o.createRange(),o.setStart($.node,$.offset),i.removeAllRanges(),et>_?(i.addRange(o),i.extend(tt.node,tt.offset)):(o.setEnd(tt.node,tt.offset),i.addRange(o)))}}for(o=[],i=s;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<o.length;s++)i=o[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,o,s){var _=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(_)||(_=Qe,"selectionStart"in _&&Ne(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Se&&Ie(Se,_)||(Se=_,_=oe(Re,"onSelect"),0<_.length&&(o=new td("onSelect","select",null,o,s),i.push({event:o,listeners:_}),o.target=Qe)))}function Ve(i,o){var s={};return s[i.toLowerCase()]=o.toLowerCase(),s["Webkit"+i]="webkit"+o,s["Moz"+i]="moz"+o,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var o=We[i],s;for(s in o)if(o.hasOwnProperty(s)&&s in Ye)return Xe[i]=o[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,o){df.set(i,o),fa(o,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,o,s){var _=i.type||"unknown-event";i.currentTarget=s,Ub(_,o,void 0,i),i.currentTarget=null}function se(i,o){o=(o&4)!==0;for(var s=0;s<i.length;s++){var _=i[s],$=_.event;_=_.listeners;e:{var et=void 0;if(o)for(var tt=_.length-1;0<=tt;tt--){var j=_[tt],it=j.instance,st=j.currentTarget;if(j=j.listener,it!==et&&$.isPropagationStopped())break e;nf($,j,st),et=it}else for(tt=0;tt<_.length;tt++){if(j=_[tt],it=j.instance,st=j.currentTarget,j=j.listener,it!==et&&$.isPropagationStopped())break e;nf($,j,st),et=it}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,o){var s=o[of];s===void 0&&(s=o[of]=new Set);var _=i+"__bubble";s.has(_)||(pf(o,i,2,!1),s.add(_))}function qf(i,o,s){var _=0;o&&(_|=4),pf(s,i,_,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(i,o,s,_){switch(jd(o)){case 1:var $=ed;break;case 4:$=gd;break;default:$=fd}s=$.bind(null,o,s,i),$=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||($=!0),_?$!==void 0?i.addEventListener(o,s,{capture:!0,passive:$}):i.addEventListener(o,s,!0):$!==void 0?i.addEventListener(o,s,{passive:$}):i.addEventListener(o,s,!1)}function hd(i,o,s,_,$){var et=_;if(!(o&1)&&!(o&2)&&_!==null)e:for(;;){if(_===null)return;var tt=_.tag;if(tt===3||tt===4){var j=_.stateNode.containerInfo;if(j===$||j.nodeType===8&&j.parentNode===$)break;if(tt===4)for(tt=_.return;tt!==null;){var it=tt.tag;if((it===3||it===4)&&(it=tt.stateNode.containerInfo,it===$||it.nodeType===8&&it.parentNode===$))return;tt=tt.return}for(;j!==null;){if(tt=Wc(j),tt===null)return;if(it=tt.tag,it===5||it===6){_=et=tt;continue e}j=j.parentNode}}_=_.return}Jb(function(){var st=et,ht=xb(s),_t=[];e:{var gt=df.get(i);if(gt!==void 0){var ft=td,ut=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":ft=Rd;break;case"focusin":ut="focus",ft=Fd;break;case"focusout":ut="blur",ft=Fd;break;case"beforeblur":case"afterblur":ft=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Vd;break;case $e:case af:case bf:ft=Hd;break;case cf:ft=Xd;break;case"scroll":ft=vd;break;case"wheel":ft=Zd;break;case"copy":case"cut":case"paste":ft=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Td}var yt=(o&4)!==0,Et=!yt&&i==="scroll",Mt=yt?gt!==null?gt+"Capture":null:gt;yt=[];for(var Ft=st,Rt;Ft!==null;){Rt=Ft;var Ot=Rt.stateNode;if(Rt.tag===5&&Ot!==null&&(Rt=Ot,Mt!==null&&(Ot=Kb(Ft,Mt),Ot!=null&&yt.push(tf(Ft,Ot,Rt)))),Et)break;Ft=Ft.return}0<yt.length&&(gt=new ft(gt,ut,null,s,ht),_t.push({event:gt,listeners:yt}))}}if(!(o&7)){e:{if(gt=i==="mouseover"||i==="pointerover",ft=i==="mouseout"||i==="pointerout",gt&&s!==wb&&(ut=s.relatedTarget||s.fromElement)&&(Wc(ut)||ut[uf]))break e;if((ft||gt)&&(gt=ht.window===ht?ht:(gt=ht.ownerDocument)?gt.defaultView||gt.parentWindow:window,ft?(ut=s.relatedTarget||s.toElement,ft=st,ut=ut?Wc(ut):null,ut!==null&&(Et=Vb(ut),ut!==Et||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(ft=null,ut=st),ft!==ut)){if(yt=Bd,Ot="onMouseLeave",Mt="onMouseEnter",Ft="mouse",(i==="pointerout"||i==="pointerover")&&(yt=Td,Ot="onPointerLeave",Mt="onPointerEnter",Ft="pointer"),Et=ft==null?gt:ue(ft),Rt=ut==null?gt:ue(ut),gt=new yt(Ot,Ft+"leave",ft,s,ht),gt.target=Et,gt.relatedTarget=Rt,Ot=null,Wc(ht)===st&&(yt=new yt(Mt,Ft+"enter",ut,s,ht),yt.target=Rt,yt.relatedTarget=Et,Ot=yt),Et=Ot,ft&&ut)t:{for(yt=ft,Mt=ut,Ft=0,Rt=yt;Rt;Rt=vf(Rt))Ft++;for(Rt=0,Ot=Mt;Ot;Ot=vf(Ot))Rt++;for(;0<Ft-Rt;)yt=vf(yt),Ft--;for(;0<Rt-Ft;)Mt=vf(Mt),Rt--;for(;Ft--;){if(yt===Mt||Mt!==null&&yt===Mt.alternate)break t;yt=vf(yt),Mt=vf(Mt)}yt=null}else yt=null;ft!==null&&wf(_t,gt,ft,yt,!1),ut!==null&&Et!==null&&wf(_t,Et,ut,yt,!0)}}e:{if(gt=st?ue(st):window,ft=gt.nodeName&&gt.nodeName.toLowerCase(),ft==="select"||ft==="input"&&gt.type==="file")var pt=ve;else if(me(gt))if(we)pt=Fe;else{pt=De;var Lt=Ce}else(ft=gt.nodeName)&&ft.toLowerCase()==="input"&&(gt.type==="checkbox"||gt.type==="radio")&&(pt=Ee);if(pt&&(pt=pt(i,st))){ne(_t,pt,s,ht);break e}Lt&&Lt(i,gt,st),i==="focusout"&&(Lt=gt._wrapperState)&&Lt.controlled&&gt.type==="number"&&cb(gt,"number",gt.value)}switch(Lt=st?ue(st):window,i){case"focusin":(me(Lt)||Lt.contentEditable==="true")&&(Qe=Lt,Re=st,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_t,s,ht);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_t,s,ht)}var nn;if(ae)e:{switch(i){case"compositionstart":var on="onCompositionStart";break e;case"compositionend":on="onCompositionEnd";break e;case"compositionupdate":on="onCompositionUpdate";break e}on=void 0}else ie?ge(i,s)&&(on="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(on="onCompositionStart");on&&(de&&s.locale!=="ko"&&(ie||on!=="onCompositionStart"?on==="onCompositionEnd"&&ie&&(nn=nd()):(kd=ht,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Lt=oe(st,on),0<Lt.length&&(on=new Ld(on,i,null,s,ht),_t.push({event:on,listeners:Lt}),nn?on.data=nn:(nn=he(s),nn!==null&&(on.data=nn)))),(nn=ce?je(i,s):ke(i,s))&&(st=oe(st,"onBeforeInput"),0<st.length&&(ht=new Ld("onBeforeInput","beforeinput",null,s,ht),_t.push({event:ht,listeners:st}),ht.data=nn))}se(_t,o)})}function tf(i,o,s){return{instance:i,listener:o,currentTarget:s}}function oe(i,o){for(var s=o+"Capture",_=[];i!==null;){var $=i,et=$.stateNode;$.tag===5&&et!==null&&($=et,et=Kb(i,s),et!=null&&_.unshift(tf(i,et,$)),et=Kb(i,o),et!=null&&_.push(tf(i,et,$))),i=i.return}return _}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,o,s,_,$){for(var et=o._reactName,tt=[];s!==null&&s!==_;){var j=s,it=j.alternate,st=j.stateNode;if(it!==null&&it===_)break;j.tag===5&&st!==null&&(j=st,$?(it=Kb(s,et),it!=null&&tt.unshift(tf(s,it,j))):$||(it=Kb(s,et),it!=null&&tt.push(tf(s,it,j)))),s=s.return}tt.length!==0&&i.push({event:o,listeners:tt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,o,s){if(o=zf(o),zf(i)!==o&&s)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,o){var s=o,_=0;do{var $=s.nextSibling;if(i.removeChild(s),$&&$.nodeType===8)if(s=$.data,s==="/$"){if(_===0){i.removeChild($),bd(o);return}_--}else s!=="$"&&s!=="$?"&&s!=="$!"||_++;s=$}while(s);bd(o)}function Lf(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return i;o--}else s==="/$"&&o++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var o=i[Of];if(o)return o;for(var s=i.parentNode;s;){if(o=s[uf]||s[Of]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return o}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p$1(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,o){Tf++,Sf[Tf]=i.current,i.current=o}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,o){var s=i.type.contextTypes;if(!s)return Vf;var _=i.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===o)return _.__reactInternalMemoizedMaskedChildContext;var $={},et;for(et in s)$[et]=o[et];return _&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=$),$}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H)}function ag(i,o,s){if(H.current!==Vf)throw Error(p$1(168));G(H,o),G(Wf,s)}function bg(i,o,s){var _=i.stateNode;if(o=o.childContextTypes,typeof _.getChildContext!="function")return s;_=_.getChildContext();for(var $ in _)if(!($ in o))throw Error(p$1(108,Ra(i)||"Unknown",$));return A$1({},s,_)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,o,s){var _=i.stateNode;if(!_)throw Error(p$1(169));s?(i=bg(i,o,Xf),_.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H),G(H,i)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,o=C;try{var s=eg;for(C=1;i<s.length;i++){var _=s[i];do _=_(!0);while(_!==null)}eg=null,fg=!1}catch($){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),$}finally{C=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,o){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=o}function ug(i,o,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var _=rg;i=sg;var $=32-oc(_)-1;_&=~(1<<$),s+=1;var et=32-oc(o)+$;if(30<et){var tt=$-$%5;et=(_&(1<<tt)-1).toString(32),_>>=tt,$-=tt,rg=1<<32-oc(o)+$|s<<$|_,sg=et+i}else rg=1<<et|s<<$|_,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,o){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=o,s.return=i,o=i.deletions,o===null?(i.deletions=[s],i.flags|=16):o.push(s)}function Cg(i,o){switch(i.tag){case 5:var s=i.type;return o=o.nodeType!==1||s.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,xg=i,yg=Lf(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,xg=i,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:o,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=o,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var o=yg;if(o){var s=o;if(!Cg(i,o)){if(Dg(i))throw Error(p$1(418));o=Lf(s.nextSibling);var _=xg;o&&Cg(i,o)?Ag(_,s):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p$1(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ef(i.type,i.memoizedProps)),o&&(o=yg)){if(Dg(i))throw Hg(),Error(p$1(418));for(;o;)Ag(i,o),o=Lf(o.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p$1(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(o===0){yg=Lf(i.nextSibling);break e}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(i,o){if(i&&i.defaultProps){o=A$1({},o),i=i.defaultProps;for(var s in i)o[s]===void 0&&(o[s]=i[s]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var o=Mg.current;E(Mg),i._currentValue=o}function Sg(i,o,s){for(;i!==null;){var _=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,_!==null&&(_.childLanes|=o)):_!==null&&(_.childLanes&o)!==o&&(_.childLanes|=o),i===s)break;i=i.return}}function Tg(i,o){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ug=!0),i.firstContext=null)}function Vg(i){var o=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$1(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return o}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,o,s,_){var $=o.interleaved;return $===null?(s.next=s,Xg(o)):(s.next=$.next,$.next=s),o.interleaved=s,Zg(i,_)}function Zg(i,o){i.lanes|=o;var s=i.alternate;for(s!==null&&(s.lanes|=o),s=i,i=i.return;i!==null;)i.childLanes|=o,s=i.alternate,s!==null&&(s.childLanes|=o),s=i,i=i.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(i,o,s){var _=i.updateQueue;if(_===null)return null;if(_=_.shared,K&2){var $=_.pending;return $===null?o.next=o:(o.next=$.next,$.next=o),_.pending=o,Zg(i,s)}return $=_.interleaved,$===null?(o.next=o,Xg(_)):(o.next=$.next,$.next=o),_.interleaved=o,Zg(i,s)}function eh(i,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194240)!==0)){var _=o.lanes;_&=i.pendingLanes,s|=_,o.lanes=s,Cc(i,s)}}function fh(i,o){var s=i.updateQueue,_=i.alternate;if(_!==null&&(_=_.updateQueue,s===_)){var $=null,et=null;if(s=s.firstBaseUpdate,s!==null){do{var tt={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};et===null?$=et=tt:et=et.next=tt,s=s.next}while(s!==null);et===null?$=et=o:et=et.next=o}else $=et=o;s={baseState:_.baseState,firstBaseUpdate:$,lastBaseUpdate:et,shared:_.shared,effects:_.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=o:i.next=o,s.lastBaseUpdate=o}function gh(i,o,s,_){var $=i.updateQueue;$g=!1;var et=$.firstBaseUpdate,tt=$.lastBaseUpdate,j=$.shared.pending;if(j!==null){$.shared.pending=null;var it=j,st=it.next;it.next=null,tt===null?et=st:tt.next=st,tt=it;var ht=i.alternate;ht!==null&&(ht=ht.updateQueue,j=ht.lastBaseUpdate,j!==tt&&(j===null?ht.firstBaseUpdate=st:j.next=st,ht.lastBaseUpdate=it))}if(et!==null){var _t=$.baseState;tt=0,ht=st=it=null,j=et;do{var gt=j.lane,ft=j.eventTime;if((_&gt)===gt){ht!==null&&(ht=ht.next={eventTime:ft,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ut=i,yt=j;switch(gt=o,ft=s,yt.tag){case 1:if(ut=yt.payload,typeof ut=="function"){_t=ut.call(ft,_t,gt);break e}_t=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=yt.payload,gt=typeof ut=="function"?ut.call(ft,_t,gt):ut,gt==null)break e;_t=A$1({},_t,gt);break e;case 2:$g=!0}}j.callback!==null&&j.lane!==0&&(i.flags|=64,gt=$.effects,gt===null?$.effects=[j]:gt.push(j))}else ft={eventTime:ft,lane:gt,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ht===null?(st=ht=ft,it=_t):ht=ht.next=ft,tt|=gt;if(j=j.next,j===null){if(j=$.shared.pending,j===null)break;gt=j,j=gt.next,gt.next=null,$.lastBaseUpdate=gt,$.shared.pending=null}}while(1);if(ht===null&&(it=_t),$.baseState=it,$.firstBaseUpdate=st,$.lastBaseUpdate=ht,o=$.shared.interleaved,o!==null){$=o;do tt|=$.lane,$=$.next;while($!==o)}else et===null&&($.shared.lanes=0);hh|=tt,i.lanes=tt,i.memoizedState=_t}}function ih(i,o,s){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var _=i[o],$=_.callback;if($!==null){if(_.callback=null,_=s,typeof $!="function")throw Error(p$1(191,$));$.call(_)}}}var jh=new aa.Component().refs;function kh(i,o,s,_){o=i.memoizedState,s=s(_,o),s=s==null?o:A$1({},o,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,o,s){i=i._reactInternals;var _=L(),$=lh(i),et=ch(_,$);et.payload=o,s!=null&&(et.callback=s),o=dh(i,et,$),o!==null&&(mh(o,i,$,_),eh(o,i,$))},enqueueReplaceState:function(i,o,s){i=i._reactInternals;var _=L(),$=lh(i),et=ch(_,$);et.tag=1,et.payload=o,s!=null&&(et.callback=s),o=dh(i,et,$),o!==null&&(mh(o,i,$,_),eh(o,i,$))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var s=L(),_=lh(i),$=ch(s,_);$.tag=2,o!=null&&($.callback=o),o=dh(i,$,_),o!==null&&(mh(o,i,_,s),eh(o,i,_))}};function oh(i,o,s,_,$,et,tt){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(_,et,tt):o.prototype&&o.prototype.isPureReactComponent?!Ie(s,_)||!Ie($,et):!0}function ph(i,o,s){var _=!1,$=Vf,et=o.contextType;return typeof et=="object"&&et!==null?et=Vg(et):($=Zf(o)?Xf:H.current,_=o.contextTypes,et=(_=_!=null)?Yf(i,$):Vf),o=new o(s,et),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,i.stateNode=o,o._reactInternals=i,_&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=$,i.__reactInternalMemoizedMaskedChildContext=et),o}function qh(i,o,s,_){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,_),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,_),o.state!==i&&nh.enqueueReplaceState(o,o.state,null)}function rh(i,o,s,_){var $=i.stateNode;$.props=s,$.state=i.memoizedState,$.refs=jh,ah(i);var et=o.contextType;typeof et=="object"&&et!==null?$.context=Vg(et):(et=Zf(o)?Xf:H.current,$.context=Yf(i,et)),$.state=i.memoizedState,et=o.getDerivedStateFromProps,typeof et=="function"&&(kh(i,o,et,s),$.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(o=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),o!==$.state&&nh.enqueueReplaceState($,$.state,null),gh(i,s,$,_),$.state=i.memoizedState),typeof $.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,o,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$1(309));var _=s.stateNode}if(!_)throw Error(p$1(147,i));var $=_,et=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===et?o.ref:(o=function(tt){var j=$.refs;j===jh&&(j=$.refs={}),tt===null?delete j[et]:j[et]=tt},o._stringRef=et,o)}if(typeof i!="string")throw Error(p$1(284));if(!s._owner)throw Error(p$1(290,i))}return i}function th(i,o){throw i=Object.prototype.toString.call(o),Error(p$1(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function uh(i){var o=i._init;return o(i._payload)}function vh(i){function o(Mt,Ft){if(i){var Rt=Mt.deletions;Rt===null?(Mt.deletions=[Ft],Mt.flags|=16):Rt.push(Ft)}}function s(Mt,Ft){if(!i)return null;for(;Ft!==null;)o(Mt,Ft),Ft=Ft.sibling;return null}function _(Mt,Ft){for(Mt=new Map;Ft!==null;)Ft.key!==null?Mt.set(Ft.key,Ft):Mt.set(Ft.index,Ft),Ft=Ft.sibling;return Mt}function $(Mt,Ft){return Mt=wh(Mt,Ft),Mt.index=0,Mt.sibling=null,Mt}function et(Mt,Ft,Rt){return Mt.index=Rt,i?(Rt=Mt.alternate,Rt!==null?(Rt=Rt.index,Rt<Ft?(Mt.flags|=2,Ft):Rt):(Mt.flags|=2,Ft)):(Mt.flags|=1048576,Ft)}function tt(Mt){return i&&Mt.alternate===null&&(Mt.flags|=2),Mt}function j(Mt,Ft,Rt,Ot){return Ft===null||Ft.tag!==6?(Ft=xh(Rt,Mt.mode,Ot),Ft.return=Mt,Ft):(Ft=$(Ft,Rt),Ft.return=Mt,Ft)}function it(Mt,Ft,Rt,Ot){var pt=Rt.type;return pt===ya?ht(Mt,Ft,Rt.props.children,Ot,Rt.key):Ft!==null&&(Ft.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&uh(pt)===Ft.type)?(Ot=$(Ft,Rt.props),Ot.ref=sh(Mt,Ft,Rt),Ot.return=Mt,Ot):(Ot=yh(Rt.type,Rt.key,Rt.props,null,Mt.mode,Ot),Ot.ref=sh(Mt,Ft,Rt),Ot.return=Mt,Ot)}function st(Mt,Ft,Rt,Ot){return Ft===null||Ft.tag!==4||Ft.stateNode.containerInfo!==Rt.containerInfo||Ft.stateNode.implementation!==Rt.implementation?(Ft=zh(Rt,Mt.mode,Ot),Ft.return=Mt,Ft):(Ft=$(Ft,Rt.children||[]),Ft.return=Mt,Ft)}function ht(Mt,Ft,Rt,Ot,pt){return Ft===null||Ft.tag!==7?(Ft=Ah(Rt,Mt.mode,Ot,pt),Ft.return=Mt,Ft):(Ft=$(Ft,Rt),Ft.return=Mt,Ft)}function _t(Mt,Ft,Rt){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number")return Ft=xh(""+Ft,Mt.mode,Rt),Ft.return=Mt,Ft;if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case va:return Rt=yh(Ft.type,Ft.key,Ft.props,null,Mt.mode,Rt),Rt.ref=sh(Mt,null,Ft),Rt.return=Mt,Rt;case wa:return Ft=zh(Ft,Mt.mode,Rt),Ft.return=Mt,Ft;case Ha:var Ot=Ft._init;return _t(Mt,Ot(Ft._payload),Rt)}if(eb(Ft)||Ka(Ft))return Ft=Ah(Ft,Mt.mode,Rt,null),Ft.return=Mt,Ft;th(Mt,Ft)}return null}function gt(Mt,Ft,Rt,Ot){var pt=Ft!==null?Ft.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number")return pt!==null?null:j(Mt,Ft,""+Rt,Ot);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:return Rt.key===pt?it(Mt,Ft,Rt,Ot):null;case wa:return Rt.key===pt?st(Mt,Ft,Rt,Ot):null;case Ha:return pt=Rt._init,gt(Mt,Ft,pt(Rt._payload),Ot)}if(eb(Rt)||Ka(Rt))return pt!==null?null:ht(Mt,Ft,Rt,Ot,null);th(Mt,Rt)}return null}function ft(Mt,Ft,Rt,Ot,pt){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number")return Mt=Mt.get(Rt)||null,j(Ft,Mt,""+Ot,pt);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case va:return Mt=Mt.get(Ot.key===null?Rt:Ot.key)||null,it(Ft,Mt,Ot,pt);case wa:return Mt=Mt.get(Ot.key===null?Rt:Ot.key)||null,st(Ft,Mt,Ot,pt);case Ha:var Lt=Ot._init;return ft(Mt,Ft,Rt,Lt(Ot._payload),pt)}if(eb(Ot)||Ka(Ot))return Mt=Mt.get(Rt)||null,ht(Ft,Mt,Ot,pt,null);th(Ft,Ot)}return null}function ut(Mt,Ft,Rt,Ot){for(var pt=null,Lt=null,nn=Ft,on=Ft=0,wt=null;nn!==null&&on<Rt.length;on++){nn.index>on?(wt=nn,nn=null):wt=nn.sibling;var xt=gt(Mt,nn,Rt[on],Ot);if(xt===null){nn===null&&(nn=wt);break}i&&nn&&xt.alternate===null&&o(Mt,nn),Ft=et(xt,Ft,on),Lt===null?pt=xt:Lt.sibling=xt,Lt=xt,nn=wt}if(on===Rt.length)return s(Mt,nn),I&&tg(Mt,on),pt;if(nn===null){for(;on<Rt.length;on++)nn=_t(Mt,Rt[on],Ot),nn!==null&&(Ft=et(nn,Ft,on),Lt===null?pt=nn:Lt.sibling=nn,Lt=nn);return I&&tg(Mt,on),pt}for(nn=_(Mt,nn);on<Rt.length;on++)wt=ft(nn,Mt,on,Rt[on],Ot),wt!==null&&(i&&wt.alternate!==null&&nn.delete(wt.key===null?on:wt.key),Ft=et(wt,Ft,on),Lt===null?pt=wt:Lt.sibling=wt,Lt=wt);return i&&nn.forEach(function(Nt){return o(Mt,Nt)}),I&&tg(Mt,on),pt}function yt(Mt,Ft,Rt,Ot){var pt=Ka(Rt);if(typeof pt!="function")throw Error(p$1(150));if(Rt=pt.call(Rt),Rt==null)throw Error(p$1(151));for(var Lt=pt=null,nn=Ft,on=Ft=0,wt=null,xt=Rt.next();nn!==null&&!xt.done;on++,xt=Rt.next()){nn.index>on?(wt=nn,nn=null):wt=nn.sibling;var Nt=gt(Mt,nn,xt.value,Ot);if(Nt===null){nn===null&&(nn=wt);break}i&&nn&&Nt.alternate===null&&o(Mt,nn),Ft=et(Nt,Ft,on),Lt===null?pt=Nt:Lt.sibling=Nt,Lt=Nt,nn=wt}if(xt.done)return s(Mt,nn),I&&tg(Mt,on),pt;if(nn===null){for(;!xt.done;on++,xt=Rt.next())xt=_t(Mt,xt.value,Ot),xt!==null&&(Ft=et(xt,Ft,on),Lt===null?pt=xt:Lt.sibling=xt,Lt=xt);return I&&tg(Mt,on),pt}for(nn=_(Mt,nn);!xt.done;on++,xt=Rt.next())xt=ft(nn,Mt,on,xt.value,Ot),xt!==null&&(i&&xt.alternate!==null&&nn.delete(xt.key===null?on:xt.key),Ft=et(xt,Ft,on),Lt===null?pt=xt:Lt.sibling=xt,Lt=xt);return i&&nn.forEach(function(Tt){return o(Mt,Tt)}),I&&tg(Mt,on),pt}function Et(Mt,Ft,Rt,Ot){if(typeof Rt=="object"&&Rt!==null&&Rt.type===ya&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:e:{for(var pt=Rt.key,Lt=Ft;Lt!==null;){if(Lt.key===pt){if(pt=Rt.type,pt===ya){if(Lt.tag===7){s(Mt,Lt.sibling),Ft=$(Lt,Rt.props.children),Ft.return=Mt,Mt=Ft;break e}}else if(Lt.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&uh(pt)===Lt.type){s(Mt,Lt.sibling),Ft=$(Lt,Rt.props),Ft.ref=sh(Mt,Lt,Rt),Ft.return=Mt,Mt=Ft;break e}s(Mt,Lt);break}else o(Mt,Lt);Lt=Lt.sibling}Rt.type===ya?(Ft=Ah(Rt.props.children,Mt.mode,Ot,Rt.key),Ft.return=Mt,Mt=Ft):(Ot=yh(Rt.type,Rt.key,Rt.props,null,Mt.mode,Ot),Ot.ref=sh(Mt,Ft,Rt),Ot.return=Mt,Mt=Ot)}return tt(Mt);case wa:e:{for(Lt=Rt.key;Ft!==null;){if(Ft.key===Lt)if(Ft.tag===4&&Ft.stateNode.containerInfo===Rt.containerInfo&&Ft.stateNode.implementation===Rt.implementation){s(Mt,Ft.sibling),Ft=$(Ft,Rt.children||[]),Ft.return=Mt,Mt=Ft;break e}else{s(Mt,Ft);break}else o(Mt,Ft);Ft=Ft.sibling}Ft=zh(Rt,Mt.mode,Ot),Ft.return=Mt,Mt=Ft}return tt(Mt);case Ha:return Lt=Rt._init,Et(Mt,Ft,Lt(Rt._payload),Ot)}if(eb(Rt))return ut(Mt,Ft,Rt,Ot);if(Ka(Rt))return yt(Mt,Ft,Rt,Ot);th(Mt,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"?(Rt=""+Rt,Ft!==null&&Ft.tag===6?(s(Mt,Ft.sibling),Ft=$(Ft,Rt),Ft.return=Mt,Mt=Ft):(s(Mt,Ft),Ft=xh(Rt,Mt.mode,Ot),Ft.return=Mt,Mt=Ft),tt(Mt)):s(Mt,Ft)}return Et}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p$1(174));return i}function Ih(i,o){switch(G(Gh,o),G(Fh,i),G(Eh,Dh),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=lb(o,i)}E(Eh),G(Eh,o)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(i){Hh(Gh.current);var o=Hh(Eh.current),s=lb(o,i.type);o!==s&&(G(Fh,i),G(Eh,s))}function Lh(i){Fh.current===i&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(i){for(var o=i;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$1(321))}function Wh(i,o){if(o===null)return!1;for(var s=0;s<o.length&&s<i.length;s++)if(!He(i[s],o[s]))return!1;return!0}function Xh(i,o,s,_,$,et){if(Rh=et,N=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=s(_,$),Th){et=0;do{if(Th=!1,Uh=0,25<=et)throw Error(p$1(301));et+=1,P=O=null,o.updateQueue=null,Ph.current=$h,i=s(_,$)}while(Th)}if(Ph.current=ai,o=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,o)throw Error(p$1(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=i:P=P.next=i,P}function di(){if(O===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O.next;var o=P===null?N.memoizedState:P.next;if(o!==null)P=o,O=i;else{if(i===null)throw Error(p$1(310));O=i,i={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=i:P=P.next=i}return P}function ei(i,o){return typeof o=="function"?o(i):o}function fi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var _=O,$=_.baseQueue,et=s.pending;if(et!==null){if($!==null){var tt=$.next;$.next=et.next,et.next=tt}_.baseQueue=$=et,s.pending=null}if($!==null){et=$.next,_=_.baseState;var j=tt=null,it=null,st=et;do{var ht=st.lane;if((Rh&ht)===ht)it!==null&&(it=it.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),_=st.hasEagerState?st.eagerState:i(_,st.action);else{var _t={lane:ht,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};it===null?(j=it=_t,tt=_):it=it.next=_t,N.lanes|=ht,hh|=ht}st=st.next}while(st!==null&&st!==et);it===null?tt=_:it.next=j,He(_,o.memoizedState)||(Ug=!0),o.memoizedState=_,o.baseState=tt,o.baseQueue=it,s.lastRenderedState=_}if(i=s.interleaved,i!==null){$=i;do et=$.lane,N.lanes|=et,hh|=et,$=$.next;while($!==i)}else $===null&&(s.lanes=0);return[o.memoizedState,s.dispatch]}function gi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var _=s.dispatch,$=s.pending,et=o.memoizedState;if($!==null){s.pending=null;var tt=$=$.next;do et=i(et,tt.action),tt=tt.next;while(tt!==$);He(et,o.memoizedState)||(Ug=!0),o.memoizedState=et,o.baseQueue===null&&(o.baseState=et),s.lastRenderedState=et}return[et,_]}function hi(){}function ii(i,o){var s=N,_=di(),$=o(),et=!He(_.memoizedState,$);if(et&&(_.memoizedState=$,Ug=!0),_=_.queue,ji(ki.bind(null,s,_,i),[i]),_.getSnapshot!==o||et||P!==null&&P.memoizedState.tag&1){if(s.flags|=2048,li(9,mi.bind(null,s,_,$,o),void 0,null),R===null)throw Error(p$1(349));Rh&30||ni(s,o,$)}return $}function ni(i,o,s){i.flags|=16384,i={getSnapshot:o,value:s},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.stores=[i]):(s=o.stores,s===null?o.stores=[i]:s.push(i))}function mi(i,o,s,_){o.value=s,o.getSnapshot=_,oi(o)&&pi(i)}function ki(i,o,s){return s(function(){oi(o)&&pi(i)})}function oi(i){var o=i.getSnapshot;i=i.value;try{var s=o();return!He(i,s)}catch{return!0}}function pi(i){var o=Zg(i,1);o!==null&&mh(o,i,1,-1)}function qi(i){var o=ci();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},o.queue=i,i=i.dispatch=ri.bind(null,N,i),[o.memoizedState,i]}function li(i,o,s,_){return i={tag:i,create:o,destroy:s,deps:_,next:null},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.lastEffect=i.next=i):(s=o.lastEffect,s===null?o.lastEffect=i.next=i:(_=s.next,s.next=i,i.next=_,o.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,o,s,_){var $=ci();N.flags|=i,$.memoizedState=li(1|o,s,void 0,_===void 0?null:_)}function ui(i,o,s,_){var $=di();_=_===void 0?null:_;var et=void 0;if(O!==null){var tt=O.memoizedState;if(et=tt.destroy,_!==null&&Wh(_,tt.deps)){$.memoizedState=li(o,s,et,_);return}}N.flags|=i,$.memoizedState=li(1|o,s,et,_)}function vi(i,o){return ti(8390656,8,i,o)}function ji(i,o){return ui(2048,8,i,o)}function wi(i,o){return ui(4,2,i,o)}function xi(i,o){return ui(4,4,i,o)}function yi(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function zi(i,o,s){return s=s!=null?s.concat([i]):null,ui(4,4,yi.bind(null,o,i),s)}function Ai(){}function Bi(i,o){var s=di();o=o===void 0?null:o;var _=s.memoizedState;return _!==null&&o!==null&&Wh(o,_[1])?_[0]:(s.memoizedState=[i,o],i)}function Ci(i,o){var s=di();o=o===void 0?null:o;var _=s.memoizedState;return _!==null&&o!==null&&Wh(o,_[1])?_[0]:(i=i(),s.memoizedState=[i,o],i)}function Di(i,o,s){return Rh&21?(He(s,o)||(s=yc(),N.lanes|=s,hh|=s,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=s)}function Ei(i,o){var s=C;C=s!==0&&4>s?s:4,i(!0);var _=Qh.transition;Qh.transition={};try{i(!1),o()}finally{C=s,Qh.transition=_}}function Fi(){return di().memoizedState}function Gi(i,o,s){var _=lh(i);if(s={lane:_,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(o,s);else if(s=Yg(i,o,s,_),s!==null){var $=L();mh(s,i,_,$),Ji(s,o,_)}}function ri(i,o,s){var _=lh(i),$={lane:_,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(o,$);else{var et=i.alternate;if(i.lanes===0&&(et===null||et.lanes===0)&&(et=o.lastRenderedReducer,et!==null))try{var tt=o.lastRenderedState,j=et(tt,s);if($.hasEagerState=!0,$.eagerState=j,He(j,tt)){var it=o.interleaved;it===null?($.next=$,Xg(o)):($.next=it.next,it.next=$),o.interleaved=$;return}}catch{}finally{}s=Yg(i,o,$,_),s!==null&&($=L(),mh(s,i,_,$),Ji(s,o,_))}}function Hi(i){var o=i.alternate;return i===N||o!==null&&o===N}function Ii(i,o){Th=Sh=!0;var s=i.pending;s===null?o.next=o:(o.next=s.next,s.next=o),i.pending=o}function Ji(i,o,s){if(s&4194240){var _=o.lanes;_&=i.pendingLanes,s|=_,o.lanes=s,Cc(i,s)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,o){return ci().memoizedState=[i,o===void 0?null:o],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,o,s){return s=s!=null?s.concat([i]):null,ti(4194308,4,yi.bind(null,o,i),s)},useLayoutEffect:function(i,o){return ti(4194308,4,i,o)},useInsertionEffect:function(i,o){return ti(4,2,i,o)},useMemo:function(i,o){var s=ci();return o=o===void 0?null:o,i=i(),s.memoizedState=[i,o],i},useReducer:function(i,o,s){var _=ci();return o=s!==void 0?s(o):o,_.memoizedState=_.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},_.queue=i,i=i.dispatch=Gi.bind(null,N,i),[_.memoizedState,i]},useRef:function(i){var o=ci();return i={current:i},o.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),o=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,s){var _=N,$=ci();if(I){if(s===void 0)throw Error(p$1(407));s=s()}else{if(s=o(),R===null)throw Error(p$1(349));Rh&30||ni(_,o,s)}$.memoizedState=s;var et={value:s,getSnapshot:o};return $.queue=et,vi(ki.bind(null,_,et,i),[i]),_.flags|=2048,li(9,mi.bind(null,_,et,s,o),void 0,null),s},useId:function(){var i=ci(),o=R.identifierPrefix;if(I){var s=sg,_=rg;s=(_&~(1<<32-oc(_)-1)).toString(32)+s,o=":"+o+"R"+s,s=Uh++,0<s&&(o+="H"+s.toString(32)),o+=":"}else s=Vh++,o=":"+o+"r"+s.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return Di(o,O.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return O===null?o.memoizedState=i:Di(o,O.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,o){try{var s="",_=o;do s+=Pa(_),_=_.return;while(_);var $=s}catch(et){$=`
Error generating stack: `+et.message+`
`+et.stack}return{value:i,source:o,stack:$,digest:null}}function Li(i,o,s){return{value:i,source:null,stack:s??null,digest:o??null}}function Mi(i,o){try{console.error(o.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,o,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var _=o.value;return s.callback=function(){Pi||(Pi=!0,Qi=_),Mi(i,o)},s}function Ri(i,o,s){s=ch(-1,s),s.tag=3;var _=i.type.getDerivedStateFromError;if(typeof _=="function"){var $=o.value;s.payload=function(){return _($)},s.callback=function(){Mi(i,o)}}var et=i.stateNode;return et!==null&&typeof et.componentDidCatch=="function"&&(s.callback=function(){Mi(i,o),typeof _!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var tt=o.stack;this.componentDidCatch(o.value,{componentStack:tt!==null?tt:""})}),s}function Ti(i,o,s){var _=i.pingCache;if(_===null){_=i.pingCache=new Ni;var $=new Set;_.set(o,$)}else $=_.get(o),$===void 0&&($=new Set,_.set(o,$));$.has(s)||($.add(s),i=Ui.bind(null,i,o,s),o.then(i,i))}function Vi(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Wi(i,o,s,_,$){return i.mode&1?(i.flags|=65536,i.lanes=$,i):(i===o?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(o=ch(-1,1),o.tag=2,dh(s,o,1))),s.lanes|=1),i)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(i,o,s,_){o.child=i===null?Ch(o,null,s,_):Bh(o,i.child,s,_)}function Zi(i,o,s,_,$){s=s.render;var et=o.ref;return Tg(o,$),_=Xh(i,o,s,_,et,$),s=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~$,$i(i,o,$)):(I&&s&&vg(o),o.flags|=1,Yi(i,o,_,$),o.child)}function aj(i,o,s,_,$){if(i===null){var et=s.type;return typeof et=="function"&&!bj(et)&&et.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(o.tag=15,o.type=et,cj(i,o,et,_,$)):(i=yh(s.type,null,_,o,o.mode,$),i.ref=o.ref,i.return=o,o.child=i)}if(et=i.child,!(i.lanes&$)){var tt=et.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(tt,_)&&i.ref===o.ref)return $i(i,o,$)}return o.flags|=1,i=wh(et,_),i.ref=o.ref,i.return=o,o.child=i}function cj(i,o,s,_,$){if(i!==null){var et=i.memoizedProps;if(Ie(et,_)&&i.ref===o.ref)if(Ug=!1,o.pendingProps=_=et,(i.lanes&$)!==0)i.flags&131072&&(Ug=!0);else return o.lanes=i.lanes,$i(i,o,$)}return dj(i,o,s,_,$)}function ej(i,o,s){var _=o.pendingProps,$=_.children,et=i!==null?i.memoizedState:null;if(_.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=s;else{if(!(s&1073741824))return i=et!==null?et.baseLanes|s:s,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,G(fj,gj),gj|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=et!==null?et.baseLanes:s,G(fj,gj),gj|=_}else et!==null?(_=et.baseLanes|s,o.memoizedState=null):_=s,G(fj,gj),gj|=_;return Yi(i,o,$,s),o.child}function hj(i,o){var s=o.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(o.flags|=512,o.flags|=2097152)}function dj(i,o,s,_,$){var et=Zf(s)?Xf:H.current;return et=Yf(o,et),Tg(o,$),s=Xh(i,o,s,_,et,$),_=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~$,$i(i,o,$)):(I&&_&&vg(o),o.flags|=1,Yi(i,o,s,$),o.child)}function ij(i,o,s,_,$){if(Zf(s)){var et=!0;cg(o)}else et=!1;if(Tg(o,$),o.stateNode===null)jj(i,o),ph(o,s,_),rh(o,s,_,$),_=!0;else if(i===null){var tt=o.stateNode,j=o.memoizedProps;tt.props=j;var it=tt.context,st=s.contextType;typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(s)?Xf:H.current,st=Yf(o,st));var ht=s.getDerivedStateFromProps,_t=typeof ht=="function"||typeof tt.getSnapshotBeforeUpdate=="function";_t||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(j!==_||it!==st)&&qh(o,tt,_,st),$g=!1;var gt=o.memoizedState;tt.state=gt,gh(o,_,tt,$),it=o.memoizedState,j!==_||gt!==it||Wf.current||$g?(typeof ht=="function"&&(kh(o,s,ht,_),it=o.memoizedState),(j=$g||oh(o,s,j,_,gt,it,st))?(_t||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(o.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=_,o.memoizedState=it),tt.props=_,tt.state=it,tt.context=st,_=j):(typeof tt.componentDidMount=="function"&&(o.flags|=4194308),_=!1)}else{tt=o.stateNode,bh(i,o),j=o.memoizedProps,st=o.type===o.elementType?j:Lg(o.type,j),tt.props=st,_t=o.pendingProps,gt=tt.context,it=s.contextType,typeof it=="object"&&it!==null?it=Vg(it):(it=Zf(s)?Xf:H.current,it=Yf(o,it));var ft=s.getDerivedStateFromProps;(ht=typeof ft=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(j!==_t||gt!==it)&&qh(o,tt,_,it),$g=!1,gt=o.memoizedState,tt.state=gt,gh(o,_,tt,$);var ut=o.memoizedState;j!==_t||gt!==ut||Wf.current||$g?(typeof ft=="function"&&(kh(o,s,ft,_),ut=o.memoizedState),(st=$g||oh(o,s,st,_,gt,ut,it)||!1)?(ht||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(_,ut,it),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(_,ut,it)),typeof tt.componentDidUpdate=="function"&&(o.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof tt.componentDidUpdate!="function"||j===i.memoizedProps&&gt===i.memoizedState||(o.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&gt===i.memoizedState||(o.flags|=1024),o.memoizedProps=_,o.memoizedState=ut),tt.props=_,tt.state=ut,tt.context=it,_=st):(typeof tt.componentDidUpdate!="function"||j===i.memoizedProps&&gt===i.memoizedState||(o.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&gt===i.memoizedState||(o.flags|=1024),_=!1)}return kj(i,o,s,_,et,$)}function kj(i,o,s,_,$,et){hj(i,o);var tt=(o.flags&128)!==0;if(!_&&!tt)return $&&dg(o,s,!1),$i(i,o,et);_=o.stateNode,Xi.current=o;var j=tt&&typeof s.getDerivedStateFromError!="function"?null:_.render();return o.flags|=1,i!==null&&tt?(o.child=Bh(o,i.child,null,et),o.child=Bh(o,null,j,et)):Yi(i,o,j,et),o.memoizedState=_.state,$&&dg(o,s,!0),o.child}function lj(i){var o=i.stateNode;o.pendingContext?ag(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(i,o.context,!1),Ih(i,o.containerInfo)}function mj(i,o,s,_,$){return Ig(),Jg($),o.flags|=256,Yi(i,o,s,_),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,o,s){var _=o.pendingProps,$=M.current,et=!1,tt=(o.flags&128)!==0,j;if((j=tt)||(j=i!==null&&i.memoizedState===null?!1:($&2)!==0),j?(et=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&($|=1),G(M,$&1),i===null)return Eg(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(tt=_.children,i=_.fallback,et?(_=o.mode,et=o.child,tt={mode:"hidden",children:tt},!(_&1)&&et!==null?(et.childLanes=0,et.pendingProps=tt):et=qj(tt,_,0,null),i=Ah(i,_,s,null),et.return=o,i.return=o,et.sibling=i,o.child=et,o.child.memoizedState=oj(s),o.memoizedState=nj,i):rj(o,tt));if($=i.memoizedState,$!==null&&(j=$.dehydrated,j!==null))return sj(i,o,tt,_,j,$,s);if(et){et=_.fallback,tt=o.mode,$=i.child,j=$.sibling;var it={mode:"hidden",children:_.children};return!(tt&1)&&o.child!==$?(_=o.child,_.childLanes=0,_.pendingProps=it,o.deletions=null):(_=wh($,it),_.subtreeFlags=$.subtreeFlags&14680064),j!==null?et=wh(j,et):(et=Ah(et,tt,s,null),et.flags|=2),et.return=o,_.return=o,_.sibling=et,o.child=_,_=et,et=o.child,tt=i.child.memoizedState,tt=tt===null?oj(s):{baseLanes:tt.baseLanes|s,cachePool:null,transitions:tt.transitions},et.memoizedState=tt,et.childLanes=i.childLanes&~s,o.memoizedState=nj,_}return et=i.child,i=et.sibling,_=wh(et,{mode:"visible",children:_.children}),!(o.mode&1)&&(_.lanes=s),_.return=o,_.sibling=null,i!==null&&(s=o.deletions,s===null?(o.deletions=[i],o.flags|=16):s.push(i)),o.child=_,o.memoizedState=null,_}function rj(i,o){return o=qj({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function tj(i,o,s,_){return _!==null&&Jg(_),Bh(o,i.child,null,s),i=rj(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function sj(i,o,s,_,$,et,tt){if(s)return o.flags&256?(o.flags&=-257,_=Li(Error(p$1(422))),tj(i,o,tt,_)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(et=_.fallback,$=o.mode,_=qj({mode:"visible",children:_.children},$,0,null),et=Ah(et,$,tt,null),et.flags|=2,_.return=o,et.return=o,_.sibling=et,o.child=_,o.mode&1&&Bh(o,i.child,null,tt),o.child.memoizedState=oj(tt),o.memoizedState=nj,et);if(!(o.mode&1))return tj(i,o,tt,null);if($.data==="$!"){if(_=$.nextSibling&&$.nextSibling.dataset,_)var j=_.dgst;return _=j,et=Error(p$1(419)),_=Li(et,_,void 0),tj(i,o,tt,_)}if(j=(tt&i.childLanes)!==0,Ug||j){if(_=R,_!==null){switch(tt&-tt){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=$&(_.suspendedLanes|tt)?0:$,$!==0&&$!==et.retryLane&&(et.retryLane=$,Zg(i,$),mh(_,i,$,-1))}return uj(),_=Li(Error(p$1(421))),tj(i,o,tt,_)}return $.data==="$?"?(o.flags|=128,o.child=i.child,o=vj.bind(null,i),$._reactRetry=o,null):(i=et.treeContext,yg=Lf($.nextSibling),xg=o,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=o),o=rj(o,_.children),o.flags|=4096,o)}function wj(i,o,s){i.lanes|=o;var _=i.alternate;_!==null&&(_.lanes|=o),Sg(i.return,o,s)}function xj(i,o,s,_,$){var et=i.memoizedState;et===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:_,tail:s,tailMode:$}:(et.isBackwards=o,et.rendering=null,et.renderingStartTime=0,et.last=_,et.tail=s,et.tailMode=$)}function yj(i,o,s){var _=o.pendingProps,$=_.revealOrder,et=_.tail;if(Yi(i,o,_.children,s),_=M.current,_&2)_=_&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,s,o);else if(i.tag===19)wj(i,s,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}_&=1}if(G(M,_),!(o.mode&1))o.memoizedState=null;else switch($){case"forwards":for(s=o.child,$=null;s!==null;)i=s.alternate,i!==null&&Mh(i)===null&&($=s),s=s.sibling;s=$,s===null?($=o.child,o.child=null):($=s.sibling,s.sibling=null),xj(o,!1,$,s,et);break;case"backwards":for(s=null,$=o.child,o.child=null;$!==null;){if(i=$.alternate,i!==null&&Mh(i)===null){o.child=$;break}i=$.sibling,$.sibling=s,s=$,$=i}xj(o,!0,s,null,et);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function $i(i,o,s){if(i!==null&&(o.dependencies=i.dependencies),hh|=o.lanes,!(s&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(p$1(153));if(o.child!==null){for(i=o.child,s=wh(i,i.pendingProps),o.child=s,s.return=o;i.sibling!==null;)i=i.sibling,s=s.sibling=wh(i,i.pendingProps),s.return=o;s.sibling=null}return o.child}function zj(i,o,s){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var _=o.type._context,$=o.memoizedProps.value;G(Mg,_._currentValue),_._currentValue=$;break;case 13:if(_=o.memoizedState,_!==null)return _.dehydrated!==null?(G(M,M.current&1),o.flags|=128,null):s&o.child.childLanes?pj(i,o,s):(G(M,M.current&1),i=$i(i,o,s),i!==null?i.sibling:null);G(M,M.current&1);break;case 19:if(_=(s&o.childLanes)!==0,i.flags&128){if(_)return yj(i,o,s);o.flags|=128}if($=o.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),G(M,M.current),_)break;return null;case 22:case 23:return o.lanes=0,ej(i,o,s)}return $i(i,o,s)}var Aj,Bj,Cj,Dj;Aj=function(i,o){for(var s=o.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(i,o,s,_){var $=i.memoizedProps;if($!==_){i=o.stateNode,Hh(Eh.current);var et=null;switch(s){case"input":$=Ya(i,$),_=Ya(i,_),et=[];break;case"select":$=A$1({},$,{value:void 0}),_=A$1({},_,{value:void 0}),et=[];break;case"textarea":$=gb(i,$),_=gb(i,_),et=[];break;default:typeof $.onClick!="function"&&typeof _.onClick=="function"&&(i.onclick=Bf)}ub(s,_);var tt;s=null;for(st in $)if(!_.hasOwnProperty(st)&&$.hasOwnProperty(st)&&$[st]!=null)if(st==="style"){var j=$[st];for(tt in j)j.hasOwnProperty(tt)&&(s||(s={}),s[tt]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?et||(et=[]):(et=et||[]).push(st,null));for(st in _){var it=_[st];if(j=$!=null?$[st]:void 0,_.hasOwnProperty(st)&&it!==j&&(it!=null||j!=null))if(st==="style")if(j){for(tt in j)!j.hasOwnProperty(tt)||it&&it.hasOwnProperty(tt)||(s||(s={}),s[tt]="");for(tt in it)it.hasOwnProperty(tt)&&j[tt]!==it[tt]&&(s||(s={}),s[tt]=it[tt])}else s||(et||(et=[]),et.push(st,s)),s=it;else st==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,j=j?j.__html:void 0,it!=null&&j!==it&&(et=et||[]).push(st,it)):st==="children"?typeof it!="string"&&typeof it!="number"||(et=et||[]).push(st,""+it):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ea.hasOwnProperty(st)?(it!=null&&st==="onScroll"&&D("scroll",i),et||j===it||(et=[])):(et=et||[]).push(st,it))}s&&(et=et||[]).push("style",s);var st=et;(o.updateQueue=st)&&(o.flags|=4)}};Dj=function(i,o,s,_){s!==_&&(o.flags|=4)};function Ej(i,o){if(!I)switch(i.tailMode){case"hidden":o=i.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var _=null;s!==null;)s.alternate!==null&&(_=s),s=s.sibling;_===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:_.sibling=null}}function S(i){var o=i.alternate!==null&&i.alternate.child===i.child,s=0,_=0;if(o)for(var $=i.child;$!==null;)s|=$.lanes|$.childLanes,_|=$.subtreeFlags&14680064,_|=$.flags&14680064,$.return=i,$=$.sibling;else for($=i.child;$!==null;)s|=$.lanes|$.childLanes,_|=$.subtreeFlags,_|=$.flags,$.return=i,$=$.sibling;return i.subtreeFlags|=_,i.childLanes=s,o}function Fj(i,o,s){var _=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(o),null;case 1:return Zf(o.type)&&$f(),S(o),null;case 3:return _=o.stateNode,Jh(),E(Wf),E(H),Oh(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(i===null||i.child===null)&&(Gg(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,o),S(o),null;case 5:Lh(o);var $=Hh(Gh.current);if(s=o.type,i!==null&&o.stateNode!=null)Cj(i,o,s,_,$),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!_){if(o.stateNode===null)throw Error(p$1(166));return S(o),null}if(i=Hh(Eh.current),Gg(o)){_=o.stateNode,s=o.type;var et=o.memoizedProps;switch(_[Of]=o,_[Pf]=et,i=(o.mode&1)!==0,s){case"dialog":D("cancel",_),D("close",_);break;case"iframe":case"object":case"embed":D("load",_);break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],_);break;case"source":D("error",_);break;case"img":case"image":case"link":D("error",_),D("load",_);break;case"details":D("toggle",_);break;case"input":Za(_,et),D("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!et.multiple},D("invalid",_);break;case"textarea":hb(_,et),D("invalid",_)}ub(s,et),$=null;for(var tt in et)if(et.hasOwnProperty(tt)){var j=et[tt];tt==="children"?typeof j=="string"?_.textContent!==j&&(et.suppressHydrationWarning!==!0&&Af(_.textContent,j,i),$=["children",j]):typeof j=="number"&&_.textContent!==""+j&&(et.suppressHydrationWarning!==!0&&Af(_.textContent,j,i),$=["children",""+j]):ea.hasOwnProperty(tt)&&j!=null&&tt==="onScroll"&&D("scroll",_)}switch(s){case"input":Va(_),db(_,et,!0);break;case"textarea":Va(_),jb(_);break;case"select":case"option":break;default:typeof et.onClick=="function"&&(_.onclick=Bf)}_=$,o.updateQueue=_,_!==null&&(o.flags|=4)}else{tt=$.nodeType===9?$:$.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=tt.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof _.is=="string"?i=tt.createElement(s,{is:_.is}):(i=tt.createElement(s),s==="select"&&(tt=i,_.multiple?tt.multiple=!0:_.size&&(tt.size=_.size))):i=tt.createElementNS(i,s),i[Of]=o,i[Pf]=_,Aj(i,o,!1,!1),o.stateNode=i;e:{switch(tt=vb(s,_),s){case"dialog":D("cancel",i),D("close",i),$=_;break;case"iframe":case"object":case"embed":D("load",i),$=_;break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],i);$=_;break;case"source":D("error",i),$=_;break;case"img":case"image":case"link":D("error",i),D("load",i),$=_;break;case"details":D("toggle",i),$=_;break;case"input":Za(i,_),$=Ya(i,_),D("invalid",i);break;case"option":$=_;break;case"select":i._wrapperState={wasMultiple:!!_.multiple},$=A$1({},_,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,_),$=gb(i,_),D("invalid",i);break;default:$=_}ub(s,$),j=$;for(et in j)if(j.hasOwnProperty(et)){var it=j[et];et==="style"?sb(i,it):et==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,it!=null&&nb(i,it)):et==="children"?typeof it=="string"?(s!=="textarea"||it!=="")&&ob(i,it):typeof it=="number"&&ob(i,""+it):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(ea.hasOwnProperty(et)?it!=null&&et==="onScroll"&&D("scroll",i):it!=null&&ta(i,et,it,tt))}switch(s){case"input":Va(i),db(i,_,!1);break;case"textarea":Va(i),jb(i);break;case"option":_.value!=null&&i.setAttribute("value",""+Sa(_.value));break;case"select":i.multiple=!!_.multiple,et=_.value,et!=null?fb(i,!!_.multiple,et,!1):_.defaultValue!=null&&fb(i,!!_.multiple,_.defaultValue,!0);break;default:typeof $.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S(o),null;case 6:if(i&&o.stateNode!=null)Dj(i,o,i.memoizedProps,_);else{if(typeof _!="string"&&o.stateNode===null)throw Error(p$1(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(_=o.stateNode,s=o.memoizedProps,_[Of]=o,(et=_.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(_.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(_.nodeValue,s,(i.mode&1)!==0)}et&&(o.flags|=4)}else _=(s.nodeType===9?s:s.ownerDocument).createTextNode(_),_[Of]=o,o.stateNode=_}return S(o),null;case 13:if(E(M),_=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,et=!1;else if(et=Gg(o),_!==null&&_.dehydrated!==null){if(i===null){if(!et)throw Error(p$1(318));if(et=o.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$1(317));et[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S(o),et=!1}else zg!==null&&(Gj(zg),zg=null),et=!0;if(!et)return o.flags&65536?o:null}return o.flags&128?(o.lanes=s,o):(_=_!==null,_!==(i!==null&&i.memoizedState!==null)&&_&&(o.child.flags|=8192,o.mode&1&&(i===null||M.current&1?T===0&&(T=3):uj())),o.updateQueue!==null&&(o.flags|=4),S(o),null);case 4:return Jh(),Bj(i,o),i===null&&sf(o.stateNode.containerInfo),S(o),null;case 10:return Rg(o.type._context),S(o),null;case 17:return Zf(o.type)&&$f(),S(o),null;case 19:if(E(M),et=o.memoizedState,et===null)return S(o),null;if(_=(o.flags&128)!==0,tt=et.rendering,tt===null)if(_)Ej(et,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(tt=Mh(i),tt!==null){for(o.flags|=128,Ej(et,!1),_=tt.updateQueue,_!==null&&(o.updateQueue=_,o.flags|=4),o.subtreeFlags=0,_=s,s=o.child;s!==null;)et=s,i=_,et.flags&=14680066,tt=et.alternate,tt===null?(et.childLanes=0,et.lanes=i,et.child=null,et.subtreeFlags=0,et.memoizedProps=null,et.memoizedState=null,et.updateQueue=null,et.dependencies=null,et.stateNode=null):(et.childLanes=tt.childLanes,et.lanes=tt.lanes,et.child=tt.child,et.subtreeFlags=0,et.deletions=null,et.memoizedProps=tt.memoizedProps,et.memoizedState=tt.memoizedState,et.updateQueue=tt.updateQueue,et.type=tt.type,i=tt.dependencies,et.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(M,M.current&1|2),o.child}i=i.sibling}et.tail!==null&&B()>Hj&&(o.flags|=128,_=!0,Ej(et,!1),o.lanes=4194304)}else{if(!_)if(i=Mh(tt),i!==null){if(o.flags|=128,_=!0,s=i.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),Ej(et,!0),et.tail===null&&et.tailMode==="hidden"&&!tt.alternate&&!I)return S(o),null}else 2*B()-et.renderingStartTime>Hj&&s!==1073741824&&(o.flags|=128,_=!0,Ej(et,!1),o.lanes=4194304);et.isBackwards?(tt.sibling=o.child,o.child=tt):(s=et.last,s!==null?s.sibling=tt:o.child=tt,et.last=tt)}return et.tail!==null?(o=et.tail,et.rendering=o,et.tail=o.sibling,et.renderingStartTime=B(),o.sibling=null,s=M.current,G(M,_?s&1|2:s&1),o):(S(o),null);case 22:case 23:return Ij(),_=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==_&&(o.flags|=8192),_&&o.mode&1?gj&1073741824&&(S(o),o.subtreeFlags&6&&(o.flags|=8192)):S(o),null;case 24:return null;case 25:return null}throw Error(p$1(156,o.tag))}function Jj(i,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Jh(),E(Wf),E(H),Oh(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E(M),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(p$1(340));Ig()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,o){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(_){W(i,o,_)}else s.current=null}function Nj(i,o,s){try{s()}catch(_){W(i,o,_)}}var Oj=!1;function Pj(i,o){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var _=s.getSelection&&s.getSelection();if(_&&_.rangeCount!==0){s=_.anchorNode;var $=_.anchorOffset,et=_.focusNode;_=_.focusOffset;try{s.nodeType,et.nodeType}catch{s=null;break e}var tt=0,j=-1,it=-1,st=0,ht=0,_t=i,gt=null;t:for(;;){for(var ft;_t!==s||$!==0&&_t.nodeType!==3||(j=tt+$),_t!==et||_!==0&&_t.nodeType!==3||(it=tt+_),_t.nodeType===3&&(tt+=_t.nodeValue.length),(ft=_t.firstChild)!==null;)gt=_t,_t=ft;for(;;){if(_t===i)break t;if(gt===s&&++st===$&&(j=tt),gt===et&&++ht===_&&(it=tt),(ft=_t.nextSibling)!==null)break;_t=gt,gt=_t.parentNode}_t=ft}s=j===-1||it===-1?null:{start:j,end:it}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=o;V!==null;)if(o=V,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,V=i;else for(;V!==null;){o=V;try{var ut=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var yt=ut.memoizedProps,Et=ut.memoizedState,Mt=o.stateNode,Ft=Mt.getSnapshotBeforeUpdate(o.elementType===o.type?yt:Lg(o.type,yt),Et);Mt.__reactInternalSnapshotBeforeUpdate=Ft}break;case 3:var Rt=o.stateNode.containerInfo;Rt.nodeType===1?Rt.textContent="":Rt.nodeType===9&&Rt.documentElement&&Rt.removeChild(Rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Ot){W(o,o.return,Ot)}if(i=o.sibling,i!==null){i.return=o.return,V=i;break}V=o.return}return ut=Oj,Oj=!1,ut}function Qj(i,o,s){var _=o.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var $=_=_.next;do{if(($.tag&i)===i){var et=$.destroy;$.destroy=void 0,et!==void 0&&Nj(o,s,et)}$=$.next}while($!==_)}}function Rj(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&i)===i){var _=s.create;s.destroy=_()}s=s.next}while(s!==o)}}function Sj(i){var o=i.ref;if(o!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof o=="function"?o(i):o.current=i}}function Tj(i){var o=i.alternate;o!==null&&(i.alternate=null,Tj(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,o,s){var _=i.tag;if(_===5||_===6)i=i.stateNode,o?s.nodeType===8?s.parentNode.insertBefore(i,o):s.insertBefore(i,o):(s.nodeType===8?(o=s.parentNode,o.insertBefore(i,s)):(o=s,o.appendChild(i)),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=Bf));else if(_!==4&&(i=i.child,i!==null))for(Wj(i,o,s),i=i.sibling;i!==null;)Wj(i,o,s),i=i.sibling}function Xj(i,o,s){var _=i.tag;if(_===5||_===6)i=i.stateNode,o?s.insertBefore(i,o):s.appendChild(i);else if(_!==4&&(i=i.child,i!==null))for(Xj(i,o,s),i=i.sibling;i!==null;)Xj(i,o,s),i=i.sibling}var X=null,Yj=!1;function Zj(i,o,s){for(s=s.child;s!==null;)ak(i,o,s),s=s.sibling}function ak(i,o,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Mj(s,o);case 6:var _=X,$=Yj;X=null,Zj(i,o,s),X=_,Yj=$,X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X,s.stateNode));break;case 4:_=X,$=Yj,X=s.stateNode.containerInfo,Yj=!0,Zj(i,o,s),X=_,Yj=$;break;case 0:case 11:case 14:case 15:if(!U&&(_=s.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){$=_=_.next;do{var et=$,tt=et.destroy;et=et.tag,tt!==void 0&&(et&2||et&4)&&Nj(s,o,tt),$=$.next}while($!==_)}Zj(i,o,s);break;case 1:if(!U&&(Mj(s,o),_=s.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=s.memoizedProps,_.state=s.memoizedState,_.componentWillUnmount()}catch(j){W(s,o,j)}Zj(i,o,s);break;case 21:Zj(i,o,s);break;case 22:s.mode&1?(U=(_=U)||s.memoizedState!==null,Zj(i,o,s),U=_):Zj(i,o,s);break;default:Zj(i,o,s)}}function bk(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Lj),o.forEach(function(_){var $=ck.bind(null,i,_);s.has(_)||(s.add(_),_.then($,$))})}}function dk(i,o){var s=o.deletions;if(s!==null)for(var _=0;_<s.length;_++){var $=s[_];try{var et=i,tt=o,j=tt;e:for(;j!==null;){switch(j.tag){case 5:X=j.stateNode,Yj=!1;break e;case 3:X=j.stateNode.containerInfo,Yj=!0;break e;case 4:X=j.stateNode.containerInfo,Yj=!0;break e}j=j.return}if(X===null)throw Error(p$1(160));ak(et,tt,$),X=null,Yj=!1;var it=$.alternate;it!==null&&(it.return=null),$.return=null}catch(st){W($,o,st)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,i),o=o.sibling}function ek(i,o){var s=i.alternate,_=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(o,i),fk(i),_&4){try{Qj(3,i,i.return),Rj(3,i)}catch(yt){W(i,i.return,yt)}try{Qj(5,i,i.return)}catch(yt){W(i,i.return,yt)}}break;case 1:dk(o,i),fk(i),_&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(o,i),fk(i),_&512&&s!==null&&Mj(s,s.return),i.flags&32){var $=i.stateNode;try{ob($,"")}catch(yt){W(i,i.return,yt)}}if(_&4&&($=i.stateNode,$!=null)){var et=i.memoizedProps,tt=s!==null?s.memoizedProps:et,j=i.type,it=i.updateQueue;if(i.updateQueue=null,it!==null)try{j==="input"&&et.type==="radio"&&et.name!=null&&ab($,et),vb(j,tt);var st=vb(j,et);for(tt=0;tt<it.length;tt+=2){var ht=it[tt],_t=it[tt+1];ht==="style"?sb($,_t):ht==="dangerouslySetInnerHTML"?nb($,_t):ht==="children"?ob($,_t):ta($,ht,_t,st)}switch(j){case"input":bb($,et);break;case"textarea":ib($,et);break;case"select":var gt=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!et.multiple;var ft=et.value;ft!=null?fb($,!!et.multiple,ft,!1):gt!==!!et.multiple&&(et.defaultValue!=null?fb($,!!et.multiple,et.defaultValue,!0):fb($,!!et.multiple,et.multiple?[]:"",!1))}$[Pf]=et}catch(yt){W(i,i.return,yt)}}break;case 6:if(dk(o,i),fk(i),_&4){if(i.stateNode===null)throw Error(p$1(162));$=i.stateNode,et=i.memoizedProps;try{$.nodeValue=et}catch(yt){W(i,i.return,yt)}}break;case 3:if(dk(o,i),fk(i),_&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(yt){W(i,i.return,yt)}break;case 4:dk(o,i),fk(i);break;case 13:dk(o,i),fk(i),$=i.child,$.flags&8192&&(et=$.memoizedState!==null,$.stateNode.isHidden=et,!et||$.alternate!==null&&$.alternate.memoizedState!==null||(gk=B())),_&4&&bk(i);break;case 22:if(ht=s!==null&&s.memoizedState!==null,i.mode&1?(U=(st=U)||ht,dk(o,i),U=st):dk(o,i),fk(i),_&8192){if(st=i.memoizedState!==null,(i.stateNode.isHidden=st)&&!ht&&i.mode&1)for(V=i,ht=i.child;ht!==null;){for(_t=V=ht;V!==null;){switch(gt=V,ft=gt.child,gt.tag){case 0:case 11:case 14:case 15:Qj(4,gt,gt.return);break;case 1:Mj(gt,gt.return);var ut=gt.stateNode;if(typeof ut.componentWillUnmount=="function"){_=gt,s=gt.return;try{o=_,ut.props=o.memoizedProps,ut.state=o.memoizedState,ut.componentWillUnmount()}catch(yt){W(_,s,yt)}}break;case 5:Mj(gt,gt.return);break;case 22:if(gt.memoizedState!==null){hk(_t);continue}}ft!==null?(ft.return=gt,V=ft):hk(_t)}ht=ht.sibling}e:for(ht=null,_t=i;;){if(_t.tag===5){if(ht===null){ht=_t;try{$=_t.stateNode,st?(et=$.style,typeof et.setProperty=="function"?et.setProperty("display","none","important"):et.display="none"):(j=_t.stateNode,it=_t.memoizedProps.style,tt=it!=null&&it.hasOwnProperty("display")?it.display:null,j.style.display=rb("display",tt))}catch(yt){W(i,i.return,yt)}}}else if(_t.tag===6){if(ht===null)try{_t.stateNode.nodeValue=st?"":_t.memoizedProps}catch(yt){W(i,i.return,yt)}}else if((_t.tag!==22&&_t.tag!==23||_t.memoizedState===null||_t===i)&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===i)break e;for(;_t.sibling===null;){if(_t.return===null||_t.return===i)break e;ht===_t&&(ht=null),_t=_t.return}ht===_t&&(ht=null),_t.sibling.return=_t.return,_t=_t.sibling}}break;case 19:dk(o,i),fk(i),_&4&&bk(i);break;case 21:break;default:dk(o,i),fk(i)}}function fk(i){var o=i.flags;if(o&2){try{e:{for(var s=i.return;s!==null;){if(Uj(s)){var _=s;break e}s=s.return}throw Error(p$1(160))}switch(_.tag){case 5:var $=_.stateNode;_.flags&32&&(ob($,""),_.flags&=-33);var et=Vj(i);Xj(i,et,$);break;case 3:case 4:var tt=_.stateNode.containerInfo,j=Vj(i);Wj(i,j,tt);break;default:throw Error(p$1(161))}}catch(it){W(i,i.return,it)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ik(i,o,s){V=i,jk(i)}function jk(i,o,s){for(var _=(i.mode&1)!==0;V!==null;){var $=V,et=$.child;if($.tag===22&&_){var tt=$.memoizedState!==null||Kj;if(!tt){var j=$.alternate,it=j!==null&&j.memoizedState!==null||U;j=Kj;var st=U;if(Kj=tt,(U=it)&&!st)for(V=$;V!==null;)tt=V,it=tt.child,tt.tag===22&&tt.memoizedState!==null?kk($):it!==null?(it.return=tt,V=it):kk($);for(;et!==null;)V=et,jk(et),et=et.sibling;V=$,Kj=j,U=st}lk(i)}else $.subtreeFlags&8772&&et!==null?(et.return=$,V=et):lk(i)}}function lk(i){for(;V!==null;){var o=V;if(o.flags&8772){var s=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U||Rj(5,o);break;case 1:var _=o.stateNode;if(o.flags&4&&!U)if(s===null)_.componentDidMount();else{var $=o.elementType===o.type?s.memoizedProps:Lg(o.type,s.memoizedProps);_.componentDidUpdate($,s.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var et=o.updateQueue;et!==null&&ih(o,et,_);break;case 3:var tt=o.updateQueue;if(tt!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}ih(o,tt,s)}break;case 5:var j=o.stateNode;if(s===null&&o.flags&4){s=j;var it=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":it.autoFocus&&s.focus();break;case"img":it.src&&(s.src=it.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var st=o.alternate;if(st!==null){var ht=st.memoizedState;if(ht!==null){var _t=ht.dehydrated;_t!==null&&bd(_t)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||o.flags&512&&Sj(o)}catch(gt){W(o,o.return,gt)}}if(o===i){V=null;break}if(s=o.sibling,s!==null){s.return=o.return,V=s;break}V=o.return}}function hk(i){for(;V!==null;){var o=V;if(o===i){V=null;break}var s=o.sibling;if(s!==null){s.return=o.return,V=s;break}V=o.return}}function kk(i){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var s=o.return;try{Rj(4,o)}catch(it){W(o,s,it)}break;case 1:var _=o.stateNode;if(typeof _.componentDidMount=="function"){var $=o.return;try{_.componentDidMount()}catch(it){W(o,$,it)}}var et=o.return;try{Sj(o)}catch(it){W(o,et,it)}break;case 5:var tt=o.return;try{Sj(o)}catch(it){W(o,tt,it)}}}catch(it){W(o,o.return,it)}if(o===i){V=null;break}var j=o.sibling;if(j!==null){j.return=o.return,V=j;break}V=o.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,o,s,_){if(50<zk)throw zk=0,Ak=null,Error(p$1(185));Ac(i,s,_),(!(K&2)||i!==R)&&(i===R&&(!(K&2)&&(rk|=s),T===4&&Dk(i,Z)),Ek(i,_),s===1&&K===0&&!(o.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(i,o){var s=i.callbackNode;wc(i,o);var _=uc(i,i===R?Z:0);if(_===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(o=_&-_,i.callbackPriority!==o){if(s!=null&&bc(s),o===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(_)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Gk(s,Hk.bind(null,i))}i.callbackPriority=o,i.callbackNode=s}}function Hk(i,o){if(Bk=-1,Ck=0,K&6)throw Error(p$1(327));var s=i.callbackNode;if(Ik()&&i.callbackNode!==s)return null;var _=uc(i,i===R?Z:0);if(_===0)return null;if(_&30||_&i.expiredLanes||o)o=Jk(i,_);else{o=_;var $=K;K|=2;var et=Kk();(R!==i||Z!==o)&&(vk=null,Hj=B()+500,Lk(i,o));do try{Mk();break}catch(j){Nk(i,j)}while(1);Qg(),nk.current=et,K=$,Y!==null?o=0:(R=null,Z=0,o=T)}if(o!==0){if(o===2&&($=xc(i),$!==0&&(_=$,o=Ok(i,$))),o===1)throw s=qk,Lk(i,0),Dk(i,_),Ek(i,B()),s;if(o===6)Dk(i,_);else{if($=i.current.alternate,!(_&30)&&!Pk($)&&(o=Jk(i,_),o===2&&(et=xc(i),et!==0&&(_=et,o=Ok(i,et))),o===1))throw s=qk,Lk(i,0),Dk(i,_),Ek(i,B()),s;switch(i.finishedWork=$,i.finishedLanes=_,o){case 0:case 1:throw Error(p$1(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,_),(_&130023424)===_&&(o=gk+500-B(),10<o)){if(uc(i,0)!==0)break;if($=i.suspendedLanes,($&_)!==_){L(),i.pingedLanes|=i.suspendedLanes&$;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),o);break}Qk(i,uk,vk);break;case 4:if(Dk(i,_),(_&4194240)===_)break;for(o=i.eventTimes,$=-1;0<_;){var tt=31-oc(_);et=1<<tt,tt=o[tt],tt>$&&($=tt),_&=~et}if(_=$,_=B()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*mk(_/1960))-_,10<_){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),_);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p$1(329))}}}return Ek(i,B()),i.callbackNode===s?Hk.bind(null,i):null}function Ok(i,o){var s=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,o).flags|=256),i=Jk(i,o),i!==2&&(o=uk,uk=s,o!==null&&Gj(o)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var o=i;;){if(o.flags&16384){var s=o.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var _=0;_<s.length;_++){var $=s[_],et=$.getSnapshot;$=$.value;try{if(!He(et(),$))return!1}catch{return!1}}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(i,o){for(o&=~sk,o&=~rk,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var s=31-oc(o),_=1<<s;i[s]=-1,o&=~_}}function Fk(i){if(K&6)throw Error(p$1(327));Ik();var o=uc(i,0);if(!(o&1))return Ek(i,B()),null;var s=Jk(i,o);if(i.tag!==0&&s===2){var _=xc(i);_!==0&&(o=_,s=Ok(i,_))}if(s===1)throw s=qk,Lk(i,0),Dk(i,o),Ek(i,B()),s;if(s===6)throw Error(p$1(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Qk(i,uk,vk),Ek(i,B()),null}function Rk(i,o){var s=K;K|=1;try{return i(o)}finally{K=s,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var o=K;K|=1;var s=pk.transition,_=C;try{if(pk.transition=null,C=1,i)return i()}finally{C=_,pk.transition=s,K=o,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(i,o){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var _=s;switch(wg(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(_);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(_.type._context);break;case 22:case 23:Ij()}s=s.return}if(R=i,Y=i=wh(i.current,null),Z=gj=o,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(s=Wg[o],_=s.interleaved,_!==null){s.interleaved=null;var $=_.next,et=s.pending;if(et!==null){var tt=et.next;et.next=$,_.next=tt}s.pending=_}Wg=null}return i}function Nk(i,o){do{var s=Y;try{if(Qg(),Ph.current=ai,Sh){for(var _=N.memoizedState;_!==null;){var $=_.queue;$!==null&&($.pending=null),_=_.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T=1,qk=o,Y=null;break}e:{var et=i,tt=s.return,j=s,it=o;if(o=Z,j.flags|=32768,it!==null&&typeof it=="object"&&typeof it.then=="function"){var st=it,ht=j,_t=ht.tag;if(!(ht.mode&1)&&(_t===0||_t===11||_t===15)){var gt=ht.alternate;gt?(ht.updateQueue=gt.updateQueue,ht.memoizedState=gt.memoizedState,ht.lanes=gt.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var ft=Vi(tt);if(ft!==null){ft.flags&=-257,Wi(ft,tt,j,et,o),ft.mode&1&&Ti(et,st,o),o=ft,it=st;var ut=o.updateQueue;if(ut===null){var yt=new Set;yt.add(it),o.updateQueue=yt}else ut.add(it);break e}else{if(!(o&1)){Ti(et,st,o),uj();break e}it=Error(p$1(426))}}else if(I&&j.mode&1){var Et=Vi(tt);if(Et!==null){!(Et.flags&65536)&&(Et.flags|=256),Wi(Et,tt,j,et,o),Jg(Ki(it,j));break e}}et=it=Ki(it,j),T!==4&&(T=2),tk===null?tk=[et]:tk.push(et),et=tt;do{switch(et.tag){case 3:et.flags|=65536,o&=-o,et.lanes|=o;var Mt=Oi(et,it,o);fh(et,Mt);break e;case 1:j=it;var Ft=et.type,Rt=et.stateNode;if(!(et.flags&128)&&(typeof Ft.getDerivedStateFromError=="function"||Rt!==null&&typeof Rt.componentDidCatch=="function"&&(Si===null||!Si.has(Rt)))){et.flags|=65536,o&=-o,et.lanes|=o;var Ot=Ri(et,j,o);fh(et,Ot);break e}}et=et.return}while(et!==null)}Tk(s)}catch(pt){o=pt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(1)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(i,o){var s=K;K|=2;var _=Kk();(R!==i||Z!==o)&&(vk=null,Lk(i,o));do try{Uk();break}catch($){Nk(i,$)}while(1);if(Qg(),K=s,nk.current=_,Y!==null)throw Error(p$1(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(i){var o=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,o===null?Tk(i):Y=o,ok.current=null}function Tk(i){var o=i;do{var s=o.alternate;if(i=o.return,o.flags&32768){if(s=Jj(s,o),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(s=Fj(s,o,gj),s!==null){Y=s;return}if(o=o.sibling,o!==null){Y=o;return}Y=o=i}while(o!==null);T===0&&(T=5)}function Qk(i,o,s){var _=C,$=pk.transition;try{pk.transition=null,C=1,Xk(i,o,s,_)}finally{pk.transition=$,C=_}return null}function Xk(i,o,s,_){do Ik();while(xk!==null);if(K&6)throw Error(p$1(327));s=i.finishedWork;var $=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p$1(177));i.callbackNode=null,i.callbackPriority=0;var et=s.lanes|s.childLanes;if(Bc(i,et),i===R&&(Y=R=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),et=(s.flags&15990)!==0,s.subtreeFlags&15990||et){et=pk.transition,pk.transition=null;var tt=C;C=1;var j=K;K|=4,ok.current=null,Pj(i,s),ek(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,ik(s),dc(),K=j,C=tt,pk.transition=et}else i.current=s;if(wk&&(wk=!1,xk=i,yk=$),et=i.pendingLanes,et===0&&(Si=null),mc(s.stateNode),Ek(i,B()),o!==null)for(_=i.onRecoverableError,s=0;s<o.length;s++)$=o[s],_($.value,{componentStack:$.stack,digest:$.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),et=i.pendingLanes,et&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),o=pk.transition,s=C;try{if(pk.transition=null,C=16>i?16:i,xk===null)var _=!1;else{if(i=xk,xk=null,yk=0,K&6)throw Error(p$1(331));var $=K;for(K|=4,V=i.current;V!==null;){var et=V,tt=et.child;if(V.flags&16){var j=et.deletions;if(j!==null){for(var it=0;it<j.length;it++){var st=j[it];for(V=st;V!==null;){var ht=V;switch(ht.tag){case 0:case 11:case 15:Qj(8,ht,et)}var _t=ht.child;if(_t!==null)_t.return=ht,V=_t;else for(;V!==null;){ht=V;var gt=ht.sibling,ft=ht.return;if(Tj(ht),ht===st){V=null;break}if(gt!==null){gt.return=ft,V=gt;break}V=ft}}}var ut=et.alternate;if(ut!==null){var yt=ut.child;if(yt!==null){ut.child=null;do{var Et=yt.sibling;yt.sibling=null,yt=Et}while(yt!==null)}}V=et}}if(et.subtreeFlags&2064&&tt!==null)tt.return=et,V=tt;else e:for(;V!==null;){if(et=V,et.flags&2048)switch(et.tag){case 0:case 11:case 15:Qj(9,et,et.return)}var Mt=et.sibling;if(Mt!==null){Mt.return=et.return,V=Mt;break e}V=et.return}}var Ft=i.current;for(V=Ft;V!==null;){tt=V;var Rt=tt.child;if(tt.subtreeFlags&2064&&Rt!==null)Rt.return=tt,V=Rt;else e:for(tt=Ft;V!==null;){if(j=V,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Rj(9,j)}}catch(pt){W(j,j.return,pt)}if(j===tt){V=null;break e}var Ot=j.sibling;if(Ot!==null){Ot.return=j.return,V=Ot;break e}V=j.return}}if(K=$,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}_=!0}return _}finally{C=s,pk.transition=o}}return!1}function Yk(i,o,s){o=Ki(s,o),o=Oi(i,o,1),i=dh(i,o,1),o=L(),i!==null&&(Ac(i,1,o),Ek(i,o))}function W(i,o,s){if(i.tag===3)Yk(i,i,s);else for(;o!==null;){if(o.tag===3){Yk(o,i,s);break}else if(o.tag===1){var _=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Si===null||!Si.has(_))){i=Ki(s,i),i=Ri(o,i,1),o=dh(o,i,1),i=L(),o!==null&&(Ac(o,1,i),Ek(o,i));break}}o=o.return}}function Ui(i,o,s){var _=i.pingCache;_!==null&&_.delete(o),o=L(),i.pingedLanes|=i.suspendedLanes&s,R===i&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(i,0):sk|=s),Ek(i,o)}function Zk(i,o){o===0&&(i.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var s=L();i=Zg(i,o),i!==null&&(Ac(i,o,s),Ek(i,s))}function vj(i){var o=i.memoizedState,s=0;o!==null&&(s=o.retryLane),Zk(i,s)}function ck(i,o){var s=0;switch(i.tag){case 13:var _=i.stateNode,$=i.memoizedState;$!==null&&(s=$.retryLane);break;case 19:_=i.stateNode;break;default:throw Error(p$1(314))}_!==null&&_.delete(o),Zk(i,s)}var Wk;Wk=function(i,o,s){if(i!==null)if(i.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&s)&&!(o.flags&128))return Ug=!1,zj(i,o,s);Ug=!!(i.flags&131072)}else Ug=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var _=o.type;jj(i,o),i=o.pendingProps;var $=Yf(o,H.current);Tg(o,s),$=Xh(null,o,_,i,$,s);var et=bi();return o.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(_)?(et=!0,cg(o)):et=!1,o.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,ah(o),$.updater=nh,o.stateNode=$,$._reactInternals=o,rh(o,_,i,s),o=kj(null,o,_,!0,et,s)):(o.tag=0,I&&et&&vg(o),Yi(null,o,$,s),o=o.child),o;case 16:_=o.elementType;e:{switch(jj(i,o),i=o.pendingProps,$=_._init,_=$(_._payload),o.type=_,$=o.tag=$k(_),i=Lg(_,i),$){case 0:o=dj(null,o,_,i,s);break e;case 1:o=ij(null,o,_,i,s);break e;case 11:o=Zi(null,o,_,i,s);break e;case 14:o=aj(null,o,_,Lg(_.type,i),s);break e}throw Error(p$1(306,_,""))}return o;case 0:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),dj(i,o,_,$,s);case 1:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),ij(i,o,_,$,s);case 3:e:{if(lj(o),i===null)throw Error(p$1(387));_=o.pendingProps,et=o.memoizedState,$=et.element,bh(i,o),gh(o,_,null,s);var tt=o.memoizedState;if(_=tt.element,et.isDehydrated)if(et={element:_,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},o.updateQueue.baseState=et,o.memoizedState=et,o.flags&256){$=Ki(Error(p$1(423)),o),o=mj(i,o,_,s,$);break e}else if(_!==$){$=Ki(Error(p$1(424)),o),o=mj(i,o,_,s,$);break e}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,s=Ch(o,null,_,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),_===$){o=$i(i,o,s);break e}Yi(i,o,_,s)}o=o.child}return o;case 5:return Kh(o),i===null&&Eg(o),_=o.type,$=o.pendingProps,et=i!==null?i.memoizedProps:null,tt=$.children,Ef(_,$)?tt=null:et!==null&&Ef(_,et)&&(o.flags|=32),hj(i,o),Yi(i,o,tt,s),o.child;case 6:return i===null&&Eg(o),null;case 13:return pj(i,o,s);case 4:return Ih(o,o.stateNode.containerInfo),_=o.pendingProps,i===null?o.child=Bh(o,null,_,s):Yi(i,o,_,s),o.child;case 11:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),Zi(i,o,_,$,s);case 7:return Yi(i,o,o.pendingProps,s),o.child;case 8:return Yi(i,o,o.pendingProps.children,s),o.child;case 12:return Yi(i,o,o.pendingProps.children,s),o.child;case 10:e:{if(_=o.type._context,$=o.pendingProps,et=o.memoizedProps,tt=$.value,G(Mg,_._currentValue),_._currentValue=tt,et!==null)if(He(et.value,tt)){if(et.children===$.children&&!Wf.current){o=$i(i,o,s);break e}}else for(et=o.child,et!==null&&(et.return=o);et!==null;){var j=et.dependencies;if(j!==null){tt=et.child;for(var it=j.firstContext;it!==null;){if(it.context===_){if(et.tag===1){it=ch(-1,s&-s),it.tag=2;var st=et.updateQueue;if(st!==null){st=st.shared;var ht=st.pending;ht===null?it.next=it:(it.next=ht.next,ht.next=it),st.pending=it}}et.lanes|=s,it=et.alternate,it!==null&&(it.lanes|=s),Sg(et.return,s,o),j.lanes|=s;break}it=it.next}}else if(et.tag===10)tt=et.type===o.type?null:et.child;else if(et.tag===18){if(tt=et.return,tt===null)throw Error(p$1(341));tt.lanes|=s,j=tt.alternate,j!==null&&(j.lanes|=s),Sg(tt,s,o),tt=et.sibling}else tt=et.child;if(tt!==null)tt.return=et;else for(tt=et;tt!==null;){if(tt===o){tt=null;break}if(et=tt.sibling,et!==null){et.return=tt.return,tt=et;break}tt=tt.return}et=tt}Yi(i,o,$.children,s),o=o.child}return o;case 9:return $=o.type,_=o.pendingProps.children,Tg(o,s),$=Vg($),_=_($),o.flags|=1,Yi(i,o,_,s),o.child;case 14:return _=o.type,$=Lg(_,o.pendingProps),$=Lg(_.type,$),aj(i,o,_,$,s);case 15:return cj(i,o,o.type,o.pendingProps,s);case 17:return _=o.type,$=o.pendingProps,$=o.elementType===_?$:Lg(_,$),jj(i,o),o.tag=1,Zf(_)?(i=!0,cg(o)):i=!1,Tg(o,s),ph(o,_,$),rh(o,_,$,s),kj(null,o,_,!0,i,s);case 19:return yj(i,o,s);case 22:return ej(i,o,s)}throw Error(p$1(156,o.tag))};function Gk(i,o){return ac(i,o)}function al(i,o,s,_){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,o,s,_){return new al(i,o,s,_)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,o){var s=i.alternate;return s===null?(s=Bg(i.tag,o,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=o,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,o=i.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function yh(i,o,s,_,$,et){var tt=2;if(_=i,typeof i=="function")bj(i)&&(tt=1);else if(typeof i=="string")tt=5;else e:switch(i){case ya:return Ah(s.children,$,et,o);case za:tt=8,$|=8;break;case Aa:return i=Bg(12,s,o,$|2),i.elementType=Aa,i.lanes=et,i;case Ea:return i=Bg(13,s,o,$),i.elementType=Ea,i.lanes=et,i;case Fa:return i=Bg(19,s,o,$),i.elementType=Fa,i.lanes=et,i;case Ia:return qj(s,$,et,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:tt=10;break e;case Ca:tt=9;break e;case Da:tt=11;break e;case Ga:tt=14;break e;case Ha:tt=16,_=null;break e}throw Error(p$1(130,i==null?i:typeof i,""))}return o=Bg(tt,s,o,$),o.elementType=i,o.type=_,o.lanes=et,o}function Ah(i,o,s,_){return i=Bg(7,i,_,o),i.lanes=s,i}function qj(i,o,s,_){return i=Bg(22,i,_,o),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function xh(i,o,s){return i=Bg(6,i,null,o),i.lanes=s,i}function zh(i,o,s){return o=Bg(4,i.children!==null?i.children:[],i.key,o),o.lanes=s,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function bl(i,o,s,_,$){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=_,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function cl(i,o,s,_,$,et,tt,j,it){return i=new bl(i,o,s,j,it),o===1?(o=1,et===!0&&(o|=8)):o=0,et=Bg(3,null,null,o),i.current=et,et.stateNode=i,et.memoizedState={element:_,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(et),i}function dl(i,o,s){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:_==null?null:""+_,children:i,containerInfo:o,implementation:s}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p$1(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p$1(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,o)}return o}function fl(i,o,s,_,$,et,tt,j,it){return i=cl(s,_,!0,i,$,et,tt,j,it),i.context=el(null),s=i.current,_=L(),$=lh(s),et=ch(_,$),et.callback=o??null,dh(s,et,$),i.current.lanes=$,Ac(i,$,_),Ek(i,_),i}function gl(i,o,s,_){var $=o.current,et=L(),tt=lh($);return s=el(s),o.context===null?o.context=s:o.pendingContext=s,o=ch(et,tt),o.payload={element:i},_=_===void 0?null:_,_!==null&&(o.callback=_),i=dh($,o,tt),i!==null&&(mh(i,$,tt,et),eh(i,$,tt)),tt}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<o?s:o}}function jl(i,o){il(i,o),(i=i.alternate)&&il(i,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(p$1(409));gl(i,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Sk(function(){gl(null,i,null,null)}),o[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var o=Hc();i={blockedOn:null,target:i,priority:o};for(var s=0;s<Qc.length&&o!==0&&o<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,o,s,_,$){if($){if(typeof _=="function"){var et=_;_=function(){var st=hl(tt);et.call(st)}}var tt=fl(o,_,i,0,null,!1,!1,"",ql);return i._reactRootContainer=tt,i[uf]=tt.current,sf(i.nodeType===8?i.parentNode:i),Sk(),tt}for(;$=i.lastChild;)i.removeChild($);if(typeof _=="function"){var j=_;_=function(){var st=hl(it);j.call(st)}}var it=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=it,i[uf]=it.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(o,it,s,_)}),it}function sl(i,o,s,_,$){var et=s._reactRootContainer;if(et){var tt=et;if(typeof $=="function"){var j=$;$=function(){var it=hl(tt);j.call(it)}}gl(o,tt,i,$)}else tt=rl(s,o,i,$,_);return hl(tt)}Ec=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var s=tc(o.pendingLanes);s!==0&&(Cc(o,s|1),Ek(o,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var _=Zg(i,1);if(_!==null){var $=L();mh(_,i,1,$)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var o=Zg(i,134217728);if(o!==null){var s=L();mh(o,i,134217728,s)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var o=lh(i),s=Zg(i,o);if(s!==null){var _=L();mh(s,i,o,_)}jl(i,o)}};Hc=function(){return C};Ic=function(i,o){var s=C;try{return C=i,o()}finally{C=s}};yb=function(i,o,s){switch(o){case"input":if(bb(i,s),o=s.name,s.type==="radio"&&o!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<s.length;o++){var _=s[o];if(_!==i&&_.form===i.form){var $=Db(_);if(!$)throw Error(p$1(90));Wa(_),bb(_,$)}}}break;case"textarea":ib(i,s);break;case"select":o=s.value,o!=null&&fb(i,!!s.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,o){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$1(200));return dl(i,o,null,s)};reactDom_production_min.createRoot=function(i,o){if(!ol(i))throw Error(p$1(299));var s=!1,_="",$=ll;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(_=o.identifierPrefix),o.onRecoverableError!==void 0&&($=o.onRecoverableError)),o=cl(i,1,!1,null,null,s,!1,_,$),i[uf]=o.current,sf(i.nodeType===8?i.parentNode:i),new ml(o)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(p$1(188)):(i=Object.keys(i).join(","),Error(p$1(268,i)));return i=Zb(o),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,o,s){if(!pl(o))throw Error(p$1(200));return sl(null,i,o,!0,s)};reactDom_production_min.hydrateRoot=function(i,o,s){if(!ol(i))throw Error(p$1(405));var _=s!=null&&s.hydratedSources||null,$=!1,et="",tt=ll;if(s!=null&&(s.unstable_strictMode===!0&&($=!0),s.identifierPrefix!==void 0&&(et=s.identifierPrefix),s.onRecoverableError!==void 0&&(tt=s.onRecoverableError)),o=fl(o,null,i,1,s??null,$,!1,et,tt),i[uf]=o.current,sf(i),_)for(i=0;i<_.length;i++)s=_[i],$=s._getVersion,$=$(s._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[s,$]:o.mutableSourceEagerHydrationData.push(s,$);return new nl(o)};reactDom_production_min.render=function(i,o,s){if(!pl(o))throw Error(p$1(200));return sl(null,i,o,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p$1(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,o,s,_){if(!pl(s))throw Error(p$1(200));if(i==null||i._reactInternals===void 0)throw Error(p$1(38));return sl(i,o,s,!1,_)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(i){function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}o(),i.exports=reactDom_production_min})(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var mapboxGlExports={},mapboxGl={get exports(){return mapboxGlExports},set exports(i){mapboxGlExports=i}};(function(i,o){(function(s,_){i.exports=_()})(commonjsGlobal$1,function(){var s,_,$;function et(j,it){if(!s)s=it;else if(!_)_=it;else{var st="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+s+")(sharedChunk); ("+_+")(sharedChunk); self.onerror = null;",ht={};s(ht),$=it(ht),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&($.workerUrl=window.URL.createObjectURL(new Blob([st],{type:"text/javascript"})))}}et(["exports"],function(j){var it=typeof self<"u"?self:{},st="2.11.1";let ht;const _t={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(ht==null){const nt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ht={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):nt}catch{ht=nt}}return ht},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},gt={supported:!1,testSupport:function(nt){!yt&&ut&&(Et?Mt(nt):ft=nt)}};let ft,ut,yt=!1,Et=!1;function Mt(nt){const _e=nt.createTexture();nt.bindTexture(nt.TEXTURE_2D,_e);try{if(nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,nt.RGBA,nt.UNSIGNED_BYTE,ut),nt.isContextLost())return;gt.supported=!0}catch{}nt.deleteTexture(_e),yt=!0}it.document&&(ut=it.document.createElement("img"),ut.onload=function(){ft&&Mt(ft),ft=null,Et=!0},ut.onerror=function(){yt=!0,ft=null},ut.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ft="01";var Rt=Ot;function Ot(nt,_e,rt,at){this.cx=3*nt,this.bx=3*(rt-nt)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*_e,this.by=3*(at-_e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=nt,this.p1y=_e,this.p2x=rt,this.p2y=at}Ot.prototype={sampleCurveX:function(nt){return((this.ax*nt+this.bx)*nt+this.cx)*nt},sampleCurveY:function(nt){return((this.ay*nt+this.by)*nt+this.cy)*nt},sampleCurveDerivativeX:function(nt){return(3*this.ax*nt+2*this.bx)*nt+this.cx},solveCurveX:function(nt,_e){if(_e===void 0&&(_e=1e-6),nt<0)return 0;if(nt>1)return 1;for(var rt=nt,at=0;at<8;at++){var ct=this.sampleCurveX(rt)-nt;if(Math.abs(ct)<_e)return rt;var vt=this.sampleCurveDerivativeX(rt);if(Math.abs(vt)<1e-6)break;rt-=ct/vt}var At=0,Bt=1;for(rt=nt,at=0;at<20&&(ct=this.sampleCurveX(rt),!(Math.abs(ct-nt)<_e));at++)nt>ct?At=rt:Bt=rt,rt=.5*(Bt-At)+At;return rt},solve:function(nt,_e){return this.sampleCurveY(this.solveCurveX(nt,_e))}};var pt=Lt;function Lt(nt,_e){this.x=nt,this.y=_e}Lt.prototype={clone:function(){return new Lt(this.x,this.y)},add:function(nt){return this.clone()._add(nt)},sub:function(nt){return this.clone()._sub(nt)},multByPoint:function(nt){return this.clone()._multByPoint(nt)},divByPoint:function(nt){return this.clone()._divByPoint(nt)},mult:function(nt){return this.clone()._mult(nt)},div:function(nt){return this.clone()._div(nt)},rotate:function(nt){return this.clone()._rotate(nt)},rotateAround:function(nt,_e){return this.clone()._rotateAround(nt,_e)},matMult:function(nt){return this.clone()._matMult(nt)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(nt){return this.x===nt.x&&this.y===nt.y},dist:function(nt){return Math.sqrt(this.distSqr(nt))},distSqr:function(nt){var _e=nt.x-this.x,rt=nt.y-this.y;return _e*_e+rt*rt},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(nt){return Math.atan2(this.y-nt.y,this.x-nt.x)},angleWith:function(nt){return this.angleWithSep(nt.x,nt.y)},angleWithSep:function(nt,_e){return Math.atan2(this.x*_e-this.y*nt,this.x*nt+this.y*_e)},_matMult:function(nt){var _e=nt[2]*this.x+nt[3]*this.y;return this.x=nt[0]*this.x+nt[1]*this.y,this.y=_e,this},_add:function(nt){return this.x+=nt.x,this.y+=nt.y,this},_sub:function(nt){return this.x-=nt.x,this.y-=nt.y,this},_mult:function(nt){return this.x*=nt,this.y*=nt,this},_div:function(nt){return this.x/=nt,this.y/=nt,this},_multByPoint:function(nt){return this.x*=nt.x,this.y*=nt.y,this},_divByPoint:function(nt){return this.x/=nt.x,this.y/=nt.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var nt=this.y;return this.y=this.x,this.x=-nt,this},_rotate:function(nt){var _e=Math.cos(nt),rt=Math.sin(nt),at=rt*this.x+_e*this.y;return this.x=_e*this.x-rt*this.y,this.y=at,this},_rotateAround:function(nt,_e){var rt=Math.cos(nt),at=Math.sin(nt),ct=_e.y+at*(this.x-_e.x)+rt*(this.y-_e.y);return this.x=_e.x+rt*(this.x-_e.x)-at*(this.y-_e.y),this.y=ct,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Lt.convert=function(nt){return nt instanceof Lt?nt:Array.isArray(nt)?new Lt(nt[0],nt[1]):nt};const nn=Math.PI/180,on=180/Math.PI;function wt(nt){return nt*nn}function xt(nt){return nt*on}const Nt=[[0,0],[1,0],[1,1],[0,1]];function Tt(nt){if(nt<=0)return 0;if(nt>=1)return 1;const _e=nt*nt,rt=_e*nt;return 4*(nt<.5?rt:3*(nt-_e)+rt-.75)}function Vt(nt,_e,rt,at){const ct=new Rt(nt,_e,rt,at);return function(vt){return ct.solve(vt)}}const Xt=Vt(.25,.1,.25,1);function Gt(nt,_e,rt){return Math.min(rt,Math.max(_e,nt))}function Ut(nt,_e,rt){return(rt=Gt((rt-nt)/(_e-nt),0,1))*rt*(3-2*rt)}function Ht(nt,_e,rt){const at=rt-_e,ct=((nt-_e)%at+at)%at+_e;return ct===_e?rt:ct}function qt(nt,_e,rt){if(!nt.length)return rt(null,[]);let at=nt.length;const ct=new Array(nt.length);let vt=null;nt.forEach((At,Bt)=>{_e(At,(Wt,Yt)=>{Wt&&(vt=Wt),ct[Bt]=Yt,--at==0&&rt(vt,ct)})})}function Pt(nt){const _e=[];for(const rt in nt)_e.push(nt[rt]);return _e}function St(nt,..._e){for(const rt of _e)for(const at in rt)nt[at]=rt[at];return nt}let Zt=1;function tn(){return Zt++}function mn(){return function nt(_e){return _e?(_e^Math.random()*(16>>_e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,nt)}()}function yn(nt){return nt<=1?1:Math.pow(2,Math.ceil(Math.log(nt)/Math.LN2))}function vn(nt){return!!nt&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(nt)}function un(nt,_e){nt.forEach(rt=>{_e[rt]&&(_e[rt]=_e[rt].bind(_e))})}function rn(nt,_e){return nt.indexOf(_e,nt.length-_e.length)!==-1}function It(nt,_e,rt){const at={};for(const ct in nt)at[ct]=_e.call(rt||this,nt[ct],ct,nt);return at}function Dt(nt,_e,rt){const at={};for(const ct in nt)_e.call(rt||this,nt[ct],ct,nt)&&(at[ct]=nt[ct]);return at}function Kt(nt){return Array.isArray(nt)?nt.map(Kt):typeof nt=="object"&&nt?It(nt,Kt):nt}const gn={};function hn(nt){gn[nt]||(typeof console<"u"&&console.warn(nt),gn[nt]=!0)}function xn(nt,_e,rt){return(rt.y-nt.y)*(_e.x-nt.x)>(_e.y-nt.y)*(rt.x-nt.x)}function Mn(nt){let _e=0;for(let rt,at,ct=0,vt=nt.length,At=vt-1;ct<vt;At=ct++)rt=nt[ct],at=nt[At],_e+=(at.x-rt.x)*(rt.y+at.y);return _e}function qn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ir(nt){const _e={};if(nt.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(rt,at,ct,vt)=>{const At=ct||vt;return _e[at]=!At||At.toLowerCase(),""}),_e["max-age"]){const rt=parseInt(_e["max-age"],10);isNaN(rt)?delete _e["max-age"]:_e["max-age"]=rt}return _e}let _i=null;function Ur(nt){if(_i==null){const _e=nt.navigator?nt.navigator.userAgent:null;_i=!!nt.safari||!(!_e||!(/\b(iPad|iPhone|iPod)\b/.test(_e)||_e.match("Safari")&&!_e.match("Chrome")))}return _i}function fo(nt){try{const _e=it[nt];return _e.setItem("_mapbox_test_",1),_e.removeItem("_mapbox_test_"),!0}catch{return!1}}function Gr(nt,_e){return[nt[4*_e],nt[4*_e+1],nt[4*_e+2],nt[4*_e+3]]}const Yr="mapbox-tiles";let to,Ro,Mo=500,Vo=50;function Qo(){try{return it.caches}catch{}}function Io(){Qo()&&!to&&(to=it.caches.open(Yr))}function as(nt){const _e=nt.indexOf("?");if(_e<0)return nt;const rt=function(ct){const vt=ct.indexOf("?");return vt>0?ct.slice(vt+1).split("&"):[]}(nt),at=rt.filter(ct=>{const vt=ct.split("=");return vt[0]==="language"||vt[0]==="worldview"});return at.length?`${nt.slice(0,_e)}?${at.join("&")}`:nt.slice(0,_e)}let Bs=1/0;const cs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(cs);class Zl extends Error{constructor(_e,rt,at){rt===401&&Cn(at)&&(_e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(_e),this.status=rt,this.url=at}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Vl=qn()?()=>self.worker&&self.worker.referrer:()=>(it.location.protocol==="blob:"?it.parent:it).location.href,zs=function(nt,_e){if(!(/^file:/.test(rt=nt.url)||/^file:/.test(Vl())&&!/^\w+:/.test(rt))){if(it.fetch&&it.Request&&it.AbortController&&it.Request.prototype.hasOwnProperty("signal"))return function(at,ct){const vt=new it.AbortController,At=new it.Request(at.url,{method:at.method||"GET",body:at.body,credentials:at.credentials,headers:at.headers,referrer:Vl(),signal:vt.signal});let Bt=!1,Wt=!1;const Yt=(sn=At.url).indexOf("sku=")>0&&Cn(sn);var sn;at.type==="json"&&At.headers.set("Accept","application/json");const fn=(An,Tn,kn)=>{if(Wt)return;if(An&&An.message!=="SecurityError"&&hn(An),Tn&&kn)return pn(Tn);const Vn=Date.now();it.fetch(At).then(ir=>{if(ir.ok){const _r=Yt?ir.clone():null;return pn(ir,_r,Vn)}return ct(new Zl(ir.statusText,ir.status,at.url))}).catch(ir=>{ir.code!==20&&ct(new Error(ir.message))})},pn=(An,Tn,kn)=>{(at.type==="arrayBuffer"?An.arrayBuffer():at.type==="json"?An.json():An.text()).then(Vn=>{Wt||(Tn&&kn&&function(ir,_r,rr){if(Io(),!to)return;const dr={status:_r.status,statusText:_r.statusText,headers:new it.Headers};_r.headers.forEach((Dr,Pr)=>dr.headers.set(Pr,Dr));const br=Ir(_r.headers.get("Cache-Control")||"");if(br["no-store"])return;br["max-age"]&&dr.headers.set("Expires",new Date(rr+1e3*br["max-age"]).toUTCString());const gr=dr.headers.get("Expires");gr&&(new Date(gr).getTime()-rr<42e4||function(Dr,Pr){if(Ro===void 0)try{new Response(new ReadableStream),Ro=!0}catch{Ro=!1}Ro?Pr(Dr.body):Dr.blob().then(Pr)}(_r,Dr=>{const Pr=new it.Response(Dr,dr);Io(),to&&to.then(Wr=>Wr.put(as(ir.url),Pr)).catch(Wr=>hn(Wr.message))}))}(At,Tn,kn),Bt=!0,ct(null,Vn,An.headers.get("Cache-Control"),An.headers.get("Expires")))}).catch(Vn=>{Wt||ct(new Error(Vn.message))})};return Yt?function(An,Tn){if(Io(),!to)return Tn(null);const kn=as(An.url);to.then(Vn=>{Vn.match(kn).then(ir=>{const _r=function(rr){if(!rr)return!1;const dr=new Date(rr.headers.get("Expires")||0),br=Ir(rr.headers.get("Cache-Control")||"");return dr>Date.now()&&!br["no-cache"]}(ir);Vn.delete(kn),_r&&Vn.put(kn,ir.clone()),Tn(null,ir,_r)}).catch(Tn)}).catch(Tn)}(At,fn):fn(null,null),{cancel:()=>{Wt=!0,Bt||vt.abort()}}}(nt,_e);if(qn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",nt,_e,void 0,!0)}var rt;return function(at,ct){const vt=new it.XMLHttpRequest;vt.open(at.method||"GET",at.url,!0),at.type==="arrayBuffer"&&(vt.responseType="arraybuffer");for(const At in at.headers)vt.setRequestHeader(At,at.headers[At]);return at.type==="json"&&(vt.responseType="text",vt.setRequestHeader("Accept","application/json")),vt.withCredentials=at.credentials==="include",vt.onerror=()=>{ct(new Error(vt.statusText))},vt.onload=()=>{if((vt.status>=200&&vt.status<300||vt.status===0)&&vt.response!==null){let At=vt.response;if(at.type==="json")try{At=JSON.parse(vt.response)}catch(Bt){return ct(Bt)}ct(null,At,vt.getResponseHeader("Cache-Control"),vt.getResponseHeader("Expires"))}else ct(new Zl(vt.statusText,vt.status,at.url))},vt.send(at.body),{cancel:()=>vt.abort()}}(nt,_e)},vs=function(nt,_e){return zs(St(nt,{type:"arrayBuffer"}),_e)};function uu(nt){const _e=it.document.createElement("a");return _e.href=nt,_e.protocol===it.document.location.protocol&&_e.host===it.document.location.host}const No="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let tu,cr;tu=[],cr=0;const $t=function(nt,_e){if(gt.supported&&(nt.headers||(nt.headers={}),nt.headers.accept="image/webp,*/*"),cr>=_t.MAX_PARALLEL_IMAGE_REQUESTS){const vt={requestParameters:nt,callback:_e,cancelled:!1,cancel(){this.cancelled=!0}};return tu.push(vt),vt}cr++;let rt=!1;const at=()=>{if(!rt)for(rt=!0,cr--;tu.length&&cr<_t.MAX_PARALLEL_IMAGE_REQUESTS;){const vt=tu.shift(),{requestParameters:At,callback:Bt,cancelled:Wt}=vt;Wt||(vt.cancel=$t(At,Bt).cancel)}},ct=vs(nt,(vt,At,Bt,Wt)=>{at(),vt?_e(vt):At&&(it.createImageBitmap?function(Yt,sn){const fn=new it.Blob([new Uint8Array(Yt)],{type:"image/png"});it.createImageBitmap(fn).then(pn=>{sn(null,pn)}).catch(pn=>{sn(new Error(`Could not load image because of ${pn.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(At,(Yt,sn)=>_e(Yt,sn,Bt,Wt)):function(Yt,sn){const fn=new it.Image,pn=it.URL;fn.onload=()=>{sn(null,fn),pn.revokeObjectURL(fn.src),fn.onload=null,it.requestAnimationFrame(()=>{fn.src=No})},fn.onerror=()=>sn(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const An=new it.Blob([new Uint8Array(Yt)],{type:"image/png"});fn.src=Yt.byteLength?pn.createObjectURL(An):No}(At,(Yt,sn)=>_e(Yt,sn,Bt,Wt)))});return{cancel:()=>{ct.cancel(),at()}}},en="NO_ACCESS_TOKEN";function dn(nt){return nt.indexOf("mapbox:")===0}function Cn(nt){return _t.API_URL_REGEX.test(nt)}function On(nt){return _t.API_STYLE_REGEX.test(nt)&&!or(nt)}function or(nt){return _t.API_SPRITE_REGEX.test(nt)}const ar=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nr(nt){const _e=nt.match(ar);if(!_e)throw new Error("Unable to parse URL object");return{protocol:_e[1],authority:_e[2],path:_e[3]||"/",params:_e[4]?_e[4].split("&"):[]}}function $n(nt){const _e=nt.params.length?`?${nt.params.join("&")}`:"";return`${nt.protocol}://${nt.authority}${nt.path}${_e}`}function Fn(nt){if(!nt)return null;const _e=nt.split(".");if(!_e||_e.length!==3)return null;try{return JSON.parse(decodeURIComponent(it.atob(_e[1]).split("").map(rt=>"%"+("00"+rt.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ro{constructor(_e){this.type=_e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(_e){const rt=Fn(_t.ACCESS_TOKEN);let at="";return at=rt&&rt.u?it.btoa(encodeURIComponent(rt.u).replace(/%([0-9A-F]{2})/g,(ct,vt)=>String.fromCharCode(Number("0x"+vt)))):_t.ACCESS_TOKEN||"",_e?`mapbox.eventData.${_e}:${at}`:`mapbox.eventData:${at}`}fetchEventData(){const _e=fo("localStorage"),rt=this.getStorageKey(),at=this.getStorageKey("uuid");if(_e)try{const ct=it.localStorage.getItem(rt);ct&&(this.eventData=JSON.parse(ct));const vt=it.localStorage.getItem(at);vt&&(this.anonId=vt)}catch{hn("Unable to read from LocalStorage")}}saveEventData(){const _e=fo("localStorage"),rt=this.getStorageKey(),at=this.getStorageKey("uuid");if(_e)try{it.localStorage.setItem(at,this.anonId),Object.keys(this.eventData).length>=1&&it.localStorage.setItem(rt,JSON.stringify(this.eventData))}catch{hn("Unable to write to LocalStorage")}}processRequests(_e){}postEvent(_e,rt,at,ct){if(!_t.EVENTS_URL)return;const vt=nr(_t.EVENTS_URL);vt.params.push(`access_token=${ct||_t.ACCESS_TOKEN||""}`);const At={event:this.type,created:new Date(_e).toISOString()},Bt=rt?St(At,rt):At,Wt={url:$n(vt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Bt])};this.pendingRequest=function(Yt,sn){return zs(St(Yt,{method:"POST"}),sn)}(Wt,Yt=>{this.pendingRequest=null,at(Yt),this.saveEventData(),this.processRequests(ct)})}queueRequest(_e,rt){this.queue.push(_e),this.processRequests(rt)}}const Ln=new class extends ro{constructor(nt){super("appUserTurnstile"),this._customAccessToken=nt}postTurnstileEvent(nt,_e){_t.EVENTS_URL&&_t.ACCESS_TOKEN&&Array.isArray(nt)&&nt.some(rt=>dn(rt)||Cn(rt))&&this.queueRequest(Date.now(),_e)}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const _e=Fn(_t.ACCESS_TOKEN),rt=_e?_e.u:_t.ACCESS_TOKEN;let at=rt!==this.eventData.tokenU;vn(this.anonId)||(this.anonId=mn(),at=!0);const ct=this.queue.shift();if(this.eventData.lastSuccess){const vt=new Date(this.eventData.lastSuccess),At=new Date(ct),Bt=(ct-this.eventData.lastSuccess)/864e5;at=at||Bt>=1||Bt<-1||vt.getDate()!==At.getDate()}else at=!0;at?this.postEvent(ct,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:Ft,"enabled.telemetry":!1,userId:this.anonId},vt=>{vt||(this.eventData.lastSuccess=ct,this.eventData.tokenU=rt)},nt):this.processRequests()}},En=Ln.postTurnstileEvent.bind(Ln),Rn=new class extends ro{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(nt,_e,rt,at){this.skuToken=_e,this.errorCb=at,_t.EVENTS_URL&&(rt||_t.ACCESS_TOKEN?this.queueRequest({id:nt,timestamp:Date.now()},rt):this.errorCb(new Error(en)))}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;const{id:_e,timestamp:rt}=this.queue.shift();_e&&this.success[_e]||(this.anonId||this.fetchEventData(),vn(this.anonId)||(this.anonId=mn()),this.postEvent(rt,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:Ft,skuToken:this.skuToken,userId:this.anonId},at=>{at?this.errorCb(at):_e&&(this.success[_e]=!0)},nt))}},Hn=Rn.postMapLoadEvent.bind(Rn),Qn=new class extends ro{constructor(){super("gljs.performance")}postPerformanceEvent(nt,_e){_t.EVENTS_URL&&(nt||_t.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:_e},nt)}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:_e,performanceData:rt}=this.queue.shift(),at=function(ct){const vt=it.performance.getEntriesByType("resource"),At=it.performance.getEntriesByType("mark"),Bt=function(pn){const An={};if(pn){for(const Tn in pn)if(Tn!=="other")for(const kn of pn[Tn]){const Vn=`${Tn}RequestCount`,ir=`${Tn}ResolveRangeMin`,_r=`${Tn}ResolveRangeMax`;An[ir]=Math.min(An[ir]||1/0,kn.startTime),An[_r]=Math.max(An[_r]||-1/0,kn.responseEnd),An[Vn]===void 0&&(An[Vn]=0),++An[Vn]}}return An}(function(pn,An){const Tn={};if(pn)for(const kn of pn){const Vn=An(kn);Tn[Vn]===void 0&&(Tn[Vn]=[]),Tn[Vn].push(kn)}return Tn}(vt,Qr)),Wt=it.devicePixelRatio,Yt=it.navigator.connection||it.navigator.mozConnection||it.navigator.webkitConnection,sn={counters:[],metadata:[],attributes:[]},fn=(pn,An,Tn)=>{Tn!=null&&pn.push({name:An,value:Tn.toString()})};for(const pn in Bt)fn(sn.counters,pn,Bt[pn]);if(ct.interactionRange[0]!==1/0&&ct.interactionRange[1]!==-1/0&&(fn(sn.counters,"interactionRangeMin",ct.interactionRange[0]),fn(sn.counters,"interactionRangeMax",ct.interactionRange[1])),At)for(const pn of Object.keys(wr)){const An=wr[pn],Tn=At.find(kn=>kn.name===An);Tn&&fn(sn.counters,An,Tn.startTime)}return fn(sn.counters,"visibilityHidden",ct.visibilityHidden),fn(sn.attributes,"style",function(pn){if(pn)for(const An of pn){const Tn=An.name.split("?")[0];if(On(Tn)){const kn=Tn.split("/").slice(-2);if(kn.length===2)return`mapbox://styles/${kn[0]}/${kn[1]}`}}}(vt)),fn(sn.attributes,"terrainEnabled",ct.terrainEnabled?"true":"false"),fn(sn.attributes,"fogEnabled",ct.fogEnabled?"true":"false"),fn(sn.attributes,"projection",ct.projection.name),fn(sn.attributes,"zoom",ct.zoom),fn(sn.metadata,"devicePixelRatio",Wt),fn(sn.metadata,"connectionEffectiveType",Yt?Yt.effectiveType:void 0),fn(sn.metadata,"navigatorUserAgent",it.navigator.userAgent),fn(sn.metadata,"screenWidth",it.screen.width),fn(sn.metadata,"screenHeight",it.screen.height),fn(sn.metadata,"windowWidth",it.innerWidth),fn(sn.metadata,"windowHeight",it.innerHeight),fn(sn.metadata,"mapWidth",ct.width/Wt),fn(sn.metadata,"mapHeight",ct.height/Wt),fn(sn.metadata,"webglRenderer",ct.renderer),fn(sn.metadata,"webglVendor",ct.vendor),fn(sn.metadata,"sdkVersion",st),fn(sn.metadata,"sdkIdentifier","mapbox-gl-js"),sn}(rt);for(const ct of at.metadata);for(const ct of at.counters);for(const ct of at.attributes);this.postEvent(_e,at,()=>{},nt)}},lr=Qn.postPerformanceEvent.bind(Qn),ur=new class extends ro{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(nt,_e,rt,at){if(!_t.API_URL||!_t.SESSION_PATH)return;const ct=nr(_t.API_URL+_t.SESSION_PATH);ct.params.push(`sku=${_e||""}`),ct.params.push(`access_token=${at||_t.ACCESS_TOKEN||""}`);const vt={url:$n(ct),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(At,Bt){return zs(St(At,{method:"GET"}),Bt)}(vt,At=>{this.pendingRequest=null,rt(At),this.saveEventData(),this.processRequests(at)})}getSessionAPI(nt,_e,rt,at){this.skuToken=_e,this.errorCb=at,_t.SESSION_PATH&&_t.API_URL&&(rt||_t.ACCESS_TOKEN?this.queueRequest({id:nt,timestamp:Date.now()},rt):this.errorCb(new Error(en)))}processRequests(nt){if(this.pendingRequest||this.queue.length===0)return;const{id:_e,timestamp:rt}=this.queue.shift();_e&&this.success[_e]||this.getSession(rt,this.skuToken,at=>{at?this.errorCb(at):_e&&(this.success[_e]=!0)},nt)}},mr=ur.getSessionAPI.bind(ur),hr=new Set,wr={create:"create",load:"load",fullLoad:"fullLoad"},Br={mark(nt){it.performance.mark(nt)},measure(nt,_e,rt){it.performance.measure(nt,_e,rt)}};function Qr(nt){const _e=nt.name.split("?")[0];return _e.includes("mapbox-gl.js")?"javascript":_e.includes("mapbox-gl.css")?"css":function(rt){return _t.API_FONTS_REGEX.test(rt)}(_e)?"fontRange":or(_e)?"sprite":On(_e)?"style":function(rt){return _t.API_TILEJSON_REGEX.test(rt)}(_e)?"tilejson":"other"}const Hr=it.performance;function So(nt){const _e=nt?nt.url.toString():void 0;return Hr.getEntriesByName(_e)}let Eo,Oo,Lo,Ko;const fs={now:()=>Lo!==void 0?Lo:it.performance.now(),setNow(nt){Lo=nt},restoreNow(){Lo=void 0},frame(nt){const _e=it.requestAnimationFrame(nt);return{cancel:()=>it.cancelAnimationFrame(_e)}},getImageData(nt,_e=0){const{width:rt,height:at}=nt;Ko||(Ko=it.document.createElement("canvas"));const ct=Ko.getContext("2d");if(!ct)throw new Error("failed to create canvas 2d context");return(rt>Ko.width||at>Ko.height)&&(Ko.width=rt,Ko.height=at),ct.clearRect(-_e,-_e,rt+2*_e,at+2*_e),ct.drawImage(nt,0,0,rt,at),ct.getImageData(-_e,-_e,rt+2*_e,at+2*_e)},resolveURL:nt=>(Eo||(Eo=it.document.createElement("a")),Eo.href=nt,Eo.href),get devicePixelRatio(){return it.devicePixelRatio},get prefersReducedMotion(){return!!it.matchMedia&&(Oo==null&&(Oo=it.matchMedia("(prefers-reduced-motion: reduce)")),Oo.matches)}};function vo(nt,_e,rt){rt[nt]&&rt[nt].indexOf(_e)!==-1||(rt[nt]=rt[nt]||[],rt[nt].push(_e))}function As(nt,_e,rt){if(rt&&rt[nt]){const at=rt[nt].indexOf(_e);at!==-1&&rt[nt].splice(at,1)}}class bs{constructor(_e,rt={}){St(this,rt),this.type=_e}}class xu extends bs{constructor(_e,rt={}){super("error",St({error:_e},rt))}}class cu{on(_e,rt){return this._listeners=this._listeners||{},vo(_e,rt,this._listeners),this}off(_e,rt){return As(_e,rt,this._listeners),As(_e,rt,this._oneTimeListeners),this}once(_e,rt){return rt?(this._oneTimeListeners=this._oneTimeListeners||{},vo(_e,rt,this._oneTimeListeners),this):new Promise(at=>this.once(_e,at))}fire(_e,rt){typeof _e=="string"&&(_e=new bs(_e,rt||{}));const at=_e.type;if(this.listens(at)){_e.target=this;const ct=this._listeners&&this._listeners[at]?this._listeners[at].slice():[];for(const Bt of ct)Bt.call(this,_e);const vt=this._oneTimeListeners&&this._oneTimeListeners[at]?this._oneTimeListeners[at].slice():[];for(const Bt of vt)As(at,Bt,this._oneTimeListeners),Bt.call(this,_e);const At=this._eventedParent;At&&(St(_e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),At.fire(_e))}else _e instanceof xu&&console.error(_e.error);return this}listens(_e){return!!(this._listeners&&this._listeners[_e]&&this._listeners[_e].length>0||this._oneTimeListeners&&this._oneTimeListeners[_e]&&this._oneTimeListeners[_e].length>0||this._eventedParent&&this._eventedParent.listens(_e))}setEventedParent(_e,rt){return this._eventedParent=_e,this._eventedParentData=rt,this}}var Nr=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ga(nt,..._e){for(const rt of _e)for(const at in rt)nt[at]=rt[at];return nt}function Vs(nt){return nt instanceof Number||nt instanceof String||nt instanceof Boolean?nt.valueOf():nt}function hu(nt){if(Array.isArray(nt))return nt.map(hu);if(nt instanceof Object&&!(nt instanceof Number||nt instanceof String||nt instanceof Boolean)){const _e={};for(const rt in nt)_e[rt]=hu(nt[rt]);return _e}return Vs(nt)}class nu extends Error{constructor(_e,rt){super(rt),this.message=rt,this.key=_e}}var Au=nu;class _l{constructor(_e,rt=[]){this.parent=_e,this.bindings={};for(const[at,ct]of rt)this.bindings[at]=ct}concat(_e){return new _l(this,_e)}get(_e){if(this.bindings[_e])return this.bindings[_e];if(this.parent)return this.parent.get(_e);throw new Error(`${_e} not found in scope.`)}has(_e){return!!this.bindings[_e]||!!this.parent&&this.parent.has(_e)}}var nm=_l;const tp={kind:"null"},po={kind:"number"},ns={kind:"string"},is={kind:"boolean"},Eu={kind:"color"},np={kind:"object"},Jo={kind:"value"},Uu={kind:"collator"},zu={kind:"formatted"},fu={kind:"resolvedImage"};function Ml(nt,_e){return{kind:"array",itemType:nt,N:_e}}function ds(nt){if(nt.kind==="array"){const _e=ds(nt.itemType);return typeof nt.N=="number"?`array<${_e}, ${nt.N}>`:nt.itemType.kind==="value"?"array":`array<${_e}>`}return nt.kind}const Cm=[tp,po,ns,is,Eu,zu,np,Ml(Jo),fu];function js(nt,_e){if(_e.kind==="error")return null;if(nt.kind==="array"){if(_e.kind==="array"&&(_e.N===0&&_e.itemType.kind==="value"||!js(nt.itemType,_e.itemType))&&(typeof nt.N!="number"||nt.N===_e.N))return null}else{if(nt.kind===_e.kind)return null;if(nt.kind==="value"){for(const rt of Cm)if(!js(rt,_e))return null}}return`Expected ${ds(nt)} but found ${ds(_e)} instead.`}function Vu(nt,_e){return _e.some(rt=>rt.kind===nt.kind)}function Ks(nt,_e){return _e.some(rt=>rt==="null"?nt===null:rt==="array"?Array.isArray(nt):rt==="object"?nt&&!Array.isArray(nt)&&typeof nt=="object":rt===typeof nt)}var Wu,rp={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function jp(nt){return(nt=Math.round(nt))<0?0:nt>255?255:nt}function Js(nt){return jp(nt[nt.length-1]==="%"?parseFloat(nt)/100*255:parseInt(nt))}function Yl(nt){return(_e=nt[nt.length-1]==="%"?parseFloat(nt)/100:parseFloat(nt))<0?0:_e>1?1:_e;var _e}function El(nt,_e,rt){return rt<0?rt+=1:rt>1&&(rt-=1),6*rt<1?nt+(_e-nt)*rt*6:2*rt<1?_e:3*rt<2?nt+(_e-nt)*(2/3-rt)*6:nt}try{Wu={}.parseCSSColor=function(nt){var _e,rt=nt.replace(/ /g,"").toLowerCase();if(rt in rp)return rp[rt].slice();if(rt[0]==="#")return rt.length===4?(_e=parseInt(rt.substr(1),16))>=0&&_e<=4095?[(3840&_e)>>4|(3840&_e)>>8,240&_e|(240&_e)>>4,15&_e|(15&_e)<<4,1]:null:rt.length===7&&(_e=parseInt(rt.substr(1),16))>=0&&_e<=16777215?[(16711680&_e)>>16,(65280&_e)>>8,255&_e,1]:null;var at=rt.indexOf("("),ct=rt.indexOf(")");if(at!==-1&&ct+1===rt.length){var vt=rt.substr(0,at),At=rt.substr(at+1,ct-(at+1)).split(","),Bt=1;switch(vt){case"rgba":if(At.length!==4)return null;Bt=Yl(At.pop());case"rgb":return At.length!==3?null:[Js(At[0]),Js(At[1]),Js(At[2]),Bt];case"hsla":if(At.length!==4)return null;Bt=Yl(At.pop());case"hsl":if(At.length!==3)return null;var Wt=(parseFloat(At[0])%360+360)%360/360,Yt=Yl(At[1]),sn=Yl(At[2]),fn=sn<=.5?sn*(Yt+1):sn+Yt-sn*Yt,pn=2*sn-fn;return[jp(255*El(pn,fn,Wt+1/3)),jp(255*El(pn,fn,Wt)),jp(255*El(pn,fn,Wt-1/3)),Bt];default:return null}}return null}}catch{}class gs{constructor(_e,rt,at,ct=1){this.r=_e,this.g=rt,this.b=at,this.a=ct}static parse(_e){if(!_e)return;if(_e instanceof gs)return _e;if(typeof _e!="string")return;const rt=Wu(_e);return rt?new gs(rt[0]/255*rt[3],rt[1]/255*rt[3],rt[2]/255*rt[3],rt[3]):void 0}toString(){const[_e,rt,at,ct]=this.toArray();return`rgba(${Math.round(_e)},${Math.round(rt)},${Math.round(at)},${ct})`}toArray(){const{r:_e,g:rt,b:at,a:ct}=this;return ct===0?[0,0,0,0]:[255*_e/ct,255*rt/ct,255*at/ct,ct]}toArray01(){const{r:_e,g:rt,b:at,a:ct}=this;return ct===0?[0,0,0,0]:[_e/ct,rt/ct,at/ct,ct]}toArray01PremultipliedAlpha(){const{r:_e,g:rt,b:at,a:ct}=this;return[_e,rt,at,ct]}}gs.black=new gs(0,0,0,1),gs.white=new gs(1,1,1,1),gs.transparent=new gs(0,0,0,0),gs.red=new gs(1,0,0,1),gs.blue=new gs(0,0,1,1);var Fs=gs;class Fp{constructor(_e,rt,at){this.sensitivity=_e?rt?"variant":"case":rt?"accent":"base",this.locale=at,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(_e,rt){return this.collator.compare(_e,rt)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ip{constructor(_e,rt,at,ct,vt){this.text=_e.normalize?_e.normalize():_e,this.image=rt,this.scale=at,this.fontStack=ct,this.textColor=vt}}class zt{constructor(_e){this.sections=_e}static fromString(_e){return new zt([new ip(_e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(_e=>_e.text.length!==0||_e.image&&_e.image.name.length!==0)}static factory(_e){return _e instanceof zt?_e:zt.fromString(_e)}toString(){return this.sections.length===0?"":this.sections.map(_e=>_e.text).join("")}serialize(){const _e=["format"];for(const rt of this.sections){if(rt.image){_e.push(["image",rt.image.name]);continue}_e.push(rt.text);const at={};rt.fontStack&&(at["text-font"]=["literal",rt.fontStack.split(",")]),rt.scale&&(at["font-scale"]=rt.scale),rt.textColor&&(at["text-color"]=["rgba"].concat(rt.textColor.toArray())),_e.push(at)}return _e}}class ln{constructor(_e){this.name=_e.name,this.available=_e.available}toString(){return this.name}static fromString(_e){return _e?new ln({name:_e,available:!1}):null}serialize(){return["image",this.name]}}function wn(nt,_e,rt,at){return typeof nt=="number"&&nt>=0&&nt<=255&&typeof _e=="number"&&_e>=0&&_e<=255&&typeof rt=="number"&&rt>=0&&rt<=255?at===void 0||typeof at=="number"&&at>=0&&at<=1?null:`Invalid rgba value [${[nt,_e,rt,at].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof at=="number"?[nt,_e,rt,at]:[nt,_e,rt]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Pn(nt){if(nt===null||typeof nt=="string"||typeof nt=="boolean"||typeof nt=="number"||nt instanceof Fs||nt instanceof Fp||nt instanceof zt||nt instanceof ln)return!0;if(Array.isArray(nt)){for(const _e of nt)if(!Pn(_e))return!1;return!0}if(typeof nt=="object"){for(const _e in nt)if(!Pn(nt[_e]))return!1;return!0}return!1}function zn(nt){if(nt===null)return tp;if(typeof nt=="string")return ns;if(typeof nt=="boolean")return is;if(typeof nt=="number")return po;if(nt instanceof Fs)return Eu;if(nt instanceof Fp)return Uu;if(nt instanceof zt)return zu;if(nt instanceof ln)return fu;if(Array.isArray(nt)){const _e=nt.length;let rt;for(const at of nt){const ct=zn(at);if(rt){if(rt===ct)continue;rt=Jo;break}rt=ct}return Ml(rt||Jo,_e)}return np}function sr(nt){const _e=typeof nt;return nt===null?"":_e==="string"||_e==="number"||_e==="boolean"?String(nt):nt instanceof Fs||nt instanceof zt||nt instanceof ln?nt.toString():JSON.stringify(nt)}class jn{constructor(_e,rt){this.type=_e,this.value=rt}static parse(_e,rt){if(_e.length!==2)return rt.error(`'literal' expression requires exactly one argument, but found ${_e.length-1} instead.`);if(!Pn(_e[1]))return rt.error("invalid value");const at=_e[1];let ct=zn(at);const vt=rt.expectedType;return ct.kind!=="array"||ct.N!==0||!vt||vt.kind!=="array"||typeof vt.N=="number"&&vt.N!==0||(ct=vt),new jn(ct,at)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Fs?["rgba"].concat(this.value.toArray()):this.value instanceof zt?this.value.serialize():this.value}}var Jn=jn,Tr=class{constructor(nt){this.name="ExpressionEvaluationError",this.message=nt}toJSON(){return this.message}};const Cr={string:ns,number:po,boolean:is,object:np};class Vr{constructor(_e,rt){this.type=_e,this.args=rt}static parse(_e,rt){if(_e.length<2)return rt.error("Expected at least one argument.");let at,ct=1;const vt=_e[0];if(vt==="array"){let Bt,Wt;if(_e.length>2){const Yt=_e[1];if(typeof Yt!="string"||!(Yt in Cr)||Yt==="object")return rt.error('The item type argument of "array" must be one of string, number, boolean',1);Bt=Cr[Yt],ct++}else Bt=Jo;if(_e.length>3){if(_e[2]!==null&&(typeof _e[2]!="number"||_e[2]<0||_e[2]!==Math.floor(_e[2])))return rt.error('The length argument to "array" must be a positive integer literal',2);Wt=_e[2],ct++}at=Ml(Bt,Wt)}else at=Cr[vt];const At=[];for(;ct<_e.length;ct++){const Bt=rt.parse(_e[ct],ct,Jo);if(!Bt)return null;At.push(Bt)}return new Vr(at,At)}evaluate(_e){for(let rt=0;rt<this.args.length;rt++){const at=this.args[rt].evaluate(_e);if(!js(this.type,zn(at)))return at;if(rt===this.args.length-1)throw new Tr(`Expected value to be of type ${ds(this.type)}, but found ${ds(zn(at))} instead.`)}return null}eachChild(_e){this.args.forEach(_e)}outputDefined(){return this.args.every(_e=>_e.outputDefined())}serialize(){const _e=this.type,rt=[_e.kind];if(_e.kind==="array"){const at=_e.itemType;if(at.kind==="string"||at.kind==="number"||at.kind==="boolean"){rt.push(at.kind);const ct=_e.N;(typeof ct=="number"||this.args.length>1)&&rt.push(ct)}}return rt.concat(this.args.map(at=>at.serialize()))}}var ko=Vr;class go{constructor(_e){this.type=zu,this.sections=_e}static parse(_e,rt){if(_e.length<2)return rt.error("Expected at least one argument.");const at=_e[1];if(!Array.isArray(at)&&typeof at=="object")return rt.error("First argument must be an image or text section.");const ct=[];let vt=!1;for(let At=1;At<=_e.length-1;++At){const Bt=_e[At];if(vt&&typeof Bt=="object"&&!Array.isArray(Bt)){vt=!1;let Wt=null;if(Bt["font-scale"]&&(Wt=rt.parse(Bt["font-scale"],1,po),!Wt))return null;let Yt=null;if(Bt["text-font"]&&(Yt=rt.parse(Bt["text-font"],1,Ml(ns)),!Yt))return null;let sn=null;if(Bt["text-color"]&&(sn=rt.parse(Bt["text-color"],1,Eu),!sn))return null;const fn=ct[ct.length-1];fn.scale=Wt,fn.font=Yt,fn.textColor=sn}else{const Wt=rt.parse(_e[At],1,Jo);if(!Wt)return null;const Yt=Wt.type.kind;if(Yt!=="string"&&Yt!=="value"&&Yt!=="null"&&Yt!=="resolvedImage")return rt.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");vt=!0,ct.push({content:Wt,scale:null,font:null,textColor:null})}}return new go(ct)}evaluate(_e){return new zt(this.sections.map(rt=>{const at=rt.content.evaluate(_e);return zn(at)===fu?new ip("",at,null,null,null):new ip(sr(at),null,rt.scale?rt.scale.evaluate(_e):null,rt.font?rt.font.evaluate(_e).join(","):null,rt.textColor?rt.textColor.evaluate(_e):null)}))}eachChild(_e){for(const rt of this.sections)_e(rt.content),rt.scale&&_e(rt.scale),rt.font&&_e(rt.font),rt.textColor&&_e(rt.textColor)}outputDefined(){return!1}serialize(){const _e=["format"];for(const rt of this.sections){_e.push(rt.content.serialize());const at={};rt.scale&&(at["font-scale"]=rt.scale.serialize()),rt.font&&(at["text-font"]=rt.font.serialize()),rt.textColor&&(at["text-color"]=rt.textColor.serialize()),_e.push(at)}return _e}}class To{constructor(_e){this.type=fu,this.input=_e}static parse(_e,rt){if(_e.length!==2)return rt.error("Expected two arguments.");const at=rt.parse(_e[1],1,ns);return at?new To(at):rt.error("No image name provided.")}evaluate(_e){const rt=this.input.evaluate(_e),at=ln.fromString(rt);return at&&_e.availableImages&&(at.available=_e.availableImages.indexOf(rt)>-1),at}eachChild(_e){_e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const $o={"to-boolean":is,"to-color":Eu,"to-number":po,"to-string":ns};class Xo{constructor(_e,rt){this.type=_e,this.args=rt}static parse(_e,rt){if(_e.length<2)return rt.error("Expected at least one argument.");const at=_e[0];if((at==="to-boolean"||at==="to-string")&&_e.length!==2)return rt.error("Expected one argument.");const ct=$o[at],vt=[];for(let At=1;At<_e.length;At++){const Bt=rt.parse(_e[At],At,Jo);if(!Bt)return null;vt.push(Bt)}return new Xo(ct,vt)}evaluate(_e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(_e));if(this.type.kind==="color"){let rt,at;for(const ct of this.args){if(rt=ct.evaluate(_e),at=null,rt instanceof Fs)return rt;if(typeof rt=="string"){const vt=_e.parseColor(rt);if(vt)return vt}else if(Array.isArray(rt)&&(at=rt.length<3||rt.length>4?`Invalid rbga value ${JSON.stringify(rt)}: expected an array containing either three or four numeric values.`:wn(rt[0],rt[1],rt[2],rt[3]),!at))return new Fs(rt[0]/255,rt[1]/255,rt[2]/255,rt[3])}throw new Tr(at||`Could not parse color from value '${typeof rt=="string"?rt:String(JSON.stringify(rt))}'`)}if(this.type.kind==="number"){let rt=null;for(const at of this.args){if(rt=at.evaluate(_e),rt===null)return 0;const ct=Number(rt);if(!isNaN(ct))return ct}throw new Tr(`Could not convert ${JSON.stringify(rt)} to number.`)}return this.type.kind==="formatted"?zt.fromString(sr(this.args[0].evaluate(_e))):this.type.kind==="resolvedImage"?ln.fromString(sr(this.args[0].evaluate(_e))):sr(this.args[0].evaluate(_e))}eachChild(_e){this.args.forEach(_e)}outputDefined(){return this.args.every(_e=>_e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new go([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new To(this.args[0]).serialize();const _e=[`to-${this.type.kind}`];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}var xo=Xo;const xl=["Unknown","Point","LineString","Polygon"];var ru=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?xl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const nt=this.featureDistanceData.center,_e=this.featureDistanceData.scale,{x:rt,y:at}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(rt*_e-nt[0])+this.featureDistanceData.bearing[1]*(at*_e-nt[1])}return 0}parseColor(nt){let _e=this._parseColorCache[nt];return _e||(_e=this._parseColorCache[nt]=Fs.parse(nt)),_e}};class Rm{constructor(_e,rt,at,ct){this.name=_e,this.type=rt,this._evaluate=at,this.args=ct}evaluate(_e){return this._evaluate(_e,this.args)}eachChild(_e){this.args.forEach(_e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(_e=>_e.serialize()))}static parse(_e,rt){const at=_e[0],ct=Rm.definitions[at];if(!ct)return rt.error(`Unknown expression "${at}". If you wanted a literal array, use ["literal", [...]].`,0);const vt=Array.isArray(ct)?ct[0]:ct.type,At=Array.isArray(ct)?[[ct[1],ct[2]]]:ct.overloads,Bt=At.filter(([Yt])=>!Array.isArray(Yt)||Yt.length===_e.length-1);let Wt=null;for(const[Yt,sn]of Bt){Wt=new Ty(rt.registry,rt.path,null,rt.scope);const fn=[];let pn=!1;for(let An=1;An<_e.length;An++){const Tn=_e[An],kn=Array.isArray(Yt)?Yt[An-1]:Yt.type,Vn=Wt.parse(Tn,1+fn.length,kn);if(!Vn){pn=!0;break}fn.push(Vn)}if(!pn)if(Array.isArray(Yt)&&Yt.length!==fn.length)Wt.error(`Expected ${Yt.length} arguments, but found ${fn.length} instead.`);else{for(let An=0;An<fn.length;An++){const Tn=Array.isArray(Yt)?Yt[An]:Yt.type,kn=fn[An];Wt.concat(An+1).checkSubtype(Tn,kn.type)}if(Wt.errors.length===0)return new Rm(at,vt,sn,fn)}}if(Bt.length===1)rt.errors.push(...Wt.errors);else{const Yt=(Bt.length?Bt:At).map(([fn])=>{return pn=fn,Array.isArray(pn)?`(${pn.map(ds).join(", ")})`:`(${ds(pn.type)}...)`;var pn}).join(" | "),sn=[];for(let fn=1;fn<_e.length;fn++){const pn=rt.parse(_e[fn],1+sn.length);if(!pn)return null;sn.push(ds(pn.type))}rt.error(`Expected arguments of type ${Yt}, but found (${sn.join(", ")}) instead.`)}return null}static register(_e,rt){Rm.definitions=rt;for(const at in rt)_e[at]=Rm}}var Gu=Rm;class e_{constructor(_e,rt,at){this.type=Uu,this.locale=at,this.caseSensitive=_e,this.diacriticSensitive=rt}static parse(_e,rt){if(_e.length!==2)return rt.error("Expected one argument.");const at=_e[1];if(typeof at!="object"||Array.isArray(at))return rt.error("Collator options argument must be an object.");const ct=rt.parse(at["case-sensitive"]!==void 0&&at["case-sensitive"],1,is);if(!ct)return null;const vt=rt.parse(at["diacritic-sensitive"]!==void 0&&at["diacritic-sensitive"],1,is);if(!vt)return null;let At=null;return at.locale&&(At=rt.parse(at.locale,1,ns),!At)?null:new e_(ct,vt,At)}evaluate(_e){return new Fp(this.caseSensitive.evaluate(_e),this.diacriticSensitive.evaluate(_e),this.locale?this.locale.evaluate(_e):null)}eachChild(_e){_e(this.caseSensitive),_e(this.diacriticSensitive),this.locale&&_e(this.locale)}outputDefined(){return!1}serialize(){const _e={};return _e["case-sensitive"]=this.caseSensitive.serialize(),_e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(_e.locale=this.locale.serialize()),["collator",_e]}}const Sl=8192;function Ey(nt,_e){nt[0]=Math.min(nt[0],_e[0]),nt[1]=Math.min(nt[1],_e[1]),nt[2]=Math.max(nt[2],_e[0]),nt[3]=Math.max(nt[3],_e[1])}function _p(nt,_e){return!(nt[0]<=_e[0]||nt[2]>=_e[2]||nt[1]<=_e[1]||nt[3]>=_e[3])}function op(nt,_e){const rt=(180+nt[0])/360,at=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+nt[1]*Math.PI/360)))/360,ct=Math.pow(2,_e.z);return[Math.round(rt*ct*Sl),Math.round(at*ct*Sl)]}function t_(nt,_e,rt){const at=nt[0]-_e[0],ct=nt[1]-_e[1],vt=nt[0]-rt[0],At=nt[1]-rt[1];return at*At-vt*ct==0&&at*vt<=0&&ct*At<=0}function du(nt,_e){let rt=!1;for(let At=0,Bt=_e.length;At<Bt;At++){const Wt=_e[At];for(let Yt=0,sn=Wt.length;Yt<sn-1;Yt++){if(t_(nt,Wt[Yt],Wt[Yt+1]))return!1;(ct=Wt[Yt])[1]>(at=nt)[1]!=(vt=Wt[Yt+1])[1]>at[1]&&at[0]<(vt[0]-ct[0])*(at[1]-ct[1])/(vt[1]-ct[1])+ct[0]&&(rt=!rt)}}var at,ct,vt;return rt}function sv(nt,_e){for(let rt=0;rt<_e.length;rt++)if(du(nt,_e[rt]))return!0;return!1}function n_(nt,_e,rt,at){const ct=at[0]-rt[0],vt=at[1]-rt[1],At=(nt[0]-rt[0])*vt-ct*(nt[1]-rt[1]),Bt=(_e[0]-rt[0])*vt-ct*(_e[1]-rt[1]);return At>0&&Bt<0||At<0&&Bt>0}function av(nt,_e,rt){for(const Yt of rt)for(let sn=0;sn<Yt.length-1;++sn)if((Bt=[(At=Yt[sn+1])[0]-(vt=Yt[sn])[0],At[1]-vt[1]])[0]*(Wt=[(ct=_e)[0]-(at=nt)[0],ct[1]-at[1]])[1]-Bt[1]*Wt[0]!=0&&n_(at,ct,vt,At)&&n_(vt,At,at,ct))return!0;var at,ct,vt,At,Bt,Wt;return!1}function r_(nt,_e){for(let rt=0;rt<nt.length;++rt)if(!du(nt[rt],_e))return!1;for(let rt=0;rt<nt.length-1;++rt)if(av(nt[rt],nt[rt+1],_e))return!1;return!0}function i_(nt,_e){for(let rt=0;rt<_e.length;rt++)if(r_(nt,_e[rt]))return!0;return!1}function rm(nt,_e,rt){const at=[];for(let ct=0;ct<nt.length;ct++){const vt=[];for(let At=0;At<nt[ct].length;At++){const Bt=op(nt[ct][At],rt);Ey(_e,Bt),vt.push(Bt)}at.push(vt)}return at}function gu(nt,_e,rt){const at=[];for(let ct=0;ct<nt.length;ct++){const vt=rm(nt[ct],_e,rt);at.push(vt)}return at}function lv(nt,_e,rt,at){if(nt[0]<rt[0]||nt[0]>rt[2]){const ct=.5*at;let vt=nt[0]-rt[0]>ct?-at:rt[0]-nt[0]>ct?at:0;vt===0&&(vt=nt[0]-rt[2]>ct?-at:rt[2]-nt[0]>ct?at:0),nt[0]+=vt}Ey(_e,nt)}function pu(nt,_e,rt,at){const ct=Math.pow(2,at.z)*Sl,vt=[at.x*Sl,at.y*Sl],At=[];if(!nt)return At;for(const Bt of nt)for(const Wt of Bt){const Yt=[Wt.x+vt[0],Wt.y+vt[1]];lv(Yt,_e,rt,ct),At.push(Yt)}return At}function uv(nt,_e,rt,at){const ct=Math.pow(2,at.z)*Sl,vt=[at.x*Sl,at.y*Sl],At=[];if(!nt)return At;for(const Wt of nt){const Yt=[];for(const sn of Wt){const fn=[sn.x+vt[0],sn.y+vt[1]];Ey(_e,fn),Yt.push(fn)}At.push(Yt)}if(_e[2]-_e[0]<=ct/2){(Bt=_e)[0]=Bt[1]=1/0,Bt[2]=Bt[3]=-1/0;for(const Wt of At)for(const Yt of Wt)lv(Yt,_e,rt,ct)}var Bt;return At}class sp{constructor(_e,rt){this.type=is,this.geojson=_e,this.geometries=rt}static parse(_e,rt){if(_e.length!==2)return rt.error(`'within' expression requires exactly one argument, but found ${_e.length-1} instead.`);if(Pn(_e[1])){const at=_e[1];if(at.type==="FeatureCollection")for(let ct=0;ct<at.features.length;++ct){const vt=at.features[ct].geometry.type;if(vt==="Polygon"||vt==="MultiPolygon")return new sp(at,at.features[ct].geometry)}else if(at.type==="Feature"){const ct=at.geometry.type;if(ct==="Polygon"||ct==="MultiPolygon")return new sp(at,at.geometry)}else if(at.type==="Polygon"||at.type==="MultiPolygon")return new sp(at,at)}return rt.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(_e){if(_e.geometry()!=null&&_e.canonicalID()!=null){if(_e.geometryType()==="Point")return function(rt,at){const ct=[1/0,1/0,-1/0,-1/0],vt=[1/0,1/0,-1/0,-1/0],At=rt.canonicalID();if(!At)return!1;if(at.type==="Polygon"){const Bt=rm(at.coordinates,vt,At),Wt=pu(rt.geometry(),ct,vt,At);if(!_p(ct,vt))return!1;for(const Yt of Wt)if(!du(Yt,Bt))return!1}if(at.type==="MultiPolygon"){const Bt=gu(at.coordinates,vt,At),Wt=pu(rt.geometry(),ct,vt,At);if(!_p(ct,vt))return!1;for(const Yt of Wt)if(!sv(Yt,Bt))return!1}return!0}(_e,this.geometries);if(_e.geometryType()==="LineString")return function(rt,at){const ct=[1/0,1/0,-1/0,-1/0],vt=[1/0,1/0,-1/0,-1/0],At=rt.canonicalID();if(!At)return!1;if(at.type==="Polygon"){const Bt=rm(at.coordinates,vt,At),Wt=uv(rt.geometry(),ct,vt,At);if(!_p(ct,vt))return!1;for(const Yt of Wt)if(!r_(Yt,Bt))return!1}if(at.type==="MultiPolygon"){const Bt=gu(at.coordinates,vt,At),Wt=uv(rt.geometry(),ct,vt,At);if(!_p(ct,vt))return!1;for(const Yt of Wt)if(!i_(Yt,Bt))return!1}return!0}(_e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var ms=sp;function im(nt){if(nt instanceof Gu&&(nt.name==="get"&&nt.args.length===1||nt.name==="feature-state"||nt.name==="has"&&nt.args.length===1||nt.name==="properties"||nt.name==="geometry-type"||nt.name==="id"||/^filter-/.test(nt.name))||nt instanceof ms)return!1;let _e=!0;return nt.eachChild(rt=>{_e&&!im(rt)&&(_e=!1)}),_e}function $m(nt){if(nt instanceof Gu&&nt.name==="feature-state")return!1;let _e=!0;return nt.eachChild(rt=>{_e&&!$m(rt)&&(_e=!1)}),_e}function Qs(nt,_e){if(nt instanceof Gu&&_e.indexOf(nt.name)>=0)return!1;let rt=!0;return nt.eachChild(at=>{rt&&!Qs(at,_e)&&(rt=!1)}),rt}class ap{constructor(_e,rt){this.type=rt.type,this.name=_e,this.boundExpression=rt}static parse(_e,rt){if(_e.length!==2||typeof _e[1]!="string")return rt.error("'var' expression requires exactly one string literal argument.");const at=_e[1];return rt.scope.has(at)?new ap(at,rt.scope.get(at)):rt.error(`Unknown variable "${at}". Make sure "${at}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(_e){return this.boundExpression.evaluate(_e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var o_=ap;class s_{constructor(_e,rt=[],at,ct=new nm,vt=[]){this.registry=_e,this.path=rt,this.key=rt.map(At=>`[${At}]`).join(""),this.scope=ct,this.errors=vt,this.expectedType=at}parse(_e,rt,at,ct,vt={}){return rt?this.concat(rt,at,ct)._parse(_e,vt):this._parse(_e,vt)}_parse(_e,rt){function at(ct,vt,At){return At==="assert"?new ko(vt,[ct]):At==="coerce"?new xo(vt,[ct]):ct}if(_e!==null&&typeof _e!="string"&&typeof _e!="boolean"&&typeof _e!="number"||(_e=["literal",_e]),Array.isArray(_e)){if(_e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ct=_e[0];if(typeof ct!="string")return this.error(`Expression name must be a string, but found ${typeof ct} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const vt=this.registry[ct];if(vt){let At=vt.parse(_e,this);if(!At)return null;if(this.expectedType){const Bt=this.expectedType,Wt=At.type;if(Bt.kind!=="string"&&Bt.kind!=="number"&&Bt.kind!=="boolean"&&Bt.kind!=="object"&&Bt.kind!=="array"||Wt.kind!=="value")if(Bt.kind!=="color"&&Bt.kind!=="formatted"&&Bt.kind!=="resolvedImage"||Wt.kind!=="value"&&Wt.kind!=="string"){if(this.checkSubtype(Bt,Wt))return null}else At=at(At,Bt,rt.typeAnnotation||"coerce");else At=at(At,Bt,rt.typeAnnotation||"assert")}if(!(At instanceof Jn)&&At.type.kind!=="resolvedImage"&&a_(At)){const Bt=new ru;try{At=new Jn(At.type,At.evaluate(Bt))}catch(Wt){return this.error(Wt.message),null}}return At}return this.error(`Unknown expression "${ct}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(_e===void 0?"'undefined' value invalid. Use null instead.":typeof _e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof _e} instead.`)}concat(_e,rt,at){const ct=typeof _e=="number"?this.path.concat(_e):this.path,vt=at?this.scope.concat(at):this.scope;return new s_(this.registry,ct,rt||null,vt,this.errors)}error(_e,...rt){const at=`${this.key}${rt.map(ct=>`[${ct}]`).join("")}`;this.errors.push(new Au(at,_e))}checkSubtype(_e,rt){const at=js(_e,rt);return at&&this.error(at),at}}var Ty=s_;function a_(nt){if(nt instanceof o_)return a_(nt.boundExpression);if(nt instanceof Gu&&nt.name==="error"||nt instanceof e_||nt instanceof ms)return!1;const _e=nt instanceof xo||nt instanceof ko;let rt=!0;return nt.eachChild(at=>{rt=_e?rt&&a_(at):rt&&at instanceof Jn}),!!rt&&im(nt)&&Qs(nt,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Cy(nt,_e){const rt=nt.length-1;let at,ct,vt=0,At=rt,Bt=0;for(;vt<=At;)if(Bt=Math.floor((vt+At)/2),at=nt[Bt],ct=nt[Bt+1],at<=_e){if(Bt===rt||_e<ct)return Bt;vt=Bt+1}else{if(!(at>_e))throw new Tr("Input is not a number.");At=Bt-1}return 0}class om{constructor(_e,rt,at){this.type=_e,this.input=rt,this.labels=[],this.outputs=[];for(const[ct,vt]of at)this.labels.push(ct),this.outputs.push(vt)}static parse(_e,rt){if(_e.length-1<4)return rt.error(`Expected at least 4 arguments, but found only ${_e.length-1}.`);if((_e.length-1)%2!=0)return rt.error("Expected an even number of arguments.");const at=rt.parse(_e[1],1,po);if(!at)return null;const ct=[];let vt=null;rt.expectedType&&rt.expectedType.kind!=="value"&&(vt=rt.expectedType);for(let At=1;At<_e.length;At+=2){const Bt=At===1?-1/0:_e[At],Wt=_e[At+1],Yt=At,sn=At+1;if(typeof Bt!="number")return rt.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Yt);if(ct.length&&ct[ct.length-1][0]>=Bt)return rt.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Yt);const fn=rt.parse(Wt,sn,vt);if(!fn)return null;vt=vt||fn.type,ct.push([Bt,fn])}return new om(vt,at,ct)}evaluate(_e){const rt=this.labels,at=this.outputs;if(rt.length===1)return at[0].evaluate(_e);const ct=this.input.evaluate(_e);if(ct<=rt[0])return at[0].evaluate(_e);const vt=rt.length;return ct>=rt[vt-1]?at[vt-1].evaluate(_e):at[Cy(rt,ct)].evaluate(_e)}eachChild(_e){_e(this.input);for(const rt of this.outputs)_e(rt)}outputDefined(){return this.outputs.every(_e=>_e.outputDefined())}serialize(){const _e=["step",this.input.serialize()];for(let rt=0;rt<this.labels.length;rt++)rt>0&&_e.push(this.labels[rt]),_e.push(this.outputs[rt].serialize());return _e}}var Im=om;function Ss(nt,_e,rt){return nt*(1-rt)+_e*rt}var lp=Object.freeze({__proto__:null,number:Ss,color:function(nt,_e,rt){return new Fs(Ss(nt.r,_e.r,rt),Ss(nt.g,_e.g,rt),Ss(nt.b,_e.b,rt),Ss(nt.a,_e.a,rt))},array:function(nt,_e,rt){return nt.map((at,ct)=>Ss(at,_e[ct],rt))}});const cv=.95047,hv=1.08883,fv=4/29,qm=6/29,l_=3*qm*qm,dv=Math.PI/180,o0=180/Math.PI;function Ry(nt){return nt>.008856451679035631?Math.pow(nt,1/3):nt/l_+fv}function Zm(nt){return nt>qm?nt*nt*nt:l_*(nt-fv)}function gv(nt){return 255*(nt<=.0031308?12.92*nt:1.055*Math.pow(nt,1/2.4)-.055)}function Iy(nt){return(nt/=255)<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)}function mu(nt){const _e=Iy(nt.r),rt=Iy(nt.g),at=Iy(nt.b),ct=Ry((.4124564*_e+.3575761*rt+.1804375*at)/cv),vt=Ry((.2126729*_e+.7151522*rt+.072175*at)/1);return{l:116*vt-16,a:500*(ct-vt),b:200*(vt-Ry((.0193339*_e+.119192*rt+.9503041*at)/hv)),alpha:nt.a}}function u_(nt){let _e=(nt.l+16)/116,rt=isNaN(nt.a)?_e:_e+nt.a/500,at=isNaN(nt.b)?_e:_e-nt.b/200;return _e=1*Zm(_e),rt=cv*Zm(rt),at=hv*Zm(at),new Fs(gv(3.2404542*rt-1.5371385*_e-.4985314*at),gv(-.969266*rt+1.8760108*_e+.041556*at),gv(.0556434*rt-.2040259*_e+1.0572252*at),nt.alpha)}function Oy(nt,_e,rt){const at=_e-nt;return nt+rt*(at>180||at<-180?at-360*Math.round(at/360):at)}const Ym={forward:mu,reverse:u_,interpolate:function(nt,_e,rt){return{l:Ss(nt.l,_e.l,rt),a:Ss(nt.a,_e.a,rt),b:Ss(nt.b,_e.b,rt),alpha:Ss(nt.alpha,_e.alpha,rt)}}},Km={forward:function(nt){const{l:_e,a:rt,b:at}=mu(nt),ct=Math.atan2(at,rt)*o0;return{h:ct<0?ct+360:ct,c:Math.sqrt(rt*rt+at*at),l:_e,alpha:nt.a}},reverse:function(nt){const _e=nt.h*dv,rt=nt.c;return u_({l:nt.l,a:Math.cos(_e)*rt,b:Math.sin(_e)*rt,alpha:nt.alpha})},interpolate:function(nt,_e,rt){return{h:Oy(nt.h,_e.h,rt),c:Ss(nt.c,_e.c,rt),l:Ss(nt.l,_e.l,rt),alpha:Ss(nt.alpha,_e.alpha,rt)}}};var s0=Object.freeze({__proto__:null,lab:Ym,hcl:Km});class c_{constructor(_e,rt,at,ct,vt){this.type=_e,this.operator=rt,this.interpolation=at,this.input=ct,this.labels=[],this.outputs=[];for(const[At,Bt]of vt)this.labels.push(At),this.outputs.push(Bt)}static interpolationFactor(_e,rt,at,ct){let vt=0;if(_e.name==="exponential")vt=h_(rt,_e.base,at,ct);else if(_e.name==="linear")vt=h_(rt,1,at,ct);else if(_e.name==="cubic-bezier"){const At=_e.controlPoints;vt=new Rt(At[0],At[1],At[2],At[3]).solve(h_(rt,1,at,ct))}return vt}static parse(_e,rt){let[at,ct,vt,...At]=_e;if(!Array.isArray(ct)||ct.length===0)return rt.error("Expected an interpolation type expression.",1);if(ct[0]==="linear")ct={name:"linear"};else if(ct[0]==="exponential"){const Yt=ct[1];if(typeof Yt!="number")return rt.error("Exponential interpolation requires a numeric base.",1,1);ct={name:"exponential",base:Yt}}else{if(ct[0]!=="cubic-bezier")return rt.error(`Unknown interpolation type ${String(ct[0])}`,1,0);{const Yt=ct.slice(1);if(Yt.length!==4||Yt.some(sn=>typeof sn!="number"||sn<0||sn>1))return rt.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ct={name:"cubic-bezier",controlPoints:Yt}}}if(_e.length-1<4)return rt.error(`Expected at least 4 arguments, but found only ${_e.length-1}.`);if((_e.length-1)%2!=0)return rt.error("Expected an even number of arguments.");if(vt=rt.parse(vt,2,po),!vt)return null;const Bt=[];let Wt=null;at==="interpolate-hcl"||at==="interpolate-lab"?Wt=Eu:rt.expectedType&&rt.expectedType.kind!=="value"&&(Wt=rt.expectedType);for(let Yt=0;Yt<At.length;Yt+=2){const sn=At[Yt],fn=At[Yt+1],pn=Yt+3,An=Yt+4;if(typeof sn!="number")return rt.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',pn);if(Bt.length&&Bt[Bt.length-1][0]>=sn)return rt.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',pn);const Tn=rt.parse(fn,An,Wt);if(!Tn)return null;Wt=Wt||Tn.type,Bt.push([sn,Tn])}return Wt.kind==="number"||Wt.kind==="color"||Wt.kind==="array"&&Wt.itemType.kind==="number"&&typeof Wt.N=="number"?new c_(Wt,at,ct,vt,Bt):rt.error(`Type ${ds(Wt)} is not interpolatable.`)}evaluate(_e){const rt=this.labels,at=this.outputs;if(rt.length===1)return at[0].evaluate(_e);const ct=this.input.evaluate(_e);if(ct<=rt[0])return at[0].evaluate(_e);const vt=rt.length;if(ct>=rt[vt-1])return at[vt-1].evaluate(_e);const At=Cy(rt,ct),Bt=c_.interpolationFactor(this.interpolation,ct,rt[At],rt[At+1]),Wt=at[At].evaluate(_e),Yt=at[At+1].evaluate(_e);return this.operator==="interpolate"?lp[this.type.kind.toLowerCase()](Wt,Yt,Bt):this.operator==="interpolate-hcl"?Km.reverse(Km.interpolate(Km.forward(Wt),Km.forward(Yt),Bt)):Ym.reverse(Ym.interpolate(Ym.forward(Wt),Ym.forward(Yt),Bt))}eachChild(_e){_e(this.input);for(const rt of this.outputs)_e(rt)}outputDefined(){return this.outputs.every(_e=>_e.outputDefined())}serialize(){let _e;_e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const rt=[this.operator,_e,this.input.serialize()];for(let at=0;at<this.labels.length;at++)rt.push(this.labels[at],this.outputs[at].serialize());return rt}}function h_(nt,_e,rt,at){const ct=at-rt,vt=nt-rt;return ct===0?0:_e===1?vt/ct:(Math.pow(_e,vt)-1)/(Math.pow(_e,ct)-1)}var vp=c_;class pv{constructor(_e,rt){this.type=_e,this.args=rt}static parse(_e,rt){if(_e.length<2)return rt.error("Expectected at least one argument.");let at=null;const ct=rt.expectedType;ct&&ct.kind!=="value"&&(at=ct);const vt=[];for(const Bt of _e.slice(1)){const Wt=rt.parse(Bt,1+vt.length,at,void 0,{typeAnnotation:"omit"});if(!Wt)return null;at=at||Wt.type,vt.push(Wt)}const At=ct&&vt.some(Bt=>js(ct,Bt.type));return new pv(At?Jo:at,vt)}evaluate(_e){let rt,at=null,ct=0;for(const vt of this.args){if(ct++,at=vt.evaluate(_e),at&&at instanceof ln&&!at.available&&(rt||(rt=at),at=null,ct===this.args.length))return rt;if(at!==null)break}return at}eachChild(_e){this.args.forEach(_e)}outputDefined(){return this.args.every(_e=>_e.outputDefined())}serialize(){const _e=["coalesce"];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}var Om=pv;class mv{constructor(_e,rt){this.type=rt.type,this.bindings=[].concat(_e),this.result=rt}evaluate(_e){return this.result.evaluate(_e)}eachChild(_e){for(const rt of this.bindings)_e(rt[1]);_e(this.result)}static parse(_e,rt){if(_e.length<4)return rt.error(`Expected at least 3 arguments, but found ${_e.length-1} instead.`);const at=[];for(let vt=1;vt<_e.length-1;vt+=2){const At=_e[vt];if(typeof At!="string")return rt.error(`Expected string, but found ${typeof At} instead.`,vt);if(/[^a-zA-Z0-9_]/.test(At))return rt.error("Variable names must contain only alphanumeric characters or '_'.",vt);const Bt=rt.parse(_e[vt+1],vt+1);if(!Bt)return null;at.push([At,Bt])}const ct=rt.parse(_e[_e.length-1],_e.length-1,rt.expectedType,at);return ct?new mv(at,ct):null}outputDefined(){return this.result.outputDefined()}serialize(){const _e=["let"];for(const[rt,at]of this.bindings)_e.push(rt,at.serialize());return _e.push(this.result.serialize()),_e}}var yv=mv;class Xm{constructor(_e,rt,at){this.type=_e,this.index=rt,this.input=at}static parse(_e,rt){if(_e.length!==3)return rt.error(`Expected 2 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,po),ct=rt.parse(_e[2],2,Ml(rt.expectedType||Jo));return at&&ct?new Xm(ct.type.itemType,at,ct):null}evaluate(_e){const rt=this.index.evaluate(_e),at=this.input.evaluate(_e);if(rt<0)throw new Tr(`Array index out of bounds: ${rt} < 0.`);if(rt>=at.length)throw new Tr(`Array index out of bounds: ${rt} > ${at.length-1}.`);if(rt!==Math.floor(rt))throw new Tr(`Array index must be an integer, but found ${rt} instead.`);return at[rt]}eachChild(_e){_e(this.index),_e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var _v=Xm;class bp{constructor(_e,rt){this.type=is,this.needle=_e,this.haystack=rt}static parse(_e,rt){if(_e.length!==3)return rt.error(`Expected 2 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,Jo),ct=rt.parse(_e[2],2,Jo);return at&&ct?Vu(at.type,[is,ns,po,tp,Jo])?new bp(at,ct):rt.error(`Expected first argument to be of type boolean, string, number or null, but found ${ds(at.type)} instead`):null}evaluate(_e){const rt=this.needle.evaluate(_e),at=this.haystack.evaluate(_e);if(at==null)return!1;if(!Ks(rt,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${ds(zn(rt))} instead.`);if(!Ks(at,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${ds(zn(at))} instead.`);return at.indexOf(rt)>=0}eachChild(_e){_e(this.needle),_e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var f_=bp;class My{constructor(_e,rt,at){this.type=po,this.needle=_e,this.haystack=rt,this.fromIndex=at}static parse(_e,rt){if(_e.length<=2||_e.length>=5)return rt.error(`Expected 3 or 4 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,Jo),ct=rt.parse(_e[2],2,Jo);if(!at||!ct)return null;if(!Vu(at.type,[is,ns,po,tp,Jo]))return rt.error(`Expected first argument to be of type boolean, string, number or null, but found ${ds(at.type)} instead`);if(_e.length===4){const vt=rt.parse(_e[3],3,po);return vt?new My(at,ct,vt):null}return new My(at,ct)}evaluate(_e){const rt=this.needle.evaluate(_e),at=this.haystack.evaluate(_e);if(!Ks(rt,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${ds(zn(rt))} instead.`);if(!Ks(at,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${ds(zn(at))} instead.`);if(this.fromIndex){const ct=this.fromIndex.evaluate(_e);return at.indexOf(rt,ct)}return at.indexOf(rt)}eachChild(_e){_e(this.needle),_e(this.haystack),this.fromIndex&&_e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const _e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),_e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var a0=My;class d_{constructor(_e,rt,at,ct,vt,At){this.inputType=_e,this.type=rt,this.input=at,this.cases=ct,this.outputs=vt,this.otherwise=At}static parse(_e,rt){if(_e.length<5)return rt.error(`Expected at least 4 arguments, but found only ${_e.length-1}.`);if(_e.length%2!=1)return rt.error("Expected an even number of arguments.");let at,ct;rt.expectedType&&rt.expectedType.kind!=="value"&&(ct=rt.expectedType);const vt={},At=[];for(let Yt=2;Yt<_e.length-1;Yt+=2){let sn=_e[Yt];const fn=_e[Yt+1];Array.isArray(sn)||(sn=[sn]);const pn=rt.concat(Yt);if(sn.length===0)return pn.error("Expected at least one branch label.");for(const Tn of sn){if(typeof Tn!="number"&&typeof Tn!="string")return pn.error("Branch labels must be numbers or strings.");if(typeof Tn=="number"&&Math.abs(Tn)>Number.MAX_SAFE_INTEGER)return pn.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Tn=="number"&&Math.floor(Tn)!==Tn)return pn.error("Numeric branch labels must be integer values.");if(at){if(pn.checkSubtype(at,zn(Tn)))return null}else at=zn(Tn);if(vt[String(Tn)]!==void 0)return pn.error("Branch labels must be unique.");vt[String(Tn)]=At.length}const An=rt.parse(fn,Yt,ct);if(!An)return null;ct=ct||An.type,At.push(An)}const Bt=rt.parse(_e[1],1,Jo);if(!Bt)return null;const Wt=rt.parse(_e[_e.length-1],_e.length-1,ct);return Wt?Bt.type.kind!=="value"&&rt.concat(1).checkSubtype(at,Bt.type)?null:new d_(at,ct,Bt,vt,At,Wt):null}evaluate(_e){const rt=this.input.evaluate(_e);return(zn(rt)===this.inputType&&this.outputs[this.cases[rt]]||this.otherwise).evaluate(_e)}eachChild(_e){_e(this.input),this.outputs.forEach(_e),_e(this.otherwise)}outputDefined(){return this.outputs.every(_e=>_e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const _e=["match",this.input.serialize()],rt=Object.keys(this.cases).sort(),at=[],ct={};for(const At of rt){const Bt=ct[this.cases[At]];Bt===void 0?(ct[this.cases[At]]=at.length,at.push([this.cases[At],[At]])):at[Bt][1].push(At)}const vt=At=>this.inputType.kind==="number"?Number(At):At;for(const[At,Bt]of at)_e.push(Bt.length===1?vt(Bt[0]):Bt.map(vt)),_e.push(this.outputs[At].serialize());return _e.push(this.otherwise.serialize()),_e}}var Jm=d_;class Pu{constructor(_e,rt,at){this.type=_e,this.branches=rt,this.otherwise=at}static parse(_e,rt){if(_e.length<4)return rt.error(`Expected at least 3 arguments, but found only ${_e.length-1}.`);if(_e.length%2!=0)return rt.error("Expected an odd number of arguments.");let at;rt.expectedType&&rt.expectedType.kind!=="value"&&(at=rt.expectedType);const ct=[];for(let At=1;At<_e.length-1;At+=2){const Bt=rt.parse(_e[At],At,is);if(!Bt)return null;const Wt=rt.parse(_e[At+1],At+1,at);if(!Wt)return null;ct.push([Bt,Wt]),at=at||Wt.type}const vt=rt.parse(_e[_e.length-1],_e.length-1,at);return vt?new Pu(at,ct,vt):null}evaluate(_e){for(const[rt,at]of this.branches)if(rt.evaluate(_e))return at.evaluate(_e);return this.otherwise.evaluate(_e)}eachChild(_e){for(const[rt,at]of this.branches)_e(rt),_e(at);_e(this.otherwise)}outputDefined(){return this.branches.every(([_e,rt])=>rt.outputDefined())&&this.otherwise.outputDefined()}serialize(){const _e=["case"];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}var l0=Pu;class g_{constructor(_e,rt,at,ct){this.type=_e,this.input=rt,this.beginIndex=at,this.endIndex=ct}static parse(_e,rt){if(_e.length<=2||_e.length>=5)return rt.error(`Expected 3 or 4 arguments, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1,Jo),ct=rt.parse(_e[2],2,po);if(!at||!ct)return null;if(!Vu(at.type,[Ml(Jo),ns,Jo]))return rt.error(`Expected first argument to be of type array or string, but found ${ds(at.type)} instead`);if(_e.length===4){const vt=rt.parse(_e[3],3,po);return vt?new g_(at.type,at,ct,vt):null}return new g_(at.type,at,ct)}evaluate(_e){const rt=this.input.evaluate(_e),at=this.beginIndex.evaluate(_e);if(!Ks(rt,["string","array"]))throw new Tr(`Expected first argument to be of type array or string, but found ${ds(zn(rt))} instead.`);if(this.endIndex){const ct=this.endIndex.evaluate(_e);return rt.slice(at,ct)}return rt.slice(at)}eachChild(_e){_e(this.input),_e(this.beginIndex),this.endIndex&&_e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const _e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),_e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var p_=g_;function vv(nt,_e){return nt==="=="||nt==="!="?_e.kind==="boolean"||_e.kind==="string"||_e.kind==="number"||_e.kind==="null"||_e.kind==="value":_e.kind==="string"||_e.kind==="number"||_e.kind==="value"}function bv(nt,_e,rt,at){return at.compare(_e,rt)===0}function Qm(nt,_e,rt){const at=nt!=="=="&&nt!=="!=";return class cE{constructor(vt,At,Bt){this.type=is,this.lhs=vt,this.rhs=At,this.collator=Bt,this.hasUntypedArgument=vt.type.kind==="value"||At.type.kind==="value"}static parse(vt,At){if(vt.length!==3&&vt.length!==4)return At.error("Expected two or three arguments.");const Bt=vt[0];let Wt=At.parse(vt[1],1,Jo);if(!Wt)return null;if(!vv(Bt,Wt.type))return At.concat(1).error(`"${Bt}" comparisons are not supported for type '${ds(Wt.type)}'.`);let Yt=At.parse(vt[2],2,Jo);if(!Yt)return null;if(!vv(Bt,Yt.type))return At.concat(2).error(`"${Bt}" comparisons are not supported for type '${ds(Yt.type)}'.`);if(Wt.type.kind!==Yt.type.kind&&Wt.type.kind!=="value"&&Yt.type.kind!=="value")return At.error(`Cannot compare types '${ds(Wt.type)}' and '${ds(Yt.type)}'.`);at&&(Wt.type.kind==="value"&&Yt.type.kind!=="value"?Wt=new ko(Yt.type,[Wt]):Wt.type.kind!=="value"&&Yt.type.kind==="value"&&(Yt=new ko(Wt.type,[Yt])));let sn=null;if(vt.length===4){if(Wt.type.kind!=="string"&&Yt.type.kind!=="string"&&Wt.type.kind!=="value"&&Yt.type.kind!=="value")return At.error("Cannot use collator to compare non-string types.");if(sn=At.parse(vt[3],3,Uu),!sn)return null}return new cE(Wt,Yt,sn)}evaluate(vt){const At=this.lhs.evaluate(vt),Bt=this.rhs.evaluate(vt);if(at&&this.hasUntypedArgument){const Wt=zn(At),Yt=zn(Bt);if(Wt.kind!==Yt.kind||Wt.kind!=="string"&&Wt.kind!=="number")throw new Tr(`Expected arguments for "${nt}" to be (string, string) or (number, number), but found (${Wt.kind}, ${Yt.kind}) instead.`)}if(this.collator&&!at&&this.hasUntypedArgument){const Wt=zn(At),Yt=zn(Bt);if(Wt.kind!=="string"||Yt.kind!=="string")return _e(vt,At,Bt)}return this.collator?rt(vt,At,Bt,this.collator.evaluate(vt)):_e(vt,At,Bt)}eachChild(vt){vt(this.lhs),vt(this.rhs),this.collator&&vt(this.collator)}outputDefined(){return!0}serialize(){const vt=[nt];return this.eachChild(At=>{vt.push(At.serialize())}),vt}}}const ey=Qm("==",function(nt,_e,rt){return _e===rt},bv),Rr=Qm("!=",function(nt,_e,rt){return _e!==rt},function(nt,_e,rt,at){return!bv(0,_e,rt,at)}),Xr=Qm("<",function(nt,_e,rt){return _e<rt},function(nt,_e,rt,at){return at.compare(_e,rt)<0}),zr=Qm(">",function(nt,_e,rt){return _e>rt},function(nt,_e,rt,at){return at.compare(_e,rt)>0}),jo=Qm("<=",function(nt,_e,rt){return _e<=rt},function(nt,_e,rt,at){return at.compare(_e,rt)<=0}),hs=Qm(">=",function(nt,_e,rt){return _e>=rt},function(nt,_e,rt,at){return at.compare(_e,rt)>=0});class Ds{constructor(_e,rt,at,ct,vt,At){this.type=ns,this.number=_e,this.locale=rt,this.currency=at,this.unit=ct,this.minFractionDigits=vt,this.maxFractionDigits=At}static parse(_e,rt){if(_e.length!==3)return rt.error("Expected two arguments.");const at=rt.parse(_e[1],1,po);if(!at)return null;const ct=_e[2];if(typeof ct!="object"||Array.isArray(ct))return rt.error("NumberFormat options argument must be an object.");let vt=null;if(ct.locale&&(vt=rt.parse(ct.locale,1,ns),!vt))return null;let At=null;if(ct.currency&&(At=rt.parse(ct.currency,1,ns),!At))return null;let Bt=null;if(ct.unit&&(Bt=rt.parse(ct.unit,1,ns),!Bt))return null;let Wt=null;if(ct["min-fraction-digits"]&&(Wt=rt.parse(ct["min-fraction-digits"],1,po),!Wt))return null;let Yt=null;return ct["max-fraction-digits"]&&(Yt=rt.parse(ct["max-fraction-digits"],1,po),!Yt)?null:new Ds(at,vt,At,Bt,Wt,Yt)}evaluate(_e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(_e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(_e):void 0,unit:this.unit?this.unit.evaluate(_e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(_e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(_e):void 0}).format(this.number.evaluate(_e))}eachChild(_e){_e(this.number),this.locale&&_e(this.locale),this.currency&&_e(this.currency),this.unit&&_e(this.unit),this.minFractionDigits&&_e(this.minFractionDigits),this.maxFractionDigits&&_e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const _e={};return this.locale&&(_e.locale=this.locale.serialize()),this.currency&&(_e.currency=this.currency.serialize()),this.unit&&(_e.unit=this.unit.serialize()),this.minFractionDigits&&(_e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(_e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),_e]}}class Cl{constructor(_e){this.type=po,this.input=_e}static parse(_e,rt){if(_e.length!==2)return rt.error(`Expected 1 argument, but found ${_e.length-1} instead.`);const at=rt.parse(_e[1],1);return at?at.type.kind!=="array"&&at.type.kind!=="string"&&at.type.kind!=="value"?rt.error(`Expected argument of type string or array, but found ${ds(at.type)} instead.`):new Cl(at):null}evaluate(_e){const rt=this.input.evaluate(_e);if(typeof rt=="string"||Array.isArray(rt))return rt.length;throw new Tr(`Expected value to be of type string or array, but found ${ds(zn(rt))} instead.`)}eachChild(_e){_e(this.input)}outputDefined(){return!1}serialize(){const _e=["length"];return this.eachChild(rt=>{_e.push(rt.serialize())}),_e}}const Xs={"==":ey,"!=":Rr,">":zr,"<":Xr,">=":hs,"<=":jo,array:ko,at:_v,boolean:ko,case:l0,coalesce:Om,collator:e_,format:go,image:To,in:f_,"index-of":a0,interpolate:vp,"interpolate-hcl":vp,"interpolate-lab":vp,length:Cl,let:yv,literal:Jn,match:Jm,number:ko,"number-format":Ds,object:ko,slice:p_,step:Im,string:ko,"to-boolean":xo,"to-color":xo,"to-number":xo,"to-string":xo,var:o_,within:ms};function m_(nt,[_e,rt,at,ct]){_e=_e.evaluate(nt),rt=rt.evaluate(nt),at=at.evaluate(nt);const vt=ct?ct.evaluate(nt):1,At=wn(_e,rt,at,vt);if(At)throw new Tr(At);return new Fs(_e/255*vt,rt/255*vt,at/255*vt,vt)}function u0(nt,_e){return nt in _e}function Tu(nt,_e){const rt=_e[nt];return rt===void 0?null:rt}function wp(nt){return{type:nt}}Gu.register(Xs,{error:[{kind:"error"},[ns],(nt,[_e])=>{throw new Tr(_e.evaluate(nt))}],typeof:[ns,[Jo],(nt,[_e])=>ds(zn(_e.evaluate(nt)))],"to-rgba":[Ml(po,4),[Eu],(nt,[_e])=>_e.evaluate(nt).toArray()],rgb:[Eu,[po,po,po],m_],rgba:[Eu,[po,po,po,po],m_],has:{type:is,overloads:[[[ns],(nt,[_e])=>u0(_e.evaluate(nt),nt.properties())],[[ns,np],(nt,[_e,rt])=>u0(_e.evaluate(nt),rt.evaluate(nt))]]},get:{type:Jo,overloads:[[[ns],(nt,[_e])=>Tu(_e.evaluate(nt),nt.properties())],[[ns,np],(nt,[_e,rt])=>Tu(_e.evaluate(nt),rt.evaluate(nt))]]},"feature-state":[Jo,[ns],(nt,[_e])=>Tu(_e.evaluate(nt),nt.featureState||{})],properties:[np,[],nt=>nt.properties()],"geometry-type":[ns,[],nt=>nt.geometryType()],id:[Jo,[],nt=>nt.id()],zoom:[po,[],nt=>nt.globals.zoom],pitch:[po,[],nt=>nt.globals.pitch||0],"distance-from-center":[po,[],nt=>nt.distanceFromCenter()],"heatmap-density":[po,[],nt=>nt.globals.heatmapDensity||0],"line-progress":[po,[],nt=>nt.globals.lineProgress||0],"sky-radial-progress":[po,[],nt=>nt.globals.skyRadialProgress||0],accumulated:[Jo,[],nt=>nt.globals.accumulated===void 0?null:nt.globals.accumulated],"+":[po,wp(po),(nt,_e)=>{let rt=0;for(const at of _e)rt+=at.evaluate(nt);return rt}],"*":[po,wp(po),(nt,_e)=>{let rt=1;for(const at of _e)rt*=at.evaluate(nt);return rt}],"-":{type:po,overloads:[[[po,po],(nt,[_e,rt])=>_e.evaluate(nt)-rt.evaluate(nt)],[[po],(nt,[_e])=>-_e.evaluate(nt)]]},"/":[po,[po,po],(nt,[_e,rt])=>_e.evaluate(nt)/rt.evaluate(nt)],"%":[po,[po,po],(nt,[_e,rt])=>_e.evaluate(nt)%rt.evaluate(nt)],ln2:[po,[],()=>Math.LN2],pi:[po,[],()=>Math.PI],e:[po,[],()=>Math.E],"^":[po,[po,po],(nt,[_e,rt])=>Math.pow(_e.evaluate(nt),rt.evaluate(nt))],sqrt:[po,[po],(nt,[_e])=>Math.sqrt(_e.evaluate(nt))],log10:[po,[po],(nt,[_e])=>Math.log(_e.evaluate(nt))/Math.LN10],ln:[po,[po],(nt,[_e])=>Math.log(_e.evaluate(nt))],log2:[po,[po],(nt,[_e])=>Math.log(_e.evaluate(nt))/Math.LN2],sin:[po,[po],(nt,[_e])=>Math.sin(_e.evaluate(nt))],cos:[po,[po],(nt,[_e])=>Math.cos(_e.evaluate(nt))],tan:[po,[po],(nt,[_e])=>Math.tan(_e.evaluate(nt))],asin:[po,[po],(nt,[_e])=>Math.asin(_e.evaluate(nt))],acos:[po,[po],(nt,[_e])=>Math.acos(_e.evaluate(nt))],atan:[po,[po],(nt,[_e])=>Math.atan(_e.evaluate(nt))],min:[po,wp(po),(nt,_e)=>Math.min(..._e.map(rt=>rt.evaluate(nt)))],max:[po,wp(po),(nt,_e)=>Math.max(..._e.map(rt=>rt.evaluate(nt)))],abs:[po,[po],(nt,[_e])=>Math.abs(_e.evaluate(nt))],round:[po,[po],(nt,[_e])=>{const rt=_e.evaluate(nt);return rt<0?-Math.round(-rt):Math.round(rt)}],floor:[po,[po],(nt,[_e])=>Math.floor(_e.evaluate(nt))],ceil:[po,[po],(nt,[_e])=>Math.ceil(_e.evaluate(nt))],"filter-==":[is,[ns,Jo],(nt,[_e,rt])=>nt.properties()[_e.value]===rt.value],"filter-id-==":[is,[Jo],(nt,[_e])=>nt.id()===_e.value],"filter-type-==":[is,[ns],(nt,[_e])=>nt.geometryType()===_e.value],"filter-<":[is,[ns,Jo],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ct=rt.value;return typeof at==typeof ct&&at<ct}],"filter-id-<":[is,[Jo],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt<at}],"filter->":[is,[ns,Jo],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ct=rt.value;return typeof at==typeof ct&&at>ct}],"filter-id->":[is,[Jo],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt>at}],"filter-<=":[is,[ns,Jo],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ct=rt.value;return typeof at==typeof ct&&at<=ct}],"filter-id-<=":[is,[Jo],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt<=at}],"filter->=":[is,[ns,Jo],(nt,[_e,rt])=>{const at=nt.properties()[_e.value],ct=rt.value;return typeof at==typeof ct&&at>=ct}],"filter-id->=":[is,[Jo],(nt,[_e])=>{const rt=nt.id(),at=_e.value;return typeof rt==typeof at&&rt>=at}],"filter-has":[is,[Jo],(nt,[_e])=>_e.value in nt.properties()],"filter-has-id":[is,[],nt=>nt.id()!==null&&nt.id()!==void 0],"filter-type-in":[is,[Ml(ns)],(nt,[_e])=>_e.value.indexOf(nt.geometryType())>=0],"filter-id-in":[is,[Ml(Jo)],(nt,[_e])=>_e.value.indexOf(nt.id())>=0],"filter-in-small":[is,[ns,Ml(Jo)],(nt,[_e,rt])=>rt.value.indexOf(nt.properties()[_e.value])>=0],"filter-in-large":[is,[ns,Ml(Jo)],(nt,[_e,rt])=>function(at,ct,vt,At){for(;vt<=At;){const Bt=vt+At>>1;if(ct[Bt]===at)return!0;ct[Bt]>at?At=Bt-1:vt=Bt+1}return!1}(nt.properties()[_e.value],rt.value,0,rt.value.length-1)],all:{type:is,overloads:[[[is,is],(nt,[_e,rt])=>_e.evaluate(nt)&&rt.evaluate(nt)],[wp(is),(nt,_e)=>{for(const rt of _e)if(!rt.evaluate(nt))return!1;return!0}]]},any:{type:is,overloads:[[[is,is],(nt,[_e,rt])=>_e.evaluate(nt)||rt.evaluate(nt)],[wp(is),(nt,_e)=>{for(const rt of _e)if(rt.evaluate(nt))return!0;return!1}]]},"!":[is,[is],(nt,[_e])=>!_e.evaluate(nt)],"is-supported-script":[is,[ns],(nt,[_e])=>{const rt=nt.globals&&nt.globals.isSupportedScript;return!rt||rt(_e.evaluate(nt))}],upcase:[ns,[ns],(nt,[_e])=>_e.evaluate(nt).toUpperCase()],downcase:[ns,[ns],(nt,[_e])=>_e.evaluate(nt).toLowerCase()],concat:[ns,wp(Jo),(nt,_e)=>_e.map(rt=>sr(rt.evaluate(nt))).join("")],"resolved-locale":[ns,[Uu],(nt,[_e])=>_e.evaluate(nt).resolvedLocale()]});var ty=Xs;function sm(nt){return{result:"success",value:nt}}function Hu(nt){return{result:"error",value:nt}}function Np(nt){return nt["property-type"]==="data-driven"||nt["property-type"]==="cross-faded-data-driven"}function Ws(nt){return!!nt.expression&&nt.expression.parameters.indexOf("zoom")>-1}function Sp(nt){return!!nt.expression&&nt.expression.interpolated}function Cs(nt){return nt instanceof Number?"number":nt instanceof String?"string":nt instanceof Boolean?"boolean":Array.isArray(nt)?"array":nt===null?"null":typeof nt}function $u(nt){return typeof nt=="object"&&nt!==null&&!Array.isArray(nt)}function E1(nt){return nt}function c0(nt,_e){const rt=_e.type==="color",at=nt.stops&&typeof nt.stops[0][0]=="object",ct=at||!(at||nt.property!==void 0),vt=nt.type||(Sp(_e)?"exponential":"interval");if(rt&&((nt=ga({},nt)).stops&&(nt.stops=nt.stops.map(Yt=>[Yt[0],Fs.parse(Yt[1])])),nt.default=Fs.parse(nt.default?nt.default:_e.default)),nt.colorSpace&&nt.colorSpace!=="rgb"&&!s0[nt.colorSpace])throw new Error(`Unknown color space: ${nt.colorSpace}`);let At,Bt,Wt;if(vt==="exponential")At=ry;else if(vt==="interval")At=xp;else if(vt==="categorical"){At=y_,Bt=Object.create(null);for(const Yt of nt.stops)Bt[Yt[0]]=Yt[1];Wt=typeof nt.stops[0][0]}else{if(vt!=="identity")throw new Error(`Unknown function type "${vt}"`);At=__}if(at){const Yt={},sn=[];for(let An=0;An<nt.stops.length;An++){const Tn=nt.stops[An],kn=Tn[0].zoom;Yt[kn]===void 0&&(Yt[kn]={zoom:kn,type:nt.type,property:nt.property,default:nt.default,stops:[]},sn.push(kn)),Yt[kn].stops.push([Tn[0].value,Tn[1]])}const fn=[];for(const An of sn)fn.push([Yt[An].zoom,c0(Yt[An],_e)]);const pn={name:"linear"};return{kind:"composite",interpolationType:pn,interpolationFactor:vp.interpolationFactor.bind(void 0,pn),zoomStops:fn.map(An=>An[0]),evaluate:({zoom:An},Tn)=>ry({stops:fn,base:nt.base},_e,An).evaluate(An,Tn)}}if(ct){const Yt=vt==="exponential"?{name:"exponential",base:nt.base!==void 0?nt.base:1}:null;return{kind:"camera",interpolationType:Yt,interpolationFactor:vp.interpolationFactor.bind(void 0,Yt),zoomStops:nt.stops.map(sn=>sn[0]),evaluate:({zoom:sn})=>At(nt,_e,sn,Bt,Wt)}}return{kind:"source",evaluate(Yt,sn){const fn=sn&&sn.properties?sn.properties[nt.property]:void 0;return fn===void 0?ny(nt.default,_e.default):At(nt,_e,fn,Bt,Wt)}}}function ny(nt,_e,rt){return nt!==void 0?nt:_e!==void 0?_e:rt!==void 0?rt:void 0}function y_(nt,_e,rt,at,ct){return ny(typeof rt===ct?at[rt]:void 0,nt.default,_e.default)}function xp(nt,_e,rt){if(Cs(rt)!=="number")return ny(nt.default,_e.default);const at=nt.stops.length;if(at===1||rt<=nt.stops[0][0])return nt.stops[0][1];if(rt>=nt.stops[at-1][0])return nt.stops[at-1][1];const ct=Cy(nt.stops.map(vt=>vt[0]),rt);return nt.stops[ct][1]}function ry(nt,_e,rt){const at=nt.base!==void 0?nt.base:1;if(Cs(rt)!=="number")return ny(nt.default,_e.default);const ct=nt.stops.length;if(ct===1||rt<=nt.stops[0][0])return nt.stops[0][1];if(rt>=nt.stops[ct-1][0])return nt.stops[ct-1][1];const vt=Cy(nt.stops.map(sn=>sn[0]),rt),At=function(sn,fn,pn,An){const Tn=An-pn,kn=sn-pn;return Tn===0?0:fn===1?kn/Tn:(Math.pow(fn,kn)-1)/(Math.pow(fn,Tn)-1)}(rt,at,nt.stops[vt][0],nt.stops[vt+1][0]),Bt=nt.stops[vt][1],Wt=nt.stops[vt+1][1];let Yt=lp[_e.type]||E1;if(nt.colorSpace&&nt.colorSpace!=="rgb"){const sn=s0[nt.colorSpace];Yt=(fn,pn)=>sn.reverse(sn.interpolate(sn.forward(fn),sn.forward(pn),At))}return typeof Bt.evaluate=="function"?{evaluate(...sn){const fn=Bt.evaluate.apply(void 0,sn),pn=Wt.evaluate.apply(void 0,sn);if(fn!==void 0&&pn!==void 0)return Yt(fn,pn,At)}}:Yt(Bt,Wt,At)}function __(nt,_e,rt){return _e.type==="color"?rt=Fs.parse(rt):_e.type==="formatted"?rt=zt.fromString(rt.toString()):_e.type==="resolvedImage"?rt=ln.fromString(rt.toString()):Cs(rt)===_e.type||_e.type==="enum"&&_e.values[rt]||(rt=void 0),ny(rt,nt.default,_e.default)}class am{constructor(_e,rt){this.expression=_e,this._warningHistory={},this._evaluator=new ru,this._defaultValue=rt?function(at){return at.type==="color"&&($u(at.default)||Array.isArray(at.default))?new Fs(0,0,0,0):at.type==="color"?Fs.parse(at.default)||null:at.default===void 0?null:at.default}(rt):null,this._enumValues=rt&&rt.type==="enum"?rt.values:null}evaluateWithoutErrorHandling(_e,rt,at,ct,vt,At,Bt,Wt){return this._evaluator.globals=_e,this._evaluator.feature=rt,this._evaluator.featureState=at,this._evaluator.canonical=ct||null,this._evaluator.availableImages=vt||null,this._evaluator.formattedSection=At,this._evaluator.featureTileCoord=Bt||null,this._evaluator.featureDistanceData=Wt||null,this.expression.evaluate(this._evaluator)}evaluate(_e,rt,at,ct,vt,At,Bt,Wt){this._evaluator.globals=_e,this._evaluator.feature=rt||null,this._evaluator.featureState=at||null,this._evaluator.canonical=ct||null,this._evaluator.availableImages=vt||null,this._evaluator.formattedSection=At||null,this._evaluator.featureTileCoord=Bt||null,this._evaluator.featureDistanceData=Wt||null;try{const Yt=this.expression.evaluate(this._evaluator);if(Yt==null||typeof Yt=="number"&&Yt!=Yt)return this._defaultValue;if(this._enumValues&&!(Yt in this._enumValues))throw new Tr(`Expected value to be one of ${Object.keys(this._enumValues).map(sn=>JSON.stringify(sn)).join(", ")}, but found ${JSON.stringify(Yt)} instead.`);return Yt}catch(Yt){return this._warningHistory[Yt.message]||(this._warningHistory[Yt.message]=!0,typeof console<"u"&&console.warn(Yt.message)),this._defaultValue}}}function iy(nt){return Array.isArray(nt)&&nt.length>0&&typeof nt[0]=="string"&&nt[0]in ty}function lm(nt,_e){const rt=new Ty(ty,[],_e?function(ct){const vt={color:Eu,string:ns,number:po,enum:ns,boolean:is,formatted:zu,resolvedImage:fu};return ct.type==="array"?Ml(vt[ct.value]||Jo,ct.length):vt[ct.type]}(_e):void 0),at=rt.parse(nt,void 0,void 0,void 0,_e&&_e.type==="string"?{typeAnnotation:"coerce"}:void 0);return at?sm(new am(at,_e)):Hu(rt.errors)}class Mm{constructor(_e,rt){this.kind=_e,this._styleExpression=rt,this.isStateDependent=_e!=="constant"&&!$m(rt.expression)}evaluateWithoutErrorHandling(_e,rt,at,ct,vt,At){return this._styleExpression.evaluateWithoutErrorHandling(_e,rt,at,ct,vt,At)}evaluate(_e,rt,at,ct,vt,At){return this._styleExpression.evaluate(_e,rt,at,ct,vt,At)}}class Py{constructor(_e,rt,at,ct){this.kind=_e,this.zoomStops=at,this._styleExpression=rt,this.isStateDependent=_e!=="camera"&&!$m(rt.expression),this.interpolationType=ct}evaluateWithoutErrorHandling(_e,rt,at,ct,vt,At){return this._styleExpression.evaluateWithoutErrorHandling(_e,rt,at,ct,vt,At)}evaluate(_e,rt,at,ct,vt,At){return this._styleExpression.evaluate(_e,rt,at,ct,vt,At)}interpolationFactor(_e,rt,at){return this.interpolationType?vp.interpolationFactor(this.interpolationType,_e,rt,at):0}}function Up(nt,_e){if((nt=lm(nt,_e)).result==="error")return nt;const rt=nt.value.expression,at=im(rt);if(!at&&!Np(_e))return Hu([new Au("","data expressions not supported")]);const ct=Qs(rt,["zoom","pitch","distance-from-center"]);if(!ct&&!Ws(_e))return Hu([new Au("","zoom expressions not supported")]);const vt=um(rt);return vt||ct?vt instanceof Au?Hu([vt]):vt instanceof vp&&!Sp(_e)?Hu([new Au("",'"interpolate" expressions cannot be used with this property')]):sm(vt?new Py(at?"camera":"composite",nt.value,vt.labels,vt instanceof vp?vt.interpolation:void 0):new Mm(at?"constant":"source",nt.value)):Hu([new Au("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yu{constructor(_e,rt){this._parameters=_e,this._specification=rt,ga(this,c0(this._parameters,this._specification))}static deserialize(_e){return new yu(_e._parameters,_e._specification)}static serialize(_e){return{_parameters:_e._parameters,_specification:_e._specification}}}function um(nt){let _e=null;if(nt instanceof yv)_e=um(nt.result);else if(nt instanceof Om){for(const rt of nt.args)if(_e=um(rt),_e)break}else(nt instanceof Im||nt instanceof vp)&&nt.input instanceof Gu&&nt.input.name==="zoom"&&(_e=nt);return _e instanceof Au||nt.eachChild(rt=>{const at=um(rt);at instanceof Au?_e=at:!_e&&at?_e=new Au("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_e&&at&&_e!==at&&(_e=new Au("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_e}class wo{constructor(_e,rt,at,ct){this.message=(_e?`${_e}: `:"")+at,ct&&(this.identifier=ct),rt!=null&&rt.__line__&&(this.line=rt.__line__)}}function ku(nt){const _e=nt.key,rt=nt.value,at=nt.valueSpec||{},ct=nt.objectElementValidators||{},vt=nt.style,At=nt.styleSpec;let Bt=[];const Wt=Cs(rt);if(Wt!=="object")return[new wo(_e,rt,`object expected, ${Wt} found`)];for(const Yt in rt){const sn=Yt.split(".")[0],fn=at[sn]||at["*"];let pn;ct[sn]?pn=ct[sn]:at[sn]?pn=Wl:ct["*"]?pn=ct["*"]:at["*"]&&(pn=Wl),pn?Bt=Bt.concat(pn({key:(_e&&`${_e}.`)+Yt,value:rt[Yt],valueSpec:fn,style:vt,styleSpec:At,object:rt,objectKey:Yt},rt)):Bt.push(new wo(_e,rt[Yt],`unknown property "${Yt}"`))}for(const Yt in at)ct[Yt]||at[Yt].required&&at[Yt].default===void 0&&rt[Yt]===void 0&&Bt.push(new wo(_e,rt,`missing required property "${Yt}"`));return Bt}function wv(nt){const _e=nt.value,rt=nt.valueSpec,at=nt.style,ct=nt.styleSpec,vt=nt.key,At=nt.arrayElementValidator||Wl;if(Cs(_e)!=="array")return[new wo(vt,_e,`array expected, ${Cs(_e)} found`)];if(rt.length&&_e.length!==rt.length)return[new wo(vt,_e,`array length ${rt.length} expected, length ${_e.length} found`)];if(rt["min-length"]&&_e.length<rt["min-length"])return[new wo(vt,_e,`array length at least ${rt["min-length"]} expected, length ${_e.length} found`)];let Bt={type:rt.value,values:rt.values,minimum:rt.minimum,maximum:rt.maximum,function:void 0};ct.$version<7&&(Bt.function=rt.function),Cs(rt.value)==="object"&&(Bt=rt.value);let Wt=[];for(let Yt=0;Yt<_e.length;Yt++)Wt=Wt.concat(At({array:_e,arrayIndex:Yt,value:_e[Yt],valueSpec:Bt,style:at,styleSpec:ct,key:`${vt}[${Yt}]`}));return Wt}function ky(nt){const _e=nt.key,rt=nt.value,at=nt.valueSpec;let ct=Cs(rt);if(ct==="number"&&rt!=rt&&(ct="NaN"),ct!=="number")return[new wo(_e,rt,`number expected, ${ct} found`)];if("minimum"in at){let vt=at.minimum;if(Cs(at.minimum)==="array"&&(vt=at.minimum[nt.arrayIndex]),rt<vt)return[new wo(_e,rt,`${rt} is less than the minimum value ${vt}`)]}if("maximum"in at){let vt=at.maximum;if(Cs(at.maximum)==="array"&&(vt=at.maximum[nt.arrayIndex]),rt>vt)return[new wo(_e,rt,`${rt} is greater than the maximum value ${vt}`)]}return[]}function oy(nt){const _e=nt.valueSpec,rt=Vs(nt.value.type);let at,ct,vt,At={};const Bt=rt!=="categorical"&&nt.value.property===void 0,Wt=!Bt,Yt=Cs(nt.value.stops)==="array"&&Cs(nt.value.stops[0])==="array"&&Cs(nt.value.stops[0][0])==="object",sn=ku({key:nt.key,value:nt.value,valueSpec:nt.styleSpec.function,style:nt.style,styleSpec:nt.styleSpec,objectElementValidators:{stops:function(An){if(rt==="identity")return[new wo(An.key,An.value,'identity function may not have a "stops" property')];let Tn=[];const kn=An.value;return Tn=Tn.concat(wv({key:An.key,value:kn,valueSpec:An.valueSpec,style:An.style,styleSpec:An.styleSpec,arrayElementValidator:fn})),Cs(kn)==="array"&&kn.length===0&&Tn.push(new wo(An.key,kn,"array must have at least one stop")),Tn},default:function(An){return Wl({key:An.key,value:An.value,valueSpec:_e,style:An.style,styleSpec:An.styleSpec})}}});return rt==="identity"&&Bt&&sn.push(new wo(nt.key,nt.value,'missing required property "property"')),rt==="identity"||nt.value.stops||sn.push(new wo(nt.key,nt.value,'missing required property "stops"')),rt==="exponential"&&nt.valueSpec.expression&&!Sp(nt.valueSpec)&&sn.push(new wo(nt.key,nt.value,"exponential functions not supported")),nt.styleSpec.$version>=8&&(Wt&&!Np(nt.valueSpec)?sn.push(new wo(nt.key,nt.value,"property functions not supported")):Bt&&!Ws(nt.valueSpec)&&sn.push(new wo(nt.key,nt.value,"zoom functions not supported"))),rt!=="categorical"&&!Yt||nt.value.property!==void 0||sn.push(new wo(nt.key,nt.value,'"property" property is required')),sn;function fn(An){let Tn=[];const kn=An.value,Vn=An.key;if(Cs(kn)!=="array")return[new wo(Vn,kn,`array expected, ${Cs(kn)} found`)];if(kn.length!==2)return[new wo(Vn,kn,`array length 2 expected, length ${kn.length} found`)];if(Yt){if(Cs(kn[0])!=="object")return[new wo(Vn,kn,`object expected, ${Cs(kn[0])} found`)];if(kn[0].zoom===void 0)return[new wo(Vn,kn,"object stop key must have zoom")];if(kn[0].value===void 0)return[new wo(Vn,kn,"object stop key must have value")];const ir=Vs(kn[0].zoom);if(typeof ir!="number")return[new wo(Vn,kn[0].zoom,"stop zoom values must be numbers")];if(vt&&vt>ir)return[new wo(Vn,kn[0].zoom,"stop zoom values must appear in ascending order")];ir!==vt&&(vt=ir,ct=void 0,At={}),Tn=Tn.concat(ku({key:`${Vn}[0]`,value:kn[0],valueSpec:{zoom:{}},style:An.style,styleSpec:An.styleSpec,objectElementValidators:{zoom:ky,value:pn}}))}else Tn=Tn.concat(pn({key:`${Vn}[0]`,value:kn[0],valueSpec:{},style:An.style,styleSpec:An.styleSpec},kn));return iy(hu(kn[1]))?Tn.concat([new wo(`${Vn}[1]`,kn[1],"expressions are not allowed in function stops.")]):Tn.concat(Wl({key:`${Vn}[1]`,value:kn[1],valueSpec:_e,style:An.style,styleSpec:An.styleSpec}))}function pn(An,Tn){const kn=Cs(An.value),Vn=Vs(An.value),ir=An.value!==null?An.value:Tn;if(at){if(kn!==at)return[new wo(An.key,ir,`${kn} stop domain type must match previous stop domain type ${at}`)]}else at=kn;if(kn!=="number"&&kn!=="string"&&kn!=="boolean"&&typeof Vn!="number"&&typeof Vn!="string"&&typeof Vn!="boolean")return[new wo(An.key,ir,"stop domain value must be a number, string, or boolean")];if(kn!=="number"&&rt!=="categorical"){let _r=`number expected, ${kn} found`;return Np(_e)&&rt===void 0&&(_r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wo(An.key,ir,_r)]}return rt!=="categorical"||kn!=="number"||typeof Vn=="number"&&isFinite(Vn)&&Math.floor(Vn)===Vn?rt!=="categorical"&&kn==="number"&&typeof Vn=="number"&&typeof ct=="number"&&ct!==void 0&&Vn<ct?[new wo(An.key,ir,"stop domain values must appear in ascending order")]:(ct=Vn,rt==="categorical"&&Vn in At?[new wo(An.key,ir,"stop domain values must be unique")]:(At[Vn]=!0,[])):[new wo(An.key,ir,`integer expected, found ${String(Vn)}`)]}}function up(nt){const _e=(nt.expressionContext==="property"?Up:lm)(hu(nt.value),nt.valueSpec);if(_e.result==="error")return _e.value.map(at=>new wo(`${nt.key}${at.key}`,nt.value,at.message));const rt=_e.value.expression||_e.value._styleExpression.expression;if(nt.expressionContext==="property"&&nt.propertyKey==="text-font"&&!rt.outputDefined())return[new wo(nt.key,nt.value,`Invalid data expression for "${nt.propertyKey}". Output values must be contained as literals within the expression.`)];if(nt.expressionContext==="property"&&nt.propertyType==="layout"&&!$m(rt))return[new wo(nt.key,nt.value,'"feature-state" data expressions are not supported with layout properties.')];if(nt.expressionContext==="filter")return h0(rt,nt);if(nt.expressionContext&&nt.expressionContext.indexOf("cluster")===0){if(!Qs(rt,["zoom","feature-state"]))return[new wo(nt.key,nt.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(nt.expressionContext==="cluster-initial"&&!im(rt))return[new wo(nt.key,nt.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function h0(nt,_e){const rt=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(_e.valueSpec&&_e.valueSpec.expression)for(const ct of _e.valueSpec.expression.parameters)rt.delete(ct);if(rt.size===0)return[];const at=[];return nt instanceof Gu&&rt.has(nt.name)?[new wo(_e.key,_e.value,`["${nt.name}"] expression is not supported in a filter for a ${_e.object.type} layer with id: ${_e.object.id}`)]:(nt.eachChild(ct=>{at.push(...h0(ct,_e))}),at)}function Dy(nt){const _e=nt.key,rt=nt.value,at=nt.valueSpec,ct=[];return Array.isArray(at.values)?at.values.indexOf(Vs(rt))===-1&&ct.push(new wo(_e,rt,`expected one of [${at.values.join(", ")}], ${JSON.stringify(rt)} found`)):Object.keys(at.values).indexOf(Vs(rt))===-1&&ct.push(new wo(_e,rt,`expected one of [${Object.keys(at.values).join(", ")}], ${JSON.stringify(rt)} found`)),ct}function Sv(nt){if(nt===!0||nt===!1)return!0;if(!Array.isArray(nt)||nt.length===0)return!1;switch(nt[0]){case"has":return nt.length>=2&&nt[1]!=="$id"&&nt[1]!=="$type";case"in":return nt.length>=3&&(typeof nt[1]!="string"||Array.isArray(nt[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return nt.length!==3||Array.isArray(nt[1])||Array.isArray(nt[2]);case"any":case"all":for(const _e of nt.slice(1))if(!Sv(_e)&&typeof _e!="boolean")return!1;return!0;default:return!0}}function v_(nt,_e="fill"){if(nt==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Sv(nt)||(nt=sy(nt));const rt=nt;let at=!0;try{at=function(Yt){if(!zp(Yt))return Yt;let sn=hu(Yt);return Dl(sn),sn=Pl(sn),sn}(rt)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(rt,null,2)}
        `)}const ct=Nr[`filter_${_e}`],vt=lm(at,ct);let At=null;if(vt.result==="error")throw new Error(vt.value.map(Yt=>`${Yt.key}: ${Yt.message}`).join(", "));At=(Yt,sn,fn)=>vt.value.evaluate(Yt,sn,{},fn);let Bt=null,Wt=null;if(at!==rt){const Yt=lm(rt,ct);if(Yt.result==="error")throw new Error(Yt.value.map(sn=>`${sn.key}: ${sn.message}`).join(", "));Bt=(sn,fn,pn,An,Tn)=>Yt.value.evaluate(sn,fn,{},pn,void 0,void 0,An,Tn),Wt=!im(Yt.value.expression)}return{filter:At,dynamicFilter:Bt||void 0,needGeometry:f0(at),needFeature:!!Wt}}function Pl(nt){if(!Array.isArray(nt))return nt;const _e=function(rt){if(Du.has(rt[0])){for(let at=1;at<rt.length;at++)if(zp(rt[at]))return!0}return rt}(nt);return _e===!0?_e:_e.map(rt=>Pl(rt))}function Dl(nt){let _e=!1;const rt=[];if(nt[0]==="case"){for(let at=1;at<nt.length-1;at+=2)_e=_e||zp(nt[at]),rt.push(nt[at+1]);rt.push(nt[nt.length-1])}else if(nt[0]==="match"){_e=_e||zp(nt[1]);for(let at=2;at<nt.length-1;at+=2)rt.push(nt[at+1]);rt.push(nt[nt.length-1])}else if(nt[0]==="step"){_e=_e||zp(nt[1]);for(let at=1;at<nt.length-1;at+=2)rt.push(nt[at+1])}_e&&(nt.length=0,nt.push("any",...rt));for(let at=1;at<nt.length;at++)Dl(nt[at])}function zp(nt){if(!Array.isArray(nt))return!1;if((_e=nt[0])==="pitch"||_e==="distance-from-center")return!0;var _e;for(let rt=1;rt<nt.length;rt++)if(zp(nt[rt]))return!0;return!1}const Du=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ly(nt,_e){return nt<_e?-1:nt>_e?1:0}function f0(nt){if(!Array.isArray(nt))return!1;if(nt[0]==="within")return!0;for(let _e=1;_e<nt.length;_e++)if(f0(nt[_e]))return!0;return!1}function sy(nt){if(!nt)return!0;const _e=nt[0];return nt.length<=1?_e!=="any":_e==="=="?Pm(nt[1],nt[2],"=="):_e==="!="?cm(Pm(nt[1],nt[2],"==")):_e==="<"||_e===">"||_e==="<="||_e===">="?Pm(nt[1],nt[2],_e):_e==="any"?(rt=nt.slice(1),["any"].concat(rt.map(sy))):_e==="all"?["all"].concat(nt.slice(1).map(sy)):_e==="none"?["all"].concat(nt.slice(1).map(sy).map(cm)):_e==="in"?b_(nt[1],nt.slice(2)):_e==="!in"?cm(b_(nt[1],nt.slice(2))):_e==="has"?Vp(nt[1]):_e==="!has"?cm(Vp(nt[1])):_e!=="within"||nt;var rt}function Pm(nt,_e,rt){switch(nt){case"$type":return[`filter-type-${rt}`,_e];case"$id":return[`filter-id-${rt}`,_e];default:return[`filter-${rt}`,nt,_e]}}function b_(nt,_e){if(_e.length===0)return!1;switch(nt){case"$type":return["filter-type-in",["literal",_e]];case"$id":return["filter-id-in",["literal",_e]];default:return _e.length>200&&!_e.some(rt=>typeof rt!=typeof _e[0])?["filter-in-large",nt,["literal",_e.sort(Ly)]]:["filter-in-small",nt,["literal",_e]]}}function Vp(nt){switch(nt){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",nt]}}function cm(nt){return["!",nt]}function Wp(nt){return Sv(hu(nt.value))?up(ga({},nt,{expressionContext:"filter",valueSpec:nt.styleSpec[`filter_${nt.layerType||"fill"}`]})):By(nt)}function By(nt){const _e=nt.value,rt=nt.key;if(Cs(_e)!=="array")return[new wo(rt,_e,`array expected, ${Cs(_e)} found`)];const at=nt.styleSpec;let ct,vt=[];if(_e.length<1)return[new wo(rt,_e,"filter array must have at least 1 element")];switch(vt=vt.concat(Dy({key:`${rt}[0]`,value:_e[0],valueSpec:at.filter_operator,style:nt.style,styleSpec:nt.styleSpec})),Vs(_e[0])){case"<":case"<=":case">":case">=":_e.length>=2&&Vs(_e[1])==="$type"&&vt.push(new wo(rt,_e,`"$type" cannot be use with operator "${_e[0]}"`));case"==":case"!=":_e.length!==3&&vt.push(new wo(rt,_e,`filter array for operator "${_e[0]}" must have 3 elements`));case"in":case"!in":_e.length>=2&&(ct=Cs(_e[1]),ct!=="string"&&vt.push(new wo(`${rt}[1]`,_e[1],`string expected, ${ct} found`)));for(let At=2;At<_e.length;At++)ct=Cs(_e[At]),Vs(_e[1])==="$type"?vt=vt.concat(Dy({key:`${rt}[${At}]`,value:_e[At],valueSpec:at.geometry_type,style:nt.style,styleSpec:nt.styleSpec})):ct!=="string"&&ct!=="number"&&ct!=="boolean"&&vt.push(new wo(`${rt}[${At}]`,_e[At],`string, number, or boolean expected, ${ct} found`));break;case"any":case"all":case"none":for(let At=1;At<_e.length;At++)vt=vt.concat(By({key:`${rt}[${At}]`,value:_e[At],style:nt.style,styleSpec:nt.styleSpec}));break;case"has":case"!has":ct=Cs(_e[1]),_e.length!==2?vt.push(new wo(rt,_e,`filter array for "${_e[0]}" operator must have 2 elements`)):ct!=="string"&&vt.push(new wo(`${rt}[1]`,_e[1],`string expected, ${ct} found`));break;case"within":ct=Cs(_e[1]),_e.length!==2?vt.push(new wo(rt,_e,`filter array for "${_e[0]}" operator must have 2 elements`)):ct!=="object"&&vt.push(new wo(`${rt}[1]`,_e[1],`object expected, ${ct} found`))}return vt}function km(nt,_e){const rt=nt.key,at=nt.style,ct=nt.styleSpec,vt=nt.value,At=nt.objectKey,Bt=ct[`${_e}_${nt.layerType}`];if(!Bt)return[];const Wt=At.match(/^(.*)-transition$/);if(_e==="paint"&&Wt&&Bt[Wt[1]]&&Bt[Wt[1]].transition)return Wl({key:rt,value:vt,valueSpec:ct.transition,style:at,styleSpec:ct});const Yt=nt.valueSpec||Bt[At];if(!Yt)return[new wo(rt,vt,`unknown property "${At}"`)];let sn;if(Cs(vt)==="string"&&Np(Yt)&&!Yt.tokens&&(sn=/^{([^}]+)}$/.exec(vt)))return[new wo(rt,vt,`"${At}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(sn[1])} }\`.`)];const fn=[];return nt.layerType==="symbol"&&(At==="text-field"&&at&&!at.glyphs&&fn.push(new wo(rt,vt,'use of "text-field" requires a style "glyphs" property')),At==="text-font"&&$u(hu(vt))&&Vs(vt.type)==="identity"&&fn.push(new wo(rt,vt,'"text-font" does not support identity functions'))),fn.concat(Wl({key:nt.key,value:vt,valueSpec:Yt,style:at,styleSpec:ct,expressionContext:"property",propertyType:_e,propertyKey:At}))}function w_(nt){return km(nt,"paint")}function d0(nt){return km(nt,"layout")}function xv(nt){let _e=[];const rt=nt.value,at=nt.key,ct=nt.style,vt=nt.styleSpec;rt.type||rt.ref||_e.push(new wo(at,rt,'either "type" or "ref" is required'));let At=Vs(rt.type);const Bt=Vs(rt.ref);if(rt.id){const Wt=Vs(rt.id);for(let Yt=0;Yt<nt.arrayIndex;Yt++){const sn=ct.layers[Yt];Vs(sn.id)===Wt&&_e.push(new wo(at,rt.id,`duplicate layer id "${rt.id}", previously used at line ${sn.id.__line__}`))}}if("ref"in rt){let Wt;["type","source","source-layer","filter","layout"].forEach(Yt=>{Yt in rt&&_e.push(new wo(at,rt[Yt],`"${Yt}" is prohibited for ref layers`))}),ct.layers.forEach(Yt=>{Vs(Yt.id)===Bt&&(Wt=Yt)}),Wt?Wt.ref?_e.push(new wo(at,rt.ref,"ref cannot reference another ref layer")):At=Vs(Wt.type):typeof Bt=="string"&&_e.push(new wo(at,rt.ref,`ref layer "${Bt}" not found`))}else if(At!=="background"&&At!=="sky")if(rt.source){const Wt=ct.sources&&ct.sources[rt.source],Yt=Wt&&Vs(Wt.type);Wt?Yt==="vector"&&At==="raster"?_e.push(new wo(at,rt.source,`layer "${rt.id}" requires a raster source`)):Yt==="raster"&&At!=="raster"?_e.push(new wo(at,rt.source,`layer "${rt.id}" requires a vector source`)):Yt!=="vector"||rt["source-layer"]?Yt==="raster-dem"&&At!=="hillshade"?_e.push(new wo(at,rt.source,"raster-dem source can only be used with layer type 'hillshade'.")):At!=="line"||!rt.paint||!rt.paint["line-gradient"]&&!rt.paint["line-trim-offset"]||Yt==="geojson"&&Wt.lineMetrics||_e.push(new wo(at,rt,`layer "${rt.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):_e.push(new wo(at,rt,`layer "${rt.id}" must specify a "source-layer"`)):_e.push(new wo(at,rt.source,`source "${rt.source}" not found`))}else _e.push(new wo(at,rt,'missing required property "source"'));return _e=_e.concat(ku({key:at,value:rt,valueSpec:vt.layer,style:nt.style,styleSpec:nt.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Wl({key:`${at}.type`,value:rt.type,valueSpec:vt.layer.type,style:nt.style,styleSpec:nt.styleSpec,object:rt,objectKey:"type"}),filter:Wt=>Wp(ga({layerType:At},Wt)),layout:Wt=>ku({layer:rt,key:Wt.key,value:Wt.value,valueSpec:{},style:Wt.style,styleSpec:Wt.styleSpec,objectElementValidators:{"*":Yt=>d0(ga({layerType:At},Yt))}}),paint:Wt=>ku({layer:rt,key:Wt.key,value:Wt.value,valueSpec:{},style:Wt.style,styleSpec:Wt.styleSpec,objectElementValidators:{"*":Yt=>w_(ga({layerType:At},Yt))}})}})),_e}function Dm(nt){const _e=nt.value,rt=nt.key,at=Cs(_e);return at!=="string"?[new wo(rt,_e,`string expected, ${at} found`)]:[]}const g0={promoteId:function({key:nt,value:_e}){if(Cs(_e)==="string")return Dm({key:nt,value:_e});{const rt=[];for(const at in _e)rt.push(...Dm({key:`${nt}.${at}`,value:_e[at]}));return rt}}};function Lm(nt){const _e=nt.value,rt=nt.key,at=nt.styleSpec,ct=nt.style;if(!_e.type)return[new wo(rt,_e,'"type" is required')];const vt=Vs(_e.type);let At;switch(vt){case"vector":case"raster":case"raster-dem":return At=ku({key:rt,value:_e,valueSpec:at[`source_${vt.replace("-","_")}`],style:nt.style,styleSpec:at,objectElementValidators:g0}),At;case"geojson":if(At=ku({key:rt,value:_e,valueSpec:at.source_geojson,style:ct,styleSpec:at,objectElementValidators:g0}),_e.cluster)for(const Bt in _e.clusterProperties){const[Wt,Yt]=_e.clusterProperties[Bt],sn=typeof Wt=="string"?[Wt,["accumulated"],["get",Bt]]:Wt;At.push(...up({key:`${rt}.${Bt}.map`,value:Yt,expressionContext:"cluster-map"})),At.push(...up({key:`${rt}.${Bt}.reduce`,value:sn,expressionContext:"cluster-reduce"}))}return At;case"video":return ku({key:rt,value:_e,valueSpec:at.source_video,style:ct,styleSpec:at});case"image":return ku({key:rt,value:_e,valueSpec:at.source_image,style:ct,styleSpec:at});case"canvas":return[new wo(rt,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Dy({key:`${rt}.type`,value:_e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ct,styleSpec:at})}}function Gp(nt){const _e=nt.value,rt=nt.styleSpec,at=rt.light,ct=nt.style;let vt=[];const At=Cs(_e);if(_e===void 0)return vt;if(At!=="object")return vt=vt.concat([new wo("light",_e,`object expected, ${At} found`)]),vt;for(const Bt in _e){const Wt=Bt.match(/^(.*)-transition$/);vt=vt.concat(Wt&&at[Wt[1]]&&at[Wt[1]].transition?Wl({key:Bt,value:_e[Bt],valueSpec:rt.transition,style:ct,styleSpec:rt}):at[Bt]?Wl({key:Bt,value:_e[Bt],valueSpec:at[Bt],style:ct,styleSpec:rt}):[new wo(Bt,_e[Bt],`unknown property "${Bt}"`)])}return vt}function S_(nt){const _e=nt.value,rt=nt.key,at=nt.style,ct=nt.styleSpec,vt=ct.terrain;let At=[];const Bt=Cs(_e);if(_e===void 0)return At;if(Bt!=="object")return At=At.concat([new wo("terrain",_e,`object expected, ${Bt} found`)]),At;for(const Wt in _e){const Yt=Wt.match(/^(.*)-transition$/);At=At.concat(Yt&&vt[Yt[1]]&&vt[Yt[1]].transition?Wl({key:Wt,value:_e[Wt],valueSpec:ct.transition,style:at,styleSpec:ct}):vt[Wt]?Wl({key:Wt,value:_e[Wt],valueSpec:vt[Wt],style:at,styleSpec:ct}):[new wo(Wt,_e[Wt],`unknown property "${Wt}"`)])}if(_e.source){const Wt=at.sources&&at.sources[_e.source],Yt=Wt&&Vs(Wt.type);Wt?Yt!=="raster-dem"&&At.push(new wo(rt,_e.source,`terrain cannot be used with a source of type ${String(Yt)}, it only be used with a "raster-dem" source type`)):At.push(new wo(rt,_e.source,`source "${_e.source}" not found`))}else At.push(new wo(rt,_e,'terrain is missing required property "source"'));return At}function Wn(nt){const _e=nt.value,rt=nt.style,at=nt.styleSpec,ct=at.fog;let vt=[];const At=Cs(_e);if(_e===void 0)return vt;if(At!=="object")return vt=vt.concat([new wo("fog",_e,`object expected, ${At} found`)]),vt;for(const Bt in _e){const Wt=Bt.match(/^(.*)-transition$/);vt=vt.concat(Wt&&ct[Wt[1]]&&ct[Wt[1]].transition?Wl({key:Bt,value:_e[Bt],valueSpec:at.transition,style:rt,styleSpec:at}):ct[Bt]?Wl({key:Bt,value:_e[Bt],valueSpec:ct[Bt],style:rt,styleSpec:at}):[new wo(Bt,_e[Bt],`unknown property "${Bt}"`)])}return vt}const hm={"*":()=>[],array:wv,boolean:function(nt){const _e=nt.value,rt=nt.key,at=Cs(_e);return at!=="boolean"?[new wo(rt,_e,`boolean expected, ${at} found`)]:[]},number:ky,color:function(nt){const _e=nt.key,rt=nt.value,at=Cs(rt);return at!=="string"?[new wo(_e,rt,`color expected, ${at} found`)]:Wu(rt)===null?[new wo(_e,rt,`color expected, "${rt}" found`)]:[]},enum:Dy,filter:Wp,function:oy,layer:xv,object:ku,source:Lm,light:Gp,terrain:S_,fog:Wn,string:Dm,formatted:function(nt){return Dm(nt).length===0?[]:up(nt)},resolvedImage:function(nt){return Dm(nt).length===0?[]:up(nt)},projection:function(nt){const _e=nt.value,rt=nt.styleSpec,at=rt.projection,ct=nt.style;let vt=[];const At=Cs(_e);if(At==="object")for(const Bt in _e)vt=vt.concat(Wl({key:Bt,value:_e[Bt],valueSpec:at[Bt],style:ct,styleSpec:rt}));else At!=="string"&&(vt=vt.concat([new wo("projection",_e,`object or string expected, ${At} found`)]));return vt}};function Wl(nt){const _e=nt.value,rt=nt.valueSpec,at=nt.styleSpec;return rt.expression&&$u(Vs(_e))?oy(nt):rt.expression&&iy(hu(_e))?up(nt):rt.type&&hm[rt.type]?hm[rt.type](nt):ku(ga({},nt,{valueSpec:rt.type?at[rt.type]:rt}))}function Cu(nt){const _e=nt.value,rt=nt.key,at=Dm(nt);return at.length||(_e.indexOf("{fontstack}")===-1&&at.push(new wo(rt,_e,'"glyphs" url must include a "{fontstack}" token')),_e.indexOf("{range}")===-1&&at.push(new wo(rt,_e,'"glyphs" url must include a "{range}" token'))),at}function Es(nt,_e=Nr){return Hp(Wl({key:"",value:nt,valueSpec:_e.$root,styleSpec:_e,style:nt,objectElementValidators:{glyphs:Cu,"*":()=>[]}}))}const T1=nt=>Hp(w_(nt)),C1=nt=>Hp(d0(nt));function Hp(nt){return nt.slice().sort((_e,rt)=>_e.line&&rt.line?_e.line-rt.line:0)}function $p(nt,_e){let rt=!1;if(_e&&_e.length)for(const at of _e)nt.fire(new xu(new Error(at.message))),rt=!0;return rt}var ay=Ap;function Ap(nt,_e,rt){var at=this.cells=[];if(nt instanceof ArrayBuffer){this.arrayBuffer=nt;var ct=new Int32Array(this.arrayBuffer);nt=ct[0],this.d=(_e=ct[1])+2*(rt=ct[2]);for(var vt=0;vt<this.d*this.d;vt++){var At=ct[3+vt],Bt=ct[3+vt+1];at.push(At===Bt?null:ct.subarray(At,Bt))}var Wt=ct[3+at.length+1];this.keys=ct.subarray(ct[3+at.length],Wt),this.bboxes=ct.subarray(Wt),this.insert=this._insertReadonly}else{this.d=_e+2*rt;for(var Yt=0;Yt<this.d*this.d;Yt++)at.push([]);this.keys=[],this.bboxes=[]}this.n=_e,this.extent=nt,this.padding=rt,this.scale=_e/nt,this.uid=0;var sn=rt/_e*nt;this.min=-sn,this.max=nt+sn}Ap.prototype.insert=function(nt,_e,rt,at,ct){this._forEachCell(_e,rt,at,ct,this._insertCell,this.uid++),this.keys.push(nt),this.bboxes.push(_e),this.bboxes.push(rt),this.bboxes.push(at),this.bboxes.push(ct)},Ap.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ap.prototype._insertCell=function(nt,_e,rt,at,ct,vt){this.cells[ct].push(vt)},Ap.prototype.query=function(nt,_e,rt,at,ct){var vt=this.min,At=this.max;if(nt<=vt&&_e<=vt&&At<=rt&&At<=at&&!ct)return Array.prototype.slice.call(this.keys);var Bt=[];return this._forEachCell(nt,_e,rt,at,this._queryCell,Bt,{},ct),Bt},Ap.prototype._queryCell=function(nt,_e,rt,at,ct,vt,At,Bt){var Wt=this.cells[ct];if(Wt!==null)for(var Yt=this.keys,sn=this.bboxes,fn=0;fn<Wt.length;fn++){var pn=Wt[fn];if(At[pn]===void 0){var An=4*pn;(Bt?Bt(sn[An+0],sn[An+1],sn[An+2],sn[An+3]):nt<=sn[An+2]&&_e<=sn[An+3]&&rt>=sn[An+0]&&at>=sn[An+1])?(At[pn]=!0,vt.push(Yt[pn])):At[pn]=!1}}},Ap.prototype._forEachCell=function(nt,_e,rt,at,ct,vt,At,Bt){for(var Wt=this._convertToCellCoord(nt),Yt=this._convertToCellCoord(_e),sn=this._convertToCellCoord(rt),fn=this._convertToCellCoord(at),pn=Wt;pn<=sn;pn++)for(var An=Yt;An<=fn;An++){var Tn=this.d*An+pn;if((!Bt||Bt(this._convertFromCellCoord(pn),this._convertFromCellCoord(An),this._convertFromCellCoord(pn+1),this._convertFromCellCoord(An+1)))&&ct.call(this,nt,_e,rt,at,Tn,vt,At,Bt))return}},Ap.prototype._convertFromCellCoord=function(nt){return(nt-this.padding)/this.scale},Ap.prototype._convertToCellCoord=function(nt){return Math.max(0,Math.min(this.d-1,Math.floor(nt*this.scale)+this.padding))},Ap.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var nt=this.cells,_e=3+this.cells.length+1+1,rt=0,at=0;at<this.cells.length;at++)rt+=this.cells[at].length;var ct=new Int32Array(_e+rt+this.keys.length+this.bboxes.length);ct[0]=this.extent,ct[1]=this.n,ct[2]=this.padding;for(var vt=_e,At=0;At<nt.length;At++){var Bt=nt[At];ct[3+At]=vt,ct.set(Bt,vt),vt+=Bt.length}return ct[3+nt.length]=vt,ct.set(this.keys,vt),ct[3+nt.length+1]=vt+=this.keys.length,ct.set(this.bboxes,vt),vt+=this.bboxes.length,ct.buffer};const x_={};function Ao(nt,_e,rt={}){Object.defineProperty(nt,"_classRegistryKey",{value:_e,writeable:!1}),x_[_e]={klass:nt,omit:rt.omit||[]}}Ao(Object,"Object"),ay.serialize=function(nt,_e){const rt=nt.toArrayBuffer();return _e&&_e.push(rt),{buffer:rt}},ay.deserialize=function(nt){return new ay(nt.buffer)},Object.defineProperty(ay,"name",{value:"Grid"}),Ao(ay,"Grid"),Ao(Fs,"Color"),Ao(Error,"Error"),Ao(Zl,"AJAXError"),Ao(ln,"ResolvedImage"),Ao(yu,"StylePropertyFunction"),Ao(am,"StyleExpression",{omit:["_evaluator"]}),Ao(Py,"ZoomDependentExpression"),Ao(Mm,"ZoomConstantExpression"),Ao(Gu,"CompoundExpression",{omit:["_evaluate"]});for(const nt in ty)x_[ty[nt]._classRegistryKey]||Ao(ty[nt],`Expression${nt}`);function p0(nt){return nt&&typeof ArrayBuffer<"u"&&(nt instanceof ArrayBuffer||nt.constructor&&nt.constructor.name==="ArrayBuffer")}function Ep(nt){return it.ImageBitmap&&nt instanceof it.ImageBitmap}function jy(nt,_e){if(nt==null||typeof nt=="boolean"||typeof nt=="number"||typeof nt=="string"||nt instanceof Boolean||nt instanceof Number||nt instanceof String||nt instanceof Date||nt instanceof RegExp)return nt;if(p0(nt)||Ep(nt))return _e&&_e.push(nt),nt;if(ArrayBuffer.isView(nt)){const rt=nt;return _e&&_e.push(rt.buffer),rt}if(nt instanceof it.ImageData)return _e&&_e.push(nt.data.buffer),nt;if(Array.isArray(nt)){const rt=[];for(const at of nt)rt.push(jy(at,_e));return rt}if(typeof nt=="object"){const rt=nt.constructor,at=rt._classRegistryKey;if(!at)throw new Error(`can't serialize object of unregistered class ${at}`);const ct=rt.serialize?rt.serialize(nt,_e):{};if(!rt.serialize){for(const vt in nt)nt.hasOwnProperty(vt)&&(x_[at].omit.indexOf(vt)>=0||(ct[vt]=jy(nt[vt],_e)));nt instanceof Error&&(ct.message=nt.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return at!=="Object"&&(ct.$name=at),ct}throw new Error("can't serialize object of type "+typeof nt)}function fm(nt){if(nt==null||typeof nt=="boolean"||typeof nt=="number"||typeof nt=="string"||nt instanceof Boolean||nt instanceof Number||nt instanceof String||nt instanceof Date||nt instanceof RegExp||p0(nt)||Ep(nt)||ArrayBuffer.isView(nt)||nt instanceof it.ImageData)return nt;if(Array.isArray(nt))return nt.map(fm);if(typeof nt=="object"){const _e=nt.$name||"Object",{klass:rt}=x_[_e];if(!rt)throw new Error(`can't deserialize unregistered class ${_e}`);if(rt.deserialize)return rt.deserialize(nt);const at=Object.create(rt.prototype);for(const ct of Object.keys(nt))ct!=="$name"&&(at[ct]=fm(nt[ct]));return at}throw new Error("can't deserialize object of type "+typeof nt)}class m0{constructor(){this.first=!0}update(_e,rt){const at=Math.floor(_e);return this.first?(this.first=!1,this.lastIntegerZoom=at,this.lastIntegerZoomTime=0,this.lastZoom=_e,this.lastFloorZoom=at,!0):(this.lastFloorZoom>at?(this.lastIntegerZoom=at+1,this.lastIntegerZoomTime=rt):this.lastFloorZoom<at&&(this.lastIntegerZoom=at,this.lastIntegerZoomTime=rt),_e!==this.lastZoom&&(this.lastZoom=_e,this.lastFloorZoom=at,!0))}}const y0=nt=>nt>=1536&&nt<=1791,Fy=nt=>nt>=1872&&nt<=1919,Tp=nt=>nt>=2208&&nt<=2303,Av=nt=>nt>=11904&&nt<=12031,_0=nt=>nt>=12032&&nt<=12255,Ev=nt=>nt>=12272&&nt<=12287,Ny=nt=>nt>=12288&&nt<=12351,A_=nt=>nt>=12352&&nt<=12447,cp=nt=>nt>=12448&&nt<=12543,E_=nt=>nt>=12544&&nt<=12591,T_=nt=>nt>=12704&&nt<=12735,qu=nt=>nt>=12736&&nt<=12783,v0=nt=>nt>=12784&&nt<=12799,Tv=nt=>nt>=12800&&nt<=13055,b0=nt=>nt>=13056&&nt<=13311,w0=nt=>nt>=13312&&nt<=19903,Cv=nt=>nt>=19968&&nt<=40959,Uy=nt=>nt>=40960&&nt<=42127,Rv=nt=>nt>=42128&&nt<=42191,S0=nt=>nt>=44032&&nt<=55215,x0=nt=>nt>=63744&&nt<=64255,zy=nt=>nt>=64336&&nt<=65023,ly=nt=>nt>=65040&&nt<=65055,Bm=nt=>nt>=65072&&nt<=65103,Vy=nt=>nt>=65104&&nt<=65135,dt=nt=>nt>=65136&&nt<=65279,ot=nt=>nt>=65280&&nt<=65519;function lt(nt){for(const _e of nt)if(jt(_e.charCodeAt(0)))return!0;return!1}function bt(nt){for(const _e of nt)if(!kt(_e.charCodeAt(0)))return!1;return!0}function kt(nt){return!(y0(nt)||Fy(nt)||Tp(nt)||zy(nt)||dt(nt))}function jt(nt){return!(nt!==746&&nt!==747&&(nt<4352||!(T_(nt)||E_(nt)||Bm(nt)&&!(nt>=65097&&nt<=65103)||x0(nt)||b0(nt)||Av(nt)||qu(nt)||!(!Ny(nt)||nt>=12296&&nt<=12305||nt>=12308&&nt<=12319||nt===12336)||w0(nt)||Cv(nt)||Tv(nt)||(_e=>_e>=12592&&_e<=12687)(nt)||(_e=>_e>=43360&&_e<=43391)(nt)||(_e=>_e>=55216&&_e<=55295)(nt)||(_e=>_e>=4352&&_e<=4607)(nt)||S0(nt)||A_(nt)||Ev(nt)||(_e=>_e>=12688&&_e<=12703)(nt)||_0(nt)||v0(nt)||cp(nt)&&nt!==12540||!(!ot(nt)||nt===65288||nt===65289||nt===65293||nt>=65306&&nt<=65310||nt===65339||nt===65341||nt===65343||nt>=65371&&nt<=65503||nt===65507||nt>=65512&&nt<=65519)||!(!Vy(nt)||nt>=65112&&nt<=65118||nt>=65123&&nt<=65126)||(_e=>_e>=5120&&_e<=5759)(nt)||(_e=>_e>=6320&&_e<=6399)(nt)||ly(nt)||(_e=>_e>=19904&&_e<=19967)(nt)||Uy(nt)||Rv(nt))))}function Jt(nt){return!(jt(nt)||function(_e){return!!((rt=>rt>=128&&rt<=255)(_e)&&(_e===167||_e===169||_e===174||_e===177||_e===188||_e===189||_e===190||_e===215||_e===247)||(rt=>rt>=8192&&rt<=8303)(_e)&&(_e===8214||_e===8224||_e===8225||_e===8240||_e===8241||_e===8251||_e===8252||_e===8258||_e===8263||_e===8264||_e===8265||_e===8273)||(rt=>rt>=8448&&rt<=8527)(_e)||(rt=>rt>=8528&&rt<=8591)(_e)||(rt=>rt>=8960&&rt<=9215)(_e)&&(_e>=8960&&_e<=8967||_e>=8972&&_e<=8991||_e>=8996&&_e<=9e3||_e===9003||_e>=9085&&_e<=9114||_e>=9150&&_e<=9165||_e===9167||_e>=9169&&_e<=9179||_e>=9186&&_e<=9215)||(rt=>rt>=9216&&rt<=9279)(_e)&&_e!==9251||(rt=>rt>=9280&&rt<=9311)(_e)||(rt=>rt>=9312&&rt<=9471)(_e)||(rt=>rt>=9632&&rt<=9727)(_e)||(rt=>rt>=9728&&rt<=9983)(_e)&&!(_e>=9754&&_e<=9759)||(rt=>rt>=11008&&rt<=11263)(_e)&&(_e>=11026&&_e<=11055||_e>=11088&&_e<=11097||_e>=11192&&_e<=11243)||Ny(_e)||cp(_e)||(rt=>rt>=57344&&rt<=63743)(_e)||Bm(_e)||Vy(_e)||ot(_e)||_e===8734||_e===8756||_e===8757||_e>=9984&&_e<=10087||_e>=10102&&_e<=10131||_e===65532||_e===65533)}(nt))}function an(nt){return nt>=1424&&nt<=2303||zy(nt)||dt(nt)}function cn(nt,_e){return!(!_e&&an(nt)||nt>=2304&&nt<=3583||nt>=3840&&nt<=4255||(rt=>rt>=6016&&rt<=6143)(nt))}function _n(nt){for(const _e of nt)if(an(_e.charCodeAt(0)))return!0;return!1}const Sn="deferred",In="loading",Bn="loaded";let Yn=null,Gn="unavailable",Xn=null;const Un=function(nt){nt&&typeof nt=="string"&&nt.indexOf("NetworkError")>-1&&(Gn="error"),Yn&&Yn(nt)};function Nn(){er.fire(new bs("pluginStateChange",{pluginStatus:Gn,pluginURL:Xn}))}const er=new cu,Zn=function(){return Gn},fr=function(){if(Gn!==Sn||!Xn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Gn=In,Nn(),Xn&&vs({url:Xn},nt=>{nt?Un(nt):(Gn=Bn,Nn())})},pr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Gn===Bn||pr.applyArabicShaping!=null,isLoading:()=>Gn===In,setState(nt){Gn=nt.pluginStatus,Xn=nt.pluginURL},isParsed:()=>pr.applyArabicShaping!=null&&pr.processBidirectionalText!=null&&pr.processStyledBidirectionalText!=null,getPluginURL:()=>Xn};class tr{constructor(_e,rt){this.zoom=_e,rt?(this.now=rt.now,this.fadeDuration=rt.fadeDuration,this.zoomHistory=rt.zoomHistory,this.transition=rt.transition,this.pitch=rt.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new m0,this.transition={},this.pitch=0)}isSupportedScript(_e){return function(rt,at){for(const ct of rt)if(!cn(ct.charCodeAt(0),at))return!1;return!0}(_e,pr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const _e=this.zoom,rt=_e-Math.floor(_e),at=this.crossFadingFactor();return _e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:rt+(1-rt)*at}:{fromScale:.5,toScale:1,t:1-(1-at)*rt}}}class vr{constructor(_e,rt){this.property=_e,this.value=rt,this.expression=function(at,ct){if($u(at))return new yu(at,ct);if(iy(at)){const vt=Up(at,ct);if(vt.result==="error")throw new Error(vt.value.map(At=>`${At.key}: ${At.message}`).join(", "));return vt.value}{let vt=at;return typeof at=="string"&&ct.type==="color"&&(vt=Fs.parse(at)),{kind:"constant",evaluate:()=>vt}}}(rt===void 0?_e.specification.default:rt,_e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(_e,rt,at){return this.property.possiblyEvaluate(this,_e,rt,at)}}class Er{constructor(_e){this.property=_e,this.value=new vr(_e,void 0)}transitioned(_e,rt){return new kr(this.property,this.value,rt,St({},_e.transition,this.transition),_e.now)}untransitioned(){return new kr(this.property,this.value,null,{},0)}}class Lr{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultTransitionablePropertyValues)}getValue(_e){return Kt(this._values[_e].value.value)}setValue(_e,rt){this._values.hasOwnProperty(_e)||(this._values[_e]=new Er(this._values[_e].property)),this._values[_e].value=new vr(this._values[_e].property,rt===null?void 0:Kt(rt))}getTransition(_e){return Kt(this._values[_e].transition)}setTransition(_e,rt){this._values.hasOwnProperty(_e)||(this._values[_e]=new Er(this._values[_e].property)),this._values[_e].transition=Kt(rt)||void 0}serialize(){const _e={};for(const rt of Object.keys(this._values)){const at=this.getValue(rt);at!==void 0&&(_e[rt]=at);const ct=this.getTransition(rt);ct!==void 0&&(_e[`${rt}-transition`]=ct)}return _e}transitioned(_e,rt){const at=new io(this._properties);for(const ct of Object.keys(this._values))at._values[ct]=this._values[ct].transitioned(_e,rt._values[ct]);return at}untransitioned(){const _e=new io(this._properties);for(const rt of Object.keys(this._values))_e._values[rt]=this._values[rt].untransitioned();return _e}}class kr{constructor(_e,rt,at,ct,vt){const At=ct.delay||0,Bt=ct.duration||0;vt=vt||0,this.property=_e,this.value=rt,this.begin=vt+At,this.end=this.begin+Bt,_e.specification.transition&&(ct.delay||ct.duration)&&(this.prior=at)}possiblyEvaluate(_e,rt,at){const ct=_e.now||0,vt=this.value.possiblyEvaluate(_e,rt,at),At=this.prior;if(At){if(ct>this.end)return this.prior=null,vt;if(this.value.isDataDriven())return this.prior=null,vt;if(ct<this.begin)return At.possiblyEvaluate(_e,rt,at);{const Bt=(ct-this.begin)/(this.end-this.begin);return this.property.interpolate(At.possiblyEvaluate(_e,rt,at),vt,Tt(Bt))}}return vt}}class io{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultTransitioningPropertyValues)}possiblyEvaluate(_e,rt,at){const ct=new qr(this._properties);for(const vt of Object.keys(this._values))ct._values[vt]=this._values[vt].possiblyEvaluate(_e,rt,at);return ct}hasTransition(){for(const _e of Object.keys(this._values))if(this._values[_e].prior)return!0;return!1}}class Ar{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultPropertyValues)}getValue(_e){return Kt(this._values[_e].value)}setValue(_e,rt){this._values[_e]=new vr(this._values[_e].property,rt===null?void 0:Kt(rt))}serialize(){const _e={};for(const rt of Object.keys(this._values)){const at=this.getValue(rt);at!==void 0&&(_e[rt]=at)}return _e}possiblyEvaluate(_e,rt,at){const ct=new qr(this._properties);for(const vt of Object.keys(this._values))ct._values[vt]=this._values[vt].possiblyEvaluate(_e,rt,at);return ct}}class $r{constructor(_e,rt,at){this.property=_e,this.value=rt,this.parameters=at}isConstant(){return this.value.kind==="constant"}constantOr(_e){return this.value.kind==="constant"?this.value.value:_e}evaluate(_e,rt,at,ct){return this.property.evaluate(this.value,this.parameters,_e,rt,at,ct)}}class qr{constructor(_e){this._properties=_e,this._values=Object.create(_e.defaultPossiblyEvaluatedValues)}get(_e){return this._values[_e]}}class Or{constructor(_e){this.specification=_e}possiblyEvaluate(_e,rt){return _e.expression.evaluate(rt)}interpolate(_e,rt,at){const ct=lp[this.specification.type];return ct?ct(_e,rt,at):_e}}class Sr{constructor(_e,rt){this.specification=_e,this.overrides=rt}possiblyEvaluate(_e,rt,at,ct){return new $r(this,_e.expression.kind==="constant"||_e.expression.kind==="camera"?{kind:"constant",value:_e.expression.evaluate(rt,null,{},at,ct)}:_e.expression,rt)}interpolate(_e,rt,at){if(_e.value.kind!=="constant"||rt.value.kind!=="constant")return _e;if(_e.value.value===void 0||rt.value.value===void 0)return new $r(this,{kind:"constant",value:void 0},_e.parameters);const ct=lp[this.specification.type];return ct?new $r(this,{kind:"constant",value:ct(_e.value.value,rt.value.value,at)},_e.parameters):_e}evaluate(_e,rt,at,ct,vt,At){return _e.kind==="constant"?_e.value:_e.evaluate(rt,at,ct,vt,At)}}class mo extends Sr{possiblyEvaluate(_e,rt,at,ct){if(_e.value===void 0)return new $r(this,{kind:"constant",value:void 0},rt);if(_e.expression.kind==="constant"){const vt=_e.expression.evaluate(rt,null,{},at,ct),At=_e.property.specification.type==="resolvedImage"&&typeof vt!="string"?vt.name:vt,Bt=this._calculate(At,At,At,rt);return new $r(this,{kind:"constant",value:Bt},rt)}if(_e.expression.kind==="camera"){const vt=this._calculate(_e.expression.evaluate({zoom:rt.zoom-1}),_e.expression.evaluate({zoom:rt.zoom}),_e.expression.evaluate({zoom:rt.zoom+1}),rt);return new $r(this,{kind:"constant",value:vt},rt)}return new $r(this,_e.expression,rt)}evaluate(_e,rt,at,ct,vt,At){if(_e.kind==="source"){const Bt=_e.evaluate(rt,at,ct,vt,At);return this._calculate(Bt,Bt,Bt,rt)}return _e.kind==="composite"?this._calculate(_e.evaluate({zoom:Math.floor(rt.zoom)-1},at,ct),_e.evaluate({zoom:Math.floor(rt.zoom)},at,ct),_e.evaluate({zoom:Math.floor(rt.zoom)+1},at,ct),rt):_e.value}_calculate(_e,rt,at,ct){return ct.zoom>ct.zoomHistory.lastIntegerZoom?{from:_e,to:rt,other:at}:{from:at,to:rt,other:_e}}interpolate(_e){return _e}}class lo{constructor(_e){this.specification=_e}possiblyEvaluate(_e,rt,at,ct){if(_e.value!==void 0){if(_e.expression.kind==="constant"){const vt=_e.expression.evaluate(rt,null,{},at,ct);return this._calculate(vt,vt,vt,rt)}return this._calculate(_e.expression.evaluate(new tr(Math.floor(rt.zoom-1),rt)),_e.expression.evaluate(new tr(Math.floor(rt.zoom),rt)),_e.expression.evaluate(new tr(Math.floor(rt.zoom+1),rt)),rt)}}_calculate(_e,rt,at,ct){return ct.zoom>ct.zoomHistory.lastIntegerZoom?{from:_e,to:rt}:{from:at,to:rt}}interpolate(_e){return _e}}class ho{constructor(_e){this.specification=_e}possiblyEvaluate(_e,rt,at,ct){return!!_e.expression.evaluate(rt,null,{},at,ct)}interpolate(){return!1}}class uo{constructor(_e){this.properties=_e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const rt=new tr(0,{});for(const at in _e){const ct=_e[at];ct.specification.overridable&&this.overridableProperties.push(at);const vt=this.defaultPropertyValues[at]=new vr(ct,void 0),At=this.defaultTransitionablePropertyValues[at]=new Er(ct);this.defaultTransitioningPropertyValues[at]=At.untransitioned(),this.defaultPossiblyEvaluatedValues[at]=vt.possiblyEvaluate(rt)}}}function Po(nt,_e){return 256*(nt=Gt(Math.floor(nt),0,255))+Gt(Math.floor(_e),0,255)}Ao(Sr,"DataDrivenProperty"),Ao(Or,"DataConstantProperty"),Ao(mo,"CrossFadedDataDrivenProperty"),Ao(lo,"CrossFadedProperty"),Ao(ho,"ColorRampProperty");const zo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Uo{constructor(_e,rt){this._structArray=_e,this._pos1=rt*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Bo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(_e,rt){return _e._trim(),rt&&(_e.isTransferred=!0,rt.push(_e.arrayBuffer)),{length:_e.length,arrayBuffer:_e.arrayBuffer}}static deserialize(_e){const rt=Object.create(this.prototype);return rt.arrayBuffer=_e.arrayBuffer,rt.length=_e.length,rt.capacity=_e.arrayBuffer.byteLength/rt.bytesPerElement,rt._refreshViews(),rt}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(_e){this.reserve(_e),this.length=_e}reserve(_e){if(_e>this.capacity){this.capacity=Math.max(_e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const rt=this.uint8;this._refreshViews(),rt&&this.uint8.set(rt)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function co(nt,_e=1){let rt=0,at=0;return{members:nt.map(ct=>{const vt=zo[ct.type].BYTES_PER_ELEMENT,At=rt=Yo(rt,Math.max(_e,vt)),Bt=ct.components||1;return at=Math.max(at,vt),rt+=vt*Bt,{name:ct.name,type:ct.type,components:Bt,offset:At}}),size:Yo(rt,Math.max(at,_e)),alignment:_e}}function Yo(nt,_e){return Math.ceil(nt/_e)*_e}class ls extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt){const at=this.length;return this.resize(at+1),this.emplace(at,_e,rt)}emplace(_e,rt,at){const ct=2*_e;return this.int16[ct+0]=rt,this.int16[ct+1]=at,_e}}ls.prototype.bytesPerElement=4,Ao(ls,"StructArrayLayout2i4");class Ls extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at){const ct=this.length;return this.resize(ct+1),this.emplace(ct,_e,rt,at)}emplace(_e,rt,at,ct){const vt=3*_e;return this.int16[vt+0]=rt,this.int16[vt+1]=at,this.int16[vt+2]=ct,_e}}Ls.prototype.bytesPerElement=6,Ao(Ls,"StructArrayLayout3i6");class Ns extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct){const vt=this.length;return this.resize(vt+1),this.emplace(vt,_e,rt,at,ct)}emplace(_e,rt,at,ct,vt){const At=4*_e;return this.int16[At+0]=rt,this.int16[At+1]=at,this.int16[At+2]=ct,this.int16[At+3]=vt,_e}}Ns.prototype.bytesPerElement=8,Ao(Ns,"StructArrayLayout4i8");class Os extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,_e,rt,at,ct,vt,At,Bt)}emplace(_e,rt,at,ct,vt,At,Bt,Wt){const Yt=6*_e,sn=12*_e,fn=3*_e;return this.int16[Yt+0]=rt,this.int16[Yt+1]=at,this.uint8[sn+4]=ct,this.uint8[sn+5]=vt,this.uint8[sn+6]=At,this.uint8[sn+7]=Bt,this.float32[fn+2]=Wt,_e}}Os.prototype.bytesPerElement=12,Ao(Os,"StructArrayLayout2i4ub1f12");class Ll extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct){const vt=this.length;return this.resize(vt+1),this.emplace(vt,_e,rt,at,ct)}emplace(_e,rt,at,ct,vt){const At=4*_e;return this.float32[At+0]=rt,this.float32[At+1]=at,this.float32[At+2]=ct,this.float32[At+3]=vt,_e}}Ll.prototype.bytesPerElement=16,Ao(Ll,"StructArrayLayout4f16");class iu extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn){const fn=this.length;return this.resize(fn+1),this.emplace(fn,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn)}emplace(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn){const pn=10*_e;return this.uint16[pn+0]=rt,this.uint16[pn+1]=at,this.uint16[pn+2]=ct,this.uint16[pn+3]=vt,this.uint16[pn+4]=At,this.uint16[pn+5]=Bt,this.uint16[pn+6]=Wt,this.uint16[pn+7]=Yt,this.uint16[pn+8]=sn,this.uint16[pn+9]=fn,_e}}iu.prototype.bytesPerElement=20,Ao(iu,"StructArrayLayout10ui20");class hp extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt,Wt){const Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,_e,rt,at,ct,vt,At,Bt,Wt)}emplace(_e,rt,at,ct,vt,At,Bt,Wt,Yt){const sn=8*_e;return this.uint16[sn+0]=rt,this.uint16[sn+1]=at,this.uint16[sn+2]=ct,this.uint16[sn+3]=vt,this.uint16[sn+4]=At,this.uint16[sn+5]=Bt,this.uint16[sn+6]=Wt,this.uint16[sn+7]=Yt,_e}}hp.prototype.bytesPerElement=16,Ao(hp,"StructArrayLayout8ui16");class Us extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,_e,rt,at,ct,vt,At)}emplace(_e,rt,at,ct,vt,At,Bt){const Wt=6*_e;return this.int16[Wt+0]=rt,this.int16[Wt+1]=at,this.int16[Wt+2]=ct,this.int16[Wt+3]=vt,this.int16[Wt+4]=At,this.int16[Wt+5]=Bt,_e}}Us.prototype.bytesPerElement=12,Ao(Us,"StructArrayLayout6i12");class xa extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn){const An=this.length;return this.resize(An+1),this.emplace(An,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn)}emplace(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An){const Tn=12*_e;return this.int16[Tn+0]=rt,this.int16[Tn+1]=at,this.int16[Tn+2]=ct,this.int16[Tn+3]=vt,this.uint16[Tn+4]=At,this.uint16[Tn+5]=Bt,this.uint16[Tn+6]=Wt,this.uint16[Tn+7]=Yt,this.int16[Tn+8]=sn,this.int16[Tn+9]=fn,this.int16[Tn+10]=pn,this.int16[Tn+11]=An,_e}}xa.prototype.bytesPerElement=24,Ao(xa,"StructArrayLayout4i4ui4i24");class Ms extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,_e,rt,at,ct,vt,At)}emplace(_e,rt,at,ct,vt,At,Bt){const Wt=10*_e,Yt=5*_e;return this.int16[Wt+0]=rt,this.int16[Wt+1]=at,this.int16[Wt+2]=ct,this.float32[Yt+2]=vt,this.float32[Yt+3]=At,this.float32[Yt+4]=Bt,_e}}Ms.prototype.bytesPerElement=20,Ao(Ms,"StructArrayLayout3i3f20");class Tl extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(_e){const rt=this.length;return this.resize(rt+1),this.emplace(rt,_e)}emplace(_e,rt){return this.uint32[1*_e+0]=rt,_e}}Tl.prototype.bytesPerElement=4,Ao(Tl,"StructArrayLayout1ul4");class ou extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An){const Tn=this.length;return this.resize(Tn+1),this.emplace(Tn,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An)}emplace(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn){const kn=20*_e,Vn=10*_e;return this.int16[kn+0]=rt,this.int16[kn+1]=at,this.int16[kn+2]=ct,this.int16[kn+3]=vt,this.int16[kn+4]=At,this.float32[Vn+3]=Bt,this.float32[Vn+4]=Wt,this.float32[Vn+5]=Yt,this.float32[Vn+6]=sn,this.int16[kn+14]=fn,this.uint32[Vn+8]=pn,this.uint16[kn+18]=An,this.uint16[kn+19]=Tn,_e}}ou.prototype.bytesPerElement=40,Ao(ou,"StructArrayLayout5i4f1i1ul2ui40");class Gs extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,_e,rt,at,ct,vt,At,Bt)}emplace(_e,rt,at,ct,vt,At,Bt,Wt){const Yt=8*_e;return this.int16[Yt+0]=rt,this.int16[Yt+1]=at,this.int16[Yt+2]=ct,this.int16[Yt+4]=vt,this.int16[Yt+5]=At,this.int16[Yt+6]=Bt,this.int16[Yt+7]=Wt,_e}}Gs.prototype.bytesPerElement=16,Ao(Gs,"StructArrayLayout3i2i2i16");class Ru extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt){const At=this.length;return this.resize(At+1),this.emplace(At,_e,rt,at,ct,vt)}emplace(_e,rt,at,ct,vt,At){const Bt=4*_e,Wt=8*_e;return this.float32[Bt+0]=rt,this.float32[Bt+1]=at,this.float32[Bt+2]=ct,this.int16[Wt+6]=vt,this.int16[Wt+7]=At,_e}}Ru.prototype.bytesPerElement=16,Ao(Ru,"StructArrayLayout2f1f2i16");class qp extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct){const vt=this.length;return this.resize(vt+1),this.emplace(vt,_e,rt,at,ct)}emplace(_e,rt,at,ct,vt){const At=12*_e,Bt=3*_e;return this.uint8[At+0]=rt,this.uint8[At+1]=at,this.float32[Bt+1]=ct,this.float32[Bt+2]=vt,_e}}qp.prototype.bytesPerElement=12,Ao(qp,"StructArrayLayout2ub2f12");class Zu extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at){const ct=this.length;return this.resize(ct+1),this.emplace(ct,_e,rt,at)}emplace(_e,rt,at,ct){const vt=3*_e;return this.float32[vt+0]=rt,this.float32[vt+1]=at,this.float32[vt+2]=ct,_e}}Zu.prototype.bytesPerElement=12,Ao(Zu,"StructArrayLayout3f12");class Xl extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at){const ct=this.length;return this.resize(ct+1),this.emplace(ct,_e,rt,at)}emplace(_e,rt,at,ct){const vt=3*_e;return this.uint16[vt+0]=rt,this.uint16[vt+1]=at,this.uint16[vt+2]=ct,_e}}Xl.prototype.bytesPerElement=6,Ao(Xl,"StructArrayLayout3ui6");class uy extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn,Vn,ir,_r,rr,dr,br){const gr=this.length;return this.resize(gr+1),this.emplace(gr,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn,Vn,ir,_r,rr,dr,br)}emplace(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn,Vn,ir,_r,rr,dr,br,gr){const Dr=30*_e,Pr=15*_e,Wr=60*_e;return this.int16[Dr+0]=rt,this.int16[Dr+1]=at,this.int16[Dr+2]=ct,this.float32[Pr+2]=vt,this.float32[Pr+3]=At,this.uint16[Dr+8]=Bt,this.uint16[Dr+9]=Wt,this.uint32[Pr+5]=Yt,this.uint32[Pr+6]=sn,this.uint32[Pr+7]=fn,this.uint16[Dr+16]=pn,this.uint16[Dr+17]=An,this.uint16[Dr+18]=Tn,this.float32[Pr+10]=kn,this.float32[Pr+11]=Vn,this.uint8[Wr+48]=ir,this.uint8[Wr+49]=_r,this.uint8[Wr+50]=rr,this.uint32[Pr+13]=dr,this.int16[Dr+28]=br,this.uint8[Wr+58]=gr,_e}}uy.prototype.bytesPerElement=60,Ao(uy,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Cp extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn,Vn,ir,_r,rr,dr,br,gr,Dr,Pr,Wr,oo,jr,Zr,Kr,eo){const ao=this.length;return this.resize(ao+1),this.emplace(ao,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn,Vn,ir,_r,rr,dr,br,gr,Dr,Pr,Wr,oo,jr,Zr,Kr,eo)}emplace(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn,Vn,ir,_r,rr,dr,br,gr,Dr,Pr,Wr,oo,jr,Zr,Kr,eo,ao){const Fr=38*_e,yo=19*_e;return this.int16[Fr+0]=rt,this.int16[Fr+1]=at,this.int16[Fr+2]=ct,this.float32[yo+2]=vt,this.float32[yo+3]=At,this.int16[Fr+8]=Bt,this.int16[Fr+9]=Wt,this.int16[Fr+10]=Yt,this.int16[Fr+11]=sn,this.int16[Fr+12]=fn,this.int16[Fr+13]=pn,this.uint16[Fr+14]=An,this.uint16[Fr+15]=Tn,this.uint16[Fr+16]=kn,this.uint16[Fr+17]=Vn,this.uint16[Fr+18]=ir,this.uint16[Fr+19]=_r,this.uint16[Fr+20]=rr,this.uint16[Fr+21]=dr,this.uint16[Fr+22]=br,this.uint16[Fr+23]=gr,this.uint16[Fr+24]=Dr,this.uint16[Fr+25]=Pr,this.uint16[Fr+26]=Wr,this.uint16[Fr+27]=oo,this.uint16[Fr+28]=jr,this.uint32[yo+15]=Zr,this.float32[yo+16]=Kr,this.float32[yo+17]=eo,this.float32[yo+18]=ao,_e}}Cp.prototype.bytesPerElement=76,Ao(Cp,"StructArrayLayout3i2f6i15ui1ul3f76");class qo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e){const rt=this.length;return this.resize(rt+1),this.emplace(rt,_e)}emplace(_e,rt){return this.float32[1*_e+0]=rt,_e}}qo.prototype.bytesPerElement=4,Ao(qo,"StructArrayLayout1f4");class Rp extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct,vt){const At=this.length;return this.resize(At+1),this.emplace(At,_e,rt,at,ct,vt)}emplace(_e,rt,at,ct,vt,At){const Bt=5*_e;return this.float32[Bt+0]=rt,this.float32[Bt+1]=at,this.float32[Bt+2]=ct,this.float32[Bt+3]=vt,this.float32[Bt+4]=At,_e}}Rp.prototype.bytesPerElement=20,Ao(Rp,"StructArrayLayout5f20");class dm extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt,at,ct){const vt=this.length;return this.resize(vt+1),this.emplace(vt,_e,rt,at,ct)}emplace(_e,rt,at,ct,vt){const At=6*_e;return this.uint32[3*_e+0]=rt,this.uint16[At+2]=at,this.uint16[At+3]=ct,this.uint16[At+4]=vt,_e}}dm.prototype.bytesPerElement=12,Ao(dm,"StructArrayLayout1ul3ui12");class _u extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e,rt){const at=this.length;return this.resize(at+1),this.emplace(at,_e,rt)}emplace(_e,rt,at){const ct=2*_e;return this.uint16[ct+0]=rt,this.uint16[ct+1]=at,_e}}_u.prototype.bytesPerElement=4,Ao(_u,"StructArrayLayout2ui4");class C_ extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(_e){const rt=this.length;return this.resize(rt+1),this.emplace(rt,_e)}emplace(_e,rt){return this.uint16[1*_e+0]=rt,_e}}C_.prototype.bytesPerElement=2,Ao(C_,"StructArrayLayout1ui2");class A0 extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(_e,rt){const at=this.length;return this.resize(at+1),this.emplace(at,_e,rt)}emplace(_e,rt,at){const ct=2*_e;return this.float32[ct+0]=rt,this.float32[ct+1]=at,_e}}A0.prototype.bytesPerElement=8,Ao(A0,"StructArrayLayout2f8");class Bw extends Uo{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Bw.prototype.size=12;class fp extends Us{get(_e){return new Bw(this,_e)}}Ao(fp,"FillExtrusionExtArray");class jw extends Uo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}jw.prototype.size=40;class R_ extends ou{get(_e){return new jw(this,_e)}}Ao(R_,"CollisionBoxArray");class E0 extends Uo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(_e){this._structArray.uint8[this._pos1+49]=_e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(_e){this._structArray.uint8[this._pos1+50]=_e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(_e){this._structArray.uint32[this._pos4+13]=_e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(_e){this._structArray.uint8[this._pos1+58]=_e}}E0.prototype.size=60;class R1 extends uy{get(_e){return new E0(this,_e)}}Ao(R1,"PlacedSymbolArray");class I1 extends Uo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(_e){this._structArray.uint32[this._pos4+15]=_e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}I1.prototype.size=76;class Yu extends Cp{get(_e){return new I1(this,_e)}}Ao(Yu,"SymbolInstanceArray");class jm extends qo{getoffsetX(_e){return this.float32[1*_e+0]}}Ao(jm,"GlyphOffsetArray");class T0 extends Ls{getx(_e){return this.int16[3*_e+0]}gety(_e){return this.int16[3*_e+1]}gettileUnitDistanceFromAnchor(_e){return this.int16[3*_e+2]}}Ao(T0,"SymbolLineVertexArray");class O1 extends Uo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}O1.prototype.size=12;class Iv extends dm{get(_e){return new O1(this,_e)}}Ao(Iv,"FeatureIndexArray");class M1 extends Uo{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}M1.prototype.size=4;class C0 extends _u{get(_e){return new M1(this,_e)}}Ao(C0,"FillExtrusionCentroidArray");class P1 extends Uo{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}P1.prototype.size=12;class R0 extends Us{get(_e){return new P1(this,_e)}}Ao(R0,"CircleGlobeExtArray");const k1=co([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),cy=co([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var I_={exports:{}},Fm={exports:{}};Fm.exports=function(nt,_e){var rt,at,ct,vt,At,Bt,Wt,Yt;for(at=nt.length-(rt=3&nt.length),ct=_e,At=3432918353,Bt=461845907,Yt=0;Yt<at;)Wt=255&nt.charCodeAt(Yt)|(255&nt.charCodeAt(++Yt))<<8|(255&nt.charCodeAt(++Yt))<<16|(255&nt.charCodeAt(++Yt))<<24,++Yt,ct=27492+(65535&(vt=5*(65535&(ct=(ct^=Wt=(65535&(Wt=(Wt=(65535&Wt)*At+(((Wt>>>16)*At&65535)<<16)&4294967295)<<15|Wt>>>17))*Bt+(((Wt>>>16)*Bt&65535)<<16)&4294967295)<<13|ct>>>19))+((5*(ct>>>16)&65535)<<16)&4294967295))+((58964+(vt>>>16)&65535)<<16);switch(Wt=0,rt){case 3:Wt^=(255&nt.charCodeAt(Yt+2))<<16;case 2:Wt^=(255&nt.charCodeAt(Yt+1))<<8;case 1:ct^=Wt=(65535&(Wt=(Wt=(65535&(Wt^=255&nt.charCodeAt(Yt)))*At+(((Wt>>>16)*At&65535)<<16)&4294967295)<<15|Wt>>>17))*Bt+(((Wt>>>16)*Bt&65535)<<16)&4294967295}return ct^=nt.length,ct=2246822507*(65535&(ct^=ct>>>16))+((2246822507*(ct>>>16)&65535)<<16)&4294967295,ct=3266489909*(65535&(ct^=ct>>>13))+((3266489909*(ct>>>16)&65535)<<16)&4294967295,(ct^=ct>>>16)>>>0};var D1={exports:{}};D1.exports=function(nt,_e){for(var rt,at=nt.length,ct=_e^at,vt=0;at>=4;)rt=1540483477*(65535&(rt=255&nt.charCodeAt(vt)|(255&nt.charCodeAt(++vt))<<8|(255&nt.charCodeAt(++vt))<<16|(255&nt.charCodeAt(++vt))<<24))+((1540483477*(rt>>>16)&65535)<<16),ct=1540483477*(65535&ct)+((1540483477*(ct>>>16)&65535)<<16)^(rt=1540483477*(65535&(rt^=rt>>>24))+((1540483477*(rt>>>16)&65535)<<16)),at-=4,++vt;switch(at){case 3:ct^=(255&nt.charCodeAt(vt+2))<<16;case 2:ct^=(255&nt.charCodeAt(vt+1))<<8;case 1:ct=1540483477*(65535&(ct^=255&nt.charCodeAt(vt)))+((1540483477*(ct>>>16)&65535)<<16)}return ct=1540483477*(65535&(ct^=ct>>>13))+((1540483477*(ct>>>16)&65535)<<16),(ct^=ct>>>15)>>>0};var L1=Fm.exports,B1=D1.exports;I_.exports=L1,I_.exports.murmur3=L1,I_.exports.murmur2=B1;class I0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(_e,rt,at,ct){this.ids.push(Fw(_e)),this.positions.push(rt,at,ct)}getPositions(_e){const rt=Fw(_e);let at=0,ct=this.ids.length-1;for(;at<ct;){const At=at+ct>>1;this.ids[At]>=rt?ct=At:at=At+1}const vt=[];for(;this.ids[at]===rt;)vt.push({index:this.positions[3*at],start:this.positions[3*at+1],end:this.positions[3*at+2]}),at++;return vt}static serialize(_e,rt){const at=new Float64Array(_e.ids),ct=new Uint32Array(_e.positions);return j1(at,ct,0,at.length-1),rt&&rt.push(at.buffer,ct.buffer),{ids:at,positions:ct}}static deserialize(_e){const rt=new I0;return rt.ids=_e.ids,rt.positions=_e.positions,rt.indexed=!0,rt}}function Fw(nt){const _e=+nt;return!isNaN(_e)&&Number.MIN_SAFE_INTEGER<=_e&&_e<=Number.MAX_SAFE_INTEGER?_e:I_.exports(String(nt))}function j1(nt,_e,rt,at){for(;rt<at;){const ct=nt[rt+at>>1];let vt=rt-1,At=at+1;for(;;){do vt++;while(nt[vt]<ct);do At--;while(nt[At]>ct);if(vt>=At)break;Ov(nt,vt,At),Ov(_e,3*vt,3*At),Ov(_e,3*vt+1,3*At+1),Ov(_e,3*vt+2,3*At+2)}At-rt<at-At?(j1(nt,_e,rt,At),rt=At+1):(j1(nt,_e,At+1,at),at=At)}}function Ov(nt,_e,rt){const at=nt[_e];nt[_e]=nt[rt],nt[rt]=at}Ao(I0,"FeaturePositionMap");class gm{constructor(_e){this.gl=_e.gl,this.initialized=!1}fetchUniformLocation(_e,rt){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(_e,rt),this.initialized=!0),!!this.location}}class O0 extends gm{constructor(_e){super(_e),this.current=0}set(_e,rt,at){this.fetchUniformLocation(_e,rt)&&this.current!==at&&(this.current=at,this.gl.uniform1f(this.location,at))}}class F1 extends gm{constructor(_e){super(_e),this.current=[0,0,0,0]}set(_e,rt,at){this.fetchUniformLocation(_e,rt)&&(at[0]===this.current[0]&&at[1]===this.current[1]&&at[2]===this.current[2]&&at[3]===this.current[3]||(this.current=at,this.gl.uniform4f(this.location,at[0],at[1],at[2],at[3])))}}class N1 extends gm{constructor(_e){super(_e),this.current=Fs.transparent}set(_e,rt,at){this.fetchUniformLocation(_e,rt)&&(at.r===this.current.r&&at.g===this.current.g&&at.b===this.current.b&&at.a===this.current.a||(this.current=at,this.gl.uniform4f(this.location,at.r,at.g,at.b,at.a)))}}const Ku=new Float32Array(16),pm=new Float32Array(9),fx=new Float32Array(4);function U1(nt){return[Po(255*nt.r,255*nt.g),Po(255*nt.b,255*nt.a)]}class hy{constructor(_e,rt,at){this.value=_e,this.uniformNames=rt.map(ct=>`u_${ct}`),this.type=at}setUniform(_e,rt,at,ct,vt){rt.set(_e,vt,ct.constantOr(this.value))}getBinding(_e,rt){return this.type==="color"?new N1(_e):new O0(_e)}}class Zp{constructor(_e,rt){this.uniformNames=rt.map(at=>`u_${at}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(_e,rt){this.pixelRatioFrom=rt.pixelRatio||1,this.pixelRatioTo=_e.pixelRatio||1,this.patternFrom=rt.tl.concat(rt.br),this.patternTo=_e.tl.concat(_e.br)}setUniform(_e,rt,at,ct,vt){const At=vt==="u_pattern_to"||vt==="u_dash_to"?this.patternTo:vt==="u_pattern_from"||vt==="u_dash_from"?this.patternFrom:vt==="u_pixel_ratio_to"?this.pixelRatioTo:vt==="u_pixel_ratio_from"?this.pixelRatioFrom:null;At&&rt.set(_e,vt,At)}getBinding(_e,rt){return rt==="u_pattern_from"||rt==="u_pattern_to"||rt==="u_dash_from"||rt==="u_dash_to"?new F1(_e):new O0(_e)}}class mm{constructor(_e,rt,at,ct){this.expression=_e,this.type=at,this.maxValue=0,this.paintVertexAttributes=rt.map(vt=>({name:`a_${vt}`,type:"Float32",components:at==="color"?2:1,offset:0})),this.paintVertexArray=new ct}populatePaintArray(_e,rt,at,ct,vt,At){const Bt=this.paintVertexArray.length,Wt=this.expression.evaluate(new tr(0),rt,{},vt,ct,At);this.paintVertexArray.resize(_e),this._setPaintValue(Bt,_e,Wt)}updatePaintArray(_e,rt,at,ct,vt){const At=this.expression.evaluate({zoom:0},at,ct,void 0,vt);this._setPaintValue(_e,rt,At)}_setPaintValue(_e,rt,at){if(this.type==="color"){const ct=U1(at);for(let vt=_e;vt<rt;vt++)this.paintVertexArray.emplace(vt,ct[0],ct[1])}else{for(let ct=_e;ct<rt;ct++)this.paintVertexArray.emplace(ct,at);this.maxValue=Math.max(this.maxValue,Math.abs(at))}}upload(_e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ip{constructor(_e,rt,at,ct,vt,At){this.expression=_e,this.uniformNames=rt.map(Bt=>`u_${Bt}_t`),this.type=at,this.useIntegerZoom=ct,this.zoom=vt,this.maxValue=0,this.paintVertexAttributes=rt.map(Bt=>({name:`a_${Bt}`,type:"Float32",components:at==="color"?4:2,offset:0})),this.paintVertexArray=new At}populatePaintArray(_e,rt,at,ct,vt,At){const Bt=this.expression.evaluate(new tr(this.zoom),rt,{},vt,ct,At),Wt=this.expression.evaluate(new tr(this.zoom+1),rt,{},vt,ct,At),Yt=this.paintVertexArray.length;this.paintVertexArray.resize(_e),this._setPaintValue(Yt,_e,Bt,Wt)}updatePaintArray(_e,rt,at,ct,vt){const At=this.expression.evaluate({zoom:this.zoom},at,ct,void 0,vt),Bt=this.expression.evaluate({zoom:this.zoom+1},at,ct,void 0,vt);this._setPaintValue(_e,rt,At,Bt)}_setPaintValue(_e,rt,at,ct){if(this.type==="color"){const vt=U1(at),At=U1(ct);for(let Bt=_e;Bt<rt;Bt++)this.paintVertexArray.emplace(Bt,vt[0],vt[1],At[0],At[1])}else{for(let vt=_e;vt<rt;vt++)this.paintVertexArray.emplace(vt,at,ct);this.maxValue=Math.max(this.maxValue,Math.abs(at),Math.abs(ct))}}upload(_e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(_e,rt,at,ct,vt){const At=this.useIntegerZoom?Math.floor(at.zoom):at.zoom,Bt=Gt(this.expression.interpolationFactor(At,this.zoom,this.zoom+1),0,1);rt.set(_e,vt,Bt)}getBinding(_e,rt){return new O0(_e)}}class fy{constructor(_e,rt,at,ct,vt,At,Bt){this.expression=_e,this.type=at,this.useIntegerZoom=ct,this.zoom=vt,this.layerId=Bt,this.paintVertexAttributes=(at==="array"?cy:k1).members;for(let Wt=0;Wt<rt.length;++Wt);this.zoomInPaintVertexArray=new At,this.zoomOutPaintVertexArray=new At}populatePaintArray(_e,rt,at){const ct=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(_e),this.zoomOutPaintVertexArray.resize(_e),this._setPaintValues(ct,_e,rt.patterns&&rt.patterns[this.layerId],at)}updatePaintArray(_e,rt,at,ct,vt,At){this._setPaintValues(_e,rt,at.patterns&&at.patterns[this.layerId],At)}_setPaintValues(_e,rt,at,ct){if(!ct||!at)return;const{min:vt,mid:At,max:Bt}=at,Wt=ct[vt],Yt=ct[At],sn=ct[Bt];if(Wt&&Yt&&sn)for(let fn=_e;fn<rt;fn++)this._setPaintValue(this.zoomInPaintVertexArray,fn,Yt,Wt),this._setPaintValue(this.zoomOutPaintVertexArray,fn,Yt,sn)}_setPaintValue(_e,rt,at,ct){_e.emplace(rt,at.tl[0],at.tl[1],at.br[0],at.br[1],ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],at.pixelRatio,ct.pixelRatio)}upload(_e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=_e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=_e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Nm{constructor(_e,rt,at=()=>!0){this.binders={},this._buffers=[];const ct=[];for(const vt in _e.paint._values){if(!at(vt))continue;const At=_e.paint.get(vt);if(!(At instanceof $r&&Np(At.property.specification)))continue;const Bt=dx(vt,_e.type),Wt=At.value,Yt=At.property.specification.type,sn=At.property.useIntegerZoom,fn=At.property.specification["property-type"],pn=fn==="cross-faded"||fn==="cross-faded-data-driven",An=String(vt)==="line-dasharray"&&_e.layout.get("line-cap").value.kind!=="constant";if(Wt.kind!=="constant"||An)if(Wt.kind==="source"||An||pn){const Tn=Pv(vt,Yt,"source");this.binders[vt]=pn?new fy(Wt,Bt,Yt,sn,rt,Tn,_e.id):new mm(Wt,Bt,Yt,Tn),ct.push(`/a_${vt}`)}else{const Tn=Pv(vt,Yt,"composite");this.binders[vt]=new Ip(Wt,Bt,Yt,sn,rt,Tn),ct.push(`/z_${vt}`)}else this.binders[vt]=pn?new Zp(Wt.value,Bt):new hy(Wt.value,Bt,Yt),ct.push(`/u_${vt}`)}this.cacheKey=ct.sort().join("")}getMaxValue(_e){const rt=this.binders[_e];return rt instanceof mm||rt instanceof Ip?rt.maxValue:0}populatePaintArrays(_e,rt,at,ct,vt,At){for(const Bt in this.binders){const Wt=this.binders[Bt];(Wt instanceof mm||Wt instanceof Ip||Wt instanceof fy)&&Wt.populatePaintArray(_e,rt,at,ct,vt,At)}}setConstantPatternPositions(_e,rt){for(const at in this.binders){const ct=this.binders[at];ct instanceof Zp&&ct.setConstantPatternPositions(_e,rt)}}updatePaintArrays(_e,rt,at,ct,vt,At){let Bt=!1;for(const Wt in _e){const Yt=rt.getPositions(Wt);for(const sn of Yt){const fn=at.feature(sn.index);for(const pn in this.binders){const An=this.binders[pn];if((An instanceof mm||An instanceof Ip||An instanceof fy)&&An.expression.isStateDependent===!0){const Tn=ct.paint.get(pn);An.expression=Tn.value,An.updatePaintArray(sn.start,sn.end,fn,_e[Wt],vt,At),Bt=!0}}}}return Bt}defines(){const _e=[];for(const rt in this.binders){const at=this.binders[rt];(at instanceof hy||at instanceof Zp)&&_e.push(...at.uniformNames.map(ct=>`#define HAS_UNIFORM_${ct}`))}return _e}getBinderAttributes(){const _e=[];for(const rt in this.binders){const at=this.binders[rt];if(at instanceof mm||at instanceof Ip||at instanceof fy)for(let ct=0;ct<at.paintVertexAttributes.length;ct++)_e.push(at.paintVertexAttributes[ct].name)}return _e}getBinderUniforms(){const _e=[];for(const rt in this.binders){const at=this.binders[rt];if(at instanceof hy||at instanceof Zp||at instanceof Ip)for(const ct of at.uniformNames)_e.push(ct)}return _e}getPaintVertexBuffers(){return this._buffers}getUniforms(_e){const rt=[];for(const at in this.binders){const ct=this.binders[at];if(ct instanceof hy||ct instanceof Zp||ct instanceof Ip)for(const vt of ct.uniformNames)rt.push({name:vt,property:at,binding:ct.getBinding(_e,vt)})}return rt}setUniforms(_e,rt,at,ct,vt){for(const{name:At,property:Bt,binding:Wt}of at)this.binders[Bt].setUniform(_e,Wt,vt,ct.get(Bt),At)}updatePaintBuffers(_e){this._buffers=[];for(const rt in this.binders){const at=this.binders[rt];if(_e&&at instanceof fy){const ct=_e.fromScale===2?at.zoomInPaintVertexBuffer:at.zoomOutPaintVertexBuffer;ct&&this._buffers.push(ct)}else(at instanceof mm||at instanceof Ip)&&at.paintVertexBuffer&&this._buffers.push(at.paintVertexBuffer)}}upload(_e){for(const rt in this.binders){const at=this.binders[rt];(at instanceof mm||at instanceof Ip||at instanceof fy)&&at.upload(_e)}this.updatePaintBuffers()}destroy(){for(const _e in this.binders){const rt=this.binders[_e];(rt instanceof mm||rt instanceof Ip||rt instanceof fy)&&rt.destroy()}}}class Op{constructor(_e,rt,at=()=>!0){this.programConfigurations={};for(const ct of _e)this.programConfigurations[ct.id]=new Nm(ct,rt,at);this.needsUpload=!1,this._featureMap=new I0,this._bufferOffset=0}populatePaintArrays(_e,rt,at,ct,vt,At,Bt){for(const Wt in this.programConfigurations)this.programConfigurations[Wt].populatePaintArrays(_e,rt,ct,vt,At,Bt);rt.id!==void 0&&this._featureMap.add(rt.id,at,this._bufferOffset,_e),this._bufferOffset=_e,this.needsUpload=!0}updatePaintArrays(_e,rt,at,ct,vt){for(const At of at)this.needsUpload=this.programConfigurations[At.id].updatePaintArrays(_e,this._featureMap,rt,At,ct,vt)||this.needsUpload}get(_e){return this.programConfigurations[_e]}upload(_e){if(this.needsUpload){for(const rt in this.programConfigurations)this.programConfigurations[rt].upload(_e);this.needsUpload=!1}}destroy(){for(const _e in this.programConfigurations)this.programConfigurations[_e].destroy()}}const Mv={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function dx(nt,_e){return Mv[nt]||[nt.replace(`${_e}-`,"").replace(/-/g,"_")]}const Nw={"line-pattern":{source:iu,composite:iu},"fill-pattern":{source:iu,composite:iu},"fill-extrusion-pattern":{source:iu,composite:iu},"line-dasharray":{source:hp,composite:hp}},Uw={color:{source:A0,composite:Ll},number:{source:qo,composite:A0}};function Pv(nt,_e,rt){const at=Nw[nt];return at&&at[rt]||Uw[_e][rt]}Ao(hy,"ConstantBinder"),Ao(Zp,"CrossFadedConstantBinder"),Ao(mm,"SourceExpressionBinder"),Ao(fy,"CrossFadedCompositeBinder"),Ao(Ip,"CompositeExpressionBinder"),Ao(Nm,"ProgramConfiguration",{omit:["_buffers"]}),Ao(Op,"ProgramConfigurationSet");const kv="-transition";class Xu extends cu{constructor(_e,rt){if(super(),this.id=_e.id,this.type=_e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,_e.type!=="custom"&&(this.metadata=_e.metadata,this.minzoom=_e.minzoom,this.maxzoom=_e.maxzoom,_e.type!=="background"&&_e.type!=="sky"&&(this.source=_e.source,this.sourceLayer=_e["source-layer"],this.filter=_e.filter),rt.layout&&(this._unevaluatedLayout=new Ar(rt.layout)),rt.paint)){this._transitionablePaint=new Lr(rt.paint);for(const at in _e.paint)this.setPaintProperty(at,_e.paint[at],{validate:!1});for(const at in _e.layout)this.setLayoutProperty(at,_e.layout[at],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qr(rt.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(_e){return _e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_e)}setLayoutProperty(_e,rt,at={}){rt!=null&&this._validate(C1,`layers.${this.id}.layout.${_e}`,_e,rt,at)||(_e!=="visibility"?this._unevaluatedLayout.setValue(_e,rt):this.visibility=rt)}getPaintProperty(_e){return rn(_e,kv)?this._transitionablePaint.getTransition(_e.slice(0,-kv.length)):this._transitionablePaint.getValue(_e)}setPaintProperty(_e,rt,at={}){if(rt!=null&&this._validate(T1,`layers.${this.id}.paint.${_e}`,_e,rt,at))return!1;if(rn(_e,kv))return this._transitionablePaint.setTransition(_e.slice(0,-kv.length),rt||void 0),!1;{const ct=this._transitionablePaint._values[_e],vt=ct.property.specification["property-type"]==="cross-faded-data-driven",At=ct.value.isDataDriven(),Bt=ct.value;this._transitionablePaint.setValue(_e,rt),this._handleSpecialPaintPropertyUpdate(_e);const Wt=this._transitionablePaint._values[_e].value;return Wt.isDataDriven()||At||vt||this._handleOverridablePaintPropertyUpdate(_e,Bt,Wt)}}_handleSpecialPaintPropertyUpdate(_e){}getProgramIds(){return null}getProgramConfiguration(_e){return null}_handleOverridablePaintPropertyUpdate(_e,rt,at){return!1}isHidden(_e){return!!(this.minzoom&&_e<this.minzoom)||!!(this.maxzoom&&_e>=this.maxzoom)||this.visibility==="none"}updateTransitions(_e){this._transitioningPaint=this._transitionablePaint.transitioned(_e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(_e,rt){_e.getCrossfadeParameters&&(this._crossfadeParameters=_e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_e,void 0,rt)),this.paint=this._transitioningPaint.possiblyEvaluate(_e,void 0,rt)}serialize(){const _e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_e.layout=_e.layout||{},_e.layout.visibility=this.visibility),Dt(_e,(rt,at)=>!(rt===void 0||at==="layout"&&!Object.keys(rt).length||at==="paint"&&!Object.keys(rt).length))}_validate(_e,rt,at,ct,vt={}){return(!vt||vt.validate!==!1)&&$p(this,_e.call(Es,{key:rt,layerType:this.type,objectKey:at,value:ct,styleSpec:Nr,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const _e in this.paint._values){const rt=this.paint.get(_e);if(rt instanceof $r&&Np(rt.property.specification)&&(rt.value.kind==="source"||rt.value.kind==="composite")&&rt.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=v_(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const z1=co([{name:"a_pos",components:2,type:"Int16"}],4),M0=co([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Bl{constructor(_e=[]){this.segments=_e}prepareSegment(_e,rt,at,ct){let vt=this.segments[this.segments.length-1];return _e>Bl.MAX_VERTEX_ARRAY_LENGTH&&hn(`Max vertices per segment is ${Bl.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${_e}`),(!vt||vt.vertexLength+_e>Bl.MAX_VERTEX_ARRAY_LENGTH||vt.sortKey!==ct)&&(vt={vertexOffset:rt.length,primitiveOffset:at.length,vertexLength:0,primitiveLength:0},ct!==void 0&&(vt.sortKey=ct),this.segments.push(vt)),vt}get(){return this.segments}destroy(){for(const _e of this.segments)for(const rt in _e.vaos)_e.vaos[rt].destroy()}static simpleSegment(_e,rt,at,ct){return new Bl([{vertexOffset:_e,primitiveOffset:rt,vertexLength:at,primitiveLength:ct,vaos:{},sortKey:0}])}}Bl.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ao(Bl,"SegmentVector");var Go=8192;class Yp{constructor(_e,rt){_e&&(rt?this.setSouthWest(_e).setNorthEast(rt):_e.length===4?this.setSouthWest([_e[0],_e[1]]).setNorthEast([_e[2],_e[3]]):this.setSouthWest(_e[0]).setNorthEast(_e[1]))}setNorthEast(_e){return this._ne=_e instanceof Ts?new Ts(_e.lng,_e.lat):Ts.convert(_e),this}setSouthWest(_e){return this._sw=_e instanceof Ts?new Ts(_e.lng,_e.lat):Ts.convert(_e),this}extend(_e){const rt=this._sw,at=this._ne;let ct,vt;if(_e instanceof Ts)ct=_e,vt=_e;else{if(!(_e instanceof Yp))return Array.isArray(_e)?_e.length===4||_e.every(Array.isArray)?this.extend(Yp.convert(_e)):this.extend(Ts.convert(_e)):typeof _e=="object"&&_e!==null&&_e.hasOwnProperty("lat")&&_e.hasOwnProperty("lon")?this.extend(Ts.convert(_e)):this;if(ct=_e._sw,vt=_e._ne,!ct||!vt)return this}return rt||at?(rt.lng=Math.min(ct.lng,rt.lng),rt.lat=Math.min(ct.lat,rt.lat),at.lng=Math.max(vt.lng,at.lng),at.lat=Math.max(vt.lat,at.lat)):(this._sw=new Ts(ct.lng,ct.lat),this._ne=new Ts(vt.lng,vt.lat)),this}getCenter(){return new Ts((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ts(this.getWest(),this.getNorth())}getSouthEast(){return new Ts(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(_e){const{lng:rt,lat:at}=Ts.convert(_e);let ct=this._sw.lng<=rt&&rt<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ct=this._sw.lng>=rt&&rt>=this._ne.lng),this._sw.lat<=at&&at<=this._ne.lat&&ct}static convert(_e){return!_e||_e instanceof Yp?_e:new Yp(_e)}}const Dv=63710088e-1;class Ts{constructor(_e,rt){if(isNaN(_e)||isNaN(rt))throw new Error(`Invalid LngLat object: (${_e}, ${rt})`);if(this.lng=+_e,this.lat=+rt,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ts(Ht(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(_e){const rt=Math.PI/180,at=this.lat*rt,ct=_e.lat*rt,vt=Math.sin(at)*Math.sin(ct)+Math.cos(at)*Math.cos(ct)*Math.cos((_e.lng-this.lng)*rt);return Dv*Math.acos(Math.min(vt,1))}toBounds(_e=0){const rt=360*_e/40075017,at=rt/Math.cos(Math.PI/180*this.lat);return new Yp(new Ts(this.lng-at,this.lat-rt),new Ts(this.lng+at,this.lat+rt))}static convert(_e){if(_e instanceof Ts)return _e;if(Array.isArray(_e)&&(_e.length===2||_e.length===3))return new Ts(Number(_e[0]),Number(_e[1]));if(!Array.isArray(_e)&&typeof _e=="object"&&_e!==null)return new Ts(Number("lng"in _e?_e.lng:_e.lon),Number(_e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const zw=2*Math.PI*Dv;function P0(nt){return zw*Math.cos(nt*Math.PI/180)}function su(nt){return(180+nt)/360}function Kp(nt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+nt*Math.PI/360)))/360}function dp(nt,_e){return nt/P0(_e)}function gp(nt){return 360*nt-180}function Jl(nt){return 360/Math.PI*Math.atan(Math.exp((180-360*nt)*Math.PI/180))-90}function Vw(nt,_e){return nt*P0(Jl(_e))}const ym=85.051129;function _m(nt){return 1/Math.cos(nt*Math.PI/180)}class dy{constructor(_e,rt,at=0){this.x=+_e,this.y=+rt,this.z=+at}static fromLngLat(_e,rt=0){const at=Ts.convert(_e);return new dy(su(at.lng),Kp(at.lat),dp(rt,at.lat))}toLngLat(){return new Ts(gp(this.x),Jl(this.y))}toAltitude(){return Vw(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/zw*_m(Jl(this.y))}}function Lv(nt,_e,rt,at,ct,vt,At,Bt,Wt){const Yt=(_e+at)/2,sn=(rt+ct)/2,fn=new pt(Yt,sn);Bt(fn),function(pn,An,Tn,kn,Vn,ir){const _r=Tn-Vn,rr=kn-ir;return Math.abs((kn-An)*_r-(Tn-pn)*rr)/Math.hypot(_r,rr)}(fn.x,fn.y,vt.x,vt.y,At.x,At.y)>=Wt?(Lv(nt,_e,rt,Yt,sn,vt,fn,Bt,Wt),Lv(nt,Yt,sn,at,ct,fn,At,Bt,Wt)):nt.push(At)}function k0(nt,_e,rt){let at=nt[0],ct=at.x,vt=at.y;_e(at);const At=[at];for(let Bt=1;Bt<nt.length;Bt++){const Wt=nt[Bt],{x:Yt,y:sn}=Wt;_e(Wt),Lv(At,ct,vt,Yt,sn,at,Wt,_e,rt),ct=Yt,vt=sn,at=Wt}return At}function O_(nt,_e,rt,at){if(at(_e,rt)){const ct=_e.add(rt)._mult(.5);O_(nt,_e,ct,at),O_(nt,ct,rt,at)}else nt.push(rt)}function M_(nt,_e){let rt=nt[0];const at=[rt];for(let ct=1;ct<nt.length;ct++){const vt=nt[ct];O_(at,rt,vt,_e),rt=vt}return at}const es=Math.pow(2,14)-1,Bv=-es-1;function V1(nt,_e){const rt=Math.round(nt.x*_e),at=Math.round(nt.y*_e);return nt.x=Gt(rt,Bv,es),nt.y=Gt(at,Bv,es),(rt<nt.x||rt>nt.x+1||at<nt.y||at>nt.y+1)&&hn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),nt}function Lu(nt,_e,rt){const at=nt.loadGeometry(),ct=nt.extent,vt=Go/ct;if(_e&&rt&&rt.projection.isReprojectedInTileSpace){const At=1<<_e.z,{scale:Bt,x:Wt,y:Yt,projection:sn}=rt,fn=pn=>{const An=gp((_e.x+pn.x/ct)/At),Tn=Jl((_e.y+pn.y/ct)/At),kn=sn.project(An,Tn);pn.x=(kn.x*Bt-Wt)*ct,pn.y=(kn.y*Bt-Yt)*ct};for(let pn=0;pn<at.length;pn++)if(nt.type!==1)at[pn]=k0(at[pn],fn,1);else{const An=[];for(const Tn of at[pn])Tn.x<0||Tn.x>=ct||Tn.y<0||Tn.y>=ct||(fn(Tn),An.push(Tn));at[pn]=An}}for(const At of at)for(const Bt of At)V1(Bt,vt);return at}function Wy(nt,_e){return{type:nt.type,id:nt.id,properties:nt.properties,geometry:_e?Lu(nt):[]}}function P_(nt,_e,rt,at,ct){nt.emplaceBack(2*_e+(at+1)/2,2*rt+(ct+1)/2)}function jv(nt,_e,rt){nt.emplaceBack(_e.x,_e.y,_e.z,rt[0]*16384,rt[1]*16384,rt[2]*16384)}class au{constructor(_e){this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.hasPattern=!1,this.projection=_e.projection,this.layoutVertexArray=new ls,this.indexArray=new Xl,this.segments=new Bl,this.programConfigurations=new Op(_e.layers,_e.zoom),this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id)}populate(_e,rt,at,ct){const vt=this.layers[0],At=[];let Bt=null;vt.type==="circle"&&(Bt=vt.layout.get("circle-sort-key"));for(const{feature:Yt,id:sn,index:fn,sourceLayerIndex:pn}of _e){const An=this.layers[0]._featureFilter.needGeometry,Tn=Wy(Yt,An);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),Tn,at))continue;const kn=Bt?Bt.evaluate(Tn,{},at):void 0,Vn={id:sn,properties:Yt.properties,type:Yt.type,sourceLayerIndex:pn,index:fn,geometry:An?Tn.geometry:Lu(Yt,at,ct),patterns:{},sortKey:kn};At.push(Vn)}Bt&&At.sort((Yt,sn)=>Yt.sortKey-sn.sortKey);let Wt=null;ct.projection.name==="globe"&&(this.globeExtVertexArray=new R0,Wt=ct.projection);for(const Yt of At){const{geometry:sn,index:fn,sourceLayerIndex:pn}=Yt,An=_e[fn].feature;this.addFeature(Yt,sn,fn,rt.availableImages,at,Wt),rt.featureIndex.insert(An,sn,fn,pn,this.index)}}update(_e,rt,at,ct){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ct)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,z1.members),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=_e.createVertexBuffer(this.globeExtVertexArray,M0.members))),this.programConfigurations.upload(_e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(_e,rt,at,ct,vt,At){for(const Bt of rt)for(const Wt of Bt){const Yt=Wt.x,sn=Wt.y;if(Yt<0||Yt>=Go||sn<0||sn>=Go)continue;if(At){const An=At.projectTilePoint(Yt,sn,vt),Tn=At.upVector(vt,Yt,sn),kn=this.globeExtVertexArray;jv(kn,An,Tn),jv(kn,An,Tn),jv(kn,An,Tn),jv(kn,An,Tn)}const fn=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,_e.sortKey),pn=fn.vertexLength;P_(this.layoutVertexArray,Yt,sn,-1,-1),P_(this.layoutVertexArray,Yt,sn,1,-1),P_(this.layoutVertexArray,Yt,sn,1,1),P_(this.layoutVertexArray,Yt,sn,-1,1),this.indexArray.emplaceBack(pn,pn+1,pn+2),this.indexArray.emplaceBack(pn,pn+2,pn+3),fn.vertexLength+=4,fn.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,{},ct,vt)}}function Ww(nt,_e){for(let rt=0;rt<nt.length;rt++)if(Gl(_e,nt[rt]))return!0;for(let rt=0;rt<_e.length;rt++)if(Gl(nt,_e[rt]))return!0;return!!D0(nt,_e)}function gx(nt,_e,rt){return!!Gl(nt,_e)||!!G1(_e,nt,rt)}function W1(nt,_e){if(nt.length===1)return vm(_e,nt[0]);for(let rt=0;rt<_e.length;rt++){const at=_e[rt];for(let ct=0;ct<at.length;ct++)if(Gl(nt,at[ct]))return!0}for(let rt=0;rt<nt.length;rt++)if(vm(_e,nt[rt]))return!0;for(let rt=0;rt<_e.length;rt++)if(D0(nt,_e[rt]))return!0;return!1}function px(nt,_e,rt){if(nt.length>1){if(D0(nt,_e))return!0;for(let at=0;at<_e.length;at++)if(G1(_e[at],nt,rt))return!0}for(let at=0;at<nt.length;at++)if(G1(nt[at],_e,rt))return!0;return!1}function D0(nt,_e){if(nt.length===0||_e.length===0)return!1;for(let rt=0;rt<nt.length-1;rt++){const at=nt[rt],ct=nt[rt+1];for(let vt=0;vt<_e.length-1;vt++)if(mx(at,ct,_e[vt],_e[vt+1]))return!0}return!1}function mx(nt,_e,rt,at){return xn(nt,rt,at)!==xn(_e,rt,at)&&xn(nt,_e,rt)!==xn(nt,_e,at)}function G1(nt,_e,rt){const at=rt*rt;if(_e.length===1)return nt.distSqr(_e[0])<at;for(let ct=1;ct<_e.length;ct++)if(Gw(nt,_e[ct-1],_e[ct])<at)return!0;return!1}function Gw(nt,_e,rt){const at=_e.distSqr(rt);if(at===0)return nt.distSqr(_e);const ct=((nt.x-_e.x)*(rt.x-_e.x)+(nt.y-_e.y)*(rt.y-_e.y))/at;return nt.distSqr(ct<0?_e:ct>1?rt:rt.sub(_e)._mult(ct)._add(_e))}function vm(nt,_e){let rt,at,ct,vt=!1;for(let At=0;At<nt.length;At++){rt=nt[At];for(let Bt=0,Wt=rt.length-1;Bt<rt.length;Wt=Bt++)at=rt[Bt],ct=rt[Wt],at.y>_e.y!=ct.y>_e.y&&_e.x<(ct.x-at.x)*(_e.y-at.y)/(ct.y-at.y)+at.x&&(vt=!vt)}return vt}function Gl(nt,_e){let rt=!1;for(let at=0,ct=nt.length-1;at<nt.length;ct=at++){const vt=nt[at],At=nt[ct];vt.y>_e.y!=At.y>_e.y&&_e.x<(At.x-vt.x)*(_e.y-vt.y)/(At.y-vt.y)+vt.x&&(rt=!rt)}return rt}function L0(nt,_e,rt,at,ct){for(const At of nt)if(_e<=At.x&&rt<=At.y&&at>=At.x&&ct>=At.y)return!0;const vt=[new pt(_e,rt),new pt(_e,ct),new pt(at,ct),new pt(at,rt)];if(nt.length>2){for(const At of vt)if(Gl(nt,At))return!0}for(let At=0;At<nt.length-1;At++)if(yx(nt[At],nt[At+1],vt))return!0;return!1}function yx(nt,_e,rt){const at=rt[0],ct=rt[2];if(nt.x<at.x&&_e.x<at.x||nt.x>ct.x&&_e.x>ct.x||nt.y<at.y&&_e.y<at.y||nt.y>ct.y&&_e.y>ct.y)return!1;const vt=xn(nt,_e,rt[0]);return vt!==xn(nt,_e,rt[1])||vt!==xn(nt,_e,rt[2])||vt!==xn(nt,_e,rt[3])}function gy(nt,_e,rt){const at=_e.paint.get(nt).value;return at.kind==="constant"?at.value:rt.programConfigurations.get(_e.id).getMaxValue(nt)}function B0(nt){return Math.sqrt(nt[0]*nt[0]+nt[1]*nt[1])}function Hw(nt,_e,rt,at,ct){if(!_e[0]&&!_e[1])return nt;const vt=pt.convert(_e)._mult(ct);rt==="viewport"&&vt._rotate(-at);const At=[];for(let Bt=0;Bt<nt.length;Bt++)At.push(nt[Bt].sub(vt));return At}function k_(nt,_e,rt,at){const ct=pt.convert(nt)._mult(at);return _e==="viewport"&&ct._rotate(-rt),ct}Ao(au,"CircleBucket",{omit:["layers"]});const $w=new uo({"circle-sort-key":new Sr(Nr.layout_circle["circle-sort-key"])});var qw={paint:new uo({"circle-radius":new Sr(Nr.paint_circle["circle-radius"]),"circle-color":new Sr(Nr.paint_circle["circle-color"]),"circle-blur":new Sr(Nr.paint_circle["circle-blur"]),"circle-opacity":new Sr(Nr.paint_circle["circle-opacity"]),"circle-translate":new Or(Nr.paint_circle["circle-translate"]),"circle-translate-anchor":new Or(Nr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Or(Nr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Or(Nr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Sr(Nr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Sr(Nr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Sr(Nr.paint_circle["circle-stroke-opacity"])}),layout:$w},j0=1e-6,Ju=typeof Float32Array<"u"?Float32Array:Array;function Zw(){var nt=new Ju(9);return Ju!=Float32Array&&(nt[1]=0,nt[2]=0,nt[3]=0,nt[5]=0,nt[6]=0,nt[7]=0),nt[0]=1,nt[4]=1,nt[8]=1,nt}function Yw(nt,_e,rt){var at=_e[0],ct=_e[1],vt=_e[2],At=_e[3],Bt=_e[4],Wt=_e[5],Yt=_e[6],sn=_e[7],fn=_e[8],pn=rt[0],An=rt[1],Tn=rt[2],kn=rt[3],Vn=rt[4],ir=rt[5],_r=rt[6],rr=rt[7],dr=rt[8];return nt[0]=pn*at+An*At+Tn*Yt,nt[1]=pn*ct+An*Bt+Tn*sn,nt[2]=pn*vt+An*Wt+Tn*fn,nt[3]=kn*at+Vn*At+ir*Yt,nt[4]=kn*ct+Vn*Bt+ir*sn,nt[5]=kn*vt+Vn*Wt+ir*fn,nt[6]=_r*at+rr*At+dr*Yt,nt[7]=_r*ct+rr*Bt+dr*sn,nt[8]=_r*vt+rr*Wt+dr*fn,nt}function Xp(nt){return nt[0]=1,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=1,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=1,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt}function F0(nt,_e){var rt=_e[0],at=_e[1],ct=_e[2],vt=_e[3],At=_e[4],Bt=_e[5],Wt=_e[6],Yt=_e[7],sn=_e[8],fn=_e[9],pn=_e[10],An=_e[11],Tn=_e[12],kn=_e[13],Vn=_e[14],ir=_e[15],_r=rt*Bt-at*At,rr=rt*Wt-ct*At,dr=rt*Yt-vt*At,br=at*Wt-ct*Bt,gr=at*Yt-vt*Bt,Dr=ct*Yt-vt*Wt,Pr=sn*kn-fn*Tn,Wr=sn*Vn-pn*Tn,oo=sn*ir-An*Tn,jr=fn*Vn-pn*kn,Zr=fn*ir-An*kn,Kr=pn*ir-An*Vn,eo=_r*Kr-rr*Zr+dr*jr+br*oo-gr*Wr+Dr*Pr;return eo?(nt[0]=(Bt*Kr-Wt*Zr+Yt*jr)*(eo=1/eo),nt[1]=(ct*Zr-at*Kr-vt*jr)*eo,nt[2]=(kn*Dr-Vn*gr+ir*br)*eo,nt[3]=(pn*gr-fn*Dr-An*br)*eo,nt[4]=(Wt*oo-At*Kr-Yt*Wr)*eo,nt[5]=(rt*Kr-ct*oo+vt*Wr)*eo,nt[6]=(Vn*dr-Tn*Dr-ir*rr)*eo,nt[7]=(sn*Dr-pn*dr+An*rr)*eo,nt[8]=(At*Zr-Bt*oo+Yt*Pr)*eo,nt[9]=(at*oo-rt*Zr-vt*Pr)*eo,nt[10]=(Tn*gr-kn*dr+ir*_r)*eo,nt[11]=(fn*dr-sn*gr-An*_r)*eo,nt[12]=(Bt*Wr-At*jr-Wt*Pr)*eo,nt[13]=(rt*jr-at*Wr+ct*Pr)*eo,nt[14]=(kn*rr-Tn*br-Vn*_r)*eo,nt[15]=(sn*br-fn*rr+pn*_r)*eo,nt):null}function D_(nt,_e,rt){var at=_e[0],ct=_e[1],vt=_e[2],At=_e[3],Bt=_e[4],Wt=_e[5],Yt=_e[6],sn=_e[7],fn=_e[8],pn=_e[9],An=_e[10],Tn=_e[11],kn=_e[12],Vn=_e[13],ir=_e[14],_r=_e[15],rr=rt[0],dr=rt[1],br=rt[2],gr=rt[3];return nt[0]=rr*at+dr*Bt+br*fn+gr*kn,nt[1]=rr*ct+dr*Wt+br*pn+gr*Vn,nt[2]=rr*vt+dr*Yt+br*An+gr*ir,nt[3]=rr*At+dr*sn+br*Tn+gr*_r,nt[4]=(rr=rt[4])*at+(dr=rt[5])*Bt+(br=rt[6])*fn+(gr=rt[7])*kn,nt[5]=rr*ct+dr*Wt+br*pn+gr*Vn,nt[6]=rr*vt+dr*Yt+br*An+gr*ir,nt[7]=rr*At+dr*sn+br*Tn+gr*_r,nt[8]=(rr=rt[8])*at+(dr=rt[9])*Bt+(br=rt[10])*fn+(gr=rt[11])*kn,nt[9]=rr*ct+dr*Wt+br*pn+gr*Vn,nt[10]=rr*vt+dr*Yt+br*An+gr*ir,nt[11]=rr*At+dr*sn+br*Tn+gr*_r,nt[12]=(rr=rt[12])*at+(dr=rt[13])*Bt+(br=rt[14])*fn+(gr=rt[15])*kn,nt[13]=rr*ct+dr*Wt+br*pn+gr*Vn,nt[14]=rr*vt+dr*Yt+br*An+gr*ir,nt[15]=rr*At+dr*sn+br*Tn+gr*_r,nt}function Gy(nt,_e,rt){var at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn=rt[0],Vn=rt[1],ir=rt[2];return _e===nt?(nt[12]=_e[0]*kn+_e[4]*Vn+_e[8]*ir+_e[12],nt[13]=_e[1]*kn+_e[5]*Vn+_e[9]*ir+_e[13],nt[14]=_e[2]*kn+_e[6]*Vn+_e[10]*ir+_e[14],nt[15]=_e[3]*kn+_e[7]*Vn+_e[11]*ir+_e[15]):(ct=_e[1],vt=_e[2],At=_e[3],Bt=_e[4],Wt=_e[5],Yt=_e[6],sn=_e[7],fn=_e[8],pn=_e[9],An=_e[10],Tn=_e[11],nt[0]=at=_e[0],nt[1]=ct,nt[2]=vt,nt[3]=At,nt[4]=Bt,nt[5]=Wt,nt[6]=Yt,nt[7]=sn,nt[8]=fn,nt[9]=pn,nt[10]=An,nt[11]=Tn,nt[12]=at*kn+Bt*Vn+fn*ir+_e[12],nt[13]=ct*kn+Wt*Vn+pn*ir+_e[13],nt[14]=vt*kn+Yt*Vn+An*ir+_e[14],nt[15]=At*kn+sn*Vn+Tn*ir+_e[15]),nt}function py(nt,_e,rt){var at=rt[0],ct=rt[1],vt=rt[2];return nt[0]=_e[0]*at,nt[1]=_e[1]*at,nt[2]=_e[2]*at,nt[3]=_e[3]*at,nt[4]=_e[4]*ct,nt[5]=_e[5]*ct,nt[6]=_e[6]*ct,nt[7]=_e[7]*ct,nt[8]=_e[8]*vt,nt[9]=_e[9]*vt,nt[10]=_e[10]*vt,nt[11]=_e[11]*vt,nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15],nt}function Hy(nt,_e,rt){var at=Math.sin(rt),ct=Math.cos(rt),vt=_e[4],At=_e[5],Bt=_e[6],Wt=_e[7],Yt=_e[8],sn=_e[9],fn=_e[10],pn=_e[11];return _e!==nt&&(nt[0]=_e[0],nt[1]=_e[1],nt[2]=_e[2],nt[3]=_e[3],nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15]),nt[4]=vt*ct+Yt*at,nt[5]=At*ct+sn*at,nt[6]=Bt*ct+fn*at,nt[7]=Wt*ct+pn*at,nt[8]=Yt*ct-vt*at,nt[9]=sn*ct-At*at,nt[10]=fn*ct-Bt*at,nt[11]=pn*ct-Wt*at,nt}function L_(nt,_e,rt){var at=Math.sin(rt),ct=Math.cos(rt),vt=_e[0],At=_e[1],Bt=_e[2],Wt=_e[3],Yt=_e[8],sn=_e[9],fn=_e[10],pn=_e[11];return _e!==nt&&(nt[4]=_e[4],nt[5]=_e[5],nt[6]=_e[6],nt[7]=_e[7],nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15]),nt[0]=vt*ct-Yt*at,nt[1]=At*ct-sn*at,nt[2]=Bt*ct-fn*at,nt[3]=Wt*ct-pn*at,nt[8]=vt*at+Yt*ct,nt[9]=At*at+sn*ct,nt[10]=Bt*at+fn*ct,nt[11]=Wt*at+pn*ct,nt}function H1(nt,_e){return nt[0]=_e[0],nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=_e[1],nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=_e[2],nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt}function $1(nt,_e,rt){var at,ct,vt,At=rt[0],Bt=rt[1],Wt=rt[2],Yt=Math.hypot(At,Bt,Wt);return Yt<j0?null:(At*=Yt=1/Yt,Bt*=Yt,Wt*=Yt,at=Math.sin(_e),ct=Math.cos(_e),nt[0]=At*At*(vt=1-ct)+ct,nt[1]=Bt*At*vt+Wt*at,nt[2]=Wt*At*vt-Bt*at,nt[3]=0,nt[4]=At*Bt*vt-Wt*at,nt[5]=Bt*Bt*vt+ct,nt[6]=Wt*Bt*vt+At*at,nt[7]=0,nt[8]=At*Wt*vt+Bt*at,nt[9]=Bt*Wt*vt-At*at,nt[10]=Wt*Wt*vt+ct,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt)}Math.hypot||(Math.hypot=function(){for(var nt=0,_e=arguments.length;_e--;)nt+=arguments[_e]*arguments[_e];return Math.sqrt(nt)});var N0=D_;function U0(){var nt=new Ju(3);return Ju!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0),nt}function Jp(nt){var _e=new Ju(3);return _e[0]=nt[0],_e[1]=nt[1],_e[2]=nt[2],_e}function Qp(nt){return Math.hypot(nt[0],nt[1],nt[2])}function B_(nt,_e,rt){var at=new Ju(3);return at[0]=nt,at[1]=_e,at[2]=rt,at}function bm(nt,_e,rt){return nt[0]=_e[0]+rt[0],nt[1]=_e[1]+rt[1],nt[2]=_e[2]+rt[2],nt}function q1(nt,_e,rt){return nt[0]=_e[0]-rt[0],nt[1]=_e[1]-rt[1],nt[2]=_e[2]-rt[2],nt}function Kw(nt,_e,rt){return nt[0]=_e[0]*rt[0],nt[1]=_e[1]*rt[1],nt[2]=_e[2]*rt[2],nt}function Fv(nt,_e,rt){return nt[0]=Math.min(_e[0],rt[0]),nt[1]=Math.min(_e[1],rt[1]),nt[2]=Math.min(_e[2],rt[2]),nt}function Nv(nt,_e,rt){return nt[0]=Math.max(_e[0],rt[0]),nt[1]=Math.max(_e[1],rt[1]),nt[2]=Math.max(_e[2],rt[2]),nt}function pp(nt,_e,rt){return nt[0]=_e[0]*rt,nt[1]=_e[1]*rt,nt[2]=_e[2]*rt,nt}function Uv(nt,_e,rt,at){return nt[0]=_e[0]+rt[0]*at,nt[1]=_e[1]+rt[1]*at,nt[2]=_e[2]+rt[2]*at,nt}function Iu(nt,_e){var rt=_e[0],at=_e[1],ct=_e[2],vt=rt*rt+at*at+ct*ct;return vt>0&&(vt=1/Math.sqrt(vt)),nt[0]=_e[0]*vt,nt[1]=_e[1]*vt,nt[2]=_e[2]*vt,nt}function Mp(nt,_e){return nt[0]*_e[0]+nt[1]*_e[1]+nt[2]*_e[2]}function Z1(nt,_e,rt){var at=_e[0],ct=_e[1],vt=_e[2],At=rt[0],Bt=rt[1],Wt=rt[2];return nt[0]=ct*Wt-vt*Bt,nt[1]=vt*At-at*Wt,nt[2]=at*Bt-ct*At,nt}function Fl(nt,_e,rt){var at=_e[0],ct=_e[1],vt=_e[2],At=rt[3]*at+rt[7]*ct+rt[11]*vt+rt[15];return nt[0]=(rt[0]*at+rt[4]*ct+rt[8]*vt+rt[12])/(At=At||1),nt[1]=(rt[1]*at+rt[5]*ct+rt[9]*vt+rt[13])/At,nt[2]=(rt[2]*at+rt[6]*ct+rt[10]*vt+rt[14])/At,nt}function Xw(nt,_e,rt){var at=rt[0],ct=rt[1],vt=rt[2],At=_e[0],Bt=_e[1],Wt=_e[2],Yt=ct*Wt-vt*Bt,sn=vt*At-at*Wt,fn=at*Bt-ct*At,pn=ct*fn-vt*sn,An=vt*Yt-at*fn,Tn=at*sn-ct*Yt,kn=2*rt[3];return sn*=kn,fn*=kn,An*=2,Tn*=2,nt[0]=At+(Yt*=kn)+(pn*=2),nt[1]=Bt+sn+An,nt[2]=Wt+fn+Tn,nt}var j_,Pp=q1,Jw=Kw,_x=Qp;function Qw(nt,_e,rt){return nt[0]=_e[0]*rt,nt[1]=_e[1]*rt,nt[2]=_e[2]*rt,nt[3]=_e[3]*rt,nt}function eS(nt,_e){var rt=_e[0],at=_e[1],ct=_e[2],vt=_e[3],At=rt*rt+at*at+ct*ct+vt*vt;return At>0&&(At=1/Math.sqrt(At)),nt[0]=rt*At,nt[1]=at*At,nt[2]=ct*At,nt[3]=vt*At,nt}function my(nt,_e,rt){var at=_e[0],ct=_e[1],vt=_e[2],At=_e[3];return nt[0]=rt[0]*at+rt[4]*ct+rt[8]*vt+rt[12]*At,nt[1]=rt[1]*at+rt[5]*ct+rt[9]*vt+rt[13]*At,nt[2]=rt[2]*at+rt[6]*ct+rt[10]*vt+rt[14]*At,nt[3]=rt[3]*at+rt[7]*ct+rt[11]*vt+rt[15]*At,nt}function tS(){var nt=new Ju(4);return Ju!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0),nt[3]=1,nt}function nS(nt){return nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=1,nt}function rS(nt,_e,rt){rt*=.5;var at=_e[0],ct=_e[1],vt=_e[2],At=_e[3],Bt=Math.sin(rt),Wt=Math.cos(rt);return nt[0]=at*Wt+At*Bt,nt[1]=ct*Wt+vt*Bt,nt[2]=vt*Wt-ct*Bt,nt[3]=At*Wt-at*Bt,nt}function iS(nt,_e,rt){rt*=.5;var at=_e[0],ct=_e[1],vt=_e[2],At=_e[3],Bt=Math.sin(rt),Wt=Math.cos(rt);return nt[0]=at*Wt-vt*Bt,nt[1]=ct*Wt+At*Bt,nt[2]=vt*Wt+at*Bt,nt[3]=At*Wt-ct*Bt,nt}U0(),j_=new Ju(4),Ju!=Float32Array&&(j_[0]=0,j_[1]=0,j_[2]=0,j_[3]=0);var vx=eS;U0(),B_(1,0,0),B_(0,1,0),tS(),tS(),Zw();class Y1{constructor(_e,rt){this.pos=_e,this.dir=rt}intersectsPlane(_e,rt,at){const ct=Mp(rt,this.dir);if(Math.abs(ct)<1e-6)return!1;const vt=((_e[0]-this.pos[0])*rt[0]+(_e[1]-this.pos[1])*rt[1]+(_e[2]-this.pos[2])*rt[2])/ct;return at[0]=this.pos[0]+this.dir[0]*vt,at[1]=this.pos[1]+this.dir[1]*vt,at[2]=this.pos[2]+this.dir[2]*vt,!0}closestPointOnSphere(_e,rt,at){if(function(An,Tn){var kn=An[0],Vn=An[1],ir=An[2],_r=Tn[0],rr=Tn[1],dr=Tn[2];return Math.abs(kn-_r)<=j0*Math.max(1,Math.abs(kn),Math.abs(_r))&&Math.abs(Vn-rr)<=j0*Math.max(1,Math.abs(Vn),Math.abs(rr))&&Math.abs(ir-dr)<=j0*Math.max(1,Math.abs(ir),Math.abs(dr))}(this.pos,_e)||rt===0)return at[0]=at[1]=at[2]=0,!1;const[ct,vt,At]=this.dir,Bt=this.pos[0]-_e[0],Wt=this.pos[1]-_e[1],Yt=this.pos[2]-_e[2],sn=ct*ct+vt*vt+At*At,fn=2*(Bt*ct+Wt*vt+Yt*At),pn=fn*fn-4*sn*(Bt*Bt+Wt*Wt+Yt*Yt-rt*rt);if(pn<0){const An=Math.max(-fn/2,0),Tn=Bt+ct*An,kn=Wt+vt*An,Vn=Yt+At*An,ir=Math.hypot(Tn,kn,Vn);return at[0]=Tn*rt/ir,at[1]=kn*rt/ir,at[2]=Vn*rt/ir,!1}{const An=(-fn-Math.sqrt(pn))/(2*sn);if(An<0){const Tn=Math.hypot(Bt,Wt,Yt);return at[0]=Bt*rt/Tn,at[1]=Wt*rt/Tn,at[2]=Yt*rt/Tn,!1}return at[0]=Bt+ct*An,at[1]=Wt+vt*An,at[2]=Yt+At*An,!0}}}class Qu{constructor(_e,rt,at,ct,vt){this.TL=_e,this.TR=rt,this.BR=at,this.BL=ct,this.horizon=vt}static fromInvProjectionMatrix(_e,rt,at){const ct=[-1,1,1],vt=[1,1,1],At=[1,-1,1],Bt=[-1,-1,1],Wt=Fl(ct,ct,_e),Yt=Fl(vt,vt,_e),sn=Fl(At,At,_e),fn=Fl(Bt,Bt,_e);return new Qu(Wt,Yt,sn,fn,rt/at)}}class K1{constructor(_e,rt){this.points=_e,this.planes=rt}static fromInvProjectionMatrix(_e,rt,at,ct){const vt=Math.pow(2,at),At=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Wt=>{const Yt=my([],Wt,_e),sn=1/Yt[3]/rt*vt;return function(fn,pn,An){return fn[0]=pn[0]*An[0],fn[1]=pn[1]*An[1],fn[2]=pn[2]*An[2],fn[3]=pn[3]*An[3],fn}(Yt,Yt,[sn,sn,ct?1/Yt[3]:sn,sn])}),Bt=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Wt=>{const Yt=Iu([],Z1([],Pp([],At[Wt[0]],At[Wt[1]]),Pp([],At[Wt[2]],At[Wt[1]]))),sn=-Mp(Yt,At[Wt[1]]);return Yt.concat(sn)});return new K1(At,Bt)}}class Ou{static fromPoints(_e){const rt=[1/0,1/0,1/0],at=[-1/0,-1/0,-1/0];for(const ct of _e)Fv(rt,rt,ct),Nv(at,at,ct);return new Ou(rt,at)}static applyTransform(_e,rt){const at=_e.getCorners();for(let ct=0;ct<at.length;++ct)Fl(at[ct],at[ct],rt);return Ou.fromPoints(at)}constructor(_e,rt){this.min=_e,this.max=rt,this.center=pp([],bm([],this.min,this.max),.5)}quadrant(_e){const rt=[_e%2==0,_e<2],at=Jp(this.min),ct=Jp(this.max);for(let vt=0;vt<rt.length;vt++)at[vt]=rt[vt]?this.min[vt]:this.center[vt],ct[vt]=rt[vt]?this.center[vt]:this.max[vt];return ct[2]=this.max[2],new Ou(at,ct)}distanceX(_e){return Math.max(Math.min(this.max[0],_e[0]),this.min[0])-_e[0]}distanceY(_e){return Math.max(Math.min(this.max[1],_e[1]),this.min[1])-_e[1]}distanceZ(_e){return Math.max(Math.min(this.max[2],_e[2]),this.min[2])-_e[2]}getCorners(){const _e=this.min,rt=this.max;return[[_e[0],_e[1],_e[2]],[rt[0],_e[1],_e[2]],[rt[0],rt[1],_e[2]],[_e[0],rt[1],_e[2]],[_e[0],_e[1],rt[2]],[rt[0],_e[1],rt[2]],[rt[0],rt[1],rt[2]],[_e[0],rt[1],rt[2]]]}intersects(_e){const rt=this.getCorners();let at=!0;for(let ct=0;ct<_e.planes.length;ct++){const vt=_e.planes[ct];let At=0;for(let Bt=0;Bt<rt.length;Bt++)At+=Mp(vt,rt[Bt])+vt[3]>=0;if(At===0)return 0;At!==rt.length&&(at=!1)}if(at)return 2;for(let ct=0;ct<3;ct++){let vt=Number.MAX_VALUE,At=-Number.MAX_VALUE;for(let Bt=0;Bt<_e.points.length;Bt++){const Wt=_e.points[Bt][ct]-this.min[ct];vt=Math.min(vt,Wt),At=Math.max(At,Wt)}if(At<0||vt>this.max[ct]-this.min[ct])return 0}return 1}}function oS(nt,_e,rt,at,ct,vt,At,Bt,Wt){if(vt&&nt.queryGeometry.isAboveHorizon)return!1;vt&&(Wt*=nt.pixelToTileUnitsFactor);const Yt=nt.tileID.canonical,sn=rt.projection.upVectorScale(Yt,rt.center.lat,rt.worldSize).metersToTile;for(const fn of _e)for(const pn of fn){const An=pn.add(Bt),Tn=ct&&rt.elevation?rt.elevation.exaggeration()*ct.getElevationAt(An.x,An.y,!0):0,kn=rt.projection.projectTilePoint(An.x,An.y,Yt);if(Tn>0){const rr=rt.projection.upVector(Yt,An.x,An.y);kn.x+=rr[0]*sn*Tn,kn.y+=rr[1]*sn*Tn,kn.z+=rr[2]*sn*Tn}const Vn=vt?An:sS(kn.x,kn.y,kn.z,at),ir=vt?nt.tilespaceRays.map(rr=>wx(rr,Tn)):nt.queryGeometry.screenGeometry,_r=my([],[kn.x,kn.y,kn.z,1],at);if(!At&&vt?Wt*=_r[3]/rt.cameraToCenterDistance:At&&!vt&&(Wt*=rt.cameraToCenterDistance/_r[3]),vt){const rr=Jl((pn.y/Go+Yt.y)/(1<<Yt.z));Wt/=rt.projection.pixelsPerMeter(rr,1)/dp(1,rr)}if(gx(ir,Vn,Wt))return!0}return!1}function sS(nt,_e,rt,at){const ct=my([],[nt,_e,rt,1],at);return new pt(ct[0]/ct[3],ct[1]/ct[3])}const aS=B_(0,0,0),bx=B_(0,0,1);function wx(nt,_e){const rt=U0();return aS[2]=_e,nt.intersectsPlane(aS,bx,rt),new pt(rt[0],rt[1])}class lS extends au{}function z0(nt,{width:_e,height:rt},at,ct){if(ct){if(ct instanceof Uint8ClampedArray)ct=new Uint8Array(ct.buffer);else if(ct.length!==_e*rt*at)throw new RangeError("mismatched image size")}else ct=new Uint8Array(_e*rt*at);return nt.width=_e,nt.height=rt,nt.data=ct,nt}function uS(nt,_e,rt){const{width:at,height:ct}=_e;at===nt.width&&ct===nt.height||(X1(nt,_e,{x:0,y:0},{x:0,y:0},{width:Math.min(nt.width,at),height:Math.min(nt.height,ct)},rt),nt.width=at,nt.height=ct,nt.data=_e.data)}function X1(nt,_e,rt,at,ct,vt){if(ct.width===0||ct.height===0)return _e;if(ct.width>nt.width||ct.height>nt.height||rt.x>nt.width-ct.width||rt.y>nt.height-ct.height)throw new RangeError("out of range source coordinates for image copy");if(ct.width>_e.width||ct.height>_e.height||at.x>_e.width-ct.width||at.y>_e.height-ct.height)throw new RangeError("out of range destination coordinates for image copy");const At=nt.data,Bt=_e.data;for(let Wt=0;Wt<ct.height;Wt++){const Yt=((rt.y+Wt)*nt.width+rt.x)*vt,sn=((at.y+Wt)*_e.width+at.x)*vt;for(let fn=0;fn<ct.width*vt;fn++)Bt[sn+fn]=At[Yt+fn]}return _e}Ao(lS,"HeatmapBucket",{omit:["layers"]});class Um{constructor(_e,rt){z0(this,_e,1,rt)}resize(_e){uS(this,new Um(_e),1)}clone(){return new Um({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(_e,rt,at,ct,vt){X1(_e,rt,at,ct,vt,1)}}class _c{constructor(_e,rt){z0(this,_e,4,rt)}resize(_e){uS(this,new _c(_e),4)}replace(_e,rt){rt?this.data.set(_e):this.data=_e instanceof Uint8ClampedArray?new Uint8Array(_e.buffer):_e}clone(){return new _c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(_e,rt,at,ct,vt){X1(_e,rt,at,ct,vt,4)}}Ao(Um,"AlphaImage"),Ao(_c,"RGBAImage");var Sx={paint:new uo({"heatmap-radius":new Sr(Nr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Sr(Nr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Or(Nr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ho(Nr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Or(Nr.paint_heatmap["heatmap-opacity"])})};function J1(nt){const _e={},rt=nt.resolution||256,at=nt.clips?nt.clips.length:1,ct=nt.image||new _c({width:rt,height:at}),vt=(At,Bt,Wt)=>{_e[nt.evaluationKey]=Wt;const Yt=nt.expression.evaluate(_e);ct.data[At+Bt+0]=Math.floor(255*Yt.r/Yt.a),ct.data[At+Bt+1]=Math.floor(255*Yt.g/Yt.a),ct.data[At+Bt+2]=Math.floor(255*Yt.b/Yt.a),ct.data[At+Bt+3]=Math.floor(255*Yt.a)};if(nt.clips)for(let At=0,Bt=0;At<at;++At,Bt+=4*rt)for(let Wt=0,Yt=0;Wt<rt;Wt++,Yt+=4){const sn=Wt/(rt-1),{start:fn,end:pn}=nt.clips[At];vt(Bt,Yt,fn*(1-sn)+pn*sn)}else for(let At=0,Bt=0;At<rt;At++,Bt+=4)vt(0,Bt,At/(rt-1));return ct}var xx={paint:new uo({"hillshade-illumination-direction":new Or(Nr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Or(Nr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Or(Nr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Or(Nr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Or(Nr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Or(Nr.paint_hillshade["hillshade-accent-color"])})};const Ax=co([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ex}=Ax;var zv={exports:{}};function V0(nt,_e,rt){rt=rt||2;var at,ct,vt,At,Bt,Wt,Yt,sn=_e&&_e.length,fn=sn?_e[0]*rt:nt.length,pn=cS(nt,0,fn,rt,!0),An=[];if(!pn||pn.next===pn.prev)return An;if(sn&&(pn=function(kn,Vn,ir,_r){var rr,dr,br,gr=[];for(rr=0,dr=Vn.length;rr<dr;rr++)(br=cS(kn,Vn[rr]*_r,rr<dr-1?Vn[rr+1]*_r:kn.length,_r,!1))===br.next&&(br.steiner=!0),gr.push(Px(br));for(gr.sort(Ox),rr=0;rr<gr.length;rr++)ir=Mx(gr[rr],ir);return ir}(nt,_e,pn,rt)),nt.length>80*rt){at=vt=nt[0],ct=At=nt[1];for(var Tn=rt;Tn<fn;Tn+=rt)(Bt=nt[Tn])<at&&(at=Bt),(Wt=nt[Tn+1])<ct&&(ct=Wt),Bt>vt&&(vt=Bt),Wt>At&&(At=Wt);Yt=(Yt=Math.max(vt-at,At-ct))!==0?32767/Yt:0}return Vv(pn,An,rt,at,ct,Yt,0),An}function cS(nt,_e,rt,at,ct){var vt,At;if(ct===tw(nt,_e,rt,at)>0)for(vt=_e;vt<rt;vt+=at)At=Wv(vt,nt[vt],nt[vt+1],At);else for(vt=rt-at;vt>=_e;vt-=at)At=Wv(vt,nt[vt],nt[vt+1],At);return At&&G0(At,At.next)&&(Gv(At),At=At.next),At}function $y(nt,_e){if(!nt)return nt;_e||(_e=nt);var rt,at=nt;do if(rt=!1,at.steiner||!G0(at,at.next)&&Rl(at.prev,at,at.next)!==0)at=at.next;else{if(Gv(at),(at=_e=at.prev)===at.next)break;rt=!0}while(rt||at!==_e);return _e}function Vv(nt,_e,rt,at,ct,vt,At){if(nt){!At&&vt&&function(sn,fn,pn,An){var Tn=sn;do Tn.z===0&&(Tn.z=W0(Tn.x,Tn.y,fn,pn,An)),Tn.prevZ=Tn.prev,Tn.nextZ=Tn.next,Tn=Tn.next;while(Tn!==sn);Tn.prevZ.nextZ=null,Tn.prevZ=null,function(kn){var Vn,ir,_r,rr,dr,br,gr,Dr,Pr=1;do{for(ir=kn,kn=null,dr=null,br=0;ir;){for(br++,_r=ir,gr=0,Vn=0;Vn<Pr&&(gr++,_r=_r.nextZ);Vn++);for(Dr=Pr;gr>0||Dr>0&&_r;)gr!==0&&(Dr===0||!_r||ir.z<=_r.z)?(rr=ir,ir=ir.nextZ,gr--):(rr=_r,_r=_r.nextZ,Dr--),dr?dr.nextZ=rr:kn=rr,rr.prevZ=dr,dr=rr;ir=_r}dr.nextZ=null,Pr*=2}while(br>1)}(Tn)}(nt,at,ct,vt);for(var Bt,Wt,Yt=nt;nt.prev!==nt.next;)if(Bt=nt.prev,Wt=nt.next,vt?Cx(nt,at,ct,vt):Tx(nt))_e.push(Bt.i/rt|0),_e.push(nt.i/rt|0),_e.push(Wt.i/rt|0),Gv(nt),nt=Wt.next,Yt=Wt.next;else if((nt=Wt)===Yt){At?At===1?Vv(nt=Rx($y(nt),_e,rt),_e,rt,at,ct,vt,2):At===2&&Ix(nt,_e,rt,at,ct,vt):Vv($y(nt),_e,rt,at,ct,vt,1);break}}}function Tx(nt){var _e=nt.prev,rt=nt,at=nt.next;if(Rl(_e,rt,at)>=0)return!1;for(var ct=_e.x,vt=rt.x,At=at.x,Bt=_e.y,Wt=rt.y,Yt=at.y,sn=ct<vt?ct<At?ct:At:vt<At?vt:At,fn=Bt<Wt?Bt<Yt?Bt:Yt:Wt<Yt?Wt:Yt,pn=ct>vt?ct>At?ct:At:vt>At?vt:At,An=Bt>Wt?Bt>Yt?Bt:Yt:Wt>Yt?Wt:Yt,Tn=at.next;Tn!==_e;){if(Tn.x>=sn&&Tn.x<=pn&&Tn.y>=fn&&Tn.y<=An&&F_(ct,Bt,vt,Wt,At,Yt,Tn.x,Tn.y)&&Rl(Tn.prev,Tn,Tn.next)>=0)return!1;Tn=Tn.next}return!0}function Cx(nt,_e,rt,at){var ct=nt.prev,vt=nt,At=nt.next;if(Rl(ct,vt,At)>=0)return!1;for(var Bt=ct.x,Wt=vt.x,Yt=At.x,sn=ct.y,fn=vt.y,pn=At.y,An=Bt<Wt?Bt<Yt?Bt:Yt:Wt<Yt?Wt:Yt,Tn=sn<fn?sn<pn?sn:pn:fn<pn?fn:pn,kn=Bt>Wt?Bt>Yt?Bt:Yt:Wt>Yt?Wt:Yt,Vn=sn>fn?sn>pn?sn:pn:fn>pn?fn:pn,ir=W0(An,Tn,_e,rt,at),_r=W0(kn,Vn,_e,rt,at),rr=nt.prevZ,dr=nt.nextZ;rr&&rr.z>=ir&&dr&&dr.z<=_r;){if(rr.x>=An&&rr.x<=kn&&rr.y>=Tn&&rr.y<=Vn&&rr!==ct&&rr!==At&&F_(Bt,sn,Wt,fn,Yt,pn,rr.x,rr.y)&&Rl(rr.prev,rr,rr.next)>=0||(rr=rr.prevZ,dr.x>=An&&dr.x<=kn&&dr.y>=Tn&&dr.y<=Vn&&dr!==ct&&dr!==At&&F_(Bt,sn,Wt,fn,Yt,pn,dr.x,dr.y)&&Rl(dr.prev,dr,dr.next)>=0))return!1;dr=dr.nextZ}for(;rr&&rr.z>=ir;){if(rr.x>=An&&rr.x<=kn&&rr.y>=Tn&&rr.y<=Vn&&rr!==ct&&rr!==At&&F_(Bt,sn,Wt,fn,Yt,pn,rr.x,rr.y)&&Rl(rr.prev,rr,rr.next)>=0)return!1;rr=rr.prevZ}for(;dr&&dr.z<=_r;){if(dr.x>=An&&dr.x<=kn&&dr.y>=Tn&&dr.y<=Vn&&dr!==ct&&dr!==At&&F_(Bt,sn,Wt,fn,Yt,pn,dr.x,dr.y)&&Rl(dr.prev,dr,dr.next)>=0)return!1;dr=dr.nextZ}return!0}function Rx(nt,_e,rt){var at=nt;do{var ct=at.prev,vt=at.next.next;!G0(ct,vt)&&hS(ct,at,at.next,vt)&&N_(ct,vt)&&N_(vt,ct)&&(_e.push(ct.i/rt|0),_e.push(at.i/rt|0),_e.push(vt.i/rt|0),Gv(at),Gv(at.next),at=nt=vt),at=at.next}while(at!==nt);return $y(at)}function Ix(nt,_e,rt,at,ct,vt){var At=nt;do{for(var Bt=At.next.next;Bt!==At.prev;){if(At.i!==Bt.i&&kx(At,Bt)){var Wt=fS(At,Bt);return At=$y(At,At.next),Wt=$y(Wt,Wt.next),Vv(At,_e,rt,at,ct,vt,0),void Vv(Wt,_e,rt,at,ct,vt,0)}Bt=Bt.next}At=At.next}while(At!==nt)}function Ox(nt,_e){return nt.x-_e.x}function Mx(nt,_e){var rt=function(ct,vt){var At,Bt=vt,Wt=ct.x,Yt=ct.y,sn=-1/0;do{if(Yt<=Bt.y&&Yt>=Bt.next.y&&Bt.next.y!==Bt.y){var fn=Bt.x+(Yt-Bt.y)*(Bt.next.x-Bt.x)/(Bt.next.y-Bt.y);if(fn<=Wt&&fn>sn&&(sn=fn,At=Bt.x<Bt.next.x?Bt:Bt.next,fn===Wt))return At}Bt=Bt.next}while(Bt!==vt);if(!At)return null;var pn,An=At,Tn=At.x,kn=At.y,Vn=1/0;Bt=At;do Wt>=Bt.x&&Bt.x>=Tn&&Wt!==Bt.x&&F_(Yt<kn?Wt:sn,Yt,Tn,kn,Yt<kn?sn:Wt,Yt,Bt.x,Bt.y)&&(pn=Math.abs(Yt-Bt.y)/(Wt-Bt.x),N_(Bt,ct)&&(pn<Vn||pn===Vn&&(Bt.x>At.x||Bt.x===At.x&&Q1(At,Bt)))&&(At=Bt,Vn=pn)),Bt=Bt.next;while(Bt!==An);return At}(nt,_e);if(!rt)return _e;var at=fS(rt,nt);return $y(at,at.next),$y(rt,rt.next)}function Q1(nt,_e){return Rl(nt.prev,nt,_e.prev)<0&&Rl(_e.next,nt,nt.next)<0}function W0(nt,_e,rt,at,ct){return(nt=1431655765&((nt=858993459&((nt=252645135&((nt=16711935&((nt=(nt-rt)*ct|0)|nt<<8))|nt<<4))|nt<<2))|nt<<1))|(_e=1431655765&((_e=858993459&((_e=252645135&((_e=16711935&((_e=(_e-at)*ct|0)|_e<<8))|_e<<4))|_e<<2))|_e<<1))<<1}function Px(nt){var _e=nt,rt=nt;do(_e.x<rt.x||_e.x===rt.x&&_e.y<rt.y)&&(rt=_e),_e=_e.next;while(_e!==nt);return rt}function F_(nt,_e,rt,at,ct,vt,At,Bt){return(ct-At)*(_e-Bt)>=(nt-At)*(vt-Bt)&&(nt-At)*(at-Bt)>=(rt-At)*(_e-Bt)&&(rt-At)*(vt-Bt)>=(ct-At)*(at-Bt)}function kx(nt,_e){return nt.next.i!==_e.i&&nt.prev.i!==_e.i&&!function(rt,at){var ct=rt;do{if(ct.i!==rt.i&&ct.next.i!==rt.i&&ct.i!==at.i&&ct.next.i!==at.i&&hS(ct,ct.next,rt,at))return!0;ct=ct.next}while(ct!==rt);return!1}(nt,_e)&&(N_(nt,_e)&&N_(_e,nt)&&function(rt,at){var ct=rt,vt=!1,At=(rt.x+at.x)/2,Bt=(rt.y+at.y)/2;do ct.y>Bt!=ct.next.y>Bt&&ct.next.y!==ct.y&&At<(ct.next.x-ct.x)*(Bt-ct.y)/(ct.next.y-ct.y)+ct.x&&(vt=!vt),ct=ct.next;while(ct!==rt);return vt}(nt,_e)&&(Rl(nt.prev,nt,_e.prev)||Rl(nt,_e.prev,_e))||G0(nt,_e)&&Rl(nt.prev,nt,nt.next)>0&&Rl(_e.prev,_e,_e.next)>0)}function Rl(nt,_e,rt){return(_e.y-nt.y)*(rt.x-_e.x)-(_e.x-nt.x)*(rt.y-_e.y)}function G0(nt,_e){return nt.x===_e.x&&nt.y===_e.y}function hS(nt,_e,rt,at){var ct=$0(Rl(nt,_e,rt)),vt=$0(Rl(nt,_e,at)),At=$0(Rl(rt,at,nt)),Bt=$0(Rl(rt,at,_e));return ct!==vt&&At!==Bt||!(ct!==0||!H0(nt,rt,_e))||!(vt!==0||!H0(nt,at,_e))||!(At!==0||!H0(rt,nt,at))||!(Bt!==0||!H0(rt,_e,at))}function H0(nt,_e,rt){return _e.x<=Math.max(nt.x,rt.x)&&_e.x>=Math.min(nt.x,rt.x)&&_e.y<=Math.max(nt.y,rt.y)&&_e.y>=Math.min(nt.y,rt.y)}function $0(nt){return nt>0?1:nt<0?-1:0}function N_(nt,_e){return Rl(nt.prev,nt,nt.next)<0?Rl(nt,_e,nt.next)>=0&&Rl(nt,nt.prev,_e)>=0:Rl(nt,_e,nt.prev)<0||Rl(nt,nt.next,_e)<0}function fS(nt,_e){var rt=new ew(nt.i,nt.x,nt.y),at=new ew(_e.i,_e.x,_e.y),ct=nt.next,vt=_e.prev;return nt.next=_e,_e.prev=nt,rt.next=ct,ct.prev=rt,at.next=rt,rt.prev=at,vt.next=at,at.prev=vt,at}function Wv(nt,_e,rt,at){var ct=new ew(nt,_e,rt);return at?(ct.next=at.next,ct.prev=at,at.next.prev=ct,at.next=ct):(ct.prev=ct,ct.next=ct),ct}function Gv(nt){nt.next.prev=nt.prev,nt.prev.next=nt.next,nt.prevZ&&(nt.prevZ.nextZ=nt.nextZ),nt.nextZ&&(nt.nextZ.prevZ=nt.prevZ)}function ew(nt,_e,rt){this.i=nt,this.x=_e,this.y=rt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tw(nt,_e,rt,at){for(var ct=0,vt=_e,At=rt-at;vt<rt;vt+=at)ct+=(nt[At]-nt[vt])*(nt[vt+1]+nt[At+1]),At=vt;return ct}function Dx(nt,_e,rt,at,ct){dS(nt,_e,rt||0,at||nt.length-1,ct||Lx)}function dS(nt,_e,rt,at,ct){for(;at>rt;){if(at-rt>600){var vt=at-rt+1,At=_e-rt+1,Bt=Math.log(vt),Wt=.5*Math.exp(2*Bt/3),Yt=.5*Math.sqrt(Bt*Wt*(vt-Wt)/vt)*(At-vt/2<0?-1:1);dS(nt,_e,Math.max(rt,Math.floor(_e-At*Wt/vt+Yt)),Math.min(at,Math.floor(_e+(vt-At)*Wt/vt+Yt)),ct)}var sn=nt[_e],fn=rt,pn=at;for(Hv(nt,rt,_e),ct(nt[at],sn)>0&&Hv(nt,rt,at);fn<pn;){for(Hv(nt,fn,pn),fn++,pn--;ct(nt[fn],sn)<0;)fn++;for(;ct(nt[pn],sn)>0;)pn--}ct(nt[rt],sn)===0?Hv(nt,rt,pn):Hv(nt,++pn,at),pn<=_e&&(rt=pn+1),_e<=pn&&(at=pn-1)}}function Hv(nt,_e,rt){var at=nt[_e];nt[_e]=nt[rt],nt[rt]=at}function Lx(nt,_e){return nt<_e?-1:nt>_e?1:0}function nw(nt,_e){const rt=nt.length;if(rt<=1)return[nt];const at=[];let ct,vt;for(let At=0;At<rt;At++){const Bt=Mn(nt[At]);Bt!==0&&(nt[At].area=Math.abs(Bt),vt===void 0&&(vt=Bt<0),vt===Bt<0?(ct&&at.push(ct),ct=[nt[At]]):ct.push(nt[At]))}if(ct&&at.push(ct),_e>1)for(let At=0;At<at.length;At++)at[At].length<=_e||(Dx(at[At],_e,1,at[At].length-1,Bx),at[At]=at[At].slice(0,_e));return at}function Bx(nt,_e){return _e.area-nt.area}function rw(nt,_e,rt){const at=rt.patternDependencies;let ct=!1;for(const vt of _e){const At=vt.paint.get(`${nt}-pattern`);At.isConstant()||(ct=!0);const Bt=At.constantOr(null);Bt&&(ct=!0,at[Bt.to]=!0,at[Bt.from]=!0)}return ct}function iw(nt,_e,rt,at,ct){const vt=ct.patternDependencies;for(const At of _e){const Bt=At.paint.get(`${nt}-pattern`).value;if(Bt.kind!=="constant"){let Wt=Bt.evaluate({zoom:at-1},rt,{},ct.availableImages),Yt=Bt.evaluate({zoom:at},rt,{},ct.availableImages),sn=Bt.evaluate({zoom:at+1},rt,{},ct.availableImages);Wt=Wt&&Wt.name?Wt.name:Wt,Yt=Yt&&Yt.name?Yt.name:Yt,sn=sn&&sn.name?sn.name:sn,vt[Wt]=!0,vt[Yt]=!0,vt[sn]=!0,rt.patterns[At.id]={min:Wt,mid:Yt,max:sn}}}return rt}zv.exports=V0,zv.exports.default=V0,V0.deviation=function(nt,_e,rt,at){var ct=_e&&_e.length,vt=Math.abs(tw(nt,0,ct?_e[0]*rt:nt.length,rt));if(ct)for(var At=0,Bt=_e.length;At<Bt;At++)vt-=Math.abs(tw(nt,_e[At]*rt,At<Bt-1?_e[At+1]*rt:nt.length,rt));var Wt=0;for(At=0;At<at.length;At+=3){var Yt=at[At]*rt,sn=at[At+1]*rt,fn=at[At+2]*rt;Wt+=Math.abs((nt[Yt]-nt[fn])*(nt[sn+1]-nt[Yt+1])-(nt[Yt]-nt[sn])*(nt[fn+1]-nt[Yt+1]))}return vt===0&&Wt===0?0:Math.abs((Wt-vt)/vt)},V0.flatten=function(nt){for(var _e=nt[0][0].length,rt={vertices:[],holes:[],dimensions:_e},at=0,ct=0;ct<nt.length;ct++){for(var vt=0;vt<nt[ct].length;vt++)for(var At=0;At<_e;At++)rt.vertices.push(nt[ct][vt][At]);ct>0&&rt.holes.push(at+=nt[ct-1].length)}return rt};class q0{constructor(_e){this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ls,this.indexArray=new Xl,this.indexArray2=new _u,this.programConfigurations=new Op(_e.layers,_e.zoom),this.segments=new Bl,this.segments2=new Bl,this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id),this.projection=_e.projection}populate(_e,rt,at,ct){this.hasPattern=rw("fill",this.layers,rt);const vt=this.layers[0].layout.get("fill-sort-key"),At=[];for(const{feature:Bt,id:Wt,index:Yt,sourceLayerIndex:sn}of _e){const fn=this.layers[0]._featureFilter.needGeometry,pn=Wy(Bt,fn);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),pn,at))continue;const An=vt?vt.evaluate(pn,{},at,rt.availableImages):void 0,Tn={id:Wt,properties:Bt.properties,type:Bt.type,sourceLayerIndex:sn,index:Yt,geometry:fn?pn.geometry:Lu(Bt,at,ct),patterns:{},sortKey:An};At.push(Tn)}vt&&At.sort((Bt,Wt)=>Bt.sortKey-Wt.sortKey);for(const Bt of At){const{geometry:Wt,index:Yt,sourceLayerIndex:sn}=Bt;if(this.hasPattern){const fn=iw("fill",this.layers,Bt,this.zoom,rt);this.patternFeatures.push(fn)}else this.addFeature(Bt,Wt,Yt,at,{},rt.availableImages);rt.featureIndex.insert(_e[Yt].feature,Wt,Yt,sn,this.index)}}update(_e,rt,at,ct){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ct)}addFeatures(_e,rt,at,ct,vt){for(const At of this.patternFeatures)this.addFeature(At,At.geometry,At.index,rt,at,ct)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,Ex),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.indexBuffer2=_e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(_e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(_e,rt,at,ct,vt,At=[]){for(const Bt of nw(rt,500)){let Wt=0;for(const Tn of Bt)Wt+=Tn.length;const Yt=this.segments.prepareSegment(Wt,this.layoutVertexArray,this.indexArray),sn=Yt.vertexLength,fn=[],pn=[];for(const Tn of Bt){if(Tn.length===0)continue;Tn!==Bt[0]&&pn.push(fn.length/2);const kn=this.segments2.prepareSegment(Tn.length,this.layoutVertexArray,this.indexArray2),Vn=kn.vertexLength;this.layoutVertexArray.emplaceBack(Tn[0].x,Tn[0].y),this.indexArray2.emplaceBack(Vn+Tn.length-1,Vn),fn.push(Tn[0].x),fn.push(Tn[0].y);for(let ir=1;ir<Tn.length;ir++)this.layoutVertexArray.emplaceBack(Tn[ir].x,Tn[ir].y),this.indexArray2.emplaceBack(Vn+ir-1,Vn+ir),fn.push(Tn[ir].x),fn.push(Tn[ir].y);kn.vertexLength+=Tn.length,kn.primitiveLength+=Tn.length}const An=zv.exports(fn,pn);for(let Tn=0;Tn<An.length;Tn+=3)this.indexArray.emplaceBack(sn+An[Tn],sn+An[Tn+1],sn+An[Tn+2]);Yt.vertexLength+=Wt,Yt.primitiveLength+=An.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,vt,At,ct)}}Ao(q0,"FillBucket",{omit:["layers","patternFeatures"]});const jx=new uo({"fill-sort-key":new Sr(Nr.layout_fill["fill-sort-key"])});var Fx={paint:new uo({"fill-antialias":new Or(Nr.paint_fill["fill-antialias"]),"fill-opacity":new Sr(Nr.paint_fill["fill-opacity"]),"fill-color":new Sr(Nr.paint_fill["fill-color"]),"fill-outline-color":new Sr(Nr.paint_fill["fill-outline-color"]),"fill-translate":new Or(Nr.paint_fill["fill-translate"]),"fill-translate-anchor":new Or(Nr.paint_fill["fill-translate-anchor"]),"fill-pattern":new mo(Nr.paint_fill["fill-pattern"])}),layout:jx};const Nx=co([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ux=co([{name:"a_centroid_pos",components:2,type:"Uint16"}]),gS=co([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:pS}=Nx;var Z0={},zx=pt,mS=U_;function U_(nt,_e,rt,at,ct){this.properties={},this.extent=rt,this.type=0,this._pbf=nt,this._geometry=-1,this._keys=at,this._values=ct,nt.readFields(Y0,this,_e)}function Y0(nt,_e,rt){nt==1?_e.id=rt.readVarint():nt==2?function(at,ct){for(var vt=at.readVarint()+at.pos;at.pos<vt;){var At=ct._keys[at.readVarint()],Bt=ct._values[at.readVarint()];ct.properties[At]=Bt}}(rt,_e):nt==3?_e.type=rt.readVarint():nt==4&&(_e._geometry=rt.pos)}function Vx(nt){for(var _e,rt,at=0,ct=0,vt=nt.length,At=vt-1;ct<vt;At=ct++)at+=((rt=nt[At]).x-(_e=nt[ct]).x)*(_e.y+rt.y);return at}U_.types=["Unknown","Point","LineString","Polygon"],U_.prototype.loadGeometry=function(){var nt=this._pbf;nt.pos=this._geometry;for(var _e,rt=nt.readVarint()+nt.pos,at=1,ct=0,vt=0,At=0,Bt=[];nt.pos<rt;){if(ct<=0){var Wt=nt.readVarint();at=7&Wt,ct=Wt>>3}if(ct--,at===1||at===2)vt+=nt.readSVarint(),At+=nt.readSVarint(),at===1&&(_e&&Bt.push(_e),_e=[]),_e.push(new zx(vt,At));else{if(at!==7)throw new Error("unknown command "+at);_e&&_e.push(_e[0].clone())}}return _e&&Bt.push(_e),Bt},U_.prototype.bbox=function(){var nt=this._pbf;nt.pos=this._geometry;for(var _e=nt.readVarint()+nt.pos,rt=1,at=0,ct=0,vt=0,At=1/0,Bt=-1/0,Wt=1/0,Yt=-1/0;nt.pos<_e;){if(at<=0){var sn=nt.readVarint();rt=7&sn,at=sn>>3}if(at--,rt===1||rt===2)(ct+=nt.readSVarint())<At&&(At=ct),ct>Bt&&(Bt=ct),(vt+=nt.readSVarint())<Wt&&(Wt=vt),vt>Yt&&(Yt=vt);else if(rt!==7)throw new Error("unknown command "+rt)}return[At,Wt,Bt,Yt]},U_.prototype.toGeoJSON=function(nt,_e,rt){var at,ct,vt=this.extent*Math.pow(2,rt),At=this.extent*nt,Bt=this.extent*_e,Wt=this.loadGeometry(),Yt=U_.types[this.type];function sn(An){for(var Tn=0;Tn<An.length;Tn++){var kn=An[Tn];An[Tn]=[360*(kn.x+At)/vt-180,360/Math.PI*Math.atan(Math.exp((180-360*(kn.y+Bt)/vt)*Math.PI/180))-90]}}switch(this.type){case 1:var fn=[];for(at=0;at<Wt.length;at++)fn[at]=Wt[at][0];sn(Wt=fn);break;case 2:for(at=0;at<Wt.length;at++)sn(Wt[at]);break;case 3:for(Wt=function(An){var Tn=An.length;if(Tn<=1)return[An];for(var kn,Vn,ir=[],_r=0;_r<Tn;_r++){var rr=Vx(An[_r]);rr!==0&&(Vn===void 0&&(Vn=rr<0),Vn===rr<0?(kn&&ir.push(kn),kn=[An[_r]]):kn.push(An[_r]))}return kn&&ir.push(kn),ir}(Wt),at=0;at<Wt.length;at++)for(ct=0;ct<Wt[at].length;ct++)sn(Wt[at][ct])}Wt.length===1?Wt=Wt[0]:Yt="Multi"+Yt;var pn={type:"Feature",geometry:{type:Yt,coordinates:Wt},properties:this.properties};return"id"in this&&(pn.id=this.id),pn};var Wx=mS,yS=_S;function _S(nt,_e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=nt,this._keys=[],this._values=[],this._features=[],nt.readFields(Gx,this,_e),this.length=this._features.length}function Gx(nt,_e,rt){nt===15?_e.version=rt.readVarint():nt===1?_e.name=rt.readString():nt===5?_e.extent=rt.readVarint():nt===2?_e._features.push(rt.pos):nt===3?_e._keys.push(rt.readString()):nt===4&&_e._values.push(function(at){for(var ct=null,vt=at.readVarint()+at.pos;at.pos<vt;){var At=at.readVarint()>>3;ct=At===1?at.readString():At===2?at.readFloat():At===3?at.readDouble():At===4?at.readVarint64():At===5?at.readVarint():At===6?at.readSVarint():At===7?at.readBoolean():null}return ct}(rt))}_S.prototype.feature=function(nt){if(nt<0||nt>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[nt];var _e=this._pbf.readVarint()+this._pbf.pos;return new Wx(this._pbf,_e,this.extent,this._keys,this._values)};var Hx=yS;function $x(nt,_e,rt){if(nt===3){var at=new Hx(rt,rt.readVarint()+rt.pos);at.length&&(_e[at.name]=at)}}var ow=Z0.VectorTile=function(nt,_e){this.layers=nt.readFields($x,{},_e)},K0=Z0.VectorTileFeature=mS;function X0(nt,_e,rt,at){const ct=[],vt=at===0?(At,Bt,Wt,Yt,sn,fn)=>{At.push(new pt(fn,Wt+(fn-Bt)/(Yt-Bt)*(sn-Wt)))}:(At,Bt,Wt,Yt,sn,fn)=>{At.push(new pt(Bt+(fn-Wt)/(sn-Wt)*(Yt-Bt),fn))};for(const At of nt){const Bt=[];for(const Wt of At){if(Wt.length<=2)continue;const Yt=[];for(let pn=0;pn<Wt.length-1;pn++){const An=Wt[pn].x,Tn=Wt[pn].y,kn=Wt[pn+1].x,Vn=Wt[pn+1].y,ir=at===0?An:Tn,_r=at===0?kn:Vn;ir<_e?_r>_e&&vt(Yt,An,Tn,kn,Vn,_e):ir>rt?_r<rt&&vt(Yt,An,Tn,kn,Vn,rt):Yt.push(Wt[pn]),_r<_e&&ir>=_e&&vt(Yt,An,Tn,kn,Vn,_e),_r>rt&&ir<=rt&&vt(Yt,An,Tn,kn,Vn,rt)}let sn=Wt[Wt.length-1];const fn=at===0?sn.x:sn.y;fn>=_e&&fn<=rt&&Yt.push(sn),Yt.length&&(sn=Yt[Yt.length-1],Yt[0].x===sn.x&&Yt[0].y===sn.y||Yt.push(Yt[0]),Bt.push(Yt))}Bt.length&&ct.push(Bt)}return ct}Z0.VectorTileLayer=yS;const qx=K0.types,J0=Math.pow(2,13);function $v(nt,_e,rt,at,ct,vt,At,Bt){nt.emplaceBack((_e<<1)+At,(rt<<1)+vt,(Math.floor(at*J0)<<1)+ct,Math.round(Bt))}function z_(nt,_e,rt){nt.emplaceBack(_e.x,_e.y,_e.z,rt[0]*16384,rt[1]*16384,rt[2]*16384)}class sw{constructor(){this.acc=new pt(0,0),this.polyCount=[]}startRing(_e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new pt(_e.x,_e.y),this.max=new pt(_e.x,_e.y))}append(_e,rt){this.currentPolyCount.edges++,this.acc._add(_e);const at=this.min,ct=this.max;_e.x<at.x?at.x=_e.x:_e.x>ct.x&&(ct.x=_e.x),_e.y<at.y?at.y=_e.y:_e.y>ct.y&&(ct.y=_e.y),((_e.x===0||_e.x===Go)&&_e.x===rt.x)!=((_e.y===0||_e.y===Go)&&_e.y===rt.y)&&this.processBorderOverlap(_e,rt),rt.x<0!=_e.x<0&&this.addBorderIntersection(0,Ss(rt.y,_e.y,(0-rt.x)/(_e.x-rt.x))),rt.x>Go!=_e.x>Go&&this.addBorderIntersection(1,Ss(rt.y,_e.y,(Go-rt.x)/(_e.x-rt.x))),rt.y<0!=_e.y<0&&this.addBorderIntersection(2,Ss(rt.x,_e.x,(0-rt.y)/(_e.y-rt.y))),rt.y>Go!=_e.y>Go&&this.addBorderIntersection(3,Ss(rt.x,_e.x,(Go-rt.y)/(_e.y-rt.y)))}addBorderIntersection(_e,rt){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const at=this.borders[_e];rt<at[0]&&(at[0]=rt),rt>at[1]&&(at[1]=rt)}processBorderOverlap(_e,rt){if(_e.x===rt.x){if(_e.y===rt.y)return;const at=_e.x===0?0:1;this.addBorderIntersection(at,rt.y),this.addBorderIntersection(at,_e.y)}else{const at=_e.y===0?2:3;this.addBorderIntersection(at,rt.x),this.addBorderIntersection(at,_e.x)}}centroid(){const _e=this.polyCount.reduce((rt,at)=>rt+at.edges,0);return _e!==0?this.acc.div(_e)._round():new pt(0,0)}span(){return new pt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((_e,rt)=>_e+ +(rt[0]!==Number.MAX_VALUE),0)}}class qy{constructor(_e){this.zoom=_e.zoom,this.canonical=_e.canonical,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=_e.projection,this.layoutVertexArray=new Ns,this.centroidVertexArray=new C0,this.indexArray=new Xl,this.programConfigurations=new Op(_e.layers,_e.zoom),this.segments=new Bl,this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id),this.enableTerrain=_e.enableTerrain}populate(_e,rt,at,ct){this.features=[],this.hasPattern=rw("fill-extrusion",this.layers,rt),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(vt){const At=Math.exp(Math.PI*(1-vt.y/(1<<vt.z)*2));return 80150034*At/(At*At+1)/Go/(1<<vt.z)}(at),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:vt,id:At,index:Bt,sourceLayerIndex:Wt}of _e){const Yt=this.layers[0]._featureFilter.needGeometry,sn=Wy(vt,Yt);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),sn,at))continue;const fn={id:At,sourceLayerIndex:Wt,index:Bt,geometry:Yt?sn.geometry:Lu(vt,at,ct),properties:vt.properties,type:vt.type,patterns:{}},pn=this.layoutVertexArray.length;this.hasPattern?this.features.push(iw("fill-extrusion",this.layers,fn,this.zoom,rt)):this.addFeature(fn,fn.geometry,Bt,at,{},rt.availableImages,ct),rt.featureIndex.insert(vt,fn.geometry,Bt,Wt,this.index,pn)}this.sortBorders()}addFeatures(_e,rt,at,ct,vt){for(const At of this.features){const{geometry:Bt}=At;this.addFeature(At,Bt,At.index,rt,at,ct,vt)}this.sortBorders()}update(_e,rt,at,ct){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ct)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,pS),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=_e.createVertexBuffer(this.layoutVertexExtArray,gS.members,!0))),this.programConfigurations.upload(_e),this.uploaded=!0}uploadCentroid(_e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=_e.createVertexBuffer(this.centroidVertexArray,Ux.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(_e,rt,at,ct,vt,At,Bt){const Wt=[new pt(0,0),new pt(Go,Go)],Yt=Bt.projection,sn=Yt.name==="globe",fn=this.enableTerrain&&!sn?new sw:null,pn=qx[_e.type]==="Polygon";sn&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new fp);const An=nw(rt,500);for(let ir=An.length-1;ir>=0;ir--){const _r=An[ir];(_r.length===0||(Tn=_r[0]).every(rr=>rr.x<=0)||Tn.every(rr=>rr.x>=Go)||Tn.every(rr=>rr.y<=0)||Tn.every(rr=>rr.y>=Go))&&An.splice(ir,1)}var Tn;let kn;if(sn)kn=qv(An,Wt,ct);else{kn=[];for(const ir of An)kn.push({polygon:ir,bounds:Wt})}const Vn=pn?this.edgeRadius:0;for(const{polygon:ir,bounds:_r}of kn){let rr=0,dr=0;for(const gr of ir)pn&&!gr[0].equals(gr[gr.length-1])&&gr.push(gr[0]),dr+=pn?gr.length-1:gr.length;const br=this.segments.prepareSegment((pn?5:4)*dr,this.layoutVertexArray,this.indexArray);if(pn){const gr=[],Dr=[];rr=br.vertexLength;for(const Wr of ir){let oo,jr;Wr.length&&Wr!==ir[0]&&Dr.push(gr.length/2),oo=Wr[1].sub(Wr[0])._perp()._unit();for(let Zr=1;Zr<Wr.length;Zr++){const Kr=Wr[Zr],eo=Wr[Zr===Wr.length-1?1:Zr+1];let{x:ao,y:Fr}=Kr;if(Vn){jr=eo.sub(Kr)._perp()._unit();const yo=oo.add(jr)._unit(),Wo=Vn*Math.min(4,1/(oo.x*yo.x+oo.y*yo.y));ao+=Wo*yo.x,Fr+=Wo*yo.y,oo=jr}$v(this.layoutVertexArray,ao,Fr,0,0,1,1,0),br.vertexLength++,gr.push(Kr.x,Kr.y),sn&&z_(this.layoutVertexExtArray,Yt.projectTilePoint(ao,Fr,ct),Yt.upVector(ct,ao,Fr))}}const Pr=zv.exports(gr,Dr);for(let Wr=0;Wr<Pr.length;Wr+=3)this.indexArray.emplaceBack(rr+Pr[Wr],rr+Pr[Wr+2],rr+Pr[Wr+1]),br.primitiveLength++}for(const gr of ir){fn&&gr.length&&fn.startRing(gr[0]);let Dr,Pr,Wr,oo=gr.length>4&&bS(gr[gr.length-2],gr[0],gr[1]),jr=Vn?vS(gr[gr.length-2],gr[0],gr[1],Vn):0;Pr=gr[1].sub(gr[0])._perp()._unit();let Zr=!0;for(let Kr=1,eo=0;Kr<gr.length;Kr++){let ao=gr[Kr-1],Fr=gr[Kr];const yo=gr[Kr===gr.length-1?1:Kr+1];if(fn&&pn&&fn.currentPolyCount.top++,uw(Fr,ao,_r)){Vn&&(Pr=yo.sub(Fr)._perp()._unit(),Zr=!Zr);continue}fn&&fn.append(Fr,ao);const Wo=Fr.sub(ao)._perp(),bo=Wo.x/(Math.abs(Wo.x)+Math.abs(Wo.y)),Do=Wo.y>0?1:0,_o=ao.dist(Fr);if(eo+_o>32768&&(eo=0),Vn){Wr=yo.sub(Fr)._perp()._unit();let Is=lw(ao,Fr,yo,aw(Pr,Wr),Vn);isNaN(Is)&&(Is=0);const ts=Fr.sub(ao)._unit();ao=ao.add(ts.mult(jr))._round(),Fr=Fr.add(ts.mult(-Is))._round(),jr=Is,Pr=Wr}const Ho=br.vertexLength,rs=gr.length>4&&bS(ao,Fr,yo);let us=wS(eo,oo,Zr);if($v(this.layoutVertexArray,ao.x,ao.y,bo,Do,0,0,us),$v(this.layoutVertexArray,ao.x,ao.y,bo,Do,0,1,us),eo+=_o,us=wS(eo,rs,!Zr),oo=rs,$v(this.layoutVertexArray,Fr.x,Fr.y,bo,Do,0,0,us),$v(this.layoutVertexArray,Fr.x,Fr.y,bo,Do,0,1,us),br.vertexLength+=4,this.indexArray.emplaceBack(Ho+0,Ho+1,Ho+2),this.indexArray.emplaceBack(Ho+1,Ho+3,Ho+2),br.primitiveLength+=2,Vn){const Is=rr+(Kr===1?gr.length-2:Kr-2),ts=Kr===1?rr:Is+1;if(this.indexArray.emplaceBack(Ho+1,Is,Ho+3),this.indexArray.emplaceBack(Is,ts,Ho+3),br.primitiveLength+=2,Dr===void 0&&(Dr=Ho),!uw(yo,gr[Kr],_r)){const $a=Kr===gr.length-1?Dr:br.vertexLength;this.indexArray.emplaceBack(Ho+2,Ho+3,$a),this.indexArray.emplaceBack(Ho+3,$a+1,$a),this.indexArray.emplaceBack(Ho+3,ts,$a+1),br.primitiveLength+=3}Zr=!Zr}if(sn){const Is=this.layoutVertexExtArray,ts=Yt.projectTilePoint(ao.x,ao.y,ct),$a=Yt.projectTilePoint(Fr.x,Fr.y,ct),ps=Yt.upVector(ct,ao.x,ao.y),ws=Yt.upVector(ct,Fr.x,Fr.y);z_(Is,ts,ps),z_(Is,ts,ps),z_(Is,$a,ws),z_(Is,$a,ws)}}pn&&(rr+=gr.length-1)}}if(fn&&fn.polyCount.length>0){if(fn.borders){fn.vertexArrayOffset=this.centroidVertexArray.length;const ir=fn.borders,_r=this.featuresOnBorder.push(fn)-1;for(let rr=0;rr<4;rr++)ir[rr][0]!==Number.MAX_VALUE&&this.borders[rr].push(_r)}this.encodeCentroid(fn.borders?void 0:fn.centroid(),fn)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,vt,At,ct)}sortBorders(){for(let _e=0;_e<4;_e++)this.borders[_e].sort((rt,at)=>this.featuresOnBorder[rt].borders[_e][0]-this.featuresOnBorder[at].borders[_e][0])}encodeCentroid(_e,rt,at=!0){let ct,vt;if(_e)if(_e.y!==0){const Bt=rt.span()._mult(this.tileToMeter);ct=(Math.max(_e.x,1)<<3)+Math.min(7,Math.round(Bt.x/10)),vt=(Math.max(_e.y,1)<<3)+Math.min(7,Math.round(Bt.y/10))}else ct=Math.ceil(7*(_e.x+450)),vt=0;else ct=0,vt=+at;let At=at?this.centroidVertexArray.length:rt.vertexArrayOffset;for(const Bt of rt.polyCount){at&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Bt.edges+Bt.top);for(let Wt=0;Wt<Bt.top;Wt++)this.centroidVertexArray.emplace(At++,ct,vt);for(let Wt=0;Wt<2*Bt.edges;Wt++)this.centroidVertexArray.emplace(At++,0,vt),this.centroidVertexArray.emplace(At++,ct,vt)}}}function aw(nt,_e){const rt=nt.add(_e)._unit();return nt.x*rt.x+nt.y*rt.y}function vS(nt,_e,rt,at){const ct=_e.sub(nt)._perp()._unit(),vt=rt.sub(_e)._perp()._unit();return lw(nt,_e,rt,aw(ct,vt),at)}function lw(nt,_e,rt,at,ct){const vt=Math.sqrt(1-at*at);return Math.min(nt.dist(_e)/3,_e.dist(rt)/3,ct*vt/at)}function uw(nt,_e,rt){return nt.x<rt[0].x&&_e.x<rt[0].x||nt.x>rt[1].x&&_e.x>rt[1].x||nt.y<rt[0].y&&_e.y<rt[0].y||nt.y>rt[1].y&&_e.y>rt[1].y}function bS(nt,_e,rt){if(nt.x<0||nt.x>=Go||_e.x<0||_e.x>=Go||rt.x<0||rt.x>=Go)return!1;const at=rt.sub(_e),ct=at.perp(),vt=nt.sub(_e);return(at.x*vt.x+at.y*vt.y)/Math.sqrt((at.x*at.x+at.y*at.y)*(vt.x*vt.x+vt.y*vt.y))>-.866&&ct.x*vt.x+ct.y*vt.y<0}function wS(nt,_e,rt){const at=_e?2|nt:-3&nt;return rt?1|at:-2&at}function SS(){const nt=Math.PI/32,_e=Math.tan(nt),rt=Dv;return rt*Math.sqrt(1+2*_e*_e)-rt}function qv(nt,_e,rt){const at=1<<rt.z,ct=gp(rt.x/at),vt=gp((rt.x+1)/at),At=Jl(rt.y/at),Bt=Jl((rt.y+1)/at);return function(Wt,Yt,sn,fn,pn=0,An){const Tn=[];if(!Wt.length||!sn||!fn)return Tn;const kn=(gr,Dr)=>{for(const Pr of gr)Tn.push({polygon:Pr,bounds:Dr})},Vn=Math.ceil(Math.log2(sn)),ir=Math.ceil(Math.log2(fn)),_r=Vn-ir,rr=[];for(let gr=0;gr<Math.abs(_r);gr++)rr.push(_r>0?0:1);for(let gr=0;gr<Math.min(Vn,ir);gr++)rr.push(0),rr.push(1);let dr=Wt;if(dr=X0(dr,Yt[0].y-pn,Yt[1].y+pn,1),dr=X0(dr,Yt[0].x-pn,Yt[1].x+pn,0),!dr.length)return Tn;const br=[];for(rr.length?br.push({polygons:dr,bounds:Yt,depth:0}):kn(dr,Yt);br.length;){const gr=br.pop(),Dr=gr.depth,Pr=rr[Dr],Wr=gr.bounds[0],oo=gr.bounds[1],jr=Pr===0?Wr.x:Wr.y,Zr=Pr===0?oo.x:oo.y,Kr=An?An(Pr,jr,Zr):.5*(jr+Zr),eo=X0(gr.polygons,jr-pn,Kr+pn,Pr),ao=X0(gr.polygons,Kr-pn,Zr+pn,Pr);if(eo.length){const Fr=[Wr,new pt(Pr===0?Kr:oo.x,Pr===1?Kr:oo.y)];rr.length>Dr+1?br.push({polygons:eo,bounds:Fr,depth:Dr+1}):kn(eo,Fr)}if(ao.length){const Fr=[new pt(Pr===0?Kr:Wr.x,Pr===1?Kr:Wr.y),oo];rr.length>Dr+1?br.push({polygons:ao,bounds:Fr,depth:Dr+1}):kn(ao,Fr)}}return Tn}(nt,_e,Math.ceil((vt-ct)/11.25),Math.ceil((At-Bt)/11.25),1,(Wt,Yt,sn)=>{if(Wt===0)return .5*(Yt+sn);{const fn=Jl((rt.y+Yt/Go)/at);return(Kp(.5*(Jl((rt.y+sn/Go)/at)+fn))*at-rt.y)*Go}})}Ao(qy,"FillExtrusionBucket",{omit:["layers","features"]}),Ao(sw,"PartMetadata");const Q0=new uo({"fill-extrusion-edge-radius":new Or(Nr["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Zx={paint:new uo({"fill-extrusion-opacity":new Or(Nr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Sr(Nr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Or(Nr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Or(Nr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mo(Nr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Sr(Nr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Sr(Nr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Or(Nr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Or(Nr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Or(Nr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Q0};function xS(nt,_e,rt){var at=2*Math.PI*6378137/256/Math.pow(2,rt);return[nt*at-2*Math.PI*6378137/2,_e*at-2*Math.PI*6378137/2]}class V_{constructor(_e,rt,at){this.z=_e,this.x=rt,this.y=at,this.key=Zv(0,_e,_e,rt,at)}equals(_e){return this.z===_e.z&&this.x===_e.x&&this.y===_e.y}url(_e,rt){const at=function(vt,At,Bt){var Wt=xS(256*vt,256*(At=Math.pow(2,Bt)-At-1),Bt),Yt=xS(256*(vt+1),256*(At+1),Bt);return Wt[0]+","+Wt[1]+","+Yt[0]+","+Yt[1]}(this.x,this.y,this.z),ct=function(vt,At,Bt){let Wt,Yt="";for(let sn=vt;sn>0;sn--)Wt=1<<sn-1,Yt+=(At&Wt?1:0)+(Bt&Wt?2:0);return Yt}(this.z,this.x,this.y);return _e[(this.x+this.y)%_e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(rt==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",at)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cw{constructor(_e,rt){this.wrap=_e,this.canonical=rt,this.key=Zv(_e,rt.z,rt.z,rt.x,rt.y)}}class Mu{constructor(_e,rt,at,ct,vt){this.overscaledZ=_e,this.wrap=rt,this.canonical=new V_(at,+ct,+vt),this.key=rt===0&&_e===at?this.canonical.key:Zv(rt,_e,at,ct,vt)}equals(_e){return this.overscaledZ===_e.overscaledZ&&this.wrap===_e.wrap&&this.canonical.equals(_e.canonical)}scaledTo(_e){const rt=this.canonical.z-_e;return _e>this.canonical.z?new Mu(_e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mu(_e,this.wrap,_e,this.canonical.x>>rt,this.canonical.y>>rt)}calculateScaledKey(_e,rt=!0){if(this.overscaledZ===_e&&rt)return this.key;if(_e>this.canonical.z)return Zv(this.wrap*+rt,_e,this.canonical.z,this.canonical.x,this.canonical.y);{const at=this.canonical.z-_e;return Zv(this.wrap*+rt,_e,_e,this.canonical.x>>at,this.canonical.y>>at)}}isChildOf(_e){if(_e.wrap!==this.wrap)return!1;const rt=this.canonical.z-_e.canonical.z;return _e.overscaledZ===0||_e.overscaledZ<this.overscaledZ&&_e.canonical.x===this.canonical.x>>rt&&_e.canonical.y===this.canonical.y>>rt}children(_e){if(this.overscaledZ>=_e)return[new Mu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const rt=this.canonical.z+1,at=2*this.canonical.x,ct=2*this.canonical.y;return[new Mu(rt,this.wrap,rt,at,ct),new Mu(rt,this.wrap,rt,at+1,ct),new Mu(rt,this.wrap,rt,at,ct+1),new Mu(rt,this.wrap,rt,at+1,ct+1)]}isLessThan(_e){return this.wrap<_e.wrap||!(this.wrap>_e.wrap)&&(this.overscaledZ<_e.overscaledZ||!(this.overscaledZ>_e.overscaledZ)&&(this.canonical.x<_e.canonical.x||!(this.canonical.x>_e.canonical.x)&&this.canonical.y<_e.canonical.y))}wrapped(){return new Mu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(_e){return new Mu(this.overscaledZ,_e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Zv(nt,_e,rt,at,ct){const vt=1<<Math.min(rt,22);let At=vt*(ct%vt)+at%vt;return nt&&rt<22&&(At+=vt*vt*((nt<0?-2*nt-1:2*nt)%(1<<2*(22-rt)))),16*(32*At+rt)+(_e-rt)}Ao(V_,"CanonicalTileID"),Ao(Mu,"OverscaledTileID",{omit:["projMatrix"]});class W_ extends pt{constructor(_e,rt,at){super(_e,rt),this.z=at}}function Yv(nt,_e){return nt.x*_e.x+nt.y*_e.y}function AS(nt,_e){if(nt.length===1){let rt=0;const at=_e[rt++];let ct;for(;!ct||at.equals(ct);)if(ct=_e[rt++],!ct)return 1/0;for(;rt<_e.length;rt++){const vt=_e[rt],At=nt[0],Bt=ct.sub(at),Wt=vt.sub(at),Yt=At.sub(at),sn=Yv(Bt,Bt),fn=Yv(Bt,Wt),pn=Yv(Wt,Wt),An=Yv(Yt,Bt),Tn=Yv(Yt,Wt),kn=sn*pn-fn*fn,Vn=(pn*An-fn*Tn)/kn,ir=(sn*Tn-fn*An)/kn,_r=at.z*(1-Vn-ir)+ct.z*Vn+vt.z*ir;if(isFinite(_r))return _r}return 1/0}{let rt=1/0;for(const at of _e)rt=Math.min(rt,at.z);return rt}}function ES(nt,_e,rt,at,ct,vt,At,Bt){const Wt=At*ct.getElevationAt(nt,_e,!0,!0),Yt=vt[0]!==0,sn=Yt?vt[1]===0?At*(vt[0]/7-450):At*function(fn,pn,An){const Tn=Math.floor(pn[0]/8),kn=Math.floor(pn[1]/8),Vn=10*(pn[0]-8*Tn),ir=10*(pn[1]-8*kn),_r=fn.getElevationAt(Tn,kn,!0,!0),rr=fn.getMeterToDEM(An),dr=Math.floor(.5*(Vn*rr-1)),br=Math.floor(.5*(ir*rr-1)),gr=fn.tileCoordToPixel(Tn,kn),Dr=2*dr+1,Pr=2*br+1,Wr=function(ao,Fr,yo,Wo,bo){return[ao.getElevationAtPixel(Fr,yo,!0),ao.getElevationAtPixel(Fr+bo,yo,!0),ao.getElevationAtPixel(Fr,yo+bo,!0),ao.getElevationAtPixel(Fr+Wo,yo+bo,!0)]}(fn,gr.x-dr,gr.y-br,Dr,Pr),oo=Math.abs(Wr[0]-Wr[1]),jr=Math.abs(Wr[2]-Wr[3]),Zr=Math.abs(Wr[0]-Wr[2])+Math.abs(Wr[1]-Wr[3]),Kr=Math.min(.25,.5*rr*(oo+jr)/Dr),eo=Math.min(.25,.5*rr*Zr/Pr);return _r+Math.max(Kr*Vn,eo*ir)}(ct,vt,Bt):Wt;return{base:Wt+(rt===0)?-1:rt,top:Yt?Math.max(sn+at,Wt+rt+2):Wt+at}}const Yx=co([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Kx}=Yx,Xx=co([{name:"a_packed",components:4,type:"Float32"}]),{members:Jx}=Xx,Qx=K0.types,eA=Math.cos(Math.PI/180*37.5);class _h{constructor(_e){this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(rt=>rt.id),this.index=_e.index,this.projection=_e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(rt=>{this.gradients[rt.id]={}}),this.layoutVertexArray=new Os,this.layoutVertexArray2=new Ll,this.indexArray=new Xl,this.programConfigurations=new Op(_e.layers,_e.zoom),this.segments=new Bl,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(rt=>rt.isStateDependent()).map(rt=>rt.id)}populate(_e,rt,at,ct){this.hasPattern=rw("line",this.layers,rt);const vt=this.layers[0].layout.get("line-sort-key"),At=[];for(const{feature:sn,id:fn,index:pn,sourceLayerIndex:An}of _e){const Tn=this.layers[0]._featureFilter.needGeometry,kn=Wy(sn,Tn);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),kn,at))continue;const Vn=vt?vt.evaluate(kn,{},at):void 0,ir={id:fn,properties:sn.properties,type:sn.type,sourceLayerIndex:An,index:pn,geometry:Tn?kn.geometry:Lu(sn,at,ct),patterns:{},sortKey:Vn};At.push(ir)}vt&&At.sort((sn,fn)=>sn.sortKey-fn.sortKey);const{lineAtlas:Bt,featureIndex:Wt}=rt,Yt=this.addConstantDashes(Bt);for(const sn of At){const{geometry:fn,index:pn,sourceLayerIndex:An}=sn;if(Yt&&this.addFeatureDashes(sn,Bt),this.hasPattern){const Tn=iw("line",this.layers,sn,this.zoom,rt);this.patternFeatures.push(Tn)}else this.addFeature(sn,fn,pn,at,Bt.positions,rt.availableImages);Wt.insert(_e[pn].feature,fn,pn,An,this.index)}}addConstantDashes(_e){let rt=!1;for(const at of this.layers){const ct=at.paint.get("line-dasharray").value,vt=at.layout.get("line-cap").value;if(ct.kind!=="constant"||vt.kind!=="constant")rt=!0;else{const At=vt.value,Bt=ct.value;if(!Bt)continue;_e.addDash(Bt.from,At),_e.addDash(Bt.to,At),Bt.other&&_e.addDash(Bt.other,At)}}return rt}addFeatureDashes(_e,rt){const at=this.zoom;for(const ct of this.layers){const vt=ct.paint.get("line-dasharray").value,At=ct.layout.get("line-cap").value;if(vt.kind==="constant"&&At.kind==="constant")continue;let Bt,Wt,Yt,sn,fn,pn;if(vt.kind==="constant"){const Vn=vt.value;if(!Vn)continue;Bt=Vn.other||Vn.to,Wt=Vn.to,Yt=Vn.from}else Bt=vt.evaluate({zoom:at-1},_e),Wt=vt.evaluate({zoom:at},_e),Yt=vt.evaluate({zoom:at+1},_e);At.kind==="constant"?sn=fn=pn=At.value:(sn=At.evaluate({zoom:at-1},_e),fn=At.evaluate({zoom:at},_e),pn=At.evaluate({zoom:at+1},_e)),rt.addDash(Bt,sn),rt.addDash(Wt,fn),rt.addDash(Yt,pn);const An=rt.getKey(Bt,sn),Tn=rt.getKey(Wt,fn),kn=rt.getKey(Yt,pn);_e.patterns[ct.id]={min:An,mid:Tn,max:kn}}}update(_e,rt,at,ct){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_e,rt,this.stateDependentLayers,at,ct)}addFeatures(_e,rt,at,ct,vt){for(const At of this.patternFeatures)this.addFeature(At,At.geometry,At.index,rt,at,ct)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(_e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=_e.createVertexBuffer(this.layoutVertexArray2,Jx)),this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,Kx),this.indexBuffer=_e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(_e){if(_e.properties&&_e.properties.hasOwnProperty("mapbox_clip_start")&&_e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+_e.properties.mapbox_clip_start,end:+_e.properties.mapbox_clip_end}}addFeature(_e,rt,at,ct,vt,At){const Bt=this.layers[0].layout,Wt=Bt.get("line-join").evaluate(_e,{}),Yt=Bt.get("line-cap").evaluate(_e,{}),sn=Bt.get("line-miter-limit"),fn=Bt.get("line-round-limit");this.lineClips=this.lineFeatureClips(_e);for(const pn of rt)this.addLine(pn,_e,Wt,Yt,sn,fn);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_e,at,vt,At,ct)}addLine(_e,rt,at,ct,vt,At){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ir=0;ir<_e.length-1;ir++)this.totalDistance+=_e[ir].dist(_e[ir+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Bt=Qx[rt.type]==="Polygon";let Wt=_e.length;for(;Wt>=2&&_e[Wt-1].equals(_e[Wt-2]);)Wt--;let Yt=0;for(;Yt<Wt-1&&_e[Yt].equals(_e[Yt+1]);)Yt++;if(Wt<(Bt?3:2))return;at==="bevel"&&(vt=1.05);const sn=this.overscaling<=16?122880/(512*this.overscaling):0,fn=this.segments.prepareSegment(10*Wt,this.layoutVertexArray,this.indexArray);let pn,An,Tn,kn,Vn;this.e1=this.e2=-1,Bt&&(pn=_e[Wt-2],Vn=_e[Yt].sub(pn)._unit()._perp());for(let ir=Yt;ir<Wt;ir++){if(Tn=ir===Wt-1?Bt?_e[Yt+1]:void 0:_e[ir+1],Tn&&_e[ir].equals(Tn))continue;Vn&&(kn=Vn),pn&&(An=pn),pn=_e[ir],Vn=Tn?Tn.sub(pn)._unit()._perp():kn,kn=kn||Vn;let _r=kn.add(Vn);_r.x===0&&_r.y===0||_r._unit();const rr=kn.x*Vn.x+kn.y*Vn.y,dr=_r.x*Vn.x+_r.y*Vn.y,br=dr!==0?1/dr:1/0,gr=2*Math.sqrt(2-2*dr),Dr=dr<eA&&An&&Tn,Pr=kn.x*Vn.y-kn.y*Vn.x>0;if(Dr&&ir>Yt){const jr=pn.dist(An);if(jr>2*sn){const Zr=pn.sub(pn.sub(An)._mult(sn/jr)._round());this.updateDistance(An,Zr),this.addCurrentVertex(Zr,kn,0,0,fn),An=Zr}}const Wr=An&&Tn;let oo=Wr?at:Bt?"butt":ct;if(Wr&&oo==="round"&&(br<At?oo="miter":br<=2&&(oo="fakeround")),oo==="miter"&&br>vt&&(oo="bevel"),oo==="bevel"&&(br>2&&(oo="flipbevel"),br<vt&&(oo="miter")),An&&this.updateDistance(An,pn),oo==="miter")_r._mult(br),this.addCurrentVertex(pn,_r,0,0,fn);else if(oo==="flipbevel"){if(br>100)_r=Vn.mult(-1);else{const jr=br*kn.add(Vn).mag()/kn.sub(Vn).mag();_r._perp()._mult(jr*(Pr?-1:1))}this.addCurrentVertex(pn,_r,0,0,fn),this.addCurrentVertex(pn,_r.mult(-1),0,0,fn)}else if(oo==="bevel"||oo==="fakeround"){const jr=-Math.sqrt(br*br-1),Zr=Pr?jr:0,Kr=Pr?0:jr;if(An&&this.addCurrentVertex(pn,kn,Zr,Kr,fn),oo==="fakeround"){const eo=Math.round(180*gr/Math.PI/20);for(let ao=1;ao<eo;ao++){let Fr=ao/eo;if(Fr!==.5){const Wo=Fr-.5;Fr+=Fr*Wo*(Fr-1)*((1.0904+rr*(rr*(3.55645-1.43519*rr)-3.2452))*Wo*Wo+(.848013+rr*(.215638*rr-1.06021)))}const yo=Vn.sub(kn)._mult(Fr)._add(kn)._unit()._mult(Pr?-1:1);this.addHalfVertex(pn,yo.x,yo.y,!1,Pr,0,fn)}}Tn&&this.addCurrentVertex(pn,Vn,-Zr,-Kr,fn)}else if(oo==="butt")this.addCurrentVertex(pn,_r,0,0,fn);else if(oo==="square"){const jr=An?1:-1;An||this.addCurrentVertex(pn,_r,jr,jr,fn),this.addCurrentVertex(pn,_r,0,0,fn),An&&this.addCurrentVertex(pn,_r,jr,jr,fn)}else oo==="round"&&(An&&(this.addCurrentVertex(pn,kn,0,0,fn),this.addCurrentVertex(pn,kn,1,1,fn,!0)),Tn&&(this.addCurrentVertex(pn,Vn,-1,-1,fn,!0),this.addCurrentVertex(pn,Vn,0,0,fn)));if(Dr&&ir<Wt-1){const jr=pn.dist(Tn);if(jr>2*sn){const Zr=pn.add(Tn.sub(pn)._mult(sn/jr)._round());this.updateDistance(pn,Zr),this.addCurrentVertex(Zr,Vn,0,0,fn),pn=Zr}}}}addCurrentVertex(_e,rt,at,ct,vt,At=!1){const Bt=rt.y*ct-rt.x,Wt=-rt.y-rt.x*ct;this.addHalfVertex(_e,rt.x+rt.y*at,rt.y-rt.x*at,At,!1,at,vt),this.addHalfVertex(_e,Bt,Wt,At,!0,-ct,vt)}addHalfVertex({x:_e,y:rt},at,ct,vt,At,Bt,Wt){this.layoutVertexArray.emplaceBack((_e<<1)+(vt?1:0),(rt<<1)+(At?1:0),Math.round(63*at)+128,Math.round(63*ct)+128,1+(Bt===0?0:Bt<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const Yt=Wt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Yt),Wt.primitiveLength++),At?this.e2=Yt:this.e1=Yt}updateScaledDistance(){if(this.lineClips){const _e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=_e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(_e,rt){this.distance+=_e.dist(rt),this.updateScaledDistance()}}Ao(_h,"LineBucket",{omit:["layers","patternFeatures"]});const tA=new uo({"line-cap":new Sr(Nr.layout_line["line-cap"]),"line-join":new Sr(Nr.layout_line["line-join"]),"line-miter-limit":new Or(Nr.layout_line["line-miter-limit"]),"line-round-limit":new Or(Nr.layout_line["line-round-limit"]),"line-sort-key":new Sr(Nr.layout_line["line-sort-key"])});var TS={paint:new uo({"line-opacity":new Sr(Nr.paint_line["line-opacity"]),"line-color":new Sr(Nr.paint_line["line-color"]),"line-translate":new Or(Nr.paint_line["line-translate"]),"line-translate-anchor":new Or(Nr.paint_line["line-translate-anchor"]),"line-width":new Sr(Nr.paint_line["line-width"]),"line-gap-width":new Sr(Nr.paint_line["line-gap-width"]),"line-offset":new Sr(Nr.paint_line["line-offset"]),"line-blur":new Sr(Nr.paint_line["line-blur"]),"line-dasharray":new mo(Nr.paint_line["line-dasharray"]),"line-pattern":new mo(Nr.paint_line["line-pattern"]),"line-gradient":new ho(Nr.paint_line["line-gradient"]),"line-trim-offset":new Or(Nr.paint_line["line-trim-offset"])}),layout:tA};const yy=new class extends Sr{possiblyEvaluate(nt,_e){return _e=new tr(Math.floor(_e.zoom),{now:_e.now,fadeDuration:_e.fadeDuration,zoomHistory:_e.zoomHistory,transition:_e.transition}),super.possiblyEvaluate(nt,_e)}evaluate(nt,_e,rt,at){return _e=St({},_e,{zoom:Math.floor(_e.zoom)}),super.evaluate(nt,_e,rt,at)}}(TS.paint.properties["line-width"].specification);function ys(nt,_e){return _e>0?_e+2*nt:nt}yy.useIntegerZoom=!0;const nA=co([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_f=co([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Hl=co([{name:"a_projected_pos",components:4,type:"Float32"}],4);co([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rA=co([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_y=co([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);co([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const CS=co([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iA=co([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);co([{name:"triangle",components:3,type:"Uint16"}]),co([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),co([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),co([{type:"Float32",name:"offsetX"}]),co([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var lu=24;const wm=128;function hw(nt,_e){const{expression:rt}=_e;if(rt.kind==="constant")return{kind:"constant",layoutSize:rt.evaluate(new tr(nt+1))};if(rt.kind==="source")return{kind:"source"};{const{zoomStops:at,interpolationType:ct}=rt;let vt=0;for(;vt<at.length&&at[vt]<=nt;)vt++;vt=Math.max(0,vt-1);let At=vt;for(;At<at.length&&at[At]<nt+1;)At++;At=Math.min(at.length-1,At);const Bt=at[vt],Wt=at[At];return rt.kind==="composite"?{kind:"composite",minZoom:Bt,maxZoom:Wt,interpolationType:ct}:{kind:"camera",minZoom:Bt,maxZoom:Wt,minSize:rt.evaluate(new tr(Bt)),maxSize:rt.evaluate(new tr(Wt)),interpolationType:ct}}}function G_(nt,{uSize:_e,uSizeT:rt},{lowerSize:at,upperSize:ct}){return nt.kind==="source"?at/wm:nt.kind==="composite"?Ss(at/wm,ct/wm,rt):_e}function H_(nt,_e){let rt=0,at=0;if(nt.kind==="constant")at=nt.layoutSize;else if(nt.kind!=="source"){const{interpolationType:ct,minZoom:vt,maxZoom:At}=nt,Bt=ct?Gt(vp.interpolationFactor(ct,_e,vt,At),0,1):0;nt.kind==="camera"?at=Ss(nt.minSize,nt.maxSize,Bt):rt=Bt}return{uSizeT:rt,uSize:at}}var zm=Object.freeze({__proto__:null,getSizeData:hw,evaluateSizeForFeature:G_,evaluateSizeForZoom:H_,SIZE_PACK_FACTOR:wm});function RS(nt,_e,rt){return nt.sections.forEach(at=>{at.text=function(ct,vt,At){const Bt=vt.layout.get("text-transform").evaluate(At,{});return Bt==="uppercase"?ct=ct.toLocaleUpperCase():Bt==="lowercase"&&(ct=ct.toLocaleLowerCase()),pr.applyArabicShaping&&(ct=pr.applyArabicShaping(ct)),ct}(at.text,_e,rt)}),nt}const vy={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function Il(nt){return nt==="︶"||nt==="﹈"||nt==="︸"||nt==="﹄"||nt==="﹂"||nt==="︾"||nt==="︼"||nt==="︺"||nt==="︘"||nt==="﹀"||nt==="︐"||nt==="︓"||nt==="︔"||nt==="｀"||nt==="￣"||nt==="︑"||nt==="︒"}function Nl(nt){return nt==="︵"||nt==="﹇"||nt==="︷"||nt==="﹃"||nt==="﹁"||nt==="︽"||nt==="︻"||nt==="︹"||nt==="︗"||nt==="︿"}var $_=$s,IS=function(nt,_e,rt,at,ct){var vt,At,Bt=8*ct-at-1,Wt=(1<<Bt)-1,Yt=Wt>>1,sn=-7,fn=rt?ct-1:0,pn=rt?-1:1,An=nt[_e+fn];for(fn+=pn,vt=An&(1<<-sn)-1,An>>=-sn,sn+=Bt;sn>0;vt=256*vt+nt[_e+fn],fn+=pn,sn-=8);for(At=vt&(1<<-sn)-1,vt>>=-sn,sn+=at;sn>0;At=256*At+nt[_e+fn],fn+=pn,sn-=8);if(vt===0)vt=1-Yt;else{if(vt===Wt)return At?NaN:1/0*(An?-1:1);At+=Math.pow(2,at),vt-=Yt}return(An?-1:1)*At*Math.pow(2,vt-at)},OS=function(nt,_e,rt,at,ct,vt){var At,Bt,Wt,Yt=8*vt-ct-1,sn=(1<<Yt)-1,fn=sn>>1,pn=ct===23?Math.pow(2,-24)-Math.pow(2,-77):0,An=at?0:vt-1,Tn=at?1:-1,kn=_e<0||_e===0&&1/_e<0?1:0;for(_e=Math.abs(_e),isNaN(_e)||_e===1/0?(Bt=isNaN(_e)?1:0,At=sn):(At=Math.floor(Math.log(_e)/Math.LN2),_e*(Wt=Math.pow(2,-At))<1&&(At--,Wt*=2),(_e+=At+fn>=1?pn/Wt:pn*Math.pow(2,1-fn))*Wt>=2&&(At++,Wt/=2),At+fn>=sn?(Bt=0,At=sn):At+fn>=1?(Bt=(_e*Wt-1)*Math.pow(2,ct),At+=fn):(Bt=_e*Math.pow(2,fn-1)*Math.pow(2,ct),At=0));ct>=8;nt[rt+An]=255&Bt,An+=Tn,Bt/=256,ct-=8);for(At=At<<ct|Bt,Yt+=ct;Yt>0;nt[rt+An]=255&At,An+=Tn,At/=256,Yt-=8);nt[rt+An-Tn]|=128*kn};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function $s(nt){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(nt)?nt:new Uint8Array(nt||0),this.pos=0,this.type=0,this.length=this.buf.length}$s.Varint=0,$s.Fixed64=1,$s.Bytes=2,$s.Fixed32=5;var fw=4294967296,PS=1/fw,kS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Sm(nt){return nt.type===$s.Bytes?nt.readVarint()+nt.pos:nt.pos+1}function xm(nt,_e,rt){return rt?4294967296*_e+(nt>>>0):4294967296*(_e>>>0)+(nt>>>0)}function e1(nt,_e,rt){var at=_e<=16383?1:_e<=2097151?2:_e<=268435455?3:Math.floor(Math.log(_e)/(7*Math.LN2));rt.realloc(at);for(var ct=rt.pos-1;ct>=nt;ct--)rt.buf[ct+at]=rt.buf[ct]}function oA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeVarint(nt[rt])}function DS(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeSVarint(nt[rt])}function t1(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeFloat(nt[rt])}function mp(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeDouble(nt[rt])}function q_(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeBoolean(nt[rt])}function sA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeFixed32(nt[rt])}function aA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeSFixed32(nt[rt])}function lA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeFixed64(nt[rt])}function uA(nt,_e){for(var rt=0;rt<nt.length;rt++)_e.writeSFixed64(nt[rt])}function n1(nt,_e){return(nt[_e]|nt[_e+1]<<8|nt[_e+2]<<16)+16777216*nt[_e+3]}function Zy(nt,_e,rt){nt[rt]=_e,nt[rt+1]=_e>>>8,nt[rt+2]=_e>>>16,nt[rt+3]=_e>>>24}function Am(nt,_e){return(nt[_e]|nt[_e+1]<<8|nt[_e+2]<<16)+(nt[_e+3]<<24)}function xs(nt,_e,rt){_e.glyphs=[],nt===1&&rt.readMessage(LS,_e)}function LS(nt,_e,rt){if(nt===3){const{id:at,bitmap:ct,width:vt,height:At,left:Bt,top:Wt,advance:Yt}=rt.readMessage(kp,{});_e.glyphs.push({id:at,bitmap:new Um({width:vt+6,height:At+6},ct),metrics:{width:vt,height:At,left:Bt,top:Wt,advance:Yt}})}else nt===4?_e.ascender=rt.readSVarint():nt===5&&(_e.descender=rt.readSVarint())}function kp(nt,_e,rt){nt===1?_e.id=rt.readVarint():nt===2?_e.bitmap=rt.readBytes():nt===3?_e.width=rt.readVarint():nt===4?_e.height=rt.readVarint():nt===5?_e.left=rt.readSVarint():nt===6?_e.top=rt.readSVarint():nt===7&&(_e.advance=rt.readVarint())}function r1(nt){let _e=0,rt=0;for(const At of nt)_e+=At.w*At.h,rt=Math.max(rt,At.w);nt.sort((At,Bt)=>Bt.h-At.h);const at=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(_e/.95)),rt),h:1/0}];let ct=0,vt=0;for(const At of nt)for(let Bt=at.length-1;Bt>=0;Bt--){const Wt=at[Bt];if(!(At.w>Wt.w||At.h>Wt.h)){if(At.x=Wt.x,At.y=Wt.y,vt=Math.max(vt,At.y+At.h),ct=Math.max(ct,At.x+At.w),At.w===Wt.w&&At.h===Wt.h){const Yt=at.pop();Bt<at.length&&(at[Bt]=Yt)}else At.h===Wt.h?(Wt.x+=At.w,Wt.w-=At.w):At.w===Wt.w?(Wt.y+=At.h,Wt.h-=At.h):(at.push({x:Wt.x+At.w,y:Wt.y,w:Wt.w-At.w,h:At.h}),Wt.y+=At.h,Wt.h-=At.h);break}}return{w:ct,h:vt,fill:_e/(ct*vt)||0}}$s.prototype={destroy:function(){this.buf=null},readFields:function(nt,_e,rt){for(rt=rt||this.length;this.pos<rt;){var at=this.readVarint(),ct=at>>3,vt=this.pos;this.type=7&at,nt(ct,_e,this),this.pos===vt&&this.skip(at)}return _e},readMessage:function(nt,_e){return this.readFields(nt,_e,this.readVarint()+this.pos)},readFixed32:function(){var nt=n1(this.buf,this.pos);return this.pos+=4,nt},readSFixed32:function(){var nt=Am(this.buf,this.pos);return this.pos+=4,nt},readFixed64:function(){var nt=n1(this.buf,this.pos)+n1(this.buf,this.pos+4)*fw;return this.pos+=8,nt},readSFixed64:function(){var nt=n1(this.buf,this.pos)+Am(this.buf,this.pos+4)*fw;return this.pos+=8,nt},readFloat:function(){var nt=IS(this.buf,this.pos,!0,23,4);return this.pos+=4,nt},readDouble:function(){var nt=IS(this.buf,this.pos,!0,52,8);return this.pos+=8,nt},readVarint:function(nt){var _e,rt,at=this.buf;return _e=127&(rt=at[this.pos++]),rt<128?_e:(_e|=(127&(rt=at[this.pos++]))<<7,rt<128?_e:(_e|=(127&(rt=at[this.pos++]))<<14,rt<128?_e:(_e|=(127&(rt=at[this.pos++]))<<21,rt<128?_e:function(ct,vt,At){var Bt,Wt,Yt=At.buf;if(Bt=(112&(Wt=Yt[At.pos++]))>>4,Wt<128||(Bt|=(127&(Wt=Yt[At.pos++]))<<3,Wt<128)||(Bt|=(127&(Wt=Yt[At.pos++]))<<10,Wt<128)||(Bt|=(127&(Wt=Yt[At.pos++]))<<17,Wt<128)||(Bt|=(127&(Wt=Yt[At.pos++]))<<24,Wt<128)||(Bt|=(1&(Wt=Yt[At.pos++]))<<31,Wt<128))return xm(ct,Bt,vt);throw new Error("Expected varint not more than 10 bytes")}(_e|=(15&(rt=at[this.pos]))<<28,nt,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var nt=this.readVarint();return nt%2==1?(nt+1)/-2:nt/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var nt=this.readVarint()+this.pos,_e=this.pos;return this.pos=nt,nt-_e>=12&&kS?function(rt,at,ct){return kS.decode(rt.subarray(at,ct))}(this.buf,_e,nt):function(rt,at,ct){for(var vt="",At=at;At<ct;){var Bt,Wt,Yt,sn=rt[At],fn=null,pn=sn>239?4:sn>223?3:sn>191?2:1;if(At+pn>ct)break;pn===1?sn<128&&(fn=sn):pn===2?(192&(Bt=rt[At+1]))==128&&(fn=(31&sn)<<6|63&Bt)<=127&&(fn=null):pn===3?(Wt=rt[At+2],(192&(Bt=rt[At+1]))==128&&(192&Wt)==128&&((fn=(15&sn)<<12|(63&Bt)<<6|63&Wt)<=2047||fn>=55296&&fn<=57343)&&(fn=null)):pn===4&&(Wt=rt[At+2],Yt=rt[At+3],(192&(Bt=rt[At+1]))==128&&(192&Wt)==128&&(192&Yt)==128&&((fn=(15&sn)<<18|(63&Bt)<<12|(63&Wt)<<6|63&Yt)<=65535||fn>=1114112)&&(fn=null)),fn===null?(fn=65533,pn=1):fn>65535&&(fn-=65536,vt+=String.fromCharCode(fn>>>10&1023|55296),fn=56320|1023&fn),vt+=String.fromCharCode(fn),At+=pn}return vt}(this.buf,_e,nt)},readBytes:function(){var nt=this.readVarint()+this.pos,_e=this.buf.subarray(this.pos,nt);return this.pos=nt,_e},readPackedVarint:function(nt,_e){if(this.type!==$s.Bytes)return nt.push(this.readVarint(_e));var rt=Sm(this);for(nt=nt||[];this.pos<rt;)nt.push(this.readVarint(_e));return nt},readPackedSVarint:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readSVarint());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readSVarint());return nt},readPackedBoolean:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readBoolean());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readBoolean());return nt},readPackedFloat:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readFloat());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readFloat());return nt},readPackedDouble:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readDouble());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readDouble());return nt},readPackedFixed32:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readFixed32());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readFixed32());return nt},readPackedSFixed32:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readSFixed32());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readSFixed32());return nt},readPackedFixed64:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readFixed64());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readFixed64());return nt},readPackedSFixed64:function(nt){if(this.type!==$s.Bytes)return nt.push(this.readSFixed64());var _e=Sm(this);for(nt=nt||[];this.pos<_e;)nt.push(this.readSFixed64());return nt},skip:function(nt){var _e=7&nt;if(_e===$s.Varint)for(;this.buf[this.pos++]>127;);else if(_e===$s.Bytes)this.pos=this.readVarint()+this.pos;else if(_e===$s.Fixed32)this.pos+=4;else{if(_e!==$s.Fixed64)throw new Error("Unimplemented type: "+_e);this.pos+=8}},writeTag:function(nt,_e){this.writeVarint(nt<<3|_e)},realloc:function(nt){for(var _e=this.length||16;_e<this.pos+nt;)_e*=2;if(_e!==this.length){var rt=new Uint8Array(_e);rt.set(this.buf),this.buf=rt,this.length=_e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(nt){this.realloc(4),Zy(this.buf,nt,this.pos),this.pos+=4},writeSFixed32:function(nt){this.realloc(4),Zy(this.buf,nt,this.pos),this.pos+=4},writeFixed64:function(nt){this.realloc(8),Zy(this.buf,-1&nt,this.pos),Zy(this.buf,Math.floor(nt*PS),this.pos+4),this.pos+=8},writeSFixed64:function(nt){this.realloc(8),Zy(this.buf,-1&nt,this.pos),Zy(this.buf,Math.floor(nt*PS),this.pos+4),this.pos+=8},writeVarint:function(nt){(nt=+nt||0)>268435455||nt<0?function(_e,rt){var at,ct;if(_e>=0?(at=_e%4294967296|0,ct=_e/4294967296|0):(ct=~(-_e/4294967296),4294967295^(at=~(-_e%4294967296))?at=at+1|0:(at=0,ct=ct+1|0)),_e>=18446744073709552e3||_e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");rt.realloc(10),function(vt,At,Bt){Bt.buf[Bt.pos++]=127&vt|128,vt>>>=7,Bt.buf[Bt.pos++]=127&vt|128,vt>>>=7,Bt.buf[Bt.pos++]=127&vt|128,vt>>>=7,Bt.buf[Bt.pos++]=127&vt|128,Bt.buf[Bt.pos]=127&(vt>>>=7)}(at,0,rt),function(vt,At){var Bt=(7&vt)<<4;At.buf[At.pos++]|=Bt|((vt>>>=3)?128:0),vt&&(At.buf[At.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(At.buf[At.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(At.buf[At.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(At.buf[At.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(At.buf[At.pos++]=127&vt)))))}(ct,rt)}(nt,this):(this.realloc(4),this.buf[this.pos++]=127&nt|(nt>127?128:0),nt<=127||(this.buf[this.pos++]=127&(nt>>>=7)|(nt>127?128:0),nt<=127||(this.buf[this.pos++]=127&(nt>>>=7)|(nt>127?128:0),nt<=127||(this.buf[this.pos++]=nt>>>7&127))))},writeSVarint:function(nt){this.writeVarint(nt<0?2*-nt-1:2*nt)},writeBoolean:function(nt){this.writeVarint(Boolean(nt))},writeString:function(nt){nt=String(nt),this.realloc(4*nt.length),this.pos++;var _e=this.pos;this.pos=function(at,ct,vt){for(var At,Bt,Wt=0;Wt<ct.length;Wt++){if((At=ct.charCodeAt(Wt))>55295&&At<57344){if(!Bt){At>56319||Wt+1===ct.length?(at[vt++]=239,at[vt++]=191,at[vt++]=189):Bt=At;continue}if(At<56320){at[vt++]=239,at[vt++]=191,at[vt++]=189,Bt=At;continue}At=Bt-55296<<10|At-56320|65536,Bt=null}else Bt&&(at[vt++]=239,at[vt++]=191,at[vt++]=189,Bt=null);At<128?at[vt++]=At:(At<2048?at[vt++]=At>>6|192:(At<65536?at[vt++]=At>>12|224:(at[vt++]=At>>18|240,at[vt++]=At>>12&63|128),at[vt++]=At>>6&63|128),at[vt++]=63&At|128)}return vt}(this.buf,nt,this.pos);var rt=this.pos-_e;rt>=128&&e1(_e,rt,this),this.pos=_e-1,this.writeVarint(rt),this.pos+=rt},writeFloat:function(nt){this.realloc(4),OS(this.buf,nt,this.pos,!0,23,4),this.pos+=4},writeDouble:function(nt){this.realloc(8),OS(this.buf,nt,this.pos,!0,52,8),this.pos+=8},writeBytes:function(nt){var _e=nt.length;this.writeVarint(_e),this.realloc(_e);for(var rt=0;rt<_e;rt++)this.buf[this.pos++]=nt[rt]},writeRawMessage:function(nt,_e){this.pos++;var rt=this.pos;nt(_e,this);var at=this.pos-rt;at>=128&&e1(rt,at,this),this.pos=rt-1,this.writeVarint(at),this.pos+=at},writeMessage:function(nt,_e,rt){this.writeTag(nt,$s.Bytes),this.writeRawMessage(_e,rt)},writePackedVarint:function(nt,_e){_e.length&&this.writeMessage(nt,oA,_e)},writePackedSVarint:function(nt,_e){_e.length&&this.writeMessage(nt,DS,_e)},writePackedBoolean:function(nt,_e){_e.length&&this.writeMessage(nt,q_,_e)},writePackedFloat:function(nt,_e){_e.length&&this.writeMessage(nt,t1,_e)},writePackedDouble:function(nt,_e){_e.length&&this.writeMessage(nt,mp,_e)},writePackedFixed32:function(nt,_e){_e.length&&this.writeMessage(nt,sA,_e)},writePackedSFixed32:function(nt,_e){_e.length&&this.writeMessage(nt,aA,_e)},writePackedFixed64:function(nt,_e){_e.length&&this.writeMessage(nt,lA,_e)},writePackedSFixed64:function(nt,_e){_e.length&&this.writeMessage(nt,uA,_e)},writeBytesField:function(nt,_e){this.writeTag(nt,$s.Bytes),this.writeBytes(_e)},writeFixed32Field:function(nt,_e){this.writeTag(nt,$s.Fixed32),this.writeFixed32(_e)},writeSFixed32Field:function(nt,_e){this.writeTag(nt,$s.Fixed32),this.writeSFixed32(_e)},writeFixed64Field:function(nt,_e){this.writeTag(nt,$s.Fixed64),this.writeFixed64(_e)},writeSFixed64Field:function(nt,_e){this.writeTag(nt,$s.Fixed64),this.writeSFixed64(_e)},writeVarintField:function(nt,_e){this.writeTag(nt,$s.Varint),this.writeVarint(_e)},writeSVarintField:function(nt,_e){this.writeTag(nt,$s.Varint),this.writeSVarint(_e)},writeStringField:function(nt,_e){this.writeTag(nt,$s.Bytes),this.writeString(_e)},writeFloatField:function(nt,_e){this.writeTag(nt,$s.Fixed32),this.writeFloat(_e)},writeDoubleField:function(nt,_e){this.writeTag(nt,$s.Fixed64),this.writeDouble(_e)},writeBooleanField:function(nt,_e){this.writeVarintField(nt,Boolean(_e))}};class dw{constructor(_e,{pixelRatio:rt,version:at,stretchX:ct,stretchY:vt,content:At}){this.paddedRect=_e,this.pixelRatio=rt,this.stretchX=ct,this.stretchY=vt,this.content=At,this.version=at}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class qs{constructor(_e,rt){const at={},ct={};this.haveRenderCallbacks=[];const vt=[];this.addImages(_e,at,vt),this.addImages(rt,ct,vt);const{w:At,h:Bt}=r1(vt),Wt=new _c({width:At||1,height:Bt||1});for(const Yt in _e){const sn=_e[Yt],fn=at[Yt].paddedRect;_c.copy(sn.data,Wt,{x:0,y:0},{x:fn.x+1,y:fn.y+1},sn.data)}for(const Yt in rt){const sn=rt[Yt],fn=ct[Yt].paddedRect,pn=fn.x+1,An=fn.y+1,Tn=sn.data.width,kn=sn.data.height;_c.copy(sn.data,Wt,{x:0,y:0},{x:pn,y:An},sn.data),_c.copy(sn.data,Wt,{x:0,y:kn-1},{x:pn,y:An-1},{width:Tn,height:1}),_c.copy(sn.data,Wt,{x:0,y:0},{x:pn,y:An+kn},{width:Tn,height:1}),_c.copy(sn.data,Wt,{x:Tn-1,y:0},{x:pn-1,y:An},{width:1,height:kn}),_c.copy(sn.data,Wt,{x:0,y:0},{x:pn+Tn,y:An},{width:1,height:kn})}this.image=Wt,this.iconPositions=at,this.patternPositions=ct}addImages(_e,rt,at){for(const ct in _e){const vt=_e[ct],At={x:0,y:0,w:vt.data.width+2,h:vt.data.height+2};at.push(At),rt[ct]=new dw(At,vt),vt.hasRenderCallback&&this.haveRenderCallbacks.push(ct)}}patchUpdatedImages(_e,rt){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(at=>_e.hasImage(at)),_e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const at in _e.updatedImages)this.patchUpdatedImage(this.iconPositions[at],_e.getImage(at),rt),this.patchUpdatedImage(this.patternPositions[at],_e.getImage(at),rt)}patchUpdatedImage(_e,rt,at){if(!_e||!rt||_e.version===rt.version)return;_e.version=rt.version;const[ct,vt]=_e.tl;at.update(rt.data,void 0,{x:ct,y:vt})}}Ao(dw,"ImagePosition"),Ao(qs,"ImageAtlas");const yp={horizontal:1,vertical:2,horizontalOnly:3};class Z_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(_e,rt){const at=new Z_;return at.scale=_e||1,at.fontStack=rt,at}static forImage(_e){const rt=new Z_;return rt.imageName=_e,rt}}class Vm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(_e,rt){const at=new Vm;for(let ct=0;ct<_e.sections.length;ct++){const vt=_e.sections[ct];vt.image?at.addImageSection(vt):at.addTextSection(vt,rt)}return at}length(){return this.text.length}getSection(_e){return this.sections[this.sectionIndex[_e]]}getSections(){return this.sections}getSectionIndex(_e){return this.sectionIndex[_e]}getCharCode(_e){return this.text.charCodeAt(_e)}verticalizePunctuation(_e){this.text=function(rt,at){let ct="";for(let vt=0;vt<rt.length;vt++){const At=rt.charCodeAt(vt+1)||null,Bt=rt.charCodeAt(vt-1)||null;ct+=!at&&(At&&Jt(At)&&!vy[rt[vt+1]]||Bt&&Jt(Bt)&&!vy[rt[vt-1]])||!vy[rt[vt]]?rt[vt]:vy[rt[vt]]}return ct}(this.text,_e)}trim(){let _e=0;for(let at=0;at<this.text.length&&i1[this.text.charCodeAt(at)];at++)_e++;let rt=this.text.length;for(let at=this.text.length-1;at>=0&&at>=_e&&i1[this.text.charCodeAt(at)];at--)rt--;this.text=this.text.substring(_e,rt),this.sectionIndex=this.sectionIndex.slice(_e,rt)}substring(_e,rt){const at=new Vm;return at.text=this.text.substring(_e,rt),at.sectionIndex=this.sectionIndex.slice(_e,rt),at.sections=this.sections,at}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((_e,rt)=>Math.max(_e,this.sections[rt].scale),0)}addTextSection(_e,rt){this.text+=_e.text,this.sections.push(Z_.forText(_e.scale,_e.fontStack||rt));const at=this.sections.length-1;for(let ct=0;ct<_e.text.length;++ct)this.sectionIndex.push(at)}addImageSection(_e){const rt=_e.image?_e.image.name:"";if(rt.length===0)return void hn("Can't add FormattedSection with an empty image.");const at=this.getNextImageSectionCharCode();at?(this.text+=String.fromCharCode(at),this.sections.push(Z_.forImage(rt)),this.sectionIndex.push(this.sections.length-1)):hn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gw(nt,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn){const kn=Vm.fromFeature(nt,ct);fn===yp.vertical&&kn.verticalizePunctuation(pn);let Vn=[];const ir=function(gr,Dr,Pr,Wr,oo,jr){if(!gr)return[];const Zr=[],Kr=function(yo,Wo,bo,Do,_o,Ho){let rs=0;for(let us=0;us<yo.length();us++){const Is=yo.getSection(us);rs+=BS(yo.getCharCode(us),Is,Do,_o,Wo,Ho)}return rs/Math.max(1,Math.ceil(rs/bo))}(gr,Dr,Pr,Wr,oo,jr),eo=gr.text.indexOf("​")>=0;let ao=0;for(let yo=0;yo<gr.length();yo++){const Wo=gr.getSection(yo),bo=gr.getCharCode(yo);if(i1[bo]||(ao+=BS(bo,Wo,Wr,oo,Dr,jr)),yo<gr.length()-1){const Do=!((Fr=bo)<11904||!(T_(Fr)||E_(Fr)||Bm(Fr)||x0(Fr)||b0(Fr)||Av(Fr)||qu(Fr)||Ny(Fr)||w0(Fr)||Cv(Fr)||Tv(Fr)||ot(Fr)||A_(Fr)||Ev(Fr)||_0(Fr)||v0(Fr)||cp(Fr)||ly(Fr)||Rv(Fr)||Uy(Fr)));(cA[bo]||Do||Wo.imageName)&&Zr.push(FS(yo+1,ao,Kr,Zr,hA(bo,gr.getCharCode(yo+1),Do&&eo),!1))}}var Fr;return NS(FS(gr.length(),ao,Kr,Zr,0,!0))}(kn,Yt,vt,_e,at,An),{processBidirectionalText:_r,processStyledBidirectionalText:rr}=pr;if(_r&&kn.sections.length===1){const gr=_r(kn.toString(),ir);for(const Dr of gr){const Pr=new Vm;Pr.text=Dr,Pr.sections=kn.sections;for(let Wr=0;Wr<Dr.length;Wr++)Pr.sectionIndex.push(0);Vn.push(Pr)}}else if(rr){const gr=rr(kn.text,kn.sectionIndex,ir);for(const Dr of gr){const Pr=new Vm;Pr.text=Dr[0],Pr.sectionIndex=Dr[1],Pr.sections=kn.sections,Vn.push(Pr)}}else Vn=function(gr,Dr){const Pr=[],Wr=gr.text;let oo=0;for(const jr of Dr)Pr.push(gr.substring(oo,jr)),oo=jr;return oo<Wr.length&&Pr.push(gr.substring(oo,Wr.length)),Pr}(kn,ir);const dr=[],br={positionedLines:dr,text:kn.toString(),top:sn[1],bottom:sn[1],left:sn[0],right:sn[0],writingMode:fn,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(gr,Dr,Pr,Wr,oo,jr,Zr,Kr,eo,ao,Fr,yo){let Wo=0,bo=0,Do=0;const _o=Kr==="right"?1:Kr==="left"?0:.5;let Ho=!1;for(const ps of oo){const ws=ps.getSections();for(const Zs of ws){if(Zs.imageName)continue;const _a=Dr[Zs.fontStack];if(_a&&(Ho=_a.ascender!==void 0&&_a.descender!==void 0,!Ho))break}if(!Ho)break}let rs=0;for(const ps of oo){ps.trim();const ws=ps.getMaxScale(),Zs=(ws-1)*lu,_a={positionedGlyphs:[],lineOffset:0};gr.positionedLines[rs]=_a;const na=_a.positionedGlyphs;let ba=0;if(!ps.length()){bo+=jr,++rs;continue}let yl=0,Ol=0;for(let Hs=0;Hs<ps.length();Hs++){const Kl=ps.getSection(Hs),$l=ps.getSectionIndex(Hs),ks=ps.getCharCode(Hs);let Al=Kl.scale,eu=null,Ys=null,zl=null,Nu=lu,bu=0;const wu=!(eo===yp.horizontal||!Fr&&!jt(ks)||Fr&&(i1[ks]||(us=ks,y0(us)||Fy(us)||Tp(us)||zy(us)||dt(us))));if(Kl.imageName){const ep=Wr[Kl.imageName];if(!ep)continue;zl=Kl.imageName,gr.iconsInText=gr.iconsInText||!0,Ys=ep.paddedRect;const Su=ep.displaySize;Al=Al*lu/yo,eu={width:Su[0],height:Su[1],left:1,top:-3,advance:wu?Su[1]:Su[0],localGlyph:!1},bu=Ho?-eu.height*Al:ws*lu-17-Su[1]*Al,Nu=eu.advance;const Qy=(wu?Su[0]:Su[1])*Al-lu*ws;Qy>0&&Qy>ba&&(ba=Qy)}else{const ep=Pr[Kl.fontStack];if(!ep)continue;ep[ks]&&(Ys=ep[ks]);const Su=Dr[Kl.fontStack];if(!Su)continue;const Qy=Su.glyphs[ks];if(!Qy)continue;if(eu=Qy.metrics,Nu=ks!==8203?lu:0,Ho){const A1=Su.ascender!==void 0?Math.abs(Su.ascender):0,kw=Su.descender!==void 0?Math.abs(Su.descender):0,Dw=(A1+kw)*Al;yl<Dw&&(yl=Dw,Ol=(A1-kw)/2*Al),bu=-A1*Al}else bu=(ws-Al)*lu-17}wu?(gr.verticalizable=!0,na.push({glyph:ks,imageName:zl,x:Wo,y:bo+bu,vertical:wu,scale:Al,localGlyph:eu.localGlyph,fontStack:Kl.fontStack,sectionIndex:$l,metrics:eu,rect:Ys}),Wo+=Nu*Al+ao):(na.push({glyph:ks,imageName:zl,x:Wo,y:bo+bu,vertical:wu,scale:Al,localGlyph:eu.localGlyph,fontStack:Kl.fontStack,sectionIndex:$l,metrics:eu,rect:Ys}),Wo+=eu.advance*Al+ao)}na.length!==0&&(Do=Math.max(Wo-ao,Do),Ho?US(na,_o,ba,Ol,jr*ws/2):US(na,_o,ba,0,jr/2)),Wo=0;const vu=jr*ws+ba;_a.lineOffset=Math.max(ba,Zs),bo+=vu,++rs}var us;const Is=bo,{horizontalAlign:ts,verticalAlign:$a}=pw(Zr);(function(ps,ws,Zs,_a,na,ba){const yl=(ws-Zs)*na,Ol=-ba*_a;for(const vu of ps)for(const Hs of vu.positionedGlyphs)Hs.x+=yl,Hs.y+=Ol})(gr.positionedLines,_o,ts,$a,Do,Is),gr.top+=-$a*Is,gr.bottom=gr.top+Is,gr.left+=-ts*Do,gr.right=gr.left+Do,gr.hasBaseline=Ho}(br,_e,rt,at,Vn,At,Bt,Wt,fn,Yt,pn,Tn),!function(gr){for(const Dr of gr)if(Dr.positionedGlyphs.length!==0)return!1;return!0}(dr)&&br}const i1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function BS(nt,_e,rt,at,ct,vt){if(_e.imageName){const At=at[_e.imageName];return At?At.displaySize[0]*_e.scale*lu/vt+ct:0}{const At=rt[_e.fontStack],Bt=At&&At.glyphs[nt];return Bt?Bt.metrics.advance*_e.scale+ct:0}}function jS(nt,_e,rt,at){const ct=Math.pow(nt-_e,2);return at?nt<_e?ct/2:2*ct:ct+Math.abs(rt)*rt}function hA(nt,_e,rt){let at=0;return nt===10&&(at-=1e4),rt&&(at+=150),nt!==40&&nt!==65288||(at+=50),_e!==41&&_e!==65289||(at+=50),at}function FS(nt,_e,rt,at,ct,vt){let At=null,Bt=jS(_e,rt,ct,vt);for(const Wt of at){const Yt=jS(_e-Wt.x,rt,ct,vt)+Wt.badness;Yt<=Bt&&(At=Wt,Bt=Yt)}return{index:nt,x:_e,priorBreak:At,badness:Bt}}function NS(nt){return nt?NS(nt.priorBreak).concat(nt.index):[]}function pw(nt){let _e=.5,rt=.5;switch(nt){case"right":case"top-right":case"bottom-right":_e=1;break;case"left":case"top-left":case"bottom-left":_e=0}switch(nt){case"bottom":case"bottom-right":case"bottom-left":rt=1;break;case"top":case"top-right":case"top-left":rt=0}return{horizontalAlign:_e,verticalAlign:rt}}function US(nt,_e,rt,at,ct){if(!(_e||rt||at||ct))return;const vt=nt.length-1,At=nt[vt],Bt=(At.x+At.metrics.advance*At.scale)*_e;for(let Wt=0;Wt<=vt;Wt++)nt[Wt].x-=Bt,nt[Wt].y+=rt+at+ct}function fA(nt,_e,rt){const{horizontalAlign:at,verticalAlign:ct}=pw(rt),vt=_e[0]-nt.displaySize[0]*at,At=_e[1]-nt.displaySize[1]*ct;return{image:nt,top:At,bottom:At+nt.displaySize[1],left:vt,right:vt+nt.displaySize[0]}}function zS(nt,_e,rt,at,ct,vt){const At=nt.image;let Bt;if(At.content){const Vn=At.content,ir=At.pixelRatio||1;Bt=[Vn[0]/ir,Vn[1]/ir,At.displaySize[0]-Vn[2]/ir,At.displaySize[1]-Vn[3]/ir]}const Wt=_e.left*vt,Yt=_e.right*vt;let sn,fn,pn,An;rt==="width"||rt==="both"?(An=ct[0]+Wt-at[3],fn=ct[0]+Yt+at[1]):(An=ct[0]+(Wt+Yt-At.displaySize[0])/2,fn=An+At.displaySize[0]);const Tn=_e.top*vt,kn=_e.bottom*vt;return rt==="height"||rt==="both"?(sn=ct[1]+Tn-at[0],pn=ct[1]+kn+at[2]):(sn=ct[1]+(Tn+kn-At.displaySize[1])/2,pn=sn+At.displaySize[1]),{image:At,top:sn,right:fn,bottom:pn,left:An,collisionPadding:Bt}}class Wm extends pt{constructor(_e,rt,at,ct,vt){super(_e,rt),this.angle=ct,this.z=at,vt!==void 0&&(this.segment=vt)}clone(){return new Wm(this.x,this.y,this.z,this.angle,this.segment)}}function o1(nt,_e,rt,at,ct){if(_e.segment===void 0)return!0;let vt=_e,At=_e.segment+1,Bt=0;for(;Bt>-rt/2;){if(At--,At<0)return!1;Bt-=nt[At].dist(vt),vt=nt[At]}Bt+=nt[At].dist(nt[At+1]),At++;const Wt=[];let Yt=0;for(;Bt<rt/2;){const sn=nt[At],fn=nt[At+1];if(!fn)return!1;let pn=nt[At-1].angleTo(sn)-sn.angleTo(fn);for(pn=Math.abs((pn+3*Math.PI)%(2*Math.PI)-Math.PI),Wt.push({distance:Bt,angleDelta:pn}),Yt+=pn;Bt-Wt[0].distance>at;)Yt-=Wt.shift().angleDelta;if(Yt>ct)return!1;At++,Bt+=sn.dist(fn)}return!0}function VS(nt){let _e=0;for(let rt=0;rt<nt.length-1;rt++)_e+=nt[rt].dist(nt[rt+1]);return _e}function s1(nt,_e,rt){return nt?.6*_e*rt:0}function WS(nt,_e){return Math.max(nt?nt.right-nt.left:0,_e?_e.right-_e.left:0)}function dA(nt,_e,rt,at,ct,vt){const At=s1(rt,ct,vt),Bt=WS(rt,at)*vt;let Wt=0;const Yt=VS(nt)/2;for(let sn=0;sn<nt.length-1;sn++){const fn=nt[sn],pn=nt[sn+1],An=fn.dist(pn);if(Wt+An>Yt){const Tn=(Yt-Wt)/An,kn=Ss(fn.x,pn.x,Tn),Vn=Ss(fn.y,pn.y,Tn),ir=new Wm(kn,Vn,0,pn.angleTo(fn),sn);return!At||o1(nt,ir,Bt,At,_e)?ir:void 0}Wt+=An}}function gA(nt,_e,rt,at,ct,vt,At,Bt,Wt){const Yt=s1(at,vt,At),sn=WS(at,ct),fn=sn*At,pn=nt[0].x===0||nt[0].x===Wt||nt[0].y===0||nt[0].y===Wt;return _e-fn<_e/4&&(_e=fn+_e/4),Ql(nt,pn?_e/2*Bt%_e:(sn/2+2*vt)*At*Bt%_e,_e,Yt,rt,fn,pn,!1,Wt)}function Ql(nt,_e,rt,at,ct,vt,At,Bt,Wt){const Yt=vt/2,sn=VS(nt);let fn=0,pn=_e-rt,An=[];for(let Tn=0;Tn<nt.length-1;Tn++){const kn=nt[Tn],Vn=nt[Tn+1],ir=kn.dist(Vn),_r=Vn.angleTo(kn);for(;pn+rt<fn+ir;){pn+=rt;const rr=(pn-fn)/ir,dr=Ss(kn.x,Vn.x,rr),br=Ss(kn.y,Vn.y,rr);if(dr>=0&&dr<Wt&&br>=0&&br<Wt&&pn-Yt>=0&&pn+Yt<=sn){const gr=new Wm(dr,br,0,_r,Tn);gr._round(),at&&!o1(nt,gr,vt,at,ct)||An.push(gr)}}fn+=ir}return Bt||An.length||At||(An=Ql(nt,fn/2,rt,at,ct,vt,At,!0,Wt)),An}function Bu(nt,_e,rt,at,ct){const vt=[];for(let At=0;At<nt.length;At++){const Bt=nt[At];let Wt;for(let Yt=0;Yt<Bt.length-1;Yt++){let sn=Bt[Yt],fn=Bt[Yt+1];sn.x<_e&&fn.x<_e||(sn.x<_e?sn=new pt(_e,sn.y+(_e-sn.x)/(fn.x-sn.x)*(fn.y-sn.y))._round():fn.x<_e&&(fn=new pt(_e,sn.y+(_e-sn.x)/(fn.x-sn.x)*(fn.y-sn.y))._round()),sn.y<rt&&fn.y<rt||(sn.y<rt?sn=new pt(sn.x+(rt-sn.y)/(fn.y-sn.y)*(fn.x-sn.x),rt)._round():fn.y<rt&&(fn=new pt(sn.x+(rt-sn.y)/(fn.y-sn.y)*(fn.x-sn.x),rt)._round()),sn.x>=at&&fn.x>=at||(sn.x>=at?sn=new pt(at,sn.y+(at-sn.x)/(fn.x-sn.x)*(fn.y-sn.y))._round():fn.x>=at&&(fn=new pt(at,sn.y+(at-sn.x)/(fn.x-sn.x)*(fn.y-sn.y))._round()),sn.y>=ct&&fn.y>=ct||(sn.y>=ct?sn=new pt(sn.x+(ct-sn.y)/(fn.y-sn.y)*(fn.x-sn.x),ct)._round():fn.y>=ct&&(fn=new pt(sn.x+(ct-sn.y)/(fn.y-sn.y)*(fn.x-sn.x),ct)._round()),Wt&&sn.equals(Wt[Wt.length-1])||(Wt=[sn],vt.push(Wt)),Wt.push(fn)))))}}return vt}Ao(Wm,"Anchor");const Kv=1e20;function GS(nt,_e,rt,at,ct,vt,At,Bt,Wt){for(let Yt=_e;Yt<_e+at;Yt++)HS(nt,rt*vt+Yt,vt,ct,At,Bt,Wt);for(let Yt=rt;Yt<rt+ct;Yt++)HS(nt,Yt*vt+_e,1,at,At,Bt,Wt)}function HS(nt,_e,rt,at,ct,vt,At){vt[0]=0,At[0]=-Kv,At[1]=Kv,ct[0]=nt[_e];for(let Bt=1,Wt=0,Yt=0;Bt<at;Bt++){ct[Bt]=nt[_e+Bt*rt];const sn=Bt*Bt;do{const fn=vt[Wt];Yt=(ct[Bt]-ct[fn]+sn-fn*fn)/(Bt-fn)/2}while(Yt<=At[Wt]&&--Wt>-1);Wt++,vt[Wt]=Bt,At[Wt]=Yt,At[Wt+1]=Kv}for(let Bt=0,Wt=0;Bt<at;Bt++){for(;At[Wt+1]<Bt;)Wt++;const Yt=vt[Wt],sn=Bt-Yt;nt[_e+Bt*rt]=ct[Yt]+sn*sn}}const a1={none:0,ideographs:1,all:2};class Y_{constructor(_e,rt,at){this.requestManager=_e,this.localGlyphMode=rt,this.localFontFamily=at,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(_e){this.url=_e}getGlyphs(_e,rt){const at=[];for(const ct in _e)for(const vt of _e[ct])at.push({stack:ct,id:vt});qt(at,({stack:ct,id:vt},At)=>{let Bt=this.entries[ct];Bt||(Bt=this.entries[ct]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let Wt=Bt.glyphs[vt];if(Wt!==void 0)return void At(null,{stack:ct,id:vt,glyph:Wt});if(Wt=this._tinySDF(Bt,ct,vt),Wt)return Bt.glyphs[vt]=Wt,void At(null,{stack:ct,id:vt,glyph:Wt});const Yt=Math.floor(vt/256);if(256*Yt>65535)return void At(new Error("glyphs > 65535 not supported"));if(Bt.ranges[Yt])return void At(null,{stack:ct,id:vt,glyph:Wt});let sn=Bt.requests[Yt];sn||(sn=Bt.requests[Yt]=[],Y_.loadGlyphRange(ct,Yt,this.url,this.requestManager,(fn,pn)=>{if(pn){Bt.ascender=pn.ascender,Bt.descender=pn.descender;for(const An in pn.glyphs)this._doesCharSupportLocalGlyph(+An)||(Bt.glyphs[+An]=pn.glyphs[+An]);Bt.ranges[Yt]=!0}for(const An of sn)An(fn,pn);delete Bt.requests[Yt]})),sn.push((fn,pn)=>{fn?At(fn):pn&&At(null,{stack:ct,id:vt,glyph:pn.glyphs[vt]||null})})},(ct,vt)=>{if(ct)rt(ct);else if(vt){const At={};for(const{stack:Bt,id:Wt,glyph:Yt}of vt)At[Bt]===void 0&&(At[Bt]={}),At[Bt].glyphs===void 0&&(At[Bt].glyphs={}),At[Bt].glyphs[Wt]=Yt&&{id:Yt.id,bitmap:Yt.bitmap.clone(),metrics:Yt.metrics},At[Bt].ascender=this.entries[Bt].ascender,At[Bt].descender=this.entries[Bt].descender;rt(null,At)}})}_doesCharSupportLocalGlyph(_e){return this.localGlyphMode!==a1.none&&(this.localGlyphMode===a1.all?!!this.localFontFamily:!!this.localFontFamily&&(Cv(_e)||S0(_e)||A_(_e)||cp(_e)||Ny(_e)))}_tinySDF(_e,rt,at){const ct=this.localFontFamily;if(!ct||!this._doesCharSupportLocalGlyph(at))return;let vt=_e.tinySDF;if(!vt){let kn="400";/bold/i.test(rt)?kn="900":/medium/i.test(rt)?kn="500":/light/i.test(rt)&&(kn="200"),vt=_e.tinySDF=new Y_.TinySDF({fontFamily:ct,fontWeight:kn,fontSize:48,buffer:6,radius:16}),vt.fontWeight=kn}if(this.localGlyphs[vt.fontWeight][at])return this.localGlyphs[vt.fontWeight][at];const At=String.fromCharCode(at),{data:Bt,width:Wt,height:Yt,glyphWidth:sn,glyphHeight:fn,glyphLeft:pn,glyphTop:An,glyphAdvance:Tn}=vt.draw(At);return this.localGlyphs[vt.fontWeight][at]={id:at,bitmap:new Um({width:Wt,height:Yt},Bt),metrics:{width:sn/2,height:fn/2,left:pn/2,top:An/2-27,advance:Tn/2,localGlyph:!0}}}}function $S(nt,_e,rt,at){const ct=[],vt=nt.image,At=vt.pixelRatio,Bt=vt.paddedRect.w-2,Wt=vt.paddedRect.h-2,Yt=nt.right-nt.left,sn=nt.bottom-nt.top,fn=vt.stretchX||[[0,Bt]],pn=vt.stretchY||[[0,Wt]],An=(jr,Zr)=>jr+Zr[1]-Zr[0],Tn=fn.reduce(An,0),kn=pn.reduce(An,0),Vn=Bt-Tn,ir=Wt-kn;let _r=0,rr=Tn,dr=0,br=kn,gr=0,Dr=Vn,Pr=0,Wr=ir;if(vt.content&&at){const jr=vt.content;_r=l1(fn,0,jr[0]),dr=l1(pn,0,jr[1]),rr=l1(fn,jr[0],jr[2]),br=l1(pn,jr[1],jr[3]),gr=jr[0]-_r,Pr=jr[1]-dr,Dr=jr[2]-jr[0]-rr,Wr=jr[3]-jr[1]-br}const oo=(jr,Zr,Kr,eo)=>{const ao=u1(jr.stretch-_r,rr,Yt,nt.left),Fr=c1(jr.fixed-gr,Dr,jr.stretch,Tn),yo=u1(Zr.stretch-dr,br,sn,nt.top),Wo=c1(Zr.fixed-Pr,Wr,Zr.stretch,kn),bo=u1(Kr.stretch-_r,rr,Yt,nt.left),Do=c1(Kr.fixed-gr,Dr,Kr.stretch,Tn),_o=u1(eo.stretch-dr,br,sn,nt.top),Ho=c1(eo.fixed-Pr,Wr,eo.stretch,kn),rs=new pt(ao,yo),us=new pt(bo,yo),Is=new pt(bo,_o),ts=new pt(ao,_o),$a=new pt(Fr/At,Wo/At),ps=new pt(Do/At,Ho/At),ws=_e*Math.PI/180;if(ws){const na=Math.sin(ws),ba=Math.cos(ws),yl=[ba,-na,na,ba];rs._matMult(yl),us._matMult(yl),ts._matMult(yl),Is._matMult(yl)}const Zs=jr.stretch+jr.fixed,_a=Zr.stretch+Zr.fixed;return{tl:rs,tr:us,bl:ts,br:Is,tex:{x:vt.paddedRect.x+1+Zs,y:vt.paddedRect.y+1+_a,w:Kr.stretch+Kr.fixed-Zs,h:eo.stretch+eo.fixed-_a},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$a,pixelOffsetBR:ps,minFontScaleX:Dr/At/Yt,minFontScaleY:Wr/At/sn,isSDF:rt}};if(at&&(vt.stretchX||vt.stretchY)){const jr=mw(fn,Vn,Tn),Zr=mw(pn,ir,kn);for(let Kr=0;Kr<jr.length-1;Kr++){const eo=jr[Kr],ao=jr[Kr+1];for(let Fr=0;Fr<Zr.length-1;Fr++)ct.push(oo(eo,Zr[Fr],ao,Zr[Fr+1]))}}else ct.push(oo({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Bt+1},{fixed:0,stretch:Wt+1}));return ct}function l1(nt,_e,rt){let at=0;for(const ct of nt)at+=Math.max(_e,Math.min(rt,ct[1]))-Math.max(_e,Math.min(rt,ct[0]));return at}function mw(nt,_e,rt){const at=[{fixed:-1,stretch:0}];for(const[ct,vt]of nt){const At=at[at.length-1];at.push({fixed:ct-At.stretch,stretch:At.stretch}),at.push({fixed:ct-At.stretch,stretch:At.stretch+(vt-ct)})}return at.push({fixed:_e+1,stretch:rt}),at}function u1(nt,_e,rt,at){return nt/_e*rt+at}function c1(nt,_e,rt,at){return nt-_e*rt/at}function pA(nt,_e,rt,at){const ct=_e+nt.positionedLines[at].lineOffset;return at===0?rt+ct/2:rt+(ct+(_e+nt.positionedLines[at-1].lineOffset))/2}Y_.loadGlyphRange=function(nt,_e,rt,at,ct){const vt=256*_e,At=vt+255,Bt=at.transformRequest(at.normalizeGlyphsURL(rt).replace("{fontstack}",nt).replace("{range}",`${vt}-${At}`),cs.Glyphs);vs(Bt,(Wt,Yt)=>{if(Wt)ct(Wt);else if(Yt){const sn={},fn=function(pn){return new $_(pn).readFields(xs,{})}(Yt);for(const pn of fn.glyphs)sn[pn.id]=pn;ct(null,{glyphs:sn,ascender:fn.ascender,descender:fn.descender})}})},Y_.TinySDF=class{constructor({fontSize:nt=24,buffer:_e=3,radius:rt=8,cutoff:at=.25,fontFamily:ct="sans-serif",fontWeight:vt="normal",fontStyle:At="normal"}={}){this.buffer=_e,this.cutoff=at,this.radius=rt;const Bt=this.size=nt+4*_e,Wt=this._createCanvas(Bt),Yt=this.ctx=Wt.getContext("2d",{willReadFrequently:!0});Yt.font=`${At} ${vt} ${nt}px ${ct}`,Yt.textBaseline="alphabetic",Yt.textAlign="left",Yt.fillStyle="black",this.gridOuter=new Float64Array(Bt*Bt),this.gridInner=new Float64Array(Bt*Bt),this.f=new Float64Array(Bt),this.z=new Float64Array(Bt+1),this.v=new Uint16Array(Bt)}_createCanvas(nt){const _e=document.createElement("canvas");return _e.width=_e.height=nt,_e}draw(nt){const{width:_e,actualBoundingBoxAscent:rt,actualBoundingBoxDescent:at,actualBoundingBoxLeft:ct,actualBoundingBoxRight:vt}=this.ctx.measureText(nt),At=Math.ceil(rt),Bt=Math.min(this.size-this.buffer,Math.ceil(vt-ct)),Wt=Math.min(this.size-this.buffer,At+Math.ceil(at)),Yt=Bt+2*this.buffer,sn=Wt+2*this.buffer,fn=Math.max(Yt*sn,0),pn=new Uint8ClampedArray(fn),An={data:pn,width:Yt,height:sn,glyphWidth:Bt,glyphHeight:Wt,glyphTop:At,glyphLeft:0,glyphAdvance:_e};if(Bt===0||Wt===0)return An;const{ctx:Tn,buffer:kn,gridInner:Vn,gridOuter:ir}=this;Tn.clearRect(kn,kn,Bt,Wt),Tn.fillText(nt,kn,kn+At);const _r=Tn.getImageData(kn,kn,Bt,Wt);ir.fill(Kv,0,fn),Vn.fill(0,0,fn);for(let rr=0;rr<Wt;rr++)for(let dr=0;dr<Bt;dr++){const br=_r.data[4*(rr*Bt+dr)+3]/255;if(br===0)continue;const gr=(rr+kn)*Yt+dr+kn;if(br===1)ir[gr]=0,Vn[gr]=Kv;else{const Dr=.5-br;ir[gr]=Dr>0?Dr*Dr:0,Vn[gr]=Dr<0?Dr*Dr:0}}GS(ir,0,0,Yt,sn,Yt,this.f,this.v,this.z),GS(Vn,kn,kn,Bt,Wt,Yt,this.f,this.v,this.z);for(let rr=0;rr<fn;rr++){const dr=Math.sqrt(ir[rr])-Math.sqrt(Vn[rr]);pn[rr]=Math.round(255-255*(dr/this.radius+this.cutoff))}return An}};class qS{constructor(_e=[],rt=ZS){if(this.data=_e,this.length=this.data.length,this.compare=rt,this.length>0)for(let at=(this.length>>1)-1;at>=0;at--)this._down(at)}push(_e){this.data.push(_e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const _e=this.data[0],rt=this.data.pop();return this.length--,this.length>0&&(this.data[0]=rt,this._down(0)),_e}peek(){return this.data[0]}_up(_e){const{data:rt,compare:at}=this,ct=rt[_e];for(;_e>0;){const vt=_e-1>>1,At=rt[vt];if(at(ct,At)>=0)break;rt[_e]=At,_e=vt}rt[_e]=ct}_down(_e){const{data:rt,compare:at}=this,ct=this.length>>1,vt=rt[_e];for(;_e<ct;){let At=1+(_e<<1),Bt=rt[At];const Wt=At+1;if(Wt<this.length&&at(rt[Wt],Bt)<0&&(At=Wt,Bt=rt[Wt]),at(Bt,vt)>=0)break;rt[_e]=Bt,_e=At}rt[_e]=vt}}function ZS(nt,_e){return nt<_e?-1:nt>_e?1:0}function mA(nt,_e=1,rt=!1){let at=1/0,ct=1/0,vt=-1/0,At=-1/0;const Bt=nt[0];for(let An=0;An<Bt.length;An++){const Tn=Bt[An];(!An||Tn.x<at)&&(at=Tn.x),(!An||Tn.y<ct)&&(ct=Tn.y),(!An||Tn.x>vt)&&(vt=Tn.x),(!An||Tn.y>At)&&(At=Tn.y)}const Wt=Math.min(vt-at,At-ct);let Yt=Wt/2;const sn=new qS([],yA);if(Wt===0)return new pt(at,ct);for(let An=at;An<vt;An+=Wt)for(let Tn=ct;Tn<At;Tn+=Wt)sn.push(new K_(An+Yt,Tn+Yt,Yt,nt));let fn=function(An){let Tn=0,kn=0,Vn=0;const ir=An[0];for(let _r=0,rr=ir.length,dr=rr-1;_r<rr;dr=_r++){const br=ir[_r],gr=ir[dr],Dr=br.x*gr.y-gr.x*br.y;kn+=(br.x+gr.x)*Dr,Vn+=(br.y+gr.y)*Dr,Tn+=3*Dr}return new K_(kn/Tn,Vn/Tn,0,An)}(nt),pn=sn.length;for(;sn.length;){const An=sn.pop();(An.d>fn.d||!fn.d)&&(fn=An,rt&&console.log("found best %d after %d probes",Math.round(1e4*An.d)/1e4,pn)),An.max-fn.d<=_e||(Yt=An.h/2,sn.push(new K_(An.p.x-Yt,An.p.y-Yt,Yt,nt)),sn.push(new K_(An.p.x+Yt,An.p.y-Yt,Yt,nt)),sn.push(new K_(An.p.x-Yt,An.p.y+Yt,Yt,nt)),sn.push(new K_(An.p.x+Yt,An.p.y+Yt,Yt,nt)),pn+=4)}return rt&&(console.log(`num probes: ${pn}`),console.log(`best distance: ${fn.d}`)),fn.p}function yA(nt,_e){return _e.max-nt.max}function K_(nt,_e,rt,at){this.p=new pt(nt,_e),this.h=rt,this.d=function(ct,vt){let At=!1,Bt=1/0;for(let Wt=0;Wt<vt.length;Wt++){const Yt=vt[Wt];for(let sn=0,fn=Yt.length,pn=fn-1;sn<fn;pn=sn++){const An=Yt[sn],Tn=Yt[pn];An.y>ct.y!=Tn.y>ct.y&&ct.x<(Tn.x-An.x)*(ct.y-An.y)/(Tn.y-An.y)+An.x&&(At=!At),Bt=Math.min(Bt,Gw(ct,An,Tn))}}return(At?1:-1)*Math.sqrt(Bt)}(this.p,at),this.max=this.d+this.h*Math.SQRT2}const yw=Number.POSITIVE_INFINITY,X_=Math.sqrt(2);function YS(nt,_e){return _e[1]!==yw?function(rt,at,ct){let vt=0,At=0;switch(at=Math.abs(at),ct=Math.abs(ct),rt){case"top-right":case"top-left":case"top":At=ct-7;break;case"bottom-right":case"bottom-left":case"bottom":At=7-ct}switch(rt){case"top-right":case"bottom-right":case"right":vt=-at;break;case"top-left":case"bottom-left":case"left":vt=at}return[vt,At]}(nt,_e[0],_e[1]):function(rt,at){let ct=0,vt=0;at<0&&(at=0);const At=at/X_;switch(rt){case"top-right":case"top-left":vt=At-7;break;case"bottom-right":case"bottom-left":vt=7-At;break;case"bottom":vt=7-at;break;case"top":vt=at-7}switch(rt){case"top-right":case"bottom-right":ct=-At;break;case"top-left":case"bottom-left":ct=At;break;case"left":ct=at;break;case"right":ct=-at}return[ct,vt]}(nt,_e[0])}function _A(nt,_e,rt,at,ct,vt,At,Bt,Wt,Yt){nt.createArrays(),nt.tilePixelRatio=Go/(512*nt.overscaling),nt.compareText={},nt.iconsNeedLinear=!1;const sn=nt.layers[0].layout,fn=nt.layers[0]._unevaluatedLayout._values,pn={};if(nt.textSizeData.kind==="composite"){const{minZoom:kn,maxZoom:Vn}=nt.textSizeData;pn.compositeTextSizes=[fn["text-size"].possiblyEvaluate(new tr(kn),Bt),fn["text-size"].possiblyEvaluate(new tr(Vn),Bt)]}if(nt.iconSizeData.kind==="composite"){const{minZoom:kn,maxZoom:Vn}=nt.iconSizeData;pn.compositeIconSizes=[fn["icon-size"].possiblyEvaluate(new tr(kn),Bt),fn["icon-size"].possiblyEvaluate(new tr(Vn),Bt)]}pn.layoutTextSize=fn["text-size"].possiblyEvaluate(new tr(Wt+1),Bt),pn.layoutIconSize=fn["icon-size"].possiblyEvaluate(new tr(Wt+1),Bt),pn.textMaxSize=fn["text-size"].possiblyEvaluate(new tr(18),Bt);const An=sn.get("text-rotation-alignment")==="map"&&sn.get("symbol-placement")!=="point",Tn=sn.get("text-size");for(const kn of nt.features){const Vn=sn.get("text-font").evaluate(kn,{},Bt).join(","),ir=Tn.evaluate(kn,{},Bt),_r=pn.layoutTextSize.evaluate(kn,{},Bt),rr=(pn.layoutIconSize.evaluate(kn,{},Bt),{horizontal:{},vertical:void 0}),dr=kn.text;let br,gr=[0,0];if(dr){const Wr=dr.toString(),oo=sn.get("text-letter-spacing").evaluate(kn,{},Bt)*lu,jr=sn.get("text-line-height").evaluate(kn,{},Bt)*lu,Zr=bt(Wr)?oo:0,Kr=sn.get("text-anchor").evaluate(kn,{},Bt),eo=sn.get("text-variable-anchor");if(!eo){const bo=sn.get("text-radial-offset").evaluate(kn,{},Bt);gr=bo?YS(Kr,[bo*lu,yw]):sn.get("text-offset").evaluate(kn,{},Bt).map(Do=>Do*lu)}let ao=An?"center":sn.get("text-justify").evaluate(kn,{},Bt);const Fr=sn.get("symbol-placement")==="point",yo=Fr?sn.get("text-max-width").evaluate(kn,{},Bt)*lu:1/0,Wo=bo=>{nt.allowVerticalPlacement&&lt(Wr)&&(rr.vertical=gw(dr,_e,rt,ct,Vn,yo,jr,Kr,bo,Zr,gr,yp.vertical,!0,_r,ir))};if(!An&&eo){const bo=ao==="auto"?eo.map(_o=>_w(_o)):[ao];let Do=!1;for(let _o=0;_o<bo.length;_o++){const Ho=bo[_o];if(!rr.horizontal[Ho])if(Do)rr.horizontal[Ho]=rr.horizontal[0];else{const rs=gw(dr,_e,rt,ct,Vn,yo,jr,"center",Ho,Zr,gr,yp.horizontal,!1,_r,ir);rs&&(rr.horizontal[Ho]=rs,Do=rs.positionedLines.length===1)}}Wo("left")}else{if(ao==="auto"&&(ao=_w(Kr)),Fr||sn.get("text-writing-mode").indexOf("horizontal")>=0||!lt(Wr)){const bo=gw(dr,_e,rt,ct,Vn,yo,jr,Kr,ao,Zr,gr,yp.horizontal,!1,_r,ir);bo&&(rr.horizontal[ao]=bo)}Wo(Fr?"left":ao)}}let Dr=!1;if(kn.icon&&kn.icon.name){const Wr=at[kn.icon.name];Wr&&(br=fA(ct[kn.icon.name],sn.get("icon-offset").evaluate(kn,{},Bt),sn.get("icon-anchor").evaluate(kn,{},Bt)),Dr=Wr.sdf,nt.sdfIcons===void 0?nt.sdfIcons=Wr.sdf:nt.sdfIcons!==Wr.sdf&&hn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Wr.pixelRatio!==nt.pixelRatio||sn.get("icon-rotate").constantOr(1)!==0)&&(nt.iconsNeedLinear=!0))}const Pr=bw(rr.horizontal)||rr.vertical;nt.iconsInText||(nt.iconsInText=!!Pr&&Pr.iconsInText),(Pr||br)&&vA(nt,kn,rr,br,at,pn,_r,0,gr,Dr,At,Bt,Yt)}vt&&nt.generateCollisionDebugBuffers(Wt,nt.collisionBoxArray)}function _w(nt){switch(nt){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function vA(nt,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn){let An=vt.textMaxSize.evaluate(_e,{},fn);An===void 0&&(An=At);const Tn=nt.layers[0].layout,kn=Tn.get("icon-offset").evaluate(_e,{},fn),Vn=bw(rt.horizontal)||rt.vertical,ir=pn.name==="globe",_r=At/24,rr=nt.tilePixelRatio*An/24,dr=(Zr=nt.overscaling,nt.zoom>18&&Zr>2&&(Zr>>=1),Math.max(Go/(512*Zr),1)*Tn.get("symbol-spacing")),br=Tn.get("text-padding")*nt.tilePixelRatio,gr=Tn.get("icon-padding")*nt.tilePixelRatio,Dr=wt(Tn.get("text-max-angle")),Pr=Tn.get("text-rotation-alignment")==="map"&&Tn.get("symbol-placement")!=="point",Wr=Tn.get("icon-rotation-alignment")==="map"&&Tn.get("symbol-placement")!=="point",oo=Tn.get("symbol-placement"),jr=dr/2;var Zr;const Kr=Tn.get("icon-text-fit");let eo;at&&Kr!=="none"&&(nt.allowVerticalPlacement&&rt.vertical&&(eo=zS(at,rt.vertical,Kr,Tn.get("icon-text-fit-padding"),kn,_r)),Vn&&(at=zS(at,Vn,Kr,Tn.get("icon-text-fit-padding"),kn,_r)));const ao=(Fr,yo,Wo)=>{if(yo.x<0||yo.x>=Go||yo.y<0||yo.y>=Go)return;let bo=null;if(ir){const{x:Do,y:_o,z:Ho}=pn.projectTilePoint(yo.x,yo.y,Wo);bo={anchor:new Wm(Do,_o,Ho,0,void 0),up:pn.upVector(Wo,yo.x,yo.y)}}(function(Do,_o,Ho,rs,us,Is,ts,$a,ps,ws,Zs,_a,na,ba,yl,Ol,vu,Hs,Kl,$l,ks,Al,eu,Ys,zl){const Nu=Do.addToLineVertexArray(_o,rs);let bu,wu,ep,Su,Qy,A1,kw,Dw=0,oE=0,sE=0,aE=0,VA=-1,WA=-1;const Ay={};let lE=I_.exports("");const r0=Ho?Ho.anchor:_o;let GA=0,HA=0;if(ps._unevaluatedLayout.getValue("text-radial-offset")===void 0?[GA,HA]=ps.layout.get("text-offset").evaluate(ks,{},zl).map(Lp=>Lp*lu):(GA=ps.layout.get("text-radial-offset").evaluate(ks,{},zl)*lu,HA=yw),Do.allowVerticalPlacement&&us.vertical){const Lp=us.vertical;if(yl)A1=ww(Lp),$a&&(kw=ww($a));else{const Bp=ps.layout.get("text-rotate").evaluate(ks,{},zl)+90;ep=f1(ws,r0,_o,Zs,_a,na,Lp,ba,Bp,Ol),$a&&(Su=f1(ws,r0,_o,Zs,_a,na,$a,Hs,Bp))}}if(Is){const Lp=ps.layout.get("icon-rotate").evaluate(ks,{},zl),Bp=ps.layout.get("icon-text-fit")!=="none",Lw=$S(Is,Lp,eu,Bp),qA=$a?$S($a,Lp,eu,Bp):void 0;wu=f1(ws,r0,_o,Zs,_a,na,Is,Hs,Lp),Dw=4*Lw.length;const uE=Do.iconSizeData;let i0=null;uE.kind==="source"?(i0=[wm*ps.layout.get("icon-size").evaluate(ks,{},zl)],i0[0]>by&&hn(`${Do.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):uE.kind==="composite"&&(i0=[wm*Al.compositeIconSizes[0].evaluate(ks,{},zl),wm*Al.compositeIconSizes[1].evaluate(ks,{},zl)],(i0[0]>by||i0[1]>by)&&hn(`${Do.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Do.addSymbols(Do.icon,Lw,i0,$l,Kl,ks,!1,Ho,_o,Nu.lineStartIndex,Nu.lineLength,-1,Ys,zl),VA=Do.icon.placedSymbolArray.length-1,qA&&(oE=4*qA.length,Do.addSymbols(Do.icon,qA,i0,$l,Kl,ks,yp.vertical,Ho,_o,Nu.lineStartIndex,Nu.lineLength,-1,Ys,zl),WA=Do.icon.placedSymbolArray.length-1)}for(const Lp in us.horizontal){const Bp=us.horizontal[Lp];bu||(lE=I_.exports(Bp.text),yl?Qy=ww(Bp):bu=f1(ws,r0,_o,Zs,_a,na,Bp,ba,ps.layout.get("text-rotate").evaluate(ks,{},zl),Ol));const Lw=Bp.positionedLines.length===1;if(sE+=vw(Do,Ho,_o,Bp,ts,ps,yl,ks,Ol,Nu,us.vertical?yp.horizontal:yp.horizontalOnly,Lw?Object.keys(us.horizontal):[Lp],Ay,VA,Al,Ys,zl),Lw)break}us.vertical&&(aE+=vw(Do,Ho,_o,us.vertical,ts,ps,yl,ks,Ol,Nu,yp.vertical,["vertical"],Ay,WA,Al,Ys,zl));let ov=-1;const $A=(Lp,Bp)=>Lp?Math.max(Lp,Bp):Bp;ov=$A(Qy,ov),ov=$A(A1,ov),ov=$A(kw,ov);const gE=ov>-1?1:0;Do.glyphOffsetArray.length>=Sy.MAX_GLYPHS&&hn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ks.sortKey!==void 0&&Do.addToSortKeyRanges(Do.symbolInstances.length,ks.sortKey),Do.symbolInstances.emplaceBack(r0.x,r0.y,r0.z,_o.x,_o.y,Ay.right>=0?Ay.right:-1,Ay.center>=0?Ay.center:-1,Ay.left>=0?Ay.left:-1,Ay.vertical>=0?Ay.vertical:-1,VA,WA,lE,bu!==void 0?bu:Do.collisionBoxArray.length,bu!==void 0?bu+1:Do.collisionBoxArray.length,ep!==void 0?ep:Do.collisionBoxArray.length,ep!==void 0?ep+1:Do.collisionBoxArray.length,wu!==void 0?wu:Do.collisionBoxArray.length,wu!==void 0?wu+1:Do.collisionBoxArray.length,Su||Do.collisionBoxArray.length,Su?Su+1:Do.collisionBoxArray.length,Zs,sE,aE,Dw,oE,gE,0,GA,HA,ov)})(nt,yo,bo,Fr,rt,at,ct,eo,nt.layers[0],nt.collisionBoxArray,_e.index,_e.sourceLayerIndex,nt.index,br,Pr,Wt,0,gr,Wr,kn,_e,vt,Yt,sn,fn)};if(oo==="line")for(const Fr of Bu(_e.geometry,0,0,Go,Go)){const yo=gA(Fr,dr,Dr,rt.vertical||Vn,at,24,rr,nt.overscaling,Go);for(const Wo of yo){const bo=Vn;bo&&bA(nt,bo.text,jr,Wo)||ao(Fr,Wo,fn)}}else if(oo==="line-center"){for(const Fr of _e.geometry)if(Fr.length>1){const yo=dA(Fr,Dr,rt.vertical||Vn,at,24,rr);yo&&ao(Fr,yo,fn)}}else if(_e.type==="Polygon")for(const Fr of nw(_e.geometry,0)){const yo=mA(Fr,16);ao(Fr[0],new Wm(yo.x,yo.y,0,0,void 0),fn)}else if(_e.type==="LineString")for(const Fr of _e.geometry)ao(Fr,new Wm(Fr[0].x,Fr[0].y,0,0,void 0),fn);else if(_e.type==="Point")for(const Fr of _e.geometry)for(const yo of Fr)ao([yo],new Wm(yo.x,yo.y,0,0,void 0),fn)}const by=32640;function vw(nt,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn,kn,Vn){const ir=function(dr,br,gr,Dr,Pr,Wr,oo,jr){const Zr=[];if(br.positionedLines.length===0)return Zr;const Kr=Dr.layout.get("text-rotate").evaluate(Wr,{})*Math.PI/180,eo=function(bo){const Do=bo[0],_o=bo[1],Ho=Do*_o;return Ho>0?[Do,-_o]:Ho<0?[-Do,_o]:Do===0?[_o,Do]:[_o,-Do]}(gr);let ao=Math.abs(br.top-br.bottom);for(const bo of br.positionedLines)ao-=bo.lineOffset;const Fr=br.positionedLines.length,yo=ao/Fr;let Wo=br.top-gr[1];for(let bo=0;bo<Fr;++bo){const Do=br.positionedLines[bo];Wo=pA(br,yo,Wo,bo);for(const _o of Do.positionedGlyphs){if(!_o.rect)continue;const Ho=_o.rect||{};let rs=4,us=!0,Is=1,ts=0;if(_o.imageName){const Ys=oo[_o.imageName];if(!Ys)continue;if(Ys.sdf){hn("SDF images are not supported in formatted text and will be ignored.");continue}us=!1,Is=Ys.pixelRatio,rs=1/Is}const $a=(Pr||jr)&&_o.vertical,ps=_o.metrics.advance*_o.scale/2,ws=_o.metrics,Zs=_o.rect;if(Zs===null)continue;jr&&br.verticalizable&&(ts=_o.imageName?ps-_o.metrics.width*_o.scale/2:0);const _a=Pr?[_o.x+ps,_o.y]:[0,0];let na=[0,0],ba=[0,0],yl=!1;Pr||($a?(ba=[_o.x+ps+eo[0],_o.y+eo[1]-ts],yl=!0):na=[_o.x+ps+gr[0],_o.y+gr[1]-ts]);const Ol=Zs.w*_o.scale/(Is*(_o.localGlyph?2:1)),vu=Zs.h*_o.scale/(Is*(_o.localGlyph?2:1));let Hs,Kl,$l,ks;if($a){const Ys=_o.y-Wo,zl=new pt(-ps,ps-Ys),Nu=-Math.PI/2,bu=new pt(...ba);Hs=new pt(-ps+na[0],na[1]),Hs._rotateAround(Nu,zl)._add(bu),Hs.x+=-Ys+ps,Hs.y-=(ws.left-rs)*_o.scale;const wu=_o.imageName?ws.advance*_o.scale:lu*_o.scale,ep=String.fromCharCode(_o.glyph);Il(ep)?Hs.x+=(1-rs)*_o.scale:Nl(ep)?Hs.x+=wu-ws.height*_o.scale+(-rs-1)*_o.scale:Hs.x+=_o.imageName||ws.width+2*rs===Zs.w&&ws.height+2*rs===Zs.h?(wu-vu)/2:(wu-(ws.height+2*rs)*_o.scale)/2,Kl=new pt(Hs.x,Hs.y-Ol),$l=new pt(Hs.x+vu,Hs.y),ks=new pt(Hs.x+vu,Hs.y-Ol)}else{const Ys=(ws.left-rs)*_o.scale-ps+na[0],zl=(-ws.top-rs)*_o.scale+na[1],Nu=Ys+Ol,bu=zl+vu;Hs=new pt(Ys,zl),Kl=new pt(Nu,zl),$l=new pt(Ys,bu),ks=new pt(Nu,bu)}if(Kr){let Ys;Ys=Pr?new pt(0,0):yl?new pt(eo[0],eo[1]):new pt(gr[0],gr[1]),Hs._rotateAround(Kr,Ys),Kl._rotateAround(Kr,Ys),$l._rotateAround(Kr,Ys),ks._rotateAround(Kr,Ys)}const Al=new pt(0,0),eu=new pt(0,0);Zr.push({tl:Hs,tr:Kl,bl:$l,br:ks,tex:Ho,writingMode:br.writingMode,glyphOffset:_a,sectionIndex:_o.sectionIndex,isSDF:us,pixelOffsetTL:Al,pixelOffsetBR:eu,minFontScaleX:0,minFontScaleY:0})}}return Zr}(0,at,Wt,vt,At,Bt,ct,nt.allowVerticalPlacement),_r=nt.textSizeData;let rr=null;_r.kind==="source"?(rr=[wm*vt.layout.get("text-size").evaluate(Bt,{},Vn)],rr[0]>by&&hn(`${nt.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):_r.kind==="composite"&&(rr=[wm*Tn.compositeTextSizes[0].evaluate(Bt,{},Vn),wm*Tn.compositeTextSizes[1].evaluate(Bt,{},Vn)],(rr[0]>by||rr[1]>by)&&hn(`${nt.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),nt.addSymbols(nt.text,ir,rr,Wt,At,Bt,sn,_e,rt,Yt.lineStartIndex,Yt.lineLength,An,kn,Vn);for(const dr of fn)pn[dr]=nt.text.placedSymbolArray.length-1;return 4*ir.length}function bw(nt){for(const _e in nt)return nt[_e];return null}function f1(nt,_e,rt,at,ct,vt,At,Bt,Wt,Yt){let sn=At.top,fn=At.bottom,pn=At.left,An=At.right;const Tn=At.collisionPadding;if(Tn&&(pn-=Tn[0],sn-=Tn[1],An+=Tn[2],fn+=Tn[3]),Wt){const kn=new pt(pn,sn),Vn=new pt(An,sn),ir=new pt(pn,fn),_r=new pt(An,fn),rr=wt(Wt);let dr=new pt(0,0);Yt&&(dr=new pt(Yt[0],Yt[1])),kn._rotateAround(rr,dr),Vn._rotateAround(rr,dr),ir._rotateAround(rr,dr),_r._rotateAround(rr,dr),pn=Math.min(kn.x,Vn.x,ir.x,_r.x),An=Math.max(kn.x,Vn.x,ir.x,_r.x),sn=Math.min(kn.y,Vn.y,ir.y,_r.y),fn=Math.max(kn.y,Vn.y,ir.y,_r.y)}return nt.emplaceBack(_e.x,_e.y,_e.z,rt.x,rt.y,pn,sn,An,fn,Bt,at,ct,vt),nt.length-1}function ww(nt){nt.collisionPadding&&(nt.top-=nt.collisionPadding[1],nt.bottom+=nt.collisionPadding[3]);const _e=nt.bottom-nt.top;return _e>0?Math.max(10,_e):null}function bA(nt,_e,rt,at){const ct=nt.compareText;if(_e in ct){const vt=ct[_e];for(let At=vt.length-1;At>=0;At--)if(at.dist(vt[At])<rt)return!0}else ct[_e]=[];return ct[_e].push(at),!1}const wA=co([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:KS}=wA,XS=co([{name:"a_pos_3",components:3,type:"Int16"}]);var Xv=co([{name:"a_pos",type:"Int16",components:2}]);const Gm=Go/Math.PI/2,Sw=2*dp(1,0)*Gm*Math.PI,J_=64,Q_=[J_,32,16],em=-Gm,tm=Gm,SA=[new Ou([em,em,em],[tm,tm,tm]),new Ou([em,em,em],[0,0,tm]),new Ou([0,em,em],[tm,0,tm]),new Ou([em,0,em],[0,tm,tm]),new Ou([0,0,em],[tm,tm,tm])];function JS(nt,_e,rt,at=!0){const ct=pp([],nt._camera.position,nt.worldSize),vt=[_e,rt,1,1];my(vt,vt,nt.pixelMatrixInverse),Qw(vt,vt,1/vt[3]);const At=Iu([],Pp([],vt,ct)),Bt=nt.globeMatrix,Wt=[Bt[12],Bt[13],Bt[14]],Yt=Pp([],Wt,ct),sn=Qp(Yt),fn=Iu([],Yt),pn=nt.worldSize/(2*Math.PI),An=Mp(fn,At),Tn=Math.asin(pn/sn);if(Tn<Math.acos(An)){if(!at)return null;const oo=[],jr=[];pp(oo,At,sn/An),Iu(jr,Pp(jr,oo,Yt)),Iu(At,bm(At,Yt,pp(At,jr,Math.tan(Tn)*sn)))}const kn=[];new Y1(ct,At).closestPointOnSphere(Wt,pn,kn);const Vn=Iu([],Gr(Bt,0)),ir=Iu([],Gr(Bt,1)),_r=Iu([],Gr(Bt,2)),rr=Mp(Vn,kn),dr=Mp(ir,kn),br=Mp(_r,kn),gr=xt(Math.asin(-dr/pn));let Dr=xt(Math.atan2(rr,br));Dr=nt.center.lng+function(oo,jr){const Zr=(jr-oo+180)%360-180;return Zr<-180?Zr+360:Zr}(nt.center.lng,Dr);const Pr=su(Dr),Wr=Gt(Kp(gr),0,1);return new dy(Pr,Wr)}class xA{constructor(_e,rt,at){this.a=Pp([],_e,at),this.b=Pp([],rt,at),this.center=at;const ct=Iu([],this.a),vt=Iu([],this.b);this.angle=Math.acos(Mp(ct,vt))}}function xw(nt,_e){if(nt.angle===0)return null;let rt;return rt=nt.a[_e]===0?1/nt.angle*.5*Math.PI:1/nt.angle*Math.atan(nt.b[_e]/nt.a[_e]/Math.sin(nt.angle)-1/Math.tan(nt.angle)),rt<0||rt>1?null:function(at,ct,vt,At){const Bt=Math.sin(vt);return at*(Math.sin((1-At)*vt)/Bt)+ct*(Math.sin(At*vt)/Bt)}(nt.a[_e],nt.b[_e],nt.angle,Gt(rt,0,1))+nt.center[_e]}function Em(nt){if(nt.z<=1)return SA[nt.z+2*nt.y+nt.x];const _e=Aw(d1(nt));return Ou.fromPoints(_e)}function Yy(nt,_e,rt){return pp(nt,nt,1-rt),Uv(nt,nt,_e,rt)}function QS(nt,_e){const rt=nv(_e.zoom);if(rt===0)return Em(nt);const at=d1(nt),ct=Aw(at),vt=su(at.getWest())*_e.worldSize,At=su(at.getEast())*_e.worldSize,Bt=Kp(at.getNorth())*_e.worldSize,Wt=Kp(at.getSouth())*_e.worldSize,Yt=[vt,Bt,0],sn=[At,Bt,0],fn=[vt,Wt,0],pn=[At,Wt,0],An=F0([],_e.globeMatrix);return Fl(Yt,Yt,An),Fl(sn,sn,An),Fl(fn,fn,An),Fl(pn,pn,An),ct[0]=Yy(ct[0],fn,rt),ct[1]=Yy(ct[1],pn,rt),ct[2]=Yy(ct[2],sn,rt),ct[3]=Yy(ct[3],Yt,rt),Ou.fromPoints(ct)}function ex(nt,_e,rt){for(const at of nt)Fl(at,at,_e),pp(at,at,rt)}function AA(nt,_e,rt){const at=_e/nt.worldSize,ct=nt.globeMatrix;if(rt.z<=1){const Pr=Em(rt).getCorners();return ex(Pr,ct,at),Ou.fromPoints(Pr)}const vt=d1(rt),At=Aw(vt);ex(At,ct,at);const Bt=Number.MAX_VALUE,Wt=[-Bt,-Bt,-Bt],Yt=[Bt,Bt,Bt];if(vt.contains(nt.center)){for(const oo of At)Fv(Yt,Yt,oo),Nv(Wt,Wt,oo);Wt[2]=0;const Pr=nt.point,Wr=[Pr.x*at,Pr.y*at,0];return Fv(Yt,Yt,Wr),Nv(Wt,Wt,Wr),new Ou(Yt,Wt)}const sn=[ct[12]*at,ct[13]*at,ct[14]*at],fn=vt.getCenter(),pn=Gt(nt.center.lat,-85.051129,ym),An=Gt(fn.lat,-85.051129,ym),Tn=su(nt.center.lng),kn=Kp(pn);let Vn=Tn-su(fn.lng);const ir=kn-Kp(An);Vn>.5?Vn-=1:Vn<-.5&&(Vn+=1);let _r=0;Math.abs(Vn)>Math.abs(ir)?_r=Vn>=0?1:3:(_r=ir>=0?0:2,Uv(sn,sn,[ct[4]*at,ct[5]*at,ct[6]*at],-Math.sin(wt(ir>=0?vt.getSouth():vt.getNorth()))*Gm));const rr=At[_r],dr=At[(_r+1)%4],br=new xA(rr,dr,sn),gr=[xw(br,0)||rr[0],xw(br,1)||rr[1],xw(br,2)||rr[2]],Dr=nv(nt.zoom);if(Dr>0){const Pr=function({x:oo,y:jr,z:Zr},Kr,eo,ao,Fr){const yo=1/(1<<Zr);let Wo=oo*yo,bo=Wo+yo,Do=jr*yo,_o=Do+yo,Ho=0;const rs=(Wo+bo)/2-ao;return rs>.5?Ho=-1:rs<-.5&&(Ho=1),Wo=((Wo+Ho)*Kr-(ao*=Kr))*eo+ao,bo=((bo+Ho)*Kr-ao)*eo+ao,Do=(Do*Kr-(Fr*=Kr))*eo+Fr,_o=(_o*Kr-Fr)*eo+Fr,[[Wo,_o,0],[bo,_o,0],[bo,Do,0],[Wo,Do,0]]}(rt,_e,nt._pixelsPerMercatorPixel,Tn,kn);for(let oo=0;oo<At.length;oo++)Yy(At[oo],Pr[oo],Dr);const Wr=bm([],Pr[_r],Pr[(_r+1)%4]);pp(Wr,Wr,.5),Yy(gr,Wr,Dr)}for(const Pr of At)Fv(Yt,Yt,Pr),Nv(Wt,Wt,Pr);return Yt[2]=Math.min(rr[2],dr[2]),Fv(Yt,Yt,gr),Nv(Wt,Wt,gr),new Ou(Yt,Wt)}function d1({x:nt,y:_e,z:rt}){const at=1/(1<<rt),ct=new Ts(gp(nt*at),Jl((_e+1)*at)),vt=new Ts(gp((nt+1)*at),Jl(_e*at));return new Yp(ct,vt)}function Aw(nt){const _e=wt(nt.getNorth()),rt=wt(nt.getSouth()),at=Math.cos(_e),ct=Math.cos(rt),vt=Math.sin(_e),At=Math.sin(rt),Bt=nt.getWest(),Wt=nt.getEast();return[ev(ct,At,Bt),ev(ct,At,Wt),ev(at,vt,Wt),ev(at,vt,Bt)]}function ev(nt,_e,rt,at=Gm){return rt=wt(rt),[nt*Math.sin(rt)*at,-_e*at,nt*Math.cos(rt)*at]}function Ky(nt,_e,rt){return ev(Math.cos(wt(nt)),Math.sin(wt(nt)),_e,rt)}function tv(nt,_e,rt,at){const ct=1<<rt.z,vt=(nt/Go+rt.x)/ct;return Ky(Jl((_e/Go+rt.y)/ct),gp(vt),at)}function Jv({min:nt,max:_e}){return 16383/Math.max(_e[0]-nt[0],_e[1]-nt[1],_e[2]-nt[2])}const tx=new Float64Array(16);function Qv(nt){const _e=Jv(nt),rt=H1(tx,[_e,_e,_e]);return Gy(rt,rt,((at=[])[0]=-(ct=nt.min)[0],at[1]=-ct[1],at[2]=-ct[2],at));var at,ct}function Ew(nt){const _e=(at=nt.min,(rt=tx)[0]=1,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=0,rt[5]=1,rt[6]=0,rt[7]=0,rt[8]=0,rt[9]=0,rt[10]=1,rt[11]=0,rt[12]=at[0],rt[13]=at[1],rt[14]=at[2],rt[15]=1,rt);var rt,at;const ct=1/Jv(nt);return py(_e,_e,[ct,ct,ct])}function g1(nt,_e,rt,at,ct){const vt=function(Wt){const Yt=Go/(2*Math.PI);return Wt/(2*Math.PI)/Yt}(rt),At=[nt,_e,-rt/(2*Math.PI)],Bt=Xp(new Float64Array(16));return Gy(Bt,Bt,At),py(Bt,Bt,[vt,vt,vt]),Hy(Bt,Bt,wt(-ct)),L_(Bt,Bt,wt(-at)),Bt}function nv(nt){return Ut(5,6,nt)}function nx(nt,_e){const rt=Ky(_e.lat,_e.lng),at=function(Tn){const kn=Ky(Tn._center.lat,Tn._center.lng);let Vn=Z1([],B_(0,1,0),kn);const ir=$1([],-Tn.angle,kn);Vn=Fl(Vn,Vn,ir),$1(ir,-Tn._pitch,Vn);const _r=Iu([],kn);return pp(_r,_r,Tn.cameraToCenterDistance/Tn.pixelsPerMeter*Sw),Fl(_r,_r,ir),bm([],kn,_r)}(nt);return At=(ct=q1([],at,rt))[0],Bt=ct[1],Wt=ct[2],Yt=(vt=rt)[0],sn=vt[1],fn=vt[2],An=(pn=Math.sqrt(At*At+Bt*Bt+Wt*Wt)*Math.sqrt(Yt*Yt+sn*sn+fn*fn))&&Mp(ct,vt)/pn,Math.acos(Math.min(Math.max(An,-1),1));var ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An}const rx=wt(85),_d=Math.cos(rx),Tw=Math.sin(rx);function ix(nt,_e){const rt=nt.fovAboveCenter,at=nt.elevation?nt.elevation.getMinElevationBelowMSL()*_e:0,ct=(nt._camera.position[2]*nt.worldSize-at)/Math.cos(nt._pitch),vt=Math.sin(rt)*ct/Math.sin(Math.max(Math.PI/2-nt._pitch-rt,.01)),At=Math.sin(nt._pitch)*vt+ct;return Math.min(1.01*At,ct*(1/nt._horizonShift))}function Xy(nt,_e){if(!_e.isReprojectedInTileSpace)return{scale:1<<nt.z,x:nt.x,y:nt.y,x2:nt.x+1,y2:nt.y+1,projection:_e};const rt=Math.pow(2,-nt.z),at=nt.x*rt,ct=(nt.x+1)*rt,vt=nt.y*rt,At=(nt.y+1)*rt,Bt=gp(at),Wt=gp(ct),Yt=Jl(vt),sn=Jl(At),fn=_e.project(Bt,Yt),pn=_e.project(Wt,Yt),An=_e.project(Wt,sn),Tn=_e.project(Bt,sn);let kn=Math.min(fn.x,pn.x,An.x,Tn.x),Vn=Math.min(fn.y,pn.y,An.y,Tn.y),ir=Math.max(fn.x,pn.x,An.x,Tn.x),_r=Math.max(fn.y,pn.y,An.y,Tn.y);const rr=rt/16;function dr(gr,Dr,Pr,Wr,oo,jr){const Zr=(Pr+oo)/2,Kr=(Wr+jr)/2,eo=_e.project(gp(Zr),Jl(Kr)),ao=Math.max(0,kn-eo.x,Vn-eo.y,eo.x-ir,eo.y-_r);kn=Math.min(kn,eo.x),ir=Math.max(ir,eo.x),Vn=Math.min(Vn,eo.y),_r=Math.max(_r,eo.y),ao>rr&&(dr(gr,eo,Pr,Wr,Zr,Kr),dr(eo,Dr,Zr,Kr,oo,jr))}dr(fn,pn,at,vt,ct,vt),dr(pn,An,ct,vt,ct,At),dr(An,Tn,ct,At,at,At),dr(Tn,fn,at,At,at,vt),kn-=rr,Vn-=rr,ir+=rr,_r+=rr;const br=1/Math.max(ir-kn,_r-Vn);return{scale:br,x:kn*br,y:Vn*br,x2:ir*br,y2:_r*br,projection:_e}}const EA=Xp(new Float32Array(16));class wy{constructor(_e){this.spec=_e,this.name=_e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(_e,rt){return{x:0,y:0,z:0}}unproject(_e,rt){return new Ts(0,0)}projectTilePoint(_e,rt,at){return{x:_e,y:rt,z:0}}locationPoint(_e,rt,at=!0){return _e._coordinatePoint(_e.locationCoordinate(rt),at)}pixelsPerMeter(_e,rt){return dp(1,_e)*rt}pixelSpaceConversion(_e,rt,at){return 1}farthestPixelDistance(_e){return ix(_e,_e.pixelsPerMeter)}pointCoordinate(_e,rt,at,ct){const vt=_e.horizonLineFromTop(!1),At=new pt(rt,Math.max(vt,at));return _e.rayIntersectionCoordinate(_e.pointRayIntersection(At,ct))}pointCoordinate3D(_e,rt,at){const ct=new pt(rt,at);if(_e.elevation)return _e.elevation.pointCoordinate(ct);{const vt=this.pointCoordinate(_e,ct.x,ct.y,0);return[vt.x,vt.y,vt.z]}}isPointAboveHorizon(_e,rt){if(_e.elevation)return!this.pointCoordinate3D(_e,rt.x,rt.y);const at=_e.horizonLineFromTop();return rt.y<at}createInversionMatrix(_e,rt){return EA}createTileMatrix(_e,rt,at){let ct,vt,At;const Bt=at.canonical,Wt=Xp(new Float64Array(16));if(this.isReprojectedInTileSpace){const Yt=Xy(Bt,this);ct=1,vt=Yt.x+at.wrap*Yt.scale,At=Yt.y,py(Wt,Wt,[ct/Yt.scale,ct/Yt.scale,_e.pixelsPerMeter/rt])}else ct=rt/_e.zoomScale(Bt.z),vt=(Bt.x+Math.pow(2,Bt.z)*at.wrap)*ct,At=Bt.y*ct;return Gy(Wt,Wt,[vt,At,0]),py(Wt,Wt,[ct/Go,ct/Go,1]),Wt}upVector(_e,rt,at){return[0,0,1]}upVectorScale(_e,rt,at){return{metersToTile:1}}}class Cw extends wy{constructor(_e){super(_e),this.range=[4,7],this.center=_e.center||[-96,37.5];const[rt,at]=this.parallels=_e.parallels||[29.5,45.5],ct=Math.sin(wt(rt));this.n=(ct+Math.sin(wt(at)))/2,this.c=1+ct*(2*this.n-ct),this.r0=Math.sqrt(this.c)/this.n}project(_e,rt){const{n:at,c:ct,r0:vt}=this,At=wt(_e-this.center[0]),Bt=wt(rt),Wt=Math.sqrt(ct-2*at*Math.sin(Bt))/at;return{x:Wt*Math.sin(At*at),y:Wt*Math.cos(At*at)-vt,z:0}}unproject(_e,rt){const{n:at,c:ct,r0:vt}=this,At=vt+rt;let Bt=Math.atan2(_e,Math.abs(At))*Math.sign(At);At*at<0&&(Bt-=Math.PI*Math.sign(_e)*Math.sign(At));const Wt=wt(this.center[0])*at;Bt=Ht(Bt,-Math.PI-Wt,Math.PI-Wt);const Yt=Gt(xt(Bt/at)+this.center[0],-180,180),sn=Math.asin(Gt((ct-(_e*_e+At*At)*at*at)/(2*at),-1,1)),fn=Gt(xt(sn),-85.051129,ym);return new Ts(Yt,fn)}}const _b=1.340264,Jy=-.081106,e0=893e-6,t0=.003796,p1=Math.sqrt(3)/2;class TA extends wy{project(_e,rt){rt=rt/180*Math.PI,_e=_e/180*Math.PI;const at=Math.asin(p1*Math.sin(rt)),ct=at*at,vt=ct*ct*ct;return{x:.5*(_e*Math.cos(at)/(p1*(_b+3*Jy*ct+vt*(7*e0+9*t0*ct)))/Math.PI+.5),y:1-.5*(at*(_b+Jy*ct+vt*(e0+t0*ct))/Math.PI+1),z:0}}unproject(_e,rt){_e=(2*_e-.5)*Math.PI;let at=rt=(2*(1-rt)-1)*Math.PI,ct=at*at,vt=ct*ct*ct;for(let sn,fn,pn,An=0;An<12&&(fn=at*(_b+Jy*ct+vt*(e0+t0*ct))-rt,pn=_b+3*Jy*ct+vt*(7*e0+9*t0*ct),sn=fn/pn,at=Gt(at-sn,-Math.PI/3,Math.PI/3),ct=at*at,vt=ct*ct*ct,!(Math.abs(sn)<1e-12));++An);const At=p1*_e*(_b+3*Jy*ct+vt*(7*e0+9*t0*ct))/Math.cos(at),Bt=Math.asin(Math.sin(at)/p1),Wt=Gt(180*At/Math.PI,-180,180),Yt=Gt(180*Bt/Math.PI,-85.051129,ym);return new Ts(Wt,Yt)}}class ox extends wy{constructor(_e){super(_e),this.wrap=!0,this.supportsWorldCopies=!0}project(_e,rt){return{x:.5+_e/360,y:.5-rt/360,z:0}}unproject(_e,rt){const at=360*(_e-.5),ct=Gt(360*(.5-rt),-85.051129,ym);return new Ts(at,ct)}}const rv=Math.PI/2;function m1(nt){return Math.tan((rv+nt)/2)}class CA extends wy{constructor(_e){super(_e),this.center=_e.center||[0,30];const[rt,at]=this.parallels=_e.parallels||[30,30];let ct=wt(rt),vt=wt(at);this.southernCenter=ct+vt<0,this.southernCenter&&(ct=-ct,vt=-vt);const At=Math.cos(ct),Bt=m1(ct);this.n=ct===vt?Math.sin(ct):Math.log(At/Math.cos(vt))/Math.log(m1(vt)/Bt),this.f=At*Math.pow(m1(ct),this.n)/this.n}project(_e,rt){rt=wt(rt),this.southernCenter&&(rt=-rt),_e=wt(_e-this.center[0]);const at=1e-6,{n:ct,f:vt}=this;vt>0?rt<-rv+at&&(rt=-rv+at):rt>rv-at&&(rt=rv-at);const At=vt/Math.pow(m1(rt),ct);let Bt=At*Math.sin(ct*_e),Wt=vt-At*Math.cos(ct*_e);return Bt=.5*(Bt/Math.PI+.5),Wt=.5*(Wt/Math.PI+.5),{x:Bt,y:this.southernCenter?Wt:1-Wt,z:0}}unproject(_e,rt){_e=(2*_e-.5)*Math.PI,this.southernCenter&&(rt=1-rt),rt=(2*(1-rt)-.5)*Math.PI;const{n:at,f:ct}=this,vt=ct-rt,At=Math.sign(vt),Bt=Math.sign(at)*Math.sqrt(_e*_e+vt*vt);let Wt=Math.atan2(_e,Math.abs(vt))*At;vt*at<0&&(Wt-=Math.PI*Math.sign(_e)*At);const Yt=Gt(xt(Wt/at)+this.center[0],-180,180),sn=Gt(xt(2*Math.atan(Math.pow(ct/Bt,1/at))-rv),-85.051129,ym);return new Ts(Yt,this.southernCenter?-sn:sn)}}class y1 extends wy{constructor(_e){super(_e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(_e,rt){return{x:su(_e),y:Kp(rt),z:0}}unproject(_e,rt){const at=gp(_e),ct=Jl(rt);return new Ts(at,ct)}}const _1=wt(ym);class RA extends wy{project(_e,rt){const at=(rt=wt(rt))*rt,ct=at*at;return{x:.5*((_e=wt(_e))*(.8707-.131979*at+ct*(ct*(.003971*at-.001529*ct)-.013791))/Math.PI+.5),y:1-.5*(rt*(1.007226+at*(.015085+ct*(.028874*at-.044475-.005916*ct)))/Math.PI+1),z:0}}unproject(_e,rt){_e=(2*_e-.5)*Math.PI;let at=rt=(2*(1-rt)-1)*Math.PI,ct=25,vt=0,At=at*at;do{At=at*at;const Yt=At*At;vt=(at*(1.007226+At*(.015085+Yt*(.028874*At-.044475-.005916*Yt)))-rt)/(1.007226+At*(.045255+Yt*(.259866*At-.311325-.005916*11*Yt))),at=Gt(at-vt,-_1,_1)}while(Math.abs(vt)>1e-6&&--ct>0);At=at*at;const Bt=Gt(xt(_e/(.8707+At*(At*(At*At*At*(.003971-.001529*At)-.013791)-.131979))),-180,180),Wt=xt(at);return new Ts(Bt,Wt)}}const sx=wt(ym);class IA extends wy{project(_e,rt){rt=wt(rt),_e=wt(_e);const at=Math.cos(rt),ct=2/Math.PI,vt=Math.acos(at*Math.cos(_e/2)),At=Math.sin(vt)/vt,Bt=.5*(_e*ct+2*at*Math.sin(_e/2)/At)||0,Wt=.5*(rt+Math.sin(rt)/At)||0;return{x:.5*(Bt/Math.PI+.5),y:1-.5*(Wt/Math.PI+1),z:0}}unproject(_e,rt){let at=_e=(2*_e-.5)*Math.PI,ct=rt=(2*(1-rt)-1)*Math.PI,vt=25;const At=1e-6;let Bt=0,Wt=0;do{const Yt=Math.cos(ct),sn=Math.sin(ct),fn=2*sn*Yt,pn=sn*sn,An=Yt*Yt,Tn=Math.cos(at/2),kn=Math.sin(at/2),Vn=2*Tn*kn,ir=kn*kn,_r=1-An*Tn*Tn,rr=_r?1/_r:0,dr=_r?Math.acos(Yt*Tn)*Math.sqrt(1/_r):0,br=.5*(2*dr*Yt*kn+2*at/Math.PI)-_e,gr=.5*(dr*sn+ct)-rt,Dr=.5*rr*(An*ir+dr*Yt*Tn*pn)+1/Math.PI,Pr=rr*(Vn*fn/4-dr*sn*kn),Wr=.125*rr*(fn*kn-dr*sn*An*Vn),oo=.5*rr*(pn*Tn+dr*ir*Yt)+.5,jr=Pr*Wr-oo*Dr;Bt=(gr*Pr-br*oo)/jr,Wt=(br*Wr-gr*Dr)/jr,at=Gt(at-Bt,-Math.PI,Math.PI),ct=Gt(ct-Wt,-sx,sx)}while((Math.abs(Bt)>At||Math.abs(Wt)>At)&&--vt>0);return new Ts(xt(at),xt(ct))}}class ax extends wy{constructor(_e){super(_e),this.center=_e.center||[0,0],this.parallels=_e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(wt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(_e,rt){const{scale:at,cosPhi:ct}=this;return{x:wt(_e)*ct*at+.5,y:-Math.sin(wt(rt))/ct*at+.5,z:0}}unproject(_e,rt){const{scale:at,cosPhi:ct}=this,vt=-(rt-.5)/at,At=Gt(xt((_e-.5)/at)/ct,-180,180),Bt=Math.asin(Gt(vt*ct,-1,1)),Wt=Gt(xt(Bt),-85.051129,ym);return new Ts(At,Wt)}}class OA extends y1{constructor(_e){super(_e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(_e,rt,at){const ct=tv(_e,rt,at);return Fl(ct,ct,Qv(Em(at))),{x:ct[0],y:ct[1],z:ct[2]}}locationPoint(_e,rt){const at=Ky(rt.lat,rt.lng),ct=Iu([],at),vt=_e.elevation?_e.elevation.getAtPointOrZero(_e.locationCoordinate(rt),_e._centerAltitude):_e._centerAltitude;Uv(at,at,ct,dp(1,0)*Go*vt);const At=Xp(new Float64Array(16));return D_(At,_e.pixelMatrix,_e.globeMatrix),Fl(at,at,At),new pt(at[0],at[1])}pixelsPerMeter(_e,rt){return dp(1,0)*rt}pixelSpaceConversion(_e,rt,at){const ct=dp(1,_e)*rt,vt=Ss(dp(1,45)*rt,ct,at);return this.pixelsPerMeter(_e,rt)/vt}createTileMatrix(_e,rt,at){const ct=Ew(Em(at.canonical));return D_(new Float64Array(16),_e.globeMatrix,ct)}createInversionMatrix(_e,rt){const{center:at}=_e,ct=Qv(Em(rt));return L_(ct,ct,wt(at.lng)),Hy(ct,ct,wt(at.lat)),py(ct,ct,[_e._pixelsPerMercatorPixel,_e._pixelsPerMercatorPixel,1]),Float32Array.from(ct)}pointCoordinate(_e,rt,at,ct){return JS(_e,rt,at,!0)||new dy(0,0)}pointCoordinate3D(_e,rt,at){const ct=this.pointCoordinate(_e,rt,at,0);return[ct.x,ct.y,ct.z]}isPointAboveHorizon(_e,rt){return!JS(_e,rt.x,rt.y,!1)}farthestPixelDistance(_e){const rt=function(ct,vt){const At=ct.cameraToCenterDistance,Bt=ct._centerAltitude*vt,Wt=ct._camera,Yt=ct._camera.forward(),sn=bm([],pp([],Yt,-At),[0,0,Bt]),fn=ct.worldSize/(2*Math.PI),pn=[0,0,-fn],An=ct.width/ct.height,Tn=Math.tan(ct.fovAboveCenter),kn=pp([],Wt.up(),Tn),Vn=pp([],Wt.right(),Tn*An),ir=Iu([],bm([],bm([],Yt,kn),Vn)),_r=[];let rr;if(new Y1(sn,ir).closestPointOnSphere(pn,fn,_r)){const dr=bm([],_r,pn),br=Pp([],dr,sn);rr=Math.cos(ct.fovAboveCenter)*Qp(br)}else{const dr=Pp([],sn,pn),br=Pp([],pn,sn);Iu(br,br);const gr=Qp(dr)-fn;rr=Math.sqrt(gr*(gr+2*fn));const Dr=Math.acos(rr/(fn+gr))-Math.acos(Mp(Yt,br));rr*=Math.cos(Dr)}return 1.01*rr}(_e,this.pixelsPerMeter(_e.center.lat,_e.worldSize)),at=nv(_e.zoom);if(at>0){const ct=ix(_e,dp(1,_e.center.lat)*_e.worldSize),vt=_e.worldSize/(2*Math.PI),At=Math.max(_e.width,_e.height)/_e.worldSize*Math.PI;return Ss(rt,ct+vt*(1-Math.cos(At)),Math.pow(at,10))}return rt}upVector(_e,rt,at){return tv(rt,at,_e,1)}upVectorScale(_e){return{metersToTile:Sw*Jv(Em(_e))}}}function lx(nt){const _e=nt.parallels,rt=!!_e&&Math.abs(_e[0]+_e[1])<.01;switch(nt.name){case"mercator":return new y1(nt);case"equirectangular":return new ox(nt);case"naturalEarth":return new RA(nt);case"equalEarth":return new TA(nt);case"winkelTripel":return new IA(nt);case"albers":return rt?new ax(nt):new Cw(nt);case"lambertConformalConic":return rt?new ax(nt):new CA(nt);case"globe":return new OA(nt)}throw new Error(`Invalid projection name: ${nt.name}`)}const MA=K0.types,PA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function v1(nt,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn){const An=Bt?Math.min(by,Math.round(Bt[0])):0,Tn=Bt?Math.min(by,Math.round(Bt[1])):0;nt.emplaceBack(_e,rt,Math.round(32*at),Math.round(32*ct),vt,At,(An<<1)+(Wt?1:0),Tn,16*Yt,16*sn,256*fn,256*pn)}function b1(nt,_e,rt,at,ct,vt,At){nt.emplaceBack(_e,rt,at,ct,vt,At)}function w1(nt,_e,rt,at,ct){nt.emplaceBack(_e,rt,at,ct),nt.emplaceBack(_e,rt,at,ct),nt.emplaceBack(_e,rt,at,ct),nt.emplaceBack(_e,rt,at,ct)}function kA(nt){for(const _e of nt.sections)if(_n(_e.text))return!0;return!1}class Rw{constructor(_e){this.layoutVertexArray=new xa,this.indexArray=new Xl,this.programConfigurations=_e,this.segments=new Bl,this.dynamicLayoutVertexArray=new Ll,this.opacityVertexArray=new Tl,this.placedSymbolArray=new R1,this.globeExtVertexArray=new Ms}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(_e,rt,at,ct){this.isEmpty()||(at&&(this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,nA.members),this.indexBuffer=_e.createIndexBuffer(this.indexArray,rt),this.dynamicLayoutVertexBuffer=_e.createVertexBuffer(this.dynamicLayoutVertexArray,Hl.members,!0),this.opacityVertexBuffer=_e.createVertexBuffer(this.opacityVertexArray,PA,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=_e.createVertexBuffer(this.globeExtVertexArray,_f.members,!0)),this.opacityVertexBuffer.itemSize=1),(at||ct)&&this.programConfigurations.upload(_e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Ao(Rw,"SymbolBuffers");class Iw{constructor(_e,rt,at){this.layoutVertexArray=new _e,this.layoutAttributes=rt,this.indexArray=new at,this.segments=new Bl,this.collisionVertexArray=new qp,this.collisionVertexArrayExt=new Zu}upload(_e){this.layoutVertexBuffer=_e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=_e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=_e.createVertexBuffer(this.collisionVertexArray,rA.members,!0),this.collisionVertexBufferExt=_e.createVertexBuffer(this.collisionVertexArrayExt,_y.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ao(Iw,"CollisionBuffers");class Sy{constructor(_e){this.collisionBoxArray=_e.collisionBoxArray,this.zoom=_e.zoom,this.overscaling=_e.overscaling,this.layers=_e.layers,this.layerIds=this.layers.map(At=>At.id),this.index=_e.index,this.pixelRatio=_e.pixelRatio,this.sourceLayerIndex=_e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xp([]),this.placementViewportMatrix=Xp([]);const rt=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hw(this.zoom,rt["text-size"]),this.iconSizeData=hw(this.zoom,rt["icon-size"]);const at=this.layers[0].layout,ct=at.get("symbol-sort-key"),vt=at.get("symbol-z-order");this.canOverlap=at.get("text-allow-overlap")||at.get("icon-allow-overlap")||at.get("text-ignore-placement")||at.get("icon-ignore-placement"),this.sortFeaturesByKey=vt!=="viewport-y"&&ct.constantOr(1)!==void 0,this.sortFeaturesByY=(vt==="viewport-y"||vt==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=at.get("text-writing-mode").map(At=>yp[At]),this.stateDependentLayerIds=this.layers.filter(At=>At.isStateDependent()).map(At=>At.id),this.sourceID=_e.sourceID,this.projection=_e.projection}createArrays(){this.text=new Rw(new Op(this.layers,this.zoom,_e=>/^text/.test(_e))),this.icon=new Rw(new Op(this.layers,this.zoom,_e=>/^icon/.test(_e))),this.glyphOffsetArray=new jm,this.lineVertexArray=new T0,this.symbolInstances=new Yu}calculateGlyphDependencies(_e,rt,at,ct,vt){for(let At=0;At<_e.length;At++)if(rt[_e.charCodeAt(At)]=!0,ct&&vt){const Bt=vy[_e.charAt(At)];Bt&&(rt[Bt.charCodeAt(0)]=!0)}}populate(_e,rt,at,ct){const vt=this.layers[0],At=vt.layout,Bt=this.projection.name==="globe",Wt=At.get("text-font"),Yt=At.get("text-field"),sn=At.get("icon-image"),fn=(Yt.value.kind!=="constant"||Yt.value.value instanceof zt&&!Yt.value.value.isEmpty()||Yt.value.value.toString().length>0)&&(Wt.value.kind!=="constant"||Wt.value.value.length>0),pn=sn.value.kind!=="constant"||!!sn.value.value||Object.keys(sn.parameters).length>0,An=At.get("symbol-sort-key");if(this.features=[],!fn&&!pn)return;const Tn=rt.iconDependencies,kn=rt.glyphDependencies,Vn=rt.availableImages,ir=new tr(this.zoom);for(const{feature:_r,id:rr,index:dr,sourceLayerIndex:br}of _e){const gr=vt._featureFilter.needGeometry,Dr=Wy(_r,gr);if(!vt._featureFilter.filter(ir,Dr,at))continue;if(gr||(Dr.geometry=Lu(_r,at,ct)),Bt&&_r.type!==1&&at.z<=5){const jr=Dr.geometry,Zr=.98078528056,Kr=(eo,ao)=>Mp(tv(eo.x,eo.y,at,1),tv(ao.x,ao.y,at,1))<Zr;for(let eo=0;eo<jr.length;eo++)jr[eo]=M_(jr[eo],Kr)}let Pr,Wr;if(fn){const jr=vt.getValueAndResolveTokens("text-field",Dr,at,Vn),Zr=zt.factory(jr);kA(Zr)&&(this.hasRTLText=!0),(!this.hasRTLText||Zn()==="unavailable"||this.hasRTLText&&pr.isParsed())&&(Pr=RS(Zr,vt,Dr))}if(pn){const jr=vt.getValueAndResolveTokens("icon-image",Dr,at,Vn);Wr=jr instanceof ln?jr:ln.fromString(jr)}if(!Pr&&!Wr)continue;const oo=this.sortFeaturesByKey?An.evaluate(Dr,{},at):void 0;if(this.features.push({id:rr,text:Pr,icon:Wr,index:dr,sourceLayerIndex:br,geometry:Dr.geometry,properties:_r.properties,type:MA[_r.type],sortKey:oo}),Wr&&(Tn[Wr.name]=!0),Pr){const jr=Wt.evaluate(Dr,{},at).join(","),Zr=At.get("text-rotation-alignment")==="map"&&At.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(yp.vertical)>=0;for(const Kr of Pr.sections)if(Kr.image)Tn[Kr.image.name]=!0;else{const eo=lt(Pr.toString()),ao=Kr.fontStack||jr,Fr=kn[ao]=kn[ao]||{};this.calculateGlyphDependencies(Kr.text,Fr,Zr,this.allowVerticalPlacement,eo)}}}At.get("symbol-placement")==="line"&&(this.features=function(_r){const rr={},dr={},br=[];let gr=0;function Dr(jr){br.push(_r[jr]),gr++}function Pr(jr,Zr,Kr){const eo=dr[jr];return delete dr[jr],dr[Zr]=eo,br[eo].geometry[0].pop(),br[eo].geometry[0]=br[eo].geometry[0].concat(Kr[0]),eo}function Wr(jr,Zr,Kr){const eo=rr[Zr];return delete rr[Zr],rr[jr]=eo,br[eo].geometry[0].shift(),br[eo].geometry[0]=Kr[0].concat(br[eo].geometry[0]),eo}function oo(jr,Zr,Kr){const eo=Kr?Zr[0][Zr[0].length-1]:Zr[0][0];return`${jr}:${eo.x}:${eo.y}`}for(let jr=0;jr<_r.length;jr++){const Zr=_r[jr],Kr=Zr.geometry,eo=Zr.text?Zr.text.toString():null;if(!eo){Dr(jr);continue}const ao=oo(eo,Kr),Fr=oo(eo,Kr,!0);if(ao in dr&&Fr in rr&&dr[ao]!==rr[Fr]){const yo=Wr(ao,Fr,Kr),Wo=Pr(ao,Fr,br[yo].geometry);delete rr[ao],delete dr[Fr],dr[oo(eo,br[Wo].geometry,!0)]=Wo,br[yo].geometry=null}else ao in dr?Pr(ao,Fr,Kr):Fr in rr?Wr(ao,Fr,Kr):(Dr(jr),rr[ao]=gr-1,dr[Fr]=gr-1)}return br.filter(jr=>jr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((_r,rr)=>_r.sortKey-rr.sortKey)}update(_e,rt,at,ct){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(_e,rt,this.layers,at,ct),this.icon.programConfigurations.updatePaintArrays(_e,rt,this.layers,at,ct))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(_e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(_e),this.iconCollisionBox.upload(_e)),this.text.upload(_e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(_e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=lx(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(_e,rt){const at=this.lineVertexArray.length,ct=_e.segment;if(ct!==void 0){let vt=_e.dist(rt[ct+1]),At=_e.dist(rt[ct]);const Bt={};for(let Wt=ct+1;Wt<rt.length;Wt++)Bt[Wt]={x:rt[Wt].x,y:rt[Wt].y,tileUnitDistanceFromAnchor:vt},Wt<rt.length-1&&(vt+=rt[Wt+1].dist(rt[Wt]));for(let Wt=ct||0;Wt>=0;Wt--)Bt[Wt]={x:rt[Wt].x,y:rt[Wt].y,tileUnitDistanceFromAnchor:At},Wt>0&&(At+=rt[Wt-1].dist(rt[Wt]));for(let Wt=0;Wt<rt.length;Wt++){const Yt=Bt[Wt];this.lineVertexArray.emplaceBack(Yt.x,Yt.y,Yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:at,lineLength:this.lineVertexArray.length-at}}addSymbols(_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn,fn,pn,An,Tn){const kn=_e.indexArray,Vn=_e.layoutVertexArray,ir=_e.globeExtVertexArray,_r=_e.segments.prepareSegment(4*rt.length,Vn,kn,this.canOverlap?At.sortKey:void 0),rr=this.glyphOffsetArray.length,dr=_r.vertexLength,br=this.allowVerticalPlacement&&Bt===yp.vertical?Math.PI/2:0,gr=At.text&&At.text.sections;for(let Pr=0;Pr<rt.length;Pr++){const{tl:Wr,tr:oo,bl:jr,br:Zr,tex:Kr,pixelOffsetTL:eo,pixelOffsetBR:ao,minFontScaleX:Fr,minFontScaleY:yo,glyphOffset:Wo,isSDF:bo,sectionIndex:Do}=rt[Pr],_o=_r.vertexLength,Ho=Wo[1];if(v1(Vn,Yt.x,Yt.y,Wr.x,Ho+Wr.y,Kr.x,Kr.y,at,bo,eo.x,eo.y,Fr,yo),v1(Vn,Yt.x,Yt.y,oo.x,Ho+oo.y,Kr.x+Kr.w,Kr.y,at,bo,ao.x,eo.y,Fr,yo),v1(Vn,Yt.x,Yt.y,jr.x,Ho+jr.y,Kr.x,Kr.y+Kr.h,at,bo,eo.x,ao.y,Fr,yo),v1(Vn,Yt.x,Yt.y,Zr.x,Ho+Zr.y,Kr.x+Kr.w,Kr.y+Kr.h,at,bo,ao.x,ao.y,Fr,yo),Wt){const rs=Wt.anchor,us=Wt.up;b1(ir,rs.x,rs.y,rs.z,us[0],us[1],us[2]),b1(ir,rs.x,rs.y,rs.z,us[0],us[1],us[2]),b1(ir,rs.x,rs.y,rs.z,us[0],us[1],us[2]),b1(ir,rs.x,rs.y,rs.z,us[0],us[1],us[2]),w1(_e.dynamicLayoutVertexArray,rs.x,rs.y,rs.z,br)}else w1(_e.dynamicLayoutVertexArray,Yt.x,Yt.y,Yt.z,br);kn.emplaceBack(_o,_o+1,_o+2),kn.emplaceBack(_o+1,_o+2,_o+3),_r.vertexLength+=4,_r.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wo[0]),Pr!==rt.length-1&&Do===rt[Pr+1].sectionIndex||_e.programConfigurations.populatePaintArrays(Vn.length,At,At.index,{},An,Tn,gr&&gr[Do])}const Dr=Wt?Wt.anchor:Yt;_e.placedSymbolArray.emplaceBack(Dr.x,Dr.y,Dr.z,Yt.x,Yt.y,rr,this.glyphOffsetArray.length-rr,dr,sn,fn,Yt.segment,at?at[0]:0,at?at[1]:0,ct[0],ct[1],Bt,0,!1,0,pn,0)}_commitLayoutVertex(_e,rt,at,ct,vt,At,Bt){_e.emplaceBack(rt,at,ct,vt,At,Math.round(Bt.x),Math.round(Bt.y))}_addCollisionDebugVertices(_e,rt,at,ct,vt,At,Bt){const Wt=at.segments.prepareSegment(4,at.layoutVertexArray,at.indexArray),Yt=Wt.vertexLength,sn=Bt.tileAnchorX,fn=Bt.tileAnchorY;for(let An=0;An<4;An++)at.collisionVertexArray.emplaceBack(0,0,0,0);at.collisionVertexArrayExt.emplaceBack(rt,-_e.padding,-_e.padding),at.collisionVertexArrayExt.emplaceBack(rt,_e.padding,-_e.padding),at.collisionVertexArrayExt.emplaceBack(rt,_e.padding,_e.padding),at.collisionVertexArrayExt.emplaceBack(rt,-_e.padding,_e.padding),this._commitLayoutVertex(at.layoutVertexArray,ct,vt,At,sn,fn,new pt(_e.x1,_e.y1)),this._commitLayoutVertex(at.layoutVertexArray,ct,vt,At,sn,fn,new pt(_e.x2,_e.y1)),this._commitLayoutVertex(at.layoutVertexArray,ct,vt,At,sn,fn,new pt(_e.x2,_e.y2)),this._commitLayoutVertex(at.layoutVertexArray,ct,vt,At,sn,fn,new pt(_e.x1,_e.y2)),Wt.vertexLength+=4;const pn=at.indexArray;pn.emplaceBack(Yt,Yt+1),pn.emplaceBack(Yt+1,Yt+2),pn.emplaceBack(Yt+2,Yt+3),pn.emplaceBack(Yt+3,Yt),Wt.primitiveLength+=4}_addTextDebugCollisionBoxes(_e,rt,at,ct,vt,At){for(let Bt=ct;Bt<vt;Bt++){const Wt=at.get(Bt),Yt=this.getSymbolInstanceTextSize(_e,At,rt,Bt);this._addCollisionDebugVertices(Wt,Yt,this.textCollisionBox,Wt.projectedAnchorX,Wt.projectedAnchorY,Wt.projectedAnchorZ,At)}}_addIconDebugCollisionBoxes(_e,rt,at,ct,vt,At){for(let Bt=ct;Bt<vt;Bt++){const Wt=at.get(Bt),Yt=this.getSymbolInstanceIconSize(_e,rt,At.placedIconSymbolIndex);this._addCollisionDebugVertices(Wt,Yt,this.iconCollisionBox,Wt.projectedAnchorX,Wt.projectedAnchorY,Wt.projectedAnchorZ,At)}}generateCollisionDebugBuffers(_e,rt){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Iw(Gs,CS.members,_u),this.iconCollisionBox=new Iw(Gs,CS.members,_u);const at=H_(this.iconSizeData,_e),ct=H_(this.textSizeData,_e);for(let vt=0;vt<this.symbolInstances.length;vt++){const At=this.symbolInstances.get(vt);this._addTextDebugCollisionBoxes(ct,_e,rt,At.textBoxStartIndex,At.textBoxEndIndex,At),this._addTextDebugCollisionBoxes(ct,_e,rt,At.verticalTextBoxStartIndex,At.verticalTextBoxEndIndex,At),this._addIconDebugCollisionBoxes(at,_e,rt,At.iconBoxStartIndex,At.iconBoxEndIndex,At),this._addIconDebugCollisionBoxes(at,_e,rt,At.verticalIconBoxStartIndex,At.verticalIconBoxEndIndex,At)}}getSymbolInstanceTextSize(_e,rt,at,ct){const vt=this.text.placedSymbolArray.get(rt.rightJustifiedTextSymbolIndex>=0?rt.rightJustifiedTextSymbolIndex:rt.centerJustifiedTextSymbolIndex>=0?rt.centerJustifiedTextSymbolIndex:rt.leftJustifiedTextSymbolIndex>=0?rt.leftJustifiedTextSymbolIndex:rt.verticalPlacedTextSymbolIndex>=0?rt.verticalPlacedTextSymbolIndex:ct),At=G_(this.textSizeData,_e,vt)/lu;return this.tilePixelRatio*At}getSymbolInstanceIconSize(_e,rt,at){const ct=this.icon.placedSymbolArray.get(at),vt=G_(this.iconSizeData,_e,ct);return this.tilePixelRatio*vt}_commitDebugCollisionVertexUpdate(_e,rt,at){_e.emplaceBack(rt,-at,-at),_e.emplaceBack(rt,at,-at),_e.emplaceBack(rt,at,at),_e.emplaceBack(rt,-at,at)}_updateTextDebugCollisionBoxes(_e,rt,at,ct,vt,At){for(let Bt=ct;Bt<vt;Bt++){const Wt=at.get(Bt),Yt=this.getSymbolInstanceTextSize(_e,At,rt,Bt);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,Yt,Wt.padding)}}_updateIconDebugCollisionBoxes(_e,rt,at,ct,vt,At){for(let Bt=ct;Bt<vt;Bt++){const Wt=at.get(Bt),Yt=this.getSymbolInstanceIconSize(_e,rt,At);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,Yt,Wt.padding)}}updateCollisionDebugBuffers(_e,rt){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const at=H_(this.iconSizeData,_e),ct=H_(this.textSizeData,_e);for(let vt=0;vt<this.symbolInstances.length;vt++){const At=this.symbolInstances.get(vt);this._updateTextDebugCollisionBoxes(ct,_e,rt,At.textBoxStartIndex,At.textBoxEndIndex,At),this._updateTextDebugCollisionBoxes(ct,_e,rt,At.verticalTextBoxStartIndex,At.verticalTextBoxEndIndex,At),this._updateIconDebugCollisionBoxes(at,_e,rt,At.iconBoxStartIndex,At.iconBoxEndIndex,At.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(at,_e,rt,At.verticalIconBoxStartIndex,At.verticalIconBoxEndIndex,At.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(_e,rt,at,ct,vt,At,Bt,Wt,Yt){const sn={};for(let fn=rt;fn<at;fn++){const pn=_e.get(fn);sn.textBox={x1:pn.x1,y1:pn.y1,x2:pn.x2,y2:pn.y2,padding:pn.padding,projectedAnchorX:pn.projectedAnchorX,projectedAnchorY:pn.projectedAnchorY,projectedAnchorZ:pn.projectedAnchorZ,tileAnchorX:pn.tileAnchorX,tileAnchorY:pn.tileAnchorY},sn.textFeatureIndex=pn.featureIndex;break}for(let fn=ct;fn<vt;fn++){const pn=_e.get(fn);sn.verticalTextBox={x1:pn.x1,y1:pn.y1,x2:pn.x2,y2:pn.y2,padding:pn.padding,projectedAnchorX:pn.projectedAnchorX,projectedAnchorY:pn.projectedAnchorY,projectedAnchorZ:pn.projectedAnchorZ,tileAnchorX:pn.tileAnchorX,tileAnchorY:pn.tileAnchorY},sn.verticalTextFeatureIndex=pn.featureIndex;break}for(let fn=At;fn<Bt;fn++){const pn=_e.get(fn);sn.iconBox={x1:pn.x1,y1:pn.y1,x2:pn.x2,y2:pn.y2,padding:pn.padding,projectedAnchorX:pn.projectedAnchorX,projectedAnchorY:pn.projectedAnchorY,projectedAnchorZ:pn.projectedAnchorZ,tileAnchorX:pn.tileAnchorX,tileAnchorY:pn.tileAnchorY},sn.iconFeatureIndex=pn.featureIndex;break}for(let fn=Wt;fn<Yt;fn++){const pn=_e.get(fn);sn.verticalIconBox={x1:pn.x1,y1:pn.y1,x2:pn.x2,y2:pn.y2,padding:pn.padding,projectedAnchorX:pn.projectedAnchorX,projectedAnchorY:pn.projectedAnchorY,projectedAnchorZ:pn.projectedAnchorZ,tileAnchorX:pn.tileAnchorX,tileAnchorY:pn.tileAnchorY},sn.verticalIconFeatureIndex=pn.featureIndex;break}return sn}deserializeCollisionBoxes(_e){this.collisionArrays=[];for(let rt=0;rt<this.symbolInstances.length;rt++){const at=this.symbolInstances.get(rt);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(_e,at.textBoxStartIndex,at.textBoxEndIndex,at.verticalTextBoxStartIndex,at.verticalTextBoxEndIndex,at.iconBoxStartIndex,at.iconBoxEndIndex,at.verticalIconBoxStartIndex,at.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(_e,rt){const at=_e.placedSymbolArray.get(rt),ct=at.vertexStartIndex+4*at.numGlyphs;for(let vt=at.vertexStartIndex;vt<ct;vt+=4)_e.indexArray.emplaceBack(vt,vt+1,vt+2),_e.indexArray.emplaceBack(vt+1,vt+2,vt+3)}getSortedSymbolIndexes(_e){if(this.sortedAngle===_e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const rt=Math.sin(_e),at=Math.cos(_e),ct=[],vt=[],At=[];for(let Bt=0;Bt<this.symbolInstances.length;++Bt){At.push(Bt);const Wt=this.symbolInstances.get(Bt);ct.push(0|Math.round(rt*Wt.tileAnchorX+at*Wt.tileAnchorY)),vt.push(Wt.featureIndex)}return At.sort((Bt,Wt)=>ct[Bt]-ct[Wt]||vt[Wt]-vt[Bt]),At}addToSortKeyRanges(_e,rt){const at=this.sortKeyRanges[this.sortKeyRanges.length-1];at&&at.sortKey===rt?at.symbolInstanceEnd=_e+1:this.sortKeyRanges.push({sortKey:rt,symbolInstanceStart:_e,symbolInstanceEnd:_e+1})}sortFeatures(_e){if(this.sortFeaturesByY&&this.sortedAngle!==_e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(_e),this.sortedAngle=_e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const rt of this.symbolInstanceIndexes){const at=this.symbolInstances.get(rt);this.featureSortOrder.push(at.featureIndex),[at.rightJustifiedTextSymbolIndex,at.centerJustifiedTextSymbolIndex,at.leftJustifiedTextSymbolIndex].forEach((ct,vt,At)=>{ct>=0&&At.indexOf(ct)===vt&&this.addIndicesForPlacedSymbol(this.text,ct)}),at.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,at.verticalPlacedTextSymbolIndex),at.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,at.placedIconSymbolIndex),at.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,at.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ao(Sy,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Sy.MAX_GLYPHS=65535,Sy.addDynamicAttributes=w1;const DA=new uo({"symbol-placement":new Or(Nr.layout_symbol["symbol-placement"]),"symbol-spacing":new Or(Nr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Or(Nr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Sr(Nr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Or(Nr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Or(Nr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Or(Nr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Or(Nr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Or(Nr.layout_symbol["icon-rotation-alignment"]),"icon-size":new Sr(Nr.layout_symbol["icon-size"]),"icon-text-fit":new Or(Nr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Or(Nr.layout_symbol["icon-text-fit-padding"]),"icon-image":new Sr(Nr.layout_symbol["icon-image"]),"icon-rotate":new Sr(Nr.layout_symbol["icon-rotate"]),"icon-padding":new Or(Nr.layout_symbol["icon-padding"]),"icon-keep-upright":new Or(Nr.layout_symbol["icon-keep-upright"]),"icon-offset":new Sr(Nr.layout_symbol["icon-offset"]),"icon-anchor":new Sr(Nr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Or(Nr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Or(Nr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Or(Nr.layout_symbol["text-rotation-alignment"]),"text-field":new Sr(Nr.layout_symbol["text-field"]),"text-font":new Sr(Nr.layout_symbol["text-font"]),"text-size":new Sr(Nr.layout_symbol["text-size"]),"text-max-width":new Sr(Nr.layout_symbol["text-max-width"]),"text-line-height":new Sr(Nr.layout_symbol["text-line-height"]),"text-letter-spacing":new Sr(Nr.layout_symbol["text-letter-spacing"]),"text-justify":new Sr(Nr.layout_symbol["text-justify"]),"text-radial-offset":new Sr(Nr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Or(Nr.layout_symbol["text-variable-anchor"]),"text-anchor":new Sr(Nr.layout_symbol["text-anchor"]),"text-max-angle":new Or(Nr.layout_symbol["text-max-angle"]),"text-writing-mode":new Or(Nr.layout_symbol["text-writing-mode"]),"text-rotate":new Sr(Nr.layout_symbol["text-rotate"]),"text-padding":new Or(Nr.layout_symbol["text-padding"]),"text-keep-upright":new Or(Nr.layout_symbol["text-keep-upright"]),"text-transform":new Sr(Nr.layout_symbol["text-transform"]),"text-offset":new Sr(Nr.layout_symbol["text-offset"]),"text-allow-overlap":new Or(Nr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Or(Nr.layout_symbol["text-ignore-placement"]),"text-optional":new Or(Nr.layout_symbol["text-optional"])});var Ow={paint:new uo({"icon-opacity":new Sr(Nr.paint_symbol["icon-opacity"]),"icon-color":new Sr(Nr.paint_symbol["icon-color"]),"icon-halo-color":new Sr(Nr.paint_symbol["icon-halo-color"]),"icon-halo-width":new Sr(Nr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Sr(Nr.paint_symbol["icon-halo-blur"]),"icon-translate":new Or(Nr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Or(Nr.paint_symbol["icon-translate-anchor"]),"text-opacity":new Sr(Nr.paint_symbol["text-opacity"]),"text-color":new Sr(Nr.paint_symbol["text-color"],{runtimeType:Eu,getOverride:nt=>nt.textColor,hasOverride:nt=>!!nt.textColor}),"text-halo-color":new Sr(Nr.paint_symbol["text-halo-color"]),"text-halo-width":new Sr(Nr.paint_symbol["text-halo-width"]),"text-halo-blur":new Sr(Nr.paint_symbol["text-halo-blur"]),"text-translate":new Or(Nr.paint_symbol["text-translate"]),"text-translate-anchor":new Or(Nr.paint_symbol["text-translate-anchor"])}),layout:DA};class ux{constructor(_e){this.type=_e.property.overrides?_e.property.overrides.runtimeType:tp,this.defaultValue=_e}evaluate(_e){if(_e.formattedSection){const rt=this.defaultValue.property.overrides;if(rt&&rt.hasOverride(_e.formattedSection))return rt.getOverride(_e.formattedSection)}return _e.feature&&_e.featureState?this.defaultValue.evaluate(_e.feature,_e.featureState):this.defaultValue.property.specification.default}eachChild(_e){this.defaultValue.isConstant()||_e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ao(ux,"FormatSectionOverride",{omit:["defaultValue"]});class S1 extends Xu{constructor(_e){super(_e,Ow)}recalculate(_e,rt){super.recalculate(_e,rt),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const at=this.layout.get("text-writing-mode");if(at){const ct=[];for(const vt of at)ct.indexOf(vt)<0&&ct.push(vt);this.layout._values["text-writing-mode"]=ct}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(_e,rt,at,ct){const vt=this.layout.get(_e).evaluate(rt,{},at,ct),At=this._unevaluatedLayout._values[_e];return At.isDataDriven()||iy(At.value)||!vt?vt:function(Bt,Wt){return Wt.replace(/{([^{}]+)}/g,(Yt,sn)=>sn in Bt?String(Bt[sn]):"")}(rt.properties,vt)}createBucket(_e){return new Sy(_e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const _e of Ow.paint.overridableProperties){if(!S1.hasPaintOverride(this.layout,_e))continue;const rt=this.paint.get(_e),at=new ux(rt),ct=new am(at,rt.property.specification);let vt=null;vt=rt.value.kind==="constant"||rt.value.kind==="source"?new Mm("source",ct):new Py("composite",ct,rt.value.zoomStops,rt.value._interpolationType),this.paint._values[_e]=new $r(rt.property,vt,rt.parameters)}}_handleOverridablePaintPropertyUpdate(_e,rt,at){return!(!this.layout||rt.isDataDriven()||at.isDataDriven())&&S1.hasPaintOverride(this.layout,_e)}static hasPaintOverride(_e,rt){const at=_e.get("text-field"),ct=Ow.paint.properties[rt];let vt=!1;const At=Bt=>{for(const Wt of Bt)if(ct.overrides&&ct.overrides.hasOverride(Wt))return void(vt=!0)};if(at.value.kind==="constant"&&at.value.value instanceof zt)At(at.value.value.sections);else if(at.value.kind==="source"){const Bt=Yt=>{vt||(Yt instanceof Jn&&zn(Yt.value)===zu?At(Yt.value.sections):Yt instanceof go?At(Yt.sections):Yt.eachChild(Bt))},Wt=at.value;Wt._styleExpression&&Bt(Wt._styleExpression.expression)}return vt}getProgramConfiguration(_e){return new Nm(this,_e)}}var LA={paint:new uo({"background-color":new Or(Nr.paint_background["background-color"]),"background-pattern":new lo(Nr.paint_background["background-pattern"]),"background-opacity":new Or(Nr.paint_background["background-opacity"])})},BA={paint:new uo({"raster-opacity":new Or(Nr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Or(Nr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Or(Nr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Or(Nr.paint_raster["raster-brightness-max"]),"raster-saturation":new Or(Nr.paint_raster["raster-saturation"]),"raster-contrast":new Or(Nr.paint_raster["raster-contrast"]),"raster-resampling":new Or(Nr.paint_raster["raster-resampling"]),"raster-fade-duration":new Or(Nr.paint_raster["raster-fade-duration"])})};class mt extends Xu{constructor(_e){super(_e,{}),this.implementation=_e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(_e){this.implementation.onAdd&&this.implementation.onAdd(_e,_e.painter.context.gl)}onRemove(_e){this.implementation.onRemove&&this.implementation.onRemove(_e,_e.painter.context.gl)}}var Ct={paint:new uo({"sky-type":new Or(Nr.paint_sky["sky-type"]),"sky-atmosphere-sun":new Or(Nr.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Or(Nr.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Or(Nr.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Or(Nr.paint_sky["sky-gradient-radius"]),"sky-gradient":new ho(Nr.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Or(Nr.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Or(Nr.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Or(Nr.paint_sky["sky-opacity"])})};function Qt(nt,_e,rt){const at=[0,0,1],ct=nS([]);return iS(ct,ct,rt?-wt(nt)+Math.PI:wt(nt)),rS(ct,ct,-wt(_e)),Xw(at,at,ct),Iu(at,at)}const bn={circle:class extends Xu{constructor(nt){super(nt,qw)}createBucket(nt){return new au(nt)}queryRadius(nt){const _e=nt;return gy("circle-radius",this,_e)+gy("circle-stroke-width",this,_e)+B0(this.paint.get("circle-translate"))}queryIntersectsFeature(nt,_e,rt,at,ct,vt,At,Bt){const Wt=k_(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),vt.angle,nt.pixelToTileUnitsFactor),Yt=this.paint.get("circle-radius").evaluate(_e,rt)+this.paint.get("circle-stroke-width").evaluate(_e,rt);return oS(nt,at,vt,At,Bt,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",Wt,Yt)}getProgramIds(){return["circle"]}getProgramConfiguration(nt){return new Nm(this,nt)}},heatmap:class extends Xu{createBucket(nt){return new lS(nt)}constructor(nt){super(nt,Sx),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(nt){nt==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=J1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(nt){return gy("heatmap-radius",this,nt)}queryIntersectsFeature(nt,_e,rt,at,ct,vt,At,Bt){const Wt=this.paint.get("heatmap-radius").evaluate(_e,rt);return oS(nt,at,vt,At,Bt,!0,!0,new pt(0,0),Wt)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(nt){return new Nm(this,nt)}},hillshade:class extends Xu{constructor(nt){super(nt,xx)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Xu{constructor(nt){super(nt,Fx)}getProgramIds(){const nt=this.paint.get("fill-pattern"),_e=nt&&nt.constantOr(1),rt=[_e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&rt.push(_e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),rt}getProgramConfiguration(nt){return new Nm(this,nt)}recalculate(nt,_e){super.recalculate(nt,_e);const rt=this.paint._values["fill-outline-color"];rt.value.kind==="constant"&&rt.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(nt){return new q0(nt)}queryRadius(){return B0(this.paint.get("fill-translate"))}queryIntersectsFeature(nt,_e,rt,at,ct,vt){return!nt.queryGeometry.isAboveHorizon&&W1(Hw(nt.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),vt.angle,nt.pixelToTileUnitsFactor),at)}isTileClipped(){return!0}},"fill-extrusion":class extends Xu{constructor(nt){super(nt,Zx)}createBucket(nt){return new qy(nt)}queryRadius(){return B0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(nt){return new Nm(this,nt)}queryIntersectsFeature(nt,_e,rt,at,ct,vt,At,Bt,Wt){const Yt=k_(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),vt.angle,nt.pixelToTileUnitsFactor),sn=this.paint.get("fill-extrusion-height").evaluate(_e,rt),fn=this.paint.get("fill-extrusion-base").evaluate(_e,rt),pn=[0,0],An=Bt&&vt.elevation,Tn=vt.elevation?vt.elevation.exaggeration():1,kn=nt.tile.getBucket(this);if(An&&kn instanceof qy){const dr=kn.centroidVertexArray,br=Wt+1;if(br<dr.length){const gr=dr.get(br);pn[0]=gr.a_centroid_pos0,pn[1]=gr.a_centroid_pos1}}if(pn[0]===0&&pn[1]===1)return!1;vt.projection.name==="globe"&&(at=qv([at],[new pt(0,0),new pt(Go,Go)],nt.tileID.canonical).map(dr=>dr.polygon).flat());const Vn=An?Bt:null,[ir,_r]=function(dr,br,gr,Dr,Pr,Wr,oo,jr,Zr,Kr,eo){return dr.projection.name==="globe"?function(ao,Fr,yo,Wo,bo,Do,_o,Ho,rs,us,Is){const ts=[],$a=[],ps=ao.projection.upVectorScale(Is,ao.center.lat,ao.worldSize).metersToTile,ws=[0,0,0,1],Zs=[0,0,0,1],_a=(ba,yl,Ol,vu)=>{ba[0]=yl,ba[1]=Ol,ba[2]=vu,ba[3]=1},na=SS();yo>0&&(yo+=na),Wo+=na;for(const ba of Fr){const yl=[],Ol=[];for(const vu of ba){const Hs=vu.x+bo.x,Kl=vu.y+bo.y,$l=ao.projection.projectTilePoint(Hs,Kl,Is),ks=ao.projection.upVector(Is,vu.x,vu.y);let Al=yo,eu=Wo;if(_o){const Ys=ES(Hs,Kl,yo,Wo,_o,Ho,rs,us);Al+=Ys.base,eu+=Ys.top}yo!==0?_a(ws,$l.x+ks[0]*ps*Al,$l.y+ks[1]*ps*Al,$l.z+ks[2]*ps*Al):_a(ws,$l.x,$l.y,$l.z),_a(Zs,$l.x+ks[0]*ps*eu,$l.y+ks[1]*ps*eu,$l.z+ks[2]*ps*eu),Fl(ws,ws,Do),Fl(Zs,Zs,Do),yl.push(new W_(ws[0],ws[1],ws[2])),Ol.push(new W_(Zs[0],Zs[1],Zs[2]))}ts.push(yl),$a.push(Ol)}return[ts,$a]}(dr,br,gr,Dr,Pr,Wr,oo,jr,Zr,Kr,eo):oo?function(ao,Fr,yo,Wo,bo,Do,_o,Ho,rs){const us=[],Is=[],ts=[0,0,0,1];for(const $a of ao){const ps=[],ws=[];for(const Zs of $a){const _a=Zs.x+Wo.x,na=Zs.y+Wo.y,ba=ES(_a,na,Fr,yo,Do,_o,Ho,rs);ts[0]=_a,ts[1]=na,ts[2]=ba.base,ts[3]=1,my(ts,ts,bo),ts[3]=Math.max(ts[3],1e-5);const yl=new W_(ts[0]/ts[3],ts[1]/ts[3],ts[2]/ts[3]);ts[0]=_a,ts[1]=na,ts[2]=ba.top,ts[3]=1,my(ts,ts,bo),ts[3]=Math.max(ts[3],1e-5);const Ol=new W_(ts[0]/ts[3],ts[1]/ts[3],ts[2]/ts[3]);ps.push(yl),ws.push(Ol)}us.push(ps),Is.push(ws)}return[us,Is]}(br,gr,Dr,Pr,Wr,oo,jr,Zr,Kr):function(ao,Fr,yo,Wo,bo){const Do=[],_o=[],Ho=bo[8]*Fr,rs=bo[9]*Fr,us=bo[10]*Fr,Is=bo[11]*Fr,ts=bo[8]*yo,$a=bo[9]*yo,ps=bo[10]*yo,ws=bo[11]*yo;for(const Zs of ao){const _a=[],na=[];for(const ba of Zs){const yl=ba.x+Wo.x,Ol=ba.y+Wo.y,vu=bo[0]*yl+bo[4]*Ol+bo[12],Hs=bo[1]*yl+bo[5]*Ol+bo[13],Kl=bo[2]*yl+bo[6]*Ol+bo[14],$l=bo[3]*yl+bo[7]*Ol+bo[15],ks=vu+Ho,Al=Hs+rs,eu=Kl+us,Ys=Math.max($l+Is,1e-5),zl=vu+ts,Nu=Hs+$a,bu=Kl+ps,wu=Math.max($l+ws,1e-5);_a.push(new W_(ks/Ys,Al/Ys,eu/Ys)),na.push(new W_(zl/wu,Nu/wu,bu/wu))}Do.push(_a),_o.push(na)}return[Do,_o]}(br,gr,Dr,Pr,Wr)}(vt,at,fn,sn,Yt,At,Vn,pn,Tn,vt.center.lat,nt.tileID.canonical),rr=nt.queryGeometry;return function(dr,br,gr){let Dr=1/0;W1(gr,br)&&(Dr=AS(gr,br[0]));for(let Pr=0;Pr<br.length;Pr++){const Wr=br[Pr],oo=dr[Pr];for(let jr=0;jr<Wr.length-1;jr++){const Zr=Wr[jr],Kr=[Zr,Wr[jr+1],oo[jr+1],oo[jr],Zr];Ww(gr,Kr)&&(Dr=Math.min(Dr,AS(gr,Kr)))}}return Dr!==1/0&&Dr}(ir,_r,rr.isPointQuery()?rr.screenBounds:rr.screenGeometry)}},line:class extends Xu{constructor(nt){super(nt,TS),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(nt){if(nt==="line-gradient"){const _e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=_e._styleExpression&&_e._styleExpression.expression instanceof Im,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(nt,_e){super.recalculate(nt,_e),this.paint._values["line-floorwidth"]=yy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,nt)}createBucket(nt){return new _h(nt)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(nt){return new Nm(this,nt)}queryRadius(nt){const _e=nt,rt=ys(gy("line-width",this,_e),gy("line-gap-width",this,_e)),at=gy("line-offset",this,_e);return rt/2+Math.abs(at)+B0(this.paint.get("line-translate"))}queryIntersectsFeature(nt,_e,rt,at,ct,vt){if(nt.queryGeometry.isAboveHorizon)return!1;const At=Hw(nt.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),vt.angle,nt.pixelToTileUnitsFactor),Bt=nt.pixelToTileUnitsFactor/2*ys(this.paint.get("line-width").evaluate(_e,rt),this.paint.get("line-gap-width").evaluate(_e,rt)),Wt=this.paint.get("line-offset").evaluate(_e,rt);return Wt&&(at=function(Yt,sn){const fn=[],pn=new pt(0,0);for(let An=0;An<Yt.length;An++){const Tn=Yt[An],kn=[];for(let Vn=0;Vn<Tn.length;Vn++){const ir=Tn[Vn-1],_r=Tn[Vn],rr=Tn[Vn+1],dr=Vn===0?pn:_r.sub(ir)._unit()._perp(),br=Vn===Tn.length-1?pn:rr.sub(_r)._unit()._perp(),gr=dr._add(br)._unit();gr._mult(1/(gr.x*br.x+gr.y*br.y)),kn.push(gr._mult(sn)._add(_r))}fn.push(kn)}return fn}(at,Wt*nt.pixelToTileUnitsFactor)),function(Yt,sn,fn){for(let pn=0;pn<sn.length;pn++){const An=sn[pn];if(Yt.length>=3){for(let Tn=0;Tn<An.length;Tn++)if(Gl(Yt,An[Tn]))return!0}if(px(Yt,An,fn))return!0}return!1}(At,at,Bt)}isTileClipped(){return!0}},symbol:S1,background:class extends Xu{constructor(nt){super(nt,LA)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Xu{constructor(nt){super(nt,BA)}getProgramIds(){return["raster"]}},sky:class extends Xu{constructor(nt){super(nt,Ct),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(nt){nt==="sky-gradient"?this._updateColorRamp():nt!=="sky-atmosphere-sun"&&nt!=="sky-atmosphere-halo-color"&&nt!=="sky-atmosphere-color"&&nt!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=J1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(nt){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const _e=nt.style.light.properties.get("position");return this._lightPosition.azimuthal!==_e.azimuthal||this._lightPosition.polar!==_e.polar}return!1}getCenter(nt,_e){if(this.paint.get("sky-type")==="atmosphere"){const at=this.paint.get("sky-atmosphere-sun"),ct=!at,vt=nt.style.light,At=vt.properties.get("position");return ct&&vt.properties.get("anchor")==="viewport"&&hn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),ct?Qt(At.azimuthal,90-At.polar,_e):Qt(at[0],90-at[1],_e)}const rt=this.paint.get("sky-gradient-center");return Qt(rt[0],90-rt[1],_e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(nt){this._skyboxInvalidated=!1,this._lightPosition=nt.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const nt=this.paint.get("sky-type");return nt==="atmosphere"?["skyboxCapture","skybox"]:nt==="gradient"?["skyboxGradient"]:null}}};class Dn{constructor(_e,rt,at,ct){this.context=_e,this.format=at,this.texture=_e.gl.createTexture(),this.update(rt,ct)}update(_e,rt,at){const{width:ct,height:vt}=_e,{context:At}=this,{gl:Bt}=At,{HTMLImageElement:Wt,HTMLCanvasElement:Yt,HTMLVideoElement:sn,ImageData:fn,ImageBitmap:pn}=it;if(Bt.bindTexture(Bt.TEXTURE_2D,this.texture),At.pixelStoreUnpackFlipY.set(!1),At.pixelStoreUnpack.set(1),At.pixelStoreUnpackPremultiplyAlpha.set(this.format===Bt.RGBA&&(!rt||rt.premultiply!==!1)),at||this.size&&this.size[0]===ct&&this.size[1]===vt){const{x:An,y:Tn}=at||{x:0,y:0};_e instanceof Wt||_e instanceof Yt||_e instanceof sn||_e instanceof fn||pn&&_e instanceof pn?Bt.texSubImage2D(Bt.TEXTURE_2D,0,An,Tn,Bt.RGBA,Bt.UNSIGNED_BYTE,_e):Bt.texSubImage2D(Bt.TEXTURE_2D,0,An,Tn,ct,vt,Bt.RGBA,Bt.UNSIGNED_BYTE,_e.data)}else this.size=[ct,vt],_e instanceof Wt||_e instanceof Yt||_e instanceof sn||_e instanceof fn||pn&&_e instanceof pn?Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,this.format,Bt.UNSIGNED_BYTE,_e):Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,ct,vt,0,this.format,Bt.UNSIGNED_BYTE,_e.data);this.useMipmap=Boolean(rt&&rt.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&Bt.generateMipmap(Bt.TEXTURE_2D)}bind(_e,rt){const{context:at}=this,{gl:ct}=at;ct.bindTexture(ct.TEXTURE_2D,this.texture),_e!==this.filter&&(ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_MAG_FILTER,_e),ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_MIN_FILTER,this.useMipmap?_e===ct.NEAREST?ct.NEAREST_MIPMAP_NEAREST:ct.LINEAR_MIPMAP_NEAREST:_e),this.filter=_e),rt!==this.wrap&&(ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_WRAP_S,rt),ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_WRAP_T,rt),this.wrap=rt)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:_e}=this.context;_e.deleteTexture(this.texture),this.texture=null}}class Kn{constructor(_e){this._callback=_e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class yr{constructor(){this.tasks={},this.taskQueue=[],un(["process"],this),this.invoker=new Kn(this.process),this.nextId=0}add(_e,rt){const at=this.nextId++,ct=function({type:vt,isSymbolTile:At,zoom:Bt}){return Bt=Bt||0,vt==="message"?0:vt!=="maybePrepare"||At?vt!=="parseTile"||At?vt==="parseTile"&&At?300-Bt:vt==="maybePrepare"&&At?400-Bt:500:200-Bt:100-Bt}(rt);if(ct===0){qn();try{_e()}finally{}return{cancel:()=>{}}}return this.tasks[at]={fn:_e,metadata:rt,priority:ct,id:at},this.taskQueue.push(at),this.invoker.trigger(),{cancel:()=>{delete this.tasks[at]}}}process(){qn();try{if(this.taskQueue=this.taskQueue.filter(at=>!!this.tasks[at]),!this.taskQueue.length)return;const _e=this.pick();if(_e===null)return;const rt=this.tasks[_e];if(delete this.tasks[_e],this.taskQueue.length&&this.invoker.trigger(),!rt)return;rt.fn()}finally{}}pick(){let _e=null,rt=1/0;for(let ct=0;ct<this.taskQueue.length;ct++){const vt=this.tasks[this.taskQueue[ct]];vt.priority<rt&&(rt=vt.priority,_e=ct)}if(_e===null)return null;const at=this.taskQueue[_e];return this.taskQueue.splice(_e,1),at}remove(){this.invoker.remove()}}class xr{constructor(_e){this._stringToNumber={},this._numberToString=[];for(let rt=0;rt<_e.length;rt++){const at=_e[rt];this._stringToNumber[at]=rt,this._numberToString[rt]=at}}encode(_e){return this._stringToNumber[_e]}decode(_e){return this._numberToString[_e]}}const Mr=["tile","layer","source","sourceLayer","state"];class no{constructor(_e,rt,at,ct,vt){this.type="Feature",this._vectorTileFeature=_e,this._z=rt,this._x=at,this._y=ct,this.properties=_e.properties,this.id=vt}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(_e){this._geometry=_e}toJSON(){const _e={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(_e.id=this.id);for(const rt of Mr)this[rt]!==void 0&&(_e[rt]=this[rt]);return _e}}const Jr=32,so=33,Co=new Uint16Array(8184);for(let nt=0;nt<2046;nt++){let _e=nt+2,rt=0,at=0,ct=0,vt=0,At=0,Bt=0;for(1&_e?ct=vt=At=Jr:rt=at=Bt=Jr;(_e>>=1)>1;){const Yt=rt+ct>>1,sn=at+vt>>1;1&_e?(ct=rt,vt=at,rt=At,at=Bt):(rt=ct,at=vt,ct=At,vt=Bt),At=Yt,Bt=sn}const Wt=4*nt;Co[Wt+0]=rt,Co[Wt+1]=at,Co[Wt+2]=ct,Co[Wt+3]=vt}const Fo=new Uint16Array(2178),Zo=new Uint8Array(1089),_s=new Uint16Array(1089);function ss(nt){return nt===0?-.03125:nt===32?.03125:0}var Rs=co([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Ps={type:2,extent:Go,loadGeometry:()=>[[new pt(0,0),new pt(8193,0),new pt(8193,8193),new pt(0,8193),new pt(0,0)]]};class ju{constructor(_e,rt,at,ct,vt){this.tileID=_e,this.uid=tn(),this.uses=0,this.tileSize=rt,this.tileZoom=at,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=vt,this.expiredRequestCount=0,this.state="loading",ct&&ct.transform&&(this.projection=ct.transform.projection)}registerFadeDuration(_e){const rt=_e+this.timeAdded;rt<fs.now()||this.fadeEndTime&&rt<this.fadeEndTime||(this.fadeEndTime=rt)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Xy(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(_e,rt,at){if(this.unloadVectorData(),this.state="loaded",_e){_e.featureIndex&&(this.latestFeatureIndex=_e.featureIndex,_e.rawTileData?(this.latestRawTileData=_e.rawTileData,this.latestFeatureIndex.rawTileData=_e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=_e.collisionBoxArray,this.buckets=function(ct,vt){const At={};if(!vt)return At;for(const Bt of ct){const Wt=Bt.layerIds.map(Yt=>vt.getLayer(Yt)).filter(Boolean);if(Wt.length!==0){Bt.layers=Wt,Bt.stateDependentLayerIds&&(Bt.stateDependentLayers=Bt.stateDependentLayerIds.map(Yt=>Wt.filter(sn=>sn.id===Yt)[0]));for(const Yt of Wt)At[Yt.id]=Bt}}return At}(_e.buckets,rt.style),this.hasSymbolBuckets=!1;for(const ct in this.buckets){const vt=this.buckets[ct];if(vt instanceof Sy){if(this.hasSymbolBuckets=!0,!at)break;vt.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const ct in this.buckets){const vt=this.buckets[ct];if(vt instanceof Sy&&vt.hasRTLText){this.hasRTLText=!0,pr.isLoading()||pr.isLoaded()||Zn()!=="deferred"||fr();break}}this.queryPadding=0;for(const ct in this.buckets){const vt=this.buckets[ct];this.queryPadding=Math.max(this.queryPadding,rt.style.getLayer(ct).queryRadius(vt))}_e.imageAtlas&&(this.imageAtlas=_e.imageAtlas),_e.glyphAtlasImage&&(this.glyphAtlasImage=_e.glyphAtlasImage),_e.lineAtlas&&(this.lineAtlas=_e.lineAtlas)}else this.collisionBoxArray=new R_}unloadVectorData(){if(this.hasData()){for(const _e in this.buckets)this.buckets[_e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(_e){return this.buckets[_e.id]}upload(_e){for(const at in this.buckets){const ct=this.buckets[at];ct.uploadPending()&&ct.upload(_e)}const rt=_e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Dn(_e,this.imageAtlas.image,rt.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Dn(_e,this.glyphAtlasImage,rt.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Dn(_e,this.lineAtlas.image,rt.ALPHA),this.lineAtlas.uploaded=!0)}prepare(_e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(_e,this.imageAtlasTexture)}queryRenderedFeatures(_e,rt,at,ct,vt,At,Bt,Wt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:ct,pixelPosMatrix:Bt,transform:At,params:vt,tileTransform:this.tileTransform},_e,rt,at):{}}querySourceFeatures(_e,rt){const at=this.latestFeatureIndex;if(!at||!at.rawTileData)return;const ct=at.loadVTLayers(),vt=rt?rt.sourceLayer:"",At=ct._geojsonTileLayer||ct[vt];if(!At)return;const Bt=v_(rt&&rt.filter),{z:Wt,x:Yt,y:sn}=this.tileID.canonical,fn={z:Wt,x:Yt,y:sn};for(let pn=0;pn<At.length;pn++){const An=At.feature(pn);if(Bt.needGeometry){const Vn=Wy(An,!0);if(!Bt.filter(new tr(this.tileID.overscaledZ),Vn,this.tileID.canonical))continue}else if(!Bt.filter(new tr(this.tileID.overscaledZ),An))continue;const Tn=at.getId(An,vt),kn=new no(An,Wt,Yt,sn,Tn);kn.tile=fn,_e.push(kn)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(_e){const rt=this.expirationTime;if(_e.cacheControl){const at=Ir(_e.cacheControl);at["max-age"]&&(this.expirationTime=Date.now()+1e3*at["max-age"])}else _e.expires&&(this.expirationTime=new Date(_e.expires).getTime());if(this.expirationTime){const at=Date.now();let ct=!1;if(this.expirationTime>at)ct=!1;else if(rt)if(this.expirationTime<rt)ct=!0;else{const vt=this.expirationTime-rt;vt?this.expirationTime=at+Math.max(vt,3e4):ct=!0}else ct=!0;ct?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(_e,rt){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(_e).length===0||!rt)return;const at=this.latestFeatureIndex.loadVTLayers(),ct=rt.style.listImages();for(const vt in this.buckets){if(!rt.style.hasLayer(vt))continue;const At=this.buckets[vt],Bt=At.layers[0].sourceLayer||"_geojsonTileLayer",Wt=at[Bt],Yt=_e[Bt];if(!Wt||!Yt||Object.keys(Yt).length===0)continue;if(At.update(Yt,Wt,ct,this.imageAtlas&&this.imageAtlas.patternPositions||{}),At instanceof _h||At instanceof q0){const fn=rt.style._getSourceCache(At.layers[0].source);rt._terrain&&rt._terrain.enabled&&fn&&At.programConfigurations.needsUpload&&rt._terrain._clearRenderCacheForTile(fn.id,this.tileID)}const sn=rt&&rt.style&&rt.style.getLayer(vt);sn&&(this.queryPadding=Math.max(this.queryPadding,sn.queryRadius(At)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<fs.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(_e){this.symbolFadeHoldUntil=fs.now()+_e}setTexture(_e,rt){const at=rt.context,ct=at.gl;this.texture=this.texture||rt.getTileTexture(_e.width),this.texture?this.texture.update(_e,{useMipmap:!0}):(this.texture=new Dn(at,_e,ct.RGBA,{useMipmap:!0}),this.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),at.extTextureFilterAnisotropic&&ct.texParameterf(ct.TEXTURE_2D,at.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,at.extTextureFilterAnisotropicMax))}setDependencies(_e,rt){const at={};for(const ct of rt)at[ct]=!0;this.dependencies[_e]=at}hasDependency(_e,rt){for(const at of _e){const ct=this.dependencies[at];if(ct){for(const vt of rt)if(ct[vt])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(_e,rt){if(!rt||rt.name==="mercator"||this._tileDebugBuffer)return;const at=Lu(Ps,this.tileID.canonical,this.tileTransform)[0],ct=new ls,vt=new C_;for(let At=0;At<at.length;At++){const{x:Bt,y:Wt}=at[At];ct.emplaceBack(Bt,Wt),vt.emplaceBack(At)}vt.emplaceBack(0),this._tileDebugIndexBuffer=_e.createIndexBuffer(vt),this._tileDebugBuffer=_e.createVertexBuffer(ct,Xv.members),this._tileDebugSegments=Bl.simpleSegment(0,0,ct.length,vt.length)}_makeTileBoundsBuffers(_e,rt){if(this._tileBoundsBuffer||!rt||rt.name==="mercator")return;const at=Lu(Ps,this.tileID.canonical,this.tileTransform)[0];let ct,vt;if(this.isRaster){const At=function(Bt,Wt){const Yt=Xy(Bt,Wt),sn=Math.pow(2,Bt.z);for(let Vn=0;Vn<so;Vn++)for(let ir=0;ir<so;ir++){const _r=gp((Bt.x+(ir+ss(ir))/Jr)/sn),rr=Jl((Bt.y+(Vn+ss(Vn))/Jr)/sn),dr=Wt.project(_r,rr),br=Vn*so+ir;Fo[2*br+0]=Math.round((dr.x*Yt.scale-Yt.x)*Go),Fo[2*br+1]=Math.round((dr.y*Yt.scale-Yt.y)*Go)}Zo.fill(0),_s.fill(0);for(let Vn=2045;Vn>=0;Vn--){const ir=4*Vn,_r=Co[ir+0],rr=Co[ir+1],dr=Co[ir+2],br=Co[ir+3],gr=_r+dr>>1,Dr=rr+br>>1,Pr=gr+Dr-rr,Wr=Dr+_r-gr,oo=rr*so+_r,jr=br*so+dr,Zr=Dr*so+gr,Kr=Math.hypot((Fo[2*oo+0]+Fo[2*jr+0])/2-Fo[2*Zr+0],(Fo[2*oo+1]+Fo[2*jr+1])/2-Fo[2*Zr+1])>=16;if(Zo[Zr]=Zo[Zr]||(Kr?1:0),Vn<1022){const eo=(rr+Wr>>1)*so+(_r+Pr>>1),ao=(br+Wr>>1)*so+(dr+Pr>>1);Zo[Zr]=Zo[Zr]||Zo[eo]||Zo[ao]}}const fn=new Ns,pn=new Xl;let An=0;function Tn(Vn,ir){const _r=ir*so+Vn;return _s[_r]===0&&(fn.emplaceBack(Fo[2*_r+0],Fo[2*_r+1],Vn*Go/Jr,ir*Go/Jr),_s[_r]=++An),_s[_r]-1}function kn(Vn,ir,_r,rr,dr,br){const gr=Vn+_r>>1,Dr=ir+rr>>1;if(Math.abs(Vn-dr)+Math.abs(ir-br)>1&&Zo[Dr*so+gr])kn(dr,br,Vn,ir,gr,Dr),kn(_r,rr,dr,br,gr,Dr);else{const Pr=Tn(Vn,ir),Wr=Tn(_r,rr),oo=Tn(dr,br);pn.emplaceBack(Pr,Wr,oo)}}return kn(0,0,Jr,Jr,Jr,0),kn(Jr,Jr,0,0,0,Jr),{vertices:fn,indices:pn}}(this.tileID.canonical,rt);ct=At.vertices,vt=At.indices}else{ct=new Ns,vt=new Xl;for(const{x:Bt,y:Wt}of at)ct.emplaceBack(Bt,Wt,0,0);const At=zv.exports(ct.int16,void 0,4);for(let Bt=0;Bt<At.length;Bt+=3)vt.emplaceBack(At[Bt],At[Bt+1],At[Bt+2])}this._tileBoundsBuffer=_e.createVertexBuffer(ct,Rs.members),this._tileBoundsIndexBuffer=_e.createIndexBuffer(vt),this._tileBoundsSegments=Bl.simpleSegment(0,0,ct.length,vt.length)}_makeGlobeTileDebugBuffers(_e,rt){const at=rt.projection;if(!at||at.name!=="globe"||rt.freezeTileCoverage)return;const ct=this.tileID.canonical,vt=Qv(QS(ct,rt)),At=nv(rt.zoom);let Bt;At>0&&(Bt=F0(new Float64Array(16),rt.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(_e,ct,rt,vt,Bt,At),this._makeGlobeTileDebugTextBuffer(_e,ct,rt,vt,Bt,At)}_globePoint(_e,rt,at,ct,vt,At,Bt){let Wt=tv(_e,rt,at);if(At){const Yt=1<<at.z,sn=su(ct.center.lng),fn=Kp(ct.center.lat),pn=(at.x+.5)/Yt-sn;let An=0;pn>.5?An=-1:pn<-.5&&(An=1);let Tn=(_e/Go+at.x)/Yt+An,kn=(rt/Go+at.y)/Yt;Tn=(Tn-sn)*ct._pixelsPerMercatorPixel+sn,kn=(kn-fn)*ct._pixelsPerMercatorPixel+fn;const Vn=[Tn*ct.worldSize,kn*ct.worldSize,0];Fl(Vn,Vn,At),Wt=Yy(Wt,Vn,Bt)}return Fl(Wt,Wt,vt)}_makeGlobeTileDebugBorderBuffer(_e,rt,at,ct,vt,At){const Bt=new ls,Wt=new C_,Yt=new Ls,sn=(pn,An,Tn,kn,Vn)=>{const ir=(Tn-pn)/(Vn-1),_r=(kn-An)/(Vn-1),rr=Bt.length;for(let dr=0;dr<Vn;dr++){const br=pn+dr*ir,gr=An+dr*_r;Bt.emplaceBack(br,gr);const Dr=this._globePoint(br,gr,rt,at,ct,vt,At);Yt.emplaceBack(Dr[0],Dr[1],Dr[2]),Wt.emplaceBack(rr+dr)}},fn=Go;sn(0,0,fn,0,16),sn(fn,0,fn,fn,16),sn(fn,fn,0,fn,16),sn(0,fn,0,0,16),this._tileDebugIndexBuffer=_e.createIndexBuffer(Wt),this._tileDebugBuffer=_e.createVertexBuffer(Bt,Xv.members),this._globeTileDebugBorderBuffer=_e.createVertexBuffer(Yt,XS.members),this._tileDebugSegments=Bl.simpleSegment(0,0,Bt.length,Wt.length)}_makeGlobeTileDebugTextBuffer(_e,rt,at,ct,vt,At){const Bt=new ls,Wt=new Xl,Yt=new Ls,sn=25;Wt.reserve(32),Bt.reserve(sn),Yt.reserve(sn);const fn=(pn,An)=>sn*pn+An;for(let pn=0;pn<sn;pn++){const An=2048*pn;for(let Tn=0;Tn<sn;Tn++){const kn=2048*Tn;Bt.emplaceBack(kn,An);const Vn=this._globePoint(kn,An,rt,at,ct,vt,At);Yt.emplaceBack(Vn[0],Vn[1],Vn[2])}}for(let pn=0;pn<4;pn++)for(let An=0;An<4;An++){const Tn=fn(pn,An),kn=fn(pn,An+1),Vn=fn(pn+1,An),ir=fn(pn+1,An+1);Wt.emplaceBack(Tn,kn,Vn),Wt.emplaceBack(Vn,kn,ir)}this._tileDebugTextIndexBuffer=_e.createIndexBuffer(Wt),this._tileDebugTextBuffer=_e.createVertexBuffer(Bt,Xv.members),this._globeTileDebugTextBuffer=_e.createVertexBuffer(Yt,XS.members),this._tileDebugTextSegments=Bl.simpleSegment(0,0,sn,32)}}class Fu{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(_e,rt,at){const ct=String(rt);if(this.stateChanges[_e]=this.stateChanges[_e]||{},this.stateChanges[_e][ct]=this.stateChanges[_e][ct]||{},St(this.stateChanges[_e][ct],at),this.deletedStates[_e]===null){this.deletedStates[_e]={};for(const vt in this.state[_e])vt!==ct&&(this.deletedStates[_e][vt]=null)}else if(this.deletedStates[_e]&&this.deletedStates[_e][ct]===null){this.deletedStates[_e][ct]={};for(const vt in this.state[_e][ct])at[vt]||(this.deletedStates[_e][ct][vt]=null)}else for(const vt in at)this.deletedStates[_e]&&this.deletedStates[_e][ct]&&this.deletedStates[_e][ct][vt]===null&&delete this.deletedStates[_e][ct][vt]}removeFeatureState(_e,rt,at){if(this.deletedStates[_e]===null)return;const ct=String(rt);if(this.deletedStates[_e]=this.deletedStates[_e]||{},at&&rt!==void 0)this.deletedStates[_e][ct]!==null&&(this.deletedStates[_e][ct]=this.deletedStates[_e][ct]||{},this.deletedStates[_e][ct][at]=null);else if(rt!==void 0)if(this.stateChanges[_e]&&this.stateChanges[_e][ct])for(at in this.deletedStates[_e][ct]={},this.stateChanges[_e][ct])this.deletedStates[_e][ct][at]=null;else this.deletedStates[_e][ct]=null;else this.deletedStates[_e]=null}getState(_e,rt){const at=String(rt),ct=St({},(this.state[_e]||{})[at],(this.stateChanges[_e]||{})[at]);if(this.deletedStates[_e]===null)return{};if(this.deletedStates[_e]){const vt=this.deletedStates[_e][rt];if(vt===null)return{};for(const At in vt)delete ct[At]}return ct}initializeTileState(_e,rt){_e.setFeatureState(this.state,rt)}coalesceChanges(_e,rt){const at={};for(const ct in this.stateChanges){this.state[ct]=this.state[ct]||{};const vt={};for(const At in this.stateChanges[ct])this.state[ct][At]||(this.state[ct][At]={}),St(this.state[ct][At],this.stateChanges[ct][At]),vt[At]=this.state[ct][At];at[ct]=vt}for(const ct in this.deletedStates){this.state[ct]=this.state[ct]||{};const vt={};if(this.deletedStates[ct]===null)for(const At in this.state[ct])vt[At]={},this.state[ct][At]={};else for(const At in this.deletedStates[ct]){if(this.deletedStates[ct][At]===null)this.state[ct][At]={};else for(const Bt of Object.keys(this.deletedStates[ct][At]))delete this.state[ct][At][Bt];vt[At]=this.state[ct][At]}at[ct]=at[ct]||{},St(at[ct],vt)}if(this.stateChanges={},this.deletedStates={},Object.keys(at).length!==0)for(const ct in _e)_e[ct].setFeatureState(at,rt)}}class _g{constructor(_e){this.size=_e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(_e,rt){const at=this.toIdx(_e,rt);return{min:this.minimums[at],max:this.maximums[at]}}isLeaf(_e,rt){return this.leaves[this.toIdx(_e,rt)]}toIdx(_e,rt){return rt*this.size+_e}}function Ul(nt,_e,rt,at){let ct=0,vt=Number.MAX_VALUE;for(let At=0;At<3;At++)if(Math.abs(at[At])<1e-15){if(rt[At]<nt[At]||rt[At]>_e[At])return null}else{const Bt=1/at[At];let Wt=(nt[At]-rt[At])*Bt,Yt=(_e[At]-rt[At])*Bt;if(Wt>Yt){const sn=Wt;Wt=Yt,Yt=sn}if(Wt>ct&&(ct=Wt),Yt<vt&&(vt=Yt),ct>vt)return null}return ct}function Dp(nt,_e,rt,at,ct,vt,At,Bt,Wt,Yt,sn){const fn=at-nt,pn=ct-_e,An=vt-rt,Tn=At-nt,kn=Bt-_e,Vn=Wt-rt,ir=sn[1]*Vn-sn[2]*kn,_r=sn[2]*Tn-sn[0]*Vn,rr=sn[0]*kn-sn[1]*Tn,dr=fn*ir+pn*_r+An*rr;if(Math.abs(dr)<1e-15)return null;const br=1/dr,gr=Yt[0]-nt,Dr=Yt[1]-_e,Pr=Yt[2]-rt,Wr=(gr*ir+Dr*_r+Pr*rr)*br;if(Wr<0||Wr>1)return null;const oo=Dr*An-Pr*pn,jr=Pr*fn-gr*An,Zr=gr*pn-Dr*fn,Kr=(sn[0]*oo+sn[1]*jr+sn[2]*Zr)*br;return Kr<0||Wr+Kr>1?null:(Tn*oo+kn*jr+Vn*Zr)*br}function Tm(nt,_e,rt){return(nt-_e)/(rt-_e)}function Mw(nt,_e,rt,at,ct,vt,At,Bt,Wt){const Yt=1<<rt,sn=vt-at,fn=At-ct,pn=(nt+1)/Yt*sn+at,An=(_e+0)/Yt*fn+ct,Tn=(_e+1)/Yt*fn+ct;Bt[0]=(nt+0)/Yt*sn+at,Bt[1]=An,Wt[0]=pn,Wt[1]=Tn}class ZA{constructor(_e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=_e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const rt=function(vt){const At=Math.ceil(Math.log2(vt.dim/8)),Bt=[];let Wt=Math.ceil(Math.pow(2,At));const Yt=1/Wt,sn=(An,Tn,kn,Vn,ir)=>{const _r=Vn?1:0,rr=(An+1)*kn-_r,dr=Tn*kn,br=(Tn+1)*kn-_r;ir[0]=An*kn,ir[1]=dr,ir[2]=rr,ir[3]=br};let fn=new _g(Wt);const pn=[];for(let An=0;An<Wt*Wt;An++){sn(An%Wt,Math.floor(An/Wt),Yt,!1,pn);const Tn=iv(pn[0],pn[1],vt),kn=iv(pn[2],pn[1],vt),Vn=iv(pn[2],pn[3],vt),ir=iv(pn[0],pn[3],vt);fn.minimums.push(Math.min(Tn,kn,Vn,ir)),fn.maximums.push(Math.max(Tn,kn,Vn,ir)),fn.leaves.push(1)}for(Bt.push(fn),Wt/=2;Wt>=1;Wt/=2){const An=Bt[Bt.length-1];fn=new _g(Wt);for(let Tn=0;Tn<Wt*Wt;Tn++){sn(Tn%Wt,Math.floor(Tn/Wt),2,!0,pn);const kn=An.getElevation(pn[0],pn[1]),Vn=An.getElevation(pn[2],pn[1]),ir=An.getElevation(pn[2],pn[3]),_r=An.getElevation(pn[0],pn[3]),rr=An.isLeaf(pn[0],pn[1]),dr=An.isLeaf(pn[2],pn[1]),br=An.isLeaf(pn[2],pn[3]),gr=An.isLeaf(pn[0],pn[3]),Dr=Math.min(kn.min,Vn.min,ir.min,_r.min),Pr=Math.max(kn.max,Vn.max,ir.max,_r.max),Wr=rr&&dr&&br&&gr;fn.maximums.push(Pr),fn.minimums.push(Dr),fn.leaves.push(Pr-Dr<=5&&Wr?1:0)}Bt.push(fn)}return Bt}(this.dem),at=rt.length-1,ct=rt[at];this._addNode(ct.minimums[0],ct.maximums[0],ct.leaves[0]),this._construct(rt,0,0,at,0)}raycastRoot(_e,rt,at,ct,vt,At,Bt=1){return Ul([_e,rt,-100],[at,ct,this.maximums[0]*Bt],vt,At)}raycast(_e,rt,at,ct,vt,At,Bt=1){if(!this.nodeCount)return null;const Wt=this.raycastRoot(_e,rt,at,ct,vt,At,Bt);if(Wt==null)return null;const Yt=[],sn=[],fn=[],pn=[],An=[{idx:0,t:Wt,nodex:0,nodey:0,depth:0}];for(;An.length>0;){const{idx:Tn,t:kn,nodex:Vn,nodey:ir,depth:_r}=An.pop();if(this.leaves[Tn]){Mw(Vn,ir,_r,_e,rt,at,ct,fn,pn);const dr=1<<_r,br=(Vn+0)/dr,gr=(Vn+1)/dr,Dr=(ir+0)/dr,Pr=(ir+1)/dr,Wr=iv(br,Dr,this.dem)*Bt,oo=iv(gr,Dr,this.dem)*Bt,jr=iv(gr,Pr,this.dem)*Bt,Zr=iv(br,Pr,this.dem)*Bt,Kr=Dp(fn[0],fn[1],Wr,pn[0],fn[1],oo,pn[0],pn[1],jr,vt,At),eo=Dp(pn[0],pn[1],jr,fn[0],pn[1],Zr,fn[0],fn[1],Wr,vt,At),ao=Math.min(Kr!==null?Kr:Number.MAX_VALUE,eo!==null?eo:Number.MAX_VALUE);if(ao!==Number.MAX_VALUE)return ao;{const Fr=Uv([],vt,At,kn);if(YA(Wr,oo,Zr,jr,Tm(Fr[0],fn[0],pn[0]),Tm(Fr[1],fn[1],pn[1]))>=Fr[2])return kn}continue}let rr=0;for(let dr=0;dr<this._siblingOffset.length;dr++){Mw((Vn<<1)+this._siblingOffset[dr][0],(ir<<1)+this._siblingOffset[dr][1],_r+1,_e,rt,at,ct,fn,pn),fn[2]=-100,pn[2]=this.maximums[this.childOffsets[Tn]+dr]*Bt;const br=Ul(fn,pn,vt,At);if(br!=null){const gr=br;Yt[dr]=gr;let Dr=!1;for(let Pr=0;Pr<rr&&!Dr;Pr++)gr>=Yt[sn[Pr]]&&(sn.splice(Pr,0,dr),Dr=!0);Dr||(sn[rr]=dr),rr++}}for(let dr=0;dr<rr;dr++){const br=sn[dr];An.push({idx:this.childOffsets[Tn]+br,t:Yt[br],nodex:(Vn<<1)+this._siblingOffset[br][0],nodey:(ir<<1)+this._siblingOffset[br][1],depth:_r+1})}}return null}_addNode(_e,rt,at){return this.minimums.push(_e),this.maximums.push(rt),this.leaves.push(at),this.childOffsets.push(0),this.nodeCount++}_construct(_e,rt,at,ct,vt){if(_e[ct].isLeaf(rt,at)===1)return;this.childOffsets[vt]||(this.childOffsets[vt]=this.nodeCount);const At=ct-1,Bt=_e[At];let Wt=0,Yt=0;for(let sn=0;sn<this._siblingOffset.length;sn++){const fn=2*rt+this._siblingOffset[sn][0],pn=2*at+this._siblingOffset[sn][1],An=Bt.getElevation(fn,pn),Tn=Bt.isLeaf(fn,pn),kn=this._addNode(An.min,An.max,Tn);Tn&&(Wt|=1<<sn),Yt||(Yt=kn)}for(let sn=0;sn<this._siblingOffset.length;sn++)Wt&1<<sn||this._construct(_e,2*rt+this._siblingOffset[sn][0],2*at+this._siblingOffset[sn][1],At,Yt+sn)}}function YA(nt,_e,rt,at,ct,vt){return Ss(Ss(nt,rt,vt),Ss(_e,at,vt),ct)}function iv(nt,_e,rt){const at=rt.dim,ct=Gt(nt*at-.5,0,at-1),vt=Gt(_e*at-.5,0,at-1),At=Math.floor(ct),Bt=Math.floor(vt),Wt=Math.min(At+1,at-1),Yt=Math.min(Bt+1,at-1);return YA(rt.get(At,Bt),rt.get(Wt,Bt),rt.get(At,Yt),rt.get(Wt,Yt),ct-At,vt-Bt)}const KA={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class cx{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(_e,rt,at,ct=!1,vt=!1){if(this.uid=_e,rt.height!==rt.width)throw new RangeError("DEM tiles must be square");if(at&&at!=="mapbox"&&at!=="terrarium")return hn(`"${at}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=rt.height;const At=this.dim=rt.height-2,Bt=new Uint32Array(rt.data.buffer);if(this.pixels=new Uint8Array(rt.data.buffer),this.encoding=at||"mapbox",this.borderReady=ct,!ct){for(let Wt=0;Wt<At;Wt++)Bt[this._idx(-1,Wt)]=Bt[this._idx(0,Wt)],Bt[this._idx(At,Wt)]=Bt[this._idx(At-1,Wt)],Bt[this._idx(Wt,-1)]=Bt[this._idx(Wt,0)],Bt[this._idx(Wt,At)]=Bt[this._idx(Wt,At-1)];Bt[this._idx(-1,-1)]=Bt[this._idx(0,0)],Bt[this._idx(At,-1)]=Bt[this._idx(At-1,0)],Bt[this._idx(-1,At)]=Bt[this._idx(0,At-1)],Bt[this._idx(At,At)]=Bt[this._idx(At-1,At-1)],vt&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ZA(this)}get(_e,rt,at=!1){at&&(_e=Gt(_e,-1,this.dim),rt=Gt(rt,-1,this.dim));const ct=4*this._idx(_e,rt);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[ct],this.pixels[ct+1],this.pixels[ct+2])}static getUnpackVector(_e){return KA[_e]}get unpackVector(){return KA[this.encoding]}_idx(_e,rt){if(_e<-1||_e>=this.dim+1||rt<-1||rt>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(rt+1)*this.stride+(_e+1)}_unpackMapbox(_e,rt,at){return(256*_e*256+256*rt+at)/10-1e4}_unpackTerrarium(_e,rt,at){return 256*_e+rt+at/256-32768}static pack(_e,rt){const at=[0,0,0,0],ct=cx.getUnpackVector(rt);let vt=Math.floor((_e+ct[3])/ct[2]);return at[2]=vt%256,vt=Math.floor(vt/256),at[1]=vt%256,vt=Math.floor(vt/256),at[0]=vt,at}getPixels(){return new _c({width:this.stride,height:this.stride},this.pixels)}backfillBorder(_e,rt,at){if(this.dim!==_e.dim)throw new Error("dem dimension mismatch");let ct=rt*this.dim,vt=rt*this.dim+this.dim,At=at*this.dim,Bt=at*this.dim+this.dim;switch(rt){case-1:ct=vt-1;break;case 1:vt=ct+1}switch(at){case-1:At=Bt-1;break;case 1:Bt=At+1}const Wt=-rt*this.dim,Yt=-at*this.dim;for(let sn=At;sn<Bt;sn++)for(let fn=ct;fn<vt;fn++){const pn=4*this._idx(fn,sn),An=4*this._idx(fn+Wt,sn+Yt);this.pixels[pn+0]=_e.pixels[An+0],this.pixels[pn+1]=_e.pixels[An+1],this.pixels[pn+2]=_e.pixels[An+2],this.pixels[pn+3]=_e.pixels[An+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ao(cx,"DEMData"),Ao(ZA,"DemMinMaxQuadTree",{omit:["dem"]});class hE{constructor(_e,rt){this.max=_e,this.onRemove=rt,this.reset()}reset(){for(const _e in this.data)for(const rt of this.data[_e])rt.timeout&&clearTimeout(rt.timeout),this.onRemove(rt.value);return this.data={},this.order=[],this}add(_e,rt,at){const ct=_e.wrapped().key;this.data[ct]===void 0&&(this.data[ct]=[]);const vt={value:rt,timeout:void 0};if(at!==void 0&&(vt.timeout=setTimeout(()=>{this.remove(_e,vt)},at)),this.data[ct].push(vt),this.order.push(ct),this.order.length>this.max){const At=this._getAndRemoveByKey(this.order[0]);At&&this.onRemove(At)}return this}has(_e){return _e.wrapped().key in this.data}getAndRemove(_e){return this.has(_e)?this._getAndRemoveByKey(_e.wrapped().key):null}_getAndRemoveByKey(_e){const rt=this.data[_e].shift();return rt.timeout&&clearTimeout(rt.timeout),this.data[_e].length===0&&delete this.data[_e],this.order.splice(this.order.indexOf(_e),1),rt.value}getByKey(_e){const rt=this.data[_e];return rt?rt[0].value:null}get(_e){return this.has(_e)?this.data[_e.wrapped().key][0].value:null}remove(_e,rt){if(!this.has(_e))return this;const at=_e.wrapped().key,ct=rt===void 0?0:this.data[at].indexOf(rt),vt=this.data[at][ct];return this.data[at].splice(ct,1),vt.timeout&&clearTimeout(vt.timeout),this.data[at].length===0&&delete this.data[at],this.onRemove(vt.value),this.order.splice(this.order.indexOf(at),1),this}setMaxSize(_e){for(this.max=_e;this.order.length>this.max;){const rt=this._getAndRemoveByKey(this.order[0]);rt&&this.onRemove(rt)}return this}filter(_e){const rt=[];for(const at in this.data)for(const ct of this.data[at])_e(ct.value)||rt.push(ct);for(const at of rt)this.remove(at.value.tileID,at)}}class x1{constructor(_e,rt,at){this.func=_e,this.mask=rt,this.range=at}}x1.ReadOnly=!1,x1.ReadWrite=!0,x1.disabled=new x1(519,x1.ReadOnly,[0,1]);const jA=7680;class FA{constructor(_e,rt,at,ct,vt,At){this.test=_e,this.ref=rt,this.mask=at,this.fail=ct,this.depthFail=vt,this.pass=At}}FA.disabled=new FA({func:519,mask:0},0,0,jA,jA,jA);class xy{constructor(_e,rt,at){this.blendFunction=_e,this.blendColor=rt,this.mask=at}}xy.Replace=[1,0],xy.disabled=new xy(xy.Replace,Fs.transparent,[!1,!1,!1,!1]),xy.unblended=new xy(xy.Replace,Fs.transparent,[!0,!0,!0,!0]),xy.alphaBlended=new xy([1,771],Fs.transparent,[!0,!0,!0,!0]);const NA=1029,UA=2305;class Hm{constructor(_e,rt,at){this.enable=_e,this.mode=rt,this.frontFace=at}}Hm.disabled=new Hm(!1,NA,UA),Hm.backCCW=new Hm(!0,NA,UA),Hm.backCW=new Hm(!0,NA,2304),Hm.frontCW=new Hm(!0,1028,2304),Hm.frontCCW=new Hm(!0,1028,UA);class n0 extends cu{constructor(_e,rt,at){super(),this.id=_e,this._onlySymbols=at,rt.on("data",ct=>{ct.dataType==="source"&&ct.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&ct.dataType==="source"&&ct.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),rt.on("error",()=>{this._sourceErrored=!0}),this._source=rt,this._tiles={},this._cache=new hE(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=rt.minTileCacheSize,this._maxTileCacheSize=rt.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Fu,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(_e){this.map=_e,this._minTileCacheSize=this._minTileCacheSize===void 0&&_e?_e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&_e?_e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const _e in this._tiles){const rt=this._tiles[_e];if(rt.state!=="loaded"&&rt.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const _e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,_e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(_e,rt){return _e.isSymbolTile=this._onlySymbols,this._source.loadTile(_e,rt)}_unloadTile(_e){if(this._source.unloadTile)return this._source.unloadTile(_e,()=>{})}_abortTile(_e){if(this._source.abortTile)return this._source.abortTile(_e,()=>{})}serialize(){return this._source.serialize()}prepare(_e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const rt in this._tiles){const at=this._tiles[rt];at.upload(_e),at.prepare(this.map.style.imageManager)}}getIds(){return Pt(this._tiles).map(_e=>_e.tileID).sort(XA).map(_e=>_e.key)}getRenderableIds(_e){const rt=[];for(const at in this._tiles)this._isIdRenderable(+at,_e)&&rt.push(this._tiles[at]);return _e?rt.sort((at,ct)=>{const vt=at.tileID,At=ct.tileID,Bt=new pt(vt.canonical.x,vt.canonical.y)._rotate(this.transform.angle),Wt=new pt(At.canonical.x,At.canonical.y)._rotate(this.transform.angle);return vt.overscaledZ-At.overscaledZ||Wt.y-Bt.y||Wt.x-Bt.x}).map(at=>at.tileID.key):rt.map(at=>at.tileID).sort(XA).map(at=>at.key)}hasRenderableParent(_e){const rt=this.findLoadedParent(_e,0);return!!rt&&this._isIdRenderable(rt.tileID.key)}_isIdRenderable(_e,rt){return this._tiles[_e]&&this._tiles[_e].hasData()&&!this._coveredTiles[_e]&&(rt||!this._tiles[_e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const _e in this._tiles)this._tiles[_e].state!=="errored"&&this._reloadTile(+_e,"reloading")}}_reloadTile(_e,rt){const at=this._tiles[_e];at&&(at.state!=="loading"&&(at.state=rt),this._loadTile(at,this._tileLoaded.bind(this,at,_e,rt)))}_tileLoaded(_e,rt,at,ct){if(ct)if(_e.state="errored",ct.status!==404)this._source.fire(new xu(ct,{tile:_e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const vt=this.map.painter.terrain;this.update(this.transform,vt.getScaledDemTileSize(),!0),vt.resetTileLookupCache(this.id)}else this.update(this.transform);else _e.timeAdded=fs.now(),at==="expired"&&(_e.refreshedUponExpiration=!0),this._setTileReloadTimer(rt,_e),this._source.type==="raster-dem"&&_e.dem&&this._backfillDEM(_e),this._state.initializeTileState(_e,this.map?this.map.painter:null),this._source.fire(new bs("data",{dataType:"source",tile:_e,coord:_e.tileID,sourceCacheId:this.id}))}_backfillDEM(_e){const rt=this.getRenderableIds();for(let ct=0;ct<rt.length;ct++){const vt=rt[ct];if(_e.neighboringTiles&&_e.neighboringTiles[vt]){const At=this.getTileByID(vt);at(_e,At),at(At,_e)}}function at(ct,vt){if(!ct.dem||ct.dem.borderReady)return;ct.needsHillshadePrepare=!0,ct.needsDEMTextureUpload=!0;let At=vt.tileID.canonical.x-ct.tileID.canonical.x;const Bt=vt.tileID.canonical.y-ct.tileID.canonical.y,Wt=Math.pow(2,ct.tileID.canonical.z),Yt=vt.tileID.key;At===0&&Bt===0||Math.abs(Bt)>1||(Math.abs(At)>1&&(Math.abs(At+Wt)===1?At+=Wt:Math.abs(At-Wt)===1&&(At-=Wt)),vt.dem&&ct.dem&&(ct.dem.backfillBorder(vt.dem,At,Bt),ct.neighboringTiles&&ct.neighboringTiles[Yt]&&(ct.neighboringTiles[Yt].backfilled=!0)))}}getTile(_e){return this.getTileByID(_e.key)}getTileByID(_e){return this._tiles[_e]}_retainLoadedChildren(_e,rt,at,ct){for(const vt in this._tiles){let At=this._tiles[vt];if(ct[vt]||!At.hasData()||At.tileID.overscaledZ<=rt||At.tileID.overscaledZ>at)continue;let Bt=At.tileID;for(;At&&At.tileID.overscaledZ>rt+1;){const Yt=At.tileID.scaledTo(At.tileID.overscaledZ-1);At=this._tiles[Yt.key],At&&At.hasData()&&(Bt=Yt)}let Wt=Bt;for(;Wt.overscaledZ>rt;)if(Wt=Wt.scaledTo(Wt.overscaledZ-1),_e[Wt.key]){ct[Bt.key]=Bt;break}}}findLoadedParent(_e,rt){if(_e.key in this._loadedParentTiles){const at=this._loadedParentTiles[_e.key];return at&&at.tileID.overscaledZ>=rt?at:null}for(let at=_e.overscaledZ-1;at>=rt;at--){const ct=_e.scaledTo(at),vt=this._getLoadedTile(ct);if(vt)return vt}}_getLoadedTile(_e){const rt=this._tiles[_e.key];return rt&&rt.hasData()?rt:this._cache.getByKey(this._source.reparseOverscaled?_e.wrapped().key:_e.canonical.key)}updateCacheSize(_e,rt){rt=rt||this._source.tileSize;const at=Math.ceil(_e.width/rt)+1,ct=Math.ceil(_e.height/rt)+1,vt=Math.floor(at*ct*5),At=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,vt):vt,Bt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,At):At;this._cache.setMaxSize(Bt)}handleWrapJump(_e){const rt=Math.round((_e-(this._prevLng===void 0?_e:this._prevLng))/360);if(this._prevLng=_e,rt){const at={};for(const ct in this._tiles){const vt=this._tiles[ct];vt.tileID=vt.tileID.unwrapTo(vt.tileID.wrap+rt),at[vt.tileID.key]=vt}this._tiles=at;for(const ct in this._timers)clearTimeout(this._timers[ct]),delete this._timers[ct];for(const ct in this._tiles)this._setTileReloadTimer(+ct,this._tiles[ct])}}update(_e,rt,at){if(this.transform=_e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!at)return;let ct;this.updateCacheSize(_e,rt),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?ct=_e.getVisibleUnwrappedCoordinates(this._source.tileID).map(Bt=>new Mu(Bt.canonical.z,Bt.wrap,Bt.canonical.z,Bt.canonical.x,Bt.canonical.y)):(ct=_e.coveringTiles({tileSize:rt||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!at,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(ct=ct.filter(Bt=>this._source.hasTile(Bt)))):ct=[];const vt=this._updateRetainedTiles(ct);if(JA(this._source.type)&&ct.length!==0){const Bt={},Wt={},Yt=Object.keys(vt);for(const fn of Yt){const pn=vt[fn],An=this._tiles[fn];if(!An||An.fadeEndTime&&An.fadeEndTime<=fs.now())continue;const Tn=this.findLoadedParent(pn,Math.max(pn.overscaledZ-n0.maxOverzooming,this._source.minzoom));Tn&&(this._addTile(Tn.tileID),Bt[Tn.tileID.key]=Tn.tileID),Wt[fn]=pn}const sn=ct[ct.length-1].overscaledZ;for(const fn in this._tiles){const pn=this._tiles[fn];if(vt[fn]||!pn.hasData())continue;let An=pn.tileID;for(;An.overscaledZ>sn;){An=An.scaledTo(An.overscaledZ-1);const Tn=this._tiles[An.key];if(Tn&&Tn.hasData()&&Wt[An.key]){vt[fn]=pn.tileID;break}}}for(const fn in Bt)vt[fn]||(this._coveredTiles[fn]=!0,vt[fn]=Bt[fn])}for(const Bt in vt)this._tiles[Bt].clearFadeHold();const At=function(Bt,Wt){const Yt=[];for(const sn in Bt)sn in Wt||Yt.push(sn);return Yt}(this._tiles,vt);for(const Bt of At){const Wt=this._tiles[Bt];Wt.hasSymbolBuckets&&!Wt.holdingForFade()?Wt.setHoldDuration(this.map._fadeDuration):Wt.hasSymbolBuckets&&!Wt.symbolFadeFinished()||this._removeTile(+Bt)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const _e in this._tiles)this._tiles[_e].holdingForFade()&&this._removeTile(+_e)}_updateRetainedTiles(_e){const rt={};if(_e.length===0)return rt;const at={},ct=_e.reduce((Yt,sn)=>Math.min(Yt,sn.overscaledZ),1/0),vt=_e[0].overscaledZ,At=Math.max(vt-n0.maxOverzooming,this._source.minzoom),Bt=Math.max(vt+n0.maxUnderzooming,this._source.minzoom),Wt={};for(const Yt of _e){const sn=this._addTile(Yt);rt[Yt.key]=Yt,sn.hasData()||ct<this._source.maxzoom&&(Wt[Yt.key]=Yt)}this._retainLoadedChildren(Wt,ct,Bt,rt);for(const Yt of _e){let sn=this._tiles[Yt.key];if(sn.hasData())continue;if(Yt.canonical.z>=this._source.maxzoom){const pn=Yt.children(this._source.maxzoom)[0],An=this.getTile(pn);if(An&&An.hasData()){rt[pn.key]=pn;continue}}else{const pn=Yt.children(this._source.maxzoom);if(rt[pn[0].key]&&rt[pn[1].key]&&rt[pn[2].key]&&rt[pn[3].key])continue}let fn=sn.wasRequested();for(let pn=Yt.overscaledZ-1;pn>=At;--pn){const An=Yt.scaledTo(pn);if(at[An.key]||(at[An.key]=!0,sn=this.getTile(An),!sn&&fn&&(sn=this._addTile(An)),sn&&(rt[An.key]=An,fn=sn.wasRequested(),sn.hasData())))break}}return rt}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const _e in this._tiles){const rt=[];let at,ct=this._tiles[_e].tileID;for(;ct.overscaledZ>0;){if(ct.key in this._loadedParentTiles){at=this._loadedParentTiles[ct.key];break}rt.push(ct.key);const vt=ct.scaledTo(ct.overscaledZ-1);if(at=this._getLoadedTile(vt),at)break;ct=vt}for(const vt of rt)this._loadedParentTiles[vt]=at}}_addTile(_e){let rt=this._tiles[_e.key];if(rt)return rt;rt=this._cache.getAndRemove(_e),rt&&(this._setTileReloadTimer(_e.key,rt),rt.tileID=_e,this._state.initializeTileState(rt,this.map?this.map.painter:null),this._cacheTimers[_e.key]&&(clearTimeout(this._cacheTimers[_e.key]),delete this._cacheTimers[_e.key],this._setTileReloadTimer(_e.key,rt)));const at=Boolean(rt);if(!at){const ct=this.map?this.map.painter:null;rt=new ju(_e,this._source.tileSize*_e.overscaleFactor(),this.transform.tileZoom,ct,this._isRaster),this._loadTile(rt,this._tileLoaded.bind(this,rt,_e.key,rt.state))}return rt?(rt.uses++,this._tiles[_e.key]=rt,at||this._source.fire(new bs("dataloading",{tile:rt,coord:rt.tileID,dataType:"source"})),rt):null}_setTileReloadTimer(_e,rt){_e in this._timers&&(clearTimeout(this._timers[_e]),delete this._timers[_e]);const at=rt.getExpiryTimeout();at&&(this._timers[_e]=setTimeout(()=>{this._reloadTile(_e,"expired"),delete this._timers[_e]},at))}_removeTile(_e){const rt=this._tiles[_e];rt&&(rt.uses--,delete this._tiles[_e],this._timers[_e]&&(clearTimeout(this._timers[_e]),delete this._timers[_e]),rt.uses>0||(rt.hasData()&&rt.state!=="reloading"?this._cache.add(rt.tileID,rt,rt.getExpiryTimeout()):(rt.aborted=!0,this._abortTile(rt),this._unloadTile(rt))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const _e in this._tiles)this._removeTile(+_e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(_e,rt,at){const ct=[],vt=this.transform;if(!vt)return ct;const At=vt.projection.name==="globe",Bt=su(vt.center.lng);for(const Wt in this._tiles){const Yt=this._tiles[Wt];if(at&&Yt.clearQueryDebugViz(),Yt.holdingForFade())continue;let sn;if(At){const fn=Yt.tileID.canonical;if(fn.z===0){const pn=[Math.abs(Gt(Bt,...Pw(fn,-1))-Bt),Math.abs(Gt(Bt,...Pw(fn,1))-Bt)];sn=[0,2*pn.indexOf(Math.min(...pn))-1]}else{const pn=[Math.abs(Gt(Bt,...Pw(fn,-1))-Bt),Math.abs(Gt(Bt,...Pw(fn,0))-Bt),Math.abs(Gt(Bt,...Pw(fn,1))-Bt)];sn=[pn.indexOf(Math.min(...pn))-1]}}else sn=[0];for(const fn of sn){const pn=_e.containsTile(Yt,vt,rt,fn);pn&&ct.push(pn)}}return ct}getVisibleCoordinates(_e){const rt=this.getRenderableIds(_e).map(at=>this._tiles[at].tileID);for(const at of rt)at.projMatrix=this.transform.calculateProjMatrix(at.toUnwrapped());return rt}hasTransition(){if(this._source.hasTransition())return!0;if(JA(this._source.type))for(const _e in this._tiles){const rt=this._tiles[_e];if(rt.fadeEndTime!==void 0&&rt.fadeEndTime>=fs.now())return!0}return!1}setFeatureState(_e,rt,at){this._state.updateState(_e=_e||"_geojsonTileLayer",rt,at)}removeFeatureState(_e,rt,at){this._state.removeFeatureState(_e=_e||"_geojsonTileLayer",rt,at)}getFeatureState(_e,rt){return this._state.getState(_e=_e||"_geojsonTileLayer",rt)}setDependencies(_e,rt,at){const ct=this._tiles[_e];ct&&ct.setDependencies(rt,at)}reloadTilesForDependencies(_e,rt){for(const at in this._tiles)this._tiles[at].hasDependency(_e,rt)&&this._reloadTile(+at,"reloading");this._cache.filter(at=>!at.hasDependency(_e,rt))}_preloadTiles(_e,rt){const at=new Map,ct=Array.isArray(_e)?_e:[_e],vt=this.map.painter.terrain,At=this.usedForTerrain&&vt?vt.getScaledDemTileSize():this._source.tileSize;for(const Bt of ct){const Wt=Bt.coveringTiles({tileSize:At,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Yt of Wt)at.set(Yt.key,Yt);this.usedForTerrain&&Bt.updateElevation(!1)}qt(Array.from(at.values()),(Bt,Wt)=>{const Yt=new ju(Bt,this._source.tileSize*Bt.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Yt,sn=>{this._source.type==="raster-dem"&&Yt.dem&&this._backfillDEM(Yt),Wt(sn,Yt)})},rt)}}function XA(nt,_e){const rt=Math.abs(2*nt.wrap)-+(nt.wrap<0),at=Math.abs(2*_e.wrap)-+(_e.wrap<0);return nt.overscaledZ-_e.overscaledZ||at-rt||_e.canonical.y-nt.canonical.y||_e.canonical.x-nt.canonical.x}function JA(nt){return nt==="raster"||nt==="image"||nt==="video"||nt==="custom"}function Pw(nt,_e){const rt=1<<nt.z;return[nt.x/rt+_e,(nt.x+1)/rt+_e]}n0.maxOverzooming=10,n0.maxUnderzooming=3;class hx{constructor(_e,rt,at){this._demTile=_e,this._dem=this._demTile.dem,this._scale=rt,this._offset=at}static create(_e,rt,at){const ct=at||_e.findDEMTileFor(rt);if(!ct||!ct.dem)return;const vt=ct.dem,At=ct.tileID,Bt=1<<rt.canonical.z-At.canonical.z;return new hx(ct,ct.tileSize/Go/Bt,[(rt.canonical.x/Bt-At.canonical.x)*vt.dim,(rt.canonical.y/Bt-At.canonical.y)*vt.dim])}tileCoordToPixel(_e,rt){const at=rt*this._scale+this._offset[1],ct=Math.floor(_e*this._scale+this._offset[0]),vt=Math.floor(at);return new pt(ct,vt)}getElevationAt(_e,rt,at,ct){const vt=_e*this._scale+this._offset[0],At=rt*this._scale+this._offset[1],Bt=Math.floor(vt),Wt=Math.floor(At),Yt=this._dem;return ct=!!ct,at?Ss(Ss(Yt.get(Bt,Wt,ct),Yt.get(Bt,Wt+1,ct),At-Wt),Ss(Yt.get(Bt+1,Wt,ct),Yt.get(Bt+1,Wt+1,ct),At-Wt),vt-Bt):Yt.get(Bt,Wt,ct)}getElevationAtPixel(_e,rt,at){return this._dem.get(_e,rt,!!at)}getMeterToDEM(_e){return(1<<this._demTile.tileID.canonical.z)*dp(1,_e)*this._dem.stride}}class QA{constructor(_e,rt){this.tileID=_e,this.x=_e.canonical.x,this.y=_e.canonical.y,this.z=_e.canonical.z,this.grid=new ay(Go,16,0),this.featureIndexArray=new Iv,this.promoteId=rt}insert(_e,rt,at,ct,vt,At=0){const Bt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(at,ct,vt,At);const Wt=this.grid;for(let Yt=0;Yt<rt.length;Yt++){const sn=rt[Yt],fn=[1/0,1/0,-1/0,-1/0];for(let pn=0;pn<sn.length;pn++){const An=sn[pn];fn[0]=Math.min(fn[0],An.x),fn[1]=Math.min(fn[1],An.y),fn[2]=Math.max(fn[2],An.x),fn[3]=Math.max(fn[3],An.y)}fn[0]<Go&&fn[1]<Go&&fn[2]>=0&&fn[3]>=0&&Wt.insert(Bt,fn[0],fn[1],fn[2],fn[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ow(new $_(this.rawTileData)).layers,this.sourceLayerCoder=new xr(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const _e in this.vtLayers)this.vtFeatures[_e]=[]}return this.vtLayers}query(_e,rt,at,ct){this.loadVTLayers();const vt=_e.params||{},At=v_(vt.filter),Bt=_e.tileResult,Wt=_e.transform,Yt=Bt.bufferedTilespaceBounds,sn=this.grid.query(Yt.min.x,Yt.min.y,Yt.max.x,Yt.max.y,(Tn,kn,Vn,ir)=>L0(Bt.bufferedTilespaceGeometry,Tn,kn,Vn,ir));sn.sort(fE);let fn=null;Wt.elevation&&sn.length>0&&(fn=hx.create(Wt.elevation,this.tileID));const pn={};let An;for(let Tn=0;Tn<sn.length;Tn++){const kn=sn[Tn];if(kn===An)continue;An=kn;const Vn=this.featureIndexArray.get(kn);let ir=null;this.loadMatchingFeature(pn,Vn,At,vt.layers,vt.availableImages,rt,at,ct,(_r,rr,dr,br=0)=>(ir||(ir=Lu(_r,this.tileID.canonical,_e.tileTransform)),rr.queryIntersectsFeature(Bt,_r,dr,ir,this.z,_e.transform,_e.pixelPosMatrix,fn,br)))}return pn}loadMatchingFeature(_e,rt,at,ct,vt,At,Bt,Wt,Yt){const{featureIndex:sn,bucketIndex:fn,sourceLayerIndex:pn,layoutVertexArrayOffset:An}=rt,Tn=this.bucketLayerIDs[fn];if(ct&&!function(_r,rr){for(let dr=0;dr<_r.length;dr++)if(rr.indexOf(_r[dr])>=0)return!0;return!1}(ct,Tn))return;const kn=this.sourceLayerCoder.decode(pn),Vn=this.vtLayers[kn].feature(sn);if(at.needGeometry){const _r=Wy(Vn,!0);if(!at.filter(new tr(this.tileID.overscaledZ),_r,this.tileID.canonical))return}else if(!at.filter(new tr(this.tileID.overscaledZ),Vn))return;const ir=this.getId(Vn,kn);for(let _r=0;_r<Tn.length;_r++){const rr=Tn[_r];if(ct&&ct.indexOf(rr)<0)continue;const dr=At[rr];if(!dr)continue;let br={};ir!==void 0&&Wt&&(br=Wt.getState(dr.sourceLayer||"_geojsonTileLayer",ir));const gr=St({},Bt[rr]);gr.paint=eE(gr.paint,dr.paint,Vn,br,vt),gr.layout=eE(gr.layout,dr.layout,Vn,br,vt);const Dr=!Yt||Yt(Vn,dr,br,An);if(!Dr)continue;const Pr=new no(Vn,this.z,this.x,this.y,ir);Pr.layer=gr;let Wr=_e[rr];Wr===void 0&&(Wr=_e[rr]=[]),Wr.push({featureIndex:sn,feature:Pr,intersectionZ:Dr})}}lookupSymbolFeatures(_e,rt,at,ct,vt,At,Bt,Wt){const Yt={};this.loadVTLayers();const sn=v_(vt);for(const fn of _e)this.loadMatchingFeature(Yt,{bucketIndex:at,sourceLayerIndex:ct,featureIndex:fn,layoutVertexArrayOffset:0},sn,At,Bt,Wt,rt);return Yt}loadFeature(_e){const{featureIndex:rt,sourceLayerIndex:at}=_e;this.loadVTLayers();const ct=this.sourceLayerCoder.decode(at),vt=this.vtFeatures[ct];if(vt[rt])return vt[rt];const At=this.vtLayers[ct].feature(rt);return vt[rt]=At,At}hasLayer(_e){for(const rt of this.bucketLayerIDs)for(const at of rt)if(_e===at)return!0;return!1}getId(_e,rt){let at=_e.id;if(this.promoteId){const ct=typeof this.promoteId=="string"?this.promoteId:this.promoteId[rt];ct!=null&&(at=_e.properties[ct]),typeof at=="boolean"&&(at=Number(at))}return at}}function eE(nt,_e,rt,at,ct){return It(nt,(vt,At)=>{const Bt=_e instanceof qr?_e.get(At):null;return Bt&&Bt.evaluate?Bt.evaluate(rt,at,ct):Bt})}function fE(nt,_e){return _e-nt}Ao(QA,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class tE{constructor(_e,rt){this.width=_e,this.height=rt,this.nextRow=0,this.image=new Um({width:_e,height:rt}),this.positions={},this.uploaded=!1}getDash(_e,rt){const at=this.getKey(_e,rt);return this.positions[at]}trim(){const _e=this.width,rt=this.height=yn(this.nextRow);this.image.resize({width:_e,height:rt})}getKey(_e,rt){return _e.join(",")+rt}getDashRanges(_e,rt,at){const ct=[];let vt=_e.length%2==1?-_e[_e.length-1]*at:0,At=_e[0]*at,Bt=!0;ct.push({left:vt,right:At,isDash:Bt,zeroLength:_e[0]===0});let Wt=_e[0];for(let Yt=1;Yt<_e.length;Yt++){Bt=!Bt;const sn=_e[Yt];vt=Wt*at,Wt+=sn,At=Wt*at,ct.push({left:vt,right:At,isDash:Bt,zeroLength:sn===0})}return ct}addRoundDash(_e,rt,at){const ct=rt/2;for(let vt=-at;vt<=at;vt++){const At=this.width*(this.nextRow+at+vt);let Bt=0,Wt=_e[Bt];for(let Yt=0;Yt<this.width;Yt++){Yt/Wt.right>1&&(Wt=_e[++Bt]);const sn=Math.abs(Yt-Wt.left),fn=Math.abs(Yt-Wt.right),pn=Math.min(sn,fn);let An;const Tn=vt/at*(ct+1);if(Wt.isDash){const kn=ct-Math.abs(Tn);An=Math.sqrt(pn*pn+kn*kn)}else An=ct-Math.sqrt(pn*pn+Tn*Tn);this.image.data[At+Yt]=Math.max(0,Math.min(255,An+128))}}}addRegularDash(_e,rt){for(let Wt=_e.length-1;Wt>=0;--Wt){const Yt=_e[Wt],sn=_e[Wt+1];Yt.zeroLength?_e.splice(Wt,1):sn&&sn.isDash===Yt.isDash&&(sn.left=Yt.left,_e.splice(Wt,1))}const at=_e[0],ct=_e[_e.length-1];at.isDash===ct.isDash&&(at.left=ct.left-this.width,ct.right=at.right+this.width);const vt=this.width*this.nextRow;let At=0,Bt=_e[At];for(let Wt=0;Wt<this.width;Wt++){Wt/Bt.right>1&&(Bt=_e[++At]);const Yt=Math.abs(Wt-Bt.left),sn=Math.abs(Wt-Bt.right),fn=Math.min(Yt,sn);this.image.data[vt+Wt]=Math.max(0,Math.min(255,(Bt.isDash?fn:-fn)+rt+128))}}addDash(_e,rt){const at=this.getKey(_e,rt);if(this.positions[at])return this.positions[at];const ct=rt==="round",vt=ct?7:0,At=2*vt+1;if(this.nextRow+At>this.height)return hn("LineAtlas out of space"),null;_e.length===0&&_e.push(1);let Bt=0;for(let sn=0;sn<_e.length;sn++)_e[sn]<0&&(hn("Negative value is found in line dasharray, replacing values with 0"),_e[sn]=0),Bt+=_e[sn];if(Bt!==0){const sn=this.width/Bt,fn=this.getDashRanges(_e,this.width,sn);ct?this.addRoundDash(fn,sn,vt):this.addRegularDash(fn,rt==="square"?.5*sn:0)}const Wt=this.nextRow+vt;this.nextRow+=At;const Yt={tl:[Wt,vt],br:[Bt,0]};return this.positions[at]=Yt,Yt}}Ao(tE,"LineAtlas");class nE{constructor(_e){const rt={},at=[];for(const Bt in _e){const Wt=_e[Bt],Yt=rt[Bt]={};for(const sn in Wt.glyphs){const fn=Wt.glyphs[+sn];if(!fn||fn.bitmap.width===0||fn.bitmap.height===0)continue;const pn=fn.metrics.localGlyph?2:1,An={x:0,y:0,w:fn.bitmap.width+2*pn,h:fn.bitmap.height+2*pn};at.push(An),Yt[sn]=An}}const{w:ct,h:vt}=r1(at),At=new Um({width:ct||1,height:vt||1});for(const Bt in _e){const Wt=_e[Bt];for(const Yt in Wt.glyphs){const sn=Wt.glyphs[+Yt];if(!sn||sn.bitmap.width===0||sn.bitmap.height===0)continue;const fn=rt[Bt][Yt],pn=sn.metrics.localGlyph?2:1;Um.copy(sn.bitmap,At,{x:0,y:0},{x:fn.x+pn,y:fn.y+pn},sn.bitmap)}}this.image=At,this.positions=rt}}Ao(nE,"GlyphAtlas");class dE{constructor(_e){this.tileID=new Mu(_e.tileID.overscaledZ,_e.tileID.wrap,_e.tileID.canonical.z,_e.tileID.canonical.x,_e.tileID.canonical.y),this.tileZoom=_e.tileZoom,this.uid=_e.uid,this.zoom=_e.zoom,this.canonical=_e.tileID.canonical,this.pixelRatio=_e.pixelRatio,this.tileSize=_e.tileSize,this.source=_e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=_e.showCollisionBoxes,this.collectResourceTiming=!!_e.collectResourceTiming,this.returnDependencies=!!_e.returnDependencies,this.promoteId=_e.promoteId,this.enableTerrain=!!_e.enableTerrain,this.isSymbolTile=_e.isSymbolTile,this.tileTransform=Xy(_e.tileID.canonical,_e.projection),this.projection=_e.projection}parse(_e,rt,at,ct,vt){this.status="parsing",this.data=_e,this.collisionBoxArray=new R_;const At=new xr(Object.keys(_e.layers).sort()),Bt=new QA(this.tileID,this.promoteId);Bt.bucketLayerIDs=[];const Wt={},Yt=new tE(256,256),sn={featureIndex:Bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Yt,availableImages:at},fn=rt.familiesBySource[this.source];for(const br in fn){const gr=_e.layers[br];if(!gr)continue;let Dr=!1,Pr=!1;for(const jr of fn[br])jr[0].type==="symbol"?Dr=!0:Pr=!0;if(this.isSymbolTile===!0&&!Dr||this.isSymbolTile===!1&&!Pr)continue;gr.version===1&&hn(`Vector tile source "${this.source}" layer "${br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wr=At.encode(br),oo=[];for(let jr=0;jr<gr.length;jr++){const Zr=gr.feature(jr),Kr=Bt.getId(Zr,br);oo.push({feature:Zr,id:Kr,index:jr,sourceLayerIndex:Wr})}for(const jr of fn[br]){const Zr=jr[0];this.isSymbolTile!==void 0&&Zr.type==="symbol"!==this.isSymbolTile||Zr.minzoom&&this.zoom<Math.floor(Zr.minzoom)||Zr.maxzoom&&this.zoom>=Zr.maxzoom||Zr.visibility!=="none"&&(zA(jr,this.zoom,at),(Wt[Zr.id]=Zr.createBucket({index:Bt.bucketLayerIDs.length,layers:jr,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wr,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:at})).populate(oo,sn,this.tileID.canonical,this.tileTransform),Bt.bucketLayerIDs.push(jr.map(Kr=>Kr.id)))}}let pn,An,Tn,kn;Yt.trim();const Vn={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ir=It(sn.glyphDependencies,br=>Object.keys(br).map(Number));Object.keys(ir).length?ct.send("getGlyphs",{uid:this.uid,stacks:ir},(br,gr)=>{pn||(pn=br,An=gr,dr.call(this))},void 0,!1,Vn):An={};const _r=Object.keys(sn.iconDependencies);_r.length?ct.send("getImages",{icons:_r,source:this.source,tileID:this.tileID,type:"icons"},(br,gr)=>{pn||(pn=br,Tn=gr,dr.call(this))},void 0,!1,Vn):Tn={};const rr=Object.keys(sn.patternDependencies);function dr(){if(pn)return vt(pn);if(An&&Tn&&kn){const br=new nE(An),gr=new qs(Tn,kn);for(const Dr in Wt){const Pr=Wt[Dr];Pr instanceof Sy?(zA(Pr.layers,this.zoom,at),_A(Pr,An,br.positions,Tn,gr.iconPositions,this.showCollisionBoxes,at,this.tileID.canonical,this.tileZoom,this.projection)):Pr.hasPattern&&(Pr instanceof _h||Pr instanceof q0||Pr instanceof qy)&&(zA(Pr.layers,this.zoom,at),Pr.addFeatures(sn,this.tileID.canonical,gr.patternPositions,at,this.tileTransform))}this.status="done",vt(null,{buckets:Pt(Wt).filter(Dr=>!Dr.isEmpty()),featureIndex:Bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:br.image,lineAtlas:Yt,imageAtlas:gr,glyphMap:this.returnDependencies?An:null,iconMap:this.returnDependencies?Tn:null,glyphPositions:this.returnDependencies?br.positions:null})}}rr.length?ct.send("getImages",{icons:rr,source:this.source,tileID:this.tileID,type:"patterns"},(br,gr)=>{pn||(pn=br,kn=gr,dr.call(this))},void 0,!1,Vn):kn={},dr.call(this)}}function zA(nt,_e,rt){const at=new tr(_e);for(const ct of nt)ct.recalculate(at,rt)}class rE{constructor(_e){this.entries={},this.scheduler=_e}request(_e,rt,at,ct){const vt=this.entries[_e]=this.entries[_e]||{callbacks:[]};if(vt.result){const[At,Bt]=vt.result;return this.scheduler?this.scheduler.add(()=>{ct(At,Bt)},rt):ct(At,Bt),()=>{}}return vt.callbacks.push(ct),vt.cancel||(vt.cancel=at((At,Bt)=>{vt.result=[At,Bt];for(const Wt of vt.callbacks)this.scheduler?this.scheduler.add(()=>{Wt(At,Bt)},rt):Wt(At,Bt);setTimeout(()=>delete this.entries[_e],3e3)})),()=>{vt.result||(vt.callbacks=vt.callbacks.filter(At=>At!==ct),vt.callbacks.length||(vt.cancel(),delete this.entries[_e]))}}}function iE(nt,_e,rt){const at=JSON.stringify(nt.request);return nt.data&&(this.deduped.entries[at]={result:[null,nt.data]}),this.deduped.request(at,{type:"parseTile",isSymbolTile:nt.isSymbolTile,zoom:nt.tileZoom},ct=>{const vt=vs(nt.request,(At,Bt,Wt,Yt)=>{At?ct(At):Bt&&ct(null,{vectorTile:rt?void 0:new ow(new $_(Bt)),rawData:Bt,cacheControl:Wt,expires:Yt})});return()=>{vt.cancel(),ct()}},_e)}j.ARRAY_TYPE=Ju,j.AUTH_ERR_MSG=en,j.Aabb=Ou,j.Actor=class{constructor(nt,_e,rt){this.target=nt,this.parent=_e,this.mapId=rt,this.callbacks={},this.cancelCallbacks={},un(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=qn()?nt:it,this.scheduler=new yr}send(nt,_e,rt,at,ct=!1,vt){const At=Math.round(1e18*Math.random()).toString(36).substring(0,10);rt&&(rt.metadata=vt,this.callbacks[At]=rt);const Bt=Ur(this.globalScope)?void 0:[];return this.target.postMessage({id:At,type:nt,hasCallback:!!rt,targetMapId:at,mustQueue:ct,sourceMapId:this.mapId,data:jy(_e,Bt)},Bt),{cancel:()=>{rt&&delete this.callbacks[At],this.target.postMessage({id:At,type:"<cancel>",targetMapId:at,sourceMapId:this.mapId})}}}receive(nt){const _e=nt.data,rt=_e.id;if(rt&&(!_e.targetMapId||this.mapId===_e.targetMapId))if(_e.type==="<cancel>"){const at=this.cancelCallbacks[rt];delete this.cancelCallbacks[rt],at&&at.cancel()}else if(_e.mustQueue||qn()){const at=this.callbacks[rt];this.cancelCallbacks[rt]=this.scheduler.add(()=>this.processTask(rt,_e),at&&at.metadata||{type:"message"})}else this.processTask(rt,_e)}processTask(nt,_e){if(_e.type==="<response>"){const rt=this.callbacks[nt];delete this.callbacks[nt],rt&&(_e.error?rt(fm(_e.error)):rt(null,fm(_e.data)))}else{const rt=Ur(this.globalScope)?void 0:[],at=_e.hasCallback?(vt,At)=>{delete this.cancelCallbacks[nt],this.target.postMessage({id:nt,type:"<response>",sourceMapId:this.mapId,error:vt?jy(vt):null,data:jy(At,rt)},rt)}:vt=>{},ct=fm(_e.data);if(this.parent[_e.type])this.parent[_e.type](_e.sourceMapId,ct,at);else if(this.parent.getWorkerSource){const vt=_e.type.split(".");this.parent.getWorkerSource(_e.sourceMapId,vt[0],ct.source)[vt[1]](ct,at)}else at(new Error(`Could not find function ${_e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},j.CanonicalTileID=V_,j.Color=Fs,j.ColorMode=xy,j.CullFaceMode=Hm,j.DEMData=cx,j.DataConstantProperty=Or,j.DedupedRequest=rE,j.DepthMode=x1,j.EXTENT=Go,j.Elevation=class{isDataAvailableAtPoint(nt){const _e=this._source();if(this.isUsingMockSource()||!_e||nt.y<0||nt.y>1)return!1;const rt=_e.getSource().maxzoom,at=1<<rt,ct=Math.floor(nt.x),vt=Math.floor((nt.x-ct)*at),At=Math.floor(nt.y*at),Bt=this.findDEMTileFor(new Mu(rt,ct,rt,vt,At));return!(!Bt||!Bt.dem)}getAtPointOrZero(nt,_e=0){return this.getAtPoint(nt,_e)||0}getAtPoint(nt,_e,rt=!0){if(this.isUsingMockSource())return null;_e==null&&(_e=null);const at=this._source();if(!at||nt.y<0||nt.y>1)return _e;const ct=at.getSource().maxzoom,vt=1<<ct,At=Math.floor(nt.x),Bt=nt.x-At,Wt=new Mu(ct,At,ct,Math.floor(Bt*vt),Math.floor(nt.y*vt)),Yt=this.findDEMTileFor(Wt);if(!Yt||!Yt.dem)return _e;const sn=Yt.dem,fn=1<<Yt.tileID.canonical.z,pn=(Bt*fn-Yt.tileID.canonical.x)*sn.dim,An=(nt.y*fn-Yt.tileID.canonical.y)*sn.dim,Tn=Math.floor(pn),kn=Math.floor(An);return(rt?this.exaggeration():1)*Ss(Ss(sn.get(Tn,kn),sn.get(Tn,kn+1),An-kn),Ss(sn.get(Tn+1,kn),sn.get(Tn+1,kn+1),An-kn),pn-Tn)}getAtTileOffset(nt,_e,rt){const at=1<<nt.canonical.z;return this.getAtPointOrZero(new dy(nt.wrap+(nt.canonical.x+_e/Go)/at,(nt.canonical.y+rt/Go)/at))}getAtTileOffsetFunc(nt,_e,rt,at){return ct=>{const vt=this.getAtTileOffset(nt,ct.x,ct.y),At=at.upVector(nt.canonical,ct.x,ct.y);return pp(At,At,vt*at.upVectorScale(nt.canonical,_e,rt).metersToTile),At}}getForTilePoints(nt,_e,rt,at){if(this.isUsingMockSource())return!1;const ct=hx.create(this,nt,at);return!!ct&&(_e.forEach(vt=>{vt[2]=this.exaggeration()*ct.getElevationAt(vt[0],vt[1],rt)}),!0)}getMinMaxForTile(nt){if(this.isUsingMockSource())return null;const _e=this.findDEMTileFor(nt);if(!_e||!_e.dem)return null;const rt=_e.dem.tree,at=_e.tileID,ct=1<<nt.canonical.z-at.canonical.z;let vt=nt.canonical.x/ct-at.canonical.x,At=nt.canonical.y/ct-at.canonical.y,Bt=0;for(let Wt=0;Wt<nt.canonical.z-at.canonical.z&&!rt.leaves[Bt];Wt++){vt*=2,At*=2;const Yt=2*Math.floor(At)+Math.floor(vt);Bt=rt.childOffsets[Bt]+Yt,vt%=1,At%=1}return{min:this.exaggeration()*rt.minimums[Bt],max:this.exaggeration()*rt.maximums[Bt]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(nt,_e,rt){throw new Error("Pure virtual method called.")}pointCoordinate(nt){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(nt){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},j.ErrorEvent=xu,j.EvaluationParameters=tr,j.Event=bs,j.Evented=cu,j.FillExtrusionBucket=qy,j.Frustum=K1,j.FrustumCorners=Qu,j.GLOBE_METERS_TO_ECEF=Sw,j.GLOBE_RADIUS=Gm,j.GLOBE_SCALE_MATCH_LATITUDE=45,j.GLOBE_ZOOM_THRESHOLD_MAX=6,j.GLOBE_ZOOM_THRESHOLD_MIN=5,j.GlobeSharedBuffers=class{constructor(nt){this._createGrid(nt),this._createPoles(nt)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const nt of this._poleSegments)nt.destroy();for(const nt of this._gridSegments)nt.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const nt of this._wireframeSegments)nt.destroy()}}_createGrid(nt){const _e=new ls,rt=new Xl,at=65;for(let ct=0;ct<at;ct++)for(let vt=0;vt<at;vt++)_e.emplaceBack(vt,ct);this._gridSegments=[];for(let ct=0,vt=0;ct<Q_.length;ct++){const At=Q_[ct];for(let Wt=0;Wt<At;Wt++)for(let Yt=0;Yt<64;Yt++){const sn=Wt*at+Yt;rt.emplaceBack(sn+1,sn,sn+at),rt.emplaceBack(sn+at,sn+at+1,sn+1)}const Bt=64*At*2;this._gridSegments.push(Bl.simpleSegment(0,vt,(At+1)*at,Bt)),vt+=Bt}this._gridBuffer=nt.createVertexBuffer(_e,Xv.members),this._gridIndexBuffer=nt.createIndexBuffer(rt,!0)}_createPoles(nt){const _e=new Xl;for(let ct=0;ct<=J_;ct++)_e.emplaceBack(0,ct+1,ct+2);this._poleIndexBuffer=nt.createIndexBuffer(_e,!0);const rt=new Rp,at=new Rp;this._poleSegments=[];for(let ct=0,vt=0;ct<5;ct++){const At=360/(1<<ct);rt.emplaceBack(0,-Gm,0,.5,0),at.emplaceBack(0,-Gm,0,.5,1);for(let Bt=0;Bt<=J_;Bt++){const Wt=Bt/J_,Yt=Ss(0,At,Wt),[sn,fn,pn]=ev(_d,Tw,Yt,Gm);rt.emplaceBack(sn,fn,pn,Wt,0),at.emplaceBack(sn,fn,pn,Wt,1)}this._poleSegments.push(Bl.simpleSegment(vt,0,66,64)),vt+=66}this._poleNorthVertexBuffer=nt.createVertexBuffer(rt,KS,!1),this._poleSouthVertexBuffer=nt.createVertexBuffer(at,KS,!1)}getGridBuffers(nt){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[nt]]}getPoleBuffers(nt){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[nt]]}getWirefameBuffers(nt,_e){if(!this._wireframeSegments){const rt=new _u,at=J_,ct=at+1;this._wireframeSegments=[];for(let vt=0,At=0;vt<Q_.length;vt++){const Bt=Q_[vt];for(let Yt=0;Yt<Bt;Yt++)for(let sn=0;sn<at;sn++){const fn=Yt*ct+sn;rt.emplaceBack(fn,fn+1),rt.emplaceBack(fn,fn+ct),rt.emplaceBack(fn,fn+ct+1)}const Wt=Bt*at*3;this._wireframeSegments.push(Bl.simpleSegment(0,At,(Bt+1)*ct,Wt)),At+=Wt}this._wireframeIndexBuffer=nt.createIndexBuffer(rt)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[_e]]}},j.GlyphManager=Y_,j.ImagePosition=dw,j.LivePerformanceUtils=Br,j.LngLat=Ts,j.LngLatBounds=Yp,j.LocalGlyphMode=a1,j.MAX_MERCATOR_LATITUDE=ym,j.MercatorCoordinate=dy,j.ONE_EM=lu,j.OverscaledTileID=Mu,j.PerformanceMarkers=wr,j.Properties=uo,j.RGBAImage=_c,j.Ray=Y1,j.RequestManager=class{constructor(nt,_e,rt){this._transformRequestFn=nt,this._customAccessToken=_e,this._silenceAuthErrors=!!rt,this._createSkuToken()}_createSkuToken(){const nt=function(){let _e="";for(let rt=0;rt<10;rt++)_e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ft,_e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=nt.token,this._skuTokenExpiresAt=nt.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(nt,_e){return this._transformRequestFn&&this._transformRequestFn(nt,_e)||{url:nt}}normalizeStyleURL(nt,_e){if(!dn(nt))return nt;const rt=nr(nt);return rt.path=`/styles/v1${rt.path}`,this._makeAPIURL(rt,this._customAccessToken||_e)}normalizeGlyphsURL(nt,_e){if(!dn(nt))return nt;const rt=nr(nt);return rt.path=`/fonts/v1${rt.path}`,this._makeAPIURL(rt,this._customAccessToken||_e)}normalizeSourceURL(nt,_e,rt,at){if(!dn(nt))return nt;const ct=nr(nt);return ct.path=`/v4/${ct.authority}.json`,ct.params.push("secure"),rt&&ct.params.push(`language=${rt}`),at&&ct.params.push(`worldview=${at}`),this._makeAPIURL(ct,this._customAccessToken||_e)}normalizeSpriteURL(nt,_e,rt,at){const ct=nr(nt);return dn(nt)?(ct.path=`/styles/v1${ct.path}/sprite${_e}${rt}`,this._makeAPIURL(ct,this._customAccessToken||at)):(ct.path+=`${_e}${rt}`,$n(ct))}normalizeTileURL(nt,_e,rt){if(this._isSkuTokenExpired()&&this._createSkuToken(),nt&&!dn(nt))return nt;const at=nr(nt);at.path=at.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${_e||rt&&at.authority!=="raster"&&rt===512?"@2x":""}${gt.supported?".webp":"$1"}`),at.authority==="raster"?at.path=`/${_t.RASTER_URL_PREFIX}${at.path}`:(at.path=at.path.replace(/^.+\/v4\//,"/"),at.path=`/${_t.TILE_URL_VERSION}${at.path}`);const ct=this._customAccessToken||function(vt){for(const At of vt){const Bt=At.match(/^access_token=(.*)$/);if(Bt)return Bt[1]}return null}(at.params)||_t.ACCESS_TOKEN;return _t.REQUIRE_ACCESS_TOKEN&&ct&&this._skuToken&&at.params.push(`sku=${this._skuToken}`),this._makeAPIURL(at,ct)}canonicalizeTileURL(nt,_e){const rt=nr(nt);if(!rt.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!rt.path.match(/\.[\w]+$/))return nt;let at="mapbox://";rt.path.match(/^\/raster\/v1\//)?at+=`raster/${rt.path.replace(`/${_t.RASTER_URL_PREFIX}/`,"")}`:at+=`tiles/${rt.path.replace(`/${_t.TILE_URL_VERSION}/`,"")}`;let ct=rt.params;return _e&&(ct=ct.filter(vt=>!vt.match(/^access_token=/))),ct.length&&(at+=`?${ct.join("&")}`),at}canonicalizeTileset(nt,_e){const rt=!!_e&&dn(_e),at=[];for(const ct of nt.tiles||[])Cn(ct)?at.push(this.canonicalizeTileURL(ct,rt)):at.push(ct);return at}_makeAPIURL(nt,_e){const rt="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",at=nr(_t.API_URL);if(nt.protocol=at.protocol,nt.authority=at.authority,nt.protocol==="http"){const ct=nt.params.indexOf("secure");ct>=0&&nt.params.splice(ct,1)}if(at.path!=="/"&&(nt.path=`${at.path}${nt.path}`),!_t.REQUIRE_ACCESS_TOKEN)return $n(nt);if(_e=_e||_t.ACCESS_TOKEN,!this._silenceAuthErrors){if(!_e)throw new Error(`An API access token is required to use Mapbox GL. ${rt}`);if(_e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${rt}`)}return nt.params=nt.params.filter(ct=>ct.indexOf("access_token")===-1),nt.params.push(`access_token=${_e||""}`),$n(nt)}},j.ResourceType=cs,j.SegmentVector=Bl,j.SourceCache=n0,j.StencilMode=FA,j.StructArrayLayout1ui2=C_,j.StructArrayLayout2f1f2i16=Ru,j.StructArrayLayout2i4=ls,j.StructArrayLayout2ui4=_u,j.StructArrayLayout3f12=Zu,j.StructArrayLayout3ui6=Xl,j.StructArrayLayout4i8=Ns,j.StructArrayLayout5f20=Rp,j.Texture=Dn,j.Tile=ju,j.Transitionable=Lr,j.Uniform1f=O0,j.Uniform1i=class extends gm{constructor(nt){super(nt),this.current=0}set(nt,_e,rt){this.fetchUniformLocation(nt,_e)&&this.current!==rt&&(this.current=rt,this.gl.uniform1i(this.location,rt))}},j.Uniform2f=class extends gm{constructor(nt){super(nt),this.current=[0,0]}set(nt,_e,rt){this.fetchUniformLocation(nt,_e)&&(rt[0]===this.current[0]&&rt[1]===this.current[1]||(this.current=rt,this.gl.uniform2f(this.location,rt[0],rt[1])))}},j.Uniform3f=class extends gm{constructor(nt){super(nt),this.current=[0,0,0]}set(nt,_e,rt){this.fetchUniformLocation(nt,_e)&&(rt[0]===this.current[0]&&rt[1]===this.current[1]&&rt[2]===this.current[2]||(this.current=rt,this.gl.uniform3f(this.location,rt[0],rt[1],rt[2])))}},j.Uniform4f=F1,j.UniformColor=N1,j.UniformMatrix2f=class extends gm{constructor(nt){super(nt),this.current=fx}set(nt,_e,rt){if(this.fetchUniformLocation(nt,_e)){for(let at=0;at<4;at++)if(rt[at]!==this.current[at]){this.current=rt,this.gl.uniformMatrix2fv(this.location,!1,rt);break}}}},j.UniformMatrix3f=class extends gm{constructor(nt){super(nt),this.current=pm}set(nt,_e,rt){if(this.fetchUniformLocation(nt,_e)){for(let at=0;at<9;at++)if(rt[at]!==this.current[at]){this.current=rt,this.gl.uniformMatrix3fv(this.location,!1,rt);break}}}},j.UniformMatrix4f=class extends gm{constructor(nt){super(nt),this.current=Ku}set(nt,_e,rt){if(this.fetchUniformLocation(nt,_e)){if(rt[12]!==this.current[12]||rt[0]!==this.current[0])return this.current=rt,void this.gl.uniformMatrix4fv(this.location,!1,rt);for(let at=1;at<16;at++)if(rt[at]!==this.current[at]){this.current=rt,this.gl.uniformMatrix4fv(this.location,!1,rt);break}}}},j.UnwrappedTileID=cw,j.ValidationError=wo,j.VectorTileFeature=K0,j.VectorTileWorkerSource=class extends cu{constructor(nt,_e,rt,at,ct){super(),this.actor=nt,this.layerIndex=_e,this.availableImages=rt,this.loadVectorData=ct||iE,this.loading={},this.loaded={},this.deduped=new rE(nt.scheduler),this.isSpriteLoaded=at,this.scheduler=nt.scheduler}loadTile(nt,_e){const rt=nt.uid,at=nt&&nt.request,ct=at&&at.collectResourceTiming,vt=this.loading[rt]=new dE(nt);vt.abort=this.loadVectorData(nt,(At,Bt)=>{const Wt=!this.loading[rt];if(delete this.loading[rt],Wt||At||!Bt)return vt.status="done",Wt||(this.loaded[rt]=vt),_e(At);const Yt=Bt.rawData,sn={};Bt.expires&&(sn.expires=Bt.expires),Bt.cacheControl&&(sn.cacheControl=Bt.cacheControl),vt.vectorTile=Bt.vectorTile||new ow(new $_(Yt));const fn=()=>{vt.parse(vt.vectorTile,this.layerIndex,this.availableImages,this.actor,(pn,An)=>{if(pn||!An)return _e(pn);const Tn={};if(ct){const kn=So(at);kn.length>0&&(Tn.resourceTiming=JSON.parse(JSON.stringify(kn)))}_e(null,St({rawTileData:Yt.slice(0)},An,sn,Tn))})};this.isSpriteLoaded?fn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(fn,{type:"parseTile",isSymbolTile:nt.isSymbolTile,zoom:nt.tileZoom}):fn()}),this.loaded=this.loaded||{},this.loaded[rt]=vt})}reloadTile(nt,_e){const rt=this.loaded,at=nt.uid,ct=this;if(rt&&rt[at]){const vt=rt[at];vt.showCollisionBoxes=nt.showCollisionBoxes,vt.enableTerrain=!!nt.enableTerrain,vt.projection=nt.projection,vt.tileTransform=Xy(nt.tileID.canonical,nt.projection);const At=(Bt,Wt)=>{const Yt=vt.reloadCallback;Yt&&(delete vt.reloadCallback,vt.parse(vt.vectorTile,ct.layerIndex,this.availableImages,ct.actor,Yt)),_e(Bt,Wt)};vt.status==="parsing"?vt.reloadCallback=At:vt.status==="done"&&(vt.vectorTile?vt.parse(vt.vectorTile,this.layerIndex,this.availableImages,this.actor,At):At())}}abortTile(nt,_e){const rt=nt.uid,at=this.loading[rt];at&&(at.abort&&at.abort(),delete this.loading[rt]),_e()}removeTile(nt,_e){const rt=this.loaded,at=nt.uid;rt&&rt[at]&&delete rt[at],_e()}},j.WritingMode=yp,j.ZoomHistory=m0,j.add=bm,j.addDynamicAttributes=w1,j.adjoint=function(nt,_e){var rt=_e[0],at=_e[1],ct=_e[2],vt=_e[3],At=_e[4],Bt=_e[5],Wt=_e[6],Yt=_e[7],sn=_e[8];return nt[0]=At*sn-Bt*Yt,nt[1]=ct*Yt-at*sn,nt[2]=at*Bt-ct*At,nt[3]=Bt*Wt-vt*sn,nt[4]=rt*sn-ct*Wt,nt[5]=ct*vt-rt*Bt,nt[6]=vt*Yt-At*Wt,nt[7]=at*Wt-rt*Yt,nt[8]=rt*At-at*vt,nt},j.asyncAll=qt,j.bezier=Vt,j.bindAll=un,j.boundsAttributes=Rs,j.bufferConvexPolygon=function(nt,_e){const rt=[];for(let at=0;at<nt.length;at++){const ct=Ht(at-1,-1,nt.length-1),vt=Ht(at+1,-1,nt.length-1),At=nt[at],Bt=nt[vt],Wt=nt[ct].sub(At).unit(),Yt=Bt.sub(At).unit(),sn=Yt.angleWithSep(Wt.x,Wt.y),fn=Wt.add(Yt).unit().mult(-1*_e/Math.sin(sn/2));rt.push(At.add(fn))}return rt},j.cacheEntryPossiblyAdded=function(nt){Bs++,Bs>Vo&&(nt.getActor().send("enforceCacheSizeLimit",Mo),Bs=0)},j.calculateGlobeLabelMatrix=function(nt,_e){const{x:rt,y:at}=nt.point,ct=g1(rt,at,nt.worldSize/nt._pixelsPerMercatorPixel,0,0);return D_(ct,ct,Ew(Em(_e)))},j.calculateGlobeMatrix=function(nt){const{x:_e,y:rt}=nt.point,{lng:at,lat:ct}=nt._center;return g1(_e,rt,nt.worldSize,at,ct)},j.calculateGlobeMercatorMatrix=function(nt){const _e=nt.pixelsPerMeter,rt=_e/dp(1,nt.center.lat),at=Xp(new Float64Array(16));return Gy(at,at,[nt.point.x,nt.point.y,0]),py(at,at,[rt,rt,_e]),Float32Array.from(at)},j.circumferenceAtLatitude=P0,j.clamp=Gt,j.clearTileCache=function(nt){if(!Qo())return;const _e=it.caches.delete(Yr);nt&&_e.catch(nt).then(()=>nt())},j.clipLine=Bu,j.clone=function(nt){var _e=new Ju(16);return _e[0]=nt[0],_e[1]=nt[1],_e[2]=nt[2],_e[3]=nt[3],_e[4]=nt[4],_e[5]=nt[5],_e[6]=nt[6],_e[7]=nt[7],_e[8]=nt[8],_e[9]=nt[9],_e[10]=nt[10],_e[11]=nt[11],_e[12]=nt[12],_e[13]=nt[13],_e[14]=nt[14],_e[15]=nt[15],_e},j.clone$1=Kt,j.collisionCircleLayout=iA,j.config=_t,j.conjugate=function(nt,_e){return nt[0]=-_e[0],nt[1]=-_e[1],nt[2]=-_e[2],nt[3]=_e[3],nt},j.create=function(){var nt=new Ju(16);return Ju!=Float32Array&&(nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0),nt[0]=1,nt[5]=1,nt[10]=1,nt[15]=1,nt},j.create$1=Zw,j.createExpression=lm,j.createLayout=co,j.createStyleLayer=function(nt){return nt.type==="custom"?new mt(nt):new bn[nt.type](nt)},j.cross=Z1,j.degToRad=wt,j.distance=function(nt,_e){return Math.hypot(_e[0]-nt[0],_e[1]-nt[1],_e[2]-nt[2])},j.div=function(nt,_e,rt){return nt[0]=_e[0]/rt[0],nt[1]=_e[1]/rt[1],nt[2]=_e[2]/rt[2],nt},j.dot=Mp,j.earthRadius=Dv,j.ease=Xt,j.easeCubicInOut=Tt,j.ecefToLatLng=function([nt,_e,rt]){const at=Math.hypot(nt,_e,rt),ct=Math.atan2(nt,rt),vt=.5*Math.PI-Math.acos(-_e/at);return new Ts(xt(ct),xt(vt))},j.emitValidationErrors=$p,j.endsWith=rn,j.enforceCacheSizeLimit=function(nt){Io(),to&&to.then(_e=>{_e.keys().then(rt=>{for(let at=0;at<rt.length-nt;at++)_e.delete(rt[at])})})},j.evaluateSizeForFeature=G_,j.evaluateSizeForZoom=H_,j.evaluateVariableOffset=YS,j.evented=er,j.exactEquals=function(nt,_e){return nt[0]===_e[0]&&nt[1]===_e[1]&&nt[2]===_e[2]&&nt[3]===_e[3]},j.exactEquals$1=function(nt,_e){return nt[0]===_e[0]&&nt[1]===_e[1]&&nt[2]===_e[2]},j.exported=fs,j.exported$1=gt,j.extend=St,j.extend$1=ga,j.fillExtrusionHeightLift=SS,j.filterObject=Dt,j.fromMat4=function(nt,_e){return nt[0]=_e[0],nt[1]=_e[1],nt[2]=_e[2],nt[3]=_e[4],nt[4]=_e[5],nt[5]=_e[6],nt[6]=_e[8],nt[7]=_e[9],nt[8]=_e[10],nt},j.fromQuat=function(nt,_e){var rt=_e[0],at=_e[1],ct=_e[2],vt=_e[3],At=rt+rt,Bt=at+at,Wt=ct+ct,Yt=rt*At,sn=at*At,fn=at*Bt,pn=ct*At,An=ct*Bt,Tn=ct*Wt,kn=vt*At,Vn=vt*Bt,ir=vt*Wt;return nt[0]=1-fn-Tn,nt[1]=sn+ir,nt[2]=pn-Vn,nt[3]=0,nt[4]=sn-ir,nt[5]=1-Yt-Tn,nt[6]=An+kn,nt[7]=0,nt[8]=pn+Vn,nt[9]=An-kn,nt[10]=1-Yt-fn,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt},j.fromRotation=function(nt,_e){var rt=Math.sin(_e),at=Math.cos(_e);return nt[0]=at,nt[1]=rt,nt[2]=0,nt[3]=-rt,nt[4]=at,nt[5]=0,nt[6]=0,nt[7]=0,nt[8]=1,nt},j.fromScaling=H1,j.furthestTileCorner=function(nt){const _e=Math.round((nt+45+360)%360/90)%4;return Nt[_e]},j.getAABBPointSquareDist=function(nt,_e,rt){let at=0;for(let ct=0;ct<2;++ct){const vt=rt?rt[ct]:0;nt[ct]>vt&&(at+=(nt[ct]-vt)*(nt[ct]-vt)),_e[ct]<vt&&(at+=(vt-_e[ct])*(vt-_e[ct]))}return at},j.getAnchorAlignment=pw,j.getAnchorJustification=_w,j.getBounds=function(nt){let _e=1/0,rt=1/0,at=-1/0,ct=-1/0;for(const vt of nt)_e=Math.min(_e,vt.x),rt=Math.min(rt,vt.y),at=Math.max(at,vt.x),ct=Math.max(ct,vt.y);return{min:new pt(_e,rt),max:new pt(at,ct)}},j.getColumn=Gr,j.getGridMatrix=function(nt,_e,rt,at){const ct=_e.getNorth(),vt=_e.getSouth(),At=_e.getWest(),Bt=_e.getEast(),Wt=1<<nt.z,Yt=Bt-At,sn=ct-vt,fn=Yt/J_,pn=-sn/Q_[rt],An=[0,fn,0,pn,0,0,ct,At,0];if(nt.z>0){const Tn=180/at;Yw(An,An,[Tn/Yt+1,0,0,0,Tn/sn+1,0,-.5*Tn/fn,.5*Tn/pn,1])}return An[2]=Wt,An[5]=nt.x,An[8]=nt.y,An},j.getImage=$t,j.getJSON=function(nt,_e){return zs(St(nt,{type:"json"}),_e)},j.getLatitudinalLod=function(nt){const _e=80.051129;nt=Gt(nt,-80.051129,_e)/_e*90;const rt=Math.pow(Math.abs(Math.sin(wt(nt))),3);return Math.round(rt*(Q_.length-1))},j.getMapSessionAPI=mr,j.getPerformanceMeasurement=So,j.getProjection=lx,j.getRTLTextPluginStatus=Zn,j.getReferrer=Vl,j.getTilePoint=function(nt,{x:_e,y:rt},at=0){return new pt(((_e-at)*nt.scale-nt.x)*Go,(rt*nt.scale-nt.y)*Go)},j.getTileVec3=function(nt,_e,rt=0){return B_(((_e.x-rt)*nt.scale-nt.x)*Go,(_e.y*nt.scale-nt.y)*Go,Vw(_e.z,_e.y))},j.getVideo=function(nt,_e){const rt=it.document.createElement("video");rt.muted=!0,rt.onloadstart=function(){_e(null,rt)};for(let at=0;at<nt.length;at++){const ct=it.document.createElement("source");uu(nt[at])||(rt.crossOrigin="Anonymous"),ct.src=nt[at],rt.appendChild(ct)}return{cancel:()=>{}}},j.globeCenterToScreenPoint=function(nt){const _e=[0,0,0],rt=Xp(new Float64Array(16));return D_(rt,nt.pixelMatrix,nt.globeMatrix),Fl(_e,_e,rt),new pt(_e[0],_e[1])},j.globeDenormalizeECEF=Ew,j.globeECEFOrigin=function(nt,_e){const rt=[0,0,0];return Fl(rt,rt,Qv(Em(_e.canonical))),Fl(rt,rt,nt),rt},j.globeNormalizeECEF=Qv,j.globePixelsToTileUnits=function(nt,_e){return Go/(512*Math.pow(2,nt))*Jv(Em(_e))},j.globePoleMatrixForTile=function(nt,_e,rt){const at=Xp(new Float64Array(16)),ct=(_e/(1<<nt)-.5)*Math.PI*2;return L_(at,rt.globeMatrix,ct),Float32Array.from(at)},j.globeTileBounds=Em,j.globeTiltAtLngLat=nx,j.globeToMercatorTransition=nv,j.globeUseCustomAntiAliasing=function(nt,_e,rt){const at=nv(rt.zoom),ct=nt.style.map._antialias,vt=!!_e.extStandardDerivatives,At=_e.extStandardDerivativesForceOff||nt.terrain&&nt.terrain.exaggeration()>0;return at===0&&!ct&&!At&&vt},j.identity=Xp,j.identity$1=nS,j.invert=F0,j.isFullscreen=function(){return!!it.document.fullscreenElement||!!it.document.webkitFullscreenElement},j.isLngLatBehindGlobe=function(nt,_e){return nx(nt,_e)>Math.PI/2*1.01},j.isMapAuthenticated=function(nt){return hr.has(nt)},j.isMapboxURL=dn,j.isSafariWithAntialiasingBug=function(nt){const _e=nt.navigator?nt.navigator.userAgent:null;return!!Ur(nt)&&_e&&(_e.match("Version/15.4")||_e.match("Version/15.5")||_e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},j.latFromMercatorY=Jl,j.latLngToECEF=Ky,j.len=_x,j.length=Qp,j.length$1=function(nt){return Math.hypot(nt[0],nt[1],nt[2],nt[3])},j.lngFromMercatorX=gp,j.loadVectorTile=iE,j.makeRequest=zs,j.mapValue=function(nt,_e,rt,at,ct){return Gt((nt-_e)/(rt-_e)*(ct-at)+at,at,ct)},j.mercatorScale=_m,j.mercatorXfromLng=su,j.mercatorYfromLat=Kp,j.mercatorZfromAltitude=dp,j.mul=N0,j.mul$1=Jw,j.multiply=D_,j.multiply$1=Yw,j.multiply$2=Kw,j.nextPowerOfTwo=yn,j.normalize=Iu,j.normalize$1=vx,j.normalize$2=eS,j.number=Ss,j.ortho=function(nt,_e,rt,at,ct,vt,At){var Bt=1/(_e-rt),Wt=1/(at-ct),Yt=1/(vt-At);return nt[0]=-2*Bt,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=-2*Wt,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=2*Yt,nt[11]=0,nt[12]=(_e+rt)*Bt,nt[13]=(ct+at)*Wt,nt[14]=(At+vt)*Yt,nt[15]=1,nt},j.pbf=$_,j.perspective=function(nt,_e,rt,at,ct){var vt,At=1/Math.tan(_e/2);return nt[0]=At/rt,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=At,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[11]=-1,nt[12]=0,nt[13]=0,nt[15]=0,ct!=null&&ct!==1/0?(nt[10]=(ct+at)*(vt=1/(at-ct)),nt[14]=2*ct*at*vt):(nt[10]=-1,nt[14]=-2*at),nt},j.pick=function(nt,_e){const rt={};for(let at=0;at<_e.length;at++){const ct=_e[at];ct in nt&&(rt[ct]=nt[ct])}return rt},j.plugin=pr,j.pointGeometry=pt,j.polygonContainsPoint=Gl,j.polygonIntersectsBox=L0,j.polygonIntersectsPolygon=Ww,j.polygonizeBounds=function(nt,_e,rt=0,at=!0){const ct=new pt(rt,rt),vt=nt.sub(ct),At=_e.add(ct),Bt=[vt,new pt(At.x,vt.y),At,new pt(vt.x,At.y)];return at&&Bt.push(vt.clone()),Bt},j.posAttributes=Xv,j.postMapLoadEvent=Hn,j.postPerformanceEvent=lr,j.postTurnstileEvent=En,j.potpack=r1,j.prevPowerOfTwo=function(nt){return nt<=1?1:Math.pow(2,Math.floor(Math.log(nt)/Math.LN2))},j.radToDeg=xt,j.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],j.registerForPluginStateChange=function(nt){return nt({pluginStatus:Gn,pluginURL:Xn}),er.on("pluginStateChange",nt),nt},j.removeAuthState=function(nt){hr.delete(nt)},j.renderColorRamp=J1,j.resample=k0,j.rotateX=Hy,j.rotateX$1=rS,j.rotateY=L_,j.rotateY$1=iS,j.rotateZ=function(nt,_e,rt){var at=Math.sin(rt),ct=Math.cos(rt),vt=_e[0],At=_e[1],Bt=_e[2],Wt=_e[3],Yt=_e[4],sn=_e[5],fn=_e[6],pn=_e[7];return _e!==nt&&(nt[8]=_e[8],nt[9]=_e[9],nt[10]=_e[10],nt[11]=_e[11],nt[12]=_e[12],nt[13]=_e[13],nt[14]=_e[14],nt[15]=_e[15]),nt[0]=vt*ct+Yt*at,nt[1]=At*ct+sn*at,nt[2]=Bt*ct+fn*at,nt[3]=Wt*ct+pn*at,nt[4]=Yt*ct-vt*at,nt[5]=sn*ct-At*at,nt[6]=fn*ct-Bt*at,nt[7]=pn*ct-Wt*at,nt},j.rotateZ$1=function(nt,_e,rt){rt*=.5;var at=_e[0],ct=_e[1],vt=_e[2],At=_e[3],Bt=Math.sin(rt),Wt=Math.cos(rt);return nt[0]=at*Wt+ct*Bt,nt[1]=ct*Wt-at*Bt,nt[2]=vt*Wt+At*Bt,nt[3]=At*Wt-vt*Bt,nt},j.scale=py,j.scale$1=Qw,j.scale$2=pp,j.scaleAndAdd=Uv,j.set=function(nt,_e,rt,at){return nt[0]=_e,nt[1]=rt,nt[2]=at,nt},j.setCacheLimits=function(nt,_e){Mo=nt,Vo=_e},j.setColumn=function(nt,_e,rt){nt[4*_e+0]=rt[0],nt[4*_e+1]=rt[1],nt[4*_e+2]=rt[2],nt[4*_e+3]=rt[3]},j.setRTLTextPlugin=function(nt,_e,rt=!1){if(Gn===Sn||Gn===In||Gn===Bn)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xn=fs.resolveURL(nt),Gn=Sn,Yn=_e,Nn(),rt||fr()},j.smoothstep=Ut,j.spec=Nr,j.squaredLength=function(nt){var _e=nt[0],rt=nt[1],at=nt[2];return _e*_e+rt*rt+at*at},j.storeAuthState=function(nt,_e){_e?hr.add(nt):hr.delete(nt)},j.sub=Pp,j.subtract=q1,j.symbolSize=zm,j.tileAABB=function(nt,_e,rt,at,ct,vt,At,Bt,Wt){if(Wt.name==="globe")return AA(nt,_e,new V_(rt,at,ct));const Yt=Xy({z:rt,x:at,y:ct},Wt);return new Ou([(vt+Yt.x/Yt.scale)*_e,_e*(Yt.y/Yt.scale),At],[(vt+Yt.x2/Yt.scale)*_e,_e*(Yt.y2/Yt.scale),Bt])},j.tileCornersToBounds=d1,j.tileTransform=Xy,j.transformMat3=function(nt,_e,rt){var at=_e[0],ct=_e[1],vt=_e[2];return nt[0]=at*rt[0]+ct*rt[3]+vt*rt[6],nt[1]=at*rt[1]+ct*rt[4]+vt*rt[7],nt[2]=at*rt[2]+ct*rt[5]+vt*rt[8],nt},j.transformMat4=Fl,j.transformMat4$1=my,j.transformQuat=Xw,j.transitionTileAABBinECEF=QS,j.translate=Gy,j.transpose=function(nt,_e){if(nt===_e){var rt=_e[1],at=_e[2],ct=_e[5];nt[1]=_e[3],nt[2]=_e[6],nt[3]=rt,nt[5]=_e[7],nt[6]=at,nt[7]=ct}else nt[0]=_e[0],nt[1]=_e[3],nt[2]=_e[6],nt[3]=_e[1],nt[4]=_e[4],nt[5]=_e[7],nt[6]=_e[2],nt[7]=_e[5],nt[8]=_e[8];return nt},j.triggerPluginCompletionEvent=Un,j.uniqueId=tn,j.updateGlobeVertexNormal=function(nt,_e,rt,at,ct){const vt=5*_e+2;nt.float32[vt+0]=rt,nt.float32[vt+1]=at,nt.float32[vt+2]=ct},j.validateCustomStyleLayer=function(nt){const _e=[],rt=nt.id;return rt===void 0&&_e.push({message:`layers.${rt}: missing required property "id"`}),nt.render===void 0&&_e.push({message:`layers.${rt}: missing required method "render"`}),nt.renderingMode&&nt.renderingMode!=="2d"&&nt.renderingMode!=="3d"&&_e.push({message:`layers.${rt}: property "renderingMode" must be either "2d" or "3d"`}),_e},j.validateFilter=nt=>Hp(Wp(nt)),j.validateFog=nt=>Hp(Wn(nt)),j.validateLayer=nt=>Hp(xv(nt)),j.validateLight=nt=>Hp(Gp(nt)),j.validateSource=nt=>Hp(Lm(nt)),j.validateStyle=Es,j.validateTerrain=nt=>Hp(S_(nt)),j.values=Pt,j.vectorTile=Z0,j.version=st,j.warnOnce=hn,j.window=it,j.wrap=Ht}),et(["./shared"],function(j){function it(Ln){if(typeof Ln=="number"||typeof Ln=="boolean"||typeof Ln=="string"||Ln==null)return JSON.stringify(Ln);if(Array.isArray(Ln)){let Rn="[";for(const Hn of Ln)Rn+=`${it(Hn)},`;return`${Rn}]`}let En="{";for(const Rn of Object.keys(Ln).sort())En+=`${Rn}:${it(Ln[Rn])},`;return`${En}}`}function st(Ln){let En="";for(const Rn of j.refProperties)En+=`/${it(Ln[Rn])}`;return En}class ht{constructor(En){this.keyCache={},En&&this.replace(En)}replace(En){this._layerConfigs={},this._layers={},this.update(En,[])}update(En,Rn){for(const Qn of En)this._layerConfigs[Qn.id]=Qn,(this._layers[Qn.id]=j.createStyleLayer(Qn)).compileFilter(),this.keyCache[Qn.id]&&delete this.keyCache[Qn.id];for(const Qn of Rn)delete this.keyCache[Qn],delete this._layerConfigs[Qn],delete this._layers[Qn];this.familiesBySource={};const Hn=function(Qn,lr){const ur={};for(let hr=0;hr<Qn.length;hr++){const wr=lr&&lr[Qn[hr].id]||st(Qn[hr]);lr&&(lr[Qn[hr].id]=wr);let Br=ur[wr];Br||(Br=ur[wr]=[]),Br.push(Qn[hr])}const mr=[];for(const hr in ur)mr.push(ur[hr]);return mr}(j.values(this._layerConfigs),this.keyCache);for(const Qn of Hn){const lr=Qn.map(Qr=>this._layers[Qr.id]),ur=lr[0];if(ur.visibility==="none")continue;const mr=ur.source||"";let hr=this.familiesBySource[mr];hr||(hr=this.familiesBySource[mr]={});const wr=ur.sourceLayer||"_geojsonTileLayer";let Br=hr[wr];Br||(Br=hr[wr]=[]),Br.push(lr)}}}class _t{loadTile(En,Rn){const{uid:Hn,encoding:Qn,rawImageData:lr,padding:ur,buildQuadTree:mr}=En,hr=j.window.ImageBitmap&&lr instanceof j.window.ImageBitmap?this.getImageData(lr,ur):lr;Rn(null,new j.DEMData(Hn,hr,Qn,ur<1,mr))}getImageData(En,Rn){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(En.width,En.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=En.width,this.offscreenCanvas.height=En.height,this.offscreenCanvasContext.drawImage(En,0,0,En.width,En.height);const Hn=this.offscreenCanvasContext.getImageData(-Rn,-Rn,En.width+2*Rn,En.height+2*Rn);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Hn}}var gt=function Ln(En,Rn){var Hn,Qn=En&&En.type;if(Qn==="FeatureCollection")for(Hn=0;Hn<En.features.length;Hn++)Ln(En.features[Hn],Rn);else if(Qn==="GeometryCollection")for(Hn=0;Hn<En.geometries.length;Hn++)Ln(En.geometries[Hn],Rn);else if(Qn==="Feature")Ln(En.geometry,Rn);else if(Qn==="Polygon")ft(En.coordinates,Rn);else if(Qn==="MultiPolygon")for(Hn=0;Hn<En.coordinates.length;Hn++)ft(En.coordinates[Hn],Rn);return En};function ft(Ln,En){if(Ln.length!==0){ut(Ln[0],En);for(var Rn=1;Rn<Ln.length;Rn++)ut(Ln[Rn],!En)}}function ut(Ln,En){for(var Rn=0,Hn=0,Qn=0,lr=Ln.length,ur=lr-1;Qn<lr;ur=Qn++){var mr=(Ln[Qn][0]-Ln[ur][0])*(Ln[ur][1]+Ln[Qn][1]),hr=Rn+mr;Hn+=Math.abs(Rn)>=Math.abs(mr)?Rn-hr+mr:mr-hr+Rn,Rn=hr}Rn+Hn>=0!=!!En&&Ln.reverse()}const yt=j.VectorTileFeature.prototype.toGeoJSON;class Et{constructor(En){this._feature=En,this.extent=j.EXTENT,this.type=En.type,this.properties=En.tags,"id"in En&&!isNaN(En.id)&&(this.id=parseInt(En.id,10))}loadGeometry(){if(this._feature.type===1){const En=[];for(const Rn of this._feature.geometry)En.push([new j.pointGeometry(Rn[0],Rn[1])]);return En}{const En=[];for(const Rn of this._feature.geometry){const Hn=[];for(const Qn of Rn)Hn.push(new j.pointGeometry(Qn[0],Qn[1]));En.push(Hn)}return En}}toGeoJSON(En,Rn,Hn){return yt.call(this,En,Rn,Hn)}}class Mt{constructor(En){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=j.EXTENT,this.length=En.length,this._features=En}feature(En){return new Et(this._features[En])}}var Ft={exports:{}},Rt=j.pointGeometry,Ot=j.vectorTile.VectorTileFeature,pt=Lt;function Lt(Ln,En){this.options=En||{},this.features=Ln,this.length=Ln.length}function nn(Ln,En){this.id=typeof Ln.id=="number"?Ln.id:void 0,this.type=Ln.type,this.rawGeometry=Ln.type===1?[Ln.geometry]:Ln.geometry,this.properties=Ln.tags,this.extent=En||4096}Lt.prototype.feature=function(Ln){return new nn(this.features[Ln],this.options.extent)},nn.prototype.loadGeometry=function(){var Ln=this.rawGeometry;this.geometry=[];for(var En=0;En<Ln.length;En++){for(var Rn=Ln[En],Hn=[],Qn=0;Qn<Rn.length;Qn++)Hn.push(new Rt(Rn[Qn][0],Rn[Qn][1]));this.geometry.push(Hn)}return this.geometry},nn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ln=this.geometry,En=1/0,Rn=-1/0,Hn=1/0,Qn=-1/0,lr=0;lr<Ln.length;lr++)for(var ur=Ln[lr],mr=0;mr<ur.length;mr++){var hr=ur[mr];En=Math.min(En,hr.x),Rn=Math.max(Rn,hr.x),Hn=Math.min(Hn,hr.y),Qn=Math.max(Qn,hr.y)}return[En,Hn,Rn,Qn]},nn.prototype.toGeoJSON=Ot.prototype.toGeoJSON;var on=j.pbf,wt=pt;function xt(Ln){var En=new on;return function(Rn,Hn){for(var Qn in Rn.layers)Hn.writeMessage(3,Nt,Rn.layers[Qn])}(Ln,En),En.finish()}function Nt(Ln,En){var Rn;En.writeVarintField(15,Ln.version||1),En.writeStringField(1,Ln.name||""),En.writeVarintField(5,Ln.extent||4096);var Hn={keys:[],values:[],keycache:{},valuecache:{}};for(Rn=0;Rn<Ln.length;Rn++)Hn.feature=Ln.feature(Rn),En.writeMessage(2,Tt,Hn);var Qn=Hn.keys;for(Rn=0;Rn<Qn.length;Rn++)En.writeStringField(3,Qn[Rn]);var lr=Hn.values;for(Rn=0;Rn<lr.length;Rn++)En.writeMessage(4,Ht,lr[Rn])}function Tt(Ln,En){var Rn=Ln.feature;Rn.id!==void 0&&En.writeVarintField(1,Rn.id),En.writeMessage(2,Vt,Ln),En.writeVarintField(3,Rn.type),En.writeMessage(4,Ut,Rn)}function Vt(Ln,En){var Rn=Ln.feature,Hn=Ln.keys,Qn=Ln.values,lr=Ln.keycache,ur=Ln.valuecache;for(var mr in Rn.properties){var hr=Rn.properties[mr],wr=lr[mr];if(hr!==null){wr===void 0&&(Hn.push(mr),lr[mr]=wr=Hn.length-1),En.writeVarint(wr);var Br=typeof hr;Br!=="string"&&Br!=="boolean"&&Br!=="number"&&(hr=JSON.stringify(hr));var Qr=Br+":"+hr,Hr=ur[Qr];Hr===void 0&&(Qn.push(hr),ur[Qr]=Hr=Qn.length-1),En.writeVarint(Hr)}}}function Xt(Ln,En){return(En<<3)+(7&Ln)}function Gt(Ln){return Ln<<1^Ln>>31}function Ut(Ln,En){for(var Rn=Ln.loadGeometry(),Hn=Ln.type,Qn=0,lr=0,ur=Rn.length,mr=0;mr<ur;mr++){var hr=Rn[mr],wr=1;Hn===1&&(wr=hr.length),En.writeVarint(Xt(1,wr));for(var Br=Hn===3?hr.length-1:hr.length,Qr=0;Qr<Br;Qr++){Qr===1&&Hn!==1&&En.writeVarint(Xt(2,Br-1));var Hr=hr[Qr].x-Qn,So=hr[Qr].y-lr;En.writeVarint(Gt(Hr)),En.writeVarint(Gt(So)),Qn+=Hr,lr+=So}Hn===3&&En.writeVarint(Xt(7,1))}}function Ht(Ln,En){var Rn=typeof Ln;Rn==="string"?En.writeStringField(1,Ln):Rn==="boolean"?En.writeBooleanField(7,Ln):Rn==="number"&&(Ln%1!=0?En.writeDoubleField(3,Ln):Ln<0?En.writeSVarintField(6,Ln):En.writeVarintField(5,Ln))}function qt(Ln,En,Rn,Hn,Qn,lr){if(Qn-Hn<=Rn)return;const ur=Hn+Qn>>1;Pt(Ln,En,ur,Hn,Qn,lr%2),qt(Ln,En,Rn,Hn,ur-1,lr+1),qt(Ln,En,Rn,ur+1,Qn,lr+1)}function Pt(Ln,En,Rn,Hn,Qn,lr){for(;Qn>Hn;){if(Qn-Hn>600){const wr=Qn-Hn+1,Br=Rn-Hn+1,Qr=Math.log(wr),Hr=.5*Math.exp(2*Qr/3),So=.5*Math.sqrt(Qr*Hr*(wr-Hr)/wr)*(Br-wr/2<0?-1:1);Pt(Ln,En,Rn,Math.max(Hn,Math.floor(Rn-Br*Hr/wr+So)),Math.min(Qn,Math.floor(Rn+(wr-Br)*Hr/wr+So)),lr)}const ur=En[2*Rn+lr];let mr=Hn,hr=Qn;for(St(Ln,En,Hn,Rn),En[2*Qn+lr]>ur&&St(Ln,En,Hn,Qn);mr<hr;){for(St(Ln,En,mr,hr),mr++,hr--;En[2*mr+lr]<ur;)mr++;for(;En[2*hr+lr]>ur;)hr--}En[2*Hn+lr]===ur?St(Ln,En,Hn,hr):(hr++,St(Ln,En,hr,Qn)),hr<=Rn&&(Hn=hr+1),Rn<=hr&&(Qn=hr-1)}}function St(Ln,En,Rn,Hn){Zt(Ln,Rn,Hn),Zt(En,2*Rn,2*Hn),Zt(En,2*Rn+1,2*Hn+1)}function Zt(Ln,En,Rn){const Hn=Ln[En];Ln[En]=Ln[Rn],Ln[Rn]=Hn}function tn(Ln,En,Rn,Hn){const Qn=Ln-Rn,lr=En-Hn;return Qn*Qn+lr*lr}Ft.exports=xt,Ft.exports.fromVectorTileJs=xt,Ft.exports.fromGeojsonVt=function(Ln,En){En=En||{};var Rn={};for(var Hn in Ln)Rn[Hn]=new wt(Ln[Hn].features,En),Rn[Hn].name=Hn,Rn[Hn].version=En.version,Rn[Hn].extent=En.extent;return xt({layers:Rn})},Ft.exports.GeoJSONWrapper=wt;const mn=Ln=>Ln[0],yn=Ln=>Ln[1];class vn{constructor(En,Rn=mn,Hn=yn,Qn=64,lr=Float64Array){this.nodeSize=Qn,this.points=En;const ur=En.length<65536?Uint16Array:Uint32Array,mr=this.ids=new ur(En.length),hr=this.coords=new lr(2*En.length);for(let wr=0;wr<En.length;wr++)mr[wr]=wr,hr[2*wr]=Rn(En[wr]),hr[2*wr+1]=Hn(En[wr]);qt(mr,hr,Qn,0,mr.length-1,0)}range(En,Rn,Hn,Qn){return function(lr,ur,mr,hr,wr,Br,Qr){const Hr=[0,lr.length-1,0],So=[];let Eo,Oo;for(;Hr.length;){const Lo=Hr.pop(),Ko=Hr.pop(),fs=Hr.pop();if(Ko-fs<=Qr){for(let bs=fs;bs<=Ko;bs++)Eo=ur[2*bs],Oo=ur[2*bs+1],Eo>=mr&&Eo<=wr&&Oo>=hr&&Oo<=Br&&So.push(lr[bs]);continue}const vo=Math.floor((fs+Ko)/2);Eo=ur[2*vo],Oo=ur[2*vo+1],Eo>=mr&&Eo<=wr&&Oo>=hr&&Oo<=Br&&So.push(lr[vo]);const As=(Lo+1)%2;(Lo===0?mr<=Eo:hr<=Oo)&&(Hr.push(fs),Hr.push(vo-1),Hr.push(As)),(Lo===0?wr>=Eo:Br>=Oo)&&(Hr.push(vo+1),Hr.push(Ko),Hr.push(As))}return So}(this.ids,this.coords,En,Rn,Hn,Qn,this.nodeSize)}within(En,Rn,Hn){return function(Qn,lr,ur,mr,hr,wr){const Br=[0,Qn.length-1,0],Qr=[],Hr=hr*hr;for(;Br.length;){const So=Br.pop(),Eo=Br.pop(),Oo=Br.pop();if(Eo-Oo<=wr){for(let As=Oo;As<=Eo;As++)tn(lr[2*As],lr[2*As+1],ur,mr)<=Hr&&Qr.push(Qn[As]);continue}const Lo=Math.floor((Oo+Eo)/2),Ko=lr[2*Lo],fs=lr[2*Lo+1];tn(Ko,fs,ur,mr)<=Hr&&Qr.push(Qn[Lo]);const vo=(So+1)%2;(So===0?ur-hr<=Ko:mr-hr<=fs)&&(Br.push(Oo),Br.push(Lo-1),Br.push(vo)),(So===0?ur+hr>=Ko:mr+hr>=fs)&&(Br.push(Lo+1),Br.push(Eo),Br.push(vo))}return Qr}(this.ids,this.coords,En,Rn,Hn,this.nodeSize)}}const un={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ln=>Ln},rn=Math.fround||(It=new Float32Array(1),Ln=>(It[0]=+Ln,It[0]));var It;class Dt{constructor(En){this.options=_i(Object.create(un),En),this.trees=new Array(this.options.maxZoom+1)}load(En){const{log:Rn,minZoom:Hn,maxZoom:Qn,nodeSize:lr}=this.options;Rn&&console.time("total time");const ur=`prepare ${En.length} points`;Rn&&console.time(ur),this.points=En;let mr=[];for(let hr=0;hr<En.length;hr++)En[hr].geometry&&mr.push(gn(En[hr],hr));this.trees[Qn+1]=new vn(mr,Ur,fo,lr,Float32Array),Rn&&console.timeEnd(ur);for(let hr=Qn;hr>=Hn;hr--){const wr=+Date.now();mr=this._cluster(mr,hr),this.trees[hr]=new vn(mr,Ur,fo,lr,Float32Array),Rn&&console.log("z%d: %d clusters in %dms",hr,mr.length,+Date.now()-wr)}return Rn&&console.timeEnd("total time"),this}getClusters(En,Rn){let Hn=((En[0]+180)%360+360)%360-180;const Qn=Math.max(-90,Math.min(90,En[1]));let lr=En[2]===180?180:((En[2]+180)%360+360)%360-180;const ur=Math.max(-90,Math.min(90,En[3]));if(En[2]-En[0]>=360)Hn=-180,lr=180;else if(Hn>lr){const Br=this.getClusters([Hn,Qn,180,ur],Rn),Qr=this.getClusters([-180,Qn,lr,ur],Rn);return Br.concat(Qr)}const mr=this.trees[this._limitZoom(Rn)],hr=mr.range(Mn(Hn),qn(ur),Mn(lr),qn(Qn)),wr=[];for(const Br of hr){const Qr=mr.points[Br];wr.push(Qr.numPoints?hn(Qr):this.points[Qr.index])}return wr}getChildren(En){const Rn=this._getOriginId(En),Hn=this._getOriginZoom(En),Qn="No cluster with the specified id.",lr=this.trees[Hn];if(!lr)throw new Error(Qn);const ur=lr.points[Rn];if(!ur)throw new Error(Qn);const mr=this.options.radius/(this.options.extent*Math.pow(2,Hn-1)),hr=lr.within(ur.x,ur.y,mr),wr=[];for(const Br of hr){const Qr=lr.points[Br];Qr.parentId===En&&wr.push(Qr.numPoints?hn(Qr):this.points[Qr.index])}if(wr.length===0)throw new Error(Qn);return wr}getLeaves(En,Rn,Hn){const Qn=[];return this._appendLeaves(Qn,En,Rn=Rn||10,Hn=Hn||0,0),Qn}getTile(En,Rn,Hn){const Qn=this.trees[this._limitZoom(En)],lr=Math.pow(2,En),{extent:ur,radius:mr}=this.options,hr=mr/ur,wr=(Hn-hr)/lr,Br=(Hn+1+hr)/lr,Qr={features:[]};return this._addTileFeatures(Qn.range((Rn-hr)/lr,wr,(Rn+1+hr)/lr,Br),Qn.points,Rn,Hn,lr,Qr),Rn===0&&this._addTileFeatures(Qn.range(1-hr/lr,wr,1,Br),Qn.points,lr,Hn,lr,Qr),Rn===lr-1&&this._addTileFeatures(Qn.range(0,wr,hr/lr,Br),Qn.points,-1,Hn,lr,Qr),Qr.features.length?Qr:null}getClusterExpansionZoom(En){let Rn=this._getOriginZoom(En)-1;for(;Rn<=this.options.maxZoom;){const Hn=this.getChildren(En);if(Rn++,Hn.length!==1)break;En=Hn[0].properties.cluster_id}return Rn}_appendLeaves(En,Rn,Hn,Qn,lr){const ur=this.getChildren(Rn);for(const mr of ur){const hr=mr.properties;if(hr&&hr.cluster?lr+hr.point_count<=Qn?lr+=hr.point_count:lr=this._appendLeaves(En,hr.cluster_id,Hn,Qn,lr):lr<Qn?lr++:En.push(mr),En.length===Hn)break}return lr}_addTileFeatures(En,Rn,Hn,Qn,lr,ur){for(const mr of En){const hr=Rn[mr],wr=hr.numPoints;let Br,Qr,Hr;if(wr)Br=xn(hr),Qr=hr.x,Hr=hr.y;else{const Oo=this.points[hr.index];Br=Oo.properties,Qr=Mn(Oo.geometry.coordinates[0]),Hr=qn(Oo.geometry.coordinates[1])}const So={type:1,geometry:[[Math.round(this.options.extent*(Qr*lr-Hn)),Math.round(this.options.extent*(Hr*lr-Qn))]],tags:Br};let Eo;wr?Eo=hr.id:this.options.generateId?Eo=hr.index:this.points[hr.index].id&&(Eo=this.points[hr.index].id),Eo!==void 0&&(So.id=Eo),ur.features.push(So)}}_limitZoom(En){return Math.max(this.options.minZoom,Math.min(Math.floor(+En),this.options.maxZoom+1))}_cluster(En,Rn){const Hn=[],{radius:Qn,extent:lr,reduce:ur,minPoints:mr}=this.options,hr=Qn/(lr*Math.pow(2,Rn));for(let wr=0;wr<En.length;wr++){const Br=En[wr];if(Br.zoom<=Rn)continue;Br.zoom=Rn;const Qr=this.trees[Rn+1],Hr=Qr.within(Br.x,Br.y,hr),So=Br.numPoints||1;let Eo=So;for(const Oo of Hr){const Lo=Qr.points[Oo];Lo.zoom>Rn&&(Eo+=Lo.numPoints||1)}if(Eo>So&&Eo>=mr){let Oo=Br.x*So,Lo=Br.y*So,Ko=ur&&So>1?this._map(Br,!0):null;const fs=(wr<<5)+(Rn+1)+this.points.length;for(const vo of Hr){const As=Qr.points[vo];if(As.zoom<=Rn)continue;As.zoom=Rn;const bs=As.numPoints||1;Oo+=As.x*bs,Lo+=As.y*bs,As.parentId=fs,ur&&(Ko||(Ko=this._map(Br,!0)),ur(Ko,this._map(As)))}Br.parentId=fs,Hn.push(Kt(Oo/Eo,Lo/Eo,fs,Eo,Ko))}else if(Hn.push(Br),Eo>1)for(const Oo of Hr){const Lo=Qr.points[Oo];Lo.zoom<=Rn||(Lo.zoom=Rn,Hn.push(Lo))}}return Hn}_getOriginId(En){return En-this.points.length>>5}_getOriginZoom(En){return(En-this.points.length)%32}_map(En,Rn){if(En.numPoints)return Rn?_i({},En.properties):En.properties;const Hn=this.points[En.index].properties,Qn=this.options.map(Hn);return Rn&&Qn===Hn?_i({},Qn):Qn}}function Kt(Ln,En,Rn,Hn,Qn){return{x:rn(Ln),y:rn(En),zoom:1/0,id:Rn,parentId:-1,numPoints:Hn,properties:Qn}}function gn(Ln,En){const[Rn,Hn]=Ln.geometry.coordinates;return{x:rn(Mn(Rn)),y:rn(qn(Hn)),zoom:1/0,index:En,parentId:-1}}function hn(Ln){return{type:"Feature",id:Ln.id,properties:xn(Ln),geometry:{type:"Point",coordinates:[(En=Ln.x,360*(En-.5)),Ir(Ln.y)]}};var En}function xn(Ln){const En=Ln.numPoints,Rn=En>=1e4?`${Math.round(En/1e3)}k`:En>=1e3?Math.round(En/100)/10+"k":En;return _i(_i({},Ln.properties),{cluster:!0,cluster_id:Ln.id,point_count:En,point_count_abbreviated:Rn})}function Mn(Ln){return Ln/360+.5}function qn(Ln){const En=Math.sin(Ln*Math.PI/180),Rn=.5-.25*Math.log((1+En)/(1-En))/Math.PI;return Rn<0?0:Rn>1?1:Rn}function Ir(Ln){const En=(180-360*Ln)*Math.PI/180;return 360*Math.atan(Math.exp(En))/Math.PI-90}function _i(Ln,En){for(const Rn in En)Ln[Rn]=En[Rn];return Ln}function Ur(Ln){return Ln.x}function fo(Ln){return Ln.y}function Gr(Ln,En,Rn,Hn){for(var Qn,lr=Hn,ur=Rn-En>>1,mr=Rn-En,hr=Ln[En],wr=Ln[En+1],Br=Ln[Rn],Qr=Ln[Rn+1],Hr=En+3;Hr<Rn;Hr+=3){var So=Yr(Ln[Hr],Ln[Hr+1],hr,wr,Br,Qr);if(So>lr)Qn=Hr,lr=So;else if(So===lr){var Eo=Math.abs(Hr-ur);Eo<mr&&(Qn=Hr,mr=Eo)}}lr>Hn&&(Qn-En>3&&Gr(Ln,En,Qn,Hn),Ln[Qn+2]=lr,Rn-Qn>3&&Gr(Ln,Qn,Rn,Hn))}function Yr(Ln,En,Rn,Hn,Qn,lr){var ur=Qn-Rn,mr=lr-Hn;if(ur!==0||mr!==0){var hr=((Ln-Rn)*ur+(En-Hn)*mr)/(ur*ur+mr*mr);hr>1?(Rn=Qn,Hn=lr):hr>0&&(Rn+=ur*hr,Hn+=mr*hr)}return(ur=Ln-Rn)*ur+(mr=En-Hn)*mr}function to(Ln,En,Rn,Hn){var Qn={id:Ln===void 0?null:Ln,type:En,geometry:Rn,tags:Hn,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(lr){var ur=lr.geometry,mr=lr.type;if(mr==="Point"||mr==="MultiPoint"||mr==="LineString")Ro(lr,ur);else if(mr==="Polygon"||mr==="MultiLineString")for(var hr=0;hr<ur.length;hr++)Ro(lr,ur[hr]);else if(mr==="MultiPolygon")for(hr=0;hr<ur.length;hr++)for(var wr=0;wr<ur[hr].length;wr++)Ro(lr,ur[hr][wr])}(Qn),Qn}function Ro(Ln,En){for(var Rn=0;Rn<En.length;Rn+=3)Ln.minX=Math.min(Ln.minX,En[Rn]),Ln.minY=Math.min(Ln.minY,En[Rn+1]),Ln.maxX=Math.max(Ln.maxX,En[Rn]),Ln.maxY=Math.max(Ln.maxY,En[Rn+1])}function Mo(Ln,En,Rn,Hn){if(En.geometry){var Qn=En.geometry.coordinates,lr=En.geometry.type,ur=Math.pow(Rn.tolerance/((1<<Rn.maxZoom)*Rn.extent),2),mr=[],hr=En.id;if(Rn.promoteId?hr=En.properties[Rn.promoteId]:Rn.generateId&&(hr=Hn||0),lr==="Point")Vo(Qn,mr);else if(lr==="MultiPoint")for(var wr=0;wr<Qn.length;wr++)Vo(Qn[wr],mr);else if(lr==="LineString")Qo(Qn,mr,ur,!1);else if(lr==="MultiLineString"){if(Rn.lineMetrics){for(wr=0;wr<Qn.length;wr++)Qo(Qn[wr],mr=[],ur,!1),Ln.push(to(hr,"LineString",mr,En.properties));return}Io(Qn,mr,ur,!1)}else if(lr==="Polygon")Io(Qn,mr,ur,!0);else{if(lr!=="MultiPolygon"){if(lr==="GeometryCollection"){for(wr=0;wr<En.geometry.geometries.length;wr++)Mo(Ln,{id:hr,geometry:En.geometry.geometries[wr],properties:En.properties},Rn,Hn);return}throw new Error("Input data is not a valid GeoJSON object.")}for(wr=0;wr<Qn.length;wr++){var Br=[];Io(Qn[wr],Br,ur,!0),mr.push(Br)}}Ln.push(to(hr,lr,mr,En.properties))}}function Vo(Ln,En){En.push(as(Ln[0])),En.push(Bs(Ln[1])),En.push(0)}function Qo(Ln,En,Rn,Hn){for(var Qn,lr,ur=0,mr=0;mr<Ln.length;mr++){var hr=as(Ln[mr][0]),wr=Bs(Ln[mr][1]);En.push(hr),En.push(wr),En.push(0),mr>0&&(ur+=Hn?(Qn*wr-hr*lr)/2:Math.sqrt(Math.pow(hr-Qn,2)+Math.pow(wr-lr,2))),Qn=hr,lr=wr}var Br=En.length-3;En[2]=1,Gr(En,0,Br,Rn),En[Br+2]=1,En.size=Math.abs(ur),En.start=0,En.end=En.size}function Io(Ln,En,Rn,Hn){for(var Qn=0;Qn<Ln.length;Qn++){var lr=[];Qo(Ln[Qn],lr,Rn,Hn),En.push(lr)}}function as(Ln){return Ln/360+.5}function Bs(Ln){var En=Math.sin(Ln*Math.PI/180),Rn=.5-.25*Math.log((1+En)/(1-En))/Math.PI;return Rn<0?0:Rn>1?1:Rn}function cs(Ln,En,Rn,Hn,Qn,lr,ur,mr){if(Hn/=En,lr>=(Rn/=En)&&ur<Hn)return Ln;if(ur<Rn||lr>=Hn)return null;for(var hr=[],wr=0;wr<Ln.length;wr++){var Br=Ln[wr],Qr=Br.geometry,Hr=Br.type,So=Qn===0?Br.minX:Br.minY,Eo=Qn===0?Br.maxX:Br.maxY;if(So>=Rn&&Eo<Hn)hr.push(Br);else if(!(Eo<Rn||So>=Hn)){var Oo=[];if(Hr==="Point"||Hr==="MultiPoint")Zl(Qr,Oo,Rn,Hn,Qn);else if(Hr==="LineString")Vl(Qr,Oo,Rn,Hn,Qn,!1,mr.lineMetrics);else if(Hr==="MultiLineString")vs(Qr,Oo,Rn,Hn,Qn,!1);else if(Hr==="Polygon")vs(Qr,Oo,Rn,Hn,Qn,!0);else if(Hr==="MultiPolygon")for(var Lo=0;Lo<Qr.length;Lo++){var Ko=[];vs(Qr[Lo],Ko,Rn,Hn,Qn,!0),Ko.length&&Oo.push(Ko)}if(Oo.length){if(mr.lineMetrics&&Hr==="LineString"){for(Lo=0;Lo<Oo.length;Lo++)hr.push(to(Br.id,Hr,Oo[Lo],Br.tags));continue}Hr!=="LineString"&&Hr!=="MultiLineString"||(Oo.length===1?(Hr="LineString",Oo=Oo[0]):Hr="MultiLineString"),Hr!=="Point"&&Hr!=="MultiPoint"||(Hr=Oo.length===3?"Point":"MultiPoint"),hr.push(to(Br.id,Hr,Oo,Br.tags))}}}return hr.length?hr:null}function Zl(Ln,En,Rn,Hn,Qn){for(var lr=0;lr<Ln.length;lr+=3){var ur=Ln[lr+Qn];ur>=Rn&&ur<=Hn&&(En.push(Ln[lr]),En.push(Ln[lr+1]),En.push(Ln[lr+2]))}}function Vl(Ln,En,Rn,Hn,Qn,lr,ur){for(var mr,hr,wr=zs(Ln),Br=Qn===0?No:tu,Qr=Ln.start,Hr=0;Hr<Ln.length-3;Hr+=3){var So=Ln[Hr],Eo=Ln[Hr+1],Oo=Ln[Hr+2],Lo=Ln[Hr+3],Ko=Ln[Hr+4],fs=Qn===0?So:Eo,vo=Qn===0?Lo:Ko,As=!1;ur&&(mr=Math.sqrt(Math.pow(So-Lo,2)+Math.pow(Eo-Ko,2))),fs<Rn?vo>Rn&&(hr=Br(wr,So,Eo,Lo,Ko,Rn),ur&&(wr.start=Qr+mr*hr)):fs>Hn?vo<Hn&&(hr=Br(wr,So,Eo,Lo,Ko,Hn),ur&&(wr.start=Qr+mr*hr)):uu(wr,So,Eo,Oo),vo<Rn&&fs>=Rn&&(hr=Br(wr,So,Eo,Lo,Ko,Rn),As=!0),vo>Hn&&fs<=Hn&&(hr=Br(wr,So,Eo,Lo,Ko,Hn),As=!0),!lr&&As&&(ur&&(wr.end=Qr+mr*hr),En.push(wr),wr=zs(Ln)),ur&&(Qr+=mr)}var bs=Ln.length-3;So=Ln[bs],Eo=Ln[bs+1],Oo=Ln[bs+2],(fs=Qn===0?So:Eo)>=Rn&&fs<=Hn&&uu(wr,So,Eo,Oo),bs=wr.length-3,lr&&bs>=3&&(wr[bs]!==wr[0]||wr[bs+1]!==wr[1])&&uu(wr,wr[0],wr[1],wr[2]),wr.length&&En.push(wr)}function zs(Ln){var En=[];return En.size=Ln.size,En.start=Ln.start,En.end=Ln.end,En}function vs(Ln,En,Rn,Hn,Qn,lr){for(var ur=0;ur<Ln.length;ur++)Vl(Ln[ur],En,Rn,Hn,Qn,lr,!1)}function uu(Ln,En,Rn,Hn){Ln.push(En),Ln.push(Rn),Ln.push(Hn)}function No(Ln,En,Rn,Hn,Qn,lr){var ur=(lr-En)/(Hn-En);return Ln.push(lr),Ln.push(Rn+(Qn-Rn)*ur),Ln.push(1),ur}function tu(Ln,En,Rn,Hn,Qn,lr){var ur=(lr-Rn)/(Qn-Rn);return Ln.push(En+(Hn-En)*ur),Ln.push(lr),Ln.push(1),ur}function cr(Ln,En){for(var Rn=[],Hn=0;Hn<Ln.length;Hn++){var Qn,lr=Ln[Hn],ur=lr.type;if(ur==="Point"||ur==="MultiPoint"||ur==="LineString")Qn=$t(lr.geometry,En);else if(ur==="MultiLineString"||ur==="Polygon"){Qn=[];for(var mr=0;mr<lr.geometry.length;mr++)Qn.push($t(lr.geometry[mr],En))}else if(ur==="MultiPolygon")for(Qn=[],mr=0;mr<lr.geometry.length;mr++){for(var hr=[],wr=0;wr<lr.geometry[mr].length;wr++)hr.push($t(lr.geometry[mr][wr],En));Qn.push(hr)}Rn.push(to(lr.id,ur,Qn,lr.tags))}return Rn}function $t(Ln,En){var Rn=[];Rn.size=Ln.size,Ln.start!==void 0&&(Rn.start=Ln.start,Rn.end=Ln.end);for(var Hn=0;Hn<Ln.length;Hn+=3)Rn.push(Ln[Hn]+En,Ln[Hn+1],Ln[Hn+2]);return Rn}function en(Ln,En){if(Ln.transformed)return Ln;var Rn,Hn,Qn,lr=1<<Ln.z,ur=Ln.x,mr=Ln.y;for(Rn=0;Rn<Ln.features.length;Rn++){var hr=Ln.features[Rn],wr=hr.geometry,Br=hr.type;if(hr.geometry=[],Br===1)for(Hn=0;Hn<wr.length;Hn+=2)hr.geometry.push(dn(wr[Hn],wr[Hn+1],En,lr,ur,mr));else for(Hn=0;Hn<wr.length;Hn++){var Qr=[];for(Qn=0;Qn<wr[Hn].length;Qn+=2)Qr.push(dn(wr[Hn][Qn],wr[Hn][Qn+1],En,lr,ur,mr));hr.geometry.push(Qr)}}return Ln.transformed=!0,Ln}function dn(Ln,En,Rn,Hn,Qn,lr){return[Math.round(Rn*(Ln*Hn-Qn)),Math.round(Rn*(En*Hn-lr))]}function Cn(Ln,En,Rn,Hn,Qn){for(var lr=En===Qn.maxZoom?0:Qn.tolerance/((1<<En)*Qn.extent),ur={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Rn,y:Hn,z:En,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},mr=0;mr<Ln.length;mr++){ur.numFeatures++,On(ur,Ln[mr],lr,Qn);var hr=Ln[mr].minX,wr=Ln[mr].minY,Br=Ln[mr].maxX,Qr=Ln[mr].maxY;hr<ur.minX&&(ur.minX=hr),wr<ur.minY&&(ur.minY=wr),Br>ur.maxX&&(ur.maxX=Br),Qr>ur.maxY&&(ur.maxY=Qr)}return ur}function On(Ln,En,Rn,Hn){var Qn=En.geometry,lr=En.type,ur=[];if(lr==="Point"||lr==="MultiPoint")for(var mr=0;mr<Qn.length;mr+=3)ur.push(Qn[mr]),ur.push(Qn[mr+1]),Ln.numPoints++,Ln.numSimplified++;else if(lr==="LineString")or(ur,Qn,Ln,Rn,!1,!1);else if(lr==="MultiLineString"||lr==="Polygon")for(mr=0;mr<Qn.length;mr++)or(ur,Qn[mr],Ln,Rn,lr==="Polygon",mr===0);else if(lr==="MultiPolygon")for(var hr=0;hr<Qn.length;hr++){var wr=Qn[hr];for(mr=0;mr<wr.length;mr++)or(ur,wr[mr],Ln,Rn,!0,mr===0)}if(ur.length){var Br=En.tags||null;if(lr==="LineString"&&Hn.lineMetrics){for(var Qr in Br={},En.tags)Br[Qr]=En.tags[Qr];Br.mapbox_clip_start=Qn.start/Qn.size,Br.mapbox_clip_end=Qn.end/Qn.size}var Hr={geometry:ur,type:lr==="Polygon"||lr==="MultiPolygon"?3:lr==="LineString"||lr==="MultiLineString"?2:1,tags:Br};En.id!==null&&(Hr.id=En.id),Ln.features.push(Hr)}}function or(Ln,En,Rn,Hn,Qn,lr){var ur=Hn*Hn;if(Hn>0&&En.size<(Qn?ur:Hn))Rn.numPoints+=En.length/3;else{for(var mr=[],hr=0;hr<En.length;hr+=3)(Hn===0||En[hr+2]>ur)&&(Rn.numSimplified++,mr.push(En[hr]),mr.push(En[hr+1])),Rn.numPoints++;Qn&&function(wr,Br){for(var Qr=0,Hr=0,So=wr.length,Eo=So-2;Hr<So;Eo=Hr,Hr+=2)Qr+=(wr[Hr]-wr[Eo])*(wr[Hr+1]+wr[Eo+1]);if(Qr>0===Br)for(Hr=0,So=wr.length;Hr<So/2;Hr+=2){var Oo=wr[Hr],Lo=wr[Hr+1];wr[Hr]=wr[So-2-Hr],wr[Hr+1]=wr[So-1-Hr],wr[So-2-Hr]=Oo,wr[So-1-Hr]=Lo}}(mr,lr),Ln.push(mr)}}function ar(Ln,En){var Rn=(En=this.options=function(Qn,lr){for(var ur in lr)Qn[ur]=lr[ur];return Qn}(Object.create(this.options),En)).debug;if(Rn&&console.time("preprocess data"),En.maxZoom<0||En.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(En.promoteId&&En.generateId)throw new Error("promoteId and generateId cannot be used together.");var Hn=function(Qn,lr){var ur=[];if(Qn.type==="FeatureCollection")for(var mr=0;mr<Qn.features.length;mr++)Mo(ur,Qn.features[mr],lr,mr);else Mo(ur,Qn.type==="Feature"?Qn:{geometry:Qn},lr);return ur}(Ln,En);this.tiles={},this.tileCoords=[],Rn&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",En.indexMaxZoom,En.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Hn=function(Qn,lr){var ur=lr.buffer/lr.extent,mr=Qn,hr=cs(Qn,1,-1-ur,ur,0,-1,2,lr),wr=cs(Qn,1,1-ur,2+ur,0,-1,2,lr);return(hr||wr)&&(mr=cs(Qn,1,-ur,1+ur,0,-1,2,lr)||[],hr&&(mr=cr(hr,1).concat(mr)),wr&&(mr=mr.concat(cr(wr,-1)))),mr}(Hn,En),Hn.length&&this.splitTile(Hn,0,0,0),Rn&&(Hn.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function nr(Ln,En,Rn){return 32*((1<<Ln)*Rn+En)+Ln}function $n(Ln,En){const Rn=Ln.tileID.canonical;if(!this._geoJSONIndex)return En(null,null);const Hn=this._geoJSONIndex.getTile(Rn.z,Rn.x,Rn.y);if(!Hn)return En(null,null);const Qn=new Mt(Hn.features);let lr=Ft.exports(Qn);lr.byteOffset===0&&lr.byteLength===lr.buffer.byteLength||(lr=new Uint8Array(lr)),En(null,{vectorTile:Qn,rawData:lr.buffer})}ar.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ar.prototype.splitTile=function(Ln,En,Rn,Hn,Qn,lr,ur){for(var mr=[Ln,En,Rn,Hn],hr=this.options,wr=hr.debug;mr.length;){Hn=mr.pop(),Rn=mr.pop(),En=mr.pop(),Ln=mr.pop();var Br=1<<En,Qr=nr(En,Rn,Hn),Hr=this.tiles[Qr];if(!Hr&&(wr>1&&console.time("creation"),Hr=this.tiles[Qr]=Cn(Ln,En,Rn,Hn,hr),this.tileCoords.push({z:En,x:Rn,y:Hn}),wr)){wr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",En,Rn,Hn,Hr.numFeatures,Hr.numPoints,Hr.numSimplified),console.timeEnd("creation"));var So="z"+En;this.stats[So]=(this.stats[So]||0)+1,this.total++}if(Hr.source=Ln,Qn){if(En===hr.maxZoom||En===Qn)continue;var Eo=1<<Qn-En;if(Rn!==Math.floor(lr/Eo)||Hn!==Math.floor(ur/Eo))continue}else if(En===hr.indexMaxZoom||Hr.numPoints<=hr.indexMaxPoints)continue;if(Hr.source=null,Ln.length!==0){wr>1&&console.time("clipping");var Oo,Lo,Ko,fs,vo,As,bs=.5*hr.buffer/hr.extent,xu=.5-bs,cu=.5+bs,Nr=1+bs;Oo=Lo=Ko=fs=null,vo=cs(Ln,Br,Rn-bs,Rn+cu,0,Hr.minX,Hr.maxX,hr),As=cs(Ln,Br,Rn+xu,Rn+Nr,0,Hr.minX,Hr.maxX,hr),Ln=null,vo&&(Oo=cs(vo,Br,Hn-bs,Hn+cu,1,Hr.minY,Hr.maxY,hr),Lo=cs(vo,Br,Hn+xu,Hn+Nr,1,Hr.minY,Hr.maxY,hr),vo=null),As&&(Ko=cs(As,Br,Hn-bs,Hn+cu,1,Hr.minY,Hr.maxY,hr),fs=cs(As,Br,Hn+xu,Hn+Nr,1,Hr.minY,Hr.maxY,hr),As=null),wr>1&&console.timeEnd("clipping"),mr.push(Oo||[],En+1,2*Rn,2*Hn),mr.push(Lo||[],En+1,2*Rn,2*Hn+1),mr.push(Ko||[],En+1,2*Rn+1,2*Hn),mr.push(fs||[],En+1,2*Rn+1,2*Hn+1)}}},ar.prototype.getTile=function(Ln,En,Rn){var Hn=this.options,Qn=Hn.extent,lr=Hn.debug;if(Ln<0||Ln>24)return null;var ur=1<<Ln,mr=nr(Ln,En=(En%ur+ur)%ur,Rn);if(this.tiles[mr])return en(this.tiles[mr],Qn);lr>1&&console.log("drilling down to z%d-%d-%d",Ln,En,Rn);for(var hr,wr=Ln,Br=En,Qr=Rn;!hr&&wr>0;)wr--,Br=Math.floor(Br/2),Qr=Math.floor(Qr/2),hr=this.tiles[nr(wr,Br,Qr)];return hr&&hr.source?(lr>1&&console.log("found parent tile z%d-%d-%d",wr,Br,Qr),lr>1&&console.time("drilling down"),this.splitTile(hr.source,wr,Br,Qr,Ln,En,Rn),lr>1&&console.timeEnd("drilling down"),this.tiles[mr]?en(this.tiles[mr],Qn):null):null};class Fn extends j.VectorTileWorkerSource{constructor(En,Rn,Hn,Qn,lr){super(En,Rn,Hn,Qn,$n),lr&&(this.loadGeoJSON=lr)}loadData(En,Rn){const Hn=En&&En.request,Qn=Hn&&Hn.collectResourceTiming;this.loadGeoJSON(En,(lr,ur)=>{if(lr||!ur)return Rn(lr);if(typeof ur!="object")return Rn(new Error(`Input data given to '${En.source}' is not a valid GeoJSON object.`));{gt(ur,!0);try{if(En.filter){const hr=j.createExpression(En.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(hr.result==="error")throw new Error(hr.value.map(Br=>`${Br.key}: ${Br.message}`).join(", "));ur={type:"FeatureCollection",features:ur.features.filter(Br=>hr.value.evaluate({zoom:0},Br))}}this._geoJSONIndex=En.cluster?new Dt(function({superclusterOptions:hr,clusterProperties:wr}){if(!wr||!hr)return hr;const Br={},Qr={},Hr={accumulated:null,zoom:0},So={properties:null},Eo=Object.keys(wr);for(const Oo of Eo){const[Lo,Ko]=wr[Oo],fs=j.createExpression(Ko),vo=j.createExpression(typeof Lo=="string"?[Lo,["accumulated"],["get",Oo]]:Lo);Br[Oo]=fs.value,Qr[Oo]=vo.value}return hr.map=Oo=>{So.properties=Oo;const Lo={};for(const Ko of Eo)Lo[Ko]=Br[Ko].evaluate(Hr,So);return Lo},hr.reduce=(Oo,Lo)=>{So.properties=Lo;for(const Ko of Eo)Hr.accumulated=Oo[Ko],Oo[Ko]=Qr[Ko].evaluate(Hr,So)},hr}(En)).load(ur.features):function(hr,wr){return new ar(hr,wr)}(ur,En.geojsonVtOptions)}catch(hr){return Rn(hr)}this.loaded={};const mr={};if(Qn){const hr=j.getPerformanceMeasurement(Hn);hr&&(mr.resourceTiming={},mr.resourceTiming[En.source]=JSON.parse(JSON.stringify(hr)))}Rn(null,mr)}})}reloadTile(En,Rn){const Hn=this.loaded;return Hn&&Hn[En.uid]?super.reloadTile(En,Rn):this.loadTile(En,Rn)}loadGeoJSON(En,Rn){if(En.request)j.getJSON(En.request,Rn);else{if(typeof En.data!="string")return Rn(new Error(`Input data given to '${En.source}' is not a valid GeoJSON object.`));try{return Rn(null,JSON.parse(En.data))}catch{return Rn(new Error(`Input data given to '${En.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(En,Rn){try{Rn(null,this._geoJSONIndex.getClusterExpansionZoom(En.clusterId))}catch(Hn){Rn(Hn)}}getClusterChildren(En,Rn){try{Rn(null,this._geoJSONIndex.getChildren(En.clusterId))}catch(Hn){Rn(Hn)}}getClusterLeaves(En,Rn){try{Rn(null,this._geoJSONIndex.getLeaves(En.clusterId,En.limit,En.offset))}catch(Hn){Rn(Hn)}}}class ro{constructor(En){this.self=En,this.actor=new j.Actor(En,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=j.getProjection({name:"mercator"}),this.workerSourceTypes={vector:j.VectorTileWorkerSource,geojson:Fn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Rn,Hn)=>{if(this.workerSourceTypes[Rn])throw new Error(`Worker source with name "${Rn}" already registered.`);this.workerSourceTypes[Rn]=Hn},this.self.registerRTLTextPlugin=Rn=>{if(j.plugin.isParsed())throw new Error("RTL text plugin already registered.");j.plugin.applyArabicShaping=Rn.applyArabicShaping,j.plugin.processBidirectionalText=Rn.processBidirectionalText,j.plugin.processStyledBidirectionalText=Rn.processStyledBidirectionalText}}clearCaches(En,Rn,Hn){delete this.layerIndexes[En],delete this.availableImages[En],delete this.workerSources[En],delete this.demWorkerSources[En],Hn()}checkIfReady(En,Rn,Hn){Hn()}setReferrer(En,Rn){this.referrer=Rn}spriteLoaded(En,Rn){this.isSpriteLoaded[En]=Rn;for(const Hn in this.workerSources[En]){const Qn=this.workerSources[En][Hn];for(const lr in Qn)Qn[lr]instanceof j.VectorTileWorkerSource&&(Qn[lr].isSpriteLoaded=Rn,Qn[lr].fire(new j.Event("isSpriteLoaded")))}}setImages(En,Rn,Hn){this.availableImages[En]=Rn;for(const Qn in this.workerSources[En]){const lr=this.workerSources[En][Qn];for(const ur in lr)lr[ur].availableImages=Rn}Hn()}enableTerrain(En,Rn,Hn){this.terrain=Rn,Hn()}setProjection(En,Rn){this.projections[En]=j.getProjection(Rn)}setLayers(En,Rn,Hn){this.getLayerIndex(En).replace(Rn),Hn()}updateLayers(En,Rn,Hn){this.getLayerIndex(En).update(Rn.layers,Rn.removedIds),Hn()}loadTile(En,Rn,Hn){const Qn=this.enableTerrain?j.extend({enableTerrain:this.terrain},Rn):Rn;Qn.projection=this.projections[En]||this.defaultProjection,this.getWorkerSource(En,Rn.type,Rn.source).loadTile(Qn,Hn)}loadDEMTile(En,Rn,Hn){const Qn=this.enableTerrain?j.extend({buildQuadTree:this.terrain},Rn):Rn;this.getDEMWorkerSource(En,Rn.source).loadTile(Qn,Hn)}reloadTile(En,Rn,Hn){const Qn=this.enableTerrain?j.extend({enableTerrain:this.terrain},Rn):Rn;Qn.projection=this.projections[En]||this.defaultProjection,this.getWorkerSource(En,Rn.type,Rn.source).reloadTile(Qn,Hn)}abortTile(En,Rn,Hn){this.getWorkerSource(En,Rn.type,Rn.source).abortTile(Rn,Hn)}removeTile(En,Rn,Hn){this.getWorkerSource(En,Rn.type,Rn.source).removeTile(Rn,Hn)}removeSource(En,Rn,Hn){if(!this.workerSources[En]||!this.workerSources[En][Rn.type]||!this.workerSources[En][Rn.type][Rn.source])return;const Qn=this.workerSources[En][Rn.type][Rn.source];delete this.workerSources[En][Rn.type][Rn.source],Qn.removeSource!==void 0?Qn.removeSource(Rn,Hn):Hn()}loadWorkerSource(En,Rn,Hn){try{this.self.importScripts(Rn.url),Hn()}catch(Qn){Hn(Qn.toString())}}syncRTLPluginState(En,Rn,Hn){try{j.plugin.setState(Rn);const Qn=j.plugin.getPluginURL();if(j.plugin.isLoaded()&&!j.plugin.isParsed()&&Qn!=null){this.self.importScripts(Qn);const lr=j.plugin.isParsed();Hn(lr?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Qn}`),lr)}}catch(Qn){Hn(Qn.toString())}}getAvailableImages(En){let Rn=this.availableImages[En];return Rn||(Rn=[]),Rn}getLayerIndex(En){let Rn=this.layerIndexes[En];return Rn||(Rn=this.layerIndexes[En]=new ht),Rn}getWorkerSource(En,Rn,Hn){if(this.workerSources[En]||(this.workerSources[En]={}),this.workerSources[En][Rn]||(this.workerSources[En][Rn]={}),!this.workerSources[En][Rn][Hn]){const Qn={send:(lr,ur,mr,hr,wr,Br)=>{this.actor.send(lr,ur,mr,En,wr,Br)},scheduler:this.actor.scheduler};this.workerSources[En][Rn][Hn]=new this.workerSourceTypes[Rn](Qn,this.getLayerIndex(En),this.getAvailableImages(En),this.isSpriteLoaded[En])}return this.workerSources[En][Rn][Hn]}getDEMWorkerSource(En,Rn){return this.demWorkerSources[En]||(this.demWorkerSources[En]={}),this.demWorkerSources[En][Rn]||(this.demWorkerSources[En][Rn]=new _t),this.demWorkerSources[En][Rn]}enforceCacheSizeLimit(En,Rn){j.enforceCacheSizeLimit(Rn)}getWorkerPerformanceMetrics(En,Rn,Hn){Hn(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ro(self)),ro}),et(["./shared"],function(j){function it(dt,ot){if(Array.isArray(dt)){if(!Array.isArray(ot)||dt.length!==ot.length)return!1;for(let lt=0;lt<dt.length;lt++)if(!it(dt[lt],ot[lt]))return!1;return!0}if(typeof dt=="object"&&dt!==null&&ot!==null){if(typeof ot!="object"||Object.keys(dt).length!==Object.keys(ot).length)return!1;for(const lt in dt)if(!it(dt[lt],ot[lt]))return!1;return!0}return dt===ot}var st=ht;function ht(dt){return!function(ot){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var bt,kt,jt=new Blob([""],{type:"text/javascript"}),Jt=URL.createObjectURL(jt);try{kt=new Worker(Jt),bt=!0}catch{bt=!1}return kt&&kt.terminate(),URL.revokeObjectURL(Jt),bt}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var bt=document.createElement("canvas");bt.width=bt.height=1;var kt=bt.getContext("2d");if(!kt)return!1;var jt=kt.getImageData(0,0,1,1);return jt&&jt.width===bt.width}()?(_t[lt=ot&&ot.failIfMajorPerformanceCaveat]===void 0&&(_t[lt]=function(bt){var kt,jt=function(Jt){var an=document.createElement("canvas"),cn=Object.create(ht.webGLContextAttributes);return cn.failIfMajorPerformanceCaveat=Jt,an.getContext("webgl",cn)||an.getContext("experimental-webgl",cn)}(bt);if(!jt)return!1;try{kt=jt.createShader(jt.VERTEX_SHADER)}catch{return!1}return!(!kt||jt.isContextLost())&&(jt.shaderSource(kt,"void main() {}"),jt.compileShader(kt),jt.getShaderParameter(kt,jt.COMPILE_STATUS)===!0)}(lt)),_t[lt]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var lt}(dt)}var _t={};function gt(dt,ot,lt){const bt=j.window.document.createElement(dt);return ot!==void 0&&(bt.className=ot),lt&&lt.appendChild(bt),bt}function ft(dt,ot,lt){const bt=j.window.document.createElementNS("http://www.w3.org/2000/svg",dt);for(const kt of Object.keys(ot))bt.setAttributeNS(null,kt,ot[kt]);return lt&&lt.appendChild(bt),bt}ht.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const ut=j.window.document&&j.window.document.documentElement.style,yt=ut&&ut.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Et;function Mt(){ut&&yt&&(Et=ut[yt],ut[yt]="none")}function Ft(){ut&&yt&&(ut[yt]=Et)}function Rt(dt){dt.preventDefault(),dt.stopPropagation(),j.window.removeEventListener("click",Rt,!0)}function Ot(){j.window.addEventListener("click",Rt,!0),j.window.setTimeout(()=>{j.window.removeEventListener("click",Rt,!0)},0)}function pt(dt,ot){const lt=dt.getBoundingClientRect();return on(dt,lt,ot)}function Lt(dt,ot){const lt=dt.getBoundingClientRect(),bt=[];for(let kt=0;kt<ot.length;kt++)bt.push(on(dt,lt,ot[kt]));return bt}function nn(dt){return j.window.InstallTrigger!==void 0&&dt.button===2&&dt.ctrlKey&&j.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:dt.button}function on(dt,ot,lt){const bt=dt.offsetWidth===ot.width?1:dt.offsetWidth/ot.width;return new j.pointGeometry((lt.clientX-ot.left)*bt,(lt.clientY-ot.top)*bt)}function wt(dt,ot){var lt=ot[0],bt=ot[1],kt=ot[2],jt=ot[3],Jt=lt*jt-kt*bt;return Jt?(dt[0]=jt*(Jt=1/Jt),dt[1]=-bt*Jt,dt[2]=-kt*Jt,dt[3]=lt*Jt,dt):null}function xt(dt){const{userImage:ot}=dt;return!!(ot&&ot.render&&ot.render())&&(dt.data.replace(new Uint8Array(ot.data.buffer)),!0)}class Nt extends j.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new j.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(ot){if(this.loaded!==ot&&(this.loaded=ot,ot)){for(const{ids:lt,callback:bt}of this.requestors)this._notify(lt,bt);this.requestors=[]}}hasImage(ot){return!!this.getImage(ot)}getImage(ot){return this.images[ot]}addImage(ot,lt){this._validate(ot,lt)&&(this.images[ot]=lt)}_validate(ot,lt){let bt=!0;return this._validateStretch(lt.stretchX,lt.data&&lt.data.width)||(this.fire(new j.ErrorEvent(new Error(`Image "${ot}" has invalid "stretchX" value`))),bt=!1),this._validateStretch(lt.stretchY,lt.data&&lt.data.height)||(this.fire(new j.ErrorEvent(new Error(`Image "${ot}" has invalid "stretchY" value`))),bt=!1),this._validateContent(lt.content,lt)||(this.fire(new j.ErrorEvent(new Error(`Image "${ot}" has invalid "content" value`))),bt=!1),bt}_validateStretch(ot,lt){if(!ot)return!0;let bt=0;for(const kt of ot){if(kt[0]<bt||kt[1]<kt[0]||lt<kt[1])return!1;bt=kt[1]}return!0}_validateContent(ot,lt){return!(ot&&(ot.length!==4||ot[0]<0||lt.data.width<ot[0]||ot[1]<0||lt.data.height<ot[1]||ot[2]<0||lt.data.width<ot[2]||ot[3]<0||lt.data.height<ot[3]||ot[2]<ot[0]||ot[3]<ot[1]))}updateImage(ot,lt){lt.version=this.images[ot].version+1,this.images[ot]=lt,this.updatedImages[ot]=!0}removeImage(ot){const lt=this.images[ot];delete this.images[ot],delete this.patterns[ot],lt.userImage&&lt.userImage.onRemove&&lt.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(ot,lt){let bt=!0;if(!this.isLoaded())for(const kt of ot)this.images[kt]||(bt=!1);this.isLoaded()||bt?this._notify(ot,lt):this.requestors.push({ids:ot,callback:lt})}_notify(ot,lt){const bt={};for(const kt of ot){this.images[kt]||this.fire(new j.Event("styleimagemissing",{id:kt}));const jt=this.images[kt];jt?bt[kt]={data:jt.data.clone(),pixelRatio:jt.pixelRatio,sdf:jt.sdf,version:jt.version,stretchX:jt.stretchX,stretchY:jt.stretchY,content:jt.content,hasRenderCallback:Boolean(jt.userImage&&jt.userImage.render)}:j.warnOnce(`Image "${kt}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}lt(null,bt)}getPixelSize(){const{width:ot,height:lt}=this.atlasImage;return{width:ot,height:lt}}getPattern(ot){const lt=this.patterns[ot],bt=this.getImage(ot);if(!bt)return null;if(lt&&lt.position.version===bt.version)return lt.position;if(lt)lt.position.version=bt.version;else{const kt={w:bt.data.width+2,h:bt.data.height+2,x:0,y:0},jt=new j.ImagePosition(kt,bt);this.patterns[ot]={bin:kt,position:jt}}return this._updatePatternAtlas(),this.patterns[ot].position}bind(ot){const lt=ot.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new j.Texture(ot,this.atlasImage,lt.RGBA),this.atlasTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)}_updatePatternAtlas(){const ot=[];for(const jt in this.patterns)ot.push(this.patterns[jt].bin);const{w:lt,h:bt}=j.potpack(ot),kt=this.atlasImage;kt.resize({width:lt||1,height:bt||1});for(const jt in this.patterns){const{bin:Jt}=this.patterns[jt],an=Jt.x+1,cn=Jt.y+1,_n=this.images[jt].data,Sn=_n.width,In=_n.height;j.RGBAImage.copy(_n,kt,{x:0,y:0},{x:an,y:cn},{width:Sn,height:In}),j.RGBAImage.copy(_n,kt,{x:0,y:In-1},{x:an,y:cn-1},{width:Sn,height:1}),j.RGBAImage.copy(_n,kt,{x:0,y:0},{x:an,y:cn+In},{width:Sn,height:1}),j.RGBAImage.copy(_n,kt,{x:Sn-1,y:0},{x:an-1,y:cn},{width:1,height:In}),j.RGBAImage.copy(_n,kt,{x:0,y:0},{x:an+Sn,y:cn},{width:1,height:In})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(ot){for(const lt of ot){if(this.callbackDispatchedThisFrame[lt])continue;this.callbackDispatchedThisFrame[lt]=!0;const bt=this.images[lt];xt(bt)&&this.updateImage(lt,bt)}}}const Tt=new j.Properties({anchor:new j.DataConstantProperty(j.spec.light.anchor),position:new class{constructor(){this.specification=j.spec.light.position}possiblyEvaluate(dt,ot){return function([lt,bt,kt]){const jt=j.degToRad(bt+90),Jt=j.degToRad(kt);return{x:lt*Math.cos(jt)*Math.sin(Jt),y:lt*Math.sin(jt)*Math.sin(Jt),z:lt*Math.cos(Jt),azimuthal:bt,polar:kt}}(dt.expression.evaluate(ot))}interpolate(dt,ot,lt){return{x:j.number(dt.x,ot.x,lt),y:j.number(dt.y,ot.y,lt),z:j.number(dt.z,ot.z,lt),azimuthal:j.number(dt.azimuthal,ot.azimuthal,lt),polar:j.number(dt.polar,ot.polar,lt)}}},color:new j.DataConstantProperty(j.spec.light.color),intensity:new j.DataConstantProperty(j.spec.light.intensity)}),Vt="-transition";class Xt extends j.Evented{constructor(ot){super(),this._transitionable=new j.Transitionable(Tt),this.setLight(ot),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(ot,lt={}){if(!this._validate(j.validateLight,ot,lt))for(const bt in ot){const kt=ot[bt];j.endsWith(bt,Vt)?this._transitionable.setTransition(bt.slice(0,-Vt.length),kt):this._transitionable.setValue(bt,kt)}}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}_validate(ot,lt,bt){return(!bt||bt.validate!==!1)&&j.emitValidationErrors(this,ot.call(j.validateStyle,j.extend({value:lt,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}const Gt=new j.Properties({source:new j.DataConstantProperty(j.spec.terrain.source),exaggeration:new j.DataConstantProperty(j.spec.terrain.exaggeration)}),Ut="-transition";class Ht extends j.Evented{constructor(ot,lt){super(),this._transitionable=new j.Transitionable(Gt),this.set(ot),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=lt}get(){return this._transitionable.serialize()}set(ot){for(const lt in ot){const bt=ot[lt];j.endsWith(lt,Ut)?this._transitionable.setTransition(lt.slice(0,-Ut.length),bt):this._transitionable.setValue(lt,bt)}}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}}function qt(dt,ot,lt,bt){const kt=j.smoothstep(45,65,lt),[jt,Jt]=Pt(dt,bt),an=j.length(ot);let cn=1-Math.min(1,Math.exp((an-jt)/(Jt-jt)*-6));return cn*=cn*cn,cn=Math.min(1,1.00747*cn),cn*kt*dt.alpha}function Pt(dt,ot){const lt=.5/Math.tan(.5*ot);return[dt.range[0]+lt,dt.range[1]+lt]}const St=new j.Properties({range:new j.DataConstantProperty(j.spec.fog.range),color:new j.DataConstantProperty(j.spec.fog.color),"high-color":new j.DataConstantProperty(j.spec.fog["high-color"]),"space-color":new j.DataConstantProperty(j.spec.fog["space-color"]),"horizon-blend":new j.DataConstantProperty(j.spec.fog["horizon-blend"]),"star-intensity":new j.DataConstantProperty(j.spec.fog["star-intensity"])}),Zt="-transition";class tn extends j.Evented{constructor(ot,lt){super(),this._transitionable=new j.Transitionable(St),this.set(ot),this._transitioning=this._transitionable.untransitioned(),this._transform=lt}get state(){const ot=this._transform,lt=ot.projection.name==="globe",bt=j.globeToMercatorTransition(ot.zoom),kt=this.properties.get("range"),jt=[.5,3];return{range:lt?[j.number(jt[0],kt[0],bt),j.number(jt[1],kt[1],bt)]:kt,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(ot,lt={}){if(!this._validate(j.validateFog,ot,lt)){for(const bt of Object.keys(j.spec.fog))ot&&ot[bt]===void 0&&(ot[bt]=j.spec.fog[bt].default);for(const bt in ot){const kt=ot[bt];j.endsWith(bt,Zt)?this._transitionable.setTransition(bt.slice(0,-Zt.length),kt):this._transitionable.setValue(bt,kt)}}}getOpacity(ot){if(!this._transform.projection.supportsFog)return 0;const lt=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:j.smoothstep(45,65,ot))*lt.a}getOpacityAtLatLng(ot,lt){return this._transform.projection.supportsFog?function(bt,kt,jt){const Jt=j.MercatorCoordinate.fromLngLat(kt),an=jt.elevation?jt.elevation.getAtPointOrZero(Jt):0,cn=[Jt.x,Jt.y,an];return j.transformMat4(cn,cn,jt.mercatorFogMatrix),qt(bt,cn,jt.pitch,jt._fov)}(this.state,ot,lt):0}getFovAdjustedRange(ot){return this._transform.projection.supportsFog?Pt(this.state,ot):[0,1]}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}_validate(ot,lt,bt){return(!bt||bt.validate!==!1)&&j.emitValidationErrors(this,ot.call(j.validateStyle,j.extend({value:lt,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}class mn{constructor(ot,lt){this.workerPool=ot,this.actors=[],this.currentActor=0,this.id=j.uniqueId();const bt=this.workerPool.acquire(this.id);for(let kt=0;kt<bt.length;kt++){const jt=new mn.Actor(bt[kt],lt,this.id);jt.name=`Worker ${kt}`,this.actors.push(jt)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(ot,lt,bt){j.asyncAll(this.actors,(kt,jt)=>{kt.send(ot,lt,jt)},bt=bt||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(ot=>{ot.remove()}),this.actors=[],this.workerPool.release(this.id)}}function yn(dt,ot,lt){return ot*(j.EXTENT/(dt.tileSize*Math.pow(2,lt-dt.tileID.overscaledZ)))}mn.Actor=j.Actor;class vn{constructor(ot,lt,bt,kt){this.screenBounds=ot,this.cameraPoint=lt,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=bt,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,kt)}static createFromScreenPoints(ot,lt){let bt,kt;if(ot instanceof j.pointGeometry||typeof ot[0]=="number"){const jt=j.pointGeometry.convert(ot);bt=[jt],kt=lt.isPointAboveHorizon(jt)}else{const jt=j.pointGeometry.convert(ot[0]),Jt=j.pointGeometry.convert(ot[1]);bt=[jt,Jt],kt=j.polygonizeBounds(jt,Jt).every(an=>lt.isPointAboveHorizon(an))}return new vn(bt,lt.getCameraPoint(),kt,lt)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(ot){return j.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],ot)}bufferedCameraGeometry(ot){const lt=this.screenBounds[0],bt=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],kt=j.polygonizeBounds(lt,bt,0,!1);return this.cameraPoint.y>bt.y&&(this.cameraPoint.x>lt.x&&this.cameraPoint.x<bt.x?kt.splice(3,0,this.cameraPoint):this.cameraPoint.x>=bt.x?kt[2]=this.cameraPoint:this.cameraPoint.x<=lt.x&&(kt[3]=this.cameraPoint)),j.bufferConvexPolygon(kt,ot)}bufferedCameraGeometryGlobe(ot){const lt=this.screenBounds[0],bt=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],kt=j.polygonizeBounds(lt,bt,ot),jt=this.cameraPoint.clone();switch(3*((jt.y>lt.y)+(jt.y>bt.y))+((jt.x>lt.x)+(jt.x>bt.x))){case 0:kt[0]=jt,kt[4]=jt.clone();break;case 1:kt.splice(1,0,jt);break;case 2:kt[1]=jt;break;case 3:kt.splice(4,0,jt);break;case 5:kt.splice(2,0,jt);break;case 6:kt[3]=jt;break;case 7:kt.splice(3,0,jt);break;case 8:kt[2]=jt}return kt}containsTile(ot,lt,bt,kt=0){const jt=ot.queryPadding/lt._pixelsPerMercatorPixel+1,Jt=bt?this._bufferedCameraMercator(jt,lt):this._bufferedScreenMercator(jt,lt);let an=ot.tileID.wrap+(Jt.unwrapped?kt:0);const cn=Jt.polygon.map(Un=>j.getTilePoint(ot.tileTransform,Un,an));if(!j.polygonIntersectsBox(cn,0,0,j.EXTENT,j.EXTENT))return;an=ot.tileID.wrap+(this.screenGeometryMercator.unwrapped?kt:0);const _n=this.screenGeometryMercator.polygon.map(Un=>j.getTileVec3(ot.tileTransform,Un,an)),Sn=_n.map(Un=>new j.pointGeometry(Un[0],Un[1])),In=lt.getFreeCameraOptions().position||new j.MercatorCoordinate(0,0,0),Bn=j.getTileVec3(ot.tileTransform,In,an),Yn=_n.map(Un=>{const Nn=j.sub(Un,Un,Bn);return j.normalize(Nn,Nn),new j.Ray(Bn,Nn)}),Gn=yn(ot,1,lt.zoom)*lt._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Sn,tilespaceRays:Yn,bufferedTilespaceGeometry:cn,bufferedTilespaceBounds:(Xn=j.getBounds(cn),Xn.min.x=j.clamp(Xn.min.x,0,j.EXTENT),Xn.min.y=j.clamp(Xn.min.y,0,j.EXTENT),Xn.max.x=j.clamp(Xn.max.x,0,j.EXTENT),Xn.max.y=j.clamp(Xn.max.y,0,j.EXTENT),Xn),tile:ot,tileID:ot.tileID,pixelToTileUnitsFactor:Gn};var Xn}_bufferedScreenMercator(ot,lt){const bt=It(ot);if(this._screenRaycastCache[bt])return this._screenRaycastCache[bt];{let kt;return kt=lt.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(ot),lt):{polygon:this.bufferedScreenGeometry(ot).map(jt=>lt.pointCoordinate3D(jt)),unwrapped:!0},this._screenRaycastCache[bt]=kt,kt}}_bufferedCameraMercator(ot,lt){const bt=It(ot);if(this._cameraRaycastCache[bt])return this._cameraRaycastCache[bt];{let kt;return kt=lt.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(ot),lt):{polygon:this.bufferedCameraGeometry(ot).map(jt=>lt.pointCoordinate3D(jt)),unwrapped:!0},this._cameraRaycastCache[bt]=kt,kt}}_projectAndResample(ot,lt){const bt=function(jt,Jt){const an=j.multiply([],Jt.pixelMatrix,Jt.globeMatrix),cn=[0,-j.GLOBE_RADIUS,0,1],_n=[0,j.GLOBE_RADIUS,0,1],Sn=[0,0,0,1];j.transformMat4$1(cn,cn,an),j.transformMat4$1(_n,_n,an),j.transformMat4$1(Sn,Sn,an);const In=new j.pointGeometry(cn[0]/cn[3],cn[1]/cn[3]),Bn=new j.pointGeometry(_n[0]/_n[3],_n[1]/_n[3]),Yn=j.polygonContainsPoint(jt,In)&&cn[3]<Sn[3],Gn=j.polygonContainsPoint(jt,Bn)&&_n[3]<Sn[3];if(!Yn&&!Gn)return null;const Xn=function(vr,Er,Lr){for(let kr=1;kr<vr.length;kr++){const io=rn(Er.pointCoordinate3D(vr[kr-1]).x),Ar=rn(Er.pointCoordinate3D(vr[kr]).x);if(Lr<0){if(io<Ar)return{idx:kr,t:-io/(Ar-1-io)}}else if(Ar<io)return{idx:kr,t:(1-io)/(Ar+1-io)}}return null}(jt,Jt,Yn?-1:1);if(!Xn)return null;const{idx:Un,t:Nn}=Xn;let er=Un>1?un(jt.slice(0,Un),Jt):[],Zn=Un<jt.length?un(jt.slice(Un),Jt):[];er=er.map(vr=>new j.pointGeometry(rn(vr.x),vr.y)),Zn=Zn.map(vr=>new j.pointGeometry(rn(vr.x),vr.y));const fr=[...er];fr.length===0&&fr.push(Zn[Zn.length-1]);const pr=j.number(fr[fr.length-1].y,(Zn.length===0?er[0]:Zn[0]).y,Nn);let tr;return tr=Yn?[new j.pointGeometry(0,pr),new j.pointGeometry(0,0),new j.pointGeometry(1,0),new j.pointGeometry(1,pr)]:[new j.pointGeometry(1,pr),new j.pointGeometry(1,1),new j.pointGeometry(0,1),new j.pointGeometry(0,pr)],fr.push(...tr),Zn.length===0?fr.push(er[0]):fr.push(...Zn),{polygon:fr.map(vr=>new j.MercatorCoordinate(vr.x,vr.y)),unwrapped:!1}}(ot,lt);if(bt)return bt;const kt=function(jt,Jt){let an=!1,cn=-1/0,_n=0;for(let In=0;In<jt.length-1;In++)jt[In].x>cn&&(cn=jt[In].x,_n=In);for(let In=0;In<jt.length-1;In++){const Bn=(_n+In)%(jt.length-1),Yn=jt[Bn],Gn=jt[Bn+1];Math.abs(Yn.x-Gn.x)>.5&&(Yn.x<Gn.x?(Yn.x+=1,Bn===0&&(jt[jt.length-1].x+=1)):(Gn.x+=1,Bn+1===jt.length-1&&(jt[0].x+=1)),an=!0)}const Sn=j.mercatorXfromLng(Jt.center.lng);return an&&Sn<Math.abs(Sn-1)&&jt.forEach(In=>{In.x-=1}),{polygon:jt,unwrapped:an}}(un(ot,lt).map(jt=>new j.pointGeometry(rn(jt.x),jt.y)),lt);return{polygon:kt.polygon.map(jt=>new j.MercatorCoordinate(jt.x,jt.y)),unwrapped:kt.unwrapped}}}function un(dt,ot){return j.resample(dt,lt=>{const bt=ot.pointCoordinate3D(lt);lt.x=bt.x,lt.y=bt.y},1/256)}function rn(dt){return dt<0?1+dt%1:dt%1}function It(dt){return 100*dt|0}function Dt(dt,ot,lt,bt,kt){const jt=function(Jt,an){if(Jt)return kt(Jt);if(an){dt.url&&an.tiles&&dt.tiles&&delete dt.tiles;const cn=j.pick(j.extend(an,dt),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);an.vector_layers&&(cn.vectorLayers=an.vector_layers,cn.vectorLayerIds=cn.vectorLayers.map(_n=>_n.id)),cn.tiles=ot.canonicalizeTileset(cn,dt.url),kt(null,cn)}};return dt.url?j.getJSON(ot.transformRequest(ot.normalizeSourceURL(dt.url,null,lt,bt),j.ResourceType.Source),jt):j.exported.frame(()=>jt(null,dt))}class Kt{constructor(ot,lt,bt){this.bounds=j.LngLatBounds.convert(this.validateBounds(ot)),this.minzoom=lt||0,this.maxzoom=bt||24}validateBounds(ot){return Array.isArray(ot)&&ot.length===4?[Math.max(-180,ot[0]),Math.max(-90,ot[1]),Math.min(180,ot[2]),Math.min(90,ot[3])]:[-180,-90,180,90]}contains(ot){const lt=Math.pow(2,ot.z),bt=Math.floor(j.mercatorXfromLng(this.bounds.getWest())*lt),kt=Math.floor(j.mercatorYfromLat(this.bounds.getNorth())*lt),jt=Math.ceil(j.mercatorXfromLng(this.bounds.getEast())*lt),Jt=Math.ceil(j.mercatorYfromLat(this.bounds.getSouth())*lt);return ot.x>=bt&&ot.x<jt&&ot.y>=kt&&ot.y<Jt}}class gn{constructor(ot,lt,bt){this.context=ot;const kt=ot.gl;this.buffer=kt.createBuffer(),this.dynamicDraw=Boolean(bt),this.context.unbindVAO(),ot.bindElementBuffer.set(this.buffer),kt.bufferData(kt.ELEMENT_ARRAY_BUFFER,lt.arrayBuffer,this.dynamicDraw?kt.DYNAMIC_DRAW:kt.STATIC_DRAW),this.dynamicDraw||lt.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(ot){const lt=this.context.gl;this.context.unbindVAO(),this.bind(),lt.bufferSubData(lt.ELEMENT_ARRAY_BUFFER,0,ot.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xn{constructor(ot,lt,bt,kt){this.length=lt.length,this.attributes=bt,this.itemSize=lt.bytesPerElement,this.dynamicDraw=kt,this.context=ot;const jt=ot.gl;this.buffer=jt.createBuffer(),ot.bindVertexBuffer.set(this.buffer),jt.bufferData(jt.ARRAY_BUFFER,lt.arrayBuffer,this.dynamicDraw?jt.DYNAMIC_DRAW:jt.STATIC_DRAW),this.dynamicDraw||lt.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(ot){const lt=this.context.gl;this.bind(),lt.bufferSubData(lt.ARRAY_BUFFER,0,ot.arrayBuffer)}enableAttributes(ot,lt){for(let bt=0;bt<this.attributes.length;bt++){const kt=lt.attributes[this.attributes[bt].name];kt!==void 0&&ot.enableVertexAttribArray(kt)}}setVertexAttribPointers(ot,lt,bt){for(let kt=0;kt<this.attributes.length;kt++){const jt=this.attributes[kt],Jt=lt.attributes[jt.name];Jt!==void 0&&ot.vertexAttribPointer(Jt,jt.components,ot[hn[jt.type]],!1,this.itemSize,jt.offset+this.itemSize*(bt||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(ot){this.gl=ot.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(ot){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qn extends Mn{getDefault(){return j.Color.transparent}set(ot){const lt=this.current;(ot.r!==lt.r||ot.g!==lt.g||ot.b!==lt.b||ot.a!==lt.a||this.dirty)&&(this.gl.clearColor(ot.r,ot.g,ot.b,ot.a),this.current=ot,this.dirty=!1)}}class Ir extends Mn{getDefault(){return 1}set(ot){(ot!==this.current||this.dirty)&&(this.gl.clearDepth(ot),this.current=ot,this.dirty=!1)}}class _i extends Mn{getDefault(){return 0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.clearStencil(ot),this.current=ot,this.dirty=!1)}}class Ur extends Mn{getDefault(){return[!0,!0,!0,!0]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||ot[2]!==lt[2]||ot[3]!==lt[3]||this.dirty)&&(this.gl.colorMask(ot[0],ot[1],ot[2],ot[3]),this.current=ot,this.dirty=!1)}}class fo extends Mn{getDefault(){return!0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.depthMask(ot),this.current=ot,this.dirty=!1)}}class Gr extends Mn{getDefault(){return 255}set(ot){(ot!==this.current||this.dirty)&&(this.gl.stencilMask(ot),this.current=ot,this.dirty=!1)}}class Yr extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(ot){const lt=this.current;(ot.func!==lt.func||ot.ref!==lt.ref||ot.mask!==lt.mask||this.dirty)&&(this.gl.stencilFunc(ot.func,ot.ref,ot.mask),this.current=ot,this.dirty=!1)}}class to extends Mn{getDefault(){const ot=this.gl;return[ot.KEEP,ot.KEEP,ot.KEEP]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||ot[2]!==lt[2]||this.dirty)&&(this.gl.stencilOp(ot[0],ot[1],ot[2]),this.current=ot,this.dirty=!1)}}class Ro extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.STENCIL_TEST):lt.disable(lt.STENCIL_TEST),this.current=ot,this.dirty=!1}}class Mo extends Mn{getDefault(){return[0,1]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||this.dirty)&&(this.gl.depthRange(ot[0],ot[1]),this.current=ot,this.dirty=!1)}}class Vo extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.DEPTH_TEST):lt.disable(lt.DEPTH_TEST),this.current=ot,this.dirty=!1}}class Qo extends Mn{getDefault(){return this.gl.LESS}set(ot){(ot!==this.current||this.dirty)&&(this.gl.depthFunc(ot),this.current=ot,this.dirty=!1)}}class Io extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.BLEND):lt.disable(lt.BLEND),this.current=ot,this.dirty=!1}}class as extends Mn{getDefault(){const ot=this.gl;return[ot.ONE,ot.ZERO]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||this.dirty)&&(this.gl.blendFunc(ot[0],ot[1]),this.current=ot,this.dirty=!1)}}class Bs extends Mn{getDefault(){return j.Color.transparent}set(ot){const lt=this.current;(ot.r!==lt.r||ot.g!==lt.g||ot.b!==lt.b||ot.a!==lt.a||this.dirty)&&(this.gl.blendColor(ot.r,ot.g,ot.b,ot.a),this.current=ot,this.dirty=!1)}}class cs extends Mn{getDefault(){return this.gl.FUNC_ADD}set(ot){(ot!==this.current||this.dirty)&&(this.gl.blendEquation(ot),this.current=ot,this.dirty=!1)}}class Zl extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;ot?lt.enable(lt.CULL_FACE):lt.disable(lt.CULL_FACE),this.current=ot,this.dirty=!1}}class Vl extends Mn{getDefault(){return this.gl.BACK}set(ot){(ot!==this.current||this.dirty)&&(this.gl.cullFace(ot),this.current=ot,this.dirty=!1)}}class zs extends Mn{getDefault(){return this.gl.CCW}set(ot){(ot!==this.current||this.dirty)&&(this.gl.frontFace(ot),this.current=ot,this.dirty=!1)}}class vs extends Mn{getDefault(){return null}set(ot){(ot!==this.current||this.dirty)&&(this.gl.useProgram(ot),this.current=ot,this.dirty=!1)}}class uu extends Mn{getDefault(){return this.gl.TEXTURE0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.activeTexture(ot),this.current=ot,this.dirty=!1)}}class No extends Mn{getDefault(){const ot=this.gl;return[0,0,ot.drawingBufferWidth,ot.drawingBufferHeight]}set(ot){const lt=this.current;(ot[0]!==lt[0]||ot[1]!==lt[1]||ot[2]!==lt[2]||ot[3]!==lt[3]||this.dirty)&&(this.gl.viewport(ot[0],ot[1],ot[2],ot[3]),this.current=ot,this.dirty=!1)}}class tu extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindFramebuffer(lt.FRAMEBUFFER,ot),this.current=ot,this.dirty=!1}}class cr extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindRenderbuffer(lt.RENDERBUFFER,ot),this.current=ot,this.dirty=!1}}class $t extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindTexture(lt.TEXTURE_2D,ot),this.current=ot,this.dirty=!1}}class en extends Mn{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.bindBuffer(lt.ARRAY_BUFFER,ot),this.current=ot,this.dirty=!1}}class dn extends Mn{getDefault(){return null}set(ot){const lt=this.gl;lt.bindBuffer(lt.ELEMENT_ARRAY_BUFFER,ot),this.current=ot,this.dirty=!1}}class Cn extends Mn{constructor(ot){super(ot),this.vao=ot.extVertexArrayObject}getDefault(){return null}set(ot){this.vao&&(ot!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(ot),this.current=ot,this.dirty=!1)}}class On extends Mn{getDefault(){return 4}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.pixelStorei(lt.UNPACK_ALIGNMENT,ot),this.current=ot,this.dirty=!1}}class or extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.pixelStorei(lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ot),this.current=ot,this.dirty=!1}}class ar extends Mn{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const lt=this.gl;lt.pixelStorei(lt.UNPACK_FLIP_Y_WEBGL,ot),this.current=ot,this.dirty=!1}}class nr extends Mn{constructor(ot,lt){super(ot),this.context=ot,this.parent=lt}getDefault(){return null}}class $n extends nr{setDirty(){this.dirty=!0}set(ot){if(ot===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const lt=this.gl;lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,ot,0),this.current=ot,this.dirty=!1}}class Fn extends nr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(ot){if(ot===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const lt=this.gl;lt.framebufferRenderbuffer(lt.FRAMEBUFFER,this.attachment(),lt.RENDERBUFFER,ot),this.current=ot,this.dirty=!1}}class ro extends Fn{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ln{constructor(ot,lt,bt,kt){this.context=ot,this.width=lt,this.height=bt;const jt=this.framebuffer=ot.gl.createFramebuffer();this.colorAttachment=new $n(ot,jt),kt&&(this.depthAttachment=new Fn(ot,jt))}destroy(){const ot=this.context.gl,lt=this.colorAttachment.get();if(lt&&ot.deleteTexture(lt),this.depthAttachment){const bt=this.depthAttachment.get();bt&&ot.deleteRenderbuffer(bt)}ot.deleteFramebuffer(this.framebuffer)}}class En{constructor(ot){this.gl=ot,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new qn(this),this.clearDepth=new Ir(this),this.clearStencil=new _i(this),this.colorMask=new Ur(this),this.depthMask=new fo(this),this.stencilMask=new Gr(this),this.stencilFunc=new Yr(this),this.stencilOp=new to(this),this.stencilTest=new Ro(this),this.depthRange=new Mo(this),this.depthTest=new Vo(this),this.depthFunc=new Qo(this),this.blend=new Io(this),this.blendFunc=new as(this),this.blendColor=new Bs(this),this.blendEquation=new cs(this),this.cullFace=new Zl(this),this.cullFaceSide=new Vl(this),this.frontFace=new zs(this),this.program=new vs(this),this.activeTexture=new uu(this),this.viewport=new No(this),this.bindFramebuffer=new tu(this),this.bindRenderbuffer=new cr(this),this.bindTexture=new $t(this),this.bindVertexBuffer=new en(this),this.bindElementBuffer=new dn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Cn(this),this.pixelStoreUnpack=new On(this),this.pixelStoreUnpackPremultiplyAlpha=new or(this),this.pixelStoreUnpackFlipY=new ar(this),this.extTextureFilterAnisotropic=ot.getExtension("EXT_texture_filter_anisotropic")||ot.getExtension("MOZ_EXT_texture_filter_anisotropic")||ot.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=ot.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=ot.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=ot.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=ot.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=ot.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(ot.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=ot.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=ot.getExtension("OES_standard_derivatives"),this.extTimerQuery=ot.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=ot.getParameter(ot.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(ot,lt){return new gn(this,ot,lt)}createVertexBuffer(ot,lt,bt){return new xn(this,ot,lt,bt)}createRenderbuffer(ot,lt,bt){const kt=this.gl,jt=kt.createRenderbuffer();return this.bindRenderbuffer.set(jt),kt.renderbufferStorage(kt.RENDERBUFFER,ot,lt,bt),this.bindRenderbuffer.set(null),jt}createFramebuffer(ot,lt,bt){return new Ln(this,ot,lt,bt)}clear({color:ot,depth:lt,stencil:bt}){const kt=this.gl;let jt=0;ot&&(jt|=kt.COLOR_BUFFER_BIT,this.clearColor.set(ot),this.colorMask.set([!0,!0,!0,!0])),lt!==void 0&&(jt|=kt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(lt),this.depthMask.set(!0)),bt!==void 0&&(jt|=kt.STENCIL_BUFFER_BIT,this.clearStencil.set(bt),this.stencilMask.set(255)),kt.clear(jt)}setCullFace(ot){ot.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(ot.mode),this.frontFace.set(ot.frontFace))}setDepthMode(ot){ot.func!==this.gl.ALWAYS||ot.mask?(this.depthTest.set(!0),this.depthFunc.set(ot.func),this.depthMask.set(ot.mask),this.depthRange.set(ot.range)):this.depthTest.set(!1)}setStencilMode(ot){ot.test.func!==this.gl.ALWAYS||ot.mask?(this.stencilTest.set(!0),this.stencilMask.set(ot.mask),this.stencilOp.set([ot.fail,ot.depthFail,ot.pass]),this.stencilFunc.set({func:ot.test.func,ref:ot.ref,mask:ot.test.mask})):this.stencilTest.set(!1)}setColorMode(ot){it(ot.blendFunction,j.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(ot.blendFunction),this.blendColor.set(ot.blendColor)),this.colorMask.set(ot.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Rn extends j.Evented{constructor(ot,lt,bt,kt){super(),this.id=ot,this.dispatcher=bt,this.setEventedParent(kt),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=j.extend({type:"raster"},lt),j.extend(this,j.pick(lt,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Dt(this._options,this.map._requestManager,null,null,(ot,lt)=>{this._tileJSONRequest=null,this._loaded=!0,ot?this.fire(new j.ErrorEvent(ot)):lt&&(j.extend(this,lt),lt.bounds&&(this.tileBounds=new Kt(lt.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(lt.tiles),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(ot){this.map=ot,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}hasTile(ot){return!this.tileBounds||this.tileBounds.contains(ot.canonical)}loadTile(ot,lt){const bt=j.exported.devicePixelRatio>=2,kt=this.map._requestManager.normalizeTileURL(ot.tileID.canonical.url(this.tiles,this.scheme),bt,this.tileSize);ot.request=j.getImage(this.map._requestManager.transformRequest(kt,j.ResourceType.Tile),(jt,Jt,an,cn)=>(delete ot.request,ot.aborted?(ot.state="unloaded",lt(null)):jt?(ot.state="errored",lt(jt)):Jt?(this.map._refreshExpiredTiles&&ot.setExpiryData({cacheControl:an,expires:cn}),ot.setTexture(Jt,this.map.painter),ot.state="loaded",j.cacheEntryPossiblyAdded(this.dispatcher),void lt(null)):lt(null)))}static loadTileData(ot,lt,bt){ot.setTexture(lt,bt)}static unloadTileData(ot,lt){ot.texture&&lt.saveTileTexture(ot.texture)}abortTile(ot,lt){ot.request&&(ot.request.cancel(),delete ot.request),lt()}unloadTile(ot,lt){ot.texture&&this.map.painter.saveTileTexture(ot.texture),lt()}hasTransition(){return!1}}let Hn;function Qn(dt,ot,lt,bt,kt,jt,Jt,an){const cn=[dt,lt,kt,ot,bt,jt,1,1,1],_n=[Jt,an,1],Sn=j.adjoint([],cn),[In,Bn,Yn]=j.transformMat3(_n,_n,j.transpose(Sn,Sn));return j.multiply$1(cn,[In,0,0,0,Bn,0,0,0,Yn],cn)}class lr extends j.Evented{constructor(ot,lt,bt,kt){super(),this.id=ot,this.dispatcher=bt,this.coordinates=lt.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(kt),this.options=lt,this._dirty=!1}load(ot,lt){this._loaded=lt||!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=j.getImage(this.map._requestManager.transformRequest(this.url,j.ResourceType.Image),(bt,kt)=>{if(this._imageRequest=null,this._loaded=!0,bt)this.fire(new j.ErrorEvent(bt));else if(kt){const{HTMLImageElement:jt}=j.window;this.image=kt instanceof jt?j.exported.getImageData(kt):kt,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,ot&&(this.coordinates=ot),this._finishLoading()}})}loaded(){return this._loaded}updateImage(ot){return this.image&&ot.url?(this._imageRequest&&ot.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=ot.url,this.load(ot.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(ot){this.map=ot,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(ot){this.coordinates=ot,this._boundsArray=void 0;const lt=ot.map(j.MercatorCoordinate.fromLngLat);return this.tileID=function(bt){let kt=1/0,jt=1/0,Jt=-1/0,an=-1/0;for(const In of bt)kt=Math.min(kt,In.x),jt=Math.min(jt,In.y),Jt=Math.max(Jt,In.x),an=Math.max(an,In.y);const cn=Math.max(Jt-kt,an-jt),_n=Math.max(0,Math.floor(-Math.log(cn)/Math.LN2)),Sn=Math.pow(2,_n);return new j.CanonicalTileID(_n,Math.floor((kt+Jt)/2*Sn),Math.floor((jt+an)/2*Sn))}(lt),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(ot){for(const cn in this.tiles){const _n=this.tiles[cn];_n.state!=="loaded"&&(_n.state="loaded",_n.texture=this.texture)}if(this._boundsArray)return;const lt=j.tileTransform(this.tileID,this.map.transform.projection),[bt,kt,jt,Jt]=this.coordinates.map(cn=>{const _n=lt.projection.project(cn[0],cn[1]);return j.getTilePoint(lt,_n)._round()});this.perspectiveTransform=function(cn,_n,Sn,In,Bn,Yn,Gn,Xn,Un,Nn){const er=Qn(0,0,cn,0,0,_n,cn,_n),Zn=Qn(Sn,In,Bn,Yn,Gn,Xn,Un,Nn);return j.multiply$1(Zn,j.adjoint(er,er),Zn),[Zn[6]/Zn[8]*cn/j.EXTENT,Zn[7]/Zn[8]*_n/j.EXTENT]}(this.width,this.height,bt.x,bt.y,kt.x,kt.y,Jt.x,Jt.y,jt.x,jt.y);const an=this._boundsArray=new j.StructArrayLayout4i8;an.emplaceBack(bt.x,bt.y,0,0),an.emplaceBack(kt.x,kt.y,j.EXTENT,0),an.emplaceBack(Jt.x,Jt.y,0,j.EXTENT),an.emplaceBack(jt.x,jt.y,j.EXTENT,j.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=ot.createVertexBuffer(an,j.boundsAttributes.members),this.boundsSegments=j.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const ot=this.map.painter.context,lt=ot.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new j.Texture(ot,this.image,lt.RGBA),this.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(ot)}loadTile(ot,lt){this.tileID&&this.tileID.equals(ot.tileID.canonical)?(this.tiles[String(ot.tileID.wrap)]=ot,ot.buckets={},lt(null)):(ot.state="errored",lt(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ur={vector:class extends j.Evented{constructor(dt,ot,lt,bt){if(super(),this.id=dt,this.dispatcher=lt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,j.extend(this,j.pick(ot,["url","scheme","tileSize","promoteId"])),this._options=j.extend({type:"vector"},ot),this._collectResourceTiming=ot.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(bt),this._tileWorkers={},this._deduped=new j.DedupedRequest}load(dt){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"}));const ot=Array.isArray(this.map._language)?this.map._language.join():this.map._language,lt=this.map._worldview;this._tileJSONRequest=Dt(this._options,this.map._requestManager,ot,lt,(bt,kt)=>{this._tileJSONRequest=null,this._loaded=!0,bt?(ot&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${ot}`),lt&&lt.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${lt}`),this.fire(new j.ErrorEvent(bt))):kt&&(j.extend(this,kt),kt.bounds&&(this.tileBounds=new Kt(kt.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(kt.tiles,this.map._requestManager._customAccessToken),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))),dt&&dt(bt)})}loaded(){return this._loaded}hasTile(dt){return!this.tileBounds||this.tileBounds.contains(dt.canonical)}onAdd(dt){this.map=dt,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>{const dt=this.map.style._getSourceCaches(this.id);for(const ot of dt)ot.clearTiles()})}setSourceProperty(dt){dt(),this.reload()}setTiles(dt){return this._options.tiles=dt,this.reload(),this}setUrl(dt){return this.url=dt,this._options.url=dt,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return j.extend({},this._options)}loadTile(dt,ot){const lt=this.map._requestManager.normalizeTileURL(dt.tileID.canonical.url(this.tiles,this.scheme)),bt={request:this.map._requestManager.transformRequest(lt,j.ResourceType.Tile),data:void 0,uid:dt.uid,tileID:dt.tileID,tileZoom:dt.tileZoom,zoom:dt.tileID.overscaledZ,tileSize:this.tileSize*dt.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:dt.isSymbolTile};if(bt.request.collectResourceTiming=this._collectResourceTiming,dt.actor&&dt.state!=="expired")dt.state==="loading"?dt.reloadCallback=ot:dt.request=dt.actor.send("reloadTile",bt,kt.bind(this));else if(dt.actor=this._tileWorkers[lt]=this._tileWorkers[lt]||this.dispatcher.getActor(),this.dispatcher.ready)dt.request=dt.actor.send("loadTile",bt,kt.bind(this),void 0,!0);else{const jt=j.loadVectorTile.call({deduped:this._deduped},bt,(Jt,an)=>{Jt||!an?kt.call(this,Jt):(bt.data={cacheControl:an.cacheControl,expires:an.expires,rawData:an.rawData.slice(0)},dt.actor&&dt.actor.send("loadTile",bt,kt.bind(this),void 0,!0))},!0);dt.request={cancel:jt}}function kt(jt,Jt){return delete dt.request,dt.aborted?ot(null):jt&&jt.status!==404?ot(jt):(Jt&&Jt.resourceTiming&&(dt.resourceTiming=Jt.resourceTiming),this.map._refreshExpiredTiles&&Jt&&dt.setExpiryData(Jt),dt.loadVectorData(Jt,this.map.painter),j.cacheEntryPossiblyAdded(this.dispatcher),ot(null),void(dt.reloadCallback&&(this.loadTile(dt,dt.reloadCallback),dt.reloadCallback=null)))}}abortTile(dt){dt.request&&(dt.request.cancel(),delete dt.request),dt.actor&&dt.actor.send("abortTile",{uid:dt.uid,type:this.type,source:this.id})}unloadTile(dt){dt.unloadVectorData(),dt.actor&&dt.actor.send("removeTile",{uid:dt.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:Rn,"raster-dem":class extends Rn{constructor(dt,ot,lt,bt){super(dt,ot,lt,bt),this.type="raster-dem",this.maxzoom=22,this._options=j.extend({type:"raster-dem"},ot),this.encoding=ot.encoding||"mapbox"}loadTile(dt,ot){const lt=this.map._requestManager.normalizeTileURL(dt.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function bt(kt,jt){kt&&(dt.state="errored",ot(kt)),jt&&(dt.dem=jt,dt.dem.onDeserialize(),dt.needsHillshadePrepare=!0,dt.needsDEMTextureUpload=!0,dt.state="loaded",ot(null))}dt.request=j.getImage(this.map._requestManager.transformRequest(lt,j.ResourceType.Tile),function(kt,jt,Jt,an){if(delete dt.request,dt.aborted)dt.state="unloaded",ot(null);else if(kt)dt.state="errored",ot(kt);else if(jt){this.map._refreshExpiredTiles&&dt.setExpiryData({cacheControl:Jt,expires:an});const cn=j.window.ImageBitmap&&jt instanceof j.window.ImageBitmap&&(Hn==null&&(Hn=j.window.OffscreenCanvas&&new j.window.OffscreenCanvas(1,1).getContext("2d")&&typeof j.window.createImageBitmap=="function"),Hn),_n=1-(jt.width-j.prevPowerOfTwo(jt.width))/2;_n<1||dt.neighboringTiles||(dt.neighboringTiles=this._getNeighboringTiles(dt.tileID));const Sn=cn?jt:j.exported.getImageData(jt,_n),In={uid:dt.uid,coord:dt.tileID,source:this.id,rawImageData:Sn,encoding:this.encoding,padding:_n};dt.actor&&dt.state!=="expired"||(dt.actor=this.dispatcher.getActor(),dt.actor.send("loadDEMTile",In,bt.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(dt){const ot=dt.canonical,lt=Math.pow(2,ot.z),bt=(ot.x-1+lt)%lt,kt=ot.x===0?dt.wrap-1:dt.wrap,jt=(ot.x+1+lt)%lt,Jt=ot.x+1===lt?dt.wrap+1:dt.wrap,an={};return an[new j.OverscaledTileID(dt.overscaledZ,kt,ot.z,bt,ot.y).key]={backfilled:!1},an[new j.OverscaledTileID(dt.overscaledZ,Jt,ot.z,jt,ot.y).key]={backfilled:!1},ot.y>0&&(an[new j.OverscaledTileID(dt.overscaledZ,kt,ot.z,bt,ot.y-1).key]={backfilled:!1},an[new j.OverscaledTileID(dt.overscaledZ,dt.wrap,ot.z,ot.x,ot.y-1).key]={backfilled:!1},an[new j.OverscaledTileID(dt.overscaledZ,Jt,ot.z,jt,ot.y-1).key]={backfilled:!1}),ot.y+1<lt&&(an[new j.OverscaledTileID(dt.overscaledZ,kt,ot.z,bt,ot.y+1).key]={backfilled:!1},an[new j.OverscaledTileID(dt.overscaledZ,dt.wrap,ot.z,ot.x,ot.y+1).key]={backfilled:!1},an[new j.OverscaledTileID(dt.overscaledZ,Jt,ot.z,jt,ot.y+1).key]={backfilled:!1}),an}unloadTile(dt){dt.demTexture&&this.map.painter.saveTileTexture(dt.demTexture),dt.fbo&&(dt.fbo.destroy(),delete dt.fbo),dt.dem&&delete dt.dem,delete dt.neighboringTiles,dt.state="unloaded"}},geojson:class extends j.Evented{constructor(dt,ot,lt,bt){super(),this.id=dt,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=lt.getActor(),this.setEventedParent(bt),this._data=ot.data,this._options=j.extend({},ot),this._collectResourceTiming=ot.collectResourceTiming,ot.maxzoom!==void 0&&(this.maxzoom=ot.maxzoom),ot.type&&(this.type=ot.type),ot.attribution&&(this.attribution=ot.attribution),this.promoteId=ot.promoteId;const kt=j.EXTENT/this.tileSize;this.workerOptions=j.extend({source:this.id,cluster:ot.cluster||!1,geojsonVtOptions:{buffer:(ot.buffer!==void 0?ot.buffer:128)*kt,tolerance:(ot.tolerance!==void 0?ot.tolerance:.375)*kt,extent:j.EXTENT,maxZoom:this.maxzoom,lineMetrics:ot.lineMetrics||!1,generateId:ot.generateId||!1},superclusterOptions:{maxZoom:ot.clusterMaxZoom!==void 0?ot.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,ot.clusterMinPoints||2),extent:j.EXTENT,radius:(ot.clusterRadius!==void 0?ot.clusterRadius:50)*kt,log:!1,generateId:ot.generateId||!1},clusterProperties:ot.clusterProperties,filter:ot.filter},ot.workerOptions)}onAdd(dt){this.map=dt,this.setData(this._data)}setData(dt){return this._data=dt,this._updateWorkerData(),this}getClusterExpansionZoom(dt,ot){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:dt,source:this.id},ot),this}getClusterChildren(dt,ot){return this.actor.send("geojson.getClusterChildren",{clusterId:dt,source:this.id},ot),this}getClusterLeaves(dt,ot,lt,bt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:dt,limit:ot,offset:lt},bt),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new j.Event("dataloading",{dataType:"source"})),this._loaded=!1;const dt=j.extend({},this.workerOptions),ot=this._data;typeof ot=="string"?(dt.request=this.map._requestManager.transformRequest(j.exported.resolveURL(ot),j.ResourceType.Source),dt.request.collectResourceTiming=this._collectResourceTiming):dt.data=JSON.stringify(ot),this._pendingLoad=this.actor.send(`${this.type}.loadData`,dt,(lt,bt)=>{if(this._loaded=!0,this._pendingLoad=null,lt)this.fire(new j.ErrorEvent(lt));else{const kt={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&bt&&bt.resourceTiming&&bt.resourceTiming[this.id]&&(kt.resourceTiming=bt.resourceTiming[this.id]),this.fire(new j.Event("data",kt)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(dt,ot){const lt=dt.actor?"reloadTile":"loadTile";dt.actor=this.actor,dt.request=this.actor.send(lt,{type:this.type,uid:dt.uid,tileID:dt.tileID,tileZoom:dt.tileZoom,zoom:dt.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(bt,kt)=>(delete dt.request,dt.unloadVectorData(),dt.aborted?ot(null):bt?ot(bt):(dt.loadVectorData(kt,this.map.painter,lt==="reloadTile"),ot(null))),void 0,lt==="loadTile")}abortTile(dt){dt.request&&(dt.request.cancel(),delete dt.request),dt.aborted=!0}unloadTile(dt){dt.unloadVectorData(),this.actor.send("removeTile",{uid:dt.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return j.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends lr{constructor(dt,ot,lt,bt){super(dt,ot,lt,bt),this.roundZoom=!0,this.type="video",this.options=ot}load(){this._loaded=!1;const dt=this.options;this.urls=[];for(const ot of dt.urls)this.urls.push(this.map._requestManager.transformRequest(ot,j.ResourceType.Source).url);j.getVideo(this.urls,(ot,lt)=>{this._loaded=!0,ot?this.fire(new j.ErrorEvent(ot)):lt&&(this.video=lt,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(dt){if(this.video){const ot=this.video.seekable;dt<ot.start(0)||dt>ot.end(0)?this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${ot.start(0)} and ${ot.end(0)}-second mark.`))):this.video.currentTime=dt}}getVideo(){return this.video}onAdd(dt){this.map||(this.map=dt,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const dt=this.map.painter.context,ot=dt.gl;this.texture?this.video.paused||(this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),ot.texSubImage2D(ot.TEXTURE_2D,0,0,0,ot.RGBA,ot.UNSIGNED_BYTE,this.video)):(this.texture=new j.Texture(dt,this.video,ot.RGBA),this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(dt)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:lr,canvas:class extends lr{constructor(dt,ot,lt,bt){super(dt,ot,lt,bt),ot.coordinates?Array.isArray(ot.coordinates)&&ot.coordinates.length===4&&!ot.coordinates.some(kt=>!Array.isArray(kt)||kt.length!==2||kt.some(jt=>typeof jt!="number"))||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'missing required property "coordinates"'))),ot.animate&&typeof ot.animate!="boolean"&&this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'optional "animate" property must be a boolean value'))),ot.canvas?typeof ot.canvas=="string"||ot.canvas instanceof j.window.HTMLCanvasElement||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${dt}`,null,'missing required property "canvas"'))),this.options=ot,this.animate=ot.animate===void 0||ot.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof j.window.HTMLCanvasElement?this.options.canvas:j.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new j.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(dt){this.map=dt,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let dt=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,dt=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,dt=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const ot=this.map.painter.context;this.texture?(dt||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new j.Texture(ot,this.canvas,ot.gl.RGBA,{premultiply:!0}),this._prepareData(ot)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const dt of[this.canvas.width,this.canvas.height])if(isNaN(dt)||dt<=0)return!0;return!1}},custom:class extends j.Evented{constructor(dt,ot,lt,bt){super(),this.id=dt,this.type="custom",this._dataType="raster",this._dispatcher=lt,this._implementation=ot,this.setEventedParent(bt),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new j.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new j.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Kt(this._implementation.bounds,this.minzoom,this.maxzoom)),ot.update=this._update.bind(this),ot.clearTiles=this._clearTiles.bind(this),ot.coveringTiles=this._coveringTiles.bind(this),j.extend(this,j.pick(ot,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return j.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(dt){this._map=dt,this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(dt),this.load()}onRemove(dt){this._implementation.onRemove&&this._implementation.onRemove(dt)}hasTile(dt){if(this._implementation.hasTile){const{x:ot,y:lt,z:bt}=dt.canonical;return this._implementation.hasTile({x:ot,y:lt,z:bt})}return!this.tileBounds||this.tileBounds.contains(dt.canonical)}loadTile(dt,ot){const{x:lt,y:bt,z:kt}=dt.tileID.canonical,jt=new j.window.AbortController;dt.request=Promise.resolve(this._implementation.loadTile({x:lt,y:bt,z:kt},{signal:jt.signal})).then(function(Jt){return delete dt.request,dt.aborted?(dt.state="unloaded",ot(null)):Jt===void 0?(dt.state="errored",ot(null)):Jt===null?(this.loadTileData(dt,{width:this.tileSize,height:this.tileSize,data:null}),dt.state="loaded",ot(null)):function(an){return an instanceof j.window.ImageData||an instanceof j.window.HTMLCanvasElement||an instanceof j.window.ImageBitmap||an instanceof j.window.HTMLImageElement}(Jt)?(this.loadTileData(dt,Jt),dt.state="loaded",void ot(null)):(dt.state="errored",ot(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(Jt=>{Jt.code!==20&&(dt.state="errored",ot(Jt))}),dt.request.cancel=()=>jt.abort()}loadTileData(dt,ot){Rn.loadTileData(dt,ot,this._map.painter)}unloadTileData(dt){Rn.unloadTileData(dt,this._map.painter)}unloadTile(dt,ot){if(this.unloadTileData(dt),this._implementation.unloadTile){const{x:lt,y:bt,z:kt}=dt.tileID.canonical;this._implementation.unloadTile({x:lt,y:bt,z:kt})}ot()}abortTile(dt,ot){dt.request&&dt.request.cancel&&(dt.request.cancel(),delete dt.request),ot()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(dt=>({x:dt.canonical.x,y:dt.canonical.y,z:dt.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}}},mr=function(dt,ot,lt,bt){const kt=new ur[ot.type](dt,ot,lt,bt);if(kt.id!==dt)throw new Error(`Expected Source id to be ${dt} instead of ${kt.id}`);return j.bindAll(["load","abort","unload","serialize","prepare"],kt),kt};function hr(dt,ot){const lt=j.identity([]);return j.scale(lt,lt,[.5*dt.width,.5*-dt.height,1]),j.translate(lt,lt,[1,-1,0]),j.multiply(lt,lt,dt.calculateProjMatrix(ot.toUnwrapped())),Float32Array.from(lt)}function wr(dt,ot,lt,bt,kt,jt,Jt,an=!1){const cn=dt.tilesIn(bt,Jt,an);cn.sort(Qr);const _n=[];for(const In of cn)_n.push({wrappedTileID:In.tile.tileID.wrapped().key,queryResults:In.tile.queryRenderedFeatures(ot,lt,dt._state,In,kt,jt,hr(dt.transform,In.tile.tileID),an)});const Sn=function(In){const Bn={},Yn={};for(const Gn of In){const Xn=Gn.queryResults,Un=Gn.wrappedTileID,Nn=Yn[Un]=Yn[Un]||{};for(const er in Xn){const Zn=Xn[er],fr=Nn[er]=Nn[er]||{},pr=Bn[er]=Bn[er]||[];for(const tr of Zn)fr[tr.featureIndex]||(fr[tr.featureIndex]=!0,pr.push(tr))}}return Bn}(_n);for(const In in Sn)Sn[In].forEach(Bn=>{const Yn=Bn.feature,Gn=Yn.layer;Gn&&Gn.type!=="background"&&Gn.type!=="sky"&&(Yn.source=Gn.source,Gn["source-layer"]&&(Yn.sourceLayer=Gn["source-layer"]),Yn.state=Yn.id!==void 0?dt.getFeatureState(Gn["source-layer"],Yn.id):{})});return Sn}function Br(dt,ot){const lt=dt.getRenderableIds().map(jt=>dt.getTileByID(jt)),bt=[],kt={};for(let jt=0;jt<lt.length;jt++){const Jt=lt[jt],an=Jt.tileID.canonical.key;kt[an]||(kt[an]=!0,Jt.querySourceFeatures(bt,ot))}return bt}function Qr(dt,ot){const lt=dt.tileID,bt=ot.tileID;return lt.overscaledZ-bt.overscaledZ||lt.canonical.y-bt.canonical.y||lt.wrap-bt.wrap||lt.canonical.x-bt.canonical.x}function Hr(){return Vy.workerClass!=null?new Vy.workerClass:new j.window.Worker(Vy.workerUrl)}const So="mapboxgl_preloaded_worker_pool";class Eo{constructor(){this.active={}}acquire(ot){if(!this.workers)for(this.workers=[];this.workers.length<Eo.workerCount;)this.workers.push(new Hr);return this.active[ot]=!0,this.workers.slice()}release(ot){delete this.active[ot],this.numActive()===0&&(this.workers.forEach(lt=>{lt.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[So]}numActive(){return Object.keys(this.active).length}}let Oo;function Lo(){return Oo||(Oo=new Eo),Oo}function Ko(dt,ot){const lt={};for(const bt in dt)bt!=="ref"&&(lt[bt]=dt[bt]);return j.refProperties.forEach(bt=>{bt in ot&&(lt[bt]=ot[bt])}),lt}function fs(dt){dt=dt.slice();const ot=Object.create(null);for(let lt=0;lt<dt.length;lt++)ot[dt[lt].id]=dt[lt];for(let lt=0;lt<dt.length;lt++)"ref"in dt[lt]&&(dt[lt]=Ko(dt[lt],ot[dt[lt].ref]));return dt}Eo.workerCount=2;const vo={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function As(dt,ot,lt){lt.push({command:vo.addSource,args:[dt,ot[dt]]})}function bs(dt,ot,lt){ot.push({command:vo.removeSource,args:[dt]}),lt[dt]=!0}function xu(dt,ot,lt,bt){bs(dt,lt,bt),As(dt,ot,lt)}function cu(dt,ot,lt){let bt;for(bt in dt[lt])if(dt[lt].hasOwnProperty(bt)&&bt!=="data"&&!it(dt[lt][bt],ot[lt][bt]))return!1;for(bt in ot[lt])if(ot[lt].hasOwnProperty(bt)&&bt!=="data"&&!it(dt[lt][bt],ot[lt][bt]))return!1;return!0}function Nr(dt,ot,lt,bt,kt,jt){let Jt;for(Jt in ot=ot||{},dt=dt||{})dt.hasOwnProperty(Jt)&&(it(dt[Jt],ot[Jt])||lt.push({command:jt,args:[bt,Jt,ot[Jt],kt]}));for(Jt in ot)ot.hasOwnProperty(Jt)&&!dt.hasOwnProperty(Jt)&&(it(dt[Jt],ot[Jt])||lt.push({command:jt,args:[bt,Jt,ot[Jt],kt]}))}function ga(dt){return dt.id}function Vs(dt,ot){return dt[ot.id]=ot,dt}class hu{constructor(ot,lt){this.reset(ot,lt)}reset(ot,lt){this.points=ot||[],this._distances=[0];for(let bt=1;bt<this.points.length;bt++)this._distances[bt]=this._distances[bt-1]+this.points[bt].dist(this.points[bt-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(lt||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(ot){if(this.points.length===1)return this.points[0];ot=j.clamp(ot,0,1);let lt=1,bt=this._distances[lt];const kt=ot*this.paddedLength+this.padding;for(;bt<kt&&lt<this._distances.length;)bt=this._distances[++lt];const jt=lt-1,Jt=this._distances[jt],an=bt-Jt,cn=an>0?(kt-Jt)/an:0;return this.points[jt].mult(1-cn).add(this.points[lt].mult(cn))}}class nu{constructor(ot,lt,bt){const kt=this.boxCells=[],jt=this.circleCells=[];this.xCellCount=Math.ceil(ot/bt),this.yCellCount=Math.ceil(lt/bt);for(let Jt=0;Jt<this.xCellCount*this.yCellCount;Jt++)kt.push([]),jt.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=ot,this.height=lt,this.xScale=this.xCellCount/ot,this.yScale=this.yCellCount/lt,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(ot,lt,bt,kt,jt){this._forEachCell(lt,bt,kt,jt,this._insertBoxCell,this.boxUid++),this.boxKeys.push(ot),this.bboxes.push(lt),this.bboxes.push(bt),this.bboxes.push(kt),this.bboxes.push(jt)}insertCircle(ot,lt,bt,kt){this._forEachCell(lt-kt,bt-kt,lt+kt,bt+kt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(ot),this.circles.push(lt),this.circles.push(bt),this.circles.push(kt)}_insertBoxCell(ot,lt,bt,kt,jt,Jt){this.boxCells[jt].push(Jt)}_insertCircleCell(ot,lt,bt,kt,jt,Jt){this.circleCells[jt].push(Jt)}_query(ot,lt,bt,kt,jt,Jt){if(bt<0||ot>this.width||kt<0||lt>this.height)return!jt&&[];const an=[];if(ot<=0&&lt<=0&&this.width<=bt&&this.height<=kt){if(jt)return!0;for(let cn=0;cn<this.boxKeys.length;cn++)an.push({key:this.boxKeys[cn],x1:this.bboxes[4*cn],y1:this.bboxes[4*cn+1],x2:this.bboxes[4*cn+2],y2:this.bboxes[4*cn+3]});for(let cn=0;cn<this.circleKeys.length;cn++){const _n=this.circles[3*cn],Sn=this.circles[3*cn+1],In=this.circles[3*cn+2];an.push({key:this.circleKeys[cn],x1:_n-In,y1:Sn-In,x2:_n+In,y2:Sn+In})}return Jt?an.filter(Jt):an}return this._forEachCell(ot,lt,bt,kt,this._queryCell,an,{hitTest:jt,seenUids:{box:{},circle:{}}},Jt),jt?an.length>0:an}_queryCircle(ot,lt,bt,kt,jt){const Jt=ot-bt,an=ot+bt,cn=lt-bt,_n=lt+bt;if(an<0||Jt>this.width||_n<0||cn>this.height)return!kt&&[];const Sn=[];return this._forEachCell(Jt,cn,an,_n,this._queryCellCircle,Sn,{hitTest:kt,circle:{x:ot,y:lt,radius:bt},seenUids:{box:{},circle:{}}},jt),kt?Sn.length>0:Sn}query(ot,lt,bt,kt,jt){return this._query(ot,lt,bt,kt,!1,jt)}hitTest(ot,lt,bt,kt,jt){return this._query(ot,lt,bt,kt,!0,jt)}hitTestCircle(ot,lt,bt,kt){return this._queryCircle(ot,lt,bt,!0,kt)}_queryCell(ot,lt,bt,kt,jt,Jt,an,cn){const _n=an.seenUids,Sn=this.boxCells[jt];if(Sn!==null){const Bn=this.bboxes;for(const Yn of Sn)if(!_n.box[Yn]){_n.box[Yn]=!0;const Gn=4*Yn;if(ot<=Bn[Gn+2]&&lt<=Bn[Gn+3]&&bt>=Bn[Gn+0]&&kt>=Bn[Gn+1]&&(!cn||cn(this.boxKeys[Yn]))){if(an.hitTest)return Jt.push(!0),!0;Jt.push({key:this.boxKeys[Yn],x1:Bn[Gn],y1:Bn[Gn+1],x2:Bn[Gn+2],y2:Bn[Gn+3]})}}}const In=this.circleCells[jt];if(In!==null){const Bn=this.circles;for(const Yn of In)if(!_n.circle[Yn]){_n.circle[Yn]=!0;const Gn=3*Yn;if(this._circleAndRectCollide(Bn[Gn],Bn[Gn+1],Bn[Gn+2],ot,lt,bt,kt)&&(!cn||cn(this.circleKeys[Yn]))){if(an.hitTest)return Jt.push(!0),!0;{const Xn=Bn[Gn],Un=Bn[Gn+1],Nn=Bn[Gn+2];Jt.push({key:this.circleKeys[Yn],x1:Xn-Nn,y1:Un-Nn,x2:Xn+Nn,y2:Un+Nn})}}}}}_queryCellCircle(ot,lt,bt,kt,jt,Jt,an,cn){const _n=an.circle,Sn=an.seenUids,In=this.boxCells[jt];if(In!==null){const Yn=this.bboxes;for(const Gn of In)if(!Sn.box[Gn]){Sn.box[Gn]=!0;const Xn=4*Gn;if(this._circleAndRectCollide(_n.x,_n.y,_n.radius,Yn[Xn+0],Yn[Xn+1],Yn[Xn+2],Yn[Xn+3])&&(!cn||cn(this.boxKeys[Gn])))return Jt.push(!0),!0}}const Bn=this.circleCells[jt];if(Bn!==null){const Yn=this.circles;for(const Gn of Bn)if(!Sn.circle[Gn]){Sn.circle[Gn]=!0;const Xn=3*Gn;if(this._circlesCollide(Yn[Xn],Yn[Xn+1],Yn[Xn+2],_n.x,_n.y,_n.radius)&&(!cn||cn(this.circleKeys[Gn])))return Jt.push(!0),!0}}}_forEachCell(ot,lt,bt,kt,jt,Jt,an,cn){const _n=this._convertToXCellCoord(ot),Sn=this._convertToYCellCoord(lt),In=this._convertToXCellCoord(bt),Bn=this._convertToYCellCoord(kt);for(let Yn=_n;Yn<=In;Yn++)for(let Gn=Sn;Gn<=Bn;Gn++)if(jt.call(this,ot,lt,bt,kt,this.xCellCount*Gn+Yn,Jt,an,cn))return}_convertToXCellCoord(ot){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(ot*this.xScale)))}_convertToYCellCoord(ot){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(ot*this.yScale)))}_circlesCollide(ot,lt,bt,kt,jt,Jt){const an=kt-ot,cn=jt-lt,_n=bt+Jt;return _n*_n>an*an+cn*cn}_circleAndRectCollide(ot,lt,bt,kt,jt,Jt,an){const cn=(Jt-kt)/2,_n=Math.abs(ot-(kt+cn));if(_n>cn+bt)return!1;const Sn=(an-jt)/2,In=Math.abs(lt-(jt+Sn));if(In>Sn+bt)return!1;if(_n<=cn||In<=Sn)return!0;const Bn=_n-cn,Yn=In-Sn;return Bn*Bn+Yn*Yn<=bt*bt}}const Au=Math.tan(85*Math.PI/180);function _l(dt,ot,lt,bt,kt,jt,Jt){const an=j.create();if(lt)if(jt.name==="globe"){const cn=j.calculateGlobeLabelMatrix(kt,ot);j.multiply(an,an,cn)}else{const cn=wt([],Jt);an[0]=cn[0],an[1]=cn[1],an[4]=cn[2],an[5]=cn[3],bt||j.rotateZ(an,an,kt.angle)}else j.multiply(an,kt.labelPlaneMatrix,dt);return an}function nm(dt,ot,lt,bt,kt,jt,Jt){const an=_l(dt,ot,lt,bt,kt,jt,Jt);return jt.name==="globe"&&lt||(an[2]=an[6]=an[10]=an[14]=0),an}function tp(dt,ot,lt,bt,kt,jt,Jt){if(lt){if(jt.name==="globe"){const an=_l(dt,ot,lt,bt,kt,jt,Jt);return j.invert(an,an),j.multiply(an,dt,an),an}{const an=j.clone(dt),cn=j.identity([]);return cn[0]=Jt[0],cn[1]=Jt[1],cn[4]=Jt[2],cn[5]=Jt[3],j.multiply(an,an,cn),bt||j.rotateZ(an,an,-kt.angle),an}}return kt.glCoordMatrix}function po(dt,ot,lt=0){const bt=[dt.x,dt.y,lt,1];lt?j.transformMat4$1(bt,bt,ot):Vu(bt,bt,ot);const kt=bt[3];return{point:[bt[0]/kt,bt[1]/kt,bt[2]/kt],signedDistanceFromCamera:kt}}function ns(dt,ot){const lt=[dt[0],dt[1],dt[2],1];j.transformMat4$1(lt,lt,ot);const bt=lt[3];return{point:[lt[0]/bt,lt[1]/bt,lt[2]/bt],signedDistanceFromCamera:bt}}function is(dt,ot){return Math.min(.5+dt/ot*.5,1.5)}function Eu(dt,ot){const lt=dt[0]/dt[3],bt=dt[1]/dt[3];return lt>=-ot[0]&&lt<=ot[0]&&bt>=-ot[1]&&bt<=ot[1]}function np(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n){const Sn=lt.transform,In=bt?dt.textSizeData:dt.iconSizeData,Bn=j.evaluateSizeForZoom(In,lt.transform.zoom),Yn=Sn.projection.name==="globe",Gn=[256/lt.width*2+1,256/lt.height*2+1],Xn=bt?dt.text.dynamicLayoutVertexArray:dt.icon.dynamicLayoutVertexArray;Xn.clear();let Un=null;Yn&&(Un=bt?dt.text.globeExtVertexArray:dt.icon.globeExtVertexArray);const Nn=dt.lineVertexArray,er=bt?dt.text.placedSymbolArray:dt.icon.placedSymbolArray,Zn=lt.transform.width/lt.transform.height;let fr=!1;for(let pr=0;pr<er.length;pr++){const tr=er.get(pr);if(tr.writingMode!==j.WritingMode.vertical||fr||pr!==0&&er.get(pr-1).writingMode===j.WritingMode.horizontal||(fr=!0),(tr.hidden||tr.writingMode===j.WritingMode.vertical)&&!fr){js(tr.numGlyphs,Xn);continue}fr=!1;const vr=new j.pointGeometry(tr.tileAnchorX,tr.tileAnchorY),Er=cn?cn(vr):[0,0,0],Lr=Sn.projection.projectTilePoint(vr.x,vr.y,_n.canonical),kr=[Lr.x+Er[0],Lr.y+Er[1],Lr.z+Er[2]],io=[...kr,1];if(j.transformMat4$1(io,io,ot),!Eu(io,Gn)){js(tr.numGlyphs,Xn);continue}const Ar=is(lt.transform.cameraToCenterDistance,io[3]),$r=j.evaluateSizeForFeature(In,Bn,tr),qr=Jt?$r/Ar:$r*Ar,Or=po(new j.pointGeometry(kr[0],kr[1]),kt,kr[2]);if(Or.signedDistanceFromCamera<=0){js(tr.numGlyphs,Xn);continue}let Sr={};const mo=Jt?null:cn,lo=zu(tr,qr,!1,an,ot,kt,jt,dt.glyphOffsetArray,Nn,Xn,Un,Or.point,vr,Sr,Zn,mo,Sn.projection,_n,Jt);fr=lo.useVertical,mo&&lo.needsFlipping&&(Sr={}),(lo.notEnoughRoom||fr||lo.needsFlipping&&zu(tr,qr,!0,an,ot,kt,jt,dt.glyphOffsetArray,Nn,Xn,Un,Or.point,vr,Sr,Zn,mo,Sn.projection,_n,Jt).notEnoughRoom)&&js(tr.numGlyphs,Xn)}bt?(dt.text.dynamicLayoutVertexBuffer.updateData(Xn),Un&&dt.text.globeExtVertexBuffer.updateData(Un)):(dt.icon.dynamicLayoutVertexBuffer.updateData(Xn),Un&&dt.icon.globeExtVertexBuffer.updateData(Un))}function Jo(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn){const Un=an.glyphStartIndex+an.numGlyphs,Nn=an.lineStartIndex,er=an.lineStartIndex+an.lineLength,Zn=ot.getoffsetX(an.glyphStartIndex),fr=ot.getoffsetX(Un-1),pr=ds(dt*Zn,lt,bt,kt,jt,Jt,an.segment,Nn,er,cn,_n,Sn,In,Bn,!0,Yn,Gn,Xn);if(!pr)return null;const tr=ds(dt*fr,lt,bt,kt,jt,Jt,an.segment,Nn,er,cn,_n,Sn,In,Bn,!0,Yn,Gn,Xn);return tr?{first:pr,last:tr}:null}function Uu(dt,ot,lt,bt){return dt.writingMode===j.WritingMode.horizontal&&Math.abs(lt.y-ot.y)>Math.abs(lt.x-ot.x)*bt?{useVertical:!0}:dt.writingMode===j.WritingMode.vertical?ot.y<lt.y?{needsFlipping:!0}:null:dt.flipState!==0&&function(kt,jt,Jt){const an=(jt.x-kt.x)*Jt;return an===0||Math.abs((jt.y-kt.y)/an)>Au}(ot,lt,bt)?dt.flipState===1?{needsFlipping:!0}:null:ot.x>lt.x?{needsFlipping:!0}:null}function zu(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn,Un,Nn,er){const Zn=ot/24,fr=dt.lineOffsetX*Zn,pr=dt.lineOffsetY*Zn;let tr=[];if(dt.numGlyphs>1){const vr=dt.glyphStartIndex+dt.numGlyphs,Er=dt.lineStartIndex,Lr=dt.lineStartIndex+dt.lineLength,kr=Jo(Zn,an,fr,pr,lt,In,Bn,dt,cn,jt,Yn,Xn,!1,Un,Nn,er);if(!kr)return{notEnoughRoom:!0};const io=ns(kr.first.point,Jt).point,Ar=ns(kr.last.point,Jt).point,$r=new j.pointGeometry(io[0],io[1]),qr=new j.pointGeometry(Ar[0],Ar[1]);if(bt&&!lt){const Or=Uu(dt,$r,qr,Gn);if(dt.flipState=Or&&Or.needsFlipping?1:2,Or)return Or}tr=[kr.first];for(let Or=dt.glyphStartIndex+1;Or<vr-1;Or++){const Sr=ds(Zn*an.getoffsetX(Or),fr,pr,lt,In,Bn,dt.segment,Er,Lr,cn,jt,Yn,Xn,!1,!1,Un,Nn,er);if(!Sr)return{notEnoughRoom:!0};tr.push(Sr)}tr.push(kr.last)}else{if(bt&&!lt){const Er=po(Bn,kt).point,Lr=dt.lineStartIndex+dt.segment+1,kr=new j.pointGeometry(cn.getx(Lr),cn.gety(Lr)),io=po(kr,kt),Ar=io.signedDistanceFromCamera>0?io.point:Ml(Bn,kr,Er,1,kt,void 0,Un,Nn.canonical),$r=Uu(dt,new j.pointGeometry(Er[0],Er[1]),new j.pointGeometry(Ar[0],Ar[1]),Gn);if(dt.flipState=$r&&$r.needsFlipping?1:2,$r)return $r}const vr=ds(Zn*an.getoffsetX(dt.glyphStartIndex),fr,pr,lt,In,Bn,dt.segment,dt.lineStartIndex,dt.lineStartIndex+dt.lineLength,cn,jt,Yn,Xn,!1,!1,Un,Nn,er);if(!vr)return{notEnoughRoom:!0};tr=[vr]}if(Sn)for(const vr of tr)j.updateGlobeVertexNormal(Sn,_n.length+0,vr.up[0],vr.up[1],vr.up[2]),j.updateGlobeVertexNormal(Sn,_n.length+1,vr.up[0],vr.up[1],vr.up[2]),j.updateGlobeVertexNormal(Sn,_n.length+2,vr.up[0],vr.up[1],vr.up[2]),j.updateGlobeVertexNormal(Sn,_n.length+3,vr.up[0],vr.up[1],vr.up[2]),j.addDynamicAttributes(_n,vr.point[0],vr.point[1],vr.point[2],vr.angle);else for(const vr of tr)j.addDynamicAttributes(_n,vr.point[0],vr.point[1],vr.point[2],vr.angle);return{}}function fu(dt,ot,lt,bt,kt){const jt=bt.projectTilePoint(dt.x,dt.y,ot);if(!kt)return po(jt,lt,jt.z);const Jt=kt(dt);return po(new j.pointGeometry(jt.x+Jt[0],jt.y+Jt[1]),lt,jt.z+Jt[2])}function Ml(dt,ot,lt,bt,kt,jt,Jt,an){const cn=fu(dt.add(dt.sub(ot)._unit()),an,kt,Jt,jt).point,_n=j.sub([],lt,cn);return j.scaleAndAdd([],lt,_n,bt/j.length(_n))}function ds(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn,Un,Nn){const er=bt?dt-ot:dt+ot;let Zn=er>0?1:-1,fr=0;bt&&(Zn*=-1,fr=Math.PI),Zn<0&&(fr+=Math.PI);let pr=Zn>0?an+Jt:an+Jt+1,tr=kt,vr=kt,Er=0,Lr=0;const kr=Math.abs(er),io=[],Ar=[];let $r=jt;const qr=()=>{const co=pr-Zn;return Er===0?jt:new j.pointGeometry(_n.getx(co),_n.gety(co))},Or=()=>{const co=qr();return Ml(co,$r||co,vr,kr-Er+1,Sn,Bn,Xn,Un.canonical)};for(;Er+Lr<=kr;){if(pr+=Zn,pr<an||pr>=cn)return null;if(vr=tr,io.push(tr),Yn&&Ar.push($r||qr()),tr=In[pr],tr===void 0){$r=new j.pointGeometry(_n.getx(pr),_n.gety(pr));const co=fu($r,Un.canonical,Sn,Xn,Bn);tr=co.signedDistanceFromCamera>0?In[pr]=co.point:Or()}else $r=null;Er+=Lr,Lr=j.distance(vr,tr)}$r=$r||new j.pointGeometry(_n.getx(pr),_n.gety(pr));const Sr=qr();Gn&&Bn&&(In[pr]=tr=In[pr]===void 0?tr:Or(),Lr=j.distance(vr,tr));const mo=(kr-Er)/Lr,lo=$r.sub(Sr).mult(mo)._add(Sr),ho=j.sub([],tr,vr),uo=j.scaleAndAdd([],vr,ho,mo);let Po=[0,0,1],zo=ho[0],Uo=ho[1];if(Nn&&(Po=Xn.upVector(Un.canonical,lo.x,lo.y),Po[0]!==0||Po[1]!==0||Po[2]!==1)){const co=[1,0,0],Yo=[0,1,0];co[0]=Po[2],co[1]=0,co[2]=-Po[0],j.cross(Yo,Po,co),j.normalize(co,co),j.normalize(Yo,Yo),zo=j.dot(ho,co),Uo=j.dot(ho,Yo)}if(lt){const co=j.cross([],Po,ho);j.normalize(co,co),j.scaleAndAdd(uo,uo,co,lt*Zn)}const Bo=fr+Math.atan2(Uo,zo);return io.push(uo),Yn&&Ar.push(lo),{point:uo,angle:Bo,path:io,tilePath:Ar,up:Po}}const Cm=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function js(dt,ot){for(let lt=0;lt<dt;lt++){const bt=ot.length;ot.resize(bt+4),ot.float32.set(Cm,4*bt)}}function Vu(dt,ot,lt){const bt=ot[0],kt=ot[1];return dt[0]=lt[0]*bt+lt[4]*kt+lt[12],dt[1]=lt[1]*bt+lt[5]*kt+lt[13],dt[3]=lt[3]*bt+lt[7]*kt+lt[15],dt}const Ks=100;class Wu{constructor(ot,lt,bt=new nu(ot.width+200,ot.height+200,25),kt=new nu(ot.width+200,ot.height+200,25)){this.transform=ot,this.grid=bt,this.ignoredGrid=kt,this.pitchfactor=Math.cos(ot._pitch)*ot.cameraToCenterDistance,this.screenRightBoundary=ot.width+Ks,this.screenBottomBoundary=ot.height+Ks,this.gridRightBoundary=ot.width+200,this.gridBottomBoundary=ot.height+200,this.fogState=lt}placeCollisionBox(ot,lt,bt,kt,jt,Jt,an,cn){let _n=bt.projectedAnchorX,Sn=bt.projectedAnchorY,In=bt.projectedAnchorZ;const Bn=bt.elevation,Yn=bt.tileID;if(Bn&&Yn){const pr=ot.getProjection().upVector(Yn.canonical,bt.tileAnchorX,bt.tileAnchorY),tr=ot.getProjection().upVectorScale(Yn.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;_n+=pr[0]*Bn*tr,Sn+=pr[1]*Bn*tr,In+=pr[2]*Bn*tr}const Gn=this.projectAndGetPerspectiveRatio(an,[_n,Sn,In],bt.tileID,ot.projection.name==="globe"||!!Bn||this.transform.pitch>0,ot.getProjection()),Xn=Jt*Gn.perspectiveRatio,Un=(bt.x1*lt+kt.x-bt.padding)*Xn+Gn.point.x,Nn=(bt.y1*lt+kt.y-bt.padding)*Xn+Gn.point.y,er=(bt.x2*lt+kt.x+bt.padding)*Xn+Gn.point.x,Zn=(bt.y2*lt+kt.y+bt.padding)*Xn+Gn.point.y,fr=Gn.perspectiveRatio<=.55||Gn.occluded;return!this.isInsideGrid(Un,Nn,er,Zn)||!jt&&this.grid.hitTest(Un,Nn,er,Zn,cn)||fr?{box:[],offscreen:!1,occluded:Gn.occluded}:{box:[Un,Nn,er,Zn],offscreen:this.isOffscreen(Un,Nn,er,Zn),occluded:!1}}placeCollisionCircles(ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn){const Un=[],Nn=this.transform.elevation,er=Nn?Nn.getAtTileOffsetFunc(Xn,this.transform.center.lat,this.transform.worldSize,ot.getProjection()):Sr=>[0,0,0],Zn=new j.pointGeometry(bt.tileAnchorX,bt.tileAnchorY),fr=ot.getProjection().projectTilePoint(bt.tileAnchorX,bt.tileAnchorY,Xn.canonical),pr=er(Zn),tr=[fr.x+pr[0],fr.y+pr[1],fr.z+pr[2]],vr=ot.projection.name==="globe",Er=this.projectAndGetPerspectiveRatio(an,[tr[0],tr[1],tr[2]],Xn,vr||!!Nn||this.transform.pitch>0,ot.getProjection()),{perspectiveRatio:Lr}=Er,kr=(In?Jt/Lr:Jt*Lr)/j.ONE_EM,io=po(new j.pointGeometry(tr[0],tr[1]),cn,tr[2]).point,Ar=Er.signedDistanceFromCamera>0?Jo(kr,jt,bt.lineOffsetX*kr,bt.lineOffsetY*kr,!1,io,Zn,bt,kt,cn,{},Nn&&!In?er:null,In&&!!Nn,ot.getProjection(),Xn,In):null;let $r=!1,qr=!1,Or=!0;if(Ar&&!Er.occluded){const Sr=.5*Yn*Lr+Gn,mo=new j.pointGeometry(-100,-100),lo=new j.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ho=new hu,uo=Ar.first,Po=Ar.last;let zo=[];for(let co=uo.path.length-1;co>=1;co--)zo.push(uo.path[co]);for(let co=1;co<Po.path.length;co++)zo.push(Po.path[co]);const Uo=2.5*Sr;if(_n){const co=zo.map(Nn&&!vr?(Yo,ls)=>{const Ls=er(ls<uo.path.length-1?uo.tilePath[uo.path.length-1-ls]:Po.tilePath[ls-uo.path.length+2]);return Yo[2]=Ls[2],ns(Yo,_n)}:Yo=>ns(Yo,_n));zo=co.some(Yo=>Yo.signedDistanceFromCamera<=0)?[]:co.map(Yo=>Yo.point)}let Bo=[];if(zo.length>0){const co=zo.map(Os=>new j.pointGeometry(Os[0],Os[1]));let Yo=1/0,ls=-1/0,Ls=1/0,Ns=-1/0;for(let Os=0;Os<co.length;Os++)Yo=Math.min(Yo,co[Os].x),Ls=Math.min(Ls,co[Os].y),ls=Math.max(ls,co[Os].x),Ns=Math.max(Ns,co[Os].y);Bo=Yo>=mo.x&&ls<=lo.x&&Ls>=mo.y&&Ns<=lo.y?[co]:ls<mo.x||Yo>lo.x||Ns<mo.y||Ls>lo.y?[]:j.clipLine([co],mo.x,mo.y,lo.x,lo.y)}for(const co of Bo){ho.reset(co,.25*Sr);let Yo=0;Yo=ho.length<=.5*Sr?1:Math.ceil(ho.paddedLength/Uo)+1;for(let ls=0;ls<Yo;ls++){const Ls=ls/Math.max(Yo-1,1),Ns=ho.lerp(Ls),Os=Ns.x+Ks,Ll=Ns.y+Ks;Un.push(Os,Ll,Sr,0);const iu=Os-Sr,hp=Ll-Sr,Us=Os+Sr,xa=Ll+Sr;if(Or=Or&&this.isOffscreen(iu,hp,Us,xa),qr=qr||this.isInsideGrid(iu,hp,Us,xa),!lt&&this.grid.hitTestCircle(Os,Ll,Sr,Bn)&&($r=!0,!Sn))return{circles:[],offscreen:!1,collisionDetected:$r,occluded:!1}}}}return{circles:!Sn&&$r||!qr?[]:Un,offscreen:Or,collisionDetected:$r,occluded:Er.occluded}}queryRenderedSymbols(ot){if(ot.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const lt=[];let bt=1/0,kt=1/0,jt=-1/0,Jt=-1/0;for(const Sn of ot){const In=new j.pointGeometry(Sn.x+Ks,Sn.y+Ks);bt=Math.min(bt,In.x),kt=Math.min(kt,In.y),jt=Math.max(jt,In.x),Jt=Math.max(Jt,In.y),lt.push(In)}const an=this.grid.query(bt,kt,jt,Jt).concat(this.ignoredGrid.query(bt,kt,jt,Jt)),cn={},_n={};for(const Sn of an){const In=Sn.key;if(cn[In.bucketInstanceId]===void 0&&(cn[In.bucketInstanceId]={}),cn[In.bucketInstanceId][In.featureIndex])continue;const Bn=[new j.pointGeometry(Sn.x1,Sn.y1),new j.pointGeometry(Sn.x2,Sn.y1),new j.pointGeometry(Sn.x2,Sn.y2),new j.pointGeometry(Sn.x1,Sn.y2)];j.polygonIntersectsPolygon(lt,Bn)&&(cn[In.bucketInstanceId][In.featureIndex]=!0,_n[In.bucketInstanceId]===void 0&&(_n[In.bucketInstanceId]=[]),_n[In.bucketInstanceId].push(In.featureIndex))}return _n}insertCollisionBox(ot,lt,bt,kt,jt){(lt?this.ignoredGrid:this.grid).insert({bucketInstanceId:bt,featureIndex:kt,collisionGroupID:jt},ot[0],ot[1],ot[2],ot[3])}insertCollisionCircles(ot,lt,bt,kt,jt){const Jt=lt?this.ignoredGrid:this.grid,an={bucketInstanceId:bt,featureIndex:kt,collisionGroupID:jt};for(let cn=0;cn<ot.length;cn+=4)Jt.insertCircle(an,ot[cn],ot[cn+1],ot[cn+2])}projectAndGetPerspectiveRatio(ot,lt,bt,kt,jt){const Jt=[lt[0],lt[1],lt[2],1];let an=!1;if(lt[2]||this.transform.pitch>0){j.transformMat4$1(Jt,Jt,ot);const cn=jt.name==="globe";this.fogState&&bt&&!cn&&(an=function(_n,Sn,In,Bn,Yn,Gn){const Xn=Gn.calculateFogTileMatrix(Yn),Un=[Sn,In,Bn];return j.transformMat4(Un,Un,Xn),qt(_n,Un,Gn.pitch,Gn._fov)}(this.fogState,lt[0],lt[1],lt[2],bt.toUnwrapped(),this.transform)>.9)}else Vu(Jt,Jt,ot);return{point:new j.pointGeometry((Jt[0]/Jt[3]+1)/2*this.transform.width+Ks,(-Jt[1]/Jt[3]+1)/2*this.transform.height+Ks),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(jt)/Jt[3]*.5,1.5),signedDistanceFromCamera:Jt[3],occluded:kt&&Jt[2]>Jt[3]||an}}isOffscreen(ot,lt,bt,kt){return bt<Ks||ot>=this.screenRightBoundary||kt<Ks||lt>this.screenBottomBoundary}isInsideGrid(ot,lt,bt,kt){return bt>=0&&ot<this.gridRightBoundary&&kt>=0&&lt<this.gridBottomBoundary}getViewportMatrix(){const ot=j.identity([]);return j.translate(ot,ot,[-100,-100,0]),ot}}function rp(dt,ot,lt){const bt=ot.createTileMatrix(dt,dt.worldSize,lt.toUnwrapped());return j.multiply(new Float32Array(16),dt.projMatrix,bt)}function jp(dt,ot,lt){if(ot.projection.name===lt.projection.name)return dt.projMatrix;const bt=lt.clone();return bt.setProjection(ot.projection),rp(bt,ot.getProjection(),dt)}function Js(dt,ot,lt){return ot.name===lt.projection.name?dt.projMatrix:rp(lt,ot,dt)}class Yl{constructor(ot,lt,bt,kt){this.opacity=ot?Math.max(0,Math.min(1,ot.opacity+(ot.placed?lt:-lt))):kt&&bt?1:0,this.placed=bt}isHidden(){return this.opacity===0&&!this.placed}}class El{constructor(ot,lt,bt,kt,jt,Jt=!1){this.text=new Yl(ot?ot.text:null,lt,bt,jt),this.icon=new Yl(ot?ot.icon:null,lt,kt,jt),this.clipped=Jt}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gs{constructor(ot,lt,bt,kt=!1){this.text=ot,this.icon=lt,this.skipFade=bt,this.clipped=kt}}class Fs{constructor(){this.invProjMatrix=j.create(),this.viewportMatrix=j.create(),this.circles=[]}}class Fp{constructor(ot,lt,bt,kt,jt){this.bucketInstanceId=ot,this.featureIndex=lt,this.sourceLayerIndex=bt,this.bucketIndex=kt,this.tileID=jt}}class ip{constructor(ot){this.crossSourceCollisions=ot,this.maxGroupID=0,this.collisionGroups={}}get(ot){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[ot]){const lt=++this.maxGroupID;this.collisionGroups[ot]={ID:lt,predicate:bt=>bt.collisionGroupID===lt}}return this.collisionGroups[ot]}}function zt(dt,ot,lt,bt,kt){const{horizontalAlign:jt,verticalAlign:Jt}=j.getAnchorAlignment(dt),an=-(jt-.5)*ot,cn=-(Jt-.5)*lt,_n=j.evaluateVariableOffset(dt,bt);return new j.pointGeometry(an+_n[0]*kt,cn+_n[1]*kt)}function ln(dt,ot,lt,bt,kt){const jt=new j.pointGeometry(dt,ot);return lt&&jt._rotate(bt?kt:-kt),jt}class wn{constructor(ot,lt,bt,kt,jt){this.transform=ot.clone(),this.projection=ot.projection.name,this.collisionIndex=new Wu(this.transform,jt),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=lt,this.retainedQueryData={},this.collisionGroups=new ip(bt),this.collisionCircleArrays={},this.prevPlacement=kt,kt&&(kt.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(ot,lt,bt,kt){const jt=bt.getBucket(lt),Jt=bt.latestFeatureIndex;if(!jt||!Jt||lt.id!==jt.layerIds[0])return;const an=jt.layers[0].layout,cn=bt.collisionBoxArray,_n=Math.pow(2,this.transform.zoom-bt.tileID.overscaledZ),Sn=bt.tileSize/j.EXTENT,In=bt.tileID.toUnwrapped();this.transform.setProjection(jt.projection);const Bn=(Yn=bt.tileID,Gn=jt.getProjection(),Xn=this.transform,Gn.name===this.projection?Xn.calculateProjMatrix(Yn.toUnwrapped()):rp(Xn,Gn,Yn));var Yn,Gn,Xn;const Un=an.get("text-pitch-alignment")==="map",Nn=an.get("text-rotation-alignment")==="map";lt.compileFilter();const er=lt.dynamicFilter(),Zn=lt.dynamicFilterNeedsFeature(),fr=this.transform.calculatePixelsToTileUnitsMatrix(bt),pr=nm(Bn,bt.tileID.canonical,Un,Nn,this.transform,jt.getProjection(),fr);let tr=null;if(Un){const Lr=tp(Bn,bt.tileID.canonical,Un,Nn,this.transform,jt.getProjection(),fr);tr=j.multiply([],this.transform.labelPlaneMatrix,Lr)}let vr=null;er&&bt.latestFeatureIndex&&(vr={unwrappedTileID:In,dynamicFilter:er,dynamicFilterNeedsFeature:Zn,featureIndex:bt.latestFeatureIndex}),this.retainedQueryData[jt.bucketInstanceId]=new Fp(jt.bucketInstanceId,Jt,jt.sourceLayerIndex,jt.index,bt.tileID);const Er={bucket:jt,layout:an,posMatrix:Bn,textLabelPlaneMatrix:pr,labelToScreenMatrix:tr,clippingData:vr,scale:_n,textPixelRatio:Sn,holdingForFade:bt.holdingForFade(),collisionBoxArray:cn,partiallyEvaluatedTextSize:j.evaluateSizeForZoom(jt.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:j.evaluateSizeForZoom(jt.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(jt.sourceID)};if(kt)for(const Lr of jt.sortKeyRanges){const{sortKey:kr,symbolInstanceStart:io,symbolInstanceEnd:Ar}=Lr;ot.push({sortKey:kr,symbolInstanceStart:io,symbolInstanceEnd:Ar,parameters:Er})}else ot.push({symbolInstanceStart:0,symbolInstanceEnd:jt.symbolInstances.length,parameters:Er})}attemptAnchorPlacement(ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn,Un,Nn,er){const Zn=[Bn.textOffset0,Bn.textOffset1],fr=zt(ot,bt,kt,Zn,jt),pr=this.collisionIndex.placeCollisionBox(Gn,jt,lt,ln(fr.x,fr.y,Jt,an,this.transform.angle),In,cn,_n,Sn.predicate);if(Un){const tr=Gn.getSymbolInstanceIconSize(er,this.transform.zoom,Bn.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Gn,tr,Un,ln(fr.x,fr.y,Jt,an,this.transform.angle),In,cn,_n,Sn.predicate).box.length===0)return}if(pr.box.length>0){let tr;return this.prevPlacement&&this.prevPlacement.variableOffsets[Bn.crossTileID]&&this.prevPlacement.placements[Bn.crossTileID]&&this.prevPlacement.placements[Bn.crossTileID].text&&(tr=this.prevPlacement.variableOffsets[Bn.crossTileID].anchor),this.variableOffsets[Bn.crossTileID]={textOffset:Zn,width:bt,height:kt,anchor:ot,textScale:jt,prevAnchor:tr},this.markUsedJustification(Gn,ot,Bn,Xn),Gn.allowVerticalPlacement&&(this.markUsedOrientation(Gn,Xn,Bn),this.placedOrientations[Bn.crossTileID]=Xn),{shift:fr,placedGlyphBoxes:pr}}}placeLayerBucketPart(ot,lt,bt,kt){const{bucket:jt,layout:Jt,posMatrix:an,textLabelPlaneMatrix:cn,labelToScreenMatrix:_n,clippingData:Sn,textPixelRatio:In,holdingForFade:Bn,collisionBoxArray:Yn,partiallyEvaluatedTextSize:Gn,partiallyEvaluatedIconSize:Xn,collisionGroup:Un}=ot.parameters,Nn=Jt.get("text-optional"),er=Jt.get("icon-optional"),Zn=Jt.get("text-allow-overlap"),fr=Jt.get("icon-allow-overlap"),pr=Jt.get("text-rotation-alignment")==="map",tr=Jt.get("text-pitch-alignment")==="map",vr=Jt.get("icon-text-fit")!=="none",Er=Jt.get("symbol-z-order")==="viewport-y";this.transform.setProjection(jt.projection);let Lr=Zn&&(fr||!jt.hasIconData()||er),kr=fr&&(Zn||!jt.hasTextData()||Nn);!jt.collisionArrays&&Yn&&jt.deserializeCollisionBoxes(Yn),bt&&kt&&jt.updateCollisionDebugBuffers(this.transform.zoom,Yn);const io=(Ar,$r,qr)=>{if(Sn){const Us={zoom:this.transform.zoom,pitch:this.transform.pitch};let xa=null;if(Sn.dynamicFilterNeedsFeature){const Ms=this.retainedQueryData[jt.bucketInstanceId];xa=Sn.featureIndex.loadFeature({featureIndex:Ar.featureIndex,bucketIndex:Ms.bucketIndex,sourceLayerIndex:Ms.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Sn.dynamicFilter)(Us,xa,this.retainedQueryData[jt.bucketInstanceId].tileID.canonical,new j.pointGeometry(Ar.tileAnchorX,Ar.tileAnchorY),this.transform.calculateDistanceTileData(Sn.unwrappedTileID)))return this.placements[Ar.crossTileID]=new gs(!1,!1,!1,!0),void(lt[Ar.crossTileID]=!0)}if(lt[Ar.crossTileID])return;if(Bn)return void(this.placements[Ar.crossTileID]=new gs(!1,!1,!1));let Or=!1,Sr=!1,mo=!0,lo=!1,ho=!1,uo=null,Po={box:null,offscreen:null,occluded:null},zo={box:null,offscreen:null,occluded:null},Uo=null,Bo=null,co=null,Yo=0,ls=0,Ls=0;qr.textFeatureIndex?Yo=qr.textFeatureIndex:Ar.useRuntimeCollisionCircles&&(Yo=Ar.featureIndex),qr.verticalTextFeatureIndex&&(ls=qr.verticalTextFeatureIndex);const Ns=Us=>{Us.tileID=this.retainedQueryData[jt.bucketInstanceId].tileID,(this.transform.elevation||Us.elevation)&&(Us.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[jt.bucketInstanceId].tileID,Us.tileAnchorX,Us.tileAnchorY):0)},Os=qr.textBox;if(Os){Ns(Os);const Us=Ms=>{let Tl=j.WritingMode.horizontal;if(jt.allowVerticalPlacement&&!Ms&&this.prevPlacement){const ou=this.prevPlacement.placedOrientations[Ar.crossTileID];ou&&(this.placedOrientations[Ar.crossTileID]=ou,Tl=ou,this.markUsedOrientation(jt,Tl,Ar))}return Tl},xa=(Ms,Tl)=>{if(jt.allowVerticalPlacement&&Ar.numVerticalGlyphVertices>0&&qr.verticalTextBox){for(const ou of jt.writingModes)if(ou===j.WritingMode.vertical?(Po=Tl(),zo=Po):Po=Ms(),Po&&Po.box&&Po.box.length)break}else Po=Ms()};if(Jt.get("text-variable-anchor")){let Ms=Jt.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ar.crossTileID]){const Gs=this.prevPlacement.variableOffsets[Ar.crossTileID];Ms.indexOf(Gs.anchor)>0&&(Ms=Ms.filter(Ru=>Ru!==Gs.anchor),Ms.unshift(Gs.anchor))}const Tl=(Gs,Ru,qp)=>{const Zu=jt.getSymbolInstanceTextSize(Gn,Ar,this.transform.zoom,$r),Xl=(Gs.x2-Gs.x1)*Zu+2*Gs.padding,uy=(Gs.y2-Gs.y1)*Zu+2*Gs.padding,Cp=vr&&!fr?Ru:null;Cp&&Ns(Cp);let qo={box:[],offscreen:!1,occluded:!1};const Rp=Zn?2*Ms.length:Ms.length;for(let dm=0;dm<Rp;++dm){const _u=this.attemptAnchorPlacement(Ms[dm%Ms.length],Gs,Xl,uy,Zu,pr,tr,In,an,Un,dm>=Ms.length,Ar,$r,jt,qp,Cp,Gn,Xn);if(_u&&(qo=_u.placedGlyphBoxes,qo&&qo.box&&qo.box.length)){Or=!0,uo=_u.shift;break}}return qo};xa(()=>Tl(Os,qr.iconBox,j.WritingMode.horizontal),()=>{const Gs=qr.verticalTextBox;return Gs&&Ns(Gs),jt.allowVerticalPlacement&&!(Po&&Po.box&&Po.box.length)&&Ar.numVerticalGlyphVertices>0&&Gs?Tl(Gs,qr.verticalIconBox,j.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Po&&(Or=Po.box,mo=Po.offscreen,lo=Po.occluded);const ou=Us(Po&&Po.box);if(!Or&&this.prevPlacement){const Gs=this.prevPlacement.variableOffsets[Ar.crossTileID];Gs&&(this.variableOffsets[Ar.crossTileID]=Gs,this.markUsedJustification(jt,Gs.anchor,Ar,ou))}}else{const Ms=(Tl,ou)=>{const Gs=jt.getSymbolInstanceTextSize(Gn,Ar,this.transform.zoom,$r),Ru=this.collisionIndex.placeCollisionBox(jt,Gs,Tl,new j.pointGeometry(0,0),Zn,In,an,Un.predicate);return Ru&&Ru.box&&Ru.box.length&&(this.markUsedOrientation(jt,ou,Ar),this.placedOrientations[Ar.crossTileID]=ou),Ru};xa(()=>Ms(Os,j.WritingMode.horizontal),()=>{const Tl=qr.verticalTextBox;return jt.allowVerticalPlacement&&Ar.numVerticalGlyphVertices>0&&Tl?(Ns(Tl),Ms(Tl,j.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Us(Po&&Po.box&&Po.box.length)}}if(Uo=Po,Or=Uo&&Uo.box&&Uo.box.length>0,mo=Uo&&Uo.offscreen,lo=Uo&&Uo.occluded,Ar.useRuntimeCollisionCircles){const Us=jt.text.placedSymbolArray.get(Ar.centerJustifiedTextSymbolIndex>=0?Ar.centerJustifiedTextSymbolIndex:Ar.verticalPlacedTextSymbolIndex),xa=j.evaluateSizeForFeature(jt.textSizeData,Gn,Us),Ms=Jt.get("text-padding");Bo=this.collisionIndex.placeCollisionCircles(jt,Zn,Us,jt.lineVertexArray,jt.glyphOffsetArray,xa,an,cn,_n,bt,tr,Un.predicate,Ar.collisionCircleDiameter*xa/j.ONE_EM,Ms,this.retainedQueryData[jt.bucketInstanceId].tileID),Or=Zn||Bo.circles.length>0&&!Bo.collisionDetected,mo=mo&&Bo.offscreen,lo=Bo.occluded}if(qr.iconFeatureIndex&&(Ls=qr.iconFeatureIndex),qr.iconBox){const Us=xa=>{Ns(xa);const Ms=vr&&uo?ln(uo.x,uo.y,pr,tr,this.transform.angle):new j.pointGeometry(0,0),Tl=jt.getSymbolInstanceIconSize(Xn,this.transform.zoom,Ar.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(jt,Tl,xa,Ms,fr,In,an,Un.predicate)};zo&&zo.box&&zo.box.length&&qr.verticalIconBox?(co=Us(qr.verticalIconBox),Sr=co.box.length>0):(co=Us(qr.iconBox),Sr=co.box.length>0),mo=mo&&co.offscreen,ho=co.occluded}const Ll=Nn||Ar.numHorizontalGlyphVertices===0&&Ar.numVerticalGlyphVertices===0,iu=er||Ar.numIconVertices===0;if(Ll||iu?iu?Ll||(Sr=Sr&&Or):Or=Sr&&Or:Sr=Or=Sr&&Or,Or&&Uo&&Uo.box&&this.collisionIndex.insertCollisionBox(Uo.box,Jt.get("text-ignore-placement"),jt.bucketInstanceId,zo&&zo.box&&ls?ls:Yo,Un.ID),Sr&&co&&this.collisionIndex.insertCollisionBox(co.box,Jt.get("icon-ignore-placement"),jt.bucketInstanceId,Ls,Un.ID),Bo&&(Or&&this.collisionIndex.insertCollisionCircles(Bo.circles,Jt.get("text-ignore-placement"),jt.bucketInstanceId,Yo,Un.ID),bt)){const Us=jt.bucketInstanceId;let xa=this.collisionCircleArrays[Us];xa===void 0&&(xa=this.collisionCircleArrays[Us]=new Fs);for(let Ms=0;Ms<Bo.circles.length;Ms+=4)xa.circles.push(Bo.circles[Ms+0]),xa.circles.push(Bo.circles[Ms+1]),xa.circles.push(Bo.circles[Ms+2]),xa.circles.push(Bo.collisionDetected?1:0)}const hp=jt.projection.name!=="globe";Lr=Lr&&(hp||!lo),kr=kr&&(hp||!ho),this.placements[Ar.crossTileID]=new gs(Or||Lr,Sr||kr,mo||jt.justReloaded),lt[Ar.crossTileID]=!0};if(Er){const Ar=jt.getSortedSymbolIndexes(this.transform.angle);for(let $r=Ar.length-1;$r>=0;--$r){const qr=Ar[$r];io(jt.symbolInstances.get(qr),qr,jt.collisionArrays[qr])}}else for(let Ar=ot.symbolInstanceStart;Ar<ot.symbolInstanceEnd;Ar++)io(jt.symbolInstances.get(Ar),Ar,jt.collisionArrays[Ar]);if(bt&&jt.bucketInstanceId in this.collisionCircleArrays){const Ar=this.collisionCircleArrays[jt.bucketInstanceId];j.invert(Ar.invProjMatrix,an),Ar.viewportMatrix=this.collisionIndex.getViewportMatrix()}jt.justReloaded=!1}markUsedJustification(ot,lt,bt,kt){let jt;jt=kt===j.WritingMode.vertical?bt.verticalPlacedTextSymbolIndex:{left:bt.leftJustifiedTextSymbolIndex,center:bt.centerJustifiedTextSymbolIndex,right:bt.rightJustifiedTextSymbolIndex}[j.getAnchorJustification(lt)];const Jt=[bt.leftJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.rightJustifiedTextSymbolIndex,bt.verticalPlacedTextSymbolIndex];for(const an of Jt)an>=0&&(ot.text.placedSymbolArray.get(an).crossTileID=jt>=0&&an!==jt?0:bt.crossTileID)}markUsedOrientation(ot,lt,bt){const kt=lt===j.WritingMode.horizontal||lt===j.WritingMode.horizontalOnly?lt:0,jt=lt===j.WritingMode.vertical?lt:0,Jt=[bt.leftJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.rightJustifiedTextSymbolIndex].filter(an=>an!==-1);for(const an of Jt)ot.text.placedSymbolArray.get(an).placedOrientation=kt;bt.verticalPlacedTextSymbolIndex!==-1&&(ot.text.placedSymbolArray.get(bt.verticalPlacedTextSymbolIndex).placedOrientation=jt)}commit(ot){this.commitTime=ot,this.zoomAtLastRecencyCheck=this.transform.zoom;const lt=this.prevPlacement;let bt=!1;this.prevZoomAdjustment=lt?lt.zoomAdjustment(this.transform.zoom):0;const kt=lt?lt.symbolFadeChange(ot):1,jt=lt?lt.opacities:{},Jt=lt?lt.variableOffsets:{},an=lt?lt.placedOrientations:{};for(const cn in this.placements){const _n=this.placements[cn],Sn=jt[cn];Sn?(this.opacities[cn]=new El(Sn,kt,_n.text,_n.icon,null,_n.clipped),bt=bt||_n.text!==Sn.text.placed||_n.icon!==Sn.icon.placed):(this.opacities[cn]=new El(null,kt,_n.text,_n.icon,_n.skipFade,_n.clipped),bt=bt||_n.text||_n.icon)}for(const cn in jt){const _n=jt[cn];if(!this.opacities[cn]){const Sn=new El(_n,kt,!1,!1);Sn.isHidden()||(this.opacities[cn]=Sn,bt=bt||_n.text.placed||_n.icon.placed)}}for(const cn in Jt)this.variableOffsets[cn]||!this.opacities[cn]||this.opacities[cn].isHidden()||(this.variableOffsets[cn]=Jt[cn]);for(const cn in an)this.placedOrientations[cn]||!this.opacities[cn]||this.opacities[cn].isHidden()||(this.placedOrientations[cn]=an[cn]);bt?this.lastPlacementChangeTime=ot:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=lt?lt.lastPlacementChangeTime:ot)}updateLayerOpacities(ot,lt){const bt={};for(const kt of lt){const jt=kt.getBucket(ot);jt&&kt.latestFeatureIndex&&ot.id===jt.layerIds[0]&&this.updateBucketOpacities(jt,bt,kt.collisionBoxArray)}}updateBucketOpacities(ot,lt,bt){ot.hasTextData()&&ot.text.opacityVertexArray.clear(),ot.hasIconData()&&ot.icon.opacityVertexArray.clear(),ot.hasIconCollisionBoxData()&&ot.iconCollisionBox.collisionVertexArray.clear(),ot.hasTextCollisionBoxData()&&ot.textCollisionBox.collisionVertexArray.clear();const kt=ot.layers[0].layout,jt=!!ot.layers[0].dynamicFilter(),Jt=new El(null,0,!1,!1,!0),an=kt.get("text-allow-overlap"),cn=kt.get("icon-allow-overlap"),_n=kt.get("text-variable-anchor"),Sn=kt.get("text-rotation-alignment")==="map",In=kt.get("text-pitch-alignment")==="map",Bn=kt.get("icon-text-fit")!=="none",Yn=new El(null,0,an&&(cn||!ot.hasIconData()||kt.get("icon-optional")),cn&&(an||!ot.hasTextData()||kt.get("text-optional")),!0);!ot.collisionArrays&&bt&&(ot.hasIconCollisionBoxData()||ot.hasTextCollisionBoxData())&&ot.deserializeCollisionBoxes(bt);const Gn=(Un,Nn,er)=>{for(let Zn=0;Zn<Nn/4;Zn++)Un.opacityVertexArray.emplaceBack(er)};let Xn=0;for(let Un=0;Un<ot.symbolInstances.length;Un++){const Nn=ot.symbolInstances.get(Un),{numHorizontalGlyphVertices:er,numVerticalGlyphVertices:Zn,crossTileID:fr}=Nn;let pr=this.opacities[fr];lt[fr]?pr=Jt:pr||(pr=Yn,this.opacities[fr]=pr),lt[fr]=!0;const tr=er>0||Zn>0,vr=Nn.numIconVertices>0,Er=this.placedOrientations[Nn.crossTileID],Lr=Er===j.WritingMode.vertical,kr=Er===j.WritingMode.horizontal||Er===j.WritingMode.horizontalOnly;if(!tr&&!vr||pr.isHidden()||Xn++,tr){const io=ko(pr.text);Gn(ot.text,er,Lr?go:io),Gn(ot.text,Zn,kr?go:io);const Ar=pr.text.isHidden();[Nn.rightJustifiedTextSymbolIndex,Nn.centerJustifiedTextSymbolIndex,Nn.leftJustifiedTextSymbolIndex].forEach(Or=>{Or>=0&&(ot.text.placedSymbolArray.get(Or).hidden=Ar||Lr?1:0)}),Nn.verticalPlacedTextSymbolIndex>=0&&(ot.text.placedSymbolArray.get(Nn.verticalPlacedTextSymbolIndex).hidden=Ar||kr?1:0);const $r=this.variableOffsets[Nn.crossTileID];$r&&this.markUsedJustification(ot,$r.anchor,Nn,Er);const qr=this.placedOrientations[Nn.crossTileID];qr&&(this.markUsedJustification(ot,"left",Nn,qr),this.markUsedOrientation(ot,qr,Nn))}if(vr){const io=ko(pr.icon);Nn.placedIconSymbolIndex>=0&&(Gn(ot.icon,Nn.numIconVertices,Lr?go:io),ot.icon.placedSymbolArray.get(Nn.placedIconSymbolIndex).hidden=pr.icon.isHidden()),Nn.verticalPlacedIconSymbolIndex>=0&&(Gn(ot.icon,Nn.numVerticalIconVertices,kr?go:io),ot.icon.placedSymbolArray.get(Nn.verticalPlacedIconSymbolIndex).hidden=pr.icon.isHidden())}if(ot.hasIconCollisionBoxData()||ot.hasTextCollisionBoxData()){const io=ot.collisionArrays[Un];if(io){let Ar=new j.pointGeometry(0,0),$r=!0;if(io.textBox||io.verticalTextBox){if(_n){const Or=this.variableOffsets[fr];Or?(Ar=zt(Or.anchor,Or.width,Or.height,Or.textOffset,Or.textScale),Sn&&Ar._rotate(In?this.transform.angle:-this.transform.angle)):$r=!1}jt&&($r=!pr.clipped),io.textBox&&Pn(ot.textCollisionBox.collisionVertexArray,pr.text.placed,!$r||Lr,Ar.x,Ar.y),io.verticalTextBox&&Pn(ot.textCollisionBox.collisionVertexArray,pr.text.placed,!$r||kr,Ar.x,Ar.y)}const qr=$r&&Boolean(!kr&&io.verticalIconBox);io.iconBox&&Pn(ot.iconCollisionBox.collisionVertexArray,pr.icon.placed,qr,Bn?Ar.x:0,Bn?Ar.y:0),io.verticalIconBox&&Pn(ot.iconCollisionBox.collisionVertexArray,pr.icon.placed,!qr,Bn?Ar.x:0,Bn?Ar.y:0)}}}if(ot.fullyClipped=Xn===0,ot.sortFeatures(this.transform.angle),this.retainedQueryData[ot.bucketInstanceId]&&(this.retainedQueryData[ot.bucketInstanceId].featureSortOrder=ot.featureSortOrder),ot.hasTextData()&&ot.text.opacityVertexBuffer&&ot.text.opacityVertexBuffer.updateData(ot.text.opacityVertexArray),ot.hasIconData()&&ot.icon.opacityVertexBuffer&&ot.icon.opacityVertexBuffer.updateData(ot.icon.opacityVertexArray),ot.hasIconCollisionBoxData()&&ot.iconCollisionBox.collisionVertexBuffer&&ot.iconCollisionBox.collisionVertexBuffer.updateData(ot.iconCollisionBox.collisionVertexArray),ot.hasTextCollisionBoxData()&&ot.textCollisionBox.collisionVertexBuffer&&ot.textCollisionBox.collisionVertexBuffer.updateData(ot.textCollisionBox.collisionVertexArray),ot.bucketInstanceId in this.collisionCircleArrays){const Un=this.collisionCircleArrays[ot.bucketInstanceId];ot.placementInvProjMatrix=Un.invProjMatrix,ot.placementViewportMatrix=Un.viewportMatrix,ot.collisionCircleArray=Un.circles,delete this.collisionCircleArrays[ot.bucketInstanceId]}}symbolFadeChange(ot){return this.fadeDuration===0?1:(ot-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(ot){return Math.max(0,(this.transform.zoom-ot)/1.5)}hasTransitions(ot){return this.stale||ot-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(ot,lt){const bt=this.zoomAtLastRecencyCheck===lt?1-this.zoomAdjustment(lt):1;return this.zoomAtLastRecencyCheck=lt,this.commitTime+this.fadeDuration*bt>ot}setStale(){this.stale=!0}}function Pn(dt,ot,lt,bt,kt){dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0),dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0),dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0),dt.emplaceBack(ot?1:0,lt?1:0,bt||0,kt||0)}const zn=Math.pow(2,25),sr=Math.pow(2,24),jn=Math.pow(2,17),Jn=Math.pow(2,16),Tr=Math.pow(2,9),Cr=Math.pow(2,8),Vr=Math.pow(2,1);function ko(dt){if(dt.opacity===0&&!dt.placed)return 0;if(dt.opacity===1&&dt.placed)return 4294967295;const ot=dt.placed?1:0,lt=Math.floor(127*dt.opacity);return lt*zn+ot*sr+lt*jn+ot*Jn+lt*Tr+ot*Cr+lt*Vr+ot}const go=0;class To{constructor(ot){this._sortAcrossTiles=ot.layout.get("symbol-z-order")!=="viewport-y"&&ot.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(ot,lt,bt,kt,jt){const Jt=this._bucketParts;for(;this._currentTileIndex<ot.length;)if(lt.getBucketParts(Jt,kt,ot[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,jt())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Jt.sort((an,cn)=>an.sortKey-cn.sortKey));this._currentPartIndex<Jt.length;){const an=Jt[this._currentPartIndex];if(lt.placeLayerBucketPart(an,this._seenCrossTileIDs,bt,an.symbolInstanceStart===0),this._currentPartIndex++,jt())return!0}return!1}}class $o{constructor(ot,lt,bt,kt,jt,Jt,an,cn){this.placement=new wn(ot,jt,Jt,an,cn),this._currentPlacementIndex=lt.length-1,this._forceFullPlacement=bt,this._showCollisionBoxes=kt,this._done=!1}isDone(){return this._done}continuePlacement(ot,lt,bt){const kt=j.exported.now(),jt=()=>{const Jt=j.exported.now()-kt;return!this._forceFullPlacement&&Jt>2};for(;this._currentPlacementIndex>=0;){const Jt=lt[ot[this._currentPlacementIndex]],an=this.placement.collisionIndex.transform.zoom;if(Jt.type==="symbol"&&(!Jt.minzoom||Jt.minzoom<=an)&&(!Jt.maxzoom||Jt.maxzoom>an)){if(this._inProgressLayer||(this._inProgressLayer=new To(Jt)),this._inProgressLayer.continuePlacement(bt[Jt.source],this.placement,this._showCollisionBoxes,Jt,jt))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(ot){return this.placement.commit(ot),this.placement}}const Xo=512/j.EXTENT/2;class xo{constructor(ot,lt,bt){this.tileID=ot,this.indexedSymbolInstances={},this.bucketInstanceId=bt;for(let kt=0;kt<lt.length;kt++){const jt=lt.get(kt),Jt=jt.key;this.indexedSymbolInstances[Jt]||(this.indexedSymbolInstances[Jt]=[]),this.indexedSymbolInstances[Jt].push({crossTileID:jt.crossTileID,coord:this.getScaledCoordinates(jt,ot)})}}getScaledCoordinates(ot,lt){const bt=Xo/Math.pow(2,lt.canonical.z-this.tileID.canonical.z);return{x:Math.floor((lt.canonical.x*j.EXTENT+ot.tileAnchorX)*bt),y:Math.floor((lt.canonical.y*j.EXTENT+ot.tileAnchorY)*bt)}}findMatches(ot,lt,bt){const kt=this.tileID.canonical.z<lt.canonical.z?1:Math.pow(2,this.tileID.canonical.z-lt.canonical.z);for(let jt=0;jt<ot.length;jt++){const Jt=ot.get(jt);if(Jt.crossTileID)continue;const an=this.indexedSymbolInstances[Jt.key];if(!an)continue;const cn=this.getScaledCoordinates(Jt,lt);for(const _n of an)if(Math.abs(_n.coord.x-cn.x)<=kt&&Math.abs(_n.coord.y-cn.y)<=kt&&!bt[_n.crossTileID]){bt[_n.crossTileID]=!0,Jt.crossTileID=_n.crossTileID;break}}}}class xl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ru{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(ot){const lt=Math.round((ot-this.lng)/360);if(lt!==0)for(const bt in this.indexes){const kt=this.indexes[bt],jt={};for(const Jt in kt){const an=kt[Jt];an.tileID=an.tileID.unwrapTo(an.tileID.wrap+lt),jt[an.tileID.key]=an}this.indexes[bt]=jt}this.lng=ot}addBucket(ot,lt,bt){if(this.indexes[ot.overscaledZ]&&this.indexes[ot.overscaledZ][ot.key]){if(this.indexes[ot.overscaledZ][ot.key].bucketInstanceId===lt.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(ot.overscaledZ,this.indexes[ot.overscaledZ][ot.key])}for(let jt=0;jt<lt.symbolInstances.length;jt++)lt.symbolInstances.get(jt).crossTileID=0;this.usedCrossTileIDs[ot.overscaledZ]||(this.usedCrossTileIDs[ot.overscaledZ]={});const kt=this.usedCrossTileIDs[ot.overscaledZ];for(const jt in this.indexes){const Jt=this.indexes[jt];if(Number(jt)>ot.overscaledZ)for(const an in Jt){const cn=Jt[an];cn.tileID.isChildOf(ot)&&cn.findMatches(lt.symbolInstances,ot,kt)}else{const an=Jt[ot.scaledTo(Number(jt)).key];an&&an.findMatches(lt.symbolInstances,ot,kt)}}for(let jt=0;jt<lt.symbolInstances.length;jt++){const Jt=lt.symbolInstances.get(jt);Jt.crossTileID||(Jt.crossTileID=bt.generate(),kt[Jt.crossTileID]=!0)}return this.indexes[ot.overscaledZ]===void 0&&(this.indexes[ot.overscaledZ]={}),this.indexes[ot.overscaledZ][ot.key]=new xo(ot,lt.symbolInstances,lt.bucketInstanceId),!0}removeBucketCrossTileIDs(ot,lt){for(const bt in lt.indexedSymbolInstances)for(const kt of lt.indexedSymbolInstances[bt])delete this.usedCrossTileIDs[ot][kt.crossTileID]}removeStaleBuckets(ot){let lt=!1;for(const bt in this.indexes){const kt=this.indexes[bt];for(const jt in kt)ot[kt[jt].bucketInstanceId]||(this.removeBucketCrossTileIDs(bt,kt[jt]),delete kt[jt],lt=!0)}return lt}}class Rm{constructor(){this.layerIndexes={},this.crossTileIDs=new xl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(ot,lt,bt,kt){let jt=this.layerIndexes[ot.id];jt===void 0&&(jt=this.layerIndexes[ot.id]=new ru);let Jt=!1;const an={};kt.name!=="globe"&&jt.handleWrapJump(bt);for(const cn of lt){const _n=cn.getBucket(ot);_n&&ot.id===_n.layerIds[0]&&(_n.bucketInstanceId||(_n.bucketInstanceId=++this.maxBucketInstanceId),jt.addBucket(cn.tileID,_n,this.crossTileIDs)&&(Jt=!0),an[_n.bucketInstanceId]=!0)}return jt.removeStaleBuckets(an)&&(Jt=!0),Jt}pruneUnusedLayers(ot){const lt={};ot.forEach(bt=>{lt[bt]=!0});for(const bt in this.layerIndexes)lt[bt]||delete this.layerIndexes[bt]}}const Gu=(dt,ot)=>j.emitValidationErrors(dt,ot&&ot.filter(lt=>lt.identifier!=="source.canvas")),e_=j.pick(vo,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Sl=j.pick(vo,["setCenter","setZoom","setBearing","setPitch"]),Ey={version:8,layers:[],sources:{}},_p={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class op extends j.Evented{constructor(ot,lt={}){super(),this.map=ot,this.dispatcher=new mn(Lo(),this),this.imageManager=new Nt,this.imageManager.setEventedParent(this),this.glyphManager=new j.GlyphManager(ot._requestManager,lt.localFontFamily?j.LocalGlyphMode.all:lt.localIdeographFontFamily?j.LocalGlyphMode.ideographs:j.LocalGlyphMode.none,lt.localFontFamily||lt.localIdeographFontFamily),this.crossTileSymbolIndex=new Rm,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new j.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",j.getReferrer());const bt=this;this._rtlTextPluginCallback=op.registerForPluginStateChange(kt=>{bt.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:kt.pluginStatus,pluginURL:kt.pluginURL},(jt,Jt)=>{if(j.triggerPluginCompletionEvent(jt),Jt&&Jt.every(an=>an))for(const an in bt._sourceCaches){const cn=bt._sourceCaches[an],_n=cn.getSource().type;_n!=="vector"&&_n!=="geojson"||cn.reload()}})}),this.on("data",kt=>{if(kt.dataType!=="source"||kt.sourceDataType!=="metadata")return;const jt=this.getSource(kt.sourceId);if(jt&&jt.vectorLayerIds)for(const Jt in this._layers){const an=this._layers[Jt];an.source===jt.id&&this._validateLayer(an)}})}loadURL(ot,lt={}){this.fire(new j.Event("dataloading",{dataType:"style"}));const bt=typeof lt.validate=="boolean"?lt.validate:!j.isMapboxURL(ot);ot=this.map._requestManager.normalizeStyleURL(ot,lt.accessToken);const kt=this.map._requestManager.transformRequest(ot,j.ResourceType.Style);this._request=j.getJSON(kt,(jt,Jt)=>{this._request=null,jt?this.fire(new j.ErrorEvent(jt)):Jt&&this._load(Jt,bt)})}loadJSON(ot,lt={}){this.fire(new j.Event("dataloading",{dataType:"style"})),this._request=j.exported.frame(()=>{this._request=null,this._load(ot,lt.validate!==!1)})}loadEmpty(){this.fire(new j.Event("dataloading",{dataType:"style"})),this._load(Ey,!1)}_updateLayerCount(ot,lt){const bt=lt?1:-1;ot.is3D()&&(this._num3DLayers+=bt),ot.type==="circle"&&(this._numCircleLayers+=bt),ot.type==="symbol"&&(this._numSymbolLayers+=bt)}_load(ot,lt){if(lt&&Gu(this,j.validateStyle(ot)))return;this._loaded=!0,this.stylesheet=j.clone$1(ot),this._updateMapProjection();for(const kt in ot.sources)this.addSource(kt,ot.sources[kt],{validate:!1});this._changed=!1,ot.sprite?this._loadSprite(ot.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(ot.glyphs);const bt=fs(this.stylesheet.layers);this._order=bt.map(kt=>kt.id),this._layers={},this._serializedLayers={};for(let kt of bt)kt=j.createStyleLayer(kt),kt.setEventedParent(this,{layer:{id:kt.id}}),this._layers[kt.id]=kt,this._serializedLayers[kt.id]=kt.serialize(),this._updateLayerCount(kt,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Xt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new j.Event("data",{dataType:"style"})),this.fire(new j.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(ot){ot?this.stylesheet.projection=ot:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(ot){this._spriteRequest=function(lt,bt,kt){let jt,Jt,an;const cn=j.exported.devicePixelRatio>1?"@2x":"";let _n=j.getJSON(bt.transformRequest(bt.normalizeSpriteURL(lt,cn,".json"),j.ResourceType.SpriteJSON),(Bn,Yn)=>{_n=null,an||(an=Bn,jt=Yn,In())}),Sn=j.getImage(bt.transformRequest(bt.normalizeSpriteURL(lt,cn,".png"),j.ResourceType.SpriteImage),(Bn,Yn)=>{Sn=null,an||(an=Bn,Jt=Yn,In())});function In(){if(an)kt(an);else if(jt&&Jt){const Bn=j.exported.getImageData(Jt),Yn={};for(const Gn in jt){const{width:Xn,height:Un,x:Nn,y:er,sdf:Zn,pixelRatio:fr,stretchX:pr,stretchY:tr,content:vr}=jt[Gn],Er=new j.RGBAImage({width:Xn,height:Un});j.RGBAImage.copy(Bn,Er,{x:Nn,y:er},{x:0,y:0},{width:Xn,height:Un}),Yn[Gn]={data:Er,pixelRatio:fr,sdf:Zn,stretchX:pr,stretchY:tr,content:vr}}kt(null,Yn)}}return{cancel(){_n&&(_n.cancel(),_n=null),Sn&&(Sn.cancel(),Sn=null)}}}(ot,this.map._requestManager,(lt,bt)=>{if(this._spriteRequest=null,lt)this.fire(new j.ErrorEvent(lt));else if(bt)for(const kt in bt)this.imageManager.addImage(kt,bt[kt]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new j.Event("data",{dataType:"style"}))})}_validateLayer(ot){const lt=this.getSource(ot.source);if(!lt)return;const bt=ot.sourceLayer;bt&&(lt.type==="geojson"||lt.vectorLayerIds&&lt.vectorLayerIds.indexOf(bt)===-1)&&this.fire(new j.ErrorEvent(new Error(`Source layer "${bt}" does not exist on source "${lt.id}" as specified by style layer "${ot.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const ot in this._sourceCaches)if(!this._sourceCaches[ot].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(ot){const lt=[];for(const bt of ot){const kt=this._layers[bt];kt.type!=="custom"&&lt.push(kt.serialize())}return lt}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const ot in this._sourceCaches)if(this._sourceCaches[ot].hasTransition())return!0;for(const ot in this._layers)if(this._layers[ot].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(ot){return!!this.terrain&&_p[ot.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(ot){if(!this._loaded)return;const lt=this._changed;if(this._changed){const kt=Object.keys(this._updatedLayers),jt=Object.keys(this._removedLayers);(kt.length||jt.length)&&this._updateWorkerLayers(kt,jt);for(const Jt in this._updatedSources){const an=this._updatedSources[Jt];an==="reload"?this._reloadSource(Jt):an==="clear"&&this._clearSource(Jt)}this._updateTilesForChangedImages();for(const Jt in this._updatedPaintProps)this._layers[Jt].updateTransitions(ot);this.light.updateTransitions(ot),this.fog&&this.fog.updateTransitions(ot),this._resetUpdates()}const bt={};for(const kt in this._sourceCaches){const jt=this._sourceCaches[kt];bt[kt]=jt.used,jt.used=!1}for(const kt of this._order){const jt=this._layers[kt];if(jt.recalculate(ot,this._availableImages),!jt.isHidden(ot.zoom)){const an=this._getLayerSourceCache(jt);an&&(an.used=!0)}const Jt=this.map.painter;if(Jt){const an=jt.getProgramIds();if(!an)continue;const cn=jt.getProgramConfiguration(ot.zoom);for(const _n of an)Jt.useProgram(_n,cn)}}for(const kt in bt){const jt=this._sourceCaches[kt];bt[kt]!==jt.used&&jt.getSource().fire(new j.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:jt.getSource().id}))}this.light.recalculate(ot),this.terrain&&this.terrain.recalculate(ot),this.fog&&this.fog.recalculate(ot),this.z=ot.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),lt&&this.fire(new j.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const ot=Object.keys(this._changedImages);if(ot.length){for(const lt in this._sourceCaches)this._sourceCaches[lt].reloadTilesForDependencies(["icons","patterns"],ot);this._changedImages={}}}_updateWorkerLayers(ot,lt){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(ot),removedIds:lt})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(ot){if(this._checkLoaded(),Gu(this,j.validateStyle(ot)))return!1;(ot=j.clone$1(ot)).layers=fs(ot.layers);const lt=function(kt,jt){if(!kt)return[{command:vo.setStyle,args:[jt]}];let Jt=[];try{if(!it(kt.version,jt.version))return[{command:vo.setStyle,args:[jt]}];it(kt.center,jt.center)||Jt.push({command:vo.setCenter,args:[jt.center]}),it(kt.zoom,jt.zoom)||Jt.push({command:vo.setZoom,args:[jt.zoom]}),it(kt.bearing,jt.bearing)||Jt.push({command:vo.setBearing,args:[jt.bearing]}),it(kt.pitch,jt.pitch)||Jt.push({command:vo.setPitch,args:[jt.pitch]}),it(kt.sprite,jt.sprite)||Jt.push({command:vo.setSprite,args:[jt.sprite]}),it(kt.glyphs,jt.glyphs)||Jt.push({command:vo.setGlyphs,args:[jt.glyphs]}),it(kt.transition,jt.transition)||Jt.push({command:vo.setTransition,args:[jt.transition]}),it(kt.light,jt.light)||Jt.push({command:vo.setLight,args:[jt.light]}),it(kt.fog,jt.fog)||Jt.push({command:vo.setFog,args:[jt.fog]}),it(kt.projection,jt.projection)||Jt.push({command:vo.setProjection,args:[jt.projection]});const an={},cn=[];(function(In,Bn,Yn,Gn){let Xn;for(Xn in Bn=Bn||{},In=In||{})In.hasOwnProperty(Xn)&&(Bn.hasOwnProperty(Xn)||bs(Xn,Yn,Gn));for(Xn in Bn)Bn.hasOwnProperty(Xn)&&(In.hasOwnProperty(Xn)?it(In[Xn],Bn[Xn])||(In[Xn].type==="geojson"&&Bn[Xn].type==="geojson"&&cu(In,Bn,Xn)?Yn.push({command:vo.setGeoJSONSourceData,args:[Xn,Bn[Xn].data]}):xu(Xn,Bn,Yn,Gn)):As(Xn,Bn,Yn))})(kt.sources,jt.sources,cn,an);const _n=[];kt.layers&&kt.layers.forEach(In=>{In.source&&an[In.source]?Jt.push({command:vo.removeLayer,args:[In.id]}):_n.push(In)});let Sn=kt.terrain;Sn&&an[Sn.source]&&(Jt.push({command:vo.setTerrain,args:[void 0]}),Sn=void 0),Jt=Jt.concat(cn),it(Sn,jt.terrain)||Jt.push({command:vo.setTerrain,args:[jt.terrain]}),function(In,Bn,Yn){Bn=Bn||[];const Gn=(In=In||[]).map(ga),Xn=Bn.map(ga),Un=In.reduce(Vs,{}),Nn=Bn.reduce(Vs,{}),er=Gn.slice(),Zn=Object.create(null);let fr,pr,tr,vr,Er,Lr,kr;for(fr=0,pr=0;fr<Gn.length;fr++)tr=Gn[fr],Nn.hasOwnProperty(tr)?pr++:(Yn.push({command:vo.removeLayer,args:[tr]}),er.splice(er.indexOf(tr,pr),1));for(fr=0,pr=0;fr<Xn.length;fr++)tr=Xn[Xn.length-1-fr],er[er.length-1-fr]!==tr&&(Un.hasOwnProperty(tr)?(Yn.push({command:vo.removeLayer,args:[tr]}),er.splice(er.lastIndexOf(tr,er.length-pr),1)):pr++,Lr=er[er.length-fr],Yn.push({command:vo.addLayer,args:[Nn[tr],Lr]}),er.splice(er.length-fr,0,tr),Zn[tr]=!0);for(fr=0;fr<Xn.length;fr++)if(tr=Xn[fr],vr=Un[tr],Er=Nn[tr],!Zn[tr]&&!it(vr,Er))if(it(vr.source,Er.source)&&it(vr["source-layer"],Er["source-layer"])&&it(vr.type,Er.type)){for(kr in Nr(vr.layout,Er.layout,Yn,tr,null,vo.setLayoutProperty),Nr(vr.paint,Er.paint,Yn,tr,null,vo.setPaintProperty),it(vr.filter,Er.filter)||Yn.push({command:vo.setFilter,args:[tr,Er.filter]}),it(vr.minzoom,Er.minzoom)&&it(vr.maxzoom,Er.maxzoom)||Yn.push({command:vo.setLayerZoomRange,args:[tr,Er.minzoom,Er.maxzoom]}),vr)vr.hasOwnProperty(kr)&&kr!=="layout"&&kr!=="paint"&&kr!=="filter"&&kr!=="metadata"&&kr!=="minzoom"&&kr!=="maxzoom"&&(kr.indexOf("paint.")===0?Nr(vr[kr],Er[kr],Yn,tr,kr.slice(6),vo.setPaintProperty):it(vr[kr],Er[kr])||Yn.push({command:vo.setLayerProperty,args:[tr,kr,Er[kr]]}));for(kr in Er)Er.hasOwnProperty(kr)&&!vr.hasOwnProperty(kr)&&kr!=="layout"&&kr!=="paint"&&kr!=="filter"&&kr!=="metadata"&&kr!=="minzoom"&&kr!=="maxzoom"&&(kr.indexOf("paint.")===0?Nr(vr[kr],Er[kr],Yn,tr,kr.slice(6),vo.setPaintProperty):it(vr[kr],Er[kr])||Yn.push({command:vo.setLayerProperty,args:[tr,kr,Er[kr]]}))}else Yn.push({command:vo.removeLayer,args:[tr]}),Lr=er[er.lastIndexOf(tr)+1],Yn.push({command:vo.addLayer,args:[Er,Lr]})}(_n,jt.layers,Jt)}catch(an){console.warn("Unable to compute style diff:",an),Jt=[{command:vo.setStyle,args:[jt]}]}return Jt}(this.serialize(),ot).filter(kt=>!(kt.command in Sl));if(lt.length===0)return!1;const bt=lt.filter(kt=>!(kt.command in e_));if(bt.length>0)throw new Error(`Unimplemented: ${bt.map(kt=>kt.command).join(", ")}.`);return lt.forEach(kt=>{kt.command!=="setTransition"&&kt.command!=="setProjection"&&this[kt.command].apply(this,kt.args)}),this.stylesheet=ot,this._updateMapProjection(),!0}addImage(ot,lt){return this.getImage(ot)?this.fire(new j.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(ot,lt),this._afterImageUpdated(ot),this)}updateImage(ot,lt){this.imageManager.updateImage(ot,lt)}getImage(ot){return this.imageManager.getImage(ot)}removeImage(ot){return this.getImage(ot)?(this.imageManager.removeImage(ot),this._afterImageUpdated(ot),this):this.fire(new j.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(ot){this._availableImages=this.imageManager.listImages(),this._changedImages[ot]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new j.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(ot,lt,bt={}){if(this._checkLoaded(),this.getSource(ot)!==void 0)throw new Error("There is already a source with this ID");if(!lt.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(lt).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(lt.type)>=0&&this._validate(j.validateSource,`sources.${ot}`,lt,null,bt))return;this.map&&this.map._collectResourceTiming&&(lt.collectResourceTiming=!0);const kt=mr(ot,lt,this.dispatcher,this);kt.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(ot),source:kt.serialize(),sourceId:ot}));const jt=Jt=>{const an=(Jt?"symbol:":"other:")+ot,cn=this._sourceCaches[an]=new j.SourceCache(an,kt,Jt);(Jt?this._symbolSourceCaches:this._otherSourceCaches)[ot]=cn,cn.style=this,cn.onAdd(this.map)};jt(!1),lt.type!=="vector"&&lt.type!=="geojson"||jt(!0),kt.onAdd&&kt.onAdd(this.map),this._changed=!0}removeSource(ot){this._checkLoaded();const lt=this.getSource(ot);if(!lt)throw new Error("There is no source with this ID");for(const kt in this._layers)if(this._layers[kt].source===ot)return this.fire(new j.ErrorEvent(new Error(`Source "${ot}" cannot be removed while layer "${kt}" is using it.`)));if(this.terrain&&this.terrain.get().source===ot)return this.fire(new j.ErrorEvent(new Error(`Source "${ot}" cannot be removed while terrain is using it.`)));const bt=this._getSourceCaches(ot);for(const kt of bt)delete this._sourceCaches[kt.id],delete this._updatedSources[kt.id],kt.fire(new j.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:kt.getSource().id})),kt.setEventedParent(null),kt.clearTiles();return delete this._otherSourceCaches[ot],delete this._symbolSourceCaches[ot],lt.setEventedParent(null),lt.onRemove&&lt.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(ot,lt){this._checkLoaded(),this.getSource(ot).setData(lt),this._changed=!0}getSource(ot){const lt=this._getSourceCache(ot);return lt&&lt.getSource()}_getSources(){const ot=[];for(const lt in this._otherSourceCaches){const bt=this._getSourceCache(lt);bt&&ot.push(bt.getSource())}return ot}addLayer(ot,lt,bt={}){this._checkLoaded();const kt=ot.id;if(this.getLayer(kt))return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${kt}" already exists on this map`)));let jt;if(ot.type==="custom"){if(Gu(this,j.validateCustomStyleLayer(ot)))return;jt=j.createStyleLayer(ot)}else{if(typeof ot.source=="object"&&(this.addSource(kt,ot.source),ot=j.clone$1(ot),ot=j.extend(ot,{source:kt})),this._validate(j.validateLayer,`layers.${kt}`,ot,{arrayIndex:-1},bt))return;jt=j.createStyleLayer(ot),this._validateLayer(jt),jt.setEventedParent(this,{layer:{id:kt}}),this._serializedLayers[jt.id]=jt.serialize(),this._updateLayerCount(jt,!0)}const Jt=lt?this._order.indexOf(lt):this._order.length;if(lt&&Jt===-1)return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${lt}" does not exist on this map.`)));this._order.splice(Jt,0,kt),this._layerOrderChanged=!0,this._layers[kt]=jt;const an=this._getLayerSourceCache(jt);if(this._removedLayers[kt]&&jt.source&&an&&jt.type!=="custom"){const cn=this._removedLayers[kt];delete this._removedLayers[kt],cn.type!==jt.type?this._updatedSources[jt.source]="clear":(this._updatedSources[jt.source]="reload",an.pause())}this._updateLayer(jt),jt.onAdd&&jt.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(ot,lt){if(this._checkLoaded(),this._changed=!0,!this._layers[ot])return void this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be moved.`)));if(ot===lt)return;const bt=this._order.indexOf(ot);this._order.splice(bt,1);const kt=lt?this._order.indexOf(lt):this._order.length;lt&&kt===-1?this.fire(new j.ErrorEvent(new Error(`Layer with id "${lt}" does not exist on this map.`))):(this._order.splice(kt,0,ot),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(ot){this._checkLoaded();const lt=this._layers[ot];if(!lt)return void this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be removed.`)));lt.setEventedParent(null),this._updateLayerCount(lt,!1);const bt=this._order.indexOf(ot);this._order.splice(bt,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[ot]=lt,delete this._layers[ot],delete this._serializedLayers[ot],delete this._updatedLayers[ot],delete this._updatedPaintProps[ot],lt.onRemove&&lt.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(ot){return this._layers[ot]}hasLayer(ot){return ot in this._layers}hasLayerType(ot){for(const lt in this._layers)if(this._layers[lt].type===ot)return!0;return!1}setLayerZoomRange(ot,lt,bt){this._checkLoaded();const kt=this.getLayer(ot);kt?kt.minzoom===lt&&kt.maxzoom===bt||(lt!=null&&(kt.minzoom=lt),bt!=null&&(kt.maxzoom=bt),this._updateLayer(kt)):this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(ot,lt,bt={}){this._checkLoaded();const kt=this.getLayer(ot);if(kt){if(!it(kt.filter,lt))return lt==null?(kt.filter=void 0,void this._updateLayer(kt)):void(this._validate(j.validateFilter,`layers.${kt.id}.filter`,lt,{layerType:kt.type},bt)||(kt.filter=j.clone$1(lt),this._updateLayer(kt)))}else this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be filtered.`)))}getFilter(ot){const lt=this.getLayer(ot);return lt&&j.clone$1(lt.filter)}setLayoutProperty(ot,lt,bt,kt={}){this._checkLoaded();const jt=this.getLayer(ot);jt?it(jt.getLayoutProperty(lt),bt)||(jt.setLayoutProperty(lt,bt,kt),this._updateLayer(jt)):this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(ot,lt){const bt=this.getLayer(ot);if(bt)return bt.getLayoutProperty(lt);this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style.`)))}setPaintProperty(ot,lt,bt,kt={}){this._checkLoaded();const jt=this.getLayer(ot);jt?it(jt.getPaintProperty(lt),bt)||(jt.setPaintProperty(lt,bt,kt)&&this._updateLayer(jt),this._changed=!0,this._updatedPaintProps[ot]=!0):this.fire(new j.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(ot,lt){const bt=this.getLayer(ot);return bt&&bt.getPaintProperty(lt)}setFeatureState(ot,lt){this._checkLoaded();const bt=ot.source,kt=ot.sourceLayer,jt=this.getSource(bt);if(!jt)return void this.fire(new j.ErrorEvent(new Error(`The source '${bt}' does not exist in the map's style.`)));const Jt=jt.type;if(Jt==="geojson"&&kt)return void this.fire(new j.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Jt==="vector"&&!kt)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));ot.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided.")));const an=this._getSourceCaches(bt);for(const cn of an)cn.setFeatureState(kt,ot.id,lt)}removeFeatureState(ot,lt){this._checkLoaded();const bt=ot.source,kt=this.getSource(bt);if(!kt)return void this.fire(new j.ErrorEvent(new Error(`The source '${bt}' does not exist in the map's style.`)));const jt=kt.type,Jt=jt==="vector"?ot.sourceLayer:void 0;if(jt==="vector"&&!Jt)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(lt&&typeof ot.id!="string"&&typeof ot.id!="number")return void this.fire(new j.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const an=this._getSourceCaches(bt);for(const cn of an)cn.removeFeatureState(Jt,ot.id,lt)}getFeatureState(ot){this._checkLoaded();const lt=ot.source,bt=ot.sourceLayer,kt=this.getSource(lt);if(kt){if(kt.type!=="vector"||bt)return ot.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(lt)[0].getFeatureState(bt,ot.id);this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new j.ErrorEvent(new Error(`The source '${lt}' does not exist in the map's style.`)))}getTransition(){return j.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const ot={};for(const lt in this._sourceCaches){const bt=this._sourceCaches[lt].getSource();ot[bt.id]||(ot[bt.id]=bt.serialize())}return j.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:ot,layers:this._serializeLayers(this._order)},lt=>lt!==void 0)}_updateLayer(ot){this._updatedLayers[ot.id]=!0;const lt=this._getLayerSourceCache(ot);ot.source&&!this._updatedSources[ot.source]&&lt&&lt.getSource().type!=="raster"&&(this._updatedSources[ot.source]="reload",lt.pause()),this._changed=!0,ot.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(ot){const lt=Jt=>this._layers[Jt].type==="fill-extrusion",bt={},kt=[];for(let Jt=this._order.length-1;Jt>=0;Jt--){const an=this._order[Jt];if(lt(an)){bt[an]=Jt;for(const cn of ot){const _n=cn[an];if(_n)for(const Sn of _n)kt.push(Sn)}}}kt.sort((Jt,an)=>an.intersectionZ-Jt.intersectionZ);const jt=[];for(let Jt=this._order.length-1;Jt>=0;Jt--){const an=this._order[Jt];if(lt(an))for(let cn=kt.length-1;cn>=0;cn--){const _n=kt[cn].feature;if(bt[_n.layer.id]<Jt)break;jt.push(_n),kt.pop()}else for(const cn of ot){const _n=cn[an];if(_n)for(const Sn of _n)jt.push(Sn.feature)}}return jt}queryRenderedFeatures(ot,lt,bt){lt&&lt.filter&&this._validate(j.validateFilter,"queryRenderedFeatures.filter",lt.filter,null,lt);const kt={};if(lt&&lt.layers){if(!Array.isArray(lt.layers))return this.fire(new j.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const cn of lt.layers){const _n=this._layers[cn];if(!_n)return this.fire(new j.ErrorEvent(new Error(`The layer '${cn}' does not exist in the map's style and cannot be queried for features.`))),[];kt[_n.source]=!0}}const jt=[];lt.availableImages=this._availableImages;const Jt=lt&&lt.layers?lt.layers.some(cn=>{const _n=this.getLayer(cn);return _n&&_n.is3D()}):this.has3DLayers(),an=vn.createFromScreenPoints(ot,bt);for(const cn in this._sourceCaches){const _n=this._sourceCaches[cn].getSource().id;lt.layers&&!kt[_n]||jt.push(wr(this._sourceCaches[cn],this._layers,this._serializedLayers,an,lt,bt,Jt,!!this.map._showQueryGeometry))}return this.placement&&jt.push(function(cn,_n,Sn,In,Bn,Yn,Gn){const Xn={},Un=Yn.queryRenderedSymbols(In),Nn=[];for(const er of Object.keys(Un).map(Number))Nn.push(Gn[er]);Nn.sort(Qr);for(const er of Nn){const Zn=er.featureIndex.lookupSymbolFeatures(Un[er.bucketInstanceId],_n,er.bucketIndex,er.sourceLayerIndex,Bn.filter,Bn.layers,Bn.availableImages,cn);for(const fr in Zn){const pr=Xn[fr]=Xn[fr]||[],tr=Zn[fr];tr.sort((vr,Er)=>{const Lr=er.featureSortOrder;if(Lr){const kr=Lr.indexOf(vr.featureIndex);return Lr.indexOf(Er.featureIndex)-kr}return Er.featureIndex-vr.featureIndex});for(const vr of tr)pr.push(vr)}}for(const er in Xn)Xn[er].forEach(Zn=>{const fr=Zn.feature,pr=Sn(cn[er]).getFeatureState(fr.layer["source-layer"],fr.id);fr.source=fr.layer.source,fr.layer["source-layer"]&&(fr.sourceLayer=fr.layer["source-layer"]),fr.state=pr});return Xn}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),an.screenGeometry,lt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(jt)}querySourceFeatures(ot,lt){lt&&lt.filter&&this._validate(j.validateFilter,"querySourceFeatures.filter",lt.filter,null,lt);const bt=this._getSourceCaches(ot);let kt=[];for(const jt of bt)kt=kt.concat(Br(jt,lt));return kt}addSourceType(ot,lt,bt){return op.getSourceType(ot)?bt(new Error(`A source type called "${ot}" already exists.`)):(op.setSourceType(ot,lt),lt.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:ot,url:lt.workerSourceURL},bt):bt(null,null))}getLight(){return this.light.getLight()}setLight(ot,lt={}){this._checkLoaded();const bt=this.light.getLight();let kt=!1;for(const Jt in ot)if(!it(ot[Jt],bt[Jt])){kt=!0;break}if(!kt)return;const jt=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(ot,lt),this.light.updateTransitions(jt)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(ot,lt=1){if(this._checkLoaded(),!ot)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(lt===1){if(typeof ot.source=="object"){const bt="terrain-dem-src";this.addSource(bt,ot.source),ot=j.clone$1(ot),ot=j.extend(ot,{source:bt})}if(this._validate(j.validateTerrain,"terrain",ot))return}if(!this.terrain||this.terrain&&lt!==this.terrain.drapeRenderMode)this._createTerrain(ot,lt);else{const bt=this.terrain,kt=bt.get();for(const jt of Object.keys(j.spec.terrain))!ot.hasOwnProperty(jt)&&j.spec.terrain[jt].default&&(ot[jt]=j.spec.terrain[jt].default);for(const jt in ot)if(!it(ot[jt],kt[jt])){bt.set(ot),this.stylesheet.terrain=ot;const Jt=this._setTransitionParameters({duration:0});bt.updateTransitions(Jt);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(ot){const lt=this.fog=new tn(ot,this.map.transform);this.stylesheet.fog=ot;const bt=this._setTransitionParameters({duration:0});lt.updateTransitions(bt)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const ot of this.map._markers)ot._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(ot){if(this._checkLoaded(),!ot)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const lt=this.fog,bt=lt.get();Object.keys(ot).length===0&&lt.set(ot);for(const kt in ot)if(!it(ot[kt],bt[kt])){lt.set(ot),this.stylesheet.fog=ot;const jt=this._setTransitionParameters({duration:0});lt.updateTransitions(jt);break}}else this._createFog(ot);this._markersNeedUpdate=!0}_setTransitionParameters(ot){return{now:j.exported.now(),transition:j.extend(ot,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const ot=this._order.filter(bt=>this.isLayerDraped(this._layers[bt])),lt=this._order.filter(bt=>!this.isLayerDraped(this._layers[bt]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...ot),this._drapedFirstOrder.push(...lt)}_createTerrain(ot,lt){const bt=this.terrain=new Ht(ot,lt);this.stylesheet.terrain=ot,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const kt=this._setTransitionParameters({duration:0});bt.updateTransitions(kt)}_force3DLayerUpdate(){for(const ot in this._layers){const lt=this._layers[ot];lt.type==="fill-extrusion"&&this._updateLayer(lt)}}_forceSymbolLayerUpdate(){for(const ot in this._layers){const lt=this._layers[ot];lt.type==="symbol"&&this._updateLayer(lt)}}_validate(ot,lt,bt,kt,jt={}){return(!jt||jt.validate!==!1)&&Gu(this,ot.call(j.validateStyle,j.extend({key:lt,style:this.serialize(),value:bt,styleSpec:j.spec},kt)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),j.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const ot in this._layers)this._layers[ot].setEventedParent(null);for(const ot in this._sourceCaches)this._sourceCaches[ot].clearTiles(),this._sourceCaches[ot].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(ot){const lt=this._getSourceCaches(ot);for(const bt of lt)bt.clearTiles()}_reloadSource(ot){const lt=this._getSourceCaches(ot);for(const bt of lt)bt.resume(),bt.reload()}_reloadSources(){for(const ot of this._getSources())ot.reload&&ot.reload()}_updateSources(ot){for(const lt in this._sourceCaches)this._sourceCaches[lt].update(ot)}_generateCollisionBoxes(){for(const ot in this._sourceCaches){const lt=this._sourceCaches[ot];lt.resume(),lt.reload()}}_updatePlacement(ot,lt,bt,kt,jt=!1){let Jt=!1,an=!1;const cn={};for(const _n of this._order){const Sn=this._layers[_n];if(Sn.type!=="symbol")continue;if(!cn[Sn.source]){const Bn=this._getLayerSourceCache(Sn);if(!Bn)continue;cn[Sn.source]=Bn.getRenderableIds(!0).map(Yn=>Bn.getTileByID(Yn)).sort((Yn,Gn)=>Gn.tileID.overscaledZ-Yn.tileID.overscaledZ||(Yn.tileID.isLessThan(Gn.tileID)?-1:1))}const In=this.crossTileSymbolIndex.addLayer(Sn,cn[Sn.source],ot.center.lng,ot.projection);Jt=Jt||In}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),jt=jt||this._layerOrderChanged||bt===0,this._layerOrderChanged&&this.fire(new j.Event("neworder")),(jt||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.exported.now(),ot.zoom))&&(this.pauseablePlacement=new $o(ot,this._order,jt,lt,bt,kt,this.placement,this.fog&&ot.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,cn),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.exported.now()),an=!0),Jt&&this.pauseablePlacement.placement.setStale()),an||Jt)for(const _n of this._order){const Sn=this._layers[_n];Sn.type==="symbol"&&this.placement.updateLayerOpacities(Sn,cn[Sn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.exported.now())}_releaseSymbolFadeTiles(){for(const ot in this._sourceCaches)this._sourceCaches[ot].releaseSymbolFadeTiles()}getImages(ot,lt,bt){this.imageManager.getImages(lt.icons,bt),this._updateTilesForChangedImages();const kt=jt=>{jt&&jt.setDependencies(lt.tileID.key,lt.type,lt.icons)};kt(this._otherSourceCaches[lt.source]),kt(this._symbolSourceCaches[lt.source])}getGlyphs(ot,lt,bt){this.glyphManager.getGlyphs(lt.stacks,bt)}getResource(ot,lt,bt){return j.makeRequest(lt,bt)}_getSourceCache(ot){return this._otherSourceCaches[ot]}_getLayerSourceCache(ot){return ot.type==="symbol"?this._symbolSourceCaches[ot.source]:this._otherSourceCaches[ot.source]}_getSourceCaches(ot){const lt=[];return this._otherSourceCaches[ot]&&lt.push(this._otherSourceCaches[ot]),this._symbolSourceCaches[ot]&&lt.push(this._symbolSourceCaches[ot]),lt}_isSourceCacheLoaded(ot){const lt=this._getSourceCaches(ot);return lt.length===0?(this.fire(new j.ErrorEvent(new Error(`There is no source with ID '${ot}'`))),!1):lt.every(bt=>bt.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}op.getSourceType=function(dt){return ur[dt]},op.setSourceType=function(dt,ot){ur[dt]=ot},op.registerForPluginStateChange=j.registerForPluginStateChange;var t_=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,du="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",sv=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,n_=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,av=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let r_={},i_={};const rm=[];sp(t_,rm),sp(sv,rm),sp(n_,rm),sp(av,rm),r_=ms("",sv),i_=ms(av,n_);const gu=ms(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),lv=t_,pu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var uv={background:ms(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ms(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ms(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ms("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ms(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ms(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ms("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ms("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ms("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ms(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ms(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ms(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ms(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ms(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);float roof_radiance=clamp(u_lightpos.z,0.0,1.0);roof_radiance=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roof_radiance);v_roof_color.rgb+=clamp(color.rgb*roof_radiance*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:ms(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:ms(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ms(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ms(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ms(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ms(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:ms(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:ms(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:ms(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:ms(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:ms(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ms(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,du),skyboxGradient:ms(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,du),skyboxCapture:ms(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ms(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ms(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function sp(dt,ot){const lt=dt.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let bt of lt)if(bt=bt.trim(),bt[0]==="#"&&bt.includes("if")&&!bt.includes("endif")){bt=bt.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const kt=bt.split(" ");for(const jt of kt)ot.includes(jt)||ot.push(jt)}}function ms(dt,ot){const lt=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,bt=ot.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),kt={},jt=[...rm];return sp(dt,jt),sp(ot,jt),{fragmentSource:dt=dt.replace(lt,(Jt,an,cn,_n,Sn)=>(kt[Sn]=!0,an==="define"?`
#ifndef HAS_UNIFORM_u_${Sn}
varying ${cn} ${_n} ${Sn};
#else
uniform ${cn} ${_n} u_${Sn};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Sn}
    ${cn} ${_n} ${Sn} = u_${Sn};
#endif
`)),vertexSource:ot=ot.replace(lt,(Jt,an,cn,_n,Sn)=>{const In=_n==="float"?"vec2":"vec4",Bn=Sn.match(/color/)?"color":In;return kt[Sn]?an==="define"?`
#ifndef HAS_UNIFORM_u_${Sn}
uniform lowp float u_${Sn}_t;
attribute ${cn} ${In} a_${Sn};
varying ${cn} ${_n} ${Sn};
#else
uniform ${cn} ${_n} u_${Sn};
#endif
`:Bn==="vec4"?`
#ifndef HAS_UNIFORM_u_${Sn}
    ${Sn} = a_${Sn};
#else
    ${cn} ${_n} ${Sn} = u_${Sn};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Sn}
    ${Sn} = unpack_mix_${Bn}(a_${Sn}, u_${Sn}_t);
#else
    ${cn} ${_n} ${Sn} = u_${Sn};
#endif
`:an==="define"?`
#ifndef HAS_UNIFORM_u_${Sn}
uniform lowp float u_${Sn}_t;
attribute ${cn} ${In} a_${Sn};
#else
uniform ${cn} ${_n} u_${Sn};
#endif
`:Bn==="vec4"?`
#ifndef HAS_UNIFORM_u_${Sn}
    ${cn} ${_n} ${Sn} = a_${Sn};
#else
    ${cn} ${_n} ${Sn} = u_${Sn};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Sn}
    ${cn} ${_n} ${Sn} = unpack_mix_${Bn}(a_${Sn}, u_${Sn}_t);
#else
    ${cn} ${_n} ${Sn} = u_${Sn};
#endif
`}),staticAttributes:bt,usedDefines:jt}}class im{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(ot,lt,bt,kt,jt,Jt,an){this.context=ot;let cn=this.boundPaintVertexBuffers.length!==kt.length;for(let Sn=0;!cn&&Sn<kt.length;Sn++)this.boundPaintVertexBuffers[Sn]!==kt[Sn]&&(cn=!0);let _n=this.boundDynamicVertexBuffers.length!==an.length;for(let Sn=0;!_n&&Sn<an.length;Sn++)this.boundDynamicVertexBuffers[Sn]!==an[Sn]&&(_n=!0);if(!ot.extVertexArrayObject||!this.vao||this.boundProgram!==lt||this.boundLayoutVertexBuffer!==bt||cn||_n||this.boundIndexBuffer!==jt||this.boundVertexOffset!==Jt)this.freshBind(lt,bt,kt,jt,Jt,an);else{ot.bindVertexArrayOES.set(this.vao);for(const Sn of an)Sn&&Sn.bind();jt&&jt.dynamicDraw&&jt.bind()}}freshBind(ot,lt,bt,kt,jt,Jt){let an;const cn=ot.numAttributes,_n=this.context,Sn=_n.gl;if(_n.extVertexArrayObject)this.vao&&this.destroy(),this.vao=_n.extVertexArrayObject.createVertexArrayOES(),_n.bindVertexArrayOES.set(this.vao),an=0,this.boundProgram=ot,this.boundLayoutVertexBuffer=lt,this.boundPaintVertexBuffers=bt,this.boundIndexBuffer=kt,this.boundVertexOffset=jt,this.boundDynamicVertexBuffers=Jt;else{an=_n.currentNumAttributes||0;for(let In=cn;In<an;In++)Sn.disableVertexAttribArray(In)}lt.enableAttributes(Sn,ot),lt.bind(),lt.setVertexAttribPointers(Sn,ot,jt);for(const In of bt)In.enableAttributes(Sn,ot),In.bind(),In.setVertexAttribPointers(Sn,ot,jt);for(const In of Jt)In&&(In.enableAttributes(Sn,ot),In.bind(),In.setVertexAttribPointers(Sn,ot,jt));kt&&kt.bind(),_n.currentNumAttributes=cn}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function $m(dt,ot){const lt=Math.pow(2,ot.canonical.z),bt=ot.canonical.y;return[new j.MercatorCoordinate(0,bt/lt).toLngLat().lat,new j.MercatorCoordinate(0,(bt+1)/lt).toLngLat().lat]}function Qs(dt,ot,lt,bt,kt,jt,Jt){const an=dt.context,cn=an.gl,_n=lt.fbo;if(!_n)return;dt.prepareDrawTile();const Sn=dt.useProgram("hillshade");an.activeTexture.set(cn.TEXTURE0),cn.bindTexture(cn.TEXTURE_2D,_n.colorAttachment.get());const In=((Xn,Un,Nn,er)=>{const Zn=Nn.paint.get("hillshade-shadow-color"),fr=Nn.paint.get("hillshade-highlight-color"),pr=Nn.paint.get("hillshade-accent-color");let tr=Nn.paint.get("hillshade-illumination-direction")*(Math.PI/180);Nn.paint.get("hillshade-illumination-anchor")==="viewport"&&(tr-=Xn.transform.angle);const vr=!Xn.options.moving;return{u_matrix:er||Xn.transform.calculateProjMatrix(Un.tileID.toUnwrapped(),vr),u_image:0,u_latrange:$m(0,Un.tileID),u_light:[Nn.paint.get("hillshade-exaggeration"),tr],u_shadow:Zn,u_highlight:fr,u_accent:pr}})(dt,lt,bt,dt.terrain?ot.projMatrix:null);dt.prepareDrawProgram(an,Sn,ot.toUnwrapped());const{tileBoundsBuffer:Bn,tileBoundsIndexBuffer:Yn,tileBoundsSegments:Gn}=dt.getTileBoundsBuffers(lt);Sn.draw(an,cn.TRIANGLES,kt,jt,Jt,j.CullFaceMode.disabled,In,bt.id,Bn,Yn,Gn)}function ap(dt,ot,lt){if(!ot.needsDEMTextureUpload)return;const bt=dt.context,kt=bt.gl;bt.pixelStoreUnpackPremultiplyAlpha.set(!1),ot.demTexture=ot.demTexture||dt.getTileTexture(lt.stride);const jt=lt.getPixels();ot.demTexture?ot.demTexture.update(jt,{premultiply:!1}):ot.demTexture=new j.Texture(bt,jt,kt.RGBA,{premultiply:!1}),ot.needsDEMTextureUpload=!1}function o_(dt,ot,lt,bt,kt,jt){const Jt=dt.context,an=Jt.gl;if(!ot.dem)return;const cn=ot.dem;if(Jt.activeTexture.set(an.TEXTURE1),ap(dt,ot,cn),!ot.demTexture)return;ot.demTexture.bind(an.NEAREST,an.CLAMP_TO_EDGE);const _n=cn.dim;Jt.activeTexture.set(an.TEXTURE0);let Sn=ot.fbo;if(!Sn){const Gn=new j.Texture(Jt,{width:_n,height:_n,data:null},an.RGBA);Gn.bind(an.LINEAR,an.CLAMP_TO_EDGE),Sn=ot.fbo=Jt.createFramebuffer(_n,_n,!0),Sn.colorAttachment.set(Gn.texture)}Jt.bindFramebuffer.set(Sn.framebuffer),Jt.viewport.set([0,0,_n,_n]);const{tileBoundsBuffer:In,tileBoundsIndexBuffer:Bn,tileBoundsSegments:Yn}=dt.getMercatorTileBoundsBuffers();dt.useProgram("hillshadePrepare").draw(Jt,an.TRIANGLES,bt,kt,jt,j.CullFaceMode.disabled,((Gn,Xn)=>{const Un=Xn.stride,Nn=j.create();return j.ortho(Nn,0,j.EXTENT,-j.EXTENT,0,0,1),j.translate(Nn,Nn,[0,-j.EXTENT,0]),{u_matrix:Nn,u_image:1,u_dimension:[Un,Un],u_zoom:Gn.overscaledZ,u_unpack:Xn.unpackVector}})(ot.tileID,cn),lt.id,In,Bn,Yn),ot.needsHillshadePrepare=!1}const s_=dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image0:new j.Uniform1i(dt),u_skirt_height:new j.Uniform1f(dt)}),Ty=(dt,ot)=>({u_matrix:dt,u_image0:0,u_skirt_height:ot}),a_=(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn)=>({u_proj_matrix:Float32Array.from(dt),u_globe_matrix:ot,u_normalize_matrix:Float32Array.from(bt),u_merc_matrix:lt,u_zoom_transition:kt,u_merc_center:jt,u_image0:0,u_frustum_tl:Jt,u_frustum_tr:an,u_frustum_br:cn,u_frustum_bl:_n,u_globe_pos:Sn,u_globe_radius:In,u_viewport:Bn,u_grid_matrix:Yn?Float32Array.from(Yn):new Float32Array(9)});function Cy(dt,ot){return dt!=null&&ot!=null&&!(!dt.hasData()||!ot.hasData())&&dt.demTexture!=null&&ot.demTexture!=null&&dt.tileID.key!==ot.tileID.key}const om=new class{constructor(){this.operations={}}newMorphing(dt,ot,lt,bt,kt){if(dt in this.operations){const jt=this.operations[dt];jt.to.tileID.key!==lt.tileID.key&&(jt.queued=lt)}else this.operations[dt]={startTime:bt,phase:0,duration:kt,from:ot,to:lt,queued:null}}getMorphValuesForProxy(dt){if(!(dt in this.operations))return null;const ot=this.operations[dt];return{from:ot.from,to:ot.to,phase:ot.phase}}update(dt){for(const ot in this.operations){const lt=this.operations[ot];for(lt.phase=(dt-lt.startTime)/lt.duration;lt.phase>=1||!this._validOp(lt);)if(!this._nextOp(lt,dt)){delete this.operations[ot];break}}}_nextOp(dt,ot){return!!dt.queued&&(dt.from=dt.to,dt.to=dt.queued,dt.queued=null,dt.phase=0,dt.startTime=ot,!0)}_validOp(dt){return dt.from.hasData()&&dt.to.hasData()}},Im={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ss(dt,ot){const lt=1<<dt.z;return!ot&&(dt.x===0||dt.x===lt-1)||dt.y===0||dt.y===lt-1}const lp=dt=>({u_matrix:dt});function cv(dt,ot,lt,bt,kt){if(kt>0){const jt=j.exported.now(),Jt=(jt-dt.timeAdded)/kt,an=ot?(jt-ot.timeAdded)/kt:-1,cn=lt.getSource(),_n=bt.coveringZoomLevel({tileSize:cn.tileSize,roundZoom:cn.roundZoom}),Sn=!ot||Math.abs(ot.tileID.overscaledZ-_n)>Math.abs(dt.tileID.overscaledZ-_n),In=Sn&&dt.refreshedUponExpiration?1:j.clamp(Sn?Jt:1-an,0,1);return dt.refreshedUponExpiration&&Jt>=1&&(dt.refreshedUponExpiration=!1),ot?{opacity:1,mix:1-In}:{opacity:In,mix:0}}return{opacity:1,mix:0}}class hv extends j.SourceCache{constructor(ot){const lt={type:"raster-dem",maxzoom:ot.transform.maxZoom},bt=new mn(Lo(),null),kt=mr("mock-dem",lt,bt,ot.style);super("mock-dem",kt,!1),kt.setEventedParent(this),this._sourceLoaded=!0}_loadTile(ot,lt){ot.state="loaded",lt(null)}}class fv extends j.SourceCache{constructor(ot){const lt=mr("proxy",{type:"geojson",maxzoom:ot.transform.maxZoom},new mn(Lo(),null),ot.style);super("proxy",lt,!1),lt.setEventedParent(this),this.map=this.getSource().map=ot,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(ot,lt,bt){if(ot.freezeTileCoverage)return;this.transform=ot;const kt=ot.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((jt,Jt)=>{if(jt[Jt.key]="",!this._tiles[Jt.key]){const an=new j.Tile(Jt,this._source.tileSize*Jt.overscaleFactor(),ot.tileZoom);an.state="loaded",this._tiles[Jt.key]=an}return jt},{});for(const jt in this._tiles)jt in kt||(this.freeFBO(jt),this._tiles[jt].unloadVectorData(),delete this._tiles[jt])}freeFBO(ot){const lt=this.proxyCachedFBO[ot];if(lt!==void 0){const bt=Object.values(lt);this.renderCachePool.push(...bt),delete this.proxyCachedFBO[ot]}}deallocRenderCache(){this.renderCache.forEach(ot=>ot.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class qm extends j.OverscaledTileID{constructor(ot,lt,bt){super(ot.overscaledZ,ot.wrap,ot.canonical.z,ot.canonical.x,ot.canonical.y),this.proxyTileKey=lt,this.projMatrix=bt}}class l_ extends j.Elevation{constructor(ot,lt){super(),this.painter=ot,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[bt,kt,jt]=function(cn){const _n=new j.StructArrayLayout4i8,Sn=new j.StructArrayLayout3ui6,In=131;_n.reserve(17161),Sn.reserve(33800);const Bn=j.EXTENT/128,Yn=j.EXTENT+Bn/2,Gn=Yn+Bn;for(let Un=-Bn;Un<Gn;Un+=Bn)for(let Nn=-Bn;Nn<Gn;Nn+=Bn){const er=Nn<0||Nn>Yn||Un<0||Un>Yn?24575:0,Zn=j.clamp(Math.round(Nn),0,j.EXTENT),fr=j.clamp(Math.round(Un),0,j.EXTENT);_n.emplaceBack(Zn+er,fr,Zn,fr)}const Xn=(Un,Nn)=>{const er=Nn*In+Un;Sn.emplaceBack(er+1,er,er+In),Sn.emplaceBack(er+In,er+In+1,er+1)};for(let Un=1;Un<129;Un++)for(let Nn=1;Nn<129;Nn++)Xn(Nn,Un);return[0,129].forEach(Un=>{for(let Nn=0;Nn<130;Nn++)Xn(Nn,Un),Xn(Un,Nn)}),[_n,Sn,32768]}(),Jt=ot.context;this.gridBuffer=Jt.createVertexBuffer(bt,j.boundsAttributes.members),this.gridIndexBuffer=Jt.createIndexBuffer(kt),this.gridSegments=j.SegmentVector.simpleSegment(0,0,bt.length,kt.length),this.gridNoSkirtSegments=j.SegmentVector.simpleSegment(0,0,bt.length,jt),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new fv(lt.map),this.orthoMatrix=j.create(),j.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,j.EXTENT,0,j.EXTENT,0,1);const an=Jt.gl;this._overlapStencilMode=new j.StencilMode({func:an.GEQUAL,mask:255},0,255,an.KEEP,an.KEEP,an.REPLACE),this._previousZoom=ot.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=lt,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new hv(lt.map)}set style(ot){ot.on("data",this._onStyleDataEvent.bind(this)),ot.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=ot,this._checkRenderCacheEfficiency()}update(ot,lt,bt){if(ot&&ot.terrain){this._style!==ot&&(this.style=ot),this.enabled=!0;const kt=ot.terrain.properties;this.sourceCache=ot.terrain.drapeRenderMode===0?this._mockSourceCache:ot._getSourceCache(kt.get("source")),this._exaggeration=kt.get("exaggeration");const jt=()=>{this.sourceCache.used&&j.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Jt=this.getScaledDemTileSize();this.sourceCache.update(lt,Jt,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,jt(),this._initializing=!0),jt(),lt.updateElevation(!bt),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(lt),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(ot){this._findCoveringTileCache[ot]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const ot=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||ot.efficiency!==100&&j.warnOnce(`Terrain render cache efficiency is not optimal (${ot.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${ot.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(ot){ot.coord&&ot.dataType==="source"?this._clearRenderCacheForTile(ot.sourceCacheId,ot.coord):ot.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const ot in this._style._sourceCaches)this._style._sourceCaches[ot].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(ot=>ot.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const ot=2*this.proxySourceCache.getSource().tileSize;return[ot,ot]}set useVertexMorphing(ot){this._useVertexMorphing=ot}updateTileBinding(ot){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const lt=this.proxySourceCache,bt=this.painter.transform;this._initializing&&(this._initializing=bt._centerAltitude===0&&this.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(bt.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const kt=this.proxyCoords=lt.getIds().map(cn=>{const _n=lt.getTileByID(cn).tileID;return _n.projMatrix=bt.calculateProjMatrix(_n.toUnwrapped()),_n});(function(cn,_n){const Sn=_n.transform.pointCoordinate(_n.transform.getCameraPoint()),In=new j.pointGeometry(Sn.x,Sn.y);cn.sort((Bn,Yn)=>{if(Yn.overscaledZ-Bn.overscaledZ)return Yn.overscaledZ-Bn.overscaledZ;const Gn=new j.pointGeometry(Bn.canonical.x+(1<<Bn.canonical.z)*Bn.wrap,Bn.canonical.y),Xn=new j.pointGeometry(Yn.canonical.x+(1<<Yn.canonical.z)*Yn.wrap,Yn.canonical.y),Un=In.mult(1<<Bn.canonical.z);return Un.x-=.5,Un.y-=.5,Un.distSqr(Gn)-Un.distSqr(Xn)})})(kt,this.painter),this._previousZoom=bt.zoom;const jt=this.proxyToSource||{};this.proxyToSource={},kt.forEach(cn=>{this.proxyToSource[cn.key]={}}),this.terrainTileForTile={};const Jt=this._style._sourceCaches;for(const cn in Jt){const _n=Jt[cn];if(!_n.used||(_n!==this.sourceCache&&this.resetTileLookupCache(_n.id),this._setupProxiedCoordsForOrtho(_n,ot[cn],jt),_n.usedForTerrain))continue;const Sn=ot[cn];_n.getSource().reparseOverscaled&&this._assignTerrainTiles(Sn)}this.proxiedCoords[lt.id]=kt.map(cn=>new qm(cn,cn.key,this.orthoMatrix)),this._assignTerrainTiles(kt),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(jt),this.renderingToTexture=!1,this._updateTimestamp=j.exported.now();const an={};this._visibleDemTiles=[];for(const cn of this.proxyCoords){const _n=this.terrainTileForTile[cn.key];if(!_n)continue;const Sn=_n.tileID.key;Sn in an||(this._visibleDemTiles.push(_n),an[Sn]=Sn)}}_assignTerrainTiles(ot){this._initializing||ot.forEach(lt=>{if(this.terrainTileForTile[lt.key])return;const bt=this._findTileCoveringTileID(lt,this.sourceCache);bt&&(this.terrainTileForTile[lt.key]=bt)})}_prepareDEMTextures(){const ot=this.painter.context,lt=ot.gl;for(const bt in this.terrainTileForTile){const kt=this.terrainTileForTile[bt],jt=kt.dem;!jt||kt.demTexture&&!kt.needsDEMTextureUpload||(ot.activeTexture.set(lt.TEXTURE1),ap(this.painter,kt,jt))}}_prepareDemTileUniforms(ot,lt,bt,kt){if(!lt||lt.demTexture==null)return!1;const jt=ot.tileID.canonical,Jt=Math.pow(2,lt.tileID.canonical.z-jt.z),an=kt||"";return bt[`u_dem_tl${an}`]=[jt.x*Jt%1,jt.y*Jt%1],bt[`u_dem_scale${an}`]=Jt,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const ot=this.painter.context,lt=ot.gl;if(!this._emptyDepthBufferTexture){const bt=new j.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new j.Texture(ot,bt,lt.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let ot=0;const lt=this._visibleDemTiles.reduce((bt,kt)=>{if(!kt.dem)return bt;const jt=kt.dem.tree.minimums[0];return jt>0&&ot++,bt+jt},0);return ot?lt/ot:0}_updateEmptyDEMTexture(){const ot=this.painter.context,lt=ot.gl;ot.activeTexture.set(lt.TEXTURE2);const bt=this._getLoadedAreaMinimum(),kt=new j.RGBAImage({width:1,height:1},new Uint8Array(j.DEMData.pack(bt,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let jt=this._emptyDEMTexture;return jt?jt.update(kt,{premultiply:!1}):jt=this._emptyDEMTexture=new j.Texture(ot,kt,lt.RGBA,{premultiply:!1}),jt}setupElevationDraw(ot,lt,bt){const kt=this.painter.context,jt=kt.gl,Jt=(an=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:j.DEMData.getUnpackVector(an),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var an;Jt.u_dem_size=this.sourceCache.getSource().tileSize,Jt.u_exaggeration=this.exaggeration();let cn=null,_n=null,Sn=1;if(bt&&bt.morphing&&this._useVertexMorphing){const In=bt.morphing.srcDemTile,Bn=bt.morphing.dstDemTile;Sn=bt.morphing.phase,In&&Bn&&(this._prepareDemTileUniforms(ot,In,Jt,"_prev")&&(_n=In),this._prepareDemTileUniforms(ot,Bn,Jt)&&(cn=Bn))}if(_n&&cn?(kt.activeTexture.set(jt.TEXTURE2),cn.demTexture.bind(jt.NEAREST,jt.CLAMP_TO_EDGE,jt.NEAREST),kt.activeTexture.set(jt.TEXTURE4),_n.demTexture.bind(jt.NEAREST,jt.CLAMP_TO_EDGE,jt.NEAREST),Jt.u_dem_lerp=Sn):(cn=this.terrainTileForTile[ot.tileID.key],kt.activeTexture.set(jt.TEXTURE2),(this._prepareDemTileUniforms(ot,cn,Jt)?cn.demTexture:this.emptyDEMTexture).bind(jt.NEAREST,jt.CLAMP_TO_EDGE)),kt.activeTexture.set(jt.TEXTURE3),bt&&bt.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(jt.NEAREST,jt.CLAMP_TO_EDGE),this._depthFBO&&(Jt.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(jt.NEAREST,jt.CLAMP_TO_EDGE),Jt.u_depth_size_inv=[1,1]),bt&&bt.useMeterToDem&&cn){const In=(1<<cn.tileID.canonical.z)*j.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Jt.u_meter_to_dem=In}if(bt&&bt.labelPlaneMatrixInv&&(Jt.u_label_plane_matrix_inv=bt.labelPlaneMatrixInv),lt.setTerrainUniformValues(kt,Jt),this.painter.transform.projection.name==="globe"){const In=this.globeUniformValues(this.painter.transform,ot.tileID.canonical,bt&&bt.useDenormalizedUpVectorScale);lt.setGlobeUniformValues(kt,In)}}globeUniformValues(ot,lt,bt){const kt=ot.projection;return{u_tile_tl_up:kt.upVector(lt,0,0),u_tile_tr_up:kt.upVector(lt,j.EXTENT,0),u_tile_br_up:kt.upVector(lt,j.EXTENT,j.EXTENT),u_tile_bl_up:kt.upVector(lt,0,j.EXTENT),u_tile_up_scale:bt?j.GLOBE_METERS_TO_ECEF:kt.upVectorScale(lt,ot.center.lat,ot.worldSize).metersToTile}}renderToBackBuffer(ot){const lt=this.painter,bt=this.painter.context;ot.length!==0&&(bt.bindFramebuffer.set(null),bt.viewport.set([0,0,lt.width,lt.height]),lt.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(kt,jt,Jt,an,cn){if(kt.transform.projection.name==="globe")(function(_n,Sn,In,Bn,Yn){const Gn=_n.context,Xn=Gn.gl;let Un,Nn;const er=_n.options.showTerrainWireframe?2:0,Zn=_n.transform,fr=j.globeUseCustomAntiAliasing(_n,Gn,Zn),pr=(Or,Sr)=>{if(Nn===Or)return;const mo=[Im[Or],"PROJECTION_GLOBE_VIEW"];fr&&mo.push("CUSTOM_ANTIALIASING"),Sr&&mo.push(Im[er]),Un=_n.useProgram("globeRaster",null,mo),Nn=Or},tr=_n.colorModeForRenderPass(),vr=new j.DepthMode(Xn.LEQUAL,j.DepthMode.ReadWrite,_n.depthRangeFor3D);om.update(Yn);const Er=j.calculateGlobeMercatorMatrix(Zn),Lr=[j.mercatorXfromLng(Zn.center.lng),j.mercatorYfromLat(Zn.center.lat)],kr=er?[!1,!0]:[!1],io=_n.globeSharedBuffers,Ar=[Zn.width*j.exported.devicePixelRatio,Zn.height*j.exported.devicePixelRatio],$r=Float32Array.from(Zn.globeMatrix),qr={useDenormalizedUpVectorScale:!0};if(kr.forEach(Or=>{Nn=-1;const Sr=Or?Xn.LINES:Xn.TRIANGLES;for(const mo of Bn){const lo=In.getTile(mo),ho=j.StencilMode.disabled,uo=Sn.prevTerrainTileForTile[mo.key],Po=Sn.terrainTileForTile[mo.key];Cy(uo,Po)&&om.newMorphing(mo.key,uo,Po,Yn,250),Gn.activeTexture.set(Xn.TEXTURE0),lo.texture.bind(Xn.LINEAR,Xn.CLAMP_TO_EDGE);const zo=om.getMorphValuesForProxy(mo.key),Uo=zo?1:0;zo&&j.extend$1(qr,{morphing:{srcDemTile:zo.from,dstDemTile:zo.to,phase:j.easeCubicInOut(zo.phase)}});const Bo=j.tileCornersToBounds(mo.canonical),co=j.getLatitudinalLod(Bo.getCenter().lat),Yo=j.getGridMatrix(mo.canonical,Bo,co,Zn.worldSize/Zn._pixelsPerMercatorPixel),ls=j.globeNormalizeECEF(j.globeTileBounds(mo.canonical)),Ls=a_(Zn.projMatrix,$r,Er,ls,j.globeToMercatorTransition(Zn.zoom),Lr,Zn.frustumCorners.TL,Zn.frustumCorners.TR,Zn.frustumCorners.BR,Zn.frustumCorners.BL,Zn.globeCenterInViewSpace,Zn.globeRadius,Ar,Yo);if(pr(Uo,Or),Sn.setupElevationDraw(lo,Un,qr),_n.prepareDrawProgram(Gn,Un,mo.toUnwrapped()),io){const[Ns,Os,Ll]=Or?io.getWirefameBuffers(_n.context,co):io.getGridBuffers(co);Un.draw(Gn,Sr,vr,ho,tr,j.CullFaceMode.backCCW,Ls,"globe_raster",Ns,Os,Ll)}}}),io){const Or=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];fr&&Or.push("CUSTOM_ANTIALIASING"),Un=_n.useProgram("globeRaster",null,Or);for(const Sr of Bn){const{x:mo,y:lo,z:ho}=Sr.canonical,uo=lo===0,Po=lo===(1<<ho)-1,[zo,Uo,Bo,co]=io.getPoleBuffers(ho);if(co&&(uo||Po)){const Yo=In.getTile(Sr);Gn.activeTexture.set(Xn.TEXTURE0),Yo.texture.bind(Xn.LINEAR,Xn.CLAMP_TO_EDGE);let ls=j.globePoleMatrixForTile(ho,mo,Zn);const Ls=j.globeNormalizeECEF(j.globeTileBounds(Sr.canonical)),Ns=(Os,Ll)=>Os.draw(Gn,Xn.TRIANGLES,vr,j.StencilMode.disabled,tr,j.CullFaceMode.disabled,a_(Zn.projMatrix,ls,ls,Ls,0,Lr,Zn.frustumCorners.TL,Zn.frustumCorners.TR,Zn.frustumCorners.BR,Zn.frustumCorners.BL,Zn.globeCenterInViewSpace,Zn.globeRadius,Ar),"globe_pole_raster",Ll,Bo,co);Sn.setupElevationDraw(Yo,Un,qr),_n.prepareDrawProgram(Gn,Un,Sr.toUnwrapped()),uo&&Ns(Un,zo),Po&&(ls=j.scale(j.create(),ls,[1,-1,1]),Ns(Un,Uo))}}}})(kt,jt,Jt,an,cn);else{const _n=kt.context,Sn=_n.gl;let In,Bn;const Yn=kt.options.showTerrainWireframe?2:0,Gn=(Zn,fr)=>{if(Bn===Zn)return;const pr=[Im[Zn]];fr&&pr.push(Im[Yn]),In=kt.useProgram("terrainRaster",null,pr),Bn=Zn},Xn=kt.colorModeForRenderPass(),Un=new j.DepthMode(Sn.LEQUAL,j.DepthMode.ReadWrite,kt.depthRangeFor3D);om.update(cn);const Nn=kt.transform,er=6*Math.pow(1.5,22-Nn.zoom)*jt.exaggeration();(Yn?[!1,!0]:[!1]).forEach(Zn=>{Bn=-1;const fr=Zn?Sn.LINES:Sn.TRIANGLES,[pr,tr]=Zn?jt.getWirefameBuffer():[jt.gridIndexBuffer,jt.gridSegments];for(const vr of an){const Er=Jt.getTile(vr),Lr=j.StencilMode.disabled,kr=jt.prevTerrainTileForTile[vr.key],io=jt.terrainTileForTile[vr.key];Cy(kr,io)&&om.newMorphing(vr.key,kr,io,cn,250),_n.activeTexture.set(Sn.TEXTURE0),Er.texture.bind(Sn.LINEAR,Sn.CLAMP_TO_EDGE,Sn.LINEAR_MIPMAP_NEAREST);const Ar=om.getMorphValuesForProxy(vr.key),$r=Ar?1:0;let qr;Ar&&(qr={morphing:{srcDemTile:Ar.from,dstDemTile:Ar.to,phase:j.easeCubicInOut(Ar.phase)}});const Or=Ty(vr.projMatrix,Ss(vr.canonical,Nn.renderWorldCopies)?er/10:er);Gn($r,Zn),jt.setupElevationDraw(Er,In,qr),kt.prepareDrawProgram(_n,In,vr.toUnwrapped()),In.draw(_n,fr,Un,Lr,Xn,j.CullFaceMode.backCCW,Or,"terrain_raster",jt.gridBuffer,pr,tr)}})}}(lt,this,this.proxySourceCache,ot,this._updateTimestamp),this.renderingToTexture=!0,lt.gpuTimingDeferredRenderEnd(),ot.splice(0,ot.length))}renderBatch(ot){if(this._drapedRenderBatches.length===0)return ot+1;this.renderingToTexture=!0;const lt=this.painter,bt=this.painter.context,kt=this.proxySourceCache,jt=this.proxiedCoords[kt.id],Jt=this._drapedRenderBatches.shift(),an=[],cn=lt.style.order;let _n=0;for(const Sn of jt){const In=kt.getTileByID(Sn.proxyTileKey),Bn=kt.proxyCachedFBO[Sn.key]?kt.proxyCachedFBO[Sn.key][ot]:void 0,Yn=Bn!==void 0?kt.renderCache[Bn]:this.pool[_n++],Gn=Bn!==void 0;if(In.texture=Yn.tex,Gn&&!Yn.dirty){an.push(In.tileID);continue}let Xn;bt.bindFramebuffer.set(Yn.fb.framebuffer),this.renderedToTile=!1,Yn.dirty&&(bt.clear({color:j.Color.transparent,stencil:0}),Yn.dirty=!1);for(let Un=Jt.start;Un<=Jt.end;++Un){const Nn=lt.style._layers[cn[Un]];if(Nn.isHidden(lt.transform.zoom))continue;const er=lt.style._getLayerSourceCache(Nn),Zn=er?this.proxyToSource[Sn.key][er.id]:[Sn];if(!Zn)continue;const fr=Zn;bt.viewport.set([0,0,Yn.fb.width,Yn.fb.height]),Xn!==(er?er.id:null)&&(this._setupStencil(Yn,Zn,Nn,er),Xn=er?er.id:null),lt.renderLayer(lt,er,Nn,fr)}this.renderedToTile?(Yn.dirty=!0,an.push(In.tileID)):Gn||--_n,_n===5&&(_n=0,this.renderToBackBuffer(an))}return this.renderToBackBuffer(an),this.renderingToTexture=!1,bt.bindFramebuffer.set(null),bt.viewport.set([0,0,lt.width,lt.height]),Jt.end+1}postRender(){}renderCacheEfficiency(ot){const lt=ot.order.length;if(lt===0)return{efficiency:100};let bt,kt=0,jt=0,Jt=!1;for(let an=0;an<lt;++an){const cn=ot._layers[ot.order[an]];this._style.isLayerDraped(cn)?(Jt&&++kt,++jt):Jt||(Jt=!0,bt=cn.id)}return jt===0?{efficiency:100}:{efficiency:100*(1-kt/jt),firstUndrapedLayer:bt}}getMinElevationBelowMSL(){let ot=0;return this._visibleDemTiles.filter(lt=>lt.dem).forEach(lt=>{ot=Math.min(ot,lt.dem.tree.minimums[0])}),ot===0?ot:(ot-30)*this._exaggeration}raycast(ot,lt,bt){if(!this._visibleDemTiles)return null;const kt=this._visibleDemTiles.filter(jt=>jt.dem).map(jt=>{const Jt=jt.tileID,an=1<<Jt.overscaledZ,{x:cn,y:_n}=Jt.canonical,Sn=cn/an,In=(cn+1)/an,Bn=_n/an,Yn=(_n+1)/an;return{minx:Sn,miny:Bn,maxx:In,maxy:Yn,t:jt.dem.tree.raycastRoot(Sn,Bn,In,Yn,ot,lt,bt),tile:jt}});kt.sort((jt,Jt)=>(jt.t!==null?jt.t:Number.MAX_VALUE)-(Jt.t!==null?Jt.t:Number.MAX_VALUE));for(const jt of kt){if(jt.t==null)return null;const Jt=jt.tile.dem.tree.raycast(jt.minx,jt.miny,jt.maxx,jt.maxy,ot,lt,bt);if(Jt!=null)return Jt}return null}_createFBO(){const ot=this.painter.context,lt=ot.gl,bt=this.drapeBufferSize;ot.activeTexture.set(lt.TEXTURE0);const kt=new j.Texture(ot,{width:bt[0],height:bt[1],data:null},lt.RGBA);kt.bind(lt.LINEAR,lt.CLAMP_TO_EDGE);const jt=ot.createFramebuffer(bt[0],bt[1],!1);return jt.colorAttachment.set(kt.texture),jt.depthAttachment=new ro(ot,jt.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=ot.createRenderbuffer(ot.gl.DEPTH_STENCIL,bt[0],bt[1]),this._stencilRef=0,jt.depthAttachment.set(this._sharedDepthStencil),ot.clear({stencil:0})):jt.depthAttachment.set(this._sharedDepthStencil),ot.extTextureFilterAnisotropic&&!ot.extTextureFilterAnisotropicForceOff&&lt.texParameterf(lt.TEXTURE_2D,ot.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ot.extTextureFilterAnisotropicMax),{fb:jt,tex:kt,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const ot in this._style._sourceCaches)if(this._style._sourceCaches[ot].hasTransition())return!0;return this._style.order.some(ot=>{const lt=this._style._layers[ot],bt=lt.isHidden(this.painter.transform.zoom),kt=lt.getCrossfadeParameters(),jt=!!kt&&kt.t!==1,Jt=lt.hasTransition();return lt.type!=="custom"&&!bt&&(jt||Jt)})}_clearRasterFadeFromRenderCache(){let ot=!1;for(const lt in this._style._sourceCaches)if(this._style._sourceCaches[lt]._source instanceof Rn){ot=!0;break}if(ot)for(let lt=0;lt<this._style.order.length;++lt){const bt=this._style._layers[this._style.order[lt]],kt=bt.isHidden(this.painter.transform.zoom),jt=this._style._getLayerSourceCache(bt);if(bt.type!=="raster"||kt||!jt)continue;const Jt=bt.paint.get("raster-fade-duration");for(const an of this.proxyCoords){const cn=this.proxyToSource[an.key][jt.id];if(cn)for(const _n of cn){const Sn=cv(jt.getTile(_n),jt.findLoadedParent(_n,0),jt,this.painter.transform,Jt);(Sn.opacity!==1||Sn.mix!==0)&&this._clearRenderCacheForTile(jt.id,_n)}}}}_setupDrapedRenderBatches(){const ot=this._style.order,lt=ot.length;if(lt===0)return;const bt=[];let kt,jt=0,Jt=this._style._layers[ot[jt]];for(;!this._style.isLayerDraped(Jt)&&Jt.isHidden(this.painter.transform.zoom)&&++jt<lt;)Jt=this._style._layers[ot[jt]];for(;jt<lt;++jt){const an=this._style._layers[ot[jt]];an.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(an)?kt===void 0&&(kt=jt):kt!==void 0&&(bt.push({start:kt,end:jt-1}),kt=void 0))}kt!==void 0&&bt.push({start:kt,end:jt-1}),this._drapedRenderBatches=bt}_setupRenderCache(ot){const lt=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,lt.renderCache.length>lt.renderCachePool.length){const Jt=Object.values(lt.proxyCachedFBO);lt.proxyCachedFBO={};for(let an=0;an<Jt.length;++an){const cn=Object.values(Jt[an]);lt.renderCachePool.push(...cn)}}return}this._clearRasterFadeFromRenderCache();const bt=this.proxyCoords,kt=this._tilesDirty;for(let Jt=bt.length-1;Jt>=0;Jt--){const an=bt[Jt];if(lt.getTileByID(an.key),lt.proxyCachedFBO[an.key]!==void 0){const cn=ot[an.key],_n=this.proxyToSource[an.key];let Sn=0;for(const In in _n){const Bn=_n[In],Yn=cn[In];if(!Yn||Yn.length!==Bn.length||Bn.some((Gn,Xn)=>Gn!==Yn[Xn]||kt[In]&&kt[In].hasOwnProperty(Gn.key))){Sn=-1;break}++Sn}for(const In in lt.proxyCachedFBO[an.key])lt.renderCache[lt.proxyCachedFBO[an.key][In]].dirty=Sn<0||Sn!==Object.values(cn).length}}const jt=[...this._drapedRenderBatches];jt.sort((Jt,an)=>an.end-an.start-(Jt.end-Jt.start));for(const Jt of jt)for(const an of bt){if(lt.proxyCachedFBO[an.key])continue;let cn=lt.renderCachePool.pop();cn===void 0&&lt.renderCache.length<50&&(cn=lt.renderCache.length,lt.renderCache.push(this._createFBO())),cn!==void 0&&(lt.proxyCachedFBO[an.key]={},lt.proxyCachedFBO[an.key][Jt.start]=cn,lt.renderCache[cn].dirty=!0)}this._tilesDirty={}}_setupStencil(ot,lt,bt,kt){if(!kt||!this._sourceTilesOverlap[kt.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const jt=this.painter.context,Jt=jt.gl;if(lt.length<=1)return void(this._overlapStencilType=!1);let an;if(bt.isTileClipped())an=lt.length,this._overlapStencilMode.test={func:Jt.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(lt[0].overscaledZ>lt[lt.length-1].overscaledZ))return void(this._overlapStencilType=!1);an=1,this._overlapStencilMode.test={func:Jt.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+an>255&&(jt.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=an,this._overlapStencilMode.ref=this._stencilRef,bt.isTileClipped()&&this._renderTileClippingMasks(lt,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(ot){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[ot.key]),this._overlapStencilMode):j.StencilMode.disabled}_renderTileClippingMasks(ot,lt){const bt=this.painter,kt=this.painter.context,jt=kt.gl;bt._tileClippingMaskIDs={},kt.setColorMode(j.ColorMode.disabled),kt.setDepthMode(j.DepthMode.disabled);const Jt=bt.useProgram("clippingMask");for(const an of ot){const cn=bt._tileClippingMaskIDs[an.key]=--lt;Jt.draw(kt,jt.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:jt.ALWAYS,mask:0},cn,255,jt.KEEP,jt.KEEP,jt.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,lp(an.projMatrix),"$clipping",bt.tileExtentBuffer,bt.quadTriangleIndexBuffer,bt.tileExtentSegments)}}pointCoordinate(ot){const lt=this.painter.transform;if(ot.x<0||ot.x>lt.width||ot.y<0||ot.y>lt.height)return null;const bt=[ot.x,ot.y,1,1];j.transformMat4$1(bt,bt,lt.pixelMatrixInverse),j.scale$1(bt,bt,1/bt[3]),bt[0]/=lt.worldSize,bt[1]/=lt.worldSize;const kt=lt._camera.position,jt=j.mercatorZfromAltitude(1,lt.center.lat),Jt=[kt[0],kt[1],kt[2]/jt,0],an=j.subtract([],bt.slice(0,3),Jt);j.normalize(an,an);const cn=this.raycast(Jt,an,this._exaggeration);return cn!==null&&cn?(j.scaleAndAdd(Jt,Jt,an,cn),Jt[3]=Jt[2],Jt[2]*=jt,Jt):null}drawDepth(){const ot=this.painter,lt=ot.context,bt=this.proxySourceCache,kt=Math.ceil(ot.width),jt=Math.ceil(ot.height);if(!this._depthFBO||this._depthFBO.width===kt&&this._depthFBO.height===jt||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Jt=lt.gl,an=lt.createFramebuffer(kt,jt,!0);lt.activeTexture.set(Jt.TEXTURE0);const cn=new j.Texture(lt,{width:kt,height:jt,data:null},Jt.RGBA);cn.bind(Jt.NEAREST,Jt.CLAMP_TO_EDGE),an.colorAttachment.set(cn.texture);const _n=lt.createRenderbuffer(lt.gl.DEPTH_COMPONENT16,kt,jt);an.depthAttachment.set(_n),this._depthFBO=an,this._depthTexture=cn}lt.bindFramebuffer.set(this._depthFBO.framebuffer),lt.viewport.set([0,0,kt,jt]),function(Jt,an,cn,_n){if(Jt.transform.projection.name==="globe")return;const Sn=Jt.context,In=Sn.gl;Sn.clear({depth:1});const Bn=Jt.useProgram("terrainDepth"),Yn=new j.DepthMode(In.LESS,j.DepthMode.ReadWrite,Jt.depthRangeFor3D);for(const Gn of _n){const Xn=cn.getTile(Gn),Un=Ty(Gn.projMatrix,0);an.setupElevationDraw(Xn,Bn),Bn.draw(Sn,In.TRIANGLES,Yn,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.backCCW,Un,"terrain_depth",an.gridBuffer,an.gridIndexBuffer,an.gridNoSkirtSegments)}}(ot,this,bt,this.proxyCoords)}_setupProxiedCoordsForOrtho(ot,lt,bt){if(ot.getSource()instanceof lr)return this._setupProxiedCoordsForImageSource(ot,lt,bt);this._findCoveringTileCache[ot.id]=this._findCoveringTileCache[ot.id]||{};const kt=this.proxiedCoords[ot.id]=[],jt=this.proxyCoords;for(let an=0;an<jt.length;an++){const cn=jt[an],_n=this._findTileCoveringTileID(cn,ot);if(_n){const Sn=this._createProxiedId(cn,_n,bt[cn.key]&&bt[cn.key][ot.id]);kt.push(Sn),this.proxyToSource[cn.key][ot.id]=[Sn]}}let Jt=!1;for(let an=0;an<lt.length;an++){const cn=ot.getTile(lt[an]);if(!cn||!cn.hasData())continue;const _n=this._findTileCoveringTileID(cn.tileID,this.proxySourceCache);if(_n&&_n.tileID.canonical.z!==cn.tileID.canonical.z){const Sn=this.proxyToSource[_n.tileID.key][ot.id],In=this._createProxiedId(_n.tileID,cn,bt[_n.tileID.key]&&bt[_n.tileID.key][ot.id]);Sn?Sn.splice(Sn.length-1,0,In):this.proxyToSource[_n.tileID.key][ot.id]=[In],kt.push(In),Jt=!0}}this._sourceTilesOverlap[ot.id]=Jt}_setupProxiedCoordsForImageSource(ot,lt,bt){if(!ot.getSource().loaded())return;const kt=this.proxiedCoords[ot.id]=[],jt=this.proxyCoords,Jt=ot.getSource(),an=new j.pointGeometry(Jt.tileID.x,Jt.tileID.y)._div(1<<Jt.tileID.z),cn=Jt.coordinates.map(j.MercatorCoordinate.fromLngLat).reduce((Sn,In)=>(Sn.min.x=Math.min(Sn.min.x,In.x-an.x),Sn.min.y=Math.min(Sn.min.y,In.y-an.y),Sn.max.x=Math.max(Sn.max.x,In.x-an.x),Sn.max.y=Math.max(Sn.max.y,In.y-an.y),Sn),{min:new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new j.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),_n=(Sn,In)=>{const Bn=Sn.wrap+Sn.canonical.x/(1<<Sn.canonical.z),Yn=Sn.canonical.y/(1<<Sn.canonical.z),Gn=j.EXTENT/(1<<Sn.canonical.z),Xn=In.wrap+In.canonical.x/(1<<In.canonical.z),Un=In.canonical.y/(1<<In.canonical.z);return Bn+Gn<Xn+cn.min.x||Bn>Xn+cn.max.x||Yn+Gn<Un+cn.min.y||Yn>Un+cn.max.y};for(let Sn=0;Sn<jt.length;Sn++){const In=jt[Sn];for(let Bn=0;Bn<lt.length;Bn++){const Yn=ot.getTile(lt[Bn]);if(!Yn||!Yn.hasData()||_n(In,Yn.tileID))continue;const Gn=this._createProxiedId(In,Yn,bt[In.key]&&bt[In.key][ot.id]),Xn=this.proxyToSource[In.key][ot.id];Xn?Xn.push(Gn):this.proxyToSource[In.key][ot.id]=[Gn],kt.push(Gn)}}}_createProxiedId(ot,lt,bt){let kt=this.orthoMatrix;if(bt){const jt=bt.find(Jt=>Jt.key===lt.tileID.key);if(jt)return jt}if(lt.tileID.key!==ot.key){const jt=ot.canonical.z-lt.tileID.canonical.z;let Jt,an,cn;kt=j.create();const _n=lt.tileID.wrap-ot.wrap<<ot.overscaledZ;jt>0?(Jt=j.EXTENT>>jt,an=Jt*((lt.tileID.canonical.x<<jt)-ot.canonical.x+_n),cn=Jt*((lt.tileID.canonical.y<<jt)-ot.canonical.y)):(Jt=j.EXTENT<<-jt,an=j.EXTENT*(lt.tileID.canonical.x-(ot.canonical.x+_n<<-jt)),cn=j.EXTENT*(lt.tileID.canonical.y-(ot.canonical.y<<-jt))),j.ortho(kt,0,Jt,0,Jt,0,1),j.translate(kt,kt,[an,cn,0])}return new qm(lt.tileID,ot.key,kt)}_findTileCoveringTileID(ot,lt){let bt=lt.getTile(ot);if(bt&&bt.hasData())return bt;const kt=this._findCoveringTileCache[lt.id],jt=kt[ot.key];if(bt=jt?lt.getTileByID(jt):null,bt&&bt.hasData()||jt===null)return bt;let Jt=bt?bt.tileID:ot,an=Jt.overscaledZ;const cn=lt.getSource().minzoom,_n=[];if(!jt){const In=lt.getSource().maxzoom;if(ot.canonical.z>=In){const Bn=ot.canonical.z-In;lt.getSource().reparseOverscaled?(an=Math.max(ot.canonical.z+2,lt.transform.tileZoom),Jt=new j.OverscaledTileID(an,ot.wrap,In,ot.canonical.x>>Bn,ot.canonical.y>>Bn)):Bn!==0&&(an=In,Jt=new j.OverscaledTileID(an,ot.wrap,In,ot.canonical.x>>Bn,ot.canonical.y>>Bn))}Jt.key!==ot.key&&(_n.push(Jt.key),bt=lt.getTile(Jt))}const Sn=In=>{_n.forEach(Bn=>{kt[Bn]=In}),_n.length=0};for(an-=1;an>=cn&&(!bt||!bt.hasData());an--){bt&&Sn(bt.tileID.key);const In=Jt.calculateScaledKey(an);if(bt=lt.getTileByID(In),bt&&bt.hasData())break;const Bn=kt[In];if(Bn===null)break;Bn===void 0?_n.push(In):bt=lt.getTileByID(Bn)}return Sn(bt?bt.tileID.key:null),bt&&bt.hasData()?bt:null}findDEMTileFor(ot){return this.enabled?this._findTileCoveringTileID(ot,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(ot,lt){let bt=this._tilesDirty[ot];bt||(bt=this._tilesDirty[ot]={}),bt[lt.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const ot=function(lt){let bt=0;const kt=new j.StructArrayLayout2ui4,jt=131;for(let Jt=1;Jt<129;Jt++){for(let an=1;an<129;an++)bt=Jt*jt+an,kt.emplaceBack(bt,bt+1),kt.emplaceBack(bt,bt+jt),kt.emplaceBack(bt+1,bt+jt),Jt===128&&kt.emplaceBack(bt+jt,bt+jt+1);kt.emplaceBack(bt+1,bt+1+jt)}return kt}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(ot),this.wireframeSegments=j.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,ot.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class dv{static cacheKey(ot,lt,bt,kt){let jt=`${lt}${kt?kt.cacheKey:""}`;for(const Jt of bt)ot.usedDefines.includes(Jt)&&(jt+=`/${Jt}`);return jt}constructor(ot,lt,bt,kt,jt,Jt){const an=ot.gl;this.program=an.createProgram();const cn=function(Un){const Nn=[];for(let er=0;er<Un.length;er++){if(Un[er]===null)continue;const Zn=Un[er].split(" ");Nn.push(Zn.pop())}return Nn}(bt.staticAttributes),_n=kt?kt.getBinderAttributes():[],Sn=cn.concat(_n);let In=kt?kt.defines():[];In=In.concat(Jt.map(Un=>`#define ${Un}`));const Bn=In.concat(ot.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(pu):pu,pu,lv,gu.fragmentSource,i_.fragmentSource,bt.fragmentSource).join(`
`),Yn=In.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,lv,gu.vertexSource,i_.vertexSource,r_.vertexSource,bt.vertexSource).join(`
`),Gn=an.createShader(an.FRAGMENT_SHADER);if(an.isContextLost())return void(this.failedToCreate=!0);an.shaderSource(Gn,Bn),an.compileShader(Gn),an.attachShader(this.program,Gn);const Xn=an.createShader(an.VERTEX_SHADER);if(an.isContextLost())this.failedToCreate=!0;else{an.shaderSource(Xn,Yn),an.compileShader(Xn),an.attachShader(this.program,Xn),this.attributes={},this.numAttributes=Sn.length;for(let Un=0;Un<this.numAttributes;Un++)Sn[Un]&&(an.bindAttribLocation(this.program,Un,Sn[Un]),this.attributes[Sn[Un]]=Un);an.linkProgram(this.program),an.deleteShader(Xn),an.deleteShader(Gn),this.fixedUniforms=jt(ot),this.binderUniforms=kt?kt.getUniforms(ot):[],Jt.includes("TERRAIN")&&(this.terrainUniforms=(Un=>({u_dem:new j.Uniform1i(Un),u_dem_prev:new j.Uniform1i(Un),u_dem_unpack:new j.Uniform4f(Un),u_dem_tl:new j.Uniform2f(Un),u_dem_scale:new j.Uniform1f(Un),u_dem_tl_prev:new j.Uniform2f(Un),u_dem_scale_prev:new j.Uniform1f(Un),u_dem_size:new j.Uniform1f(Un),u_dem_lerp:new j.Uniform1f(Un),u_exaggeration:new j.Uniform1f(Un),u_depth:new j.Uniform1i(Un),u_depth_size_inv:new j.Uniform2f(Un),u_meter_to_dem:new j.Uniform1f(Un),u_label_plane_matrix_inv:new j.UniformMatrix4f(Un)}))(ot)),Jt.includes("GLOBE")&&(this.globeUniforms=(Un=>({u_tile_tl_up:new j.Uniform3f(Un),u_tile_tr_up:new j.Uniform3f(Un),u_tile_br_up:new j.Uniform3f(Un),u_tile_bl_up:new j.Uniform3f(Un),u_tile_up_scale:new j.Uniform1f(Un)}))(ot)),Jt.includes("FOG")&&(this.fogUniforms=(Un=>({u_fog_matrix:new j.UniformMatrix4f(Un),u_fog_range:new j.Uniform2f(Un),u_fog_color:new j.Uniform4f(Un),u_fog_horizon_blend:new j.Uniform1f(Un),u_fog_temporal_offset:new j.Uniform1f(Un),u_frustum_tl:new j.Uniform3f(Un),u_frustum_tr:new j.Uniform3f(Un),u_frustum_br:new j.Uniform3f(Un),u_frustum_bl:new j.Uniform3f(Un),u_globe_pos:new j.Uniform3f(Un),u_globe_radius:new j.Uniform1f(Un),u_globe_transition:new j.Uniform1f(Un),u_is_globe:new j.Uniform1i(Un),u_viewport:new j.Uniform2f(Un)}))(ot))}}setTerrainUniformValues(ot,lt){if(!this.terrainUniforms)return;const bt=this.terrainUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const kt in lt)bt[kt]&&bt[kt].set(this.program,kt,lt[kt])}}setGlobeUniformValues(ot,lt){if(!this.globeUniforms)return;const bt=this.globeUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const kt in lt)bt[kt]&&bt[kt].set(this.program,kt,lt[kt])}}setFogUniformValues(ot,lt){if(!this.fogUniforms)return;const bt=this.fogUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const kt in lt)bt[kt].set(this.program,kt,lt[kt])}}draw(ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn){const Un=ot.gl;if(this.failedToCreate)return;ot.program.set(this.program),ot.setDepthMode(bt),ot.setStencilMode(kt),ot.setColorMode(jt),ot.setCullFace(Jt);for(const er of Object.keys(this.fixedUniforms))this.fixedUniforms[er].set(this.program,er,an[er]);Gn&&Gn.setUniforms(this.program,ot,this.binderUniforms,Bn,{zoom:Yn});const Nn={[Un.LINES]:2,[Un.TRIANGLES]:3,[Un.LINE_STRIP]:1}[lt];for(const er of In.get()){const Zn=er.vaos||(er.vaos={});(Zn[cn]||(Zn[cn]=new im)).bind(ot,this,_n,Gn?Gn.getPaintVertexBuffers():[],Sn,er.vertexOffset,Xn||[]),Un.drawElements(lt,er.primitiveLength*Nn,Un.UNSIGNED_SHORT,er.primitiveOffset*Nn*2)}}}function o0(dt,ot,lt){const bt=1/yn(lt,1,ot.transform.tileZoom),kt=Math.pow(2,lt.tileID.overscaledZ),jt=lt.tileSize*Math.pow(2,ot.transform.tileZoom)/kt,Jt=jt*(lt.tileID.canonical.x+lt.tileID.wrap*kt),an=jt*lt.tileID.canonical.y;return{u_image:0,u_texsize:lt.imageAtlasTexture.size,u_scale:[bt,dt.fromScale,dt.toScale],u_fade:dt.t,u_pixel_coord_upper:[Jt>>16,an>>16],u_pixel_coord_lower:[65535&Jt,65535&an]}}const Ry=j.create(),Zm=(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn)=>{const In=ot.style.light,Bn=In.properties.get("position"),Yn=[Bn.x,Bn.y,Bn.z],Gn=j.create$1();In.properties.get("anchor")==="viewport"&&(j.fromRotation(Gn,-ot.transform.angle),j.transformMat3(Yn,Yn,Gn));const Xn=In.properties.get("color"),Un=ot.transform,Nn={u_matrix:dt,u_lightpos:Yn,u_lightintensity:In.properties.get("intensity"),u_lightcolor:[Xn.r,Xn.g,Xn.b],u_vertical_gradient:+lt,u_opacity:bt,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ry,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:kt,u_edge_radius:jt};return Un.projection.name==="globe"&&(Nn.u_tile_id=[Jt.canonical.x,Jt.canonical.y,1<<Jt.canonical.z],Nn.u_zoom_transition=cn,Nn.u_inv_rot_matrix=Sn,Nn.u_merc_center=_n,Nn.u_up_dir=Un.projection.upVector(new j.CanonicalTileID(0,0,0),_n[0]*j.EXTENT,_n[1]*j.EXTENT),Nn.u_height_lift=an),Nn},gv=(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn)=>{const Yn=Zm(dt,ot,lt,bt,kt,jt,Jt,_n,Sn,In,Bn),Gn={u_height_factor:-Math.pow(2,Jt.overscaledZ)/cn.tileSize/8};return j.extend(Yn,o0(an,ot,cn),Gn)},Iy=dt=>({u_matrix:dt}),mu=(dt,ot,lt,bt)=>j.extend(Iy(dt),o0(lt,ot,bt)),u_=(dt,ot)=>({u_matrix:dt,u_world:ot}),Oy=(dt,ot,lt,bt,kt)=>j.extend(mu(dt,ot,lt,bt),{u_world:kt}),Ym=j.create(),Km=(dt,ot,lt,bt,kt,jt)=>{const Jt=dt.transform,an=Jt.projection.name==="globe";let cn;if(jt.paint.get("circle-pitch-alignment")==="map")if(an){const Sn=j.globePixelsToTileUnits(Jt.zoom,ot.canonical)*Jt._pixelsPerMercatorPixel;cn=Float32Array.from([Sn,0,0,Sn])}else cn=Jt.calculatePixelsToTileUnitsMatrix(lt);else cn=new Float32Array([Jt.pixelsToGLUnits[0],0,0,Jt.pixelsToGLUnits[1]]);const _n={u_camera_to_center_distance:Jt.cameraToCenterDistance,u_matrix:dt.translatePosMatrix(ot.projMatrix,lt,jt.paint.get("circle-translate"),jt.paint.get("circle-translate-anchor")),u_device_pixel_ratio:j.exported.devicePixelRatio,u_extrude_scale:cn,u_inv_rot_matrix:Ym,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(an){_n.u_inv_rot_matrix=bt,_n.u_merc_center=kt,_n.u_tile_id=[ot.canonical.x,ot.canonical.y,1<<ot.canonical.z],_n.u_zoom_transition=j.globeToMercatorTransition(Jt.zoom);const Sn=kt[0]*j.EXTENT,In=kt[1]*j.EXTENT;_n.u_up_dir=Jt.projection.upVector(new j.CanonicalTileID(0,0,0),Sn,In)}return _n},s0=dt=>{const ot=[];return dt.paint.get("circle-pitch-alignment")==="map"&&ot.push("PITCH_WITH_MAP"),dt.paint.get("circle-pitch-scale")==="map"&&ot.push("SCALE_WITH_MAP"),ot},c_=(dt,ot,lt,bt)=>{const kt=j.EXTENT/lt.tileSize;return{u_matrix:dt,u_camera_to_center_distance:ot.getCameraToCenterDistance(bt),u_extrude_scale:[ot.pixelsToGLUnits[0]/kt,ot.pixelsToGLUnits[1]/kt]}},h_=(dt,ot,lt=1)=>({u_matrix:dt,u_color:ot,u_overlay:0,u_overlay_scale:lt}),vp=j.create(),pv=(dt,ot,lt,bt,kt,jt,Jt)=>{const an=dt.transform,cn=an.projection.name==="globe",_n=cn?j.globePixelsToTileUnits(an.zoom,ot.canonical)*an._pixelsPerMercatorPixel:yn(lt,1,jt),Sn={u_matrix:ot.projMatrix,u_extrude_scale:_n,u_intensity:Jt,u_inv_rot_matrix:vp,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(cn){Sn.u_inv_rot_matrix=bt,Sn.u_merc_center=kt,Sn.u_tile_id=[ot.canonical.x,ot.canonical.y,1<<ot.canonical.z],Sn.u_zoom_transition=j.globeToMercatorTransition(an.zoom);const In=kt[0]*j.EXTENT,Bn=kt[1]*j.EXTENT;Sn.u_up_dir=an.projection.upVector(new j.CanonicalTileID(0,0,0),In,Bn)}return Sn},Om=(dt,ot,lt,bt,kt,jt,Jt,an)=>{const cn=dt.transform,_n=cn.calculatePixelsToTileUnitsMatrix(ot),Sn={u_matrix:Xm(dt,ot,lt,kt),u_pixels_to_tile_units:_n,u_device_pixel_ratio:Jt,u_units_to_pixels:[1/cn.pixelsToGLUnits[0],1/cn.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:jt,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:an};if(_v(lt)){const In=yv(ot,dt.transform);Sn.u_texsize=ot.lineAtlasTexture.size,Sn.u_scale=[In,bt.fromScale,bt.toScale],Sn.u_mix=bt.t}return Sn},mv=(dt,ot,lt,bt,kt,jt)=>{const Jt=dt.transform,an=yv(ot,Jt);return{u_matrix:Xm(dt,ot,lt,kt),u_texsize:ot.imageAtlasTexture.size,u_pixels_to_tile_units:Jt.calculatePixelsToTileUnitsMatrix(ot),u_device_pixel_ratio:jt,u_image:0,u_scale:[an,bt.fromScale,bt.toScale],u_fade:bt.t,u_units_to_pixels:[1/Jt.pixelsToGLUnits[0],1/Jt.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function yv(dt,ot){return 1/yn(dt,1,ot.tileZoom)}function Xm(dt,ot,lt,bt){return dt.translatePosMatrix(bt||ot.tileID.projMatrix,ot,lt.paint.get("line-translate"),lt.paint.get("line-translate-anchor"))}function _v(dt){const ot=dt.paint.get("line-dasharray").value;return ot.value||ot.kind!=="constant"}const bp=(dt,ot,lt,bt,kt,jt)=>{return{u_matrix:dt,u_tl_parent:ot,u_scale_parent:lt,u_fade_t:bt.mix,u_opacity:bt.opacity*kt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:kt.paint.get("raster-brightness-min"),u_brightness_high:kt.paint.get("raster-brightness-max"),u_saturation_factor:(an=kt.paint.get("raster-saturation"),an>0?1-1/(1.001-an):-an),u_contrast_factor:(Jt=kt.paint.get("raster-contrast"),Jt>0?1/(1-Jt):1+Jt),u_spin_weights:f_(kt.paint.get("raster-hue-rotate")),u_perspective_transform:jt};var Jt,an};function f_(dt){dt*=Math.PI/180;const ot=Math.sin(dt),lt=Math.cos(dt);return[(2*lt+1)/3,(-Math.sqrt(3)*ot-lt+1)/3,(Math.sqrt(3)*ot-lt+1)/3]}const My=j.create(),a0=(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn)=>{const Un=kt.transform,Nn={u_is_size_zoom_constant:+(dt==="constant"||dt==="source"),u_is_size_feature_constant:+(dt==="constant"||dt==="camera"),u_size_t:ot?ot.uSizeT:0,u_size:ot?ot.uSize:0,u_camera_to_center_distance:Un.cameraToCenterDistance,u_rotate_symbol:+lt,u_aspect_ratio:Un.width/Un.height,u_fade_change:kt.options.fadeDuration?kt.symbolFadeChange:1,u_matrix:jt,u_label_plane_matrix:Jt,u_coord_matrix:an,u_is_text:+cn,u_pitch_with_map:+bt,u_texsize:_n,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:My,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:My,u_up_vector:[0,-1,0]};return Xn.name==="globe"&&(Nn.u_tile_id=[Sn.canonical.x,Sn.canonical.y,1<<Sn.canonical.z],Nn.u_zoom_transition=In,Nn.u_inv_rot_matrix=Yn,Nn.u_merc_center=Bn,Nn.u_camera_forward=Un._camera.forward(),Nn.u_ecef_origin=j.globeECEFOrigin(Un.globeMatrix,Sn.toUnwrapped()),Nn.u_tile_matrix=Float32Array.from(Un.globeMatrix),Nn.u_up_vector=Gn),Nn},d_=(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn,Un)=>j.extend(a0(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,In,Bn,Yn,Gn,Xn,Un),{u_gamma_scale:bt?kt.transform.cameraToCenterDistance*Math.cos(kt.terrain?0:kt.transform._pitch):1,u_device_pixel_ratio:j.exported.devicePixelRatio,u_is_halo:+Sn}),Jm=(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In,Bn,Yn,Gn,Xn)=>j.extend(d_(dt,ot,lt,bt,kt,jt,Jt,an,!0,cn,!0,Sn,In,Bn,Yn,Gn,Xn),{u_texsize_icon:_n,u_texture_icon:1}),Pu=(dt,ot,lt)=>({u_matrix:dt,u_opacity:ot,u_color:lt}),l0=(dt,ot,lt,bt,kt,jt)=>j.extend(function(Jt,an,cn,_n){const Sn=cn.imageManager.getPattern(Jt.from.toString()),In=cn.imageManager.getPattern(Jt.to.toString()),{width:Bn,height:Yn}=cn.imageManager.getPixelSize(),Gn=Math.pow(2,_n.tileID.overscaledZ),Xn=_n.tileSize*Math.pow(2,cn.transform.tileZoom)/Gn,Un=Xn*(_n.tileID.canonical.x+_n.tileID.wrap*Gn),Nn=Xn*_n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Sn.tl,u_pattern_br_a:Sn.br,u_pattern_tl_b:In.tl,u_pattern_br_b:In.br,u_texsize:[Bn,Yn],u_mix:an.t,u_pattern_size_a:Sn.displaySize,u_pattern_size_b:In.displaySize,u_scale_a:an.fromScale,u_scale_b:an.toScale,u_tile_units_to_pixels:1/yn(_n,1,cn.transform.tileZoom),u_pixel_coord_upper:[Un>>16,Nn>>16],u_pixel_coord_lower:[65535&Un,65535&Nn]}}(bt,jt,lt,kt),{u_matrix:dt,u_opacity:ot}),g_={fillExtrusion:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_lightpos:new j.Uniform3f(dt),u_lightintensity:new j.Uniform1f(dt),u_lightcolor:new j.Uniform3f(dt),u_vertical_gradient:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt),u_edge_radius:new j.Uniform1f(dt),u_ao:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_up_dir:new j.Uniform3f(dt),u_height_lift:new j.Uniform1f(dt)}),fillExtrusionPattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_lightpos:new j.Uniform3f(dt),u_lightintensity:new j.Uniform1f(dt),u_lightcolor:new j.Uniform3f(dt),u_vertical_gradient:new j.Uniform1f(dt),u_height_factor:new j.Uniform1f(dt),u_edge_radius:new j.Uniform1f(dt),u_ao:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_up_dir:new j.Uniform3f(dt),u_height_lift:new j.Uniform1f(dt),u_image:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt)}),fill:dt=>({u_matrix:new j.UniformMatrix4f(dt)}),fillPattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt)}),fillOutline:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_world:new j.Uniform2f(dt)}),fillOutlinePattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_world:new j.Uniform2f(dt),u_image:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt)}),circle:dt=>({u_camera_to_center_distance:new j.Uniform1f(dt),u_extrude_scale:new j.UniformMatrix2f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_up_dir:new j.Uniform3f(dt)}),collisionBox:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_extrude_scale:new j.Uniform2f(dt)}),collisionCircle:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_inv_matrix:new j.UniformMatrix4f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_viewport_size:new j.Uniform2f(dt)}),debug:dt=>({u_color:new j.UniformColor(dt),u_matrix:new j.UniformMatrix4f(dt),u_overlay:new j.Uniform1i(dt),u_overlay_scale:new j.Uniform1f(dt)}),clippingMask:dt=>({u_matrix:new j.UniformMatrix4f(dt)}),heatmap:dt=>({u_extrude_scale:new j.Uniform1f(dt),u_intensity:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_up_dir:new j.Uniform3f(dt)}),heatmapTexture:dt=>({u_image:new j.Uniform1i(dt),u_color_ramp:new j.Uniform1i(dt),u_opacity:new j.Uniform1f(dt)}),hillshade:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image:new j.Uniform1i(dt),u_latrange:new j.Uniform2f(dt),u_light:new j.Uniform2f(dt),u_shadow:new j.UniformColor(dt),u_highlight:new j.UniformColor(dt),u_accent:new j.UniformColor(dt)}),hillshadePrepare:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_image:new j.Uniform1i(dt),u_dimension:new j.Uniform2f(dt),u_zoom:new j.Uniform1f(dt),u_unpack:new j.Uniform4f(dt)}),line:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_pixels_to_tile_units:new j.UniformMatrix2f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_units_to_pixels:new j.Uniform2f(dt),u_dash_image:new j.Uniform1i(dt),u_gradient_image:new j.Uniform1i(dt),u_image_height:new j.Uniform1f(dt),u_texsize:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_mix:new j.Uniform1f(dt),u_alpha_discard_threshold:new j.Uniform1f(dt),u_trim_offset:new j.Uniform2f(dt)}),linePattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_texsize:new j.Uniform2f(dt),u_pixels_to_tile_units:new j.UniformMatrix2f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_image:new j.Uniform1i(dt),u_units_to_pixels:new j.Uniform2f(dt),u_scale:new j.Uniform3f(dt),u_fade:new j.Uniform1f(dt),u_alpha_discard_threshold:new j.Uniform1f(dt)}),raster:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_tl_parent:new j.Uniform2f(dt),u_scale_parent:new j.Uniform1f(dt),u_fade_t:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt),u_image0:new j.Uniform1i(dt),u_image1:new j.Uniform1i(dt),u_brightness_low:new j.Uniform1f(dt),u_brightness_high:new j.Uniform1f(dt),u_saturation_factor:new j.Uniform1f(dt),u_contrast_factor:new j.Uniform1f(dt),u_spin_weights:new j.Uniform3f(dt),u_perspective_transform:new j.Uniform2f(dt)}),symbolIcon:dt=>({u_is_size_zoom_constant:new j.Uniform1i(dt),u_is_size_feature_constant:new j.Uniform1i(dt),u_size_t:new j.Uniform1f(dt),u_size:new j.Uniform1f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_rotate_symbol:new j.Uniform1i(dt),u_aspect_ratio:new j.Uniform1f(dt),u_fade_change:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_label_plane_matrix:new j.UniformMatrix4f(dt),u_coord_matrix:new j.UniformMatrix4f(dt),u_is_text:new j.Uniform1i(dt),u_pitch_with_map:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_camera_forward:new j.Uniform3f(dt),u_tile_matrix:new j.UniformMatrix4f(dt),u_up_vector:new j.Uniform3f(dt),u_ecef_origin:new j.Uniform3f(dt),u_texture:new j.Uniform1i(dt)}),symbolSDF:dt=>({u_is_size_zoom_constant:new j.Uniform1i(dt),u_is_size_feature_constant:new j.Uniform1i(dt),u_size_t:new j.Uniform1f(dt),u_size:new j.Uniform1f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_rotate_symbol:new j.Uniform1i(dt),u_aspect_ratio:new j.Uniform1f(dt),u_fade_change:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_label_plane_matrix:new j.UniformMatrix4f(dt),u_coord_matrix:new j.UniformMatrix4f(dt),u_is_text:new j.Uniform1i(dt),u_pitch_with_map:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_texture:new j.Uniform1i(dt),u_gamma_scale:new j.Uniform1f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_tile_id:new j.Uniform3f(dt),u_zoom_transition:new j.Uniform1f(dt),u_inv_rot_matrix:new j.UniformMatrix4f(dt),u_merc_center:new j.Uniform2f(dt),u_camera_forward:new j.Uniform3f(dt),u_tile_matrix:new j.UniformMatrix4f(dt),u_up_vector:new j.Uniform3f(dt),u_ecef_origin:new j.Uniform3f(dt),u_is_halo:new j.Uniform1i(dt)}),symbolTextAndIcon:dt=>({u_is_size_zoom_constant:new j.Uniform1i(dt),u_is_size_feature_constant:new j.Uniform1i(dt),u_size_t:new j.Uniform1f(dt),u_size:new j.Uniform1f(dt),u_camera_to_center_distance:new j.Uniform1f(dt),u_rotate_symbol:new j.Uniform1i(dt),u_aspect_ratio:new j.Uniform1f(dt),u_fade_change:new j.Uniform1f(dt),u_matrix:new j.UniformMatrix4f(dt),u_label_plane_matrix:new j.UniformMatrix4f(dt),u_coord_matrix:new j.UniformMatrix4f(dt),u_is_text:new j.Uniform1i(dt),u_pitch_with_map:new j.Uniform1i(dt),u_texsize:new j.Uniform2f(dt),u_texsize_icon:new j.Uniform2f(dt),u_texture:new j.Uniform1i(dt),u_texture_icon:new j.Uniform1i(dt),u_gamma_scale:new j.Uniform1f(dt),u_device_pixel_ratio:new j.Uniform1f(dt),u_is_halo:new j.Uniform1i(dt)}),background:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_opacity:new j.Uniform1f(dt),u_color:new j.UniformColor(dt)}),backgroundPattern:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_opacity:new j.Uniform1f(dt),u_image:new j.Uniform1i(dt),u_pattern_tl_a:new j.Uniform2f(dt),u_pattern_br_a:new j.Uniform2f(dt),u_pattern_tl_b:new j.Uniform2f(dt),u_pattern_br_b:new j.Uniform2f(dt),u_texsize:new j.Uniform2f(dt),u_mix:new j.Uniform1f(dt),u_pattern_size_a:new j.Uniform2f(dt),u_pattern_size_b:new j.Uniform2f(dt),u_scale_a:new j.Uniform1f(dt),u_scale_b:new j.Uniform1f(dt),u_pixel_coord_upper:new j.Uniform2f(dt),u_pixel_coord_lower:new j.Uniform2f(dt),u_tile_units_to_pixels:new j.Uniform1f(dt)}),terrainRaster:s_,terrainDepth:s_,skybox:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_sun_direction:new j.Uniform3f(dt),u_cubemap:new j.Uniform1i(dt),u_opacity:new j.Uniform1f(dt),u_temporal_offset:new j.Uniform1f(dt)}),skyboxGradient:dt=>({u_matrix:new j.UniformMatrix4f(dt),u_color_ramp:new j.Uniform1i(dt),u_center_direction:new j.Uniform3f(dt),u_radius:new j.Uniform1f(dt),u_opacity:new j.Uniform1f(dt),u_temporal_offset:new j.Uniform1f(dt)}),skyboxCapture:dt=>({u_matrix_3f:new j.UniformMatrix3f(dt),u_sun_direction:new j.Uniform3f(dt),u_sun_intensity:new j.Uniform1f(dt),u_color_tint_r:new j.Uniform4f(dt),u_color_tint_m:new j.Uniform4f(dt),u_luminance:new j.Uniform1f(dt)}),globeRaster:dt=>({u_proj_matrix:new j.UniformMatrix4f(dt),u_globe_matrix:new j.UniformMatrix4f(dt),u_normalize_matrix:new j.UniformMatrix4f(dt),u_merc_matrix:new j.UniformMatrix4f(dt),u_zoom_transition:new j.Uniform1f(dt),u_merc_center:new j.Uniform2f(dt),u_image0:new j.Uniform1i(dt),u_grid_matrix:new j.UniformMatrix3f(dt),u_frustum_tl:new j.Uniform3f(dt),u_frustum_tr:new j.Uniform3f(dt),u_frustum_br:new j.Uniform3f(dt),u_frustum_bl:new j.Uniform3f(dt),u_globe_pos:new j.Uniform3f(dt),u_globe_radius:new j.Uniform1f(dt),u_viewport:new j.Uniform2f(dt)}),globeAtmosphere:dt=>({u_frustum_tl:new j.Uniform3f(dt),u_frustum_tr:new j.Uniform3f(dt),u_frustum_br:new j.Uniform3f(dt),u_frustum_bl:new j.Uniform3f(dt),u_horizon:new j.Uniform1f(dt),u_transition:new j.Uniform1f(dt),u_fadeout_range:new j.Uniform1f(dt),u_color:new j.Uniform4f(dt),u_high_color:new j.Uniform4f(dt),u_space_color:new j.Uniform4f(dt),u_star_intensity:new j.Uniform1f(dt),u_star_density:new j.Uniform1f(dt),u_star_size:new j.Uniform1f(dt),u_temporal_offset:new j.Uniform1f(dt),u_horizon_angle:new j.Uniform1f(dt),u_rotation_matrix:new j.UniformMatrix4f(dt)})};let p_;function vv(dt,ot,lt,bt,kt,jt,Jt){const an=dt.context,cn=an.gl,_n=dt.transform,Sn=dt.useProgram("collisionBox"),In=[];let Bn=0,Yn=0;for(let fr=0;fr<bt.length;fr++){const pr=bt[fr],tr=ot.getTile(pr),vr=tr.getBucket(lt);if(!vr)continue;const Er=jp(pr,vr,_n);let Lr=Er;kt[0]===0&&kt[1]===0||(Lr=dt.translatePosMatrix(Er,tr,kt,jt));const kr=Jt?vr.textCollisionBox:vr.iconCollisionBox,io=vr.collisionCircleArray;if(io.length>0){const Ar=j.create(),$r=Lr;j.mul(Ar,vr.placementInvProjMatrix,_n.glCoordMatrix),j.mul(Ar,Ar,vr.placementViewportMatrix),In.push({circleArray:io,circleOffset:Yn,transform:$r,invTransform:Ar,projection:vr.getProjection()}),Bn+=io.length/4,Yn=Bn}kr&&(dt.terrain&&dt.terrain.setupElevationDraw(tr,Sn),Sn.draw(an,cn.LINES,j.DepthMode.disabled,j.StencilMode.disabled,dt.colorModeForRenderPass(),j.CullFaceMode.disabled,c_(Lr,_n,tr,vr.getProjection()),lt.id,kr.layoutVertexBuffer,kr.indexBuffer,kr.segments,null,_n.zoom,null,[kr.collisionVertexBuffer,kr.collisionVertexBufferExt]))}if(!Jt||!In.length)return;const Gn=dt.useProgram("collisionCircle"),Xn=new j.StructArrayLayout2f1f2i16;Xn.resize(4*Bn),Xn._trim();let Un=0;for(const fr of In)for(let pr=0;pr<fr.circleArray.length/4;pr++){const tr=4*pr,vr=fr.circleArray[tr+0],Er=fr.circleArray[tr+1],Lr=fr.circleArray[tr+2],kr=fr.circleArray[tr+3];Xn.emplace(Un++,vr,Er,Lr,kr,0),Xn.emplace(Un++,vr,Er,Lr,kr,1),Xn.emplace(Un++,vr,Er,Lr,kr,2),Xn.emplace(Un++,vr,Er,Lr,kr,3)}(!p_||p_.length<2*Bn)&&(p_=function(fr){const pr=2*fr,tr=new j.StructArrayLayout3ui6;tr.resize(pr),tr._trim();for(let vr=0;vr<pr;vr++){const Er=6*vr;tr.uint16[Er+0]=4*vr+0,tr.uint16[Er+1]=4*vr+1,tr.uint16[Er+2]=4*vr+2,tr.uint16[Er+3]=4*vr+2,tr.uint16[Er+4]=4*vr+3,tr.uint16[Er+5]=4*vr+0}return tr}(Bn));const Nn=an.createIndexBuffer(p_,!0),er=an.createVertexBuffer(Xn,j.collisionCircleLayout.members,!0);for(const fr of In){const pr={u_matrix:fr.transform,u_inv_matrix:fr.invTransform,u_camera_to_center_distance:(Zn=_n).getCameraToCenterDistance(fr.projection),u_viewport_size:[Zn.width,Zn.height]};Gn.draw(an,cn.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,dt.colorModeForRenderPass(),j.CullFaceMode.disabled,pr,lt.id,er,Nn,j.SegmentVector.simpleSegment(0,2*fr.circleOffset,fr.circleArray.length,fr.circleArray.length/2),null,_n.zoom)}var Zn;er.destroy(),Nn.destroy()}const bv=j.create();function Qm(dt,ot,lt,bt,kt,jt){const{horizontalAlign:Jt,verticalAlign:an}=j.getAnchorAlignment(dt),cn=-(Jt-.5)*ot,_n=-(an-.5)*lt,Sn=j.evaluateVariableOffset(dt,bt);return new j.pointGeometry((cn/kt+Sn[0])*jt,(_n/kt+Sn[1])*jt)}function ey(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn){const In=dt.text.placedSymbolArray,Bn=dt.text.dynamicLayoutVertexArray,Yn=dt.icon.dynamicLayoutVertexArray,Gn={},Xn=Js(an,dt.getProjection(),jt),Un=jt.elevation,Nn=dt.getProjection().upVectorScale(an.canonical,jt.center.lat,jt.worldSize);Bn.clear();for(let er=0;er<In.length;er++){const Zn=In.get(er),fr=dt.allowVerticalPlacement&&!Zn.placedOrientation,pr=Zn.hidden||!Zn.crossTileID||fr?null:bt[Zn.crossTileID];if(pr){const tr=new j.pointGeometry(Zn.tileAnchorX,Zn.tileAnchorY),vr=dt.getProjection().upVector(an.canonical,tr.x,tr.y),Er=Un?Un.getAtTileOffset(an,tr.x,tr.y):0,Lr=ns([Zn.projectedAnchorX+Er*vr[0]*Nn.metersToTile,Zn.projectedAnchorY+Er*vr[1]*Nn.metersToTile,Zn.projectedAnchorZ+Er*vr[2]*Nn.metersToTile],lt?Xn:Jt),kr=is(jt.getCameraToCenterDistance(dt.getProjection()),Lr.signedDistanceFromCamera);let io=kt.evaluateSizeForFeature(dt.textSizeData,_n,Zn)*kr/j.ONE_EM;lt&&(io*=dt.tilePixelRatio/cn);const{width:Ar,height:$r,anchor:qr,textOffset:Or,textScale:Sr}=pr,mo=Qm(qr,Ar,$r,Or,Sr,io);let lo;if(lt){const uo=tr.add(mo),{x:Po,y:zo,z:Uo}=dt.getProjection().projectTilePoint(uo.x,uo.y,an.canonical);lo=ns([Po+Er*vr[0]*Nn.metersToTile,zo+Er*vr[1]*Nn.metersToTile,Uo+Er*vr[2]*Nn.metersToTile],Jt).point}else{const uo=ot?mo.rotate(-jt.angle):mo;lo=[Lr.point[0]+uo.x,Lr.point[1]+uo.y,0]}const ho=dt.allowVerticalPlacement&&Zn.placedOrientation===j.WritingMode.vertical?Math.PI/2:0;for(let uo=0;uo<Zn.numGlyphs;uo++)j.addDynamicAttributes(Bn,lo[0],lo[1],lo[2],ho);Sn&&Zn.associatedIconIndex>=0&&(Gn[Zn.associatedIconIndex]={shiftedAnchor:lo,angle:ho})}else js(Zn.numGlyphs,Bn)}if(Sn){Yn.clear();const er=dt.icon.placedSymbolArray;for(let Zn=0;Zn<er.length;Zn++){const fr=er.get(Zn);if(fr.hidden)js(fr.numGlyphs,Yn);else{const pr=Gn[Zn];if(pr)for(let tr=0;tr<fr.numGlyphs;tr++)j.addDynamicAttributes(Yn,pr.shiftedAnchor[0],pr.shiftedAnchor[1],pr.shiftedAnchor[2],pr.angle);else js(fr.numGlyphs,Yn)}}dt.icon.dynamicLayoutVertexBuffer.updateData(Yn)}dt.text.dynamicLayoutVertexBuffer.updateData(Bn)}function Rr(dt,ot,lt){return lt.iconsInText&&ot?"symbolTextAndIcon":dt?"symbolSDF":"symbolIcon"}function Xr(dt,ot,lt,bt,kt,jt,Jt,an,cn,_n,Sn,In){const Bn=dt.context,Yn=Bn.gl,Gn=dt.transform,Xn=an==="map",Un=cn==="map",Nn=Xn&&lt.layout.get("symbol-placement")!=="point",er=Xn&&!Un&&!Nn,Zn=lt.layout.get("symbol-sort-key").constantOr(1)!==void 0;let fr=!1;const pr=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),tr=[j.mercatorXfromLng(Gn.center.lng),j.mercatorYfromLat(Gn.center.lat)],vr=lt.layout.get("text-variable-anchor"),Er=Gn.projection.name==="globe",Lr=[],kr=[0,-1,0];let io=kr;!Er&&!Gn.mercatorFromTransition||Xn||(io=function(Ar){const $r=Ar._camera.getWorldToCamera(Ar.worldSize,1),qr=j.multiply([],$r,Ar.globeMatrix);j.invert(qr,qr);const Or=[0,0,0],Sr=[0,1,0,0];return j.transformMat4$1(Sr,Sr,qr),Or[0]=Sr[0],Or[1]=Sr[1],Or[2]=Sr[2],j.normalize(Or,Or),Or}(Gn));for(const Ar of bt){const $r=ot.getTile(Ar),qr=$r.getBucket(lt);if(!qr||qr.projection.name==="mercator"&&Er)continue;const Or=kt?qr.text:qr.icon;if(!Or||qr.fullyClipped||!Or.segments.get().length)continue;const Sr=Or.programConfigurations.get(lt.id),mo=kt||qr.sdfIcons,lo=kt?qr.textSizeData:qr.iconSizeData,ho=Un||Gn.pitch!==0,uo=j.evaluateSizeForZoom(lo,Gn.zoom);let Po,zo,Uo,Bo,co=[0,0],Yo=null;if(kt){if(zo=$r.glyphAtlasTexture,Uo=Yn.LINEAR,Po=$r.glyphAtlasTexture.size,qr.iconsInText){co=$r.imageAtlasTexture.size,Yo=$r.imageAtlasTexture;const qo=lo.kind==="composite"||lo.kind==="camera";Bo=ho||dt.options.rotating||dt.options.zooming||qo?Yn.LINEAR:Yn.NEAREST}}else{const qo=lt.layout.get("icon-size").constantOr(0)!==1||qr.iconsNeedLinear;zo=$r.imageAtlasTexture,Uo=mo||dt.options.rotating||dt.options.zooming||qo||ho?Yn.LINEAR:Yn.NEAREST,Po=$r.imageAtlasTexture.size}const ls=qr.projection.name==="globe",Ls=ls?io:kr,Ns=ls?j.globeToMercatorTransition(Gn.zoom):0,Os=Js(Ar,qr.getProjection(),Gn),Ll=Gn.calculatePixelsToTileUnitsMatrix($r),iu=_l(Os,$r.tileID.canonical,Un,Xn,Gn,qr.getProjection(),Ll),hp=dt.terrain&&Un&&Nn?j.invert(j.create(),iu):bv,Us=tp(Os,$r.tileID.canonical,Un,Xn,Gn,qr.getProjection(),Ll),xa=vr&&qr.hasTextData(),Ms=lt.layout.get("icon-text-fit")!=="none"&&xa&&qr.hasIconData();if(Nn){const qo=Gn.elevation,Rp=qo?qo.getAtTileOffsetFunc(Ar,Gn.center.lat,Gn.worldSize,qr.getProjection()):_u=>[0,0,0],dm=nm(Os,$r.tileID.canonical,Un,Xn,Gn,qr.getProjection(),Ll);np(qr,Os,dt,kt,dm,Us,Un,_n,Rp,Ar)}const Tl=Nn||kt&&vr||Ms,ou=dt.translatePosMatrix(Os,$r,jt,Jt),Gs=Tl?bv:iu,Ru=dt.translatePosMatrix(Us,$r,jt,Jt,!0),qp=qr.getProjection().createInversionMatrix(Gn,Ar.canonical),Zu=[];dt.terrainRenderModeElevated()&&Un&&Zu.push("PITCH_WITH_MAP_TERRAIN"),ls&&Zu.push("PROJECTION_GLOBE_VIEW"),Tl&&Zu.push("PROJECTED_POS_ON_VIEWPORT");const Xl=mo&&lt.paint.get(kt?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let uy;uy=mo?qr.iconsInText?Jm(lo.kind,uo,er,Un,dt,ou,Gs,Ru,Po,co,Ar,Ns,tr,qp,Ls,qr.getProjection()):d_(lo.kind,uo,er,Un,dt,ou,Gs,Ru,kt,Po,!0,Ar,Ns,tr,qp,Ls,qr.getProjection()):a0(lo.kind,uo,er,Un,dt,ou,Gs,Ru,kt,Po,Ar,Ns,tr,qp,Ls,qr.getProjection());const Cp={program:dt.useProgram(Rr(mo,kt,qr),Sr,Zu),buffers:Or,uniformValues:uy,atlasTexture:zo,atlasTextureIcon:Yo,atlasInterpolation:Uo,atlasInterpolationIcon:Bo,isSDF:mo,hasHalo:Xl,tile:$r,labelPlaneMatrixInv:hp};if(Zn&&qr.canOverlap){fr=!0;const qo=Or.segments.get();for(const Rp of qo)Lr.push({segments:new j.SegmentVector([Rp]),sortKey:Rp.sortKey,state:Cp})}else Lr.push({segments:Or.segments,sortKey:0,state:Cp})}fr&&Lr.sort((Ar,$r)=>Ar.sortKey-$r.sortKey);for(const Ar of Lr){const $r=Ar.state;if(dt.terrain&&dt.terrain.setupElevationDraw($r.tile,$r.program,{useDepthForOcclusion:!Er,labelPlaneMatrixInv:$r.labelPlaneMatrixInv}),Bn.activeTexture.set(Yn.TEXTURE0),$r.atlasTexture.bind($r.atlasInterpolation,Yn.CLAMP_TO_EDGE),$r.atlasTextureIcon&&(Bn.activeTexture.set(Yn.TEXTURE1),$r.atlasTextureIcon&&$r.atlasTextureIcon.bind($r.atlasInterpolationIcon,Yn.CLAMP_TO_EDGE)),$r.isSDF){const qr=$r.uniformValues;$r.hasHalo&&(qr.u_is_halo=1,zr($r.buffers,Ar.segments,lt,dt,$r.program,pr,Sn,In,qr)),qr.u_is_halo=0}zr($r.buffers,Ar.segments,lt,dt,$r.program,pr,Sn,In,$r.uniformValues)}}function zr(dt,ot,lt,bt,kt,jt,Jt,an,cn){const _n=bt.context,Sn=[dt.dynamicLayoutVertexBuffer,dt.opacityVertexBuffer,dt.globeExtVertexBuffer];kt.draw(_n,_n.gl.TRIANGLES,jt,Jt,an,j.CullFaceMode.disabled,cn,lt.id,dt.layoutVertexBuffer,dt.indexBuffer,ot,lt.paint,bt.transform.zoom,dt.programConfigurations.get(lt.id),Sn)}function jo(dt,ot,lt,bt,kt,jt,Jt){const an=dt.context.gl,cn=lt.paint.get("fill-pattern"),_n=cn&&cn.constantOr(1),Sn=lt.getCrossfadeParameters();let In,Bn,Yn,Gn,Xn;Jt?(Bn=_n&&!lt.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",In=an.LINES):(Bn=_n?"fillPattern":"fill",In=an.TRIANGLES);for(const Un of bt){const Nn=ot.getTile(Un);if(_n&&!Nn.patternsLoaded())continue;const er=Nn.getBucket(lt);if(!er)continue;dt.prepareDrawTile();const Zn=er.programConfigurations.get(lt.id),fr=dt.useProgram(Bn,Zn);_n&&(dt.context.activeTexture.set(an.TEXTURE0),Nn.imageAtlasTexture.bind(an.LINEAR,an.CLAMP_TO_EDGE),Zn.updatePaintBuffers(Sn));const pr=cn.constantOr(null);if(pr&&Nn.imageAtlas){const vr=Nn.imageAtlas,Er=vr.patternPositions[pr.to.toString()],Lr=vr.patternPositions[pr.from.toString()];Er&&Lr&&Zn.setConstantPatternPositions(Er,Lr)}const tr=dt.translatePosMatrix(Un.projMatrix,Nn,lt.paint.get("fill-translate"),lt.paint.get("fill-translate-anchor"));if(Jt){Gn=er.indexBuffer2,Xn=er.segments2;const vr=dt.terrain&&dt.terrain.renderingToTexture?dt.terrain.drapeBufferSize:[an.drawingBufferWidth,an.drawingBufferHeight];Yn=Bn==="fillOutlinePattern"&&_n?Oy(tr,dt,Sn,Nn,vr):u_(tr,vr)}else Gn=er.indexBuffer,Xn=er.segments,Yn=_n?mu(tr,dt,Sn,Nn):Iy(tr);dt.prepareDrawProgram(dt.context,fr,Un.toUnwrapped()),fr.draw(dt.context,In,kt,dt.stencilModeForClipping(Un),jt,j.CullFaceMode.disabled,Yn,lt.id,er.layoutVertexBuffer,Gn,Xn,lt.paint,dt.transform.zoom,Zn)}}function hs(dt,ot,lt,bt,kt,jt,Jt){const an=dt.context,cn=an.gl,_n=dt.transform,Sn=lt.paint.get("fill-extrusion-pattern"),In=Sn.constantOr(1),Bn=lt.getCrossfadeParameters(),Yn=lt.paint.get("fill-extrusion-opacity"),Gn=[lt.paint.get("fill-extrusion-ambient-occlusion-intensity"),lt.paint.get("fill-extrusion-ambient-occlusion-radius")],Xn=lt.layout.get("fill-extrusion-edge-radius"),Un=_n.projection.name==="globe"?j.fillExtrusionHeightLift():0,Nn=_n.projection.name==="globe",er=Nn?j.globeToMercatorTransition(_n.zoom):0,Zn=[j.mercatorXfromLng(_n.center.lng),j.mercatorYfromLat(_n.center.lat)],fr=[];Nn&&(fr.push("PROJECTION_GLOBE_VIEW"),dt.style.terrainSetForDrapingOnly()&&fr.push("TERRAIN")),Gn[0]>0&&fr.push("FAUX_AO");for(const pr of bt){const tr=ot.getTile(pr),vr=tr.getBucket(lt);if(!vr||vr.projection.name!==_n.projection.name)continue;const Er=vr.programConfigurations.get(lt.id),Lr=dt.useProgram(In?"fillExtrusionPattern":"fillExtrusion",Er,fr);if(dt.terrain){const Sr=dt.terrain;if(dt.style.terrainSetForDrapingOnly())Sr.setupElevationDraw(tr,Lr,{useMeterToDem:!0});else{if(!vr.enableTerrain)continue;if(Sr.setupElevationDraw(tr,Lr,{useMeterToDem:!0}),Ds(an,ot,pr,vr,lt,Sr),!vr.centroidVertexBuffer){const mo=Lr.attributes.a_centroid_pos;mo!==void 0&&cn.vertexAttrib2f(mo,0,0)}}}In&&(dt.context.activeTexture.set(cn.TEXTURE0),tr.imageAtlasTexture.bind(cn.LINEAR,cn.CLAMP_TO_EDGE),Er.updatePaintBuffers(Bn));const kr=Sn.constantOr(null);if(kr&&tr.imageAtlas){const Sr=tr.imageAtlas,mo=Sr.patternPositions[kr.to.toString()],lo=Sr.patternPositions[kr.from.toString()];mo&&lo&&Er.setConstantPatternPositions(mo,lo)}const io=dt.translatePosMatrix(pr.projMatrix,tr,lt.paint.get("fill-extrusion-translate"),lt.paint.get("fill-extrusion-translate-anchor")),Ar=_n.projection.createInversionMatrix(_n,pr.canonical),$r=lt.paint.get("fill-extrusion-vertical-gradient"),qr=In?gv(io,dt,$r,Yn,Gn,Xn,pr,Bn,tr,Un,er,Zn,Ar):Zm(io,dt,$r,Yn,Gn,Xn,pr,Un,er,Zn,Ar);dt.prepareDrawProgram(an,Lr,pr.toUnwrapped());const Or=[];dt.terrain&&Or.push(vr.centroidVertexBuffer),Nn&&Or.push(vr.layoutVertexExtBuffer),Lr.draw(an,an.gl.TRIANGLES,kt,jt,Jt,j.CullFaceMode.backCCW,qr,lt.id,vr.layoutVertexBuffer,vr.indexBuffer,vr.segments,lt.paint,dt.transform.zoom,Er,Or)}}function Ds(dt,ot,lt,bt,kt,jt){const Jt=[Nn=>{let er=Nn.canonical.x-1,Zn=Nn.wrap;return er<0&&(er=(1<<Nn.canonical.z)-1,Zn--),new j.OverscaledTileID(Nn.overscaledZ,Zn,Nn.canonical.z,er,Nn.canonical.y)},Nn=>{let er=Nn.canonical.x+1,Zn=Nn.wrap;return er===1<<Nn.canonical.z&&(er=0,Zn++),new j.OverscaledTileID(Nn.overscaledZ,Zn,Nn.canonical.z,er,Nn.canonical.y)},Nn=>new j.OverscaledTileID(Nn.overscaledZ,Nn.wrap,Nn.canonical.z,Nn.canonical.x,(Nn.canonical.y===0?1<<Nn.canonical.z:Nn.canonical.y)-1),Nn=>new j.OverscaledTileID(Nn.overscaledZ,Nn.wrap,Nn.canonical.z,Nn.canonical.x,Nn.canonical.y===(1<<Nn.canonical.z)-1?0:Nn.canonical.y+1)],an=Nn=>{const er=ot.getSource().minzoom,Zn=pr=>{const tr=ot.getTileByID(pr);if(tr&&tr.hasData())return tr.getBucket(kt)},fr=[0,-1,1];for(const pr of fr){if(Nn.overscaledZ+pr<er)continue;const tr=Zn(Nn.calculateScaledKey(Nn.overscaledZ+pr));if(tr)return tr}},cn=[0,0,0],_n=(Nn,er)=>(cn[0]=Math.min(Nn.min.y,er.min.y),cn[1]=Math.max(Nn.max.y,er.max.y),cn[2]=j.EXTENT-er.min.x>Nn.max.x?er.min.x-j.EXTENT:Nn.max.x,cn),Sn=(Nn,er)=>(cn[0]=Math.min(Nn.min.x,er.min.x),cn[1]=Math.max(Nn.max.x,er.max.x),cn[2]=j.EXTENT-er.min.y>Nn.max.y?er.min.y-j.EXTENT:Nn.max.y,cn),In=[(Nn,er)=>_n(Nn,er),(Nn,er)=>_n(er,Nn),(Nn,er)=>Sn(Nn,er),(Nn,er)=>Sn(er,Nn)],Bn=new j.pointGeometry(0,0);let Yn,Gn,Xn;const Un=(Nn,er,Zn,fr,pr)=>{const tr=[[fr?Zn:Nn,fr?Nn:Zn,0],[fr?Zn:er,fr?er:Zn,0]],vr=pr<0?j.EXTENT+pr:pr,Er=[fr?vr:(Nn+er)/2,fr?(Nn+er)/2:vr,0];return Zn===0&&pr<0||Zn!==0&&pr>0?jt.getForTilePoints(Xn,[Er],!0,Gn):tr.push(Er),jt.getForTilePoints(lt,tr,!0,Yn),Math.max(tr[0][2],tr[1][2],Er[2])/jt.exaggeration()};for(let Nn=0;Nn<4;Nn++){const er=(Nn<2?1:5)-Nn,Zn=bt.borders[Nn];if(Zn.length===0)continue;const fr=Xn=Jt[Nn](lt),pr=an(fr);if(!(pr&&pr instanceof j.FillExtrusionBucket&&pr.enableTerrain)||bt.borderDoneWithNeighborZ[Nn]===pr.canonical.z&&pr.borderDoneWithNeighborZ[er]===bt.canonical.z||(Gn=jt.findDEMTileFor(fr),!Gn||!Gn.dem))continue;if(!Yn){const Lr=jt.findDEMTileFor(lt);if(!Lr||!Lr.dem)return;Yn=Lr}const tr=pr.borders[er];let vr=0;const Er=pr.borderDoneWithNeighborZ[er]!==bt.canonical.z;if(bt.canonical.z===pr.canonical.z){for(let Lr=0;Lr<Zn.length;Lr++){const kr=bt.featuresOnBorder[Zn[Lr]],io=kr.borders[Nn];let Ar;for(;vr<tr.length&&(Ar=pr.featuresOnBorder[tr[vr]],!(Ar.borders[er][1]>io[0]+3));)Er&&pr.encodeCentroid(void 0,Ar,!1),vr++;if(Ar&&vr<tr.length){const $r=vr;let qr=0;for(;!(Ar.borders[er][0]>io[1]-3)&&(qr++,++vr!==tr.length);)Ar=pr.featuresOnBorder[tr[vr]];if(Ar=pr.featuresOnBorder[tr[$r]],kr.intersectsCount()>1||Ar.intersectsCount()>1||qr!==1){qr!==1&&(vr=$r),bt.encodeCentroid(void 0,kr,!1),Er&&pr.encodeCentroid(void 0,Ar,!1);continue}const Or=In[Nn](kr,Ar),Sr=Nn%2?j.EXTENT-1:0;Bn.x=Un(Or[0],Math.min(j.EXTENT-1,Or[1]),Sr,Nn<2,Or[2]),Bn.y=0,bt.encodeCentroid(Bn,kr,!1),Er&&pr.encodeCentroid(Bn,Ar,!1)}else bt.encodeCentroid(void 0,kr,!1)}bt.borderDoneWithNeighborZ[Nn]=pr.canonical.z,bt.needsCentroidUpdate=!0,Er&&(pr.borderDoneWithNeighborZ[er]=bt.canonical.z,pr.needsCentroidUpdate=!0)}else{for(const Lr of Zn)bt.encodeCentroid(void 0,bt.featuresOnBorder[Lr],!1);if(Er){for(const Lr of tr)pr.encodeCentroid(void 0,pr.featuresOnBorder[Lr],!1);pr.borderDoneWithNeighborZ[er]=bt.canonical.z,pr.needsCentroidUpdate=!0}bt.borderDoneWithNeighborZ[Nn]=pr.canonical.z,bt.needsCentroidUpdate=!0}}(bt.needsCentroidUpdate||!bt.centroidVertexBuffer&&bt.centroidVertexArray.length!==0)&&bt.uploadCentroid(dt)}const Cl=new j.Color(1,0,0,1),Xs=new j.Color(0,1,0,1),m_=new j.Color(0,0,1,1),u0=new j.Color(1,0,1,1),Tu=new j.Color(0,1,1,1);function wp(dt,ot,lt){const bt=dt.context,kt=dt.transform,jt=bt.gl,Jt=kt.projection.name==="globe",an=Jt?["PROJECTION_GLOBE_VIEW"]:null;let cn=lt.projMatrix;if(Jt&&j.globeToMercatorTransition(kt.zoom)>0){const kr=j.transitionTileAABBinECEF(lt.canonical,kt),io=j.globeDenormalizeECEF(kr);cn=j.multiply(new Float32Array(16),kt.globeMatrix,io),j.multiply(cn,kt.projMatrix,cn)}const _n=dt.useProgram("debug",null,an),Sn=ot.getTileByID(lt.key);dt.terrain&&dt.terrain.setupElevationDraw(Sn,_n);const In=j.DepthMode.disabled,Bn=j.StencilMode.disabled,Yn=dt.colorModeForRenderPass(),Gn="$debug";bt.activeTexture.set(jt.TEXTURE0),dt.emptyTexture.bind(jt.LINEAR,jt.CLAMP_TO_EDGE),Jt?Sn._makeGlobeTileDebugBuffers(dt.context,kt):Sn._makeDebugTileBoundsBuffers(dt.context,kt.projection);const Xn=Sn._tileDebugBuffer||dt.debugBuffer,Un=Sn._tileDebugIndexBuffer||dt.debugIndexBuffer,Nn=Sn._tileDebugSegments||dt.debugSegments;_n.draw(bt,jt.LINE_STRIP,In,Bn,Yn,j.CullFaceMode.disabled,h_(cn,j.Color.red),Gn,Xn,Un,Nn,null,null,null,[Sn._globeTileDebugBorderBuffer]);const er=Sn.latestRawTileData,Zn=Math.floor((er&&er.byteLength||0)/1024),fr=ot.getTile(lt).tileSize,pr=512/Math.min(fr,512)*(lt.overscaledZ/kt.zoom)*.5;let tr=lt.canonical.toString();lt.overscaledZ!==lt.canonical.z&&(tr+=` => ${lt.overscaledZ}`),tr+=` ${Zn}kb`,function(kr,io){kr.initDebugOverlayCanvas();const Ar=kr.debugOverlayCanvas,$r=kr.context.gl,qr=kr.debugOverlayCanvas.getContext("2d");qr.clearRect(0,0,Ar.width,Ar.height),qr.shadowColor="white",qr.shadowBlur=2,qr.lineWidth=1.5,qr.strokeStyle="white",qr.textBaseline="top",qr.font="bold 36px Open Sans, sans-serif",qr.fillText(io,5,5),qr.strokeText(io,5,5),kr.debugOverlayTexture.update(Ar),kr.debugOverlayTexture.bind($r.LINEAR,$r.CLAMP_TO_EDGE)}(dt,tr);const vr=Sn._tileDebugTextBuffer||dt.debugBuffer,Er=Sn._tileDebugTextIndexBuffer||dt.quadTriangleIndexBuffer,Lr=Sn._tileDebugTextSegments||dt.debugSegments;_n.draw(bt,jt.TRIANGLES,In,Bn,j.ColorMode.alphaBlended,j.CullFaceMode.disabled,h_(cn,j.Color.transparent,pr),Gn,vr,Er,Lr,null,null,null,[Sn._globeTileDebugTextBuffer])}function ty(dt,ot,lt,bt){Hu(dt,0,ot+lt/2,dt.transform.width,lt,bt)}function sm(dt,ot,lt,bt){Hu(dt,ot-lt/2,0,lt,dt.transform.height,bt)}function Hu(dt,ot,lt,bt,kt,jt){const Jt=dt.context,an=Jt.gl;an.enable(an.SCISSOR_TEST),an.scissor(ot*j.exported.devicePixelRatio,lt*j.exported.devicePixelRatio,bt*j.exported.devicePixelRatio,kt*j.exported.devicePixelRatio),Jt.clear({color:jt}),an.disable(an.SCISSOR_TEST)}const Np=j.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ws}=Np;function Sp(dt,ot,lt,bt){dt.emplaceBack(ot,lt,bt)}class Cs{constructor(ot){this.vertexArray=new j.StructArrayLayout3f12,this.indices=new j.StructArrayLayout3ui6,Sp(this.vertexArray,-1,-1,1),Sp(this.vertexArray,1,-1,1),Sp(this.vertexArray,-1,1,1),Sp(this.vertexArray,1,1,1),Sp(this.vertexArray,-1,-1,-1),Sp(this.vertexArray,1,-1,-1),Sp(this.vertexArray,-1,1,-1),Sp(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=ot.createVertexBuffer(this.vertexArray,Ws),this.indexBuffer=ot.createIndexBuffer(this.indices),this.segment=j.SegmentVector.simpleSegment(0,0,36,12)}}function $u(dt,ot,lt,bt,kt,jt){const Jt=dt.gl,an=ot.paint.get("sky-atmosphere-color"),cn=ot.paint.get("sky-atmosphere-halo-color"),_n=ot.paint.get("sky-atmosphere-sun-intensity"),Sn=((In,Bn,Yn,Gn,Xn)=>({u_matrix_3f:In,u_sun_direction:Bn,u_sun_intensity:Yn,u_color_tint_r:[Gn.r,Gn.g,Gn.b,Gn.a],u_color_tint_m:[Xn.r,Xn.g,Xn.b,Xn.a],u_luminance:5e-5}))(j.fromMat4(j.create$1(),bt),kt,_n,an,cn);Jt.framebufferTexture2D(Jt.FRAMEBUFFER,Jt.COLOR_ATTACHMENT0,Jt.TEXTURE_CUBE_MAP_POSITIVE_X+jt,ot.skyboxTexture,0),lt.draw(dt,Jt.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.frontCW,Sn,"skyboxCapture",ot.skyboxGeometry.vertexBuffer,ot.skyboxGeometry.indexBuffer,ot.skyboxGeometry.segment)}const E1=j.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class c0{constructor(ot){const lt=new j.StructArrayLayout5f20;lt.emplaceBack(-1,1,1,0,0),lt.emplaceBack(1,1,1,1,0),lt.emplaceBack(1,-1,1,1,1),lt.emplaceBack(-1,-1,1,0,1);const bt=new j.StructArrayLayout3ui6;bt.emplaceBack(0,1,2),bt.emplaceBack(2,3,0),this.vertexBuffer=ot.createVertexBuffer(lt,E1.members),this.indexBuffer=ot.createIndexBuffer(bt),this.segments=j.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ny={symbol:function(dt,ot,lt,bt,kt){if(dt.renderPass!=="translucent")return;const jt=j.StencilMode.disabled,Jt=dt.colorModeForRenderPass();lt.layout.get("text-variable-anchor")&&function(an,cn,_n,Sn,In,Bn,Yn){const Gn=cn.transform,Xn=In==="map",Un=Bn==="map";for(const Nn of an){const er=Sn.getTile(Nn),Zn=er.getBucket(_n);if(!Zn||!Zn.text||!Zn.text.segments.get().length)continue;const fr=j.evaluateSizeForZoom(Zn.textSizeData,Gn.zoom),pr=Js(Nn,Zn.getProjection(),Gn),tr=Gn.calculatePixelsToTileUnitsMatrix(er),vr=_l(pr,er.tileID.canonical,Un,Xn,Gn,Zn.getProjection(),tr),Er=_n.layout.get("icon-text-fit")!=="none"&&Zn.hasIconData();if(fr){const Lr=Math.pow(2,Gn.zoom-er.tileID.overscaledZ);ey(Zn,Xn,Un,Yn,j.symbolSize,Gn,vr,Nn,Lr,fr,Er)}}}(bt,dt,lt,ot,lt.layout.get("text-rotation-alignment"),lt.layout.get("text-pitch-alignment"),kt),lt.paint.get("icon-opacity").constantOr(1)!==0&&Xr(dt,ot,lt,bt,!1,lt.paint.get("icon-translate"),lt.paint.get("icon-translate-anchor"),lt.layout.get("icon-rotation-alignment"),lt.layout.get("icon-pitch-alignment"),lt.layout.get("icon-keep-upright"),jt,Jt),lt.paint.get("text-opacity").constantOr(1)!==0&&Xr(dt,ot,lt,bt,!0,lt.paint.get("text-translate"),lt.paint.get("text-translate-anchor"),lt.layout.get("text-rotation-alignment"),lt.layout.get("text-pitch-alignment"),lt.layout.get("text-keep-upright"),jt,Jt),ot.map.showCollisionBoxes&&(vv(dt,ot,lt,bt,lt.paint.get("text-translate"),lt.paint.get("text-translate-anchor"),!0),vv(dt,ot,lt,bt,lt.paint.get("icon-translate"),lt.paint.get("icon-translate-anchor"),!1))},circle:function(dt,ot,lt,bt){if(dt.renderPass!=="translucent")return;const kt=lt.paint.get("circle-opacity"),jt=lt.paint.get("circle-stroke-width"),Jt=lt.paint.get("circle-stroke-opacity"),an=lt.layout.get("circle-sort-key").constantOr(1)!==void 0;if(kt.constantOr(1)===0&&(jt.constantOr(1)===0||Jt.constantOr(1)===0))return;const cn=dt.context,_n=cn.gl,Sn=dt.transform,In=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),Bn=j.StencilMode.disabled,Yn=dt.colorModeForRenderPass(),Gn=Sn.projection.name==="globe",Xn=[j.mercatorXfromLng(Sn.center.lng),j.mercatorYfromLat(Sn.center.lat)],Un=[];for(let er=0;er<bt.length;er++){const Zn=bt[er],fr=ot.getTile(Zn),pr=fr.getBucket(lt);if(!pr||pr.projection.name!==Sn.projection.name)continue;const tr=pr.programConfigurations.get(lt.id),vr=s0(lt);Gn&&vr.push("PROJECTION_GLOBE_VIEW");const Er=dt.useProgram("circle",tr,vr),Lr=pr.layoutVertexBuffer,kr=pr.globeExtVertexBuffer,io=pr.indexBuffer,Ar=Sn.projection.createInversionMatrix(Sn,Zn.canonical),$r={programConfiguration:tr,program:Er,layoutVertexBuffer:Lr,globeExtVertexBuffer:kr,indexBuffer:io,uniformValues:Km(dt,Zn,fr,Ar,Xn,lt),tile:fr};if(an){const qr=pr.segments.get();for(const Or of qr)Un.push({segments:new j.SegmentVector([Or]),sortKey:Or.sortKey,state:$r})}else Un.push({segments:pr.segments,sortKey:0,state:$r})}an&&Un.sort((er,Zn)=>er.sortKey-Zn.sortKey);const Nn={useDepthForOcclusion:!Gn};for(const er of Un){const{programConfiguration:Zn,program:fr,layoutVertexBuffer:pr,globeExtVertexBuffer:tr,indexBuffer:vr,uniformValues:Er,tile:Lr}=er.state,kr=er.segments;dt.terrain&&dt.terrain.setupElevationDraw(Lr,fr,Nn),dt.prepareDrawProgram(cn,fr,Lr.tileID.toUnwrapped()),fr.draw(cn,_n.TRIANGLES,In,Bn,Yn,j.CullFaceMode.disabled,Er,lt.id,pr,vr,kr,lt.paint,Sn.zoom,Zn,[tr])}},heatmap:function(dt,ot,lt,bt){if(lt.paint.get("heatmap-opacity")!==0)if(dt.renderPass==="offscreen"){const kt=dt.context,jt=kt.gl,Jt=j.StencilMode.disabled,an=new j.ColorMode([jt.ONE,jt.ONE],j.Color.transparent,[!0,!0,!0,!0]);(function(Yn,Gn,Xn,Un){const Nn=Yn.gl,er=Gn.width*Un,Zn=Gn.height*Un;Yn.activeTexture.set(Nn.TEXTURE1),Yn.viewport.set([0,0,er,Zn]);let fr=Xn.heatmapFbo;if(!fr||fr&&(fr.width!==er||fr.height!==Zn)){fr&&fr.destroy();const pr=Nn.createTexture();Nn.bindTexture(Nn.TEXTURE_2D,pr),Nn.texParameteri(Nn.TEXTURE_2D,Nn.TEXTURE_WRAP_S,Nn.CLAMP_TO_EDGE),Nn.texParameteri(Nn.TEXTURE_2D,Nn.TEXTURE_WRAP_T,Nn.CLAMP_TO_EDGE),Nn.texParameteri(Nn.TEXTURE_2D,Nn.TEXTURE_MIN_FILTER,Nn.LINEAR),Nn.texParameteri(Nn.TEXTURE_2D,Nn.TEXTURE_MAG_FILTER,Nn.LINEAR),fr=Xn.heatmapFbo=Yn.createFramebuffer(er,Zn,!1),function(tr,vr,Er,Lr,kr,io){const Ar=tr.gl;Ar.texImage2D(Ar.TEXTURE_2D,0,Ar.RGBA,kr,io,0,Ar.RGBA,tr.extRenderToTextureHalfFloat?tr.extTextureHalfFloat.HALF_FLOAT_OES:Ar.UNSIGNED_BYTE,null),Lr.colorAttachment.set(Er)}(Yn,0,pr,fr,er,Zn)}else Nn.bindTexture(Nn.TEXTURE_2D,fr.colorAttachment.get()),Yn.bindFramebuffer.set(fr.framebuffer)})(kt,dt,lt,dt.transform.projection.name==="globe"?.5:.25),kt.clear({color:j.Color.transparent});const cn=dt.transform,_n=cn.projection.name==="globe",Sn=_n?["PROJECTION_GLOBE_VIEW"]:null,In=_n?j.CullFaceMode.frontCCW:j.CullFaceMode.disabled,Bn=[j.mercatorXfromLng(cn.center.lng),j.mercatorYfromLat(cn.center.lat)];for(let Yn=0;Yn<bt.length;Yn++){const Gn=bt[Yn];if(ot.hasRenderableParent(Gn))continue;const Xn=ot.getTile(Gn),Un=Xn.getBucket(lt);if(!Un||Un.projection.name!==cn.projection.name)continue;const Nn=Un.programConfigurations.get(lt.id),er=dt.useProgram("heatmap",Nn,Sn),{zoom:Zn}=dt.transform;dt.terrain&&dt.terrain.setupElevationDraw(Xn,er),dt.prepareDrawProgram(kt,er,Gn.toUnwrapped());const fr=cn.projection.createInversionMatrix(cn,Gn.canonical);er.draw(kt,jt.TRIANGLES,j.DepthMode.disabled,Jt,an,In,pv(dt,Gn,Xn,fr,Bn,Zn,lt.paint.get("heatmap-intensity")),lt.id,Un.layoutVertexBuffer,Un.indexBuffer,Un.segments,lt.paint,dt.transform.zoom,Nn,_n?[Un.globeExtVertexBuffer]:null)}kt.viewport.set([0,0,dt.width,dt.height])}else dt.renderPass==="translucent"&&(dt.context.setColorMode(dt.colorModeForRenderPass()),function(kt,jt){const Jt=kt.context,an=Jt.gl,cn=jt.heatmapFbo;if(!cn)return;Jt.activeTexture.set(an.TEXTURE0),an.bindTexture(an.TEXTURE_2D,cn.colorAttachment.get()),Jt.activeTexture.set(an.TEXTURE1);let _n=jt.colorRampTexture;_n||(_n=jt.colorRampTexture=new j.Texture(Jt,jt.colorRamp,an.RGBA)),_n.bind(an.LINEAR,an.CLAMP_TO_EDGE),kt.useProgram("heatmapTexture").draw(Jt,an.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,kt.colorModeForRenderPass(),j.CullFaceMode.disabled,((Sn,In,Bn,Yn)=>({u_image:0,u_color_ramp:1,u_opacity:In.paint.get("heatmap-opacity")}))(0,jt),jt.id,kt.viewportBuffer,kt.quadTriangleIndexBuffer,kt.viewportSegments,jt.paint,kt.transform.zoom)}(dt,lt))},line:function(dt,ot,lt,bt){if(dt.renderPass!=="translucent")return;const kt=lt.paint.get("line-opacity"),jt=lt.paint.get("line-width");if(kt.constantOr(1)===0||jt.constantOr(1)===0)return;const Jt=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),an=dt.colorModeForRenderPass(),cn=dt.terrain&&dt.terrain.renderingToTexture?1:j.exported.devicePixelRatio,_n=lt.paint.get("line-dasharray"),Sn=_n.constantOr(1),In=lt.layout.get("line-cap"),Bn=lt.paint.get("line-pattern"),Yn=Bn.constantOr(1),Gn=lt.paint.get("line-gradient"),Xn=lt.getCrossfadeParameters(),Un=Yn?"linePattern":"line",Nn=dt.context,er=Nn.gl,Zn=(pr=>{const tr=[];_v(pr)&&tr.push("RENDER_LINE_DASH"),pr.paint.get("line-gradient")&&tr.push("RENDER_LINE_GRADIENT");const vr=pr.paint.get("line-trim-offset");vr[0]===0&&vr[1]===0||tr.push("RENDER_LINE_TRIM_OFFSET");const Er=pr.paint.get("line-pattern").constantOr(1),Lr=pr.paint.get("line-opacity").constantOr(1)!==1;return!Er&&Lr&&tr.push("RENDER_LINE_ALPHA_DISCARD"),tr})(lt);let fr=Zn.includes("RENDER_LINE_ALPHA_DISCARD");dt.terrain&&dt.terrain.clipOrMaskOverlapStencilType()&&(fr=!1);for(const pr of bt){const tr=ot.getTile(pr);if(Yn&&!tr.patternsLoaded())continue;const vr=tr.getBucket(lt);if(!vr)continue;dt.prepareDrawTile();const Er=vr.programConfigurations.get(lt.id),Lr=dt.useProgram(Un,Er,Zn),kr=Bn.constantOr(null);if(kr&&tr.imageAtlas){const lo=tr.imageAtlas,ho=lo.patternPositions[kr.to.toString()],uo=lo.patternPositions[kr.from.toString()];ho&&uo&&Er.setConstantPatternPositions(ho,uo)}const io=_n.constantOr(null),Ar=In.constantOr(null);if(!Yn&&io&&Ar&&tr.lineAtlas){const lo=tr.lineAtlas,ho=lo.getDash(io.to,Ar),uo=lo.getDash(io.from,Ar);ho&&uo&&Er.setConstantPatternPositions(ho,uo)}let[$r,qr]=lt.paint.get("line-trim-offset");(Ar==="round"||Ar==="square")&&$r!==qr&&($r===0&&($r-=1),qr===1&&(qr+=1));const Or=dt.terrain?pr.projMatrix:null,Sr=Yn?mv(dt,tr,lt,Xn,Or,cn):Om(dt,tr,lt,Xn,Or,vr.lineClipsArray.length,cn,[$r,qr]);if(Gn){const lo=vr.gradients[lt.id];let ho=lo.texture;if(lt.gradientVersion!==lo.version){let uo=256;if(lt.stepInterpolant){const Po=ot.getSource().maxzoom,zo=pr.canonical.z===Po?Math.ceil(1<<dt.transform.maxZoom-pr.canonical.z):1;uo=j.clamp(j.nextPowerOfTwo(vr.maxLineLength/j.EXTENT*1024*zo),256,Nn.maxTextureSize)}lo.gradient=j.renderColorRamp({expression:lt.gradientExpression(),evaluationKey:"lineProgress",resolution:uo,image:lo.gradient||void 0,clips:vr.lineClipsArray}),lo.texture?lo.texture.update(lo.gradient):lo.texture=new j.Texture(Nn,lo.gradient,er.RGBA),lo.version=lt.gradientVersion,ho=lo.texture}Nn.activeTexture.set(er.TEXTURE1),ho.bind(lt.stepInterpolant?er.NEAREST:er.LINEAR,er.CLAMP_TO_EDGE)}Sn&&(Nn.activeTexture.set(er.TEXTURE0),tr.lineAtlasTexture.bind(er.LINEAR,er.REPEAT),Er.updatePaintBuffers(Xn)),Yn&&(Nn.activeTexture.set(er.TEXTURE0),tr.imageAtlasTexture.bind(er.LINEAR,er.CLAMP_TO_EDGE),Er.updatePaintBuffers(Xn)),dt.prepareDrawProgram(Nn,Lr,pr.toUnwrapped());const mo=lo=>{Lr.draw(Nn,er.TRIANGLES,Jt,lo,an,j.CullFaceMode.disabled,Sr,lt.id,vr.layoutVertexBuffer,vr.indexBuffer,vr.segments,lt.paint,dt.transform.zoom,Er,[vr.layoutVertexBuffer2])};if(fr){const lo=dt.stencilModeForClipping(pr).ref;lo===0&&dt.terrain&&Nn.clear({stencil:0});const ho={func:er.EQUAL,mask:255};Sr.u_alpha_discard_threshold=.8,mo(new j.StencilMode(ho,lo,255,er.KEEP,er.KEEP,er.INVERT)),Sr.u_alpha_discard_threshold=0,mo(new j.StencilMode(ho,lo,255,er.KEEP,er.KEEP,er.KEEP))}else mo(dt.stencilModeForClipping(pr))}fr&&(dt.resetStencilClippingMasks(),dt.terrain&&Nn.clear({stencil:0}))},fill:function(dt,ot,lt,bt){const kt=lt.paint.get("fill-color"),jt=lt.paint.get("fill-opacity");if(jt.constantOr(1)===0)return;const Jt=dt.colorModeForRenderPass(),an=lt.paint.get("fill-pattern"),cn=dt.opaquePassEnabledForLayer()&&!an.constantOr(1)&&kt.constantOr(j.Color.transparent).a===1&&jt.constantOr(0)===1?"opaque":"translucent";if(dt.renderPass===cn){const _n=dt.depthModeForSublayer(1,dt.renderPass==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly);jo(dt,ot,lt,bt,_n,Jt,!1)}if(dt.renderPass==="translucent"&&lt.paint.get("fill-antialias")){const _n=dt.depthModeForSublayer(lt.getPaintProperty("fill-outline-color")?2:0,j.DepthMode.ReadOnly);jo(dt,ot,lt,bt,_n,Jt,!0)}},"fill-extrusion":function(dt,ot,lt,bt){const kt=lt.paint.get("fill-extrusion-opacity");if(kt!==0&&dt.renderPass==="translucent"){const jt=new j.DepthMode(dt.context.gl.LEQUAL,j.DepthMode.ReadWrite,dt.depthRangeFor3D);if(kt!==1||lt.paint.get("fill-extrusion-pattern").constantOr(1))hs(dt,ot,lt,bt,jt,j.StencilMode.disabled,j.ColorMode.disabled),hs(dt,ot,lt,bt,jt,dt.stencilModeFor3D(),dt.colorModeForRenderPass()),dt.resetStencilClippingMasks();else{const Jt=dt.colorModeForRenderPass();hs(dt,ot,lt,bt,jt,j.StencilMode.disabled,Jt)}}},hillshade:function(dt,ot,lt,bt){if(dt.renderPass!=="offscreen"&&dt.renderPass!=="translucent")return;const kt=dt.context,jt=dt.depthModeForSublayer(0,j.DepthMode.ReadOnly),Jt=dt.colorModeForRenderPass(),an=dt.terrain&&dt.terrain.renderingToTexture,[cn,_n]=dt.renderPass!=="translucent"||an?[{},bt]:dt.stencilConfigForOverlap(bt);for(const Sn of _n){const In=ot.getTile(Sn);if(In.needsHillshadePrepare&&dt.renderPass==="offscreen")o_(dt,In,lt,jt,j.StencilMode.disabled,Jt);else if(dt.renderPass==="translucent"){const Bn=an&&dt.terrain?dt.terrain.stencilModeForRTTOverlap(Sn):cn[Sn.overscaledZ];Qs(dt,Sn,In,lt,jt,Bn,Jt)}}kt.viewport.set([0,0,dt.width,dt.height]),dt.resetStencilClippingMasks()},raster:function(dt,ot,lt,bt,kt,jt){if(dt.renderPass!=="translucent"||lt.paint.get("raster-opacity")===0||!bt.length)return;const Jt=dt.context,an=Jt.gl,cn=ot.getSource(),_n=dt.useProgram("raster"),Sn=dt.colorModeForRenderPass(),In=dt.terrain&&dt.terrain.renderingToTexture,[Bn,Yn]=cn instanceof lr||In?[{},bt]:dt.stencilConfigForOverlap(bt),Gn=Yn[Yn.length-1].overscaledZ,Xn=!dt.options.moving;for(const Un of Yn){const Nn=In?j.DepthMode.disabled:dt.depthModeForSublayer(Un.overscaledZ-Gn,lt.paint.get("raster-opacity")===1?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly,an.LESS),er=Un.toUnwrapped(),Zn=ot.getTile(Un);if(In&&(!Zn||!Zn.hasData()))continue;const fr=In?Un.projMatrix:dt.transform.calculateProjMatrix(er,Xn),pr=dt.terrain&&In?dt.terrain.stencilModeForRTTOverlap(Un):Bn[Un.overscaledZ],tr=jt?0:lt.paint.get("raster-fade-duration");Zn.registerFadeDuration(tr);const vr=ot.findLoadedParent(Un,0),Er=cv(Zn,vr,ot,dt.transform,tr);let Lr,kr;dt.terrain&&dt.terrain.prepareDrawTile();const io=lt.paint.get("raster-resampling")==="nearest"?an.NEAREST:an.LINEAR;Jt.activeTexture.set(an.TEXTURE0),Zn.texture.bind(io,an.CLAMP_TO_EDGE),Jt.activeTexture.set(an.TEXTURE1),vr?(vr.texture.bind(io,an.CLAMP_TO_EDGE),Lr=Math.pow(2,vr.tileID.overscaledZ-Zn.tileID.overscaledZ),kr=[Zn.tileID.canonical.x*Lr%1,Zn.tileID.canonical.y*Lr%1]):Zn.texture.bind(io,an.CLAMP_TO_EDGE);const Ar=bp(fr,kr||[0,0],Lr||1,Er,lt,cn instanceof lr?cn.perspectiveTransform:[0,0]);if(dt.prepareDrawProgram(Jt,_n,er),cn instanceof lr)cn.boundsBuffer&&cn.boundsSegments&&_n.draw(Jt,an.TRIANGLES,Nn,j.StencilMode.disabled,Sn,j.CullFaceMode.disabled,Ar,lt.id,cn.boundsBuffer,dt.quadTriangleIndexBuffer,cn.boundsSegments);else{const{tileBoundsBuffer:$r,tileBoundsIndexBuffer:qr,tileBoundsSegments:Or}=dt.getTileBoundsBuffers(Zn);_n.draw(Jt,an.TRIANGLES,Nn,pr,Sn,j.CullFaceMode.disabled,Ar,lt.id,$r,qr,Or)}}dt.resetStencilClippingMasks()},background:function(dt,ot,lt,bt){const kt=lt.paint.get("background-color"),jt=lt.paint.get("background-opacity");if(jt===0)return;const Jt=dt.context,an=Jt.gl,cn=dt.transform,_n=cn.tileSize,Sn=lt.paint.get("background-pattern");if(dt.isPatternMissing(Sn))return;const In=!Sn&&kt.a===1&&jt===1&&dt.opaquePassEnabledForLayer()?"opaque":"translucent";if(dt.renderPass!==In)return;const Bn=j.StencilMode.disabled,Yn=dt.depthModeForSublayer(0,In==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly),Gn=dt.colorModeForRenderPass(),Xn=dt.useProgram(Sn?"backgroundPattern":"background");let Un,Nn=bt;Nn||(Un=dt.getBackgroundTiles(),Nn=Object.values(Un).map(Zn=>Zn.tileID)),Sn&&(Jt.activeTexture.set(an.TEXTURE0),dt.imageManager.bind(dt.context));const er=lt.getCrossfadeParameters();for(const Zn of Nn){const fr=Zn.toUnwrapped(),pr=bt?Zn.projMatrix:dt.transform.calculateProjMatrix(fr);dt.prepareDrawTile();const tr=ot?ot.getTile(Zn):Un?Un[Zn.key]:new j.Tile(Zn,_n,cn.zoom,dt),vr=Sn?l0(pr,jt,dt,Sn,{tileID:Zn,tileSize:_n},er):Pu(pr,jt,kt);dt.prepareDrawProgram(Jt,Xn,fr);const{tileBoundsBuffer:Er,tileBoundsIndexBuffer:Lr,tileBoundsSegments:kr}=dt.getTileBoundsBuffers(tr);Xn.draw(Jt,an.TRIANGLES,Yn,Bn,Gn,j.CullFaceMode.disabled,vr,lt.id,Er,Lr,kr)}},sky:function(dt,ot,lt){const bt=dt.transform,kt=bt.projection.name==="mercator"||bt.projection.name==="globe"?1:j.smoothstep(7,8,bt.zoom),jt=lt.paint.get("sky-opacity")*kt;if(jt===0)return;const Jt=dt.context,an=lt.paint.get("sky-type"),cn=new j.DepthMode(Jt.gl.LEQUAL,j.DepthMode.ReadOnly,[0,1]),_n=dt.frameCounter/1e3%1;an==="atmosphere"?dt.renderPass==="offscreen"?lt.needsSkyboxCapture(dt)&&(function(Sn,In,Bn,Yn){const Gn=Sn.context,Xn=Gn.gl;let Un=In.skyboxFbo;if(!Un){Un=In.skyboxFbo=Gn.createFramebuffer(32,32,!1),In.skyboxGeometry=new Cs(Gn),In.skyboxTexture=Gn.gl.createTexture(),Xn.bindTexture(Xn.TEXTURE_CUBE_MAP,In.skyboxTexture),Xn.texParameteri(Xn.TEXTURE_CUBE_MAP,Xn.TEXTURE_WRAP_S,Xn.CLAMP_TO_EDGE),Xn.texParameteri(Xn.TEXTURE_CUBE_MAP,Xn.TEXTURE_WRAP_T,Xn.CLAMP_TO_EDGE),Xn.texParameteri(Xn.TEXTURE_CUBE_MAP,Xn.TEXTURE_MIN_FILTER,Xn.LINEAR),Xn.texParameteri(Xn.TEXTURE_CUBE_MAP,Xn.TEXTURE_MAG_FILTER,Xn.LINEAR);for(let fr=0;fr<6;++fr)Xn.texImage2D(Xn.TEXTURE_CUBE_MAP_POSITIVE_X+fr,0,Xn.RGBA,32,32,0,Xn.RGBA,Xn.UNSIGNED_BYTE,null)}Gn.bindFramebuffer.set(Un.framebuffer),Gn.viewport.set([0,0,32,32]);const Nn=In.getCenter(Sn,!0),er=Sn.useProgram("skyboxCapture"),Zn=new Float64Array(16);j.identity(Zn),j.rotateY(Zn,Zn,.5*-Math.PI),$u(Gn,In,er,Zn,Nn,0),j.identity(Zn),j.rotateY(Zn,Zn,.5*Math.PI),$u(Gn,In,er,Zn,Nn,1),j.identity(Zn),j.rotateX(Zn,Zn,.5*-Math.PI),$u(Gn,In,er,Zn,Nn,2),j.identity(Zn),j.rotateX(Zn,Zn,.5*Math.PI),$u(Gn,In,er,Zn,Nn,3),j.identity(Zn),$u(Gn,In,er,Zn,Nn,4),j.identity(Zn),j.rotateY(Zn,Zn,Math.PI),$u(Gn,In,er,Zn,Nn,5),Gn.viewport.set([0,0,Sn.width,Sn.height])}(dt,lt),lt.markSkyboxValid(dt)):dt.renderPass==="sky"&&function(Sn,In,Bn,Yn,Gn){const Xn=Sn.context,Un=Xn.gl,Nn=Sn.transform,er=Sn.useProgram("skybox");Xn.activeTexture.set(Un.TEXTURE0),Un.bindTexture(Un.TEXTURE_CUBE_MAP,In.skyboxTexture);const Zn=((fr,pr,tr,vr,Er)=>({u_matrix:fr,u_sun_direction:pr,u_cubemap:0,u_opacity:vr,u_temporal_offset:Er}))(Nn.skyboxMatrix,In.getCenter(Sn,!1),0,Yn,Gn);Sn.prepareDrawProgram(Xn,er),er.draw(Xn,Un.TRIANGLES,Bn,j.StencilMode.disabled,Sn.colorModeForRenderPass(),j.CullFaceMode.backCW,Zn,"skybox",In.skyboxGeometry.vertexBuffer,In.skyboxGeometry.indexBuffer,In.skyboxGeometry.segment)}(dt,lt,cn,jt,_n):an==="gradient"&&dt.renderPass==="sky"&&function(Sn,In,Bn,Yn,Gn){const Xn=Sn.context,Un=Xn.gl,Nn=Sn.transform,er=Sn.useProgram("skyboxGradient");In.skyboxGeometry||(In.skyboxGeometry=new Cs(Xn)),Xn.activeTexture.set(Un.TEXTURE0);let Zn=In.colorRampTexture;Zn||(Zn=In.colorRampTexture=new j.Texture(Xn,In.colorRamp,Un.RGBA)),Zn.bind(Un.LINEAR,Un.CLAMP_TO_EDGE);const fr=((pr,tr,vr,Er,Lr)=>({u_matrix:pr,u_color_ramp:0,u_center_direction:tr,u_radius:j.degToRad(vr),u_opacity:Er,u_temporal_offset:Lr}))(Nn.skyboxMatrix,In.getCenter(Sn,!1),In.paint.get("sky-gradient-radius"),Yn,Gn);Sn.prepareDrawProgram(Xn,er),er.draw(Xn,Un.TRIANGLES,Bn,j.StencilMode.disabled,Sn.colorModeForRenderPass(),j.CullFaceMode.backCW,fr,"skyboxGradient",In.skyboxGeometry.vertexBuffer,In.skyboxGeometry.indexBuffer,In.skyboxGeometry.segment)}(dt,lt,cn,jt,_n)},debug:function(dt,ot,lt){for(let bt=0;bt<lt.length;bt++)wp(dt,ot,lt[bt])},custom:function(dt,ot,lt){const bt=dt.context,kt=lt.implementation;if(dt.transform.projection.unsupportedLayers&&dt.transform.projection.unsupportedLayers.includes("custom"))j.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(dt.renderPass==="offscreen"){const jt=kt.prerender;jt&&(dt.setCustomLayerDefaults(),bt.setColorMode(dt.colorModeForRenderPass()),jt.call(kt,bt.gl,dt.transform.customLayerMatrix()),bt.setDirty(),dt.setBaseState())}else if(dt.renderPass==="translucent"){dt.setCustomLayerDefaults(),bt.setColorMode(dt.colorModeForRenderPass()),bt.setStencilMode(j.StencilMode.disabled);const jt=kt.renderingMode==="3d"?new j.DepthMode(dt.context.gl.LEQUAL,j.DepthMode.ReadWrite,dt.depthRangeFor3D):dt.depthModeForSublayer(0,j.DepthMode.ReadOnly);bt.setDepthMode(jt),kt.render(bt.gl,dt.transform.customLayerMatrix()),bt.setDirty(),dt.setBaseState(),bt.bindFramebuffer.set(null)}}};class y_{constructor(ot,lt){this.context=new En(ot),this.transform=lt,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=j.SourceCache.maxUnderzooming+j.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rm,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(ot,lt){const bt=!!ot&&!!ot.terrain&&this.transform.projection.supportsTerrain;if(!(bt||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new l_(this,ot));const kt=this._terrain;this.transform.elevation=bt?kt:null,kt.update(ot,this.transform,lt)}_updateFog(ot){const lt=ot.fog;if(!lt||this.transform.projection.name==="globe"||lt.getOpacity(this.transform.pitch)<1||lt.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[bt,kt]=lt.getFovAdjustedRange(this.transform._fov);if(bt>kt)return void(this.transform.fogCullDistSq=null);const jt=bt+.78*(kt-bt);this.transform.fogCullDistSq=jt*jt}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(ot,lt){if(this.width=ot*j.exported.devicePixelRatio,this.height=lt*j.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const bt of this.style.order)this.style._layers[bt].resize()}setup(){const ot=this.context,lt=new j.StructArrayLayout2i4;lt.emplaceBack(0,0),lt.emplaceBack(j.EXTENT,0),lt.emplaceBack(0,j.EXTENT),lt.emplaceBack(j.EXTENT,j.EXTENT),this.tileExtentBuffer=ot.createVertexBuffer(lt,j.posAttributes.members),this.tileExtentSegments=j.SegmentVector.simpleSegment(0,0,4,2);const bt=new j.StructArrayLayout2i4;bt.emplaceBack(0,0),bt.emplaceBack(j.EXTENT,0),bt.emplaceBack(0,j.EXTENT),bt.emplaceBack(j.EXTENT,j.EXTENT),this.debugBuffer=ot.createVertexBuffer(bt,j.posAttributes.members),this.debugSegments=j.SegmentVector.simpleSegment(0,0,4,5);const kt=new j.StructArrayLayout2i4;kt.emplaceBack(-1,-1),kt.emplaceBack(1,-1),kt.emplaceBack(-1,1),kt.emplaceBack(1,1),this.viewportBuffer=ot.createVertexBuffer(kt,j.posAttributes.members),this.viewportSegments=j.SegmentVector.simpleSegment(0,0,4,2);const jt=new j.StructArrayLayout4i8;jt.emplaceBack(0,0,0,0),jt.emplaceBack(j.EXTENT,0,j.EXTENT,0),jt.emplaceBack(0,j.EXTENT,0,j.EXTENT),jt.emplaceBack(j.EXTENT,j.EXTENT,j.EXTENT,j.EXTENT),this.mercatorBoundsBuffer=ot.createVertexBuffer(jt,j.boundsAttributes.members),this.mercatorBoundsSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Jt=new j.StructArrayLayout3ui6;Jt.emplaceBack(0,1,2),Jt.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=ot.createIndexBuffer(Jt);const an=new j.StructArrayLayout1ui2;for(const _n of[0,1,3,2,0])an.emplaceBack(_n);this.debugIndexBuffer=ot.createIndexBuffer(an),this.emptyTexture=new j.Texture(ot,new j.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),ot.gl.RGBA),this.identityMat=j.create();const cn=this.context.gl;this.stencilClearMode=new j.StencilMode({func:cn.ALWAYS,mask:0},0,255,cn.ZERO,cn.ZERO,cn.ZERO),this.loadTimeStamps.push(j.window.performance.now()),this.atmosphereBuffer=new c0(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(ot){return ot._makeTileBoundsBuffers(this.context,this.transform.projection),ot._tileBoundsBuffer?{tileBoundsBuffer:ot._tileBoundsBuffer,tileBoundsIndexBuffer:ot._tileBoundsIndexBuffer,tileBoundsSegments:ot._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const ot=this.context,lt=ot.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(ot,lt.TRIANGLES,j.DepthMode.disabled,this.stencilClearMode,j.ColorMode.disabled,j.CullFaceMode.disabled,lp(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(ot,lt,bt){if(!lt||this.currentStencilSource===lt.id||!ot.isTileClipped()||!bt||bt.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let an=!1;for(const cn of bt)if(this._tileClippingMaskIDs[cn.key]===void 0){an=!0;break}if(!an)return}this.currentStencilSource=lt.id;const kt=this.context,jt=kt.gl;this.nextStencilID+bt.length>256&&this.clearStencil(),kt.setColorMode(j.ColorMode.disabled),kt.setDepthMode(j.DepthMode.disabled);const Jt=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const an of bt){const cn=lt.getTile(an),_n=this._tileClippingMaskIDs[an.key]=this.nextStencilID++,{tileBoundsBuffer:Sn,tileBoundsIndexBuffer:In,tileBoundsSegments:Bn}=this.getTileBoundsBuffers(cn);Jt.draw(kt,jt.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:jt.ALWAYS,mask:0},_n,255,jt.KEEP,jt.KEEP,jt.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,lp(an.projMatrix),"$clipping",Sn,In,Bn)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const ot=this.nextStencilID++,lt=this.context.gl;return new j.StencilMode({func:lt.NOTEQUAL,mask:255},ot,255,lt.KEEP,lt.KEEP,lt.REPLACE)}stencilModeForClipping(ot){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(ot);const lt=this.context.gl;return new j.StencilMode({func:lt.EQUAL,mask:255},this._tileClippingMaskIDs[ot.key],0,lt.KEEP,lt.KEEP,lt.REPLACE)}stencilConfigForOverlap(ot){const lt=this.context.gl,bt=ot.sort((Jt,an)=>an.overscaledZ-Jt.overscaledZ),kt=bt[bt.length-1].overscaledZ,jt=bt[0].overscaledZ-kt+1;if(jt>1){this.currentStencilSource=void 0,this.nextStencilID+jt>256&&this.clearStencil();const Jt={};for(let an=0;an<jt;an++)Jt[an+kt]=new j.StencilMode({func:lt.GEQUAL,mask:255},an+this.nextStencilID,255,lt.KEEP,lt.KEEP,lt.REPLACE);return this.nextStencilID+=jt,[Jt,bt]}return[{[kt]:j.StencilMode.disabled},bt]}colorModeForRenderPass(){const ot=this.context.gl;return this._showOverdrawInspector?new j.ColorMode([ot.CONSTANT_COLOR,ot.ONE],new j.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?j.ColorMode.unblended:j.ColorMode.alphaBlended}depthModeForSublayer(ot,lt,bt){if(!this.opaquePassEnabledForLayer())return j.DepthMode.disabled;const kt=1-((1+this.currentLayer)*this.numSublayers+ot)*this.depthEpsilon;return new j.DepthMode(bt||this.context.gl.LEQUAL,lt,[kt,kt])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(ot,lt){this.style=ot,this.options=lt,this.imageManager=ot.imageManager,this.glyphManager=ot.glyphManager,this.symbolFadeChange=ot.placement.symbolFadeChange(j.exported.now()),this.imageManager.beginFrame();const bt=this.style.order,kt=this.style._sourceCaches;for(const cn in kt){const _n=kt[cn];_n.used&&_n.prepare(this.context)}const jt={},Jt={},an={};for(const cn in kt){const _n=kt[cn];jt[cn]=_n.getVisibleCoordinates(),Jt[cn]=jt[cn].slice().reverse(),an[cn]=_n.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let cn=0;cn<bt.length;cn++)if(this.style._layers[bt[cn]].is3D()){this.opaquePassCutoff=cn;break}if(this.terrain&&(this.terrain.updateTileBinding(an),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new j.GlobeSharedBuffers(this.context)),j.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const cn of bt){const _n=this.style._layers[cn],Sn=ot._getLayerSourceCache(_n);if(!_n.hasOffscreenPass()||_n.isHidden(this.transform.zoom))continue;const In=Sn?Jt[Sn.id]:void 0;(_n.type==="custom"||_n.isSky()||In&&In.length)&&this.renderLayer(this,Sn,_n,In)}if(this.depthRangeFor3D=[0,1-(ot.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:lt.showOverdrawInspector?j.Color.black:j.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=lt.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=bt.length-1;this.currentLayer>=0;this.currentLayer--){const cn=this.style._layers[bt[this.currentLayer]],_n=ot._getLayerSourceCache(cn);if(cn.isSky())continue;const Sn=_n?Jt[_n.id]:void 0;this._renderTileClippingMasks(cn,_n,Sn),this.renderLayer(this,_n,cn,Sn)}if(this.style.fog&&this.transform.projection.supportsFog&&function(cn,_n){const Sn=cn.context,In=Sn.gl,Bn=cn.transform,Yn=new j.DepthMode(In.LEQUAL,j.DepthMode.ReadOnly,[0,1]),Gn=cn.useProgram("globeAtmosphere",null,Bn.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Xn=j.globeToMercatorTransition(Bn.zoom),Un=_n.properties.get("color").toArray01(),Nn=_n.properties.get("high-color").toArray01(),er=_n.properties.get("space-color").toArray01PremultipliedAlpha(),Zn=j.identity$1([]);j.rotateY$1(Zn,Zn,-j.degToRad(Bn._center.lng)),j.rotateX$1(Zn,Zn,j.degToRad(Bn._center.lat)),j.rotateZ$1(Zn,Zn,Bn.angle),j.rotateX$1(Zn,Zn,-Bn._pitch);const fr=j.fromQuat(new Float32Array(16),Zn),pr=j.mapValue(_n.properties.get("star-intensity"),0,1,0,.25),tr=5e-4,vr=j.mapValue(_n.properties.get("horizon-blend"),0,1,tr,.25),Er=j.globeUseCustomAntiAliasing(cn,Sn,Bn)&&vr===tr?Bn.worldSize/(2*Math.PI*1.025)-1:Bn.globeRadius,Lr=cn.frameCounter/1e3%1,kr=j.length(Bn.globeCenterInViewSpace),io=Math.sqrt(Math.pow(kr,2)-Math.pow(Er,2)),Ar=Math.acos(io/kr),$r=((Or,Sr,mo,lo,ho,uo,Po,zo,Uo,Bo,co,Yo,ls,Ls)=>({u_frustum_tl:Or,u_frustum_tr:Sr,u_frustum_br:mo,u_frustum_bl:lo,u_horizon:ho,u_transition:uo,u_fadeout_range:Po,u_color:zo,u_high_color:Uo,u_space_color:Bo,u_star_intensity:co,u_star_size:5*j.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Yo,u_horizon_angle:ls,u_rotation_matrix:Ls}))(Bn.frustumCorners.TL,Bn.frustumCorners.TR,Bn.frustumCorners.BR,Bn.frustumCorners.BL,Bn.frustumCorners.horizon,Xn,vr,Un,Nn,er,pr,Lr,Ar,fr);cn.prepareDrawProgram(Sn,Gn);const qr=cn.atmosphereBuffer;qr&&Gn.draw(Sn,In.TRIANGLES,Yn,j.StencilMode.disabled,j.ColorMode.alphaBlended,j.CullFaceMode.backCW,$r,"skybox",qr.vertexBuffer,qr.indexBuffer,qr.segments)}(this,this.style.fog),this.renderPass="sky",(j.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<bt.length;this.currentLayer++){const cn=this.style._layers[bt[this.currentLayer]],_n=ot._getLayerSourceCache(cn);cn.isSky()&&this.renderLayer(this,_n,cn,_n?Jt[_n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<bt.length;){const cn=this.style._layers[bt[this.currentLayer]],_n=ot._getLayerSourceCache(cn);if(cn.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(cn)){if(cn.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Sn=_n?(cn.type==="symbol"?an:Jt)[_n.id]:void 0;this._renderTileClippingMasks(cn,_n,_n?jt[_n.id]:void 0),this.renderLayer(this,_n,cn,Sn),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let cn=null;j.values(this.style._layers).forEach(_n=>{const Sn=ot._getLayerSourceCache(_n);Sn&&!_n.isHidden(this.transform.zoom)&&(!cn||cn.getSource().maxzoom<Sn.getSource().maxzoom)&&(cn=Sn)}),cn&&this.options.showTileBoundaries&&ny.debug(this,cn,cn.getVisibleCoordinates())}this.options.showPadding&&function(cn){const _n=cn.transform.padding;ty(cn,cn.transform.height-(_n.top||0),3,Cl),ty(cn,_n.bottom||0,3,Xs),sm(cn,_n.left||0,3,m_),sm(cn,cn.transform.width-(_n.right||0),3,u0);const Sn=cn.transform.centerPoint;(function(In,Bn,Yn,Gn){Hu(In,Bn-1,Yn-10,2,20,Gn),Hu(In,Bn-10,Yn-1,20,2,Gn)})(cn,Sn.x,cn.transform.height-Sn.y,Tu)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(j.window.performance.now()),this.saveCanvasCopy())}}renderLayer(ot,lt,bt,kt){bt.isHidden(this.transform.zoom)||(bt.type==="background"||bt.type==="sky"||bt.type==="custom"||kt&&kt.length)&&(this.id=bt.id,this.gpuTimingStart(bt),ot.transform.projection.unsupportedLayers&&ot.transform.projection.unsupportedLayers.includes(bt.type)||ny[bt.type](ot,lt,bt,kt,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(ot){if(!this.options.gpuTiming)return;const lt=this.context.extTimerQuery;let bt=this.gpuTimers[ot.id];bt||(bt=this.gpuTimers[ot.id]={calls:0,cpuTime:0,query:lt.createQueryEXT()}),bt.calls++,lt.beginQueryEXT(lt.TIME_ELAPSED_EXT,bt.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const ot=this.context.extTimerQuery,lt=ot.createQueryEXT();this.deferredRenderGpuTimeQueries.push(lt),ot.beginQueryEXT(ot.TIME_ELAPSED_EXT,lt)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const ot=this.context.extTimerQuery;ot.endQueryEXT(ot.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const ot=this.context.extTimerQuery;ot.endQueryEXT(ot.TIME_ELAPSED_EXT)}collectGpuTimers(){const ot=this.gpuTimers;return this.gpuTimers={},ot}collectDeferredRenderGpuQueries(){const ot=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],ot}queryGpuTimers(ot){const lt={};for(const bt in ot){const kt=ot[bt],jt=this.context.extTimerQuery,Jt=jt.getQueryObjectEXT(kt.query,jt.QUERY_RESULT_EXT)/1e6;jt.deleteQueryEXT(kt.query),lt[bt]=Jt}return lt}queryGpuTimeDeferredRender(ot){if(!this.options.gpuTimingDeferredRender)return 0;const lt=this.context.extTimerQuery;let bt=0;for(const kt of ot)bt+=lt.getQueryObjectEXT(kt,lt.QUERY_RESULT_EXT)/1e6,lt.deleteQueryEXT(kt);return bt}translatePosMatrix(ot,lt,bt,kt,jt){if(!bt[0]&&!bt[1])return ot;const Jt=jt?kt==="map"?this.transform.angle:0:kt==="viewport"?-this.transform.angle:0;if(Jt){const _n=Math.sin(Jt),Sn=Math.cos(Jt);bt=[bt[0]*Sn-bt[1]*_n,bt[0]*_n+bt[1]*Sn]}const an=[jt?bt[0]:yn(lt,bt[0],this.transform.zoom),jt?bt[1]:yn(lt,bt[1],this.transform.zoom),0],cn=new Float32Array(16);return j.translate(cn,ot,an),cn}saveTileTexture(ot){const lt=this._tileTextures[ot.size[0]];lt?lt.push(ot):this._tileTextures[ot.size[0]]=[ot]}getTileTexture(ot){const lt=this._tileTextures[ot];return lt&&lt.length>0?lt.pop():null}isPatternMissing(ot){if(!ot)return!1;if(!ot.from||!ot.to)return!0;const lt=this.imageManager.getPattern(ot.from.toString()),bt=this.imageManager.getPattern(ot.to.toString());return!lt||!bt}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const ot=this.terrain&&this.terrain.renderingToTexture,lt=this.style&&this.style.fog,bt=[];return this.terrainRenderModeElevated()&&bt.push("TERRAIN"),this.transform.projection.name==="globe"&&bt.push("GLOBE"),lt&&!ot&&lt.getOpacity(this.transform.pitch)!==0&&bt.push("FOG"),ot&&bt.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&bt.push("OVERDRAW_INSPECTOR"),bt}useProgram(ot,lt,bt){this.cache=this.cache||{};const kt=bt||[],jt=this.currentGlobalDefines().concat(kt),Jt=dv.cacheKey(uv[ot],ot,jt,lt);return this.cache[Jt]||(this.cache[Jt]=new dv(this.context,ot,uv[ot],lt,g_[ot],jt)),this.cache[Jt]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const ot=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(ot.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=j.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new j.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(ot,lt,bt){if(this.terrain&&this.terrain.renderingToTexture)return;const kt=this.style.fog;if(kt){const jt=kt.getOpacity(this.transform.pitch),Jt=((an,cn,_n,Sn,In,Bn,Yn,Gn,Xn,Un,Nn)=>{const er=an.transform,Zn=cn.properties.get("color").toArray01();Zn[3]=Sn;const fr=an.frameCounter/1e3%1;return{u_fog_matrix:_n?er.calculateFogTileMatrix(_n):an.identityMat,u_fog_range:cn.getFovAdjustedRange(er._fov),u_fog_color:Zn,u_fog_horizon_blend:cn.properties.get("horizon-blend"),u_fog_temporal_offset:fr,u_frustum_tl:In,u_frustum_tr:Bn,u_frustum_br:Yn,u_frustum_bl:Gn,u_globe_pos:Xn,u_globe_radius:Un,u_viewport:Nn,u_globe_transition:j.globeToMercatorTransition(er.zoom),u_is_globe:+(er.projection.name==="globe")}})(this,kt,bt,jt,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*j.exported.devicePixelRatio,this.transform.height*j.exported.devicePixelRatio]);lt.setFogUniformValues(ot,Jt)}}setTileLoadedFlag(ot){this.tileLoaded=ot}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const ot=this.context.gl,lt=ot.createTexture();return ot.bindTexture(ot.TEXTURE_2D,lt),ot.copyTexImage2D(ot.TEXTURE_2D,0,ot.RGBA,0,0,ot.drawingBufferWidth,ot.drawingBufferHeight,0),lt}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const ot=this.style&&this.style.fog;return!!ot&&ot.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const ot=this._backgroundTiles,lt=this._backgroundTiles={},bt=this.transform.coveringTiles({tileSize:512});for(const kt of bt)lt[kt.key]=ot[kt.key]||new j.Tile(kt,512,this.transform.tileZoom,this);return lt}clearBackgroundTiles(){this._backgroundTiles={}}}class xp{constructor(ot=0,lt=0,bt=0,kt=0){if(isNaN(ot)||ot<0||isNaN(lt)||lt<0||isNaN(bt)||bt<0||isNaN(kt)||kt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=ot,this.bottom=lt,this.left=bt,this.right=kt}interpolate(ot,lt,bt){return lt.top!=null&&ot.top!=null&&(this.top=j.number(ot.top,lt.top,bt)),lt.bottom!=null&&ot.bottom!=null&&(this.bottom=j.number(ot.bottom,lt.bottom,bt)),lt.left!=null&&ot.left!=null&&(this.left=j.number(ot.left,lt.left,bt)),lt.right!=null&&ot.right!=null&&(this.right=j.number(ot.right,lt.right,bt)),this}getCenter(ot,lt){const bt=j.clamp((this.left+ot-this.right)/2,0,ot),kt=j.clamp((this.top+lt-this.bottom)/2,0,lt);return new j.pointGeometry(bt,kt)}equals(ot){return this.top===ot.top&&this.bottom===ot.bottom&&this.left===ot.left&&this.right===ot.right}clone(){return new xp(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ry(dt,ot){const lt=j.getColumn(dt,3);j.fromQuat(dt,ot),j.setColumn(dt,3,lt)}function __(dt,ot){const lt=j.identity$1([]);return j.rotateZ$1(lt,lt,-ot),j.rotateX$1(lt,lt,-dt),lt}function am(dt,ot){const lt=[dt[0],dt[1],0],bt=[ot[0],ot[1],0];if(j.length(lt)>=1e-15){const Jt=j.normalize([],lt);j.scale$2(bt,Jt,j.dot(bt,Jt)),ot[0]=bt[0],ot[1]=bt[1]}const kt=j.cross([],ot,dt);if(j.len(kt)<1e-15)return null;const jt=Math.atan2(-kt[1],kt[0]);return __(Math.atan2(Math.sqrt(dt[0]*dt[0]+dt[1]*dt[1]),-dt[2]),jt)}class iy{constructor(ot,lt){this.position=ot,this.orientation=lt}get position(){return this._position}set position(ot){if(ot){const lt=ot instanceof j.MercatorCoordinate?ot:new j.MercatorCoordinate(ot[0],ot[1],ot[2]);this._renderWorldCopies&&(lt.x=j.wrap(lt.x,0,1)),this._position=lt}else this._position=null}lookAtPoint(ot,lt){if(this.orientation=null,!this.position)return;const bt=this._elevation?this._elevation.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(ot)):0,kt=this.position,jt=j.MercatorCoordinate.fromLngLat(ot,bt),Jt=[jt.x-kt.x,jt.y-kt.y,jt.z-kt.z];lt||(lt=[0,0,1]),lt[2]=Math.abs(lt[2]),this.orientation=am(Jt,lt)}setPitchBearing(ot,lt){this.orientation=__(j.degToRad(ot),j.degToRad(-lt))}}class lm{constructor(ot,lt){this._transform=j.identity([]),this.orientation=lt,this.position=ot}get mercatorPosition(){const ot=this.position;return new j.MercatorCoordinate(ot[0],ot[1],ot[2])}get position(){const ot=j.getColumn(this._transform,3);return[ot[0],ot[1],ot[2]]}set position(ot){var lt;ot&&j.setColumn(this._transform,3,[(lt=ot)[0],lt[1],lt[2],1])}get orientation(){return this._orientation}set orientation(ot){this._orientation=ot||j.identity$1([]),ot&&ry(this._transform,this._orientation)}getPitchBearing(){const ot=this.forward(),lt=this.right();return{bearing:Math.atan2(-lt[1],lt[0]),pitch:Math.atan2(Math.sqrt(ot[0]*ot[0]+ot[1]*ot[1]),-ot[2])}}setPitchBearing(ot,lt){this._orientation=__(ot,lt),ry(this._transform,this._orientation)}forward(){const ot=j.getColumn(this._transform,2);return[-ot[0],-ot[1],-ot[2]]}up(){const ot=j.getColumn(this._transform,1);return[-ot[0],-ot[1],-ot[2]]}right(){const ot=j.getColumn(this._transform,0);return[ot[0],ot[1],ot[2]]}getCameraToWorld(ot,lt){const bt=new Float64Array(16);return j.invert(bt,this.getWorldToCamera(ot,lt)),bt}getWorldToCameraPosition(ot,lt,bt){const kt=this.position;j.scale$2(kt,kt,-ot);const jt=new Float64Array(16);return j.fromScaling(jt,[bt,bt,bt]),j.translate(jt,jt,kt),jt[10]*=lt,jt}getWorldToCamera(ot,lt){const bt=new Float64Array(16),kt=new Float64Array(4),jt=this.position;return j.conjugate(kt,this._orientation),j.scale$2(jt,jt,-ot),j.fromQuat(bt,kt),j.translate(bt,bt,jt),bt[1]*=-1,bt[5]*=-1,bt[9]*=-1,bt[13]*=-1,bt[8]*=lt,bt[9]*=lt,bt[10]*=lt,bt[11]*=lt,bt}getCameraToClipPerspective(ot,lt,bt,kt){const jt=new Float64Array(16);return j.perspective(jt,ot,lt,bt,kt),jt}getDistanceToElevation(ot){const lt=ot===0?0:j.mercatorZfromAltitude(ot,this.position[1]),bt=this.forward();return(lt-this.position[2])/bt[2]}clone(){return new lm([...this.position],[...this.orientation])}}function Mm(dt,ot){const lt=Up(dt.projection,dt.zoom,dt.width,dt.height),bt=function(jt,Jt,an,cn,_n){const Sn=new j.LngLat(an.lng-180*yu,an.lat),In=new j.LngLat(an.lng+180*yu,an.lat),Bn=jt.project(Sn.lng,Sn.lat),Yn=jt.project(In.lng,In.lat),Gn=-Math.atan2(Yn.y-Bn.y,Yn.x-Bn.x),Xn=j.MercatorCoordinate.fromLngLat(an);Xn.y=j.clamp(Xn.y,-.999975,.999975);const Un=Xn.toLngLat(),Nn=jt.project(Un.lng,Un.lat),er=j.MercatorCoordinate.fromLngLat(Un);er.x+=yu;const Zn=er.toLngLat(),fr=jt.project(Zn.lng,Zn.lat),pr=wo(fr.x-Nn.x,fr.y-Nn.y,Gn),tr=j.MercatorCoordinate.fromLngLat(Un);tr.y+=yu;const vr=tr.toLngLat(),Er=jt.project(vr.lng,vr.lat),Lr=wo(Er.x-Nn.x,Er.y-Nn.y,Gn),kr=Math.abs(pr.x)/Math.abs(Lr.y),io=j.identity([]);j.rotateZ(io,io,-Gn*(1-(_n?0:cn)));const Ar=j.identity([]);return j.scale(Ar,Ar,[1,1-(1-kr)*cn,1]),Ar[4]=-Lr.x/Lr.y*cn,j.rotateZ(Ar,Ar,Gn),j.multiply(Ar,io,Ar),Ar}(dt.projection,0,dt.center,lt,ot),kt=Py(dt);return j.scale(bt,bt,[kt,kt,1]),bt}function Py(dt){const ot=dt.projection,lt=Up(dt.projection,dt.zoom,dt.width,dt.height),bt=um(ot,dt.center),kt=um(ot,j.LngLat.convert(ot.center));return Math.pow(2,bt*lt+(1-lt)*kt)}function Up(dt,ot,lt,bt,kt=1/0){const jt=dt.range;if(!jt)return 0;const Jt=Math.min(kt,Math.max(lt,bt)),an=Math.log(Jt/1024)/Math.LN2;return j.smoothstep(jt[0]+an,jt[1]+an,ot)}const yu=1/4e4;function um(dt,ot){const lt=j.clamp(ot.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),bt=new j.LngLat(ot.lng-180*yu,lt),kt=new j.LngLat(ot.lng+180*yu,lt),jt=dt.project(bt.lng,lt),Jt=dt.project(kt.lng,lt),an=j.MercatorCoordinate.fromLngLat(bt),cn=j.MercatorCoordinate.fromLngLat(kt),_n=Jt.x-jt.x,Sn=Jt.y-jt.y,In=cn.x-an.x,Bn=cn.y-an.y,Yn=Math.sqrt((In*In+Bn*Bn)/(_n*_n+Sn*Sn));return Math.log(Yn)/Math.LN2}function wo(dt,ot,lt){const bt=Math.cos(lt),kt=Math.sin(lt);return{x:dt*bt-ot*kt,y:dt*kt+ot*bt}}class ku{constructor(ot,lt,bt,kt,jt,Jt,an){this.tileSize=512,this._renderWorldCopies=jt===void 0||jt,this._minZoom=ot||0,this._maxZoom=lt||22,this._minPitch=bt??0,this._maxPitch=kt??60,this.setProjection(Jt),this.setMaxBounds(an),this.width=0,this.height=0,this._center=new j.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new xp,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new lm,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const ot=new ku(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return ot._elevation=this._elevation,ot._centerAltitude=this._centerAltitude,ot._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,ot.tileSize=this.tileSize,ot.mercatorFromTransition=this.mercatorFromTransition,ot.width=this.width,ot.height=this.height,ot.cameraElevationReference=this.cameraElevationReference,ot._center=this._center,ot._setZoom(this.zoom),ot._seaLevelZoom=this._seaLevelZoom,ot.angle=this.angle,ot._fov=this._fov,ot._pitch=this._pitch,ot._nearZ=this._nearZ,ot._farZ=this._farZ,ot._averageElevation=this._averageElevation,ot._unmodified=this._unmodified,ot._edgeInsets=this._edgeInsets.clone(),ot._camera=this._camera.clone(),ot._calcMatrices(),ot.freezeTileCoverage=this.freezeTileCoverage,ot.frustumCorners=this.frustumCorners,ot}get elevation(){return this._elevation}set elevation(ot){this._elevation!==ot&&(this._elevation=ot,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(ot){const lt=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||lt)&&this._updateCameraOnTerrain(),(ot||lt)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return j.pick(this.projection,["name","center","parallels"])}setProjection(ot){this.projectionOptions=ot||{name:"mercator"};const lt=this.projection?this.getProjection():void 0;this.projection=j.getProjection(this.projectionOptions);const bt=!it(lt,this.getProjection());return bt&&this._calcMatrices(),this.mercatorFromTransition=!1,bt}setMercatorFromTransition(){const ot=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=j.getProjection({name:"mercator"});const lt=ot!==this.projection.name;return lt&&this._calcMatrices(),lt}get minZoom(){return this._minZoom}set minZoom(ot){this._minZoom!==ot&&(this._minZoom=ot,this.zoom=Math.max(this.zoom,ot))}get maxZoom(){return this._maxZoom}set maxZoom(ot){this._maxZoom!==ot&&(this._maxZoom=ot,this.zoom=Math.min(this.zoom,ot))}get minPitch(){return this._minPitch}set minPitch(ot){this._minPitch!==ot&&(this._minPitch=ot,this.pitch=Math.max(this.pitch,ot))}get maxPitch(){return this._maxPitch}set maxPitch(ot){this._maxPitch!==ot&&(this._maxPitch=ot,this.pitch=Math.min(this.pitch,ot))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(ot){ot===void 0?ot=!0:ot===null&&(ot=!1),this._renderWorldCopies=ot}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const ot=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(ot))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return j.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new j.pointGeometry(this.width,this.height)}get bearing(){return j.wrap(this.rotation,-180,180)}set bearing(ot){this.rotation=ot}get rotation(){return-this.angle/Math.PI*180}set rotation(ot){const lt=-ot*Math.PI/180;var bt;this.angle!==lt&&(this._unmodified=!1,this.angle=lt,this._calcMatrices(),this.rotationMatrix=(bt=new j.ARRAY_TYPE(4),j.ARRAY_TYPE!=Float32Array&&(bt[1]=0,bt[2]=0),bt[0]=1,bt[3]=1,bt),function(kt,jt,Jt){var an=jt[0],cn=jt[1],_n=jt[2],Sn=jt[3],In=Math.sin(Jt),Bn=Math.cos(Jt);kt[0]=an*Bn+_n*In,kt[1]=cn*Bn+Sn*In,kt[2]=an*-In+_n*Bn,kt[3]=cn*-In+Sn*Bn}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(ot){const lt=j.clamp(ot,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==lt&&(this._unmodified=!1,this._pitch=lt,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const ot=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/ot)}set fov(ot){ot=Math.max(.01,Math.min(60,ot)),this._fov!==ot&&(this._unmodified=!1,this._fov=j.degToRad(ot),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(ot){this._averageElevation=ot,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(ot){const lt=Math.min(Math.max(ot,this.minZoom),this.maxZoom);this._zoom!==lt&&(this._unmodified=!1,this._setZoom(lt),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(ot){this._zoom=ot,this.scale=this.zoomScale(ot),this.tileZoom=Math.floor(ot),this.zoomFraction=ot-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const ot=this._elevation;this._centerAltitude=ot.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=ot.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const ot=this._elevation,lt=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],bt=this.horizonLineFromTop();let kt=0,jt=0;for(let Jt=0;Jt<lt.length;Jt++){const an=new j.pointGeometry(lt[Jt][0]*this.width,bt+lt[Jt][1]*(this.height-bt)),cn=ot.pointCoordinate(an);if(!cn)continue;const _n=1/Math.hypot(cn[0]-this._camera.position[0],cn[1]-this._camera.position[1]);kt+=cn[3]*_n,jt+=_n}return jt===0?NaN:kt/jt}get center(){return this._center}set center(ot){ot.lat===this._center.lat&&ot.lng===this._center.lng||(this._unmodified=!1,this._center=ot,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const ot=this._seaLevelZoom,lt=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),bt=this.pixelsPerMeter/this.worldSize*lt,kt=this._mercatorZfromZoom(ot),jt=this._mercatorZfromZoom(this._maxZoom),Jt=Math.max(kt-bt,jt);this._setZoom(this._zoomFromMercatorZ(Jt))}get padding(){return this._edgeInsets.toJSON()}set padding(ot){this._edgeInsets.equals(ot)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ot,1),this._calcMatrices())}computeZoomRelativeTo(ot){const lt=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,ot.toAltitude()));let bt;bt=ot.z<this._camera.position[2]?[lt.x,lt.y,lt.z]:[ot.x,ot.y,ot.z];const kt=j.length(j.sub([],this._camera.position,bt));return j.clamp(this._zoomFromMercatorZ(kt),this._minZoom,this._maxZoom)}setFreeCameraOptions(ot){if(!this.height||!ot.position&&!ot.orientation)return;this._updateCameraState();let lt=!1;if(ot.orientation&&!j.exactEquals(ot.orientation,this._camera.orientation)&&(lt=this._setCameraOrientation(ot.orientation)),ot.position){const bt=[ot.position.x,ot.position.y,ot.position.z];j.exactEquals$1(bt,this._camera.position)||(this._setCameraPosition(bt),lt=!0)}lt&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const ot=this._camera.position,lt=new iy;return lt.position=new j.MercatorCoordinate(ot[0],ot[1],ot[2]),lt.orientation=this._camera.orientation,lt._elevation=this.elevation,lt._renderWorldCopies=this.renderWorldCopies,lt}_setCameraOrientation(ot){if(!j.length$1(ot))return!1;j.normalize$1(ot,ot);const lt=j.transformQuat([],[0,0,-1],ot),bt=j.transformQuat([],[0,-1,0],ot);if(bt[2]<0)return!1;const kt=am(lt,bt);return!!kt&&(this._camera.orientation=kt,!0)}_setCameraPosition(ot){const lt=this.zoomScale(this.minZoom)*this.tileSize,bt=this.zoomScale(this.maxZoom)*this.tileSize,kt=this.cameraToCenterDistance;ot[2]=j.clamp(ot[2],kt/bt,kt/lt),this._camera.position=ot}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(ot){return this._edgeInsets.equals(ot)}interpolatePadding(ot,lt,bt){this._unmodified=!1,this._edgeInsets.interpolate(ot,lt,bt),this._constrain(),this._calcMatrices()}coveringZoomLevel(ot){const lt=(ot.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/ot.tileSize));return Math.max(0,lt)}getVisibleUnwrappedCoordinates(ot){const lt=[new j.UnwrappedTileID(0,ot)];if(this.renderWorldCopies){const bt=this.pointCoordinate(new j.pointGeometry(0,0)),kt=this.pointCoordinate(new j.pointGeometry(this.width,0)),jt=this.pointCoordinate(new j.pointGeometry(this.width,this.height)),Jt=this.pointCoordinate(new j.pointGeometry(0,this.height)),an=Math.floor(Math.min(bt.x,kt.x,jt.x,Jt.x)),cn=Math.floor(Math.max(bt.x,kt.x,jt.x,Jt.x)),_n=1;for(let Sn=an-_n;Sn<=cn+_n;Sn++)Sn!==0&&lt.push(new j.UnwrappedTileID(Sn,ot))}return lt}coveringTiles(ot){let lt=this.coveringZoomLevel(ot);const bt=lt,kt=this.elevation&&!ot.isTerrainDEM,jt=this.projection.name==="mercator";if(ot.minzoom!==void 0&&lt<ot.minzoom)return[];ot.maxzoom!==void 0&&lt>ot.maxzoom&&(lt=ot.maxzoom);const Jt=this.locationCoordinate(this.center),an=this.center.lat,cn=1<<lt,_n=[cn*Jt.x,cn*Jt.y,0],Sn=this.projection.name==="globe",In=!Sn,Bn=j.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,lt,In),Yn=Sn?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Gn=cn*j.mercatorZfromAltitude(1,this.center.lat),Xn=this._camera.position[2]/j.mercatorZfromAltitude(1,this.center.lat),Un=[cn*Yn.x,cn*Yn.y,Xn*(In?1:Gn)],Nn=this.cameraToCenterDistance/ot.tileSize*(ot.roundZoom?1:.502),er=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?lt:0,Zn=ot.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,fr=ot.isTerrainDEM?-Zn:this._elevation?this._elevation.getMinElevationBelowMSL():0,pr=this.projection.isReprojectedInTileSpace?Py(this):1,tr=Sr=>{const lo=new j.MercatorCoordinate(Sr.x+25e-6,Sr.y,Sr.z),ho=new j.MercatorCoordinate(Sr.x,Sr.y+25e-6,Sr.z),uo=Sr.toLngLat(),Po=lo.toLngLat(),zo=ho.toLngLat(),Uo=this.locationCoordinate(uo),Bo=this.locationCoordinate(Po),co=this.locationCoordinate(zo),Yo=Math.hypot(Bo.x-Uo.x,Bo.y-Uo.y),ls=Math.hypot(co.x-Uo.x,co.y-Uo.y);return Math.sqrt(Yo*ls)*pr/25e-6},vr=Sr=>{const mo=Zn,lo=fr;return{aabb:j.tileAABB(this,cn,0,0,0,Sr,lo,mo,this.projection),zoom:0,x:0,y:0,minZ:lo,maxZ:mo,wrap:Sr,fullyVisible:!1}},Er=[];let Lr=[];const kr=lt,io=ot.reparseOverscaled?bt:lt,Ar=Sr=>Sr*Sr,$r=Ar((Xn-this._centerAltitude)*Gn),qr=Sr=>{if(!this._elevation||!Sr.tileID||!jt)return;const mo=this._elevation.getMinMaxForTile(Sr.tileID),lo=Sr.aabb;mo?(lo.min[2]=mo.min,lo.max[2]=mo.max,lo.center[2]=(lo.min[2]+lo.max[2])/2):(Sr.shouldSplit=Or(Sr),Sr.shouldSplit||(lo.min[2]=lo.max[2]=lo.center[2]=this._centerAltitude))},Or=Sr=>{if(Sr.zoom<er)return!0;if(Sr.zoom===kr)return!1;if(Sr.shouldSplit!=null)return Sr.shouldSplit;const mo=Sr.aabb.distanceX(Un),lo=Sr.aabb.distanceY(Un);let ho=$r,uo=1;if(Sn){ho=Ar(Sr.aabb.distanceZ(Un));const Uo=Math.pow(2,Sr.zoom),Bo=j.latFromMercatorY((Sr.y+1)/Uo),co=j.latFromMercatorY(Sr.y/Uo),Yo=Math.min(Math.max(an,Bo),co),ls=j.circumferenceAtLatitude(Yo)/j.circumferenceAtLatitude(an);if(uo=Yo===an?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ls/this._mercatorScaleRatio),this.zoom<=j.GLOBE_ZOOM_THRESHOLD_MIN&&Sr.zoom===kr-1&&ls>=.9)return!0}else if(kt&&(ho=Ar(Sr.aabb.distanceZ(Un)*Gn)),this.projection.isReprojectedInTileSpace&&bt<=5){const Uo=Math.pow(2,Sr.zoom),Bo=tr(new j.MercatorCoordinate((Sr.x+.5)/Uo,(Sr.y+.5)/Uo));uo=Bo>.85?1:Bo}const Po=mo*mo+lo*lo+ho,zo=Ar((1<<kr-Sr.zoom)*Nn*uo*((Uo,Bo)=>{if(Bo*Ar(.707)<Uo)return 1;const co=Math.sqrt(Bo/Uo);return co/(1.4144271570014144+(Math.pow(1.1,co-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ho,$r),Po));return Po<zo};if(this.renderWorldCopies)for(let Sr=1;Sr<=3;Sr++)Er.push(vr(-Sr)),Er.push(vr(Sr));for(Er.push(vr(0));Er.length>0;){const Sr=Er.pop(),mo=Sr.x,lo=Sr.y;let ho=Sr.fullyVisible;if(!ho){const uo=Sr.aabb.intersects(Bn);if(uo===0)continue;ho=uo===2}if(Sr.zoom!==kr&&Or(Sr))for(let uo=0;uo<4;uo++){const Po=(mo<<1)+uo%2,zo=(lo<<1)+(uo>>1),Uo={aabb:jt?Sr.aabb.quadrant(uo):j.tileAABB(this,cn,Sr.zoom+1,Po,zo,Sr.wrap,Sr.minZ,Sr.maxZ,this.projection),zoom:Sr.zoom+1,x:Po,y:zo,wrap:Sr.wrap,fullyVisible:ho,tileID:void 0,shouldSplit:void 0,minZ:Sr.minZ,maxZ:Sr.maxZ};kt&&!Sn&&(Uo.tileID=new j.OverscaledTileID(Sr.zoom+1===kr?io:Sr.zoom+1,Sr.wrap,Sr.zoom+1,Po,zo),qr(Uo)),Er.push(Uo)}else{const uo=Sr.zoom===kr?io:Sr.zoom;if(ot.minzoom&&ot.minzoom>uo)continue;const Po=_n[0]-(.5+mo+(Sr.wrap<<Sr.zoom))*(1<<lt-Sr.zoom),zo=_n[1]-.5-lo,Uo=Sr.tileID?Sr.tileID:new j.OverscaledTileID(uo,Sr.wrap,Sr.zoom,mo,lo);Lr.push({tileID:Uo,distanceSq:Po*Po+zo*zo})}}if(this.fogCullDistSq){const Sr=this.fogCullDistSq,mo=this.horizonLineFromTop();Lr=Lr.filter(lo=>{const ho=[0,0,0,1],uo=[j.EXTENT,j.EXTENT,0,1],Po=this.calculateFogTileMatrix(lo.tileID.toUnwrapped());j.transformMat4$1(ho,ho,Po),j.transformMat4$1(uo,uo,Po);const zo=j.getAABBPointSquareDist(ho,uo);if(zo===0)return!0;let Uo=!1;const Bo=this._elevation;if(Bo&&zo>Sr&&mo!==0){const co=this.calculateProjMatrix(lo.tileID.toUnwrapped());let Yo;ot.isTerrainDEM||(Yo=Bo.getMinMaxForTile(lo.tileID)),Yo||(Yo={min:fr,max:Zn});const ls=j.furthestTileCorner(this.rotation),Ls=[ls[0]*j.EXTENT,ls[1]*j.EXTENT,Yo.max];j.transformMat4(Ls,Ls,co),Uo=(1-Ls[1])*this.height*.5<mo}return zo<Sr||Uo})}return Lr.sort((Sr,mo)=>Sr.distanceSq-mo.distanceSq).map(Sr=>Sr.tileID)}resize(ot,lt){this.width=ot,this.height=lt,this.pixelsToGLUnits=[2/ot,-2/lt],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(ot){return Math.pow(2,ot)}scaleZoom(ot){return Math.log(ot)/Math.LN2}project(ot){const lt=j.clamp(ot.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),bt=this.projection.project(ot.lng,lt);return new j.pointGeometry(bt.x*this.worldSize,bt.y*this.worldSize)}unproject(ot){return this.projection.unproject(ot.x/this.worldSize,ot.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(ot,lt){let bt,kt;const jt=this.centerPoint;if(this.projection.name==="globe"){const an=this.worldSize;bt=(lt.x-jt.x)/an,kt=(lt.y-jt.y)/an}else{const an=this.pointCoordinate(lt),cn=this.pointCoordinate(jt);bt=an.x-cn.x,kt=an.y-cn.y}const Jt=this.locationCoordinate(ot);this.setLocation(new j.MercatorCoordinate(Jt.x-bt,Jt.y-kt))}setLocation(ot){this.center=this.coordinateLocation(ot),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(ot){return this.projection.locationPoint(this,ot)}locationPoint3D(ot){return this.projection.locationPoint(this,ot,!0)}pointLocation(ot){return this.coordinateLocation(this.pointCoordinate(ot))}pointLocation3D(ot){return this.coordinateLocation(this.pointCoordinate3D(ot))}locationCoordinate(ot,lt){const bt=lt?j.mercatorZfromAltitude(lt,ot.lat):void 0,kt=this.projection.project(ot.lng,ot.lat);return new j.MercatorCoordinate(kt.x,kt.y,bt)}coordinateLocation(ot){return this.projection.unproject(ot.x,ot.y)}pointRayIntersection(ot,lt){const bt=lt??this._centerAltitude,kt=[ot.x,ot.y,0,1],jt=[ot.x,ot.y,1,1];j.transformMat4$1(kt,kt,this.pixelMatrixInverse),j.transformMat4$1(jt,jt,this.pixelMatrixInverse);const Jt=jt[3];j.scale$1(kt,kt,1/kt[3]),j.scale$1(jt,jt,1/Jt);const an=kt[2],cn=jt[2];return{p0:kt,p1:jt,t:an===cn?0:(bt-an)/(cn-an)}}screenPointToMercatorRay(ot){const lt=[ot.x,ot.y,0,1],bt=[ot.x,ot.y,1,1];return j.transformMat4$1(lt,lt,this.pixelMatrixInverse),j.transformMat4$1(bt,bt,this.pixelMatrixInverse),j.scale$1(lt,lt,1/lt[3]),j.scale$1(bt,bt,1/bt[3]),lt[2]=j.mercatorZfromAltitude(lt[2],this._center.lat)*this.worldSize,bt[2]=j.mercatorZfromAltitude(bt[2],this._center.lat)*this.worldSize,j.scale$1(lt,lt,1/this.worldSize),j.scale$1(bt,bt,1/this.worldSize),new j.Ray([lt[0],lt[1],lt[2]],j.normalize([],j.sub([],bt,lt)))}rayIntersectionCoordinate(ot){const{p0:lt,p1:bt,t:kt}=ot,jt=j.mercatorZfromAltitude(lt[2],this._center.lat),Jt=j.mercatorZfromAltitude(bt[2],this._center.lat);return new j.MercatorCoordinate(j.number(lt[0],bt[0],kt)/this.worldSize,j.number(lt[1],bt[1],kt)/this.worldSize,j.number(jt,Jt,kt))}pointCoordinate(ot,lt=this._centerAltitude){return this.projection.pointCoordinate(this,ot.x,ot.y,lt)}pointCoordinate3D(ot){if(!this.elevation)return this.pointCoordinate(ot);let lt=this.projection.pointCoordinate3D(this,ot.x,ot.y);if(lt)return new j.MercatorCoordinate(lt[0],lt[1],lt[2]);let bt=0,kt=this.horizonLineFromTop();if(ot.y>kt)return this.pointCoordinate(ot);const jt=.02*kt,Jt=ot.clone();for(let an=0;an<10&&kt-bt>jt;an++){Jt.y=j.number(bt,kt,.66);const cn=this.projection.pointCoordinate3D(this,Jt.x,Jt.y);cn?(kt=Jt.y,lt=cn):bt=Jt.y}return lt?new j.MercatorCoordinate(lt[0],lt[1],lt[2]):this.pointCoordinate(ot)}isPointAboveHorizon(ot){return this.projection.isPointAboveHorizon(this,ot)}_coordinatePoint(ot,lt){const bt=lt&&this.elevation?this.elevation.getAtPointOrZero(ot,this._centerAltitude):this._centerAltitude,kt=[ot.x*this.worldSize,ot.y*this.worldSize,bt+ot.toAltitude(),1];return j.transformMat4$1(kt,kt,this.pixelMatrix),kt[3]>0?new j.pointGeometry(kt[0]/kt[3],kt[1]/kt[3]):new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:ot,left:lt}=this._edgeInsets,bt=this.height-this._edgeInsets.bottom,kt=this.width-this._edgeInsets.right,jt=this.pointCoordinate3D(new j.pointGeometry(lt,ot)),Jt=this.pointCoordinate3D(new j.pointGeometry(kt,ot)),an=this.pointCoordinate3D(new j.pointGeometry(kt,bt)),cn=this.pointCoordinate3D(new j.pointGeometry(lt,bt));let _n=Math.min(jt.x,cn.x),Sn=Math.max(Jt.x,an.x),In=Math.min(jt.y,Jt.y),Bn=Math.max(cn.y,an.y);const Yn=Math.pow(2,-this.zoom)/16,Gn=(Nn,er,Zn,fr)=>{const pr=(Nn+Zn)/2,tr=(er+fr)/2,vr=new j.pointGeometry(pr,tr),Er=this.pointCoordinate3D(vr),Lr=Math.max(0,_n-Er.x,In-Er.y,Er.x-Sn,Er.y-Bn);_n=Math.min(_n,Er.x),Sn=Math.max(Sn,Er.x),In=Math.min(In,Er.y),Bn=Math.max(Bn,Er.y),Lr>Yn&&(Gn(Nn,er,pr,tr),Gn(pr,tr,Zn,fr))};Gn(lt,ot,kt,ot),Gn(kt,ot,kt,bt),Gn(kt,bt,lt,bt),Gn(lt,bt,lt,ot);const Xn=new j.LngLat(j.lngFromMercatorX(Sn),j.latFromMercatorY(In)),Un=new j.LngLat(j.lngFromMercatorX(_n),j.latFromMercatorY(Bn));return new j.LngLatBounds(Un,Xn)}_getBounds(ot,lt){if(this.projection.name==="globe")return this._getGlobeBounds();const bt=new j.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),kt=new j.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),jt=new j.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),Jt=new j.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let an=this.pointCoordinate(bt,ot),cn=this.pointCoordinate(kt,ot);const _n=this.pointCoordinate(jt,lt),Sn=this.pointCoordinate(Jt,lt),In=(Bn,Yn)=>(Yn.y-Bn.y)/(Yn.x-Bn.x);return an.y>1&&cn.y>=0?an=new j.MercatorCoordinate((1-Sn.y)/In(Sn,an)+Sn.x,1):an.y<0&&cn.y<=1&&(an=new j.MercatorCoordinate(-Sn.y/In(Sn,an)+Sn.x,0)),cn.y>1&&an.y>=0?cn=new j.MercatorCoordinate((1-_n.y)/In(_n,cn)+_n.x,1):cn.y<0&&an.y<=1&&(cn=new j.MercatorCoordinate(-_n.y/In(_n,cn)+_n.x,0)),new j.LngLatBounds().extend(this.coordinateLocation(an)).extend(this.coordinateLocation(cn)).extend(this.coordinateLocation(Sn)).extend(this.coordinateLocation(_n))}_getBounds3D(){const ot=this.elevation;if(!ot.visibleDemTiles.length||ot.isUsingMockSource())return this._getBounds(0,0);const lt=ot.visibleDemTiles.reduce((bt,kt)=>{if(kt.dem){const jt=kt.dem.tree;bt.min=Math.min(bt.min,jt.minimums[0]),bt.max=Math.max(bt.max,jt.maximums[0])}return bt},{min:Number.MAX_VALUE,max:0});return this._getBounds(lt.min*ot.exaggeration(),lt.max*ot.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(ot=!0){const lt=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,bt=this.height/2-lt*(1-this._horizonShift);return ot?Math.max(0,bt):bt}getMaxBounds(){return this.maxBounds}setMaxBounds(ot){this.maxBounds=ot,this.minLat=-j.MAX_MERCATOR_LATITUDE,this.maxLat=j.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,ot&&(this.minLat=ot.getSouth(),this.maxLat=ot.getNorth(),this.minLng=ot.getWest(),this.maxLng=ot.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=j.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=j.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=j.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=j.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(ot,lt){return this.projection.createTileMatrix(this,lt,ot)}calculateDistanceTileData(ot){const lt=ot.key,bt=this._distanceTileDataCache;if(bt[lt])return bt[lt];const kt=ot.canonical,jt=1/this.height,Jt=this.cameraWorldSize/this.zoomScale(kt.z),an=(kt.x+Math.pow(2,kt.z)*ot.wrap)*Jt,cn=kt.y*Jt,_n=this.point,Sn=this.angle,In=Math.sin(-Sn),Bn=-Math.cos(-Sn);return bt[lt]={bearing:[In,Bn],center:[(_n.x-an)*jt,(_n.y-cn)*jt],scale:Jt/j.EXTENT*jt},bt[lt]}calculateFogTileMatrix(ot){const lt=ot.key,bt=this._fogTileMatrixCache;if(bt[lt])return bt[lt];const kt=this.projection.createTileMatrix(this,this.cameraWorldSize,ot);return j.multiply(kt,this.worldToFogMatrix,kt),bt[lt]=new Float32Array(kt),bt[lt]}calculateProjMatrix(ot,lt=!1){const bt=ot.key,kt=lt?this._alignedProjMatrixCache:this._projMatrixCache;if(kt[bt])return kt[bt];const jt=this.calculatePosMatrix(ot,this.worldSize);return j.multiply(jt,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:lt?this.alignedProjMatrix:this.projMatrix,jt),kt[bt]=new Float32Array(jt),kt[bt]}calculatePixelsToTileUnitsMatrix(ot){const lt=ot.tileID.key,bt=this._pixelsToTileUnitsCache;if(bt[lt])return bt[lt];const kt=function(jt,Jt){const{scale:an}=jt.tileTransform,cn=an*j.EXTENT/(jt.tileSize*Math.pow(2,Jt.zoom-jt.tileID.overscaledZ+jt.tileID.canonical.z));return _n=new Float32Array(4),Bn=(Sn=Jt.inverseAdjustmentMatrix)[1],Yn=Sn[2],Gn=Sn[3],Un=(In=[cn,cn])[1],_n[0]=Sn[0]*(Xn=In[0]),_n[1]=Bn*Xn,_n[2]=Yn*Un,_n[3]=Gn*Un,_n;var _n,Sn,In,Bn,Yn,Gn,Xn,Un}(ot,this);return bt[lt]=kt,bt[lt]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const ot=this._elevation;this._updateCameraState();const lt=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,bt=this._computeCameraPosition(lt),kt=this._camera.forward(),jt=j.mercatorZfromAltitude(1,this._center.lat);bt[2]/=jt,kt[2]/=jt,j.normalize(kt,kt);const Jt=ot.raycast(bt,kt,ot.exaggeration());if(Jt){const an=j.scaleAndAdd([],bt,kt,Jt),cn=new j.MercatorCoordinate(an[0],an[1],j.mercatorZfromAltitude(an[2],j.latFromMercatorY(an[1]))),_n=(cn.z+j.length([cn.x-bt[0],cn.y-bt[1],cn.z-bt[2]*jt]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(_n),this._centerAltitude=cn.toAltitude(),this._center=this.coordinateLocation(cn),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const ot=this._elevation;this._updateCameraState();const lt=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,bt=this._computeCameraPosition(lt),kt=ot.getAtPointOrZero(new j.MercatorCoordinate(...bt)),jt=this._minimumHeightOverTerrain()*Math.cos(j.degToRad(this._maxPitch)),Jt=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*kt;if(Jt<jt){const an=this.locationCoordinate(this._center,this._centerAltitude),cn=[an.x-bt[0],an.y-bt[1],an.z-bt[2]],_n=j.length(cn);cn[2]-=(jt-Jt)/this._pixelsPerMercatorPixel;const Sn=j.length(cn);if(Sn===0)return;j.scale$2(cn,cn,_n/Sn*this._pixelsPerMercatorPixel),this._camera.position=[an.x-cn[0],an.y-cn[1],an.z*this._pixelsPerMercatorPixel-cn[2]],this._camera.orientation=am(cn,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const ot=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||ot){const Bn=this.center;return Bn.lat=j.clamp(Bn.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!ot)&&(Bn.lng=j.clamp(Bn.lng,this.minLng,this.maxLng)),this.center=Bn,void(this._constraining=!1)}const lt=this._unmodified,{x:bt,y:kt}=this.point;let jt=0,Jt=bt,an=kt;const cn=this.width/2,_n=this.height/2,Sn=this.worldMinY*this.scale,In=this.worldMaxY*this.scale;if(kt-_n<Sn&&(an=Sn+_n),kt+_n>In&&(an=In-_n),In-Sn<this.height&&(jt=Math.max(jt,this.height/(In-Sn)),an=(In+Sn)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Bn=this.worldMinX*this.scale,Yn=this.worldMaxX*this.scale,Gn=this.worldSize/2-(Bn+Yn)/2;Jt=(bt+Gn+this.worldSize)%this.worldSize-Gn,Jt-cn<Bn&&(Jt=Bn+cn),Jt+cn>Yn&&(Jt=Yn-cn),Yn-Bn<this.width&&(jt=Math.max(jt,this.width/(Yn-Bn)),Jt=(Yn+Bn)/2)}Jt===bt&&an===kt||(this.center=this.unproject(new j.pointGeometry(Jt,an))),jt&&(this.zoom+=this.scaleZoom(jt)),this._constrainCameraAltitude(),this._unmodified=lt,this._constraining=!1}_minZoomForBounds(){let ot=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(ot=Math.max(ot,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),ot}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const ot=this.centerOffset,lt=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=j.mercatorZfromAltitude(1,this.center.lat)/j.mercatorZfromAltitude(1,j.GLOBE_SCALE_MATCH_LATITUDE));const bt=Up(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,bt),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const kt=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?lt:1),jt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);jt[8]=2*-ot.x/this.width,jt[9]=2*ot.y/this.height;let Jt=j.mul([],jt,kt);if(this.projection.isReprojectedInTileSpace){const pr=this.locationCoordinate(this.center),tr=j.identity([]);j.translate(tr,tr,[pr.x*this.worldSize,pr.y*this.worldSize,0]),j.multiply(tr,tr,Mm(this)),j.translate(tr,tr,[-pr.x*this.worldSize,-pr.y*this.worldSize,0]),j.multiply(Jt,Jt,tr),this.inverseAdjustmentMatrix=function(vr){const Er=Mm(vr,!0);return wt([],[Er[0],Er[1],Er[4],Er[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=j.scale([],Jt,[this.worldSize,this.worldSize,this.worldSize/lt,1]),this.projMatrix=Jt,this.invProjMatrix=j.invert(new Float64Array(16),this.projMatrix);const an=j.invert([],jt);this.frustumCorners=j.FrustumCorners.fromInvProjectionMatrix(an,this.horizonLineFromTop(),this.height);const cn=new Float32Array(16);j.identity(cn),j.scale(cn,cn,[1,-1,1]),j.rotateX(cn,cn,this._pitch),j.rotateZ(cn,cn,this.angle);const _n=j.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Sn=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;_n[8]=2*-ot.x/this.width,_n[9]=2*(ot.y+Sn)/this.height,this.skyboxMatrix=j.multiply(cn,_n,cn);const In=this.point,Bn=In.x,Yn=In.y,Gn=this.width%2/2,Xn=this.height%2/2,Un=Math.cos(this.angle),Nn=Math.sin(this.angle),er=Bn-Math.round(Bn)+Un*Gn+Nn*Xn,Zn=Yn-Math.round(Yn)+Un*Xn+Nn*Gn,fr=new Float64Array(Jt);if(j.translate(fr,fr,[er>.5?er-1:er,Zn>.5?Zn-1:Zn,0]),this.alignedProjMatrix=fr,Jt=j.create(),j.scale(Jt,Jt,[this.width/2,-this.height/2,1]),j.translate(Jt,Jt,[1,-1,0]),this.labelPlaneMatrix=Jt,Jt=j.create(),j.scale(Jt,Jt,[1,-1,1]),j.translate(Jt,Jt,[-1,-1,0]),j.scale(Jt,Jt,[2/this.width,2/this.height,1]),this.glCoordMatrix=Jt,this.pixelMatrix=j.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},Jt=j.invert(new Float64Array(16),this.pixelMatrix),!Jt)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Jt,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=j.calculateGlobeMatrix(this);const pr=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=j.transformMat4(pr,pr,kt),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Jt;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const ot=this.cameraWorldSize,lt=this.cameraPixelsPerMeter,bt=this._camera.position,kt=1/this.height/this._pixelsPerMercatorPixel,jt=[ot,ot,lt];j.scale$2(jt,jt,kt),j.scale$2(bt,bt,-1),j.multiply$2(bt,bt,jt);const Jt=j.create();j.translate(Jt,Jt,bt),j.scale(Jt,Jt,jt),this.mercatorFogMatrix=Jt,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(ot,lt,kt)}_computeCameraPosition(ot){const lt=(ot=ot||this.pixelsPerMeter)/this.pixelsPerMeter,bt=this._camera.forward(),kt=this.point,jt=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*lt-ot/this.worldSize*this._centerAltitude;return[kt.x/this.worldSize-bt[0]*jt,kt.y/this.worldSize-bt[1]*jt,ot/this.worldSize*this._centerAltitude-bt[2]*jt]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(ot){const lt=this._maxCameraBoundsDistance()*Math.cos(this._pitch),bt=this._camera.position[2],kt=ot[2];let jt=1;this.projection.wrap&&(this.center=this.center.wrap()),kt>0&&(jt=Math.min((lt-bt)/kt,1)),this._camera.position=j.scaleAndAdd([],this._camera.position,ot,jt),this._updateStateFromCamera()}_updateStateFromCamera(){const ot=this._camera.position,lt=this._camera.forward(),{pitch:bt,bearing:kt}=this._camera.getPitchBearing(),jt=j.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Jt=this._mercatorZfromZoom(this._maxZoom)*Math.cos(j.degToRad(this._maxPitch)),an=Math.max((ot[2]-jt)/Math.cos(bt),Jt),cn=this._zoomFromMercatorZ(an);j.scaleAndAdd(ot,ot,lt,an),this._pitch=j.clamp(bt,j.degToRad(this.minPitch),j.degToRad(this.maxPitch)),this.angle=j.wrap(kt,-Math.PI,Math.PI),this._setZoom(j.clamp(cn,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new j.MercatorCoordinate(ot[0],ot[1],ot[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(ot){return Math.pow(2,ot)*this.tileSize}_mercatorZfromZoom(ot){return this.cameraToCenterDistance/this._worldSizeFromZoom(ot)}_minimumHeightOverTerrain(){const ot=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(ot)}_zoomFromMercatorZ(ot){return this.scaleZoom(this.cameraToCenterDistance/(ot*this.tileSize))}zoomFromMercatorZAdjusted(ot){const lt=Jt=>{const an=this.getCameraToCenterDistance(this.projection,Jt);return this.scaleZoom(an/(ot*this.tileSize))};let bt,kt=lt(this.zoom),jt=Math.abs(kt-lt(kt));for(;bt!==jt;)kt=lt(kt),bt=jt,jt=Math.abs(kt-lt(kt));return kt}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(j.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(ot,lt){const bt=Math.min(ot.x,lt.x),kt=Math.max(ot.x,lt.x),jt=Math.min(ot.y,lt.y),Jt=Math.max(ot.y,lt.y);if(jt<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const an=[new j.pointGeometry(bt,jt),new j.pointGeometry(kt,Jt),new j.pointGeometry(bt,Jt),new j.pointGeometry(kt,jt)],cn=this.renderWorldCopies?-3:0,_n=this.renderWorldCopies?4:1;for(const Sn of an){const In=this.pointRayIntersection(Sn);if(In.t<0)return!0;const Bn=this.rayIntersectionCoordinate(In);if(Bn.x<cn||Bn.y<0||Bn.x>_n||Bn.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+j.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new j.pointGeometry(0,0),new j.pointGeometry(this.width,this.height))}zoomDeltaToMovement(ot,lt){const bt=j.length(j.sub([],this._camera.position,ot)),kt=this._zoomFromMercatorZ(bt)+lt;return bt-this._mercatorZfromZoom(kt)}getCameraPoint(){if(this.projection.name==="globe"){const ot=function(lt,bt){const kt=[lt[0],lt[1],lt[2],1];j.transformMat4$1(kt,kt,bt);const jt=Math.max(kt[3],1e-6);return[kt[0]/jt,kt[1]/jt,kt[2]/jt,jt]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new j.pointGeometry(ot[0],ot[1])}{const ot=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new j.pointGeometry(0,ot))}}getCameraToCenterDistance(ot,lt=this.zoom){const bt=Up(ot,lt,this.width,this.height,1024),kt=ot.pixelSpaceConversion(this.center.lat,this.worldSize,bt);return .5/Math.tan(.5*this._fov)*this.height*kt}getWorldToCameraMatrix(){const ot=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&j.multiply(ot,ot,this.globeMatrix),ot}}function wv(dt,ot){let lt=!1,bt=null;const kt=()=>{bt=null,lt&&(dt(),bt=setTimeout(kt,ot),lt=!1)};return()=>(lt=!0,bt||kt(),bt)}class ky{constructor(ot){this._hashName=ot&&encodeURIComponent(ot),j.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=wv(this._updateHashUnthrottled.bind(this),300)}addTo(ot){return this._map=ot,j.window.addEventListener("hashchange",this._onHashChange,!1),ot.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),j.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const ot=this._map;if(!ot)return"";const lt=oy(ot);if(this._hashName){const bt=this._hashName;let kt=!1;const jt=j.window.location.hash.slice(1).split("&").map(Jt=>{const an=Jt.split("=")[0];return an===bt?(kt=!0,`${an}=${lt}`):Jt}).filter(Jt=>Jt);return kt||jt.push(`${bt}=${lt}`),`#${jt.join("&")}`}return`#${lt}`}_getCurrentHash(){const ot=j.window.location.hash.replace("#","");if(this._hashName){let lt;return ot.split("&").map(bt=>bt.split("=")).forEach(bt=>{bt[0]===this._hashName&&(lt=bt)}),(lt&&lt[1]||"").split("/")}return ot.split("/")}_onHashChange(){const ot=this._map;if(!ot)return!1;const lt=this._getCurrentHash();if(lt.length>=3&&!lt.some(bt=>isNaN(bt))){const bt=ot.dragRotate.isEnabled()&&ot.touchZoomRotate.isEnabled()?+(lt[3]||0):ot.getBearing();return ot.jumpTo({center:[+lt[2],+lt[1]],zoom:+lt[0],bearing:bt,pitch:+(lt[4]||0)}),!0}return!1}_updateHashUnthrottled(){const ot=j.window.location.href.replace(/(#.+)?$/,this.getHashString());j.window.history.replaceState(j.window.history.state,null,ot)}}function oy(dt,ot){const lt=dt.getCenter(),bt=Math.round(100*dt.getZoom())/100,kt=Math.ceil((bt*Math.LN2+Math.log(512/360/.5))/Math.LN10),jt=Math.pow(10,kt),Jt=Math.round(lt.lng*jt)/jt,an=Math.round(lt.lat*jt)/jt,cn=dt.getBearing(),_n=dt.getPitch();let Sn=ot?`/${Jt}/${an}/${bt}`:`${bt}/${an}/${Jt}`;return(cn||_n)&&(Sn+="/"+Math.round(10*cn)/10),_n&&(Sn+=`/${Math.round(_n)}`),Sn}const up={linearity:.3,easing:j.bezier(0,0,.3,1)},h0=j.extend({deceleration:2500,maxSpeed:1400},up),Dy=j.extend({deceleration:20,maxSpeed:1400},up),Sv=j.extend({deceleration:1e3,maxSpeed:360},up),v_=j.extend({deceleration:1e3,maxSpeed:90},up);class Pl{constructor(ot){this._map=ot,this.clear()}clear(){this._inertiaBuffer=[]}record(ot){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.exported.now(),settings:ot})}_drainInertiaBuffer(){const ot=this._inertiaBuffer,lt=j.exported.now();for(;ot.length>0&&lt-ot[0].time>160;)ot.shift()}_onMoveEnd(ot){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const lt={zoom:0,bearing:0,pitch:0,pan:new j.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:jt}of this._inertiaBuffer)lt.zoom+=jt.zoomDelta||0,lt.bearing+=jt.bearingDelta||0,lt.pitch+=jt.pitchDelta||0,jt.panDelta&&lt.pan._add(jt.panDelta),jt.around&&(lt.around=jt.around),jt.pinchAround&&(lt.pinchAround=jt.pinchAround);const bt=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,kt={};if(lt.pan.mag()){const jt=zp(lt.pan.mag(),bt,j.extend({},h0,ot||{}));kt.offset=lt.pan.mult(jt.amount/lt.pan.mag()),kt.center=this._map.transform.center,Dl(kt,jt)}if(lt.zoom){const jt=zp(lt.zoom,bt,Dy);kt.zoom=this._map.transform.zoom+jt.amount,Dl(kt,jt)}if(lt.bearing){const jt=zp(lt.bearing,bt,Sv);kt.bearing=this._map.transform.bearing+j.clamp(jt.amount,-179,179),Dl(kt,jt)}if(lt.pitch){const jt=zp(lt.pitch,bt,v_);kt.pitch=this._map.transform.pitch+jt.amount,Dl(kt,jt)}if(kt.zoom||kt.bearing){const jt=lt.pinchAround===void 0?lt.around:lt.pinchAround;kt.around=jt?this._map.unproject(jt):this._map.getCenter()}return this.clear(),kt.noMoveStart=!0,kt}}function Dl(dt,ot){(!dt.duration||dt.duration<ot.duration)&&(dt.duration=ot.duration,dt.easing=ot.easing)}function zp(dt,ot,lt){const{maxSpeed:bt,linearity:kt,deceleration:jt}=lt,Jt=j.clamp(dt*kt/(ot/1e3),-bt,bt),an=Math.abs(Jt)/(jt*kt);return{easing:lt.easing,duration:1e3*an,amount:Jt*(an/2)}}class Du extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,lt,bt,kt={}){const jt=pt(lt.getCanvasContainer(),bt),Jt=lt.unproject(jt);super(ot,j.extend({point:jt,lngLat:Jt,originalEvent:bt},kt)),this._defaultPrevented=!1,this.target=lt}}class Ly extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,lt,bt){const kt=ot==="touchend"?bt.changedTouches:bt.touches,jt=Lt(lt.getCanvasContainer(),kt),Jt=jt.map(cn=>lt.unproject(cn)),an=jt.reduce((cn,_n,Sn,In)=>cn.add(_n.div(In.length)),new j.pointGeometry(0,0));super(ot,{points:jt,point:an,lngLats:Jt,lngLat:lt.unproject(an),originalEvent:bt}),this._defaultPrevented=!1}}class f0 extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,lt,bt){super(ot,{originalEvent:bt}),this._defaultPrevented=!1}}class sy{constructor(ot,lt){this._map=ot,this._clickTolerance=lt.clickTolerance}reset(){this._mousedownPos=void 0}wheel(ot){return this._firePreventable(new f0(ot.type,this._map,ot))}mousedown(ot,lt){return this._mousedownPos=lt,this._firePreventable(new Du(ot.type,this._map,ot))}mouseup(ot){this._map.fire(new Du(ot.type,this._map,ot))}preclick(ot){const lt=j.extend({},ot);lt.type="preclick",this._map.fire(new Du(lt.type,this._map,lt))}click(ot,lt){this._mousedownPos&&this._mousedownPos.dist(lt)>=this._clickTolerance||(this.preclick(ot),this._map.fire(new Du(ot.type,this._map,ot)))}dblclick(ot){return this._firePreventable(new Du(ot.type,this._map,ot))}mouseover(ot){this._map.fire(new Du(ot.type,this._map,ot))}mouseout(ot){this._map.fire(new Du(ot.type,this._map,ot))}touchstart(ot){return this._firePreventable(new Ly(ot.type,this._map,ot))}touchmove(ot){this._map.fire(new Ly(ot.type,this._map,ot))}touchend(ot){this._map.fire(new Ly(ot.type,this._map,ot))}touchcancel(ot){this._map.fire(new Ly(ot.type,this._map,ot))}_firePreventable(ot){if(this._map.fire(ot),ot.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pm{constructor(ot){this._map=ot}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(ot){this._map.fire(new Du(ot.type,this._map,ot))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Du("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(ot){this._delayContextMenu?this._contextMenuEvent=ot:this._map.fire(new Du(ot.type,this._map,ot)),this._map.listens("contextmenu")&&ot.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class b_{constructor(ot,lt){this._map=ot,this._el=ot.getCanvasContainer(),this._container=ot.getContainer(),this._clickTolerance=lt.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(ot,lt){this.isEnabled()&&ot.shiftKey&&ot.button===0&&(Mt(),this._startPos=this._lastPos=lt,this._active=!0)}mousemoveWindow(ot,lt){if(!this._active)return;const bt=lt,kt=this._startPos,jt=this._lastPos;if(!kt||!jt||jt.equals(bt)||!this._box&&bt.dist(kt)<this._clickTolerance)return;this._lastPos=bt,this._box||(this._box=gt("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",ot));const Jt=Math.min(kt.x,bt.x),an=Math.max(kt.x,bt.x),cn=Math.min(kt.y,bt.y),_n=Math.max(kt.y,bt.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Jt}px,${cn}px)`,this._box.style.width=an-Jt+"px",this._box.style.height=_n-cn+"px")})}mouseupWindow(ot,lt){if(!this._active)return;const bt=this._startPos,kt=lt;if(bt&&ot.button===0){if(this.reset(),Ot(),bt.x!==kt.x||bt.y!==kt.y)return this._map.fire(new j.Event("boxzoomend",{originalEvent:ot})),{cameraAnimation:jt=>jt.fitScreenCoordinates(bt,kt,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",ot)}}keydown(ot){this._active&&ot.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",ot))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Ft(),delete this._startPos,delete this._lastPos}_fireEvent(ot,lt){return this._map.fire(new j.Event(ot,{originalEvent:lt}))}}function Vp(dt,ot){const lt={};for(let bt=0;bt<dt.length;bt++)lt[dt[bt].identifier]=ot[bt];return lt}class cm{constructor(ot){this.reset(),this.numTouches=ot.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(ot,lt,bt){(this.centroid||bt.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=ot.timeStamp),bt.length===this.numTouches&&(this.centroid=function(kt){const jt=new j.pointGeometry(0,0);for(const Jt of kt)jt._add(Jt);return jt.div(kt.length)}(lt),this.touches=Vp(bt,lt)))}touchmove(ot,lt,bt){if(this.aborted||!this.centroid)return;const kt=Vp(bt,lt);for(const jt in this.touches){const Jt=this.touches[jt],an=kt[jt];(!an||an.dist(Jt)>30)&&(this.aborted=!0)}}touchend(ot,lt,bt){if((!this.centroid||ot.timeStamp-this.startTime>500)&&(this.aborted=!0),bt.length===0){const kt=!this.aborted&&this.centroid;if(this.reset(),kt)return kt}}}class Wp{constructor(ot){this.singleTap=new cm(ot),this.numTaps=ot.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(ot,lt,bt){this.singleTap.touchstart(ot,lt,bt)}touchmove(ot,lt,bt){this.singleTap.touchmove(ot,lt,bt)}touchend(ot,lt,bt){const kt=this.singleTap.touchend(ot,lt,bt);if(kt){const jt=ot.timeStamp-this.lastTime<500,Jt=!this.lastTap||this.lastTap.dist(kt)<30;if(jt&&Jt||this.reset(),this.count++,this.lastTime=ot.timeStamp,this.lastTap=kt,this.count===this.numTaps)return this.reset(),kt}}}class By{constructor(){this._zoomIn=new Wp({numTouches:1,numTaps:2}),this._zoomOut=new Wp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(ot,lt,bt){this._zoomIn.touchstart(ot,lt,bt),this._zoomOut.touchstart(ot,lt,bt)}touchmove(ot,lt,bt){this._zoomIn.touchmove(ot,lt,bt),this._zoomOut.touchmove(ot,lt,bt)}touchend(ot,lt,bt){const kt=this._zoomIn.touchend(ot,lt,bt),jt=this._zoomOut.touchend(ot,lt,bt);return kt?(this._active=!0,ot.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Jt=>Jt.easeTo({duration:300,zoom:Jt.getZoom()+1,around:Jt.unproject(kt)},{originalEvent:ot})}):jt?(this._active=!0,ot.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Jt=>Jt.easeTo({duration:300,zoom:Jt.getZoom()-1,around:Jt.unproject(jt)},{originalEvent:ot})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const km={0:1,2:2};class w_{constructor(ot){this.reset(),this._clickTolerance=ot.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(ot,lt){return!1}_move(ot,lt){return{}}mousedown(ot,lt){if(this._lastPoint)return;const bt=nn(ot);this._correctButton(ot,bt)&&(this._lastPoint=lt,this._eventButton=bt)}mousemoveWindow(ot,lt){const bt=this._lastPoint;if(bt){if(ot.preventDefault(),this._eventButton!=null&&function(kt,jt){const Jt=km[jt];return kt.buttons===void 0||(kt.buttons&Jt)!==Jt}(ot,this._eventButton))this.reset();else if(this._moved||!(lt.dist(bt)<this._clickTolerance))return this._moved=!0,this._lastPoint=lt,this._move(bt,lt)}}mouseupWindow(ot){this._lastPoint&&nn(ot)===this._eventButton&&(this._moved&&Ot(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class d0 extends w_{mousedown(ot,lt){super.mousedown(ot,lt),this._lastPoint&&(this._active=!0)}_correctButton(ot,lt){return lt===0&&!ot.ctrlKey}_move(ot,lt){return{around:lt,panDelta:lt.sub(ot)}}}class xv extends w_{_correctButton(ot,lt){return lt===0&&ot.ctrlKey||lt===2}_move(ot,lt){const bt=.8*(lt.x-ot.x);if(bt)return this._active=!0,{bearingDelta:bt}}contextmenu(ot){ot.preventDefault()}}class Dm extends w_{_correctButton(ot,lt){return lt===0&&ot.ctrlKey||lt===2}_move(ot,lt){const bt=-.5*(lt.y-ot.y);if(bt)return this._active=!0,{pitchDelta:bt}}contextmenu(ot){ot.preventDefault()}}class g0{constructor(ot,lt){this._map=ot,this._el=ot.getCanvasContainer(),this._minTouches=1,this._clickTolerance=lt.clickTolerance||1,this.reset(),j.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new j.pointGeometry(0,0)}touchstart(ot,lt,bt){return this._calculateTransform(ot,lt,bt)}touchmove(ot,lt,bt){if(this._active&&!(bt.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(bt.length===1&&!j.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return ot.cancelable&&ot.preventDefault(),this._calculateTransform(ot,lt,bt)}}touchend(ot,lt,bt){this._calculateTransform(ot,lt,bt),this._active&&bt.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(ot,lt,bt){bt.length>0&&(this._active=!0);const kt=Vp(bt,lt),jt=new j.pointGeometry(0,0),Jt=new j.pointGeometry(0,0);let an=0;for(const _n in kt){const Sn=kt[_n],In=this._touches[_n];In&&(jt._add(Sn),Jt._add(Sn.sub(In)),an++,kt[_n]=Sn)}if(this._touches=kt,an<this._minTouches||!Jt.mag())return;const cn=Jt.div(an);return this._sum._add(cn),this._sum.mag()<this._clickTolerance?void 0:{around:jt.div(an),panDelta:cn}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=gt("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Lm{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(ot){}_move(ot,lt,bt){return{}}touchstart(ot,lt,bt){this._firstTwoTouches||bt.length<2||(this._firstTwoTouches=[bt[0].identifier,bt[1].identifier],this._start([lt[0],lt[1]]))}touchmove(ot,lt,bt){const kt=this._firstTwoTouches;if(!kt)return;ot.preventDefault();const[jt,Jt]=kt,an=Gp(bt,lt,jt),cn=Gp(bt,lt,Jt);if(!an||!cn)return;const _n=this._aroundCenter?null:an.add(cn).div(2);return this._move([an,cn],_n,ot)}touchend(ot,lt,bt){if(!this._firstTwoTouches)return;const[kt,jt]=this._firstTwoTouches,Jt=Gp(bt,lt,kt),an=Gp(bt,lt,jt);Jt&&an||(this._active&&Ot(),this.reset())}touchcancel(){this.reset()}enable(ot){this._enabled=!0,this._aroundCenter=!!ot&&ot.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Gp(dt,ot,lt){for(let bt=0;bt<dt.length;bt++)if(dt[bt].identifier===lt)return ot[bt]}function S_(dt,ot){return Math.log(dt/ot)/Math.LN2}class Wn extends Lm{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(ot){this._startDistance=this._distance=ot[0].dist(ot[1])}_move(ot,lt){const bt=this._distance;if(this._distance=ot[0].dist(ot[1]),this._active||!(Math.abs(S_(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:S_(this._distance,bt),pinchAround:lt}}}function hm(dt,ot){return 180*dt.angleWith(ot)/Math.PI}class Wl extends Lm{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(ot){this._startVector=this._vector=ot[0].sub(ot[1]),this._minDiameter=ot[0].dist(ot[1])}_move(ot,lt){const bt=this._vector;if(this._vector=ot[0].sub(ot[1]),bt&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:hm(this._vector,bt),pinchAround:lt}}_isBelowThreshold(ot){this._minDiameter=Math.min(this._minDiameter,ot.mag());const lt=25/(Math.PI*this._minDiameter)*360,bt=this._startVector;if(!bt)return!1;const kt=hm(ot,bt);return Math.abs(kt)<lt}}function Cu(dt){return Math.abs(dt.y)>Math.abs(dt.x)}class Es extends Lm{constructor(ot){super(),this._map=ot}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(ot){this._lastPoints=ot,Cu(ot[0].sub(ot[1]))&&(this._valid=!1)}_move(ot,lt,bt){const kt=this._lastPoints;if(!kt)return;const jt=ot[0].sub(kt[0]),Jt=ot[1].sub(kt[1]);return this._map._cooperativeGestures&&!j.isFullscreen()&&bt.touches.length<3||(this._valid=this.gestureBeginsVertically(jt,Jt,bt.timeStamp),!this._valid)?void 0:(this._lastPoints=ot,this._active=!0,{pitchDelta:(jt.y+Jt.y)/2*-.5})}gestureBeginsVertically(ot,lt,bt){if(this._valid!==void 0)return this._valid;const kt=ot.mag()>=2,jt=lt.mag()>=2;if(!kt&&!jt)return;if(!kt||!jt)return this._firstMove==null&&(this._firstMove=bt),bt-this._firstMove<100&&void 0;const Jt=ot.y>0==lt.y>0;return Cu(ot)&&Cu(lt)&&Jt}}const T1={panStep:100,bearingStep:15,pitchStep:10};class C1{constructor(){const ot=T1;this._panStep=ot.panStep,this._bearingStep=ot.bearingStep,this._pitchStep=ot.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(ot){if(ot.altKey||ot.ctrlKey||ot.metaKey)return;let lt=0,bt=0,kt=0,jt=0,Jt=0;switch(ot.keyCode){case 61:case 107:case 171:case 187:lt=1;break;case 189:case 109:case 173:lt=-1;break;case 37:ot.shiftKey?bt=-1:(ot.preventDefault(),jt=-1);break;case 39:ot.shiftKey?bt=1:(ot.preventDefault(),jt=1);break;case 38:ot.shiftKey?kt=1:(ot.preventDefault(),Jt=-1);break;case 40:ot.shiftKey?kt=-1:(ot.preventDefault(),Jt=1);break;default:return}return this._rotationDisabled&&(bt=0,kt=0),{cameraAnimation:an=>{const cn=an.getZoom();an.easeTo({duration:300,easeId:"keyboardHandler",easing:Hp,zoom:lt?Math.round(cn)+lt*(ot.shiftKey?2:1):cn,bearing:an.getBearing()+bt*this._bearingStep,pitch:an.getPitch()+kt*this._pitchStep,offset:[-jt*this._panStep,-Jt*this._panStep],center:an.getCenter()},{originalEvent:ot})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hp(dt){return dt*(2-dt)}const $p=4.000244140625;class ay{constructor(ot,lt){this._map=ot,this._el=ot.getCanvasContainer(),this._handler=lt,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,j.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(ot){this._defaultZoomRate=ot}setWheelZoomRate(ot){this._wheelZoomRate=ot}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(ot){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!ot&&ot.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(ot){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(ot.ctrlKey||ot.metaKey||this.isZooming()||j.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let lt=ot.deltaMode===j.window.WheelEvent.DOM_DELTA_LINE?40*ot.deltaY:ot.deltaY;const bt=j.exported.now(),kt=bt-(this._lastWheelEventTime||0);this._lastWheelEventTime=bt,lt!==0&&lt%$p==0?this._type="wheel":lt!==0&&Math.abs(lt)<4?this._type="trackpad":kt>400?(this._type=null,this._lastValue=lt,this._timeout=setTimeout(this._onTimeout,40,ot)):this._type||(this._type=Math.abs(kt*lt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,lt+=this._lastValue)),ot.shiftKey&&lt&&(lt/=4),this._type&&(this._lastWheelEvent=ot,this._delta-=lt,this._active||this._start(ot)),ot.preventDefault()}_onTimeout(ot){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(ot)}_start(ot){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const lt=pt(this._el,ot);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:lt,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const ot=this._map.transform;this._type==="wheel"&&ot.projection.wrap&&(ot._center.lng>=180||ot._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const lt=()=>ot._terrainEnabled()&&this._aroundCoord?ot.computeZoomRelativeTo(this._aroundCoord):ot.zoom;if(this._delta!==0){const cn=this._type==="wheel"&&Math.abs(this._delta)>$p?this._wheelZoomRate:this._defaultZoomRate;let _n=2/(1+Math.exp(-Math.abs(this._delta*cn)));this._delta<0&&_n!==0&&(_n=1/_n);const Sn=lt(),In=Math.pow(2,Sn),Bn=typeof this._targetZoom=="number"?ot.zoomScale(this._targetZoom):In;this._targetZoom=Math.min(ot.maxZoom,Math.max(ot.minZoom,ot.scaleZoom(Bn*_n))),this._type==="wheel"&&(this._startZoom=Sn,this._easing=this._smoothOutEasing(200)),this._delta=0}const bt=typeof this._targetZoom=="number"?this._targetZoom:lt(),kt=this._startZoom,jt=this._easing;let Jt,an=!1;if(this._type==="wheel"&&kt&&jt){const cn=Math.min((j.exported.now()-this._lastWheelEventTime)/200,1),_n=jt(cn);Jt=j.number(kt,bt,_n),cn<1?this._frameId||(this._frameId=!0):an=!0}else Jt=bt,an=!0;return this._active=!0,an&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!an,zoomDelta:Jt-lt(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(ot){let lt=j.ease;if(this._prevEase){const bt=this._prevEase,kt=(j.exported.now()-bt.start)/bt.duration,jt=bt.easing(kt+.01)-bt.easing(kt),Jt=.27/Math.sqrt(jt*jt+1e-4)*.01,an=Math.sqrt(.0729-Jt*Jt);lt=j.bezier(Jt,an,.25,1)}return this._prevEase={start:j.exported.now(),duration:ot,easing:lt},lt}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=gt("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(j.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Ap{constructor(ot,lt){this._clickZoom=ot,this._tapZoom=lt}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class x_{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(ot,lt){return ot.preventDefault(),{cameraAnimation:bt=>{bt.easeTo({duration:300,zoom:bt.getZoom()+(ot.shiftKey?-1:1),around:bt.unproject(lt)},{originalEvent:ot})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ao{constructor(){this._tap=new Wp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(ot,lt,bt){this._swipePoint||(this._tapTime&&ot.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?bt.length>0&&(this._swipePoint=lt[0],this._swipeTouch=bt[0].identifier):this._tap.touchstart(ot,lt,bt))}touchmove(ot,lt,bt){if(this._tapTime){if(this._swipePoint){if(bt[0].identifier!==this._swipeTouch)return;const kt=lt[0],jt=kt.y-this._swipePoint.y;return this._swipePoint=kt,ot.preventDefault(),this._active=!0,{zoomDelta:jt/128}}}else this._tap.touchmove(ot,lt,bt)}touchend(ot,lt,bt){this._tapTime?this._swipePoint&&bt.length===0&&this.reset():this._tap.touchend(ot,lt,bt)&&(this._tapTime=ot.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class p0{constructor(ot,lt,bt){this._el=ot,this._mousePan=lt,this._touchPan=bt}enable(ot){this._inertiaOptions=ot||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ep{constructor(ot,lt,bt){this._pitchWithRotate=ot.pitchWithRotate,this._mouseRotate=lt,this._mousePitch=bt}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jy{constructor(ot,lt,bt,kt){this._el=ot,this._touchZoom=lt,this._touchRotate=bt,this._tapDragZoom=kt,this._rotationDisabled=!1,this._enabled=!0}enable(ot){this._touchZoom.enable(ot),this._rotationDisabled||this._touchRotate.enable(ot),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fm=dt=>dt.zoom||dt.drag||dt.pitch||dt.rotate;class m0 extends j.Event{}class y0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(ot,lt){const bt=j.sub([],lt,ot);this.radius=j.length(bt[2]<0?j.div([],bt,this.constants):[bt[0],bt[1],0])}projectRay(ot){j.div(ot,ot,this.constants),j.normalize(ot,ot),j.mul$1(ot,ot,this.constants);const lt=j.scale$2([],ot,this.radius);if(lt[2]>0){const bt=j.scale$2([],[0,0,1],j.dot(lt,[0,0,1])),kt=j.scale$2([],j.normalize([],[lt[0],lt[1],0]),this.radius),jt=j.add([],lt,j.scale$2([],j.sub([],j.add([],kt,bt),lt),2));lt[0]=jt[0],lt[1]=jt[1]}return lt}}function Fy(dt){return dt.panDelta&&dt.panDelta.mag()||dt.zoomDelta||dt.bearingDelta||dt.pitchDelta}class Tp{constructor(ot,lt){this._map=ot,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pl(ot),this._bearingSnap=lt.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new y0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(lt),j.bindAll(["handleEvent","handleWindowEvent"],this);const bt=this._el;this._listeners=[[bt,"touchstart",{passive:!0}],[bt,"touchmove",{passive:!1}],[bt,"touchend",void 0],[bt,"touchcancel",void 0],[bt,"mousedown",void 0],[bt,"mousemove",void 0],[bt,"mouseup",void 0],[j.window.document,"mousemove",{capture:!0}],[j.window.document,"mouseup",void 0],[bt,"mouseover",void 0],[bt,"mouseout",void 0],[bt,"dblclick",void 0],[bt,"click",void 0],[bt,"keydown",{capture:!1}],[bt,"keyup",void 0],[bt,"wheel",{passive:!1}],[bt,"contextmenu",void 0],[j.window,"blur",void 0]];for(const[kt,jt,Jt]of this._listeners)kt.addEventListener(jt,kt===j.window.document?this.handleWindowEvent:this.handleEvent,Jt)}destroy(){for(const[ot,lt,bt]of this._listeners)ot.removeEventListener(lt,ot===j.window.document?this.handleWindowEvent:this.handleEvent,bt)}_addDefaultHandlers(ot){const lt=this._map,bt=lt.getCanvasContainer();this._add("mapEvent",new sy(lt,ot));const kt=lt.boxZoom=new b_(lt,ot);this._add("boxZoom",kt);const jt=new By,Jt=new x_;lt.doubleClickZoom=new Ap(Jt,jt),this._add("tapZoom",jt),this._add("clickZoom",Jt);const an=new Ao;this._add("tapDragZoom",an);const cn=lt.touchPitch=new Es(lt);this._add("touchPitch",cn);const _n=new xv(ot),Sn=new Dm(ot);lt.dragRotate=new Ep(ot,_n,Sn),this._add("mouseRotate",_n,["mousePitch"]),this._add("mousePitch",Sn,["mouseRotate"]);const In=new d0(ot),Bn=new g0(lt,ot);lt.dragPan=new p0(bt,In,Bn),this._add("mousePan",In),this._add("touchPan",Bn,["touchZoom","touchRotate"]);const Yn=new Wl,Gn=new Wn;lt.touchZoomRotate=new jy(bt,Gn,Yn,an),this._add("touchRotate",Yn,["touchPan","touchZoom"]),this._add("touchZoom",Gn,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Pm(lt));const Xn=lt.scrollZoom=new ay(lt,this);this._add("scrollZoom",Xn,["mousePan"]);const Un=lt.keyboard=new C1;this._add("keyboard",Un);for(const Nn of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])ot.interactive&&ot[Nn]&&lt[Nn].enable(ot[Nn])}_add(ot,lt,bt){this._handlers.push({handlerName:ot,handler:lt,allowed:bt}),this._handlersById[ot]=lt}stop(ot){if(!this._updatingCamera){for(const{handler:lt}of this._handlers)lt.reset();this._inertia.clear(),this._fireEvents({},{},ot),this._changes=[]}}isActive(){for(const{handler:ot}of this._handlers)if(ot.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fm(this._eventsInProgress)||this.isZooming()}_blockedByActive(ot,lt,bt){for(const kt in ot)if(kt!==bt&&(!lt||lt.indexOf(kt)<0))return!0;return!1}handleWindowEvent(ot){this.handleEvent(ot,`${ot.type}Window`)}_getMapTouches(ot){const lt=[];for(const bt of ot)this._el.contains(bt.target)&&lt.push(bt);return lt}handleEvent(ot,lt){this._updatingCamera=!0;const bt=ot.type==="renderFrame",kt=bt?void 0:ot,jt={needsRenderFrame:!1},Jt={},an={},cn=ot.touches?this._getMapTouches(ot.touches):void 0,_n=cn?Lt(this._el,cn):bt?void 0:pt(this._el,ot);for(const{handlerName:Bn,handler:Yn,allowed:Gn}of this._handlers){if(!Yn.isEnabled())continue;let Xn;this._blockedByActive(an,Gn,Bn)?Yn.reset():Yn[lt||ot.type]&&(Xn=Yn[lt||ot.type](ot,_n,cn),this.mergeHandlerResult(jt,Jt,Xn,Bn,kt),Xn&&Xn.needsRenderFrame&&this._triggerRenderFrame()),(Xn||Yn.isActive())&&(an[Bn]=Yn)}const Sn={};for(const Bn in this._previousActiveHandlers)an[Bn]||(Sn[Bn]=kt);this._previousActiveHandlers=an,(Object.keys(Sn).length||Fy(jt))&&(this._changes.push([jt,Jt,Sn]),this._triggerRenderFrame()),(Object.keys(an).length||Fy(jt))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:In}=jt;In&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],In(this._map))}mergeHandlerResult(ot,lt,bt,kt,jt){if(!bt)return;j.extend(ot,bt);const Jt={handlerName:kt,originalEvent:bt.originalEvent||jt};bt.zoomDelta!==void 0&&(lt.zoom=Jt),bt.panDelta!==void 0&&(lt.drag=Jt),bt.pitchDelta!==void 0&&(lt.pitch=Jt),bt.bearingDelta!==void 0&&(lt.rotate=Jt)}_applyChanges(){const ot={},lt={},bt={};for(const[kt,jt,Jt]of this._changes)kt.panDelta&&(ot.panDelta=(ot.panDelta||new j.pointGeometry(0,0))._add(kt.panDelta)),kt.zoomDelta&&(ot.zoomDelta=(ot.zoomDelta||0)+kt.zoomDelta),kt.bearingDelta&&(ot.bearingDelta=(ot.bearingDelta||0)+kt.bearingDelta),kt.pitchDelta&&(ot.pitchDelta=(ot.pitchDelta||0)+kt.pitchDelta),kt.around!==void 0&&(ot.around=kt.around),kt.aroundCoord!==void 0&&(ot.aroundCoord=kt.aroundCoord),kt.pinchAround!==void 0&&(ot.pinchAround=kt.pinchAround),kt.noInertia&&(ot.noInertia=kt.noInertia),j.extend(lt,jt),j.extend(bt,Jt);this._updateMapTransform(ot,lt,bt),this._changes=[]}_updateMapTransform(ot,lt,bt){const kt=this._map,jt=kt.transform,Jt=er=>[er.x,er.y,er.z];if((er=>{const Zn=this._eventsInProgress.drag;return Zn&&!this._handlersById[Zn.handlerName].isActive()})()&&!Fy(ot)){const er=jt.zoom;jt.cameraElevationReference="sea",jt.recenterOnTerrain(),jt.cameraElevationReference="ground",er!==jt.zoom&&this._map._update(!0)}if(!Fy(ot))return void this._fireEvents(lt,bt,!0);let{panDelta:an,zoomDelta:cn,bearingDelta:_n,pitchDelta:Sn,around:In,aroundCoord:Bn,pinchAround:Yn}=ot;Yn!==void 0&&(In=Yn),(er=>lt.drag&&!this._eventsInProgress.drag)()&&In&&(this._dragOrigin=Jt(jt.pointCoordinate3D(In)),this._trackingEllipsoid.setup(jt._camera.position,this._dragOrigin)),jt.cameraElevationReference="sea",kt._stop(!0),In=In||kt.transform.centerPoint,_n&&(jt.bearing+=_n),Sn&&(jt.pitch+=Sn),jt._updateCameraState();const Gn=[0,0,0];if(an)if(jt.projection.name==="mercator"){const er=this._trackingEllipsoid.projectRay(jt.screenPointToMercatorRay(In).dir),Zn=this._trackingEllipsoid.projectRay(jt.screenPointToMercatorRay(In.sub(an)).dir);Gn[0]=Zn[0]-er[0],Gn[1]=Zn[1]-er[1]}else{const er=jt.pointCoordinate(In);if(jt.projection.name==="globe"){an=an.rotate(-jt.angle);const Zn=jt._pixelsPerMercatorPixel/jt.worldSize;Gn[0]=-an.x*j.mercatorScale(j.latFromMercatorY(er.y))*Zn,Gn[1]=-an.y*j.mercatorScale(jt.center.lat)*Zn}else{const Zn=jt.pointCoordinate(In.sub(an));er&&Zn&&(Gn[0]=Zn.x-er.x,Gn[1]=Zn.y-er.y)}}const Xn=jt.zoom,Un=[0,0,0];if(cn){const er=Jt(Bn||jt.pointCoordinate3D(In)),Zn={dir:j.normalize([],j.sub([],er,jt._camera.position))};if(Zn.dir[2]<0){const fr=jt.zoomDeltaToMovement(er,cn);j.scale$2(Un,Zn.dir,fr)}}const Nn=j.add(Gn,Gn,Un);jt._translateCameraConstrained(Nn),cn&&Math.abs(jt.zoom-Xn)>1e-4&&jt.recenterOnTerrain(),jt.cameraElevationReference="ground",this._map._update(),ot.noInertia||this._inertia.record(ot),this._fireEvents(lt,bt,!0)}_fireEvents(ot,lt,bt){const kt=fm(this._eventsInProgress),jt=fm(ot),Jt={};for(const Sn in ot){const{originalEvent:In}=ot[Sn];this._eventsInProgress[Sn]||(Jt[`${Sn}start`]=In),this._eventsInProgress[Sn]=ot[Sn]}!kt&&jt&&this._fireEvent("movestart",jt.originalEvent);for(const Sn in Jt)this._fireEvent(Sn,Jt[Sn]);jt&&this._fireEvent("move",jt.originalEvent);for(const Sn in ot){const{originalEvent:In}=ot[Sn];this._fireEvent(Sn,In)}const an={};let cn;for(const Sn in this._eventsInProgress){const{handlerName:In,originalEvent:Bn}=this._eventsInProgress[Sn];this._handlersById[In].isActive()||(delete this._eventsInProgress[Sn],cn=lt[In]||Bn,an[`${Sn}end`]=cn)}for(const Sn in an)this._fireEvent(Sn,an[Sn]);const _n=fm(this._eventsInProgress);if(bt&&(kt||jt)&&!_n){this._updatingCamera=!0;const Sn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),In=Bn=>Bn!==0&&-this._bearingSnap<Bn&&Bn<this._bearingSnap;Sn?(In(Sn.bearing||this._map.getBearing())&&(Sn.bearing=0),this._map.easeTo(Sn,{originalEvent:cn})):(this._map.fire(new j.Event("moveend",{originalEvent:cn})),In(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(ot,lt){this._map.fire(new j.Event(ot,lt?{originalEvent:lt}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(ot=>{this._frameId=void 0,this.handleEvent(new m0("renderFrame",{timeStamp:ot})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Av="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class _0 extends j.Evented{constructor(ot,lt){super(),this._moving=!1,this._zooming=!1,this.transform=ot,this._bearingSnap=lt.bearingSnap,j.bindAll(["_renderFrameCallback"],this)}getCenter(){return new j.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(ot,lt){return this.jumpTo({center:ot},lt)}panBy(ot,lt,bt){return ot=j.pointGeometry.convert(ot).mult(-1),this.panTo(this.transform.center,j.extend({offset:ot},lt),bt)}panTo(ot,lt,bt){return this.easeTo(j.extend({center:ot},lt),bt)}getZoom(){return this.transform.zoom}setZoom(ot,lt){return this.jumpTo({zoom:ot},lt),this}zoomTo(ot,lt,bt){return this.easeTo(j.extend({zoom:ot},lt),bt)}zoomIn(ot,lt){return this.zoomTo(this.getZoom()+1,ot,lt),this}zoomOut(ot,lt){return this.zoomTo(this.getZoom()-1,ot,lt),this}getBearing(){return this.transform.bearing}setBearing(ot,lt){return this.jumpTo({bearing:ot},lt),this}getPadding(){return this.transform.padding}setPadding(ot,lt){return this.jumpTo({padding:ot},lt),this}rotateTo(ot,lt,bt){return this.easeTo(j.extend({bearing:ot},lt),bt)}resetNorth(ot,lt){return this.rotateTo(0,j.extend({duration:1e3},ot),lt),this}resetNorthPitch(ot,lt){return this.easeTo(j.extend({bearing:0,pitch:0,duration:1e3},ot),lt),this}snapToNorth(ot,lt){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(ot,lt):this}getPitch(){return this.transform.pitch}setPitch(ot,lt){return this.jumpTo({pitch:ot},lt),this}cameraForBounds(ot,lt){ot=j.LngLatBounds.convert(ot);const bt=lt&&lt.bearing||0,kt=ot.getNorthWest(),jt=ot.getSouthEast();return this._cameraForBounds(this.transform,kt,jt,bt,lt)}_extendCameraOptions(ot){const lt={top:0,bottom:0,right:0,left:0};if(typeof(ot=j.extend({padding:lt,offset:[0,0],maxZoom:this.transform.maxZoom},ot)).padding=="number"){const bt=ot.padding;ot.padding={top:bt,bottom:bt,right:bt,left:bt}}return ot.padding=j.extend(lt,ot.padding),ot}_minimumAABBFrustumDistance(ot,lt){const bt=lt.max[0]-lt.min[0],kt=lt.max[1]-lt.min[1];return bt/kt>ot.aspect?bt/(2*Math.tan(.5*ot.fovX)*ot.aspect):kt/(2*Math.tan(.5*ot.fovY)*ot.aspect)}_cameraForBoundsOnGlobe(ot,lt,bt,kt,jt){const Jt=ot.clone(),an=this._extendCameraOptions(jt);Jt.bearing=kt;const cn=j.LngLat.convert(lt),_n=j.LngLat.convert(bt),Sn=.5*(cn.lat+_n.lat),In=.5*(cn.lng+_n.lng),Bn=j.latLngToECEF(Sn,In),Yn=j.normalize([],Bn),Gn=j.normalize([],j.cross([],Yn,[0,1,0])),Xn=j.cross([],Gn,Yn),Un=[Gn[0],Gn[1],Gn[2],0,Xn[0],Xn[1],Xn[2],0,Yn[0],Yn[1],Yn[2],0,0,0,0,1],Nn=[Bn,j.latLngToECEF(cn.lat,cn.lng),j.latLngToECEF(_n.lat,cn.lng),j.latLngToECEF(_n.lat,_n.lng),j.latLngToECEF(cn.lat,_n.lng),j.latLngToECEF(Sn,cn.lng),j.latLngToECEF(Sn,_n.lng),j.latLngToECEF(cn.lat,In),j.latLngToECEF(_n.lat,In)];let er=j.Aabb.fromPoints(Nn.map(lo=>[j.dot(Gn,lo),j.dot(Xn,lo),j.dot(Yn,lo)]));const Zn=j.transformMat4([],er.center,Un);j.squaredLength(Zn)===0&&j.set(Zn,0,0,1),j.normalize(Zn,Zn),j.scale$2(Zn,Zn,j.GLOBE_RADIUS),Jt.center=j.ecefToLatLng(Zn);const fr=Jt.getWorldToCameraMatrix(),pr=j.invert(new Float64Array(16),fr);er=j.Aabb.applyTransform(er,j.multiply([],fr,Un)),j.transformMat4(Zn,Zn,fr);const tr=.5*(er.max[2]-er.min[2]),vr=this._minimumAABBFrustumDistance(Jt,er),Er=j.scale$2([],[0,0,1],tr),Lr=j.add(Er,Zn,Er),kr=vr+(Jt.pitch===0?0:j.distance(Zn,Lr)),io=Jt.globeCenterInViewSpace,Ar=j.sub([],Zn,[io[0],io[1],io[2]]);j.normalize(Ar,Ar),j.scale$2(Ar,Ar,kr);const $r=j.add([],Zn,Ar);j.transformMat4($r,$r,pr);const qr=j.earthRadius/j.GLOBE_RADIUS,Or=j.length($r),Sr=j.mercatorZfromAltitude(Or*qr-j.earthRadius,0),mo=Math.min(Jt.zoomFromMercatorZAdjusted(Sr),an.maxZoom);return mo>.5*(j.GLOBE_ZOOM_THRESHOLD_MIN+j.GLOBE_ZOOM_THRESHOLD_MAX)?(Jt.setProjection({name:"mercator"}),Jt.zoom=mo,this._cameraForBounds(Jt,lt,bt,kt,jt)):{center:Jt.center,zoom:mo,bearing:kt}}queryTerrainElevation(ot,lt){const bt=this.transform.elevation;return bt?(lt=j.extend({},{exaggerated:!0},lt),bt.getAtPoint(j.MercatorCoordinate.fromLngLat(ot),null,lt.exaggerated)):null}_cameraForBounds(ot,lt,bt,kt,jt){if(ot.projection.name==="globe")return this._cameraForBoundsOnGlobe(ot,lt,bt,kt,jt);const Jt=ot.clone(),an=this._extendCameraOptions(jt),cn=Jt.padding;Jt.bearing=kt;const _n=j.LngLat.convert(lt),Sn=j.LngLat.convert(bt),In=new j.LngLat(_n.lng,Sn.lat),Bn=new j.LngLat(Sn.lng,_n.lat),Yn=Jt.project(_n),Gn=Jt.project(Sn),Xn=this.queryTerrainElevation(_n),Un=this.queryTerrainElevation(Sn),Nn=this.queryTerrainElevation(In),er=this.queryTerrainElevation(Bn),Zn=[[Yn.x,Yn.y,Math.min(Xn||0,Un||0,Nn||0,er||0)],[Gn.x,Gn.y,Math.max(Xn||0,Un||0,Nn||0,er||0)]];let fr=j.Aabb.fromPoints(Zn);const pr=Jt.getWorldToCameraMatrix(),tr=j.invert(new Float64Array(16),pr);fr=j.Aabb.applyTransform(fr,pr);const vr=j.sub([],fr.max,fr.min),Er=cn.left||0,Lr=cn.right||0,kr=cn.bottom||0,io=cn.top||0,{left:Ar,right:$r,top:qr,bottom:Or}=an.padding,Sr=.5*(Er+Lr),mo=.5*(io+kr),lo=Math.min(Jt.scaleZoom(Jt.scale*Math.min((Jt.width-(Er+Lr+Ar+$r))/vr[0],(Jt.height-(kr+io+Or+qr))/vr[1])),an.maxZoom),ho=Jt.scale/Jt.zoomScale(lo);fr=new j.Aabb([fr.min[0]-(Ar+Sr)*ho,fr.min[1]-(Or+mo)*ho,fr.min[2]],[fr.max[0]+($r+Sr)*ho,fr.max[1]+(qr+mo)*ho,fr.max[2]]);const uo=.5*vr[2],Po=this._minimumAABBFrustumDistance(Jt,fr),zo=[0,0,1,0];j.transformMat4$1(zo,zo,pr),j.normalize$2(zo,zo);const Uo=j.scale$2([],zo,Po+uo),Bo=j.add([],fr.center,Uo),co=(typeof an.offset.x=="number"&&typeof an.offset.y=="number"?new j.pointGeometry(an.offset.x,an.offset.y):j.pointGeometry.convert(an.offset)).rotate(-j.degToRad(kt));fr.center[0]-=co.x*ho,fr.center[1]+=co.y*ho,j.transformMat4(fr.center,fr.center,tr),j.transformMat4(Bo,Bo,tr);const Yo=[fr.center[0],fr.center[1],Bo[2]*Jt.pixelsPerMeter];j.scale$2(Yo,Yo,1/Jt.worldSize);const ls=j.lngFromMercatorX(Yo[0]),Ls=j.latFromMercatorY(Yo[1]),Ns=Math.min(Jt._zoomFromMercatorZ(Yo[2]),an.maxZoom),Os=new j.LngLat(ls,Ls);return Jt.mercatorFromTransition&&Ns<.5*(j.GLOBE_ZOOM_THRESHOLD_MIN+j.GLOBE_ZOOM_THRESHOLD_MAX)?(Jt.setProjection({name:"globe"}),Jt.zoom=Ns,this._cameraForBounds(Jt,lt,bt,kt,jt)):{center:Os,zoom:Ns,bearing:kt}}fitBounds(ot,lt,bt){const kt=this.cameraForBounds(ot,lt);return this._fitInternal(kt,lt,bt)}fitScreenCoordinates(ot,lt,bt,kt,jt){const Jt=j.pointGeometry.convert(ot),an=j.pointGeometry.convert(lt),cn=new j.pointGeometry(Math.min(Jt.x,an.x),Math.min(Jt.y,an.y)),_n=new j.pointGeometry(Math.max(Jt.x,an.x),Math.max(Jt.y,an.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(Jt,an))return this;const Sn=this.transform.pointLocation3D(cn),In=this.transform.pointLocation3D(_n),Bn=this.transform.pointLocation3D(new j.pointGeometry(cn.x,_n.y)),Yn=this.transform.pointLocation3D(new j.pointGeometry(_n.x,cn.y)),Gn=[Math.min(Sn.lng,In.lng,Bn.lng,Yn.lng),Math.min(Sn.lat,In.lat,Bn.lat,Yn.lat)],Xn=[Math.max(Sn.lng,In.lng,Bn.lng,Yn.lng),Math.max(Sn.lat,In.lat,Bn.lat,Yn.lat)],Un=this._cameraForBounds(this.transform,Gn,Xn,bt,kt);return this._fitInternal(Un,kt,jt)}_fitInternal(ot,lt,bt){return ot?(delete(lt=j.extend(ot,lt)).padding,lt.linear?this.easeTo(lt,bt):this.flyTo(lt,bt)):this}jumpTo(ot,lt){this.stop();const bt=ot.preloadOnly?this.transform.clone():this.transform;let kt=!1,jt=!1,Jt=!1;return"zoom"in ot&&bt.zoom!==+ot.zoom&&(kt=!0,bt.zoom=+ot.zoom),ot.center!==void 0&&(bt.center=j.LngLat.convert(ot.center)),"bearing"in ot&&bt.bearing!==+ot.bearing&&(jt=!0,bt.bearing=+ot.bearing),"pitch"in ot&&bt.pitch!==+ot.pitch&&(Jt=!0,bt.pitch=+ot.pitch),ot.padding==null||bt.isPaddingEqual(ot.padding)||(bt.padding=ot.padding),ot.preloadOnly?(this._preloadTiles(bt),this):(this.fire(new j.Event("movestart",lt)).fire(new j.Event("move",lt)),kt&&this.fire(new j.Event("zoomstart",lt)).fire(new j.Event("zoom",lt)).fire(new j.Event("zoomend",lt)),jt&&this.fire(new j.Event("rotatestart",lt)).fire(new j.Event("rotate",lt)).fire(new j.Event("rotateend",lt)),Jt&&this.fire(new j.Event("pitchstart",lt)).fire(new j.Event("pitch",lt)).fire(new j.Event("pitchend",lt)),this.fire(new j.Event("moveend",lt)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||j.warnOnce(Av),this.transform.getFreeCameraOptions()}setFreeCameraOptions(ot,lt){const bt=this.transform;if(!bt.projection.supportsFreeCamera)return j.warnOnce(Av),this;this.stop();const kt=bt.zoom,jt=bt.pitch,Jt=bt.bearing;bt.setFreeCameraOptions(ot);const an=kt!==bt.zoom,cn=jt!==bt.pitch,_n=Jt!==bt.bearing;return this.fire(new j.Event("movestart",lt)).fire(new j.Event("move",lt)),an&&this.fire(new j.Event("zoomstart",lt)).fire(new j.Event("zoom",lt)).fire(new j.Event("zoomend",lt)),_n&&this.fire(new j.Event("rotatestart",lt)).fire(new j.Event("rotate",lt)).fire(new j.Event("rotateend",lt)),cn&&this.fire(new j.Event("pitchstart",lt)).fire(new j.Event("pitch",lt)).fire(new j.Event("pitchend",lt)),this.fire(new j.Event("moveend",lt)),this}easeTo(ot,lt){this._stop(!1,ot.easeId),((ot=j.extend({offset:[0,0],duration:500,easing:j.ease},ot)).animate===!1||!ot.essential&&j.exported.prefersReducedMotion)&&(ot.duration=0);const bt=this.transform,kt=this.getZoom(),jt=this.getBearing(),Jt=this.getPitch(),an=this.getPadding(),cn="zoom"in ot?+ot.zoom:kt,_n="bearing"in ot?this._normalizeBearing(ot.bearing,jt):jt,Sn="pitch"in ot?+ot.pitch:Jt,In="padding"in ot?ot.padding:bt.padding,Bn=j.pointGeometry.convert(ot.offset);let Yn,Gn,Xn;if(bt.projection.name==="globe"){const Lr=j.MercatorCoordinate.fromLngLat(bt.center),kr=Bn.rotate(-bt.angle);Lr.x+=kr.x/bt.worldSize,Lr.y+=kr.y/bt.worldSize;const io=Lr.toLngLat(),Ar=j.LngLat.convert(ot.center||io);this._normalizeCenter(Ar),Yn=bt.centerPoint.add(kr),Gn=new j.pointGeometry(Lr.x,Lr.y).mult(bt.worldSize),Xn=new j.pointGeometry(j.mercatorXfromLng(Ar.lng),j.mercatorYfromLat(Ar.lat)).mult(bt.worldSize).sub(Gn)}else{Yn=bt.centerPoint.add(Bn);const Lr=bt.pointLocation(Yn),kr=j.LngLat.convert(ot.center||Lr);this._normalizeCenter(kr),Gn=bt.project(Lr),Xn=bt.project(kr).sub(Gn)}const Un=bt.zoomScale(cn-kt);let Nn,er;ot.around&&(Nn=j.LngLat.convert(ot.around),er=bt.locationPoint(Nn));const Zn=this._zooming||cn!==kt,fr=this._rotating||jt!==_n,pr=this._pitching||Sn!==Jt,tr=!bt.isPaddingEqual(In),vr=Lr=>kr=>{if(Zn&&(Lr.zoom=j.number(kt,cn,kr)),fr&&(Lr.bearing=j.number(jt,_n,kr)),pr&&(Lr.pitch=j.number(Jt,Sn,kr)),tr&&(Lr.interpolatePadding(an,In,kr),Yn=Lr.centerPoint.add(Bn)),Nn)Lr.setLocationAtPoint(Nn,er);else{const io=Lr.zoomScale(Lr.zoom-kt),Ar=cn>kt?Math.min(2,Un):Math.max(.5,Un),$r=Math.pow(Ar,1-kr),qr=Lr.unproject(Gn.add(Xn.mult(kr*$r)).mult(io));Lr.setLocationAtPoint(Lr.renderWorldCopies?qr.wrap():qr,Yn)}return ot.preloadOnly||this._fireMoveEvents(lt),Lr};if(ot.preloadOnly){const Lr=this._emulate(vr,ot.duration,bt);return this._preloadTiles(Lr),this}const Er={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Zn,this._rotating=fr,this._pitching=pr,this._padding=tr,this._easeId=ot.easeId,this._prepareEase(lt,ot.noMoveStart,Er),this._ease(vr(bt),Lr=>{bt.recenterOnTerrain(),this._afterEase(lt,Lr)},ot),this}_prepareEase(ot,lt,bt={}){this._moving=!0,this.transform.cameraElevationReference="sea",lt||bt.moving||this.fire(new j.Event("movestart",ot)),this._zooming&&!bt.zooming&&this.fire(new j.Event("zoomstart",ot)),this._rotating&&!bt.rotating&&this.fire(new j.Event("rotatestart",ot)),this._pitching&&!bt.pitching&&this.fire(new j.Event("pitchstart",ot))}_fireMoveEvents(ot){this.fire(new j.Event("move",ot)),this._zooming&&this.fire(new j.Event("zoom",ot)),this._rotating&&this.fire(new j.Event("rotate",ot)),this._pitching&&this.fire(new j.Event("pitch",ot))}_afterEase(ot,lt){if(this._easeId&&lt&&this._easeId===lt)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const bt=this._zooming,kt=this._rotating,jt=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,bt&&this.fire(new j.Event("zoomend",ot)),kt&&this.fire(new j.Event("rotateend",ot)),jt&&this.fire(new j.Event("pitchend",ot)),this.fire(new j.Event("moveend",ot))}flyTo(ot,lt){if(!ot.essential&&j.exported.prefersReducedMotion){const ho=j.pick(ot,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ho,lt)}this.stop(),ot=j.extend({offset:[0,0],speed:1.2,curve:1.42,easing:j.ease},ot);const bt=this.transform,kt=this.getZoom(),jt=this.getBearing(),Jt=this.getPitch(),an=this.getPadding(),cn="zoom"in ot?j.clamp(+ot.zoom,bt.minZoom,bt.maxZoom):kt,_n="bearing"in ot?this._normalizeBearing(ot.bearing,jt):jt,Sn="pitch"in ot?+ot.pitch:Jt,In="padding"in ot?ot.padding:bt.padding,Bn=bt.zoomScale(cn-kt),Yn=j.pointGeometry.convert(ot.offset);let Gn=bt.centerPoint.add(Yn);const Xn=bt.pointLocation(Gn),Un=j.LngLat.convert(ot.center||Xn);this._normalizeCenter(Un);const Nn=bt.project(Xn),er=bt.project(Un).sub(Nn);let Zn=ot.curve;const fr=Math.max(bt.width,bt.height),pr=fr/Bn,tr=er.mag();if("minZoom"in ot){const ho=j.clamp(Math.min(ot.minZoom,kt,cn),bt.minZoom,bt.maxZoom),uo=fr/bt.zoomScale(ho-kt);Zn=Math.sqrt(uo/tr*2)}const vr=Zn*Zn;function Er(ho){const uo=(pr*pr-fr*fr+(ho?-1:1)*vr*vr*tr*tr)/(2*(ho?pr:fr)*vr*tr);return Math.log(Math.sqrt(uo*uo+1)-uo)}function Lr(ho){return(Math.exp(ho)-Math.exp(-ho))/2}function kr(ho){return(Math.exp(ho)+Math.exp(-ho))/2}const io=Er(0);let Ar=function(ho){return kr(io)/kr(io+Zn*ho)},$r=function(ho){return fr*((kr(io)*(Lr(uo=io+Zn*ho)/kr(uo))-Lr(io))/vr)/tr;var uo},qr=(Er(1)-io)/Zn;if(Math.abs(tr)<1e-6||!isFinite(qr)){if(Math.abs(fr-pr)<1e-6)return this.easeTo(ot,lt);const ho=pr<fr?-1:1;qr=Math.abs(Math.log(pr/fr))/Zn,$r=function(){return 0},Ar=function(uo){return Math.exp(ho*Zn*uo)}}ot.duration="duration"in ot?+ot.duration:1e3*qr/("screenSpeed"in ot?+ot.screenSpeed/Zn:+ot.speed),ot.maxDuration&&ot.duration>ot.maxDuration&&(ot.duration=0);const Or=jt!==_n,Sr=Sn!==Jt,mo=!bt.isPaddingEqual(In),lo=ho=>uo=>{const Po=uo*qr,zo=1/Ar(Po);ho.zoom=uo===1?cn:kt+ho.scaleZoom(zo),Or&&(ho.bearing=j.number(jt,_n,uo)),Sr&&(ho.pitch=j.number(Jt,Sn,uo)),mo&&(ho.interpolatePadding(an,In,uo),Gn=ho.centerPoint.add(Yn));const Uo=uo===1?Un:ho.unproject(Nn.add(er.mult($r(Po))).mult(zo));return ho.setLocationAtPoint(ho.renderWorldCopies?Uo.wrap():Uo,Gn),ho._updateCameraOnTerrain(),ot.preloadOnly||this._fireMoveEvents(lt),ho};if(ot.preloadOnly){const ho=this._emulate(lo,ot.duration,bt);return this._preloadTiles(ho),this}return this._zooming=!0,this._rotating=Or,this._pitching=Sr,this._padding=mo,this._prepareEase(lt,!1),this._ease(lo(bt),()=>this._afterEase(lt),ot),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(ot,lt){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const bt=this._onEaseEnd;this._onEaseEnd=void 0,bt.call(this,lt)}if(!ot){const bt=this.handlers;bt&&bt.stop(!1)}return this}_ease(ot,lt,bt){bt.animate===!1||bt.duration===0?(ot(1),lt()):(this._easeStart=j.exported.now(),this._easeOptions=bt,this._onEaseFrame=ot,this._onEaseEnd=lt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const ot=Math.min((j.exported.now()-this._easeStart)/this._easeOptions.duration,1),lt=this._onEaseFrame;lt&&lt(this._easeOptions.easing(ot)),ot<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(ot,lt){ot=j.wrap(ot,-180,180);const bt=Math.abs(ot-lt);return Math.abs(ot-360-lt)<bt&&(ot-=360),Math.abs(ot+360-lt)<bt&&(ot+=360),ot}_normalizeCenter(ot){const lt=this.transform;if(!lt.renderWorldCopies||lt.maxBounds)return;const bt=ot.lng-lt.center.lng;ot.lng+=bt>180?-360:bt<-180?360:0}_emulate(ot,lt,bt){const kt=Math.ceil(15*lt/1e3),jt=[],Jt=ot(bt.clone());for(let an=0;an<=kt;an++){const cn=Jt(an/kt);jt.push(cn.clone())}return jt}}class Ev{constructor(ot={}){this.options=ot,j.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(ot){const lt=this.options&&this.options.compact;return this._map=ot,this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=gt("button","mapboxgl-ctrl-attrib-button",this._container),gt("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=gt("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),lt&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),lt===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(ot,lt){const bt=this._map._getUIString(`AttributionControl.${lt}`);ot.setAttribute("aria-label",bt),ot.removeAttribute("title"),ot.firstElementChild&&ot.firstElementChild.setAttribute("title",bt)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let ot=this._editLink;ot||(ot=this._editLink=this._container.querySelector(".mapbox-improve-map"));const lt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||j.config.ACCESS_TOKEN}];if(ot){const bt=lt.reduce((kt,jt,Jt)=>(jt.value&&(kt+=`${jt.key}=${jt.value}${Jt<lt.length-1?"&":""}`),kt),"?");ot.href=`${j.config.FEEDBACK_URL}/${bt}#${oy(this._map,!0)}`,ot.rel="noopener nofollow",this._setElementTitle(ot,"MapFeedback")}}_updateData(ot){!ot||ot.sourceDataType!=="metadata"&&ot.sourceDataType!=="visibility"&&ot.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let ot=[];if(this._map.style.stylesheet){const kt=this._map.style.stylesheet;this.styleOwner=kt.owner,this.styleId=kt.id}const lt=this._map.style._sourceCaches;for(const kt in lt){const jt=lt[kt];if(jt.used){const Jt=jt.getSource();Jt.attribution&&ot.indexOf(Jt.attribution)<0&&ot.push(Jt.attribution)}}ot.sort((kt,jt)=>kt.length-jt.length),ot=ot.filter((kt,jt)=>{for(let Jt=jt+1;Jt<ot.length;Jt++)if(ot[Jt].indexOf(kt)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?ot=[...this.options.customAttribution,...ot]:ot.unshift(this.options.customAttribution));const bt=ot.join(" | ");bt!==this._attribHTML&&(this._attribHTML=bt,ot.length?(this._innerContainer.innerHTML=bt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ny{constructor(){j.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(ot){this._map=ot,this._container=gt("div","mapboxgl-ctrl");const lt=gt("a","mapboxgl-ctrl-logo");return lt.target="_blank",lt.rel="noopener nofollow",lt.href="https://www.mapbox.com/",lt.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),lt.setAttribute("rel","noopener nofollow"),this._container.appendChild(lt),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(ot){ot&&ot.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const ot=this._map.style._sourceCaches;if(Object.entries(ot).length===0)return!0;for(const lt in ot){const bt=ot[lt].getSource();if(bt.hasOwnProperty("mapbox_logo")&&!bt.mapbox_logo)return!1}return!0}_updateCompact(){const ot=this._container.children;if(ot.length){const lt=ot[0];this._map.getCanvasContainer().offsetWidth<250?lt.classList.add("mapboxgl-compact"):lt.classList.remove("mapboxgl-compact")}}}class A_{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(ot){const lt=++this._id;return this._queue.push({callback:ot,id:lt,cancelled:!1}),lt}remove(ot){const lt=this._currentlyRunning,bt=lt?this._queue.concat(lt):this._queue;for(const kt of bt)if(kt.id===ot)return void(kt.cancelled=!0)}run(ot=0){const lt=this._currentlyRunning=this._queue;this._queue=[];for(const bt of lt)if(!bt.cancelled&&(bt.callback(ot),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function cp(dt,ot,lt){if(dt=new j.LngLat(dt.lng,dt.lat),ot){const bt=new j.LngLat(dt.lng-360,dt.lat),kt=new j.LngLat(dt.lng+360,dt.lat),jt=360*Math.ceil(Math.abs(dt.lng-lt.center.lng)/360),Jt=lt.locationPoint(dt).distSqr(ot),an=ot.x<0||ot.y<0||ot.x>lt.width||ot.y>lt.height;lt.locationPoint(bt).distSqr(ot)<Jt&&(an||Math.abs(bt.lng-lt.center.lng)<jt)?dt=bt:lt.locationPoint(kt).distSqr(ot)<Jt&&(an||Math.abs(kt.lng-lt.center.lng)<jt)&&(dt=kt)}for(;Math.abs(dt.lng-lt.center.lng)>180;){const bt=lt.locationPoint(dt);if(bt.x>=0&&bt.y>=0&&bt.x<=lt.width&&bt.y<=lt.height)break;dt.lng>lt.center.lng?dt.lng-=360:dt.lng+=360}return dt}const E_={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class T_ extends j.Evented{constructor(ot,lt){if(super(),(ot instanceof j.window.HTMLElement||lt)&&(ot=j.extend({element:ot},lt)),j.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=ot&&ot.anchor||"center",this._color=ot&&ot.color||"#3FB1CE",this._scale=ot&&ot.scale||1,this._draggable=ot&&ot.draggable||!1,this._clickTolerance=ot&&ot.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=ot&&ot.rotation||0,this._rotationAlignment=ot&&ot.rotationAlignment||"auto",this._pitchAlignment=ot&&ot.pitchAlignment&&ot.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=ot&&ot.occludedOpacity||.2,ot&&ot.element)this._element=ot.element,this._offset=j.pointGeometry.convert(ot&&ot.offset||[0,0]);else{this._defaultMarker=!0,this._element=gt("div");const kt=41,jt=27,Jt=ft("svg",{display:"block",height:kt*this._scale+"px",width:jt*this._scale+"px",viewBox:`0 0 ${jt} ${kt}`},this._element),an=ft("radialGradient",{id:"shadowGradient"},ft("defs",{},Jt));ft("stop",{offset:"10%","stop-opacity":.4},an),ft("stop",{offset:"100%","stop-opacity":.05},an),ft("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Jt),ft("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Jt),ft("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Jt),ft("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Jt),this._offset=j.pointGeometry.convert(ot&&ot.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",kt=>{kt.preventDefault()}),this._element.addEventListener("mousedown",kt=>{kt.preventDefault()});const bt=this._element.classList;for(const kt in E_)bt.remove(`mapboxgl-marker-anchor-${kt}`);bt.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(ot){return ot===this._map||(this.remove(),this._map=ot,ot.getCanvasContainer().appendChild(this._element),ot.on("move",this._updateMoving),ot.on("moveend",this._update),ot.on("remove",this._clearFadeTimer),ot._addMarker(this),this.setDraggable(this._draggable),this._update(),ot.on("click",this._onMapClick)),this}remove(){const ot=this._map;return ot&&(ot.off("click",this._onMapClick),ot.off("move",this._updateMoving),ot.off("moveend",this._update),ot.off("mousedown",this._addDragHandler),ot.off("touchstart",this._addDragHandler),ot.off("mouseup",this._onUp),ot.off("touchend",this._onUp),ot.off("mousemove",this._onMove),ot.off("touchmove",this._onMove),ot.off("remove",this._clearFadeTimer),ot._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(ot){return this._lngLat=j.LngLat.convert(ot),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(ot){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),ot){if(!("offset"in ot.options)){const kt=Math.sqrt(Math.pow(13.5,2)/2);ot.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[kt,-1*(38.1-13.5+kt)],"bottom-right":[-kt,-1*(38.1-13.5+kt)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=ot,ot._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(ot){const lt=ot.code,bt=ot.charCode||ot.keyCode;lt!=="Space"&&lt!=="Enter"&&bt!==32&&bt!==13||this.togglePopup()}_onMapClick(ot){const lt=ot.originalEvent.target,bt=this._element;this._popup&&(lt===bt||bt.contains(lt))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const ot=this._popup;return ot?(ot.isOpen()?(ot.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(ot.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const ot=this._map,lt=this._pos;if(!ot||!lt)return!1;const bt=ot.unproject(lt),kt=ot.getFreeCameraOptions();if(!kt.position)return!1;const jt=kt.position.toLngLat();return jt.distanceTo(bt)<.9*jt.distanceTo(this._lngLat)}_evaluateOpacity(){const ot=this._map;if(!ot)return;const lt=this._pos;if(!lt||lt.x<0||lt.x>ot.transform.width||lt.y<0||lt.y>ot.transform.height)return void this._clearFadeTimer();const bt=ot.unproject(lt);let kt;ot._showingGlobe()&&j.isLngLatBehindGlobe(ot.transform,this._lngLat)?kt=0:(kt=1-ot._queryFogOpacity(bt),ot.transform._terrainEnabled()&&ot.getTerrain()&&this._behindTerrain()&&(kt*=this._occludedOpacity)),this._element.style.opacity=`${kt}`,this._element.style.pointerEvents=kt>0?"auto":"none",this._popup&&this._popup._setOpacity(kt),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const ot=this._pos;if(!ot||!this._map)return;const lt=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${ot.x}px,${ot.y}px)
            ${E_[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${lt.x}px,${lt.y}px)
        `}_calculateXYTransform(){const ot=this._pos,lt=this._map,bt=this.getPitchAlignment();if(!lt||!ot||bt!=="map")return"";if(!lt._showingGlobe()){const cn=lt.getPitch();return cn?`rotateX(${cn}deg)`:""}const kt=j.radToDeg(j.globeTiltAtLngLat(lt.transform,this._lngLat)),jt=ot.sub(j.globeCenterToScreenPoint(lt.transform)),Jt=Math.abs(jt.x)+Math.abs(jt.y);if(Jt===0)return"";const an=kt/Jt;return`rotateX(${-jt.y*an}deg) rotateY(${jt.x*an}deg)`}_calculateZTransform(){const ot=this._pos,lt=this._map;if(!lt||!ot)return"";let bt=0;const kt=this.getRotationAlignment();if(kt==="map")if(lt._showingGlobe()){const jt=lt.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Jt=lt.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(jt);bt=j.radToDeg(Math.atan2(Jt.y,Jt.x))-90}else bt=-lt.getBearing();else if(kt==="horizon"){const jt=j.smoothstep(4,6,lt.getZoom()),Jt=j.globeCenterToScreenPoint(lt.transform);Jt.y+=jt*lt.transform.height;const an=ot.sub(Jt),cn=j.radToDeg(Math.atan2(an.y,an.x));bt=(cn>90?cn-270:cn+90)*(1-jt)}return bt+=this._rotation,bt?`rotateZ(${bt}deg)`:""}_update(ot){j.window.cancelAnimationFrame(this._updateFrameId);const lt=this._map;lt&&(lt.transform.renderWorldCopies&&(this._lngLat=cp(this._lngLat,this._pos,lt.transform)),this._pos=lt.project(this._lngLat),ot===!0?this._updateFrameId=j.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),lt._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(lt._showingGlobe()||lt.getTerrain()||lt.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(ot){return this._offset=j.pointGeometry.convert(ot),this._update(),this}_onMove(ot){const lt=this._map;if(!lt)return;const bt=this._pointerdownPos,kt=this._positionDelta;if(bt&&kt){if(!this._isDragging){const jt=this._clickTolerance||lt._clickTolerance;if(ot.point.dist(bt)<jt)return;this._isDragging=!0}this._pos=ot.point.sub(kt),this._lngLat=lt.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new j.Event("dragstart"))),this.fire(new j.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const ot=this._map;ot&&(ot.off("mousemove",this._onMove),ot.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new j.Event("dragend")),this._state="inactive"}_addDragHandler(ot){const lt=this._map,bt=this._pos;lt&&bt&&this._element.contains(ot.originalEvent.target)&&(ot.preventDefault(),this._positionDelta=ot.point.sub(bt),this._pointerdownPos=ot.point,this._state="pending",lt.on("mousemove",this._onMove),lt.on("touchmove",this._onMove),lt.once("mouseup",this._onUp),lt.once("touchend",this._onUp))}setDraggable(ot){this._draggable=!!ot;const lt=this._map;return lt&&(ot?(lt.on("mousedown",this._addDragHandler),lt.on("touchstart",this._addDragHandler)):(lt.off("mousedown",this._addDragHandler),lt.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(ot){return this._rotation=ot||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(ot){return this._rotationAlignment=ot||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(ot){return this._pitchAlignment=ot||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(ot){return this._occludedOpacity=ot||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const qu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},v0=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Tv(dt=new j.pointGeometry(0,0),ot="bottom"){if(typeof dt=="number"){const lt=Math.round(Math.sqrt(.5*Math.pow(dt,2)));switch(ot){case"top":return new j.pointGeometry(0,dt);case"top-left":return new j.pointGeometry(lt,lt);case"top-right":return new j.pointGeometry(-lt,lt);case"bottom":return new j.pointGeometry(0,-dt);case"bottom-left":return new j.pointGeometry(lt,-lt);case"bottom-right":return new j.pointGeometry(-lt,-lt);case"left":return new j.pointGeometry(dt,0);case"right":return new j.pointGeometry(-dt,0)}return new j.pointGeometry(0,0)}return dt instanceof j.pointGeometry||Array.isArray(dt)?j.pointGeometry.convert(dt):j.pointGeometry.convert(dt[ot]||[0,0])}class b0{constructor(ot){this.jumpTo(ot)}getValue(ot){if(ot<=this._startTime)return this._start;if(ot>=this._endTime)return this._end;const lt=j.easeCubicInOut((ot-this._startTime)/(this._endTime-this._startTime));return this._start*(1-lt)+this._end*lt}isEasing(ot){return ot>=this._startTime&&ot<=this._endTime}jumpTo(ot){this._startTime=-1/0,this._endTime=-1/0,this._start=ot,this._end=ot}easeTo(ot,lt,bt){this._start=this.getValue(lt),this._end=ot,this._startTime=lt,this._endTime=lt+bt}}const w0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Cv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Uy(dt){dt.parentNode&&dt.parentNode.removeChild(dt)}const Rv={showCompass:!0,showZoom:!0,visualizePitch:!1};class S0{constructor(ot,lt,bt=!1){this._clickTolerance=10,this.element=lt,this.mouseRotate=new xv({clickTolerance:ot.dragRotate._mouseRotate._clickTolerance}),this.map=ot,bt&&(this.mousePitch=new Dm({clickTolerance:ot.dragRotate._mousePitch._clickTolerance})),j.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),lt.addEventListener("mousedown",this.mousedown),lt.addEventListener("touchstart",this.touchstart,{passive:!1}),lt.addEventListener("touchmove",this.touchmove),lt.addEventListener("touchend",this.touchend),lt.addEventListener("touchcancel",this.reset)}down(ot,lt){this.mouseRotate.mousedown(ot,lt),this.mousePitch&&this.mousePitch.mousedown(ot,lt),Mt()}move(ot,lt){const bt=this.map,kt=this.mouseRotate.mousemoveWindow(ot,lt),jt=kt&&kt.bearingDelta;if(jt&&bt.setBearing(bt.getBearing()+jt),this.mousePitch){const Jt=this.mousePitch.mousemoveWindow(ot,lt),an=Jt&&Jt.pitchDelta;an&&bt.setPitch(bt.getPitch()+an)}}off(){const ot=this.element;ot.removeEventListener("mousedown",this.mousedown),ot.removeEventListener("touchstart",this.touchstart,{passive:!1}),ot.removeEventListener("touchmove",this.touchmove),ot.removeEventListener("touchend",this.touchend),ot.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Ft(),j.window.removeEventListener("mousemove",this.mousemove),j.window.removeEventListener("mouseup",this.mouseup)}mousedown(ot){this.down(j.extend({},ot,{ctrlKey:!0,preventDefault:()=>ot.preventDefault()}),pt(this.element,ot)),j.window.addEventListener("mousemove",this.mousemove),j.window.addEventListener("mouseup",this.mouseup)}mousemove(ot){this.move(ot,pt(this.element,ot))}mouseup(ot){this.mouseRotate.mouseupWindow(ot),this.mousePitch&&this.mousePitch.mouseupWindow(ot),this.offTemp()}touchstart(ot){ot.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Lt(this.element,ot.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>ot.preventDefault()},this._startPos))}touchmove(ot){ot.targetTouches.length!==1?this.reset():(this._lastPos=Lt(this.element,ot.targetTouches)[0],this.move({preventDefault:()=>ot.preventDefault()},this._lastPos))}touchend(ot){ot.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const x0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},zy={maxWidth:100,unit:"metric"};function ly(dt,ot,lt){const bt=Bm(ot),kt=bt/ot,jt={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[lt];this._map._requestDomTask(()=>{this._container.style.width=dt*kt+"px",this._container.innerHTML=`${bt}&nbsp;${jt}`})}function Bm(dt){const ot=Math.pow(10,`${Math.floor(dt)}`.length-1);let lt=dt/ot;return lt=lt>=10?10:lt>=5?5:lt>=3?3:lt>=2?2:lt>=1?1:function(bt){const kt=Math.pow(10,Math.ceil(-Math.log(bt)/Math.LN10));return Math.round(bt*kt)/kt}(lt),ot*lt}const Vy={version:j.version,supported:st,setRTLTextPlugin:j.setRTLTextPlugin,getRTLTextPluginStatus:j.getRTLTextPluginStatus,Map:class extends _0{constructor(dt){if(j.LivePerformanceUtils.mark(j.PerformanceMarkers.create),(dt=j.extend({},Cv,dt)).minZoom!=null&&dt.maxZoom!=null&&dt.minZoom>dt.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(dt.minPitch!=null&&dt.maxPitch!=null&&dt.minPitch>dt.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(dt.minPitch!=null&&dt.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(dt.maxPitch!=null&&dt.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(dt.antialias&&j.isSafariWithAntialiasingBug(j.window)&&(dt.antialias=!1,j.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ku(dt.minZoom,dt.maxZoom,dt.minPitch,dt.maxPitch,dt.renderWorldCopies),dt),this._interactive=dt.interactive,this._minTileCacheSize=dt.minTileCacheSize,this._maxTileCacheSize=dt.maxTileCacheSize,this._failIfMajorPerformanceCaveat=dt.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=dt.preserveDrawingBuffer,this._antialias=dt.antialias,this._trackResize=dt.trackResize,this._bearingSnap=dt.bearingSnap,this._refreshExpiredTiles=dt.refreshExpiredTiles,this._fadeDuration=dt.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=dt.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=dt.collectResourceTiming,this._optimizeForTerrain=dt.optimizeForTerrain,this._language=this._parseLanguage(dt.language),this._worldview=dt.worldview,this._renderTaskQueue=new A_,this._domRenderTaskQueue=new A_,this._controls=[],this._markers=[],this._popups=[],this._mapId=j.uniqueId(),this._locale=j.extend({},w0,dt.locale),this._clickTolerance=dt.clickTolerance,this._cooperativeGestures=dt.cooperativeGestures,this._performanceMetricsCollection=dt.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new b0(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new j.RequestManager(dt.transformRequest,dt.accessToken,dt.testMode),this._silenceAuthErrors=!!dt.testMode,typeof dt.container=="string"){if(this._container=j.window.document.getElementById(dt.container),!this._container)throw new Error(`Container '${dt.container}' not found.`)}else{if(!(dt.container instanceof j.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=dt.container}if(this._container.childNodes.length>0&&j.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),dt.maxBounds&&this.setMaxBounds(dt.maxBounds),j.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),j.window!==void 0&&(j.window.addEventListener("online",this._onWindowOnline,!1),j.window.addEventListener("resize",this._onWindowResize,!1),j.window.addEventListener("orientationchange",this._onWindowResize,!1),j.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),j.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Tp(this,dt),this._localFontFamily=dt.localFontFamily,this._localIdeographFontFamily=dt.localIdeographFontFamily,dt.style&&this.setStyle(dt.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),dt.projection&&this.setProjection(dt.projection),this._hash=dt.hash&&new ky(typeof dt.hash=="string"&&dt.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:dt.center,zoom:dt.zoom,bearing:dt.bearing,pitch:dt.pitch}),dt.bounds&&(this.resize(),this.fitBounds(dt.bounds,j.extend({},dt.fitBoundsOptions,{duration:0})))),this.resize(),dt.attributionControl&&this.addControl(new Ev({customAttribution:dt.customAttribution})),this._logoControl=new Ny,this.addControl(this._logoControl,dt.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",ot=>{this._update(ot.dataType==="style"),this.fire(new j.Event(`${ot.dataType}data`,ot))}),this.on("dataloading",ot=>{this.fire(new j.Event(`${ot.dataType}dataloading`,ot))})}_getMapId(){return this._mapId}addControl(dt,ot){if(ot===void 0&&(ot=dt.getDefaultPosition?dt.getDefaultPosition():"top-right"),!dt||!dt.onAdd)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const lt=dt.onAdd(this);this._controls.push(dt);const bt=this._controlPositions[ot];return ot.indexOf("bottom")!==-1?bt.insertBefore(lt,bt.firstChild):bt.appendChild(lt),this}removeControl(dt){if(!dt||!dt.onRemove)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const ot=this._controls.indexOf(dt);return ot>-1&&this._controls.splice(ot,1),dt.onRemove(this),this}hasControl(dt){return this._controls.indexOf(dt)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(dt){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const ot=!this._moving;return ot&&this.fire(new j.Event("movestart",dt)).fire(new j.Event("move",dt)),this.fire(new j.Event("resize",dt)),ot&&this.fire(new j.Event("moveend",dt)),this}getBounds(){return this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly when viewing the poles."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(dt){return this.transform.setMaxBounds(j.LngLatBounds.convert(dt)),this._update()}setMinZoom(dt){if((dt=dt??-2)>=-2&&dt<=this.transform.maxZoom)return this.transform.minZoom=dt,this._update(),this.getZoom()<dt?this.setZoom(dt):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(dt){if((dt=dt??22)>=this.transform.minZoom)return this.transform.maxZoom=dt,this._update(),this.getZoom()>dt?this.setZoom(dt):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(dt){if((dt=dt??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(dt>=0&&dt<=this.transform.maxPitch)return this.transform.minPitch=dt,this._update(),this.getPitch()<dt?this.setPitch(dt):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(dt){if((dt=dt??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(dt>=this.transform.minPitch)return this.transform.maxPitch=dt,this._update(),this.getPitch()>dt?this.setPitch(dt):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(dt){return this.transform.renderWorldCopies=dt,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(dt){return dt==="auto"?j.window.navigator.language:Array.isArray(dt)?dt.length===0?void 0:dt.map(ot=>ot==="auto"?j.window.navigator.language:ot):dt}setLanguage(dt){const ot=this._parseLanguage(dt);if(!this.style||ot===this._language)return this;this._language=ot,this.style._reloadSources();for(const lt of this._controls)lt._setLanguage&&lt._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(dt){return this.style&&dt!==this._worldview?(this._worldview=dt,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(dt){return this._lazyInitEmptyStyle(),dt?typeof dt=="string"&&(dt={name:dt}):dt=null,this._useExplicitProjection=!!dt,this._prioritizeAndUpdateProjection(dt,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const dt=this.transform,ot=dt.projection.name;let lt;ot==="globe"&&dt.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?(dt.setMercatorFromTransition(),lt=!0):ot==="mercator"&&dt.zoom<j.GLOBE_ZOOM_THRESHOLD_MAX&&(dt.setProjection({name:"globe"}),lt=!0),lt&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(dt,ot){return this._updateProjection(dt||ot||{name:"mercator"})}_updateProjection(dt){let ot;if(ot=dt.name==="globe"&&this.transform.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(dt),this.style.applyProjectionUpdate(),ot){this.painter.clearBackgroundTiles();for(const lt in this.style._sourceCaches)this.style._sourceCaches[lt].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(dt){return this.transform.locationPoint3D(j.LngLat.convert(dt))}unproject(dt){return this.transform.pointLocation3D(j.pointGeometry.convert(dt))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(dt,ot,lt){if(dt==="mouseenter"||dt==="mouseover"){let bt=!1;const kt=Jt=>{const an=ot.filter(_n=>this.getLayer(_n)),cn=an.length?this.queryRenderedFeatures(Jt.point,{layers:an}):[];cn.length?bt||(bt=!0,lt.call(this,new Du(dt,this,Jt.originalEvent,{features:cn}))):bt=!1},jt=()=>{bt=!1};return{layers:new Set(ot),listener:lt,delegates:{mousemove:kt,mouseout:jt}}}if(dt==="mouseleave"||dt==="mouseout"){let bt=!1;const kt=Jt=>{const an=ot.filter(cn=>this.getLayer(cn));(an.length?this.queryRenderedFeatures(Jt.point,{layers:an}):[]).length?bt=!0:bt&&(bt=!1,lt.call(this,new Du(dt,this,Jt.originalEvent)))},jt=Jt=>{bt&&(bt=!1,lt.call(this,new Du(dt,this,Jt.originalEvent)))};return{layers:new Set(ot),listener:lt,delegates:{mousemove:kt,mouseout:jt}}}{const bt=kt=>{const jt=ot.filter(an=>this.getLayer(an)),Jt=jt.length?this.queryRenderedFeatures(kt.point,{layers:jt}):[];Jt.length&&(kt.features=Jt,lt.call(this,kt),delete kt.features)};return{layers:new Set(ot),listener:lt,delegates:{[dt]:bt}}}}on(dt,ot,lt){if(lt===void 0)return super.on(dt,ot);Array.isArray(ot)||(ot=[ot]);const bt=this._createDelegatedListener(dt,ot,lt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[dt]=this._delegatedListeners[dt]||[],this._delegatedListeners[dt].push(bt);for(const kt in bt.delegates)this.on(kt,bt.delegates[kt]);return this}once(dt,ot,lt){if(lt===void 0)return super.once(dt,ot);Array.isArray(ot)||(ot=[ot]);const bt=this._createDelegatedListener(dt,ot,lt);for(const kt in bt.delegates)this.once(kt,bt.delegates[kt]);return this}off(dt,ot,lt){if(lt===void 0)return super.off(dt,ot);ot=new Set(Array.isArray(ot)?ot:[ot]);const bt=(jt,Jt)=>{if(jt.size!==Jt.size)return!1;for(const an of jt)if(!Jt.has(an))return!1;return!0},kt=this._delegatedListeners?this._delegatedListeners[dt]:void 0;return kt&&(jt=>{for(let Jt=0;Jt<jt.length;Jt++){const an=jt[Jt];if(an.listener===lt&&bt(an.layers,ot)){for(const cn in an.delegates)this.off(cn,an.delegates[cn]);return jt.splice(Jt,1),this}}})(kt),this}queryRenderedFeatures(dt,ot){return this.style?(ot!==void 0||dt===void 0||dt instanceof j.pointGeometry||Array.isArray(dt)||(ot=dt,dt=void 0),this.style.queryRenderedFeatures(dt=dt||[[0,0],[this.transform.width,this.transform.height]],ot=ot||{},this.transform)):[]}querySourceFeatures(dt,ot){return this.style.querySourceFeatures(dt,ot)}setStyle(dt,ot){return(ot=j.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},ot)).diff!==!1&&ot.localIdeographFontFamily===this._localIdeographFontFamily&&ot.localFontFamily===this._localFontFamily&&this.style&&dt?(this._diffStyle(dt,ot),this):(this._localIdeographFontFamily=ot.localIdeographFontFamily,this._localFontFamily=ot.localFontFamily,this._updateStyle(dt,ot))}_getUIString(dt){const ot=this._locale[dt];if(ot==null)throw new Error(`Missing UI string '${dt}'`);return ot}_updateStyle(dt,ot){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),dt&&(this.style=new op(this,ot||{}),this.style.setEventedParent(this,{style:this.style}),typeof dt=="string"?this.style.loadURL(dt):this.style.loadJSON(dt)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new op(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(dt,ot){if(typeof dt=="string"){const lt=this._requestManager.normalizeStyleURL(dt),bt=this._requestManager.transformRequest(lt,j.ResourceType.Style);j.getJSON(bt,(kt,jt)=>{kt?this.fire(new j.ErrorEvent(kt)):jt&&this._updateDiff(jt,ot)})}else typeof dt=="object"&&this._updateDiff(dt,ot)}_updateDiff(dt,ot){try{this.style.setState(dt)&&this._update(!0)}catch(lt){j.warnOnce(`Unable to perform style diff: ${lt.message||lt.error||lt}.  Rebuilding the style from scratch.`),this._updateStyle(dt,ot)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(j.warnOnce("There is no style added to the map."),!1)}addSource(dt,ot){return this._lazyInitEmptyStyle(),this.style.addSource(dt,ot),this._update(!0)}isSourceLoaded(dt){return!!this.style&&this.style._isSourceCacheLoaded(dt)}areTilesLoaded(){const dt=this.style&&this.style._sourceCaches;for(const ot in dt){const lt=dt[ot]._tiles;for(const bt in lt){const kt=lt[bt];if(kt.state!=="loaded"&&kt.state!=="errored")return!1}}return!0}addSourceType(dt,ot,lt){this._lazyInitEmptyStyle(),this.style.addSourceType(dt,ot,lt)}removeSource(dt){return this.style.removeSource(dt),this._updateTerrain(),this._update(!0)}getSource(dt){return this.style.getSource(dt)}addImage(dt,ot,{pixelRatio:lt=1,sdf:bt=!1,stretchX:kt,stretchY:jt,content:Jt}={}){if(this._lazyInitEmptyStyle(),ot instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&ot instanceof j.window.ImageBitmap){const{width:an,height:cn,data:_n}=j.exported.getImageData(ot);this.style.addImage(dt,{data:new j.RGBAImage({width:an,height:cn},_n),pixelRatio:lt,stretchX:kt,stretchY:jt,content:Jt,sdf:bt,version:0})}else if(ot.width===void 0||ot.height===void 0)this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:an,height:cn}=ot,_n=ot;this.style.addImage(dt,{data:new j.RGBAImage({width:an,height:cn},new Uint8Array(_n.data)),pixelRatio:lt,stretchX:kt,stretchY:jt,content:Jt,sdf:bt,version:0,userImage:_n}),_n.onAdd&&_n.onAdd(this,dt)}}updateImage(dt,ot){const lt=this.style.getImage(dt);if(!lt)return void this.fire(new j.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const bt=ot instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&ot instanceof j.window.ImageBitmap?j.exported.getImageData(ot):ot,{width:kt,height:jt}=bt;kt!==void 0&&jt!==void 0?kt===lt.data.width&&jt===lt.data.height?(lt.data.replace(bt.data,!(ot instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&ot instanceof j.window.ImageBitmap)),this.style.updateImage(dt,lt)):this.fire(new j.ErrorEvent(new Error(`The width and height of the updated image (${kt}, ${jt})
                must be that same as the previous version of the image
                (${lt.data.width}, ${lt.data.height})`))):this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(dt){return dt?!!this.style.getImage(dt):(this.fire(new j.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(dt){this.style.removeImage(dt)}loadImage(dt,ot){j.getImage(this._requestManager.transformRequest(dt,j.ResourceType.Image),(lt,bt)=>{ot(lt,bt instanceof j.window.HTMLImageElement?j.exported.getImageData(bt):bt)})}listImages(){return this.style.listImages()}addLayer(dt,ot){return this._lazyInitEmptyStyle(),this.style.addLayer(dt,ot),this._update(!0)}moveLayer(dt,ot){return this.style.moveLayer(dt,ot),this._update(!0)}removeLayer(dt){return this.style.removeLayer(dt),this._update(!0)}getLayer(dt){return this.style.getLayer(dt)}setLayerZoomRange(dt,ot,lt){return this.style.setLayerZoomRange(dt,ot,lt),this._update(!0)}setFilter(dt,ot,lt={}){return this.style.setFilter(dt,ot,lt),this._update(!0)}getFilter(dt){return this.style.getFilter(dt)}setPaintProperty(dt,ot,lt,bt={}){return this.style.setPaintProperty(dt,ot,lt,bt),this._update(!0)}getPaintProperty(dt,ot){return this.style.getPaintProperty(dt,ot)}setLayoutProperty(dt,ot,lt,bt={}){return this.style.setLayoutProperty(dt,ot,lt,bt),this._update(!0)}getLayoutProperty(dt,ot){return this.style.getLayoutProperty(dt,ot)}setLight(dt,ot={}){return this._lazyInitEmptyStyle(),this.style.setLight(dt,ot),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(dt){return this._lazyInitEmptyStyle(),!dt&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(dt),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(dt){return this._lazyInitEmptyStyle(),this.style.setFog(dt),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(dt){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(j.LngLat.convert(dt),this.transform):0}setFeatureState(dt,ot){return this.style.setFeatureState(dt,ot),this._update()}removeFeatureState(dt,ot){return this.style.removeFeatureState(dt,ot),this._update()}getFeatureState(dt){return this.style.getFeatureState(dt)}_updateContainerDimensions(){if(!this._container)return;const dt=this._container.getBoundingClientRect().width||400,ot=this._container.getBoundingClientRect().height||300;let lt,bt,kt,jt=this._container;for(;jt&&(!bt||!kt);){const Jt=j.window.getComputedStyle(jt).transform;Jt&&Jt!=="none"&&(lt=Jt.match(/matrix.*\((.+)\)/)[1].split(", "),lt[0]&&lt[0]!=="0"&&lt[0]!=="1"&&(bt=lt[0]),lt[3]&&lt[3]!=="0"&&lt[3]!=="1"&&(kt=lt[3])),jt=jt.parentElement}this._containerWidth=bt?Math.abs(dt/bt):dt,this._containerHeight=kt?Math.abs(ot/kt):ot}_detectMissingCSS(){j.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&j.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const dt=this._container;dt.classList.add("mapboxgl-map"),(this._missingCSSCanary=gt("div","mapboxgl-canary",dt)).style.visibility="hidden",this._detectMissingCSS();const ot=this._canvasContainer=gt("div","mapboxgl-canvas-container",dt);this._interactive&&ot.classList.add("mapboxgl-interactive"),this._canvas=gt("canvas","mapboxgl-canvas",ot),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const lt=this._controlContainer=gt("div","mapboxgl-control-container",dt),bt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(kt=>{bt[kt]=gt("div",`mapboxgl-ctrl-${kt}`,lt)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(dt,ot){const lt=j.exported.devicePixelRatio||1;this._canvas.width=lt*Math.ceil(dt),this._canvas.height=lt*Math.ceil(ot),this._canvas.style.width=`${dt}px`,this._canvas.style.height=`${ot}px`}_addMarker(dt){this._markers.push(dt)}_removeMarker(dt){const ot=this._markers.indexOf(dt);ot!==-1&&this._markers.splice(ot,1)}_addPopup(dt){this._popups.push(dt)}_removePopup(dt){const ot=this._popups.indexOf(dt);ot!==-1&&this._popups.splice(ot,1)}_setupPainter(){const dt=j.extend({},st.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ot=this._canvas.getContext("webgl",dt)||this._canvas.getContext("experimental-webgl",dt);ot?(j.storeAuthState(ot,!0),this.painter=new y_(ot,this.transform),this.on("data",lt=>{lt.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),j.exported$1.testSupport(ot)):this.fire(new j.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(dt){dt.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new j.Event("webglcontextlost",{originalEvent:dt}))}_contextRestored(dt){this._setupPainter(),this.resize(),this._update(),this.fire(new j.Event("webglcontextrestored",{originalEvent:dt}))}_onMapScroll(dt){if(dt.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(dt){return this.style?(this._styleDirty=this._styleDirty||dt,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(dt){return this._update(),this._renderTaskQueue.add(dt)}_cancelRenderFrame(dt){this._renderTaskQueue.remove(dt)}_requestDomTask(dt){!this.loaded()||this.loaded()&&!this.isMoving()?dt():this._domRenderTaskQueue.add(dt)}_render(dt){let ot;const lt=this.painter.context.extTimerQuery,bt=j.exported.now();if(this.listens("gpu-timing-frame")&&(ot=lt.createQueryEXT(),lt.beginQueryEXT(lt.TIME_ELAPSED_EXT,ot)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],j.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],j.window.performance.now())),this._renderTaskQueue.run(dt),this._domRenderTaskQueue.run(dt),this._removed)return;this._updateProjectionTransition();let kt=!1;const jt=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const cn=this.transform.zoom,_n=this.transform.pitch,Sn=j.exported.now();this.style.zoomHistory.update(cn,Sn);const In=new j.EvaluationParameters(cn,{now:Sn,fadeDuration:jt,pitch:_n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Bn=In.crossFadingFactor();Bn===1&&Bn===this._crossFadingFactor||(kt=!0,this._crossFadingFactor=Bn),this.style.update(In)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Jt=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Jt=this._updateAverageElevation(bt),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):Jt=this._updateAverageElevation(bt),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,jt,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:jt,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new j.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new j.Event("load"))),this.style&&(this.style.hasTransitions()||kt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),ot){const cn=j.exported.now()-bt;lt.endQueryEXT(lt.TIME_ELAPSED_EXT,ot),setTimeout(()=>{const _n=lt.getQueryObjectEXT(ot,lt.QUERY_RESULT_EXT)/1e6;lt.deleteQueryEXT(ot),this.fire(new j.Event("gpu-timing-frame",{cpuTime:cn,gpuTime:_n})),j.window.performance.mark("frame-gpu",{startTime:bt,detail:{gpuTime:_n}})},50)}if(this.listens("gpu-timing-layer")){const cn=this.painter.collectGpuTimers();setTimeout(()=>{const _n=this.painter.queryGpuTimers(cn);this.fire(new j.Event("gpu-timing-layer",{layerTimes:_n}))},50)}if(this.listens("gpu-timing-deferred-render")){const cn=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const _n=this.painter.queryGpuTimeDeferredRender(cn);this.fire(new j.Event("gpu-timing-deferred-render",{gpuTime:_n}))},50)}const an=this._sourcesDirty||this._styleDirty||this._placementDirty||Jt;if(an||this._repaint)this.triggerRepaint();else{const cn=!this.isMoving()&&this.loaded();if(cn&&(Jt=this._updateAverageElevation(bt,!0)),Jt)this.triggerRepaint();else if(this._triggerFrame(!1),cn&&(this.fire(new j.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const _n=this._calculateSpeedIndex();this.fire(new j.Event("speedindexcompleted",{speedIndex:_n})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||an||(this._fullyLoaded=!0,j.LivePerformanceUtils.mark(j.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&j.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.painter.transform.projection,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(dt){for(const ot of this._markers)dt&&!this.getRenderWorldCopies()&&(ot._lngLat=ot._lngLat.wrap()),ot._update();for(const ot of this._popups)!dt||this.getRenderWorldCopies()||ot._trackPointer||(ot._lngLat=ot._lngLat.wrap()),ot._update()}_updateAverageElevation(dt,ot=!1){const lt=bt=>(this.transform.averageElevation=bt,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&lt(0);if((ot||dt-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(dt)){const bt=this.transform.averageElevation;let kt=this.transform.sampleAverageElevation(),jt=!1;this.transform.elevation&&(jt=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(kt)?kt=0:this._averageElevationLastSampledAt=dt;const Jt=Math.abs(bt-kt);if(Jt>1){if(this._isInitialLoad||jt)return this._averageElevation.jumpTo(kt),lt(kt);this._averageElevation.easeTo(kt,dt,300)}else if(Jt>1e-4)return this._averageElevation.jumpTo(kt),lt(kt)}return!!this._averageElevation.isEasing(dt)&&lt(this._averageElevation.getValue(dt))}_authenticate(){j.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,dt=>{if(dt&&(dt.message===j.AUTH_ERR_MSG||dt.status===401)){const ot=this.painter.context.gl;j.storeAuthState(ot,!1),this._logoControl instanceof Ny&&this._logoControl._updateLogo(),ot&&ot.clear(ot.DEPTH_BUFFER_BIT|ot.COLOR_BUFFER_BIT|ot.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new j.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),j.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const dt=this.painter.canvasCopy(),ot=this.painter.getCanvasCopiesAndTimestamps();ot.timeStamps.push(performance.now());const lt=this.painter.context.gl,bt=lt.createFramebuffer();function kt(jt){lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,jt,0);const Jt=new Uint8Array(lt.drawingBufferWidth*lt.drawingBufferHeight*4);return lt.readPixels(0,0,lt.drawingBufferWidth,lt.drawingBufferHeight,lt.RGBA,lt.UNSIGNED_BYTE,Jt),Jt}return lt.bindFramebuffer(lt.FRAMEBUFFER,bt),this._canvasPixelComparison(kt(dt),ot.canvasCopies.map(kt),ot.timeStamps)}_canvasPixelComparison(dt,ot,lt){let bt=lt[1]-lt[0];const kt=dt.length/4;for(let jt=0;jt<ot.length;jt++){const Jt=ot[jt];let an=0;for(let cn=0;cn<Jt.length;cn+=4)Jt[cn]===dt[cn]&&Jt[cn+1]===dt[cn+1]&&Jt[cn+2]===dt[cn+2]&&Jt[cn+3]===dt[cn+3]&&(an+=1);bt+=(lt[jt+2]-lt[jt+1])*(1-an/kt)}return bt}remove(){this._hash&&this._hash.remove();for(const ot of this._controls)ot.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),j.window!==void 0&&(j.window.removeEventListener("resize",this._onWindowResize,!1),j.window.removeEventListener("orientationchange",this._onWindowResize,!1),j.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),j.window.removeEventListener("online",this._onWindowOnline,!1),j.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const dt=this.painter.context.gl.getExtension("WEBGL_lose_context");dt&&dt.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),Uy(this._canvasContainer),Uy(this._controlContainer),Uy(this._missingCSSCanary),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),j.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new j.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(dt){this._renderNextFrame=this._renderNextFrame||dt,this.style&&!this._frame&&(this._frame=j.exported.frame(ot=>{const lt=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,lt&&this._render(ot)}))}_preloadTiles(dt){const ot=this.style?Object.values(this.style._sourceCaches):[];return j.asyncAll(ot,(lt,bt)=>lt._preloadTiles(dt,bt),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(dt){this._trackResize&&this.resize({originalEvent:dt})._update()}_onVisibilityChange(){j.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(dt){this._showTileBoundaries!==dt&&(this._showTileBoundaries=dt,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(dt){this._showTerrainWireframe!==dt&&(this._showTerrainWireframe=dt,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(dt){this._speedIndexTiming!==dt&&(this._speedIndexTiming=dt,this._update())}get showPadding(){return!!this._showPadding}set showPadding(dt){this._showPadding!==dt&&(this._showPadding=dt,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(dt){this._showCollisionBoxes!==dt&&(this._showCollisionBoxes=dt,dt?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(dt){this._showOverdrawInspector!==dt&&(this._showOverdrawInspector=dt,this._update())}get repaint(){return!!this._repaint}set repaint(dt){this._repaint!==dt&&(this._repaint=dt,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(dt){this._vertices=dt,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(dt){this._showTileAABBs!==dt&&(this._showTileAABBs=dt,dt&&this._update())}_setCacheLimits(dt,ot){j.setCacheLimits(dt,ot)}get version(){return j.version}},NavigationControl:class{constructor(dt){this.options=j.extend({},Rv,dt),this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",ot=>ot.preventDefault()),this.options.showZoom&&(j.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",ot=>{this._map&&this._map.zoomIn({},{originalEvent:ot})}),gt("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",ot=>{this._map&&this._map.zoomOut({},{originalEvent:ot})}),gt("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(j.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",ot=>{const lt=this._map;lt&&(this.options.visualizePitch?lt.resetNorthPitch({},{originalEvent:ot}):lt.resetNorth({},{originalEvent:ot}))}),this._compassIcon=gt("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const dt=this._map;if(!dt)return;const ot=dt.getZoom(),lt=ot===dt.getMaxZoom(),bt=ot===dt.getMinZoom();this._zoomInButton.disabled=lt,this._zoomOutButton.disabled=bt,this._zoomInButton.setAttribute("aria-disabled",lt.toString()),this._zoomOutButton.setAttribute("aria-disabled",bt.toString())}_rotateCompassArrow(){const dt=this._map;if(!dt)return;const ot=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(dt.transform.pitch*(Math.PI/180)),.5)}) rotateX(${dt.transform.pitch}deg) rotateZ(${dt.transform.angle*(180/Math.PI)}deg)`:`rotate(${dt.transform.angle*(180/Math.PI)}deg)`;dt._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=ot)})}onAdd(dt){return this._map=dt,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),dt.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&dt.on("pitch",this._rotateCompassArrow),dt.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new S0(dt,this._compass,this.options.visualizePitch)),this._container}onRemove(){const dt=this._map;dt&&(this._container.remove(),this.options.showZoom&&dt.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&dt.off("pitch",this._rotateCompassArrow),dt.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(dt,ot){const lt=gt("button",dt,this._container);return lt.type="button",lt.addEventListener("click",ot),lt}_setButtonTitle(dt,ot){if(!this._map)return;const lt=this._map._getUIString(`NavigationControl.${ot}`);dt.setAttribute("aria-label",lt),dt.firstElementChild&&dt.firstElementChild.setAttribute("title",lt)}},GeolocateControl:class extends j.Evented{constructor(dt){super(),this.options=j.extend({geolocation:j.window.navigator.geolocation},x0,dt),j.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=wv(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(dt){return this._map=dt,this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(dt){const ot=(lt=!!this.options.geolocation)=>{this._supportsGeolocation=lt,dt(lt)};this._supportsGeolocation!==void 0?dt(this._supportsGeolocation):j.window.navigator.permissions!==void 0?j.window.navigator.permissions.query({name:"geolocation"}).then(lt=>ot(lt.state!=="denied")).catch(()=>ot()):ot()}_isOutOfMapMaxBounds(dt){const ot=this._map.getMaxBounds(),lt=dt.coords;return!!ot&&(lt.longitude<ot.getWest()||lt.longitude>ot.getEast()||lt.latitude<ot.getSouth()||lt.latitude>ot.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(dt){if(this._map){if(this._isOutOfMapMaxBounds(dt))return this._setErrorState(),this.fire(new j.Event("outofmaxbounds",dt)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=dt,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(dt),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(dt),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("geolocate",dt)),this._finish()}}_updateCamera(dt){const ot=new j.LngLat(dt.coords.longitude,dt.coords.latitude),lt=dt.coords.accuracy,bt=this._map.getBearing(),kt=j.extend({bearing:bt},this.options.fitBoundsOptions);this._map.fitBounds(ot.toBounds(lt),kt,{geolocateSource:!0})}_updateMarker(dt){if(dt){const ot=new j.LngLat(dt.coords.longitude,dt.coords.latitude);this._accuracyCircleMarker.setLngLat(ot).addTo(this._map),this._userLocationDotMarker.setLngLat(ot).addTo(this._map),this._accuracy=dt.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const dt=this._map.transform,ot=j.mercatorZfromAltitude(1,dt._center.lat)*dt.worldSize,lt=Math.ceil(2*this._accuracy*ot);this._circleElement.style.width=`${lt}px`,this._circleElement.style.height=`${lt}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(dt){if(this._map){if(this.options.trackUserLocation)if(dt.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const ot=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(dt.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("error",dt)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(dt){if(this._container.addEventListener("contextmenu",ot=>ot.preventDefault()),this._geolocateButton=gt("button","mapboxgl-ctrl-geolocate",this._container),gt("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",dt===!1){j.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const ot=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot)}else{const ot=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=gt("div","mapboxgl-user-location"),this._dotElement.appendChild(gt("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(gt("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new T_({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=gt("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new T_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",ot=>{ot.geolocateSource||this._watchState!=="ACTIVE_LOCK"||ot.originalEvent&&ot.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new j.Event("trackuserlocationend")))})}_onDeviceOrientation(dt){this._userLocationDotMarker&&(dt.webkitCompassHeading?this._heading=dt.webkitCompassHeading:dt.absolute===!0&&(this._heading=-1*dt.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return j.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new j.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new j.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new j.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let dt;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(dt={maximumAge:6e5,timeout:0},this._noTimeout=!0):(dt=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,dt),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const dt=()=>{j.window.addEventListener("ondeviceorientationabsolute"in j.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};j.window.DeviceMotionEvent!==void 0&&typeof j.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(ot=>{ot==="granted"&&dt()}).catch(console.error):dt()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),j.window.removeEventListener("deviceorientation",this._onDeviceOrientation),j.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ev,ScaleControl:class{constructor(dt){this.options=j.extend({},zy,dt),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=ly.bind(this)),j.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const dt=this.options.maxWidth||100,ot=this._map,lt=ot._containerHeight/2,bt=ot._containerWidth/2-dt/2,kt=ot.unproject([bt,lt]),jt=ot.unproject([bt+dt,lt]),Jt=kt.distanceTo(jt);if(this.options.unit==="imperial"){const an=3.2808*Jt;an>5280?this._setScale(dt,an/5280,"mile"):this._setScale(dt,an,"foot")}else this.options.unit==="nautical"?this._setScale(dt,Jt/1852,"nautical-mile"):Jt>=1e3?this._setScale(dt,Jt/1e3,"kilometer"):this._setScale(dt,Jt,"meter")}_setScale(dt,ot,lt){const bt=Bm(ot),kt=bt/ot;this._map._requestDomTask(()=>{this._container.style.width=dt*kt+"px",this._container.innerHTML=lt!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:lt}).format(bt):`${bt}&nbsp;nm`})}onAdd(dt){return this._map=dt,this._language=dt.getLanguage(),this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-scale",dt.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(dt){this._language=dt,this._update()}setUnit(dt){this.options.unit=dt,this._update()}},FullscreenControl:class{constructor(dt){this._fullscreen=!1,dt&&dt.container&&(dt.container instanceof j.window.HTMLElement?this._container=dt.container:j.warnOnce("Full screen control 'container' must be a DOM element.")),j.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in j.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in j.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(dt){return this._map=dt,this._container||(this._container=this._map.getContainer()),this._controlContainer=gt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",j.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,j.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!j.window.document.fullscreenEnabled&&!j.window.document.webkitFullscreenEnabled)}_setupUI(){const dt=this._fullscreenButton=gt("button","mapboxgl-ctrl-fullscreen",this._controlContainer);gt("span","mapboxgl-ctrl-icon",dt).setAttribute("aria-hidden","true"),dt.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),j.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const dt=this._getTitle();this._fullscreenButton.setAttribute("aria-label",dt),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",dt)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(j.window.document.fullscreenElement||j.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?j.window.document.exitFullscreen?j.window.document.exitFullscreen():j.window.document.webkitCancelFullScreen&&j.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends j.Evented{constructor(dt){super(),this.options=j.extend(Object.create(qu),dt),j.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(dt&&dt.className?dt.className.trim().split(/\s+/):[])}addTo(dt){return this._map&&this.remove(),this._map=dt,this.options.closeOnClick&&dt.on("preclick",this._onClose),this.options.closeOnMove&&dt.on("move",this._onClose),dt.on("remove",this.remove),this._update(),dt._addPopup(this),this._focusFirstElement(),this._trackPointer?(dt.on("mousemove",this._onMouseEvent),dt.on("mouseup",this._onMouseEvent),dt._canvasContainer.classList.add("mapboxgl-track-pointer")):dt.on("move",this._update),this.fire(new j.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const dt=this._map;return dt&&(dt.off("move",this._update),dt.off("move",this._onClose),dt.off("preclick",this._onClose),dt.off("click",this._onClose),dt.off("remove",this.remove),dt.off("mousemove",this._onMouseEvent),dt.off("mouseup",this._onMouseEvent),dt.off("drag",this._onMouseEvent),dt._canvasContainer&&dt._canvasContainer.classList.remove("mapboxgl-track-pointer"),dt._removePopup(this),this._map=void 0),this.fire(new j.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(dt){this._lngLat=j.LngLat.convert(dt),this._pos=null,this._trackPointer=!1,this._update();const ot=this._map;return ot&&(ot.on("move",this._update),ot.off("mousemove",this._onMouseEvent),ot._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const dt=this._map;return dt&&(dt.off("move",this._update),dt.on("mousemove",this._onMouseEvent),dt.on("drag",this._onMouseEvent),dt._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(dt){return this.setDOMContent(j.window.document.createTextNode(dt))}setHTML(dt){const ot=j.window.document.createDocumentFragment(),lt=j.window.document.createElement("body");let bt;for(lt.innerHTML=dt;bt=lt.firstChild,bt;)ot.appendChild(bt);return this.setDOMContent(ot)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(dt){return this.options.maxWidth=dt,this._update(),this}setDOMContent(dt){let ot=this._content;if(ot)for(;ot.hasChildNodes();)ot.firstChild&&ot.removeChild(ot.firstChild);else ot=this._content=gt("div","mapboxgl-popup-content",this._container||void 0);if(ot.appendChild(dt),this.options.closeButton){const lt=this._closeButton=gt("button","mapboxgl-popup-close-button",ot);lt.type="button",lt.setAttribute("aria-label","Close popup"),lt.setAttribute("aria-hidden","true"),lt.innerHTML="&#215;",lt.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(dt){return this._classList.add(dt),this._updateClassList(),this}removeClassName(dt){return this._classList.delete(dt),this._updateClassList(),this}setOffset(dt){return this.options.offset=dt,this._update(),this}toggleClassName(dt){let ot;return this._classList.delete(dt)?ot=!1:(this._classList.add(dt),ot=!0),this._updateClassList(),ot}_onMouseEvent(dt){this._update(dt.point)}_getAnchor(dt){if(this.options.anchor)return this.options.anchor;const ot=this._map,lt=this._container,bt=this._pos;if(!ot||!lt||!bt)return"bottom";const kt=lt.offsetWidth,jt=lt.offsetHeight,Jt=bt.x<kt/2,an=bt.x>ot.transform.width-kt/2;if(bt.y+dt<jt)return Jt?"top-left":an?"top-right":"top";if(bt.y>ot.transform.height-jt){if(Jt)return"bottom-left";if(an)return"bottom-right"}return Jt?"left":an?"right":"bottom"}_updateClassList(){const dt=this._container;if(!dt)return;const ot=[...this._classList];ot.push("mapboxgl-popup"),this._anchor&&ot.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&ot.push("mapboxgl-popup-track-pointer"),dt.className=ot.join(" ")}_update(dt){const ot=this._map,lt=this._content;if(!ot||!this._lngLat&&!this._trackPointer||!lt)return;let bt=this._container;if(bt||(bt=this._container=gt("div","mapboxgl-popup",ot.getContainer()),this._tip=gt("div","mapboxgl-popup-tip",bt),bt.appendChild(lt)),this.options.maxWidth&&bt.style.maxWidth!==this.options.maxWidth&&(bt.style.maxWidth=this.options.maxWidth),ot.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=cp(this._lngLat,this._pos,ot.transform)),!this._trackPointer||dt){const kt=this._pos=this._trackPointer&&dt?dt:ot.project(this._lngLat),jt=Tv(this.options.offset),Jt=this._anchor=this._getAnchor(jt.y),an=Tv(this.options.offset,Jt),cn=kt.add(an).round();ot._requestDomTask(()=>{this._container&&Jt&&(this._container.style.transform=`${E_[Jt]} translate(${cn.x}px,${cn.y}px)`)})}if(!this._marker&&ot._showingGlobe()){const kt=j.isLngLatBehindGlobe(ot.transform,this._lngLat)?0:1;this._setOpacity(kt)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const dt=this._container.querySelector(v0);dt&&dt.focus()}_onClose(){this.remove()}_setOpacity(dt){this._container&&(this._container.style.opacity=`${dt}`),this._content&&(this._content.style.pointerEvents=dt?"auto":"none")}},Marker:T_,Style:op,LngLat:j.LngLat,LngLatBounds:j.LngLatBounds,Point:j.pointGeometry,MercatorCoordinate:j.MercatorCoordinate,FreeCameraOptions:iy,Evented:j.Evented,config:j.config,prewarm:function(){Lo().acquire(So)},clearPrewarmedResources:function(){const dt=Oo;dt&&(dt.isPreloaded()&&dt.numActive()===1?(dt.release(So),Oo=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return j.config.ACCESS_TOKEN},set accessToken(dt){j.config.ACCESS_TOKEN=dt},get baseApiUrl(){return j.config.API_URL},set baseApiUrl(dt){j.config.API_URL=dt},get workerCount(){return Eo.workerCount},set workerCount(dt){Eo.workerCount=dt},get maxParallelImageRequests(){return j.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(dt){j.config.MAX_PARALLEL_IMAGE_REQUESTS=dt},clearStorage(dt){j.clearTileCache(dt)},workerUrl:"",workerClass:null,setNow:j.exported.setNow,restoreNow:j.exported.restoreNow};return Vy});var tt=$;return tt})})(mapboxGl);const mapboxgl=mapboxGlExports,app="_app_s5332_1",card="_card_s5332_16",styles$1={app,"map-container":"_map-container_s5332_9",card,"fade-in":"_fade-in_s5332_34","fade-out":"_fade-out_s5332_55"};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(i[_]=s[_])}return i},_extends$1.apply(this,arguments)}function isPlainObject$1(i){return i!==null&&typeof i=="object"&&i.constructor===Object}function deepClone(i){if(!isPlainObject$1(i))return i;const o={};return Object.keys(i).forEach(s=>{o[s]=deepClone(i[s])}),o}function deepmerge(i,o,s={clone:!0}){const _=s.clone?_extends$1({},i):i;return isPlainObject$1(i)&&isPlainObject$1(o)&&Object.keys(o).forEach($=>{$!=="__proto__"&&(isPlainObject$1(o[$])&&$ in i&&isPlainObject$1(i[$])?_[$]=deepmerge(i[$],o[$],s):s.clone?_[$]=isPlainObject$1(o[$])?deepClone(o[$]):o[$]:_[$]=o[$])}),_}function formatMuiErrorMessage(i){let o="https://mui.com/production-error/?code="+i;for(let s=1;s<arguments.length;s+=1)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified MUI error #"+i+"; visit "+o+" for the full message."}function capitalize(i){if(typeof i!="string")throw new Error(formatMuiErrorMessage(7));return i.charAt(0).toUpperCase()+i.slice(1)}function resolveProps(i,o){const s=_extends$1({},o);return Object.keys(i).forEach(_=>{if(_.toString().match(/^(components|slots)$/))s[_]=_extends$1({},i[_],s[_]);else if(_.toString().match(/^(componentsProps|slotProps)$/)){const $=i[_]||{},et=o[_];s[_]={},!et||!Object.keys(et)?s[_]=$:!$||!Object.keys($)?s[_]=et:(s[_]=_extends$1({},et),Object.keys($).forEach(tt=>{s[_][tt]=resolveProps($[tt],et[tt])}))}else s[_]===void 0&&(s[_]=i[_])}),s}function composeClasses(i,o,s){const _={};return Object.keys(i).forEach($=>{_[$]=i[$].reduce((et,tt)=>(tt&&(et.push(o(tt)),s&&s[tt]&&et.push(s[tt])),et),[]).join(" ")}),_}const defaultGenerator=i=>i,createClassNameGenerator=()=>{let i=defaultGenerator;return{configure(o){i=o},generate(o){return i(o)},reset(){i=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClassesMapping={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function generateUtilityClass(i,o,s="Mui"){const _=globalStateClassesMapping[o];return _?`${s}-${_}`:`${ClassNameGenerator$1.generate(i)}-${o}`}function generateUtilityClasses(i,o,s="Mui"){const _={};return o.forEach($=>{_[$]=generateUtilityClass(i,$,s)}),_}function memoize$1(i){var o=Object.create(null);return function(s){return o[s]===void 0&&(o[s]=i(s)),o[s]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(i){return reactPropsRegex.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91});function sheetForTag(i){if(i.sheet)return i.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===i)return document.styleSheets[o]}function createStyleElement(i){var o=document.createElement("style");return o.setAttribute("data-emotion",i.key),i.nonce!==void 0&&o.setAttribute("nonce",i.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var StyleSheet=function(){function i(s){var _=this;this._insertTag=function($){var et;_.tags.length===0?_.insertionPoint?et=_.insertionPoint.nextSibling:_.prepend?et=_.container.firstChild:et=_.before:et=_.tags[_.tags.length-1].nextSibling,_.container.insertBefore($,et),_.tags.push($)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var o=i.prototype;return o.hydrate=function(_){_.forEach(this._insertTag)},o.insert=function(_){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var $=this.tags[this.tags.length-1];if(this.isSpeedy){var et=sheetForTag($);try{et.insertRule(_,et.cssRules.length)}catch{}}else $.appendChild(document.createTextNode(_));this.ctr++},o.flush=function(){this.tags.forEach(function(_){return _.parentNode&&_.parentNode.removeChild(_)}),this.tags=[],this.ctr=0},i}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(i,o){return charat(i,0)^45?(((o<<2^charat(i,0))<<2^charat(i,1))<<2^charat(i,2))<<2^charat(i,3):0}function trim(i){return i.trim()}function match(i,o){return(i=o.exec(i))?i[0]:i}function replace(i,o,s){return i.replace(o,s)}function indexof(i,o){return i.indexOf(o)}function charat(i,o){return i.charCodeAt(o)|0}function substr(i,o,s){return i.slice(o,s)}function strlen(i){return i.length}function sizeof(i){return i.length}function append(i,o){return o.push(i),i}function combine(i,o){return i.map(o).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(i,o,s,_,$,et,tt){return{value:i,root:o,parent:s,type:_,props:$,children:et,line,column,length:tt,return:""}}function copy(i,o){return assign(node("",null,null,"",null,null,0),i,{length:-i.length},o)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(i,o){return substr(characters,i,o)}function token(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(i){return line=column=1,length=strlen(characters=i),position=0,[]}function dealloc(i){return characters="",i}function delimit(i){return trim(slice(position-1,delimiter(i===91?i+2:i===40?i+1:i)))}function whitespace(i){for(;(character=peek())&&character<33;)next();return token(i)>2||token(character)>3?"":" "}function escaping(i,o){for(;--o&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(i,caret()+(o<6&&peek()==32&&next()==32))}function delimiter(i){for(;next();)switch(character){case i:return position;case 34:case 39:i!==34&&i!==39&&delimiter(character);break;case 40:i===41&&delimiter(i);break;case 92:next();break}return position}function commenter(i,o){for(;next()&&i+character!==47+10;)if(i+character===42+42&&peek()===47)break;return"/*"+slice(o,position-1)+"*"+from(i===47?i:next())}function identifier(i){for(;!token(peek());)next();return slice(i,position)}function compile(i){return dealloc(parse$1("",null,null,null,[""],i=alloc(i),0,[0],i))}function parse$1(i,o,s,_,$,et,tt,j,it){for(var st=0,ht=0,_t=tt,gt=0,ft=0,ut=0,yt=1,Et=1,Mt=1,Ft=0,Rt="",Ot=$,pt=et,Lt=_,nn=Rt;Et;)switch(ut=Ft,Ft=next()){case 40:if(ut!=108&&charat(nn,_t-1)==58){indexof(nn+=replace(delimit(Ft),"&","&\f"),"&\f")!=-1&&(Mt=-1);break}case 34:case 39:case 91:nn+=delimit(Ft);break;case 9:case 10:case 13:case 32:nn+=whitespace(ut);break;case 92:nn+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),o,s),it);break;default:nn+="/"}break;case 123*yt:j[st++]=strlen(nn)*Mt;case 125*yt:case 59:case 0:switch(Ft){case 0:case 125:Et=0;case 59+ht:ft>0&&strlen(nn)-_t&&append(ft>32?declaration(nn+";",_,s,_t-1):declaration(replace(nn," ","")+";",_,s,_t-2),it);break;case 59:nn+=";";default:if(append(Lt=ruleset(nn,o,s,st,ht,$,j,Rt,Ot=[],pt=[],_t),et),Ft===123)if(ht===0)parse$1(nn,o,Lt,Lt,Ot,et,_t,j,pt);else switch(gt===99&&charat(nn,3)===110?100:gt){case 100:case 109:case 115:parse$1(i,Lt,Lt,_&&append(ruleset(i,Lt,Lt,0,0,$,j,Rt,$,Ot=[],_t),pt),$,pt,_t,j,_?Ot:pt);break;default:parse$1(nn,Lt,Lt,Lt,[""],pt,0,j,pt)}}st=ht=ft=0,yt=Mt=1,Rt=nn="",_t=tt;break;case 58:_t=1+strlen(nn),ft=ut;default:if(yt<1){if(Ft==123)--yt;else if(Ft==125&&yt++==0&&prev()==125)continue}switch(nn+=from(Ft),Ft*yt){case 38:Mt=ht>0?1:(nn+="\f",-1);break;case 44:j[st++]=(strlen(nn)-1)*Mt,Mt=1;break;case 64:peek()===45&&(nn+=delimit(next())),gt=peek(),ht=_t=strlen(Rt=nn+=identifier(caret())),Ft++;break;case 45:ut===45&&strlen(nn)==2&&(yt=0)}}return et}function ruleset(i,o,s,_,$,et,tt,j,it,st,ht){for(var _t=$-1,gt=$===0?et:[""],ft=sizeof(gt),ut=0,yt=0,Et=0;ut<_;++ut)for(var Mt=0,Ft=substr(i,_t+1,_t=abs(yt=tt[ut])),Rt=i;Mt<ft;++Mt)(Rt=trim(yt>0?gt[Mt]+" "+Ft:replace(Ft,/&\f/g,gt[Mt])))&&(it[Et++]=Rt);return node(i,o,s,$===0?RULESET:j,it,st,ht)}function comment(i,o,s){return node(i,o,s,COMMENT,from(char()),substr(i,2,-2),0)}function declaration(i,o,s,_){return node(i,o,s,DECLARATION,substr(i,0,_),substr(i,_+1,-1),_)}function serialize(i,o){for(var s="",_=sizeof(i),$=0;$<_;$++)s+=o(i[$],$,i,o)||"";return s}function stringify(i,o,s,_){switch(i.type){case IMPORT:case DECLARATION:return i.return=i.return||i.value;case COMMENT:return"";case KEYFRAMES:return i.return=i.value+"{"+serialize(i.children,_)+"}";case RULESET:i.value=i.props.join(",")}return strlen(s=serialize(i.children,_))?i.return=i.value+"{"+s+"}":""}function middleware(i){var o=sizeof(i);return function(s,_,$,et){for(var tt="",j=0;j<o;j++)tt+=i[j](s,_,$,et)||"";return tt}}function rulesheet(i){return function(o){o.root||(o=o.return)&&i(o)}}var identifierWithPointTracking=function(o,s,_){for(var $=0,et=0;$=et,et=peek(),$===38&&et===12&&(s[_]=1),!token(et);)next();return slice(o,position)},toRules=function(o,s){var _=-1,$=44;do switch(token($)){case 0:$===38&&peek()===12&&(s[_]=1),o[_]+=identifierWithPointTracking(position-1,s,_);break;case 2:o[_]+=delimit($);break;case 4:if($===44){o[++_]=peek()===58?"&\f":"",s[_]=o[_].length;break}default:o[_]+=from($)}while($=next());return o},getRules=function(o,s){return dealloc(toRules(alloc(o),s))},fixedElements=new WeakMap,compat=function(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var s=o.value,_=o.parent,$=o.column===_.column&&o.line===_.line;_.type!=="rule";)if(_=_.parent,!_)return;if(!(o.props.length===1&&s.charCodeAt(0)!==58&&!fixedElements.get(_))&&!$){fixedElements.set(o,!0);for(var et=[],tt=getRules(s,et),j=_.props,it=0,st=0;it<tt.length;it++)for(var ht=0;ht<j.length;ht++,st++)o.props[st]=et[it]?tt[it].replace(/&\f/g,j[ht]):j[ht]+" "+tt[it]}}},removeLabel=function(o){if(o.type==="decl"){var s=o.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(o.return="",o.value="")}};function prefix(i,o){switch(hash(i,o)){case 5103:return WEBKIT+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+i+MOZ+i+MS+i+i;case 6828:case 4268:return WEBKIT+i+MS+i+i;case 6165:return WEBKIT+i+MS+"flex-"+i+i;case 5187:return WEBKIT+i+replace(i,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+i;case 5443:return WEBKIT+i+MS+"flex-item-"+replace(i,/flex-|-self/,"")+i;case 4675:return WEBKIT+i+MS+"flex-line-pack"+replace(i,/align-content|flex-|-self/,"")+i;case 5548:return WEBKIT+i+MS+replace(i,"shrink","negative")+i;case 5292:return WEBKIT+i+MS+replace(i,"basis","preferred-size")+i;case 6060:return WEBKIT+"box-"+replace(i,"-grow","")+WEBKIT+i+MS+replace(i,"grow","positive")+i;case 4554:return WEBKIT+replace(i,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+i;case 6187:return replace(replace(replace(i,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),i,"")+i;case 5495:case 3959:return replace(i,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(i,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+i+i;case 4095:case 3583:case 4068:case 2532:return replace(i,/(.+)-inline(.+)/,WEBKIT+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(i)-1-o>6)switch(charat(i,o+1)){case 109:if(charat(i,o+4)!==45)break;case 102:return replace(i,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(i,o+3)==108?"$3":"$2-$3"))+i;case 115:return~indexof(i,"stretch")?prefix(replace(i,"stretch","fill-available"),o)+i:i}break;case 4949:if(charat(i,o+1)!==115)break;case 6444:switch(charat(i,strlen(i)-3-(~indexof(i,"!important")&&10))){case 107:return replace(i,":",":"+WEBKIT)+i;case 101:return replace(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(i,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+i}break;case 5936:switch(charat(i,o+11)){case 114:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return WEBKIT+i+MS+i+i}return i}var prefixer=function(o,s,_,$){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix(o.value,o.length);break;case KEYFRAMES:return serialize([copy(o,{value:replace(o.value,"@","@"+WEBKIT)})],$);case RULESET:if(o.length)return combine(o.props,function(et){switch(match(et,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(o,{props:[replace(et,/:(read-\w+)/,":"+MOZ+"$1")]})],$);case"::placeholder":return serialize([copy(o,{props:[replace(et,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(o,{props:[replace(et,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(o,{props:[replace(et,/:(plac\w+)/,MS+"input-$1")]})],$)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(o){var s=o.key;if(s==="css"){var _=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(_,function(yt){var Et=yt.getAttribute("data-emotion");Et.indexOf(" ")!==-1&&(document.head.appendChild(yt),yt.setAttribute("data-s",""))})}var $=o.stylisPlugins||defaultStylisPlugins,et={},tt,j=[];tt=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(yt){for(var Et=yt.getAttribute("data-emotion").split(" "),Mt=1;Mt<Et.length;Mt++)et[Et[Mt]]=!0;j.push(yt)});var it,st=[compat,removeLabel];{var ht,_t=[stringify,rulesheet(function(yt){ht.insert(yt)})],gt=middleware(st.concat($,_t)),ft=function(Et){return serialize(compile(Et),gt)};it=function(Et,Mt,Ft,Rt){ht=Ft,ft(Et?Et+"{"+Mt.styles+"}":Mt.styles),Rt&&(ut.inserted[Mt.name]=!0)}}var ut={key:s,sheet:new StyleSheet({key:s,container:tt,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:et,registered:{},insert:it};return ut.sheet.hydrate(j),ut},reactIsExports={},reactIs$1={get exports(){return reactIsExports},set exports(i){reactIsExports=i}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r$1=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(i){if(typeof i=="object"&&i!==null){var o=i.$$typeof;switch(o){case c:switch(i=i.type,i){case l:case m:case e:case g:case f:case p:return i;default:switch(i=i&&i.$$typeof,i){case k:case n:case t:case r$1:case h:return i;default:return o}}case d:return o}}}function A(i){return z(i)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r$1;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(i){return A(i)||z(i)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(i){return z(i)===k};reactIs_production_min.isContextProvider=function(i){return z(i)===h};reactIs_production_min.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===c};reactIs_production_min.isForwardRef=function(i){return z(i)===n};reactIs_production_min.isFragment=function(i){return z(i)===e};reactIs_production_min.isLazy=function(i){return z(i)===t};reactIs_production_min.isMemo=function(i){return z(i)===r$1};reactIs_production_min.isPortal=function(i){return z(i)===d};reactIs_production_min.isProfiler=function(i){return z(i)===g};reactIs_production_min.isStrictMode=function(i){return z(i)===f};reactIs_production_min.isSuspense=function(i){return z(i)===p};reactIs_production_min.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===e||i===m||i===g||i===f||i===p||i===q||typeof i=="object"&&i!==null&&(i.$$typeof===t||i.$$typeof===r$1||i.$$typeof===h||i.$$typeof===k||i.$$typeof===n||i.$$typeof===w||i.$$typeof===x||i.$$typeof===y||i.$$typeof===v)};reactIs_production_min.typeOf=z;(function(i){i.exports=reactIs_production_min})(reactIs$1);var reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser$1=!0;function getRegisteredStyles(i,o,s){var _="";return s.split(" ").forEach(function($){i[$]!==void 0?o.push(i[$]+";"):_+=$+" "}),_}var registerStyles=function(o,s,_){var $=o.key+"-"+s.name;(_===!1||isBrowser$1===!1)&&o.registered[$]===void 0&&(o.registered[$]=s.styles)},insertStyles=function(o,s,_){registerStyles(o,s,_);var $=o.key+"-"+s.name;if(o.inserted[s.name]===void 0){var et=s;do o.insert(s===et?"."+$:"",et,o.sheet,!0),et=et.next;while(et!==void 0)}};function murmur2(i){for(var o=0,s,_=0,$=i.length;$>=4;++_,$-=4)s=i.charCodeAt(_)&255|(i.charCodeAt(++_)&255)<<8|(i.charCodeAt(++_)&255)<<16|(i.charCodeAt(++_)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,o=(s&65535)*1540483477+((s>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch($){case 3:o^=(i.charCodeAt(_+2)&255)<<16;case 2:o^=(i.charCodeAt(_+1)&255)<<8;case 1:o^=i.charCodeAt(_)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(o){return o.charCodeAt(1)===45},isProcessableValue=function(o){return o!=null&&typeof o!="boolean"},processStyleName=memoize$1(function(i){return isCustomProperty(i)?i:i.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(o,s){switch(o){case"animation":case"animationName":if(typeof s=="string")return s.replace(animationRegex,function(_,$,et){return cursor={name:$,styles:et,next:cursor},$})}return unitlessKeys[o]!==1&&!isCustomProperty(o)&&typeof s=="number"&&s!==0?s+"px":s},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(i,o,s){if(s==null)return"";if(s.__emotion_styles!==void 0)return s;switch(typeof s){case"boolean":return"";case"object":{if(s.anim===1)return cursor={name:s.name,styles:s.styles,next:cursor},s.name;if(s.styles!==void 0){var _=s.next;if(_!==void 0)for(;_!==void 0;)cursor={name:_.name,styles:_.styles,next:cursor},_=_.next;var $=s.styles+";";return $}return createStringFromObject(i,o,s)}case"function":{if(i!==void 0){var et=cursor,tt=s(i);return cursor=et,handleInterpolation(i,o,tt)}break}}if(o==null)return s;var j=o[s];return j!==void 0?j:s}function createStringFromObject(i,o,s){var _="";if(Array.isArray(s))for(var $=0;$<s.length;$++)_+=handleInterpolation(i,o,s[$])+";";else for(var et in s){var tt=s[et];if(typeof tt!="object")o!=null&&o[tt]!==void 0?_+=et+"{"+o[tt]+"}":isProcessableValue(tt)&&(_+=processStyleName(et)+":"+processStyleValue(et,tt)+";");else if(Array.isArray(tt)&&typeof tt[0]=="string"&&(o==null||o[tt[0]]===void 0))for(var j=0;j<tt.length;j++)isProcessableValue(tt[j])&&(_+=processStyleName(et)+":"+processStyleValue(et,tt[j])+";");else{var it=handleInterpolation(i,o,tt);switch(et){case"animation":case"animationName":{_+=processStyleName(et)+":"+it+";";break}default:_+=et+"{"+it+"}"}}}return _}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(o,s,_){if(o.length===1&&typeof o[0]=="object"&&o[0]!==null&&o[0].styles!==void 0)return o[0];var $=!0,et="";cursor=void 0;var tt=o[0];tt==null||tt.raw===void 0?($=!1,et+=handleInterpolation(_,s,tt)):et+=tt[0];for(var j=1;j<o.length;j++)et+=handleInterpolation(_,s,o[j]),$&&(et+=tt[j]);labelPattern.lastIndex=0;for(var it="",st;(st=labelPattern.exec(et))!==null;)it+="-"+st[1];var ht=murmur2(et)+it;return{name:ht,styles:et,next:cursor}},syncFallback=function(o){return o()},useInsertionEffect=React$2["useInsertionEffect"]?React$2["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(o){return reactExports.forwardRef(function(s,_){var $=reactExports.useContext(EmotionCacheContext);return o(s,$,_)})},ThemeContext$2=reactExports.createContext({}),Global=withEmotionCache(function(i,o){var s=i.styles,_=serializeStyles([s],void 0,reactExports.useContext(ThemeContext$2)),$=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var et=o.key+"-global",tt=new o.sheet.constructor({key:et,nonce:o.sheet.nonce,container:o.sheet.container,speedy:o.sheet.isSpeedy}),j=!1,it=document.querySelector('style[data-emotion="'+et+" "+_.name+'"]');return o.sheet.tags.length&&(tt.before=o.sheet.tags[0]),it!==null&&(j=!0,it.setAttribute("data-emotion",et),tt.hydrate([it])),$.current=[tt,j],function(){tt.flush()}},[o]),useInsertionEffectWithLayoutFallback(function(){var et=$.current,tt=et[0],j=et[1];if(j){et[1]=!1;return}if(_.next!==void 0&&insertStyles(o,_.next,!0),tt.tags.length){var it=tt.tags[tt.tags.length-1].nextElementSibling;tt.before=it,tt.flush()}o.insert("",_,tt,!1)},[o,_.name]),null}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(o){return o!=="theme"},getDefaultShouldForwardProp=function(o){return typeof o=="string"&&o.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(o,s,_){var $;if(s){var et=s.shouldForwardProp;$=o.__emotion_forwardProp&&et?function(tt){return o.__emotion_forwardProp(tt)&&et(tt)}:et}return typeof $!="function"&&_&&($=o.__emotion_forwardProp),$},Insertion=function(o){var s=o.cache,_=o.serialized,$=o.isStringTag;return registerStyles(s,_,$),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(s,_,$)}),null},createStyled$1=function i(o,s){var _=o.__emotion_real===o,$=_&&o.__emotion_base||o,et,tt;s!==void 0&&(et=s.label,tt=s.target);var j=composeShouldForwardProps(o,s,_),it=j||getDefaultShouldForwardProp($),st=!it("as");return function(){var ht=arguments,_t=_&&o.__emotion_styles!==void 0?o.__emotion_styles.slice(0):[];if(et!==void 0&&_t.push("label:"+et+";"),ht[0]==null||ht[0].raw===void 0)_t.push.apply(_t,ht);else{_t.push(ht[0][0]);for(var gt=ht.length,ft=1;ft<gt;ft++)_t.push(ht[ft],ht[0][ft])}var ut=withEmotionCache(function(yt,Et,Mt){var Ft=st&&yt.as||$,Rt="",Ot=[],pt=yt;if(yt.theme==null){pt={};for(var Lt in yt)pt[Lt]=yt[Lt];pt.theme=reactExports.useContext(ThemeContext$2)}typeof yt.className=="string"?Rt=getRegisteredStyles(Et.registered,Ot,yt.className):yt.className!=null&&(Rt=yt.className+" ");var nn=serializeStyles(_t.concat(Ot),Et.registered,pt);Rt+=Et.key+"-"+nn.name,tt!==void 0&&(Rt+=" "+tt);var on=st&&j===void 0?getDefaultShouldForwardProp(Ft):it,wt={};for(var xt in yt)st&&xt==="as"||on(xt)&&(wt[xt]=yt[xt]);return wt.className=Rt,wt.ref=Mt,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:Et,serialized:nn,isStringTag:typeof Ft=="string"}),reactExports.createElement(Ft,wt))});return ut.displayName=et!==void 0?et:"Styled("+(typeof $=="string"?$:$.displayName||$.name||"Component")+")",ut.defaultProps=o.defaultProps,ut.__emotion_real=ut,ut.__emotion_base=$,ut.__emotion_styles=_t,ut.__emotion_forwardProp=j,Object.defineProperty(ut,"toString",{value:function(){return"."+tt}}),ut.withComponent=function(yt,Et){return i(yt,_extends$1({},s,Et,{shouldForwardProp:composeShouldForwardProps(ut,Et,!0)})).apply(void 0,_t)},ut}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(i){newStyled[i]=newStyled(i)});const emStyled=newStyled;function isEmpty$2(i){return i==null||Object.keys(i).length===0}function GlobalStyles$1(i){const{styles:o,defaultTheme:s={}}=i;return jsx(Global,{styles:typeof o=="function"?$=>o(isEmpty$2($)?s:$):o})}/** @license MUI v5.11.0
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$2(i,o){return emStyled(i,o)}const internal_processStyles=(i,o)=>{Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=o(i.__emotion_styles))};function merge$1(i,o){return o?deepmerge(i,o,{clone:!1}):i}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${values[i]}px)`};function handleBreakpoints(i,o,s){const _=i.theme||{};if(Array.isArray(o)){const et=_.breakpoints||defaultBreakpoints;return o.reduce((tt,j,it)=>(tt[et.up(et.keys[it])]=s(o[it]),tt),{})}if(typeof o=="object"){const et=_.breakpoints||defaultBreakpoints;return Object.keys(o).reduce((tt,j)=>{if(Object.keys(et.values||values).indexOf(j)!==-1){const it=et.up(j);tt[it]=s(o[j],j)}else{const it=j;tt[it]=o[it]}return tt},{})}return s(o)}function createEmptyBreakpointObject(i={}){var o;return((o=i.keys)==null?void 0:o.reduce((_,$)=>{const et=i.up($);return _[et]={},_},{}))||{}}function removeUnusedBreakpoints(i,o){return i.reduce((s,_)=>{const $=s[_];return(!$||Object.keys($).length===0)&&delete s[_],s},o)}function getPath(i,o,s=!0){if(!o||typeof o!="string")return null;if(i&&i.vars&&s){const _=`vars.${o}`.split(".").reduce(($,et)=>$&&$[et]?$[et]:null,i);if(_!=null)return _}return o.split(".").reduce((_,$)=>_&&_[$]!=null?_[$]:null,i)}function getStyleValue(i,o,s,_=s){let $;return typeof i=="function"?$=i(s):Array.isArray(i)?$=i[s]||_:$=getPath(i,s)||_,o&&($=o($,_,i)),$}function style$1(i){const{prop:o,cssProperty:s=i.prop,themeKey:_,transform:$}=i,et=tt=>{if(tt[o]==null)return null;const j=tt[o],it=tt.theme,st=getPath(it,_)||{};return handleBreakpoints(tt,j,_t=>{let gt=getStyleValue(st,$,_t);return _t===gt&&typeof _t=="string"&&(gt=getStyleValue(st,$,`${o}${_t==="default"?"":capitalize(_t)}`,_t)),s===!1?gt:{[s]:gt}})};return et.propTypes={},et.filterProps=[o],et}function compose(...i){const o=i.reduce((_,$)=>($.filterProps.forEach(et=>{_[et]=$}),_),{}),s=_=>Object.keys(_).reduce(($,et)=>o[et]?merge$1($,o[et](_)):$,{});return s.propTypes={},s.filterProps=i.reduce((_,$)=>_.concat($.filterProps),[]),s}function memoize(i){const o={};return s=>(o[s]===void 0&&(o[s]=i(s)),o[s])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(i=>{if(i.length>2)if(aliases[i])i=aliases[i];else return[i];const[o,s]=i.split(""),_=properties[o],$=directions[s]||"";return Array.isArray($)?$.map(et=>_+et):[_+$]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(i,o,s,_){var $;const et=($=getPath(i,o,!1))!=null?$:s;return typeof et=="number"?tt=>typeof tt=="string"?tt:et*tt:Array.isArray(et)?tt=>typeof tt=="string"?tt:et[tt]:typeof et=="function"?et:()=>{}}function createUnarySpacing(i){return createUnaryUnit(i,"spacing",8)}function getValue(i,o){if(typeof o=="string"||o==null)return o;const s=Math.abs(o),_=i(s);return o>=0?_:typeof _=="number"?-_:`-${_}`}function getStyleFromPropValue(i,o){return s=>i.reduce((_,$)=>(_[$]=getValue(o,s),_),{})}function resolveCssProperty(i,o,s,_){if(o.indexOf(s)===-1)return null;const $=getCssProperties(s),et=getStyleFromPropValue($,_),tt=i[s];return handleBreakpoints(i,tt,et)}function style(i,o){const s=createUnarySpacing(i.theme);return Object.keys(i).map(_=>resolveCssProperty(i,o,_,s)).reduce(merge$1,{})}function margin(i){return style(i,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(i){return style(i,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function borderTransform(i){return typeof i!="number"?i:`${i}px solid`}const border=style$1({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$1({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$1({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$1({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$1({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$1({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$1({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$1({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$1({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$1({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const o=createUnaryUnit(i.theme,"shape.borderRadius",4),s=_=>({borderRadius:getValue(o,_)});return handleBreakpoints(i,i.borderRadius,s)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=i=>{if(i.gap!==void 0&&i.gap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_=>({gap:getValue(o,_)});return handleBreakpoints(i,i.gap,s)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_=>({columnGap:getValue(o,_)});return handleBreakpoints(i,i.columnGap,s)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_=>({rowGap:getValue(o,_)});return handleBreakpoints(i,i.rowGap,s)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(i,o){return o==="grey"?o:i}const color$1=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor);function sizingTransform(i){return i<=1&&i!==0?`${i*100}%`:i}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const o=s=>{var _,$,et;return{maxWidth:((_=i.theme)==null||($=_.breakpoints)==null||(et=$.values)==null?void 0:et[s])||values[s]||sizingTransform(s)}};return handleBreakpoints(i,i.maxWidth,o)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...i){const o=i.reduce((_,$)=>_.concat(Object.keys($)),[]),s=new Set(o);return i.every(_=>s.size===Object.keys(_).length)}function callIfFn(i,o){return typeof i=="function"?i(o):i}function unstable_createStyleFunctionSx(){function i(s,_,$,et){const tt={[s]:_,theme:$},j=et[s];if(!j)return{[s]:_};const{cssProperty:it=s,themeKey:st,transform:ht,style:_t}=j;if(_==null)return null;const gt=getPath($,st)||{};return _t?_t(tt):handleBreakpoints(tt,_,ut=>{let yt=getStyleValue(gt,ht,ut);return ut===yt&&typeof ut=="string"&&(yt=getStyleValue(gt,ht,`${s}${ut==="default"?"":capitalize(ut)}`,ut)),it===!1?yt:{[it]:yt}})}function o(s){var _;const{sx:$,theme:et={}}=s||{};if(!$)return null;const tt=(_=et.unstable_sxConfig)!=null?_:defaultSxConfig$1;function j(it){let st=it;if(typeof it=="function")st=it(et);else if(typeof it!="object")return it;if(!st)return null;const ht=createEmptyBreakpointObject(et.breakpoints),_t=Object.keys(ht);let gt=ht;return Object.keys(st).forEach(ft=>{const ut=callIfFn(st[ft],et);if(ut!=null)if(typeof ut=="object")if(tt[ft])gt=merge$1(gt,i(ft,ut,et,tt));else{const yt=handleBreakpoints({theme:et},ut,Et=>({[ft]:Et}));objectsHaveSameKeys(yt,ut)?gt[ft]=o({sx:ut,theme:et}):gt=merge$1(gt,yt)}else gt=merge$1(gt,i(ft,ut,et,tt))}),removeUnusedBreakpoints(_t,gt)}return Array.isArray($)?$.map(j):j($)}return o}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx;function _objectWithoutPropertiesLoose$1(i,o){if(i==null)return{};var s={},_=Object.keys(i),$,et;for(et=0;et<_.length;et++)$=_[et],!(o.indexOf($)>=0)&&(s[$]=i[$]);return s}const _excluded$9=["sx"],splitProps=i=>{var o,s;const _={systemProps:{},otherProps:{}},$=(o=i==null||(s=i.theme)==null?void 0:s.unstable_sxConfig)!=null?o:defaultSxConfig$1;return Object.keys(i).forEach(et=>{$[et]?_.systemProps[et]=i[et]:_.otherProps[et]=i[et]}),_};function extendSxProp(i){const{sx:o}=i,s=_objectWithoutPropertiesLoose$1(i,_excluded$9),{systemProps:_,otherProps:$}=splitProps(s);let et;return Array.isArray(o)?et=[_,...o]:typeof o=="function"?et=(...tt)=>{const j=o(...tt);return isPlainObject$1(j)?_extends$1({},_,j):_}:et=_extends$1({},_,o),_extends$1({},$,{sx:et})}function r(i){var o,s,_="";if(typeof i=="string"||typeof i=="number")_+=i;else if(typeof i=="object")if(Array.isArray(i))for(o=0;o<i.length;o++)i[o]&&(s=r(i[o]))&&(_&&(_+=" "),_+=s);else for(o in i)i[o]&&(_&&(_+=" "),_+=o);return _}function clsx(){for(var i,o,s=0,_="";s<arguments.length;)(i=arguments[s++])&&(o=r(i))&&(_&&(_+=" "),_+=o);return _}const _excluded$8=["values","unit","step"],sortBreakpointsValues=i=>{const o=Object.keys(i).map(s=>({key:s,val:i[s]}))||[];return o.sort((s,_)=>s.val-_.val),o.reduce((s,_)=>_extends$1({},s,{[_.key]:_.val}),{})};function createBreakpoints(i){const{values:o={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:s="px",step:_=5}=i,$=_objectWithoutPropertiesLoose$1(i,_excluded$8),et=sortBreakpointsValues(o),tt=Object.keys(et);function j(gt){return`@media (min-width:${typeof o[gt]=="number"?o[gt]:gt}${s})`}function it(gt){return`@media (max-width:${(typeof o[gt]=="number"?o[gt]:gt)-_/100}${s})`}function st(gt,ft){const ut=tt.indexOf(ft);return`@media (min-width:${typeof o[gt]=="number"?o[gt]:gt}${s}) and (max-width:${(ut!==-1&&typeof o[tt[ut]]=="number"?o[tt[ut]]:ft)-_/100}${s})`}function ht(gt){return tt.indexOf(gt)+1<tt.length?st(gt,tt[tt.indexOf(gt)+1]):j(gt)}function _t(gt){const ft=tt.indexOf(gt);return ft===0?j(tt[1]):ft===tt.length-1?it(tt[ft]):st(gt,tt[tt.indexOf(gt)+1]).replace("@media","@media not all and")}return _extends$1({keys:tt,values:et,up:j,down:it,between:st,only:ht,not:_t,unit:s},$)}const shape={borderRadius:4},shape$1=shape;function createSpacing(i=8){if(i.mui)return i;const o=createUnarySpacing({spacing:i}),s=(..._)=>(_.length===0?[1]:_).map(et=>{const tt=o(et);return typeof tt=="number"?`${tt}px`:tt}).join(" ");return s.mui=!0,s}const _excluded$7=["breakpoints","palette","spacing","shape"];function createTheme$1(i={},...o){const{breakpoints:s={},palette:_={},spacing:$,shape:et={}}=i,tt=_objectWithoutPropertiesLoose$1(i,_excluded$7),j=createBreakpoints(s),it=createSpacing($);let st=deepmerge({breakpoints:j,direction:"ltr",components:{},palette:_extends$1({mode:"light"},_),spacing:it,shape:_extends$1({},shape$1,et)},tt);return st=o.reduce((ht,_t)=>deepmerge(ht,_t),st),st.unstable_sxConfig=_extends$1({},defaultSxConfig$1,tt==null?void 0:tt.unstable_sxConfig),st.unstable_sx=function(_t){return styleFunctionSx$1({sx:_t,theme:this})},st}const ThemeContext=reactExports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$2(){return reactExports.useContext(ThemeContext$1)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(i,o){return typeof o=="function"?o(i):_extends$1({},i,o)}function ThemeProvider$1(i){const{children:o,theme:s}=i,_=useTheme$2(),$=reactExports.useMemo(()=>{const et=_===null?s:mergeOuterLocalTheme(_,s);return et!=null&&(et[nested]=_!==null),et},[s,_]);return jsx(ThemeContext$1.Provider,{value:$,children:o})}function isObjectEmpty(i){return Object.keys(i).length===0}function useTheme$1(i=null){const o=useTheme$2();return!o||isObjectEmpty(o)?i:o}const systemDefaultTheme$1=createTheme$1();function useTheme(i=systemDefaultTheme$1){return useTheme$1(i)}const _excluded$6=["variant"];function isEmpty$1(i){return i.length===0}function propsToClassKey(i){const{variant:o}=i,s=_objectWithoutPropertiesLoose$1(i,_excluded$6);let _=o||"";return Object.keys(s).sort().forEach($=>{$==="color"?_+=isEmpty$1(_)?i[$]:capitalize(i[$]):_+=`${isEmpty$1(_)?$:capitalize($)}${capitalize(i[$].toString())}`}),_}const _excluded$5=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_excluded2=["theme"],_excluded3=["theme"];function isEmpty(i){return Object.keys(i).length===0}function isStringTag(i){return typeof i=="string"&&i.charCodeAt(0)>96}const getStyleOverrides=(i,o)=>o.components&&o.components[i]&&o.components[i].styleOverrides?o.components[i].styleOverrides:null,getVariantStyles=(i,o)=>{let s=[];o&&o.components&&o.components[i]&&o.components[i].variants&&(s=o.components[i].variants);const _={};return s.forEach($=>{const et=propsToClassKey($.props);_[et]=$.style}),_},variantsResolver=(i,o,s,_)=>{var $,et;const{ownerState:tt={}}=i,j=[],it=s==null||($=s.components)==null||(et=$[_])==null?void 0:et.variants;return it&&it.forEach(st=>{let ht=!0;Object.keys(st.props).forEach(_t=>{tt[_t]!==st.props[_t]&&i[_t]!==st.props[_t]&&(ht=!1)}),ht&&j.push(o[propsToClassKey(st.props)])}),j};function shouldForwardProp(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const systemDefaultTheme=createTheme$1();function createStyled(i={}){const{defaultTheme:o=systemDefaultTheme,rootShouldForwardProp:s=shouldForwardProp,slotShouldForwardProp:_=shouldForwardProp}=i,$=et=>{const tt=isEmpty(et.theme)?o:et.theme;return styleFunctionSx$1(_extends$1({},et,{theme:tt}))};return $.__mui_systemSx=!0,(et,tt={})=>{internal_processStyles(et,Rt=>Rt.filter(Ot=>!(Ot!=null&&Ot.__mui_systemSx)));const{name:j,slot:it,skipVariantsResolver:st,skipSx:ht,overridesResolver:_t}=tt,gt=_objectWithoutPropertiesLoose$1(tt,_excluded$5),ft=st!==void 0?st:it&&it!=="Root"||!1,ut=ht||!1;let yt,Et=shouldForwardProp;it==="Root"?Et=s:it?Et=_:isStringTag(et)&&(Et=void 0);const Mt=styled$2(et,_extends$1({shouldForwardProp:Et,label:yt},gt)),Ft=(Rt,...Ot)=>{const pt=Ot?Ot.map(wt=>typeof wt=="function"&&wt.__emotion_real!==wt?xt=>{let{theme:Nt}=xt,Tt=_objectWithoutPropertiesLoose$1(xt,_excluded2);return wt(_extends$1({theme:isEmpty(Nt)?o:Nt},Tt))}:wt):[];let Lt=Rt;j&&_t&&pt.push(wt=>{const xt=isEmpty(wt.theme)?o:wt.theme,Nt=getStyleOverrides(j,xt);if(Nt){const Tt={};return Object.entries(Nt).forEach(([Vt,Xt])=>{Tt[Vt]=typeof Xt=="function"?Xt(_extends$1({},wt,{theme:xt})):Xt}),_t(wt,Tt)}return null}),j&&!ft&&pt.push(wt=>{const xt=isEmpty(wt.theme)?o:wt.theme;return variantsResolver(wt,getVariantStyles(j,xt),xt,j)}),ut||pt.push($);const nn=pt.length-Ot.length;if(Array.isArray(Rt)&&nn>0){const wt=new Array(nn).fill("");Lt=[...Rt,...wt],Lt.raw=[...Rt.raw,...wt]}else typeof Rt=="function"&&Rt.__emotion_real!==Rt&&(Lt=wt=>{let{theme:xt}=wt,Nt=_objectWithoutPropertiesLoose$1(wt,_excluded3);return Rt(_extends$1({theme:isEmpty(xt)?o:xt},Nt))});return Mt(Lt,...pt)};return Mt.withConfig&&(Ft.withConfig=Mt.withConfig),Ft}}function getThemeProps(i){const{theme:o,name:s,props:_}=i;return!o||!o.components||!o.components[s]||!o.components[s].defaultProps?_:resolveProps(o.components[s].defaultProps,_)}function useThemeProps$1({props:i,name:o,defaultTheme:s}){const _=useTheme(s);return getThemeProps({theme:_,name:o,props:i})}function clamp(i,o=0,s=1){return Math.min(Math.max(o,i),s)}function hexToRgb(i){i=i.slice(1);const o=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let s=i.match(o);return s&&s[0].length===1&&(s=s.map(_=>_+_)),s?`rgb${s.length===4?"a":""}(${s.map((_,$)=>$<3?parseInt(_,16):Math.round(parseInt(_,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(i){if(i.type)return i;if(i.charAt(0)==="#")return decomposeColor(hexToRgb(i));const o=i.indexOf("("),s=i.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(s)===-1)throw new Error(formatMuiErrorMessage(9,i));let _=i.substring(o+1,i.length-1),$;if(s==="color"){if(_=_.split(" "),$=_.shift(),_.length===4&&_[3].charAt(0)==="/"&&(_[3]=_[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf($)===-1)throw new Error(formatMuiErrorMessage(10,$))}else _=_.split(",");return _=_.map(et=>parseFloat(et)),{type:s,values:_,colorSpace:$}}function recomposeColor(i){const{type:o,colorSpace:s}=i;let{values:_}=i;return o.indexOf("rgb")!==-1?_=_.map(($,et)=>et<3?parseInt($,10):$):o.indexOf("hsl")!==-1&&(_[1]=`${_[1]}%`,_[2]=`${_[2]}%`),o.indexOf("color")!==-1?_=`${s} ${_.join(" ")}`:_=`${_.join(", ")}`,`${o}(${_})`}function hslToRgb(i){i=decomposeColor(i);const{values:o}=i,s=o[0],_=o[1]/100,$=o[2]/100,et=_*Math.min($,1-$),tt=(st,ht=(st+s/30)%12)=>$-et*Math.max(Math.min(ht-3,9-ht,1),-1);let j="rgb";const it=[Math.round(tt(0)*255),Math.round(tt(8)*255),Math.round(tt(4)*255)];return i.type==="hsla"&&(j+="a",it.push(o[3])),recomposeColor({type:j,values:it})}function getLuminance(i){i=decomposeColor(i);let o=i.type==="hsl"||i.type==="hsla"?decomposeColor(hslToRgb(i)).values:i.values;return o=o.map(s=>(i.type!=="color"&&(s/=255),s<=.03928?s/12.92:((s+.055)/1.055)**2.4)),Number((.2126*o[0]+.7152*o[1]+.0722*o[2]).toFixed(3))}function getContrastRatio(i,o){const s=getLuminance(i),_=getLuminance(o);return(Math.max(s,_)+.05)/(Math.min(s,_)+.05)}function darken(i,o){if(i=decomposeColor(i),o=clamp(o),i.type.indexOf("hsl")!==-1)i.values[2]*=1-o;else if(i.type.indexOf("rgb")!==-1||i.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)i.values[s]*=1-o;return recomposeColor(i)}function lighten(i,o){if(i=decomposeColor(i),o=clamp(o),i.type.indexOf("hsl")!==-1)i.values[2]+=(100-i.values[2])*o;else if(i.type.indexOf("rgb")!==-1)for(let s=0;s<3;s+=1)i.values[s]+=(255-i.values[s])*o;else if(i.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)i.values[s]+=(1-i.values[s])*o;return recomposeColor(i)}const EMPTY_THEME={};function InnerThemeProvider(i){const o=useTheme();return jsx(ThemeContext$2.Provider,{value:typeof o=="object"?o:EMPTY_THEME,children:i.children})}function ThemeProvider(i){const{children:o,theme:s}=i;return jsx(ThemeProvider$1,{theme:s,children:jsx(InnerThemeProvider,{children:o})})}function createMixins(i,o){return _extends$1({toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}}},o)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$4=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(i,o,s,_){const $=_.light||_,et=_.dark||_*1.5;i[o]||(i.hasOwnProperty(s)?i[o]=i[s]:o==="light"?i.light=lighten(i.main,$):o==="dark"&&(i.dark=darken(i.main,et)))}function getDefaultPrimary(i="light"){return i==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(i="light"){return i==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(i="light"){return i==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(i="light"){return i==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(i="light"){return i==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(i="light"){return i==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(i){const{mode:o="light",contrastThreshold:s=3,tonalOffset:_=.2}=i,$=_objectWithoutPropertiesLoose$1(i,_excluded$4),et=i.primary||getDefaultPrimary(o),tt=i.secondary||getDefaultSecondary(o),j=i.error||getDefaultError(o),it=i.info||getDefaultInfo(o),st=i.success||getDefaultSuccess(o),ht=i.warning||getDefaultWarning(o);function _t(yt){return getContrastRatio(yt,dark.text.primary)>=s?dark.text.primary:light.text.primary}const gt=({color:yt,name:Et,mainShade:Mt=500,lightShade:Ft=300,darkShade:Rt=700})=>{if(yt=_extends$1({},yt),!yt.main&&yt[Mt]&&(yt.main=yt[Mt]),!yt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Et?` (${Et})`:"",Mt));if(typeof yt.main!="string")throw new Error(formatMuiErrorMessage(12,Et?` (${Et})`:"",JSON.stringify(yt.main)));return addLightOrDark(yt,"light",Ft,_),addLightOrDark(yt,"dark",Rt,_),yt.contrastText||(yt.contrastText=_t(yt.main)),yt},ft={dark,light};return deepmerge(_extends$1({common:_extends$1({},common$1),mode:o,primary:gt({color:et,name:"primary"}),secondary:gt({color:tt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:gt({color:j,name:"error"}),warning:gt({color:ht,name:"warning"}),info:gt({color:it,name:"info"}),success:gt({color:st,name:"success"}),grey:grey$1,contrastThreshold:s,getContrastText:_t,augmentColor:gt,tonalOffset:_},ft[o]),$)}const _excluded$3=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$1(i){return Math.round(i*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(i,o){const s=typeof o=="function"?o(i):o,{fontFamily:_=defaultFontFamily,fontSize:$=14,fontWeightLight:et=300,fontWeightRegular:tt=400,fontWeightMedium:j=500,fontWeightBold:it=700,htmlFontSize:st=16,allVariants:ht,pxToRem:_t}=s,gt=_objectWithoutPropertiesLoose$1(s,_excluded$3),ft=$/14,ut=_t||(Mt=>`${Mt/st*ft}rem`),yt=(Mt,Ft,Rt,Ot,pt)=>_extends$1({fontFamily:_,fontWeight:Mt,fontSize:ut(Ft),lineHeight:Rt},_===defaultFontFamily?{letterSpacing:`${round$1(Ot/Ft)}em`}:{},pt,ht),Et={h1:yt(et,96,1.167,-1.5),h2:yt(et,60,1.2,-.5),h3:yt(tt,48,1.167,0),h4:yt(tt,34,1.235,.25),h5:yt(tt,24,1.334,0),h6:yt(j,20,1.6,.15),subtitle1:yt(tt,16,1.75,.15),subtitle2:yt(j,14,1.57,.1),body1:yt(tt,16,1.5,.15),body2:yt(tt,14,1.43,.15),button:yt(j,14,1.75,.4,caseAllCaps),caption:yt(tt,12,1.66,.4),overline:yt(tt,12,2.66,1,caseAllCaps)};return deepmerge(_extends$1({htmlFontSize:st,pxToRem:ut,fontFamily:_,fontSize:$,fontWeightLight:et,fontWeightRegular:tt,fontWeightMedium:j,fontWeightBold:it},Et),gt,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],shadows$1=shadows,_excluded$2=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(i){return`${Math.round(i)}ms`}function getAutoHeightDuration(i){if(!i)return 0;const o=i/36;return Math.round((4+15*o**.25+o/5)*10)}function createTransitions(i){const o=_extends$1({},easing,i.easing),s=_extends$1({},duration,i.duration);return _extends$1({getAutoHeightDuration,create:($=["all"],et={})=>{const{duration:tt=s.standard,easing:j=o.easeInOut,delay:it=0}=et;return _objectWithoutPropertiesLoose$1(et,_excluded$2),(Array.isArray($)?$:[$]).map(st=>`${st} ${typeof tt=="string"?tt:formatMs(tt)} ${j} ${typeof it=="string"?it:formatMs(it)}`).join(",")}},i,{easing:o,duration:s})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$1=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(i={},...o){const{mixins:s={},palette:_={},transitions:$={},typography:et={}}=i,tt=_objectWithoutPropertiesLoose$1(i,_excluded$1);if(i.vars)throw new Error(formatMuiErrorMessage(18));const j=createPalette(_),it=createTheme$1(i);let st=deepmerge(it,{mixins:createMixins(it.breakpoints,s),palette:j,shadows:shadows$1.slice(),typography:createTypography(j,et),transitions:createTransitions($),zIndex:_extends$1({},zIndex$1)});return st=deepmerge(st,tt),st=o.reduce((ht,_t)=>deepmerge(ht,_t),st),st.unstable_sxConfig=_extends$1({},defaultSxConfig$1,tt==null?void 0:tt.unstable_sxConfig),st.unstable_sx=function(_t){return styleFunctionSx$1({sx:_t,theme:this})},st}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1;function useThemeProps({props:i,name:o}){return useThemeProps$1({props:i,name:o,defaultTheme:defaultTheme$2})}function GlobalStyles(i){return jsx(GlobalStyles$1,_extends$1({},i,{defaultTheme:defaultTheme$2}))}const html=(i,o)=>_extends$1({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},o&&!i.vars&&{colorScheme:i.palette.mode}),body=i=>_extends$1({color:(i.vars||i).palette.text.primary},i.typography.body1,{backgroundColor:(i.vars||i).palette.background.default,"@media print":{backgroundColor:(i.vars||i).palette.common.white}}),styles=(i,o=!1)=>{var s,_;const $={};o&&i.colorSchemes&&Object.entries(i.colorSchemes).forEach(([j,it])=>{var st;$[i.getColorSchemeSelector(j).replace(/\s*&/,"")]={colorScheme:(st=it.palette)==null?void 0:st.mode}});let et=_extends$1({html:html(i,o),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:i.typography.fontWeightBold},body:_extends$1({margin:0},body(i),{"&::backdrop":{backgroundColor:(i.vars||i).palette.background.default}})},$);const tt=(s=i.components)==null||(_=s.MuiCssBaseline)==null?void 0:_.styleOverrides;return tt&&(et=[et,tt]),et};function CssBaseline(i){const o=useThemeProps({props:i,name:"MuiCssBaseline"}),{children:s,enableColorScheme:_=!1}=o;return jsxs(reactExports.Fragment,{children:[jsx(GlobalStyles,{styles:$=>styles($,_)}),s]})}const rootShouldForwardProp=i=>shouldForwardProp(i)&&i!=="classes",styled=createStyled({defaultTheme:defaultTheme$2,rootShouldForwardProp}),styled$1=styled;function _setPrototypeOf$1(i,o){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,$){return _.__proto__=$,_},_setPrototypeOf$1(i,o)}function _inheritsLoose(i,o){i.prototype=Object.create(o.prototype),i.prototype.constructor=i,_setPrototypeOf$1(i,o)}function getTypographyUtilityClass(i){return generateUtilityClass("MuiTypography",i)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses=i=>{const{align:o,gutterBottom:s,noWrap:_,paragraph:$,variant:et,classes:tt}=i,j={root:["root",et,i.align!=="inherit"&&`align${capitalize(o)}`,s&&"gutterBottom",_&&"noWrap",$&&"paragraph"]};return composeClasses(j,getTypographyUtilityClass,tt)},TypographyRoot=styled$1("span",{name:"MuiTypography",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.root,s.variant&&o[s.variant],s.align!=="inherit"&&o[`align${capitalize(s.align)}`],s.noWrap&&o.noWrap,s.gutterBottom&&o.gutterBottom,s.paragraph&&o.paragraph]}})(({theme:i,ownerState:o})=>_extends$1({margin:0},o.variant&&i.typography[o.variant],o.align!=="inherit"&&{textAlign:o.align},o.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o.gutterBottom&&{marginBottom:"0.35em"},o.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=i=>colorTransformations[i]||i,Typography=reactExports.forwardRef(function(o,s){const _=useThemeProps({props:o,name:"MuiTypography"}),$=transformDeprecatedColors(_.color),et=extendSxProp(_extends$1({},_,{color:$})),{align:tt="inherit",className:j,component:it,gutterBottom:st=!1,noWrap:ht=!1,paragraph:_t=!1,variant:gt="body1",variantMapping:ft=defaultVariantMapping}=et,ut=_objectWithoutPropertiesLoose$1(et,_excluded),yt=_extends$1({},et,{align:tt,color:$,className:j,component:it,gutterBottom:st,noWrap:ht,paragraph:_t,variant:gt,variantMapping:ft}),Et=it||(_t?"p":ft[gt]||defaultVariantMapping[gt])||"span",Mt=useUtilityClasses(yt);return jsx(TypographyRoot,_extends$1({as:Et,ref:s,ownerState:yt,className:clsx(Mt.root,j)},ut))}),Typography$1=Typography;var __defProp2=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp2=(i,o,s)=>o in i?__defProp2(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s,__spreadValues=(i,o)=>{for(var s in o||(o={}))__hasOwnProp.call(o,s)&&__defNormalProp2(i,s,o[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(o))__propIsEnum.call(o,s)&&__defNormalProp2(i,s,o[s]);return i},__spreadProps=(i,o)=>__defProps(i,__getOwnPropDescs(o));const baseTheme=createTheme({typography:{fontFamily:"'Moderat', 'Inter', 'Source Sans Pro', sans-serif",h1:{fontStyle:"normal",fontWeight:"normal",fontSize:"2rem",lineHeight:"2.5rem",letterSpacing:0},h2:{fontStyle:"normal",fontWeight:"normal",fontSize:"1.5rem",lineHeight:"2.125rem",letterSpacing:"0.069rem",fontFeatureSettings:'"zero" on'},h3:{fontStyle:"normal",fontWeight:500,fontSize:"1.125rem",lineHeight:"1.688rem",letterSpacing:"0.069rem"},h4:{fontStyle:"normal",fontWeight:700,fontSize:"0.813rem",lineHeight:"1.375rem",letterSpacing:"0.069rem",textTransform:"uppercase"},h5:{fontStyle:"normal",fontWeight:700,fontSize:"0.813rem",lineHeight:"1.125rem",letterSpacing:"0.038rem",textTransform:"uppercase"},h6:{fontStyle:"normal",fontWeight:"normal",fontSize:"0.625rem",lineHeight:"0.938rem",letterSpacing:"0.063rem"},body1:{fontStyle:"normal",fontWeight:"normal",fontSize:"1rem",lineHeight:"1.688rem",letterSpacing:"0.063rem",fontFeatureSettings:'"zero" on'},body2:{fontStyle:"normal",fontWeight:"normal",fontSize:"1rem",lineHeight:"1.688rem",letterSpacing:"0.063rem",fontFeatureSettings:'"zero" on',fontVariantNumeric:"tabular-nums"},button:{fontWeight:500,fontSize:"0.875rem",lineHeight:"1.05rem",letterSpacing:"0.053.rem",textTransform:"uppercase"}}}),lightPalette={palette:{mode:"light",success:{main:"#34dea9",dark:"#2d8376"},info:{main:"#297ceb",dark:"#256faf",light:"#3BABFF"},error:{main:"#fd76a7",dark:"#7f5072"},warning:{main:"#ffb179",dark:"#94645f"},primary:{main:"#657197",light:"#BAC4E2",dark:"#3B4668"},secondary:{main:"#3babff",dark:"#76a7dc"},background:{default:"#FFFFFF",paper:"#F1F3F9"},common:{black:"#ffffff",white:"#000000"}}},darkPalette={palette:{mode:"dark",primary:{main:"#657197",dark:"#3B4668",light:"#BAC4E2",contrastText:"#ffffff"},secondary:{main:"#18d2ff",light:"#18d2ff",dark:"#256faf"},background:{default:"#2d3855",paper:"#2d3855"},common:{black:"#000000",white:"#ffffff"},text:{primary:"#bac4e2"},error:{main:"#ea719d",dark:"#7F5072"},warning:{main:"#a961e4",dark:"#564A94"},info:{main:"#20a0ff",dark:"#256FAF"},success:{main:"#2ec495",dark:"#2D8376"}}};function createComponents(i){const o={components:{MuiCssBaseline:{styleOverrides:{body:{"&::-webkit-scrollbar, & *::-webkit-scrollbar":{background:"transparent",width:"0.5rem",height:"0.5rem"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{background:i.palette.primary.light,borderRadius:"0.25rem"},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:i.palette.primary.light},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:i.palette.primary.light}}}},MuiLink:{styleOverrides:{root:{color:i.palette.secondary.main}}},MuiDialogActions:{styleOverrides:{root:{padding:baseTheme.spacing(3)}}},MuiInputLabel:{styleOverrides:{root:{color:i.palette.primary.light,"&.Mui-focused":{color:i.palette.secondary.main}},outlined:{borderRadius:4,padding:"0.125rem 0.375rem","&.Mui-focused":{backgroundColor:"#2d3855"}}}},MuiFilledInput:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,borderTop:"1px solid transparent",":before":{borderBottom:`1px dotted ${i.palette.primary.light}`},"&.Mui-focused":{background:i.palette.common.black,border:`1px solid ${i.palette.secondary.main}`,borderBottom:"none",borderTop:`1px solid ${i.palette.secondary.main}`},":after":{borderBottom:`1px solid ${i.palette.secondary.main}`}}}},MuiOutlinedInput:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottom:`1px dotted ${i.palette.primary.light}`,"&.Mui-focused":{border:`1px solid ${i.palette.secondary.main}`,backgroundColor:i.palette.common.black}},notchedOutline:{border:"transparent"},input:{"&:-webkit-autofill":{"-webkit-box-shadow":`0 0 0 100px ${i.palette.primary.dark} inset`,"-webkit-text-fill-color":i.palette.primary.light}}}},MuiFormHelperText:{styleOverrides:{root:{color:i.palette.error.main}}},MuiTooltip:{styleOverrides:{tooltip:{backgroundColor:"rgba(0, 0, 0, 0.87)",color:"white",padding:baseTheme.spacing(1.2)}}},MuiDialogTitle:{styleOverrides:{root:__spreadValues({color:i.palette.common.white,fontStyle:"normal",fontWeight:500},baseTheme.typography.h3)}},MuiDialogContentText:{styleOverrides:{root:{color:i.palette.primary.light}}},MuiButtonBase:{defaultProps:{disableRipple:!0}},MuiButton:{styleOverrides:{root:{willChange:"background-color , color , border-color , box-shadow",transition:"background-color 200ms ease-in-out 0ms , color 200ms ease-in-out 0ms , border-color 200ms ease-in-out 0ms , box-shadow 200ms ease-in-out 0ms",borderRadius:40,boxShadow:`0 0 0 0rem ${i.palette.primary.main}`,"&.Mui-disabled":{color:i.palette.primary.main}},sizeSmall:{height:"1.25rem",fontWeight:500,fontSize:"0.688rem",lineHeight:"0.825rem",letterSpacing:"0.047rem"},sizeMedium:{height:"1.813rem",fontWeight:500},sizeLarge:{height:"2.563rem",fontWeight:500,fontSize:"0.875rem",lineHeight:"1.05rem",letterSpacing:"0.053rem"},containedPrimary:{background:i.palette.primary.light,color:i.palette.common.black,"@media(hover: hover)":{"&:hover":{boxShadow:`0 0 0 0.4rem ${i.palette.primary.light}`,background:i.palette.primary.light}}},containedSecondary:{color:i.palette.common.black,"@media(hover: hover)":{"&:hover":{boxShadow:`0 0 0 0.4rem ${i.palette.secondary.main}`,background:i.palette.secondary.main}}},outlinedPrimary:{color:i.palette.primary.light}}},MuiDialog:{styleOverrides:{paper:{background:i.palette.background.paper}}},MuiNativeSelect:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,borderTop:"1px solid transparent"},icon:{color:i.palette.primary.light}}},MuiSelect:{styleOverrides:{icon:{color:i.palette.primary.light}}},MuiSnackbarContent:{styleOverrides:{root:{backgroundColor:i.palette.primary.dark,color:i.palette.primary.light}}},MuiSwitch:{styleOverrides:{switchBase:{"&.Mui-checked+.MuiSwitch-track":{backgroundColor:i.palette.common.black},"&.Mui-checked .MuiSwitch-thumb":{backgroundColor:i.palette.secondary.main}},thumb:{backgroundColor:i.palette.primary.light},track:{backgroundColor:i.palette.common.black}}}}};return createTheme(i,o)}const darkTheme=createComponents(createTheme(baseTheme,darkPalette)),lightTheme=createComponents(createTheme(baseTheme,lightPalette)),defaultTheme=darkTheme;var __defProp$1=Object.defineProperty,__defNormalProp$1=(i,o,s)=>o in i?__defProp$1(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s,__publicField$1=(i,o,s)=>(__defNormalProp$1(i,typeof o!="symbol"?o+"":o,s),s),dist$1={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(module,exports){(function(i,o){module.exports=o()})(window,function(){return function(i){function o(st){for(var ht,_t,gt=st[0],ft=st[1],ut=0,yt=[];ut<gt.length;ut++)_t=gt[ut],Object.prototype.hasOwnProperty.call(_,_t)&&_[_t]&&yt.push(_[_t][0]),_[_t]=0;for(ht in ft)Object.prototype.hasOwnProperty.call(ft,ht)&&(i[ht]=ft[ht]);for(it&&it(st);yt.length;)yt.shift()()}var s={},_={0:0};function $(st){if(s[st])return s[st].exports;var ht=s[st]={i:st,l:!1,exports:{}};return i[st].call(ht.exports,ht,ht.exports,$),ht.l=!0,ht.exports}$.e=function(){return Promise.resolve()},$.m=i,$.c=s,$.d=function(st,ht,_t){$.o(st,ht)||Object.defineProperty(st,ht,{enumerable:!0,get:_t})},$.r=function(st){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(st,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(st,"__esModule",{value:!0})},$.t=function(st,ht){if(1&ht&&(st=$(st)),8&ht||4&ht&&typeof st=="object"&&st&&st.__esModule)return st;var _t=Object.create(null);if($.r(_t),Object.defineProperty(_t,"default",{enumerable:!0,value:st}),2&ht&&typeof st!="string")for(var gt in st)$.d(_t,gt,function(ft){return st[ft]}.bind(null,gt));return _t},$.n=function(st){var ht=st&&st.__esModule?function(){return st.default}:function(){return st};return $.d(ht,"a",ht),ht},$.o=function(st,ht){return Object.prototype.hasOwnProperty.call(st,ht)},$.p="",$.oe=function(st){throw console.error(st),st};var et=window.webpackJsonpFormantRealtimeSDK=window.webpackJsonpFormantRealtimeSDK||[],tt=et.push.bind(et);et.push=o,et=et.slice();for(var j=0;j<et.length;j++)o(et[j]);var it=tt;return $($.s=228)}([function(i,o,s){s.d(o,"a",function(){return rn});var _=s(14),$=s.n(_),et=s(18),tt=s(56),j=s(19);const it=Math.pow(2,20),st=it;function ht(Dt,Kt){if(Kt.length<Dt)throw new TypeError(Dt+" argument"+(Dt>1?"s":"")+" required, but only "+Kt.length+" present")}function _t(Dt){if(Dt===null||Dt===!0||Dt===!1)return NaN;var Kt=Number(Dt);return isNaN(Kt)?Kt:Kt<0?Math.ceil(Kt):Math.floor(Kt)}var gt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ft=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ut=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,yt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Et(Dt){var Kt,gn={},hn=Dt.split(gt.dateTimeDelimiter);if(hn.length>2)return gn;if(/:/.test(hn[0])?Kt=hn[0]:(gn.date=hn[0],Kt=hn[1],gt.timeZoneDelimiter.test(gn.date)&&(gn.date=Dt.split(gt.timeZoneDelimiter)[0],Kt=Dt.substr(gn.date.length,Dt.length))),Kt){var xn=gt.timezone.exec(Kt);xn?(gn.time=Kt.replace(xn[1],""),gn.timezone=xn[1]):gn.time=Kt}return gn}function Mt(Dt,Kt){var gn=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+Kt)+"})|(\\d{2}|[+-]\\d{"+(2+Kt)+"})$)"),hn=Dt.match(gn);if(!hn)return{year:NaN,restDateString:""};var xn=hn[1]?parseInt(hn[1]):null,Mn=hn[2]?parseInt(hn[2]):null;return{year:Mn===null?xn:100*Mn,restDateString:Dt.slice((hn[1]||hn[2]).length)}}function Ft(Dt,Kt){if(Kt===null)return new Date(NaN);var gn=Dt.match(ft);if(!gn)return new Date(NaN);var hn=!!gn[4],xn=Rt(gn[1]),Mn=Rt(gn[2])-1,qn=Rt(gn[3]),Ir=Rt(gn[4]),_i=Rt(gn[5])-1;if(hn)return function(fo,Gr,Yr){return Gr>=1&&Gr<=53&&Yr>=0&&Yr<=6}(0,Ir,_i)?function(fo,Gr,Yr){var to=new Date(0);to.setUTCFullYear(fo,0,4);var Ro=to.getUTCDay()||7,Mo=7*(Gr-1)+Yr+1-Ro;return to.setUTCDate(to.getUTCDate()+Mo),to}(Kt,Ir,_i):new Date(NaN);var Ur=new Date(0);return function(fo,Gr,Yr){return Gr>=0&&Gr<=11&&Yr>=1&&Yr<=(nn[Gr]||(on(fo)?29:28))}(Kt,Mn,qn)&&function(fo,Gr){return Gr>=1&&Gr<=(on(fo)?366:365)}(Kt,xn)?(Ur.setUTCFullYear(Kt,Mn,Math.max(xn,qn)),Ur):new Date(NaN)}function Rt(Dt){return Dt?parseInt(Dt):1}function Ot(Dt){var Kt=Dt.match(ut);if(!Kt)return NaN;var gn=pt(Kt[1]),hn=pt(Kt[2]),xn=pt(Kt[3]);return function(Mn,qn,Ir){return Mn===24?qn===0&&Ir===0:Ir>=0&&Ir<60&&qn>=0&&qn<60&&Mn>=0&&Mn<25}(gn,hn,xn)?36e5*gn+6e4*hn+1e3*xn:NaN}function pt(Dt){return Dt&&parseFloat(Dt.replace(",","."))||0}function Lt(Dt){if(Dt==="Z")return 0;var Kt=Dt.match(yt);if(!Kt)return 0;var gn=Kt[1]==="+"?-1:1,hn=parseInt(Kt[2]),xn=Kt[3]&&parseInt(Kt[3])||0;return function(Mn,qn){return qn>=0&&qn<=59}(0,xn)?gn*(36e5*hn+6e4*xn):NaN}var nn=[31,null,31,30,31,30,31,31,30,31,30,31];function on(Dt){return Dt%400==0||Dt%4==0&&Dt%100!=0}function wt(Dt){return ht(1,arguments),Dt instanceof Date||typeof Dt=="object"&&Object.prototype.toString.call(Dt)==="[object Date]"}function xt(Dt){ht(1,arguments);var Kt=Object.prototype.toString.call(Dt);return Dt instanceof Date||typeof Dt=="object"&&Kt==="[object Date]"?new Date(Dt.getTime()):typeof Dt=="number"||Kt==="[object Number]"?new Date(Dt):(typeof Dt!="string"&&Kt!=="[object String]"||typeof console>"u"||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Nt(Dt){const Kt=function(gn,hn){var xn;ht(1,arguments);var Mn=_t((xn=hn==null?void 0:hn.additionalDigits)!==null&&xn!==void 0?xn:2);if(Mn!==2&&Mn!==1&&Mn!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(typeof gn!="string"&&Object.prototype.toString.call(gn)!=="[object String]")return new Date(NaN);var qn,Ir=Et(gn);if(Ir.date){var _i=Mt(Ir.date,Mn);qn=Ft(_i.restDateString,_i.year)}if(!qn||isNaN(qn.getTime()))return new Date(NaN);var Ur,fo=qn.getTime(),Gr=0;if(Ir.time&&(Gr=Ot(Ir.time),isNaN(Gr)))return new Date(NaN);if(!Ir.timezone){var Yr=new Date(fo+Gr),to=new Date(0);return to.setFullYear(Yr.getUTCFullYear(),Yr.getUTCMonth(),Yr.getUTCDate()),to.setHours(Yr.getUTCHours(),Yr.getUTCMinutes(),Yr.getUTCSeconds(),Yr.getUTCMilliseconds()),to}return Ur=Lt(Ir.timezone),isNaN(Ur)?new Date(NaN):new Date(fo+Gr+Ur)}(Dt);if(!function(gn){if(ht(1,arguments),!wt(gn)&&typeof gn!="number")return!1;var hn=xt(gn);return!isNaN(Number(hn))}(Kt))throw new Error(`Invalid ISO 8601 date string (${Dt})`);return Kt}var Tt=s(4),Vt=s(34);function Xt(Dt){return $()(Dt,{cycles:!0})}var Gt=function(Dt,Kt){var gn={};for(var hn in Dt)Object.prototype.hasOwnProperty.call(Dt,hn)&&Kt.indexOf(hn)<0&&(gn[hn]=Dt[hn]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function"){var xn=0;for(hn=Object.getOwnPropertySymbols(Dt);xn<hn.length;xn++)Kt.indexOf(hn[xn])<0&&Object.prototype.propertyIsEnumerable.call(Dt,hn[xn])&&(gn[hn[xn]]=Dt[hn[xn]])}return gn};function Ut(Dt,Kt={}){const gn=Ir=>Kt.redacted!==!1?Object(Vt.a)(Ir):Ir;if(!Dt.stack)return{message:Xt(gn(Dt))};const{name:hn,message:xn,stack:Mn}=Dt,qn=Gt(Dt,["name","message","stack"]);return{name:hn,message:xn!==void 0?xn:Xt(gn(Dt)),stack:Mn,meta:qn&&Object.keys(qn).length===0?void 0:gn(qn)}}function Ht(Dt,Kt={}){const{message:gn,stack:hn,meta:xn}=Ut(Dt,Kt);return`${hn||gn||""}${xn&&Object.keys(xn).length>0?` -- ${Xt(xn)}`:""}`}var qt=s(39),Pt=s(103),St=s.n(Pt),Zt=function(Dt,Kt,gn,hn){return new(gn||(gn=Promise))(function(xn,Mn){function qn(Ur){try{_i(hn.next(Ur))}catch(fo){Mn(fo)}}function Ir(Ur){try{_i(hn.throw(Ur))}catch(fo){Mn(fo)}}function _i(Ur){var fo;Ur.done?xn(Ur.value):(fo=Ur.value,fo instanceof gn?fo:new gn(function(Gr){Gr(fo)})).then(qn,Ir)}_i((hn=hn.apply(Dt,Kt||[])).next())})},tn=function(Dt,Kt){var gn={};for(var hn in Dt)Object.prototype.hasOwnProperty.call(Dt,hn)&&Kt.indexOf(hn)<0&&(gn[hn]=Dt[hn]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function"){var xn=0;for(hn=Object.getOwnPropertySymbols(Dt);xn<hn.length;xn++)Kt.indexOf(hn[xn])<0&&Object.prototype.propertyIsEnumerable.call(Dt,hn[xn])&&(gn[hn[xn]]=Dt[hn[xn]])}return gn};class mn extends St.a{constructor(Kt,gn){super(),this.endpoint=Kt,this.metadata=gn,this.logClient=this.getLogClient()}getLogClient(){return Zt(this,void 0,void 0,function*(){const{LogClient:Kt}=yield Promise.resolve().then(s.bind(null,231));return new Kt(this.endpoint)})}log(Kt,gn){return Zt(this,void 0,void 0,function*(){const{level:hn,message:xn,error:Mn}=Kt,qn=tn(Kt,["level","message","error"]);this.emit("logged");try{yield(yield this.logClient).log([{timestamp:new Date().toISOString(),level:hn,message:`${xn}`.substring(0,1e3),error:Mn!==void 0?Ut(Mn):void 0,meta:Object.assign(Object.assign({},qn),this.metadata)}])}catch(Ir){console.error(`Failed to log to log-api: ${Ht(Ir)}`)}gn()})}}var yn=function(Dt,Kt){var gn={};for(var hn in Dt)Object.prototype.hasOwnProperty.call(Dt,hn)&&Kt.indexOf(hn)<0&&(gn[hn]=Dt[hn]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function"){var xn=0;for(hn=Object.getOwnPropertySymbols(Dt);xn<hn.length;xn++)Kt.indexOf(hn[xn])<0&&Object.prototype.propertyIsEnumerable.call(Dt,hn[xn])&&(gn[hn[xn]]=Dt[hn[xn]])}return gn};const vn={app:Tt.a,namespace:Tt.i,buildTag:Tt.b,instanceId:qt.a},un=Tt.e?j.format.printf(Dt=>{var{timestamp:Kt,level:gn,message:hn,error:xn}=Dt,Mn=yn(Dt,["timestamp","level","message","error"]);const qn=Object.assign(Object.assign({timestamp:Kt?Nt(Kt).getTime():new Date().getTime(),level:gn.toUpperCase(),message:hn},xn?{error:Ut(xn)}:{}),{meta:Object.assign(Object.assign({},vn),Mn)});return $()(qn,{cycles:!0})}):j.format.printf(Dt=>{var{timestamp:Kt,level:gn,message:hn,error:xn}=Dt,Mn=yn(Dt,["timestamp","level","message","error"]);let qn=`${Kt||new Date().toISOString()} ${gn.toUpperCase()}: ${hn} `;return Object.keys(Mn).length>0&&(qn+=$()(Mn,{cycles:!0})),xn&&(qn+=`
${Ht(xn)}`),qn}),rn=Object(j.createLogger)({level:Tt.f});if(Tt.g&&rn.add(new j.transports.Console({format:un,level:"debug"})),Tt.d&&rn.add(new mn(Tt.d,vn)),Tt.h){const Dt=tt.resolve(et.tmpdir(),`silly-${Tt.a}.log`);rn.debug("Logging silly logs to file",{filename:Dt}),rn.add(new j.transports.File({filename:Dt,maxsize:1*st,maxFiles:10,format:j.format.combine((It="silly",Object(j.format)(Kt=>Kt.level===It&&Kt)()),un),level:"silly"}))}var It},function(i,o,s){s.d(o,"a",function(){return _});const _={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}},function(i,o){var s,_,$=i.exports={};function et(){throw new Error("setTimeout has not been defined")}function tt(){throw new Error("clearTimeout has not been defined")}function j(Et){if(s===setTimeout)return setTimeout(Et,0);if((s===et||!s)&&setTimeout)return s=setTimeout,setTimeout(Et,0);try{return s(Et,0)}catch{try{return s.call(null,Et,0)}catch{return s.call(this,Et,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:et}catch{s=et}try{_=typeof clearTimeout=="function"?clearTimeout:tt}catch{_=tt}})();var it,st=[],ht=!1,_t=-1;function gt(){ht&&it&&(ht=!1,it.length?st=it.concat(st):_t=-1,st.length&&ft())}function ft(){if(!ht){var Et=j(gt);ht=!0;for(var Mt=st.length;Mt;){for(it=st,st=[];++_t<Mt;)it&&it[_t].run();_t=-1,Mt=st.length}it=null,ht=!1,function(Ft){if(_===clearTimeout)return clearTimeout(Ft);if((_===tt||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(Ft);try{_(Ft)}catch{try{return _.call(null,Ft)}catch{return _.call(this,Ft)}}}(Et)}}function ut(Et,Mt){this.fun=Et,this.array=Mt}function yt(){}$.nextTick=function(Et){var Mt=new Array(arguments.length-1);if(arguments.length>1)for(var Ft=1;Ft<arguments.length;Ft++)Mt[Ft-1]=arguments[Ft];st.push(new ut(Et,Mt)),st.length!==1||ht||j(ft)},ut.prototype.run=function(){this.fun.apply(null,this.array)},$.title="browser",$.browser=!0,$.env={},$.argv=[],$.version="",$.versions={},$.on=yt,$.addListener=yt,$.once=yt,$.off=yt,$.removeListener=yt,$.removeAllListeners=yt,$.emit=yt,$.prependListener=yt,$.prependOnceListener=yt,$.listeners=function(Et){return[]},$.binding=function(Et){throw new Error("process.binding is not supported")},$.cwd=function(){return"/"},$.chdir=function(Et){throw new Error("process.chdir is not supported")},$.umask=function(){return 0}},function(i,o,s){Object.defineProperty(o,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(o,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(o,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(o,"configs",{value:s(118)})},function(i,o,s){(function(_){s.d(o,"a",function(){return tt}),s.d(o,"i",function(){return j}),s.d(o,"j",function(){return it}),s.d(o,"b",function(){return st}),s.d(o,"f",function(){return ht}),s.d(o,"e",function(){return _t}),s.d(o,"g",function(){return gt}),s.d(o,"d",function(){return ft}),s.d(o,"c",function(){return ut}),s.d(o,"h",function(){return yt});var $=s(102);const et=$.from({ENVIRONMENT:_.env.ENV,API_ENDPOINT:_.env.API_ENDPOINT,APP:"realtime-sdk",APP_PATH:_.env.APP_PATH,BUILD_TAG:_.env.BUILD_TAG,ENABLE_SELF_SERVE:_.env.ENABLE_SELF_SERVE,ENABLE_SENTRY:_.env.ENABLE_SENTRY,ENABLE_SENTRY_PROFILING:_.env.ENABLE_SENTRY_PROFILING,GIT_COMMIT:_.env.GIT_COMMIT,JEST_WORKER_ID:_.env.JEST_WORKER_ID,LOG_API_ENDPOINT:_.env.LOG_API_ENDPOINT,LOG_JSON:"false",LOG_LEVEL:_.env.LOG_LEVEL,LOG_TO_CONSOLE:_.env.LOG_TO_CONSOLE,LOG_TO_FILE:_.env.LOG_TO_FILE,NAMESPACE:"production",SENTRY_DSN:_.env.SENTRY_DSN,SHEET_EXPORT_MAX_ROW_COUNT:_.env.SHEET_EXPORT_MAX_ROW_COUNT,STABLE_AGENT_VERSION:_.env.STABLE_AGENT_VERSION,VERSION:_.env.VERSION}),tt=(et.get("ENVIRONMENT").default("").asString(),et.get("APP").default("").asString()),j=(et.get("APP_PATH").default("").asString(),et.get("API_ENDPOINT").default("").asString(),et.get("NAMESPACE").default("").asString()),it=et.get("VERSION").default("").asString(),st=et.get("BUILD_TAG").default("").asString(),ht=(et.get("GIT_COMMIT").default("").asString(),et.get("ENABLE_SENTRY").default("false").asBool(),et.get("ENABLE_SENTRY_PROFILING").default("false").asBool(),et.get("SENTRY_DSN").default("").asString(),et.get("LOG_LEVEL").default("debug").asString()),_t=et.get("LOG_JSON").default("true").asBool(),gt=et.get("LOG_TO_CONSOLE").default("true").asBool(),ft=(et.get("STABLE_AGENT_VERSION").default("").asString(),et.get("LOG_API_ENDPOINT").asString()),ut=et.get("JEST_WORKER_ID").asString(),yt=(et.get("SHEET_EXPORT_MAX_ROW_COUNT").default("10000").asIntPositive(),et.get("LOG_TO_FILE").default("false").asBoolStrict());et.get("ENABLE_SELF_SERVE").default("true").asBoolStrict()}).call(this,s(2))},function(i,o,s){(function(_){var $=s(126),et=s(127),tt=s(42);function j(){return st.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function it(It,Dt){if(j()<Dt)throw new RangeError("Invalid typed array length");return st.TYPED_ARRAY_SUPPORT?(It=new Uint8Array(Dt)).__proto__=st.prototype:(It===null&&(It=new st(Dt)),It.length=Dt),It}function st(It,Dt,Kt){if(!(st.TYPED_ARRAY_SUPPORT||this instanceof st))return new st(It,Dt,Kt);if(typeof It=="number"){if(typeof Dt=="string")throw new Error("If encoding is specified then the first argument must be a string");return gt(this,It)}return ht(this,It,Dt,Kt)}function ht(It,Dt,Kt,gn){if(typeof Dt=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&Dt instanceof ArrayBuffer?function(hn,xn,Mn,qn){if(xn.byteLength,Mn<0||xn.byteLength<Mn)throw new RangeError("'offset' is out of bounds");if(xn.byteLength<Mn+(qn||0))throw new RangeError("'length' is out of bounds");return xn=Mn===void 0&&qn===void 0?new Uint8Array(xn):qn===void 0?new Uint8Array(xn,Mn):new Uint8Array(xn,Mn,qn),st.TYPED_ARRAY_SUPPORT?(hn=xn).__proto__=st.prototype:hn=ft(hn,xn),hn}(It,Dt,Kt,gn):typeof Dt=="string"?function(hn,xn,Mn){if(typeof Mn=="string"&&Mn!==""||(Mn="utf8"),!st.isEncoding(Mn))throw new TypeError('"encoding" must be a valid string encoding');var qn=0|yt(xn,Mn),Ir=(hn=it(hn,qn)).write(xn,Mn);return Ir!==qn&&(hn=hn.slice(0,Ir)),hn}(It,Dt,Kt):function(hn,xn){if(st.isBuffer(xn)){var Mn=0|ut(xn.length);return(hn=it(hn,Mn)).length===0||xn.copy(hn,0,0,Mn),hn}if(xn){if(typeof ArrayBuffer<"u"&&xn.buffer instanceof ArrayBuffer||"length"in xn)return typeof xn.length!="number"||(qn=xn.length)!=qn?it(hn,0):ft(hn,xn);if(xn.type==="Buffer"&&tt(xn.data))return ft(hn,xn.data)}var qn;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(It,Dt)}function _t(It){if(typeof It!="number")throw new TypeError('"size" argument must be a number');if(It<0)throw new RangeError('"size" argument must not be negative')}function gt(It,Dt){if(_t(Dt),It=it(It,Dt<0?0:0|ut(Dt)),!st.TYPED_ARRAY_SUPPORT)for(var Kt=0;Kt<Dt;++Kt)It[Kt]=0;return It}function ft(It,Dt){var Kt=Dt.length<0?0:0|ut(Dt.length);It=it(It,Kt);for(var gn=0;gn<Kt;gn+=1)It[gn]=255&Dt[gn];return It}function ut(It){if(It>=j())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j().toString(16)+" bytes");return 0|It}function yt(It,Dt){if(st.isBuffer(It))return It.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(It)||It instanceof ArrayBuffer))return It.byteLength;typeof It!="string"&&(It=""+It);var Kt=It.length;if(Kt===0)return 0;for(var gn=!1;;)switch(Dt){case"ascii":case"latin1":case"binary":return Kt;case"utf8":case"utf-8":case void 0:return vn(It).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Kt;case"hex":return Kt>>>1;case"base64":return un(It).length;default:if(gn)return vn(It).length;Dt=(""+Dt).toLowerCase(),gn=!0}}function Et(It,Dt,Kt){var gn=!1;if((Dt===void 0||Dt<0)&&(Dt=0),Dt>this.length||((Kt===void 0||Kt>this.length)&&(Kt=this.length),Kt<=0)||(Kt>>>=0)<=(Dt>>>=0))return"";for(It||(It="utf8");;)switch(It){case"hex":return Xt(this,Dt,Kt);case"utf8":case"utf-8":return Nt(this,Dt,Kt);case"ascii":return Tt(this,Dt,Kt);case"latin1":case"binary":return Vt(this,Dt,Kt);case"base64":return xt(this,Dt,Kt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,Dt,Kt);default:if(gn)throw new TypeError("Unknown encoding: "+It);It=(It+"").toLowerCase(),gn=!0}}function Mt(It,Dt,Kt){var gn=It[Dt];It[Dt]=It[Kt],It[Kt]=gn}function Ft(It,Dt,Kt,gn,hn){if(It.length===0)return-1;if(typeof Kt=="string"?(gn=Kt,Kt=0):Kt>2147483647?Kt=2147483647:Kt<-2147483648&&(Kt=-2147483648),Kt=+Kt,isNaN(Kt)&&(Kt=hn?0:It.length-1),Kt<0&&(Kt=It.length+Kt),Kt>=It.length){if(hn)return-1;Kt=It.length-1}else if(Kt<0){if(!hn)return-1;Kt=0}if(typeof Dt=="string"&&(Dt=st.from(Dt,gn)),st.isBuffer(Dt))return Dt.length===0?-1:Rt(It,Dt,Kt,gn,hn);if(typeof Dt=="number")return Dt&=255,st.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?hn?Uint8Array.prototype.indexOf.call(It,Dt,Kt):Uint8Array.prototype.lastIndexOf.call(It,Dt,Kt):Rt(It,[Dt],Kt,gn,hn);throw new TypeError("val must be string, number or Buffer")}function Rt(It,Dt,Kt,gn,hn){var xn,Mn=1,qn=It.length,Ir=Dt.length;if(gn!==void 0&&((gn=String(gn).toLowerCase())==="ucs2"||gn==="ucs-2"||gn==="utf16le"||gn==="utf-16le")){if(It.length<2||Dt.length<2)return-1;Mn=2,qn/=2,Ir/=2,Kt/=2}function _i(Yr,to){return Mn===1?Yr[to]:Yr.readUInt16BE(to*Mn)}if(hn){var Ur=-1;for(xn=Kt;xn<qn;xn++)if(_i(It,xn)===_i(Dt,Ur===-1?0:xn-Ur)){if(Ur===-1&&(Ur=xn),xn-Ur+1===Ir)return Ur*Mn}else Ur!==-1&&(xn-=xn-Ur),Ur=-1}else for(Kt+Ir>qn&&(Kt=qn-Ir),xn=Kt;xn>=0;xn--){for(var fo=!0,Gr=0;Gr<Ir;Gr++)if(_i(It,xn+Gr)!==_i(Dt,Gr)){fo=!1;break}if(fo)return xn}return-1}function Ot(It,Dt,Kt,gn){Kt=Number(Kt)||0;var hn=It.length-Kt;gn?(gn=Number(gn))>hn&&(gn=hn):gn=hn;var xn=Dt.length;if(xn%2!=0)throw new TypeError("Invalid hex string");gn>xn/2&&(gn=xn/2);for(var Mn=0;Mn<gn;++Mn){var qn=parseInt(Dt.substr(2*Mn,2),16);if(isNaN(qn))return Mn;It[Kt+Mn]=qn}return Mn}function pt(It,Dt,Kt,gn){return rn(vn(Dt,It.length-Kt),It,Kt,gn)}function Lt(It,Dt,Kt,gn){return rn(function(hn){for(var xn=[],Mn=0;Mn<hn.length;++Mn)xn.push(255&hn.charCodeAt(Mn));return xn}(Dt),It,Kt,gn)}function nn(It,Dt,Kt,gn){return Lt(It,Dt,Kt,gn)}function on(It,Dt,Kt,gn){return rn(un(Dt),It,Kt,gn)}function wt(It,Dt,Kt,gn){return rn(function(hn,xn){for(var Mn,qn,Ir,_i=[],Ur=0;Ur<hn.length&&!((xn-=2)<0);++Ur)Mn=hn.charCodeAt(Ur),qn=Mn>>8,Ir=Mn%256,_i.push(Ir),_i.push(qn);return _i}(Dt,It.length-Kt),It,Kt,gn)}function xt(It,Dt,Kt){return Dt===0&&Kt===It.length?$.fromByteArray(It):$.fromByteArray(It.slice(Dt,Kt))}function Nt(It,Dt,Kt){Kt=Math.min(It.length,Kt);for(var gn=[],hn=Dt;hn<Kt;){var xn,Mn,qn,Ir,_i=It[hn],Ur=null,fo=_i>239?4:_i>223?3:_i>191?2:1;if(hn+fo<=Kt)switch(fo){case 1:_i<128&&(Ur=_i);break;case 2:(192&(xn=It[hn+1]))==128&&(Ir=(31&_i)<<6|63&xn)>127&&(Ur=Ir);break;case 3:xn=It[hn+1],Mn=It[hn+2],(192&xn)==128&&(192&Mn)==128&&(Ir=(15&_i)<<12|(63&xn)<<6|63&Mn)>2047&&(Ir<55296||Ir>57343)&&(Ur=Ir);break;case 4:xn=It[hn+1],Mn=It[hn+2],qn=It[hn+3],(192&xn)==128&&(192&Mn)==128&&(192&qn)==128&&(Ir=(15&_i)<<18|(63&xn)<<12|(63&Mn)<<6|63&qn)>65535&&Ir<1114112&&(Ur=Ir)}Ur===null?(Ur=65533,fo=1):Ur>65535&&(Ur-=65536,gn.push(Ur>>>10&1023|55296),Ur=56320|1023&Ur),gn.push(Ur),hn+=fo}return function(Gr){var Yr=Gr.length;if(Yr<=4096)return String.fromCharCode.apply(String,Gr);for(var to="",Ro=0;Ro<Yr;)to+=String.fromCharCode.apply(String,Gr.slice(Ro,Ro+=4096));return to}(gn)}o.Buffer=st,o.SlowBuffer=function(It){return+It!=It&&(It=0),st.alloc(+It)},o.INSPECT_MAX_BYTES=50,st.TYPED_ARRAY_SUPPORT=_.TYPED_ARRAY_SUPPORT!==void 0?_.TYPED_ARRAY_SUPPORT:function(){try{var It=new Uint8Array(1);return It.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},It.foo()===42&&typeof It.subarray=="function"&&It.subarray(1,1).byteLength===0}catch{return!1}}(),o.kMaxLength=j(),st.poolSize=8192,st._augment=function(It){return It.__proto__=st.prototype,It},st.from=function(It,Dt,Kt){return ht(null,It,Dt,Kt)},st.TYPED_ARRAY_SUPPORT&&(st.prototype.__proto__=Uint8Array.prototype,st.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&st[Symbol.species]===st&&Object.defineProperty(st,Symbol.species,{value:null,configurable:!0})),st.alloc=function(It,Dt,Kt){return function(gn,hn,xn,Mn){return _t(hn),hn<=0?it(gn,hn):xn!==void 0?typeof Mn=="string"?it(gn,hn).fill(xn,Mn):it(gn,hn).fill(xn):it(gn,hn)}(null,It,Dt,Kt)},st.allocUnsafe=function(It){return gt(null,It)},st.allocUnsafeSlow=function(It){return gt(null,It)},st.isBuffer=function(It){return!(It==null||!It._isBuffer)},st.compare=function(It,Dt){if(!st.isBuffer(It)||!st.isBuffer(Dt))throw new TypeError("Arguments must be Buffers");if(It===Dt)return 0;for(var Kt=It.length,gn=Dt.length,hn=0,xn=Math.min(Kt,gn);hn<xn;++hn)if(It[hn]!==Dt[hn]){Kt=It[hn],gn=Dt[hn];break}return Kt<gn?-1:gn<Kt?1:0},st.isEncoding=function(It){switch(String(It).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},st.concat=function(It,Dt){if(!tt(It))throw new TypeError('"list" argument must be an Array of Buffers');if(It.length===0)return st.alloc(0);var Kt;if(Dt===void 0)for(Dt=0,Kt=0;Kt<It.length;++Kt)Dt+=It[Kt].length;var gn=st.allocUnsafe(Dt),hn=0;for(Kt=0;Kt<It.length;++Kt){var xn=It[Kt];if(!st.isBuffer(xn))throw new TypeError('"list" argument must be an Array of Buffers');xn.copy(gn,hn),hn+=xn.length}return gn},st.byteLength=yt,st.prototype._isBuffer=!0,st.prototype.swap16=function(){var It=this.length;if(It%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Dt=0;Dt<It;Dt+=2)Mt(this,Dt,Dt+1);return this},st.prototype.swap32=function(){var It=this.length;if(It%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Dt=0;Dt<It;Dt+=4)Mt(this,Dt,Dt+3),Mt(this,Dt+1,Dt+2);return this},st.prototype.swap64=function(){var It=this.length;if(It%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Dt=0;Dt<It;Dt+=8)Mt(this,Dt,Dt+7),Mt(this,Dt+1,Dt+6),Mt(this,Dt+2,Dt+5),Mt(this,Dt+3,Dt+4);return this},st.prototype.toString=function(){var It=0|this.length;return It===0?"":arguments.length===0?Nt(this,0,It):Et.apply(this,arguments)},st.prototype.equals=function(It){if(!st.isBuffer(It))throw new TypeError("Argument must be a Buffer");return this===It||st.compare(this,It)===0},st.prototype.inspect=function(){var It="",Dt=o.INSPECT_MAX_BYTES;return this.length>0&&(It=this.toString("hex",0,Dt).match(/.{2}/g).join(" "),this.length>Dt&&(It+=" ... ")),"<Buffer "+It+">"},st.prototype.compare=function(It,Dt,Kt,gn,hn){if(!st.isBuffer(It))throw new TypeError("Argument must be a Buffer");if(Dt===void 0&&(Dt=0),Kt===void 0&&(Kt=It?It.length:0),gn===void 0&&(gn=0),hn===void 0&&(hn=this.length),Dt<0||Kt>It.length||gn<0||hn>this.length)throw new RangeError("out of range index");if(gn>=hn&&Dt>=Kt)return 0;if(gn>=hn)return-1;if(Dt>=Kt)return 1;if(this===It)return 0;for(var xn=(hn>>>=0)-(gn>>>=0),Mn=(Kt>>>=0)-(Dt>>>=0),qn=Math.min(xn,Mn),Ir=this.slice(gn,hn),_i=It.slice(Dt,Kt),Ur=0;Ur<qn;++Ur)if(Ir[Ur]!==_i[Ur]){xn=Ir[Ur],Mn=_i[Ur];break}return xn<Mn?-1:Mn<xn?1:0},st.prototype.includes=function(It,Dt,Kt){return this.indexOf(It,Dt,Kt)!==-1},st.prototype.indexOf=function(It,Dt,Kt){return Ft(this,It,Dt,Kt,!0)},st.prototype.lastIndexOf=function(It,Dt,Kt){return Ft(this,It,Dt,Kt,!1)},st.prototype.write=function(It,Dt,Kt,gn){if(Dt===void 0)gn="utf8",Kt=this.length,Dt=0;else if(Kt===void 0&&typeof Dt=="string")gn=Dt,Kt=this.length,Dt=0;else{if(!isFinite(Dt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Dt|=0,isFinite(Kt)?(Kt|=0,gn===void 0&&(gn="utf8")):(gn=Kt,Kt=void 0)}var hn=this.length-Dt;if((Kt===void 0||Kt>hn)&&(Kt=hn),It.length>0&&(Kt<0||Dt<0)||Dt>this.length)throw new RangeError("Attempt to write outside buffer bounds");gn||(gn="utf8");for(var xn=!1;;)switch(gn){case"hex":return Ot(this,It,Dt,Kt);case"utf8":case"utf-8":return pt(this,It,Dt,Kt);case"ascii":return Lt(this,It,Dt,Kt);case"latin1":case"binary":return nn(this,It,Dt,Kt);case"base64":return on(this,It,Dt,Kt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wt(this,It,Dt,Kt);default:if(xn)throw new TypeError("Unknown encoding: "+gn);gn=(""+gn).toLowerCase(),xn=!0}},st.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Tt(It,Dt,Kt){var gn="";Kt=Math.min(It.length,Kt);for(var hn=Dt;hn<Kt;++hn)gn+=String.fromCharCode(127&It[hn]);return gn}function Vt(It,Dt,Kt){var gn="";Kt=Math.min(It.length,Kt);for(var hn=Dt;hn<Kt;++hn)gn+=String.fromCharCode(It[hn]);return gn}function Xt(It,Dt,Kt){var gn=It.length;(!Dt||Dt<0)&&(Dt=0),(!Kt||Kt<0||Kt>gn)&&(Kt=gn);for(var hn="",xn=Dt;xn<Kt;++xn)hn+=yn(It[xn]);return hn}function Gt(It,Dt,Kt){for(var gn=It.slice(Dt,Kt),hn="",xn=0;xn<gn.length;xn+=2)hn+=String.fromCharCode(gn[xn]+256*gn[xn+1]);return hn}function Ut(It,Dt,Kt){if(It%1!=0||It<0)throw new RangeError("offset is not uint");if(It+Dt>Kt)throw new RangeError("Trying to access beyond buffer length")}function Ht(It,Dt,Kt,gn,hn,xn){if(!st.isBuffer(It))throw new TypeError('"buffer" argument must be a Buffer instance');if(Dt>hn||Dt<xn)throw new RangeError('"value" argument is out of bounds');if(Kt+gn>It.length)throw new RangeError("Index out of range")}function qt(It,Dt,Kt,gn){Dt<0&&(Dt=65535+Dt+1);for(var hn=0,xn=Math.min(It.length-Kt,2);hn<xn;++hn)It[Kt+hn]=(Dt&255<<8*(gn?hn:1-hn))>>>8*(gn?hn:1-hn)}function Pt(It,Dt,Kt,gn){Dt<0&&(Dt=4294967295+Dt+1);for(var hn=0,xn=Math.min(It.length-Kt,4);hn<xn;++hn)It[Kt+hn]=Dt>>>8*(gn?hn:3-hn)&255}function St(It,Dt,Kt,gn,hn,xn){if(Kt+gn>It.length)throw new RangeError("Index out of range");if(Kt<0)throw new RangeError("Index out of range")}function Zt(It,Dt,Kt,gn,hn){return hn||St(It,0,Kt,4),et.write(It,Dt,Kt,gn,23,4),Kt+4}function tn(It,Dt,Kt,gn,hn){return hn||St(It,0,Kt,8),et.write(It,Dt,Kt,gn,52,8),Kt+8}st.prototype.slice=function(It,Dt){var Kt,gn=this.length;if((It=~~It)<0?(It+=gn)<0&&(It=0):It>gn&&(It=gn),(Dt=Dt===void 0?gn:~~Dt)<0?(Dt+=gn)<0&&(Dt=0):Dt>gn&&(Dt=gn),Dt<It&&(Dt=It),st.TYPED_ARRAY_SUPPORT)(Kt=this.subarray(It,Dt)).__proto__=st.prototype;else{var hn=Dt-It;Kt=new st(hn,void 0);for(var xn=0;xn<hn;++xn)Kt[xn]=this[xn+It]}return Kt},st.prototype.readUIntLE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=this[It],hn=1,xn=0;++xn<Dt&&(hn*=256);)gn+=this[It+xn]*hn;return gn},st.prototype.readUIntBE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=this[It+--Dt],hn=1;Dt>0&&(hn*=256);)gn+=this[It+--Dt]*hn;return gn},st.prototype.readUInt8=function(It,Dt){return Dt||Ut(It,1,this.length),this[It]},st.prototype.readUInt16LE=function(It,Dt){return Dt||Ut(It,2,this.length),this[It]|this[It+1]<<8},st.prototype.readUInt16BE=function(It,Dt){return Dt||Ut(It,2,this.length),this[It]<<8|this[It+1]},st.prototype.readUInt32LE=function(It,Dt){return Dt||Ut(It,4,this.length),(this[It]|this[It+1]<<8|this[It+2]<<16)+16777216*this[It+3]},st.prototype.readUInt32BE=function(It,Dt){return Dt||Ut(It,4,this.length),16777216*this[It]+(this[It+1]<<16|this[It+2]<<8|this[It+3])},st.prototype.readIntLE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=this[It],hn=1,xn=0;++xn<Dt&&(hn*=256);)gn+=this[It+xn]*hn;return gn>=(hn*=128)&&(gn-=Math.pow(2,8*Dt)),gn},st.prototype.readIntBE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=Dt,hn=1,xn=this[It+--gn];gn>0&&(hn*=256);)xn+=this[It+--gn]*hn;return xn>=(hn*=128)&&(xn-=Math.pow(2,8*Dt)),xn},st.prototype.readInt8=function(It,Dt){return Dt||Ut(It,1,this.length),128&this[It]?-1*(255-this[It]+1):this[It]},st.prototype.readInt16LE=function(It,Dt){Dt||Ut(It,2,this.length);var Kt=this[It]|this[It+1]<<8;return 32768&Kt?4294901760|Kt:Kt},st.prototype.readInt16BE=function(It,Dt){Dt||Ut(It,2,this.length);var Kt=this[It+1]|this[It]<<8;return 32768&Kt?4294901760|Kt:Kt},st.prototype.readInt32LE=function(It,Dt){return Dt||Ut(It,4,this.length),this[It]|this[It+1]<<8|this[It+2]<<16|this[It+3]<<24},st.prototype.readInt32BE=function(It,Dt){return Dt||Ut(It,4,this.length),this[It]<<24|this[It+1]<<16|this[It+2]<<8|this[It+3]},st.prototype.readFloatLE=function(It,Dt){return Dt||Ut(It,4,this.length),et.read(this,It,!0,23,4)},st.prototype.readFloatBE=function(It,Dt){return Dt||Ut(It,4,this.length),et.read(this,It,!1,23,4)},st.prototype.readDoubleLE=function(It,Dt){return Dt||Ut(It,8,this.length),et.read(this,It,!0,52,8)},st.prototype.readDoubleBE=function(It,Dt){return Dt||Ut(It,8,this.length),et.read(this,It,!1,52,8)},st.prototype.writeUIntLE=function(It,Dt,Kt,gn){It=+It,Dt|=0,Kt|=0,gn||Ht(this,It,Dt,Kt,Math.pow(2,8*Kt)-1,0);var hn=1,xn=0;for(this[Dt]=255&It;++xn<Kt&&(hn*=256);)this[Dt+xn]=It/hn&255;return Dt+Kt},st.prototype.writeUIntBE=function(It,Dt,Kt,gn){It=+It,Dt|=0,Kt|=0,gn||Ht(this,It,Dt,Kt,Math.pow(2,8*Kt)-1,0);var hn=Kt-1,xn=1;for(this[Dt+hn]=255&It;--hn>=0&&(xn*=256);)this[Dt+hn]=It/xn&255;return Dt+Kt},st.prototype.writeUInt8=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,1,255,0),st.TYPED_ARRAY_SUPPORT||(It=Math.floor(It)),this[Dt]=255&It,Dt+1},st.prototype.writeUInt16LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[Dt]=255&It,this[Dt+1]=It>>>8):qt(this,It,Dt,!0),Dt+2},st.prototype.writeUInt16BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>8,this[Dt+1]=255&It):qt(this,It,Dt,!1),Dt+2},st.prototype.writeUInt32LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[Dt+3]=It>>>24,this[Dt+2]=It>>>16,this[Dt+1]=It>>>8,this[Dt]=255&It):Pt(this,It,Dt,!0),Dt+4},st.prototype.writeUInt32BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>24,this[Dt+1]=It>>>16,this[Dt+2]=It>>>8,this[Dt+3]=255&It):Pt(this,It,Dt,!1),Dt+4},st.prototype.writeIntLE=function(It,Dt,Kt,gn){if(It=+It,Dt|=0,!gn){var hn=Math.pow(2,8*Kt-1);Ht(this,It,Dt,Kt,hn-1,-hn)}var xn=0,Mn=1,qn=0;for(this[Dt]=255&It;++xn<Kt&&(Mn*=256);)It<0&&qn===0&&this[Dt+xn-1]!==0&&(qn=1),this[Dt+xn]=(It/Mn>>0)-qn&255;return Dt+Kt},st.prototype.writeIntBE=function(It,Dt,Kt,gn){if(It=+It,Dt|=0,!gn){var hn=Math.pow(2,8*Kt-1);Ht(this,It,Dt,Kt,hn-1,-hn)}var xn=Kt-1,Mn=1,qn=0;for(this[Dt+xn]=255&It;--xn>=0&&(Mn*=256);)It<0&&qn===0&&this[Dt+xn+1]!==0&&(qn=1),this[Dt+xn]=(It/Mn>>0)-qn&255;return Dt+Kt},st.prototype.writeInt8=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,1,127,-128),st.TYPED_ARRAY_SUPPORT||(It=Math.floor(It)),It<0&&(It=255+It+1),this[Dt]=255&It,Dt+1},st.prototype.writeInt16LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[Dt]=255&It,this[Dt+1]=It>>>8):qt(this,It,Dt,!0),Dt+2},st.prototype.writeInt16BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>8,this[Dt+1]=255&It):qt(this,It,Dt,!1),Dt+2},st.prototype.writeInt32LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,2147483647,-2147483648),st.TYPED_ARRAY_SUPPORT?(this[Dt]=255&It,this[Dt+1]=It>>>8,this[Dt+2]=It>>>16,this[Dt+3]=It>>>24):Pt(this,It,Dt,!0),Dt+4},st.prototype.writeInt32BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,2147483647,-2147483648),It<0&&(It=4294967295+It+1),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>24,this[Dt+1]=It>>>16,this[Dt+2]=It>>>8,this[Dt+3]=255&It):Pt(this,It,Dt,!1),Dt+4},st.prototype.writeFloatLE=function(It,Dt,Kt){return Zt(this,It,Dt,!0,Kt)},st.prototype.writeFloatBE=function(It,Dt,Kt){return Zt(this,It,Dt,!1,Kt)},st.prototype.writeDoubleLE=function(It,Dt,Kt){return tn(this,It,Dt,!0,Kt)},st.prototype.writeDoubleBE=function(It,Dt,Kt){return tn(this,It,Dt,!1,Kt)},st.prototype.copy=function(It,Dt,Kt,gn){if(Kt||(Kt=0),gn||gn===0||(gn=this.length),Dt>=It.length&&(Dt=It.length),Dt||(Dt=0),gn>0&&gn<Kt&&(gn=Kt),gn===Kt||It.length===0||this.length===0)return 0;if(Dt<0)throw new RangeError("targetStart out of bounds");if(Kt<0||Kt>=this.length)throw new RangeError("sourceStart out of bounds");if(gn<0)throw new RangeError("sourceEnd out of bounds");gn>this.length&&(gn=this.length),It.length-Dt<gn-Kt&&(gn=It.length-Dt+Kt);var hn,xn=gn-Kt;if(this===It&&Kt<Dt&&Dt<gn)for(hn=xn-1;hn>=0;--hn)It[hn+Dt]=this[hn+Kt];else if(xn<1e3||!st.TYPED_ARRAY_SUPPORT)for(hn=0;hn<xn;++hn)It[hn+Dt]=this[hn+Kt];else Uint8Array.prototype.set.call(It,this.subarray(Kt,Kt+xn),Dt);return xn},st.prototype.fill=function(It,Dt,Kt,gn){if(typeof It=="string"){if(typeof Dt=="string"?(gn=Dt,Dt=0,Kt=this.length):typeof Kt=="string"&&(gn=Kt,Kt=this.length),It.length===1){var hn=It.charCodeAt(0);hn<256&&(It=hn)}if(gn!==void 0&&typeof gn!="string")throw new TypeError("encoding must be a string");if(typeof gn=="string"&&!st.isEncoding(gn))throw new TypeError("Unknown encoding: "+gn)}else typeof It=="number"&&(It&=255);if(Dt<0||this.length<Dt||this.length<Kt)throw new RangeError("Out of range index");if(Kt<=Dt)return this;var xn;if(Dt>>>=0,Kt=Kt===void 0?this.length:Kt>>>0,It||(It=0),typeof It=="number")for(xn=Dt;xn<Kt;++xn)this[xn]=It;else{var Mn=st.isBuffer(It)?It:vn(new st(It,gn).toString()),qn=Mn.length;for(xn=0;xn<Kt-Dt;++xn)this[xn+Dt]=Mn[xn%qn]}return this};var mn=/[^+\/0-9A-Za-z-_]/g;function yn(It){return It<16?"0"+It.toString(16):It.toString(16)}function vn(It,Dt){var Kt;Dt=Dt||1/0;for(var gn=It.length,hn=null,xn=[],Mn=0;Mn<gn;++Mn){if((Kt=It.charCodeAt(Mn))>55295&&Kt<57344){if(!hn){if(Kt>56319){(Dt-=3)>-1&&xn.push(239,191,189);continue}if(Mn+1===gn){(Dt-=3)>-1&&xn.push(239,191,189);continue}hn=Kt;continue}if(Kt<56320){(Dt-=3)>-1&&xn.push(239,191,189),hn=Kt;continue}Kt=65536+(hn-55296<<10|Kt-56320)}else hn&&(Dt-=3)>-1&&xn.push(239,191,189);if(hn=null,Kt<128){if((Dt-=1)<0)break;xn.push(Kt)}else if(Kt<2048){if((Dt-=2)<0)break;xn.push(Kt>>6|192,63&Kt|128)}else if(Kt<65536){if((Dt-=3)<0)break;xn.push(Kt>>12|224,Kt>>6&63|128,63&Kt|128)}else{if(!(Kt<1114112))throw new Error("Invalid code point");if((Dt-=4)<0)break;xn.push(Kt>>18|240,Kt>>12&63|128,Kt>>6&63|128,63&Kt|128)}}return xn}function un(It){return $.toByteArray(function(Dt){if((Dt=function(Kt){return Kt.trim?Kt.trim():Kt.replace(/^\s+|\s+$/g,"")}(Dt).replace(mn,"")).length<2)return"";for(;Dt.length%4!=0;)Dt+="=";return Dt}(It))}function rn(It,Dt,Kt,gn){for(var hn=0;hn<gn&&!(hn+Kt>=Dt.length||hn>=It.length);++hn)Dt[hn+Kt]=It[hn];return hn}}).call(this,s(6))},function(i,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}i.exports=s},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){_&&(s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(s,_){if(_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}}},function(i,o,s){s.d(o,"a",function(){return _});const _=$=>new Promise(et=>setTimeout(et,$||0))},function(i,o,s){var _=s(99),$=_,et=Function("return this")(),tt=s(98);$.object.extend(proto,tt),$.exportSymbol("proto.v1.signaling.api.CreatePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.CreatePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetHealthRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetHealthResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.Peer",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamRequest",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamResponse",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalRequest",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SessionType",null,et),$.exportSymbol("proto.v1.signaling.api.Signal",null,et),proto.v1.signaling.api.Peer=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.Peer.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.Peer,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Peer.displayName="proto.v1.signaling.api.Peer"),proto.v1.signaling.api.Signal=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.Signal,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Signal.displayName="proto.v1.signaling.api.Signal"),proto.v1.signaling.api.GetHealthRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetHealthRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetHealthRequest.displayName="proto.v1.signaling.api.GetHealthRequest"),proto.v1.signaling.api.GetHealthResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetHealthResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetHealthResponse.displayName="proto.v1.signaling.api.GetHealthResponse"),proto.v1.signaling.api.CreatePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerRequest.displayName="proto.v1.signaling.api.CreatePeerRequest"),proto.v1.signaling.api.CreatePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerResponse.displayName="proto.v1.signaling.api.CreatePeerResponse"),proto.v1.signaling.api.DeletePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerRequest.displayName="proto.v1.signaling.api.DeletePeerRequest"),proto.v1.signaling.api.DeletePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerResponse.displayName="proto.v1.signaling.api.DeletePeerResponse"),proto.v1.signaling.api.RefreshPeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerRequest.displayName="proto.v1.signaling.api.RefreshPeerRequest"),proto.v1.signaling.api.RefreshPeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerResponse.displayName="proto.v1.signaling.api.RefreshPeerResponse"),proto.v1.signaling.api.GetPeersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetPeersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersRequest.displayName="proto.v1.signaling.api.GetPeersRequest"),proto.v1.signaling.api.GetPeersResponse=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.GetPeersResponse.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.GetPeersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersResponse.displayName="proto.v1.signaling.api.GetPeersResponse"),proto.v1.signaling.api.GetIceServersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersRequest.displayName="proto.v1.signaling.api.GetIceServersRequest"),proto.v1.signaling.api.GetIceServersResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersResponse.displayName="proto.v1.signaling.api.GetIceServersResponse"),proto.v1.signaling.api.SendSignalRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalRequest.displayName="proto.v1.signaling.api.SendSignalRequest"),proto.v1.signaling.api.SendSignalResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalResponse.displayName="proto.v1.signaling.api.SendSignalResponse"),proto.v1.signaling.api.ReceiveSignalStreamRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.displayName="proto.v1.signaling.api.ReceiveSignalStreamRequest"),proto.v1.signaling.api.ReceiveSignalStreamResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.displayName="proto.v1.signaling.api.ReceiveSignalStreamResponse"),proto.v1.signaling.api.Peer.repeatedFields_=[5],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Peer.prototype.toObject=function(j){return proto.v1.signaling.api.Peer.toObject(j,this)},proto.v1.signaling.api.Peer.toObject=function(j,it){var st,ht={peerId:_.Message.getFieldWithDefault(it,1,""),organizationId:_.Message.getFieldWithDefault(it,2,""),userId:(st=it.getUserId())&&tt.StringValue.toObject(j,st),deviceId:(st=it.getDeviceId())&&tt.StringValue.toObject(j,st),sessionIdsList:(st=_.Message.getRepeatedField(it,5))==null?void 0:st,peerCreatedTimestamp:(st=it.getPeerCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Peer.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Peer;return proto.v1.signaling.api.Peer.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Peer.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;case 2:st=it.readString(),j.setOrganizationId(st);break;case 3:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setUserId(st);break;case 4:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setDeviceId(st);break;case 5:st=it.readString(),j.addSessionIds(st);break;case 6:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setPeerCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Peer.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Peer.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Peer.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getPeerId()).length>0&&it.writeString(1,st),(st=j.getOrganizationId()).length>0&&it.writeString(2,st),(st=j.getUserId())!=null&&it.writeMessage(3,st,tt.StringValue.serializeBinaryToWriter),(st=j.getDeviceId())!=null&&it.writeMessage(4,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionIdsList()).length>0&&it.writeRepeatedString(5,st),(st=j.getPeerCreatedTimestamp())!=null&&it.writeMessage(6,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.Peer.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.Peer.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},proto.v1.signaling.api.Peer.prototype.getOrganizationId=function(){return _.Message.getFieldWithDefault(this,2,"")},proto.v1.signaling.api.Peer.prototype.setOrganizationId=function(j){return _.Message.setProto3StringField(this,2,j)},proto.v1.signaling.api.Peer.prototype.getUserId=function(){return _.Message.getWrapperField(this,tt.StringValue,3)},proto.v1.signaling.api.Peer.prototype.setUserId=function(j){return _.Message.setWrapperField(this,3,j)},proto.v1.signaling.api.Peer.prototype.clearUserId=function(){return this.setUserId(void 0)},proto.v1.signaling.api.Peer.prototype.hasUserId=function(){return _.Message.getField(this,3)!=null},proto.v1.signaling.api.Peer.prototype.getDeviceId=function(){return _.Message.getWrapperField(this,tt.StringValue,4)},proto.v1.signaling.api.Peer.prototype.setDeviceId=function(j){return _.Message.setWrapperField(this,4,j)},proto.v1.signaling.api.Peer.prototype.clearDeviceId=function(){return this.setDeviceId(void 0)},proto.v1.signaling.api.Peer.prototype.hasDeviceId=function(){return _.Message.getField(this,4)!=null},proto.v1.signaling.api.Peer.prototype.getSessionIdsList=function(){return _.Message.getRepeatedField(this,5)},proto.v1.signaling.api.Peer.prototype.setSessionIdsList=function(j){return _.Message.setField(this,5,j||[])},proto.v1.signaling.api.Peer.prototype.addSessionIds=function(j,it){return _.Message.addToRepeatedField(this,5,j,it)},proto.v1.signaling.api.Peer.prototype.clearSessionIdsList=function(){return this.setSessionIdsList([])},proto.v1.signaling.api.Peer.prototype.getPeerCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,6)},proto.v1.signaling.api.Peer.prototype.setPeerCreatedTimestamp=function(j){return _.Message.setWrapperField(this,6,j)},proto.v1.signaling.api.Peer.prototype.clearPeerCreatedTimestamp=function(){return this.setPeerCreatedTimestamp(void 0)},proto.v1.signaling.api.Peer.prototype.hasPeerCreatedTimestamp=function(){return _.Message.getField(this,6)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Signal.prototype.toObject=function(j){return proto.v1.signaling.api.Signal.toObject(j,this)},proto.v1.signaling.api.Signal.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st),senderId:_.Message.getFieldWithDefault(it,3,""),receiverId:_.Message.getFieldWithDefault(it,4,""),payload:_.Message.getFieldWithDefault(it,5,""),iceServers:_.Message.getFieldWithDefault(it,6,""),iceTransportPolicy:_.Message.getFieldWithDefault(it,7,""),sessionType:_.Message.getFieldWithDefault(it,8,0)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Signal.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Signal;return proto.v1.signaling.api.Signal.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Signal.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;case 3:st=it.readString(),j.setSenderId(st);break;case 4:st=it.readString(),j.setReceiverId(st);break;case 5:st=it.readString(),j.setPayload(st);break;case 6:st=it.readString(),j.setIceServers(st);break;case 7:st=it.readString(),j.setIceTransportPolicy(st);break;case 8:st=it.readEnum(),j.setSessionType(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Signal.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Signal.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Signal.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter),(st=j.getSenderId()).length>0&&it.writeString(3,st),(st=j.getReceiverId()).length>0&&it.writeString(4,st),(st=j.getPayload()).length>0&&it.writeString(5,st),(st=j.getIceServers()).length>0&&it.writeString(6,st),(st=j.getIceTransportPolicy()).length>0&&it.writeString(7,st),(st=j.getSessionType())!==0&&it.writeEnum(8,st)},proto.v1.signaling.api.Signal.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.Signal.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.Signal.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.Signal.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.Signal.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.Signal.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},proto.v1.signaling.api.Signal.prototype.getSenderId=function(){return _.Message.getFieldWithDefault(this,3,"")},proto.v1.signaling.api.Signal.prototype.setSenderId=function(j){return _.Message.setProto3StringField(this,3,j)},proto.v1.signaling.api.Signal.prototype.getReceiverId=function(){return _.Message.getFieldWithDefault(this,4,"")},proto.v1.signaling.api.Signal.prototype.setReceiverId=function(j){return _.Message.setProto3StringField(this,4,j)},proto.v1.signaling.api.Signal.prototype.getPayload=function(){return _.Message.getFieldWithDefault(this,5,"")},proto.v1.signaling.api.Signal.prototype.setPayload=function(j){return _.Message.setProto3StringField(this,5,j)},proto.v1.signaling.api.Signal.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,6,"")},proto.v1.signaling.api.Signal.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,6,j)},proto.v1.signaling.api.Signal.prototype.getIceTransportPolicy=function(){return _.Message.getFieldWithDefault(this,7,"")},proto.v1.signaling.api.Signal.prototype.setIceTransportPolicy=function(j){return _.Message.setProto3StringField(this,7,j)},proto.v1.signaling.api.Signal.prototype.getSessionType=function(){return _.Message.getFieldWithDefault(this,8,0)},proto.v1.signaling.api.Signal.prototype.setSessionType=function(j){return _.Message.setProto3EnumField(this,8,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetHealthRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetHealthRequest.toObject(j,this)},proto.v1.signaling.api.GetHealthRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetHealthRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetHealthRequest;return proto.v1.signaling.api.GetHealthRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetHealthRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetHealthRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetHealthRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetHealthRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetHealthResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetHealthResponse.toObject(j,this)},proto.v1.signaling.api.GetHealthResponse.toObject=function(j,it){var st={version:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetHealthResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetHealthResponse;return proto.v1.signaling.api.GetHealthResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetHealthResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setVersion(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetHealthResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetHealthResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetHealthResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getVersion()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.GetHealthResponse.prototype.getVersion=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.GetHealthResponse.prototype.setVersion=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerRequest.toObject(j,this)},proto.v1.signaling.api.CreatePeerRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.CreatePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerRequest;return proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.CreatePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerResponse.toObject(j,this)},proto.v1.signaling.api.CreatePeerResponse.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.CreatePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerResponse;return proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.CreatePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.CreatePeerResponse.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.CreatePeerResponse.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.CreatePeerResponse.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.CreatePeerResponse.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerRequest.toObject(j,this)},proto.v1.signaling.api.DeletePeerRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerRequest;return proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.DeletePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.DeletePeerRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.DeletePeerRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerResponse.toObject(j,this)},proto.v1.signaling.api.DeletePeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerResponse;return proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.DeletePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerRequest.toObject(j,this)},proto.v1.signaling.api.RefreshPeerRequest.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.RefreshPeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerRequest;return proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.RefreshPeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.RefreshPeerRequest.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.RefreshPeerRequest.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.RefreshPeerRequest.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.RefreshPeerRequest.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerResponse.toObject(j,this)},proto.v1.signaling.api.RefreshPeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.RefreshPeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerResponse;return proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.RefreshPeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersRequest.toObject(j,this)},proto.v1.signaling.api.GetPeersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersRequest;return proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetPeersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter=function(j,it){},proto.v1.signaling.api.GetPeersResponse.repeatedFields_=[1],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersResponse.toObject(j,this)},proto.v1.signaling.api.GetPeersResponse.toObject=function(j,it){var st={peersList:_.Message.toObjectList(it.getPeersList(),proto.v1.signaling.api.Peer.toObject,j)};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersResponse;return proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.addPeers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetPeersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeersList()).length>0&&it.writeRepeatedMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.GetPeersResponse.prototype.getPeersList=function(){return _.Message.getRepeatedWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.GetPeersResponse.prototype.setPeersList=function(j){return _.Message.setRepeatedWrapperField(this,1,j)},proto.v1.signaling.api.GetPeersResponse.prototype.addPeers=function(j,it){return _.Message.addToRepeatedWrapperField(this,1,j,proto.v1.signaling.api.Peer,it)},proto.v1.signaling.api.GetPeersResponse.prototype.clearPeersList=function(){return this.setPeersList([])},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersRequest.toObject(j,this)},proto.v1.signaling.api.GetIceServersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersRequest;return proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetIceServersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersResponse.toObject(j,this)},proto.v1.signaling.api.GetIceServersResponse.toObject=function(j,it){var st={iceServers:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersResponse;return proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setIceServers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetIceServersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getIceServers()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.GetIceServersResponse.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.GetIceServersResponse.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalRequest.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalRequest.toObject(j,this)},proto.v1.signaling.api.SendSignalRequest.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalRequest;return proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalRequest.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.SendSignalRequest.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalRequest.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.SendSignalRequest.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalResponse.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalResponse.toObject(j,this)},proto.v1.signaling.api.SendSignalResponse.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalResponse;return proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamRequest;return proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamResponse;return proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SessionType={UNKNOWN:0,TELEOP:1,PORT_FORWARD:2,OBSERVE:3},$.object.extend(o,proto.v1.signaling.api)},function(i,o,s){function _($,et,tt=()=>!0){if($ instanceof et&&tt($))return $;throw $}s.d(o,"a",function(){return _})},function(i,o,s){s.d(o,"a",function(){return $});var _=s(34);class $ extends Error{constructor(tt,j,it,st,ht={},_t){super(`Unexpected response (${it}) for ${tt} ${j}: ${JSON.stringify(_t?Object(_.a)([..._t.entries()].reduce((gt,[ft,ut])=>(gt[ft]=ut,gt),{})):{})} -- ${JSON.stringify(Object(_.a)(st))}`),this.method=tt,this.url=j,this.statusCode=it,this.body=st,this.validationErrors=ht,this.headers=_t}}},function(i,o,s){function _(gt){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft})(gt)}function $(gt,ft){return!ft||_(ft)!=="object"&&typeof ft!="function"?et(gt):ft}function et(gt){if(gt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt}function tt(gt){var ft=typeof Map=="function"?new Map:void 0;return(tt=function(ut){if(ut===null||(yt=ut,Function.toString.call(yt).indexOf("[native code]")===-1))return ut;var yt;if(typeof ut!="function")throw new TypeError("Super expression must either be null or a function");if(ft!==void 0){if(ft.has(ut))return ft.get(ut);ft.set(ut,Et)}function Et(){return j(ut,arguments,ht(this).constructor)}return Et.prototype=Object.create(ut.prototype,{constructor:{value:Et,enumerable:!1,writable:!0,configurable:!0}}),st(Et,ut)})(gt)}function j(gt,ft,ut){return(j=it()?Reflect.construct:function(yt,Et,Mt){var Ft=[null];Ft.push.apply(Ft,Et);var Rt=new(Function.bind.apply(yt,Ft));return Mt&&st(Rt,Mt.prototype),Rt}).apply(null,arguments)}function it(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function st(gt,ft){return(st=Object.setPrototypeOf||function(ut,yt){return ut.__proto__=yt,ut})(gt,ft)}function ht(gt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(ft){return ft.__proto__||Object.getPrototypeOf(ft)})(gt)}var _t=function(gt){(function(Mt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Ft&&st(Mt,Ft)})(Et,gt);var ft,ut,yt=(ft=Et,ut=it(),function(){var Mt,Ft=ht(ft);if(ut){var Rt=ht(this).constructor;Mt=Reflect.construct(Ft,arguments,Rt)}else Mt=Ft.apply(this,arguments);return $(this,Mt)});function Et(Mt){var Ft;return function(Rt,Ot){if(!(Rt instanceof Ot))throw new TypeError("Cannot call a class as a function")}(this,Et),Ft=yt.call(this,`Format functions must be synchronous taking a two arguments: (info, opts)
Found: `.concat(Mt.toString().split(`
`)[0],`
`)),Error.captureStackTrace(et(Ft),Et),Ft}return Et}(tt(Error));i.exports=function(gt){if(gt.length>2)throw new _t(gt);function ft(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=yt}function ut(yt){return new ft(yt)}return ft.prototype.transform=gt,ut.Format=ft,ut}},function(i,o,s){(function(_){var $=Object.getOwnPropertyDescriptors||function(Ut){for(var Ht=Object.keys(Ut),qt={},Pt=0;Pt<Ht.length;Pt++)qt[Ht[Pt]]=Object.getOwnPropertyDescriptor(Ut,Ht[Pt]);return qt},et=/%[sdj%]/g;o.format=function(Ut){if(!Ft(Ut)){for(var Ht=[],qt=0;qt<arguments.length;qt++)Ht.push(it(arguments[qt]));return Ht.join(" ")}qt=1;for(var Pt=arguments,St=Pt.length,Zt=String(Ut).replace(et,function(mn){if(mn==="%%")return"%";if(qt>=St)return mn;switch(mn){case"%s":return String(Pt[qt++]);case"%d":return Number(Pt[qt++]);case"%j":try{return JSON.stringify(Pt[qt++])}catch{return"[Circular]"}default:return mn}}),tn=Pt[qt];qt<St;tn=Pt[++qt])Et(tn)||!pt(tn)?Zt+=" "+tn:Zt+=" "+it(tn);return Zt},o.deprecate=function(Ut,Ht){if(_!==void 0&&_.noDeprecation===!0)return Ut;if(_===void 0)return function(){return o.deprecate(Ut,Ht).apply(this,arguments)};var qt=!1;return function(){if(!qt){if(_.throwDeprecation)throw new Error(Ht);_.traceDeprecation?console.trace(Ht):console.error(Ht),qt=!0}return Ut.apply(this,arguments)}};var tt,j={};function it(Ut,Ht){var qt={seen:[],stylize:ht};return arguments.length>=3&&(qt.depth=arguments[2]),arguments.length>=4&&(qt.colors=arguments[3]),yt(Ht)?qt.showHidden=Ht:Ht&&o._extend(qt,Ht),Rt(qt.showHidden)&&(qt.showHidden=!1),Rt(qt.depth)&&(qt.depth=2),Rt(qt.colors)&&(qt.colors=!1),Rt(qt.customInspect)&&(qt.customInspect=!0),qt.colors&&(qt.stylize=st),_t(qt,Ut,qt.depth)}function st(Ut,Ht){var qt=it.styles[Ht];return qt?"\x1B["+it.colors[qt][0]+"m"+Ut+"\x1B["+it.colors[qt][1]+"m":Ut}function ht(Ut,Ht){return Ut}function _t(Ut,Ht,qt){if(Ut.customInspect&&Ht&&on(Ht.inspect)&&Ht.inspect!==o.inspect&&(!Ht.constructor||Ht.constructor.prototype!==Ht)){var Pt=Ht.inspect(qt,Ut);return Ft(Pt)||(Pt=_t(Ut,Pt,qt)),Pt}var St=function(It,Dt){if(Rt(Dt))return It.stylize("undefined","undefined");if(Ft(Dt)){var Kt="'"+JSON.stringify(Dt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return It.stylize(Kt,"string")}if(Mt(Dt))return It.stylize(""+Dt,"number");if(yt(Dt))return It.stylize(""+Dt,"boolean");if(Et(Dt))return It.stylize("null","null")}(Ut,Ht);if(St)return St;var Zt=Object.keys(Ht),tn=function(It){var Dt={};return It.forEach(function(Kt,gn){Dt[Kt]=!0}),Dt}(Zt);if(Ut.showHidden&&(Zt=Object.getOwnPropertyNames(Ht)),nn(Ht)&&(Zt.indexOf("message")>=0||Zt.indexOf("description")>=0))return gt(Ht);if(Zt.length===0){if(on(Ht)){var mn=Ht.name?": "+Ht.name:"";return Ut.stylize("[Function"+mn+"]","special")}if(Ot(Ht))return Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp");if(Lt(Ht))return Ut.stylize(Date.prototype.toString.call(Ht),"date");if(nn(Ht))return gt(Ht)}var yn,vn="",un=!1,rn=["{","}"];return ut(Ht)&&(un=!0,rn=["[","]"]),on(Ht)&&(vn=" [Function"+(Ht.name?": "+Ht.name:"")+"]"),Ot(Ht)&&(vn=" "+RegExp.prototype.toString.call(Ht)),Lt(Ht)&&(vn=" "+Date.prototype.toUTCString.call(Ht)),nn(Ht)&&(vn=" "+gt(Ht)),Zt.length!==0||un&&Ht.length!=0?qt<0?Ot(Ht)?Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp"):Ut.stylize("[Object]","special"):(Ut.seen.push(Ht),yn=un?function(It,Dt,Kt,gn,hn){for(var xn=[],Mn=0,qn=Dt.length;Mn<qn;++Mn)Vt(Dt,String(Mn))?xn.push(ft(It,Dt,Kt,gn,String(Mn),!0)):xn.push("");return hn.forEach(function(Ir){Ir.match(/^\d+$/)||xn.push(ft(It,Dt,Kt,gn,Ir,!0))}),xn}(Ut,Ht,qt,tn,Zt):Zt.map(function(It){return ft(Ut,Ht,qt,tn,It,un)}),Ut.seen.pop(),function(It,Dt,Kt){return It.reduce(function(gn,hn){return hn.indexOf(`
`)>=0,gn+hn.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Kt[0]+(Dt===""?"":Dt+`
 `)+" "+It.join(`,
  `)+" "+Kt[1]:Kt[0]+Dt+" "+It.join(", ")+" "+Kt[1]}(yn,vn,rn)):rn[0]+vn+rn[1]}function gt(Ut){return"["+Error.prototype.toString.call(Ut)+"]"}function ft(Ut,Ht,qt,Pt,St,Zt){var tn,mn,yn;if((yn=Object.getOwnPropertyDescriptor(Ht,St)||{value:Ht[St]}).get?mn=yn.set?Ut.stylize("[Getter/Setter]","special"):Ut.stylize("[Getter]","special"):yn.set&&(mn=Ut.stylize("[Setter]","special")),Vt(Pt,St)||(tn="["+St+"]"),mn||(Ut.seen.indexOf(yn.value)<0?(mn=Et(qt)?_t(Ut,yn.value,null):_t(Ut,yn.value,qt-1)).indexOf(`
`)>-1&&(mn=Zt?mn.split(`
`).map(function(vn){return"  "+vn}).join(`
`).substr(2):`
`+mn.split(`
`).map(function(vn){return"   "+vn}).join(`
`)):mn=Ut.stylize("[Circular]","special")),Rt(tn)){if(Zt&&St.match(/^\d+$/))return mn;(tn=JSON.stringify(""+St)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(tn=tn.substr(1,tn.length-2),tn=Ut.stylize(tn,"name")):(tn=tn.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),tn=Ut.stylize(tn,"string"))}return tn+": "+mn}function ut(Ut){return Array.isArray(Ut)}function yt(Ut){return typeof Ut=="boolean"}function Et(Ut){return Ut===null}function Mt(Ut){return typeof Ut=="number"}function Ft(Ut){return typeof Ut=="string"}function Rt(Ut){return Ut===void 0}function Ot(Ut){return pt(Ut)&&wt(Ut)==="[object RegExp]"}function pt(Ut){return typeof Ut=="object"&&Ut!==null}function Lt(Ut){return pt(Ut)&&wt(Ut)==="[object Date]"}function nn(Ut){return pt(Ut)&&(wt(Ut)==="[object Error]"||Ut instanceof Error)}function on(Ut){return typeof Ut=="function"}function wt(Ut){return Object.prototype.toString.call(Ut)}function xt(Ut){return Ut<10?"0"+Ut.toString(10):Ut.toString(10)}o.debuglog=function(Ut){if(Rt(tt)&&(tt=_.env.NODE_DEBUG||""),Ut=Ut.toUpperCase(),!j[Ut])if(new RegExp("\\b"+Ut+"\\b","i").test(tt)){var Ht=_.pid;j[Ut]=function(){var qt=o.format.apply(o,arguments);console.error("%s %d: %s",Ut,Ht,qt)}}else j[Ut]=function(){};return j[Ut]},o.inspect=it,it.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},it.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=ut,o.isBoolean=yt,o.isNull=Et,o.isNullOrUndefined=function(Ut){return Ut==null},o.isNumber=Mt,o.isString=Ft,o.isSymbol=function(Ut){return typeof Ut=="symbol"},o.isUndefined=Rt,o.isRegExp=Ot,o.isObject=pt,o.isDate=Lt,o.isError=nn,o.isFunction=on,o.isPrimitive=function(Ut){return Ut===null||typeof Ut=="boolean"||typeof Ut=="number"||typeof Ut=="string"||typeof Ut=="symbol"||Ut===void 0},o.isBuffer=s(107);var Nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Tt(){var Ut=new Date,Ht=[xt(Ut.getHours()),xt(Ut.getMinutes()),xt(Ut.getSeconds())].join(":");return[Ut.getDate(),Nt[Ut.getMonth()],Ht].join(" ")}function Vt(Ut,Ht){return Object.prototype.hasOwnProperty.call(Ut,Ht)}o.log=function(){console.log("%s - %s",Tt(),o.format.apply(o,arguments))},o.inherits=s(108),o._extend=function(Ut,Ht){if(!Ht||!pt(Ht))return Ut;for(var qt=Object.keys(Ht),Pt=qt.length;Pt--;)Ut[qt[Pt]]=Ht[qt[Pt]];return Ut};var Xt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Gt(Ut,Ht){if(!Ut){var qt=new Error("Promise was rejected with a falsy value");qt.reason=Ut,Ut=qt}return Ht(Ut)}o.promisify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');if(Xt&&Ut[Xt]){var Ht;if(typeof(Ht=Ut[Xt])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ht,Xt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Ht}function Ht(){for(var qt,Pt,St=new Promise(function(mn,yn){qt=mn,Pt=yn}),Zt=[],tn=0;tn<arguments.length;tn++)Zt.push(arguments[tn]);Zt.push(function(mn,yn){mn?Pt(mn):qt(yn)});try{Ut.apply(this,Zt)}catch(mn){Pt(mn)}return St}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Xt&&Object.defineProperty(Ht,Xt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ht,$(Ut))},o.promisify.custom=Xt,o.callbackify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');function Ht(){for(var qt=[],Pt=0;Pt<arguments.length;Pt++)qt.push(arguments[Pt]);var St=qt.pop();if(typeof St!="function")throw new TypeError("The last argument must be of type Function");var Zt=this,tn=function(){return St.apply(Zt,arguments)};Ut.apply(this,qt).then(function(mn){_.nextTick(tn,null,mn)},function(mn){_.nextTick(Gt,mn,tn)})}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Object.defineProperties(Ht,$(Ut)),Ht}}).call(this,s(2))},function(i,o,s){i.exports=function(_,$){$||($={}),typeof $=="function"&&($={cmp:$});var et,tt=typeof $.cycles=="boolean"&&$.cycles,j=$.cmp&&(et=$.cmp,function(st){return function(ht,_t){var gt={key:ht,value:st[ht]},ft={key:_t,value:st[_t]};return et(gt,ft)}}),it=[];return function st(ht){if(ht&&ht.toJSON&&typeof ht.toJSON=="function"&&(ht=ht.toJSON()),ht!==void 0){if(typeof ht=="number")return isFinite(ht)?""+ht:"null";if(typeof ht!="object")return JSON.stringify(ht);var _t,gt;if(Array.isArray(ht)){for(gt="[",_t=0;_t<ht.length;_t++)_t&&(gt+=","),gt+=st(ht[_t])||"null";return gt+"]"}if(ht===null)return"null";if(it.indexOf(ht)!==-1){if(tt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var ft=it.push(ht)-1,ut=Object.keys(ht).sort(j&&j(ht));for(gt="",_t=0;_t<ut.length;_t++){var yt=ut[_t],Et=st(ht[yt]);Et&&(gt&&(gt+=","),gt+=JSON.stringify(yt)+":"+Et)}return it.splice(ft,1),"{"+gt+"}"}}(_)}},function(i,o,s){(function(_){var $=_!==void 0&&_||typeof self<"u"&&self||window,et=Function.prototype.apply;function tt(j,it){this._id=j,this._clearFn=it}o.setTimeout=function(){return new tt(et.call(setTimeout,$,arguments),clearTimeout)},o.setInterval=function(){return new tt(et.call(setInterval,$,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(j){j&&j.close()},tt.prototype.unref=tt.prototype.ref=function(){},tt.prototype.close=function(){this._clearFn.call($,this._id)},o.enroll=function(j,it){clearTimeout(j._idleTimeoutId),j._idleTimeout=it},o.unenroll=function(j){clearTimeout(j._idleTimeoutId),j._idleTimeout=-1},o._unrefActive=o.active=function(j){clearTimeout(j._idleTimeoutId);var it=j._idleTimeout;it>=0&&(j._idleTimeoutId=setTimeout(function(){j._onTimeout&&j._onTimeout()},it))},s(141),o.setImmediate=typeof self<"u"&&self.setImmediate||_!==void 0&&_.setImmediate||this&&this.setImmediate,o.clearImmediate=typeof self<"u"&&self.clearImmediate||_!==void 0&&_.clearImmediate||this&&this.clearImmediate}).call(this,s(6))},function(i,o,s){(function(_){_===void 0||!_.version||_.version.indexOf("v0.")===0||_.version.indexOf("v1.")===0&&_.version.indexOf("v1.8.")!==0?i.exports={nextTick:function($,et,tt,j){if(typeof $!="function")throw new TypeError('"callback" argument must be a function');var it,st,ht=arguments.length;switch(ht){case 0:case 1:return _.nextTick($);case 2:return _.nextTick(function(){$.call(null,et)});case 3:return _.nextTick(function(){$.call(null,et,tt)});case 4:return _.nextTick(function(){$.call(null,et,tt,j)});default:for(it=new Array(ht-1),st=0;st<it.length;)it[st++]=arguments[st];return _.nextTick(function(){$.apply(null,it)})}}}:i.exports=_}).call(this,s(2))},function(i,o,s){(function(_){function $(et){return Object.prototype.toString.call(et)}o.isArray=function(et){return Array.isArray?Array.isArray(et):$(et)==="[object Array]"},o.isBoolean=function(et){return typeof et=="boolean"},o.isNull=function(et){return et===null},o.isNullOrUndefined=function(et){return et==null},o.isNumber=function(et){return typeof et=="number"},o.isString=function(et){return typeof et=="string"},o.isSymbol=function(et){return typeof et=="symbol"},o.isUndefined=function(et){return et===void 0},o.isRegExp=function(et){return $(et)==="[object RegExp]"},o.isObject=function(et){return typeof et=="object"&&et!==null},o.isDate=function(et){return $(et)==="[object Date]"},o.isError=function(et){return $(et)==="[object Error]"||et instanceof Error},o.isFunction=function(et){return typeof et=="function"},o.isPrimitive=function(et){return et===null||typeof et=="boolean"||typeof et=="number"||typeof et=="string"||typeof et=="symbol"||et===void 0},o.isBuffer=_.isBuffer}).call(this,s(5).Buffer)},function(i,o){o.endianness=function(){return"LE"},o.hostname=function(){return typeof location<"u"?location.hostname:""},o.loadavg=function(){return[]},o.uptime=function(){return 0},o.freemem=function(){return Number.MAX_VALUE},o.totalmem=function(){return Number.MAX_VALUE},o.cpus=function(){return[]},o.type=function(){return"Browser"},o.release=function(){return typeof navigator<"u"?navigator.appVersion:""},o.networkInterfaces=o.getNetworkInterfaces=function(){return{}},o.arch=function(){return"javascript"},o.platform=function(){return"browser"},o.tmpdir=o.tmpDir=function(){return"/tmp"},o.EOL=`
`,o.homedir=function(){return"/"}},function(i,o,s){var _=s(58),$=s(61).warn,et=o;et.version=s(138).version,et.transports=s(139),et.config=s(50),et.addColors=_.levels,et.format=_.format,et.createLogger=s(88),et.ExceptionHandler=s(89),et.RejectionHandler=s(93),et.Container=s(210),et.Transport=s(20),et.loggers=new et.Container;var tt=et.createLogger();Object.keys(et.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(function(j){return et[j]=function(){return tt[j].apply(tt,arguments)}}),Object.defineProperty(et,"level",{get:function(){return tt.level},set:function(j){tt.level=j}}),Object.defineProperty(et,"exceptions",{get:function(){return tt.exceptions}}),["exitOnError"].forEach(function(j){Object.defineProperty(et,j,{get:function(){return tt[j]},set:function(it){tt[j]=it}})}),Object.defineProperty(et,"default",{get:function(){return{exceptionHandlers:tt.exceptionHandlers,rejectionHandlers:tt.rejectionHandlers,transports:tt.transports}}}),$.deprecated(et,"setLevels"),$.forFunctions(et,"useFormat",["cli"]),$.forProperties(et,"useFormat",["padLevels","stripColors"]),$.forFunctions(et,"deprecated",["addRewriter","addFilter","clone","extend"]),$.forProperties(et,"deprecated",["emitErrs","levelLength"]),$.moved(et,"createLogger","Logger")},function(i,o,s){var _=s(13),$=s(142),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.handleRejections=it.handleRejections,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(st(),_t)throw _t;return}return this.log(gt,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(j[ht].callback(),_t)throw it(null),_t}else this.log(gt,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){},i.exports.LegacyTransportStream=s(148)},function(i,o,s){var _,$=typeof Reflect=="object"?Reflect:null,et=$&&typeof $.apply=="function"?$.apply:function(Et,Mt,Ft){return Function.prototype.apply.call(Et,Mt,Ft)};_=$&&typeof $.ownKeys=="function"?$.ownKeys:Object.getOwnPropertySymbols?function(Et){return Object.getOwnPropertyNames(Et).concat(Object.getOwnPropertySymbols(Et))}:function(Et){return Object.getOwnPropertyNames(Et)};var tt=Number.isNaN||function(Et){return Et!=Et};function j(){j.init.call(this)}i.exports=j,j.EventEmitter=j,j.prototype._events=void 0,j.prototype._eventsCount=0,j.prototype._maxListeners=void 0;var it=10;function st(Et){return Et._maxListeners===void 0?j.defaultMaxListeners:Et._maxListeners}function ht(Et,Mt,Ft,Rt){var Ot,pt,Lt,nn;if(typeof Ft!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ft);if((pt=Et._events)===void 0?(pt=Et._events=Object.create(null),Et._eventsCount=0):(pt.newListener!==void 0&&(Et.emit("newListener",Mt,Ft.listener?Ft.listener:Ft),pt=Et._events),Lt=pt[Mt]),Lt===void 0)Lt=pt[Mt]=Ft,++Et._eventsCount;else if(typeof Lt=="function"?Lt=pt[Mt]=Rt?[Ft,Lt]:[Lt,Ft]:Rt?Lt.unshift(Ft):Lt.push(Ft),(Ot=st(Et))>0&&Lt.length>Ot&&!Lt.warned){Lt.warned=!0;var on=new Error("Possible EventEmitter memory leak detected. "+Lt.length+" "+String(Mt)+" listeners added. Use emitter.setMaxListeners() to increase limit");on.name="MaxListenersExceededWarning",on.emitter=Et,on.type=Mt,on.count=Lt.length,nn=on,console&&console.warn&&console.warn(nn)}return Et}function _t(){for(var Et=[],Mt=0;Mt<arguments.length;Mt++)Et.push(arguments[Mt]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,et(this.listener,this.target,Et))}function gt(Et,Mt,Ft){var Rt={fired:!1,wrapFn:void 0,target:Et,type:Mt,listener:Ft},Ot=_t.bind(Rt);return Ot.listener=Ft,Rt.wrapFn=Ot,Ot}function ft(Et,Mt,Ft){var Rt=Et._events;if(Rt===void 0)return[];var Ot=Rt[Mt];return Ot===void 0?[]:typeof Ot=="function"?Ft?[Ot.listener||Ot]:[Ot]:Ft?function(pt){for(var Lt=new Array(pt.length),nn=0;nn<Lt.length;++nn)Lt[nn]=pt[nn].listener||pt[nn];return Lt}(Ot):yt(Ot,Ot.length)}function ut(Et){var Mt=this._events;if(Mt!==void 0){var Ft=Mt[Et];if(typeof Ft=="function")return 1;if(Ft!==void 0)return Ft.length}return 0}function yt(Et,Mt){for(var Ft=new Array(Mt),Rt=0;Rt<Mt;++Rt)Ft[Rt]=Et[Rt];return Ft}Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return it},set:function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Et+".");it=Et}}),j.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},j.prototype.setMaxListeners=function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Et+".");return this._maxListeners=Et,this},j.prototype.getMaxListeners=function(){return st(this)},j.prototype.emit=function(Et){for(var Mt=[],Ft=1;Ft<arguments.length;Ft++)Mt.push(arguments[Ft]);var Rt=Et==="error",Ot=this._events;if(Ot!==void 0)Rt=Rt&&Ot.error===void 0;else if(!Rt)return!1;if(Rt){var pt;if(Mt.length>0&&(pt=Mt[0]),pt instanceof Error)throw pt;var Lt=new Error("Unhandled error."+(pt?" ("+pt.message+")":""));throw Lt.context=pt,Lt}var nn=Ot[Et];if(nn===void 0)return!1;if(typeof nn=="function")et(nn,this,Mt);else{var on=nn.length,wt=yt(nn,on);for(Ft=0;Ft<on;++Ft)et(wt[Ft],this,Mt)}return!0},j.prototype.addListener=function(Et,Mt){return ht(this,Et,Mt,!1)},j.prototype.on=j.prototype.addListener,j.prototype.prependListener=function(Et,Mt){return ht(this,Et,Mt,!0)},j.prototype.once=function(Et,Mt){if(typeof Mt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Mt);return this.on(Et,gt(this,Et,Mt)),this},j.prototype.prependOnceListener=function(Et,Mt){if(typeof Mt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Mt);return this.prependListener(Et,gt(this,Et,Mt)),this},j.prototype.removeListener=function(Et,Mt){var Ft,Rt,Ot,pt,Lt;if(typeof Mt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Mt);if((Rt=this._events)===void 0)return this;if((Ft=Rt[Et])===void 0)return this;if(Ft===Mt||Ft.listener===Mt)--this._eventsCount==0?this._events=Object.create(null):(delete Rt[Et],Rt.removeListener&&this.emit("removeListener",Et,Ft.listener||Mt));else if(typeof Ft!="function"){for(Ot=-1,pt=Ft.length-1;pt>=0;pt--)if(Ft[pt]===Mt||Ft[pt].listener===Mt){Lt=Ft[pt].listener,Ot=pt;break}if(Ot<0)return this;Ot===0?Ft.shift():function(nn,on){for(;on+1<nn.length;on++)nn[on]=nn[on+1];nn.pop()}(Ft,Ot),Ft.length===1&&(Rt[Et]=Ft[0]),Rt.removeListener!==void 0&&this.emit("removeListener",Et,Lt||Mt)}return this},j.prototype.off=j.prototype.removeListener,j.prototype.removeAllListeners=function(Et){var Mt,Ft,Rt;if((Ft=this._events)===void 0)return this;if(Ft.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Ft[Et]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Ft[Et]),this;if(arguments.length===0){var Ot,pt=Object.keys(Ft);for(Rt=0;Rt<pt.length;++Rt)(Ot=pt[Rt])!=="removeListener"&&this.removeAllListeners(Ot);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Mt=Ft[Et])=="function")this.removeListener(Et,Mt);else if(Mt!==void 0)for(Rt=Mt.length-1;Rt>=0;Rt--)this.removeListener(Et,Mt[Rt]);return this},j.prototype.listeners=function(Et){return ft(this,Et,!0)},j.prototype.rawListeners=function(Et){return ft(this,Et,!1)},j.listenerCount=function(Et,Mt){return typeof Et.listenerCount=="function"?Et.listenerCount(Mt):ut.call(Et,Mt)},j.prototype.listenerCount=ut,j.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]}},function(i,o,s){var _=s(147).Buffer,$=_.isEncoding||function(ut){switch((ut=""+ut)&&ut.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function et(ut){var yt;switch(this.encoding=function(Et){var Mt=function(Ft){if(!Ft)return"utf8";for(var Rt;;)switch(Ft){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Ft;default:if(Rt)return;Ft=(""+Ft).toLowerCase(),Rt=!0}}(Et);if(typeof Mt!="string"&&(_.isEncoding===$||!$(Et)))throw new Error("Unknown encoding: "+Et);return Mt||Et}(ut),this.encoding){case"utf16le":this.text=it,this.end=st,yt=4;break;case"utf8":this.fillLast=j,yt=4;break;case"base64":this.text=ht,this.end=_t,yt=3;break;default:return this.write=gt,void(this.end=ft)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(yt)}function tt(ut){return ut<=127?0:ut>>5==6?2:ut>>4==14?3:ut>>3==30?4:ut>>6==2?-1:-2}function j(ut){var yt=this.lastTotal-this.lastNeed,Et=function(Mt,Ft,Rt){if((192&Ft[0])!=128)return Mt.lastNeed=0,"�";if(Mt.lastNeed>1&&Ft.length>1){if((192&Ft[1])!=128)return Mt.lastNeed=1,"�";if(Mt.lastNeed>2&&Ft.length>2&&(192&Ft[2])!=128)return Mt.lastNeed=2,"�"}}(this,ut);return Et!==void 0?Et:this.lastNeed<=ut.length?(ut.copy(this.lastChar,yt,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ut.copy(this.lastChar,yt,0,ut.length),void(this.lastNeed-=ut.length))}function it(ut,yt){if((ut.length-yt)%2==0){var Et=ut.toString("utf16le",yt);if(Et){var Mt=Et.charCodeAt(Et.length-1);if(Mt>=55296&&Mt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ut[ut.length-2],this.lastChar[1]=ut[ut.length-1],Et.slice(0,-1)}return Et}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ut[ut.length-1],ut.toString("utf16le",yt,ut.length-1)}function st(ut){var yt=ut&&ut.length?this.write(ut):"";if(this.lastNeed){var Et=this.lastTotal-this.lastNeed;return yt+this.lastChar.toString("utf16le",0,Et)}return yt}function ht(ut,yt){var Et=(ut.length-yt)%3;return Et===0?ut.toString("base64",yt):(this.lastNeed=3-Et,this.lastTotal=3,Et===1?this.lastChar[0]=ut[ut.length-1]:(this.lastChar[0]=ut[ut.length-2],this.lastChar[1]=ut[ut.length-1]),ut.toString("base64",yt,ut.length-Et))}function _t(ut){var yt=ut&&ut.length?this.write(ut):"";return this.lastNeed?yt+this.lastChar.toString("base64",0,3-this.lastNeed):yt}function gt(ut){return ut.toString(this.encoding)}function ft(ut){return ut&&ut.length?this.write(ut):""}o.StringDecoder=et,et.prototype.write=function(ut){if(ut.length===0)return"";var yt,Et;if(this.lastNeed){if((yt=this.fillLast(ut))===void 0)return"";Et=this.lastNeed,this.lastNeed=0}else Et=0;return Et<ut.length?yt?yt+this.text(ut,Et):this.text(ut,Et):yt||""},et.prototype.end=function(ut){var yt=ut&&ut.length?this.write(ut):"";return this.lastNeed?yt+"�":yt},et.prototype.text=function(ut,yt){var Et=function(Ft,Rt,Ot){var pt=Rt.length-1;if(pt<Ot)return 0;var Lt=tt(Rt[pt]);return Lt>=0?(Lt>0&&(Ft.lastNeed=Lt-1),Lt):--pt<Ot||Lt===-2?0:(Lt=tt(Rt[pt]))>=0?(Lt>0&&(Ft.lastNeed=Lt-2),Lt):--pt<Ot||Lt===-2?0:(Lt=tt(Rt[pt]))>=0?(Lt>0&&(Lt===2?Lt=0:Ft.lastNeed=Lt-3),Lt):0}(this,ut,yt);if(!this.lastNeed)return ut.toString("utf8",yt);this.lastTotal=Et;var Mt=ut.length-(Et-this.lastNeed);return ut.copy(this.lastChar,0,Mt),ut.toString("utf8",yt,Mt)},et.prototype.fillLast=function(ut){if(this.lastNeed<=ut.length)return ut.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ut.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ut.length),this.lastNeed-=ut.length}},function(i,o,s){var _=s(16),$=Object.keys||function(ut){var yt=[];for(var Et in ut)yt.push(Et);return yt};i.exports=_t;var et=s(17);et.inherits=s(7);var tt=s(69),j=s(48);et.inherits(_t,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];_t.prototype[ht]||(_t.prototype[ht]=j.prototype[ht])}function _t(ut){if(!(this instanceof _t))return new _t(ut);tt.call(this,ut),j.call(this,ut),ut&&ut.readable===!1&&(this.readable=!1),ut&&ut.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ut&&ut.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",gt)}function gt(){this.allowHalfOpen||this._writableState.ended||_.nextTick(ft,this)}function ft(ut){ut.end()}Object.defineProperty(_t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_t.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ut){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ut,this._writableState.destroyed=ut)}}),_t.prototype._destroy=function(ut,yt){this.push(null),this.end(),_.nextTick(yt,ut)}},function(i,o,s){(function(_){function $(zt){var ln=0;return function(){return ln<zt.length?{done:!1,value:zt[ln++]}:{done:!0}}}var et=typeof Object.defineProperties=="function"?Object.defineProperty:function(zt,ln,wn){zt!=Array.prototype&&zt!=Object.prototype&&(zt[ln]=wn.value)},tt=function(zt){zt=[typeof window=="object"&&window,typeof self=="object"&&self,typeof _=="object"&&_,zt];for(var ln=0;ln<zt.length;++ln){var wn=zt[ln];if(wn&&wn.Math==Math)return wn}throw Error("Cannot find global object")}(this);function j(zt,ln){if(ln){var wn=tt;zt=zt.split(".");for(var Pn=0;Pn<zt.length-1;Pn++){var zn=zt[Pn];zn in wn||(wn[zn]={}),wn=wn[zn]}(ln=ln(Pn=wn[zt=zt[zt.length-1]]))!=Pn&&ln!=null&&et(wn,zt,{configurable:!0,writable:!0,value:ln})}}function it(zt){var ln=typeof Symbol<"u"&&Symbol.iterator&&zt[Symbol.iterator];return ln?ln.call(zt):{next:$(zt)}}j("Object.is",function(zt){return zt||function(ln,wn){return ln===wn?ln!==0||1/ln==1/wn:ln!=ln&&wn!=wn}}),j("Array.prototype.includes",function(zt){return zt||function(ln,wn){var Pn=this;Pn instanceof String&&(Pn=String(Pn));var zn=Pn.length;for(0>(wn=wn||0)&&(wn=Math.max(wn+zn,0));wn<zn;wn++){var sr=Pn[wn];if(sr===ln||Object.is(sr,ln))return!0}return!1}}),j("Promise",function(zt){function ln(jn){this.b=0,this.c=void 0,this.a=[];var Jn=this.f();try{jn(Jn.resolve,Jn.reject)}catch(Tr){Jn.reject(Tr)}}function wn(){this.a=null}function Pn(jn){return jn instanceof ln?jn:new ln(function(Jn){Jn(jn)})}if(zt)return zt;wn.prototype.b=function(jn){if(this.a==null){this.a=[];var Jn=this;this.c(function(){Jn.g()})}this.a.push(jn)};var zn=tt.setTimeout;wn.prototype.c=function(jn){zn(jn,0)},wn.prototype.g=function(){for(;this.a&&this.a.length;){var jn=this.a;this.a=[];for(var Jn=0;Jn<jn.length;++Jn){var Tr=jn[Jn];jn[Jn]=null;try{Tr()}catch(Cr){this.f(Cr)}}}this.a=null},wn.prototype.f=function(jn){this.c(function(){throw jn})},ln.prototype.f=function(){function jn(Cr){return function(Vr){Tr||(Tr=!0,Cr.call(Jn,Vr))}}var Jn=this,Tr=!1;return{resolve:jn(this.m),reject:jn(this.g)}},ln.prototype.m=function(jn){if(jn===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(jn instanceof ln)this.o(jn);else{e:switch(typeof jn){case"object":var Jn=jn!=null;break e;case"function":Jn=!0;break e;default:Jn=!1}Jn?this.l(jn):this.h(jn)}},ln.prototype.l=function(jn){var Jn=void 0;try{Jn=jn.then}catch(Tr){return void this.g(Tr)}typeof Jn=="function"?this.u(Jn,jn):this.h(jn)},ln.prototype.g=function(jn){this.i(2,jn)},ln.prototype.h=function(jn){this.i(1,jn)},ln.prototype.i=function(jn,Jn){if(this.b!=0)throw Error("Cannot settle("+jn+", "+Jn+"): Promise already settled in state"+this.b);this.b=jn,this.c=Jn,this.j()},ln.prototype.j=function(){if(this.a!=null){for(var jn=0;jn<this.a.length;++jn)sr.b(this.a[jn]);this.a=null}};var sr=new wn;return ln.prototype.o=function(jn){var Jn=this.f();jn.w(Jn.resolve,Jn.reject)},ln.prototype.u=function(jn,Jn){var Tr=this.f();try{jn.call(Jn,Tr.resolve,Tr.reject)}catch(Cr){Tr.reject(Cr)}},ln.prototype.then=function(jn,Jn){function Tr(go,To){return typeof go=="function"?function($o){try{Cr(go($o))}catch(Xo){Vr(Xo)}}:To}var Cr,Vr,ko=new ln(function(go,To){Cr=go,Vr=To});return this.w(Tr(jn,Cr),Tr(Jn,Vr)),ko},ln.prototype.catch=function(jn){return this.then(void 0,jn)},ln.prototype.w=function(jn,Jn){function Tr(){switch(Cr.b){case 1:jn(Cr.c);break;case 2:Jn(Cr.c);break;default:throw Error("Unexpected state: "+Cr.b)}}var Cr=this;this.a==null?sr.b(Tr):this.a.push(Tr)},ln.resolve=Pn,ln.reject=function(jn){return new ln(function(Jn,Tr){Tr(jn)})},ln.race=function(jn){return new ln(function(Jn,Tr){for(var Cr=it(jn),Vr=Cr.next();!Vr.done;Vr=Cr.next())Pn(Vr.value).w(Jn,Tr)})},ln.all=function(jn){var Jn=it(jn),Tr=Jn.next();return Tr.done?Pn([]):new ln(function(Cr,Vr){function ko($o){return function(Xo){go[$o]=Xo,--To==0&&Cr(go)}}var go=[],To=0;do go.push(void 0),To++,Pn(Tr.value).w(ko(go.length-1),Vr),Tr=Jn.next();while(!Tr.done)})},ln});var st=st||{},ht=this||self;function _t(zt,ln){zt=zt.split("."),ln=ln||ht;for(var wn=0;wn<zt.length;wn++)if((ln=ln[zt[wn]])==null)return null;return ln}function gt(){}function ft(zt){var ln=typeof zt;if(ln=="object"){if(!zt)return"null";if(zt instanceof Array)return"array";if(zt instanceof Object)return ln;var wn=Object.prototype.toString.call(zt);if(wn=="[object Window]")return"object";if(wn=="[object Array]"||typeof zt.length=="number"&&zt.splice!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("splice"))return"array";if(wn=="[object Function]"||zt.call!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("call"))return"function"}else if(ln=="function"&&zt.call===void 0)return"object";return ln}function ut(zt){var ln=typeof zt;return ln=="object"&&zt!=null||ln=="function"}function yt(zt,ln,wn){return zt.call.apply(zt.bind,arguments)}function Et(zt,ln,wn){if(!zt)throw Error();if(2<arguments.length){var Pn=Array.prototype.slice.call(arguments,2);return function(){var zn=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(zn,Pn),zt.apply(ln,zn)}}return function(){return zt.apply(ln,arguments)}}function Mt(zt,ln,wn){return(Mt=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yt:Et).apply(null,arguments)}function Ft(zt,ln){function wn(){}wn.prototype=ln.prototype,zt.S=ln.prototype,zt.prototype=new wn,zt.prototype.constructor=zt}function Rt(){this.a={}}function Ot(zt,ln,wn,Pn){this.f=zt,this.c=ln,this.b=wn,this.a=Pn}function pt(zt,ln,wn,Pn){wn=wn===void 0?{}:wn,this.c=zt,this.a=wn,this.b=ln,this.f=Pn===void 0?null:Pn}function Lt(zt,ln,wn,Pn,zn,sr){this.name=zt,this.a=zn,this.b=sr}function nn(zt,ln,wn){wn=wn===void 0?{}:wn;var Pn=Pn===void 0?new Rt:Pn;return new Ot(ln,zt,wn,Pn)}function on(zt,ln,wn,Pn){return Pn instanceof Lt?Pn:new Lt(zt,wn,Pn.b||ln.constructor,Pn.f,Pn.a,Pn.c)}function wt(zt){this.a=zt}function xt(zt){switch(zt){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}}function Nt(zt){if(Error.captureStackTrace)Error.captureStackTrace(this,Nt);else{var ln=Error().stack;ln&&(this.stack=ln)}zt&&(this.message=String(zt))}function Tt(zt,ln){for(var wn="",Pn=(zt=zt.split("%s")).length-1,zn=0;zn<Pn;zn++)wn+=zt[zn]+(zn<ln.length?ln[zn]:"%s");Nt.call(this,wn+zt[Pn])}function Vt(){this.j=null,this.i=[],this.l=0,this.b=Xt,this.f=this.a=this.h=0,this.c=null,this.g=0}Rt.prototype.get=function(zt){return this.a[zt]},Rt.prototype.f=function(){return Object.keys(this.a)},Ot.prototype.getRequestMessage=function(){return this.f},Ot.prototype.getMethodDescriptor=function(){return this.c},Ot.prototype.getMetadata=function(){return this.b},Ot.prototype.getCallOptions=function(){return this.a},pt.prototype.getResponseMessage=function(){return this.c},pt.prototype.getMetadata=function(){return this.a},pt.prototype.getMethodDescriptor=function(){return this.b},pt.prototype.getStatus=function(){return this.f},wt.prototype.on=function(zt,ln){return zt=="data"||zt=="error"?this:this.a.on(zt,ln)},wt.prototype.removeListener=function(zt,ln){return this.a.removeListener(zt,ln)},wt.prototype.cancel=function(){this.a.cancel()},Ft(Nt,Error),Nt.prototype.name="CustomError",Ft(Tt,Nt),Tt.prototype.name="AssertionError";var Xt=0,Gt=1,Ut=2,Ht=3,qt=0,Pt=128;function St(zt,ln,wn,Pn){throw zt.b=Ht,zt.j="The stream is broken @"+zt.l+"/"+wn+". Error: "+Pn+`. With input:
`+ln,Error(zt.j)}var Zt=Array.prototype.indexOf?function(zt,ln){return Array.prototype.indexOf.call(zt,ln,void 0)}:function(zt,ln){if(typeof zt=="string")return typeof ln!="string"||ln.length!=1?-1:zt.indexOf(ln,0);for(var wn=0;wn<zt.length;wn++)if(wn in zt&&zt[wn]===ln)return wn;return-1},tn,mn=String.prototype.trim?function(zt){return zt.trim()}:function(zt){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(zt)[1]};function yn(zt,ln){return zt.indexOf(ln)!=-1}function vn(zt,ln){return zt<ln?-1:zt>ln?1:0}e:{var un=ht.navigator;if(un){var rn=un.userAgent;if(rn){tn=rn;break e}}tn=""}var It="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dt(zt){var ln=1;zt=zt.split(":");for(var wn=[];0<ln&&zt.length;)wn.push(zt.shift()),ln--;return zt.length&&wn.push(zt.join(":")),wn}function Kt(zt){return Kt[" "](zt),zt}Kt[" "]=gt;var gn,hn,xn=yn(tn,"Opera"),Mn=yn(tn,"Trident")||yn(tn,"MSIE"),qn=yn(tn,"Edge"),Ir=yn(tn,"Gecko")&&!(yn(tn.toLowerCase(),"webkit")&&!yn(tn,"Edge"))&&!(yn(tn,"Trident")||yn(tn,"MSIE"))&&!yn(tn,"Edge"),_i=yn(tn.toLowerCase(),"webkit")&&!yn(tn,"Edge");function Ur(){var zt=ht.document;return zt?zt.documentMode:void 0}e:{var fo="",Gr=(hn=tn,Ir?/rv:([^\);]+)(\)|;)/.exec(hn):qn?/Edge\/([\d\.]+)/.exec(hn):Mn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hn):_i?/WebKit\/(\S+)/.exec(hn):xn?/(?:Version)[ \/]?(\S+)/.exec(hn):void 0);if(Gr&&(fo=Gr?Gr[1]:""),Mn){var Yr=Ur();if(Yr!=null&&Yr>parseFloat(fo)){gn=String(Yr);break e}}gn=fo}var to,Ro={};function Mo(zt){return function(ln,wn){var Pn=Ro;return Object.prototype.hasOwnProperty.call(Pn,ln)?Pn[ln]:Pn[ln]=wn(ln)}(zt,function(){for(var ln=0,wn=mn(String(gn)).split("."),Pn=mn(String(zt)).split("."),zn=Math.max(wn.length,Pn.length),sr=0;ln==0&&sr<zn;sr++){var jn=wn[sr]||"",Jn=Pn[sr]||"";do{if(jn=/(\d*)(\D*)(.*)/.exec(jn)||["","","",""],Jn=/(\d*)(\D*)(.*)/.exec(Jn)||["","","",""],jn[0].length==0&&Jn[0].length==0)break;ln=vn(jn[1].length==0?0:parseInt(jn[1],10),Jn[1].length==0?0:parseInt(Jn[1],10))||vn(jn[2].length==0,Jn[2].length==0)||vn(jn[2],Jn[2]),jn=jn[3],Jn=Jn[3]}while(ln==0)}return 0<=ln})}if(ht.document&&Mn){var Vo=Ur();to=Vo||parseInt(gn,10)||void 0}else to=void 0;var Qo=to;function Io(){this.F=this.F}Io.prototype.F=!1;var as,Bs=Object.freeze||function(zt){return zt};(as=!Mn)||(as=9<=Number(Qo));var cs=as,Zl=Mn&&!Mo("9"),Vl=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var zt=!1,ln=Object.defineProperty({},"passive",{get:function(){zt=!0}});try{ht.addEventListener("test",gt,ln),ht.removeEventListener("test",gt,ln)}catch{}return zt}();function zs(zt,ln){this.type=zt,this.a=this.target=ln,this.defaultPrevented=!1}function vs(zt,ln){if(zs.call(this,zt?zt.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,zt){var wn=this.type=zt.type,Pn=zt.changedTouches&&zt.changedTouches.length?zt.changedTouches[0]:null;if(this.target=zt.target||zt.srcElement,this.a=ln,ln=zt.relatedTarget){if(Ir){e:{try{Kt(ln.nodeName);var zn=!0;break e}catch{}zn=!1}zn||(ln=null)}}else wn=="mouseover"?ln=zt.fromElement:wn=="mouseout"&&(ln=zt.toElement);this.relatedTarget=ln,Pn?(this.clientX=Pn.clientX!==void 0?Pn.clientX:Pn.pageX,this.clientY=Pn.clientY!==void 0?Pn.clientY:Pn.pageY,this.screenX=Pn.screenX||0,this.screenY=Pn.screenY||0):(this.clientX=zt.clientX!==void 0?zt.clientX:zt.pageX,this.clientY=zt.clientY!==void 0?zt.clientY:zt.pageY,this.screenX=zt.screenX||0,this.screenY=zt.screenY||0),this.button=zt.button,this.key=zt.key||"",this.ctrlKey=zt.ctrlKey,this.altKey=zt.altKey,this.shiftKey=zt.shiftKey,this.metaKey=zt.metaKey,this.pointerId=zt.pointerId||0,this.pointerType=typeof zt.pointerType=="string"?zt.pointerType:uu[zt.pointerType]||"",this.c=zt,zt.defaultPrevented&&this.b()}}zs.prototype.b=function(){this.defaultPrevented=!0},Ft(vs,zs);var uu=Bs({2:"touch",3:"pen",4:"mouse"});vs.prototype.b=function(){vs.S.b.call(this);var zt=this.c;if(zt.preventDefault)zt.preventDefault();else if(zt.returnValue=!1,Zl)try{(zt.ctrlKey||112<=zt.keyCode&&123>=zt.keyCode)&&(zt.keyCode=-1)}catch{}};var No="closure_listenable_"+(1e6*Math.random()|0),tu=0;function cr(zt,ln,wn,Pn,zn){this.listener=zt,this.proxy=null,this.src=ln,this.type=wn,this.capture=!!Pn,this.A=zn,this.key=++tu,this.s=this.v=!1}function $t(zt){zt.s=!0,zt.listener=null,zt.proxy=null,zt.src=null,zt.A=null}function en(zt){this.src=zt,this.a={},this.b=0}function dn(zt,ln){var wn=ln.type;if(wn in zt.a){var Pn,zn=zt.a[wn],sr=Zt(zn,ln);(Pn=0<=sr)&&Array.prototype.splice.call(zn,sr,1),Pn&&($t(ln),zt.a[wn].length==0&&(delete zt.a[wn],zt.b--))}}function Cn(zt,ln,wn,Pn){for(var zn=0;zn<zt.length;++zn){var sr=zt[zn];if(!sr.s&&sr.listener==ln&&sr.capture==!!wn&&sr.A==Pn)return zn}return-1}en.prototype.add=function(zt,ln,wn,Pn,zn){var sr=zt.toString();(zt=this.a[sr])||(zt=this.a[sr]=[],this.b++);var jn=Cn(zt,ln,Pn,zn);return-1<jn?(ln=zt[jn],wn||(ln.v=!1)):((ln=new cr(ln,this.src,sr,!!Pn,zn)).v=wn,zt.push(ln)),ln};var On="closure_lm_"+(1e6*Math.random()|0),or={};function ar(zt,ln,wn,Pn,zn){if(Pn&&Pn.once)(function jn(Jn,Tr,Cr,Vr,ko){if(Array.isArray(Tr))for(var go=0;go<Tr.length;go++)jn(Jn,Tr[go],Cr,Vr,ko);else Cr=Qn(Cr),Jn&&Jn[No]?Jn.f.add(String(Tr),Cr,!0,ut(Vr)?!!Vr.capture:!!Vr,ko):nr(Jn,Tr,Cr,!0,Vr,ko)})(zt,ln,wn,Pn,zn);else if(Array.isArray(ln))for(var sr=0;sr<ln.length;sr++)ar(zt,ln[sr],wn,Pn,zn);else wn=Qn(wn),zt&&zt[No]?zt.f.add(String(ln),wn,!1,ut(Pn)?!!Pn.capture:!!Pn,zn):nr(zt,ln,wn,!1,Pn,zn)}function nr(zt,ln,wn,Pn,zn,sr){if(!ln)throw Error("Invalid event type");var jn=ut(zn)?!!zn.capture:!!zn,Jn=Rn(zt);if(Jn||(zt[On]=Jn=new en(zt)),!(wn=Jn.add(ln,wn,Pn,jn,sr)).proxy)if(Pn=function(){var Tr=En,Cr=cs?function(Vr){return Tr.call(Cr.src,Cr.listener,Vr)}:function(Vr){if(!(Vr=Tr.call(Cr.src,Cr.listener,Vr)))return Vr};return Cr}(),wn.proxy=Pn,Pn.src=zt,Pn.listener=wn,zt.addEventListener)Vl||(zn=jn),zn===void 0&&(zn=!1),zt.addEventListener(ln.toString(),Pn,zn);else if(zt.attachEvent)zt.attachEvent(Fn(ln.toString()),Pn);else{if(!zt.addListener||!zt.removeListener)throw Error("addEventListener and attachEvent are unavailable.");zt.addListener(Pn)}}function $n(zt){if(typeof zt!="number"&&zt&&!zt.s){var ln=zt.src;if(ln&&ln[No])dn(ln.f,zt);else{var wn=zt.type,Pn=zt.proxy;ln.removeEventListener?ln.removeEventListener(wn,Pn,zt.capture):ln.detachEvent?ln.detachEvent(Fn(wn),Pn):ln.addListener&&ln.removeListener&&ln.removeListener(Pn),(wn=Rn(ln))?(dn(wn,zt),wn.b==0&&(wn.src=null,ln[On]=null)):$t(zt)}}}function Fn(zt){return zt in or?or[zt]:or[zt]="on"+zt}function ro(zt,ln,wn,Pn){var zn=!0;if((zt=Rn(zt))&&(ln=zt.a[ln.toString()]))for(ln=ln.concat(),zt=0;zt<ln.length;zt++){var sr=ln[zt];sr&&sr.capture==wn&&!sr.s&&(sr=Ln(sr,Pn),zn=zn&&sr!==!1)}return zn}function Ln(zt,ln){var wn=zt.listener,Pn=zt.A||zt.src;return zt.v&&$n(zt),wn.call(Pn,ln)}function En(zt,ln){if(zt.s)return!0;if(!cs){var wn=ln||_t("window.event");ln=new vs(wn,this);var Pn=!0;if(!(0>wn.keyCode||wn.returnValue!=null)){e:{var zn=!1;if(wn.keyCode==0)try{wn.keyCode=-1;break e}catch{zn=!0}(zn||wn.returnValue==null)&&(wn.returnValue=!0)}for(wn=[],zn=ln.a;zn;zn=zn.parentNode)wn.push(zn);for(zt=zt.type,zn=wn.length-1;0<=zn;zn--){ln.a=wn[zn];var sr=ro(wn[zn],zt,!0,ln);Pn=Pn&&sr}for(zn=0;zn<wn.length;zn++)ln.a=wn[zn],sr=ro(wn[zn],zt,!1,ln),Pn=Pn&&sr}return Pn}return Ln(zt,new vs(ln,this))}function Rn(zt){return(zt=zt[On])instanceof en?zt:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qn(zt){return ft(zt)=="function"?zt:(zt[Hn]||(zt[Hn]=function(ln){return zt.handleEvent(ln)}),zt[Hn])}function lr(){Io.call(this),this.f=new en(this),this.N=this}function ur(zt,ln){zt=zt.N;var wn=ln.type||ln;if(typeof ln=="string")ln=new zs(ln,zt);else if(ln instanceof zs)ln.target=ln.target||zt;else{var Pn=ln;(function(zn,sr){for(var jn,Jn,Tr=1;Tr<arguments.length;Tr++){for(jn in Jn=arguments[Tr])zn[jn]=Jn[jn];for(var Cr=0;Cr<It.length;Cr++)jn=It[Cr],Object.prototype.hasOwnProperty.call(Jn,jn)&&(zn[jn]=Jn[jn])}})(ln=new zs(wn,zt),Pn)}mr(zt=ln.a=zt,wn,!0,ln),mr(zt,wn,!1,ln)}function mr(zt,ln,wn,Pn){if(ln=zt.f.a[String(ln)]){ln=ln.concat();for(var zn=!0,sr=0;sr<ln.length;++sr){var jn=ln[sr];if(jn&&!jn.s&&jn.capture==wn){var Jn=jn.listener,Tr=jn.A||jn.src;jn.v&&dn(zt.f,jn),zn=Jn.call(Tr,Pn)!==!1&&zn}}}}function hr(zt,ln,wn){if(ft(zt)=="function")wn&&(zt=Mt(zt,wn));else{if(!zt||typeof zt.handleEvent!="function")throw Error("Invalid listener argument");zt=Mt(zt.handleEvent,zt)}return 2147483647<Number(ln)?-1:ht.setTimeout(zt,ln||0)}function wr(zt,ln,wn){this.reset(zt,ln,wn,void 0,void 0)}Ft(lr,Io),lr.prototype[No]=!0,lr.prototype.addEventListener=function(zt,ln,wn,Pn){ar(this,zt,ln,wn,Pn)},lr.prototype.removeEventListener=function(zt,ln,wn,Pn){(function zn(sr,jn,Jn,Tr,Cr){if(Array.isArray(jn))for(var Vr=0;Vr<jn.length;Vr++)zn(sr,jn[Vr],Jn,Tr,Cr);else Tr=ut(Tr)?!!Tr.capture:!!Tr,Jn=Qn(Jn),sr&&sr[No]?(sr=sr.f,(jn=String(jn).toString())in sr.a&&-1<(Jn=Cn(Vr=sr.a[jn],Jn,Tr,Cr))&&($t(Vr[Jn]),Array.prototype.splice.call(Vr,Jn,1),Vr.length==0&&(delete sr.a[jn],sr.b--))):sr&&(sr=Rn(sr))&&(jn=sr.a[jn.toString()],sr=-1,jn&&(sr=Cn(jn,Jn,Tr,Cr)),(Jn=-1<sr?jn[sr]:null)&&$n(Jn))})(this,zt,ln,wn,Pn)},wr.prototype.a=null;function Br(zt){this.f=zt,this.b=this.c=this.a=null}function Qr(zt,ln){this.name=zt,this.value=ln}wr.prototype.reset=function(zt,ln,wn,Pn,zn){delete this.a},Qr.prototype.toString=function(){return this.name};var Hr=new Qr("SEVERE",1e3),So=new Qr("CONFIG",700),Eo=new Qr("FINE",500);function Oo(zt){return zt.c?zt.c:zt.a?Oo(zt.a):(function(ln,wn){throw new Tt("Failure"+(ln?": "+ln:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)}Br.prototype.log=function(zt,ln,wn){if(zt.value>=Oo(this).value)for(ft(ln)=="function"&&(ln=ln()),zt=new wr(zt,String(ln),this.f),wn&&(zt.a=wn),wn=this;wn;)wn=wn.a};var Lo,Ko={},fs=null;function vo(zt,ln){zt&&zt.log(Eo,ln,void 0)}function As(){}function bs(zt){var ln;return(ln=zt.a)||(ln={},Nr(zt)&&(ln[0]=!0,ln[1]=!0),ln=zt.a=ln),ln}function xu(){}function cu(zt){return(zt=Nr(zt))?new ActiveXObject(zt):new XMLHttpRequest}function Nr(zt){if(!zt.b&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var ln=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],wn=0;wn<ln.length;wn++){var Pn=ln[wn];try{return new ActiveXObject(Pn),zt.b=Pn}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return zt.b}function ga(zt,ln){this.b={},this.a=[],this.c=0;var wn=arguments.length;if(1<wn){if(wn%2)throw Error("Uneven number of arguments");for(var Pn=0;Pn<wn;Pn+=2)this.set(arguments[Pn],arguments[Pn+1])}else zt&&hu(this,zt)}function Vs(zt){if(zt.c!=zt.a.length){for(var ln=0,wn=0;ln<zt.a.length;){var Pn=zt.a[ln];nu(zt.b,Pn)&&(zt.a[wn++]=Pn),ln++}zt.a.length=wn}if(zt.c!=zt.a.length){var zn={};for(wn=ln=0;ln<zt.a.length;)nu(zn,Pn=zt.a[ln])||(zt.a[wn++]=Pn,zn[Pn]=1),ln++;zt.a.length=wn}}function hu(zt,ln){if(ln instanceof ga)for(var wn=ln.f(),Pn=0;Pn<wn.length;Pn++)zt.set(wn[Pn],ln.get(wn[Pn]));else for(wn in ln)zt.set(wn,ln[wn])}function nu(zt,ln){return Object.prototype.hasOwnProperty.call(zt,ln)}As.prototype.a=null,Ft(xu,As),Lo=new xu,ga.prototype.f=function(){return Vs(this),this.a.concat()},ga.prototype.get=function(zt,ln){return nu(this.b,zt)?this.b[zt]:ln},ga.prototype.set=function(zt,ln){nu(this.b,zt)||(this.c++,this.a.push(zt)),this.b[zt]=ln},ga.prototype.forEach=function(zt,ln){for(var wn=this.f(),Pn=0;Pn<wn.length;Pn++){var zn=wn[Pn],sr=this.get(zn);zt.call(ln,sr,zn,this)}};var Au=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _l(zt){lr.call(this),this.headers=new ga,this.D=zt||null,this.c=!1,this.C=this.a=null,this.J=this.o="",this.g=0,this.i="",this.h=this.I=this.m=this.G=!1,this.l=0,this.u=null,this.j=nm,this.B=this.H=!1}Ft(_l,lr);var nm="",tp=_l.prototype,po=function zt(ln){var wn;if(fs||(fs=new Br(""),Ko[""]=fs,fs.c=So),!(wn=Ko[ln])){wn=new Br(ln);var Pn=ln.lastIndexOf("."),zn=ln.substr(Pn+1);(Pn=zt(ln.substr(0,Pn))).b||(Pn.b={}),Pn.b[zn]=wn,wn.a=Pn,Ko[ln]=wn}return wn}("goog.net.XhrIo");tp.b=po;var ns=/^https?$/i,is=["POST","PUT"];function Eu(zt,ln,wn){if(zt.a)throw Error("[goog.net.XhrIo] Object is active with another request="+zt.o+"; newUri="+ln);zt.o=ln,zt.i="",zt.g=0,zt.J="POST",zt.G=!1,zt.c=!0,zt.a=zt.D?cu(zt.D):cu(Lo),zt.C=zt.D?bs(zt.D):bs(Lo),zt.a.onreadystatechange=Mt(zt.K,zt);try{vo(zt.b,js(zt,"Opening Xhr")),zt.I=!0,zt.a.open("POST",String(ln),!0),zt.I=!1}catch(sr){return vo(zt.b,js(zt,"Error opening Xhr: "+sr.message)),void Jo(zt,sr)}ln=wn||"";var Pn=function(sr){e:{for(var jn=np,Jn=sr.length,Tr=typeof sr=="string"?sr.split(""):sr,Cr=0;Cr<Jn;Cr++)if(Cr in Tr&&jn.call(void 0,Tr[Cr],Cr,sr)){jn=Cr;break e}jn=-1}return 0>jn?null:typeof sr=="string"?sr.charAt(jn):sr[jn]}((wn=new ga(zt.headers)).f()),zn=ht.FormData&&ln instanceof ht.FormData;!(0<=Zt(is,"POST"))||Pn||zn||wn.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),wn.forEach(function(sr,jn){this.a.setRequestHeader(jn,sr)},zt),zt.j&&(zt.a.responseType=zt.j),"withCredentials"in zt.a&&zt.a.withCredentials!==zt.H&&(zt.a.withCredentials=zt.H);try{Ml(zt),0<zt.l&&(zt.B=function(sr){return Mn&&Mo(9)&&typeof sr.timeout=="number"&&sr.ontimeout!==void 0}(zt.a),vo(zt.b,js(zt,"Will abort after "+zt.l+"ms if incomplete, xhr2 "+zt.B)),zt.B?(zt.a.timeout=zt.l,zt.a.ontimeout=Mt(zt.L,zt)):zt.u=hr(zt.L,zt.l,zt)),vo(zt.b,js(zt,"Sending request")),zt.m=!0,zt.a.send(ln),zt.m=!1}catch(sr){vo(zt.b,js(zt,"Send error: "+sr.message)),Jo(zt,sr)}}function np(zt){return zt.toLowerCase()=="content-type"}function Jo(zt,ln){zt.c=!1,zt.a&&(zt.h=!0,zt.a.abort(),zt.h=!1),zt.i=ln,zt.g=5,Uu(zt),fu(zt)}function Uu(zt){zt.G||(zt.G=!0,ur(zt,"complete"),ur(zt,"error"))}function zu(zt){if(zt.c&&st!==void 0){if(zt.C[1]&&ds(zt)==4&&zt.getStatus()==2)vo(zt.b,js(zt,"Local request error detected and ignored"));else if(zt.m&&ds(zt)==4)hr(zt.K,0,zt);else if(ur(zt,"readystatechange"),ds(zt)==4){vo(zt.b,js(zt,"Request complete")),zt.c=!1;try{var ln,wn=zt.getStatus();e:switch(wn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Pn=!0;break e;default:Pn=!1}if(!(ln=Pn)){var zn;if(zn=wn===0){var sr=String(zt.o).match(Au)[1]||null;if(!sr&&ht.self&&ht.self.location){var jn=ht.self.location.protocol;sr=jn.substr(0,jn.length-1)}zn=!ns.test(sr?sr.toLowerCase():"")}ln=zn}if(ln)ur(zt,"complete"),ur(zt,"success");else{zt.g=6;try{var Jn=2<ds(zt)?zt.a.statusText:""}catch(Tr){vo(zt.b,"Can not get status: "+Tr.message),Jn=""}zt.i=Jn+" ["+zt.getStatus()+"]",Uu(zt)}}finally{fu(zt)}}}}function fu(zt){if(zt.a){Ml(zt);var ln=zt.a,wn=zt.C[0]?gt:null;zt.a=null,zt.C=null,ur(zt,"ready");try{ln.onreadystatechange=wn}catch(Pn){(zt=zt.b)&&zt.log(Hr,"Problem encountered resetting onreadystatechange: "+Pn.message,void 0)}}}function Ml(zt){zt.a&&zt.B&&(zt.a.ontimeout=null),zt.u&&(ht.clearTimeout(zt.u),zt.u=null)}function ds(zt){return zt.a?zt.a.readyState:0}function Cm(zt,ln){if(zt.a&&ds(zt)==4)return(zt=zt.a.getResponseHeader(ln))===null?void 0:zt}function js(zt,ln){return ln+" ["+zt.J+" "+zt.o+" "+zt.getStatus()+"]"}_l.prototype.L=function(){st!==void 0&&this.a&&(this.i="Timed out after "+this.l+"ms, aborting",this.g=8,vo(this.b,js(this,this.i)),ur(this,"timeout"),this.abort(8))},_l.prototype.abort=function(zt){this.a&&this.c&&(vo(this.b,js(this,"Aborting")),this.c=!1,this.h=!0,this.a.abort(),this.h=!1,this.g=zt||7,ur(this,"complete"),ur(this,"abort"),fu(this))},_l.prototype.K=function(){this.F||(this.I||this.m||this.h?zu(this):this.O())},_l.prototype.O=function(){zu(this)},_l.prototype.getStatus=function(){try{return 2<ds(this)?this.a.status:-1}catch{return-1}};var Vu={},Ks=null;function Wu(zt){var ln=zt.length,wn=3*ln/4;wn%3?wn=Math.floor(wn):yn("=.",zt[ln-1])&&(wn=yn("=.",zt[ln-2])?wn-2:wn-1);var Pn=new Uint8Array(wn),zn=0;return function(sr,jn){function Jn(To){for(;Tr<sr.length;){var $o=sr.charAt(Tr++),Xo=Ks[$o];if(Xo!=null)return Xo;if(!/^[\s\xa0]*$/.test($o))throw Error("Unknown base64 encoding at char: "+$o)}return To}rp();for(var Tr=0;;){var Cr=Jn(-1),Vr=Jn(0),ko=Jn(64),go=Jn(64);if(go===64&&Cr===-1)break;jn(Cr<<2|Vr>>4),ko!=64&&(jn(Vr<<4&240|ko>>2),go!=64&&jn(ko<<6&192|go))}}(zt,function(sr){Pn[zn++]=sr}),Pn.subarray(0,zn)}function rp(){if(!Ks){Ks={};for(var zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ln=["+/=","+/","-_=","-_.","-_"],wn=0;5>wn;wn++){var Pn=zt.concat(ln[wn].split(""));Vu[wn]=Pn;for(var zn=0;zn<Pn.length;zn++){var sr=Pn[zn];Ks[sr]===void 0&&(Ks[sr]=zn)}}}}var jp=["content-type","grpc-status","grpc-message"];function Js(zt){this.a=zt.T,this.l=null,this.b=[],this.h=[],this.g=[],this.f=[],this.c=[],this.j=!1,this.i=0,this.m=new Vt;var ln=this;ar(this.a,"readystatechange",function(){var wn=ln.a;if(wn=wn.a?wn.a.getResponseHeader("Content-Type"):null){if((wn=wn.toLowerCase()).lastIndexOf("application/grpc-web-text",0)==0){wn=ln.a;try{var Pn=wn.a?wn.a.responseText:""}catch(Cr){vo(wn.b,"Can not get responseText: "+Cr.message),Pn=""}if(Pn=(wn=Pn||"").length-wn.length%4,(wn=wn.substr(ln.i,Pn-ln.i)).length==0)return;ln.i=Pn,wn=Wu(wn)}else{if(wn.lastIndexOf("application/grpc",0)!=0)return void El(ln,{code:2,message:"Unknown Content-type received.",metadata:{}});wn=new Uint8Array(function(Cr){try{if(!Cr.a)return null;if("response"in Cr.a)return Cr.a.response;switch(Cr.j){case nm:case"text":return Cr.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Cr.a)return Cr.a.mozResponseArrayBuffer}var Vr=Cr.b;return Vr&&Vr.log(Hr,"Response type "+Cr.j+" is not supported on this browser",void 0),null}catch(ko){return vo(Cr.b,"Can not get response: "+ko.message),null}}(ln.a))}Pn=null;try{Pn=function(Cr,Vr){function ko(ru){xo.f++,xo.a=(xo.a<<8)+ru,xo.f==4&&(xo.b=Ut,xo.g=0,typeof Uint8Array<"u"?xo.c=new Uint8Array(xo.a):xo.c=Array(xo.a),xo.a==0&&To())}function go(ru){xo.c[xo.g++]=ru,xo.g==xo.a&&To()}function To(){var ru={};ru[xo.h]=xo.c,xo.i.push(ru),xo.b=Xt}var $o,Xo,xo=Cr,xl=0;for($o=Vr instanceof Uint8Array||Vr instanceof Array?Vr:new Uint8Array(Vr);xl<$o.length;){switch(xo.b){case Ht:St(xo,$o,xl,"stream already broken");break;case Xt:(Xo=$o[xl])==qt||Xo==Pt?xo.h=Xo:St(xo,$o,xl,"invalid frame byte"),xo.b=Gt,xo.a=0,xo.f=0;break;case Gt:ko($o[xl]);break;case Ut:go($o[xl]);break;default:throw Error("unexpected parser state: "+xo.b)}xo.l++,xl++}return Cr=xo.i,xo.i=[],0<Cr.length?Cr:null}(ln.m,wn)}catch{El(ln,{code:2,message:"Error in parsing response body",metadata:{}})}if(Pn)for(wn=0;wn<Pn.length;wn++){if(qt in Pn[wn]){var zn=Pn[wn][qt];if(zn)try{var sr=ln.l(zn);if(sr){zn=ln;for(var jn=sr,Jn=0;Jn<zn.b.length;Jn++)zn.b[Jn](jn)}}catch{El(ln,{code:2,message:"Error in response deserializer function.",metadata:{}})}}if(Pt in Pn[wn]&&0<Pn[wn][Pt].length){for(zn="",jn=0;jn<Pn[wn][Pt].length;jn++)zn+=String.fromCharCode(Pn[wn][Pt][jn]);for(zn=zn.trim().split(`\r
`),jn={},Jn=0;Jn<zn.length;Jn++){var Tr=zn[Jn].indexOf(":");jn[zn[Jn].substring(0,Tr).trim()]=zn[Jn].substring(Tr+1).trim()}zn=jn,jn=0,Jn="","grpc-status"in zn&&(jn=zn["grpc-status"],delete zn["grpc-status"]),"grpc-message"in zn&&(Jn=zn["grpc-message"],delete zn["grpc-message"]),El(ln,{code:Number(jn),message:Jn,metadata:zn})}}}}),ar(this.a,"complete",function(){var wn=ln.a.g,Pn="",zn={},sr=function(Jn){var Tr={};Jn=(Jn.a&&ds(Jn)==4&&Jn.a.getAllResponseHeaders()||"").split(`\r
`);for(var Cr=0;Cr<Jn.length;Cr++)if(!/^[\s\xa0]*$/.test(Jn[Cr])){var Vr=Dt(Jn[Cr]),ko=Vr[0];if(typeof(Vr=Vr[1])=="string"){Vr=Vr.trim();var go=Tr[ko]||[];Tr[ko]=go,go.push(Vr)}}return function(To,$o){var Xo,xo={};for(Xo in To)xo[Xo]=$o.call(void 0,To[Xo],Xo,To);return xo}(Tr,function(To){return To.join(", ")})}(ln.a);if(Object.keys(sr).forEach(function(Jn){jp.includes(Jn)||(zn[Jn]=sr[Jn])}),function(Jn,Tr){for(var Cr=0;Cr<Jn.g.length;Cr++)Jn.g[Cr](Tr)}(ln,zn),wn!=0){switch(wn){case 7:var jn=10;break;case 8:jn=4;break;case 6:jn=function(Jn){switch(Jn){case 200:return 0;case 400:return 3;case 401:return 16;case 403:return 7;case 404:return 5;case 409:return 10;case 412:return 9;case 429:return 8;case 499:return 1;case 500:return 2;case 501:return 12;case 503:return 14;case 504:return 4;default:return 2}}(ln.a.getStatus());break;default:jn=14}jn==10&&ln.j||El(ln,{code:jn,message:xt(wn),metadata:{}})}else wn=!1,"grpc-status"in sr&&(jn=Cm(ln.a,"grpc-status"),"grpc-message"in sr&&(Pn=Cm(ln.a,"grpc-message")),Number(jn)!=0&&(El(ln,{code:Number(jn),message:Pn,metadata:sr}),wn=!0)),wn||function(Jn){for(var Tr=0;Tr<Jn.c.length;Tr++)Jn.c[Tr]()}(ln)})}function Yl(zt,ln){-1<(ln=zt.indexOf(ln))&&zt.splice(ln,1)}function El(zt,ln){if(ln.code!=0)for(var wn={code:ln.code,message:decodeURIComponent(ln.message||""),metadata:ln.metadata},Pn=0;Pn<zt.f.length;Pn++)zt.f[Pn](wn);for(ln={code:ln.code,details:decodeURIComponent(ln.message||""),metadata:ln.metadata},wn=0;wn<zt.h.length;wn++)zt.h[wn](ln)}function gs(zt){this.a=_t("format",zt)||"text",this.f=_t("suppressCorsPreflight",zt)||!1,this.c=_t("withCredentials",zt)||!1,this.b=_t("streamInterceptors",zt)||[],this.g=_t("unaryInterceptors",zt)||[]}function Fs(zt,ln,wn){var Pn=ln.getMethodDescriptor(),zn=wn+Pn.name;(wn=new _l).H=zt.c;var sr=new Js({T:wn});if(sr.l=Pn.b,hu(wn.headers,ln.getMetadata()),zt.a=="text"?(wn.headers.set("Content-Type","application/grpc-web-text"),wn.headers.set("Accept","application/grpc-web-text")):wn.headers.set("Content-Type","application/grpc-web+proto"),wn.headers.set("X-User-Agent","grpc-web-javascript/0.1"),wn.headers.set("X-Grpc-Web","1"),nu(wn.headers.b,"deadline")){var jn=wn.headers.get("deadline");jn=Math.round(jn-new Date().getTime());var Jn=wn.headers;nu(Jn.b,"deadline")&&(delete Jn.b.deadline,Jn.c--,Jn.a.length>2*Jn.c&&Vs(Jn)),1/0===jn&&(jn=0),0<jn&&wn.headers.set("grpc-timeout",jn+"m")}if(zt.f){Vs(Jn=wn.headers),jn={};for(var Tr=0;Tr<Jn.a.length;Tr++){var Cr=Jn.a[Tr];jn[Cr]=Jn.b[Cr]}(Jn=wn.headers).b={},Jn.a.length=0,Jn.c=0;e:{for(Vr in jn){var Vr=!1;break e}Vr=!0}Vr||(jn=function(To){var $o="";return function(Xo,xo){for(var xl in Xo)xo.call(void 0,Xo[xl],xl,Xo)}(To,function(Xo,xo){$o+=xo,$o+=":",$o+=Xo,$o+=`\r
`}),$o}(jn),typeof zn=="string"?(Vr=encodeURIComponent("$httpHeaders"),(Vr+=jn=jn!=null?"="+encodeURIComponent(String(jn)):"")&&(0>(jn=zn.indexOf("#"))&&(jn=zn.length),0>(Jn=zn.indexOf("?"))||Jn>jn?(Jn=jn,Tr=""):Tr=zn.substring(Jn+1,jn),jn=(zn=[zn.substr(0,Jn),Tr,zn.substr(jn)])[1],zn[1]=Vr?jn?jn+"&"+Vr:Vr:jn,zn=zn[0]+(zn[1]?"?"+zn[1]:"")+zn[2])):zn.a("$httpHeaders",jn))}for(Pn=(ln=(0,Pn.a)(ln.getRequestMessage())).length,Vr=[0,0,0,0],jn=new Uint8Array(5+Pn),Jn=3;0<=Jn;Jn--)Vr[Jn]=Pn%256,Pn>>>=8;if(jn.set(new Uint8Array(Vr),1),jn.set(ln,5),ln=jn,zt.a=="text"){var ko;for(zt=ln,ko===void 0&&(ko=0),rp(),ko=Vu[ko],ln=[],Pn=0;Pn<zt.length;Pn+=3){Cr=zt[Pn];var go=(Vr=Pn+1<zt.length)?zt[Pn+1]:0;Jn=Cr>>2,Cr=(3&Cr)<<4|go>>4,go=(15&go)<<2|(Tr=(jn=Pn+2<zt.length)?zt[Pn+2]:0)>>6,Tr&=63,jn||(Tr=64,Vr||(go=64)),ln.push(ko[Jn],ko[Cr],ko[go]||"",ko[Tr]||"")}ln=ln.join("")}else zt.a=="binary"&&(wn.j="arraybuffer");return Eu(wn,zn,ln),sr}function Fp(zt,ln,wn){var Pn=null,zn=!1;zt.on("data",function(sr){Pn=sr}),zt.on("error",function(sr){sr.code==0||zn||(zn=!0,ln(sr,null))}),zt.on("status",function(sr){sr.code==0||zn?wn&&ln(null,null,sr):(zn=!0,ln({code:sr.code,message:sr.details,metadata:sr.metadata},null))}),wn&&zt.on("metadata",function(sr){ln(null,null,null,sr)}),zt.on("end",function(){zn||(Pn==null?ln({code:2,message:"Incomplete response"}):ln(null,Pn)),wn&&ln(null,null)})}function ip(zt,ln){var wn=zt;return ln.forEach(function(Pn){var zn=wn;wn=function(sr){return Pn.intercept(sr,zn)}}),wn}Js.prototype.on=function(zt,ln){return zt=="data"?this.b.push(ln):zt=="status"?this.h.push(ln):zt=="metadata"?this.g.push(ln):zt=="end"?this.c.push(ln):zt=="error"&&this.f.push(ln),this},Js.prototype.removeListener=function(zt,ln){return zt=="data"?Yl(this.b,ln):zt=="status"?Yl(this.h,ln):zt=="metadata"?Yl(this.g,ln):zt=="end"?Yl(this.c,ln):zt=="error"&&Yl(this.f,ln),this},Js.prototype.cancel=function(){this.j=!0,this.a.abort()},Js.prototype.cancel=Js.prototype.cancel,Js.prototype.removeListener=Js.prototype.removeListener,Js.prototype.on=Js.prototype.on,gs.prototype.P=function(zt,ln,wn,Pn,zn){var sr=this;Pn=on(zt,ln,"unary",Pn);var jn=zt.substr(0,zt.length-Pn.name.length);return Fp(zt=ip(function(Jn){return Fs(sr,Jn,jn)},this.b).call(this,nn(Pn,ln,wn)),zn,!1),new wt(zt)},gs.prototype.M=function(zt,ln,wn,Pn){var zn=this;Pn=on(zt,ln,"unary",Pn);var sr=zt.substr(0,zt.length-Pn.name.length);return ip(function(jn){return new Promise(function(Jn,Tr){var Cr,Vr,ko;Fp(Fs(zn,jn,sr),function(go,To,$o,Xo){go?Tr(go):To?ko=To:$o?Vr=$o:Xo?Cr=Xo:(go=jn.getMethodDescriptor(),Jn(new pt(ko,go,To=(To=Cr)===void 0?{}:To,Vr===void 0?null:Vr)))},!0)})},this.g).call(this,nn(Pn,ln,wn)).then(function(jn){return jn.getResponseMessage()})},gs.prototype.unaryCall=function(zt,ln,wn,Pn){return this.M(zt,ln,wn,Pn)},gs.prototype.R=function(zt,ln,wn,Pn){var zn=this;Pn=on(zt,ln,"server_streaming",Pn);var sr=zt.substr(0,zt.length-Pn.name.length);return ip(function(jn){return Fs(zn,jn,sr)},this.b).call(this,nn(Pn,ln,wn))},gs.prototype.serverStreaming=gs.prototype.R,gs.prototype.unaryCall=gs.prototype.unaryCall,gs.prototype.thenableCall=gs.prototype.M,gs.prototype.rpcCall=gs.prototype.P,i.exports.AbstractClientBase={MethodInfo:function(zt,ln,wn,Pn,zn){this.name=Pn,this.b=zn,this.f=zt,this.a=ln,this.c=wn}},i.exports.GrpcWebClientBase=gs,i.exports.StatusCode={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,UNAUTHENTICATED:16,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15},i.exports.MethodDescriptor=Lt,i.exports.MethodType={UNARY:"unary",SERVER_STREAMING:"server_streaming"}}).call(this,s(6))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.isAsyncIterable=o.isAsyncGenerator=o.isAsync=void 0;var _,$=s(152),et=(_=$)&&_.__esModule?_:{default:_};function tt(j){return j[Symbol.toStringTag]==="AsyncFunction"}o.default=function(j){if(typeof j!="function")throw new Error("expected a function");return tt(j)?(0,et.default)(j):j},o.isAsync=tt,o.isAsyncGenerator=function(j){return j[Symbol.toStringTag]==="AsyncGenerator"},o.isAsyncIterable=function(j){return typeof j[Symbol.asyncIterator]=="function"}},function(i,o,s){var _={};function $(tt,j,it){it||(it=Error);var st=function(ht){var _t,gt;function ft(ut,yt,Et){return ht.call(this,function(Mt,Ft,Rt){return typeof j=="string"?j:j(Mt,Ft,Rt)}(ut,yt,Et))||this}return gt=ht,(_t=ft).prototype=Object.create(gt.prototype),_t.prototype.constructor=_t,_t.__proto__=gt,ft}(it);st.prototype.name=it.name,st.prototype.code=tt,_[tt]=st}function et(tt,j){if(Array.isArray(tt)){var it=tt.length;return tt=tt.map(function(st){return String(st)}),it>2?"one of ".concat(j," ").concat(tt.slice(0,it-1).join(", "),", or ")+tt[it-1]:it===2?"one of ".concat(j," ").concat(tt[0]," or ").concat(tt[1]):"of ".concat(j," ").concat(tt[0])}return"of ".concat(j," ").concat(String(tt))}$("ERR_INVALID_OPT_VALUE",function(tt,j){return'The value "'+j+'" is invalid for option "'+tt+'"'},TypeError),$("ERR_INVALID_ARG_TYPE",function(tt,j,it){var st,ht,_t;if(typeof j=="string"&&(ht="not ",j.substr(0,ht.length)===ht)?(st="must not be",j=j.replace(/^not /,"")):st="must be",function(ft,ut,yt){return(yt===void 0||yt>ft.length)&&(yt=ft.length),ft.substring(yt-ut.length,yt)===ut}(tt," argument"))_t="The ".concat(tt," ").concat(st," ").concat(et(j,"type"));else{var gt=function(ft,ut,yt){return typeof yt!="number"&&(yt=0),!(yt+ut.length>ft.length)&&ft.indexOf(ut,yt)!==-1}(tt,".")?"property":"argument";_t='The "'.concat(tt,'" ').concat(gt," ").concat(st," ").concat(et(j,"type"))}return _t+=". Received type ".concat(typeof it)},TypeError),$("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),$("ERR_METHOD_NOT_IMPLEMENTED",function(tt){return"The "+tt+" method is not implemented"}),$("ERR_STREAM_PREMATURE_CLOSE","Premature close"),$("ERR_STREAM_DESTROYED",function(tt){return"Cannot call "+tt+" after a stream was destroyed"}),$("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),$("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),$("ERR_STREAM_WRITE_AFTER_END","write after end"),$("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),$("ERR_UNKNOWN_ENCODING",function(tt){return"Unknown encoding: "+tt},TypeError),$("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=_},function(i,o,s){(function(_){var $=Object.keys||function(ft){var ut=[];for(var yt in ft)ut.push(yt);return ut};i.exports=ht;var et=s(77),tt=s(81);s(7)(ht,et);for(var j=$(tt.prototype),it=0;it<j.length;it++){var st=j[it];ht.prototype[st]||(ht.prototype[st]=tt.prototype[st])}function ht(ft){if(!(this instanceof ht))return new ht(ft);et.call(this,ft),tt.call(this,ft),this.allowHalfOpen=!0,ft&&(ft.readable===!1&&(this.readable=!1),ft.writable===!1&&(this.writable=!1),ft.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",_t)))}function _t(){this._writableState.ended||_.nextTick(gt,this)}function gt(ft){ft.end()}Object.defineProperty(ht.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(ht.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ht.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ht.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ft){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ft,this._writableState.destroyed=ft)}})}).call(this,s(2))},function(i,o,s){s.d(o,"a",function(){return tt});var _=s(40),$=s(4);const et={"app-id":["app-id must match formant/*"]};class tt extends _.a{constructor(it,st={}){super(it,Object.assign({validateHeaders:ht=>`${ht.get("app-id")}`.startsWith("formant/")?{}:et},st)),this.endpoint=it}getHeaders(){return Object.assign(Object.assign({},tt.headers),{"App-ID":`formant/${$.a}`,"App-Version":$.j})}}tt.headers={}},function(i,o,s){s(227),i.exports={encode:_=>new TextEncoder().encode(_),decode:_=>new TextDecoder().decode(_)}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_,$=_.length){if(!$)throw new Error("arity is undefined");return function(...et){return typeof et[$-1]=="function"?_.apply(this,et):new Promise((tt,j)=>{et[$-1]=(it,...st)=>{if(it)return j(it);tt(st.length>1?st:st[0])},_.apply(this,et)})}},i.exports=o.default},function(i,o,s){(o=i.exports=s(69)).Stream=o,o.Readable=o,o.Writable=s(48),o.Duplex=s(23),o.Transform=s(72),o.PassThrough=s(165)},function(i,o,s){(o=i.exports=s(77)).Stream=o,o.Readable=o,o.Writable=s(81),o.Duplex=s(27),o.Transform=s(82),o.PassThrough=s(184),o.finished=s(49),o.pipeline=s(185)},function(i,o,s){i.exports=function(_){return _}},function(i,o,s){s.d(o,"a",function(){return $});const _=["password","secret","token","key","buffer"];function $(et,tt=new Set){return tt.has(et)?"[ RECURSIVE ]":!(j=et)||typeof j!="object"&&typeof j!="function"?et:(tt.add(et),Object.keys(et).reduce((it,st)=>(it[st]=_.some(ht=>st.toLowerCase().includes(ht.toLowerCase()))?"[ REDACTED ]":$(et[st],tt),it),{}));var j}},function(i,o){i.exports=_,_.default=_,_.stable=et,_.stableStringify=et;var s=[];function _(tt,j,it){(function _t(gt,ft,ut,yt){var Et;if(typeof gt=="object"&&gt!==null){for(Et=0;Et<ut.length;Et++)if(ut[Et]===gt)return yt[ft]="[Circular]",void s.push([yt,ft,gt]);if(ut.push(gt),Array.isArray(gt))for(Et=0;Et<gt.length;Et++)_t(gt[Et],Et,ut,gt);else{var Mt=Object.keys(gt);for(Et=0;Et<Mt.length;Et++){var Ft=Mt[Et];_t(gt[Ft],Ft,ut,gt)}}ut.pop()}})(tt,"",[],void 0);for(var st=JSON.stringify(tt,j,it);s.length!==0;){var ht=s.pop();ht[0][ht[1]]=ht[2]}return st}function $(tt,j){return tt<j?-1:tt>j?1:0}function et(tt,j,it){for(var st=function gt(ft,ut,yt,Et){var Mt;if(typeof ft=="object"&&ft!==null){for(Mt=0;Mt<yt.length;Mt++)if(yt[Mt]===ft)return Et[ut]="[Circular]",void s.push([Et,ut,ft]);if(typeof ft.toJSON=="function")return;if(yt.push(ft),Array.isArray(ft))for(Mt=0;Mt<ft.length;Mt++)gt(ft[Mt],Mt,yt,ft);else{var Ft={},Rt=Object.keys(ft).sort($);for(Mt=0;Mt<Rt.length;Mt++){var Ot=Rt[Mt];gt(ft[Ot],Ot,yt,ft),Ft[Ot]=ft[Ot]}if(Et===void 0)return Ft;s.push([Et,ut,ft]),Et[ut]=Ft}yt.pop()}}(tt,"",[],void 0)||tt,ht=JSON.stringify(st,j,it);s.length!==0;){var _t=s.pop();_t[0][_t[1]]=_t[2]}return ht}},function(i,o,s){var _=s(16),$=Object.keys||function(ut){var yt=[];for(var Et in ut)yt.push(Et);return yt};i.exports=_t;var et=Object.create(s(17));et.inherits=s(7);var tt=s(143),j=s(62);et.inherits(_t,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];_t.prototype[ht]||(_t.prototype[ht]=j.prototype[ht])}function _t(ut){if(!(this instanceof _t))return new _t(ut);tt.call(this,ut),j.call(this,ut),ut&&ut.readable===!1&&(this.readable=!1),ut&&ut.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ut&&ut.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",gt)}function gt(){this.allowHalfOpen||this._writableState.ended||_.nextTick(ft,this)}function ft(ut){ut.end()}Object.defineProperty(_t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_t.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ut){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ut,this._writableState.destroyed=ut)}}),_t.prototype._destroy=function(ut,yt){this.push(null),this.end(),_.nextTick(yt,ut)}},function(i,o,s){var _=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function $(j,it){return Object.prototype.hasOwnProperty.call(j,it)}o.assign=function(j){for(var it=Array.prototype.slice.call(arguments,1);it.length;){var st=it.shift();if(st){if(typeof st!="object")throw new TypeError(st+"must be non-object");for(var ht in st)$(st,ht)&&(j[ht]=st[ht])}}return j},o.shrinkBuf=function(j,it){return j.length===it?j:j.subarray?j.subarray(0,it):(j.length=it,j)};var et={arraySet:function(j,it,st,ht,_t){if(it.subarray&&j.subarray)j.set(it.subarray(st,st+ht),_t);else for(var gt=0;gt<ht;gt++)j[_t+gt]=it[st+gt]},flattenChunks:function(j){var it,st,ht,_t,gt,ft;for(ht=0,it=0,st=j.length;it<st;it++)ht+=j[it].length;for(ft=new Uint8Array(ht),_t=0,it=0,st=j.length;it<st;it++)gt=j[it],ft.set(gt,_t),_t+=gt.length;return ft}},tt={arraySet:function(j,it,st,ht,_t){for(var gt=0;gt<ht;gt++)j[_t+gt]=it[st+gt]},flattenChunks:function(j){return[].concat.apply([],j)}};o.setTyped=function(j){j?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,et)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,tt))},o.setTyped(_)},function(i,o,s){i.exports=s(186)},function(i,o,s){s.d(o,"a",function(){return $});var _=s(229);const $=Object(_.a)()},function(i,o,s){s.d(o,"a",function(){return Mt});var _=s(1),$=s(100),et=s.n($),tt=s(101),j=s.n(tt);class it extends Error{constructor(Rt,Ot,pt){super(`Connection failure: ${Rt.message}`),this.cause=Rt,this.url=Ot,this.retryable=pt}}var st=s(8),ht=s(0),_t=s(10),gt=s(11);class ft extends Error{constructor(Rt,Ot){super(`Invalid headers (${JSON.stringify(Rt)}) for response: ${Ot.message}`),this.validationErrors=Rt,this.responseError=Ot}}var ut=function(Ft,Rt,Ot,pt){return new(Ot||(Ot=Promise))(function(Lt,nn){function on(Nt){try{xt(pt.next(Nt))}catch(Tt){nn(Tt)}}function wt(Nt){try{xt(pt.throw(Nt))}catch(Tt){nn(Tt)}}function xt(Nt){var Tt;Nt.done?Lt(Nt.value):(Tt=Nt.value,Tt instanceof Ot?Tt:new Ot(function(Vt){Vt(Tt)})).then(on,wt)}xt((pt=pt.apply(Ft,Rt||[])).next())})},yt=function(Ft,Rt){var Ot={};for(var pt in Ft)Object.prototype.hasOwnProperty.call(Ft,pt)&&Rt.indexOf(pt)<0&&(Ot[pt]=Ft[pt]);if(Ft!=null&&typeof Object.getOwnPropertySymbols=="function"){var Lt=0;for(pt=Object.getOwnPropertySymbols(Ft);Lt<pt.length;Lt++)Rt.indexOf(pt[Lt])<0&&Object.prototype.propertyIsEnumerable.call(Ft,pt[Lt])&&(Ot[pt[Lt]]=Ft[pt[Lt]])}return Ot};const Et=new Set(["GET","HEAD","PUT","QUERY","DELETE","OPTIONS","TRACE"]);class Mt{constructor(Rt,Ot={}){if(this.endpoint=Rt,this.validateHeaders=pt=>Ot.validateHeaders?Ot.validateHeaders(pt):{},this.verbose=Ot.verbose!==!1,Ot.retries!==void 0&&!(Ot.retries>=0))throw new Error("retries must be positive or zero");if(this.configuredRetries=Ot.retries,Ot.timeoutMs!==void 0&&!(Ot.timeoutMs>0))throw new Error("timeoutMs must be positive");if(this.timeoutMs=Ot.timeoutMs,Ot.maxBackoffDelayMs!==void 0&&!(Ot.maxBackoffDelayMs>0))throw new Error("maxBackoffDelayMs must be positive");this.maxBackoffDelayMs=Ot.maxBackoffDelayMs||30*_.a.second}getRetries(){return this.configuredRetries!==void 0?this.configuredRetries:this.getConstructor().retries}getHeaders(){return{}}fetch(Rt,Ot={}){return ut(this,void 0,void 0,function*(){return(yield this.fetchVerbose(Rt,Ot)).body})}fetchVerbose(Rt,Ot={}){return ut(this,void 0,void 0,function*(){let pt=100*_.a.millisecond,Lt=0;const nn=this.timeoutMs!==void 0?new Date().getTime()+this.timeoutMs:void 0,on=nn?()=>Math.max(nn-new Date().getTime(),0):void 0;for(;;)try{return yield this.doFetch(Rt,Ot,on)}catch(wt){const xt=Object(_t.a)(wt,it);if((on==null?void 0:on())===0||Lt===this.getRetries()||!xt.retryable)throw xt;Lt++,pt=Math.min(...on?[on()]:[],pt*(2+.1*(Math.random()-.5)),this.maxBackoffDelayMs),yield Object(st.a)(pt),this.verbose&&ht.a.warn(`Connection failure, retrying. Error: ${wt.cause.message}`,{url:wt.url,error:wt.cause,attempt:Lt})}})}doFetch(Rt,Ot,pt){return ut(this,void 0,void 0,function*(){const{token:Lt,json:nn,allowUnsafeRetries:on}=Ot,wt=yt(Ot,["token","json","allowUnsafeRetries"]),xt=(wt.method||"GET").toUpperCase(),Nt=this.endpoint!==void 0?`${this.endpoint}${Rt?`/${Rt}`:""}`:Rt,Tt=new et.a;let Vt;if(pt){const Xt=pt();Xt>0?Vt=setTimeout(()=>{Tt.abort()},Xt):Tt.abort()}try{let Xt;yield Promise.race([this.getConstructor().waitForConnectivity(),new Promise(Zt=>{Xt=setTimeout(Zt,pt?Math.min(_.a.minute,pt()):_.a.minute)})]),Xt&&clearTimeout(Xt);const Gt=yield j()(Nt,Object.assign(Object.assign({},wt),{headers:Object.assign(Object.assign(Object.assign(Object.assign({},nn!==!1?{"Content-Type":"application/json"}:{}),this.getHeaders()),wt.headers||{}),Lt!==void 0?{Authorization:`Bearer ${Lt}`}:{}),signal:Tt.signal})),Ut=Gt.headers.get("content-type")||"",Ht=Ut&&Ut.startsWith("application/json"),qt=Ht?yield Gt.json():yield Gt.text(),Pt=()=>new gt.a(xt,Nt,Gt.status,qt,qt&&qt.validationErrors||{},Gt.headers);if(!Gt.ok)throw this.verbose&&ht.a[Gt.status>=500?"warn":"info"]("Response error",{method:xt,url:Nt,statusCode:Gt.status}),Pt();const St=this.validateHeaders(Gt.headers);if(Object.keys(St).length!==0)throw new ft(St,Pt());if(Gt.status===204)return{body:void 0,headers:Gt.headers};if(nn&&!Ht)throw new Error(`Response is not JSON: ${JSON.stringify(qt)}`);return{body:qt,headers:Gt.headers}}catch(Xt){const Gt=on||Et.has(xt);if(Xt.message==="Network request failed")throw new it(Xt,Nt,Gt);if(Xt.type==="system"&&["EAI_AGAIN","ECONNREFUSED","EHOSTUNREACH","ENOTFOUND"].find(Pt=>Pt===Xt.code))throw new it(Xt,Nt,!0);if(Xt.type==="system"&&["ETIMEDOUT","ECONNRESET","ESOCKETTIMEDOUT","EPIPE"].find(Pt=>Pt===Xt.code))throw new it(Xt,Nt,Gt);if(Xt.name==="AbortError")throw new it(Xt,Nt,Gt);const Ut=Object(_t.a)(Xt,gt.a),{statusCode:Ht}=Ut;if(Ht===408||Ht===429||Ht===502||Ht===503||Ht===504)throw this.verbose&&!Gt&&ht.a.warn("Potentially unsafe retry"),new it(Xt,Nt,!0);const qt=this.validateHeaders(Ut.headers);throw Object.keys(qt).length!==0?new ft(qt,Ut):(yield this.getConstructor().onResponseError(Ut),Xt)}finally{Vt&&clearTimeout(Vt)}})}getConstructor(){return Object.getPrototypeOf(this).constructor}}Mt.retries=8,Mt.waitForConnectivity=()=>ut(void 0,void 0,void 0,function*(){}),Mt.onResponseError=()=>ut(void 0,void 0,void 0,function*(){})},function(i,o,s){function _(_t,gt){if(!(_t instanceof gt))throw new TypeError("Cannot call a class as a function")}function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(59),tt=s(3),j=tt.LEVEL,it=tt.MESSAGE;et.enabled=!0;var st=/\s+/,ht=function(){function _t(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,_t),yt.colors&&this.addColors(yt.colors),this.options=yt}var gt,ft,ut;return gt=_t,ut=[{key:"addColors",value:function(yt){var Et=Object.keys(yt).reduce(function(Mt,Ft){return Mt[Ft]=st.test(yt[Ft])?yt[Ft].split(st):yt[Ft],Mt},{});return _t.allColors=Object.assign({},_t.allColors||{},Et),_t.allColors}}],(ft=[{key:"addColors",value:function(yt){return _t.addColors(yt)}},{key:"colorize",value:function(yt,Et,Mt){if(Mt===void 0&&(Mt=Et),!Array.isArray(_t.allColors[yt]))return et[_t.allColors[yt]](Mt);for(var Ft=0,Rt=_t.allColors[yt].length;Ft<Rt;Ft++)Mt=et[_t.allColors[yt][Ft]](Mt);return Mt}},{key:"transform",value:function(yt,Et){return Et.all&&typeof yt[it]=="string"&&(yt[it]=this.colorize(yt[j],yt.level,yt[it])),(Et.level||Et.all||!Et.message)&&(yt.level=this.colorize(yt[j],yt.level)),(Et.all||Et.message)&&(yt.message=this.colorize(yt[j],yt.level,yt.message)),yt}}])&&$(gt.prototype,ft),ut&&$(gt,ut),_t}();i.exports=function(_t){return new ht(_t)},i.exports.Colorizer=i.exports.Format=ht},function(i,o){var s={}.toString;i.exports=Array.isArray||function(_){return s.call(_)=="[object Array]"}},function(i,o,s){(function(_){function $(et){try{if(!_.localStorage)return!1}catch{return!1}var tt=_.localStorage[et];return tt!=null&&String(tt).toLowerCase()==="true"}i.exports=function(et,tt){if($("noDeprecation"))return et;var j=!1;return function(){if(!j){if($("throwDeprecation"))throw new Error(tt);$("traceDeprecation")?console.trace(tt):console.warn(tt),j=!0}return et.apply(this,arguments)}}}).call(this,s(6))},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _&&typeof _.length=="number"&&_.length>=0&&_.length%1==0},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default={},i.exports=o.default},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){(function(_,$,et){var tt=s(16);function j(xt){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Tt,Vt,Xt){var Gt=Tt.entry;for(Tt.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Xt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Tt:Vt.corkedRequestsFree=Tt})(Nt,xt)}}i.exports=Rt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Rt.WritableState=Ft;var ht=s(17);ht.inherits=s(7);var _t={deprecate:s(43)},gt=s(70),ft=s(47).Buffer,ut=et.Uint8Array||function(){},yt,Et=s(71);function Mt(){}function Ft(xt,Nt){it=it||s(23),xt=xt||{};var Tt=Nt instanceof it;this.objectMode=!!xt.objectMode,Tt&&(this.objectMode=this.objectMode||!!xt.writableObjectMode);var Vt=xt.highWaterMark,Xt=xt.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Tt&&(Xt||Xt===0)?Xt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=xt.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=xt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var St=qt._writableState,Zt=St.sync,tn=St.writecb;if(function(yn){yn.writing=!1,yn.writecb=null,yn.length-=yn.writelen,yn.writelen=0}(St),Pt)(function(yn,vn,un,rn,It){--vn.pendingcb,un?(tt.nextTick(It,rn),tt.nextTick(wt,yn,vn),yn._writableState.errorEmitted=!0,yn.emit("error",rn)):(It(rn),yn._writableState.errorEmitted=!0,yn.emit("error",rn),wt(yn,vn))})(qt,St,Zt,Pt,tn);else{var mn=nn(St);mn||St.corked||St.bufferProcessing||!St.bufferedRequest||Lt(qt,St),Zt?st(pt,qt,St,mn,tn):pt(qt,St,mn,tn)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Rt(xt){if(it=it||s(23),!(yt.call(Rt,this)||this instanceof it))return new Rt(xt);this._writableState=new Ft(xt,this),this.writable=!0,xt&&(typeof xt.write=="function"&&(this._write=xt.write),typeof xt.writev=="function"&&(this._writev=xt.writev),typeof xt.destroy=="function"&&(this._destroy=xt.destroy),typeof xt.final=="function"&&(this._final=xt.final)),gt.call(this)}function Ot(xt,Nt,Tt,Vt,Xt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Tt?xt._writev(Xt,Nt.onwrite):xt._write(Xt,Gt,Nt.onwrite),Nt.sync=!1}function pt(xt,Nt,Tt,Vt){Tt||function(Xt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Xt.emit("drain"))}(xt,Nt),Nt.pendingcb--,Vt(),wt(xt,Nt)}function Lt(xt,Nt){Nt.bufferProcessing=!0;var Tt=Nt.bufferedRequest;if(xt._writev&&Tt&&Tt.next){var Vt=Nt.bufferedRequestCount,Xt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Tt;for(var Ut=0,Ht=!0;Tt;)Xt[Ut]=Tt,Tt.isBuf||(Ht=!1),Tt=Tt.next,Ut+=1;Xt.allBuffers=Ht,Ot(xt,Nt,!0,Nt.length,Xt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Tt;){var qt=Tt.chunk,Pt=Tt.encoding,St=Tt.callback;if(Ot(xt,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,St),Tt=Tt.next,Nt.bufferedRequestCount--,Nt.writing)break}Tt===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Tt,Nt.bufferProcessing=!1}function nn(xt){return xt.ending&&xt.length===0&&xt.bufferedRequest===null&&!xt.finished&&!xt.writing}function on(xt,Nt){xt._final(function(Tt){Nt.pendingcb--,Tt&&xt.emit("error",Tt),Nt.prefinished=!0,xt.emit("prefinish"),wt(xt,Nt)})}function wt(xt,Nt){var Tt=nn(Nt);return Tt&&(function(Vt,Xt){Xt.prefinished||Xt.finalCalled||(typeof Vt._final=="function"?(Xt.pendingcb++,Xt.finalCalled=!0,tt.nextTick(on,Vt,Xt)):(Xt.prefinished=!0,Vt.emit("prefinish")))}(xt,Nt),Nt.pendingcb===0&&(Nt.finished=!0,xt.emit("finish"))),Tt}ht.inherits(Rt,gt),Ft.prototype.getBuffer=function(){for(var xt=this.bufferedRequest,Nt=[];xt;)Nt.push(xt),xt=xt.next;return Nt},function(){try{Object.defineProperty(Ft.prototype,"buffer",{get:_t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Rt,Symbol.hasInstance,{value:function(xt){return!!yt.call(this,xt)||this===Rt&&xt&&xt._writableState instanceof Ft}})):yt=function(xt){return xt instanceof this},Rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Rt.prototype.write=function(xt,Nt,Tt){var Vt,Xt=this._writableState,Gt=!1,Ut=!Xt.objectMode&&(Vt=xt,ft.isBuffer(Vt)||Vt instanceof ut);return Ut&&!ft.isBuffer(xt)&&(xt=function(Ht){return ft.from(Ht)}(xt)),typeof Nt=="function"&&(Tt=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Xt.defaultEncoding),typeof Tt!="function"&&(Tt=Mt),Xt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Tt):(Ut||function(Ht,qt,Pt,St){var Zt=!0,tn=!1;return Pt===null?tn=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(tn=new TypeError("Invalid non-string/buffer chunk")),tn&&(Ht.emit("error",tn),tt.nextTick(St,tn),Zt=!1),Zt}(this,Xt,xt,Tt))&&(Xt.pendingcb++,Gt=function(Ht,qt,Pt,St,Zt,tn){if(!Pt){var mn=function(rn,It,Dt){return rn.objectMode||rn.decodeStrings===!1||typeof It!="string"||(It=ft.from(It,Dt)),It}(qt,St,Zt);St!==mn&&(Pt=!0,Zt="buffer",St=mn)}var yn=qt.objectMode?1:St.length;qt.length+=yn;var vn=qt.length<qt.highWaterMark;if(vn||(qt.needDrain=!0),qt.writing||qt.corked){var un=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:St,encoding:Zt,isBuf:Pt,callback:tn,next:null},un?un.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else Ot(Ht,qt,!1,yn,St,Zt,tn);return vn}(this,Xt,Ut,xt,Nt,Tt)),Gt},Rt.prototype.cork=function(){this._writableState.corked++},Rt.prototype.uncork=function(){var xt=this._writableState;xt.corked&&(xt.corked--,xt.writing||xt.corked||xt.finished||xt.bufferProcessing||!xt.bufferedRequest||Lt(this,xt))},Rt.prototype.setDefaultEncoding=function(xt){if(typeof xt=="string"&&(xt=xt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((xt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+xt);return this._writableState.defaultEncoding=xt,this},Object.defineProperty(Rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Rt.prototype._write=function(xt,Nt,Tt){Tt(new Error("_write() is not implemented"))},Rt.prototype._writev=null,Rt.prototype.end=function(xt,Nt,Tt){var Vt=this._writableState;typeof xt=="function"?(Tt=xt,xt=null,Nt=null):typeof Nt=="function"&&(Tt=Nt,Nt=null),xt!=null&&this.write(xt,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Xt,Gt,Ut){Gt.ending=!0,wt(Xt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Xt.once("finish",Ut)),Gt.ended=!0,Xt.writable=!1}(this,Vt,Tt)},Object.defineProperty(Rt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(xt){this._writableState&&(this._writableState.destroyed=xt)}}),Rt.prototype.destroy=Et.destroy,Rt.prototype._undestroy=Et.undestroy,Rt.prototype._destroy=function(xt,Nt){this.end(),Nt(xt)}}).call(this,s(2),s(15).setImmediate,s(6))},function(i,o,s){var _=s(26).codes.ERR_STREAM_PREMATURE_CLOSE;function $(){}i.exports=function et(tt,j,it){if(typeof j=="function")return et(tt,null,j);j||(j={}),it=function(Rt){var Ot=!1;return function(){if(!Ot){Ot=!0;for(var pt=arguments.length,Lt=new Array(pt),nn=0;nn<pt;nn++)Lt[nn]=arguments[nn];Rt.apply(this,Lt)}}}(it||$);var st=j.readable||j.readable!==!1&&tt.readable,ht=j.writable||j.writable!==!1&&tt.writable,_t=function(){tt.writable||ft()},gt=tt._writableState&&tt._writableState.finished,ft=function(){ht=!1,gt=!0,st||it.call(tt)},ut=tt._readableState&&tt._readableState.endEmitted,yt=function(){st=!1,ut=!0,ht||it.call(tt)},Et=function(Rt){it.call(tt,Rt)},Mt=function(){var Rt;return st&&!ut?(tt._readableState&&tt._readableState.ended||(Rt=new _),it.call(tt,Rt)):ht&&!gt?(tt._writableState&&tt._writableState.ended||(Rt=new _),it.call(tt,Rt)):void 0},Ft=function(){tt.req.on("finish",ft)};return function(Rt){return Rt.setHeader&&typeof Rt.abort=="function"}(tt)?(tt.on("complete",ft),tt.on("abort",Mt),tt.req?Ft():tt.on("request",Ft)):ht&&!tt._writableState&&(tt.on("end",_t),tt.on("close",_t)),tt.on("end",yt),tt.on("finish",ft),j.error!==!1&&tt.on("error",Et),tt.on("close",Mt),function(){tt.removeListener("complete",ft),tt.removeListener("abort",Mt),tt.removeListener("request",Ft),tt.req&&tt.req.removeListener("finish",ft),tt.removeListener("end",_t),tt.removeListener("close",_t),tt.removeListener("finish",ft),tt.removeListener("end",yt),tt.removeListener("error",Et),tt.removeListener("close",Mt)}}},function(i,o,s){var _=s(58),$=s(3).configs;o.cli=_.levels($.cli),o.npm=_.levels($.npm),o.syslog=_.levels($.syslog),o.addColors=_.levels},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=j(s(203)),$=j(s(204)),et=j(s(25)),tt=j(s(30));function j(it){return it&&it.__esModule?it:{default:it}}o.default=(0,tt.default)(function(it,st,ht){return(0,_.default)(it,(0,$.default)((0,et.default)(st)),ht)},3),i.exports=o.default},function(i,o,s){class _ extends Error{constructor(et,...tt){super(`env-var: ${et}`,...tt),Error.captureStackTrace&&Error.captureStackTrace(this,_),this.name="EnvVarError"}}i.exports=_},function(i,o,s){i.exports=function(_){const $=parseInt(_,10);if(isNaN($)||$.toString(10)!==_)throw new Error("should be a valid integer");return $}},function(i,o,s){i.exports=function(_){const $=parseFloat(_);if(isNaN($)||$.toString()!==_)throw new Error("should be a valid float");return $}},function(i,o,s){i.exports=function(_){try{return JSON.parse(_)}catch{throw new Error("should be valid (parseable) JSON")}}},function(i,o,s){(function(_){function $(j,it){for(var st=0,ht=j.length-1;ht>=0;ht--){var _t=j[ht];_t==="."?j.splice(ht,1):_t===".."?(j.splice(ht,1),st++):st&&(j.splice(ht,1),st--)}if(it)for(;st--;st)j.unshift("..");return j}function et(j,it){if(j.filter)return j.filter(it);for(var st=[],ht=0;ht<j.length;ht++)it(j[ht],ht,j)&&st.push(j[ht]);return st}o.resolve=function(){for(var j="",it=!1,st=arguments.length-1;st>=-1&&!it;st--){var ht=st>=0?arguments[st]:_.cwd();if(typeof ht!="string")throw new TypeError("Arguments to path.resolve must be strings");ht&&(j=ht+"/"+j,it=ht.charAt(0)==="/")}return(it?"/":"")+(j=$(et(j.split("/"),function(_t){return!!_t}),!it).join("/"))||"."},o.normalize=function(j){var it=o.isAbsolute(j),st=tt(j,-1)==="/";return(j=$(et(j.split("/"),function(ht){return!!ht}),!it).join("/"))||it||(j="."),j&&st&&(j+="/"),(it?"/":"")+j},o.isAbsolute=function(j){return j.charAt(0)==="/"},o.join=function(){var j=Array.prototype.slice.call(arguments,0);return o.normalize(et(j,function(it,st){if(typeof it!="string")throw new TypeError("Arguments to path.join must be strings");return it}).join("/"))},o.relative=function(j,it){function st(Et){for(var Mt=0;Mt<Et.length&&Et[Mt]==="";Mt++);for(var Ft=Et.length-1;Ft>=0&&Et[Ft]==="";Ft--);return Mt>Ft?[]:Et.slice(Mt,Ft-Mt+1)}j=o.resolve(j).substr(1),it=o.resolve(it).substr(1);for(var ht=st(j.split("/")),_t=st(it.split("/")),gt=Math.min(ht.length,_t.length),ft=gt,ut=0;ut<gt;ut++)if(ht[ut]!==_t[ut]){ft=ut;break}var yt=[];for(ut=ft;ut<ht.length;ut++)yt.push("..");return(yt=yt.concat(_t.slice(ft))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(j){if(typeof j!="string"&&(j+=""),j.length===0)return".";for(var it=j.charCodeAt(0),st=it===47,ht=-1,_t=!0,gt=j.length-1;gt>=1;--gt)if((it=j.charCodeAt(gt))===47){if(!_t){ht=gt;break}}else _t=!1;return ht===-1?st?"/":".":st&&ht===1?"/":j.slice(0,ht)},o.basename=function(j,it){var st=function(ht){typeof ht!="string"&&(ht+="");var _t,gt=0,ft=-1,ut=!0;for(_t=ht.length-1;_t>=0;--_t)if(ht.charCodeAt(_t)===47){if(!ut){gt=_t+1;break}}else ft===-1&&(ut=!1,ft=_t+1);return ft===-1?"":ht.slice(gt,ft)}(j);return it&&st.substr(-1*it.length)===it&&(st=st.substr(0,st.length-it.length)),st},o.extname=function(j){typeof j!="string"&&(j+="");for(var it=-1,st=0,ht=-1,_t=!0,gt=0,ft=j.length-1;ft>=0;--ft){var ut=j.charCodeAt(ft);if(ut!==47)ht===-1&&(_t=!1,ht=ft+1),ut===46?it===-1?it=ft:gt!==1&&(gt=1):it!==-1&&(gt=-1);else if(!_t){st=ft+1;break}}return it===-1||ht===-1||gt===0||gt===1&&it===ht-1&&it===st+1?"":j.slice(it,ht)};var tt="ab".substr(-1)==="b"?function(j,it,st){return j.substr(it,st)}:function(j,it,st){return it<0&&(it=j.length+it),j.substr(it,st)}}).call(this,s(2))},,function(i,o,s){var _=o.format=s(12);o.levels=s(105),Object.defineProperty(_,"align",{value:s(122)}),Object.defineProperty(_,"cli",{value:s(123)}),Object.defineProperty(_,"combine",{value:s(124)}),Object.defineProperty(_,"colorize",{value:s(41)}),Object.defineProperty(_,"json",{value:s(125)}),Object.defineProperty(_,"label",{value:s(128)}),Object.defineProperty(_,"logstash",{value:s(129)}),Object.defineProperty(_,"metadata",{value:s(130)}),Object.defineProperty(_,"padLevels",{value:s(60)}),Object.defineProperty(_,"prettyPrint",{value:s(131)}),Object.defineProperty(_,"printf",{value:s(132)}),Object.defineProperty(_,"simple",{value:s(133)}),Object.defineProperty(_,"splat",{value:s(134)}),Object.defineProperty(_,"timestamp",{value:s(135)}),Object.defineProperty(_,"uncolorize",{value:s(137)})},function(i,o,s){var _=s(106);i.exports=_},function(i,o,s){function _(gt){return function(ft){if(Array.isArray(ft))return $(ft)}(gt)||function(ft){if(typeof Symbol<"u"&&Symbol.iterator in Object(ft))return Array.from(ft)}(gt)||function(ft,ut){if(ft){if(typeof ft=="string")return $(ft,ut);var yt=Object.prototype.toString.call(ft).slice(8,-1);if(yt==="Object"&&ft.constructor&&(yt=ft.constructor.name),yt==="Map"||yt==="Set")return Array.from(ft);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return $(ft,ut)}}(gt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(gt,ft){(ft==null||ft>gt.length)&&(ft=gt.length);for(var ut=0,yt=new Array(ft);ut<ft;ut++)yt[ut]=gt[ut];return yt}function et(gt,ft){if(!(gt instanceof ft))throw new TypeError("Cannot call a class as a function")}function tt(gt,ft){for(var ut=0;ut<ft.length;ut++){var yt=ft[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(gt,yt.key,yt)}}var j=s(3),it=j.configs,st=j.LEVEL,ht=j.MESSAGE,_t=function(){function gt(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{levels:it.npm.levels};et(this,gt),this.paddings=gt.paddingForLevels(Et.levels,Et.filler),this.options=Et}var ft,ut,yt;return ft=gt,yt=[{key:"getLongestLevel",value:function(Et){var Mt=Object.keys(Et).map(function(Ft){return Ft.length});return Math.max.apply(Math,_(Mt))}},{key:"paddingForLevel",value:function(Et,Mt,Ft){var Rt=Ft+1-Et.length,Ot=Math.floor(Rt/Mt.length);return"".concat(Mt).concat(Mt.repeat(Ot)).slice(0,Rt)}},{key:"paddingForLevels",value:function(Et){var Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",Ft=gt.getLongestLevel(Et);return Object.keys(Et).reduce(function(Rt,Ot){return Rt[Ot]=gt.paddingForLevel(Ot,Mt,Ft),Rt},{})}}],(ut=[{key:"transform",value:function(Et,Mt){return Et.message="".concat(this.paddings[Et[st]]).concat(Et.message),Et[ht]&&(Et[ht]="".concat(this.paddings[Et[st]]).concat(Et[ht])),Et}}])&&tt(ft.prototype,ut),yt&&tt(ft,yt),gt}();i.exports=function(gt){return new _t(gt)},i.exports.Padder=i.exports.Format=_t},function(i,o,s){var _=s(13).format;o.warn={deprecated:function($){return function(){throw new Error(_("{ %s } was removed in winston@3.0.0.",$))}},useFormat:function($){return function(){throw new Error([_("{ %s } was removed in winston@3.0.0.",$),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions:function($,et,tt){tt.forEach(function(j){$[j]=o.warn[et](j)})},moved:function($,et,tt){function j(){return function(){throw new Error([_("winston.%s was moved in winston@3.0.0.",tt),_("Use a winston.%s instead.",et)].join(`
`))}}Object.defineProperty($,tt,{get:j,set:j})},forProperties:function($,et,tt){tt.forEach(function(j){var it=o.warn[et](j);Object.defineProperty($,j,{get:it,set:it})})}}},function(i,o,s){(function(_,$,et){var tt=s(16);function j(xt){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Tt,Vt,Xt){var Gt=Tt.entry;for(Tt.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Xt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Tt:Vt.corkedRequestsFree=Tt})(Nt,xt)}}i.exports=Rt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Rt.WritableState=Ft;var ht=Object.create(s(17));ht.inherits=s(7);var _t={deprecate:s(43)},gt=s(63),ft=s(44).Buffer,ut=et.Uint8Array||function(){},yt,Et=s(64);function Mt(){}function Ft(xt,Nt){it=it||s(36),xt=xt||{};var Tt=Nt instanceof it;this.objectMode=!!xt.objectMode,Tt&&(this.objectMode=this.objectMode||!!xt.writableObjectMode);var Vt=xt.highWaterMark,Xt=xt.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Tt&&(Xt||Xt===0)?Xt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=xt.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=xt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var St=qt._writableState,Zt=St.sync,tn=St.writecb;if(function(yn){yn.writing=!1,yn.writecb=null,yn.length-=yn.writelen,yn.writelen=0}(St),Pt)(function(yn,vn,un,rn,It){--vn.pendingcb,un?(tt.nextTick(It,rn),tt.nextTick(wt,yn,vn),yn._writableState.errorEmitted=!0,yn.emit("error",rn)):(It(rn),yn._writableState.errorEmitted=!0,yn.emit("error",rn),wt(yn,vn))})(qt,St,Zt,Pt,tn);else{var mn=nn(St);mn||St.corked||St.bufferProcessing||!St.bufferedRequest||Lt(qt,St),Zt?st(pt,qt,St,mn,tn):pt(qt,St,mn,tn)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Rt(xt){if(it=it||s(36),!(yt.call(Rt,this)||this instanceof it))return new Rt(xt);this._writableState=new Ft(xt,this),this.writable=!0,xt&&(typeof xt.write=="function"&&(this._write=xt.write),typeof xt.writev=="function"&&(this._writev=xt.writev),typeof xt.destroy=="function"&&(this._destroy=xt.destroy),typeof xt.final=="function"&&(this._final=xt.final)),gt.call(this)}function Ot(xt,Nt,Tt,Vt,Xt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Tt?xt._writev(Xt,Nt.onwrite):xt._write(Xt,Gt,Nt.onwrite),Nt.sync=!1}function pt(xt,Nt,Tt,Vt){Tt||function(Xt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Xt.emit("drain"))}(xt,Nt),Nt.pendingcb--,Vt(),wt(xt,Nt)}function Lt(xt,Nt){Nt.bufferProcessing=!0;var Tt=Nt.bufferedRequest;if(xt._writev&&Tt&&Tt.next){var Vt=Nt.bufferedRequestCount,Xt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Tt;for(var Ut=0,Ht=!0;Tt;)Xt[Ut]=Tt,Tt.isBuf||(Ht=!1),Tt=Tt.next,Ut+=1;Xt.allBuffers=Ht,Ot(xt,Nt,!0,Nt.length,Xt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Tt;){var qt=Tt.chunk,Pt=Tt.encoding,St=Tt.callback;if(Ot(xt,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,St),Tt=Tt.next,Nt.bufferedRequestCount--,Nt.writing)break}Tt===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Tt,Nt.bufferProcessing=!1}function nn(xt){return xt.ending&&xt.length===0&&xt.bufferedRequest===null&&!xt.finished&&!xt.writing}function on(xt,Nt){xt._final(function(Tt){Nt.pendingcb--,Tt&&xt.emit("error",Tt),Nt.prefinished=!0,xt.emit("prefinish"),wt(xt,Nt)})}function wt(xt,Nt){var Tt=nn(Nt);return Tt&&(function(Vt,Xt){Xt.prefinished||Xt.finalCalled||(typeof Vt._final=="function"?(Xt.pendingcb++,Xt.finalCalled=!0,tt.nextTick(on,Vt,Xt)):(Xt.prefinished=!0,Vt.emit("prefinish")))}(xt,Nt),Nt.pendingcb===0&&(Nt.finished=!0,xt.emit("finish"))),Tt}ht.inherits(Rt,gt),Ft.prototype.getBuffer=function(){for(var xt=this.bufferedRequest,Nt=[];xt;)Nt.push(xt),xt=xt.next;return Nt},function(){try{Object.defineProperty(Ft.prototype,"buffer",{get:_t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Rt,Symbol.hasInstance,{value:function(xt){return!!yt.call(this,xt)||this===Rt&&xt&&xt._writableState instanceof Ft}})):yt=function(xt){return xt instanceof this},Rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Rt.prototype.write=function(xt,Nt,Tt){var Vt,Xt=this._writableState,Gt=!1,Ut=!Xt.objectMode&&(Vt=xt,ft.isBuffer(Vt)||Vt instanceof ut);return Ut&&!ft.isBuffer(xt)&&(xt=function(Ht){return ft.from(Ht)}(xt)),typeof Nt=="function"&&(Tt=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Xt.defaultEncoding),typeof Tt!="function"&&(Tt=Mt),Xt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Tt):(Ut||function(Ht,qt,Pt,St){var Zt=!0,tn=!1;return Pt===null?tn=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(tn=new TypeError("Invalid non-string/buffer chunk")),tn&&(Ht.emit("error",tn),tt.nextTick(St,tn),Zt=!1),Zt}(this,Xt,xt,Tt))&&(Xt.pendingcb++,Gt=function(Ht,qt,Pt,St,Zt,tn){if(!Pt){var mn=function(rn,It,Dt){return rn.objectMode||rn.decodeStrings===!1||typeof It!="string"||(It=ft.from(It,Dt)),It}(qt,St,Zt);St!==mn&&(Pt=!0,Zt="buffer",St=mn)}var yn=qt.objectMode?1:St.length;qt.length+=yn;var vn=qt.length<qt.highWaterMark;if(vn||(qt.needDrain=!0),qt.writing||qt.corked){var un=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:St,encoding:Zt,isBuf:Pt,callback:tn,next:null},un?un.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else Ot(Ht,qt,!1,yn,St,Zt,tn);return vn}(this,Xt,Ut,xt,Nt,Tt)),Gt},Rt.prototype.cork=function(){this._writableState.corked++},Rt.prototype.uncork=function(){var xt=this._writableState;xt.corked&&(xt.corked--,xt.writing||xt.corked||xt.finished||xt.bufferProcessing||!xt.bufferedRequest||Lt(this,xt))},Rt.prototype.setDefaultEncoding=function(xt){if(typeof xt=="string"&&(xt=xt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((xt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+xt);return this._writableState.defaultEncoding=xt,this},Object.defineProperty(Rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Rt.prototype._write=function(xt,Nt,Tt){Tt(new Error("_write() is not implemented"))},Rt.prototype._writev=null,Rt.prototype.end=function(xt,Nt,Tt){var Vt=this._writableState;typeof xt=="function"?(Tt=xt,xt=null,Nt=null):typeof Nt=="function"&&(Tt=Nt,Nt=null),xt!=null&&this.write(xt,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Xt,Gt,Ut){Gt.ending=!0,wt(Xt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Xt.once("finish",Ut)),Gt.ended=!0,Xt.writable=!1}(this,Vt,Tt)},Object.defineProperty(Rt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(xt){this._writableState&&(this._writableState.destroyed=xt)}}),Rt.prototype.destroy=Et.destroy,Rt.prototype._undestroy=Et.undestroy,Rt.prototype._destroy=function(xt,Nt){this.end(),Nt(xt)}}).call(this,s(2),s(15).setImmediate,s(6))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){var _=s(16);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o){},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(156)),$=tt(s(25)),et=tt(s(30));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)(function(j,it,st,ht){return(0,_.default)(it)(j,(0,$.default)(st),ht)},4),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){function $(...et){if(_!==null){var tt=_;_=null,tt.apply(this,et)}}return Object.assign($,_),$},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){if(_===null)throw new Error("Callback was already called.");var et=_;_=null,et.apply(this,$)}},i.exports=o.default},function(i,o,s){(function(_,$){var et=s(16);i.exports=Ot;var tt,j=s(42);Ot.ReadableState=Rt,s(21).EventEmitter;var it=function(Pt,St){return Pt.listeners(St).length},st=s(70),ht=s(47).Buffer,_t=_.Uint8Array||function(){},gt=s(17);gt.inherits=s(7);var ft=s(162),ut=void 0;ut=ft&&ft.debuglog?ft.debuglog("stream"):function(){};var yt,Et=s(163),Mt=s(71);gt.inherits(Ot,st);var Ft=["error","close","destroy","pause","resume"];function Rt(Pt,St){Pt=Pt||{};var Zt=St instanceof(tt=tt||s(23));this.objectMode=!!Pt.objectMode,Zt&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var tn=Pt.highWaterMark,mn=Pt.readableHighWaterMark,yn=this.objectMode?16:16384;this.highWaterMark=tn||tn===0?tn:Zt&&(mn||mn===0)?mn:yn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(22).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function Ot(Pt){if(tt=tt||s(23),!(this instanceof Ot))return new Ot(Pt);this._readableState=new Rt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function pt(Pt,St,Zt,tn,mn){var yn,vn=Pt._readableState;return St===null?(vn.reading=!1,function(un,rn){if(!rn.ended){if(rn.decoder){var It=rn.decoder.end();It&&It.length&&(rn.buffer.push(It),rn.length+=rn.objectMode?1:It.length)}rn.ended=!0,on(un)}}(Pt,vn)):(mn||(yn=function(un,rn){var It;Dt=rn,ht.isBuffer(Dt)||Dt instanceof _t||typeof rn=="string"||rn===void 0||un.objectMode||(It=new TypeError("Invalid non-string/buffer chunk"));var Dt;return It}(vn,St)),yn?Pt.emit("error",yn):vn.objectMode||St&&St.length>0?(typeof St=="string"||vn.objectMode||Object.getPrototypeOf(St)===ht.prototype||(St=function(un){return ht.from(un)}(St)),tn?vn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Lt(Pt,vn,St,!0):vn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(vn.reading=!1,vn.decoder&&!Zt?(St=vn.decoder.write(St),vn.objectMode||St.length!==0?Lt(Pt,vn,St,!1):xt(Pt,vn)):Lt(Pt,vn,St,!1))):tn||(vn.reading=!1)),function(un){return!un.ended&&(un.needReadable||un.length<un.highWaterMark||un.length===0)}(vn)}function Lt(Pt,St,Zt,tn){St.flowing&&St.length===0&&!St.sync?(Pt.emit("data",Zt),Pt.read(0)):(St.length+=St.objectMode?1:Zt.length,tn?St.buffer.unshift(Zt):St.buffer.push(Zt),St.needReadable&&on(Pt)),xt(Pt,St)}Object.defineProperty(Ot.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),Ot.prototype.destroy=Mt.destroy,Ot.prototype._undestroy=Mt.undestroy,Ot.prototype._destroy=function(Pt,St){this.push(null),St(Pt)},Ot.prototype.push=function(Pt,St){var Zt,tn=this._readableState;return tn.objectMode?Zt=!0:typeof Pt=="string"&&((St=St||tn.defaultEncoding)!==tn.encoding&&(Pt=ht.from(Pt,St),St=""),Zt=!0),pt(this,Pt,St,!1,Zt)},Ot.prototype.unshift=function(Pt){return pt(this,Pt,null,!0,!1)},Ot.prototype.isPaused=function(){return this._readableState.flowing===!1},Ot.prototype.setEncoding=function(Pt){return yt||(yt=s(22).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,St){return Pt<=0||St.length===0&&St.ended?0:St.objectMode?1:Pt!=Pt?St.flowing&&St.length?St.buffer.head.data.length:St.length:(Pt>St.highWaterMark&&(St.highWaterMark=function(Zt){return Zt>=8388608?Zt=8388608:(Zt--,Zt|=Zt>>>1,Zt|=Zt>>>2,Zt|=Zt>>>4,Zt|=Zt>>>8,Zt|=Zt>>>16,Zt++),Zt}(Pt)),Pt<=St.length?Pt:St.ended?St.length:(St.needReadable=!0,0))}function on(Pt){var St=Pt._readableState;St.needReadable=!1,St.emittedReadable||(ut("emitReadable",St.flowing),St.emittedReadable=!0,St.sync?et.nextTick(wt,Pt):wt(Pt))}function wt(Pt){ut("emit readable"),Pt.emit("readable"),Xt(Pt)}function xt(Pt,St){St.readingMore||(St.readingMore=!0,et.nextTick(Nt,Pt,St))}function Nt(Pt,St){for(var Zt=St.length;!St.reading&&!St.flowing&&!St.ended&&St.length<St.highWaterMark&&(ut("maybeReadMore read 0"),Pt.read(0),Zt!==St.length);)Zt=St.length;St.readingMore=!1}function Tt(Pt){ut("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,St){St.reading||(ut("resume read 0"),Pt.read(0)),St.resumeScheduled=!1,St.awaitDrain=0,Pt.emit("resume"),Xt(Pt),St.flowing&&!St.reading&&Pt.read(0)}function Xt(Pt){var St=Pt._readableState;for(ut("flow",St.flowing);St.flowing&&Pt.read()!==null;);}function Gt(Pt,St){return St.length===0?null:(St.objectMode?Zt=St.buffer.shift():!Pt||Pt>=St.length?(Zt=St.decoder?St.buffer.join(""):St.buffer.length===1?St.buffer.head.data:St.buffer.concat(St.length),St.buffer.clear()):Zt=function(tn,mn,yn){var vn;return tn<mn.head.data.length?(vn=mn.head.data.slice(0,tn),mn.head.data=mn.head.data.slice(tn)):vn=tn===mn.head.data.length?mn.shift():yn?function(un,rn){var It=rn.head,Dt=1,Kt=It.data;for(un-=Kt.length;It=It.next;){var gn=It.data,hn=un>gn.length?gn.length:un;if(hn===gn.length?Kt+=gn:Kt+=gn.slice(0,un),(un-=hn)===0){hn===gn.length?(++Dt,It.next?rn.head=It.next:rn.head=rn.tail=null):(rn.head=It,It.data=gn.slice(hn));break}++Dt}return rn.length-=Dt,Kt}(tn,mn):function(un,rn){var It=ht.allocUnsafe(un),Dt=rn.head,Kt=1;for(Dt.data.copy(It),un-=Dt.data.length;Dt=Dt.next;){var gn=Dt.data,hn=un>gn.length?gn.length:un;if(gn.copy(It,It.length-un,0,hn),(un-=hn)===0){hn===gn.length?(++Kt,Dt.next?rn.head=Dt.next:rn.head=rn.tail=null):(rn.head=Dt,Dt.data=gn.slice(hn));break}++Kt}return rn.length-=Kt,It}(tn,mn),vn}(Pt,St.buffer,St.decoder),Zt);var Zt}function Ut(Pt){var St=Pt._readableState;if(St.length>0)throw new Error('"endReadable()" called on non-empty stream');St.endEmitted||(St.ended=!0,et.nextTick(Ht,St,Pt))}function Ht(Pt,St){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,St.readable=!1,St.emit("end"))}function qt(Pt,St){for(var Zt=0,tn=Pt.length;Zt<tn;Zt++)if(Pt[Zt]===St)return Zt;return-1}Ot.prototype.read=function(Pt){ut("read",Pt),Pt=parseInt(Pt,10);var St=this._readableState,Zt=Pt;if(Pt!==0&&(St.emittedReadable=!1),Pt===0&&St.needReadable&&(St.length>=St.highWaterMark||St.ended))return ut("read: emitReadable",St.length,St.ended),St.length===0&&St.ended?Ut(this):on(this),null;if((Pt=nn(Pt,St))===0&&St.ended)return St.length===0&&Ut(this),null;var tn,mn=St.needReadable;return ut("need readable",mn),(St.length===0||St.length-Pt<St.highWaterMark)&&ut("length less than watermark",mn=!0),St.ended||St.reading?ut("reading or ended",mn=!1):mn&&(ut("do read"),St.reading=!0,St.sync=!0,St.length===0&&(St.needReadable=!0),this._read(St.highWaterMark),St.sync=!1,St.reading||(Pt=nn(Zt,St))),(tn=Pt>0?Gt(Pt,St):null)===null?(St.needReadable=!0,Pt=0):St.length-=Pt,St.length===0&&(St.ended||(St.needReadable=!0),Zt!==Pt&&St.ended&&Ut(this)),tn!==null&&this.emit("data",tn),tn},Ot.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},Ot.prototype.pipe=function(Pt,St){var Zt=this,tn=this._readableState;switch(tn.pipesCount){case 0:tn.pipes=Pt;break;case 1:tn.pipes=[tn.pipes,Pt];break;default:tn.pipes.push(Pt)}tn.pipesCount+=1,ut("pipe count=%d opts=%j",tn.pipesCount,St);var mn=(!St||St.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?vn:xn;function yn(Mn,qn){ut("onunpipe"),Mn===Zt&&qn&&qn.hasUnpiped===!1&&(qn.hasUnpiped=!0,ut("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",un),Pt.removeListener("error",Kt),Pt.removeListener("unpipe",yn),Zt.removeListener("end",vn),Zt.removeListener("end",xn),Zt.removeListener("data",Dt),rn=!0,!tn.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||un())}function vn(){ut("onend"),Pt.end()}tn.endEmitted?et.nextTick(mn):Zt.once("end",mn),Pt.on("unpipe",yn);var un=function(Mn){return function(){var qn=Mn._readableState;ut("pipeOnDrain",qn.awaitDrain),qn.awaitDrain&&qn.awaitDrain--,qn.awaitDrain===0&&it(Mn,"data")&&(qn.flowing=!0,Xt(Mn))}}(Zt);Pt.on("drain",un);var rn=!1,It=!1;function Dt(Mn){ut("ondata"),It=!1,Pt.write(Mn)!==!1||It||((tn.pipesCount===1&&tn.pipes===Pt||tn.pipesCount>1&&qt(tn.pipes,Pt)!==-1)&&!rn&&(ut("false write response, pause",Zt._readableState.awaitDrain),Zt._readableState.awaitDrain++,It=!0),Zt.pause())}function Kt(Mn){ut("onerror",Mn),xn(),Pt.removeListener("error",Kt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),xn()}function hn(){ut("onfinish"),Pt.removeListener("close",gn),xn()}function xn(){ut("unpipe"),Zt.unpipe(Pt)}return Zt.on("data",Dt),function(Mn,qn,Ir){if(typeof Mn.prependListener=="function")return Mn.prependListener(qn,Ir);Mn._events&&Mn._events[qn]?j(Mn._events[qn])?Mn._events[qn].unshift(Ir):Mn._events[qn]=[Ir,Mn._events[qn]]:Mn.on(qn,Ir)}(Pt,"error",Kt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",Zt),tn.flowing||(ut("pipe resume"),Zt.resume()),Pt},Ot.prototype.unpipe=function(Pt){var St=this._readableState,Zt={hasUnpiped:!1};if(St.pipesCount===0)return this;if(St.pipesCount===1)return Pt&&Pt!==St.pipes||(Pt||(Pt=St.pipes),St.pipes=null,St.pipesCount=0,St.flowing=!1,Pt&&Pt.emit("unpipe",this,Zt)),this;if(!Pt){var tn=St.pipes,mn=St.pipesCount;St.pipes=null,St.pipesCount=0,St.flowing=!1;for(var yn=0;yn<mn;yn++)tn[yn].emit("unpipe",this,Zt);return this}var vn=qt(St.pipes,Pt);return vn===-1||(St.pipes.splice(vn,1),St.pipesCount-=1,St.pipesCount===1&&(St.pipes=St.pipes[0]),Pt.emit("unpipe",this,Zt)),this},Ot.prototype.on=function(Pt,St){var Zt=st.prototype.on.call(this,Pt,St);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var tn=this._readableState;tn.endEmitted||tn.readableListening||(tn.readableListening=tn.needReadable=!0,tn.emittedReadable=!1,tn.reading?tn.length&&on(this):et.nextTick(Tt,this))}return Zt},Ot.prototype.addListener=Ot.prototype.on,Ot.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ut("resume"),Pt.flowing=!0,function(St,Zt){Zt.resumeScheduled||(Zt.resumeScheduled=!0,et.nextTick(Vt,St,Zt))}(this,Pt)),this},Ot.prototype.pause=function(){return ut("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ut("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ot.prototype.wrap=function(Pt){var St=this,Zt=this._readableState,tn=!1;for(var mn in Pt.on("end",function(){if(ut("wrapped end"),Zt.decoder&&!Zt.ended){var vn=Zt.decoder.end();vn&&vn.length&&St.push(vn)}St.push(null)}),Pt.on("data",function(vn){ut("wrapped data"),Zt.decoder&&(vn=Zt.decoder.write(vn)),Zt.objectMode&&vn==null||(Zt.objectMode||vn&&vn.length)&&(St.push(vn)||(tn=!0,Pt.pause()))}),Pt)this[mn]===void 0&&typeof Pt[mn]=="function"&&(this[mn]=function(vn){return function(){return Pt[vn].apply(Pt,arguments)}}(mn));for(var yn=0;yn<Ft.length;yn++)Pt.on(Ft[yn],this.emit.bind(this,Ft[yn]));return this._read=function(vn){ut("wrapped _read",vn),tn&&(tn=!1,Pt.resume())},this},Object.defineProperty(Ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Ot._fromList=Gt}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){var _=s(16);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o,s){i.exports=tt;var _=s(23),$=s(17);function et(st,ht){var _t=this._transformState;_t.transforming=!1;var gt=_t.writecb;if(!gt)return this.emit("error",new Error("write callback called multiple times"));_t.writechunk=null,_t.writecb=null,ht!=null&&this.push(ht),gt(st);var ft=this._readableState;ft.reading=!1,(ft.needReadable||ft.length<ft.highWaterMark)&&this._read(ft.highWaterMark)}function tt(st){if(!(this instanceof tt))return new tt(st);_.call(this,st),this._transformState={afterTransform:et.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,st&&(typeof st.transform=="function"&&(this._transform=st.transform),typeof st.flush=="function"&&(this._flush=st.flush)),this.on("prefinish",j)}function j(){var st=this;typeof this._flush=="function"?this._flush(function(ht,_t){it(st,ht,_t)}):it(this,null,null)}function it(st,ht,_t){if(ht)return st.emit("error",ht);if(_t!=null&&st.push(_t),st._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(st._transformState.transforming)throw new Error("Calling transform done when still transforming");return st.push(null)}$.inherits=s(7),$.inherits(tt,_),tt.prototype.push=function(st,ht){return this._transformState.needTransform=!1,_.prototype.push.call(this,st,ht)},tt.prototype._transform=function(st,ht,_t){throw new Error("_transform() is not implemented")},tt.prototype._write=function(st,ht,_t){var gt=this._transformState;if(gt.writecb=_t,gt.writechunk=st,gt.writeencoding=ht,!gt.transforming){var ft=this._readableState;(gt.needTransform||ft.needReadable||ft.length<ft.highWaterMark)&&this._read(ft.highWaterMark)}},tt.prototype._read=function(st){var ht=this._transformState;ht.writechunk!==null&&ht.writecb&&!ht.transforming?(ht.transforming=!0,this._transform(ht.writechunk,ht.writeencoding,ht.afterTransform)):ht.needTransform=!0},tt.prototype._destroy=function(st,ht){var _t=this;_.prototype._destroy.call(this,st,function(gt){ht(gt),_t.emit("close")})}},function(i,o,s){i.exports=s(48)},function(i,o,s){(function(_){var $=s(170);function et(wt,xt){if(wt===xt)return 0;for(var Nt=wt.length,Tt=xt.length,Vt=0,Xt=Math.min(Nt,Tt);Vt<Xt;++Vt)if(wt[Vt]!==xt[Vt]){Nt=wt[Vt],Tt=xt[Vt];break}return Nt<Tt?-1:Tt<Nt?1:0}function tt(wt){return _.Buffer&&typeof _.Buffer.isBuffer=="function"?_.Buffer.isBuffer(wt):!(wt==null||!wt._isBuffer)}var j=s(13),it=Object.prototype.hasOwnProperty,st=Array.prototype.slice,ht=function(){}.name==="foo";function _t(wt){return Object.prototype.toString.call(wt)}function gt(wt){return!tt(wt)&&typeof _.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(wt):!!wt&&(wt instanceof DataView||!!(wt.buffer&&wt.buffer instanceof ArrayBuffer)))}var ft=i.exports=Rt,ut=/\s*function\s+([^\(\s]*)\s*/;function yt(wt){if(j.isFunction(wt)){if(ht)return wt.name;var xt=wt.toString().match(ut);return xt&&xt[1]}}function Et(wt,xt){return typeof wt=="string"?wt.length<xt?wt:wt.slice(0,xt):wt}function Mt(wt){if(ht||!j.isFunction(wt))return j.inspect(wt);var xt=yt(wt);return"[Function"+(xt?": "+xt:"")+"]"}function Ft(wt,xt,Nt,Tt,Vt){throw new ft.AssertionError({message:Nt,actual:wt,expected:xt,operator:Tt,stackStartFunction:Vt})}function Rt(wt,xt){wt||Ft(wt,!0,xt,"==",ft.ok)}function Ot(wt,xt,Nt,Tt){if(wt===xt)return!0;if(tt(wt)&&tt(xt))return et(wt,xt)===0;if(j.isDate(wt)&&j.isDate(xt))return wt.getTime()===xt.getTime();if(j.isRegExp(wt)&&j.isRegExp(xt))return wt.source===xt.source&&wt.global===xt.global&&wt.multiline===xt.multiline&&wt.lastIndex===xt.lastIndex&&wt.ignoreCase===xt.ignoreCase;if(wt!==null&&typeof wt=="object"||xt!==null&&typeof xt=="object"){if(gt(wt)&&gt(xt)&&_t(wt)===_t(xt)&&!(wt instanceof Float32Array||wt instanceof Float64Array))return et(new Uint8Array(wt.buffer),new Uint8Array(xt.buffer))===0;if(tt(wt)!==tt(xt))return!1;var Vt=(Tt=Tt||{actual:[],expected:[]}).actual.indexOf(wt);return Vt!==-1&&Vt===Tt.expected.indexOf(xt)||(Tt.actual.push(wt),Tt.expected.push(xt),function(Xt,Gt,Ut,Ht){if(Xt==null||Gt==null)return!1;if(j.isPrimitive(Xt)||j.isPrimitive(Gt))return Xt===Gt;if(Ut&&Object.getPrototypeOf(Xt)!==Object.getPrototypeOf(Gt))return!1;var qt=pt(Xt),Pt=pt(Gt);if(qt&&!Pt||!qt&&Pt)return!1;if(qt)return Xt=st.call(Xt),Gt=st.call(Gt),Ot(Xt,Gt,Ut);var St,Zt,tn=on(Xt),mn=on(Gt);if(tn.length!==mn.length)return!1;for(tn.sort(),mn.sort(),Zt=tn.length-1;Zt>=0;Zt--)if(tn[Zt]!==mn[Zt])return!1;for(Zt=tn.length-1;Zt>=0;Zt--)if(St=tn[Zt],!Ot(Xt[St],Gt[St],Ut,Ht))return!1;return!0}(wt,xt,Nt,Tt))}return Nt?wt===xt:wt==xt}function pt(wt){return Object.prototype.toString.call(wt)=="[object Arguments]"}function Lt(wt,xt){if(!wt||!xt)return!1;if(Object.prototype.toString.call(xt)=="[object RegExp]")return xt.test(wt);try{if(wt instanceof xt)return!0}catch{}return!Error.isPrototypeOf(xt)&&xt.call({},wt)===!0}function nn(wt,xt,Nt,Tt){var Vt;if(typeof xt!="function")throw new TypeError('"block" argument must be a function');typeof Nt=="string"&&(Tt=Nt,Nt=null),Vt=function(Ut){var Ht;try{Ut()}catch(qt){Ht=qt}return Ht}(xt),Tt=(Nt&&Nt.name?" ("+Nt.name+").":".")+(Tt?" "+Tt:"."),wt&&!Vt&&Ft(Vt,Nt,"Missing expected exception"+Tt);var Xt=typeof Tt=="string",Gt=!wt&&Vt&&!Nt;if((!wt&&j.isError(Vt)&&Xt&&Lt(Vt,Nt)||Gt)&&Ft(Vt,Nt,"Got unwanted exception"+Tt),wt&&Vt&&Nt&&!Lt(Vt,Nt)||!wt&&Vt)throw Vt}ft.AssertionError=function(wt){this.name="AssertionError",this.actual=wt.actual,this.expected=wt.expected,this.operator=wt.operator,wt.message?(this.message=wt.message,this.generatedMessage=!1):(this.message=function(Ut){return Et(Mt(Ut.actual),128)+" "+Ut.operator+" "+Et(Mt(Ut.expected),128)}(this),this.generatedMessage=!0);var xt=wt.stackStartFunction||Ft;if(Error.captureStackTrace)Error.captureStackTrace(this,xt);else{var Nt=new Error;if(Nt.stack){var Tt=Nt.stack,Vt=yt(xt),Xt=Tt.indexOf(`
`+Vt);if(Xt>=0){var Gt=Tt.indexOf(`
`,Xt+1);Tt=Tt.substring(Gt+1)}this.stack=Tt}}},j.inherits(ft.AssertionError,Error),ft.fail=Ft,ft.ok=Rt,ft.equal=function(wt,xt,Nt){wt!=xt&&Ft(wt,xt,Nt,"==",ft.equal)},ft.notEqual=function(wt,xt,Nt){wt==xt&&Ft(wt,xt,Nt,"!=",ft.notEqual)},ft.deepEqual=function(wt,xt,Nt){Ot(wt,xt,!1)||Ft(wt,xt,Nt,"deepEqual",ft.deepEqual)},ft.deepStrictEqual=function(wt,xt,Nt){Ot(wt,xt,!0)||Ft(wt,xt,Nt,"deepStrictEqual",ft.deepStrictEqual)},ft.notDeepEqual=function(wt,xt,Nt){Ot(wt,xt,!1)&&Ft(wt,xt,Nt,"notDeepEqual",ft.notDeepEqual)},ft.notDeepStrictEqual=function wt(xt,Nt,Tt){Ot(xt,Nt,!0)&&Ft(xt,Nt,Tt,"notDeepStrictEqual",wt)},ft.strictEqual=function(wt,xt,Nt){wt!==xt&&Ft(wt,xt,Nt,"===",ft.strictEqual)},ft.notStrictEqual=function(wt,xt,Nt){wt===xt&&Ft(wt,xt,Nt,"!==",ft.notStrictEqual)},ft.throws=function(wt,xt,Nt){nn(!0,wt,xt,Nt)},ft.doesNotThrow=function(wt,xt,Nt){nn(!1,wt,xt,Nt)},ft.ifError=function(wt){if(wt)throw wt},ft.strict=$(function wt(xt,Nt){xt||Ft(xt,!0,Nt,"==",wt)},ft,{equal:ft.strictEqual,deepEqual:ft.deepStrictEqual,notEqual:ft.notStrictEqual,notDeepEqual:ft.notDeepStrictEqual}),ft.strict.strict=ft.strict;var on=Object.keys||function(wt){var xt=[];for(var Nt in wt)it.call(wt,Nt)&&xt.push(Nt);return xt}}).call(this,s(6))},function(i,o,s){i.exports=function(_,$,et,tt){for(var j=65535&_|0,it=_>>>16&65535|0,st=0;et!==0;){et-=st=et>2e3?2e3:et;do it=it+(j=j+$[tt++]|0)|0;while(--st);j%=65521,it%=65521}return j|it<<16|0}},function(i,o,s){var _=function(){for(var $,et=[],tt=0;tt<256;tt++){$=tt;for(var j=0;j<8;j++)$=1&$?3988292384^$>>>1:$>>>1;et[tt]=$}return et}();i.exports=function($,et,tt,j){var it=_,st=j+tt;$^=-1;for(var ht=j;ht<st;ht++)$=$>>>8^it[255&($^et[ht])];return-1^$}},function(i,o,s){(function(_,$){var et;i.exports=xt,xt.ReadableState=wt,s(21).EventEmitter;var tt=function(un,rn){return un.listeners(rn).length},j=s(78),it=s(5).Buffer,st=_.Uint8Array||function(){},ht,_t=s(179);ht=_t&&_t.debuglog?_t.debuglog("stream"):function(){};var gt,ft,ut,yt=s(180),Et=s(79),Mt=s(80).getHighWaterMark,Ft=s(26).codes,Rt=Ft.ERR_INVALID_ARG_TYPE,Ot=Ft.ERR_STREAM_PUSH_AFTER_EOF,pt=Ft.ERR_METHOD_NOT_IMPLEMENTED,Lt=Ft.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s(7)(xt,j);var nn=Et.errorOrDestroy,on=["error","close","destroy","pause","resume"];function wt(un,rn,It){et=et||s(27),un=un||{},typeof It!="boolean"&&(It=rn instanceof et),this.objectMode=!!un.objectMode,It&&(this.objectMode=this.objectMode||!!un.readableObjectMode),this.highWaterMark=Mt(this,un,"readableHighWaterMark",It),this.buffer=new yt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=un.emitClose!==!1,this.autoDestroy=!!un.autoDestroy,this.destroyed=!1,this.defaultEncoding=un.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,un.encoding&&(gt||(gt=s(22).StringDecoder),this.decoder=new gt(un.encoding),this.encoding=un.encoding)}function xt(un){if(et=et||s(27),!(this instanceof xt))return new xt(un);var rn=this instanceof et;this._readableState=new wt(un,this,rn),this.readable=!0,un&&(typeof un.read=="function"&&(this._read=un.read),typeof un.destroy=="function"&&(this._destroy=un.destroy)),j.call(this)}function Nt(un,rn,It,Dt,Kt){ht("readableAddChunk",rn);var gn,hn=un._readableState;if(rn===null)hn.reading=!1,function(xn,Mn){if(ht("onEofChunk"),!Mn.ended){if(Mn.decoder){var qn=Mn.decoder.end();qn&&qn.length&&(Mn.buffer.push(qn),Mn.length+=Mn.objectMode?1:qn.length)}Mn.ended=!0,Mn.sync?Xt(xn):(Mn.needReadable=!1,Mn.emittedReadable||(Mn.emittedReadable=!0,Gt(xn)))}}(un,hn);else if(Kt||(gn=function(xn,Mn){var qn;Ir=Mn,it.isBuffer(Ir)||Ir instanceof st||typeof Mn=="string"||Mn===void 0||xn.objectMode||(qn=new Rt("chunk",["string","Buffer","Uint8Array"],Mn));var Ir;return qn}(hn,rn)),gn)nn(un,gn);else if(hn.objectMode||rn&&rn.length>0)if(typeof rn=="string"||hn.objectMode||Object.getPrototypeOf(rn)===it.prototype||(rn=function(xn){return it.from(xn)}(rn)),Dt)hn.endEmitted?nn(un,new Lt):Tt(un,hn,rn,!0);else if(hn.ended)nn(un,new Ot);else{if(hn.destroyed)return!1;hn.reading=!1,hn.decoder&&!It?(rn=hn.decoder.write(rn),hn.objectMode||rn.length!==0?Tt(un,hn,rn,!1):Ut(un,hn)):Tt(un,hn,rn,!1)}else Dt||(hn.reading=!1,Ut(un,hn));return!hn.ended&&(hn.length<hn.highWaterMark||hn.length===0)}function Tt(un,rn,It,Dt){rn.flowing&&rn.length===0&&!rn.sync?(rn.awaitDrain=0,un.emit("data",It)):(rn.length+=rn.objectMode?1:It.length,Dt?rn.buffer.unshift(It):rn.buffer.push(It),rn.needReadable&&Xt(un)),Ut(un,rn)}Object.defineProperty(xt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(un){this._readableState&&(this._readableState.destroyed=un)}}),xt.prototype.destroy=Et.destroy,xt.prototype._undestroy=Et.undestroy,xt.prototype._destroy=function(un,rn){rn(un)},xt.prototype.push=function(un,rn){var It,Dt=this._readableState;return Dt.objectMode?It=!0:typeof un=="string"&&((rn=rn||Dt.defaultEncoding)!==Dt.encoding&&(un=it.from(un,rn),rn=""),It=!0),Nt(this,un,rn,!1,It)},xt.prototype.unshift=function(un){return Nt(this,un,null,!0,!1)},xt.prototype.isPaused=function(){return this._readableState.flowing===!1},xt.prototype.setEncoding=function(un){gt||(gt=s(22).StringDecoder);var rn=new gt(un);this._readableState.decoder=rn,this._readableState.encoding=this._readableState.decoder.encoding;for(var It=this._readableState.buffer.head,Dt="";It!==null;)Dt+=rn.write(It.data),It=It.next;return this._readableState.buffer.clear(),Dt!==""&&this._readableState.buffer.push(Dt),this._readableState.length=Dt.length,this};function Vt(un,rn){return un<=0||rn.length===0&&rn.ended?0:rn.objectMode?1:un!=un?rn.flowing&&rn.length?rn.buffer.head.data.length:rn.length:(un>rn.highWaterMark&&(rn.highWaterMark=function(It){return It>=1073741824?It=1073741824:(It--,It|=It>>>1,It|=It>>>2,It|=It>>>4,It|=It>>>8,It|=It>>>16,It++),It}(un)),un<=rn.length?un:rn.ended?rn.length:(rn.needReadable=!0,0))}function Xt(un){var rn=un._readableState;ht("emitReadable",rn.needReadable,rn.emittedReadable),rn.needReadable=!1,rn.emittedReadable||(ht("emitReadable",rn.flowing),rn.emittedReadable=!0,$.nextTick(Gt,un))}function Gt(un){var rn=un._readableState;ht("emitReadable_",rn.destroyed,rn.length,rn.ended),rn.destroyed||!rn.length&&!rn.ended||(un.emit("readable"),rn.emittedReadable=!1),rn.needReadable=!rn.flowing&&!rn.ended&&rn.length<=rn.highWaterMark,Zt(un)}function Ut(un,rn){rn.readingMore||(rn.readingMore=!0,$.nextTick(Ht,un,rn))}function Ht(un,rn){for(;!rn.reading&&!rn.ended&&(rn.length<rn.highWaterMark||rn.flowing&&rn.length===0);){var It=rn.length;if(ht("maybeReadMore read 0"),un.read(0),It===rn.length)break}rn.readingMore=!1}function qt(un){var rn=un._readableState;rn.readableListening=un.listenerCount("readable")>0,rn.resumeScheduled&&!rn.paused?rn.flowing=!0:un.listenerCount("data")>0&&un.resume()}function Pt(un){ht("readable nexttick read 0"),un.read(0)}function St(un,rn){ht("resume",rn.reading),rn.reading||un.read(0),rn.resumeScheduled=!1,un.emit("resume"),Zt(un),rn.flowing&&!rn.reading&&un.read(0)}function Zt(un){var rn=un._readableState;for(ht("flow",rn.flowing);rn.flowing&&un.read()!==null;);}function tn(un,rn){return rn.length===0?null:(rn.objectMode?It=rn.buffer.shift():!un||un>=rn.length?(It=rn.decoder?rn.buffer.join(""):rn.buffer.length===1?rn.buffer.first():rn.buffer.concat(rn.length),rn.buffer.clear()):It=rn.buffer.consume(un,rn.decoder),It);var It}function mn(un){var rn=un._readableState;ht("endReadable",rn.endEmitted),rn.endEmitted||(rn.ended=!0,$.nextTick(yn,rn,un))}function yn(un,rn){if(ht("endReadableNT",un.endEmitted,un.length),!un.endEmitted&&un.length===0&&(un.endEmitted=!0,rn.readable=!1,rn.emit("end"),un.autoDestroy)){var It=rn._writableState;(!It||It.autoDestroy&&It.finished)&&rn.destroy()}}function vn(un,rn){for(var It=0,Dt=un.length;It<Dt;It++)if(un[It]===rn)return It;return-1}xt.prototype.read=function(un){ht("read",un),un=parseInt(un,10);var rn=this._readableState,It=un;if(un!==0&&(rn.emittedReadable=!1),un===0&&rn.needReadable&&((rn.highWaterMark!==0?rn.length>=rn.highWaterMark:rn.length>0)||rn.ended))return ht("read: emitReadable",rn.length,rn.ended),rn.length===0&&rn.ended?mn(this):Xt(this),null;if((un=Vt(un,rn))===0&&rn.ended)return rn.length===0&&mn(this),null;var Dt,Kt=rn.needReadable;return ht("need readable",Kt),(rn.length===0||rn.length-un<rn.highWaterMark)&&ht("length less than watermark",Kt=!0),rn.ended||rn.reading?ht("reading or ended",Kt=!1):Kt&&(ht("do read"),rn.reading=!0,rn.sync=!0,rn.length===0&&(rn.needReadable=!0),this._read(rn.highWaterMark),rn.sync=!1,rn.reading||(un=Vt(It,rn))),(Dt=un>0?tn(un,rn):null)===null?(rn.needReadable=rn.length<=rn.highWaterMark,un=0):(rn.length-=un,rn.awaitDrain=0),rn.length===0&&(rn.ended||(rn.needReadable=!0),It!==un&&rn.ended&&mn(this)),Dt!==null&&this.emit("data",Dt),Dt},xt.prototype._read=function(un){nn(this,new pt("_read()"))},xt.prototype.pipe=function(un,rn){var It=this,Dt=this._readableState;switch(Dt.pipesCount){case 0:Dt.pipes=un;break;case 1:Dt.pipes=[Dt.pipes,un];break;default:Dt.pipes.push(un)}Dt.pipesCount+=1,ht("pipe count=%d opts=%j",Dt.pipesCount,rn);var Kt=(!rn||rn.end!==!1)&&un!==$.stdout&&un!==$.stderr?hn:fo;function gn(Gr,Yr){ht("onunpipe"),Gr===It&&Yr&&Yr.hasUnpiped===!1&&(Yr.hasUnpiped=!0,ht("cleanup"),un.removeListener("close",_i),un.removeListener("finish",Ur),un.removeListener("drain",xn),un.removeListener("error",Ir),un.removeListener("unpipe",gn),It.removeListener("end",hn),It.removeListener("end",fo),It.removeListener("data",qn),Mn=!0,!Dt.awaitDrain||un._writableState&&!un._writableState.needDrain||xn())}function hn(){ht("onend"),un.end()}Dt.endEmitted?$.nextTick(Kt):It.once("end",Kt),un.on("unpipe",gn);var xn=function(Gr){return function(){var Yr=Gr._readableState;ht("pipeOnDrain",Yr.awaitDrain),Yr.awaitDrain&&Yr.awaitDrain--,Yr.awaitDrain===0&&tt(Gr,"data")&&(Yr.flowing=!0,Zt(Gr))}}(It);un.on("drain",xn);var Mn=!1;function qn(Gr){ht("ondata");var Yr=un.write(Gr);ht("dest.write",Yr),Yr===!1&&((Dt.pipesCount===1&&Dt.pipes===un||Dt.pipesCount>1&&vn(Dt.pipes,un)!==-1)&&!Mn&&(ht("false write response, pause",Dt.awaitDrain),Dt.awaitDrain++),It.pause())}function Ir(Gr){ht("onerror",Gr),fo(),un.removeListener("error",Ir),tt(un,"error")===0&&nn(un,Gr)}function _i(){un.removeListener("finish",Ur),fo()}function Ur(){ht("onfinish"),un.removeListener("close",_i),fo()}function fo(){ht("unpipe"),It.unpipe(un)}return It.on("data",qn),function(Gr,Yr,to){if(typeof Gr.prependListener=="function")return Gr.prependListener(Yr,to);Gr._events&&Gr._events[Yr]?Array.isArray(Gr._events[Yr])?Gr._events[Yr].unshift(to):Gr._events[Yr]=[to,Gr._events[Yr]]:Gr.on(Yr,to)}(un,"error",Ir),un.once("close",_i),un.once("finish",Ur),un.emit("pipe",It),Dt.flowing||(ht("pipe resume"),It.resume()),un},xt.prototype.unpipe=function(un){var rn=this._readableState,It={hasUnpiped:!1};if(rn.pipesCount===0)return this;if(rn.pipesCount===1)return un&&un!==rn.pipes||(un||(un=rn.pipes),rn.pipes=null,rn.pipesCount=0,rn.flowing=!1,un&&un.emit("unpipe",this,It)),this;if(!un){var Dt=rn.pipes,Kt=rn.pipesCount;rn.pipes=null,rn.pipesCount=0,rn.flowing=!1;for(var gn=0;gn<Kt;gn++)Dt[gn].emit("unpipe",this,{hasUnpiped:!1});return this}var hn=vn(rn.pipes,un);return hn===-1||(rn.pipes.splice(hn,1),rn.pipesCount-=1,rn.pipesCount===1&&(rn.pipes=rn.pipes[0]),un.emit("unpipe",this,It)),this},xt.prototype.on=function(un,rn){var It=j.prototype.on.call(this,un,rn),Dt=this._readableState;return un==="data"?(Dt.readableListening=this.listenerCount("readable")>0,Dt.flowing!==!1&&this.resume()):un==="readable"&&(Dt.endEmitted||Dt.readableListening||(Dt.readableListening=Dt.needReadable=!0,Dt.flowing=!1,Dt.emittedReadable=!1,ht("on readable",Dt.length,Dt.reading),Dt.length?Xt(this):Dt.reading||$.nextTick(Pt,this))),It},xt.prototype.addListener=xt.prototype.on,xt.prototype.removeListener=function(un,rn){var It=j.prototype.removeListener.call(this,un,rn);return un==="readable"&&$.nextTick(qt,this),It},xt.prototype.removeAllListeners=function(un){var rn=j.prototype.removeAllListeners.apply(this,arguments);return un!=="readable"&&un!==void 0||$.nextTick(qt,this),rn},xt.prototype.resume=function(){var un=this._readableState;return un.flowing||(ht("resume"),un.flowing=!un.readableListening,function(rn,It){It.resumeScheduled||(It.resumeScheduled=!0,$.nextTick(St,rn,It))}(this,un)),un.paused=!1,this},xt.prototype.pause=function(){return ht("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ht("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},xt.prototype.wrap=function(un){var rn=this,It=this._readableState,Dt=!1;for(var Kt in un.on("end",function(){if(ht("wrapped end"),It.decoder&&!It.ended){var hn=It.decoder.end();hn&&hn.length&&rn.push(hn)}rn.push(null)}),un.on("data",function(hn){ht("wrapped data"),It.decoder&&(hn=It.decoder.write(hn)),It.objectMode&&hn==null||(It.objectMode||hn&&hn.length)&&(rn.push(hn)||(Dt=!0,un.pause()))}),un)this[Kt]===void 0&&typeof un[Kt]=="function"&&(this[Kt]=function(hn){return function(){return un[hn].apply(un,arguments)}}(Kt));for(var gn=0;gn<on.length;gn++)un.on(on[gn],this.emit.bind(this,on[gn]));return this._read=function(hn){ht("wrapped _read",hn),Dt&&(Dt=!1,un.resume())},this},typeof Symbol=="function"&&(xt.prototype[Symbol.asyncIterator]=function(){return ft===void 0&&(ft=s(182)),ft(this)}),Object.defineProperty(xt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(xt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(xt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(un){this._readableState&&(this._readableState.flowing=un)}}),xt._fromList=tn,Object.defineProperty(xt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(xt.from=function(un,rn){return ut===void 0&&(ut=s(183)),ut(xt,un,rn)})}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){(function(_){function $(j,it){tt(j,it),et(j)}function et(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function tt(j,it){j.emit("error",it)}i.exports={destroy:function(j,it){var st=this,ht=this._readableState&&this._readableState.destroyed,_t=this._writableState&&this._writableState.destroyed;return ht||_t?(it?it(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(tt,this,j)):_.nextTick(tt,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(gt){!it&&gt?st._writableState?st._writableState.errorEmitted?_.nextTick(et,st):(st._writableState.errorEmitted=!0,_.nextTick($,st,gt)):_.nextTick($,st,gt):it?(_.nextTick(et,st),it(gt)):_.nextTick(et,st)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(j,it){var st=j._readableState,ht=j._writableState;st&&st.autoDestroy||ht&&ht.autoDestroy?j.destroy(it):j.emit("error",it)}}}).call(this,s(2))},function(i,o,s){var _=s(26).codes.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function($,et,tt,j){var it=function(st,ht,_t){return st.highWaterMark!=null?st.highWaterMark:ht?st[_t]:null}(et,j,tt);if(it!=null){if(!isFinite(it)||Math.floor(it)!==it||it<0)throw new _(j?tt:"highWaterMark",it);return Math.floor(it)}return $.objectMode?16:16384}}},function(i,o,s){(function(_,$){function et(Ht){var qt=this;this.next=null,this.entry=null,this.finish=function(){(function(Pt,St,Zt){var tn=Pt.entry;for(Pt.entry=null;tn;){var mn=tn.callback;St.pendingcb--,mn(Zt),tn=tn.next}St.corkedRequestsFree.next=Pt})(qt,Ht)}}var tt;i.exports=xt,xt.WritableState=wt;var j={deprecate:s(43)},it=s(78),st=s(5).Buffer,ht=_.Uint8Array||function(){},_t,gt=s(79),ft=s(80).getHighWaterMark,ut=s(26).codes,yt=ut.ERR_INVALID_ARG_TYPE,Et=ut.ERR_METHOD_NOT_IMPLEMENTED,Mt=ut.ERR_MULTIPLE_CALLBACK,Ft=ut.ERR_STREAM_CANNOT_PIPE,Rt=ut.ERR_STREAM_DESTROYED,Ot=ut.ERR_STREAM_NULL_VALUES,pt=ut.ERR_STREAM_WRITE_AFTER_END,Lt=ut.ERR_UNKNOWN_ENCODING,nn=gt.errorOrDestroy;function on(){}function wt(Ht,qt,Pt){tt=tt||s(27),Ht=Ht||{},typeof Pt!="boolean"&&(Pt=qt instanceof tt),this.objectMode=!!Ht.objectMode,Pt&&(this.objectMode=this.objectMode||!!Ht.writableObjectMode),this.highWaterMark=ft(this,Ht,"writableHighWaterMark",Pt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var St=Ht.decodeStrings===!1;this.decodeStrings=!St,this.defaultEncoding=Ht.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Zt){(function(tn,mn){var yn=tn._writableState,vn=yn.sync,un=yn.writecb;if(typeof un!="function")throw new Mt;if(function(It){It.writing=!1,It.writecb=null,It.length-=It.writelen,It.writelen=0}(yn),mn)(function(It,Dt,Kt,gn,hn){--Dt.pendingcb,Kt?($.nextTick(hn,gn),$.nextTick(Ut,It,Dt),It._writableState.errorEmitted=!0,nn(It,gn)):(hn(gn),It._writableState.errorEmitted=!0,nn(It,gn),Ut(It,Dt))})(tn,yn,vn,mn,un);else{var rn=Xt(yn)||tn.destroyed;rn||yn.corked||yn.bufferProcessing||!yn.bufferedRequest||Vt(tn,yn),vn?$.nextTick(Tt,tn,yn,rn,un):Tt(tn,yn,rn,un)}})(qt,Zt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ht.emitClose!==!1,this.autoDestroy=!!Ht.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new et(this)}function xt(Ht){var qt=this instanceof(tt=tt||s(27));if(!qt&&!_t.call(xt,this))return new xt(Ht);this._writableState=new wt(Ht,this,qt),this.writable=!0,Ht&&(typeof Ht.write=="function"&&(this._write=Ht.write),typeof Ht.writev=="function"&&(this._writev=Ht.writev),typeof Ht.destroy=="function"&&(this._destroy=Ht.destroy),typeof Ht.final=="function"&&(this._final=Ht.final)),it.call(this)}function Nt(Ht,qt,Pt,St,Zt,tn,mn){qt.writelen=St,qt.writecb=mn,qt.writing=!0,qt.sync=!0,qt.destroyed?qt.onwrite(new Rt("write")):Pt?Ht._writev(Zt,qt.onwrite):Ht._write(Zt,tn,qt.onwrite),qt.sync=!1}function Tt(Ht,qt,Pt,St){Pt||function(Zt,tn){tn.length===0&&tn.needDrain&&(tn.needDrain=!1,Zt.emit("drain"))}(Ht,qt),qt.pendingcb--,St(),Ut(Ht,qt)}function Vt(Ht,qt){qt.bufferProcessing=!0;var Pt=qt.bufferedRequest;if(Ht._writev&&Pt&&Pt.next){var St=qt.bufferedRequestCount,Zt=new Array(St),tn=qt.corkedRequestsFree;tn.entry=Pt;for(var mn=0,yn=!0;Pt;)Zt[mn]=Pt,Pt.isBuf||(yn=!1),Pt=Pt.next,mn+=1;Zt.allBuffers=yn,Nt(Ht,qt,!0,qt.length,Zt,"",tn.finish),qt.pendingcb++,qt.lastBufferedRequest=null,tn.next?(qt.corkedRequestsFree=tn.next,tn.next=null):qt.corkedRequestsFree=new et(qt),qt.bufferedRequestCount=0}else{for(;Pt;){var vn=Pt.chunk,un=Pt.encoding,rn=Pt.callback;if(Nt(Ht,qt,!1,qt.objectMode?1:vn.length,vn,un,rn),Pt=Pt.next,qt.bufferedRequestCount--,qt.writing)break}Pt===null&&(qt.lastBufferedRequest=null)}qt.bufferedRequest=Pt,qt.bufferProcessing=!1}function Xt(Ht){return Ht.ending&&Ht.length===0&&Ht.bufferedRequest===null&&!Ht.finished&&!Ht.writing}function Gt(Ht,qt){Ht._final(function(Pt){qt.pendingcb--,Pt&&nn(Ht,Pt),qt.prefinished=!0,Ht.emit("prefinish"),Ut(Ht,qt)})}function Ut(Ht,qt){var Pt=Xt(qt);if(Pt&&(function(Zt,tn){tn.prefinished||tn.finalCalled||(typeof Zt._final!="function"||tn.destroyed?(tn.prefinished=!0,Zt.emit("prefinish")):(tn.pendingcb++,tn.finalCalled=!0,$.nextTick(Gt,Zt,tn)))}(Ht,qt),qt.pendingcb===0&&(qt.finished=!0,Ht.emit("finish"),qt.autoDestroy))){var St=Ht._readableState;(!St||St.autoDestroy&&St.endEmitted)&&Ht.destroy()}return Pt}s(7)(xt,it),wt.prototype.getBuffer=function(){for(var Ht=this.bufferedRequest,qt=[];Ht;)qt.push(Ht),Ht=Ht.next;return qt},function(){try{Object.defineProperty(wt.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_t=Function.prototype[Symbol.hasInstance],Object.defineProperty(xt,Symbol.hasInstance,{value:function(Ht){return!!_t.call(this,Ht)||this===xt&&Ht&&Ht._writableState instanceof wt}})):_t=function(Ht){return Ht instanceof this},xt.prototype.pipe=function(){nn(this,new Ft)},xt.prototype.write=function(Ht,qt,Pt){var St,Zt=this._writableState,tn=!1,mn=!Zt.objectMode&&(St=Ht,st.isBuffer(St)||St instanceof ht);return mn&&!st.isBuffer(Ht)&&(Ht=function(yn){return st.from(yn)}(Ht)),typeof qt=="function"&&(Pt=qt,qt=null),mn?qt="buffer":qt||(qt=Zt.defaultEncoding),typeof Pt!="function"&&(Pt=on),Zt.ending?function(yn,vn){var un=new pt;nn(yn,un),$.nextTick(vn,un)}(this,Pt):(mn||function(yn,vn,un,rn){var It;return un===null?It=new Ot:typeof un=="string"||vn.objectMode||(It=new yt("chunk",["string","Buffer"],un)),!It||(nn(yn,It),$.nextTick(rn,It),!1)}(this,Zt,Ht,Pt))&&(Zt.pendingcb++,tn=function(yn,vn,un,rn,It,Dt){if(!un){var Kt=function(Mn,qn,Ir){return Mn.objectMode||Mn.decodeStrings===!1||typeof qn!="string"||(qn=st.from(qn,Ir)),qn}(vn,rn,It);rn!==Kt&&(un=!0,It="buffer",rn=Kt)}var gn=vn.objectMode?1:rn.length;vn.length+=gn;var hn=vn.length<vn.highWaterMark;if(hn||(vn.needDrain=!0),vn.writing||vn.corked){var xn=vn.lastBufferedRequest;vn.lastBufferedRequest={chunk:rn,encoding:It,isBuf:un,callback:Dt,next:null},xn?xn.next=vn.lastBufferedRequest:vn.bufferedRequest=vn.lastBufferedRequest,vn.bufferedRequestCount+=1}else Nt(yn,vn,!1,gn,rn,It,Dt);return hn}(this,Zt,mn,Ht,qt,Pt)),tn},xt.prototype.cork=function(){this._writableState.corked++},xt.prototype.uncork=function(){var Ht=this._writableState;Ht.corked&&(Ht.corked--,Ht.writing||Ht.corked||Ht.bufferProcessing||!Ht.bufferedRequest||Vt(this,Ht))},xt.prototype.setDefaultEncoding=function(Ht){if(typeof Ht=="string"&&(Ht=Ht.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ht+"").toLowerCase())>-1))throw new Lt(Ht);return this._writableState.defaultEncoding=Ht,this},Object.defineProperty(xt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(xt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),xt.prototype._write=function(Ht,qt,Pt){Pt(new Et("_write()"))},xt.prototype._writev=null,xt.prototype.end=function(Ht,qt,Pt){var St=this._writableState;return typeof Ht=="function"?(Pt=Ht,Ht=null,qt=null):typeof qt=="function"&&(Pt=qt,qt=null),Ht!=null&&this.write(Ht,qt),St.corked&&(St.corked=1,this.uncork()),St.ending||function(Zt,tn,mn){tn.ending=!0,Ut(Zt,tn),mn&&(tn.finished?$.nextTick(mn):Zt.once("finish",mn)),tn.ended=!0,Zt.writable=!1}(this,St,Pt),this},Object.defineProperty(xt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(xt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ht){this._writableState&&(this._writableState.destroyed=Ht)}}),xt.prototype.destroy=gt.destroy,xt.prototype._undestroy=gt.undestroy,xt.prototype._destroy=function(Ht,qt){qt(Ht)}}).call(this,s(6),s(2))},function(i,o,s){i.exports=ht;var _=s(26).codes,$=_.ERR_METHOD_NOT_IMPLEMENTED,et=_.ERR_MULTIPLE_CALLBACK,tt=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=_.ERR_TRANSFORM_WITH_LENGTH_0,it=s(27);function st(ft,ut){var yt=this._transformState;yt.transforming=!1;var Et=yt.writecb;if(Et===null)return this.emit("error",new et);yt.writechunk=null,yt.writecb=null,ut!=null&&this.push(ut),Et(ft);var Mt=this._readableState;Mt.reading=!1,(Mt.needReadable||Mt.length<Mt.highWaterMark)&&this._read(Mt.highWaterMark)}function ht(ft){if(!(this instanceof ht))return new ht(ft);it.call(this,ft),this._transformState={afterTransform:st.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,ft&&(typeof ft.transform=="function"&&(this._transform=ft.transform),typeof ft.flush=="function"&&(this._flush=ft.flush)),this.on("prefinish",_t)}function _t(){var ft=this;typeof this._flush!="function"||this._readableState.destroyed?gt(this,null,null):this._flush(function(ut,yt){gt(ft,ut,yt)})}function gt(ft,ut,yt){if(ut)return ft.emit("error",ut);if(yt!=null&&ft.push(yt),ft._writableState.length)throw new j;if(ft._transformState.transforming)throw new tt;return ft.push(null)}s(7)(ht,it),ht.prototype.push=function(ft,ut){return this._transformState.needTransform=!1,it.prototype.push.call(this,ft,ut)},ht.prototype._transform=function(ft,ut,yt){yt(new $("_transform()"))},ht.prototype._write=function(ft,ut,yt){var Et=this._transformState;if(Et.writecb=yt,Et.writechunk=ft,Et.writeencoding=ut,!Et.transforming){var Mt=this._readableState;(Et.needTransform||Mt.needReadable||Mt.length<Mt.highWaterMark)&&this._read(Mt.highWaterMark)}},ht.prototype._read=function(ft){var ut=this._transformState;ut.writechunk===null||ut.transforming?ut.needTransform=!0:(ut.transforming=!0,this._transform(ut.writechunk,ut.writeencoding,ut.afterTransform))},ht.prototype._destroy=function(ft,ut){it.prototype._destroy.call(this,ft,function(yt){ut(yt)})}},function(i,o,s){(function(_){var $=s(190),et=s(85),tt=s(192),j=s(193),it=s(86),st=o;st.request=function(ht,_t){ht=typeof ht=="string"?it.parse(ht):tt(ht);var gt=_.location.protocol.search(/^https?:$/)===-1?"http:":"",ft=ht.protocol||gt,ut=ht.hostname||ht.host,yt=ht.port,Et=ht.path||"/";ut&&ut.indexOf(":")!==-1&&(ut="["+ut+"]"),ht.url=(ut?ft+"//"+ut:"")+(yt?":"+yt:"")+Et,ht.method=(ht.method||"GET").toUpperCase(),ht.headers=ht.headers||{};var Mt=new $(ht);return _t&&Mt.on("response",_t),Mt},st.get=function(ht,_t){var gt=st.request(ht,_t);return gt.end(),gt},st.ClientRequest=$,st.IncomingMessage=et.IncomingMessage,st.Agent=function(){},st.Agent.defaultMaxSockets=4,st.globalAgent=new st.Agent,st.STATUS_CODES=j,st.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,s(6))},function(i,o,s){(function(_){o.fetch=st(_.fetch)&&st(_.ReadableStream),o.writableStream=st(_.WritableStream),o.abortController=st(_.AbortController),o.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),o.blobConstructor=!0}catch{}var $;function et(){if($!==void 0)return $;if(_.XMLHttpRequest){$=new _.XMLHttpRequest;try{$.open("GET",_.XDomainRequest?"/":"https://example.com")}catch{$=null}}else $=null;return $}function tt(ht){var _t=et();if(!_t)return!1;try{return _t.responseType=ht,_t.responseType===ht}catch{}return!1}var j=_.ArrayBuffer!==void 0,it=j&&st(_.ArrayBuffer.prototype.slice);function st(ht){return typeof ht=="function"}o.arraybuffer=o.fetch||j&&tt("arraybuffer"),o.msstream=!o.fetch&&it&&tt("ms-stream"),o.mozchunkedarraybuffer=!o.fetch&&j&&tt("moz-chunked-arraybuffer"),o.overrideMimeType=o.fetch||!!et()&&st(et().overrideMimeType),o.vbArray=st(_.VBArray),$=null}).call(this,s(6))},function(i,o,s){(function(_,$,et){var tt=s(84),j=s(7),it=s(31),st=o.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ht=o.IncomingMessage=function(_t,gt,ft,ut){var yt=this;if(it.Readable.call(yt),yt._mode=ft,yt.headers={},yt.rawHeaders=[],yt.trailers={},yt.rawTrailers=[],yt.on("end",function(){_.nextTick(function(){yt.emit("close")})}),ft==="fetch"){if(yt._fetchResponse=gt,yt.url=gt.url,yt.statusCode=gt.status,yt.statusMessage=gt.statusText,gt.headers.forEach(function(Ot,pt){yt.headers[pt.toLowerCase()]=Ot,yt.rawHeaders.push(pt,Ot)}),tt.writableStream){var Et=new WritableStream({write:function(Ot){return new Promise(function(pt,Lt){yt._destroyed?Lt():yt.push(new $(Ot))?pt():yt._resumeFetch=pt})},close:function(){et.clearTimeout(ut),yt._destroyed||yt.push(null)},abort:function(Ot){yt._destroyed||yt.emit("error",Ot)}});try{return void gt.body.pipeTo(Et).catch(function(Ot){et.clearTimeout(ut),yt._destroyed||yt.emit("error",Ot)})}catch{}}var Mt=gt.body.getReader();(function Ot(){Mt.read().then(function(pt){if(!yt._destroyed){if(pt.done)return et.clearTimeout(ut),void yt.push(null);yt.push(new $(pt.value)),Ot()}}).catch(function(pt){et.clearTimeout(ut),yt._destroyed||yt.emit("error",pt)})})()}else if(yt._xhr=_t,yt._pos=0,yt.url=_t.responseURL,yt.statusCode=_t.status,yt.statusMessage=_t.statusText,_t.getAllResponseHeaders().split(/\r?\n/).forEach(function(Ot){var pt=Ot.match(/^([^:]+):\s*(.*)/);if(pt){var Lt=pt[1].toLowerCase();Lt==="set-cookie"?(yt.headers[Lt]===void 0&&(yt.headers[Lt]=[]),yt.headers[Lt].push(pt[2])):yt.headers[Lt]!==void 0?yt.headers[Lt]+=", "+pt[2]:yt.headers[Lt]=pt[2],yt.rawHeaders.push(pt[1],pt[2])}}),yt._charset="x-user-defined",!tt.overrideMimeType){var Ft=yt.rawHeaders["mime-type"];if(Ft){var Rt=Ft.match(/;\s*charset=([^;])(;|$)/);Rt&&(yt._charset=Rt[1].toLowerCase())}yt._charset||(yt._charset="utf-8")}};j(ht,it.Readable),ht.prototype._read=function(){var _t=this._resumeFetch;_t&&(this._resumeFetch=null,_t())},ht.prototype._onXHRProgress=function(){var _t=this,gt=_t._xhr,ft=null;switch(_t._mode){case"text:vbarray":if(gt.readyState!==st.DONE)break;try{ft=new et.VBArray(gt.responseBody).toArray()}catch{}if(ft!==null){_t.push(new $(ft));break}case"text":try{ft=gt.responseText}catch{_t._mode="text:vbarray";break}if(ft.length>_t._pos){var ut=ft.substr(_t._pos);if(_t._charset==="x-user-defined"){for(var yt=new $(ut.length),Et=0;Et<ut.length;Et++)yt[Et]=255&ut.charCodeAt(Et);_t.push(yt)}else _t.push(ut,_t._charset);_t._pos=ft.length}break;case"arraybuffer":if(gt.readyState!==st.DONE||!gt.response)break;ft=gt.response,_t.push(new $(new Uint8Array(ft)));break;case"moz-chunked-arraybuffer":if(ft=gt.response,gt.readyState!==st.LOADING||!ft)break;_t.push(new $(new Uint8Array(ft)));break;case"ms-stream":if(ft=gt.response,gt.readyState!==st.LOADING)break;var Mt=new et.MSStreamReader;Mt.onprogress=function(){Mt.result.byteLength>_t._pos&&(_t.push(new $(new Uint8Array(Mt.result.slice(_t._pos)))),_t._pos=Mt.result.byteLength)},Mt.onload=function(){_t.push(null)},Mt.readAsArrayBuffer(ft)}_t._xhr.readyState===st.DONE&&_t._mode!=="ms-stream"&&_t.push(null)}}).call(this,s(2),s(5).Buffer,s(6))},function(i,o,s){var _=s(194),$=s(196);function et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}o.parse=Rt,o.resolve=function(Ot,pt){return Rt(Ot,!1,!0).resolve(pt)},o.resolveObject=function(Ot,pt){return Ot?Rt(Ot,!1,!0).resolveObject(pt):pt},o.format=function(Ot){return $.isString(Ot)&&(Ot=Rt(Ot)),Ot instanceof et?Ot.format():et.prototype.format.call(Ot)},o.Url=et;var tt=/^([a-z0-9.+-]+:)/i,j=/:[0-9]*$/,it=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,st=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),ht=["'"].concat(st),_t=["%","/","?",";","#"].concat(ht),gt=["/","?","#"],ft=/^[+a-z0-9A-Z_-]{0,63}$/,ut=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yt={javascript:!0,"javascript:":!0},Et={javascript:!0,"javascript:":!0},Mt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ft=s(197);function Rt(Ot,pt,Lt){if(Ot&&$.isObject(Ot)&&Ot instanceof et)return Ot;var nn=new et;return nn.parse(Ot,pt,Lt),nn}et.prototype.parse=function(Ot,pt,Lt){if(!$.isString(Ot))throw new TypeError("Parameter 'url' must be a string, not "+typeof Ot);var nn=Ot.indexOf("?"),on=nn!==-1&&nn<Ot.indexOf("#")?"?":"#",wt=Ot.split(on);wt[0]=wt[0].replace(/\\/g,"/");var xt=Ot=wt.join(on);if(xt=xt.trim(),!Lt&&Ot.split("#").length===1){var Nt=it.exec(xt);if(Nt)return this.path=xt,this.href=xt,this.pathname=Nt[1],Nt[2]?(this.search=Nt[2],this.query=pt?Ft.parse(this.search.substr(1)):this.search.substr(1)):pt&&(this.search="",this.query={}),this}var Tt=tt.exec(xt);if(Tt){var Vt=(Tt=Tt[0]).toLowerCase();this.protocol=Vt,xt=xt.substr(Tt.length)}if(Lt||Tt||xt.match(/^\/\/[^@\/]+@[^@\/]+/)){var Xt=xt.substr(0,2)==="//";!Xt||Tt&&Et[Tt]||(xt=xt.substr(2),this.slashes=!0)}if(!Et[Tt]&&(Xt||Tt&&!Mt[Tt])){for(var Gt,Ut,Ht=-1,qt=0;qt<gt.length;qt++)(Pt=xt.indexOf(gt[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt);for((Ut=Ht===-1?xt.lastIndexOf("@"):xt.lastIndexOf("@",Ht))!==-1&&(Gt=xt.slice(0,Ut),xt=xt.slice(Ut+1),this.auth=decodeURIComponent(Gt)),Ht=-1,qt=0;qt<_t.length;qt++){var Pt;(Pt=xt.indexOf(_t[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt)}Ht===-1&&(Ht=xt.length),this.host=xt.slice(0,Ht),xt=xt.slice(Ht),this.parseHost(),this.hostname=this.hostname||"";var St=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!St)for(var Zt=this.hostname.split(/\./),tn=(qt=0,Zt.length);qt<tn;qt++){var mn=Zt[qt];if(mn&&!mn.match(ft)){for(var yn="",vn=0,un=mn.length;vn<un;vn++)mn.charCodeAt(vn)>127?yn+="x":yn+=mn[vn];if(!yn.match(ft)){var rn=Zt.slice(0,qt),It=Zt.slice(qt+1),Dt=mn.match(ut);Dt&&(rn.push(Dt[1]),It.unshift(Dt[2])),It.length&&(xt="/"+It.join(".")+xt),this.hostname=rn.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),St||(this.hostname=_.toASCII(this.hostname));var Kt=this.port?":"+this.port:"",gn=this.hostname||"";this.host=gn+Kt,this.href+=this.host,St&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),xt[0]!=="/"&&(xt="/"+xt))}if(!yt[Vt])for(qt=0,tn=ht.length;qt<tn;qt++){var hn=ht[qt];if(xt.indexOf(hn)!==-1){var xn=encodeURIComponent(hn);xn===hn&&(xn=escape(hn)),xt=xt.split(hn).join(xn)}}var Mn=xt.indexOf("#");Mn!==-1&&(this.hash=xt.substr(Mn),xt=xt.slice(0,Mn));var qn=xt.indexOf("?");if(qn!==-1?(this.search=xt.substr(qn),this.query=xt.substr(qn+1),pt&&(this.query=Ft.parse(this.query)),xt=xt.slice(0,qn)):pt&&(this.search="",this.query={}),xt&&(this.pathname=xt),Mt[Vt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Kt=this.pathname||"";var Ir=this.search||"";this.path=Kt+Ir}return this.href=this.format(),this},et.prototype.format=function(){var Ot=this.auth||"";Ot&&(Ot=(Ot=encodeURIComponent(Ot)).replace(/%3A/i,":"),Ot+="@");var pt=this.protocol||"",Lt=this.pathname||"",nn=this.hash||"",on=!1,wt="";this.host?on=Ot+this.host:this.hostname&&(on=Ot+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(on+=":"+this.port)),this.query&&$.isObject(this.query)&&Object.keys(this.query).length&&(wt=Ft.stringify(this.query));var xt=this.search||wt&&"?"+wt||"";return pt&&pt.substr(-1)!==":"&&(pt+=":"),this.slashes||(!pt||Mt[pt])&&on!==!1?(on="//"+(on||""),Lt&&Lt.charAt(0)!=="/"&&(Lt="/"+Lt)):on||(on=""),nn&&nn.charAt(0)!=="#"&&(nn="#"+nn),xt&&xt.charAt(0)!=="?"&&(xt="?"+xt),pt+on+(Lt=Lt.replace(/[?#]/g,function(Nt){return encodeURIComponent(Nt)}))+(xt=xt.replace("#","%23"))+nn},et.prototype.resolve=function(Ot){return this.resolveObject(Rt(Ot,!1,!0)).format()},et.prototype.resolveObject=function(Ot){if($.isString(Ot)){var pt=new et;pt.parse(Ot,!1,!0),Ot=pt}for(var Lt=new et,nn=Object.keys(this),on=0;on<nn.length;on++){var wt=nn[on];Lt[wt]=this[wt]}if(Lt.hash=Ot.hash,Ot.href==="")return Lt.href=Lt.format(),Lt;if(Ot.slashes&&!Ot.protocol){for(var xt=Object.keys(Ot),Nt=0;Nt<xt.length;Nt++){var Tt=xt[Nt];Tt!=="protocol"&&(Lt[Tt]=Ot[Tt])}return Mt[Lt.protocol]&&Lt.hostname&&!Lt.pathname&&(Lt.path=Lt.pathname="/"),Lt.href=Lt.format(),Lt}if(Ot.protocol&&Ot.protocol!==Lt.protocol){if(!Mt[Ot.protocol]){for(var Vt=Object.keys(Ot),Xt=0;Xt<Vt.length;Xt++){var Gt=Vt[Xt];Lt[Gt]=Ot[Gt]}return Lt.href=Lt.format(),Lt}if(Lt.protocol=Ot.protocol,Ot.host||Et[Ot.protocol])Lt.pathname=Ot.pathname;else{for(var Ut=(Ot.pathname||"").split("/");Ut.length&&!(Ot.host=Ut.shift()););Ot.host||(Ot.host=""),Ot.hostname||(Ot.hostname=""),Ut[0]!==""&&Ut.unshift(""),Ut.length<2&&Ut.unshift(""),Lt.pathname=Ut.join("/")}if(Lt.search=Ot.search,Lt.query=Ot.query,Lt.host=Ot.host||"",Lt.auth=Ot.auth,Lt.hostname=Ot.hostname||Ot.host,Lt.port=Ot.port,Lt.pathname||Lt.search){var Ht=Lt.pathname||"",qt=Lt.search||"";Lt.path=Ht+qt}return Lt.slashes=Lt.slashes||Ot.slashes,Lt.href=Lt.format(),Lt}var Pt=Lt.pathname&&Lt.pathname.charAt(0)==="/",St=Ot.host||Ot.pathname&&Ot.pathname.charAt(0)==="/",Zt=St||Pt||Lt.host&&Ot.pathname,tn=Zt,mn=Lt.pathname&&Lt.pathname.split("/")||[],yn=(Ut=Ot.pathname&&Ot.pathname.split("/")||[],Lt.protocol&&!Mt[Lt.protocol]);if(yn&&(Lt.hostname="",Lt.port=null,Lt.host&&(mn[0]===""?mn[0]=Lt.host:mn.unshift(Lt.host)),Lt.host="",Ot.protocol&&(Ot.hostname=null,Ot.port=null,Ot.host&&(Ut[0]===""?Ut[0]=Ot.host:Ut.unshift(Ot.host)),Ot.host=null),Zt=Zt&&(Ut[0]===""||mn[0]==="")),St)Lt.host=Ot.host||Ot.host===""?Ot.host:Lt.host,Lt.hostname=Ot.hostname||Ot.hostname===""?Ot.hostname:Lt.hostname,Lt.search=Ot.search,Lt.query=Ot.query,mn=Ut;else if(Ut.length)mn||(mn=[]),mn.pop(),mn=mn.concat(Ut),Lt.search=Ot.search,Lt.query=Ot.query;else if(!$.isNullOrUndefined(Ot.search))return yn&&(Lt.hostname=Lt.host=mn.shift(),(Dt=!!(Lt.host&&Lt.host.indexOf("@")>0)&&Lt.host.split("@"))&&(Lt.auth=Dt.shift(),Lt.host=Lt.hostname=Dt.shift())),Lt.search=Ot.search,Lt.query=Ot.query,$.isNull(Lt.pathname)&&$.isNull(Lt.search)||(Lt.path=(Lt.pathname?Lt.pathname:"")+(Lt.search?Lt.search:"")),Lt.href=Lt.format(),Lt;if(!mn.length)return Lt.pathname=null,Lt.search?Lt.path="/"+Lt.search:Lt.path=null,Lt.href=Lt.format(),Lt;for(var vn=mn.slice(-1)[0],un=(Lt.host||Ot.host||mn.length>1)&&(vn==="."||vn==="..")||vn==="",rn=0,It=mn.length;It>=0;It--)(vn=mn[It])==="."?mn.splice(It,1):vn===".."?(mn.splice(It,1),rn++):rn&&(mn.splice(It,1),rn--);if(!Zt&&!tn)for(;rn--;rn)mn.unshift("..");!Zt||mn[0]===""||mn[0]&&mn[0].charAt(0)==="/"||mn.unshift(""),un&&mn.join("/").substr(-1)!=="/"&&mn.push("");var Dt,Kt=mn[0]===""||mn[0]&&mn[0].charAt(0)==="/";return yn&&(Lt.hostname=Lt.host=Kt?"":mn.length?mn.shift():"",(Dt=!!(Lt.host&&Lt.host.indexOf("@")>0)&&Lt.host.split("@"))&&(Lt.auth=Dt.shift(),Lt.host=Lt.hostname=Dt.shift())),(Zt=Zt||Lt.host&&mn.length)&&!Kt&&mn.unshift(""),mn.length?Lt.pathname=mn.join("/"):(Lt.pathname=null,Lt.path=null),$.isNull(Lt.pathname)&&$.isNull(Lt.search)||(Lt.path=(Lt.pathname?Lt.pathname:"")+(Lt.search?Lt.search:"")),Lt.auth=Ot.auth||Lt.auth,Lt.slashes=Lt.slashes||Ot.slashes,Lt.href=Lt.format(),Lt},et.prototype.parseHost=function(){var Ot=this.host,pt=j.exec(Ot);pt&&((pt=pt[0])!==":"&&(this.port=pt.substr(1)),Ot=Ot.substr(0,Ot.length-pt.length)),Ot&&(this.hostname=Ot)}},function(i,o,s){const _=$=>$!==null&&typeof $=="object"&&typeof $.pipe=="function";_.writable=$=>_($)&&$.writable!==!1&&typeof $._write=="function"&&typeof $._writableState=="object",_.readable=$=>_($)&&$.readable!==!1&&typeof $._read=="function"&&typeof $._readableState=="object",_.duplex=$=>_.writable($)&&_.readable($),_.transform=$=>_.duplex($)&&typeof $._transform=="function"&&typeof $._transformState=="object",i.exports=_},function(i,o,s){function _(yt){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function $(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function et(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&tt(yt,Et)}function tt(yt,Et){return(tt=Object.setPrototypeOf||function(Mt,Ft){return Mt.__proto__=Ft,Mt})(yt,Et)}function j(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Mt,Ft=st(yt);if(Et){var Rt=st(this).constructor;Mt=Reflect.construct(Ft,arguments,Rt)}else Mt=Ft.apply(this,arguments);return it(this,Mt)}}function it(yt,Et){return!Et||_(Et)!=="object"&&typeof Et!="function"?function(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}(yt):Et}function st(yt){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var ht=s(3).LEVEL,_t=s(50),gt=s(202),ft=s(38)("winston:create-logger");function ut(yt){return"is"+yt.charAt(0).toUpperCase()+yt.slice(1)+"Enabled"}i.exports=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt.levels=yt.levels||_t.npm.levels;var Et=function(Ft){et(Ot,Ft);var Rt=j(Ot);function Ot(pt){return $(this,Ot),Rt.call(this,pt)}return Ot}(gt),Mt=new Et(yt);return Object.keys(yt.levels).forEach(function(Ft){ft('Define prototype method for "%s"',Ft),Ft!=="log"?(Et.prototype[Ft]=function(){for(var Rt=this||Mt,Ot=arguments.length,pt=new Array(Ot),Lt=0;Lt<Ot;Lt++)pt[Lt]=arguments[Lt];if(pt.length===1){var nn=pt[0],on=nn&&nn.message&&nn||{message:nn};return on.level=on[ht]=Ft,Rt._addDefaultMeta(on),Rt.write(on),this||Mt}return pt.length===0?(Rt.log(Ft,""),Rt):Rt.log.apply(Rt,[Ft].concat(pt))},Et.prototype[ut(Ft)]=function(){return(this||Mt).isLevelEnabled(Ft)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')}),Mt}},function(i,o,s){(function(_){function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(18),tt=s(51),j=s(38)("winston:exception"),it=s(90),st=s(91),ht=s(92);i.exports=function(){function _t(ut){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,_t),!ut)throw new Error("Logger is required to handle exceptions");this.logger=ut,this.handlers=new Map}var gt,ft;return gt=_t,(ft=[{key:"handle",value:function(){for(var ut=this,yt=arguments.length,Et=new Array(yt),Mt=0;Mt<yt;Mt++)Et[Mt]=arguments[Mt];Et.forEach(function(Ft){if(Array.isArray(Ft))return Ft.forEach(function(Rt){return ut._addHandler(Rt)});ut._addHandler(Ft)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),_.on("uncaughtException",this.catcher))}},{key:"unhandle",value:function(){var ut=this;this.catcher&&(_.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ut.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ut){var yt=ut.message;return yt||typeof ut!="string"||(yt=ut),{error:ut,level:"error",message:["uncaughtException: ".concat(yt||"(no error message)"),ut.stack||"  No stack trace"].join(`
`),stack:ut.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ut)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ut){return(ut?st.parse(ut):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ut){if(!this.handlers.has(ut)){ut.handleExceptions=!0;var yt=new ht(ut);this.handlers.set(ut,yt),this.logger.pipe(yt)}}},{key:"_uncaughtException",value:function(ut){var yt,Et=this.getAllInfo(ut),Mt=this._getExceptionHandlers(),Ft=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ut):this.logger.exitOnError;function Rt(){j("doExit",Ft),j("process._exiting",_._exiting),Ft&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Mt.length&&Ft&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),Ft=!1),!Mt||Mt.length===0)return _.nextTick(Rt);tt(Mt,function(Ot,pt){var Lt=it(pt),nn=Ot.transport||Ot;function on(wt){return function(){j(wt),Lt()}}nn._ending=!0,nn.once("finish",on("finished")),nn.once("error",on("error"))},function(){return Ft&&Rt()}),this.logger.log(Et),Ft&&(yt=setTimeout(Rt,3e3))}},{key:"_getExceptionHandlers",value:function(){return this.logger.transports.filter(function(ut){return(ut.transport||ut).handleExceptions})}}])&&$(gt.prototype,ft),_t}()}).call(this,s(2))},function(i,o,s){var _=s(205);i.exports=function($){var et,tt=0;function j(){return tt||(tt=1,et=$.apply(this,arguments),$=null),et}return j.displayName=_($),j}},function(i,o){function s(_){for(var $ in _)this[$]=_[$]}o.get=function(_){var $=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var et={},tt=Error.prepareStackTrace;Error.prepareStackTrace=function(it,st){return st},Error.captureStackTrace(et,_||o.get);var j=et.stack;return Error.prepareStackTrace=tt,Error.stackTraceLimit=$,j},o.parse=function(_){if(!_.stack)return[];var $=this;return _.stack.split(`
`).slice(1).map(function(et){if(et.match(/^\s*[-]{4,}$/))return $._createParsedCallSite({fileName:et,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var tt=et.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(tt){var j=null,it=null,st=null,ht=null,_t=null,gt=tt[5]==="native";if(tt[1]){var ft=(st=tt[1]).lastIndexOf(".");if(st[ft-1]=="."&&ft--,ft>0){j=st.substr(0,ft),it=st.substr(ft+1);var ut=j.indexOf(".Module");ut>0&&(st=st.substr(ut+1),j=j.substr(0,ut))}ht=null}it&&(ht=j,_t=it),it==="<anonymous>"&&(_t=null,st=null);var yt={fileName:tt[2]||null,lineNumber:parseInt(tt[3],10)||null,functionName:st,typeName:ht,methodName:_t,columnNumber:parseInt(tt[4],10)||null,native:gt};return $._createParsedCallSite(yt)}}).filter(function(et){return!!et})},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach(function(_){s.prototype[_]=null,s.prototype["get"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),["topLevel","eval","native","constructor"].forEach(function(_){s.prototype[_]=!1,s.prototype["is"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),o._createParsedCallSite=function(_){return new s(_)}},function(i,o,s){function _(ht){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_t){return typeof _t}:function(_t){return _t&&typeof Symbol=="function"&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t})(ht)}function $(ht,_t){for(var gt=0;gt<_t.length;gt++){var ft=_t[gt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(ht,ft.key,ft)}}function et(ht,_t){return(et=Object.setPrototypeOf||function(gt,ft){return gt.__proto__=ft,gt})(ht,_t)}function tt(ht){var _t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var gt,ft=it(ht);if(_t){var ut=it(this).constructor;gt=Reflect.construct(ft,arguments,ut)}else gt=ft.apply(this,arguments);return j(this,gt)}}function j(ht,_t){return!_t||_(_t)!=="object"&&typeof _t!="function"?function(gt){if(gt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt}(ht):_t}function it(ht){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(_t){return _t.__proto__||Object.getPrototypeOf(_t)})(ht)}var st=s(32).Writable;i.exports=function(ht){(function(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&et(yt,Et)})(ut,ht);var _t,gt,ft=tt(ut);function ut(yt){var Et;if(function(Mt,Ft){if(!(Mt instanceof Ft))throw new TypeError("Cannot call a class as a function")}(this,ut),Et=ft.call(this,{objectMode:!0}),!yt)throw new Error("ExceptionStream requires a TransportStream instance.");return Et.handleExceptions=!0,Et.transport=yt,Et}return _t=ut,(gt=[{key:"_write",value:function(yt,Et,Mt){return yt.exception?this.transport.log(yt,Mt):(Mt(),!0)}}])&&$(_t.prototype,gt),ut}(st)},function(i,o,s){(function(_){function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(18),tt=s(51),j=s(38)("winston:rejection"),it=s(90),st=s(91),ht=s(92);i.exports=function(){function _t(ut){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,_t),!ut)throw new Error("Logger is required to handle rejections");this.logger=ut,this.handlers=new Map}var gt,ft;return gt=_t,(ft=[{key:"handle",value:function(){for(var ut=this,yt=arguments.length,Et=new Array(yt),Mt=0;Mt<yt;Mt++)Et[Mt]=arguments[Mt];Et.forEach(function(Ft){if(Array.isArray(Ft))return Ft.forEach(function(Rt){return ut._addHandler(Rt)});ut._addHandler(Ft)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),_.on("unhandledRejection",this.catcher))}},{key:"unhandle",value:function(){var ut=this;this.catcher&&(_.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ut.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ut){var yt=ut.message;return yt||typeof ut!="string"||(yt=ut),{error:ut,level:"error",message:["unhandledRejection: ".concat(yt||"(no error message)"),ut.stack||"  No stack trace"].join(`
`),stack:ut.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ut)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ut){return(ut?st.parse(ut):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ut){if(!this.handlers.has(ut)){ut.handleRejections=!0;var yt=new ht(ut);this.handlers.set(ut,yt),this.logger.pipe(yt)}}},{key:"_unhandledRejection",value:function(ut){var yt,Et=this.getAllInfo(ut),Mt=this._getRejectionHandlers(),Ft=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ut):this.logger.exitOnError;function Rt(){j("doExit",Ft),j("process._exiting",_._exiting),Ft&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Mt.length&&Ft&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),Ft=!1),!Mt||Mt.length===0)return _.nextTick(Rt);tt(Mt,function(Ot,pt){var Lt=it(pt),nn=Ot.transport||Ot;function on(wt){return function(){j(wt),Lt()}}nn._ending=!0,nn.once("finish",on("finished")),nn.once("error",on("error"))},function(){return Ft&&Rt()}),this.logger.log(Et),Ft&&(yt=setTimeout(Rt,3e3))}},{key:"_getRejectionHandlers",value:function(){return this.logger.transports.filter(function(ut){return(ut.transport||ut).handleRejections})}}])&&$(gt.prototype,ft),_t}()}).call(this,s(2))},function(i,o,s){i.exports={asArray:s(212),asBoolStrict:s(213),asBool:s(214),asPortNumber:s(215),asEnum:s(216),asFloatNegative:s(217),asFloatPositive:s(218),asFloat:s(54),asIntNegative:s(219),asIntPositive:s(95),asInt:s(53),asJsonArray:s(220),asJsonObject:s(221),asJson:s(55),asRegExp:s(222),asString:s(33),asUrlObject:s(96),asUrlString:s(223),asEmailString:s(224)}},function(i,o,s){const _=s(53);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive integer");return et}},function(i,o,s){const _=s(33);i.exports=function($){const et=_($);try{return new URL(et)}catch{throw new Error("should be a valid URL")}}},function(i,o,s){const _={};_.web=s(24),s(98);const $={v1:{}};$.v1.signaling={},$.v1.signaling.api=s(9),$.v1.signaling.api.SignalingClient=function(ft,ut,yt){yt||(yt={}),yt.format="text",this.client_=new _.web.GrpcWebClientBase(yt),this.hostname_=ft},$.v1.signaling.api.SignalingPromiseClient=function(ft,ut,yt){yt||(yt={}),yt.format="text",this.client_=new _.web.GrpcWebClientBase(yt),this.hostname_=ft};const et=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetHealth",_.web.MethodType.UNARY,$.v1.signaling.api.GetHealthRequest,$.v1.signaling.api.GetHealthResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetHealthResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetHealthResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetHealthResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getHealth=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetHealth",ft,ut||{},et,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getHealth=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetHealth",ft,ut||{},et)};const tt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/CreatePeer",_.web.MethodType.UNARY,$.v1.signaling.api.CreatePeerRequest,$.v1.signaling.api.CreatePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.CreatePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.createPeer=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",ft,ut||{},tt,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.createPeer=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",ft,ut||{},tt)};const j=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/DeletePeer",_.web.MethodType.UNARY,$.v1.signaling.api.DeletePeerRequest,$.v1.signaling.api.DeletePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.DeletePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.deletePeer=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",ft,ut||{},j,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.deletePeer=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",ft,ut||{},j)};const it=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/RefreshPeer",_.web.MethodType.UNARY,$.v1.signaling.api.RefreshPeerRequest,$.v1.signaling.api.RefreshPeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.RefreshPeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.refreshPeer=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",ft,ut||{},it,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.refreshPeer=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",ft,ut||{},it)};const st=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetPeers",_.web.MethodType.UNARY,$.v1.signaling.api.GetPeersRequest,$.v1.signaling.api.GetPeersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetPeersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getPeers=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",ft,ut||{},st,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getPeers=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",ft,ut||{},st)};const ht=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetIceServers",_.web.MethodType.UNARY,$.v1.signaling.api.GetIceServersRequest,$.v1.signaling.api.GetIceServersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetIceServersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getIceServers=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",ft,ut||{},ht,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getIceServers=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",ft,ut||{},ht)};const _t=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/SendSignal",_.web.MethodType.UNARY,$.v1.signaling.api.SendSignalRequest,$.v1.signaling.api.SendSignalResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.SendSignalResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.sendSignal=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",ft,ut||{},_t,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.sendSignal=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",ft,ut||{},_t)};const gt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/ReceiveSignalStream",_.web.MethodType.SERVER_STREAMING,$.v1.signaling.api.ReceiveSignalStreamRequest,$.v1.signaling.api.ReceiveSignalStreamResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.ReceiveSignalStreamResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.receiveSignalStream=function(ft,ut){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",ft,ut||{},gt)},$.v1.signaling.api.SignalingPromiseClient.prototype.receiveSignalStream=function(ft,ut){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",ft,ut||{},gt)},i.exports=$.v1.signaling.api},function(i,o,s){var _=s(99),$=_,et=Function("return this")();$.exportSymbol("proto.google.protobuf.BoolValue",null,et),$.exportSymbol("proto.google.protobuf.BytesValue",null,et),$.exportSymbol("proto.google.protobuf.DoubleValue",null,et),$.exportSymbol("proto.google.protobuf.FloatValue",null,et),$.exportSymbol("proto.google.protobuf.Int32Value",null,et),$.exportSymbol("proto.google.protobuf.Int64Value",null,et),$.exportSymbol("proto.google.protobuf.StringValue",null,et),$.exportSymbol("proto.google.protobuf.UInt32Value",null,et),$.exportSymbol("proto.google.protobuf.UInt64Value",null,et),proto.google.protobuf.DoubleValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.DoubleValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.DoubleValue.displayName="proto.google.protobuf.DoubleValue"),proto.google.protobuf.FloatValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.FloatValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.FloatValue.displayName="proto.google.protobuf.FloatValue"),proto.google.protobuf.Int64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int64Value.displayName="proto.google.protobuf.Int64Value"),proto.google.protobuf.UInt64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt64Value.displayName="proto.google.protobuf.UInt64Value"),proto.google.protobuf.Int32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int32Value.displayName="proto.google.protobuf.Int32Value"),proto.google.protobuf.UInt32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt32Value.displayName="proto.google.protobuf.UInt32Value"),proto.google.protobuf.BoolValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BoolValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BoolValue.displayName="proto.google.protobuf.BoolValue"),proto.google.protobuf.StringValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.StringValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.StringValue.displayName="proto.google.protobuf.StringValue"),proto.google.protobuf.BytesValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BytesValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BytesValue.displayName="proto.google.protobuf.BytesValue"),_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DoubleValue.prototype.toObject=function(tt){return proto.google.protobuf.DoubleValue.toObject(tt,this)},proto.google.protobuf.DoubleValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.DoubleValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.DoubleValue;return proto.google.protobuf.DoubleValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.DoubleValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readDouble();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.DoubleValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.DoubleValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.DoubleValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeDouble(1,it)},proto.google.protobuf.DoubleValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.DoubleValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FloatValue.prototype.toObject=function(tt){return proto.google.protobuf.FloatValue.toObject(tt,this)},proto.google.protobuf.FloatValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.FloatValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.FloatValue;return proto.google.protobuf.FloatValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.FloatValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readFloat();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.FloatValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.FloatValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.FloatValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeFloat(1,it)},proto.google.protobuf.FloatValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.FloatValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int64Value.prototype.toObject=function(tt){return proto.google.protobuf.Int64Value.toObject(tt,this)},proto.google.protobuf.Int64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int64Value;return proto.google.protobuf.Int64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt64(1,it)},proto.google.protobuf.Int64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt64Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt64Value.toObject(tt,this)},proto.google.protobuf.UInt64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt64Value;return proto.google.protobuf.UInt64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint64(1,it)},proto.google.protobuf.UInt64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int32Value.prototype.toObject=function(tt){return proto.google.protobuf.Int32Value.toObject(tt,this)},proto.google.protobuf.Int32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int32Value;return proto.google.protobuf.Int32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt32(1,it)},proto.google.protobuf.Int32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt32Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt32Value.toObject(tt,this)},proto.google.protobuf.UInt32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt32Value;return proto.google.protobuf.UInt32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint32(1,it)},proto.google.protobuf.UInt32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BoolValue.prototype.toObject=function(tt){return proto.google.protobuf.BoolValue.toObject(tt,this)},proto.google.protobuf.BoolValue.toObject=function(tt,j){var it={value:_.Message.getBooleanFieldWithDefault(j,1,!1)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BoolValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BoolValue;return proto.google.protobuf.BoolValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BoolValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBool();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BoolValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BoolValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BoolValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())&&j.writeBool(1,it)},proto.google.protobuf.BoolValue.prototype.getValue=function(){return _.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.BoolValue.prototype.setValue=function(tt){return _.Message.setProto3BooleanField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.StringValue.prototype.toObject=function(tt){return proto.google.protobuf.StringValue.toObject(tt,this)},proto.google.protobuf.StringValue.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,"")};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.StringValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.StringValue;return proto.google.protobuf.StringValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.StringValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readString();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.StringValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.StringValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.StringValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue()).length>0&&j.writeString(1,it)},proto.google.protobuf.StringValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.StringValue.prototype.setValue=function(tt){return _.Message.setProto3StringField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BytesValue.prototype.toObject=function(tt){return proto.google.protobuf.BytesValue.toObject(tt,this)},proto.google.protobuf.BytesValue.toObject=function(tt,j){var it={value:j.getValue_asB64()};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BytesValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BytesValue;return proto.google.protobuf.BytesValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BytesValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBytes();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BytesValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BytesValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BytesValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue_asU8()).length>0&&j.writeBytes(1,it)},proto.google.protobuf.BytesValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.BytesValue.prototype.getValue_asB64=function(){return _.Message.bytesAsB64(this.getValue())},proto.google.protobuf.BytesValue.prototype.getValue_asU8=function(){return _.Message.bytesAsU8(this.getValue())},proto.google.protobuf.BytesValue.prototype.setValue=function(tt){return _.Message.setProto3BytesField(this,1,tt)},$.object.extend(o,proto.google.protobuf)},function(module,exports,__webpack_require__){(function(global,Buffer){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(i,o,s){i instanceof String&&(i=String(i));for(var _=i.length,$=0;$<_;$++){var et=i[$];if(o.call(s,et,$,i))return{i:$,v:et}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,o,s){i!=Array.prototype&&i!=Object.prototype&&(i[o]=s.value)},$jscomp.getGlobal=function(i){return typeof window<"u"&&window===i?i:global!==void 0&&global!=null?global:i},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,o,s,_){if(o){for(s=$jscomp.global,i=i.split("."),_=0;_<i.length-1;_++){var $=i[_];$ in s||(s[$]={}),s=s[$]}(o=o(_=s[i=i[i.length-1]]))!=_&&o!=null&&$jscomp.defineProperty(s,i,{configurable:!0,writable:!0,value:o})}},$jscomp.polyfill("Array.prototype.findIndex",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).i}},"es6","es3"),$jscomp.checkStringArgs=function(i,o,s){if(i==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(o instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return i+""},$jscomp.polyfill("String.prototype.endsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"endsWith");o+="",s===void 0&&(s=_.length),s=Math.max(0,Math.min(0|s,_.length));for(var $=o.length;0<$&&0<s;)if(_[--s]!=o[--$])return!1;return 0>=$}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"startsWith");o+="";var $=_.length,et=o.length;s=Math.max(0,Math.min(0|s,_.length));for(var tt=0;tt<et&&s<$;)if(_[s++]!=o[tt++])return!1;return tt>=et}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(i){return i||function(o){var s=$jscomp.checkStringArgs(this,null,"repeat");if(0>o||1342177279<o)throw new RangeError("Invalid count value");o|=0;for(var _="";o;)1&o&&(_+=s),(o>>>=1)&&(s+=s);return _}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.isDef=function(i){return i!==void 0},goog.isString=function(i){return typeof i=="string"},goog.isBoolean=function(i){return typeof i=="boolean"},goog.isNumber=function(i){return typeof i=="number"},goog.exportPath_=function(i,o,s){i=i.split("."),s=s||goog.global,i[0]in s||s.execScript===void 0||s.execScript("var "+i[0]);for(var _;i.length&&(_=i.shift());)!i.length&&goog.isDef(o)?s[_]=o:s=s[_]&&s[_]!==Object.prototype[_]?s[_]:s[_]={}},goog.define=function(i,o){return o},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(i){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(i)},goog.constructNamespace_=function(i,o){goog.exportPath_(i,o)},goog.getScriptNonce=function(i){return i&&i!=goog.global?goog.getScriptNonce_(i.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(i)?i:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(i){if(!goog.isString(i)||!i||i.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+i+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=i},goog.module.get=function(i){return goog.module.getInternal_(i)},goog.module.getInternal_=function(i){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var i=goog.global.$jscomp;return!!i&&typeof i.getCurrentModulePath=="function"&&!!i.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(i){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=i;else{var o=goog.global.$jscomp;if(!o||typeof o.getCurrentModulePath!="function")throw Error('Module with namespace "'+i+'" has been loaded incorrectly.');o=o.require(o.getCurrentModulePath()),goog.loadedModules_[i]={exports:o,type:goog.ModuleType.ES6,moduleId:i}}},goog.setTestOnly=function(i){if(goog.DISALLOW_TEST_ONLY_CODE)throw i=i||"",Error("Importing test-only code into non-debug environment"+(i?": "+i:"."))},goog.forwardDeclare=function(i){},goog.getObjectByName=function(i,o){i=i.split("."),o=o||goog.global;for(var s=0;s<i.length;s++)if(o=o[i[s]],!goog.isDefAndNotNull(o))return null;return o},goog.globalize=function(i,o){for(var s in o=o||goog.global,i)o[s]=i[s]},goog.addDependency=function(i,o,s,_){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(i){goog.global.console&&goog.global.console.error(i)},goog.require=function(i){},goog.requireType=function(i){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(i){i.instance_=void 0,i.getInstance=function(){return i.instance_?i.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=i),i.instance_=new i)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(i){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(i){return"(function(){"+i+`
;})();
`},goog.loadModule=function(i){var o=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(i))var s=i.call(void 0,{});else{if(!goog.isString(i))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(i=goog.workaroundSafari10EvalBug(i)),s=goog.loadModuleFromSource_.call(void 0,i)}var _=goog.moduleLoaderState_.moduleName;if(!goog.isString(_)||!_)throw Error('Invalid module name "'+_+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(_,s):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof s=="object"&&s!=null&&Object.seal(s),goog.loadedModules_[_]={exports:s,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=o}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(i){i=i.split("/");for(var o=0;o<i.length;)i[o]=="."?i.splice(o,1):o&&i[o]==".."&&i[o-1]&&i[o-1]!=".."?i.splice(--o,2):o++;return i.join("/")},goog.loadFileSync_=function(i){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(i);try{var o=new goog.global.XMLHttpRequest;return o.open("get",i,!1),o.send(),o.status==0||o.status==200?o.responseText:null}catch{return null}},goog.transpile_=function(i,o,s){var _=goog.global.$jscomp;_||(goog.global.$jscomp=_={});var $=_.transpile;if(!$){var et=goog.basePath+goog.TRANSPILER,tt=goog.loadFileSync_(et);if(tt){if(function(){(0,eval)(tt+`
//# sourceURL=`+et)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,$=(_=goog.global.$jscomp).transpile}}return $||($=_.transpile=function(j,it){return goog.logToConsole_(it+" requires transpilation but no transpiler was found."),j}),$(i,o,s)},goog.typeOf=function(i){var o=typeof i;if(o=="object"){if(!i)return"null";if(i instanceof Array)return"array";if(i instanceof Object)return o;var s=Object.prototype.toString.call(i);if(s=="[object Window]")return"object";if(s=="[object Array]"||typeof i.length=="number"&&i.splice!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("splice"))return"array";if(s=="[object Function]"||i.call!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("call"))return"function"}else if(o=="function"&&i.call===void 0)return"object";return o},goog.isNull=function(i){return i===null},goog.isDefAndNotNull=function(i){return i!=null},goog.isArray=function(i){return goog.typeOf(i)=="array"},goog.isArrayLike=function(i){var o=goog.typeOf(i);return o=="array"||o=="object"&&typeof i.length=="number"},goog.isDateLike=function(i){return goog.isObject(i)&&typeof i.getFullYear=="function"},goog.isFunction=function(i){return goog.typeOf(i)=="function"},goog.isObject=function(i){var o=typeof i;return o=="object"&&i!=null||o=="function"},goog.getUid=function(i){return i[goog.UID_PROPERTY_]||(i[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(i){return!!i[goog.UID_PROPERTY_]},goog.removeUid=function(i){i!==null&&"removeAttribute"in i&&i.removeAttribute(goog.UID_PROPERTY_);try{delete i[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(typeof i.clone=="function")return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.cloneObject(i[s]);return o}return i},goog.bindNative_=function(i,o,s){return i.call.apply(i.bind,arguments)},goog.bindJs_=function(i,o,s){if(!i)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,_),i.apply(o,$)}}return function(){return i.apply(o,arguments)}},goog.bind=function(i,o,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=s.slice();return _.push.apply(_,arguments),i.apply(this,_)}},goog.mixin=function(i,o){for(var s in o)i[s]=o[s]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(i){if(goog.global.execScript)goog.global.execScript(i,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(i);else{var o=goog.global.document,s=o.createElement("SCRIPT");s.type="text/javascript",s.defer=!1,s.appendChild(o.createTextNode(i)),o.head.appendChild(s),o.head.removeChild(s)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(i,o){if(String(i).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+i);var s=function($){return goog.cssNameMapping_[$]||$},_=function($){$=$.split("-");for(var et=[],tt=0;tt<$.length;tt++)et.push(s($[tt]));return et.join("-")};return _=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?s:_:function($){return $},i=o?i+"-"+_(o):_(i),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(i):i},goog.setCssNameMapping=function(i,o){goog.cssNameMapping_=i,goog.cssNameMappingStyle_=o},goog.getMsg=function(i,o,s){return s&&s.html&&(i=i.replace(/</g,"&lt;")),o&&(i=i.replace(/\{\$([^}]+)}/g,function(_,$){return o!=null&&$ in o?o[$]:_})),i},goog.getMsgWithFallback=function(i,o){return i},goog.exportSymbol=function(i,o,s){goog.exportPath_(i,o,s)},goog.exportProperty=function(i,o,s){i[o]=s},goog.inherits=function(i,o){function s(){}s.prototype=o.prototype,i.superClass_=o.prototype,i.prototype=new s,i.prototype.constructor=i,i.base=function(_,$,et){for(var tt=Array(arguments.length-2),j=2;j<arguments.length;j++)tt[j-2]=arguments[j];return o.prototype[$].apply(_,tt)}},goog.base=function(i,o,s){var _=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!_)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(_.superClass_!==void 0){for(var $=Array(arguments.length-1),et=1;et<arguments.length;et++)$[et-1]=arguments[et];return _.superClass_.constructor.apply(i,$)}if(typeof o!="string"&&typeof o!="symbol")throw Error("method names provided to goog.base must be a string or a symbol");for($=Array(arguments.length-2),et=2;et<arguments.length;et++)$[et-2]=arguments[et];et=!1;for(var tt=i.constructor.prototype;tt;tt=Object.getPrototypeOf(tt))if(tt[o]===_)et=!0;else if(et)return tt[o].apply(i,$);if(i[o]===_)return i.constructor.prototype[o].apply(i,$);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(i){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");i.call(goog.global)},goog.defineClass=function(i,o){var s=o.constructor,_=o.statics;return s&&s!=Object.prototype.constructor||(s=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),s=goog.defineClass.createSealingConstructor_(s,i),i&&goog.inherits(s,i),delete o.constructor,delete o.statics,goog.defineClass.applyProperties_(s.prototype,o),_!=null&&(_ instanceof Function?_(s):goog.defineClass.applyProperties_(s,_)),s},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(i,o){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return i;var s=!goog.defineClass.isUnsealable_(o),_=function(){var $=i.apply(this,arguments)||this;return $[goog.UID_PROPERTY_]=$[goog.UID_PROPERTY_],this.constructor===_&&s&&Object.seal instanceof Function&&Object.seal($),$};return _},goog.defineClass.isUnsealable_=function(i){return i&&i.prototype&&i.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s]);for(var _=0;_<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;_++)s=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[_],Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},goog.tagUnsealableClass=function(i){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(i){return i},goog.createTrustedTypesPolicy=function(i){var o=null;if(typeof TrustedTypes>"u"||!TrustedTypes.createPolicy)return o;try{o=TrustedTypes.createPolicy(i,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(s){goog.logToConsole_(s.message)}return o},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(i){var o=jspb.BinaryConstants.FieldType,s=jspb.BinaryConstants.WireType;switch(i){case o.INT32:case o.INT64:case o.UINT32:case o.UINT64:case o.SINT32:case o.SINT64:case o.BOOL:case o.ENUM:case o.VHASH64:return s.VARINT;case o.DOUBLE:case o.FIXED64:case o.SFIXED64:case o.FHASH64:return s.FIXED64;case o.STRING:case o.MESSAGE:case o.BYTES:return s.DELIMITED;case o.FLOAT:case o.FIXED32:case o.SFIXED32:return s.FIXED32;default:return s.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(i){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var o=Error().stack;o&&(this.stack=o)}i&&(this.message=String(i)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(i,o){goog.debug.Error.call(this,goog.asserts.subs_(i,o)),this.messagePattern=i},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(i){throw i},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(i,o){for(var s="",_=(i=i.split("%s")).length-1,$=0;$<_;$++)s+=i[$]+($<o.length?o[$]:"%s");return s+i[_]},goog.asserts.doAssertFailure_=function(i,o,s,_){var $="Assertion failed";if(s){$+=": "+s;var et=_}else i&&($+=": "+i,et=o);i=new goog.asserts.AssertionError(""+$,et||[]),goog.asserts.errorHandler_(i)},goog.asserts.setErrorHandler=function(i){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=i)},goog.asserts.assert=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!i&&goog.asserts.doAssertFailure_("",null,o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertExists=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&i==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.fail=function(i,o){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(i)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertString=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(i)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertFunction=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(i)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObject=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(i)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertArray=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(i)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertBoolean=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(i)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertElement=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(i)&&i.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertInstanceof=function(i,o,s,_){return!goog.asserts.ENABLE_ASSERTS||i instanceof o||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(o),goog.asserts.getType_(i)],s,Array.prototype.slice.call(arguments,3)),i},goog.asserts.assertFinite=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||typeof i=="number"&&isFinite(i)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var i in Object.prototype)goog.asserts.fail(i+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(i){return i[i.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.indexOf.call(i,o,s)}:function(i,o,s){if(s=s==null?0:0>s?Math.max(0,i.length+s):s,goog.isString(i))return goog.isString(o)&&o.length==1?i.indexOf(o,s):-1;for(;s<i.length;s++)if(s in i&&i[s]===o)return s;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.lastIndexOf.call(i,o,s??i.length-1)}:function(i,o,s){if(0>(s=s??i.length-1)&&(s=Math.max(0,i.length+s)),goog.isString(i))return goog.isString(o)&&o.length==1?i.lastIndexOf(o,s):-1;for(;0<=s;s--)if(s in i&&i[s]===o)return s;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(i,o,s){goog.asserts.assert(i.length!=null),Array.prototype.forEach.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)et in $&&o.call(s,$[et],et,i)},goog.array.forEachRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;--_)_ in $&&o.call(s,$[_],_,i)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.filter.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=[],et=0,tt=goog.isString(i)?i.split(""):i,j=0;j<_;j++)if(j in tt){var it=tt[j];o.call(s,it,j,i)&&($[et++]=it)}return $},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.map.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=Array(_),et=goog.isString(i)?i.split(""):i,tt=0;tt<_;tt++)tt in et&&($[tt]=o.call(s,et[tt],tt,i));return $},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduce.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEach(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),goog.asserts.assert(o!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduceRight.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEachRight(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.some.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.every.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&!o.call(s,$[et],et,i))return!1;return!0},goog.array.count=function(i,o,s){var _=0;return goog.array.forEach(i,function($,et,tt){o.call(s,$,et,tt)&&++_},s),_},goog.array.find=function(i,o,s){return 0>(o=goog.array.findIndex(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndex=function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return et;return-1},goog.array.findRight=function(i,o,s){return 0>(o=goog.array.findIndexRight(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndexRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;_--)if(_ in $&&o.call(s,$[_],_,i))return _;return-1},goog.array.contains=function(i,o){return 0<=goog.array.indexOf(i,o)},goog.array.isEmpty=function(i){return i.length==0},goog.array.clear=function(i){if(!goog.isArray(i))for(var o=i.length-1;0<=o;o--)delete i[o];i.length=0},goog.array.insert=function(i,o){goog.array.contains(i,o)||i.push(o)},goog.array.insertAt=function(i,o,s){goog.array.splice(i,s,0,o)},goog.array.insertArrayAt=function(i,o,s){goog.partial(goog.array.splice,i,s,0).apply(null,o)},goog.array.insertBefore=function(i,o,s){var _;arguments.length==2||0>(_=goog.array.indexOf(i,s))?i.push(o):goog.array.insertAt(i,o,_)},goog.array.remove=function(i,o){var s;return(s=0<=(o=goog.array.indexOf(i,o)))&&goog.array.removeAt(i,o),s},goog.array.removeLast=function(i,o){return 0<=(o=goog.array.lastIndexOf(i,o))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAt=function(i,o){return goog.asserts.assert(i.length!=null),Array.prototype.splice.call(i,o,1).length==1},goog.array.removeIf=function(i,o,s){return 0<=(o=goog.array.findIndex(i,o,s))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAllIf=function(i,o,s){var _=0;return goog.array.forEachRight(i,function($,et){o.call(s,$,et,i)&&goog.array.removeAt(i,et)&&_++}),_},goog.array.concat=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(i){var o=i.length;if(0<o){for(var s=Array(o),_=0;_<o;_++)s[_]=i[_];return s}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(i,o){for(var s=1;s<arguments.length;s++){var _=arguments[s];if(goog.isArrayLike(_)){var $=i.length||0,et=_.length||0;i.length=$+et;for(var tt=0;tt<et;tt++)i[$+tt]=_[tt]}else i.push(_)}},goog.array.splice=function(i,o,s,_){return goog.asserts.assert(i.length!=null),Array.prototype.splice.apply(i,goog.array.slice(arguments,1))},goog.array.slice=function(i,o,s){return goog.asserts.assert(i.length!=null),2>=arguments.length?Array.prototype.slice.call(i,o):Array.prototype.slice.call(i,o,s)},goog.array.removeDuplicates=function(i,o,s){o=o||i;var _=function(it){return goog.isObject(it)?"o"+goog.getUid(it):(typeof it).charAt(0)+it};s=s||_,_={};for(var $=0,et=0;et<i.length;){var tt=i[et++],j=s(tt);Object.prototype.hasOwnProperty.call(_,j)||(_[j]=!0,o[$++]=tt)}o.length=$},goog.array.binarySearch=function(i,o,s){return goog.array.binarySearch_(i,s||goog.array.defaultCompare,!1,o)},goog.array.binarySelect=function(i,o,s){return goog.array.binarySearch_(i,o,!0,void 0,s)},goog.array.binarySearch_=function(i,o,s,_,$){for(var et,tt=0,j=i.length;tt<j;){var it=tt+j>>1,st=s?o.call($,i[it],it,i):o(_,i[it]);0<st?tt=it+1:(j=it,et=!st)}return et?tt:~tt},goog.array.sort=function(i,o){i.sort(o||goog.array.defaultCompare)},goog.array.stableSort=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]={index:_,value:i[_]};var $=o||goog.array.defaultCompare;for(goog.array.sort(s,function(et,tt){return $(et.value,tt.value)||et.index-tt.index}),_=0;_<i.length;_++)i[_]=s[_].value},goog.array.sortByKey=function(i,o,s){var _=s||goog.array.defaultCompare;goog.array.sort(i,function($,et){return _(o($),o(et))})},goog.array.sortObjectsByKey=function(i,o,s){goog.array.sortByKey(i,function(_){return _[o]},s)},goog.array.isSorted=function(i,o,s){o=o||goog.array.defaultCompare;for(var _=1;_<i.length;_++){var $=o(i[_-1],i[_]);if(0<$||$==0&&s)return!1}return!0},goog.array.equals=function(i,o,s){if(!goog.isArrayLike(i)||!goog.isArrayLike(o)||i.length!=o.length)return!1;var _=i.length;s=s||goog.array.defaultCompareEquality;for(var $=0;$<_;$++)if(!s(i[$],o[$]))return!1;return!0},goog.array.compare3=function(i,o,s){s=s||goog.array.defaultCompare;for(var _=Math.min(i.length,o.length),$=0;$<_;$++){var et=s(i[$],o[$]);if(et!=0)return et}return goog.array.defaultCompare(i.length,o.length)},goog.array.defaultCompare=function(i,o){return i>o?1:i<o?-1:0},goog.array.inverseDefaultCompare=function(i,o){return-goog.array.defaultCompare(i,o)},goog.array.defaultCompareEquality=function(i,o){return i===o},goog.array.binaryInsert=function(i,o,s){return 0>(s=goog.array.binarySearch(i,o,s))&&(goog.array.insertAt(i,o,-(s+1)),!0)},goog.array.binaryRemove=function(i,o,s){return 0<=(o=goog.array.binarySearch(i,o,s))&&goog.array.removeAt(i,o)},goog.array.bucket=function(i,o,s){for(var _={},$=0;$<i.length;$++){var et=i[$],tt=o.call(s,et,$,i);goog.isDef(tt)&&(_[tt]||(_[tt]=[])).push(et)}return _},goog.array.toObject=function(i,o,s){var _={};return goog.array.forEach(i,function($,et){_[o.call(s,$,et,i)]=$}),_},goog.array.range=function(i,o,s){var _=[],$=0,et=i;if(o!==void 0&&($=i,et=o),0>(s=s||1)*(et-$))return[];if(0<s)for(i=$;i<et;i+=s)_.push(i);else for(i=$;i>et;i+=s)_.push(i);return _},goog.array.repeat=function(i,o){for(var s=[],_=0;_<o;_++)s[_]=i;return s},goog.array.flatten=function(i){for(var o=[],s=0;s<arguments.length;s++){var _=arguments[s];if(goog.isArray(_))for(var $=0;$<_.length;$+=8192){var et=goog.array.slice(_,$,$+8192);et=goog.array.flatten.apply(null,et);for(var tt=0;tt<et.length;tt++)o.push(et[tt])}else o.push(_)}return o},goog.array.rotate=function(i,o){return goog.asserts.assert(i.length!=null),i.length&&(0<(o%=i.length)?Array.prototype.unshift.apply(i,i.splice(-o,o)):0>o&&Array.prototype.push.apply(i,i.splice(0,-o))),i},goog.array.moveItem=function(i,o,s){goog.asserts.assert(0<=o&&o<i.length),goog.asserts.assert(0<=s&&s<i.length),o=Array.prototype.splice.call(i,o,1),Array.prototype.splice.call(i,s,0,o[0])},goog.array.zip=function(i){if(!arguments.length)return[];for(var o=[],s=arguments[0].length,_=1;_<arguments.length;_++)arguments[_].length<s&&(s=arguments[_].length);for(_=0;_<s;_++){for(var $=[],et=0;et<arguments.length;et++)$.push(arguments[et][_]);o.push($)}return o},goog.array.shuffle=function(i,o){o=o||Math.random;for(var s=i.length-1;0<s;s--){var _=Math.floor(o()*(s+1)),$=i[s];i[s]=i[_],i[_]=$}},goog.array.copyByIndex=function(i,o){var s=[];return goog.array.forEach(o,function(_){s.push(i[_])}),s},goog.array.concatMap=function(i,o,s){return goog.array.concat.apply([],goog.array.map(i,o,s))},goog.crypt={},goog.crypt.stringToByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);255<$&&(o[s++]=255&$,$>>=8),o[s++]=$}return o},goog.crypt.byteArrayToString=function(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var o="",s=0;s<i.length;s+=8192){var _=goog.array.slice(i,s,s+8192);o+=String.fromCharCode.apply(null,_)}return o},goog.crypt.byteArrayToHex=function(i,o){return goog.array.map(i,function(s){return 1<(s=s.toString(16)).length?s:"0"+s}).join(o||"")},goog.crypt.hexToByteArray=function(i){goog.asserts.assert(i.length%2==0,"Key string length must be multiple of 2");for(var o=[],s=0;s<i.length;s+=2)o.push(parseInt(i.substring(s,s+2),16));return o},goog.crypt.stringToUtf8ByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);128>$?o[s++]=$:(2048>$?o[s++]=$>>6|192:((64512&$)==55296&&_+1<i.length&&(64512&i.charCodeAt(_+1))==56320?($=65536+((1023&$)<<10)+(1023&i.charCodeAt(++_)),o[s++]=$>>18|240,o[s++]=$>>12&63|128):o[s++]=$>>12|224,o[s++]=$>>6&63|128),o[s++]=63&$|128)}return o},goog.crypt.utf8ByteArrayToString=function(i){for(var o=[],s=0,_=0;s<i.length;){var $=i[s++];if(128>$)o[_++]=String.fromCharCode($);else if(191<$&&224>$){var et=i[s++];o[_++]=String.fromCharCode((31&$)<<6|63&et)}else if(239<$&&365>$){et=i[s++];var tt=i[s++];$=((7&$)<<18|(63&et)<<12|(63&tt)<<6|63&i[s++])-65536,o[_++]=String.fromCharCode(55296+($>>10)),o[_++]=String.fromCharCode(56320+(1023&$))}else et=i[s++],tt=i[s++],o[_++]=String.fromCharCode((15&$)<<12|(63&et)<<6|63&tt)}return o.join("")},goog.crypt.xorByteArray=function(i,o){goog.asserts.assert(i.length==o.length,"XOR array lengths must match");for(var s=[],_=0;_<i.length;_++)s.push(i[_]^o[_]);return s},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(i,o){return i.lastIndexOf(o,0)==0},goog.string.internal.endsWith=function(i,o){var s=i.length-o.length;return 0<=s&&i.indexOf(o,s)==s},goog.string.internal.caseInsensitiveStartsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(0,o.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(i.length-o.length,o.length))==0},goog.string.internal.caseInsensitiveEquals=function(i,o){return i.toLowerCase()==o.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(i){return/^[\s\xa0]*$/.test(i)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},goog.string.internal.caseInsensitiveCompare=function(i,o){return(i=String(i).toLowerCase())<(o=String(o).toLowerCase())?-1:i==o?0:1},goog.string.internal.newLineToBr=function(i,o){return i.replace(/(\r\n|\r|\n)/g,o?"<br />":"<br>")},goog.string.internal.htmlEscape=function(i,o){if(o)i=i.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(i))return i;i.indexOf("&")!=-1&&(i=i.replace(goog.string.internal.AMP_RE_,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace(goog.string.internal.LT_RE_,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(goog.string.internal.GT_RE_,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(goog.string.internal.QUOT_RE_,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(goog.string.internal.NULL_RE_,"&#0;"))}return i},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(i,o){return goog.string.internal.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.internal.contains=function(i,o){return i.indexOf(o)!=-1},goog.string.internal.caseInsensitiveContains=function(i,o){return goog.string.internal.contains(i.toLowerCase(),o.toLowerCase())},goog.string.internal.compareVersions=function(i,o){var s=0;i=goog.string.internal.trim(String(i)).split("."),o=goog.string.internal.trim(String(o)).split(".");for(var _=Math.max(i.length,o.length),$=0;s==0&&$<_;$++){var et=i[$]||"",tt=o[$]||"";do{if(et=/(\d*)(\D*)(.*)/.exec(et)||["","","",""],tt=/(\d*)(\D*)(.*)/.exec(tt)||["","","",""],et[0].length==0&&tt[0].length==0)break;s=et[1].length==0?0:parseInt(et[1],10);var j=tt[1].length==0?0:parseInt(tt[1],10);s=goog.string.internal.compareElements_(s,j)||goog.string.internal.compareElements_(et[2].length==0,tt[2].length==0)||goog.string.internal.compareElements_(et[2],tt[2]),et=et[3],tt=tt[3]}while(s==0)}return s},goog.string.internal.compareElements_=function(i,o){return i<o?-1:i>o?1:0},goog.string.TypedString=function(){},goog.string.Const=function(i,o){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=i===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&o||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(i){return i instanceof goog.string.Const&&i.constructor===goog.string.Const&&i.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?i.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+i+"'"),"type_error:Const")},goog.string.Const.from=function(i){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,i)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(i){return goog.fs.url.getUrlObject_().createObjectURL(i)},goog.fs.url.revokeObjectUrl=function(i){goog.fs.url.getUrlObject_().revokeObjectURL(i)},goog.fs.url.getUrlObject_=function(){var i=goog.fs.url.findUrlObject_();if(i!=null)return i;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(i,o){return typeof i=="number"?0<i?goog.i18n.bidi.Dir.LTR:0>i?goog.i18n.bidi.Dir.RTL:o?null:goog.i18n.bidi.Dir.NEUTRAL:i==null?null:i?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\uD801\uD804-\uD839\uD83C-\uDBFF豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\uD802-\uD803\uD83A-\uD83Bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(i,o){return o?i.replace(goog.i18n.bidi.htmlSkipReg_,""):i},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(i,o){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(i,o){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(i){return goog.i18n.bidi.rtlRe_.test(i)},goog.i18n.bidi.isLtrChar=function(i){return goog.i18n.bidi.ltrRe_.test(i)},goog.i18n.bidi.isNeutralChar=function(i){return!goog.i18n.bidi.isLtrChar(i)&&!goog.i18n.bidi.isRtlChar(i)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(i,o){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(i,o){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(i,o){return i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o),goog.i18n.bidi.isRequiredLtrRe_.test(i)||!goog.i18n.bidi.hasAnyLtr(i)&&!goog.i18n.bidi.hasAnyRtl(i)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(i,o){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(i,o){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(i){return goog.i18n.bidi.rtlLocalesRe_.test(i)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(i,o){return o=(o===void 0?goog.i18n.bidi.hasAnyRtl(i):o)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,i.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+i+"</span>"},goog.i18n.bidi.enforceRtlInText=function(i){return goog.i18n.bidi.Format.RLE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+i+"</span>"},goog.i18n.bidi.enforceLtrInText=function(i){return goog.i18n.bidi.Format.LRE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(i){return i.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(i){return i.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(i,o){var s=0,_=0,$=!1;for(i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o).split(goog.i18n.bidi.wordSeparatorRe_),o=0;o<i.length;o++){var et=i[o];goog.i18n.bidi.startsWithRtl(et)?(s++,_++):goog.i18n.bidi.isRequiredLtrRe_.test(et)?$=!0:goog.i18n.bidi.hasAnyLtr(et)?_++:goog.i18n.bidi.hasNumeralsRe_.test(et)&&($=!0)}return _==0?$?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:s/_>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(i,o){return goog.i18n.bidi.estimateDirection(i,o)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(i,o){i&&(o=goog.i18n.bidi.toDir(o))&&(i.style.textAlign=o==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,i.dir=o==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(i,o){switch(goog.i18n.bidi.estimateDirection(o)){case goog.i18n.bidi.Dir.LTR:i.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:i.dir="rtl";break;default:i.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.trustedURL_=null,this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(i,o){var s=goog.html.TrustedResourceUrl.unwrap(this),_=(s=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(s))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(s[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",s[2]||"",i)+goog.html.TrustedResourceUrl.stringifyParams_("#",_,o))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(i){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(i){return i instanceof goog.html.TrustedResourceUrl&&i.constructor===goog.html.TrustedResourceUrl&&i.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.unwrapTrustedURL=function(i){return i.trustedURL_?i.trustedURL_:goog.html.TrustedResourceUrl.unwrap(i)},goog.html.TrustedResourceUrl.format=function(i,o){var s=goog.string.Const.unwrap(i);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(s))throw Error("Invalid TrustedResourceUrl format: "+s);return i=s.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(_,$){if(!Object.prototype.hasOwnProperty.call(o,$))throw Error('Found marker, "'+$+'", in format string, "'+s+'", but no valid label mapping found in args: '+JSON.stringify(o));return(_=o[$])instanceof goog.string.Const?goog.string.Const.unwrap(_):encodeURIComponent(String(_))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(i,o,s,_){return goog.html.TrustedResourceUrl.format(i,o).cloneWithParams(s,_)},goog.html.TrustedResourceUrl.fromConstant=function(i){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.TrustedResourceUrl.fromConstants=function(i){for(var o="",s=0;s<i.length;s++)o+=goog.string.Const.unwrap(i[s]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.TrustedResourceUrl;return o.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(i):i,goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY&&(o.trustedURL_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i)),o},goog.html.TrustedResourceUrl.stringifyParams_=function(i,o,s){if(s==null)return o;if(goog.isString(s))return s?i+encodeURIComponent(s):"";for(var _ in s){var $=s[_];$=goog.isArray($)?$:[$];for(var et=0;et<$.length;et++){var tt=$[et];tt!=null&&(o||(o=i),o+=(o.length>i.length?"&":"")+encodeURIComponent(_)+"="+encodeURIComponent(String(tt)))}}return o},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeUrlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(i){return goog.html.SafeUrl.unwrapTrustedURL(i).toString()},goog.html.SafeUrl.unwrapTrustedURL=function(i){return i instanceof goog.html.SafeUrl&&i.constructor===goog.html.SafeUrl&&i.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(i){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(i)},goog.html.SafeUrl.fromBlob=function(i){return i=goog.html.SAFE_MIME_TYPE_PATTERN_.test(i.type)?goog.fs.url.createObjectUrl(i):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.DATA_URL_PATTERN_=/^data:([^,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(i){var o=(i=i.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return o=o&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(o[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o?i:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"tel:")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(i){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(i))||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"fb-messenger://share")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromWhatsAppUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"whatsapp://send")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromSmsUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(i){var o=i.indexOf("#");if(0<o&&(i=i.substring(0,o)),!(o=i.match(/[?&]body=/gi)))return!0;if(1<o.length)return!1;if(!(i=i.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(i)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(i)},goog.html.SafeUrl.fromSshUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"ssh://")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(i,o,s){return(i=i.exec(o))?(i=i[1],(s instanceof goog.string.Const?[goog.string.Const.unwrap(s)]:s.map(function(_){return goog.string.Const.unwrap(_)})).indexOf(i)==-1&&(o=goog.html.SafeUrl.INNOCUOUS_STRING)):o=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.fromTrustedResourceUrl=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(i))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(i){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SAFE_URL_PATTERN_.test(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(i,o){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),o&&/^data:/i.test(i)&&(o=goog.html.SafeUrl.fromDataUrl(i)).getTypedStringValue()==i?o:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(i),"%s does not match the safe URL pattern",i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.SafeUrl;return o.privateDoNotAccessOrElseSafeUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i):i,o},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(i,";"),"Last character of style string is not ';': "+i),goog.asserts.assert(goog.string.internal.contains(i,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+i),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(i){return i instanceof goog.html.SafeStyle&&i.constructor===goog.html.SafeStyle&&i.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=i,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(i){var o,s="";for(o in i){if(!/^[-_a-zA-Z0-9]+$/.test(o))throw Error("Name allows only [-_a-zA-Z0-9], got: "+o);var _=i[o];_!=null&&(s+=o+":"+(_=goog.isArray(_)?goog.array.map(_,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(_))+";")}return s?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(s):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(i){if(i instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(i).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(i=i instanceof goog.string.Const?goog.string.Const.unwrap(i):goog.html.SafeStyle.sanitizePropertyValueString_(String(i)),/[{;}]/.test(i))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[i]);return i},goog.html.SafeStyle.sanitizePropertyValueString_=function(i){var o=i.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(o)?goog.html.SafeStyle.COMMENT_RE_.test(i)?(goog.asserts.fail("String value disallows comments, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(i)?goog.html.SafeStyle.hasBalancedSquareBrackets_(i)?goog.html.SafeStyle.sanitizeUrl_(i):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(i){for(var o=!0,s=!0,_=0;_<i.length;_++){var $=i.charAt(_);$=="'"&&s?o=!o:$=='"'&&o&&(s=!s)}return o&&s},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(i){for(var o=!0,s=/^[-_a-zA-Z0-9]$/,_=0;_<i.length;_++){var $=i.charAt(_);if($=="]"){if(o)return!1;o=!0}else if($=="["){if(!o)return!1;o=!1}else if(!o&&!s.test($))return!1}return o},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.FUNCTIONS_RE_=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(i){return i.replace(goog.html.SafeStyle.URL_RE_,function(o,s,_,$){var et="";return _=_.replace(/^(['"])(.*)\1$/,function(tt,j,it){return et=j,it}),o=goog.html.SafeUrl.sanitize(_).getTypedStringValue(),s+et+o+et+$})},goog.html.SafeStyle.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyle.unwrap(_)};return goog.array.forEach(arguments,s),o?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o):goog.html.SafeStyle.EMPTY},goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeScript.fromConstantAndArgs=function(i,o){for(var s=[],_=1;_<arguments.length;_++)s.push(goog.html.SafeScript.stringify_(arguments[_]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(i)+")("+s.join(", ")+");")},goog.html.SafeScript.fromJson=function(i){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(i))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(i){return goog.html.SafeScript.unwrapTrustedScript(i).toString()},goog.html.SafeScript.unwrapTrustedScript=function(i){return i instanceof goog.html.SafeScript&&i.constructor===goog.html.SafeScript&&i.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(i){return JSON.stringify(i).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(i):i,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.object={},goog.object.is=function(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o},goog.object.forEach=function(i,o,s){for(var _ in i)o.call(s,i[_],_,i)},goog.object.filter=function(i,o,s){var _,$={};for(_ in i)o.call(s,i[_],_,i)&&($[_]=i[_]);return $},goog.object.map=function(i,o,s){var _,$={};for(_ in i)$[_]=o.call(s,i[_],_,i);return $},goog.object.some=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return!0;return!1},goog.object.every=function(i,o,s){for(var _ in i)if(!o.call(s,i[_],_,i))return!1;return!0},goog.object.getCount=function(i){var o,s=0;for(o in i)s++;return s},goog.object.getAnyKey=function(i){for(var o in i)return o},goog.object.getAnyValue=function(i){for(var o in i)return i[o]},goog.object.contains=function(i,o){return goog.object.containsValue(i,o)},goog.object.getValues=function(i){var o,s=[],_=0;for(o in i)s[_++]=i[o];return s},goog.object.getKeys=function(i){var o,s=[],_=0;for(o in i)s[_++]=o;return s},goog.object.getValueByKeys=function(i,o){var s=goog.isArrayLike(o),_=s?o:arguments;for(s=s?0:1;s<_.length;s++){if(i==null)return;i=i[_[s]]}return i},goog.object.containsKey=function(i,o){return i!==null&&o in i},goog.object.containsValue=function(i,o){for(var s in i)if(i[s]==o)return!0;return!1},goog.object.findKey=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return _},goog.object.findValue=function(i,o,s){return(o=goog.object.findKey(i,o,s))&&i[o]},goog.object.isEmpty=function(i){for(var o in i)return!1;return!0},goog.object.clear=function(i){for(var o in i)delete i[o]},goog.object.remove=function(i,o){var s;return(s=o in i)&&delete i[o],s},goog.object.add=function(i,o,s){if(i!==null&&o in i)throw Error('The object already contains the key "'+o+'"');goog.object.set(i,o,s)},goog.object.get=function(i,o,s){return i!==null&&o in i?i[o]:s},goog.object.set=function(i,o,s){i[o]=s},goog.object.setIfUndefined=function(i,o,s){return o in i?i[o]:i[o]=s},goog.object.setWithReturnValueIfNotSet=function(i,o,s){return o in i?i[o]:(s=s(),i[o]=s)},goog.object.equals=function(i,o){for(var s in i)if(!(s in o)||i[s]!==o[s])return!1;for(var _ in o)if(!(_ in i))return!1;return!0},goog.object.clone=function(i){var o,s={};for(o in i)s[o]=i[o];return s},goog.object.unsafeClone=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(goog.isFunction(i.clone))return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.object.unsafeClone(i[s]);return o}return i},goog.object.transpose=function(i){var o,s={};for(o in i)s[i[o]]=o;return s},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(i,o){for(var s,_,$=1;$<arguments.length;$++){for(s in _=arguments[$])i[s]=_[s];for(var et=0;et<goog.object.PROTOTYPE_FIELDS_.length;et++)s=goog.object.PROTOTYPE_FIELDS_[et],Object.prototype.hasOwnProperty.call(_,s)&&(i[s]=_[s])}},goog.object.create=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(o%2)throw Error("Uneven number of arguments");for(var s={},_=0;_<o;_+=2)s[arguments[_]]=arguments[_+1];return s},goog.object.createSet=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var s={},_=0;_<o;_++)s[arguments[_]]=!0;return s},goog.object.createImmutableView=function(i){var o=i;return Object.isFrozen&&!Object.isFrozen(i)&&(o=Object.create(i),Object.freeze(o)),o},goog.object.isImmutableView=function(i){return!!Object.isFrozen&&Object.isFrozen(i)},goog.object.getAllPropertyNames=function(i,o,s){if(!i)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(i);for(var _={};i&&(i!==Object.prototype||o)&&(i!==Function.prototype||s);){for(var $=Object.getOwnPropertyNames(i),et=0;et<$.length;et++)_[$[et]]=!0;i=Object.getPrototypeOf(i)}return goog.object.getKeys(_)},goog.object.getSuperClass=function(i){return(i=Object.getPrototypeOf(i.prototype))&&i.constructor},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(i,o){if(goog.string.internal.contains(i,"<"))throw Error("Selector does not allow '<', got: "+i);var s=i.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(s))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+i);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(s))throw Error("() and [] in selector must be balanced, got: "+i);return o instanceof goog.html.SafeStyle||(o=goog.html.SafeStyle.create(o)),i=i+"{"+goog.html.SafeStyle.unwrap(o).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(i){for(var o={"(":")","[":"]"},s=[],_=0;_<i.length;_++){var $=i[_];if(o[$])s.push(o[$]);else if(goog.object.contains(o,$)&&s.pop()!=$)return!1}return s.length==0},goog.html.SafeStyleSheet.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyleSheet.unwrap(_)};return goog.array.forEach(arguments,s),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeStyleSheet.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(i,"<"),"Forbidden '<' character in style sheet string: "+i),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(i){return i instanceof goog.html.SafeStyleSheet&&i.constructor===goog.html.SafeStyleSheet&&i.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=i,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(i){return goog.dom.tags.VOID_TAGS_[i]===!0},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(i){this.tagName_=i},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var i=goog.labs.userAgent.util.getNavigator_();return i&&(i=i.userAgent)?i:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(i){goog.labs.userAgent.util.userAgent_=i||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(o,i)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(o,i)},goog.labs.userAgent.util.extractVersionTuples=function(i){for(var o,s=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,_=[];o=s.exec(i);)_.push([o[1],o[2],o[3]||void 0]);return _},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function i($){return $=goog.array.find($,_),s[$]||""}var o=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(o);o=goog.labs.userAgent.util.extractVersionTuples(o);var s={};goog.array.forEach(o,function($){s[$[0]]=$[1]});var _=goog.partial(goog.object.containsKey,s);return goog.labs.userAgent.browser.isOpera()?i(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?i(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?i(["Edg"]):goog.labs.userAgent.browser.isChrome()?i(["Chrome","CriOS"]):(o=o[2])&&o[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(i){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),i)},goog.labs.userAgent.browser.getIEVersion_=function(i){var o=/rv: *([\d\.]*)/.exec(i);if(o&&o[1])return o[1];o="";var s=/MSIE +([\d\.]+)/.exec(i);if(s&&s[1])if(i=/Trident\/(\d.\d)/.exec(i),s[1]=="7.0")if(i&&i[1])switch(i[1]){case"4.0":o="8.0";break;case"5.0":o="9.0";break;case"6.0":o="10.0";break;case"7.0":o="11.0"}else o="7.0";else o=s[1];return o},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(i){return goog.html.SafeHtml.unwrapTrustedHTML(i).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(i){return i instanceof goog.html.SafeHtml&&i.constructor===goog.html.SafeHtml&&i.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(i){if(i instanceof goog.html.SafeHtml)return i;var o=typeof i=="object",s=null;return o&&i.implementsGoogI18nBidiDirectionalString&&(s=i.getDirection()),i=o&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(i),s)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(i,o,s){return goog.html.SafeHtml.verifyTagName(String(i)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(i),o,s)},goog.html.SafeHtml.verifyTagName=function(i){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(i))throw Error("Invalid tag name <"+i+">.");if(i.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+i+"> is not allowed for SafeHtml.")},goog.html.SafeHtml.createIframe=function(i,o,s,_){i&&goog.html.TrustedResourceUrl.unwrap(i);var $={};return $.src=i||null,$.srcdoc=o&&goog.html.SafeHtml.unwrap(o),i=goog.html.SafeHtml.combineAttributes($,{sandbox:""},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.createSandboxIframe=function(i,o,s,_){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var $={};return $.src=i?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)):null,$.srcdoc=o||null,$.sandbox="",i=goog.html.SafeHtml.combineAttributes($,{},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(i,o){return goog.html.TrustedResourceUrl.unwrap(i),i=goog.html.SafeHtml.combineAttributes({src:i},{},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",i)},goog.html.SafeHtml.createScript=function(i,o){for(var s in o){var _=s.toLowerCase();if(_=="language"||_=="src"||_=="text"||_=="type")throw Error('Cannot set "'+_+'" attribute')}for(s="",i=goog.array.concat(i),_=0;_<i.length;_++)s+=goog.html.SafeScript.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",o,i)},goog.html.SafeHtml.createStyle=function(i,o){o=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},o);var s="";i=goog.array.concat(i);for(var _=0;_<i.length;_++)s+=goog.html.SafeStyleSheet.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",o,i)},goog.html.SafeHtml.createMetaRefresh=function(i,o){return i=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(o||0)+"; url="+i})},goog.html.SafeHtml.getAttrNameAndValue_=function(i,o,s){if(s instanceof goog.string.Const)s=goog.string.Const.unwrap(s);else if(o.toLowerCase()=="style")s=goog.html.SafeHtml.getStyleValue_(s);else{if(/^on/i.test(o))throw Error('Attribute "'+o+'" requires goog.string.Const value, "'+s+'" given.');if(o.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(s instanceof goog.html.TrustedResourceUrl)s=goog.html.TrustedResourceUrl.unwrap(s);else if(s instanceof goog.html.SafeUrl)s=goog.html.SafeUrl.unwrap(s);else{if(!goog.isString(s))throw Error('Attribute "'+o+'" on tag "'+i+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+s+'" given.');s=goog.html.SafeUrl.sanitize(s).getTypedStringValue()}}return s.implementsGoogStringTypedString&&(s=s.getTypedStringValue()),goog.asserts.assert(goog.isString(s)||goog.isNumber(s),"String or number value expected, got "+typeof s+" with value: "+s),o+'="'+goog.string.internal.htmlEscape(String(s))+'"'},goog.html.SafeHtml.getStyleValue_=function(i){if(!goog.isObject(i))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof i+" given: "+i);return i instanceof goog.html.SafeStyle||(i=goog.html.SafeStyle.create(i)),goog.html.SafeStyle.unwrap(i)},goog.html.SafeHtml.createWithDir=function(i,o,s,_){return(o=goog.html.SafeHtml.create(o,s,_)).dir_=i,o},goog.html.SafeHtml.join=function(i,o){var s=(i=goog.html.SafeHtml.htmlEscape(i)).getDirection(),_=[],$=function(et){goog.isArray(et)?goog.array.forEach(et,$):(et=goog.html.SafeHtml.htmlEscape(et),_.push(goog.html.SafeHtml.unwrap(et)),et=et.getDirection(),s==goog.i18n.bidi.Dir.NEUTRAL?s=et:et!=goog.i18n.bidi.Dir.NEUTRAL&&s!=et&&(s=null))};return goog.array.forEach(o,$),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(_.join(goog.html.SafeHtml.unwrap(i)),s)},goog.html.SafeHtml.concat=function(i){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(i,o){var s=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return s.dir_=i,s},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(i,o){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(i,o)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i,o){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(i):i,this.dir_=o,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(i,o,s){var _=null,$="<"+i+goog.html.SafeHtml.stringifyAttributes(i,o);return goog.isDefAndNotNull(s)?goog.isArray(s)||(s=[s]):s=[],goog.dom.tags.isVoidTag(i.toLowerCase())?(goog.asserts.assert(!s.length,"Void tag <"+i+"> does not allow content."),$+=">"):(_=goog.html.SafeHtml.concat(s),$+=">"+goog.html.SafeHtml.unwrap(_)+"</"+i+">",_=_.getDirection()),(i=o&&o.dir)&&(_=/^(ltr|rtl|auto)$/i.test(i)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse($,_)},goog.html.SafeHtml.stringifyAttributes=function(i,o){var s="";if(o)for(var _ in o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(_))throw Error('Invalid attribute name "'+_+'".');var $=o[_];goog.isDefAndNotNull($)&&(s+=" "+goog.html.SafeHtml.getAttrNameAndValue_(i,_,$))}return s},goog.html.SafeHtml.combineAttributes=function(i,o,s){var _,$={};for(_ in i)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=i[_];for(_ in o)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=o[_];for(_ in s){var et=_.toLowerCase();if(et in i)throw Error('Cannot override "'+et+'" attribute, got "'+_+'" with value "'+s[_]+'"');et in o&&delete $[et],$[_]=s[_]}return $},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(i,o,s){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,s||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(i){if(goog.asserts.ENABLE_ASSERTS){var o=goog.dom.asserts.getWindow_(i);o&&(!i||!(i instanceof o.Location)&&i instanceof o.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(i))}return i},goog.dom.asserts.assertIsElementType_=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=goog.dom.asserts.getWindow_(i);s&&s[o]!==void 0&&(i&&(i instanceof s[o]||!(i instanceof s.Location||i instanceof s.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",o,goog.dom.asserts.debugStringForType_(i)))}return i},goog.dom.asserts.assertIsHTMLAnchorElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(i){if(!goog.isObject(i))return i===void 0?"undefined":i===null?"null":typeof i;try{return i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch{return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(i){try{var o=i&&i.ownerDocument,s=o&&(o.defaultView||o.parentWindow);if((s=s||goog.global).Element&&s.Location)return s}catch{}return null},goog.functions={},goog.functions.constant=function(i){return function(){return i}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(i,o){return i},goog.functions.error=function(i){return function(){throw Error(i)}},goog.functions.fail=function(i){return function(){throw i}},goog.functions.lock=function(i,o){return o=o||0,function(){return i.apply(this,Array.prototype.slice.call(arguments,0,o))}},goog.functions.nth=function(i){return function(){return arguments[i]}},goog.functions.partialRight=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=Array.prototype.slice.call(arguments);return _.push.apply(_,s),i.apply(this,_)}},goog.functions.withReturnValue=function(i,o){return goog.functions.sequence(i,goog.functions.constant(o))},goog.functions.equalTo=function(i,o){return function(s){return o?i==s:i===s}},goog.functions.compose=function(i,o){var s=arguments,_=s.length;return function(){var $;_&&($=s[_-1].apply(this,arguments));for(var et=_-2;0<=et;et--)$=s[et].call(this,$);return $}},goog.functions.sequence=function(i){var o=arguments,s=o.length;return function(){for(var _,$=0;$<s;$++)_=o[$].apply(this,arguments);return _}},goog.functions.and=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(!o[_].apply(this,arguments))return!1;return!0}},goog.functions.or=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(o[_].apply(this,arguments))return!0;return!1}},goog.functions.not=function(i){return function(){return!i.apply(this,arguments)}},goog.functions.create=function(i,o){var s=function(){};return s.prototype=i.prototype,s=new s,i.apply(s,Array.prototype.slice.call(arguments,1)),s},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(i){var o,s=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(s||(o=i(),s=!0),o):i()}},goog.functions.once=function(i){var o=i;return function(){if(o){var s=o;o=null,s()}}},goog.functions.debounce=function(i,o,s){var _=0;return function($){goog.global.clearTimeout(_);var et=arguments;_=goog.global.setTimeout(function(){i.apply(s,et)},o)}},goog.functions.throttle=function(i,o,s){var _=0,$=!1,et=[],tt=function(){_=0,$&&($=!1,j())},j=function(){_=goog.global.setTimeout(tt,o),i.apply(s,et)};return function(it){et=arguments,_?$=!0:j()}},goog.functions.rateLimit=function(i,o,s){var _=0,$=function(){_=0};return function(et){_||(_=goog.global.setTimeout($,o),i.apply(s,arguments))}},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(i,o,s){i.insertAdjacentHTML(o,goog.html.SafeHtml.unwrapTrustedHTML(s))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var i=document.createElement("div"),o=document.createElement("div");return o.appendChild(document.createElement("div")),i.appendChild(o),!(goog.DEBUG&&!i.firstChild)&&(o=i.firstChild.firstChild,i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!o.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(i,o){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;i.lastChild;)i.removeChild(i.lastChild);i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setInnerHtml=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=i.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[s])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+i.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(i,o)},goog.dom.safe.setOuterHtml=function(i,o){i.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setFormElementAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLFormElement(i).action=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setButtonFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLButtonElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setInputFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLInputElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setStyle=function(i,o){i.style.cssText=goog.html.SafeStyle.unwrap(o)},goog.dom.safe.documentWrite=function(i,o){i.write(goog.html.SafeHtml.unwrapTrustedHTML(o))},goog.dom.safe.setAnchorHref=function(i,o){goog.dom.asserts.assertIsHTMLAnchorElement(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setImageSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLImageElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:image\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setAudioSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLAudioElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:audio\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setVideoSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLVideoElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:video\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setEmbedSrc=function(i,o){goog.dom.asserts.assertIsHTMLEmbedElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setFrameSrc=function(i,o){goog.dom.asserts.assertIsHTMLFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrcdoc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setLinkHrefAndRel=function(i,o,s){goog.dom.asserts.assertIsHTMLLinkElement(i),i.rel=s,goog.string.internal.caseInsensitiveContains(s,"stylesheet")?(goog.asserts.assert(o instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),i.href=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)):i.href=o instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrapTrustedURL(o):o instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrapTrustedURL(o):goog.html.SafeUrl.unwrapTrustedURL(goog.html.SafeUrl.sanitizeAssertUnchanged(o))},goog.dom.safe.setObjectData=function(i,o){goog.dom.asserts.assertIsHTMLObjectElement(i),i.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setScriptSrc=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setScriptContent=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.text=goog.html.SafeScript.unwrapTrustedScript(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setLocationHref=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.assignLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.assign(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.replaceLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.replace(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.openInWindow=function(i,o,s,_,$){return i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),(o||goog.global).open(goog.html.SafeUrl.unwrapTrustedURL(i),s?goog.string.Const.unwrap(s):"",_,$)},goog.dom.safe.parseFromStringHtml=function(i,o){return goog.dom.safe.parseFromString(i,o,"text/html")},goog.dom.safe.parseFromString=function(i,o,s){return i.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(o),s)},goog.dom.safe.createImageFromBlob=function(i){if(!/^image\/.*/g.test(i.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var o=goog.global.URL.createObjectURL(i);return(i=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(o)},goog.dom.safe.setImageSrc(i,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),o)),i},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(i,o){for(var s=i.split("%s"),_="",$=Array.prototype.slice.call(arguments,1);$.length&&1<s.length;)_+=s.shift()+$.shift();return _+s.join("%s")},goog.string.collapseWhitespace=function(i){return i.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(i){return i.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(i){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(i))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(i){return!/[^\t\n\r ]/.test(i)},goog.string.isAlpha=function(i){return!/[^a-zA-Z]/.test(i)},goog.string.isNumeric=function(i){return!/[^0-9]/.test(i)},goog.string.isAlphaNumeric=function(i){return!/[^a-zA-Z0-9]/.test(i)},goog.string.isSpace=function(i){return i==" "},goog.string.isUnicodeChar=function(i){return i.length==1&&" "<=i&&"~">=i||""<=i&&"�">=i},goog.string.stripNewlines=function(i){return i.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(i){return i.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(i){return i.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(i){return i.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(i){return i.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(i){return i.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(i){return i.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(i,o,s){if(i==o)return 0;if(!i)return-1;if(!o)return 1;for(var _=i.toLowerCase().match(s),$=o.toLowerCase().match(s),et=Math.min(_.length,$.length),tt=0;tt<et;tt++){s=_[tt];var j=$[tt];if(s!=j)return i=parseInt(s,10),!isNaN(i)&&(o=parseInt(j,10),!isNaN(o)&&i-o)?i-o:s<j?-1:1}return _.length!=$.length?_.length-$.length:i<o?-1:1},goog.string.intAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\D+/g)},goog.string.floatAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(i){return encodeURIComponent(String(i))},goog.string.urlDecode=function(i){return decodeURIComponent(i.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(i,o){return i=goog.string.internal.htmlEscape(i,o),goog.string.DETECT_DOUBLE_ESCAPING&&(i=i.replace(goog.string.E_RE_,"&#101;")),i},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(i){return goog.string.contains(i,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(i):goog.string.unescapePureXmlEntities_(i):i},goog.string.unescapeEntitiesWithDocument=function(i,o){return goog.string.contains(i,"&")?goog.string.unescapeEntitiesUsingDom_(i,o):i},goog.string.unescapeEntitiesUsingDom_=function(i,o){var s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},_=o?o.createElement("div"):goog.global.document.createElement("div");return i.replace(goog.string.HTML_ENTITY_PATTERN_,function($,et){var tt=s[$];return tt||(et.charAt(0)=="#"&&(et=Number("0"+et.substr(1)),isNaN(et)||(tt=String.fromCharCode(et))),tt||(goog.dom.safe.setInnerHtml(_,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),$+" ")),tt=_.firstChild.nodeValue.slice(0,-1)),s[$]=tt)})},goog.string.unescapePureXmlEntities_=function(i){return i.replace(/&([^;]+);/g,function(o,s){switch(s){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return s.charAt(0)!="#"||(s=Number("0"+s.substr(1)),isNaN(s))?o:String.fromCharCode(s)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(i,o){return goog.string.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.preserveSpaces=function(i){return i.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(i,o){for(var s=o.length,_=0;_<s;_++){var $=s==1?o:o.charAt(_);if(i.charAt(0)==$&&i.charAt(i.length-1)==$)return i.substring(1,i.length-1)}return i},goog.string.truncate=function(i,o,s){return s&&(i=goog.string.unescapeEntities(i)),i.length>o&&(i=i.substring(0,o-3)+"..."),s&&(i=goog.string.htmlEscape(i)),i},goog.string.truncateMiddle=function(i,o,s,_){if(s&&(i=goog.string.unescapeEntities(i)),_&&i.length>o){_>o&&(_=o);var $=i.length-_;i=i.substring(0,o-_)+"..."+i.substring($)}else i.length>o&&(_=Math.floor(o/2),$=i.length-_,i=i.substring(0,_+o%2)+"..."+i.substring($));return s&&(i=goog.string.htmlEscape(i)),i},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(i){i=String(i);for(var o=['"'],s=0;s<i.length;s++){var _=i.charAt(s),$=_.charCodeAt(0);o[s+1]=goog.string.specialEscapeChars_[_]||(31<$&&127>$?_:goog.string.escapeChar(_))}return o.push('"'),o.join("")},goog.string.escapeString=function(i){for(var o=[],s=0;s<i.length;s++)o[s]=goog.string.escapeChar(i.charAt(s));return o.join("")},goog.string.escapeChar=function(i){if(i in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[i];if(i in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[i]=goog.string.specialEscapeChars_[i];var o=i.charCodeAt(0);if(31<o&&127>o)var s=i;else 256>o?(s="\\x",(16>o||256<o)&&(s+="0")):(s="\\u",4096>o&&(s+="0")),s+=o.toString(16).toUpperCase();return goog.string.jsEscapeCache_[i]=s},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(i,o){return i&&o?i.split(o).length-1:0},goog.string.removeAt=function(i,o,s){var _=i;return 0<=o&&o<i.length&&0<s&&(_=i.substr(0,o)+i.substr(o+s,i.length-o-s)),_},goog.string.remove=function(i,o){return i.replace(o,"")},goog.string.removeAll=function(i,o){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,"")},goog.string.replaceAll=function(i,o,s){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,s.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(i){return String(i).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(i,o){return i.repeat(o)}:function(i,o){return Array(o+1).join(i)},goog.string.padNumber=function(i,o,s){return(s=(i=goog.isDef(s)?i.toFixed(s):String(i)).indexOf("."))==-1&&(s=i.length),goog.string.repeat("0",Math.max(0,o-s))+i},goog.string.makeSafe=function(i){return i==null?"":String(i)},goog.string.buildString=function(i){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(i){for(var o=0,s=0;s<i.length;++s)o=31*o+i.charCodeAt(s)>>>0;return o},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(i){var o=Number(i);return o==0&&goog.string.isEmptyOrWhitespace(i)?NaN:o},goog.string.isLowerCamelCase=function(i){return/^[a-z]+([A-Z][a-z]*)*$/.test(i)},goog.string.isUpperCamelCase=function(i){return/^([A-Z][a-z]*)+$/.test(i)},goog.string.toCamelCase=function(i){return String(i).replace(/\-([a-z])/g,function(o,s){return s.toUpperCase()})},goog.string.toSelectorCase=function(i){return String(i).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(i,o){return o=goog.isString(o)?goog.string.regExpEscape(o):"\\s",i.replace(new RegExp("(^"+(o?"|["+o+"]+":"")+")([a-z])","g"),function(s,_,$){return _+$.toUpperCase()})},goog.string.capitalize=function(i){return String(i.charAt(0)).toUpperCase()+String(i.substr(1)).toLowerCase()},goog.string.parseInt=function(i){return isFinite(i)&&(i=String(i)),goog.isString(i)?/^\s*-?0x/i.test(i)?parseInt(i,16):parseInt(i,10):NaN},goog.string.splitLimit=function(i,o,s){i=i.split(o);for(var _=[];0<s&&i.length;)_.push(i.shift()),s--;return i.length&&_.push(i.join(o)),_},goog.string.lastComponent=function(i,o){if(!o)return i;typeof o=="string"&&(o=[o]);for(var s=-1,_=0;_<o.length;_++)if(o[_]!=""){var $=i.lastIndexOf(o[_]);$>s&&(s=$)}return s==-1?i:i.slice(s+1)},goog.string.editDistance=function(i,o){var s=[],_=[];if(i==o)return 0;if(!i.length||!o.length)return Math.max(i.length,o.length);for(var $=0;$<o.length+1;$++)s[$]=$;for($=0;$<i.length;$++){_[0]=$+1;for(var et=0;et<o.length;et++)_[et+1]=Math.min(_[et]+1,s[et+1]+1,s[et]+Number(i[$]!=o[et]));for(et=0;et<s.length;et++)s[et]=_[et]}return _[o.length]},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent(),o="";return goog.labs.userAgent.platform.isWindows()?o=(i=(o=/Windows (?:NT|Phone) ([0-9.]+)/).exec(i))?i[1]:"0.0":goog.labs.userAgent.platform.isIos()?o=(i=(o=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(i))&&i[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?o=(i=(o=/Mac OS X ([0-9_.]+)/).exec(i))?i[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?o=(i=(o=/(?:KaiOS)\/(\S+)/i).exec(i))&&i[1]:goog.labs.userAgent.platform.isAndroid()?o=(i=(o=/Android\s+([^\);]+)(\)|;)/).exec(i))&&i[1]:goog.labs.userAgent.platform.isChromeOS()&&(o=(i=(o=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(i))&&i[1]),o||""},goog.labs.userAgent.platform.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),i)},goog.reflect={},goog.reflect.object=function(i,o){return o},goog.reflect.objectProperty=function(i,o){return i},goog.reflect.sinkValue=function(i){return goog.reflect.sinkValue[" "](i),i},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(i,o){try{return goog.reflect.sinkValue(i[o]),!0}catch{}return!1},goog.reflect.cache=function(i,o,s,_){return _=_?_(o):o,Object.prototype.hasOwnProperty.call(i,_)?i[_]:i[_]=s(o)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent();if(i){i=goog.labs.userAgent.util.extractVersionTuples(i);var o,s=goog.labs.userAgent.engine.getEngineTuple_(i);if(s)return s[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(i,"Firefox"):s[1];if((i=i[0])&&(o=i[2])&&(o=/Trident\/([^\s;]+)/.exec(o)))return o[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(i){if(!goog.labs.userAgent.engine.isEdge())return i[1];for(var o=0;o<i.length;o++){var s=i[o];if(s[0]=="Edge")return s}},goog.labs.userAgent.engine.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),i)},goog.labs.userAgent.engine.getVersionForKey_=function(i,o){return(i=goog.array.find(i,function(s){return o==s[0]}))&&i[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var i=goog.userAgent.getNavigatorTyped();return i&&i.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var i=goog.userAgent.getNavigatorTyped();return!!i&&goog.string.contains(i.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var i="",o=goog.userAgent.getVersionRegexResult_();return o&&(i=o?o[1]:""),goog.userAgent.IE&&(o=goog.userAgent.getDocumentMode_())!=null&&o>parseFloat(i)?String(o):i},goog.userAgent.getVersionRegexResult_=function(){var i=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(i):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(i):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(i):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(i):void 0},goog.userAgent.getDocumentMode_=function(){var i=goog.global.document;return i?i.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(i,o){return goog.string.compareVersions(i,o)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(i){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,i,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,i)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(i){return Number(goog.userAgent.DOCUMENT_MODE)>=i},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(i){return goog.string.contains(goog.crypt.base64.paddingChars_,i)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(i,o){goog.asserts.assert(goog.isArrayLike(i),"encodeByteArray takes an array as a parameter"),o===void 0&&(o=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),o=goog.crypt.base64.byteToCharMaps_[o];for(var s=[],_=0;_<i.length;_+=3){var $=i[_],et=_+1<i.length,tt=et?i[_+1]:0,j=_+2<i.length,it=j?i[_+2]:0,st=$>>2;$=(3&$)<<4|tt>>4,tt=(15&tt)<<2|it>>6,it&=63,j||(it=64,et||(tt=64)),s.push(o[st],o[$],o[tt]||"",o[it]||"")}return s.join("")},goog.crypt.base64.encodeString=function(i,o){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!o?goog.global.btoa(i):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(i),o)},goog.crypt.base64.decodeString=function(i,o){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!o)return goog.global.atob(i);var s="";return goog.crypt.base64.decodeStringInternal_(i,function(_){s+=String.fromCharCode(_)}),s},goog.crypt.base64.decodeStringToByteArray=function(i,o){var s=[];return goog.crypt.base64.decodeStringInternal_(i,function(_){s.push(_)}),s},goog.crypt.base64.decodeStringToUint8Array=function(i){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var o=i.length,s=3*o/4;s%3?s=Math.floor(s):goog.crypt.base64.isPadding_(i[o-1])&&(s=goog.crypt.base64.isPadding_(i[o-2])?s-2:s-1);var _=new Uint8Array(s),$=0;return goog.crypt.base64.decodeStringInternal_(i,function(et){_[$++]=et}),_.subarray(0,$)},goog.crypt.base64.decodeStringInternal_=function(i,o){function s(it){for(;_<i.length;){var st=i.charAt(_++),ht=goog.crypt.base64.charToByteMap_[st];if(ht!=null)return ht;if(!goog.string.isEmptyOrWhitespace(st))throw Error("Unknown base64 encoding at char: "+st)}return it}goog.crypt.base64.init_();for(var _=0;;){var $=s(-1),et=s(0),tt=s(64),j=s(64);if(j===64&&$===-1)break;o($<<2|et>>4),tt!=64&&(o(et<<4&240|tt>>2),j!=64&&o(tt<<6&192|j))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var i=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),o=["+/=","+/","-_=","-_.","-_"],s=0;5>s;s++){var _=i.concat(o[s].split(""));goog.crypt.base64.byteToCharMaps_[s]=_;for(var $=0;$<_.length;$++){var et=_[$],tt=goog.crypt.base64.charToByteMap_[et];tt===void 0?goog.crypt.base64.charToByteMap_[et]=$:goog.asserts.assert(tt===$)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(i){var o=i>>>0;i=Math.floor((i-o)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=o,jspb.utils.split64High=i},jspb.utils.splitInt64=function(i){var o=0>i,s=(i=Math.abs(i))>>>0;i=Math.floor((i-s)/jspb.BinaryConstants.TWO_TO_32),i>>>=0,o&&(i=~i>>>0,4294967295<(s=1+(~s>>>0))&&(s=0,4294967295<++i&&(i=0))),jspb.utils.split64Low=s,jspb.utils.split64High=i},jspb.utils.splitZigzag64=function(i){var o=0>i;i=2*Math.abs(i),jspb.utils.splitUint64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;o&&(i==0?s==0?s=i=4294967295:(s--,i=4294967295):i--),jspb.utils.split64Low=i,jspb.utils.split64High=s},jspb.utils.splitFloat32=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)0<1/i?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(i))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(i>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|2139095040)>>>0;else if(i<jspb.BinaryConstants.FLOAT32_MIN)i=Math.round(i/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|i)>>>0;else{var s=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-s),i=8388607&Math.round(i*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|s+127<<23|i)>>>0}},jspb.utils.splitFloat64=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)jspb.utils.split64High=0<1/i?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(i))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(i>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(o<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(i<jspb.BinaryConstants.FLOAT64_MIN){var s=i/Math.pow(2,-1074);i=s/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(o<<31|i)>>>0,jspb.utils.split64Low=s>>>0}else{var _=0;if(2<=(s=i))for(;2<=s&&1023>_;)_++,s/=2;else for(;1>s&&-1022<_;)s*=2,_--;i=(s=i*Math.pow(2,-_))*jspb.BinaryConstants.TWO_TO_20&1048575,s=s*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(o<<31|_+1023<<20|i)>>>0,jspb.utils.split64Low=s}},jspb.utils.splitHash64=function(i){var o=i.charCodeAt(0),s=i.charCodeAt(1),_=i.charCodeAt(2),$=i.charCodeAt(3),et=i.charCodeAt(4),tt=i.charCodeAt(5),j=i.charCodeAt(6);i=i.charCodeAt(7),jspb.utils.split64Low=o+(s<<8)+(_<<16)+($<<24)>>>0,jspb.utils.split64High=et+(tt<<8)+(j<<16)+(i<<24)>>>0},jspb.utils.joinUint64=function(i,o){return o*jspb.BinaryConstants.TWO_TO_32+(i>>>0)},jspb.utils.joinInt64=function(i,o){var s=2147483648&o;return s&&(o=~o>>>0,(i=1+~i>>>0)==0&&(o=o+1>>>0)),i=jspb.utils.joinUint64(i,o),s?-i:i},jspb.utils.toZigzag64=function(i,o,s){var _=o>>31;return s(i<<1^_,(o<<1|i>>>31)^_)},jspb.utils.joinZigzag64=function(i,o){return jspb.utils.fromZigzag64(i,o,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(i,o,s){var _=-(1&i);return s((i>>>1|o<<31)^_,o>>>1^_)},jspb.utils.joinFloat32=function(i,o){o=2*(i>>31)+1;var s=i>>>23&255;return i&=8388607,s==255?i?NaN:1/0*o:s==0?o*Math.pow(2,-149)*i:o*Math.pow(2,s-150)*(i+Math.pow(2,23))},jspb.utils.joinFloat64=function(i,o){var s=2*(o>>31)+1,_=o>>>20&2047;return i=jspb.BinaryConstants.TWO_TO_32*(1048575&o)+i,_==2047?i?NaN:1/0*s:_==0?s*Math.pow(2,-1074)*i:s*Math.pow(2,_-1075)*(i+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(i,o){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,o>>>0&255,o>>>8&255,o>>>16&255,o>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(i,o){function s($,et){return $=$?String($):"",et?"0000000".slice($.length)+$:$}if(2097151>=o)return""+(jspb.BinaryConstants.TWO_TO_32*o+i);var _=(i>>>24|o<<8)>>>0&16777215;return i=(16777215&i)+6777216*_+6710656*(o=o>>16&65535),_+=8147497*o,o*=2,1e7<=i&&(_+=Math.floor(i/1e7),i%=1e7),1e7<=_&&(o+=Math.floor(_/1e7),_%=1e7),s(o,0)+s(_,o)+s(i,1)},jspb.utils.joinSignedDecimalString=function(i,o){var s=2147483648&o;return s&&(o=~o+((i=1+~i>>>0)==0?1:0)>>>0),i=jspb.utils.joinUnsignedDecimalString(i,o),s?"-"+i:i},jspb.utils.hash64ToDecimalString=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinSignedDecimalString(i,s):jspb.utils.joinUnsignedDecimalString(i,s)},jspb.utils.hash64ArrayToDecimalStrings=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]=jspb.utils.hash64ToDecimalString(i[_],o);return s},jspb.utils.decimalStringToHash64=function(i){function o(et,tt){for(var j=0;8>j&&(et!==1||0<tt);j++)tt=et*_[j]+tt,_[j]=255&tt,tt>>>=8}goog.asserts.assert(0<i.length);var s=!1;i[0]==="-"&&(s=!0,i=i.slice(1));for(var _=[0,0,0,0,0,0,0,0],$=0;$<i.length;$++)o(10,i.charCodeAt($)-jspb.utils.ZERO_CHAR_CODE_);return s&&(function(){for(var et=0;8>et;et++)_[et]=255&~_[et]}(),o(1,1)),goog.crypt.byteArrayToString(_)},jspb.utils.splitDecimalString=function(i){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i))},jspb.utils.toHexDigit_=function(i){return String.fromCharCode(10>i?jspb.utils.ZERO_CHAR_CODE_+i:jspb.utils.A_CHAR_CODE_-10+i)},jspb.utils.fromHexCharCode_=function(i){return i>=jspb.utils.A_CHAR_CODE_?i-jspb.utils.A_CHAR_CODE_+10:i-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(i){var o=Array(18);o[0]="0",o[1]="x";for(var s=0;8>s;s++){var _=i.charCodeAt(7-s);o[2*s+2]=jspb.utils.toHexDigit_(_>>4),o[2*s+3]=jspb.utils.toHexDigit_(15&_)}return o.join("")},jspb.utils.hexStringToHash64=function(i){i=i.toLowerCase(),goog.asserts.assert(i.length==18),goog.asserts.assert(i[0]=="0"),goog.asserts.assert(i[1]=="x");for(var o="",s=0;8>s;s++){var _=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+2)),$=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+3));o=String.fromCharCode(16*_+$)+o}return o},jspb.utils.hash64ToNumber=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinInt64(i,s):jspb.utils.joinUint64(i,s)},jspb.utils.numberToHash64=function(i){return jspb.utils.splitInt64(i),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(i,o,s){for(var _=0,$=o;$<s;$++)_+=i[$]>>7;return s-o-_},jspb.utils.countVarintFields=function(i,o,s,_){var $=0;if(128>(_=8*_+jspb.BinaryConstants.WireType.VARINT))for(;o<s&&i[o++]==_;)for($++;;){var et=i[o++];if(!(128&et))break}else for(;o<s;){for(et=_;128<et;){if(i[o]!=(127&et|128))return $;o++,et>>=7}if(i[o++]!=et)break;for($++;128&(et=i[o++]););}return $},jspb.utils.countFixedFields_=function(i,o,s,_,$){var et=0;if(128>_)for(;o<s&&i[o++]==_;)et++,o+=$;else for(;o<s;){for(var tt=_;128<tt;){if(i[o++]!=(127&tt|128))return et;tt>>=7}if(i[o++]!=tt)break;et++,o+=$}return et},jspb.utils.countFixed32Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(i,o,s,_){var $=0;for(_=8*_+jspb.BinaryConstants.WireType.DELIMITED;o<s;){for(var et=_;128<et;){if(i[o++]!=(127&et|128))return $;et>>=7}if(i[o++]!=et)break;$++;for(var tt=0,j=1;tt+=(127&(et=i[o++]))*j,j*=128,(128&et)!=0;);o+=tt}return $},jspb.utils.debugBytesToTextFormat=function(i){var o='"';if(i){i=jspb.utils.byteSourceToUint8Array(i);for(var s=0;s<i.length;s++)o+="\\x",16>i[s]&&(o+="0"),o+=i[s].toString(16)}return o+'"'},jspb.utils.debugScalarToTextFormat=function(i){return typeof i=="string"?goog.string.quote(i):i.toString()},jspb.utils.stringToByteArray=function(i){for(var o=new Uint8Array(i.length),s=0;s<i.length;s++){var _=i.charCodeAt(s);if(255<_)throw Error("Conversion error: string contains codepoint outside of byte range");o[s]=_}return o},jspb.utils.byteSourceToUint8Array=function(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer||Buffer!==void 0&&i.constructor===Buffer||i.constructor===Array?new Uint8Array(i):i.constructor===String?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(i,o,s){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,i&&this.setBlock(i,o,s)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(i,o,s){if(jspb.BinaryDecoder.instanceCache_.length){var _=jspb.BinaryDecoder.instanceCache_.pop();return i&&_.setBlock(i,o,s),_}return new jspb.BinaryDecoder(i,o,s)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(i,o,s){this.bytes_=jspb.utils.byteSourceToUint8Array(i),this.start_=o!==void 0?o:0,this.end_=s!==void 0?this.start_+s:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(i){this.end_=i},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(i){this.cursor_=i},jspb.BinaryDecoder.prototype.advance=function(i){this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(i){for(var o=128,s=0,_=0,$=0;4>$&&128<=o;$++)s|=(127&(o=this.bytes_[this.cursor_++]))<<7*$;if(128<=o&&(s|=(127&(o=this.bytes_[this.cursor_++]))<<28,_|=(127&o)>>4),128<=o)for($=0;5>$&&128<=o;$++)_|=(127&(o=this.bytes_[this.cursor_++]))<<7*$+3;if(128>o)return i(s>>>0,_>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(i){return this.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(i){var o=this.bytes_,s=this.cursor_;this.cursor_+=8;for(var _=0,$=0,et=s+7;et>=s;et--)_=_<<8|o[et],$=$<<8|o[et+4];return i(_,$)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(i){for(;128<i;)this.cursor_--,i>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var i=this.bytes_,o=i[this.cursor_+0],s=127&o;return 128>o?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+1]))<<7,128>o?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+2]))<<14,128>o?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+3]))<<21,128>o?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(15&(o=i[this.cursor_+4]))<<28,128>o?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),s>>>0):(this.cursor_+=5,128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),s)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var i=this.readUnsignedVarint32();return i>>>1^-(1&i)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i},jspb.BinaryDecoder.prototype.readUint16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8|s<<16|_<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUint64(i,o)},jspb.BinaryDecoder.prototype.readUint64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUnsignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readInt8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8|s<<16|_<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinInt64(i,o)},jspb.BinaryDecoder.prototype.readInt64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinSignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readFloat=function(){var i=this.readUint32();return jspb.utils.joinFloat32(i,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinFloat64(i,o)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(i){var o=this.bytes_,s=this.cursor_;i=s+i;for(var _=[],$="";s<i;){var et=o[s++];if(128>et)_.push(et);else{if(192>et)continue;if(224>et){var tt=o[s++];_.push((31&et)<<6|63&tt)}else if(240>et){tt=o[s++];var j=o[s++];_.push((15&et)<<12|(63&tt)<<6|63&j)}else 248>et&&(et=(7&et)<<18|(63&(tt=o[s++]))<<12|(63&(j=o[s++]))<<6|63&o[s++],et-=65536,_.push(55296+(et>>10&1023),56320+(1023&et)))}8192<=_.length&&($+=String.fromCharCode.apply(null,_),_.length=0)}return $+=goog.crypt.byteArrayToString(_),this.cursor_=s,$},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var i=this.readUnsignedVarint32();return this.readString(i)},jspb.BinaryDecoder.prototype.readBytes=function(i){if(0>i||this.cursor_+i>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var o=this.bytes_.subarray(this.cursor_,this.cursor_+i);return this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_),o},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var i=this.bytes_,o=this.cursor_,s=i[o+0],_=i[o+1],$=i[o+2],et=i[o+3],tt=i[o+4],j=i[o+5],it=i[o+6];return i=i[o+7],this.cursor_+=8,String.fromCharCode(s,_,$,et,tt,j,it,i)},jspb.BinaryReader=function(i,o,s){this.decoder_=jspb.BinaryDecoder.alloc(i,o,s),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(i,o,s){if(jspb.BinaryReader.instanceCache_.length){var _=jspb.BinaryReader.instanceCache_.pop();return i&&_.decoder_.setBlock(i,o,s),_}return new jspb.BinaryReader(i,o,s)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(i,o,s){this.decoder_.setBlock(i,o,s),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(i){this.decoder_.advance(i)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var i=this.decoder_.readUnsignedVarint32(),o=i>>>3;return(i&=7)!=jspb.BinaryConstants.WireType.VARINT&&i!=jspb.BinaryConstants.WireType.FIXED32&&i!=jspb.BinaryConstants.WireType.FIXED64&&i!=jspb.BinaryConstants.WireType.DELIMITED&&i!=jspb.BinaryConstants.WireType.START_GROUP&&i!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",i,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=o,this.nextWireType_=i,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var i=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==i;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var i=this.decoder_.readUnsignedVarint32();this.decoder_.advance(i)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var i=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=i&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(i,o){this.readCallbacks_===null&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[i]),this.readCallbacks_[i]=o},jspb.BinaryReader.prototype.runReadCallback=function(i){return goog.asserts.assert(this.readCallbacks_!==null),i=this.readCallbacks_[i],goog.asserts.assert(i),i(this)},jspb.BinaryReader.prototype.readAny=function(i){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(i);var o=jspb.BinaryConstants.FieldType;switch(i){case o.DOUBLE:return this.readDouble();case o.FLOAT:return this.readFloat();case o.INT64:return this.readInt64();case o.UINT64:return this.readUint64();case o.INT32:return this.readInt32();case o.FIXED64:return this.readFixed64();case o.FIXED32:return this.readFixed32();case o.BOOL:return this.readBool();case o.STRING:return this.readString();case o.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case o.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case o.BYTES:return this.readBytes();case o.UINT32:return this.readUint32();case o.ENUM:return this.readEnum();case o.SFIXED32:return this.readSfixed32();case o.SFIXED64:return this.readSfixed64();case o.SINT32:return this.readSint32();case o.SINT64:return this.readSint64();case o.FHASH64:return this.readFixedHash64();case o.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(i,o){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var s=this.decoder_.getEnd(),_=this.decoder_.readUnsignedVarint32();_=this.decoder_.getCursor()+_,this.decoder_.setEnd(_),o(i,this),this.decoder_.setCursor(_),this.decoder_.setEnd(s)},jspb.BinaryReader.prototype.readGroup=function(i,o,s){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==i),s(o,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32(),o=this.decoder_.getCursor(),s=o+i;return i=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),o,i),this.decoder_.setCursor(s),i},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(i)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(i)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(i)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(i)},jspb.BinaryReader.prototype.readPackedField_=function(i){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var o=this.decoder_.readUnsignedVarint32();o=this.decoder_.getCursor()+o;for(var s=[];this.decoder_.getCursor()<o;)s.push(i.call(this.decoder_));return s},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(i,o){this.arr_=i,this.valueCtor_=o,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},jspb.Map.prototype.loadFromArray_=function(){for(var i=0;i<this.arr_.length;i++){var o=this.arr_[i],s=o[0];this.map_[s.toString()]=new jspb.Map.Entry_(s,o[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var i,o=this.map_;for(i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var s=o[i].valueWrapper;s&&s.toArray()}}}else{for(this.arr_.length=0,(o=this.stringKeys_()).sort(),i=0;i<o.length;i++){var _=this.map_[o[i]];(s=_.valueWrapper)&&s.toArray(),this.arr_.push([_.key,_.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(i,o){for(var s=this.toArray(),_=[],$=0;$<s.length;$++){var et=this.map_[s[$][0].toString()];this.wrapEntry_(et);var tt=et.valueWrapper;tt?(goog.asserts.assert(o),_.push([et.key,o(i,tt)])):_.push([et.key,et.value])}return _},jspb.Map.fromObject=function(i,o,s){o=new jspb.Map([],o);for(var _=0;_<i.length;_++){var $=i[_][0],et=s(i[_][1]);o.set($,et)}return o},jspb.Map.ArrayIteratorIterable_=function(i){this.idx_=0,this.arr_=i},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(i){i=i.toString();var o=this.map_.hasOwnProperty(i);return delete this.map_[i],this.arrClean=!1,o},jspb.Map.prototype.getEntryList=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,_.value])}return i},jspb.Map.prototype.entries=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,this.wrapEntry_(_)])}return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.keys=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.map_[o[s]].key);return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.values=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.wrapEntry_(this.map_[o[s]]));return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.forEach=function(i,o){var s=this.stringKeys_();s.sort();for(var _=0;_<s.length;_++){var $=this.map_[s[_]];i.call(o,this.wrapEntry_($),$.key,this)}},jspb.Map.prototype.set=function(i,o){var s=new jspb.Map.Entry_(i);return this.valueCtor_?(s.valueWrapper=o,s.value=o.toArray()):s.value=o,this.map_[i.toString()]=s,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(i){return this.valueCtor_?(i.valueWrapper||(i.valueWrapper=new this.valueCtor_(i.value)),i.valueWrapper):i.value},jspb.Map.prototype.get=function(i){if(i=this.map_[i.toString()])return this.wrapEntry_(i)},jspb.Map.prototype.has=function(i){return i.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(i,o,s,_,$){var et=this.stringKeys_();et.sort();for(var tt=0;tt<et.length;tt++){var j=this.map_[et[tt]];o.beginSubMessage(i),s.call(o,1,j.key),this.valueCtor_?_.call(o,2,this.wrapEntry_(j),$):_.call(o,2,j.value),o.endSubMessage()}},jspb.Map.deserializeBinary=function(i,o,s,_,$,et,tt){for(;o.nextField()&&!o.isEndGroup();){var j=o.getFieldNumber();j==1?et=s.call(o):j==2&&(i.valueCtor_?(goog.asserts.assert($),tt||(tt=new i.valueCtor_),_.call(o,tt,$)):tt=_.call(o))}goog.asserts.assert(et!=null),goog.asserts.assert(tt!=null),i.set(et,tt)},jspb.Map.prototype.stringKeys_=function(){var i,o=this.map_,s=[];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},jspb.Map.Entry_=function(i,o){this.key=i,this.value=o,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(i,o,s,_,$){this.fieldIndex=i,this.fieldName=o,this.ctor=s,this.toObjectFn=_,this.isRepeated=$},jspb.ExtensionFieldBinaryInfo=function(i,o,s,_,$,et){this.fieldInfo=i,this.binaryReaderFn=o,this.binaryWriterFn=s,this.binaryMessageSerializeFn=_,this.binaryMessageDeserializeFn=$,this.isPacked=et},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(i,o){return o+i.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(i,o){return o-i.arrayIndexOffset_},jspb.Message.initialize=function(i,o,s,_,$,et){if(i.wrappers_=null,o||(o=s?[s]:[]),i.messageId_=s?String(s):void 0,i.arrayIndexOffset_=s===0?-1:0,i.array=o,jspb.Message.initPivotAndExtensionObject_(i,_),i.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(i.repeatedFields=$),$)for(o=0;o<$.length;o++)(s=$[o])<i.pivot_?(s=jspb.Message.getIndex_(i,s),i.array[s]=i.array[s]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[s]=i.extensionObject_[s]||jspb.Message.EMPTY_LIST_SENTINEL_);if(et&&et.length)for(o=0;o<et.length;o++)jspb.Message.computeOneofCase(i,et[o])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(i){return jspb.Message.ASSUME_LOCAL_ARRAYS?i instanceof Array:Array.isArray(i)},jspb.Message.isExtensionObject_=function(i){return!(i===null||typeof i!="object"||jspb.Message.isArray_(i)||jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(i,o){var s=i.array.length,_=-1;if(s&&(_=s-1,s=i.array[_],jspb.Message.isExtensionObject_(s)))return i.pivot_=jspb.Message.getFieldNumber_(i,_),void(i.extensionObject_=s);-1<o?(i.pivot_=Math.max(o,jspb.Message.getFieldNumber_(i,_+1)),i.extensionObject_=null):i.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(i){var o=jspb.Message.getIndex_(i,i.pivot_);i.array[o]||(i.extensionObject_=i.array[o]={})},jspb.Message.toObjectList=function(i,o,s){for(var _=[],$=0;$<i.length;$++)_[$]=o.call(i[$],s,i[$]);return _},jspb.Message.toObjectExtension=function(i,o,s,_,$){for(var et in s){var tt=s[et],j=_.call(i,tt);if(j!=null){for(var it in tt.fieldName)if(tt.fieldName.hasOwnProperty(it))break;o[it]=tt.toObjectFn?tt.isRepeated?jspb.Message.toObjectList(j,tt.toObjectFn,$):tt.toObjectFn($,j):j}}},jspb.Message.serializeBinaryExtensions=function(i,o,s,_){for(var $ in s){var et=s[$],tt=et.fieldInfo;if(!et.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var j=_.call(i,tt);if(j!=null)if(tt.isMessageType()){if(!et.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");et.binaryWriterFn.call(o,tt.fieldIndex,j,et.binaryMessageSerializeFn)}else et.binaryWriterFn.call(o,tt.fieldIndex,j)}},jspb.Message.readBinaryExtension=function(i,o,s,_,$){var et=s[o.getFieldNumber()];if(et){if(s=et.fieldInfo,!et.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(s.isMessageType()){var tt=new s.ctor;et.binaryReaderFn.call(o,tt,et.binaryMessageDeserializeFn)}else tt=et.binaryReaderFn.call(o);s.isRepeated&&!et.isPacked?(o=_.call(i,s))?o.push(tt):$.call(i,s,[tt]):$.call(i,s,tt)}else o.skipField()},jspb.Message.getField=function(i,o){if(o<i.pivot_){o=jspb.Message.getIndex_(i,o);var s=i.array[o];return s===jspb.Message.EMPTY_LIST_SENTINEL_?i.array[o]=[]:s}if(i.extensionObject_)return(s=i.extensionObject_[o])===jspb.Message.EMPTY_LIST_SENTINEL_?i.extensionObject_[o]=[]:s},jspb.Message.getRepeatedField=function(i,o){return jspb.Message.getField(i,o)},jspb.Message.getOptionalFloatingPointField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:+i},jspb.Message.getBooleanField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:!!i},jspb.Message.getRepeatedFloatingPointField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=+s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.getRepeatedBooleanField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=!!s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.bytesAsB64=function(i){return i==null||typeof i=="string"?i:jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array?goog.crypt.base64.encodeByteArray(i):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(i)),null)},jspb.Message.bytesAsU8=function(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(i)),null)},jspb.Message.bytesListAsB64=function(i){return jspb.Message.assertConsistentTypes_(i),i.length&&typeof i[0]!="string"?goog.array.map(i,jspb.Message.bytesAsB64):i},jspb.Message.bytesListAsU8=function(i){return jspb.Message.assertConsistentTypes_(i),!i.length||i[0]instanceof Uint8Array?i:goog.array.map(i,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(i){if(goog.DEBUG&&i&&1<i.length){var o=goog.typeOf(i[0]);goog.array.forEach(i,function(s){goog.typeOf(s)!=o&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(s)+" expected "+o)})}},jspb.Message.getFieldWithDefault=function(i,o,s){return(i=jspb.Message.getField(i,o))==null?s:i},jspb.Message.getBooleanFieldWithDefault=function(i,o,s){return(i=jspb.Message.getBooleanField(i,o))==null?s:i},jspb.Message.getFloatingPointFieldWithDefault=function(i,o,s){return(i=jspb.Message.getOptionalFloatingPointField(i,o))==null?s:i},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),o in i.wrappers_)return i.wrappers_[o];var $=jspb.Message.getField(i,o);if(!$){if(s)return;$=[],jspb.Message.setField(i,o,$)}return i.wrappers_[o]=new jspb.Map($,_)},jspb.Message.setField=function(i,o,s){return goog.asserts.assertInstanceof(i,jspb.Message),o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=s:(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[o]=s),i},jspb.Message.setProto3IntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3FloatField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3BooleanField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,!1)},jspb.Message.setProto3StringField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3BytesField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3EnumField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3StringIntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"0")},jspb.Message.setFieldIgnoringDefault_=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),s!==_?jspb.Message.setField(i,o,s):o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(i),delete i.extensionObject_[o]),i},jspb.Message.addToRepeatedField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),o=jspb.Message.getRepeatedField(i,o),_!=null?o.splice(_,0,s):o.push(s),i},jspb.Message.setOneofField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),(s=jspb.Message.computeOneofCase(i,s))&&s!==o&&_!==void 0&&(i.wrappers_&&s in i.wrappers_&&(i.wrappers_[s]=void 0),jspb.Message.setField(i,s,void 0)),jspb.Message.setField(i,o,_)},jspb.Message.computeOneofCase=function(i,o){for(var s,_,$=0;$<o.length;$++){var et=o[$],tt=jspb.Message.getField(i,et);tt!=null&&(s=et,_=tt,jspb.Message.setField(i,et,void 0))}return s?(jspb.Message.setField(i,s,_),s):0},jspb.Message.getWrapperField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){var $=jspb.Message.getField(i,s);(_||$)&&(i.wrappers_[s]=new o($))}return i.wrappers_[s]},jspb.Message.getRepeatedWrapperField=function(i,o,s){return jspb.Message.wrapRepeatedField_(i,o,s),(o=i.wrappers_[s])==jspb.Message.EMPTY_LIST_SENTINEL_&&(o=i.wrappers_[s]=[]),o},jspb.Message.wrapRepeatedField_=function(i,o,s){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){for(var _=jspb.Message.getRepeatedField(i,s),$=[],et=0;et<_.length;et++)$[et]=new o(_[et]);i.wrappers_[s]=$}},jspb.Message.setWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var _=s&&s.toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.setOneofWrapperField=function(i,o,s,_){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var $=_&&_.toArray();return i.wrappers_[o]=_,jspb.Message.setOneofField(i,o,s,$)},jspb.Message.setRepeatedWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={}),s=s||[];for(var _=[],$=0;$<s.length;$++)_[$]=s[$].toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.addToRepeatedWrapperField=function(i,o,s,_,$){jspb.Message.wrapRepeatedField_(i,_,o);var et=i.wrappers_[o];return et||(et=i.wrappers_[o]=[]),s=s||new _,i=jspb.Message.getRepeatedField(i,o),$!=null?(et.splice($,0,s),i.splice($,0,s.toArray())):(et.push(s),i.push(s.toArray())),s},jspb.Message.toMap=function(i,o,s,_){for(var $={},et=0;et<i.length;et++)$[o.call(i[et])]=s?s.call(i[et],_,i[et]):i[et];return $},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var i in this.wrappers_){var o=this.wrappers_[i];if(Array.isArray(o))for(var s=0;s<o.length;s++)o[s]&&o[s].toArray();else o&&o.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(i){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var o=i.fieldIndex;if(i.isRepeated){if(i.isMessageType())return this.wrappers_[o]||(this.wrappers_[o]=goog.array.map(this.extensionObject_[o]||[],function(s){return new i.ctor(s)})),this.wrappers_[o]}else if(i.isMessageType())return!this.wrappers_[o]&&this.extensionObject_[o]&&(this.wrappers_[o]=new i.ctor(this.extensionObject_[o])),this.wrappers_[o];return this.extensionObject_[o]}},jspb.Message.prototype.setExtension=function(i,o){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var s=i.fieldIndex;return i.isRepeated?(o=o||[],i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=goog.array.map(o,function(_){return _.toArray()})):this.extensionObject_[s]=o):i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=o&&o.toArray()):this.extensionObject_[s]=o,this},jspb.Message.difference=function(i,o){if(!(i instanceof o.constructor))throw Error("Messages have different types.");var s=i.toArray();o=o.toArray();var _=[],$=0,et=s.length>o.length?s.length:o.length;for(i.getJsPbMessageId()&&(_[0]=i.getJsPbMessageId(),$=1);$<et;$++)jspb.Message.compareFields(s[$],o[$])||(_[$]=o[$]);return new i.constructor(_)},jspb.Message.equals=function(i,o){return i==o||!(!i||!o)&&i instanceof o.constructor&&jspb.Message.compareFields(i.toArray(),o.toArray())},jspb.Message.compareExtensions=function(i,o){i=i||{},o=o||{};var s,_={};for(s in i)_[s]=0;for(s in o)_[s]=0;for(s in _)if(!jspb.Message.compareFields(i[s],o[s]))return!1;return!0},jspb.Message.compareFields=function(i,o){if(i==o)return!0;if(!goog.isObject(i)||!goog.isObject(o))return!!(typeof i=="number"&&isNaN(i)||typeof o=="number"&&isNaN(o))&&String(i)==String(o);if(i.constructor!=o.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i.constructor===Uint8Array){if(i.length!=o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!=o[s])return!1;return!0}if(i.constructor===Array){var _=void 0,$=void 0,et=Math.max(i.length,o.length);for(s=0;s<et;s++){var tt=i[s],j=o[s];if(tt&&tt.constructor==Object&&(goog.asserts.assert(_===void 0),goog.asserts.assert(s===i.length-1),_=tt,tt=void 0),j&&j.constructor==Object&&(goog.asserts.assert($===void 0),goog.asserts.assert(s===o.length-1),$=j,j=void 0),!jspb.Message.compareFields(tt,j))return!1}return!_&&!$||(_=_||{},$=$||{},jspb.Message.compareExtensions(_,$))}if(i.constructor===Object)return jspb.Message.compareExtensions(i,o);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(i){return jspb.Message.cloneMessage(i)},jspb.Message.cloneMessage=function(i){return new i.constructor(jspb.Message.clone_(i.toArray()))},jspb.Message.copyInto=function(i,o){goog.asserts.assertInstanceof(i,jspb.Message),goog.asserts.assertInstanceof(o,jspb.Message),goog.asserts.assert(i.constructor==o.constructor,"Copy source and target message should have the same type."),i=jspb.Message.clone(i);for(var s=o.toArray(),_=i.toArray(),$=s.length=0;$<_.length;$++)s[$]=_[$];o.wrappers_=i.wrappers_,o.extensionObject_=i.extensionObject_},jspb.Message.clone_=function(i){if(Array.isArray(i)){for(var o=Array(i.length),s=0;s<i.length;s++){var _=i[s];_!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_)}return o}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)return new Uint8Array(i);for(s in o={},i)(_=i[s])!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_);return o},jspb.Message.registerMessageType=function(i,o){o.messageId=i},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(i,o){this.lo=i,this.hi=o},jspb.arith.UInt64.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(i){return new jspb.arith.UInt64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(i){return new jspb.arith.UInt64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(i,o){var s=65535&i,_=65535&o,$=o>>>16;for(o=s*_+65536*(s*$&65535)+65536*((i>>>=16)*_&65535),s=i*$+(s*$>>>16)+(i*_>>>16);4294967296<=o;)o-=4294967296,s+=1;return new jspb.arith.UInt64(o>>>0,s>>>0)},jspb.arith.UInt64.prototype.mul=function(i){var o=jspb.arith.UInt64.mul32x32(this.lo,i);return(i=jspb.arith.UInt64.mul32x32(this.hi,i)).hi=i.lo,i.lo=0,o.add(i)},jspb.arith.UInt64.prototype.div=function(i){if(i==0)return[];var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(this.lo,this.hi);i=new jspb.arith.UInt64(i,0);for(var _=new jspb.arith.UInt64(1,0);!i.msb();)i=i.leftShift(),_=_.leftShift();for(;!_.zero();)0>=i.cmp(s)&&(o=o.add(_),s=s.sub(i)),i=i.rightShift(),_=_.rightShift();return[o,s]},jspb.arith.UInt64.prototype.toString=function(){for(var i="",o=this;!o.zero();){var s=(o=o.div(10))[0];i=o[1].lo+i,o=s}return i==""&&(i="0"),i},jspb.arith.UInt64.fromString=function(i){for(var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(0,0),_=0;_<i.length;_++){if("0">i[_]||"9"<i[_])return null;var $=parseInt(i[_],10);s.lo=$,o=o.mul(10).add(s)}return o},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(i,o){this.lo=i,this.hi=o},jspb.arith.Int64.prototype.add=function(i){return new jspb.arith.Int64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(i){return new jspb.arith.Int64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var i=(2147483648&this.hi)!=0,o=new jspb.arith.UInt64(this.lo,this.hi);return i&&(o=new jspb.arith.UInt64(0,0).sub(o)),(i?"-":"")+o.toString()},jspb.arith.Int64.fromString=function(i){var o=0<i.length&&i[0]=="-";return o&&(i=i.substring(1)),(i=jspb.arith.UInt64.fromString(i))===null?null:(o&&(i=new jspb.arith.UInt64(0,0).sub(i)),new jspb.arith.Int64(i.lo,i.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var i=this.buffer_;return this.buffer_=[],i},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(i,o){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32);0<o||127<i;)this.buffer_.push(127&i|128),i=(i>>>7|o<<25)>>>0,o>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(i,o){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(i),this.writeUint32(o)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(i){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32);127<i;)this.buffer_.push(127&i|128),i>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(i){if(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),0<=i)this.writeUnsignedVarint32(i);else{for(var o=0;9>o;o++)this.buffer_.push(127&i|128),i>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((i<<1^i>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(i){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(i))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(i){var o=this;jspb.utils.splitHash64(i),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(s,_){o.writeSplitVarint64(s>>>0,_>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&256>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&65536>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-128<=i&&128>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-32768<=i&&32768>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(+i>=-jspb.BinaryConstants.TWO_TO_63&&+i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT32_MAX&&i<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(i),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT64_MAX&&i<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(i){goog.asserts.assert(typeof i=="boolean"||typeof i=="number"),this.buffer_.push(i?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(i)},jspb.BinaryEncoder.prototype.writeBytes=function(i){this.buffer_.push.apply(this.buffer_,i)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(i){jspb.utils.splitHash64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(i){jspb.utils.splitHash64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(i){for(var o=this.buffer_.length,s=0;s<i.length;s++){var _=i.charCodeAt(s);if(128>_)this.buffer_.push(_);else if(2048>_)this.buffer_.push(_>>6|192),this.buffer_.push(63&_|128);else if(65536>_)if(55296<=_&&56319>=_&&s+1<i.length){var $=i.charCodeAt(s+1);56320<=$&&57343>=$&&(_=1024*(_-55296)+$-56320+65536,this.buffer_.push(_>>18|240),this.buffer_.push(_>>12&63|128),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128),s++)}else this.buffer_.push(_>>12|224),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128)}return this.buffer_.length-o},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(i){var o=this.encoder_.end();this.blocks_.push(o),this.blocks_.push(i),this.totalLength_+=o.length+i.length},jspb.BinaryWriter.prototype.beginDelimited_=function(i){return this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),i=this.encoder_.end(),this.blocks_.push(i),this.totalLength_+=i.length,i.push(this.totalLength_),i},jspb.BinaryWriter.prototype.endDelimited_=function(i){var o=i.pop();for(o=this.totalLength_+this.encoder_.length()-o,goog.asserts.assert(0<=o);127<o;)i.push(127&o|128),o>>>=7,this.totalLength_++;i.push(o),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(i,o,s){this.appendUint8Array_(i.subarray(o,s))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(i,o,s){i!=null&&o!=null&&s!=null&&this.writeSerializedMessage(i,o,s)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(this.bookmarks_.length==0);for(var i=new Uint8Array(this.totalLength_+this.encoder_.length()),o=this.blocks_,s=o.length,_=0,$=0;$<s;$++){var et=o[$];i.set(et,_),_+=et.length}return o=this.encoder_.end(),i.set(o,_),_+=o.length,goog.asserts.assert(_==i.length),this.blocks_=[i],i},jspb.BinaryWriter.prototype.getResultBase64String=function(i){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),i)},jspb.BinaryWriter.prototype.beginSubMessage=function(i){this.bookmarks_.push(this.beginDelimited_(i))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(i,o){goog.asserts.assert(1<=i&&i==Math.floor(i)),this.encoder_.writeUnsignedVarint32(8*i+o)},jspb.BinaryWriter.prototype.writeAny=function(i,o,s){var _=jspb.BinaryConstants.FieldType;switch(i){case _.DOUBLE:this.writeDouble(o,s);break;case _.FLOAT:this.writeFloat(o,s);break;case _.INT64:this.writeInt64(o,s);break;case _.UINT64:this.writeUint64(o,s);break;case _.INT32:this.writeInt32(o,s);break;case _.FIXED64:this.writeFixed64(o,s);break;case _.FIXED32:this.writeFixed32(o,s);break;case _.BOOL:this.writeBool(o,s);break;case _.STRING:this.writeString(o,s);break;case _.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case _.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case _.BYTES:this.writeBytes(o,s);break;case _.UINT32:this.writeUint32(o,s);break;case _.ENUM:this.writeEnum(o,s);break;case _.SFIXED32:this.writeSfixed32(o,s);break;case _.SFIXED64:this.writeSfixed64(o,s);break;case _.SINT32:this.writeSint32(o,s);break;case _.SINT64:this.writeSint64(o,s);break;case _.FHASH64:this.writeFixedHash64(o,s);break;case _.VHASH64:this.writeVarintHash64(o,s);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(o))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(o))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(o))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(o))},jspb.BinaryWriter.prototype.writeInt32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeInt64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeUint32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeUint64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSint32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(i,o))},jspb.BinaryWriter.prototype.writeSint64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(i,o))},jspb.BinaryWriter.prototype.writeSintHash64=function(i,o){o!=null&&this.writeZigzagVarintHash64_(i,o)},jspb.BinaryWriter.prototype.writeSint64String=function(i,o){o!=null&&this.writeZigzagVarint64String_(i,o)},jspb.BinaryWriter.prototype.writeFixed32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(o))},jspb.BinaryWriter.prototype.writeFixed64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(o))},jspb.BinaryWriter.prototype.writeFixed64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(o))},jspb.BinaryWriter.prototype.writeSfixed64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(o))},jspb.BinaryWriter.prototype.writeSfixed64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeFloat=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(o))},jspb.BinaryWriter.prototype.writeDouble=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(o))},jspb.BinaryWriter.prototype.writeBool=function(i,o){o!=null&&(goog.asserts.assert(typeof o=="boolean"||typeof o=="number"),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(o))},jspb.BinaryWriter.prototype.writeEnum=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeString=function(i,o){o!=null&&(i=this.beginDelimited_(i),this.encoder_.writeString(o),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeBytes=function(i,o){o!=null&&(o=jspb.utils.byteSourceToUint8Array(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),this.appendUint8Array_(o))},jspb.BinaryWriter.prototype.writeMessage=function(i,o,s){o!=null&&(i=this.beginDelimited_(i),s(o,this),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeMessageSet=function(i,o,s){o!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(i),i=this.beginDelimited_(3),s(o,this),this.endDelimited_(i),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(i,o,s){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o,this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(o))},jspb.BinaryWriter.prototype.writeVarintHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(o))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o,s)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o,s)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT);var _=this.encoder_;jspb.utils.toZigzag64(o,s,function($,et){_.writeSplitVarint64($>>>0,et>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitFixed64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitZigzagVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64String_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarintHash64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFloat(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeDouble(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBool(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeEnum(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedString=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeString(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBytes(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++){var $=this.beginDelimited_(i);s(o[_],this),this.endDelimited_($)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++)this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o[_],this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixedHash64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeVarintHash64(i,o[s])},jspb.BinaryWriter.prototype.writePackedInt32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitFixed64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitVarint64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=this.encoder_,et=0;et<o.length;et++)jspb.utils.toZigzag64(s(o[et]),_(o[et]),function(tt,j){$.writeSplitVarint64(tt>>>0,j>>>0)});this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.Int64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.UInt64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(o[s]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeUint32(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeUint64(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++){var s=jspb.arith.UInt64.fromString(o[i]);this.encoder_.writeSplitFixed64(s.lo,s.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeInt32(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64String(o[i])},jspb.BinaryWriter.prototype.writePackedFloat=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeFloat(o[i])},jspb.BinaryWriter.prototype.writePackedDouble=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeDouble(o[i])},jspb.BinaryWriter.prototype.writePackedBool=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),i=0;i<o.length;i++)this.encoder_.writeBool(o[i])},jspb.BinaryWriter.prototype.writePackedEnum=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeEnum(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeFixedHash64(o[i])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeVarintHash64(o[s]);this.endDelimited_(i)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(this,__webpack_require__(6),__webpack_require__(5).Buffer)},function(i,o,s){const{AbortController:_,AbortSignal:$}=typeof self<"u"?self:typeof window<"u"?window:void 0;i.exports=_,i.exports.AbortSignal=$,i.exports.default=_},function(i,o){var s=function(_){function $(){this.fetch=!1,this.DOMException=_.DOMException}return $.prototype=_,new $}(typeof self<"u"?self:this);(function(_){(function($){var et="URLSearchParams"in _,tt="Symbol"in _&&"iterator"in Symbol,j="FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch{return!1}}(),it="FormData"in _,st="ArrayBuffer"in _;if(st)var ht=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_t=ArrayBuffer.isView||function(Nt){return Nt&&ht.indexOf(Object.prototype.toString.call(Nt))>-1};function gt(Nt){if(typeof Nt!="string"&&(Nt=String(Nt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Nt))throw new TypeError("Invalid character in header field name");return Nt.toLowerCase()}function ft(Nt){return typeof Nt!="string"&&(Nt=String(Nt)),Nt}function ut(Nt){var Tt={next:function(){var Vt=Nt.shift();return{done:Vt===void 0,value:Vt}}};return tt&&(Tt[Symbol.iterator]=function(){return Tt}),Tt}function yt(Nt){this.map={},Nt instanceof yt?Nt.forEach(function(Tt,Vt){this.append(Vt,Tt)},this):Array.isArray(Nt)?Nt.forEach(function(Tt){this.append(Tt[0],Tt[1])},this):Nt&&Object.getOwnPropertyNames(Nt).forEach(function(Tt){this.append(Tt,Nt[Tt])},this)}function Et(Nt){if(Nt.bodyUsed)return Promise.reject(new TypeError("Already read"));Nt.bodyUsed=!0}function Mt(Nt){return new Promise(function(Tt,Vt){Nt.onload=function(){Tt(Nt.result)},Nt.onerror=function(){Vt(Nt.error)}})}function Ft(Nt){var Tt=new FileReader,Vt=Mt(Tt);return Tt.readAsArrayBuffer(Nt),Vt}function Rt(Nt){if(Nt.slice)return Nt.slice(0);var Tt=new Uint8Array(Nt.byteLength);return Tt.set(new Uint8Array(Nt)),Tt.buffer}function Ot(){return this.bodyUsed=!1,this._initBody=function(Nt){var Tt;this._bodyInit=Nt,Nt?typeof Nt=="string"?this._bodyText=Nt:j&&Blob.prototype.isPrototypeOf(Nt)?this._bodyBlob=Nt:it&&FormData.prototype.isPrototypeOf(Nt)?this._bodyFormData=Nt:et&&URLSearchParams.prototype.isPrototypeOf(Nt)?this._bodyText=Nt.toString():st&&j&&(Tt=Nt)&&DataView.prototype.isPrototypeOf(Tt)?(this._bodyArrayBuffer=Rt(Nt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):st&&(ArrayBuffer.prototype.isPrototypeOf(Nt)||_t(Nt))?this._bodyArrayBuffer=Rt(Nt):this._bodyText=Nt=Object.prototype.toString.call(Nt):this._bodyText="",this.headers.get("content-type")||(typeof Nt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):et&&URLSearchParams.prototype.isPrototypeOf(Nt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},j&&(this.blob=function(){var Nt=Et(this);if(Nt)return Nt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Et(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Ft)}),this.text=function(){var Nt,Tt,Vt,Xt=Et(this);if(Xt)return Xt;if(this._bodyBlob)return Nt=this._bodyBlob,Tt=new FileReader,Vt=Mt(Tt),Tt.readAsText(Nt),Vt;if(this._bodyArrayBuffer)return Promise.resolve(function(Gt){for(var Ut=new Uint8Array(Gt),Ht=new Array(Ut.length),qt=0;qt<Ut.length;qt++)Ht[qt]=String.fromCharCode(Ut[qt]);return Ht.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},it&&(this.formData=function(){return this.text().then(nn)}),this.json=function(){return this.text().then(JSON.parse)},this}yt.prototype.append=function(Nt,Tt){Nt=gt(Nt),Tt=ft(Tt);var Vt=this.map[Nt];this.map[Nt]=Vt?Vt+", "+Tt:Tt},yt.prototype.delete=function(Nt){delete this.map[gt(Nt)]},yt.prototype.get=function(Nt){return Nt=gt(Nt),this.has(Nt)?this.map[Nt]:null},yt.prototype.has=function(Nt){return this.map.hasOwnProperty(gt(Nt))},yt.prototype.set=function(Nt,Tt){this.map[gt(Nt)]=ft(Tt)},yt.prototype.forEach=function(Nt,Tt){for(var Vt in this.map)this.map.hasOwnProperty(Vt)&&Nt.call(Tt,this.map[Vt],Vt,this)},yt.prototype.keys=function(){var Nt=[];return this.forEach(function(Tt,Vt){Nt.push(Vt)}),ut(Nt)},yt.prototype.values=function(){var Nt=[];return this.forEach(function(Tt){Nt.push(Tt)}),ut(Nt)},yt.prototype.entries=function(){var Nt=[];return this.forEach(function(Tt,Vt){Nt.push([Vt,Tt])}),ut(Nt)},tt&&(yt.prototype[Symbol.iterator]=yt.prototype.entries);var pt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Lt(Nt,Tt){var Vt,Xt,Gt=(Tt=Tt||{}).body;if(Nt instanceof Lt){if(Nt.bodyUsed)throw new TypeError("Already read");this.url=Nt.url,this.credentials=Nt.credentials,Tt.headers||(this.headers=new yt(Nt.headers)),this.method=Nt.method,this.mode=Nt.mode,this.signal=Nt.signal,Gt||Nt._bodyInit==null||(Gt=Nt._bodyInit,Nt.bodyUsed=!0)}else this.url=String(Nt);if(this.credentials=Tt.credentials||this.credentials||"same-origin",!Tt.headers&&this.headers||(this.headers=new yt(Tt.headers)),this.method=(Vt=Tt.method||this.method||"GET",Xt=Vt.toUpperCase(),pt.indexOf(Xt)>-1?Xt:Vt),this.mode=Tt.mode||this.mode||null,this.signal=Tt.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Gt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Gt)}function nn(Nt){var Tt=new FormData;return Nt.trim().split("&").forEach(function(Vt){if(Vt){var Xt=Vt.split("="),Gt=Xt.shift().replace(/\+/g," "),Ut=Xt.join("=").replace(/\+/g," ");Tt.append(decodeURIComponent(Gt),decodeURIComponent(Ut))}}),Tt}function on(Nt,Tt){Tt||(Tt={}),this.type="default",this.status=Tt.status===void 0?200:Tt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Tt?Tt.statusText:"OK",this.headers=new yt(Tt.headers),this.url=Tt.url||"",this._initBody(Nt)}Lt.prototype.clone=function(){return new Lt(this,{body:this._bodyInit})},Ot.call(Lt.prototype),Ot.call(on.prototype),on.prototype.clone=function(){return new on(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new yt(this.headers),url:this.url})},on.error=function(){var Nt=new on(null,{status:0,statusText:""});return Nt.type="error",Nt};var wt=[301,302,303,307,308];on.redirect=function(Nt,Tt){if(wt.indexOf(Tt)===-1)throw new RangeError("Invalid status code");return new on(null,{status:Tt,headers:{location:Nt}})},$.DOMException=_.DOMException;try{new $.DOMException}catch{$.DOMException=function(Tt,Vt){this.message=Tt,this.name=Vt;var Xt=Error(Tt);this.stack=Xt.stack},$.DOMException.prototype=Object.create(Error.prototype),$.DOMException.prototype.constructor=$.DOMException}function xt(Nt,Tt){return new Promise(function(Vt,Xt){var Gt=new Lt(Nt,Tt);if(Gt.signal&&Gt.signal.aborted)return Xt(new $.DOMException("Aborted","AbortError"));var Ut=new XMLHttpRequest;function Ht(){Ut.abort()}Ut.onload=function(){var qt,Pt,St={status:Ut.status,statusText:Ut.statusText,headers:(qt=Ut.getAllResponseHeaders()||"",Pt=new yt,qt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(tn){var mn=tn.split(":"),yn=mn.shift().trim();if(yn){var vn=mn.join(":").trim();Pt.append(yn,vn)}}),Pt)};St.url="responseURL"in Ut?Ut.responseURL:St.headers.get("X-Request-URL");var Zt="response"in Ut?Ut.response:Ut.responseText;Vt(new on(Zt,St))},Ut.onerror=function(){Xt(new TypeError("Network request failed"))},Ut.ontimeout=function(){Xt(new TypeError("Network request failed"))},Ut.onabort=function(){Xt(new $.DOMException("Aborted","AbortError"))},Ut.open(Gt.method,Gt.url,!0),Gt.credentials==="include"?Ut.withCredentials=!0:Gt.credentials==="omit"&&(Ut.withCredentials=!1),"responseType"in Ut&&j&&(Ut.responseType="blob"),Gt.headers.forEach(function(qt,Pt){Ut.setRequestHeader(Pt,qt)}),Gt.signal&&(Gt.signal.addEventListener("abort",Ht),Ut.onreadystatechange=function(){Ut.readyState===4&&Gt.signal.removeEventListener("abort",Ht)}),Ut.send(Gt._bodyInit===void 0?null:Gt._bodyInit)})}xt.polyfill=!0,_.fetch||(_.fetch=xt,_.Headers=yt,_.Request=Lt,_.Response=on),$.Headers=yt,$.Request=Lt,$.Response=on,$.fetch=xt})({})})(s),delete s.fetch.polyfill,(o=s.fetch).default=s.fetch,o.fetch=s.fetch,o.Headers=s.Headers,o.Request=s.Request,o.Response=s.Response,i.exports=o},function(i,o,s){(function(_){const $=s(211),et=s(52),tt=(j,it,st)=>({from:tt,EnvVarError:s(52),get:function(ht){if(!ht)return j;if(arguments.length>1)throw new et("It looks like you passed more than one argument to env.get(). Since env-var@6.0.0 this is no longer supported. To set a default value use env.get(TARGET).default(DEFAULT)");return $(j,ht,it||{},st||function(){})},accessors:s(94),logger:s(225)(console.log,j.NODE_ENV)});i.exports=tt(_.env)}).call(this,s(2))},function(i,o,s){var _=s(13),$=s(73),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(st(),_t)throw _t;return}return this.log(gt,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(j[ht].callback(),_t)throw it(null),_t}else this.log(gt,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){}},function(i,o,s){(function(_){const $=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,et=typeof AbortController=="function"?AbortController:class{constructor(){this.signal=new it}abort(){this.signal.dispatchEvent("abort")}},tt=typeof AbortSignal=="function",j=typeof et.AbortSignal=="function",it=tt?AbortSignal:j?et.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(Ot){if(Ot==="abort"){this.aborted=!0;const pt={type:Ot,target:this};this.onabort(pt),this._listeners.forEach(Lt=>Lt(pt),this)}}onabort(){}addEventListener(Ot,pt){Ot==="abort"&&this._listeners.push(pt)}removeEventListener(Ot,pt){Ot==="abort"&&(this._listeners=this._listeners.filter(Lt=>Lt!==pt))}},st=new Set,ht=(Ot,pt)=>{const Lt=`LRU_CACHE_OPTION_${Ot}`;ft(Lt)&&ut(Lt,`${Ot} option`,`options.${pt}`,Rt)},_t=(Ot,pt)=>{const Lt=`LRU_CACHE_METHOD_${Ot}`;if(ft(Lt)){const{prototype:nn}=Rt,{get:on}=Object.getOwnPropertyDescriptor(nn,Ot);ut(Lt,`${Ot} method`,`cache.${pt}()`,on)}},gt=(...Ot)=>{typeof _=="object"&&_&&typeof _.emitWarning=="function"?_.emitWarning(...Ot):console.error(...Ot)},ft=Ot=>!st.has(Ot),ut=(Ot,pt,Lt,nn)=>{st.add(Ot),gt(`The ${pt} is deprecated. Please use ${Lt} instead.`,"DeprecationWarning",Ot,nn)},yt=Ot=>Ot&&Ot===Math.floor(Ot)&&Ot>0&&isFinite(Ot),Et=Ot=>yt(Ot)?Ot<=Math.pow(2,8)?Uint8Array:Ot<=Math.pow(2,16)?Uint16Array:Ot<=Math.pow(2,32)?Uint32Array:Ot<=Number.MAX_SAFE_INTEGER?Mt:null:null;class Mt extends Array{constructor(pt){super(pt),this.fill(0)}}class Ft{constructor(pt){if(pt===0)return[];const Lt=Et(pt);this.heap=new Lt(pt),this.length=0}push(pt){this.heap[this.length++]=pt}pop(){return this.heap[--this.length]}}class Rt{constructor(pt={}){const{max:Lt=0,ttl:nn,ttlResolution:on=1,ttlAutopurge:wt,updateAgeOnGet:xt,updateAgeOnHas:Nt,allowStale:Tt,dispose:Vt,disposeAfter:Xt,noDisposeOnSet:Gt,noUpdateTTL:Ut,maxSize:Ht=0,maxEntrySize:qt=0,sizeCalculation:Pt,fetchMethod:St,fetchContext:Zt,noDeleteOnFetchRejection:tn,noDeleteOnStaleGet:mn}=pt,{length:yn,maxAge:vn,stale:un}=pt instanceof Rt?{}:pt;if(Lt!==0&&!yt(Lt))throw new TypeError("max option must be a nonnegative integer");const rn=Lt?Et(Lt):Array;if(!rn)throw new Error("invalid max value: "+Lt);if(this.max=Lt,this.maxSize=Ht,this.maxEntrySize=qt||this.maxSize,this.sizeCalculation=Pt||yn,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=St||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=Zt,!this.fetchMethod&&Zt!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(Lt).fill(null),this.valList=new Array(Lt).fill(null),this.next=new rn(Lt),this.prev=new rn(Lt),this.head=0,this.tail=0,this.free=new Ft(Lt),this.initialFill=1,this.size=0,typeof Vt=="function"&&(this.dispose=Vt),typeof Xt=="function"?(this.disposeAfter=Xt,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!Gt,this.noUpdateTTL=!!Ut,this.noDeleteOnFetchRejection=!!tn,this.maxEntrySize!==0){if(this.maxSize!==0&&!yt(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!yt(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!Tt||!!un,this.noDeleteOnStaleGet=!!mn,this.updateAgeOnGet=!!xt,this.updateAgeOnHas=!!Nt,this.ttlResolution=yt(on)||on===0?on:1,this.ttlAutopurge=!!wt,this.ttl=nn||vn||0,this.ttl){if(!yt(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const It="LRU_CACHE_UNBOUNDED";ft(It)&&(st.add(It),gt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",It,Rt))}un&&ht("stale","allowStale"),vn&&ht("maxAge","ttl"),yn&&ht("length","sizeCalculation")}getRemainingTTL(pt){return this.has(pt,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new Mt(this.max),this.starts=new Mt(this.max),this.setItemTTL=(nn,on,wt=$.now())=>{if(this.starts[nn]=on!==0?wt:0,this.ttls[nn]=on,on!==0&&this.ttlAutopurge){const xt=setTimeout(()=>{this.isStale(nn)&&this.delete(this.keyList[nn])},on+1);xt.unref&&xt.unref()}},this.updateItemAge=nn=>{this.starts[nn]=this.ttls[nn]!==0?$.now():0};let pt=0;const Lt=()=>{const nn=$.now();if(this.ttlResolution>0){pt=nn;const on=setTimeout(()=>pt=0,this.ttlResolution);on.unref&&on.unref()}return nn};this.getRemainingTTL=nn=>{const on=this.keyMap.get(nn);return on===void 0?0:this.ttls[on]===0||this.starts[on]===0?1/0:this.starts[on]+this.ttls[on]-(pt||Lt())},this.isStale=nn=>this.ttls[nn]!==0&&this.starts[nn]!==0&&(pt||Lt())-this.starts[nn]>this.ttls[nn]}updateItemAge(pt){}setItemTTL(pt,Lt,nn){}isStale(pt){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new Mt(this.max),this.removeItemSize=pt=>{this.calculatedSize-=this.sizes[pt],this.sizes[pt]=0},this.requireSize=(pt,Lt,nn,on)=>{if(!yt(nn)){if(!on)throw new TypeError("invalid size value (must be positive integer)");if(typeof on!="function")throw new TypeError("sizeCalculation must be a function");if(nn=on(Lt,pt),!yt(nn))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return nn},this.addItemSize=(pt,Lt)=>{this.sizes[pt]=Lt;const nn=this.maxSize-this.sizes[pt];for(;this.calculatedSize>nn;)this.evict(!0);this.calculatedSize+=this.sizes[pt]}}removeItemSize(pt){}addItemSize(pt,Lt){}requireSize(pt,Lt,nn,on){if(nn||on)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:pt=this.allowStale}={}){if(this.size)for(let Lt=this.tail;this.isValidIndex(Lt)&&(!pt&&this.isStale(Lt)||(yield Lt),Lt!==this.head);)Lt=this.prev[Lt]}*rindexes({allowStale:pt=this.allowStale}={}){if(this.size)for(let Lt=this.head;this.isValidIndex(Lt)&&(!pt&&this.isStale(Lt)||(yield Lt),Lt!==this.tail);)Lt=this.next[Lt]}isValidIndex(pt){return this.keyMap.get(this.keyList[pt])===pt}*entries(){for(const pt of this.indexes())yield[this.keyList[pt],this.valList[pt]]}*rentries(){for(const pt of this.rindexes())yield[this.keyList[pt],this.valList[pt]]}*keys(){for(const pt of this.indexes())yield this.keyList[pt]}*rkeys(){for(const pt of this.rindexes())yield this.keyList[pt]}*values(){for(const pt of this.indexes())yield this.valList[pt]}*rvalues(){for(const pt of this.rindexes())yield this.valList[pt]}[Symbol.iterator](){return this.entries()}find(pt,Lt={}){for(const nn of this.indexes())if(pt(this.valList[nn],this.keyList[nn],this))return this.get(this.keyList[nn],Lt)}forEach(pt,Lt=this){for(const nn of this.indexes())pt.call(Lt,this.valList[nn],this.keyList[nn],this)}rforEach(pt,Lt=this){for(const nn of this.rindexes())pt.call(Lt,this.valList[nn],this.keyList[nn],this)}get prune(){return _t("prune","purgeStale"),this.purgeStale}purgeStale(){let pt=!1;for(const Lt of this.rindexes({allowStale:!0}))this.isStale(Lt)&&(this.delete(this.keyList[Lt]),pt=!0);return pt}dump(){const pt=[];for(const Lt of this.indexes({allowStale:!0})){const nn=this.keyList[Lt],on=this.valList[Lt],wt={value:this.isBackgroundFetch(on)?on.__staleWhileFetching:on};if(this.ttls){wt.ttl=this.ttls[Lt];const xt=$.now()-this.starts[Lt];wt.start=Math.floor(Date.now()-xt)}this.sizes&&(wt.size=this.sizes[Lt]),pt.unshift([nn,wt])}return pt}load(pt){this.clear();for(const[Lt,nn]of pt){if(nn.start){const on=Date.now()-nn.start;nn.start=$.now()-on}this.set(Lt,nn.value,nn)}}dispose(pt,Lt,nn){}set(pt,Lt,{ttl:nn=this.ttl,start:on,noDisposeOnSet:wt=this.noDisposeOnSet,size:xt=0,sizeCalculation:Nt=this.sizeCalculation,noUpdateTTL:Tt=this.noUpdateTTL}={}){if(xt=this.requireSize(pt,Lt,xt,Nt),this.maxEntrySize&&xt>this.maxEntrySize)return this;let Vt=this.size===0?void 0:this.keyMap.get(pt);if(Vt===void 0)Vt=this.newIndex(),this.keyList[Vt]=pt,this.valList[Vt]=Lt,this.keyMap.set(pt,Vt),this.next[this.tail]=Vt,this.prev[Vt]=this.tail,this.tail=Vt,this.size++,this.addItemSize(Vt,xt),Tt=!1;else{const Xt=this.valList[Vt];Lt!==Xt&&(this.isBackgroundFetch(Xt)?Xt.__abortController.abort():wt||(this.dispose(Xt,pt,"set"),this.disposeAfter&&this.disposed.push([Xt,pt,"set"])),this.removeItemSize(Vt),this.valList[Vt]=Lt,this.addItemSize(Vt,xt)),this.moveToTail(Vt)}if(nn===0||this.ttl!==0||this.ttls||this.initializeTTLTracking(),Tt||this.setItemTTL(Vt,nn,on),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const pt=this.valList[this.head];return this.evict(!0),pt}}evict(pt){const Lt=this.head,nn=this.keyList[Lt],on=this.valList[Lt];return this.isBackgroundFetch(on)?on.__abortController.abort():(this.dispose(on,nn,"evict"),this.disposeAfter&&this.disposed.push([on,nn,"evict"])),this.removeItemSize(Lt),pt&&(this.keyList[Lt]=null,this.valList[Lt]=null,this.free.push(Lt)),this.head=this.next[Lt],this.keyMap.delete(nn),this.size--,Lt}has(pt,{updateAgeOnHas:Lt=this.updateAgeOnHas}={}){const nn=this.keyMap.get(pt);return nn!==void 0&&!this.isStale(nn)&&(Lt&&this.updateItemAge(nn),!0)}peek(pt,{allowStale:Lt=this.allowStale}={}){const nn=this.keyMap.get(pt);if(nn!==void 0&&(Lt||!this.isStale(nn))){const on=this.valList[nn];return this.isBackgroundFetch(on)?on.__staleWhileFetching:on}}backgroundFetch(pt,Lt,nn,on){const wt=Lt===void 0?void 0:this.valList[Lt];if(this.isBackgroundFetch(wt))return wt;const xt=new et,Nt={signal:xt.signal,options:nn,context:on},Tt=new Promise(Vt=>Vt(this.fetchMethod(pt,wt,Nt))).then(Vt=>(xt.signal.aborted||this.set(pt,Vt,Nt.options),Vt),Vt=>{if(this.valList[Lt]===Tt&&(!nn.noDeleteOnFetchRejection||Tt.__staleWhileFetching===void 0?this.delete(pt):this.valList[Lt]=Tt.__staleWhileFetching),Tt.__returned===Tt)throw Vt});return Tt.__abortController=xt,Tt.__staleWhileFetching=wt,Tt.__returned=null,Lt===void 0?(this.set(pt,Tt,Nt.options),Lt=this.keyMap.get(pt)):this.valList[Lt]=Tt,Tt}isBackgroundFetch(pt){return pt&&typeof pt=="object"&&typeof pt.then=="function"&&Object.prototype.hasOwnProperty.call(pt,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(pt,"__returned")&&(pt.__returned===pt||pt.__returned===null)}async fetch(pt,{allowStale:Lt=this.allowStale,updateAgeOnGet:nn=this.updateAgeOnGet,noDeleteOnStaleGet:on=this.noDeleteOnStaleGet,ttl:wt=this.ttl,noDisposeOnSet:xt=this.noDisposeOnSet,size:Nt=0,sizeCalculation:Tt=this.sizeCalculation,noUpdateTTL:Vt=this.noUpdateTTL,noDeleteOnFetchRejection:Xt=this.noDeleteOnFetchRejection,fetchContext:Gt=this.fetchContext,forceRefresh:Ut=!1}={}){if(!this.fetchMethod)return this.get(pt,{allowStale:Lt,updateAgeOnGet:nn,noDeleteOnStaleGet:on});const Ht={allowStale:Lt,updateAgeOnGet:nn,noDeleteOnStaleGet:on,ttl:wt,noDisposeOnSet:xt,size:Nt,sizeCalculation:Tt,noUpdateTTL:Vt,noDeleteOnFetchRejection:Xt};let qt=this.keyMap.get(pt);if(qt===void 0){const Pt=this.backgroundFetch(pt,qt,Ht,Gt);return Pt.__returned=Pt}{const Pt=this.valList[qt];if(this.isBackgroundFetch(Pt))return Lt&&Pt.__staleWhileFetching!==void 0?Pt.__staleWhileFetching:Pt.__returned=Pt;if(!Ut&&!this.isStale(qt))return this.moveToTail(qt),nn&&this.updateItemAge(qt),Pt;const St=this.backgroundFetch(pt,qt,Ht,Gt);return Lt&&St.__staleWhileFetching!==void 0?St.__staleWhileFetching:St.__returned=St}}get(pt,{allowStale:Lt=this.allowStale,updateAgeOnGet:nn=this.updateAgeOnGet,noDeleteOnStaleGet:on=this.noDeleteOnStaleGet}={}){const wt=this.keyMap.get(pt);if(wt!==void 0){const xt=this.valList[wt],Nt=this.isBackgroundFetch(xt);return this.isStale(wt)?Nt?Lt?xt.__staleWhileFetching:void 0:(on||this.delete(pt),Lt?xt:void 0):Nt?void 0:(this.moveToTail(wt),nn&&this.updateItemAge(wt),xt)}}connect(pt,Lt){this.prev[Lt]=pt,this.next[pt]=Lt}moveToTail(pt){pt!==this.tail&&(pt===this.head?this.head=this.next[pt]:this.connect(this.prev[pt],this.next[pt]),this.connect(this.tail,pt),this.tail=pt)}get del(){return _t("del","delete"),this.delete}delete(pt){let Lt=!1;if(this.size!==0){const nn=this.keyMap.get(pt);if(nn!==void 0)if(Lt=!0,this.size===1)this.clear();else{this.removeItemSize(nn);const on=this.valList[nn];this.isBackgroundFetch(on)?on.__abortController.abort():(this.dispose(on,pt,"delete"),this.disposeAfter&&this.disposed.push([on,pt,"delete"])),this.keyMap.delete(pt),this.keyList[nn]=null,this.valList[nn]=null,nn===this.tail?this.tail=this.prev[nn]:nn===this.head?this.head=this.next[nn]:(this.next[this.prev[nn]]=this.next[nn],this.prev[this.next[nn]]=this.prev[nn]),this.size--,this.free.push(nn)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return Lt}clear(){for(const pt of this.rindexes({allowStale:!0})){const Lt=this.valList[pt];if(this.isBackgroundFetch(Lt))Lt.__abortController.abort();else{const nn=this.keyList[pt];this.dispose(Lt,nn,"delete"),this.disposeAfter&&this.disposed.push([Lt,nn,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return _t("reset","clear"),this.clear}get length(){return((pt,Lt)=>{const nn=`LRU_CACHE_PROPERTY_${pt}`;if(ft(nn)){const{prototype:on}=Rt,{get:wt}=Object.getOwnPropertyDescriptor(on,pt);ut(nn,`${pt} property`,`cache.${Lt}`,wt)}})("length","size"),this.size}static get AbortController(){return et}static get AbortSignal(){return it}}i.exports=Rt}).call(this,s(2))},function(i,o,s){var _=s(41).Colorizer;i.exports=function($){return _.addColors($.colors||$),$}},function(i,o,s){var _={};i.exports=_,_.themes={};var $=s(13),et=_.styles=s(109),tt=Object.defineProperties,j=new RegExp(/[\r\n]+/g);_.supportsColor=s(110).supportsColor,_.enabled===void 0&&(_.enabled=_.supportsColor()!==!1),_.enable=function(){_.enabled=!0},_.disable=function(){_.enabled=!1},_.stripColors=_.strip=function(Et){return(""+Et).replace(/\x1B\[\d+m/g,"")},_.stylize=function(Et,Mt){return _.enabled?et[Mt].open+Et+et[Mt].close:Et+""};var it=/[|\\{}()[\]^$+*?.]/g;function st(Et){var Mt=function Ft(){return ft.apply(Ft,arguments)};return Mt._styles=Et,Mt.__proto__=gt,Mt}var ht,_t=(ht={},et.grey=et.gray,Object.keys(et).forEach(function(Et){et[Et].closeRe=new RegExp(function(Mt){if(typeof Mt!="string")throw new TypeError("Expected a string");return Mt.replace(it,"\\$&")}(et[Et].close),"g"),ht[Et]={get:function(){return st(this._styles.concat(Et))}}}),ht),gt=tt(function(){},_t);function ft(){var Et=Array.prototype.slice.call(arguments),Mt=Et.map(function(Lt){return Lt!==void 0&&Lt.constructor===String?Lt:$.inspect(Lt)}).join(" ");if(!_.enabled||!Mt)return Mt;for(var Ft=Mt.indexOf(`
`)!=-1,Rt=this._styles,Ot=Rt.length;Ot--;){var pt=et[Rt[Ot]];Mt=pt.open+Mt.replace(pt.closeRe,pt.open)+pt.close,Ft&&(Mt=Mt.replace(j,function(Lt){return pt.close+Lt+pt.open}))}return Mt}_.setTheme=function(Et){if(typeof Et!="string")for(var Mt in Et)(function(Ft){_[Ft]=function(Rt){if(typeof Et[Ft]=="object"){var Ot=Rt;for(var pt in Et[Ft])Ot=_[Et[Ft][pt]](Ot);return Ot}return _[Et[Ft]](Rt)}})(Mt);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var ut=function(Et,Mt){var Ft=Mt.split("");return(Ft=Ft.map(Et)).join("")};for(var yt in _.trap=s(112),_.zalgo=s(113),_.maps={},_.maps.america=s(114)(_),_.maps.zebra=s(115)(_),_.maps.rainbow=s(116)(_),_.maps.random=s(117)(_),_.maps)(function(Et){_[Et]=function(Mt){return ut(_.maps[Et],Mt)}})(yt);tt(_,function(){var Et={};return Object.keys(_t).forEach(function(Mt){Et[Mt]={get:function(){return st([Mt])}}}),Et}())},function(i,o){i.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(s,_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}},function(i,o){var s={};i.exports=s;var _={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(_).forEach(function($){var et=_[$],tt=s[$]=[];tt.open="\x1B["+et[0]+"m",tt.close="\x1B["+et[1]+"m"})},function(i,o,s){(function(_){var $=s(18),et=s(111),tt=_.env,j=void 0;function it(st){return function(ht){return ht!==0&&{level:ht,hasBasic:!0,has256:ht>=2,has16m:ht>=3}}(function(ht){if(j===!1)return 0;if(et("color=16m")||et("color=full")||et("color=truecolor"))return 3;if(et("color=256"))return 2;if(ht&&!ht.isTTY&&j!==!0)return 0;var _t=j?1:0;if(_.platform==="win32"){var gt=$.release().split(".");return Number(_.versions.node.split(".")[0])>=8&&Number(gt[0])>=10&&Number(gt[2])>=10586?Number(gt[2])>=14931?3:2:1}return"CI"in tt?["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(ft){return ft in tt})||tt.CI_NAME==="codeship"?1:_t:"TEAMCITY_VERSION"in tt?/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(tt.TEAMCITY_VERSION)?1:0:"TERM_PROGRAM"in tt?(parseInt("445".split(".")[0],10),2):/-256(color)?$/i.test("xterm-256color")?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test("xterm-256color")||"COLORTERM"in tt?1:_t}(st))}et("no-color")||et("no-colors")||et("color=false")?j=!1:(et("color")||et("colors")||et("color=true")||et("color=always"))&&(j=!0),"FORCE_COLOR"in tt&&(j=tt.FORCE_COLOR.length===0||parseInt(tt.FORCE_COLOR,10)!==0),i.exports={supportsColor:it,stdout:it(_.stdout),stderr:it(_.stderr)}}).call(this,s(2))},function(i,o,s){(function(_){i.exports=function($,et){var tt=(et=et||_.argv).indexOf("--"),j=/^-{1,2}/.test($)?"":"--",it=et.indexOf(j+$);return it!==-1&&(tt===-1||it<tt)}}).call(this,s(2))},function(i,o){i.exports=function(s,_){var $="";s=(s=s||"Run the trap, drop the bass").split("");var et={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return s.forEach(function(tt){tt=tt.toLowerCase();var j=et[tt]||[" "],it=Math.floor(Math.random()*j.length);$+=et[tt]!==void 0?et[tt][it]:tt}),$}},function(i,o){i.exports=function(s,_){s=s||"   he is here   ";var $={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},et=[].concat($.up,$.down,$.mid);function tt(it){return Math.floor(Math.random()*it)}function j(it){var st=!1;return et.filter(function(ht){st=ht===it}),st}return function(it,st){var ht,_t,gt="";for(_t in(st=st||{}).up=st.up===void 0||st.up,st.mid=st.mid===void 0||st.mid,st.down=st.down===void 0||st.down,st.size=st.size!==void 0?st.size:"maxi",it=it.split(""))if(!j(_t)){switch(gt+=it[_t],ht={up:0,down:0,mid:0},st.size){case"mini":ht.up=tt(8),ht.mid=tt(2),ht.down=tt(8);break;case"maxi":ht.up=tt(16)+3,ht.mid=tt(4)+1,ht.down=tt(64)+3;break;default:ht.up=tt(8)+1,ht.mid=tt(6)/2,ht.down=tt(8)+1}var ft=["up","mid","down"];for(var ut in ft)for(var yt=ft[ut],Et=0;Et<=ht[yt];Et++)st[yt]&&(gt+=$[yt][tt($[yt].length)])}return gt}(s,_)}},function(i,o){i.exports=function(s){return function(_,$,et){if(_===" ")return _;switch($%3){case 0:return s.red(_);case 1:return s.white(_);case 2:return s.blue(_)}}}},function(i,o){i.exports=function(s){return function(_,$,et){return $%2==0?_:s.inverse(_)}}},function(i,o){i.exports=function(s){var _=["red","yellow","green","blue","magenta"];return function($,et,tt){return $===" "?$:s[_[et++%_.length]]($)}}},function(i,o){i.exports=function(s){var _=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta"];return function($,et,tt){return $===" "?$:s[_[Math.round(Math.random()*(_.length-2))]]($)}}},function(i,o,s){Object.defineProperty(o,"cli",{value:s(119)}),Object.defineProperty(o,"npm",{value:s(120)}),Object.defineProperty(o,"syslog",{value:s(121)})},function(i,o,s){o.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},o.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},function(i,o,s){o.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},o.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},function(i,o,s){o.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},o.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},function(i,o,s){var _=s(12);i.exports=_(function($){return $.message="	".concat($.message),$})},function(i,o,s){function _(_t,gt){if(!(_t instanceof gt))throw new TypeError("Cannot call a class as a function")}function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(41).Colorizer,tt=s(60).Padder,j=s(3),it=j.configs,st=j.MESSAGE,ht=function(){function _t(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,_t),ut.levels||(ut.levels=it.npm.levels),this.colorizer=new et(ut),this.padder=new tt(ut),this.options=ut}var gt,ft;return gt=_t,(ft=[{key:"transform",value:function(ut,yt){return this.colorizer.transform(this.padder.transform(ut,yt),yt),ut[st]="".concat(ut.level,":").concat(ut.message),ut}}])&&$(gt.prototype,ft),_t}();i.exports=function(_t){return new ht(_t)},i.exports.Format=ht},function(i,o,s){var _=s(12);function $(tt){if(tt.every(et))return function(j){for(var it=j,st=0;st<tt.length;st++)if(!(it=tt[st].transform(it,tt[st].options)))return!1;return it}}function et(tt){if(typeof tt.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}i.exports=function(){for(var tt=arguments.length,j=new Array(tt),it=0;it<tt;it++)j[it]=arguments[it];var st=_($(j)),ht=st();return ht.Format=st.Format,ht},i.exports.cascade=$},function(i,o,s){(function(_){var $=s(12),et=s(3).MESSAGE,tt=s(35);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$(function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it})}).call(this,s(5).Buffer)},function(i,o,s){o.byteLength=function(_t){var gt=st(_t),ft=gt[0],ut=gt[1];return 3*(ft+ut)/4-ut},o.toByteArray=function(_t){for(var gt,ft=st(_t),ut=ft[0],yt=ft[1],Et=new et(function(Ot,pt,Lt){return 3*(pt+Lt)/4-Lt}(0,ut,yt)),Mt=0,Ft=yt>0?ut-4:ut,Rt=0;Rt<Ft;Rt+=4)gt=$[_t.charCodeAt(Rt)]<<18|$[_t.charCodeAt(Rt+1)]<<12|$[_t.charCodeAt(Rt+2)]<<6|$[_t.charCodeAt(Rt+3)],Et[Mt++]=gt>>16&255,Et[Mt++]=gt>>8&255,Et[Mt++]=255&gt;return yt===2&&(gt=$[_t.charCodeAt(Rt)]<<2|$[_t.charCodeAt(Rt+1)]>>4,Et[Mt++]=255&gt),yt===1&&(gt=$[_t.charCodeAt(Rt)]<<10|$[_t.charCodeAt(Rt+1)]<<4|$[_t.charCodeAt(Rt+2)]>>2,Et[Mt++]=gt>>8&255,Et[Mt++]=255&gt),Et},o.fromByteArray=function(_t){for(var gt,ft=_t.length,ut=ft%3,yt=[],Et=0,Mt=ft-ut;Et<Mt;Et+=16383)yt.push(ht(_t,Et,Et+16383>Mt?Mt:Et+16383));return ut===1?(gt=_t[ft-1],yt.push(_[gt>>2]+_[gt<<4&63]+"==")):ut===2&&(gt=(_t[ft-2]<<8)+_t[ft-1],yt.push(_[gt>>10]+_[gt>>4&63]+_[gt<<2&63]+"=")),yt.join("")};for(var _=[],$=[],et=typeof Uint8Array<"u"?Uint8Array:Array,tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,it=tt.length;j<it;++j)_[j]=tt[j],$[tt.charCodeAt(j)]=j;function st(_t){var gt=_t.length;if(gt%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ft=_t.indexOf("=");return ft===-1&&(ft=gt),[ft,ft===gt?0:4-ft%4]}function ht(_t,gt,ft){for(var ut,yt,Et=[],Mt=gt;Mt<ft;Mt+=3)ut=(_t[Mt]<<16&16711680)+(_t[Mt+1]<<8&65280)+(255&_t[Mt+2]),Et.push(_[(yt=ut)>>18&63]+_[yt>>12&63]+_[yt>>6&63]+_[63&yt]);return Et.join("")}$["-".charCodeAt(0)]=62,$["_".charCodeAt(0)]=63},function(i,o){o.read=function(s,_,$,et,tt){var j,it,st=8*tt-et-1,ht=(1<<st)-1,_t=ht>>1,gt=-7,ft=$?tt-1:0,ut=$?-1:1,yt=s[_+ft];for(ft+=ut,j=yt&(1<<-gt)-1,yt>>=-gt,gt+=st;gt>0;j=256*j+s[_+ft],ft+=ut,gt-=8);for(it=j&(1<<-gt)-1,j>>=-gt,gt+=et;gt>0;it=256*it+s[_+ft],ft+=ut,gt-=8);if(j===0)j=1-_t;else{if(j===ht)return it?NaN:1/0*(yt?-1:1);it+=Math.pow(2,et),j-=_t}return(yt?-1:1)*it*Math.pow(2,j-et)},o.write=function(s,_,$,et,tt,j){var it,st,ht,_t=8*j-tt-1,gt=(1<<_t)-1,ft=gt>>1,ut=tt===23?Math.pow(2,-24)-Math.pow(2,-77):0,yt=et?0:j-1,Et=et?1:-1,Mt=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(st=isNaN(_)?1:0,it=gt):(it=Math.floor(Math.log(_)/Math.LN2),_*(ht=Math.pow(2,-it))<1&&(it--,ht*=2),(_+=it+ft>=1?ut/ht:ut*Math.pow(2,1-ft))*ht>=2&&(it++,ht/=2),it+ft>=gt?(st=0,it=gt):it+ft>=1?(st=(_*ht-1)*Math.pow(2,tt),it+=ft):(st=_*Math.pow(2,ft-1)*Math.pow(2,tt),it=0));tt>=8;s[$+yt]=255&st,yt+=Et,st/=256,tt-=8);for(it=it<<tt|st,_t+=tt;_t>0;s[$+yt]=255&it,yt+=Et,it/=256,_t-=8);s[$+yt-Et]|=128*Mt}},function(i,o,s){var _=s(12);i.exports=_(function($,et){return et.message?($.message="[".concat(et.label,"] ").concat($.message),$):($.label=et.label,$)})},function(i,o,s){var _=s(12),$=s(3).MESSAGE,et=s(35);i.exports=_(function(tt){var j={};return tt.message&&(j["@message"]=tt.message,delete tt.message),tt.timestamp&&(j["@timestamp"]=tt.timestamp,delete tt.timestamp),j["@fields"]=tt,tt[$]=et(j),tt})},function(i,o,s){var _=s(12);function $(tt,j,it){var st,ht,_t,gt=j.reduce(function(ut,yt){return ut[yt]=tt[yt],delete tt[yt],ut},{}),ft=Object.keys(tt).reduce(function(ut,yt){return ut[yt]=tt[yt],delete tt[yt],ut},{});return Object.assign(tt,gt,(_t=ft,(ht=it)in(st={})?Object.defineProperty(st,ht,{value:_t,enumerable:!0,configurable:!0,writable:!0}):st[ht]=_t,st)),tt}function et(tt,j,it){return tt[it]=j.reduce(function(st,ht){return st[ht]=tt[ht],delete tt[ht],st},{}),tt}i.exports=_(function(tt){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it="metadata";j.key&&(it=j.key);var st=[];return j.fillExcept||j.fillWith||(st.push("level"),st.push("message")),j.fillExcept&&(st=j.fillExcept),st.length>0?$(tt,st,it):j.fillWith?et(tt,j.fillWith,it):tt})},function(i,o,s){var _=s(13).inspect,$=s(12),et=s(3),tt=et.LEVEL,j=et.MESSAGE,it=et.SPLAT;i.exports=$(function(st){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_t=Object.assign({},st);return delete _t[tt],delete _t[j],delete _t[it],st[j]=_(_t,!1,ht.depth||null,ht.colorize),st})},function(i,o,s){function _(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var $=s(3).MESSAGE,et=function(){function tt(st){(function(ht,_t){if(!(ht instanceof _t))throw new TypeError("Cannot call a class as a function")})(this,tt),this.template=st}var j,it;return j=tt,(it=[{key:"transform",value:function(st){return st[$]=this.template(st),st}}])&&_(j.prototype,it),tt}();i.exports=function(tt){return new et(tt)},i.exports.Printf=i.exports.Format=et},function(i,o,s){var _=s(12),$=s(3).MESSAGE,et=s(35);i.exports=_(function(tt){var j=et(Object.assign({},tt,{level:void 0,message:void 0,splat:void 0})),it=tt.padding&&tt.padding[tt.level]||"";return tt[$]=j!=="{}"?"".concat(tt.level,":").concat(it," ").concat(tt.message," ").concat(j):"".concat(tt.level,":").concat(it," ").concat(tt.message),tt})},function(i,o,s){function _(_t){return function(gt){if(Array.isArray(gt))return $(gt)}(_t)||function(gt){if(typeof Symbol<"u"&&Symbol.iterator in Object(gt))return Array.from(gt)}(_t)||function(gt,ft){if(gt){if(typeof gt=="string")return $(gt,ft);var ut=Object.prototype.toString.call(gt).slice(8,-1);if(ut==="Object"&&gt.constructor&&(ut=gt.constructor.name),ut==="Map"||ut==="Set")return Array.from(gt);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return $(gt,ft)}}(_t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(_t,gt){(gt==null||gt>_t.length)&&(gt=_t.length);for(var ft=0,ut=new Array(gt);ft<gt;ft++)ut[ft]=_t[ft];return ut}function et(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var tt=s(13),j=s(3).SPLAT,it=/%[scdjifoO%]/g,st=/%%/g,ht=function(){function _t(ut){(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")})(this,_t),this.options=ut}var gt,ft;return gt=_t,(ft=[{key:"_splat",value:function(ut,yt){var Et=ut.message,Mt=ut[j]||ut.splat||[],Ft=Et.match(st),Rt=Ft&&Ft.length||0,Ot=yt.length-Rt-Mt.length,pt=Ot<0?Mt.splice(Ot,-1*Ot):[],Lt=pt.length;if(Lt)for(var nn=0;nn<Lt;nn++)Object.assign(ut,pt[nn]);return ut.message=tt.format.apply(tt,[Et].concat(_(Mt))),ut}},{key:"transform",value:function(ut){var yt=ut.message,Et=ut[j]||ut.splat;if(!Et||!Et.length)return ut;var Mt=yt&&yt.match&&yt.match(it);if(!Mt&&(Et||Et.length)){var Ft=Et.length>1?Et.splice(0):Et,Rt=Ft.length;if(Rt)for(var Ot=0;Ot<Rt;Ot++)Object.assign(ut,Ft[Ot]);return ut}return Mt?this._splat(ut,Mt):ut}}])&&et(gt.prototype,ft),_t}();i.exports=function(_t){return new ht(_t)}},function(i,o,s){var _=s(136),$=s(12);i.exports=$(function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tt.format&&(et.timestamp=typeof tt.format=="function"?tt.format():_.format(new Date,tt.format)),et.timestamp||(et.timestamp=new Date().toISOString()),tt.alias&&(et[tt.alias]=et.timestamp),et})},function(i,o,s){s.r(o),s.d(o,"assign",function(){return it}),s.d(o,"format",function(){return xt}),s.d(o,"parse",function(){return Nt}),s.d(o,"defaultI18n",function(){return gt}),s.d(o,"setGlobalDateI18n",function(){return ut}),s.d(o,"setGlobalDateMasks",function(){return wt});var _=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$="[^\\s]+",et=/\[([^]*?)\]/gm;function tt(Vt,Xt){for(var Gt=[],Ut=0,Ht=Vt.length;Ut<Ht;Ut++)Gt.push(Vt[Ut].substr(0,Xt));return Gt}var j=function(Vt){return function(Xt,Gt){var Ut=Gt[Vt].map(function(Ht){return Ht.toLowerCase()}).indexOf(Xt.toLowerCase());return Ut>-1?Ut:null}};function it(Vt){for(var Xt=[],Gt=1;Gt<arguments.length;Gt++)Xt[Gt-1]=arguments[Gt];for(var Ut=0,Ht=Xt;Ut<Ht.length;Ut++){var qt=Ht[Ut];for(var Pt in qt)Vt[Pt]=qt[Pt]}return Vt}var st=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ht=["January","February","March","April","May","June","July","August","September","October","November","December"],_t=tt(ht,3),gt={dayNamesShort:tt(st,3),dayNames:st,monthNamesShort:_t,monthNames:ht,amPm:["am","pm"],DoFn:function(Vt){return Vt+["th","st","nd","rd"][Vt%10>3?0:(Vt-Vt%10!=10?1:0)*Vt%10]}},ft=it({},gt),ut=function(Vt){return ft=it(ft,Vt)},yt=function(Vt){return Vt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Et=function(Vt,Xt){for(Xt===void 0&&(Xt=2),Vt=String(Vt);Vt.length<Xt;)Vt="0"+Vt;return Vt},Mt={D:function(Vt){return String(Vt.getDate())},DD:function(Vt){return Et(Vt.getDate())},Do:function(Vt,Xt){return Xt.DoFn(Vt.getDate())},d:function(Vt){return String(Vt.getDay())},dd:function(Vt){return Et(Vt.getDay())},ddd:function(Vt,Xt){return Xt.dayNamesShort[Vt.getDay()]},dddd:function(Vt,Xt){return Xt.dayNames[Vt.getDay()]},M:function(Vt){return String(Vt.getMonth()+1)},MM:function(Vt){return Et(Vt.getMonth()+1)},MMM:function(Vt,Xt){return Xt.monthNamesShort[Vt.getMonth()]},MMMM:function(Vt,Xt){return Xt.monthNames[Vt.getMonth()]},YY:function(Vt){return Et(String(Vt.getFullYear()),4).substr(2)},YYYY:function(Vt){return Et(Vt.getFullYear(),4)},h:function(Vt){return String(Vt.getHours()%12||12)},hh:function(Vt){return Et(Vt.getHours()%12||12)},H:function(Vt){return String(Vt.getHours())},HH:function(Vt){return Et(Vt.getHours())},m:function(Vt){return String(Vt.getMinutes())},mm:function(Vt){return Et(Vt.getMinutes())},s:function(Vt){return String(Vt.getSeconds())},ss:function(Vt){return Et(Vt.getSeconds())},S:function(Vt){return String(Math.round(Vt.getMilliseconds()/100))},SS:function(Vt){return Et(Math.round(Vt.getMilliseconds()/10),2)},SSS:function(Vt){return Et(Vt.getMilliseconds(),3)},a:function(Vt,Xt){return Vt.getHours()<12?Xt.amPm[0]:Xt.amPm[1]},A:function(Vt,Xt){return Vt.getHours()<12?Xt.amPm[0].toUpperCase():Xt.amPm[1].toUpperCase()},ZZ:function(Vt){var Xt=Vt.getTimezoneOffset();return(Xt>0?"-":"+")+Et(100*Math.floor(Math.abs(Xt)/60)+Math.abs(Xt)%60,4)},Z:function(Vt){var Xt=Vt.getTimezoneOffset();return(Xt>0?"-":"+")+Et(Math.floor(Math.abs(Xt)/60),2)+":"+Et(Math.abs(Xt)%60,2)}},Ft=function(Vt){return+Vt-1},Rt=[null,"[1-9]\\d?"],Ot=[null,$],pt=["isPm",$,function(Vt,Xt){var Gt=Vt.toLowerCase();return Gt===Xt.amPm[0]?0:Gt===Xt.amPm[1]?1:null}],Lt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(Vt){var Xt=(Vt+"").match(/([+-]|\d\d)/gi);if(Xt){var Gt=60*+Xt[1]+parseInt(Xt[2],10);return Xt[0]==="+"?Gt:-Gt}return 0}],nn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+$,function(Vt){return parseInt(Vt,10)}],M:["month","[1-9]\\d?",Ft],MM:["month","\\d\\d",Ft],YY:["year","\\d\\d",function(Vt){var Xt=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+Vt>68?Xt-1:Xt)+Vt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(Vt){return 100*+Vt}],SS:["millisecond","\\d\\d",function(Vt){return 10*+Vt}],SSS:["millisecond","\\d{3}"],d:Rt,dd:Rt,ddd:Ot,dddd:Ot,MMM:["month",$,j("monthNamesShort")],MMMM:["month",$,j("monthNames")],a:pt,A:pt,ZZ:Lt,Z:Lt},on={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},wt=function(Vt){return it(on,Vt)},xt=function(Vt,Xt,Gt){if(Xt===void 0&&(Xt=on.default),Gt===void 0&&(Gt={}),typeof Vt=="number"&&(Vt=new Date(Vt)),Object.prototype.toString.call(Vt)!=="[object Date]"||isNaN(Vt.getTime()))throw new Error("Invalid Date pass to format");var Ut=[];Xt=(Xt=on[Xt]||Xt).replace(et,function(qt,Pt){return Ut.push(Pt),"@@@"});var Ht=it(it({},ft),Gt);return(Xt=Xt.replace(_,function(qt){return Mt[qt](Vt,Ht)})).replace(/@@@/g,function(){return Ut.shift()})};function Nt(Vt,Xt,Gt){if(Gt===void 0&&(Gt={}),typeof Xt!="string")throw new Error("Invalid format in fecha parse");if(Xt=on[Xt]||Xt,Vt.length>1e3)return null;var Ut={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Ht=[],qt=[],Pt=Xt.replace(et,function(hn,xn){return qt.push(yt(xn)),"@@@"}),St={},Zt={};Pt=yt(Pt).replace(_,function(hn){var xn=nn[hn],Mn=xn[0],qn=xn[1],Ir=xn[3];if(St[Mn])throw new Error("Invalid format. "+Mn+" specified twice in format");return St[Mn]=!0,Ir&&(Zt[Ir]=!0),Ht.push(xn),"("+qn+")"}),Object.keys(Zt).forEach(function(hn){if(!St[hn])throw new Error("Invalid format. "+hn+" is required in specified format")}),Pt=Pt.replace(/@@@/g,function(){return qt.shift()});var tn=Vt.match(new RegExp(Pt,"i"));if(!tn)return null;for(var mn=it(it({},ft),Gt),yn=1;yn<tn.length;yn++){var vn=Ht[yn-1],un=vn[0],rn=vn[2],It=rn?rn(tn[yn],mn):+tn[yn];if(It==null)return null;Ut[un]=It}Ut.isPm===1&&Ut.hour!=null&&+Ut.hour!=12?Ut.hour=+Ut.hour+12:Ut.isPm===0&&+Ut.hour==12&&(Ut.hour=0);for(var Dt=new Date(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute,Ut.second,Ut.millisecond),Kt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],gn=(yn=0,Kt.length);yn<gn;yn++)if(St[Kt[yn][0]]&&Ut[Kt[yn][0]]!==Dt[Kt[yn][1]]())return null;return Ut.timezoneOffset==null?Dt:new Date(Date.UTC(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute-Ut.timezoneOffset,Ut.second,Ut.millisecond))}var Tt={format:xt,parse:Nt,defaultI18n:gt,setGlobalDateI18n:ut,setGlobalDateMasks:wt};o.default=Tt},function(i,o,s){var _=s(59),$=s(12),et=s(3).MESSAGE;i.exports=$(function(tt,j){return j.level!==!1&&(tt.level=_.strip(tt.level)),j.message!==!1&&(tt.message=_.strip(tt.message)),j.raw!==!1&&tt[et]&&(tt[et]=_.strip(tt[et])),tt})},function(i){i.exports=JSON.parse('{"name":"winston","description":"A logger for just about everything.","version":"3.3.3","author":"Charlie Robbins <charlie.robbins@gmail.com>","maintainers":["Jarrett Cruger <jcrugzz@gmail.com>","Chris Alderson <chrisalderson@protonmail.com>","David Hyde <dabh@stanford.edu>"],"repository":{"type":"git","url":"https://github.com/winstonjs/winston.git"},"keywords":["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],"dependencies":{"async":"^3.1.0","@dabh/diagnostics":"^2.0.2","is-stream":"^2.0.0","logform":"^2.2.0","one-time":"^1.0.0","readable-stream":"^3.4.0","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.4.0"},"devDependencies":{"@babel/cli":"^7.10.3","@babel/core":"^7.10.3","@babel/preset-env":"^7.10.3","@types/node":"^14.0.13","abstract-winston-transport":"^0.5.1","assume":"^2.2.0","colors":"^1.4.0","cross-spawn-async":"^2.2.5","eslint-config-populist":"^4.2.0","hock":"^1.4.1","mocha":"^8.0.1","nyc":"^15.1.0","rimraf":"^3.0.2","split2":"^3.1.1","std-mocks":"^1.0.1","through2":"^3.0.1","winston-compat":"^0.1.5"},"main":"./lib/winston","browser":"./dist/winston","types":"./index.d.ts","scripts":{"lint":"populist lib/*.js lib/winston/*.js lib/winston/**/*.js","pretest":"npm run lint","test":"nyc --reporter=text --reporter lcov npm run test:mocha","test:mocha":"mocha test/*.test.js test/**/*.test.js --exit","build":"./node_modules/.bin/rimraf dist && babel lib -d dist","prepublishOnly":"npm run build"},"engines":{"node":">= 6.4.0"},"license":"MIT"}')},function(i,o,s){Object.defineProperty(o,"Console",{configurable:!0,enumerable:!0,get:function(){return s(140)}}),Object.defineProperty(o,"File",{configurable:!0,enumerable:!0,get:function(){return s(149)}}),Object.defineProperty(o,"Http",{configurable:!0,enumerable:!0,get:function(){return s(189)}}),Object.defineProperty(o,"Stream",{configurable:!0,enumerable:!0,get:function(){return s(201)}})},function(i,o,s){(function(_){function $(Et){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Mt){return typeof Mt}:function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt})(Et)}function et(Et,Mt){if(!(Et instanceof Mt))throw new TypeError("Cannot call a class as a function")}function tt(Et,Mt){for(var Ft=0;Ft<Mt.length;Ft++){var Rt=Mt[Ft];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty(Et,Rt.key,Rt)}}function j(Et,Mt){return(j=Object.setPrototypeOf||function(Ft,Rt){return Ft.__proto__=Rt,Ft})(Et,Mt)}function it(Et){var Mt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Ft,Rt=ht(Et);if(Mt){var Ot=ht(this).constructor;Ft=Reflect.construct(Rt,arguments,Ot)}else Ft=Rt.apply(this,arguments);return st(this,Ft)}}function st(Et,Mt){return!Mt||$(Mt)!=="object"&&typeof Mt!="function"?function(Ft){if(Ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft}(Et):Mt}function ht(Et){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Mt){return Mt.__proto__||Object.getPrototypeOf(Mt)})(Et)}var _t=s(18),gt=s(3),ft=gt.LEVEL,ut=gt.MESSAGE,yt=s(20);i.exports=function(Et){(function(pt,Lt){if(typeof Lt!="function"&&Lt!==null)throw new TypeError("Super expression must either be null or a function");pt.prototype=Object.create(Lt&&Lt.prototype,{constructor:{value:pt,writable:!0,configurable:!0}}),Lt&&j(pt,Lt)})(Ot,Et);var Mt,Ft,Rt=it(Ot);function Ot(){var pt,Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return et(this,Ot),(pt=Rt.call(this,Lt)).name=Lt.name||"console",pt.stderrLevels=pt._stringArrayToSet(Lt.stderrLevels),pt.consoleWarnLevels=pt._stringArrayToSet(Lt.consoleWarnLevels),pt.eol=Lt.eol||_t.EOL,pt.setMaxListeners(30),pt}return Mt=Ot,(Ft=[{key:"log",value:function(pt,Lt){var nn=this;return _(function(){return nn.emit("logged",pt)}),this.stderrLevels[pt[ft]]?(console._stderr?console._stderr.write("".concat(pt[ut]).concat(this.eol)):console.error(pt[ut]),void(Lt&&Lt())):this.consoleWarnLevels[pt[ft]]?(console._stderr?console._stderr.write("".concat(pt[ut]).concat(this.eol)):console.warn(pt[ut]),void(Lt&&Lt())):(console._stdout?console._stdout.write("".concat(pt[ut]).concat(this.eol)):console.log(pt[ut]),void(Lt&&Lt()))}},{key:"_stringArrayToSet",value:function(pt,Lt){if(!pt)return{};if(Lt=Lt||"Cannot make set from type other than Array of string elements",!Array.isArray(pt))throw new Error(Lt);return pt.reduce(function(nn,on){if(typeof on!="string")throw new Error(Lt);return nn[on]=!0,nn},{})}}])&&tt(Mt.prototype,Ft),Ot}(yt)}).call(this,s(15).setImmediate)},function(i,o,s){(function(_,$){(function(et,tt){if(!et.setImmediate){var j,it,st,ht,_t,gt=1,ft={},ut=!1,yt=et.document,Et=Object.getPrototypeOf&&Object.getPrototypeOf(et);Et=Et&&Et.setTimeout?Et:et,{}.toString.call(et.process)==="[object process]"?j=function(Rt){$.nextTick(function(){Ft(Rt)})}:function(){if(et.postMessage&&!et.importScripts){var Rt=!0,Ot=et.onmessage;return et.onmessage=function(){Rt=!1},et.postMessage("","*"),et.onmessage=Ot,Rt}}()?(ht="setImmediate$"+Math.random()+"$",_t=function(Rt){Rt.source===et&&typeof Rt.data=="string"&&Rt.data.indexOf(ht)===0&&Ft(+Rt.data.slice(ht.length))},et.addEventListener?et.addEventListener("message",_t,!1):et.attachEvent("onmessage",_t),j=function(Rt){et.postMessage(ht+Rt,"*")}):et.MessageChannel?((st=new MessageChannel).port1.onmessage=function(Rt){Ft(Rt.data)},j=function(Rt){st.port2.postMessage(Rt)}):yt&&"onreadystatechange"in yt.createElement("script")?(it=yt.documentElement,j=function(Rt){var Ot=yt.createElement("script");Ot.onreadystatechange=function(){Ft(Rt),Ot.onreadystatechange=null,it.removeChild(Ot),Ot=null},it.appendChild(Ot)}):j=function(Rt){setTimeout(Ft,0,Rt)},Et.setImmediate=function(Rt){typeof Rt!="function"&&(Rt=new Function(""+Rt));for(var Ot=new Array(arguments.length-1),pt=0;pt<Ot.length;pt++)Ot[pt]=arguments[pt+1];var Lt={callback:Rt,args:Ot};return ft[gt]=Lt,j(gt),gt++},Et.clearImmediate=Mt}function Mt(Rt){delete ft[Rt]}function Ft(Rt){if(ut)setTimeout(Ft,0,Rt);else{var Ot=ft[Rt];if(Ot){ut=!0;try{(function(pt){var Lt=pt.callback,nn=pt.args;switch(nn.length){case 0:Lt();break;case 1:Lt(nn[0]);break;case 2:Lt(nn[0],nn[1]);break;case 3:Lt(nn[0],nn[1],nn[2]);break;default:Lt.apply(void 0,nn)}})(Ot)}finally{Mt(Rt),ut=!1}}}}})(typeof self>"u"?_===void 0?this:_:self)}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(62)},function(i,o,s){(function(_,$){var et=s(16);i.exports=Ot;var tt,j=s(42);Ot.ReadableState=Rt,s(21).EventEmitter;var it=function(Pt,St){return Pt.listeners(St).length},st=s(63),ht=s(44).Buffer,_t=_.Uint8Array||function(){},gt=Object.create(s(17));gt.inherits=s(7);var ft=s(144),ut=void 0;ut=ft&&ft.debuglog?ft.debuglog("stream"):function(){};var yt,Et=s(145),Mt=s(64);gt.inherits(Ot,st);var Ft=["error","close","destroy","pause","resume"];function Rt(Pt,St){Pt=Pt||{};var Zt=St instanceof(tt=tt||s(36));this.objectMode=!!Pt.objectMode,Zt&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var tn=Pt.highWaterMark,mn=Pt.readableHighWaterMark,yn=this.objectMode?16:16384;this.highWaterMark=tn||tn===0?tn:Zt&&(mn||mn===0)?mn:yn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(22).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function Ot(Pt){if(tt=tt||s(36),!(this instanceof Ot))return new Ot(Pt);this._readableState=new Rt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function pt(Pt,St,Zt,tn,mn){var yn,vn=Pt._readableState;return St===null?(vn.reading=!1,function(un,rn){if(!rn.ended){if(rn.decoder){var It=rn.decoder.end();It&&It.length&&(rn.buffer.push(It),rn.length+=rn.objectMode?1:It.length)}rn.ended=!0,on(un)}}(Pt,vn)):(mn||(yn=function(un,rn){var It;Dt=rn,ht.isBuffer(Dt)||Dt instanceof _t||typeof rn=="string"||rn===void 0||un.objectMode||(It=new TypeError("Invalid non-string/buffer chunk"));var Dt;return It}(vn,St)),yn?Pt.emit("error",yn):vn.objectMode||St&&St.length>0?(typeof St=="string"||vn.objectMode||Object.getPrototypeOf(St)===ht.prototype||(St=function(un){return ht.from(un)}(St)),tn?vn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Lt(Pt,vn,St,!0):vn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(vn.reading=!1,vn.decoder&&!Zt?(St=vn.decoder.write(St),vn.objectMode||St.length!==0?Lt(Pt,vn,St,!1):xt(Pt,vn)):Lt(Pt,vn,St,!1))):tn||(vn.reading=!1)),function(un){return!un.ended&&(un.needReadable||un.length<un.highWaterMark||un.length===0)}(vn)}function Lt(Pt,St,Zt,tn){St.flowing&&St.length===0&&!St.sync?(Pt.emit("data",Zt),Pt.read(0)):(St.length+=St.objectMode?1:Zt.length,tn?St.buffer.unshift(Zt):St.buffer.push(Zt),St.needReadable&&on(Pt)),xt(Pt,St)}Object.defineProperty(Ot.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),Ot.prototype.destroy=Mt.destroy,Ot.prototype._undestroy=Mt.undestroy,Ot.prototype._destroy=function(Pt,St){this.push(null),St(Pt)},Ot.prototype.push=function(Pt,St){var Zt,tn=this._readableState;return tn.objectMode?Zt=!0:typeof Pt=="string"&&((St=St||tn.defaultEncoding)!==tn.encoding&&(Pt=ht.from(Pt,St),St=""),Zt=!0),pt(this,Pt,St,!1,Zt)},Ot.prototype.unshift=function(Pt){return pt(this,Pt,null,!0,!1)},Ot.prototype.isPaused=function(){return this._readableState.flowing===!1},Ot.prototype.setEncoding=function(Pt){return yt||(yt=s(22).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,St){return Pt<=0||St.length===0&&St.ended?0:St.objectMode?1:Pt!=Pt?St.flowing&&St.length?St.buffer.head.data.length:St.length:(Pt>St.highWaterMark&&(St.highWaterMark=function(Zt){return Zt>=8388608?Zt=8388608:(Zt--,Zt|=Zt>>>1,Zt|=Zt>>>2,Zt|=Zt>>>4,Zt|=Zt>>>8,Zt|=Zt>>>16,Zt++),Zt}(Pt)),Pt<=St.length?Pt:St.ended?St.length:(St.needReadable=!0,0))}function on(Pt){var St=Pt._readableState;St.needReadable=!1,St.emittedReadable||(ut("emitReadable",St.flowing),St.emittedReadable=!0,St.sync?et.nextTick(wt,Pt):wt(Pt))}function wt(Pt){ut("emit readable"),Pt.emit("readable"),Xt(Pt)}function xt(Pt,St){St.readingMore||(St.readingMore=!0,et.nextTick(Nt,Pt,St))}function Nt(Pt,St){for(var Zt=St.length;!St.reading&&!St.flowing&&!St.ended&&St.length<St.highWaterMark&&(ut("maybeReadMore read 0"),Pt.read(0),Zt!==St.length);)Zt=St.length;St.readingMore=!1}function Tt(Pt){ut("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,St){St.reading||(ut("resume read 0"),Pt.read(0)),St.resumeScheduled=!1,St.awaitDrain=0,Pt.emit("resume"),Xt(Pt),St.flowing&&!St.reading&&Pt.read(0)}function Xt(Pt){var St=Pt._readableState;for(ut("flow",St.flowing);St.flowing&&Pt.read()!==null;);}function Gt(Pt,St){return St.length===0?null:(St.objectMode?Zt=St.buffer.shift():!Pt||Pt>=St.length?(Zt=St.decoder?St.buffer.join(""):St.buffer.length===1?St.buffer.head.data:St.buffer.concat(St.length),St.buffer.clear()):Zt=function(tn,mn,yn){var vn;return tn<mn.head.data.length?(vn=mn.head.data.slice(0,tn),mn.head.data=mn.head.data.slice(tn)):vn=tn===mn.head.data.length?mn.shift():yn?function(un,rn){var It=rn.head,Dt=1,Kt=It.data;for(un-=Kt.length;It=It.next;){var gn=It.data,hn=un>gn.length?gn.length:un;if(hn===gn.length?Kt+=gn:Kt+=gn.slice(0,un),(un-=hn)===0){hn===gn.length?(++Dt,It.next?rn.head=It.next:rn.head=rn.tail=null):(rn.head=It,It.data=gn.slice(hn));break}++Dt}return rn.length-=Dt,Kt}(tn,mn):function(un,rn){var It=ht.allocUnsafe(un),Dt=rn.head,Kt=1;for(Dt.data.copy(It),un-=Dt.data.length;Dt=Dt.next;){var gn=Dt.data,hn=un>gn.length?gn.length:un;if(gn.copy(It,It.length-un,0,hn),(un-=hn)===0){hn===gn.length?(++Kt,Dt.next?rn.head=Dt.next:rn.head=rn.tail=null):(rn.head=Dt,Dt.data=gn.slice(hn));break}++Kt}return rn.length-=Kt,It}(tn,mn),vn}(Pt,St.buffer,St.decoder),Zt);var Zt}function Ut(Pt){var St=Pt._readableState;if(St.length>0)throw new Error('"endReadable()" called on non-empty stream');St.endEmitted||(St.ended=!0,et.nextTick(Ht,St,Pt))}function Ht(Pt,St){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,St.readable=!1,St.emit("end"))}function qt(Pt,St){for(var Zt=0,tn=Pt.length;Zt<tn;Zt++)if(Pt[Zt]===St)return Zt;return-1}Ot.prototype.read=function(Pt){ut("read",Pt),Pt=parseInt(Pt,10);var St=this._readableState,Zt=Pt;if(Pt!==0&&(St.emittedReadable=!1),Pt===0&&St.needReadable&&(St.length>=St.highWaterMark||St.ended))return ut("read: emitReadable",St.length,St.ended),St.length===0&&St.ended?Ut(this):on(this),null;if((Pt=nn(Pt,St))===0&&St.ended)return St.length===0&&Ut(this),null;var tn,mn=St.needReadable;return ut("need readable",mn),(St.length===0||St.length-Pt<St.highWaterMark)&&ut("length less than watermark",mn=!0),St.ended||St.reading?ut("reading or ended",mn=!1):mn&&(ut("do read"),St.reading=!0,St.sync=!0,St.length===0&&(St.needReadable=!0),this._read(St.highWaterMark),St.sync=!1,St.reading||(Pt=nn(Zt,St))),(tn=Pt>0?Gt(Pt,St):null)===null?(St.needReadable=!0,Pt=0):St.length-=Pt,St.length===0&&(St.ended||(St.needReadable=!0),Zt!==Pt&&St.ended&&Ut(this)),tn!==null&&this.emit("data",tn),tn},Ot.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},Ot.prototype.pipe=function(Pt,St){var Zt=this,tn=this._readableState;switch(tn.pipesCount){case 0:tn.pipes=Pt;break;case 1:tn.pipes=[tn.pipes,Pt];break;default:tn.pipes.push(Pt)}tn.pipesCount+=1,ut("pipe count=%d opts=%j",tn.pipesCount,St);var mn=(!St||St.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?vn:xn;function yn(Mn,qn){ut("onunpipe"),Mn===Zt&&qn&&qn.hasUnpiped===!1&&(qn.hasUnpiped=!0,ut("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",un),Pt.removeListener("error",Kt),Pt.removeListener("unpipe",yn),Zt.removeListener("end",vn),Zt.removeListener("end",xn),Zt.removeListener("data",Dt),rn=!0,!tn.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||un())}function vn(){ut("onend"),Pt.end()}tn.endEmitted?et.nextTick(mn):Zt.once("end",mn),Pt.on("unpipe",yn);var un=function(Mn){return function(){var qn=Mn._readableState;ut("pipeOnDrain",qn.awaitDrain),qn.awaitDrain&&qn.awaitDrain--,qn.awaitDrain===0&&it(Mn,"data")&&(qn.flowing=!0,Xt(Mn))}}(Zt);Pt.on("drain",un);var rn=!1,It=!1;function Dt(Mn){ut("ondata"),It=!1,Pt.write(Mn)!==!1||It||((tn.pipesCount===1&&tn.pipes===Pt||tn.pipesCount>1&&qt(tn.pipes,Pt)!==-1)&&!rn&&(ut("false write response, pause",Zt._readableState.awaitDrain),Zt._readableState.awaitDrain++,It=!0),Zt.pause())}function Kt(Mn){ut("onerror",Mn),xn(),Pt.removeListener("error",Kt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),xn()}function hn(){ut("onfinish"),Pt.removeListener("close",gn),xn()}function xn(){ut("unpipe"),Zt.unpipe(Pt)}return Zt.on("data",Dt),function(Mn,qn,Ir){if(typeof Mn.prependListener=="function")return Mn.prependListener(qn,Ir);Mn._events&&Mn._events[qn]?j(Mn._events[qn])?Mn._events[qn].unshift(Ir):Mn._events[qn]=[Ir,Mn._events[qn]]:Mn.on(qn,Ir)}(Pt,"error",Kt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",Zt),tn.flowing||(ut("pipe resume"),Zt.resume()),Pt},Ot.prototype.unpipe=function(Pt){var St=this._readableState,Zt={hasUnpiped:!1};if(St.pipesCount===0)return this;if(St.pipesCount===1)return Pt&&Pt!==St.pipes||(Pt||(Pt=St.pipes),St.pipes=null,St.pipesCount=0,St.flowing=!1,Pt&&Pt.emit("unpipe",this,Zt)),this;if(!Pt){var tn=St.pipes,mn=St.pipesCount;St.pipes=null,St.pipesCount=0,St.flowing=!1;for(var yn=0;yn<mn;yn++)tn[yn].emit("unpipe",this,Zt);return this}var vn=qt(St.pipes,Pt);return vn===-1||(St.pipes.splice(vn,1),St.pipesCount-=1,St.pipesCount===1&&(St.pipes=St.pipes[0]),Pt.emit("unpipe",this,Zt)),this},Ot.prototype.on=function(Pt,St){var Zt=st.prototype.on.call(this,Pt,St);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var tn=this._readableState;tn.endEmitted||tn.readableListening||(tn.readableListening=tn.needReadable=!0,tn.emittedReadable=!1,tn.reading?tn.length&&on(this):et.nextTick(Tt,this))}return Zt},Ot.prototype.addListener=Ot.prototype.on,Ot.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ut("resume"),Pt.flowing=!0,function(St,Zt){Zt.resumeScheduled||(Zt.resumeScheduled=!0,et.nextTick(Vt,St,Zt))}(this,Pt)),this},Ot.prototype.pause=function(){return ut("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ut("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ot.prototype.wrap=function(Pt){var St=this,Zt=this._readableState,tn=!1;for(var mn in Pt.on("end",function(){if(ut("wrapped end"),Zt.decoder&&!Zt.ended){var vn=Zt.decoder.end();vn&&vn.length&&St.push(vn)}St.push(null)}),Pt.on("data",function(vn){ut("wrapped data"),Zt.decoder&&(vn=Zt.decoder.write(vn)),Zt.objectMode&&vn==null||(Zt.objectMode||vn&&vn.length)&&(St.push(vn)||(tn=!0,Pt.pause()))}),Pt)this[mn]===void 0&&typeof Pt[mn]=="function"&&(this[mn]=function(vn){return function(){return Pt[vn].apply(Pt,arguments)}}(mn));for(var yn=0;yn<Ft.length;yn++)Pt.on(Ft[yn],this.emit.bind(this,Ft[yn]));return this._read=function(vn){ut("wrapped _read",vn),tn&&(tn=!1,Pt.resume())},this},Object.defineProperty(Ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Ot._fromList=Gt}).call(this,s(6),s(2))},function(i,o){},function(i,o,s){var _=s(44).Buffer,$=s(146);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),_t=this.head,gt=0;_t;)j=_t.data,it=ht,st=gt,j.copy(it,st),gt+=_t.data.length,_t=_t.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){var _=s(13),$=s(3).LEVEL,et=s(20),tt=i.exports=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");function it(st){this.emit("error",st,this.transport)}this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=it.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(var st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([this.transport.name+" is a legacy winston transport. Consider upgrading: ","- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){(function(_,$){function et(wt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt})(wt)}function tt(wt,xt){if(!(wt instanceof xt))throw new TypeError("Cannot call a class as a function")}function j(wt,xt){for(var Nt=0;Nt<xt.length;Nt++){var Tt=xt[Nt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(wt,Tt.key,Tt)}}function it(wt,xt){return(it=Object.setPrototypeOf||function(Nt,Tt){return Nt.__proto__=Tt,Nt})(wt,xt)}function st(wt){var xt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Nt,Tt=gt(wt);if(xt){var Vt=gt(this).constructor;Nt=Reflect.construct(Tt,arguments,Vt)}else Nt=Tt.apply(this,arguments);return ht(this,Nt)}}function ht(wt,xt){return!xt||et(xt)!=="object"&&typeof xt!="function"?_t(wt):xt}function _t(wt){if(wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}function gt(wt){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(xt){return xt.__proto__||Object.getPrototypeOf(xt)})(wt)}var ft=s(65),ut=s(56),yt=s(150),Et=s(160),Mt=s(3).MESSAGE,Ft=s(32),Rt=Ft.Stream,Ot=Ft.PassThrough,pt=s(20),Lt=s(38)("winston:file"),nn=s(18),on=s(188);i.exports=function(wt){(function(Xt,Gt){if(typeof Gt!="function"&&Gt!==null)throw new TypeError("Super expression must either be null or a function");Xt.prototype=Object.create(Gt&&Gt.prototype,{constructor:{value:Xt,writable:!0,configurable:!0}}),Gt&&it(Xt,Gt)})(Vt,wt);var xt,Nt,Tt=st(Vt);function Vt(){var Xt,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function Ut(Ht){for(var qt=arguments.length,Pt=new Array(qt>1?qt-1:0),St=1;St<qt;St++)Pt[St-1]=arguments[St];Pt.slice(1).forEach(function(Zt){if(Gt[Zt])throw new Error("Cannot set ".concat(Zt," and ").concat(Ht," together"))})}if(tt(this,Vt),(Xt=Tt.call(this,Gt)).name=Gt.name||"file",Xt._stream=new Ot,Xt._stream.setMaxListeners(30),Xt._onError=Xt._onError.bind(_t(Xt)),Gt.filename||Gt.dirname)Ut("filename or dirname","stream"),Xt._basename=Xt.filename=Gt.filename?ut.basename(Gt.filename):"winston.log",Xt.dirname=Gt.dirname||ut.dirname(Gt.filename),Xt.options=Gt.options||{flags:"a"};else{if(!Gt.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),Ut("stream","filename","maxsize"),Xt._dest=Xt._stream.pipe(Xt._setupStream(Gt.stream)),Xt.dirname=ut.dirname(Xt._dest.path)}return Xt.maxsize=Gt.maxsize||null,Xt.rotationFormat=Gt.rotationFormat||!1,Xt.zippedArchive=Gt.zippedArchive||!1,Xt.maxFiles=Gt.maxFiles||null,Xt.eol=Gt.eol||nn.EOL,Xt.tailable=Gt.tailable||!1,Xt._size=0,Xt._pendingSize=0,Xt._created=0,Xt._drain=!1,Xt._opening=!1,Xt._ending=!1,Xt.dirname&&Xt._createLogDirIfNotExist(Xt.dirname),Xt.open(),Xt}return xt=Vt,(Nt=[{key:"finishIfEnding",value:function(){var Xt=this;this._ending&&(this._opening?this.once("open",function(){Xt._stream.once("finish",function(){return Xt.emit("finish")}),_(function(){return Xt._stream.end()})}):(this._stream.once("finish",function(){return Xt.emit("finish")}),_(function(){return Xt._stream.end()})))}},{key:"log",value:function(Xt){var Gt=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};if(this.silent)return Ut(),!0;if(this._drain)this._stream.once("drain",function(){Gt._drain=!1,Gt.log(Xt,Ut)});else{if(!this._rotate){var Ht="".concat(Xt[Mt]).concat(this.eol),qt=$.byteLength(Ht);this._pendingSize+=qt,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);var Pt=this._stream.write(Ht,St.bind(this));return Pt?Ut():(this._drain=!0,this._stream.once("drain",function(){Gt._drain=!1,Ut()})),Lt("written",Pt,this._drain),this.finishIfEnding(),Pt}this._stream.once("rotate",function(){Gt._rotate=!1,Gt.log(Xt,Ut)})}function St(){var Zt=this;this._size+=qt,this._pendingSize-=qt,Lt("logged %s %s",this._size,Ht),this.emit("logged",Xt),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream(function(){return Zt._rotateFile()}))}}},{key:"query",value:function(Xt,Gt){typeof Xt=="function"&&(Gt=Xt,Xt={}),Xt=function(tn){return(tn=tn||{}).rows=tn.rows||tn.limit||10,tn.start=tn.start||0,tn.until=tn.until||new Date,et(tn.until)!=="object"&&(tn.until=new Date(tn.until)),tn.from=tn.from||tn.until-864e5,et(tn.from)!=="object"&&(tn.from=new Date(tn.from)),tn.order=tn.order||"desc",tn}(Xt);var Ut=ut.join(this.dirname,this.filename),Ht="",qt=[],Pt=0,St=ft.createReadStream(Ut,{encoding:"utf8"});function Zt(tn,mn){try{var yn=JSON.parse(tn);(function(vn){if(vn&&et(vn)==="object"){var un=new Date(vn.timestamp);if(!(Xt.from&&un<Xt.from||Xt.until&&un>Xt.until||Xt.level&&Xt.level!==vn.level))return!0}})(yn)&&function(vn){Xt.rows&&qt.length>=Xt.rows&&Xt.order!=="desc"?St.readable&&St.destroy():(Xt.fields&&(vn=Xt.fields.reduce(function(un,rn){return un[rn]=vn[rn],un},{})),Xt.order==="desc"&&qt.length>=Xt.rows&&qt.shift(),qt.push(vn))}(yn)}catch(vn){mn||St.emit("error",vn)}}St.on("error",function(tn){if(St.readable&&St.destroy(),Gt)return tn.code!=="ENOENT"?Gt(tn):Gt(null,qt)}),St.on("data",function(tn){for(var mn=(tn=(Ht+tn).split(/\n+/)).length-1,yn=0;yn<mn;yn++)(!Xt.start||Pt>=Xt.start)&&Zt(tn[yn]),Pt++;Ht=tn[mn]}),St.on("close",function(){Ht&&Zt(Ht,!0),Xt.order==="desc"&&(qt=qt.reverse()),Gt&&Gt(null,qt)})}},{key:"stream",value:function(){var Xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Gt=ut.join(this.dirname,this.filename),Ut=new Rt,Ht={file:Gt,start:Xt.start};return Ut.destroy=on(Ht,function(qt,Pt){if(qt)return Ut.emit("error",qt);try{Ut.emit("data",Pt),Pt=JSON.parse(Pt),Ut.emit("log",Pt)}catch(St){Ut.emit("error",St)}}),Ut}},{key:"open",value:function(){var Xt=this;this.filename&&(this._opening||(this._opening=!0,this.stat(function(Gt,Ut){if(Gt)return Xt.emit("error",Gt);Lt("stat done: %s { size: %s }",Xt.filename,Ut),Xt._size=Ut,Xt._dest=Xt._createStream(Xt._stream),Xt._opening=!1,Xt.once("open",function(){Xt._stream.eventNames().includes("rotate")?Xt._stream.emit("rotate"):Xt._rotate=!1})})))}},{key:"stat",value:function(Xt){var Gt=this,Ut=this._getFile(),Ht=ut.join(this.dirname,Ut);ft.stat(Ht,function(qt,Pt){return qt&&qt.code==="ENOENT"?(Lt("ENOENT ok",Ht),Gt.filename=Ut,Xt(null,0)):qt?(Lt("err ".concat(qt.code," ").concat(Ht)),Xt(qt)):!Pt||Gt._needsNewFile(Pt.size)?Gt._incFile(function(){return Gt.stat(Xt)}):(Gt.filename=Ut,void Xt(null,Pt.size))})}},{key:"close",value:function(Xt){var Gt=this;this._stream&&this._stream.end(function(){Xt&&Xt(),Gt.emit("flush"),Gt.emit("closed")})}},{key:"_needsNewFile",value:function(Xt){return Xt=Xt||this._size,this.maxsize&&Xt>=this.maxsize}},{key:"_onError",value:function(Xt){this.emit("error",Xt)}},{key:"_setupStream",value:function(Xt){return Xt.on("error",this._onError),Xt}},{key:"_cleanupStream",value:function(Xt){return Xt.removeListener("error",this._onError),Xt}},{key:"_rotateFile",value:function(){var Xt=this;this._incFile(function(){return Xt.open()})}},{key:"_endStream",value:function(){var Xt=this,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this._dest?(this._stream.unpipe(this._dest),this._dest.end(function(){Xt._cleanupStream(Xt._dest),Gt()})):Gt()}},{key:"_createStream",value:function(Xt){var Gt=this,Ut=ut.join(this.dirname,this.filename);Lt("create stream start",Ut,this.options);var Ht=ft.createWriteStream(Ut,this.options).on("error",function(Pt){return Lt(Pt)}).on("close",function(){return Lt("close",Ht.path,Ht.bytesWritten)}).on("open",function(){Lt("file open ok",Ut),Gt.emit("open",Ut),Xt.pipe(Ht),Gt.rotatedWhileOpening&&(Gt._stream=new Ot,Gt._stream.setMaxListeners(30),Gt._rotateFile(),Gt.rotatedWhileOpening=!1,Gt._cleanupStream(Ht),Xt.end())});if(Lt("create stream ok",Ut),this.zippedArchive){var qt=Et.createGzip();return qt.pipe(Ht),qt}return Ht}},{key:"_incFile",value:function(Xt){Lt("_incFile",this.filename);var Gt=ut.extname(this._basename),Ut=ut.basename(this._basename,Gt);this.tailable?this._checkMaxFilesTailable(Gt,Ut,Xt):(this._created+=1,this._checkMaxFilesIncrementing(Gt,Ut,Xt))}},{key:"_getFile",value:function(){var Xt=ut.extname(this._basename),Gt=ut.basename(this._basename,Xt),Ut=this.rotationFormat?this.rotationFormat():this._created,Ht=!this.tailable&&this._created?"".concat(Gt).concat(Ut).concat(Xt):"".concat(Gt).concat(Xt);return this.zippedArchive&&!this.tailable?"".concat(Ht,".gz"):Ht}},{key:"_checkMaxFilesIncrementing",value:function(Xt,Gt,Ut){if(!this.maxFiles||this._created<this.maxFiles)return _(Ut);var Ht=this._created-this.maxFiles,qt=Ht!==0?Ht:"",Pt=this.zippedArchive?".gz":"",St="".concat(Gt).concat(qt).concat(Xt).concat(Pt),Zt=ut.join(this.dirname,St);ft.unlink(Zt,Ut)}},{key:"_checkMaxFilesTailable",value:function(Xt,Gt,Ut){var Ht=this,qt=[];if(this.maxFiles){for(var Pt=this.zippedArchive?".gz":"",St=this.maxFiles-1;St>1;St--)qt.push(function(Zt,tn){var mn=this,yn="".concat(Gt).concat(Zt-1).concat(Xt).concat(Pt),vn=ut.join(this.dirname,yn);ft.exists(vn,function(un){if(!un)return tn(null);yn="".concat(Gt).concat(Zt).concat(Xt).concat(Pt),ft.rename(vn,ut.join(mn.dirname,yn),tn)})}.bind(this,St));yt(qt,function(){ft.rename(ut.join(Ht.dirname,"".concat(Gt).concat(Xt)),ut.join(Ht.dirname,"".concat(Gt,"1").concat(Xt).concat(Pt)),Ut)})}}},{key:"_createLogDirIfNotExist",value:function(Xt){ft.existsSync(Xt)||ft.mkdirSync(Xt,{recursive:!0})}}])&&j(xt.prototype,Nt),Vt}(pt)}).call(this,s(15).setImmediate,s(5).Buffer)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j){return(0,_.default)($.default,tt,j)};var _=et(s(151)),$=et(s(155));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(45)),$=tt(s(25)),et=tt(s(30));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)((j,it,st)=>{var ht=(0,_.default)(it)?[]:{};j(it,(_t,gt,ft)=>{(0,$.default)(_t)((ut,...yt)=>{yt.length<2&&([yt]=yt),ht[gt]=yt,ft(ut)})},_t=>st(_t,ht))},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(st){return(0,et.isAsync)(st)?function(...ht){const _t=ht.pop();return j(st.apply(this,ht),_t)}:(0,_.default)(function(ht,_t){var gt;try{gt=st.apply(this,ht)}catch(ft){return _t(ft)}if(gt&&typeof gt.then=="function")return j(gt,_t);_t(null,gt)})};var _=tt(s(153)),$=tt(s(154)),et=s(25);function tt(st){return st&&st.__esModule?st:{default:st}}function j(st,ht){return st.then(_t=>{it(ht,null,_t)},_t=>{it(ht,_t&&_t.message?_t:new Error(_t))})}function it(st,ht,_t){try{st(ht,_t)}catch(gt){(0,$.default)(ft=>{throw ft},gt)}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){var et=$.pop();return _.call(this,$,et)}},i.exports=o.default},function(i,o,s){(function(_,$){Object.defineProperty(o,"__esModule",{value:!0}),o.fallback=it,o.wrap=st;var et,tt=o.hasSetImmediate=typeof _=="function"&&_,j=o.hasNextTick=typeof $=="object"&&typeof $.nextTick=="function";function it(ht){setTimeout(ht,0)}function st(ht){return(_t,...gt)=>ht(()=>_t(...gt))}et=tt?_:j?$.nextTick:it,o.default=st(et)}).call(this,s(15).setImmediate,s(2))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=et(s(66)),$=et(s(30));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}o.default=(0,$.default)(function(tt,j,it){return(0,_.default)(tt,1,j,it)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=st(s(67)),$=st(s(157)),et=st(s(68)),tt=s(25),j=st(s(159)),it=st(s(46));function st(ht){return ht&&ht.__esModule?ht:{default:ht}}o.default=ht=>(_t,gt,ft)=>{if(ft=(0,_.default)(ft),ht<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!_t)return ft(null);if((0,tt.isAsyncGenerator)(_t))return(0,j.default)(_t,ht,gt,ft);if((0,tt.isAsyncIterable)(_t))return(0,j.default)(_t[Symbol.asyncIterator](),ht,gt,ft);var ut=(0,$.default)(_t),yt=!1,Et=!1,Mt=0,Ft=!1;function Rt(pt,Lt){if(!Et)if(Mt-=1,pt)yt=!0,ft(pt);else if(pt===!1)yt=!0,Et=!0;else{if(Lt===it.default||yt&&Mt<=0)return yt=!0,ft(null);Ft||Ot()}}function Ot(){for(Ft=!0;Mt<ht&&!yt;){var pt=ut();if(pt===null)return yt=!0,void(Mt<=0&&ft(null));Mt+=1,gt(pt.value,pt.key,(0,et.default)(Rt))}Ft=!1}Ot()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt){if((0,_.default)(tt))return function(gt){var ft=-1,ut=gt.length;return function(){return++ft<ut?{value:gt[ft],key:ft}:null}}(tt);var j=(0,$.default)(tt);return j?function(gt){var ft=-1;return function(){var ut=gt.next();return ut.done?null:(ft++,{value:ut.value,key:ft})}}(j):(it=tt,st=it?Object.keys(it):[],ht=-1,_t=st.length,function(){var gt=st[++ht];return ht<_t?{value:it[gt],key:gt}:null});var it,st,ht,_t};var _=et(s(45)),$=et(s(158));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _[Symbol.iterator]&&_[Symbol.iterator]()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j,it,st){let ht=!1,_t=!1,gt=!1,ft=0,ut=0;function yt(){ft>=j||gt||ht||(gt=!0,tt.next().then(({value:Ft,done:Rt})=>{if(!_t&&!ht){if(gt=!1,Rt)return ht=!0,void(ft<=0&&st(null));ft++,it(Ft,ut,Et),ut++,yt()}}).catch(Mt))}function Et(Ft,Rt){if(ft-=1,!_t)return Ft?Mt(Ft):Ft===!1?(ht=!0,void(_t=!0)):Rt===et.default||ht&&ft<=0?(ht=!0,st(null)):void yt()}function Mt(Ft){_t||(gt=!1,ht=!0,st(Ft))}yt()};var _,$=s(46),et=(_=$)&&_.__esModule?_:{default:_};i.exports=o.default},function(i,o,s){(function(_){var $=s(5).Buffer,et=s(161).Transform,tt=s(169),j=s(13),it=s(74).ok,st=s(5).kMaxLength,ht="Cannot create final Buffer. It would be larger than 0x"+st.toString(16)+" bytes";tt.Z_MIN_WINDOWBITS=8,tt.Z_MAX_WINDOWBITS=15,tt.Z_DEFAULT_WINDOWBITS=15,tt.Z_MIN_CHUNK=64,tt.Z_MAX_CHUNK=1/0,tt.Z_DEFAULT_CHUNK=16384,tt.Z_MIN_MEMLEVEL=1,tt.Z_MAX_MEMLEVEL=9,tt.Z_DEFAULT_MEMLEVEL=8,tt.Z_MIN_LEVEL=-1,tt.Z_MAX_LEVEL=9,tt.Z_DEFAULT_LEVEL=tt.Z_DEFAULT_COMPRESSION;for(var _t=Object.keys(tt),gt=0;gt<_t.length;gt++){var ft=_t[gt];ft.match(/^Z/)&&Object.defineProperty(o,ft,{enumerable:!0,value:tt[ft],writable:!1})}for(var ut={Z_OK:tt.Z_OK,Z_STREAM_END:tt.Z_STREAM_END,Z_NEED_DICT:tt.Z_NEED_DICT,Z_ERRNO:tt.Z_ERRNO,Z_STREAM_ERROR:tt.Z_STREAM_ERROR,Z_DATA_ERROR:tt.Z_DATA_ERROR,Z_MEM_ERROR:tt.Z_MEM_ERROR,Z_BUF_ERROR:tt.Z_BUF_ERROR,Z_VERSION_ERROR:tt.Z_VERSION_ERROR},yt=Object.keys(ut),Et=0;Et<yt.length;Et++){var Mt=yt[Et];ut[ut[Mt]]=Mt}function Ft(Gt,Ut,Ht){var qt=[],Pt=0;function St(){for(var tn;(tn=Gt.read())!==null;)qt.push(tn),Pt+=tn.length;Gt.once("readable",St)}function Zt(){var tn,mn=null;Pt>=st?mn=new RangeError(ht):tn=$.concat(qt,Pt),qt=[],Gt.close(),Ht(mn,tn)}Gt.on("error",function(tn){Gt.removeListener("end",Zt),Gt.removeListener("readable",St),Ht(tn)}),Gt.on("end",Zt),Gt.end(Ut),St()}function Rt(Gt,Ut){if(typeof Ut=="string"&&(Ut=$.from(Ut)),!$.isBuffer(Ut))throw new TypeError("Not a string or buffer");var Ht=Gt._finishFlushFlag;return Gt._processChunk(Ut,Ht)}function Ot(Gt){if(!(this instanceof Ot))return new Ot(Gt);Tt.call(this,Gt,tt.DEFLATE)}function pt(Gt){if(!(this instanceof pt))return new pt(Gt);Tt.call(this,Gt,tt.INFLATE)}function Lt(Gt){if(!(this instanceof Lt))return new Lt(Gt);Tt.call(this,Gt,tt.GZIP)}function nn(Gt){if(!(this instanceof nn))return new nn(Gt);Tt.call(this,Gt,tt.GUNZIP)}function on(Gt){if(!(this instanceof on))return new on(Gt);Tt.call(this,Gt,tt.DEFLATERAW)}function wt(Gt){if(!(this instanceof wt))return new wt(Gt);Tt.call(this,Gt,tt.INFLATERAW)}function xt(Gt){if(!(this instanceof xt))return new xt(Gt);Tt.call(this,Gt,tt.UNZIP)}function Nt(Gt){return Gt===tt.Z_NO_FLUSH||Gt===tt.Z_PARTIAL_FLUSH||Gt===tt.Z_SYNC_FLUSH||Gt===tt.Z_FULL_FLUSH||Gt===tt.Z_FINISH||Gt===tt.Z_BLOCK}function Tt(Gt,Ut){var Ht=this;if(this._opts=Gt=Gt||{},this._chunkSize=Gt.chunkSize||o.Z_DEFAULT_CHUNK,et.call(this,Gt),Gt.flush&&!Nt(Gt.flush))throw new Error("Invalid flush flag: "+Gt.flush);if(Gt.finishFlush&&!Nt(Gt.finishFlush))throw new Error("Invalid flush flag: "+Gt.finishFlush);if(this._flushFlag=Gt.flush||tt.Z_NO_FLUSH,this._finishFlushFlag=Gt.finishFlush!==void 0?Gt.finishFlush:tt.Z_FINISH,Gt.chunkSize&&(Gt.chunkSize<o.Z_MIN_CHUNK||Gt.chunkSize>o.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+Gt.chunkSize);if(Gt.windowBits&&(Gt.windowBits<o.Z_MIN_WINDOWBITS||Gt.windowBits>o.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+Gt.windowBits);if(Gt.level&&(Gt.level<o.Z_MIN_LEVEL||Gt.level>o.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+Gt.level);if(Gt.memLevel&&(Gt.memLevel<o.Z_MIN_MEMLEVEL||Gt.memLevel>o.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+Gt.memLevel);if(Gt.strategy&&Gt.strategy!=o.Z_FILTERED&&Gt.strategy!=o.Z_HUFFMAN_ONLY&&Gt.strategy!=o.Z_RLE&&Gt.strategy!=o.Z_FIXED&&Gt.strategy!=o.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+Gt.strategy);if(Gt.dictionary&&!$.isBuffer(Gt.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new tt.Zlib(Ut);var qt=this;this._hadError=!1,this._handle.onerror=function(Zt,tn){Vt(qt),qt._hadError=!0;var mn=new Error(Zt);mn.errno=tn,mn.code=o.codes[tn],qt.emit("error",mn)};var Pt=o.Z_DEFAULT_COMPRESSION;typeof Gt.level=="number"&&(Pt=Gt.level);var St=o.Z_DEFAULT_STRATEGY;typeof Gt.strategy=="number"&&(St=Gt.strategy),this._handle.init(Gt.windowBits||o.Z_DEFAULT_WINDOWBITS,Pt,Gt.memLevel||o.Z_DEFAULT_MEMLEVEL,St,Gt.dictionary),this._buffer=$.allocUnsafe(this._chunkSize),this._offset=0,this._level=Pt,this._strategy=St,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!Ht._handle},configurable:!0,enumerable:!0})}function Vt(Gt,Ut){Ut&&_.nextTick(Ut),Gt._handle&&(Gt._handle.close(),Gt._handle=null)}function Xt(Gt){Gt.emit("close")}Object.defineProperty(o,"codes",{enumerable:!0,value:Object.freeze(ut),writable:!1}),o.Deflate=Ot,o.Inflate=pt,o.Gzip=Lt,o.Gunzip=nn,o.DeflateRaw=on,o.InflateRaw=wt,o.Unzip=xt,o.createDeflate=function(Gt){return new Ot(Gt)},o.createInflate=function(Gt){return new pt(Gt)},o.createDeflateRaw=function(Gt){return new on(Gt)},o.createInflateRaw=function(Gt){return new wt(Gt)},o.createGzip=function(Gt){return new Lt(Gt)},o.createGunzip=function(Gt){return new nn(Gt)},o.createUnzip=function(Gt){return new xt(Gt)},o.deflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new Ot(Ut),Gt,Ht)},o.deflateSync=function(Gt,Ut){return Rt(new Ot(Ut),Gt)},o.gzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new Lt(Ut),Gt,Ht)},o.gzipSync=function(Gt,Ut){return Rt(new Lt(Ut),Gt)},o.deflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new on(Ut),Gt,Ht)},o.deflateRawSync=function(Gt,Ut){return Rt(new on(Ut),Gt)},o.unzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new xt(Ut),Gt,Ht)},o.unzipSync=function(Gt,Ut){return Rt(new xt(Ut),Gt)},o.inflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new pt(Ut),Gt,Ht)},o.inflateSync=function(Gt,Ut){return Rt(new pt(Ut),Gt)},o.gunzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new nn(Ut),Gt,Ht)},o.gunzipSync=function(Gt,Ut){return Rt(new nn(Ut),Gt)},o.inflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new wt(Ut),Gt,Ht)},o.inflateRawSync=function(Gt,Ut){return Rt(new wt(Ut),Gt)},j.inherits(Tt,et),Tt.prototype.params=function(Gt,Ut,Ht){if(Gt<o.Z_MIN_LEVEL||Gt>o.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+Gt);if(Ut!=o.Z_FILTERED&&Ut!=o.Z_HUFFMAN_ONLY&&Ut!=o.Z_RLE&&Ut!=o.Z_FIXED&&Ut!=o.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+Ut);if(this._level!==Gt||this._strategy!==Ut){var qt=this;this.flush(tt.Z_SYNC_FLUSH,function(){it(qt._handle,"zlib binding closed"),qt._handle.params(Gt,Ut),qt._hadError||(qt._level=Gt,qt._strategy=Ut,Ht&&Ht())})}else _.nextTick(Ht)},Tt.prototype.reset=function(){return it(this._handle,"zlib binding closed"),this._handle.reset()},Tt.prototype._flush=function(Gt){this._transform($.alloc(0),"",Gt)},Tt.prototype.flush=function(Gt,Ut){var Ht=this,qt=this._writableState;(typeof Gt=="function"||Gt===void 0&&!Ut)&&(Ut=Gt,Gt=tt.Z_FULL_FLUSH),qt.ended?Ut&&_.nextTick(Ut):qt.ending?Ut&&this.once("end",Ut):qt.needDrain?Ut&&this.once("drain",function(){return Ht.flush(Gt,Ut)}):(this._flushFlag=Gt,this.write($.alloc(0),"",Ut))},Tt.prototype.close=function(Gt){Vt(this,Gt),_.nextTick(Xt,this)},Tt.prototype._transform=function(Gt,Ut,Ht){var qt,Pt=this._writableState,St=(Pt.ending||Pt.ended)&&(!Gt||Pt.length===Gt.length);return Gt===null||$.isBuffer(Gt)?this._handle?(St?qt=this._finishFlushFlag:(qt=this._flushFlag,Gt.length>=Pt.length&&(this._flushFlag=this._opts.flush||tt.Z_NO_FLUSH)),void this._processChunk(Gt,qt,Ht)):Ht(new Error("zlib binding closed")):Ht(new Error("invalid input"))},Tt.prototype._processChunk=function(Gt,Ut,Ht){var qt=Gt&&Gt.length,Pt=this._chunkSize-this._offset,St=0,Zt=this,tn=typeof Ht=="function";if(!tn){var mn,yn=[],vn=0;this.on("error",function(Kt){mn=Kt}),it(this._handle,"zlib binding closed");do var un=this._handle.writeSync(Ut,Gt,St,qt,this._buffer,this._offset,Pt);while(!this._hadError&&Dt(un[0],un[1]));if(this._hadError)throw mn;if(vn>=st)throw Vt(this),new RangeError(ht);var rn=$.concat(yn,vn);return Vt(this),rn}it(this._handle,"zlib binding closed");var It=this._handle.write(Ut,Gt,St,qt,this._buffer,this._offset,Pt);function Dt(Kt,gn){if(this&&(this.buffer=null,this.callback=null),!Zt._hadError){var hn=Pt-gn;if(it(hn>=0,"have should not go down"),hn>0){var xn=Zt._buffer.slice(Zt._offset,Zt._offset+hn);Zt._offset+=hn,tn?Zt.push(xn):(yn.push(xn),vn+=xn.length)}if((gn===0||Zt._offset>=Zt._chunkSize)&&(Pt=Zt._chunkSize,Zt._offset=0,Zt._buffer=$.allocUnsafe(Zt._chunkSize)),gn===0){if(St+=qt-Kt,qt=Kt,!tn)return!0;var Mn=Zt._handle.write(Ut,Gt,St,qt,Zt._buffer,Zt._offset,Zt._chunkSize);return Mn.callback=Dt,void(Mn.buffer=Gt)}if(!tn)return!1;Ht()}}It.buffer=Gt,It.callback=Dt},j.inherits(Ot,Tt),j.inherits(pt,Tt),j.inherits(Lt,Tt),j.inherits(nn,Tt),j.inherits(on,Tt),j.inherits(wt,Tt),j.inherits(xt,Tt)}).call(this,s(2))},function(i,o,s){i.exports=$;var _=s(21).EventEmitter;function $(){_.call(this)}s(7)($,_),$.Readable=s(31),$.Writable=s(73),$.Duplex=s(166),$.Transform=s(167),$.PassThrough=s(168),$.Stream=$,$.prototype.pipe=function(et,tt){var j=this;function it(yt){et.writable&&et.write(yt)===!1&&j.pause&&j.pause()}function st(){j.readable&&j.resume&&j.resume()}j.on("data",it),et.on("drain",st),et._isStdio||tt&&tt.end===!1||(j.on("end",_t),j.on("close",gt));var ht=!1;function _t(){ht||(ht=!0,et.end())}function gt(){ht||(ht=!0,typeof et.destroy=="function"&&et.destroy())}function ft(yt){if(ut(),_.listenerCount(this,"error")===0)throw yt}function ut(){j.removeListener("data",it),et.removeListener("drain",st),j.removeListener("end",_t),j.removeListener("close",gt),j.removeListener("error",ft),et.removeListener("error",ft),j.removeListener("end",ut),j.removeListener("close",ut),et.removeListener("close",ut)}return j.on("error",ft),et.on("error",ft),j.on("end",ut),j.on("close",ut),et.on("close",ut),et.emit("pipe",j),et}},function(i,o){},function(i,o,s){var _=s(47).Buffer,$=s(164);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),_t=this.head,gt=0;_t;)j=_t.data,it=ht,st=gt,j.copy(it,st),gt+=_t.data.length,_t=_t.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){i.exports=et;var _=s(72),$=s(17);function et(tt){if(!(this instanceof et))return new et(tt);_.call(this,tt)}$.inherits=s(7),$.inherits(et,_),et.prototype._transform=function(tt,j,it){it(null,tt)}},function(i,o,s){i.exports=s(23)},function(i,o,s){i.exports=s(31).Transform},function(i,o,s){i.exports=s(31).PassThrough},function(i,o,s){(function(_,$){var et=s(74),tt=s(171),j=s(172),it=s(175),st=s(178);for(var ht in st)o[ht]=st[ht];o.NONE=0,o.DEFLATE=1,o.INFLATE=2,o.GZIP=3,o.GUNZIP=4,o.DEFLATERAW=5,o.INFLATERAW=6,o.UNZIP=7;function _t(gt){if(typeof gt!="number"||gt<o.DEFLATE||gt>o.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=gt,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}_t.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,et(this.init_done,"close before init"),et(this.mode<=o.UNZIP),this.mode===o.DEFLATE||this.mode===o.GZIP||this.mode===o.DEFLATERAW?j.deflateEnd(this.strm):this.mode!==o.INFLATE&&this.mode!==o.GUNZIP&&this.mode!==o.INFLATERAW&&this.mode!==o.UNZIP||it.inflateEnd(this.strm),this.mode=o.NONE,this.dictionary=null)},_t.prototype.write=function(gt,ft,ut,yt,Et,Mt,Ft){return this._write(!0,gt,ft,ut,yt,Et,Mt,Ft)},_t.prototype.writeSync=function(gt,ft,ut,yt,Et,Mt,Ft){return this._write(!1,gt,ft,ut,yt,Et,Mt,Ft)},_t.prototype._write=function(gt,ft,ut,yt,Et,Mt,Ft,Rt){if(et.equal(arguments.length,8),et(this.init_done,"write before init"),et(this.mode!==o.NONE,"already finalized"),et.equal(!1,this.write_in_progress,"write already in progress"),et.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,et.equal(!1,ft===void 0,"must provide flush value"),this.write_in_progress=!0,ft!==o.Z_NO_FLUSH&&ft!==o.Z_PARTIAL_FLUSH&&ft!==o.Z_SYNC_FLUSH&&ft!==o.Z_FULL_FLUSH&&ft!==o.Z_FINISH&&ft!==o.Z_BLOCK)throw new Error("Invalid flush value");if(ut==null&&(ut=_.alloc(0),Et=0,yt=0),this.strm.avail_in=Et,this.strm.input=ut,this.strm.next_in=yt,this.strm.avail_out=Rt,this.strm.output=Mt,this.strm.next_out=Ft,this.flush=ft,!gt)return this._process(),this._checkError()?this._afterSync():void 0;var Ot=this;return $.nextTick(function(){Ot._process(),Ot._after()}),this},_t.prototype._afterSync=function(){var gt=this.strm.avail_out,ft=this.strm.avail_in;return this.write_in_progress=!1,[ft,gt]},_t.prototype._process=function(){var gt=null;switch(this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflate(this.strm,this.flush);break;case o.UNZIP:switch(this.strm.avail_in>0&&(gt=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(gt===null)break;if(this.strm.input[gt]!==31){this.mode=o.INFLATE;break}if(this.gzip_id_bytes_read=1,gt++,this.strm.avail_in===1)break;case 1:if(gt===null)break;this.strm.input[gt]===139?(this.gzip_id_bytes_read=2,this.mode=o.GUNZIP):this.mode=o.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:for(this.err=it.inflate(this.strm,this.flush),this.err===o.Z_NEED_DICT&&this.dictionary&&(this.err=it.inflateSetDictionary(this.strm,this.dictionary),this.err===o.Z_OK?this.err=it.inflate(this.strm,this.flush):this.err===o.Z_DATA_ERROR&&(this.err=o.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===o.GUNZIP&&this.err===o.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=it.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},_t.prototype._checkError=function(){switch(this.err){case o.Z_OK:case o.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===o.Z_FINISH)return this._error("unexpected end of file"),!1;break;case o.Z_STREAM_END:break;case o.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},_t.prototype._after=function(){if(this._checkError()){var gt=this.strm.avail_out,ft=this.strm.avail_in;this.write_in_progress=!1,this.callback(ft,gt),this.pending_close&&this.close()}},_t.prototype._error=function(gt){this.strm.msg&&(gt=this.strm.msg),this.onerror(gt,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},_t.prototype.init=function(gt,ft,ut,yt,Et){et(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),et(gt>=8&&gt<=15,"invalid windowBits"),et(ft>=-1&&ft<=9,"invalid compression level"),et(ut>=1&&ut<=9,"invalid memlevel"),et(yt===o.Z_FILTERED||yt===o.Z_HUFFMAN_ONLY||yt===o.Z_RLE||yt===o.Z_FIXED||yt===o.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(ft,gt,ut,yt,Et),this._setDictionary()},_t.prototype.params=function(){throw new Error("deflateParams Not supported")},_t.prototype.reset=function(){this._reset(),this._setDictionary()},_t.prototype._init=function(gt,ft,ut,yt,Et){switch(this.level=gt,this.windowBits=ft,this.memLevel=ut,this.strategy=yt,this.flush=o.Z_NO_FLUSH,this.err=o.Z_OK,this.mode!==o.GZIP&&this.mode!==o.GUNZIP||(this.windowBits+=16),this.mode===o.UNZIP&&(this.windowBits+=32),this.mode!==o.DEFLATERAW&&this.mode!==o.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new tt,this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflateInit2(this.strm,this.level,o.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:case o.UNZIP:this.err=it.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==o.Z_OK&&this._error("Init error"),this.dictionary=Et,this.write_in_progress=!1,this.init_done=!0},_t.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:this.err=j.deflateSetDictionary(this.strm,this.dictionary)}this.err!==o.Z_OK&&this._error("Failed to set dictionary")}},_t.prototype._reset=function(){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:case o.GZIP:this.err=j.deflateReset(this.strm);break;case o.INFLATE:case o.INFLATERAW:case o.GUNZIP:this.err=it.inflateReset(this.strm)}this.err!==o.Z_OK&&this._error("Failed to reset stream")},o.Zlib=_t}).call(this,s(5).Buffer,s(2))},function(i,o,s){var _=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;function tt(j){if(j==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(j)}i.exports=function(){try{if(!Object.assign)return!1;var j=new String("abc");if(j[5]="de",Object.getOwnPropertyNames(j)[0]==="5")return!1;for(var it={},st=0;st<10;st++)it["_"+String.fromCharCode(st)]=st;if(Object.getOwnPropertyNames(it).map(function(_t){return it[_t]}).join("")!=="0123456789")return!1;var ht={};return"abcdefghijklmnopqrst".split("").forEach(function(_t){ht[_t]=_t}),Object.keys(Object.assign({},ht)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(j,it){for(var st,ht,_t=tt(j),gt=1;gt<arguments.length;gt++){for(var ft in st=Object(arguments[gt]))$.call(st,ft)&&(_t[ft]=st[ft]);if(_){ht=_(st);for(var ut=0;ut<ht.length;ut++)et.call(st,ht[ut])&&(_t[ht[ut]]=st[ht[ut]])}}return _t}},function(i,o,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(i,o,s){var _,$=s(37),et=s(173),tt=s(75),j=s(76),it=s(174);function st(wt,xt){return wt.msg=it[xt],xt}function ht(wt){return(wt<<1)-(wt>4?9:0)}function _t(wt){for(var xt=wt.length;--xt>=0;)wt[xt]=0}function gt(wt){var xt=wt.state,Nt=xt.pending;Nt>wt.avail_out&&(Nt=wt.avail_out),Nt!==0&&($.arraySet(wt.output,xt.pending_buf,xt.pending_out,Nt,wt.next_out),wt.next_out+=Nt,xt.pending_out+=Nt,wt.total_out+=Nt,wt.avail_out-=Nt,xt.pending-=Nt,xt.pending===0&&(xt.pending_out=0))}function ft(wt,xt){et._tr_flush_block(wt,wt.block_start>=0?wt.block_start:-1,wt.strstart-wt.block_start,xt),wt.block_start=wt.strstart,gt(wt.strm)}function ut(wt,xt){wt.pending_buf[wt.pending++]=xt}function yt(wt,xt){wt.pending_buf[wt.pending++]=xt>>>8&255,wt.pending_buf[wt.pending++]=255&xt}function Et(wt,xt){var Nt,Tt,Vt=wt.max_chain_length,Xt=wt.strstart,Gt=wt.prev_length,Ut=wt.nice_match,Ht=wt.strstart>wt.w_size-262?wt.strstart-(wt.w_size-262):0,qt=wt.window,Pt=wt.w_mask,St=wt.prev,Zt=wt.strstart+258,tn=qt[Xt+Gt-1],mn=qt[Xt+Gt];wt.prev_length>=wt.good_match&&(Vt>>=2),Ut>wt.lookahead&&(Ut=wt.lookahead);do if(qt[(Nt=xt)+Gt]===mn&&qt[Nt+Gt-1]===tn&&qt[Nt]===qt[Xt]&&qt[++Nt]===qt[Xt+1]){Xt+=2,Nt++;do;while(qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&Xt<Zt);if(Tt=258-(Zt-Xt),Xt=Zt-258,Tt>Gt){if(wt.match_start=xt,Gt=Tt,Tt>=Ut)break;tn=qt[Xt+Gt-1],mn=qt[Xt+Gt]}}while((xt=St[xt&Pt])>Ht&&--Vt!=0);return Gt<=wt.lookahead?Gt:wt.lookahead}function Mt(wt){var xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St=wt.w_size;do{if(Vt=wt.window_size-wt.lookahead-wt.strstart,wt.strstart>=St+(St-262)){$.arraySet(wt.window,wt.window,St,St,0),wt.match_start-=St,wt.strstart-=St,wt.block_start-=St,xt=Nt=wt.hash_size;do Tt=wt.head[--xt],wt.head[xt]=Tt>=St?Tt-St:0;while(--Nt);xt=Nt=St;do Tt=wt.prev[--xt],wt.prev[xt]=Tt>=St?Tt-St:0;while(--Nt);Vt+=St}if(wt.strm.avail_in===0)break;if(Gt=wt.strm,Ut=wt.window,Ht=wt.strstart+wt.lookahead,qt=Vt,Pt=void 0,(Pt=Gt.avail_in)>qt&&(Pt=qt),Nt=Pt===0?0:(Gt.avail_in-=Pt,$.arraySet(Ut,Gt.input,Gt.next_in,Pt,Ht),Gt.state.wrap===1?Gt.adler=tt(Gt.adler,Ut,Pt,Ht):Gt.state.wrap===2&&(Gt.adler=j(Gt.adler,Ut,Pt,Ht)),Gt.next_in+=Pt,Gt.total_in+=Pt,Pt),wt.lookahead+=Nt,wt.lookahead+wt.insert>=3)for(Xt=wt.strstart-wt.insert,wt.ins_h=wt.window[Xt],wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[Xt+1])&wt.hash_mask;wt.insert&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[Xt+3-1])&wt.hash_mask,wt.prev[Xt&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=Xt,Xt++,wt.insert--,!(wt.lookahead+wt.insert<3)););}while(wt.lookahead<262&&wt.strm.avail_in!==0)}function Ft(wt,xt){for(var Nt,Tt;;){if(wt.lookahead<262){if(Mt(wt),wt.lookahead<262&&xt===0)return 1;if(wt.lookahead===0)break}if(Nt=0,wt.lookahead>=3&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart),Nt!==0&&wt.strstart-Nt<=wt.w_size-262&&(wt.match_length=Et(wt,Nt)),wt.match_length>=3)if(Tt=et._tr_tally(wt,wt.strstart-wt.match_start,wt.match_length-3),wt.lookahead-=wt.match_length,wt.match_length<=wt.max_lazy_match&&wt.lookahead>=3){wt.match_length--;do wt.strstart++,wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart;while(--wt.match_length!=0);wt.strstart++}else wt.strstart+=wt.match_length,wt.match_length=0,wt.ins_h=wt.window[wt.strstart],wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+1])&wt.hash_mask;else Tt=et._tr_tally(wt,0,wt.window[wt.strstart]),wt.lookahead--,wt.strstart++;if(Tt&&(ft(wt,!1),wt.strm.avail_out===0))return 1}return wt.insert=wt.strstart<2?wt.strstart:2,xt===4?(ft(wt,!0),wt.strm.avail_out===0?3:4):wt.last_lit&&(ft(wt,!1),wt.strm.avail_out===0)?1:2}function Rt(wt,xt){for(var Nt,Tt,Vt;;){if(wt.lookahead<262){if(Mt(wt),wt.lookahead<262&&xt===0)return 1;if(wt.lookahead===0)break}if(Nt=0,wt.lookahead>=3&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart),wt.prev_length=wt.match_length,wt.prev_match=wt.match_start,wt.match_length=2,Nt!==0&&wt.prev_length<wt.max_lazy_match&&wt.strstart-Nt<=wt.w_size-262&&(wt.match_length=Et(wt,Nt),wt.match_length<=5&&(wt.strategy===1||wt.match_length===3&&wt.strstart-wt.match_start>4096)&&(wt.match_length=2)),wt.prev_length>=3&&wt.match_length<=wt.prev_length){Vt=wt.strstart+wt.lookahead-3,Tt=et._tr_tally(wt,wt.strstart-1-wt.prev_match,wt.prev_length-3),wt.lookahead-=wt.prev_length-1,wt.prev_length-=2;do++wt.strstart<=Vt&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart);while(--wt.prev_length!=0);if(wt.match_available=0,wt.match_length=2,wt.strstart++,Tt&&(ft(wt,!1),wt.strm.avail_out===0))return 1}else if(wt.match_available){if((Tt=et._tr_tally(wt,0,wt.window[wt.strstart-1]))&&ft(wt,!1),wt.strstart++,wt.lookahead--,wt.strm.avail_out===0)return 1}else wt.match_available=1,wt.strstart++,wt.lookahead--}return wt.match_available&&(Tt=et._tr_tally(wt,0,wt.window[wt.strstart-1]),wt.match_available=0),wt.insert=wt.strstart<2?wt.strstart:2,xt===4?(ft(wt,!0),wt.strm.avail_out===0?3:4):wt.last_lit&&(ft(wt,!1),wt.strm.avail_out===0)?1:2}function Ot(wt,xt,Nt,Tt,Vt){this.good_length=wt,this.max_lazy=xt,this.nice_length=Nt,this.max_chain=Tt,this.func=Vt}function pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new $.Buf16(1146),this.dyn_dtree=new $.Buf16(122),this.bl_tree=new $.Buf16(78),_t(this.dyn_ltree),_t(this.dyn_dtree),_t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new $.Buf16(16),this.heap=new $.Buf16(573),_t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new $.Buf16(573),_t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Lt(wt){var xt;return wt&&wt.state?(wt.total_in=wt.total_out=0,wt.data_type=2,(xt=wt.state).pending=0,xt.pending_out=0,xt.wrap<0&&(xt.wrap=-xt.wrap),xt.status=xt.wrap?42:113,wt.adler=xt.wrap===2?0:1,xt.last_flush=0,et._tr_init(xt),0):st(wt,-2)}function nn(wt){var xt,Nt=Lt(wt);return Nt===0&&((xt=wt.state).window_size=2*xt.w_size,_t(xt.head),xt.max_lazy_match=_[xt.level].max_lazy,xt.good_match=_[xt.level].good_length,xt.nice_match=_[xt.level].nice_length,xt.max_chain_length=_[xt.level].max_chain,xt.strstart=0,xt.block_start=0,xt.lookahead=0,xt.insert=0,xt.match_length=xt.prev_length=2,xt.match_available=0,xt.ins_h=0),Nt}function on(wt,xt,Nt,Tt,Vt,Xt){if(!wt)return-2;var Gt=1;if(xt===-1&&(xt=6),Tt<0?(Gt=0,Tt=-Tt):Tt>15&&(Gt=2,Tt-=16),Vt<1||Vt>9||Nt!==8||Tt<8||Tt>15||xt<0||xt>9||Xt<0||Xt>4)return st(wt,-2);Tt===8&&(Tt=9);var Ut=new pt;return wt.state=Ut,Ut.strm=wt,Ut.wrap=Gt,Ut.gzhead=null,Ut.w_bits=Tt,Ut.w_size=1<<Ut.w_bits,Ut.w_mask=Ut.w_size-1,Ut.hash_bits=Vt+7,Ut.hash_size=1<<Ut.hash_bits,Ut.hash_mask=Ut.hash_size-1,Ut.hash_shift=~~((Ut.hash_bits+3-1)/3),Ut.window=new $.Buf8(2*Ut.w_size),Ut.head=new $.Buf16(Ut.hash_size),Ut.prev=new $.Buf16(Ut.w_size),Ut.lit_bufsize=1<<Vt+6,Ut.pending_buf_size=4*Ut.lit_bufsize,Ut.pending_buf=new $.Buf8(Ut.pending_buf_size),Ut.d_buf=1*Ut.lit_bufsize,Ut.l_buf=3*Ut.lit_bufsize,Ut.level=xt,Ut.strategy=Xt,Ut.method=Nt,nn(wt)}_=[new Ot(0,0,0,0,function(wt,xt){var Nt=65535;for(Nt>wt.pending_buf_size-5&&(Nt=wt.pending_buf_size-5);;){if(wt.lookahead<=1){if(Mt(wt),wt.lookahead===0&&xt===0)return 1;if(wt.lookahead===0)break}wt.strstart+=wt.lookahead,wt.lookahead=0;var Tt=wt.block_start+Nt;if((wt.strstart===0||wt.strstart>=Tt)&&(wt.lookahead=wt.strstart-Tt,wt.strstart=Tt,ft(wt,!1),wt.strm.avail_out===0)||wt.strstart-wt.block_start>=wt.w_size-262&&(ft(wt,!1),wt.strm.avail_out===0))return 1}return wt.insert=0,xt===4?(ft(wt,!0),wt.strm.avail_out===0?3:4):(wt.strstart>wt.block_start&&(ft(wt,!1),wt.strm.avail_out),1)}),new Ot(4,4,8,4,Ft),new Ot(4,5,16,8,Ft),new Ot(4,6,32,32,Ft),new Ot(4,4,16,16,Rt),new Ot(8,16,32,32,Rt),new Ot(8,16,128,128,Rt),new Ot(8,32,128,256,Rt),new Ot(32,128,258,1024,Rt),new Ot(32,258,258,4096,Rt)],o.deflateInit=function(wt,xt){return on(wt,xt,8,15,8,0)},o.deflateInit2=on,o.deflateReset=nn,o.deflateResetKeep=Lt,o.deflateSetHeader=function(wt,xt){return wt&&wt.state?wt.state.wrap!==2?-2:(wt.state.gzhead=xt,0):-2},o.deflate=function(wt,xt){var Nt,Tt,Vt,Xt;if(!wt||!wt.state||xt>5||xt<0)return wt?st(wt,-2):-2;if(Tt=wt.state,!wt.output||!wt.input&&wt.avail_in!==0||Tt.status===666&&xt!==4)return st(wt,wt.avail_out===0?-5:-2);if(Tt.strm=wt,Nt=Tt.last_flush,Tt.last_flush=xt,Tt.status===42)if(Tt.wrap===2)wt.adler=0,ut(Tt,31),ut(Tt,139),ut(Tt,8),Tt.gzhead?(ut(Tt,(Tt.gzhead.text?1:0)+(Tt.gzhead.hcrc?2:0)+(Tt.gzhead.extra?4:0)+(Tt.gzhead.name?8:0)+(Tt.gzhead.comment?16:0)),ut(Tt,255&Tt.gzhead.time),ut(Tt,Tt.gzhead.time>>8&255),ut(Tt,Tt.gzhead.time>>16&255),ut(Tt,Tt.gzhead.time>>24&255),ut(Tt,Tt.level===9?2:Tt.strategy>=2||Tt.level<2?4:0),ut(Tt,255&Tt.gzhead.os),Tt.gzhead.extra&&Tt.gzhead.extra.length&&(ut(Tt,255&Tt.gzhead.extra.length),ut(Tt,Tt.gzhead.extra.length>>8&255)),Tt.gzhead.hcrc&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending,0)),Tt.gzindex=0,Tt.status=69):(ut(Tt,0),ut(Tt,0),ut(Tt,0),ut(Tt,0),ut(Tt,0),ut(Tt,Tt.level===9?2:Tt.strategy>=2||Tt.level<2?4:0),ut(Tt,3),Tt.status=113);else{var Gt=8+(Tt.w_bits-8<<4)<<8;Gt|=(Tt.strategy>=2||Tt.level<2?0:Tt.level<6?1:Tt.level===6?2:3)<<6,Tt.strstart!==0&&(Gt|=32),Gt+=31-Gt%31,Tt.status=113,yt(Tt,Gt),Tt.strstart!==0&&(yt(Tt,wt.adler>>>16),yt(Tt,65535&wt.adler)),wt.adler=1}if(Tt.status===69)if(Tt.gzhead.extra){for(Vt=Tt.pending;Tt.gzindex<(65535&Tt.gzhead.extra.length)&&(Tt.pending!==Tt.pending_buf_size||(Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),gt(wt),Vt=Tt.pending,Tt.pending!==Tt.pending_buf_size));)ut(Tt,255&Tt.gzhead.extra[Tt.gzindex]),Tt.gzindex++;Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),Tt.gzindex===Tt.gzhead.extra.length&&(Tt.gzindex=0,Tt.status=73)}else Tt.status=73;if(Tt.status===73)if(Tt.gzhead.name){Vt=Tt.pending;do{if(Tt.pending===Tt.pending_buf_size&&(Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),gt(wt),Vt=Tt.pending,Tt.pending===Tt.pending_buf_size)){Xt=1;break}Xt=Tt.gzindex<Tt.gzhead.name.length?255&Tt.gzhead.name.charCodeAt(Tt.gzindex++):0,ut(Tt,Xt)}while(Xt!==0);Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),Xt===0&&(Tt.gzindex=0,Tt.status=91)}else Tt.status=91;if(Tt.status===91)if(Tt.gzhead.comment){Vt=Tt.pending;do{if(Tt.pending===Tt.pending_buf_size&&(Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),gt(wt),Vt=Tt.pending,Tt.pending===Tt.pending_buf_size)){Xt=1;break}Xt=Tt.gzindex<Tt.gzhead.comment.length?255&Tt.gzhead.comment.charCodeAt(Tt.gzindex++):0,ut(Tt,Xt)}while(Xt!==0);Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),Xt===0&&(Tt.status=103)}else Tt.status=103;if(Tt.status===103&&(Tt.gzhead.hcrc?(Tt.pending+2>Tt.pending_buf_size&&gt(wt),Tt.pending+2<=Tt.pending_buf_size&&(ut(Tt,255&wt.adler),ut(Tt,wt.adler>>8&255),wt.adler=0,Tt.status=113)):Tt.status=113),Tt.pending!==0){if(gt(wt),wt.avail_out===0)return Tt.last_flush=-1,0}else if(wt.avail_in===0&&ht(xt)<=ht(Nt)&&xt!==4)return st(wt,-5);if(Tt.status===666&&wt.avail_in!==0)return st(wt,-5);if(wt.avail_in!==0||Tt.lookahead!==0||xt!==0&&Tt.status!==666){var Ut=Tt.strategy===2?function(Ht,qt){for(var Pt;;){if(Ht.lookahead===0&&(Mt(Ht),Ht.lookahead===0)){if(qt===0)return 1;break}if(Ht.match_length=0,Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++,Pt&&(ft(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(ft(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(ft(Ht,!1),Ht.strm.avail_out===0)?1:2}(Tt,xt):Tt.strategy===3?function(Ht,qt){for(var Pt,St,Zt,tn,mn=Ht.window;;){if(Ht.lookahead<=258){if(Mt(Ht),Ht.lookahead<=258&&qt===0)return 1;if(Ht.lookahead===0)break}if(Ht.match_length=0,Ht.lookahead>=3&&Ht.strstart>0&&(St=mn[Zt=Ht.strstart-1])===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]){tn=Ht.strstart+258;do;while(St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&Zt<tn);Ht.match_length=258-(tn-Zt),Ht.match_length>Ht.lookahead&&(Ht.match_length=Ht.lookahead)}if(Ht.match_length>=3?(Pt=et._tr_tally(Ht,1,Ht.match_length-3),Ht.lookahead-=Ht.match_length,Ht.strstart+=Ht.match_length,Ht.match_length=0):(Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++),Pt&&(ft(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(ft(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(ft(Ht,!1),Ht.strm.avail_out===0)?1:2}(Tt,xt):_[Tt.level].func(Tt,xt);if(Ut!==3&&Ut!==4||(Tt.status=666),Ut===1||Ut===3)return wt.avail_out===0&&(Tt.last_flush=-1),0;if(Ut===2&&(xt===1?et._tr_align(Tt):xt!==5&&(et._tr_stored_block(Tt,0,0,!1),xt===3&&(_t(Tt.head),Tt.lookahead===0&&(Tt.strstart=0,Tt.block_start=0,Tt.insert=0))),gt(wt),wt.avail_out===0))return Tt.last_flush=-1,0}return xt!==4?0:Tt.wrap<=0?1:(Tt.wrap===2?(ut(Tt,255&wt.adler),ut(Tt,wt.adler>>8&255),ut(Tt,wt.adler>>16&255),ut(Tt,wt.adler>>24&255),ut(Tt,255&wt.total_in),ut(Tt,wt.total_in>>8&255),ut(Tt,wt.total_in>>16&255),ut(Tt,wt.total_in>>24&255)):(yt(Tt,wt.adler>>>16),yt(Tt,65535&wt.adler)),gt(wt),Tt.wrap>0&&(Tt.wrap=-Tt.wrap),Tt.pending!==0?0:1)},o.deflateEnd=function(wt){var xt;return wt&&wt.state?(xt=wt.state.status)!==42&&xt!==69&&xt!==73&&xt!==91&&xt!==103&&xt!==113&&xt!==666?st(wt,-2):(wt.state=null,xt===113?st(wt,-3):0):-2},o.deflateSetDictionary=function(wt,xt){var Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt=xt.length;if(!wt||!wt.state||(Xt=(Nt=wt.state).wrap)===2||Xt===1&&Nt.status!==42||Nt.lookahead)return-2;for(Xt===1&&(wt.adler=tt(wt.adler,xt,Pt,0)),Nt.wrap=0,Pt>=Nt.w_size&&(Xt===0&&(_t(Nt.head),Nt.strstart=0,Nt.block_start=0,Nt.insert=0),qt=new $.Buf8(Nt.w_size),$.arraySet(qt,xt,Pt-Nt.w_size,Nt.w_size,0),xt=qt,Pt=Nt.w_size),Gt=wt.avail_in,Ut=wt.next_in,Ht=wt.input,wt.avail_in=Pt,wt.next_in=0,wt.input=xt,Mt(Nt);Nt.lookahead>=3;){Tt=Nt.strstart,Vt=Nt.lookahead-2;do Nt.ins_h=(Nt.ins_h<<Nt.hash_shift^Nt.window[Tt+3-1])&Nt.hash_mask,Nt.prev[Tt&Nt.w_mask]=Nt.head[Nt.ins_h],Nt.head[Nt.ins_h]=Tt,Tt++;while(--Vt);Nt.strstart=Tt,Nt.lookahead=2,Mt(Nt)}return Nt.strstart+=Nt.lookahead,Nt.block_start=Nt.strstart,Nt.insert=Nt.lookahead,Nt.lookahead=0,Nt.match_length=Nt.prev_length=2,Nt.match_available=0,wt.next_in=Ut,wt.input=Ht,wt.avail_in=Gt,Nt.wrap=Xt,0},o.deflateInfo="pako deflate (from Nodeca project)"},function(i,o,s){var _=s(37);function $(St){for(var Zt=St.length;--Zt>=0;)St[Zt]=0}var et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=new Array(576);$(st);var ht=new Array(60);$(ht);var _t=new Array(512);$(_t);var gt=new Array(256);$(gt);var ft=new Array(29);$(ft);var ut,yt,Et,Mt=new Array(30);function Ft(St,Zt,tn,mn,yn){this.static_tree=St,this.extra_bits=Zt,this.extra_base=tn,this.elems=mn,this.max_length=yn,this.has_stree=St&&St.length}function Rt(St,Zt){this.dyn_tree=St,this.max_code=0,this.stat_desc=Zt}function Ot(St){return St<256?_t[St]:_t[256+(St>>>7)]}function pt(St,Zt){St.pending_buf[St.pending++]=255&Zt,St.pending_buf[St.pending++]=Zt>>>8&255}function Lt(St,Zt,tn){St.bi_valid>16-tn?(St.bi_buf|=Zt<<St.bi_valid&65535,pt(St,St.bi_buf),St.bi_buf=Zt>>16-St.bi_valid,St.bi_valid+=tn-16):(St.bi_buf|=Zt<<St.bi_valid&65535,St.bi_valid+=tn)}function nn(St,Zt,tn){Lt(St,tn[2*Zt],tn[2*Zt+1])}function on(St,Zt){var tn=0;do tn|=1&St,St>>>=1,tn<<=1;while(--Zt>0);return tn>>>1}function wt(St,Zt,tn){var mn,yn,vn=new Array(16),un=0;for(mn=1;mn<=15;mn++)vn[mn]=un=un+tn[mn-1]<<1;for(yn=0;yn<=Zt;yn++){var rn=St[2*yn+1];rn!==0&&(St[2*yn]=on(vn[rn]++,rn))}}function xt(St){var Zt;for(Zt=0;Zt<286;Zt++)St.dyn_ltree[2*Zt]=0;for(Zt=0;Zt<30;Zt++)St.dyn_dtree[2*Zt]=0;for(Zt=0;Zt<19;Zt++)St.bl_tree[2*Zt]=0;St.dyn_ltree[512]=1,St.opt_len=St.static_len=0,St.last_lit=St.matches=0}function Nt(St){St.bi_valid>8?pt(St,St.bi_buf):St.bi_valid>0&&(St.pending_buf[St.pending++]=St.bi_buf),St.bi_buf=0,St.bi_valid=0}function Tt(St,Zt,tn,mn){var yn=2*Zt,vn=2*tn;return St[yn]<St[vn]||St[yn]===St[vn]&&mn[Zt]<=mn[tn]}function Vt(St,Zt,tn){for(var mn=St.heap[tn],yn=tn<<1;yn<=St.heap_len&&(yn<St.heap_len&&Tt(Zt,St.heap[yn+1],St.heap[yn],St.depth)&&yn++,!Tt(Zt,mn,St.heap[yn],St.depth));)St.heap[tn]=St.heap[yn],tn=yn,yn<<=1;St.heap[tn]=mn}function Xt(St,Zt,tn){var mn,yn,vn,un,rn=0;if(St.last_lit!==0)do mn=St.pending_buf[St.d_buf+2*rn]<<8|St.pending_buf[St.d_buf+2*rn+1],yn=St.pending_buf[St.l_buf+rn],rn++,mn===0?nn(St,yn,Zt):(nn(St,(vn=gt[yn])+256+1,Zt),(un=et[vn])!==0&&Lt(St,yn-=ft[vn],un),nn(St,vn=Ot(--mn),tn),(un=tt[vn])!==0&&Lt(St,mn-=Mt[vn],un));while(rn<St.last_lit);nn(St,256,Zt)}function Gt(St,Zt){var tn,mn,yn,vn=Zt.dyn_tree,un=Zt.stat_desc.static_tree,rn=Zt.stat_desc.has_stree,It=Zt.stat_desc.elems,Dt=-1;for(St.heap_len=0,St.heap_max=573,tn=0;tn<It;tn++)vn[2*tn]!==0?(St.heap[++St.heap_len]=Dt=tn,St.depth[tn]=0):vn[2*tn+1]=0;for(;St.heap_len<2;)vn[2*(yn=St.heap[++St.heap_len]=Dt<2?++Dt:0)]=1,St.depth[yn]=0,St.opt_len--,rn&&(St.static_len-=un[2*yn+1]);for(Zt.max_code=Dt,tn=St.heap_len>>1;tn>=1;tn--)Vt(St,vn,tn);yn=It;do tn=St.heap[1],St.heap[1]=St.heap[St.heap_len--],Vt(St,vn,1),mn=St.heap[1],St.heap[--St.heap_max]=tn,St.heap[--St.heap_max]=mn,vn[2*yn]=vn[2*tn]+vn[2*mn],St.depth[yn]=(St.depth[tn]>=St.depth[mn]?St.depth[tn]:St.depth[mn])+1,vn[2*tn+1]=vn[2*mn+1]=yn,St.heap[1]=yn++,Vt(St,vn,1);while(St.heap_len>=2);St.heap[--St.heap_max]=St.heap[1],function(Kt,gn){var hn,xn,Mn,qn,Ir,_i,Ur=gn.dyn_tree,fo=gn.max_code,Gr=gn.stat_desc.static_tree,Yr=gn.stat_desc.has_stree,to=gn.stat_desc.extra_bits,Ro=gn.stat_desc.extra_base,Mo=gn.stat_desc.max_length,Vo=0;for(qn=0;qn<=15;qn++)Kt.bl_count[qn]=0;for(Ur[2*Kt.heap[Kt.heap_max]+1]=0,hn=Kt.heap_max+1;hn<573;hn++)(qn=Ur[2*Ur[2*(xn=Kt.heap[hn])+1]+1]+1)>Mo&&(qn=Mo,Vo++),Ur[2*xn+1]=qn,xn>fo||(Kt.bl_count[qn]++,Ir=0,xn>=Ro&&(Ir=to[xn-Ro]),_i=Ur[2*xn],Kt.opt_len+=_i*(qn+Ir),Yr&&(Kt.static_len+=_i*(Gr[2*xn+1]+Ir)));if(Vo!==0){do{for(qn=Mo-1;Kt.bl_count[qn]===0;)qn--;Kt.bl_count[qn]--,Kt.bl_count[qn+1]+=2,Kt.bl_count[Mo]--,Vo-=2}while(Vo>0);for(qn=Mo;qn!==0;qn--)for(xn=Kt.bl_count[qn];xn!==0;)(Mn=Kt.heap[--hn])>fo||(Ur[2*Mn+1]!==qn&&(Kt.opt_len+=(qn-Ur[2*Mn+1])*Ur[2*Mn],Ur[2*Mn+1]=qn),xn--)}}(St,Zt),wt(vn,Dt,St.bl_count)}function Ut(St,Zt,tn){var mn,yn,vn=-1,un=Zt[1],rn=0,It=7,Dt=4;for(un===0&&(It=138,Dt=3),Zt[2*(tn+1)+1]=65535,mn=0;mn<=tn;mn++)yn=un,un=Zt[2*(mn+1)+1],++rn<It&&yn===un||(rn<Dt?St.bl_tree[2*yn]+=rn:yn!==0?(yn!==vn&&St.bl_tree[2*yn]++,St.bl_tree[32]++):rn<=10?St.bl_tree[34]++:St.bl_tree[36]++,rn=0,vn=yn,un===0?(It=138,Dt=3):yn===un?(It=6,Dt=3):(It=7,Dt=4))}function Ht(St,Zt,tn){var mn,yn,vn=-1,un=Zt[1],rn=0,It=7,Dt=4;for(un===0&&(It=138,Dt=3),mn=0;mn<=tn;mn++)if(yn=un,un=Zt[2*(mn+1)+1],!(++rn<It&&yn===un)){if(rn<Dt)do nn(St,yn,St.bl_tree);while(--rn!=0);else yn!==0?(yn!==vn&&(nn(St,yn,St.bl_tree),rn--),nn(St,16,St.bl_tree),Lt(St,rn-3,2)):rn<=10?(nn(St,17,St.bl_tree),Lt(St,rn-3,3)):(nn(St,18,St.bl_tree),Lt(St,rn-11,7));rn=0,vn=yn,un===0?(It=138,Dt=3):yn===un?(It=6,Dt=3):(It=7,Dt=4)}}$(Mt);var qt=!1;function Pt(St,Zt,tn,mn){Lt(St,0+(mn?1:0),3),function(yn,vn,un,rn){Nt(yn),rn&&(pt(yn,un),pt(yn,~un)),_.arraySet(yn.pending_buf,yn.window,vn,un,yn.pending),yn.pending+=un}(St,Zt,tn,!0)}o._tr_init=function(St){qt||(function(){var Zt,tn,mn,yn,vn,un=new Array(16);for(mn=0,yn=0;yn<28;yn++)for(ft[yn]=mn,Zt=0;Zt<1<<et[yn];Zt++)gt[mn++]=yn;for(gt[mn-1]=yn,vn=0,yn=0;yn<16;yn++)for(Mt[yn]=vn,Zt=0;Zt<1<<tt[yn];Zt++)_t[vn++]=yn;for(vn>>=7;yn<30;yn++)for(Mt[yn]=vn<<7,Zt=0;Zt<1<<tt[yn]-7;Zt++)_t[256+vn++]=yn;for(tn=0;tn<=15;tn++)un[tn]=0;for(Zt=0;Zt<=143;)st[2*Zt+1]=8,Zt++,un[8]++;for(;Zt<=255;)st[2*Zt+1]=9,Zt++,un[9]++;for(;Zt<=279;)st[2*Zt+1]=7,Zt++,un[7]++;for(;Zt<=287;)st[2*Zt+1]=8,Zt++,un[8]++;for(wt(st,287,un),Zt=0;Zt<30;Zt++)ht[2*Zt+1]=5,ht[2*Zt]=on(Zt,5);ut=new Ft(st,et,257,286,15),yt=new Ft(ht,tt,0,30,15),Et=new Ft(new Array(0),j,0,19,7)}(),qt=!0),St.l_desc=new Rt(St.dyn_ltree,ut),St.d_desc=new Rt(St.dyn_dtree,yt),St.bl_desc=new Rt(St.bl_tree,Et),St.bi_buf=0,St.bi_valid=0,xt(St)},o._tr_stored_block=Pt,o._tr_flush_block=function(St,Zt,tn,mn){var yn,vn,un=0;St.level>0?(St.strm.data_type===2&&(St.strm.data_type=function(rn){var It,Dt=4093624447;for(It=0;It<=31;It++,Dt>>>=1)if(1&Dt&&rn.dyn_ltree[2*It]!==0)return 0;if(rn.dyn_ltree[18]!==0||rn.dyn_ltree[20]!==0||rn.dyn_ltree[26]!==0)return 1;for(It=32;It<256;It++)if(rn.dyn_ltree[2*It]!==0)return 1;return 0}(St)),Gt(St,St.l_desc),Gt(St,St.d_desc),un=function(rn){var It;for(Ut(rn,rn.dyn_ltree,rn.l_desc.max_code),Ut(rn,rn.dyn_dtree,rn.d_desc.max_code),Gt(rn,rn.bl_desc),It=18;It>=3&&rn.bl_tree[2*it[It]+1]===0;It--);return rn.opt_len+=3*(It+1)+5+5+4,It}(St),yn=St.opt_len+3+7>>>3,(vn=St.static_len+3+7>>>3)<=yn&&(yn=vn)):yn=vn=tn+5,tn+4<=yn&&Zt!==-1?Pt(St,Zt,tn,mn):St.strategy===4||vn===yn?(Lt(St,2+(mn?1:0),3),Xt(St,st,ht)):(Lt(St,4+(mn?1:0),3),function(rn,It,Dt,Kt){var gn;for(Lt(rn,It-257,5),Lt(rn,Dt-1,5),Lt(rn,Kt-4,4),gn=0;gn<Kt;gn++)Lt(rn,rn.bl_tree[2*it[gn]+1],3);Ht(rn,rn.dyn_ltree,It-1),Ht(rn,rn.dyn_dtree,Dt-1)}(St,St.l_desc.max_code+1,St.d_desc.max_code+1,un+1),Xt(St,St.dyn_ltree,St.dyn_dtree)),xt(St),mn&&Nt(St)},o._tr_tally=function(St,Zt,tn){return St.pending_buf[St.d_buf+2*St.last_lit]=Zt>>>8&255,St.pending_buf[St.d_buf+2*St.last_lit+1]=255&Zt,St.pending_buf[St.l_buf+St.last_lit]=255&tn,St.last_lit++,Zt===0?St.dyn_ltree[2*tn]++:(St.matches++,Zt--,St.dyn_ltree[2*(gt[tn]+256+1)]++,St.dyn_dtree[2*Ot(Zt)]++),St.last_lit===St.lit_bufsize-1},o._tr_align=function(St){Lt(St,2,3),nn(St,256,st),function(Zt){Zt.bi_valid===16?(pt(Zt,Zt.bi_buf),Zt.bi_buf=0,Zt.bi_valid=0):Zt.bi_valid>=8&&(Zt.pending_buf[Zt.pending++]=255&Zt.bi_buf,Zt.bi_buf>>=8,Zt.bi_valid-=8)}(St)}},function(i,o,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(i,o,s){var _=s(37),$=s(75),et=s(76),tt=s(176),j=s(177);function it(Rt){return(Rt>>>24&255)+(Rt>>>8&65280)+((65280&Rt)<<8)+((255&Rt)<<24)}function st(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ht(Rt){var Ot;return Rt&&Rt.state?(Ot=Rt.state,Rt.total_in=Rt.total_out=Ot.total=0,Rt.msg="",Ot.wrap&&(Rt.adler=1&Ot.wrap),Ot.mode=1,Ot.last=0,Ot.havedict=0,Ot.dmax=32768,Ot.head=null,Ot.hold=0,Ot.bits=0,Ot.lencode=Ot.lendyn=new _.Buf32(852),Ot.distcode=Ot.distdyn=new _.Buf32(592),Ot.sane=1,Ot.back=-1,0):-2}function _t(Rt){var Ot;return Rt&&Rt.state?((Ot=Rt.state).wsize=0,Ot.whave=0,Ot.wnext=0,ht(Rt)):-2}function gt(Rt,Ot){var pt,Lt;return Rt&&Rt.state?(Lt=Rt.state,Ot<0?(pt=0,Ot=-Ot):(pt=1+(Ot>>4),Ot<48&&(Ot&=15)),Ot&&(Ot<8||Ot>15)?-2:(Lt.window!==null&&Lt.wbits!==Ot&&(Lt.window=null),Lt.wrap=pt,Lt.wbits=Ot,_t(Rt))):-2}function ft(Rt,Ot){var pt,Lt;return Rt?(Lt=new st,Rt.state=Lt,Lt.window=null,(pt=gt(Rt,Ot))!==0&&(Rt.state=null),pt):-2}var ut,yt,Et=!0;function Mt(Rt){if(Et){var Ot;for(ut=new _.Buf32(512),yt=new _.Buf32(32),Ot=0;Ot<144;)Rt.lens[Ot++]=8;for(;Ot<256;)Rt.lens[Ot++]=9;for(;Ot<280;)Rt.lens[Ot++]=7;for(;Ot<288;)Rt.lens[Ot++]=8;for(j(1,Rt.lens,0,288,ut,0,Rt.work,{bits:9}),Ot=0;Ot<32;)Rt.lens[Ot++]=5;j(2,Rt.lens,0,32,yt,0,Rt.work,{bits:5}),Et=!1}Rt.lencode=ut,Rt.lenbits=9,Rt.distcode=yt,Rt.distbits=5}function Ft(Rt,Ot,pt,Lt){var nn,on=Rt.state;return on.window===null&&(on.wsize=1<<on.wbits,on.wnext=0,on.whave=0,on.window=new _.Buf8(on.wsize)),Lt>=on.wsize?(_.arraySet(on.window,Ot,pt-on.wsize,on.wsize,0),on.wnext=0,on.whave=on.wsize):((nn=on.wsize-on.wnext)>Lt&&(nn=Lt),_.arraySet(on.window,Ot,pt-Lt,nn,on.wnext),(Lt-=nn)?(_.arraySet(on.window,Ot,pt-Lt,Lt,0),on.wnext=Lt,on.whave=on.wsize):(on.wnext+=nn,on.wnext===on.wsize&&(on.wnext=0),on.whave<on.wsize&&(on.whave+=nn))),0}o.inflateReset=_t,o.inflateReset2=gt,o.inflateResetKeep=ht,o.inflateInit=function(Rt){return ft(Rt,15)},o.inflateInit2=ft,o.inflate=function(Rt,Ot){var pt,Lt,nn,on,wt,xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St,Zt,tn,mn,yn,vn,un,rn,It,Dt=0,Kt=new _.Buf8(4),gn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Rt||!Rt.state||!Rt.output||!Rt.input&&Rt.avail_in!==0)return-2;(pt=Rt.state).mode===12&&(pt.mode=13),wt=Rt.next_out,nn=Rt.output,Nt=Rt.avail_out,on=Rt.next_in,Lt=Rt.input,xt=Rt.avail_in,Tt=pt.hold,Vt=pt.bits,Xt=xt,Gt=Nt,un=0;e:for(;;)switch(pt.mode){case 1:if(pt.wrap===0){pt.mode=13;break}for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(2&pt.wrap&&Tt===35615){pt.check=0,Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0),Tt=0,Vt=0,pt.mode=2;break}if(pt.flags=0,pt.head&&(pt.head.done=!1),!(1&pt.wrap)||(((255&Tt)<<8)+(Tt>>8))%31){Rt.msg="incorrect header check",pt.mode=30;break}if((15&Tt)!=8){Rt.msg="unknown compression method",pt.mode=30;break}if(Vt-=4,vn=8+(15&(Tt>>>=4)),pt.wbits===0)pt.wbits=vn;else if(vn>pt.wbits){Rt.msg="invalid window size",pt.mode=30;break}pt.dmax=1<<vn,Rt.adler=pt.check=1,pt.mode=512&Tt?10:12,Tt=0,Vt=0;break;case 2:for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(pt.flags=Tt,(255&pt.flags)!=8){Rt.msg="unknown compression method",pt.mode=30;break}if(57344&pt.flags){Rt.msg="unknown header flags set",pt.mode=30;break}pt.head&&(pt.head.text=Tt>>8&1),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0)),Tt=0,Vt=0,pt.mode=3;case 3:for(;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.head&&(pt.head.time=Tt),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,Kt[2]=Tt>>>16&255,Kt[3]=Tt>>>24&255,pt.check=et(pt.check,Kt,4,0)),Tt=0,Vt=0,pt.mode=4;case 4:for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.head&&(pt.head.xflags=255&Tt,pt.head.os=Tt>>8),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0)),Tt=0,Vt=0,pt.mode=5;case 5:if(1024&pt.flags){for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.length=Tt,pt.head&&(pt.head.extra_len=Tt),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0)),Tt=0,Vt=0}else pt.head&&(pt.head.extra=null);pt.mode=6;case 6:if(1024&pt.flags&&((Ut=pt.length)>xt&&(Ut=xt),Ut&&(pt.head&&(vn=pt.head.extra_len-pt.length,pt.head.extra||(pt.head.extra=new Array(pt.head.extra_len)),_.arraySet(pt.head.extra,Lt,on,Ut,vn)),512&pt.flags&&(pt.check=et(pt.check,Lt,Ut,on)),xt-=Ut,on+=Ut,pt.length-=Ut),pt.length))break e;pt.length=0,pt.mode=7;case 7:if(2048&pt.flags){if(xt===0)break e;Ut=0;do vn=Lt[on+Ut++],pt.head&&vn&&pt.length<65536&&(pt.head.name+=String.fromCharCode(vn));while(vn&&Ut<xt);if(512&pt.flags&&(pt.check=et(pt.check,Lt,Ut,on)),xt-=Ut,on+=Ut,vn)break e}else pt.head&&(pt.head.name=null);pt.length=0,pt.mode=8;case 8:if(4096&pt.flags){if(xt===0)break e;Ut=0;do vn=Lt[on+Ut++],pt.head&&vn&&pt.length<65536&&(pt.head.comment+=String.fromCharCode(vn));while(vn&&Ut<xt);if(512&pt.flags&&(pt.check=et(pt.check,Lt,Ut,on)),xt-=Ut,on+=Ut,vn)break e}else pt.head&&(pt.head.comment=null);pt.mode=9;case 9:if(512&pt.flags){for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Tt!==(65535&pt.check)){Rt.msg="header crc mismatch",pt.mode=30;break}Tt=0,Vt=0}pt.head&&(pt.head.hcrc=pt.flags>>9&1,pt.head.done=!0),Rt.adler=pt.check=0,pt.mode=12;break;case 10:for(;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Rt.adler=pt.check=it(Tt),Tt=0,Vt=0,pt.mode=11;case 11:if(pt.havedict===0)return Rt.next_out=wt,Rt.avail_out=Nt,Rt.next_in=on,Rt.avail_in=xt,pt.hold=Tt,pt.bits=Vt,2;Rt.adler=pt.check=1,pt.mode=12;case 12:if(Ot===5||Ot===6)break e;case 13:if(pt.last){Tt>>>=7&Vt,Vt-=7&Vt,pt.mode=27;break}for(;Vt<3;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}switch(pt.last=1&Tt,Vt-=1,3&(Tt>>>=1)){case 0:pt.mode=14;break;case 1:if(Mt(pt),pt.mode=20,Ot===6){Tt>>>=2,Vt-=2;break e}break;case 2:pt.mode=17;break;case 3:Rt.msg="invalid block type",pt.mode=30}Tt>>>=2,Vt-=2;break;case 14:for(Tt>>>=7&Vt,Vt-=7&Vt;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if((65535&Tt)!=(Tt>>>16^65535)){Rt.msg="invalid stored block lengths",pt.mode=30;break}if(pt.length=65535&Tt,Tt=0,Vt=0,pt.mode=15,Ot===6)break e;case 15:pt.mode=16;case 16:if(Ut=pt.length){if(Ut>xt&&(Ut=xt),Ut>Nt&&(Ut=Nt),Ut===0)break e;_.arraySet(nn,Lt,on,Ut,wt),xt-=Ut,on+=Ut,Nt-=Ut,wt+=Ut,pt.length-=Ut;break}pt.mode=12;break;case 17:for(;Vt<14;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(pt.nlen=257+(31&Tt),Tt>>>=5,Vt-=5,pt.ndist=1+(31&Tt),Tt>>>=5,Vt-=5,pt.ncode=4+(15&Tt),Tt>>>=4,Vt-=4,pt.nlen>286||pt.ndist>30){Rt.msg="too many length or distance symbols",pt.mode=30;break}pt.have=0,pt.mode=18;case 18:for(;pt.have<pt.ncode;){for(;Vt<3;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.lens[gn[pt.have++]]=7&Tt,Tt>>>=3,Vt-=3}for(;pt.have<19;)pt.lens[gn[pt.have++]]=0;if(pt.lencode=pt.lendyn,pt.lenbits=7,rn={bits:pt.lenbits},un=j(0,pt.lens,0,19,pt.lencode,0,pt.work,rn),pt.lenbits=rn.bits,un){Rt.msg="invalid code lengths set",pt.mode=30;break}pt.have=0,pt.mode=19;case 19:for(;pt.have<pt.nlen+pt.ndist;){for(;St=(Dt=pt.lencode[Tt&(1<<pt.lenbits)-1])>>>16&255,Zt=65535&Dt,!((Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Zt<16)Tt>>>=Pt,Vt-=Pt,pt.lens[pt.have++]=Zt;else{if(Zt===16){for(It=Pt+2;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Tt>>>=Pt,Vt-=Pt,pt.have===0){Rt.msg="invalid bit length repeat",pt.mode=30;break}vn=pt.lens[pt.have-1],Ut=3+(3&Tt),Tt>>>=2,Vt-=2}else if(Zt===17){for(It=Pt+3;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Vt-=Pt,vn=0,Ut=3+(7&(Tt>>>=Pt)),Tt>>>=3,Vt-=3}else{for(It=Pt+7;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Vt-=Pt,vn=0,Ut=11+(127&(Tt>>>=Pt)),Tt>>>=7,Vt-=7}if(pt.have+Ut>pt.nlen+pt.ndist){Rt.msg="invalid bit length repeat",pt.mode=30;break}for(;Ut--;)pt.lens[pt.have++]=vn}}if(pt.mode===30)break;if(pt.lens[256]===0){Rt.msg="invalid code -- missing end-of-block",pt.mode=30;break}if(pt.lenbits=9,rn={bits:pt.lenbits},un=j(1,pt.lens,0,pt.nlen,pt.lencode,0,pt.work,rn),pt.lenbits=rn.bits,un){Rt.msg="invalid literal/lengths set",pt.mode=30;break}if(pt.distbits=6,pt.distcode=pt.distdyn,rn={bits:pt.distbits},un=j(2,pt.lens,pt.nlen,pt.ndist,pt.distcode,0,pt.work,rn),pt.distbits=rn.bits,un){Rt.msg="invalid distances set",pt.mode=30;break}if(pt.mode=20,Ot===6)break e;case 20:pt.mode=21;case 21:if(xt>=6&&Nt>=258){Rt.next_out=wt,Rt.avail_out=Nt,Rt.next_in=on,Rt.avail_in=xt,pt.hold=Tt,pt.bits=Vt,tt(Rt,Gt),wt=Rt.next_out,nn=Rt.output,Nt=Rt.avail_out,on=Rt.next_in,Lt=Rt.input,xt=Rt.avail_in,Tt=pt.hold,Vt=pt.bits,pt.mode===12&&(pt.back=-1);break}for(pt.back=0;St=(Dt=pt.lencode[Tt&(1<<pt.lenbits)-1])>>>16&255,Zt=65535&Dt,!((Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(St&&!(240&St)){for(tn=Pt,mn=St,yn=Zt;St=(Dt=pt.lencode[yn+((Tt&(1<<tn+mn)-1)>>tn)])>>>16&255,Zt=65535&Dt,!(tn+(Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Tt>>>=tn,Vt-=tn,pt.back+=tn}if(Tt>>>=Pt,Vt-=Pt,pt.back+=Pt,pt.length=Zt,St===0){pt.mode=26;break}if(32&St){pt.back=-1,pt.mode=12;break}if(64&St){Rt.msg="invalid literal/length code",pt.mode=30;break}pt.extra=15&St,pt.mode=22;case 22:if(pt.extra){for(It=pt.extra;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.length+=Tt&(1<<pt.extra)-1,Tt>>>=pt.extra,Vt-=pt.extra,pt.back+=pt.extra}pt.was=pt.length,pt.mode=23;case 23:for(;St=(Dt=pt.distcode[Tt&(1<<pt.distbits)-1])>>>16&255,Zt=65535&Dt,!((Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(!(240&St)){for(tn=Pt,mn=St,yn=Zt;St=(Dt=pt.distcode[yn+((Tt&(1<<tn+mn)-1)>>tn)])>>>16&255,Zt=65535&Dt,!(tn+(Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Tt>>>=tn,Vt-=tn,pt.back+=tn}if(Tt>>>=Pt,Vt-=Pt,pt.back+=Pt,64&St){Rt.msg="invalid distance code",pt.mode=30;break}pt.offset=Zt,pt.extra=15&St,pt.mode=24;case 24:if(pt.extra){for(It=pt.extra;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.offset+=Tt&(1<<pt.extra)-1,Tt>>>=pt.extra,Vt-=pt.extra,pt.back+=pt.extra}if(pt.offset>pt.dmax){Rt.msg="invalid distance too far back",pt.mode=30;break}pt.mode=25;case 25:if(Nt===0)break e;if(Ut=Gt-Nt,pt.offset>Ut){if((Ut=pt.offset-Ut)>pt.whave&&pt.sane){Rt.msg="invalid distance too far back",pt.mode=30;break}Ut>pt.wnext?(Ut-=pt.wnext,Ht=pt.wsize-Ut):Ht=pt.wnext-Ut,Ut>pt.length&&(Ut=pt.length),qt=pt.window}else qt=nn,Ht=wt-pt.offset,Ut=pt.length;Ut>Nt&&(Ut=Nt),Nt-=Ut,pt.length-=Ut;do nn[wt++]=qt[Ht++];while(--Ut);pt.length===0&&(pt.mode=21);break;case 26:if(Nt===0)break e;nn[wt++]=pt.length,Nt--,pt.mode=21;break;case 27:if(pt.wrap){for(;Vt<32;){if(xt===0)break e;xt--,Tt|=Lt[on++]<<Vt,Vt+=8}if(Gt-=Nt,Rt.total_out+=Gt,pt.total+=Gt,Gt&&(Rt.adler=pt.check=pt.flags?et(pt.check,nn,Gt,wt-Gt):$(pt.check,nn,Gt,wt-Gt)),Gt=Nt,(pt.flags?Tt:it(Tt))!==pt.check){Rt.msg="incorrect data check",pt.mode=30;break}Tt=0,Vt=0}pt.mode=28;case 28:if(pt.wrap&&pt.flags){for(;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Tt!==(4294967295&pt.total)){Rt.msg="incorrect length check",pt.mode=30;break}Tt=0,Vt=0}pt.mode=29;case 29:un=1;break e;case 30:un=-3;break e;case 31:return-4;case 32:default:return-2}return Rt.next_out=wt,Rt.avail_out=Nt,Rt.next_in=on,Rt.avail_in=xt,pt.hold=Tt,pt.bits=Vt,(pt.wsize||Gt!==Rt.avail_out&&pt.mode<30&&(pt.mode<27||Ot!==4))&&Ft(Rt,Rt.output,Rt.next_out,Gt-Rt.avail_out)?(pt.mode=31,-4):(Xt-=Rt.avail_in,Gt-=Rt.avail_out,Rt.total_in+=Xt,Rt.total_out+=Gt,pt.total+=Gt,pt.wrap&&Gt&&(Rt.adler=pt.check=pt.flags?et(pt.check,nn,Gt,Rt.next_out-Gt):$(pt.check,nn,Gt,Rt.next_out-Gt)),Rt.data_type=pt.bits+(pt.last?64:0)+(pt.mode===12?128:0)+(pt.mode===20||pt.mode===15?256:0),(Xt===0&&Gt===0||Ot===4)&&un===0&&(un=-5),un)},o.inflateEnd=function(Rt){if(!Rt||!Rt.state)return-2;var Ot=Rt.state;return Ot.window&&(Ot.window=null),Rt.state=null,0},o.inflateGetHeader=function(Rt,Ot){var pt;return Rt&&Rt.state&&2&(pt=Rt.state).wrap?(pt.head=Ot,Ot.done=!1,0):-2},o.inflateSetDictionary=function(Rt,Ot){var pt,Lt=Ot.length;return Rt&&Rt.state?(pt=Rt.state).wrap!==0&&pt.mode!==11?-2:pt.mode===11&&$(1,Ot,Lt,0)!==pt.check?-3:Ft(Rt,Ot,Lt,Lt)?(pt.mode=31,-4):(pt.havedict=1,0):-2},o.inflateInfo="pako inflate (from Nodeca project)"},function(i,o,s){i.exports=function(_,$){var et,tt,j,it,st,ht,_t,gt,ft,ut,yt,Et,Mt,Ft,Rt,Ot,pt,Lt,nn,on,wt,xt,Nt,Tt,Vt;et=_.state,tt=_.next_in,Tt=_.input,j=tt+(_.avail_in-5),it=_.next_out,Vt=_.output,st=it-($-_.avail_out),ht=it+(_.avail_out-257),_t=et.dmax,gt=et.wsize,ft=et.whave,ut=et.wnext,yt=et.window,Et=et.hold,Mt=et.bits,Ft=et.lencode,Rt=et.distcode,Ot=(1<<et.lenbits)-1,pt=(1<<et.distbits)-1;e:do{Mt<15&&(Et+=Tt[tt++]<<Mt,Mt+=8,Et+=Tt[tt++]<<Mt,Mt+=8),Lt=Ft[Et&Ot];t:for(;;){if(Et>>>=nn=Lt>>>24,Mt-=nn,(nn=Lt>>>16&255)===0)Vt[it++]=65535&Lt;else{if(!(16&nn)){if(!(64&nn)){Lt=Ft[(65535&Lt)+(Et&(1<<nn)-1)];continue t}if(32&nn){et.mode=12;break e}_.msg="invalid literal/length code",et.mode=30;break e}on=65535&Lt,(nn&=15)&&(Mt<nn&&(Et+=Tt[tt++]<<Mt,Mt+=8),on+=Et&(1<<nn)-1,Et>>>=nn,Mt-=nn),Mt<15&&(Et+=Tt[tt++]<<Mt,Mt+=8,Et+=Tt[tt++]<<Mt,Mt+=8),Lt=Rt[Et&pt];n:for(;;){if(Et>>>=nn=Lt>>>24,Mt-=nn,!(16&(nn=Lt>>>16&255))){if(!(64&nn)){Lt=Rt[(65535&Lt)+(Et&(1<<nn)-1)];continue n}_.msg="invalid distance code",et.mode=30;break e}if(wt=65535&Lt,Mt<(nn&=15)&&(Et+=Tt[tt++]<<Mt,(Mt+=8)<nn&&(Et+=Tt[tt++]<<Mt,Mt+=8)),(wt+=Et&(1<<nn)-1)>_t){_.msg="invalid distance too far back",et.mode=30;break e}if(Et>>>=nn,Mt-=nn,wt>(nn=it-st)){if((nn=wt-nn)>ft&&et.sane){_.msg="invalid distance too far back",et.mode=30;break e}if(xt=0,Nt=yt,ut===0){if(xt+=gt-nn,nn<on){on-=nn;do Vt[it++]=yt[xt++];while(--nn);xt=it-wt,Nt=Vt}}else if(ut<nn){if(xt+=gt+ut-nn,(nn-=ut)<on){on-=nn;do Vt[it++]=yt[xt++];while(--nn);if(xt=0,ut<on){on-=nn=ut;do Vt[it++]=yt[xt++];while(--nn);xt=it-wt,Nt=Vt}}}else if(xt+=ut-nn,nn<on){on-=nn;do Vt[it++]=yt[xt++];while(--nn);xt=it-wt,Nt=Vt}for(;on>2;)Vt[it++]=Nt[xt++],Vt[it++]=Nt[xt++],Vt[it++]=Nt[xt++],on-=3;on&&(Vt[it++]=Nt[xt++],on>1&&(Vt[it++]=Nt[xt++]))}else{xt=it-wt;do Vt[it++]=Vt[xt++],Vt[it++]=Vt[xt++],Vt[it++]=Vt[xt++],on-=3;while(on>2);on&&(Vt[it++]=Vt[xt++],on>1&&(Vt[it++]=Vt[xt++]))}break}}break}}while(tt<j&&it<ht);tt-=on=Mt>>3,Et&=(1<<(Mt-=on<<3))-1,_.next_in=tt,_.next_out=it,_.avail_in=tt<j?j-tt+5:5-(tt-j),_.avail_out=it<ht?ht-it+257:257-(it-ht),et.hold=Et,et.bits=Mt}},function(i,o,s){var _=s(37),$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],j=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(it,st,ht,_t,gt,ft,ut,yt){var Et,Mt,Ft,Rt,Ot,pt,Lt,nn,on,wt=yt.bits,xt=0,Nt=0,Tt=0,Vt=0,Xt=0,Gt=0,Ut=0,Ht=0,qt=0,Pt=0,St=null,Zt=0,tn=new _.Buf16(16),mn=new _.Buf16(16),yn=null,vn=0;for(xt=0;xt<=15;xt++)tn[xt]=0;for(Nt=0;Nt<_t;Nt++)tn[st[ht+Nt]]++;for(Xt=wt,Vt=15;Vt>=1&&tn[Vt]===0;Vt--);if(Xt>Vt&&(Xt=Vt),Vt===0)return gt[ft++]=20971520,gt[ft++]=20971520,yt.bits=1,0;for(Tt=1;Tt<Vt&&tn[Tt]===0;Tt++);for(Xt<Tt&&(Xt=Tt),Ht=1,xt=1;xt<=15;xt++)if(Ht<<=1,(Ht-=tn[xt])<0)return-1;if(Ht>0&&(it===0||Vt!==1))return-1;for(mn[1]=0,xt=1;xt<15;xt++)mn[xt+1]=mn[xt]+tn[xt];for(Nt=0;Nt<_t;Nt++)st[ht+Nt]!==0&&(ut[mn[st[ht+Nt]]++]=Nt);if(it===0?(St=yn=ut,pt=19):it===1?(St=$,Zt-=257,yn=et,vn-=257,pt=256):(St=tt,yn=j,pt=-1),Pt=0,Nt=0,xt=Tt,Ot=ft,Gt=Xt,Ut=0,Ft=-1,Rt=(qt=1<<Xt)-1,it===1&&qt>852||it===2&&qt>592)return 1;for(;;){Lt=xt-Ut,ut[Nt]<pt?(nn=0,on=ut[Nt]):ut[Nt]>pt?(nn=yn[vn+ut[Nt]],on=St[Zt+ut[Nt]]):(nn=96,on=0),Et=1<<xt-Ut,Tt=Mt=1<<Gt;do gt[Ot+(Pt>>Ut)+(Mt-=Et)]=Lt<<24|nn<<16|on|0;while(Mt!==0);for(Et=1<<xt-1;Pt&Et;)Et>>=1;if(Et!==0?(Pt&=Et-1,Pt+=Et):Pt=0,Nt++,--tn[xt]==0){if(xt===Vt)break;xt=st[ht+ut[Nt]]}if(xt>Xt&&(Pt&Rt)!==Ft){for(Ut===0&&(Ut=Xt),Ot+=Tt,Ht=1<<(Gt=xt-Ut);Gt+Ut<Vt&&!((Ht-=tn[Gt+Ut])<=0);)Gt++,Ht<<=1;if(qt+=1<<Gt,it===1&&qt>852||it===2&&qt>592)return 1;gt[Ft=Pt&Rt]=Xt<<24|Gt<<16|Ot-ft|0}}return Pt!==0&&(gt[Ot+Pt]=xt-Ut<<24|64<<16|0),yt.bits=Xt,0}},function(i,o,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(i,o){},function(i,o,s){function _(st,ht){var _t=Object.keys(st);if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(st);ht&&(gt=gt.filter(function(ft){return Object.getOwnPropertyDescriptor(st,ft).enumerable})),_t.push.apply(_t,gt)}return _t}function $(st,ht,_t){return ht in st?Object.defineProperty(st,ht,{value:_t,enumerable:!0,configurable:!0,writable:!0}):st[ht]=_t,st}function et(st,ht){for(var _t=0;_t<ht.length;_t++){var gt=ht[_t];gt.enumerable=gt.enumerable||!1,gt.configurable=!0,"value"in gt&&(gt.writable=!0),Object.defineProperty(st,gt.key,gt)}}var tt=s(5).Buffer,j=s(181).inspect,it=j&&j.custom||"inspect";i.exports=function(){function st(){(function(gt,ft){if(!(gt instanceof ft))throw new TypeError("Cannot call a class as a function")})(this,st),this.head=null,this.tail=null,this.length=0}var ht,_t;return ht=st,(_t=[{key:"push",value:function(gt){var ft={data:gt,next:null};this.length>0?this.tail.next=ft:this.head=ft,this.tail=ft,++this.length}},{key:"unshift",value:function(gt){var ft={data:gt,next:this.head};this.length===0&&(this.tail=ft),this.head=ft,++this.length}},{key:"shift",value:function(){if(this.length!==0){var gt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,gt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(gt){if(this.length===0)return"";for(var ft=this.head,ut=""+ft.data;ft=ft.next;)ut+=gt+ft.data;return ut}},{key:"concat",value:function(gt){if(this.length===0)return tt.alloc(0);for(var ft,ut,yt,Et=tt.allocUnsafe(gt>>>0),Mt=this.head,Ft=0;Mt;)ft=Mt.data,ut=Et,yt=Ft,tt.prototype.copy.call(ft,ut,yt),Ft+=Mt.data.length,Mt=Mt.next;return Et}},{key:"consume",value:function(gt,ft){var ut;return gt<this.head.data.length?(ut=this.head.data.slice(0,gt),this.head.data=this.head.data.slice(gt)):ut=gt===this.head.data.length?this.shift():ft?this._getString(gt):this._getBuffer(gt),ut}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(gt){var ft=this.head,ut=1,yt=ft.data;for(gt-=yt.length;ft=ft.next;){var Et=ft.data,Mt=gt>Et.length?Et.length:gt;if(Mt===Et.length?yt+=Et:yt+=Et.slice(0,gt),(gt-=Mt)==0){Mt===Et.length?(++ut,ft.next?this.head=ft.next:this.head=this.tail=null):(this.head=ft,ft.data=Et.slice(Mt));break}++ut}return this.length-=ut,yt}},{key:"_getBuffer",value:function(gt){var ft=tt.allocUnsafe(gt),ut=this.head,yt=1;for(ut.data.copy(ft),gt-=ut.data.length;ut=ut.next;){var Et=ut.data,Mt=gt>Et.length?Et.length:gt;if(Et.copy(ft,ft.length-gt,0,Mt),(gt-=Mt)==0){Mt===Et.length?(++yt,ut.next?this.head=ut.next:this.head=this.tail=null):(this.head=ut,ut.data=Et.slice(Mt));break}++yt}return this.length-=yt,ft}},{key:it,value:function(gt,ft){return j(this,function(ut){for(var yt=1;yt<arguments.length;yt++){var Et=arguments[yt]!=null?arguments[yt]:{};yt%2?_(Object(Et),!0).forEach(function(Mt){$(ut,Mt,Et[Mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(Et)):_(Object(Et)).forEach(function(Mt){Object.defineProperty(ut,Mt,Object.getOwnPropertyDescriptor(Et,Mt))})}return ut}({},ft,{depth:0,customInspect:!1}))}}])&&et(ht.prototype,_t),st}()},function(i,o){},function(i,o,s){(function(_){var $;function et(Rt,Ot,pt){return Ot in Rt?Object.defineProperty(Rt,Ot,{value:pt,enumerable:!0,configurable:!0,writable:!0}):Rt[Ot]=pt,Rt}var tt=s(49),j=Symbol("lastResolve"),it=Symbol("lastReject"),st=Symbol("error"),ht=Symbol("ended"),_t=Symbol("lastPromise"),gt=Symbol("handlePromise"),ft=Symbol("stream");function ut(Rt,Ot){return{value:Rt,done:Ot}}function yt(Rt){var Ot=Rt[j];if(Ot!==null){var pt=Rt[ft].read();pt!==null&&(Rt[_t]=null,Rt[j]=null,Rt[it]=null,Ot(ut(pt,!1)))}}function Et(Rt){_.nextTick(yt,Rt)}var Mt=Object.getPrototypeOf(function(){}),Ft=Object.setPrototypeOf((et($={get stream(){return this[ft]},next:function(){var Rt=this,Ot=this[st];if(Ot!==null)return Promise.reject(Ot);if(this[ht])return Promise.resolve(ut(void 0,!0));if(this[ft].destroyed)return new Promise(function(on,wt){_.nextTick(function(){Rt[st]?wt(Rt[st]):on(ut(void 0,!0))})});var pt,Lt=this[_t];if(Lt)pt=new Promise(function(on,wt){return function(xt,Nt){on.then(function(){wt[ht]?xt(ut(void 0,!0)):wt[gt](xt,Nt)},Nt)}}(Lt,this));else{var nn=this[ft].read();if(nn!==null)return Promise.resolve(ut(nn,!1));pt=new Promise(this[gt])}return this[_t]=pt,pt}},Symbol.asyncIterator,function(){return this}),et($,"return",function(){var Rt=this;return new Promise(function(Ot,pt){Rt[ft].destroy(null,function(Lt){Lt?pt(Lt):Ot(ut(void 0,!0))})})}),$),Mt);i.exports=function(Rt){var Ot,pt=Object.create(Ft,(et(Ot={},ft,{value:Rt,writable:!0}),et(Ot,j,{value:null,writable:!0}),et(Ot,it,{value:null,writable:!0}),et(Ot,st,{value:null,writable:!0}),et(Ot,ht,{value:Rt._readableState.endEmitted,writable:!0}),et(Ot,gt,{value:function(Lt,nn){var on=pt[ft].read();on?(pt[_t]=null,pt[j]=null,pt[it]=null,Lt(ut(on,!1))):(pt[j]=Lt,pt[it]=nn)},writable:!0}),Ot));return pt[_t]=null,tt(Rt,function(Lt){if(Lt&&Lt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var nn=pt[it];return nn!==null&&(pt[_t]=null,pt[j]=null,pt[it]=null,nn(Lt)),void(pt[st]=Lt)}var on=pt[j];on!==null&&(pt[_t]=null,pt[j]=null,pt[it]=null,on(ut(void 0,!0))),pt[ht]=!0}),Rt.on("readable",Et.bind(null,pt)),pt}}).call(this,s(2))},function(i,o){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(i,o,s){i.exports=$;var _=s(82);function $(et){if(!(this instanceof $))return new $(et);_.call(this,et)}s(7)($,_),$.prototype._transform=function(et,tt,j){j(null,et)}},function(i,o,s){var _,$=s(26).codes,et=$.ERR_MISSING_ARGS,tt=$.ERR_STREAM_DESTROYED;function j(gt){if(gt)throw gt}function it(gt,ft,ut,yt){yt=function(Ft){var Rt=!1;return function(){Rt||(Rt=!0,Ft.apply(void 0,arguments))}}(yt);var Et=!1;gt.on("close",function(){Et=!0}),_===void 0&&(_=s(49)),_(gt,{readable:ft,writable:ut},function(Ft){if(Ft)return yt(Ft);Et=!0,yt()});var Mt=!1;return function(Ft){if(!Et&&!Mt)return Mt=!0,function(Rt){return Rt.setHeader&&typeof Rt.abort=="function"}(gt)?gt.abort():typeof gt.destroy=="function"?gt.destroy():void yt(Ft||new tt("pipe"))}}function st(gt){gt()}function ht(gt,ft){return gt.pipe(ft)}function _t(gt){return gt.length?typeof gt[gt.length-1]!="function"?j:gt.pop():j}i.exports=function(){for(var gt=arguments.length,ft=new Array(gt),ut=0;ut<gt;ut++)ft[ut]=arguments[ut];var yt,Et=_t(ft);if(Array.isArray(ft[0])&&(ft=ft[0]),ft.length<2)throw new et("streams");var Mt=ft.map(function(Ft,Rt){var Ot=Rt<ft.length-1;return it(Ft,Ot,Rt>0,function(pt){yt||(yt=pt),pt&&Mt.forEach(st),Ot||(Mt.forEach(st),Et(yt))})});return ft.reduce(ht)}},function(i,o,s){var _=s(187)(function $(et,tt){return(tt=tt||{}).namespace=et,tt.prod=!0,tt.dev=!1,tt.force||$.force?$.yep(tt):$.nope(tt)});i.exports=_},function(i,o){var s=[],_=[],$=function(){};function et(ut){return!~s.indexOf(ut)&&(s.push(ut),!0)}function tt(ut){$=ut}function j(ut){for(var yt=[],Et=0;Et<s.length;Et++)if(s[Et].async)yt.push(s[Et]);else if(s[Et](ut))return!0;return!!yt.length&&new Promise(function(Mt){Promise.all(yt.map(function(Ft){return Ft(ut)})).then(function(Ft){Mt(Ft.some(Boolean))})})}function it(ut){return!~_.indexOf(ut)&&(_.push(ut),!0)}function st(){$.apply($,arguments)}function ht(ut){for(var yt=0;yt<_.length;yt++)ut=_[yt].apply(_[yt],arguments);return ut}function _t(ut,yt){var Et=Object.prototype.hasOwnProperty;for(var Mt in yt)Et.call(yt,Mt)&&(ut[Mt]=yt[Mt]);return ut}function gt(ut){return ut.enabled=!1,ut.modify=it,ut.set=tt,ut.use=et,_t(function(){return!1},ut)}function ft(ut){return ut.enabled=!0,ut.modify=it,ut.set=tt,ut.use=et,_t(function(){var yt=Array.prototype.slice.call(arguments,0);return st.call(st,ut,ht(yt,ut)),!0},ut)}i.exports=function(ut){return ut.introduce=_t,ut.enabled=j,ut.process=ht,ut.modify=it,ut.write=st,ut.nope=gt,ut.yep=ft,ut.set=tt,ut.use=et,ut}},function(i,o,s){(function(_){var $=s(65),et=s(22).StringDecoder,tt=s(32).Stream;function j(){}i.exports=function(it,st){var ht=_.alloc(65536),_t=new et("utf8"),gt=new tt,ft="",ut=0,yt=0;return it.start===-1&&delete it.start,gt.readable=!0,gt.destroy=function(){gt.destroyed=!0,gt.emit("end"),gt.emit("close")},$.open(it.file,"a+","0644",function(Et,Mt){if(Et)return st?st(Et):gt.emit("error",Et),void gt.destroy();(function Ft(){if(!gt.destroyed)return $.read(Mt,ht,0,ht.length,ut,function(Rt,Ot){if(Rt)return st?st(Rt):gt.emit("error",Rt),void gt.destroy();if(!Ot)return ft&&((it.start==null||yt>it.start)&&(st?st(null,ft):gt.emit("line",ft)),yt++,ft=""),setTimeout(Ft,1e3);var pt=_t.write(ht.slice(0,Ot));st||gt.emit("data",pt);for(var Lt=(pt=(ft+pt).split(/\n+/)).length-1,nn=0;nn<Lt;nn++)(it.start==null||yt>it.start)&&(st?st(null,pt[nn]):gt.emit("line",pt[nn])),yt++;return ft=pt[Lt],ut+=Ot,Ft()});$.close(Mt,j)})()}),st?gt.destroy:gt}}).call(this,s(5).Buffer)},function(i,o,s){(function(_,$){function et(Rt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Rt)}function tt(Rt,Ot){var pt=Object.keys(Rt);if(Object.getOwnPropertySymbols){var Lt=Object.getOwnPropertySymbols(Rt);Ot&&(Lt=Lt.filter(function(nn){return Object.getOwnPropertyDescriptor(Rt,nn).enumerable})),pt.push.apply(pt,Lt)}return pt}function j(Rt){for(var Ot=1;Ot<arguments.length;Ot++){var pt=arguments[Ot]!=null?arguments[Ot]:{};Ot%2?tt(Object(pt),!0).forEach(function(Lt){it(Rt,Lt,pt[Lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Rt,Object.getOwnPropertyDescriptors(pt)):tt(Object(pt)).forEach(function(Lt){Object.defineProperty(Rt,Lt,Object.getOwnPropertyDescriptor(pt,Lt))})}return Rt}function it(Rt,Ot,pt){return Ot in Rt?Object.defineProperty(Rt,Ot,{value:pt,enumerable:!0,configurable:!0,writable:!0}):Rt[Ot]=pt,Rt}function st(Rt,Ot){if(!(Rt instanceof Ot))throw new TypeError("Cannot call a class as a function")}function ht(Rt,Ot){for(var pt=0;pt<Ot.length;pt++){var Lt=Ot[pt];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(Rt,Lt.key,Lt)}}function _t(Rt,Ot){return(_t=Object.setPrototypeOf||function(pt,Lt){return pt.__proto__=Lt,pt})(Rt,Ot)}function gt(Rt){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var pt,Lt=ut(Rt);if(Ot){var nn=ut(this).constructor;pt=Reflect.construct(Lt,arguments,nn)}else pt=Lt.apply(this,arguments);return ft(this,pt)}}function ft(Rt,Ot){return!Ot||et(Ot)!=="object"&&typeof Ot!="function"?function(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt}(Rt):Ot}function ut(Rt){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(Ot){return Ot.__proto__||Object.getPrototypeOf(Ot)})(Rt)}var yt=s(83),Et=s(200),Mt=s(32).Stream,Ft=s(20);i.exports=function(Rt){(function(on,wt){if(typeof wt!="function"&&wt!==null)throw new TypeError("Super expression must either be null or a function");on.prototype=Object.create(wt&&wt.prototype,{constructor:{value:on,writable:!0,configurable:!0}}),wt&&_t(on,wt)})(nn,Rt);var Ot,pt,Lt=gt(nn);function nn(){var on,wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,nn),(on=Lt.call(this,wt)).options=wt,on.name=wt.name||"http",on.ssl=!!wt.ssl,on.host=wt.host||"localhost",on.port=wt.port,on.auth=wt.auth,on.path=wt.path||"",on.agent=wt.agent,on.headers=wt.headers||{},on.headers["content-type"]="application/json",on.port||(on.port=on.ssl?443:80),on}return Ot=nn,(pt=[{key:"log",value:function(on,wt){var xt=this;this._request(on,function(Nt,Tt){Tt&&Tt.statusCode!==200&&(Nt=new Error("Invalid HTTP Status Code: ".concat(Tt.statusCode))),Nt?xt.emit("warn",Nt):xt.emit("logged",on)}),wt&&_(wt)}},{key:"query",value:function(on,wt){typeof on=="function"&&(wt=on,on={}),(on={method:"query",params:this.normalizeQuery(on)}).params.path&&(on.path=on.params.path,delete on.params.path),on.params.auth&&(on.auth=on.params.auth,delete on.params.auth),this._request(on,function(xt,Nt,Tt){if(Nt&&Nt.statusCode!==200&&(xt=new Error("Invalid HTTP Status Code: ".concat(Nt.statusCode))),xt)return wt(xt);if(typeof Tt=="string")try{Tt=JSON.parse(Tt)}catch(Vt){return wt(Vt)}wt(null,Tt)})}},{key:"stream",value:function(){var on=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},wt=new Mt;(on={method:"stream",params:on}).params.path&&(on.path=on.params.path,delete on.params.path),on.params.auth&&(on.auth=on.params.auth,delete on.params.auth);var xt="",Nt=this._request(on);return wt.destroy=function(){return Nt.destroy()},Nt.on("data",function(Tt){for(var Vt=(Tt=(xt+Tt).split(/\n+/)).length-1,Xt=0;Xt<Vt;Xt++)try{wt.emit("log",JSON.parse(Tt[Xt]))}catch(Gt){wt.emit("error",Gt)}xt=Tt[Vt]}),Nt.on("error",function(Tt){return wt.emit("error",Tt)}),wt}},{key:"_request",value:function(on,wt){var xt=(on=on||{}).auth||this.auth,Nt=on.path||this.path||"";delete on.auth,delete on.path;var Tt=Object.assign({},this.headers);xt&&xt.bearer&&(Tt.Authorization="Bearer ".concat(xt.bearer));var Vt=(this.ssl?Et:yt).request(j(j({},this.options),{},{method:"POST",host:this.host,port:this.port,path:"/".concat(Nt.replace(/^\//,"")),headers:Tt,auth:xt&&xt.username&&xt.password?"".concat(xt.username,":").concat(xt.password):"",agent:this.agent}));Vt.on("error",wt),Vt.on("response",function(Xt){return Xt.on("end",function(){return wt(null,Xt)}).resume()}),Vt.end($.from(JSON.stringify(on),"utf8"))}}])&&ht(Ot.prototype,pt),nn}(Ft)}).call(this,s(15).setImmediate,s(5).Buffer)},function(i,o,s){(function(_,$,et){var tt=s(84),j=s(7),it=s(85),st=s(31),ht=s(191),_t=it.IncomingMessage,gt=it.readyStates,ft=i.exports=function(yt){var Et,Mt=this;st.Writable.call(Mt),Mt._opts=yt,Mt._body=[],Mt._headers={},yt.auth&&Mt.setHeader("Authorization","Basic "+new _(yt.auth).toString("base64")),Object.keys(yt.headers).forEach(function(Rt){Mt.setHeader(Rt,yt.headers[Rt])});var Ft=!0;if(yt.mode==="disable-fetch"||"requestTimeout"in yt&&!tt.abortController)Ft=!1,Et=!0;else if(yt.mode==="prefer-streaming")Et=!1;else if(yt.mode==="allow-wrong-content-type")Et=!tt.overrideMimeType;else{if(yt.mode&&yt.mode!=="default"&&yt.mode!=="prefer-fast")throw new Error("Invalid value for opts.mode");Et=!0}Mt._mode=function(Rt,Ot){return tt.fetch&&Ot?"fetch":tt.mozchunkedarraybuffer?"moz-chunked-arraybuffer":tt.msstream?"ms-stream":tt.arraybuffer&&Rt?"arraybuffer":tt.vbArray&&Rt?"text:vbarray":"text"}(Et,Ft),Mt._fetchTimer=null,Mt.on("finish",function(){Mt._onFinish()})};j(ft,st.Writable),ft.prototype.setHeader=function(yt,Et){var Mt=yt.toLowerCase();ut.indexOf(Mt)===-1&&(this._headers[Mt]={name:yt,value:Et})},ft.prototype.getHeader=function(yt){var Et=this._headers[yt.toLowerCase()];return Et?Et.value:null},ft.prototype.removeHeader=function(yt){delete this._headers[yt.toLowerCase()]},ft.prototype._onFinish=function(){var yt=this;if(!yt._destroyed){var Et=yt._opts,Mt=yt._headers,Ft=null;Et.method!=="GET"&&Et.method!=="HEAD"&&(Ft=tt.arraybuffer?ht(_.concat(yt._body)):tt.blobConstructor?new $.Blob(yt._body.map(function(nn){return ht(nn)}),{type:(Mt["content-type"]||{}).value||""}):_.concat(yt._body).toString());var Rt=[];if(Object.keys(Mt).forEach(function(nn){var on=Mt[nn].name,wt=Mt[nn].value;Array.isArray(wt)?wt.forEach(function(xt){Rt.push([on,xt])}):Rt.push([on,wt])}),yt._mode==="fetch"){var Ot=null;if(tt.abortController){var pt=new AbortController;Ot=pt.signal,yt._fetchAbortController=pt,"requestTimeout"in Et&&Et.requestTimeout!==0&&(yt._fetchTimer=$.setTimeout(function(){yt.emit("requestTimeout"),yt._fetchAbortController&&yt._fetchAbortController.abort()},Et.requestTimeout))}$.fetch(yt._opts.url,{method:yt._opts.method,headers:Rt,body:Ft||void 0,mode:"cors",credentials:Et.withCredentials?"include":"same-origin",signal:Ot}).then(function(nn){yt._fetchResponse=nn,yt._connect()},function(nn){$.clearTimeout(yt._fetchTimer),yt._destroyed||yt.emit("error",nn)})}else{var Lt=yt._xhr=new $.XMLHttpRequest;try{Lt.open(yt._opts.method,yt._opts.url,!0)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}"responseType"in Lt&&(Lt.responseType=yt._mode.split(":")[0]),"withCredentials"in Lt&&(Lt.withCredentials=!!Et.withCredentials),yt._mode==="text"&&"overrideMimeType"in Lt&&Lt.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in Et&&(Lt.timeout=Et.requestTimeout,Lt.ontimeout=function(){yt.emit("requestTimeout")}),Rt.forEach(function(nn){Lt.setRequestHeader(nn[0],nn[1])}),yt._response=null,Lt.onreadystatechange=function(){switch(Lt.readyState){case gt.LOADING:case gt.DONE:yt._onXHRProgress()}},yt._mode==="moz-chunked-arraybuffer"&&(Lt.onprogress=function(){yt._onXHRProgress()}),Lt.onerror=function(){yt._destroyed||yt.emit("error",new Error("XHR error"))};try{Lt.send(Ft)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}}}},ft.prototype._onXHRProgress=function(){(function(yt){try{var Et=yt.status;return Et!==null&&Et!==0}catch{return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},ft.prototype._connect=function(){var yt=this;yt._destroyed||(yt._response=new _t(yt._xhr,yt._fetchResponse,yt._mode,yt._fetchTimer),yt._response.on("error",function(Et){yt.emit("error",Et)}),yt.emit("response",yt._response))},ft.prototype._write=function(yt,Et,Mt){this._body.push(yt),Mt()},ft.prototype.abort=ft.prototype.destroy=function(){this._destroyed=!0,$.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},ft.prototype.end=function(yt,Et,Mt){typeof yt=="function"&&(Mt=yt,yt=void 0),st.Writable.prototype.end.call(this,yt,Et,Mt)},ft.prototype.flushHeaders=function(){},ft.prototype.setTimeout=function(){},ft.prototype.setNoDelay=function(){},ft.prototype.setSocketKeepAlive=function(){};var ut=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,s(5).Buffer,s(6),s(2))},function(i,o,s){var _=s(5).Buffer;i.exports=function($){if($ instanceof Uint8Array){if($.byteOffset===0&&$.byteLength===$.buffer.byteLength)return $.buffer;if(typeof $.buffer.slice=="function")return $.buffer.slice($.byteOffset,$.byteOffset+$.byteLength)}if(_.isBuffer($)){for(var et=new Uint8Array($.length),tt=$.length,j=0;j<tt;j++)et[j]=$[j];return et.buffer}throw new Error("Argument must be a Buffer")}},function(i,o){i.exports=function(){for(var _={},$=0;$<arguments.length;$++){var et=arguments[$];for(var tt in et)s.call(et,tt)&&(_[tt]=et[tt])}return _};var s=Object.prototype.hasOwnProperty},function(i,o){i.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(i,o,s){(function(_,$){var et;(function(tt){o&&o.nodeType,_&&_.nodeType;var j=typeof $=="object"&&$;j.global!==j&&j.window!==j&&j.self;var it,st=2147483647,ht=/^xn--/,_t=/[^\x20-\x7E]/,gt=/[\x2E\u3002\uFF0E\uFF61]/g,ft={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ut=Math.floor,yt=String.fromCharCode;function Et(wt){throw new RangeError(ft[wt])}function Mt(wt,xt){for(var Nt=wt.length,Tt=[];Nt--;)Tt[Nt]=xt(wt[Nt]);return Tt}function Ft(wt,xt){var Nt=wt.split("@"),Tt="";return Nt.length>1&&(Tt=Nt[0]+"@",wt=Nt[1]),Tt+Mt((wt=wt.replace(gt,".")).split("."),xt).join(".")}function Rt(wt){for(var xt,Nt,Tt=[],Vt=0,Xt=wt.length;Vt<Xt;)(xt=wt.charCodeAt(Vt++))>=55296&&xt<=56319&&Vt<Xt?(64512&(Nt=wt.charCodeAt(Vt++)))==56320?Tt.push(((1023&xt)<<10)+(1023&Nt)+65536):(Tt.push(xt),Vt--):Tt.push(xt);return Tt}function Ot(wt){return Mt(wt,function(xt){var Nt="";return xt>65535&&(Nt+=yt((xt-=65536)>>>10&1023|55296),xt=56320|1023&xt),Nt+=yt(xt)}).join("")}function pt(wt,xt){return wt+22+75*(wt<26)-((xt!=0)<<5)}function Lt(wt,xt,Nt){var Tt=0;for(wt=Nt?ut(wt/700):wt>>1,wt+=ut(wt/xt);wt>455;Tt+=36)wt=ut(wt/35);return ut(Tt+36*wt/(wt+38))}function nn(wt){var xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St,Zt=[],tn=wt.length,mn=0,yn=128,vn=72;for((Nt=wt.lastIndexOf("-"))<0&&(Nt=0),Tt=0;Tt<Nt;++Tt)wt.charCodeAt(Tt)>=128&&Et("not-basic"),Zt.push(wt.charCodeAt(Tt));for(Vt=Nt>0?Nt+1:0;Vt<tn;){for(Xt=mn,Gt=1,Ut=36;Vt>=tn&&Et("invalid-input"),((Ht=(St=wt.charCodeAt(Vt++))-48<10?St-22:St-65<26?St-65:St-97<26?St-97:36)>=36||Ht>ut((st-mn)/Gt))&&Et("overflow"),mn+=Ht*Gt,!(Ht<(qt=Ut<=vn?1:Ut>=vn+26?26:Ut-vn));Ut+=36)Gt>ut(st/(Pt=36-qt))&&Et("overflow"),Gt*=Pt;vn=Lt(mn-Xt,xt=Zt.length+1,Xt==0),ut(mn/xt)>st-yn&&Et("overflow"),yn+=ut(mn/xt),mn%=xt,Zt.splice(mn++,0,yn)}return Ot(Zt)}function on(wt){var xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St,Zt,tn,mn,yn,vn=[];for(Zt=(wt=Rt(wt)).length,xt=128,Nt=0,Xt=72,Gt=0;Gt<Zt;++Gt)(St=wt[Gt])<128&&vn.push(yt(St));for(Tt=Vt=vn.length,Vt&&vn.push("-");Tt<Zt;){for(Ut=st,Gt=0;Gt<Zt;++Gt)(St=wt[Gt])>=xt&&St<Ut&&(Ut=St);for(Ut-xt>ut((st-Nt)/(tn=Tt+1))&&Et("overflow"),Nt+=(Ut-xt)*tn,xt=Ut,Gt=0;Gt<Zt;++Gt)if((St=wt[Gt])<xt&&++Nt>st&&Et("overflow"),St==xt){for(Ht=Nt,qt=36;!(Ht<(Pt=qt<=Xt?1:qt>=Xt+26?26:qt-Xt));qt+=36)yn=Ht-Pt,mn=36-Pt,vn.push(yt(pt(Pt+yn%mn,0))),Ht=ut(yn/mn);vn.push(yt(pt(Ht,0))),Xt=Lt(Nt,tn,Tt==Vt),Nt=0,++Tt}++Nt,++xt}return vn.join("")}it={version:"1.4.1",ucs2:{decode:Rt,encode:Ot},decode:nn,encode:on,toASCII:function(wt){return Ft(wt,function(xt){return _t.test(xt)?"xn--"+on(xt):xt})},toUnicode:function(wt){return Ft(wt,function(xt){return ht.test(xt)?nn(xt.slice(4).toLowerCase()):xt})}},(et=function(){return it}.call(o,s,o,_))===void 0||(_.exports=et)})()}).call(this,s(195)(i),s(6))},function(i,o){i.exports=function(s){return s.webpackPolyfill||(s.deprecate=function(){},s.paths=[],s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),s.webpackPolyfill=1),s}},function(i,o,s){i.exports={isString:function(_){return typeof _=="string"},isObject:function(_){return typeof _=="object"&&_!==null},isNull:function(_){return _===null},isNullOrUndefined:function(_){return _==null}}},function(i,o,s){o.decode=o.parse=s(198),o.encode=o.stringify=s(199)},function(i,o,s){function _(et,tt){return Object.prototype.hasOwnProperty.call(et,tt)}i.exports=function(et,tt,j,it){tt=tt||"&",j=j||"=";var st={};if(typeof et!="string"||et.length===0)return st;var ht=/\+/g;et=et.split(tt);var _t=1e3;it&&typeof it.maxKeys=="number"&&(_t=it.maxKeys);var gt=et.length;_t>0&&gt>_t&&(gt=_t);for(var ft=0;ft<gt;++ft){var ut,yt,Et,Mt,Ft=et[ft].replace(ht,"%20"),Rt=Ft.indexOf(j);Rt>=0?(ut=Ft.substr(0,Rt),yt=Ft.substr(Rt+1)):(ut=Ft,yt=""),Et=decodeURIComponent(ut),Mt=decodeURIComponent(yt),_(st,Et)?$(st[Et])?st[Et].push(Mt):st[Et]=[st[Et],Mt]:st[Et]=Mt}return st};var $=Array.isArray||function(et){return Object.prototype.toString.call(et)==="[object Array]"}},function(i,o,s){var _=function(j){switch(typeof j){case"string":return j;case"boolean":return j?"true":"false";case"number":return isFinite(j)?j:"";default:return""}};i.exports=function(j,it,st,ht){return it=it||"&",st=st||"=",j===null&&(j=void 0),typeof j=="object"?et(tt(j),function(_t){var gt=encodeURIComponent(_(_t))+st;return $(j[_t])?et(j[_t],function(ft){return gt+encodeURIComponent(_(ft))}).join(it):gt+encodeURIComponent(_(j[_t]))}).join(it):ht?encodeURIComponent(_(ht))+st+encodeURIComponent(_(j)):""};var $=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"};function et(j,it){if(j.map)return j.map(it);for(var st=[],ht=0;ht<j.length;ht++)st.push(it(j[ht],ht));return st}var tt=Object.keys||function(j){var it=[];for(var st in j)Object.prototype.hasOwnProperty.call(j,st)&&it.push(st);return it}},function(i,o,s){var _=s(83),$=s(86),et=i.exports;for(var tt in _)_.hasOwnProperty(tt)&&(et[tt]=_[tt]);function j(it){if(typeof it=="string"&&(it=$.parse(it)),it.protocol||(it.protocol="https:"),it.protocol!=="https:")throw new Error('Protocol "'+it.protocol+'" not supported. Expected "https:"');return it}et.request=function(it,st){return it=j(it),_.request.call(this,it,st)},et.get=function(it,st){return it=j(it),_.get.call(this,it,st)}},function(i,o,s){(function(_){function $(yt){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function et(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function tt(yt,Et){for(var Mt=0;Mt<Et.length;Mt++){var Ft=Et[Mt];Ft.enumerable=Ft.enumerable||!1,Ft.configurable=!0,"value"in Ft&&(Ft.writable=!0),Object.defineProperty(yt,Ft.key,Ft)}}function j(yt,Et){return(j=Object.setPrototypeOf||function(Mt,Ft){return Mt.__proto__=Ft,Mt})(yt,Et)}function it(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Mt,Ft=ht(yt);if(Et){var Rt=ht(this).constructor;Mt=Reflect.construct(Ft,arguments,Rt)}else Mt=Ft.apply(this,arguments);return st(this,Mt)}}function st(yt,Et){return!Et||$(Et)!=="object"&&typeof Et!="function"?function(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}(yt):Et}function ht(yt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var _t=s(87),gt=s(3).MESSAGE,ft=s(18),ut=s(20);i.exports=function(yt){(function(Ot,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(pt&&pt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),pt&&j(Ot,pt)})(Rt,yt);var Et,Mt,Ft=it(Rt);function Rt(){var Ot,pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et(this,Rt),Ot=Ft.call(this,pt),!pt.stream||!_t(pt.stream))throw new Error("options.stream is required.");return Ot._stream=pt.stream,Ot._stream.setMaxListeners(1/0),Ot.isObjectMode=pt.stream._writableState.objectMode,Ot.eol=pt.eol||ft.EOL,Ot}return Et=Rt,(Mt=[{key:"log",value:function(Ot,pt){var Lt=this;if(_(function(){return Lt.emit("logged",Ot)}),this.isObjectMode)return this._stream.write(Ot),void(pt&&pt());this._stream.write("".concat(Ot[gt]).concat(this.eol)),pt&&pt()}}])&&tt(Et.prototype,Mt),Rt}(ut)}).call(this,s(15).setImmediate)},function(i,o,s){(function(_){function $(Tt,Vt,Xt){return Vt in Tt?Object.defineProperty(Tt,Vt,{value:Xt,enumerable:!0,configurable:!0,writable:!0}):Tt[Vt]=Xt,Tt}function et(Tt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt})(Tt)}function tt(Tt,Vt){for(var Xt=0;Xt<Vt.length;Xt++){var Gt=Vt[Xt];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Tt,Gt.key,Gt)}}function j(Tt,Vt){return(j=Object.setPrototypeOf||function(Xt,Gt){return Xt.__proto__=Gt,Xt})(Tt,Vt)}function it(Tt){var Vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Xt,Gt=ht(Tt);if(Vt){var Ut=ht(this).constructor;Xt=Reflect.construct(Gt,arguments,Ut)}else Xt=Gt.apply(this,arguments);return st(this,Xt)}}function st(Tt,Vt){return!Vt||et(Vt)!=="object"&&typeof Vt!="function"?function(Xt){if(Xt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Xt}(Tt):Vt}function ht(Tt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)})(Tt)}var _t=s(32),gt=_t.Stream,ft=_t.Transform,ut=s(51),yt=s(3),Et=yt.LEVEL,Mt=yt.SPLAT,Ft=s(87),Rt=s(89),Ot=s(93),pt=s(206),Lt=s(207),nn=s(61).warn,on=s(50),wt=/%[scdjifoO%]/g,xt=function(Tt){(function(Ht,qt){if(typeof qt!="function"&&qt!==null)throw new TypeError("Super expression must either be null or a function");Ht.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Ht,writable:!0,configurable:!0}}),qt&&j(Ht,qt)})(Ut,Tt);var Vt,Xt,Gt=it(Ut);function Ut(Ht){var qt;return function(Pt,St){if(!(Pt instanceof St))throw new TypeError("Cannot call a class as a function")}(this,Ut),(qt=Gt.call(this,{objectMode:!0})).configure(Ht),qt}return Vt=Ut,(Xt=[{key:"child",value:function(Ht){var qt=this;return Object.create(qt,{write:{value:function(Pt){var St=Object.assign({},Ht,Pt);Pt instanceof Error&&(St.stack=Pt.stack,St.message=Pt.message),qt.write(St)}}})}},{key:"configure",value:function(){var Ht=this,qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pt=qt.silent,St=qt.format,Zt=qt.defaultMeta,tn=qt.levels,mn=qt.level,yn=mn===void 0?"info":mn,vn=qt.exitOnError,un=vn===void 0||vn,rn=qt.transports,It=qt.colors,Dt=qt.emitErrs,Kt=qt.formatters,gn=qt.padLevels,hn=qt.rewriters,xn=qt.stripColors,Mn=qt.exceptionHandlers,qn=qt.rejectionHandlers;if(this.transports.length&&this.clear(),this.silent=Pt,this.format=St||this.format||s(208)(),this.defaultMeta=Zt||null,this.levels=tn||this.levels||on.npm.levels,this.level=yn,this.exceptions=new Rt(this),this.rejections=new Ot(this),this.profilers={},this.exitOnError=un,rn&&(rn=Array.isArray(rn)?rn:[rn]).forEach(function(Ir){return Ht.add(Ir)}),It||Dt||Kt||gn||hn||xn)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));Mn&&this.exceptions.handle(Mn),qn&&this.rejections.handle(qn)}},{key:"isLevelEnabled",value:function(Ht){var qt=this,Pt=Nt(this.levels,Ht);if(Pt===null)return!1;var St=Nt(this.levels,this.level);return St!==null&&(this.transports&&this.transports.length!==0?this.transports.findIndex(function(Zt){var tn=Nt(qt.levels,Zt.level);return tn===null&&(tn=St),tn>=Pt})!==-1:St>=Pt)}},{key:"log",value:function(Ht,qt){for(var Pt,St,Zt=arguments.length,tn=new Array(Zt>2?Zt-2:0),mn=2;mn<Zt;mn++)tn[mn-2]=arguments[mn];if(arguments.length===1)return Ht[Et]=Ht.level,this._addDefaultMeta(Ht),this.write(Ht),this;if(arguments.length===2)return qt&&et(qt)==="object"?(qt[Et]=qt.level=Ht,this._addDefaultMeta(qt),this.write(qt),this):(this.write(($(St={},Et,Ht),$(St,"level",Ht),$(St,"message",qt),St)),this);var yn=tn[0];if(et(yn)==="object"&&yn!==null){var vn=qt&&qt.match&&qt.match(wt);if(!vn){var un,rn=Object.assign({},this.defaultMeta,yn,($(un={},Et,Ht),$(un,Mt,tn),$(un,"level",Ht),$(un,"message",qt),un));return yn.message&&(rn.message="".concat(rn.message," ").concat(yn.message)),yn.stack&&(rn.stack=yn.stack),this.write(rn),this}}return this.write(Object.assign({},this.defaultMeta,($(Pt={},Et,Ht),$(Pt,Mt,tn),$(Pt,"level",Ht),$(Pt,"message",qt),Pt))),this}},{key:"_transform",value:function(Ht,qt,Pt){if(this.silent)return Pt();Ht[Et]||(Ht[Et]=Ht.level),this.levels[Ht[Et]]||this.levels[Ht[Et]]===0||console.error("[winston] Unknown logger level: %s",Ht[Et]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports %j",Ht);try{this.push(this.format.transform(Ht,this.format.options))}catch(St){throw St}finally{Pt()}}},{key:"_final",value:function(Ht){var qt=this.transports.slice();ut(qt,function(Pt,St){if(!Pt||Pt.finished)return _(St);Pt.once("finish",St),Pt.end()},Ht)}},{key:"add",value:function(Ht){var qt=!Ft(Ht)||Ht.log.length>2?new pt({transport:Ht}):Ht;if(!qt._writableState||!qt._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",qt),this._onEvent("warn",qt),this.pipe(qt),Ht.handleExceptions&&this.exceptions.handle(),Ht.handleRejections&&this.rejections.handle(),this}},{key:"remove",value:function(Ht){if(!Ht)return this;var qt=Ht;return(!Ft(Ht)||Ht.log.length>2)&&(qt=this.transports.filter(function(Pt){return Pt.transport===Ht})[0]),qt&&this.unpipe(qt),this}},{key:"clear",value:function(){return this.unpipe(),this}},{key:"close",value:function(){return this.clear(),this.emit("close"),this}},{key:"setLevels",value:function(){nn.deprecated("setLevels")}},{key:"query",value:function(Ht,qt){typeof Ht=="function"&&(qt=Ht,Ht={}),Ht=Ht||{};var Pt={},St=Object.assign({},Ht.query||{});ut(this.transports.filter(function(Zt){return!!Zt.query}),function(Zt,tn){(function(mn,yn){Ht.query&&typeof mn.formatQuery=="function"&&(Ht.query=mn.formatQuery(St)),mn.query(Ht,function(vn,un){if(vn)return yn(vn);typeof mn.formatResults=="function"&&(un=mn.formatResults(un,Ht.format)),yn(null,un)})})(Zt,function(mn,yn){tn&&((yn=mn||yn)&&(Pt[Zt.name]=yn),tn()),tn=null})},function(){return qt(null,Pt)})}},{key:"stream",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=new gt,Pt=[];return qt._streams=Pt,qt.destroy=function(){for(var St=Pt.length;St--;)Pt[St].destroy()},this.transports.filter(function(St){return!!St.stream}).forEach(function(St){var Zt=St.stream(Ht);Zt&&(Pt.push(Zt),Zt.on("log",function(tn){tn.transport=tn.transport||[],tn.transport.push(St.name),qt.emit("log",tn)}),Zt.on("error",function(tn){tn.transport=tn.transport||[],tn.transport.push(St.name),qt.emit("error",tn)}))}),qt}},{key:"startTimer",value:function(){return new Lt(this)}},{key:"profile",value:function(Ht){var qt=Date.now();if(this.profilers[Ht]){var Pt=this.profilers[Ht];delete this.profilers[Ht];for(var St=arguments.length,Zt=new Array(St>1?St-1:0),tn=1;tn<St;tn++)Zt[tn-1]=arguments[tn];typeof Zt[Zt.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),Zt.pop());var mn=et(Zt[Zt.length-1])==="object"?Zt.pop():{};return mn.level=mn.level||"info",mn.durationMs=qt-Pt,mn.message=mn.message||Ht,this.write(mn)}return this.profilers[Ht]=qt,this}},{key:"handleExceptions",value:function(){var Ht;console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),(Ht=this.exceptions).handle.apply(Ht,arguments)}},{key:"unhandleExceptions",value:function(){var Ht;console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),(Ht=this.exceptions).unhandle.apply(Ht,arguments)}},{key:"cli",value:function(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}},{key:"_onEvent",value:function(Ht,qt){qt["__winston"+Ht]||(qt["__winston"+Ht]=function(Pt){Ht!=="error"||this.transports.includes(qt)||this.add(qt),this.emit(Ht,Pt,qt)}.bind(this),qt.on(Ht,qt["__winston"+Ht]))}},{key:"_addDefaultMeta",value:function(Ht){this.defaultMeta&&Object.assign(Ht,this.defaultMeta)}}])&&tt(Vt.prototype,Xt),Ut}(ft);function Nt(Tt,Vt){var Xt=Tt[Vt];return Xt||Xt===0?Xt:null}Object.defineProperty(xt.prototype,"transports",{configurable:!1,enumerable:!0,get:function(){var Tt=this._readableState.pipes;return Array.isArray(Tt)?Tt:[Tt].filter(Boolean)}}),i.exports=xt}).call(this,s(15).setImmediate)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=ht(s(45)),$=ht(s(46)),et=ht(s(66)),tt=ht(s(67)),j=ht(s(68)),it=ht(s(25)),st=ht(s(30));function ht(ft){return ft&&ft.__esModule?ft:{default:ft}}function _t(ft,ut,yt){yt=(0,tt.default)(yt);var Et=0,Mt=0,{length:Ft}=ft,Rt=!1;function Ot(pt,Lt){pt===!1&&(Rt=!0),Rt!==!0&&(pt?yt(pt):++Mt!==Ft&&Lt!==$.default||yt(null))}for(Ft===0&&yt(null);Et<Ft;Et++)ut(ft[Et],Et,(0,j.default)(Ot))}function gt(ft,ut,yt){return(0,et.default)(ft,1/0,ut,yt)}o.default=(0,st.default)(function(ft,ut,yt){return((0,_.default)(ft)?_t:gt)(ft,(0,it.default)(ut),yt)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return($,et,tt)=>_($,tt)},i.exports=o.default},function(i,o,s){var _=Object.prototype.toString;i.exports=function($){if(typeof $.displayName=="string"&&$.constructor.name)return $.displayName;if(typeof $.name=="string"&&$.name)return $.name;if(typeof $=="object"&&$.constructor&&typeof $.constructor.name=="string")return $.constructor.name;var et=$.toString(),tt=_.call($).slice(8,-1);return(et=tt==="Function"?et.substring(et.indexOf("(")+1,et.indexOf(")")):tt)||"anonymous"}},function(i,o,s){const _=s(13),{LEVEL:$}=s(3),et=s(20),tt=i.exports=function(j={}){if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(it){this.emit("error",it,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(let st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){function _(et){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(et)}function $(et,tt){for(var j=0;j<tt.length;j++){var it=tt[j];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(et,it.key,it)}}i.exports=function(){function et(it){if(function(st,ht){if(!(st instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,et),!it)throw new Error("Logger is required for profiling.");this.logger=it,this.start=Date.now()}var tt,j;return tt=et,(j=[{key:"done",value:function(){for(var it=arguments.length,st=new Array(it),ht=0;ht<it;ht++)st[ht]=arguments[ht];typeof st[st.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),st.pop());var _t=_(st[st.length-1])==="object"?st.pop():{};return _t.level=_t.level||"info",_t.durationMs=Date.now()-this.start,this.logger.write(_t)}}])&&$(tt.prototype,j),et}()},function(i,o,s){(function(_){const $=s(209),{MESSAGE:et}=s(3),tt=s(35);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$((it,st={})=>(it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it))}).call(this,s(5).Buffer)},function(i,o,s){class _ extends Error{constructor(et){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${et.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,_)}}i.exports=$=>{if($.length>2)throw new _($);function et(j={}){this.options=j}function tt(j){return new et(j)}return et.prototype.transform=$,tt.Format=et,tt}},function(i,o,s){function _(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")}function $(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var et=s(88);i.exports=function(){function tt(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,tt),this.loggers=new Map,this.options=st}var j,it;return j=tt,(it=[{key:"add",value:function(st,ht){var _t=this;if(!this.loggers.has(st)){var gt=(ht=Object.assign({},ht||this.options)).transports||this.options.transports;ht.transports=gt?gt.slice():[];var ft=et(ht);ft.on("close",function(){return _t._delete(st)}),this.loggers.set(st,ft)}return this.loggers.get(st)}},{key:"get",value:function(st,ht){return this.add(st,ht)}},{key:"has",value:function(st){return!!this.loggers.has(st)}},{key:"close",value:function(st){var ht=this;if(st)return this._removeLogger(st);this.loggers.forEach(function(_t,gt){return ht._removeLogger(gt)})}},{key:"_removeLogger",value:function(st){this.loggers.has(st)&&(this.loggers.get(st).close(),this._delete(st))}},{key:"_delete",value:function(st){this.loggers.delete(st)}}])&&$(j.prototype,it),tt}()},function(i,o,s){(function(_){const $=s(52),et=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;i.exports=function(tt,j,it,st){let ht,_t,gt=!1,ft=!1;const ut=s(94);function yt(Ft){st(j,Ft)}function Et(Ft,Rt){let Ot=`"${j}" ${Rt}`;throw Ft&&(Ot=`${Ot}`),_t&&(Ot=`${Ot}. An example of a valid value would be: ${_t}`),new $(Ot)}const Mt={convertFromBase64:function(){return yt("marking for base64 conversion"),gt=!0,Mt},default:function(Ft){if(typeof Ft=="number")ht=Ft.toString();else if(Array.isArray(Ft)||typeof Ft=="object"&&Ft!==null)ht=JSON.stringify(Ft);else{if(typeof Ft!="string")throw new $("values passed to default() must be of Number, String, Array, or Object type");ht=Ft}return yt(`setting default value to "${ht}"`),Mt},required:function(Ft){return Ft===void 0?(yt("marked as required"),ft=!0):(yt(`setting required flag to ${Ft}`),ft=Ft),Mt},example:function(Ft){return _t=Ft,Mt}};return Object.entries(__spreadValues(__spreadValues({},ut),it)).forEach(([Ft,Rt])=>{Mt[Ft]=function(Ot){return function(){let pt=tt[j];if(yt(`will be read from the environment using "${Ot.name}" accessor`),pt===void 0)if(ht===void 0&&ft)yt("was not found in the environment, but is required to be set"),Et(void 0,"is a required variable, but it was not set");else{if(ht===void 0)return void yt("was not found in the environment, but is not required. returning undefined");yt(`was not found in the environment, parsing default value "${ht}" instead`),pt=ht}ft&&(yt("verifying variable value is not an empty string"),pt.trim().length===0&&Et(void 0,"is a required variable, but its value was empty")),gt&&(yt("verifying variable is a valid base64 string"),pt.match(et)||Et(pt,"should be a valid base64 string if using convertFromBase64"),yt("converting from base64 to utf8 string"),pt=_.from(pt,"base64").toString());const Lt=[pt].concat(Array.prototype.slice.call(arguments));try{yt(`passing value "${pt}" to "${Ot.name}" accessor`);const nn=Ot.apply(Ot,Lt);return yt(`parsed successfully, returning ${nn}`),nn}catch(nn){Et(pt,nn.message)}}}(Rt)}),Mt}}).call(this,s(5).Buffer)},function(i,o,s){const _=s(33);i.exports=function($,et){return et=et||",",$.length?_($).split(et).filter(Boolean):[]}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if($!=="false"&&$!=="true")throw new Error('should be either "true", "false", "TRUE", or "FALSE"');return $!=="false"}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if(["false","0","true","1"].indexOf($)===-1)throw new Error('should be either "true", "false", "TRUE", "FALSE", 1, or 0');return!($==="0"||$==="false")}},function(i,o,s){const _=s(95);i.exports=function($){var et=_($);if(et>65535)throw new Error("cannot assign a port number greater than 65535");return et}},function(i,o,s){const _=s(33);i.exports=function($,et){const tt=_($);if(et.indexOf(tt)<0)throw new Error(`should be one of [${et.join(", ")}]`);return tt}},function(i,o,s){const _=s(54);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative float");return et}},function(i,o,s){const _=s(54);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive float");return et}},function(i,o,s){const _=s(53);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative integer");return et}},function(i,o,s){const _=s(55);i.exports=function($){var et=_($);if(!Array.isArray(et))throw new Error("should be a parseable JSON Array");return et}},function(i,o,s){const _=s(55);i.exports=function($){var et=_($);if(Array.isArray(et))throw new Error("should be a parseable JSON Object");return et}},function(i,o,s){i.exports=function(_,$){try{RegExp(void 0,$)}catch{throw new Error("invalid regexp flags")}try{return new RegExp(_,$)}catch{throw new Error("should be a valid regexp")}}},function(i,o,s){const _=s(96);i.exports=function($){return _($).toString()}},function(i,o,s){const _=s(33),$=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021\u0023-\u005b\u005d-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021-\u005a\u0053-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])+)\])$/;i.exports=function(et){const tt=_(et);if(!$.test(tt))throw new Error("should be a valid email address");return tt}},function(i,o,s){i.exports=function(_,$){return function(et,tt){$&&$.match(/prod|production/)||_(`env-var (${et}): ${tt}`)}}},function(i,o,s){(function(_){(function(){var $,et,tt,j,it,st;typeof performance<"u"&&performance!==null&&performance.now?i.exports=function(){return performance.now()}:_!=null&&_.hrtime?(i.exports=function(){return($()-it)/1e6},et=_.hrtime,j=($=function(){var ht;return 1e9*(ht=et())[0]+ht[1]})(),st=1e9*_.uptime(),it=j-st):Date.now?(i.exports=function(){return Date.now()-tt},tt=Date.now()):(i.exports=function(){return new Date().getTime()-tt},tt=new Date().getTime())}).call(this)}).call(this,s(2))},function(i,o,s){(function(_){(function($){function et(j){if((j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextEncoder': The encoding label provided ('"+j+"') is invalid.")}function tt(j,it){if(it=it===void 0?{fatal:!1}:it,(j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+j+"') is invalid.");if(it.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}if($.TextEncoder&&$.TextDecoder)return!1;Object.defineProperty(et.prototype,"encoding",{value:"utf-8"}),et.prototype.encode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");it=0;for(var st=j.length,ht=0,_t=Math.max(32,st+(st>>1)+7),gt=new Uint8Array(_t>>3<<3);it<st;){var ft=j.charCodeAt(it++);if(55296<=ft&&56319>=ft){if(it<st){var ut=j.charCodeAt(it);(64512&ut)==56320&&(++it,ft=((1023&ft)<<10)+(1023&ut)+65536)}if(55296<=ft&&56319>=ft)continue}if(ht+4>gt.length&&(_t+=8,_t=(_t*=1+it/j.length*2)>>3<<3,(ut=new Uint8Array(_t)).set(gt),gt=ut),(4294967168&ft)==0)gt[ht++]=ft;else{if(!(4294965248&ft))gt[ht++]=ft>>6&31|192;else if(!(4294901760&ft))gt[ht++]=ft>>12&15|224,gt[ht++]=ft>>6&63|128;else{if(4292870144&ft)continue;gt[ht++]=ft>>18&7|240,gt[ht++]=ft>>12&63|128,gt[ht++]=ft>>6&63|128}gt[ht++]=63&ft|128}}return gt.slice(0,ht)},Object.defineProperty(tt.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(tt.prototype,"fatal",{value:!1}),Object.defineProperty(tt.prototype,"ignoreBOM",{value:!1}),tt.prototype.decode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");it=0;for(var st=(j=new Uint8Array(j)).length,ht=[];it<st;){var _t=j[it++];if(_t===0)break;if(!(128&_t))ht.push(_t);else if((224&_t)==192){var gt=63&j[it++];ht.push((31&_t)<<6|gt)}else if((240&_t)==224){gt=63&j[it++];var ft=63&j[it++];ht.push((31&_t)<<12|gt<<6|ft)}else(248&_t)==240&&(65535<(_t=(7&_t)<<18|(gt=63&j[it++])<<12|(ft=63&j[it++])<<6|63&j[it++])&&(_t-=65536,ht.push(_t>>>10&1023|55296),_t=56320|1023&_t),ht.push(_t))}return String.fromCharCode.apply(null,ht)},$.TextEncoder=et,$.TextDecoder=tt})(typeof window<"u"?window:_!==void 0?_:this)}).call(this,s(6))},function(i,o,s){s.r(o),s.d(o,"AuthClient",function(){return et}),s.d(o,"RtcSignalingClient",function(){return j}),s.d(o,"Credentials",function(){return Vt}),s.d(o,"IRtcStream",function(){}),s.d(o,"SignalingPromiseClient",function(){return Xt.SignalingPromiseClient}),s.d(o,"IRtcClientConfigurationV1",function(){}),s.d(o,"IRtcClientConfiguration",function(){}),s.d(o,"IRtcConnectionStatsInfo",function(){}),s.d(o,"IRtcSendConfiguration",function(){}),s.d(o,"IRtcSessionMetricsMessageCounts",function(){}),s.d(o,"IRtcStreamMessage",function(){}),s.d(o,"IRtcStreamPayload",function(){}),s.d(o,"IStreamControl",function(){}),s.d(o,"RtcClient",function(){return as}),s.d(o,"RtcClientV1",function(){return tu}),s.d(o,"createRtcStreamMessage",function(){return Gr});var _=s(28),$=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class et extends _.a{adminSignup($t,en){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/admin-signup",{token:en,method:"POST",body:JSON.stringify($t)})})}login($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login",{method:"POST",body:JSON.stringify($t),allowUnsafeRetries:!0})})}loginWithGoogleToken($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login-google",{method:"POST",body:JSON.stringify($t),allowUnsafeRetries:!0})})}refresh($t,en){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:$t,tokenExpirationSeconds:en}),allowUnsafeRetries:!0})})}respondToNewPasswordRequiredChallenge($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/respond-to-new-password-required-challenge",{method:"POST",body:JSON.stringify($t)})})}forgotPassword($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/forgot-password",{method:"POST",body:JSON.stringify({email:$t})})})}confirmForgotPassword($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/confirm-forgot-password",{method:"POST",body:JSON.stringify($t)})})}resendInvitation($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/resend-invitation",{method:"POST",body:JSON.stringify({email:$t})})})}changePassword({token:$t,refreshToken:en,currentPassword:dn,newPassword:Cn}){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/change-password",{token:$t,method:"POST",body:JSON.stringify({refreshToken:en,currentPassword:dn,newPassword:Cn})})})}getDeviceCredentials($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/device-credentials",{token:$t,method:"POST",allowUnsafeRetries:!0})})}impersonate($t,en){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/impersonate",{token:$t,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({userId:en})})})}createServiceAccount($t,en,dn,Cn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/service-account",{token:$t,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({name:en,roleId:dn,tags:Cn})})})}getFeatures($t){return $(this,void 0,void 0,function*(){return(yield this.fetch("auth/features",{token:$t})).features})}}var tt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class j extends _.a{createPeer($t,en){return tt(this,void 0,void 0,function*(){return yield this.fetch("peers",{token:$t,method:"POST",body:JSON.stringify(en)})})}getPeers($t){return tt(this,void 0,void 0,function*(){return(yield this.fetch("peers",{token:$t})).items})}refreshPeer($t,en){return tt(this,void 0,void 0,function*(){yield this.fetch(`peers/${en}/refresh`,{token:$t,method:"POST",allowUnsafeRetries:!0})})}createSession($t,en){return tt(this,void 0,void 0,function*(){return yield this.fetch("sessions",{token:$t,method:"POST",body:JSON.stringify(en)})})}refreshSession($t,en){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${en}/refresh`,{token:$t,method:"POST",allowUnsafeRetries:!0})})}deleteSession($t,en){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${en}`,{token:$t,method:"DELETE",allowUnsafeRetries:!0})})}getSessions($t){return tt(this,void 0,void 0,function*(){return(yield this.fetch("sessions",{token:$t})).items})}getIceServers($t){return tt(this,void 0,void 0,function*(){return(yield this.fetch("ice-servers",{token:$t})).items})}addSignals($t,en,dn){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${en}/add-signals`,{token:$t,method:"POST",body:JSON.stringify(dn)})})}takeSignals($t,en){return tt(this,void 0,void 0,function*(){return(yield this.fetch(`sessions/${en}/take-signals`,{token:$t,method:"POST"})).items})}}var it=s(1),st=s(8),ht=s(14),_t=s.n(ht),gt=s(104),ft=s.n(gt),ut=s(0),yt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Et{constructor($t){this.name="LogReporter",this.type="simple",this.message=$t}send($t){return yt(this,void 0,void 0,function*(){var en,dn;ut.a.info(this.message,(en=$t.reduce((Cn,On)=>Object.assign(Object.assign({},Cn),{[On.name]:On.stat}),{}),dn=Cn=>{const{sum:On,count:or}=Cn,ar=On/or;return Object.assign(Object.assign({},Cn),{average:ar})},Object.keys(en).reduce((Cn,On)=>Object.assign(Object.assign({},Cn),{[On]:dn(en[On])}),{})))})}}var Mt=s(4),Ft=s(39);function Rt(cr){return!!cr.match(/^[a-zA-Z0-9-_.,:?'"()@\/\\#$+ ]{1,255}$/)}var Ot=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};function pt({func:cr,delay:$t,immediate:en}){let dn=!1,Cn=setTimeout(function or(){return Ot(this,void 0,void 0,function*(){if(dn)return;const ar=new Date().getTime();try{On=cr(),yield On}finally{if(!dn){const nr=new Date().getTime();Cn=setTimeout(or,Math.max($t-(nr-ar),0))}}})},en?0:$t),On=Promise.resolve();return{stop(){return Ot(this,void 0,void 0,function*(){dn=!0,clearTimeout(Cn),yield On})}}}var Lt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};const nn=s(226),on=!!Mt.c,wt=new class{constructor(cr){this.samplePeriodSeconds=60,this.buffer={},this.reporters=[],this.flushInterval=pt({func:()=>this.flushStats(),delay:this.samplePeriodSeconds*it.a.second}),this.tags=this.filterTags((cr==null?void 0:cr.tags)||{app:Mt.a,version:Mt.j,namespace:Mt.i,instanceId:Ft.a})}shutdown(){return Lt(this,void 0,void 0,function*(){yield this.flushInterval.stop(),yield this.flushStats(),yield Object(st.a)(2*it.a.second)})}aggregate(cr,$t,en){this.addToBuffer(this.buffer,this.encodeKey({metric:cr,tags:this.filterTags(en||{})}),typeof $t=="number"?{min:$t,max:$t,sum:$t,count:1}:$t)}increment(cr,$t){this.aggregate(cr,1,$t)}timer(cr,$t,en){return Lt(this,void 0,void 0,function*(){const dn=nn(),Cn=yield $t(),On=nn();return this.aggregate(cr,On-dn,en),Cn})}registerStatsReporter(cr){this.reporters.push(cr)}setTag(cr,$t){const en=this.filterTags({[cr]:$t});this.tags=Object.assign(Object.assign({},this.tags),en)}addToBuffer(cr,$t,en){if(cr[$t]){const{min:dn,max:Cn,sum:On,count:or}=cr[$t];cr[$t]={min:Math.min(dn,en.min),max:Math.max(Cn,en.max),sum:On+en.sum,count:or+en.count}}else cr[$t]=en}write(cr){return Lt(this,void 0,void 0,function*(){yield Promise.all(this.reporters.map($t=>Lt(this,void 0,void 0,function*(){let en;const dn={};switch($t.type){case"simple":for(const[On,or]of Object.entries(cr)){const{metric:ar}=this.decodeKey(On);this.addToBuffer(dn,this.encodeKey({metric:ar}),or)}en=dn;break;case"tagged":en=cr;break;default:(function(On){throw new Error(`Unreachable type encountered (${On})`)})($t.type)}const Cn=Object.entries(en);if(Cn.length>0)return $t.send(Cn.map(([On,or])=>{const{metric:ar,tags:nr}=this.decodeKey(On);return{name:ar,tags:Object.assign(Object.assign({},nr),this.tags),stat:or}}),this.samplePeriodSeconds).catch(On=>{ut.a.debug(`Failed to write stats to ${$t.name}`,{error:On})})})))})}flushStats(){return Lt(this,void 0,void 0,function*(){yield this.write(this.buffer),this.buffer={}})}encodeKey(cr){return _t()(Object.assign(Object.assign({},cr),Object.keys(cr.tags||{}).length>0?{tags:cr.tags}:{}))}decodeKey(cr){return JSON.parse(cr)}filterTags(cr){return Object.entries(cr||{}).reduce(($t,[en,dn])=>(Rt(en)&&Rt(dn)&&($t[en]=dn),$t),{})}};on||["local","on-prem"].includes(Mt.i)||wt.registerStatsReporter(new Et("stats"));var xt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Nt extends class{constructor($t){this.options=$t,this.cache=new ft.a(Object.assign(Object.assign(Object.assign({},$t.dispose||$t.disposeAfter?{ttlAutopurge:!0}:{}),$t),{dispose:(...en)=>{var dn;en[2]==="evict"&&wt.increment("lru-eviction",{name:$t.name}),(dn=$t.dispose)===null||dn===void 0||dn.call($t,...en)},disposeAfter:(...en)=>{var dn;this.updateStats(),(dn=$t.disposeAfter)===null||dn===void 0||dn.call($t,...en)}})),this.stringify=$t.fastStringify?JSON.stringify:_t.a}set($t,en,dn){const Cn=this.stringify($t);if(!this.cache.set(Cn,en,{ttl:dn})){const On=this.cache.sizeCalculation?this.cache.sizeCalculation(en,Cn):"unknown";throw Error(`Value too large (${On} > ${this.cache.max})`)}this.updateStats()}get($t){const{name:en}=this.options,dn=this.stringify($t),Cn=this.cache.getRemainingTTL(dn);return Cn<=0?wt.increment("cache-miss",{name:en}):Cn!==1/0&&wt.aggregate("cache-item-ttl",Cn,{name:en}),this.cache.get(dn)}delete($t){this.cache.delete(this.stringify($t))}peek($t){return this.cache.peek(this.stringify($t))}size(){return this.cache.size}clear(){this.cache.clear()}forEach($t){this.cache.forEach($t)}purgeStale(){return this.cache.purgeStale()}updateStats(){const{name:$t}=this.options;wt.aggregate("cache-item-count",this.cache.size,{name:$t}),this.cache.calculatedSize!==void 0&&wt.aggregate("cache-length",this.cache.calculatedSize,{name:$t})}}{constructor($t){if(super($t),this.expireRejectedPromiseValues=$t.expireRejectedPromiseValues===void 0||$t.expireRejectedPromiseValues,this.rejectedPromiseValueTtl=$t.rejectedPromiseValueTtl!==void 0?$t.rejectedPromiseValueTtl:it.a.second,this.rejectedPromiseValueTtl<0)throw new Error("rejectedPromiseValueTtl must not be negative")}set($t,en,dn){super.set($t,en,dn),this.expireRejectedPromiseValues&&en.catch(()=>xt(this,void 0,void 0,function*(){yield Object(st.a)(this.rejectedPromiseValueTtl),this.peek($t)===en&&this.delete($t)}))}}var Tt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Vt{constructor($t,en,dn){this.authClient=$t,this.email=en,this.password=dn,this.tokenTtlMs=1*it.a.hour,this.tokenCache=new Nt({name:"Credentials-tokenCache",max:100,ttl:this.tokenTtlMs-5*it.a.minute,fastStringify:!0})}getToken(){return Tt(this,void 0,void 0,function*(){let $t=this.tokenCache.get(this.email);return $t||($t=(()=>Tt(this,void 0,void 0,function*(){const{authentication:en}=yield this.authClient.login({email:this.email,password:this.password,tokenExpirationSeconds:this.tokenTtlMs/it.a.second});if(!en)throw new Error("User account not verified.");return en.accessToken}))(),this.tokenCache.set(this.email,$t)),$t})}}var Xt=s(97),Gt=s(40),Ut=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Ht extends Gt.a{constructor($t){super($t)}postLanRtcOffer($t){return Ut(this,void 0,void 0,function*(){return yield this.fetch("v1/lan-rtc-offer",{method:"POST",body:JSON.stringify($t)})})}}var qt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};function Pt(cr){return qt(this,void 0,void 0,function*(){return(yield Promise.all(cr.map($t=>$t.catch(en=>en)))).filter($t=>$t instanceof Error)})}function St(cr){if(cr!==void 0)return cr;throw new Error("Value is undefined")}function Zt(cr,$t){const en=cr.reduce((dn,Cn)=>[...dn,...Cn.urls],[]).filter(dn=>tn(dn,$t)).sort(dn=>mn(dn,"udp")?-1:0).shift();if(en)return Object.assign(Object.assign({},St(cr.find(dn=>dn.urls.includes(en)))),{urls:[en]})}function tn(cr,$t){switch($t){case"stun":return/^stuns?:/.test(cr);case"turn":return/^turns?:/.test(cr)}}function mn(cr,$t){return cr.endsWith(`transport=${$t}`)}var yn=s(9),vn=s(24),un=s(229),rn=s(29);const It={ordered:!1,maxPacketLifeTime:300*it.a.millisecond},Dt={ordered:!0},Kt={ordered:!0},gn={ordered:!1,maxRetransmits:0},hn={ordered:!1,maxRetransmits:0},xn=cr=>"received"in cr&&cr.received!==void 0,Mn=cr=>!("received"in cr)||cr.received===void 0,qn=2*it.a.second;function Ir(cr,$t={}){const en=Array.from(cr.values()),dn=en.filter(xn),Cn=dn.length>0,On=Math.max(...dn.map($n=>$n.received));let or;if(Cn){const $n=en.length,Fn=dn.length,ro=dn.map(ur=>ur.received-ur.sent),{standardDeviation:Ln,mean:En,jitter:Rn}=function(ur){const mr=ur.length;if(mr===0)return{mean:NaN,standardDeviation:-1,jitter:NaN};const hr=ur.reduce((Qr,Hr)=>Qr+Hr,0)/mr,wr=Math.sqrt(ur.map(Qr=>Math.pow(Qr-hr,2)).reduce((Qr,Hr)=>Qr+Hr)/mr);let Br=0;for(let Qr=1;Qr<mr;++Qr)Br+=Math.abs(ur[Qr]-ur[Qr-1]);return{mean:hr,standardDeviation:wr,jitter:Br/(mr-1)}}(ro),Hn=en.filter(ur=>ur.sent<On-qn),Qn=Hn.filter(Mn),lr=Qn.length===0?0:Qn.length/Hn.length;or={pingsSent:$n,pongsReceived:Fn,average:En,standardDeviation:Ln,jitter:Rn,max:Math.max(...ro),min:Math.min(...ro),loss:lr}}else or=null;const{temporalNow:ar=Date.now()}=$t,nr=(Cn?On:ar)-4*qn;return Array.from(cr.entries()).forEach($n=>{const[Fn,ro]=$n;ro.sent<nr&&cr.delete(Fn)}),or}function _i({entityId:cr,streamName:$t,streamType:en}){return`${cr}.${$t}.${en}`}var Ur=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class fo{constructor($t,en){this.sessionId=$t,this.connection=en,this.counts={localSent:new Map,localReceived:new Map,remoteSent:new Map,remoteReceived:new Map},this.sessionId=$t,this.connection=en}updateRemoteMessagesCounts($t){if($t.payload.streamsInfo){this.counts.remoteSent=new Map,this.counts.remoteReceived=new Map;for(const en of $t.payload.streamsInfo.items)this.counts.remoteSent.set(en.streamId,en.sentCount),this.counts.remoteReceived.set(en.streamId,en.receivedCount)}}getLocalStreamsInfo($t){const{localSent:en,localReceived:dn}=this.counts;return{items:[...new Set([...en.keys(),...dn.keys()])].map(Cn=>{var On,or;return{streamId:Cn,sentCount:(On=en.get(Cn))!==null&&On!==void 0?On:0,receivedCount:(or=dn.get(Cn))!==null&&or!==void 0?or:0}}),timestamp:$t}}incrementLocalSent($t){const{localSent:en}=this.counts,dn=_i($t.header.stream);en.set(dn,(en.get(dn)||0)+1)}incrementLocalReceived($t){const{localReceived:en}=this.counts,dn=_i($t.header.stream),Cn=en.get(dn)||0;if(Cn===0){const{streamName:On,streamType:or}=$t.header.stream;ut.a.debug("RTC client received first message for stream",{streamName:On,streamType:or})}en.set(dn,Cn+1)}uploadMetrics(){return Ur(this,void 0,void 0,function*(){const{sessionId:$t}=this,en=yield this.connection.peerConnection.getStats(),dn={};en.forEach($n=>dn[$n.id]=$n),ut.a.debug("rtc-stats",Object.assign(Object.assign({},dn),{sessionId:$t}));const{localSent:Cn,localReceived:On,remoteSent:or,remoteReceived:ar}=this.counts,nr=[...new Set([...Cn.keys(),...On.keys()])].reduce(($n,Fn)=>{const ro=Cn.get(Fn),Ln=On.get(Fn),En=or.get(Fn),Rn=ar.get(Fn);return Object.assign(Object.assign({},$n),{[`local-${Fn}-sent`]:ro,[`local-${Fn}-received`]:Ln,[`remote-${Fn}-sent`]:En,[`remote-${Fn}-received`]:Rn})},{sessionId:$t});ut.a.debug("rtc-message-report",Object.assign({deviceId:this.connection.getRemoteDeviceId()},nr))})}}function Gr(cr,$t,en){return{header:{stream:cr,created:Date.now(),frameId:en||""},payload:$t}}function Yr(cr){return new Set(["disconnected","failed","closed"]).has(cr.iceConnectionState)}function to(cr){switch(cr.header.stream.streamType){case"twist":{const{twist:$t}=cr.payload;if(!$t)throw Error("twist not in payload of RTC message with type twist");return{header:cr.header,payload:{twist:{linear:Object.assign({x:0,y:0,z:0},$t.linear),angular:Object.assign({x:0,y:0,z:0},$t.angular)}}}}case"pose":{const{pose:$t}=cr.payload;if(!$t)throw Error("pose not in payload of RTC message with type pose");return{header:cr.header,payload:{pose:{translation:Object.assign({x:0,y:0,z:0},$t.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},$t.rotation)}}}}case"pose-with-covariance":{const{poseWithCovariance:$t}=cr.payload;if(!$t)throw Error("poseWithCovariance not in payload of RTC message with type pose-with-covariance");const en=new Array(36).fill(0);return $t.covariance.forEach((dn,Cn)=>{if(Cn>=36)throw Error("covariance contains more than 36 elements");en[Cn]=dn}),{header:cr.header,payload:{poseWithCovariance:{pose:{translation:Object.assign({x:0,y:0,z:0},$t.pose.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},$t.pose.rotation)},covariance:en}}}}case"point":{const{point:$t}=cr.payload;if(!$t)throw Error("point not in payload of RTC message with type point");return{header:cr.header,payload:{point:Object.assign({x:0,y:0,z:0},$t)}}}default:return cr}}var Ro=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Mo{constructor($t,en,dn){this.peerConnection=$t,this.config=en,this.dataChannelNotifier=dn,this.connectTimeoutMs=20*it.a.second,this.iceGatheringTimeoutMs=15*it.a.second,this.pingUpdateTimeoutMs=1*it.a.second,this.pingV2UpdateTimeoutMs=250*it.a.millisecond,this.pingV2MetricsGatherTimeoutMs=1*it.a.second,this.streamsInfoUpdateTimeoutMs=2*it.a.second,this.reassemblyTimeoutMs=500*it.a.millisecond,this.reassemblyTableCleanupMs=1*it.a.second,this.heartbeatTimeoutMs=20*it.a.millisecond,this.streamLatestTimestamp=new Map,this.reassemblyTable=new Map,this.reassemblyTableLastTimestamp=new Map,this.closeCalled=!1,this.gotOffer=!1,this.hasIceCandidate=!1,this.pingV2Map=new Map,this.sendPingV2=()=>{const{latestTryOnceStreamChannel:On}=this;if(!On)return;const or=new Date().getTime(),ar=Object(un.a)();this.sendSystemMessage(On,{type:"ping-v2",payload:{timestamp:or,id:ar}}),this.pingV2Map.set(ar,{sent:or})},this.gatherPingV2Metrics=()=>{const On=Ir(this.pingV2Map);On&&(this.pingInfo=On,wt.aggregate("rtc-ping-average",On.average),wt.aggregate("rtc-ping-loss",On.loss),wt.aggregate("rtc-jitter",On.jitter))};const{isOffer:Cn}=en.baseConfig;Cn?this.initializeChannels($t):$t.ondatachannel=On=>{switch(On.channel.label){case"stream.latest-ttl":this.latestTtlStreamChannel=On.channel;break;case"stream.reliable":this.reliableStreamChannel=On.channel;break;case"stream.latest-reliable":this.latestReliableStreamChannel=On.channel;break;case"stream.latest-try-once":this.latestTryOnceStreamChannel=On.channel;break;case"heartbeat":return void(this.heartbeatChannel=On.channel);default:return void this.dataChannelNotifier(On.channel)}this.setupChannel(On.channel)},this.pingUpdateTimeout=setInterval(()=>{const{reliableStreamChannel:On}=this;On&&this.sendSystemMessage(On,{type:"ping"})},this.pingUpdateTimeoutMs),this.pingV2UpdateTimeout=setInterval(this.sendPingV2,this.pingV2UpdateTimeoutMs),this.pingV2MetricsGatherTimeout=setInterval(this.gatherPingV2Metrics,this.pingV2MetricsGatherTimeoutMs),this.streamsInfoUpdateTimeout=setInterval(()=>{const{latestTtlStreamChannel:On}=this;On&&this.sendSystemMessage(On,{type:"streams-info"})},this.streamsInfoUpdateTimeoutMs),this.reassemblyTableCleanupTimeout=setInterval(()=>{const On=new Date().getTime();this.reassemblyTableLastTimestamp.forEach((or,ar,nr)=>{On>ar+this.reassemblyTimeoutMs&&this.reassemblyTable.delete(or)})},this.reassemblyTableCleanupMs),this.heartbeatTimeout=setInterval(()=>{const{heartbeatChannel:On}=this;On&&On.readyState==="open"&&On.send(new Uint8Array([1]))},this.heartbeatTimeoutMs)}handleSignal($t){return Ro(this,void 0,void 0,function*(){const{peerConnection:en}=this,{track:dn}=this.config.baseConfig,Cn=(()=>{try{return JSON.parse($t.getPayload())}catch{return}})();if(!Cn)return void ut.a.error("Received unparseable signal.");ut.a.debug("Handling signal",{description:Cn});const{sdp:On,type:or}=Cn;if(!On||!or)return void ut.a.warn("Received non-SDP signal");const{signalingState:ar,connectionState:nr}=en;if(ar!=="stable"||nr!=="connected")if(en.remoteDescription)ut.a.warn(`Received SDP after remote description was set: ${On}`);else{if(or==="offer"){if(ar!=="stable")return void ut.a.warn("Received offer SDP when signaling is ongoing.");yield en.setRemoteDescription(Cn);const $n=yield en.createAnswer();yield en.setLocalDescription($n);const Fn=$t.clone();return dn==null||dn("Answer Received",Fn),Fn.setPayload(JSON.stringify($n)),Fn.setReceiverId($t.getSenderId()),Fn.setSenderId($t.getReceiverId()),Fn}if(or==="answer"){if(ar==="stable")return void ut.a.warn("Received answer SDP when signaling hasn't started.");yield en.setRemoteDescription(Cn)}}else ut.a.warn(`Received SDP when already connected: ${On}`)})}send($t,en){const dn=this.getChannelFromLabel(en.channelLabel);dn?this.sendOnChannel(dn,$t):ut.a.warn("Send called with unexpected channel label",{channelLabel:en.channelLabel})}controlRemoteStream($t){this.sendSystemMessage(St(this.reliableStreamChannel),{type:"stream-control",streamControl:$t})}isActive(){return new Set(["new","checking","connected","completed"]).has(this.peerConnection.iceConnectionState)||this.isReady()}isReady(){const{reliableStreamChannel:$t,latestTtlStreamChannel:en,latestTryOnceStreamChannel:dn,latestReliableStreamChannel:Cn}=this;return($t==null?void 0:$t.readyState)==="open"&&(en==null?void 0:en.readyState)==="open"&&(dn==null?void 0:dn.readyState)==="open"&&(Cn==null?void 0:Cn.readyState)==="open"}close(){return Ro(this,void 0,void 0,function*(){if(this.closeCalled)return;this.closeCalled=!0,this.sessionMetrics&&(yield this.sessionMetrics.uploadMetrics()),Vo(this.pingUpdateTimeout),Vo(this.pingV2UpdateTimeout),Vo(this.pingV2MetricsGatherTimeout),Vo(this.reassemblyTableCleanupTimeout),Vo(this.streamsInfoUpdateTimeout),Vo(this.heartbeatTimeout);const{peerConnection:$t,reliableStreamChannel:en,latestTtlStreamChannel:dn,latestTryOnceStreamChannel:Cn,latestReliableStreamChannel:On}=this;$t.close(),en==null||en.close(),dn==null||dn.close(),Cn==null||Cn.close(),On==null||On.close()})}getPing(){return this.pingTimeMs}getPingInfo(){return this.pingInfo}getLastMessageTimestamp(){return this.lastMessageTimestamp}getSessionCreatedTimestamp(){var $t;return($t=this.config.remoteConfig)===null||$t===void 0?void 0:$t.sessionCreatedTimestamp}setSessionCreatedTimestamp($t){this.config.remoteConfig&&(this.config.remoteConfig.sessionCreatedTimestamp=$t)}getSessionId(){var $t;return($t=this.config.remoteConfig)===null||$t===void 0?void 0:$t.sessionId}setSessionId($t){this.config.remoteConfig&&(this.config.remoteConfig.sessionId=$t,this.sessionMetrics=new fo($t,this))}getRemotePeerId(){return this.config.baseConfig.remotePeerId}getRemoteDeviceId(){var $t;return($t=this.config.baseConfig)===null||$t===void 0?void 0:$t.remoteDeviceId}setRemoteDeviceId($t){this.config.baseConfig.remoteDeviceId=$t}getSessionMetricsMessageCounts(){var $t;return($t=this.sessionMetrics)===null||$t===void 0?void 0:$t.counts}getConnectionStatsInfo(){return Ro(this,void 0,void 0,function*(){const{peerConnection:$t}=this;if(!$t)return;const en=yield $t.getStats(null),dn=[];en.forEach(nr=>{dn.push(nr)});const Cn=dn.find(nr=>nr.type==="transport");if(!Cn)return;const On=dn.find(nr=>(nr.type==="candidate-pair"||nr.type==="candidatepair")&&nr.id===Cn.selectedCandidatePairId);if(!On)return;const or=dn.find(nr=>nr.id===On.localCandidateId),ar=dn.find(nr=>nr.id===On.remoteCandidateId);return or&&ar&&(or.address=or.address||or.ip,ar.address=ar.address||ar.ip,or.address!==void 0&&ar.address!==void 0)?{transport:Cn,localCandidate:or,remoteCandidate:ar}:void 0})}initializeChannels($t){this.heartbeatChannel=$t.createDataChannel("heartbeat",hn),this.heartbeatChannel.binaryType="arraybuffer",this.latestTtlStreamChannel=$t.createDataChannel("stream.latest-ttl",It),this.latestTtlStreamChannel.binaryType="arraybuffer",this.reliableStreamChannel=$t.createDataChannel("stream.reliable",Dt),this.reliableStreamChannel.binaryType="arraybuffer",this.latestReliableStreamChannel=$t.createDataChannel("stream.latest-reliable",Kt),this.latestReliableStreamChannel.binaryType="arraybuffer",this.latestTryOnceStreamChannel=$t.createDataChannel("stream.latest-try-once",gn),this.latestTryOnceStreamChannel.binaryType="arraybuffer",this.setupChannel(this.latestTtlStreamChannel),this.setupChannel(this.reliableStreamChannel),this.setupChannel(this.latestReliableStreamChannel),this.setupChannel(this.latestTryOnceStreamChannel)}getOffer(){var $t,en,dn;return Ro(this,void 0,void 0,function*(){const{gotOffer:Cn}=this,{peerConnection:On,config:or}=this;if(this.config.baseConfig.isLan)throw new Error('"getOffer" method can only be called with internet connections. LAN connections should call the "getLanOffer" method.');const ar=($t=this.config.remoteConfig)===null||$t===void 0?void 0:$t.sessionId;if(Cn)return void ut.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,Yr(this.peerConnection))return void ut.a.debug("Failed to generate offer because the peer connection was inactive.");const nr=or.baseConfig.track;On.onicecandidate=()=>{this.hasIceCandidate=!0},On.oniceconnectionstatechange=()=>Ro(this,void 0,void 0,function*(){const En=On.iceConnectionState;if(En==="connected"||En==="completed"){const Rn=yield this.getConnectionStatsInfo(),Hn=Rn?function(Qn){const lr=Qn.localCandidate.candidateType,ur=Qn.remoteCandidate.candidateType;return lr==="host"&&ur==="host"?"local":lr==="relay"||ur==="relay"?"TURN":"STUN"}(Rn):void 0;ut.a.info(`ICE connection state changed to ${En}`,{sessionId:ar,connectionStatsInfo:Rn,iceMode:Hn}),nr==null||nr("ICE connection state change",{iceConnectionState:En,sessionId:ar,connectionStatsInfo:Rn,iceMode:Hn})}}),yield On.setLocalDescription(yield On.createOffer());const $n=new Date().getTime();for(;;){const En=new Date().getTime()-$n;if(En>this.connectTimeoutMs)return void ut.a.debug("Failed to generate offer because ICE gathering timed out.");if(En>this.iceGatheringTimeoutMs&&this.hasIceCandidate){ut.a.debug("ICE gathering partially completed; proceeding",{iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En}),nr==null||nr("ICE gathering partially completed",{sessionId:ar,iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En});break}if(On.iceGatheringState==="complete"){ut.a.debug("ICE gathering complete",{iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En}),nr==null||nr("ICE gathering completed",{sessionId:ar,iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En});break}yield Object(st.a)(.1*it.a.second)}const Fn=(en=this.peerConnection.getConfiguration().iceServers)!==null&&en!==void 0?en:[];for(const En of Fn)En.credentialType=void 0;const ro=JSON.stringify(Fn),Ln=new yn.Signal;return Ln.setPayload(JSON.stringify(On.localDescription)),Ln.setSenderId(this.config.baseConfig.localPeerId),Ln.setReceiverId(this.config.baseConfig.remotePeerId),Ln.setIceServers(ro),Ln.setIceTransportPolicy((dn=this.peerConnection.getConfiguration().iceTransportPolicy)!==null&&dn!==void 0?dn:"all"),this.config.baseConfig.sessionType!==void 0?Ln.setSessionType(this.config.baseConfig.sessionType):Ln.setSessionType(yn.SessionType.TELEOP),ut.a.debug("Sending offer signal with description",{description:Ln.getPayload()}),Ln})}getLanOffer(){return Ro(this,void 0,void 0,function*(){const{peerConnection:$t,gotOffer:en}=this;if(!this.config.baseConfig.isLan)throw new Error('"getLanOffer" method can only be used with LAN connections. Internet connections should call the "getOffer" method.');if(en)return void ut.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,Yr(this.peerConnection))return void ut.a.debug("Failed to generate offer because the peer connection was inactive.");yield $t.setLocalDescription(yield $t.createOffer());const dn=new Date().getTime();for(;;){if(new Date().getTime()-dn>this.iceGatheringTimeoutMs)return void ut.a.debug("Failed to generate offer because ICE gathering timed out.");if($t.iceGatheringState==="complete")break;yield Object(st.a)(.1*it.a.second)}const Cn=$t.localDescription;if(Cn)return ut.a.debug("Sending LAN offer signal with description",{description:Cn}),Cn;ut.a.error("Failed to generate LAN offer description")})}handleLanAnswer($t){return Ro(this,void 0,void 0,function*(){const{peerConnection:en}=this;if(!this.config.baseConfig.isLan)throw new Error('"handleLanAnswer" method can only be used with LAN connections. Internet connections should call the "handleSignal" method.');yield en.setRemoteDescription($t)})}getChannelFromLabel($t){switch($t){case"stream.latest-ttl":return this.latestTtlStreamChannel;case"stream.reliable":return this.reliableStreamChannel;case"stream.latest-reliable":return this.latestReliableStreamChannel;case"stream.latest-try-once":return this.latestTryOnceStreamChannel}}sendOnChannel($t,en){let dn;try{dn=Object(rn.encode)(JSON.stringify(en))}catch(Cn){return void ut.a.warn("Failed to encode RTC message",{error:Cn})}try{$t.send(dn),this.sessionMetrics&&this.sessionMetrics.incrementLocalSent(en)}catch(Cn){ut.a.warn("Failed to send message to channel",{error:Cn,channel:$t.label})}}channelNotRecognized($t){return $t!==this.latestTtlStreamChannel&&$t!==this.latestReliableStreamChannel&&$t!==this.latestTryOnceStreamChannel&&$t!==this.reliableStreamChannel}setupChannel($t){$t.onmessage=en=>{if(this.channelNotRecognized($t))return void ut.a.warn("Received message on unrecognized data channel.");let dn;try{dn=JSON.parse(Object(rn.decode)(en.data))}catch(Cn){return void ut.a.warn("Received unparseable message on RTC stream data channel",{error:Cn,channel:$t.label})}dn.communicationType==="message-chunk"?this.receiveChannelMessageChunk($t,dn):this.receiveChannelMessage($t,dn)},$t.onerror=en=>{ut.a.warn(`Channel error: ${en.error}`,{error:en.error,sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onopen=()=>{ut.a.debug("Channel opened",{sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onclose=()=>{const en={bufferedAmount:$t.bufferedAmount,sessionId:this.getSessionId(),channelLabel:$t.label};this.closeCalled===!1?ut.a.debug("Unexpected channel closed",en):ut.a.debug("Channel closed",en)}}receiveChannelMessage($t,en){const{config:dn}=this,{remotePeerId:Cn}=this.config.baseConfig;this.lastMessageTimestamp=new Date().getTime(),en=to(en),this.sessionMetrics&&this.sessionMetrics.incrementLocalReceived(en),this.handleSystemMessage($t,en)||($t===this.latestTryOnceStreamChannel||$t===this.latestTtlStreamChannel||$t===this.latestReliableStreamChannel)&&!this.isLatestMessage(en)||dn.baseConfig.receive(Cn,en)}receiveChannelMessageChunk($t,en){const dn=this.reassemblyTable.get(en.id)||[];if(dn.push(en),dn.length===en.total){const Cn=function(On){const or=On.sort((ar,nr)=>ar.seq<nr.seq?-1:1).map(ar=>ar.part).reduce((ar,nr)=>ar+nr);try{return JSON.parse(or)}catch{return void ut.a.warn("Could not reassemble RTC message chunks")}}(dn);return Cn&&this.receiveChannelMessage($t,Cn),void this.reassemblyTable.delete(en.id)}this.reassemblyTable.set(en.id,dn),this.reassemblyTableLastTimestamp.set(en.id,new Date().getTime())}handleSystemMessage($t,en){var dn,Cn;const{config:On}=this,{baseConfig:or}=On,{remotePeerId:ar}=or;switch(en.header.stream.streamType){case"ping":return this.sendSystemMessage($t,{type:"pong",timestamp:St(en.payload.ping)}),!0;case"pong":{const nr=new Date().getTime()-St(en.payload.pong);return this.pingTimeMs=nr,wt.aggregate("rtc-ping-time",nr),!0}case"ping-v2":return this.sendPingV2(),!0;case"pong-v2":{const nr=St(en.payload.pongV2),$n=this.pingV2Map.get(nr.id);return($n==null?void 0:$n.sent)!==nr.timestamp?(ut.a.warn("Pong timestamp doesn't match stored value",{currentEntry:$n,pong:nr}),!0):(this.pingV2Map.set(nr.id,{sent:nr.timestamp,received:new Date().getTime()}),!0)}case"streams-info":{const{sessionMetrics:nr}=this,$n=(dn=en.payload.streamsInfo)===null||dn===void 0?void 0:dn.timestamp;return!!$n&&(nr==null||nr.updateRemoteMessagesCounts(en),(Cn=or.onStreamsInfoUpdate)===null||Cn===void 0||Cn.call(or,ar,$n),!0)}case"stream-control":return!0;default:return!1}}sendSystemMessage($t,en){var dn;const{localUserId:Cn,localPeerId:On}=this.config.baseConfig;if($t.readyState!=="open")return;const or={entityId:Cn??On,streamName:`$.${en.type}`,streamType:en.type};let ar;switch(en.type){case"ping":ar={ping:new Date().getTime()};break;case"pong":ar={pong:en.timestamp};break;case"ping-v2":ar={pingV2:en.payload};break;case"pong-v2":ar={pongV2:en.payload};break;case"stream-control":ar={streamControl:en.streamControl};break;case"streams-info":ar={streamsInfo:(dn=this.sessionMetrics)===null||dn===void 0?void 0:dn.getLocalStreamsInfo(new Date().getTime())}}this.sendOnChannel($t,Gr(or,ar))}isLatestMessage($t){const en=_i($t.header.stream),dn=(this.streamLatestTimestamp.get(en)||0)<=$t.header.created;return dn&&this.streamLatestTimestamp.set(en,$t.header.created),dn}}function Vo(cr){cr&&clearInterval(cr)}function Qo(cr){var $t,en;return{userId:($t=cr.getUserId())===null||$t===void 0?void 0:$t.getValue(),deviceId:(en=cr.getDeviceId())===null||en===void 0?void 0:en.getValue(),organizationId:cr.getOrganizationId(),id:cr.getPeerId(),capabilities:[],capabilitySet:{}}}var Io=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class as{constructor($t){this.config=$t,this.grpcCallDeadline=5*it.a.second,this.refreshIntervalDelayMs=2*it.a.second,this.iceServersTtl=30*it.a.minute,this.connections=[],this.localConnections=[],this.isConnectionInitiator=new Map,this.isOutgoingConnection=new Map,this.peerDataChannelListeners=[];const{refreshIntervalDelayMs:en}=this;this.refreshInterval=pt({func:()=>Io(this,void 0,void 0,function*(){try{yield this.update()}catch(dn){ut.a.warn("RTC refresh failed",{error:dn})}}),delay:en,immediate:!0})}send($t,en,dn){const Cn=this.getActiveConnection($t);Cn?Cn.isReady()?Cn.send(en,dn):ut.a.warn("Send called with unready connection."):ut.a.warn("Send called with no connection.")}controlRemoteStream($t,en){const dn=this.getActiveConnection($t);dn?dn.isReady()?dn.controlRemoteStream(en):ut.a.warn("controlRemoteStream called with unready connection."):ut.a.warn("controlRemoteStream called with no connection.")}getLocalPeer(){return Io(this,void 0,void 0,function*(){for(;!this.localPeer;)yield Object(st.a)(.1*it.a.second);return Qo(this.localPeer)})}connect($t,en){var dn,Cn,On;return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode===!0)throw new Error("connect method called in local only mode.");const{track:or,signalingClient:ar}=this.config,{localPeer:nr,receiveSignalStream:$n,iceServers:Fn}=this;if(!nr||!$n||!Fn)return void ut.a.warn("Connect called prior to local peer, receiveSignalStream, and ICE servers ready");if(this.getActiveConnection($t))return void ut.a.warn("Connect called for peer with existing connection.");if(this.isOutgoingConnection.get($t))return void ut.a.warn("Connect called for peer with an existing outgoing connection offer.");this.isOutgoingConnection.set($t,!0);const ro=function(ur,mr,hr){const{rtcIceTransportPolicies:wr,rtcIceServerProtocol:Br,useAllServers:Qr}=mr||{},Hr=ur.map(So=>Object.assign(Object.assign({},So),{urls:So.urls.filter(Eo=>{const Oo=(wr===void 0||wr.some(Lo=>tn(Eo,Lo)))&&(Br===void 0||mn(Eo,Br));return Oo||ut.a.debug(`Ignoring ICE server: ${Eo}`,{organizationId:hr}),Oo})})).filter(({urls:So})=>So.filter(Eo=>Eo).length>0);return Qr?Hr:[Zt(Hr,"stun"),Zt(Hr,"turn")].filter(So=>So!==void 0).map(So=>St(So))}(Fn,en);ut.a.debug("Received ICE servers:",Fn),ut.a.debug("Using ICE servers:",ro);const Ln=new Mo(yield this.createRTCPeerConnection(ro),{baseConfig:{isOffer:!0,isLan:!1,receive:(ur,mr)=>this.config.receive(ur,mr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(ur,mr)=>{var hr,wr;return(wr=(hr=this.config).onStreamsInfoUpdate)===null||wr===void 0?void 0:wr.call(hr,ur,mr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(dn=nr.getUserId())===null||dn===void 0?void 0:dn.getValue(),localPeerId:nr.getPeerId(),remotePeerId:$t,sessionType:this.config.sessionType},remoteConfig:{}},ur=>this.onCustomDataChannel($t,ur)),En=yield Ln.getOffer();if(!En)return ut.a.error("Failed to generate offer."),void this.isOutgoingConnection.delete($t);ut.a.debug("Sending offer."),or==null||or("Sending offer",En);const Rn=new yn.SendSignalRequest;Rn.setSignal(En);const Hn=yield(()=>Io(this,void 0,void 0,function*(){try{return yield ar.sendSignal(Rn,yield this.getMetadata({}))}catch(ur){ut.a.warn("Error when sending signal",{error:ur})}}))();if(!this.isOutgoingConnection.get($t))return void ut.a.debug("No offer set after receiving offer signal response.");ut.a.debug("Offer sent.");const Qn=(Cn=Hn==null?void 0:Hn.getSessionId())===null||Cn===void 0?void 0:Cn.getValue(),lr=(On=Hn==null?void 0:Hn.getSessionCreatedTimestamp())===null||On===void 0?void 0:On.getValue();return Qn&&lr?(Ln.setSessionId(Qn),Ln.setSessionCreatedTimestamp(lr),this.isOutgoingConnection.delete($t),this.connections.push(Ln),this.isConnectionInitiator.set(Ln,!0),this.setupHandlers(Ln),Qn):(ut.a.warn("No session ID or no session created timestamp on send signal response."),void this.isOutgoingConnection.delete($t))})}connectLan($t){var en,dn;return Io(this,void 0,void 0,function*(){const Cn=new Ht($t),On=new Mo(yield this.createRTCPeerConnection([]),{baseConfig:{isOffer:!0,isLan:!0,receive:($n,Fn)=>this.config.receive($n,Fn),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?($n,Fn)=>{var ro,Ln;return(Ln=(ro=this.config).onStreamsInfoUpdate)===null||Ln===void 0?void 0:Ln.call(ro,$n,Fn)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(dn=(en=this.localPeer)===null||en===void 0?void 0:en.getUserId())===null||dn===void 0?void 0:dn.getValue(),localPeerId:"lan_client",remotePeerId:$t}},$n=>this.onCustomDataChannel($t,$n)),or=yield On.getLanOffer();if(!or)return ut.a.warn("Could not generate LAN offer"),!1;const ar=yield Cn.postLanRtcOffer({offer:JSON.stringify(or)}),nr=new RTCSessionDescription(JSON.parse(ar.answer));return yield On.handleLanAnswer(nr),this.localConnections.push(On),this.isConnectionInitiator.set(On,!0),Object(un.a)()})}getConnections(){return[...this.connections,...this.localConnections]}createCustomDataChannel($t,en,dn,Cn,On){const or=this.getActiveConnection($t);if(or&&this.isConnectionInitiator.has(or)){const nr=or.peerConnection.createDataChannel("custom."+en,dn);return Cn&&(nr.binaryType="arraybuffer"),On($t,nr),()=>{}}const ar=(nr,$n)=>{$t===nr&&$n.label==="custom."+en&&On($t,$n)};return this.peerDataChannelListeners.push(ar),()=>{this.peerDataChannelListeners=this.peerDataChannelListeners.filter(nr=>nr!==ar)}}onCustomDataChannel($t,en){this.peerDataChannelListeners.forEach(dn=>dn($t,en))}getConnectionStatus($t){if(this.isOutgoingConnection.get($t))return"connecting";const en=this.getActiveConnection($t);return en?en.isReady()?"connected":"connecting":"disconnected"}getConnectionStatsInfo($t){return Io(this,void 0,void 0,function*(){const en=this.getActiveConnection($t);if(en)return yield en.getConnectionStatsInfo()})}disconnect($t){return Io(this,void 0,void 0,function*(){const en=this.getActiveConnection($t);en&&(yield en.close())})}getPeers(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,en=yield(()=>Io(this,void 0,void 0,function*(){try{return yield $t.getPeers(new yn.GetPeersRequest,yield this.getMetadata({}))}catch(On){ut.a.warn("Error when getting peers",{error:On})}}))();if(!en)return[];const dn=en.getPeersList();if(!dn)return[];const Cn=On=>{var or,ar;return(ar=(or=On.getPeerCreatedTimestamp())===null||or===void 0?void 0:or.getValue())!==null&&ar!==void 0?ar:0};return dn.sort((On,or)=>Cn(or)-Cn(On)).map(On=>Qo(On))})}getSessions(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,en=yield(()=>Io(this,void 0,void 0,function*(){try{return yield $t.getPeers(new yn.GetPeersRequest,yield this.getMetadata({}))}catch(On){ut.a.warn("Error when getting peers",{error:On})}}))();if(!en)return{};const dn=en.getPeersList(),Cn={};for(const On of dn)Cn[On.getPeerId()]=On.getSessionIdsList();return Cn})}getPing($t){const en=this.getActiveConnection($t);if(en)return en.getPing();ut.a.warn("Attempted to get ping time from inactive peer.")}getPingInfo($t){const en=this.getActiveConnection($t);if(en)return en.getPingInfo();ut.a.warn("Attempted to get ping time from inactive peer.")}getLastMessageTimestamp($t){const en=this.getActiveConnection($t);if(en)return en.getLastMessageTimestamp();ut.a.warn("Attempted to get last message time from inactive peer.")}getSessionMetricsMessageCounts($t){const en=this.getActiveConnection($t);if(en)return en.getSessionMetricsMessageCounts();ut.a.warn("Attempted to get session metrics counts from inactive peer.")}isReady(){if(this.config.lanOnlyMode)return!0;const{localPeer:$t,receiveSignalStream:en,iceServers:dn}=this;return!!($t&&en&&dn)}shutdown(){return Io(this,void 0,void 0,function*(){ut.a.info("Shutdown called on RTC client"),yield this.refreshInterval.stop(),this.receiveSignalStream&&this.receiveSignalStream.cancel();const $t=this.connections;this.connections=[],yield this.closeConnections($t);const{localPeer:en}=this;if(!en||this.config.lanOnlyMode)return;const{signalingClient:dn}=this.config;yield(()=>Io(this,void 0,void 0,function*(){try{const Cn=new yn.DeletePeerRequest;Cn.setPeerId(en.getPeerId()),yield dn.deletePeer(Cn,yield this.getMetadata({}))}catch(Cn){return void ut.a.warn("Error deleting local peer",{error:Cn})}}))()})}createPeer(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createPeer method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,en=yield(()=>Io(this,void 0,void 0,function*(){try{return yield $t.createPeer(new yn.CreatePeerRequest,yield this.getMetadata({}))}catch(Cn){throw new Error(`Was not able to create peer: ${JSON.stringify(Cn)}`)}}))(),dn=en==null?void 0:en.getPeer();if(!dn)throw new Error("Response did not provide peer.");return this.localPeer=dn})}createReceiveSignalStream(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createReceiveSignalStream method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,{localPeer:en,iceServers:dn}=this;if(!en||!dn)return;const{receiveSignalStream:Cn}=this;Cn&&Cn.cancel();const On=new yn.ReceiveSignalStreamRequest;On.setPeerId(en.getPeerId());const or=yield(()=>Io(this,void 0,void 0,function*(){try{return $t.receiveSignalStream(On,yield this.getMetadata({hasDeadline:!1}))}catch(ar){throw new Error(`Unable to create receive signal stream: ${JSON.stringify(ar)}`)}}))();if(!or)throw new Error("Response did not provide stream.");return or.on("data",ar=>Io(this,void 0,void 0,function*(){var nr,$n,Fn,ro;const Ln=ar.getSignal(),En=(nr=Ln==null?void 0:Ln.getSessionId())===null||nr===void 0?void 0:nr.getValue(),Rn=Ln==null?void 0:Ln.getSenderId(),Hn=Ln==null?void 0:Ln.getReceiverId(),Qn=($n=Ln==null?void 0:Ln.getSessionCreatedTimestamp())===null||$n===void 0?void 0:$n.getValue();if(!(Ln&&En&&Rn&&Hn&&Qn))return void ut.a.warn("Received signal with missing information.");const lr=this.getActiveConnection(Rn);if(lr)if(lr.getSessionId()!==En){if(ut.a.debug("Received signal: different session for a peer we're already connected to."),(lr.getSessionCreatedTimestamp()||0)>Qn)return;const ur=new Mo(yield this.createRTCPeerConnection(dn),{baseConfig:{isOffer:!1,isLan:!1,receive:(mr,hr)=>this.config.receive(mr,hr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(mr,hr)=>{var wr,Br;return(Br=(wr=this.config).onStreamsInfoUpdate)===null||Br===void 0?void 0:Br.call(wr,mr,hr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:en.getPeerId(),localUserId:(ro=en.getUserId())===null||ro===void 0?void 0:ro.getValue(),remotePeerId:Rn},remoteConfig:{sessionId:En,sessionCreatedTimestamp:Qn}},mr=>this.onCustomDataChannel(Rn,mr));yield ur.handleSignal(Ln),this.connections.push(ur)}else ut.a.debug("Received signal: for an existing connection."),yield lr.handleSignal(Ln);else{ut.a.debug("Received signal: new connection.");const ur=new Mo(yield this.createRTCPeerConnection(dn),{baseConfig:{isOffer:!1,isLan:!1,receive:(mr,hr)=>this.config.receive(mr,hr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(mr,hr)=>{var wr,Br;return(Br=(wr=this.config).onStreamsInfoUpdate)===null||Br===void 0?void 0:Br.call(wr,mr,hr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:en.getPeerId(),localUserId:(Fn=en.getUserId())===null||Fn===void 0?void 0:Fn.getValue(),remotePeerId:Rn},remoteConfig:{sessionId:En,sessionCreatedTimestamp:Qn}},mr=>this.onCustomDataChannel(Rn,mr));yield ur.handleSignal(Ln),this.connections.push(ur)}})),or.on("end",()=>{or.cancel(),this.receiveSignalStream=void 0}),or.on("error",ar=>{switch(ar.code){case vn.StatusCode.CANCELLED:case vn.StatusCode.UNAVAILABLE:case vn.StatusCode.UNKNOWN:ut.a.debug("Receive signal stream error",{error:ar});break;case vn.StatusCode.UNAUTHENTICATED:ut.a.warn("Receive signal stream error",{error:ar});break;default:ut.a.error("Receive signal stream error",{error:ar})}or.cancel(),this.receiveSignalStream=void 0}),this.receiveSignalStream=or})}createRTCPeerConnection($t){var en;return Io(this,void 0,void 0,function*(){const dn=(en=this.config.alternateRTCPeerConnection)!==null&&en!==void 0?en:window.RTCPeerConnection;if(!dn)throw function(){const{userAgent:Cn}=navigator;return Cn.includes("Firefox/")?"Firefox":Cn.includes("Edg/")?"Edge":Cn.includes("Chrome/")?"Chrome":Cn.includes("Safari/")?"Safari":Cn.includes("MSIE/")||Cn.includes("Trident/")?"IE":"Other"}()!=="Chrome"?new Error("WebRTC is not enabled. Please try again with the latest version of Google Chrome."):new Error("WebRTC is not enabled. Please ensure WebRTC is not disabled by ad blocking software.");return new dn({iceServers:$t})})}closeConnections($t){return Io(this,void 0,void 0,function*(){const en=yield Pt($t.map(dn=>Io(this,void 0,void 0,function*(){yield dn.close()})));for(const dn of en)ut.a.warn("Request to close session failed",{error:dn})})}getActiveConnection($t){return this.getConnections().find(en=>en.getRemotePeerId()===$t&&en.isActive())}update(){var $t;return Io(this,void 0,void 0,function*(){if(this.localConnections=this.localConnections.filter(ar=>ar.isActive()),this.config.lanOnlyMode)return;const{signalingClient:en}=this.config;if(!this.localPeer||!this.receiveSignalStream||!this.iceServers)return this.localPeer||(yield this.createPeer()),this.iceServers||(yield this.updateIceServers()),void(this.receiveSignalStream||(yield this.createReceiveSignalStream()));yield this.closeConnections(this.connections.filter(ar=>!ar.isActive())),this.connections=this.connections.filter(ar=>ar.isActive());const{localPeer:dn}=this,Cn=this.connections.filter(ar=>ar.getSessionId).map(ar=>St(ar.getSessionId()));dn.setSessionIdsList(Cn);const On=new yn.RefreshPeerRequest;On.setPeer(dn);try{yield en.refreshPeer(On,yield this.getMetadata({}))}catch(ar){ar.code===vn.StatusCode.NOT_FOUND?(ut.a.warn("Peer expired, creating new peer",{peerId:dn.getPeerId()}),yield this.reset()):ut.a.warn("Error calling RefreshPeer",{error:ar})}const or=yield this.getPeers();for(const ar of this.connections)ar.setRemoteDeviceId(($t=or.find(nr=>nr.id===ar.getRemotePeerId()))===null||$t===void 0?void 0:$t.deviceId)})}reset(){return Io(this,void 0,void 0,function*(){yield this.closeConnections(this.connections),this.connections=[],this.isOutgoingConnection=new Map,yield this.createPeer(),yield this.createReceiveSignalStream()})}updateIceServers(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)return;const{iceServersLastUpdate:$t,iceServersTtl:en}=this,dn=new Date().getTime();if(!$t||dn-$t>en)try{const Cn=(yield this.config.signalingClient.getIceServers(new yn.GetIceServersRequest,yield this.getMetadata({}))).getIceServers();this.iceServers=JSON.parse(Cn),this.iceServersLastUpdate=dn}catch(Cn){ut.a.warn("Error in updateIceServers",{error:Cn})}})}setupHandlers($t){const{peerConnection:en}=$t,dn=$t.getSessionCreatedTimestamp();en.onconnectionstatechange=()=>Io(this,void 0,void 0,function*(){const Cn=en.connectionState;if(dn)switch(Cn){case"connected":wt.aggregate("rtc-connect-time",new Date().getTime()-dn);break;case"failed":wt.increment("rtc-connect-failed")}})}getMetadata($t){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getMetadata method cannot be called in local-only mode");const{getToken:en}=this.config,{grpcCallDeadline:dn}=this,{hasDeadline:Cn}=$t,On=Cn===!1?void 0:new Date().getTime()+dn;return{authorization:yield en(),deadline:On}})}}var Bs=s(10),cs=s(11),Zl=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Vl{constructor($t,en){this.sessionId=$t,this.connection=en,this.sentMessagesCounts=new Map,this.receivedMessagesCounts=new Map,this.sessionId=$t,this.connection=en}incrementMessageSent($t){const en=_i($t.header.stream);this.sentMessagesCounts.set(en,(this.sentMessagesCounts.get(en)||0)+1)}incrementMessageReceived($t){const en=_i($t.header.stream);this.receivedMessagesCounts.set(en,(this.receivedMessagesCounts.get(en)||0)+1)}uploadMetrics(){return Zl(this,void 0,void 0,function*(){const{sessionId:$t}=this,en=yield this.connection.peerConnection.getStats(),dn={};en.forEach(On=>dn[On.id]=On),ut.a.debug("rtc-stats",Object.assign(Object.assign({},dn),{sessionId:$t}));const Cn=[...new Set(Array.from(this.sentMessagesCounts.keys()).concat(Array.from(this.receivedMessagesCounts.keys())))].reduce((On,or)=>{const ar=this.sentMessagesCounts.get(or),nr=this.receivedMessagesCounts.get(or);return Object.assign(Object.assign({},On),{[`${or}-sent`]:ar,[`${or}-received`]:nr})},{sessionId:$t});ut.a.debug("rtc-message-report",Cn)})}}function zs(cr,$t){return _i(cr)===_i($t)}var vs=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class uu{constructor($t,en){this.peerConnection=$t,this.config=en,this.connectTimeoutMs=10*it.a.second,this.gatherIceTimeoutMs=5*it.a.second,this.pingUpdateTimeoutMs=2*it.a.second,this.streamLatestTimestamp=new Map,this.closeCalled=!1,this.connectCalled=!1,this.sentOffer=!1,this.receivedIceCandidate=!1;const{isOffer:dn}=en;dn?this.initializeChannels($t):$t.ondatachannel=Cn=>{switch(Cn.channel.label){case"stream.latest-ttl":this.latestTtlStreamChannel=Cn.channel;break;case"stream.reliable":this.reliableStreamChannel=Cn.channel;break;case"stream.latest-reliable":this.latestReliableStreamChannel=Cn.channel;break;case"stream.latest-try-once":this.latestTryOnceStreamChannel=Cn.channel}this.setupChannel(Cn.channel)},this.sessionMetrics=new Vl(this.getSessionId(),this)}connect(){return vs(this,void 0,void 0,function*(){if(this.connectCalled)return;this.connectCalled=!0,this.pingUpdateTimeout=setInterval(()=>{const{reliableStreamChannel:Cn}=this;Cn&&this.sendSystemMessage(Cn,{type:"ping"})},this.pingUpdateTimeoutMs),this.connectTimeout=setTimeout(()=>vs(this,void 0,void 0,function*(){this.isReady()||(ut.a.warn("RTC connect timed out, closing connection"),yield this.close())}),this.connectTimeoutMs);const{peerConnection:$t,config:{isOffer:en,sessionId:dn}}=this;if(en){const Cn=yield $t.createOffer();yield $t.setLocalDescription(Cn)}en&&(this.gatherIceTimeout=setTimeout(()=>vs(this,void 0,void 0,function*(){this.sentOffer||(ut.a.warn("ICE gathering timed out"),this.receivedIceCandidate?(ut.a.warn("Attempting to connect with partial ICE candidate pool"),yield this.sendOffer()):yield this.close())}),this.gatherIceTimeoutMs),$t.onicecandidate=Cn=>vs(this,void 0,void 0,function*(){Cn.candidate?this.receivedIceCandidate=!0:yield this.sendOffer()}),$t.onicegatheringstatechange=()=>vs(this,void 0,void 0,function*(){$t.iceGatheringState==="complete"&&(yield this.sendOffer())}),$t.onnegotiationneeded=()=>{ut.a.debug("Negotiation needed",{sessionId:dn})})})}handleSignal($t){return vs(this,void 0,void 0,function*(){const{peerConnection:en,config:{sessionId:dn,sendSignal:Cn}}=this,{description:On}=JSON.parse($t.payload);if(ut.a.debug("Handling signal",{sessionId:dn,description:JSON.stringify(On)}),On)if(en.signalingState!=="stable"||en.connectionState!=="connected")if(en.remoteDescription)ut.a.warn(`Received SDP signal during negotiation when remote description is already set: ${JSON.stringify($t)}`);else if(On.type==="offer"){yield en.setRemoteDescription(On);const or=yield en.createAnswer();yield en.setLocalDescription(or),yield Cn({payload:JSON.stringify({description:or})})}else On.type==="answer"&&(yield en.setRemoteDescription(On));else ut.a.warn(`Received SDP signal when signaling is stable and connected: ${JSON.stringify($t)}`);else ut.a.warn(`Received non-SDP signal: ${JSON.stringify($t)}`)})}send($t,en){const dn=this.getChannelFromLabel(en.channelLabel);dn?this.sendOnChannel(dn,$t):ut.a.warn("Send called with unexpected channel label",{channelLabel:en.channelLabel})}controlRemoteStream($t){this.sendSystemMessage(St(this.reliableStreamChannel),{type:"stream-control",streamControl:$t})}isActive(){return new Set(["new","connecting","connected"]).has(this.peerConnection.connectionState)}isReady(){const{peerConnection:$t,latestTtlStreamChannel:en,reliableStreamChannel:dn,latestTryOnceStreamChannel:Cn}=this;return!!(dn&&en&&Cn)&&$t.connectionState==="connected"&&dn.readyState==="open"&&en.readyState==="open"&&Cn.readyState==="open"}isClosed(){const{peerConnection:$t,reliableStreamChannel:en,latestTryOnceStreamChannel:dn,latestTtlStreamChannel:Cn}=this;return!($t.connectionState!=="closed"||en!==void 0&&en.readyState!=="closed"||dn!==void 0&&dn.readyState!=="closed"||Cn!==void 0&&Cn.readyState!=="closed")}needsClosing(){const{peerConnection:$t,latestTtlStreamChannel:en,reliableStreamChannel:dn,latestTryOnceStreamChannel:Cn}=this;if(this.isClosed())return!1;const On=new Set(["closing","closed"]),or=ar=>ar&&On.has(ar.readyState);return Yr($t)||or(en)||or(dn)||or(Cn)}close(){return vs(this,void 0,void 0,function*(){this.closeCalled||(this.closeCalled=!0,yield this.sessionMetrics.uploadMetrics(),this.pingUpdateTimeout&&clearInterval(this.pingUpdateTimeout),this.connectTimeout&&clearTimeout(this.connectTimeout),this.gatherIceTimeout&&clearTimeout(this.gatherIceTimeout),this.peerConnection.close())})}getPing(){return this.pingTimeMs}getLastMessageTimestamp(){return this.lastMessageTimestamp}getSessionId(){return this.config.sessionId}getRemotePeer(){return this.config.remotePeer}initializeChannels($t){this.latestTtlStreamChannel=$t.createDataChannel("stream.latest-ttl",It),this.reliableStreamChannel=$t.createDataChannel("stream.reliable",Dt),this.latestReliableStreamChannel=$t.createDataChannel("stream.latest-reliable",Kt),this.latestTryOnceStreamChannel=$t.createDataChannel("stream.latest-try-once",gn),this.setupChannel(this.latestTtlStreamChannel),this.setupChannel(this.reliableStreamChannel),this.setupChannel(this.latestReliableStreamChannel),this.setupChannel(this.latestTryOnceStreamChannel)}sendOffer(){return vs(this,void 0,void 0,function*(){if(this.sentOffer||(this.sentOffer=!0,Yr(this.peerConnection)))return;const{peerConnection:$t,config:{sendSignal:en}}=this,dn=yield $t.createOffer();yield $t.setLocalDescription(dn);const Cn={payload:JSON.stringify({description:dn})};yield en(Cn)})}getChannelFromLabel($t){switch($t){case"stream.latest-ttl":return this.latestTtlStreamChannel;case"stream.reliable":return this.reliableStreamChannel;case"stream.latest-reliable":return this.latestReliableStreamChannel;case"stream.latest-try-once":return this.latestTryOnceStreamChannel}}sendOnChannel($t,en){let dn;try{dn=Object(rn.encode)(JSON.stringify(en))}catch(Cn){return void ut.a.warn("Failed to encode RTC message",{error:Cn})}try{$t.send(dn),this.sessionMetrics.incrementMessageSent(en)}catch(Cn){ut.a.warn("Failed to send message to channel",{error:Cn,channel:$t.label})}}channelNotRecognized($t){return $t!==this.latestTtlStreamChannel&&$t!==this.latestReliableStreamChannel&&$t!==this.latestTryOnceStreamChannel&&$t!==this.reliableStreamChannel}setupChannel($t){$t.onmessage=en=>{if(this.channelNotRecognized($t))return void ut.a.warn("Received message on unrecognized data channel.");let dn;try{dn=JSON.parse(Object(rn.decode)(en.data))}catch(Cn){return void ut.a.warn("Received unparseable RTC message",{error:Cn,channel:$t.label})}if(this.lastMessageTimestamp=new Date().getTime(),dn=to(dn),this.sessionMetrics.incrementMessageReceived(dn),!this.handleSystemMessage($t,dn)){if(!this.hasCapabilities(dn))return void ut.a.warn("Received RTC message that was not within the capability scope of the connection.");($t===this.latestTryOnceStreamChannel||$t===this.latestTtlStreamChannel||$t===this.latestReliableStreamChannel)&&!this.isLatestMessage(dn)||this.config.receive(this.config.remotePeer.id,dn)}},$t.onerror=en=>{ut.a.warn(`Channel error: ${en.error}`,{error:en.error,sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onopen=()=>{ut.a.debug("Channel opened",{sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onclose=()=>{const en={bufferedAmount:$t.bufferedAmount,sessionId:this.getSessionId(),channelLabel:$t.label};this.closeCalled===!1?ut.a.debug("Unexpected channel closed",en):ut.a.debug("Channel closed",en)}}handleSystemMessage($t,en){switch(en.header.stream.streamType){case"ping":return this.sendSystemMessage($t,{type:"pong",timestamp:St(en.payload.ping)}),!0;case"pong":{const dn=new Date().getTime()-St(en.payload.pong);return this.pingTimeMs=dn,wt.aggregate("rtc-ping-time",dn),!0}case"stream-control":return!0;default:return!1}}sendSystemMessage($t,en){if($t.readyState!=="open")return;const dn={entityId:St(this.config.localPeer.deviceId||this.config.localPeer.userId),streamName:`$.${en.type}`,streamType:en.type};let Cn;switch(en.type){case"ping":Cn={ping:new Date().getTime()};break;case"pong":Cn={pong:en.timestamp};break;case"stream-control":Cn={streamControl:en.streamControl}}this.sendOnChannel($t,Gr(dn,Cn))}hasCapabilities($t){var en,dn;const{localPeer:Cn,remotePeer:On}=this.config,or=(en=Cn.capabilitySet.streaming)===null||en===void 0?void 0:en.streams,ar=or&&or.some(Fn=>Fn.receive&&zs(Fn.stream,$t.header.stream)),nr=(dn=On.capabilitySet.streaming)===null||dn===void 0?void 0:dn.streams,$n=nr&&nr.some(Fn=>Fn.send&&zs(Fn.stream,$t.header.stream));return ar||$n}isLatestMessage($t){const en=_i($t.header.stream),dn=(this.streamLatestTimestamp.get(en)||0)<=$t.header.created;return dn&&this.streamLatestTimestamp.set(en,$t.header.created),dn}}var No=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class tu{constructor($t){this.config=$t,this.connections=[],this.connectingSessions=new Map,this.updateInterval=pt({func:()=>No(this,void 0,void 0,function*(){try{yield this.update()}catch(en){ut.a.warn("RTC update failed",{error:en})}}),delay:250*it.a.millisecond,immediate:!0}),this.localPeer=this.createPeer()}send($t,en,dn){const Cn=this.getActiveConnection($t);Cn?Cn.isReady()?Cn.send(en,dn):ut.a.warn("Attempted to send with an active connection to that peer which was not yet ready."):ut.a.warn("Attempted to send with no active connection to that peer.")}controlRemoteStream($t,en){const dn=this.getActiveConnection($t);dn?dn.isReady()?dn.controlRemoteStream(en):ut.a.warn("Attempted to control remote stream with an active connection to that peer which was not yet ready."):ut.a.warn("Attempted to control remote stream with no active connection to that peer.")}connect($t){return No(this,void 0,void 0,function*(){const en=yield this.getLocalPeer();if(this.getActiveConnection($t))return void ut.a.warn("Attempted to connect to peer with an already active connection.");let dn;try{dn=yield this.config.signalingClient.createSession(yield this.config.getToken(),{offerPeerId:en.id,answerPeerId:$t})}catch(Cn){Object(Bs.a)(Cn,cs.a,On=>On.statusCode===404),ut.a.warn("Attempted to connect to peer that does not exist.")}if(dn)for(this.connectingSessions.set(dn.id,new Date().getTime()),yield this.connectToSession(dn);;)switch(yield Object(st.a)(.1),this.getConnectionStatus($t)){case"connecting":continue;case"connected":return dn.id;case"disconnected":return}})}getConnectionStatus($t){const en=this.getActiveConnection($t);return en?en.isReady()?"connected":"connecting":"disconnected"}getIceMode($t){const en=this.getActiveConnection($t);if(en)return en.iceMode}disconnect($t){return No(this,void 0,void 0,function*(){const en=this.getActiveConnection($t);en&&(yield this.closeConnection(en))})}getLocalPeer(){return No(this,void 0,void 0,function*(){return yield this.localPeer})}getPeers(){return No(this,void 0,void 0,function*(){return yield this.config.signalingClient.getPeers(yield this.config.getToken())})}getPing($t){const en=this.getActiveConnection($t);if(en)return en.getPing();ut.a.warn("Attempted to get ping time from inactive peer.")}getLastMessageTimestamp($t){const en=this.getActiveConnection($t);if(en)return en.getLastMessageTimestamp();ut.a.warn("Attempted to get ping time from inactive peer.")}shutdown(){return No(this,void 0,void 0,function*(){yield this.updateInterval.stop();const $t=this.connections;this.connections=[],yield this.closeConnections($t)})}closeConnection($t){return No(this,void 0,void 0,function*(){this.connectingSessions.delete($t.getSessionId()),yield $t.close();try{yield this.config.signalingClient.deleteSession(yield this.config.getToken(),$t.getSessionId())}catch(en){Object(Bs.a)(en,cs.a,dn=>dn.statusCode===404)}})}getSessions(){return No(this,void 0,void 0,function*(){const $t=yield this.getLocalPeer();return(yield this.config.signalingClient.getSessions(yield this.config.getToken())).filter(en=>en.offer.peer.id===$t.id||en.answer.peer.id===$t.id)})}createPeer(){return No(this,void 0,void 0,function*(){return yield this.config.signalingClient.createPeer(yield this.config.getToken(),{capabilitySet:this.config.capabilitySet||{}})})}createRTCPeerConnection($t={}){return No(this,void 0,void 0,function*(){return new(this.config.alternateRTCPeerConnection||RTCPeerConnection)(Object.assign({iceServers:yield this.config.signalingClient.getIceServers(yield this.config.getToken())},$t))})}closeConnections($t){return No(this,void 0,void 0,function*(){const en=yield Pt($t.map(dn=>No(this,void 0,void 0,function*(){yield this.closeConnection(dn)})));for(const dn of en)ut.a.warn("Request to close session failed",{error:dn})})}reset(){return No(this,void 0,void 0,function*(){yield this.closeConnections(this.connections),this.connections=[],this.connectingSessions=new Map,this.localPeer=this.createPeer(),yield this.localPeer})}getActiveConnection($t){return this.connections.find(en=>en.getRemotePeer().id===$t&&en.isActive())}update(){return No(this,void 0,void 0,function*(){const $t=yield this.getLocalPeer();try{yield this.config.signalingClient.refreshPeer(yield this.config.getToken(),$t.id)}catch(en){Object(Bs.a)(en,cs.a,dn=>dn.statusCode===404),ut.a.warn("Peer expired, creating new peer",{peerId:$t.id}),yield this.reset()}yield this.handleSessions(yield this.getSessions())})}handleSessions($t){return No(this,void 0,void 0,function*(){yield this.syncConnectionsAndSessions($t);const en=$t.map(dn=>({session:dn,connection:this.connections.find(Cn=>Cn.getSessionId()===dn.id)}));yield Promise.all(en.map(({session:dn,connection:Cn})=>No(this,void 0,void 0,function*(){return yield this.maintainConnection(dn,Cn)})))})}syncConnectionsAndSessions($t){return No(this,void 0,void 0,function*(){const en=new Set($t.map(On=>On.id)),dn=On=>en.has(On.getSessionId())||this.connectingSessions.has(On.getSessionId());this.connections=this.connections.filter(On=>dn(On));const Cn=this.connections.filter(On=>!dn(On)||On.needsClosing());yield Promise.all(Cn.map(On=>No(this,void 0,void 0,function*(){yield this.closeConnection(On)})))})}maintainConnection($t,en){return No(this,void 0,void 0,function*(){const dn=yield this.getLocalPeer(),Cn=$t.offer.peer.id===dn.id;if(en){if(en.isReady())try{yield this.config.signalingClient.refreshSession(yield this.config.getToken(),$t.id)}catch(On){Object(Bs.a)(On,cs.a,or=>or.statusCode===404),ut.a.debug("Refresh session not found",{sessionId:$t.id})}else if(en.isActive())try{yield this.consumeSignals(en)}catch(On){ut.a.warn("Failed to ingest signals, closing connection",{error:On}),yield this.closeConnection(en)}}else{if(Cn)return;yield this.connectToSession($t)}})}connectToSession($t){return No(this,void 0,void 0,function*(){const en=yield this.getLocalPeer(),dn=$t.offer.peer.id===en.id,Cn=yield this.createRTCPeerConnection(),On=new uu(Cn,{localPeer:dn?$t.offer.peer:$t.answer.peer,remotePeer:dn?$t.answer.peer:$t.offer.peer,sessionId:$t.id,isOffer:dn,sendSignal:or=>this.sendSignal($t.id,or),receive:(or,ar)=>this.config.receive(or,ar)});if(this.connections.find(or=>or.getSessionId()===$t.id))return ut.a.warn("connectToSession called on a session that already has a connection.",{sessionId:$t.id}),void(yield On.close());this.setupHandlers(On),this.connections.push(On);try{yield On.connect()}catch(or){ut.a.warn("Failed to handle negotiation, closing connection",{error:or}),yield this.closeConnection(On)}})}setupHandlers($t){const{peerConnection:en}=$t,dn=$t.getSessionId();en.onconnectionstatechange=()=>No(this,void 0,void 0,function*(){const Cn=this.connectingSessions.get(dn);if(Cn===void 0)return;const On=en.connectionState;switch(Yr(en)&&this.connectingSessions.delete(dn),On){case"connected":{this.connectingSessions.delete(dn);const or=new Date().getTime()-Cn;wt.aggregate("rtc-connect-time",or);break}case"failed":wt.increment("rtc-connect-failed"),yield this.closeConnection($t)}})}consumeSignals($t){return No(this,void 0,void 0,function*(){let en=[];try{en=yield this.config.signalingClient.takeSignals(yield this.config.getToken(),$t.getSessionId())}catch(dn){Object(Bs.a)(dn,cs.a,Cn=>Cn.statusCode===404)}for(const dn of en)yield $t.handleSignal(dn)})}sendSignal($t,en){return No(this,void 0,void 0,function*(){try{yield this.config.signalingClient.addSignals(yield this.config.getToken(),$t,{signals:[en]})}catch(dn){Object(Bs.a)(dn,cs.a,Cn=>Cn.statusCode===404)}})}}},function(i,o,s){var _={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let $;const et=new Uint8Array(16);function tt(){if(!$&&($=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $(et)}const j=[];for(let st=0;st<256;++st)j.push((st+256).toString(16).slice(1));function it(st,ht=0){return(j[st[ht+0]]+j[st[ht+1]]+j[st[ht+2]]+j[st[ht+3]]+"-"+j[st[ht+4]]+j[st[ht+5]]+"-"+j[st[ht+6]]+j[st[ht+7]]+"-"+j[st[ht+8]]+j[st[ht+9]]+"-"+j[st[ht+10]]+j[st[ht+11]]+j[st[ht+12]]+j[st[ht+13]]+j[st[ht+14]]+j[st[ht+15]]).toLowerCase()}o.a=function(st,ht,_t){if(_.randomUUID&&!ht&&!st)return _.randomUUID();const gt=(st=st||{}).random||(st.rng||tt)();if(gt[6]=15&gt[6]|64,gt[8]=63&gt[8]|128,ht){_t=_t||0;for(let ft=0;ft<16;++ft)ht[_t+ft]=gt[ft];return ht}return it(gt)}},,function(i,o,s){s.r(o),s.d(o,"LogClient",function(){return j});var _=s(28),$=s(10),et=s(11),tt=function(it,st,ht,_t){return new(ht||(ht=Promise))(function(gt,ft){function ut(Mt){try{Et(_t.next(Mt))}catch(Ft){ft(Ft)}}function yt(Mt){try{Et(_t.throw(Mt))}catch(Ft){ft(Ft)}}function Et(Mt){var Ft;Mt.done?gt(Mt.value):(Ft=Mt.value,Ft instanceof ht?Ft:new ht(function(Rt){Rt(Ft)})).then(ut,yt)}Et((_t=_t.apply(it,st||[])).next())})};class j extends _.a{log(st){return tt(this,void 0,void 0,function*(){const ht=j.token;try{yield this.fetch("logs",{token:ht,method:"POST",body:JSON.stringify({logs:st}),allowUnsafeRetries:!0})}catch(_t){Object($.a)(_t,et.a,gt=>gt.statusCode===401&&ht!==void 0),j.token===ht&&delete j.token,yield this.log(st)}})}}}])})})(dist$1);function defined$1(i,o){if(i!==void 0)return i;throw new Error(o||"Value is undefined")}let FORMANT_API_URL$1="https://api.formant.io";typeof window<"u"&&(FORMANT_API_URL$1=window.FORMANT_API_URL||FORMANT_API_URL$1);let urlParams$2$1=new URLSearchParams("");typeof window<"u"&&(urlParams$2$1=new URLSearchParams(window.location.search));const envDev$1=urlParams$2$1.get("formant_dev");envDev$1&&(FORMANT_API_URL$1="https://api-dev.formant.io");const envStage$1=urlParams$2$1.get("formant_stage");envStage$1&&(FORMANT_API_URL$1="https://api-stage.formant.io");const envLocal$1=urlParams$2$1.get("formant_local");envLocal$1&&(FORMANT_API_URL$1="https://api.formant.local");let App$2=class{static sendAppMessage(o){window.parent.postMessage(o,"*")}static getCurrentModuleContext(){let o=new URLSearchParams("");return typeof window<"u"&&(o=new URLSearchParams(window.location.search)),o.get("module")}static async getCurrentModuleConfiguration(){let o=new URLSearchParams("");typeof window<"u"&&(o=new URLSearchParams(window.location.search));const s=o.get("configuration");return s===null||s.trim()===""?void 0:(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/module-configurations/`+s,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).configuration}static isModule(){return this.getCurrentModuleContext()!==null}static goToTime(o){this.sendAppMessage({type:"go_to_time",time:o.getTime()})}static goToDevice(o){this.sendAppMessage({type:"go_to_device",deviceId:o})}static showMessage(o){this.sendAppMessage({type:"show_message",message:o})}static requestModuleData(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"request_module_data",module:o})}static setModuleDateTimeRange(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"set_module_data_time_range",module:_,before:o,after:s||0})}static refreshAuthToken(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"refresh_auth_token",module:o})}static sendChannelData(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"send_channel_data",source:_,channel:o,data:s})}static setupModuleMenus(o){const s=this.getCurrentModuleContext();if(!s)throw new Error("No module context");this.sendAppMessage({type:"setup_module_menus",module:s,menus:o})}static addMenuListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_menu_item_clicked"&&o(_.menu)})}static addAccessTokenRefreshListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="auth_token"&&o(_.token)})}static addModuleDataListener(o){const s=this.getCurrentModuleContext();s&&this.sendAppMessage({type:"request_module_data",module:s}),window.addEventListener("message",_=>{const $=_.data;$.type==="module_data"&&o({streams:$.streams,time:$.time,queryRange:$.queryRange})})}static addModuleConfigurationListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_configuration"&&o(_)})}static addChannelDataListener(o,s){window.addEventListener("message",_=>{const $=_.data;$.type==="channel_data"&&$.channel===o&&s({source:$.source,data:$.data})})}static requestOverviewDevices(o){this.sendAppMessage({type:"request_devices"}),window.addEventListener("message",s=>{const _=s.data;o(_)})}};const _Authentication$1=class{static async login(o,s){try{const _=await fetch(`${FORMANT_API_URL$1}/v1/admin/auth/login`,{method:"POST",body:JSON.stringify({email:o,password:s}),headers:{"Content-Type":"application/json"}}),$=await _.json();if(_.status!==200)throw new Error($.message);return await _Authentication$1.loginWithToken($.authentication.accessToken,$.authentication.refreshToken),$.authentication}catch(_){return _Authentication$1.waitingForAuth.forEach($=>$(!1)),_Authentication$1.waitingForAuth=[],Promise.reject(_)}}static async loginWithToken(o,s){const _=JSON.parse(atob(o.split(".")[1]));try{let $;if(_Authentication$1.isShareToken=_["formant:claims"]&&_["formant:claims"].type=="share",_["formant:claims"]&&(_Authentication$1.currentOrganization=_["formant:claims"].organizationId),_["custom:organization_id"]&&(_Authentication$1.currentOrganization=_["custom:organization_id"]),_Authentication$1.isShareToken||($=_.sub),_["formant:claims"]&&_["formant:claims"].userId&&($=_["formant:claims"].userId),$){const et=await fetch(`${FORMANT_API_URL$1}/v1/admin/users/${$}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}}),tt=await et.json();if(et.status!==200)throw new Error(tt.message);_Authentication$1.currentUser=tt}_Authentication$1.token=o,_Authentication$1.waitingForAuth.forEach(et=>et(!0))}catch($){console.error($),_Authentication$1.waitingForAuth.forEach(et=>et(!1))}_Authentication$1.waitingForAuth=[],s&&(_Authentication$1.refreshToken=s,setInterval(async()=>{if(_Authentication$1.refreshToken){const et=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:_Authentication$1.refreshToken})})).json();_Authentication$1.token=et.authentication.accessToken}},1e3*60*60))}static isAuthenticated(){return _Authentication$1.token!==void 0}static getCurrentUser(){return _Authentication$1.currentUser}static async waitTilAuthenticated(){return _Authentication$1.token!==void 0?!0:new Promise(o=>{_Authentication$1.waitingForAuth.push(function(s){o(s)})})}static async listenForRefresh(){App$2.addAccessTokenRefreshListener(o=>{this.loginWithToken(o)}),setInterval(async()=>{App$2.refreshAuthToken()},1e3*60*60)}};let Authentication$1=_Authentication$1;__publicField$1(Authentication$1,"token");__publicField$1(Authentication$1,"refreshToken");__publicField$1(Authentication$1,"currentUser");__publicField$1(Authentication$1,"currentOrganization");__publicField$1(Authentication$1,"isShareToken",!1);__publicField$1(Authentication$1,"defaultDeviceId");__publicField$1(Authentication$1,"waitingForAuth",[]);function delay$1(i){return new Promise(o=>setTimeout(o,i))}let DataChannel$1=class{constructor(o){__publicField$1(this,"ready",!1),__publicField$1(this,"listeners",[]),__publicField$1(this,"openListeners",[]),__publicField$1(this,"closeListeners",[]),__publicField$1(this,"errorListeners",[]),__publicField$1(this,"binaryListeners",[]),__publicField$1(this,"error"),__publicField$1(this,"decoder",new TextDecoder),this.dataChannel=o,this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=()=>{this.ready=!0,this.openListeners.forEach(s=>s())},this.dataChannel.onclose=()=>{this.ready=!1,this.closeListeners.forEach(s=>s())},this.dataChannel.onerror=s=>{console.error(s),this.error="An error occurred in DataChannel",this.errorListeners.forEach(_=>_(s))},this.dataChannel.onmessage=s=>{this.listeners.forEach(_=>{const $=new Uint8Array(s.data),et=this.decoder.decode($);_(et)}),this.binaryListeners.forEach(_=>{_(new Uint8Array(s.data))})}}addOpenListener(o){this.openListeners.push(o)}removeOpenListener(o){this.openListeners=this.openListeners.filter(s=>s!==o)}addCloseListener(o){this.closeListeners.push(o)}removeCloseListener(o){this.closeListeners=this.closeListeners.filter(s=>s!==o)}addErrorListener(o){this.errorListeners.push(o)}removeErrorListener(o){this.errorListeners=this.errorListeners.filter(s=>s!==o)}async waitTilReady(){return this.ready?!0:new Promise((s,_)=>{let $=window.setInterval(()=>{this.ready&&(window.clearInterval($),s(!0)),this.error&&_(this.error)},10)})}send(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}sendBinary(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}addListener(o){this.listeners.push(o)}removeListener(o){const s=this.listeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.listeners.splice(s,1)}addBinaryListener(o){this.binaryListeners.push(o)}removeBinaryListener(o){const s=this.binaryListeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.binaryListeners.splice(s,1)}},CaptureStream$1=class{constructor(o){__publicField$1(this,"token"),this.captureSession=o}async ingestJSON(o){if(!this.token){const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/capture-sessions/${this.captureSession.code}/authenticate`,{method:"POST"})).json();this.token=_.token}await fetch(`${FORMANT_API_URL$1}/v1/ingest`,{method:"POST",body:JSON.stringify({deviceId:this.captureSession.deviceId,name:this.captureSession.streamName,type:"json",points:[[Date.now(),JSON.stringify(o)]]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}})}},Manipulator$1=class{constructor(o,s){__publicField$1(this,"currentListeners",[]),__publicField$1(this,"onRealtimeMessage",(_,$)=>{$.payload.jointState&&this.currentListeners.forEach(et=>{$.payload.jointState&&et($.payload.jointState)})}),this.device=o,this.config=s}async synchronize(){this.device.addRealtimeListener(this.onRealtimeMessage),this.device.startListeningToRealtimeDataStream(this.config.currentJointStateStream)}async desynchronize(){this.device.removeRealtimeListener(this.onRealtimeMessage),this.device.stopListeningToRealtimeDataStream(this.config.currentJointStateStream)}async addCurrentJointStateListener(o){this.currentListeners.push(o)}},RequestDataChannel$1=class{constructor(o,s,_){__publicField$1(this,"channel"),__publicField$1(this,"requestIdToResponseMap",new Map),this.device=o,this.channel_name=s,this.timeout=_}addOpenListener(o){defined$1(this.channel,"channel not initalized").addOpenListener(o)}removeOpenListener(o){defined$1(this.channel,"channel not initalized").removeOpenListener(o)}addCloseListener(o){defined$1(this.channel,"channel not initalized").addCloseListener(o)}removeCloseListener(o){defined$1(this.channel,"channel not initalized").removeCloseListener(o)}addErrorListener(o){defined$1(this.channel,"channel not initalized").addErrorListener(o)}removeErrorListener(o){defined$1(this.channel,"channel not initalized").removeErrorListener(o)}},BinaryRequestDataChannel$1=class extends RequestDataChannel$1{constructor(){super(...arguments),__publicField$1(this,"RESPONSE_SUCCESS_BYTE",0),__publicField$1(this,"decoder",new TextDecoder)}generateBinaryId(){const o=new Uint8Array(16);for(let s=0;s<o.length;s++)o[s]=Math.floor(Math.random()*256);return o}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addBinaryListener(o=>{const _=o.slice(0,16).toString();if(_.length===0)throw new Error("Invalid response");const $=o.slice(16);if($.length===0)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,$)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateBinaryId(),tt=et.toString();_.set(tt,!0),s.sendBinary(new Uint8Array([...et,...o]));const j=new Date().getTime();for(;new Date().getTime()<j+$;)if(await delay$1(50),_.has(tt)){const it=_.get(tt);if(it!==!0){_.delete(tt);const st=it[0]===this.RESPONSE_SUCCESS_BYTE,ht=it.slice(1);if(st)return ht;throw console.error({name:"AdapterError",message:this.decoder.decode(ht)}),new Error("Binary request datachannel adapter error")}}throw _.delete(tt),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Binary request data channel request timed out")}},TextRequestDataChannel$1=class extends RequestDataChannel$1{generateTextId(){return Math.random().toString(36).substring(2)+"-"+Math.random().toString(36).substring(2)}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addListener(o=>{const s=JSON.parse(o),{id:_,data:$,error:et}=s;if(!_)throw new Error("Invalid response");if(!$&&!et)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,s)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateTextId();_.set(et,!0),s.send(JSON.stringify({id:et,data:o}));const tt=new Date().getTime();for(;new Date().getTime()<tt+$;)if(await delay$1(50),_.has(et)){const j=_.get(et);if(j!==!0){_.delete(et);const{data:it,error:st}=j;if(it)return it;if(st)throw console.error({name:"AdapterError",message:st}),new Error("Text request datachannel adapter error")}}throw _.delete(et),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Text request datachannel request timed out")}};const urlParams$1$1=new URLSearchParams(window.location.search),rtcClientVersion$1=urlParams$1$1.get("rtc_client");let Device$1=class{constructor(o,s,_){__publicField$1(this,"rtcClient"),__publicField$1(this,"remoteDevicePeerId"),__publicField$1(this,"realtimeListeners",[]),__publicField$1(this,"handleMessage",($,et)=>{this.realtimeListeners.forEach(tt=>tt($,et))}),this.id=o,this.name=s,this.organizationId=_}async getLatestTelemetry(){return(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}async getConfiguration(){let o=await fetch(`${FORMANT_API_URL$1}/v1/admin/devices/${this.id}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}});const s=await o.json();if(!s.state.reportedConfiguration)throw new Error("Device has no configuration, has it ever been turned on?");const _=s.state.reportedConfiguration.version;return o=await fetch(`${FORMANT_API_URL$1}/v1/admin/devices/${this.id}/configurations/${_}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}}),(await o.json()).document}async getFileUrl(o){return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[o]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).fileUrls}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{let s;if(rtcClientVersion$1==="1"?s=new dist$1.exports.RtcClientV1({signalingClient:new dist$1.exports.RtcSignalingClient(FORMANT_API_URL$1+"/v1/signaling"),getToken:async()=>defined$1(Authentication$1.token,"Realtime when user isn't authorized"),receive:this.handleMessage}):s=new dist$1.exports.RtcClient({signalingClient:new dist$1.exports.SignalingPromiseClient(FORMANT_API_URL$1,null,null),getToken:async()=>defined$1(Authentication$1.token,"Realtime when user isn't authorized"),receive:this.handleMessage,sessionType:o}),s.isReady)for(;!s.isReady();)await delay$1(100);const $=(await s.getPeers()).find(et=>et.deviceId===this.id);if(!$)throw new Error("Cannot find peer, is the robot offline?");for(this.remoteDevicePeerId=$.id,await s.connect(this.remoteDevicePeerId);s.getConnectionStatus(this.remoteDevicePeerId)!=="connected";)await delay$1(100);this.rtcClient=s}}async sendRealtimeMessage(o,s={channelLabel:"stream.reliable"}){const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.send(defined$1($).id,o,s)}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeAudioStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="audio_common_msgs/AudioData"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});return it}async getRealtimeVideoStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="formant/H264VideoFrame"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});return it}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator$1(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async changeStreamAudioType(o,s){const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.controlRemoteStream(defined$1($).id,{streamName:o,setAudioFormat:s})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){const s=(await defined$1(this.rtcClient,"Realtime connection has not been started").getPeers()).find(_=>_.deviceId===this.id);return defined$1(s,"Could not find remote peer for device "+this.id)}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async isInRealtimeSession(){let o=await Fleet$1.getPeers(),s=await Fleet$1.getRealtimeSessions(),_=o.find($=>$.deviceId===this.id);return _?s[_.id].length>0:!1}async getAvailableCommands(){return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/command-templates/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items.map(_=>({name:_.name,id:_.id,command:_.command,description:_.description,parameterEnabled:_.parameterEnabled,parameterValue:_.parameterValue,parameterMeta:_.parameterMeta,enabled:_.enabled}))}async sendCommand(o,s,_,$){var et;const j=(await this.getAvailableCommands()).find(ht=>ht.name===o);if(!j)throw new Error(`Could not find command with name "${o}"`);let it;if(s===void 0)if(j.parameterEnabled&&j.parameterValue)it=j.parameterValue;else throw new Error("Command has no default parameter value, you must provide one");else it=s;let st={value:it,scrubberTime:(_||new Date).toISOString(),meta:__spreadValues(__spreadValues({},j.parameterMeta),$)};await fetch(`${FORMANT_API_URL$1}/v1/admin/commands`,{method:"POST",body:JSON.stringify({commandTemplateId:j.id,organizationId:this.organizationId,deviceId:this.id,command:j.command,parameter:st,userId:(et=Authentication$1.currentUser)==null?void 0:et.id}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})}async createCustomDataChannel(o,s){if(rtcClientVersion$1==="1")throw new Error("createCustomDataChannel is not supported in rtcClientVersion 1");const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined$1($).id,o,__spreadValues({ordered:!0},s),!1,(j,it)=>{const st=new DataChannel$1(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel$1(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel$1(this,o,s)}async createCaptureStream(o){const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/capture-sessions`,{method:"POST",body:JSON.stringify({deviceId:this.id,streamName:o,tags:{}}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json();return new CaptureStream$1(_)}async getTelemetry(o,s,_,$){return await Fleet$1.getTelemetry(this.id,o,s,_,$)}async getTelemetryStreams(){var o,s;const _=await this.getConfiguration(),$=await fetch(`${FORMANT_API_URL$1}/v1/queries/metadata/stream-names`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}}),et=[],tt=[];return(s=(o=_.telemetry)==null?void 0:o.streams)==null||s.forEach(st=>{st.disabled!==!0&&et.push(st.name),st.onDemand===!0&&tt.push(st.name)}),console.log(tt),(await $.json()).items.filter(st=>!et.includes(st)).map(st=>({name:st,onDemand:tt.includes(st)}))}async createInterventionRequest(o,s,_,$){return await(await fetch(`${FORMANT_API_URL$1}/v1/admin/intervention-requests`,{method:"POST",body:JSON.stringify({message:o,interventionType:s,time:new Date().toISOString(),deviceId:this.id,tags:$,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()}async addInterventionResponse(o,s,_){return await(await fetch(`${FORMANT_API_URL$1}/v1/admin/intervention-responses`,{method:"POST",body:JSON.stringify({interventionId:o,interventionType:s,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()}},PeerDevice$1=class{constructor(o){__publicField$1(this,"rtcClient"),__publicField$1(this,"remoteDevicePeerId"),__publicField$1(this,"realtimeListeners",[]),__publicField$1(this,"id"),__publicField$1(this,"handleMessage",(s,_)=>{this.realtimeListeners.forEach($=>$(s,_))}),this.peerUrl=o}async getLatestTelemetry(){const s=await(await fetch(`${this.peerUrl}/telemetry`)).json();return Object.entries(s).map(([$,et])=>({deviceId:this.id,streamName:$,streamType:"json",currentValue:et,currentValueTime:et.timestamp,tags:{}}))}async getDeviceId(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.id}async getConfiguration(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.document}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{const s=new dist$1.exports.RtcClient({lanOnlyMode:!0,receive:this.handleMessage,sessionType:o});for(await s.connectLan(this.peerUrl);s.getConnectionStatus(this.peerUrl)!=="connected";)await delay$1(100);this.rtcClient=s}}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeVideoStreams(){var o,s,_;const $=await this.getConfiguration(),et=[];for(const tt of(o=$.teleop.hardwareStreams)!=null?o:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});for(const tt of(s=$.teleop.rosStreams)!=null?s:[])tt.topicType=="formant/H264VideoFrame"&&et.push({name:tt.topicName});for(const tt of(_=$.teleop.customStreams)!=null?_:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});return et}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator$1(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined$1(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined$1(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){return{id:this.peerUrl,organizationId:"",deviceId:this.id,capabilities:[],capabilitySet:{}}}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async createCustomDataChannel(o,s){const _=defined$1(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined$1($).id,o,__spreadValues({ordered:!0},s),!1,(j,it)=>{const st=new DataChannel$1(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel$1(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel$1(this,o,s)}};const _Fleet$1=class{static async setDefaultDevice(o){_Fleet$1.defaultDeviceId=o}static async getCurrentDevice(){if(!Authentication$1.token)throw new Error("Not authenticated");if(!_Fleet$1.defaultDeviceId)throw new Error("No known default device");const $=(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/device-details/query`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items.find(tt=>tt.id===_Fleet$1.defaultDeviceId).name,et=new Device$1(_Fleet$1.defaultDeviceId,$,defined$1(Authentication$1.currentOrganization));return _Fleet$1.knownContext.push(new WeakRef(et)),et}static async getPeerDevice(o){const s=new PeerDevice$1(o);return s.id=await s.getDeviceId(),s}static async getDevice(o){if(!Authentication$1.token)throw new Error("Not authenticated");const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/devices/${o}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json(),$=_.name,et=new Device$1(o,$,_.organizationId);return _Fleet$1.knownContext.push(new WeakRef(et)),et}static async getDevices(){if(!Authentication$1.token)throw new Error("Not authenticated");const s=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/device-details/query`,{method:"POST",body:JSON.stringify({enabled:!0,type:"default"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json();return s.items,s.items.map(_=>new Device$1(_.id,_.name,_.organizationId))}static async queryDevices(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/devices/query`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items.map($=>new Device$1($.id,$.name,$.organizationId))}static async getOnlineDevices(){if(!Authentication$1.token)throw new Error("Not authenticated");const _=(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/online-devices`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items;return(await _Fleet$1.getDevices()).filter(et=>_.includes(et.id))}static async getPeers(){if(!Authentication$1.token)throw new Error("Not authenticated");return await new dist$1.exports.RtcClient({signalingClient:new dist$1.exports.SignalingPromiseClient(FORMANT_API_URL$1,null,null),getToken:async()=>defined$1(Authentication$1.token,"Realtime when user isn't authorized"),receive:()=>{}}).getPeers()}static async getRealtimeSessions(){if(!Authentication$1.token)throw new Error("Not authenticated");return await new dist$1.exports.RtcClient({signalingClient:new dist$1.exports.SignalingPromiseClient(FORMANT_API_URL$1,null,null),getToken:async()=>defined$1(Authentication$1.token,"Realtime when user isn't authorized"),receive:()=>{}}).getSessions()}static async getRealtimeDevices(){if(!Authentication$1.token)throw new Error("Not authenticated");const _=(await(await fetch(`${FORMANT_API_URL$1}/v1/signaling/peers`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items.map(et=>et.deviceId);return(await _Fleet$1.getDevices()).filter(et=>_.includes(et.id))}static async getLatestTelemetry(o){let s=o;return o&&!Array.isArray(o)&&(o=[o]),(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:s}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getTelemetry(o,s,_,$,et){let tt=o;Array.isArray(o)||(tt=[o]);let j=s;return Array.isArray(s)||(j=[s]),(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/queries`,{method:"POST",body:JSON.stringify({deviceIds:tt,end:$.toISOString(),names:j,start:_.toISOString(),tags:et}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getFileUrl(o){const _=await(await fetch(`${FORMANT_API_URL$1}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[o]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json();if(_.fileUrls.length===0)throw new Error("File not found");return _.fileUrls[0]}static async queryTelemetry(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/queries`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async aggregateTelemetry(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/queries/queries`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).aggregates}static async queryEvents(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/events/query`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getEvent(o){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/events/query/id=${o}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getInterventions(){if(!Authentication$1.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL$1}/v1/admin/intervention-requests`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}})).json()).items}static async getCurrentGroup(){if(!Authentication$1.token)throw new Error("Not authenticated");let o=new URLSearchParams("");typeof window<"u"&&(o=new URLSearchParams(window.location.search));const s=o.get("group");if(s===null||s.trim()==="")return;const _=await fetch(`${FORMANT_API_URL$1}/v1/admin/groups/`+s,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication$1.token}}),{tagKey:$,tagValue:et}=await _.json();return await this.queryDevices({tags:{[$]:[et]},enabled:!0,type:"default"})}};let Fleet$1=_Fleet$1;__publicField$1(Fleet$1,"defaultDeviceId");__publicField$1(Fleet$1,"knownContext",[]);let urlParams$3=new URLSearchParams("");typeof window<"u"&&(urlParams$3=new URLSearchParams(window.location.search));const urlDevice$1=urlParams$3.get("device");urlDevice$1&&Fleet$1.setDefaultDevice(urlDevice$1);const urlAuth$1=urlParams$3.get("auth");urlAuth$1&&Authentication$1.loginWithToken(urlAuth$1);const moduleName$1=urlParams$3.get("module");moduleName$1&&Authentication$1.listenForRefresh();dist$1.exports.IRtcSendConfiguration;dist$1.exports.IRtcStreamMessage;dist$1.exports.IRtcStreamPayload;const useDevice=i=>{const[o,s]=reactExports.useState();reactExports.useEffect(()=>{_()},[]);const _=async()=>{try{if(await Authentication$1.waitTilAuthenticated()){if(i){const et=await Fleet$1.getDevice(i);s(et);return}const $=await Fleet$1.getCurrentDevice();s($)}}catch{throw new Error("Authentication failed, please authenticate and try again")}};return o},authenticate=async i=>{try{if(await Authentication$1.waitTilAuthenticated())return i()}catch(o){throw o}},handleParse=(i,o)=>o?JSON.parse(i):i,getCurrentConfiguration=async(i,o)=>{await authenticate(async()=>{try{const s=await App$2.getCurrentModuleConfiguration();if(!s)return;const _=handleParse(s,o);i(_),App$2.addModuleConfigurationListener($=>{const et=handleParse($.configuration,o);i(et)})}catch(s){throw s}})},useConfiguration=i=>{const[o,s]=reactExports.useState("");return reactExports.useEffect(()=>{getCurrentConfiguration(s,i==null?void 0:i.parse)},[]),o},getScrubberTime=async i=>{await authenticate(async()=>{App$2.addModuleDataListener(o=>i(o.time))})},useScruberTime=()=>{const[i,o]=reactExports.useState();return reactExports.useEffect(()=>{getScrubberTime(o)},[]),i};function useFormant(){return reactExports.useContext(FormantContext)}const FormantContext=reactExports.createContext(void 0);function FormantProvider({theme:i,children:o,parseConfiguration:s}){const _=useConfiguration({parse:!!s}),$=createTheme(i==="dark"?darkTheme:i==="light"?lightTheme:defaultTheme),et={configuration:_};return reactExports.createElement(ThemeProvider,{theme:$},reactExports.createElement(CssBaseline,null,reactExports.createElement(FormantContext.Provider,{value:et},o)))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(i,o){(function(){var s,_="4.17.21",$=200,et="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",tt="Expected a function",j="Invalid `variable` option passed into `_.template`",it="__lodash_hash_undefined__",st=500,ht="__lodash_placeholder__",_t=1,gt=2,ft=4,ut=1,yt=2,Et=1,Mt=2,Ft=4,Rt=8,Ot=16,pt=32,Lt=64,nn=128,on=256,wt=512,xt=30,Nt="...",Tt=800,Vt=16,Xt=1,Gt=2,Ut=3,Ht=1/0,qt=9007199254740991,Pt=17976931348623157e292,St=0/0,Zt=4294967295,tn=Zt-1,mn=Zt>>>1,yn=[["ary",nn],["bind",Et],["bindKey",Mt],["curry",Rt],["curryRight",Ot],["flip",wt],["partial",pt],["partialRight",Lt],["rearg",on]],vn="[object Arguments]",un="[object Array]",rn="[object AsyncFunction]",It="[object Boolean]",Dt="[object Date]",Kt="[object DOMException]",gn="[object Error]",hn="[object Function]",xn="[object GeneratorFunction]",Mn="[object Map]",qn="[object Number]",Ir="[object Null]",_i="[object Object]",Ur="[object Promise]",fo="[object Proxy]",Gr="[object RegExp]",Yr="[object Set]",to="[object String]",Ro="[object Symbol]",Mo="[object Undefined]",Vo="[object WeakMap]",Qo="[object WeakSet]",Io="[object ArrayBuffer]",as="[object DataView]",Bs="[object Float32Array]",cs="[object Float64Array]",Zl="[object Int8Array]",Vl="[object Int16Array]",zs="[object Int32Array]",vs="[object Uint8Array]",uu="[object Uint8ClampedArray]",No="[object Uint16Array]",tu="[object Uint32Array]",cr=/\b__p \+= '';/g,$t=/\b(__p \+=) '' \+/g,en=/(__e\(.*?\)|\b__t\)) \+\n'';/g,dn=/&(?:amp|lt|gt|quot|#39);/g,Cn=/[&<>"']/g,On=RegExp(dn.source),or=RegExp(Cn.source),ar=/<%-([\s\S]+?)%>/g,nr=/<%([\s\S]+?)%>/g,$n=/<%=([\s\S]+?)%>/g,Fn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ro=/^\w*$/,Ln=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,En=/[\\^$.*+?()[\]{}|]/g,Rn=RegExp(En.source),Hn=/^\s+/,Qn=/\s/,lr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ur=/\{\n\/\* \[wrapped with (.+)\] \*/,mr=/,? & /,hr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wr=/[()=,{}\[\]\/\s]/,Br=/\\(\\)?/g,Qr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hr=/\w*$/,So=/^[-+]0x[0-9a-f]+$/i,Eo=/^0b[01]+$/i,Oo=/^\[object .+?Constructor\]$/,Lo=/^0o[0-7]+$/i,Ko=/^(?:0|[1-9]\d*)$/,fs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vo=/($^)/,As=/['\n\r\u2028\u2029\\]/g,bs="\\ud800-\\udfff",xu="\\u0300-\\u036f",cu="\\ufe20-\\ufe2f",Nr="\\u20d0-\\u20ff",ga=xu+cu+Nr,Vs="\\u2700-\\u27bf",hu="a-z\\xdf-\\xf6\\xf8-\\xff",nu="\\xac\\xb1\\xd7\\xf7",Au="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_l="\\u2000-\\u206f",nm=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tp="A-Z\\xc0-\\xd6\\xd8-\\xde",po="\\ufe0e\\ufe0f",ns=nu+Au+_l+nm,is="['’]",Eu="["+bs+"]",np="["+ns+"]",Jo="["+ga+"]",Uu="\\d+",zu="["+Vs+"]",fu="["+hu+"]",Ml="[^"+bs+ns+Uu+Vs+hu+tp+"]",ds="\\ud83c[\\udffb-\\udfff]",Cm="(?:"+Jo+"|"+ds+")",js="[^"+bs+"]",Vu="(?:\\ud83c[\\udde6-\\uddff]){2}",Ks="[\\ud800-\\udbff][\\udc00-\\udfff]",Wu="["+tp+"]",rp="\\u200d",jp="(?:"+fu+"|"+Ml+")",Js="(?:"+Wu+"|"+Ml+")",Yl="(?:"+is+"(?:d|ll|m|re|s|t|ve))?",El="(?:"+is+"(?:D|LL|M|RE|S|T|VE))?",gs=Cm+"?",Fs="["+po+"]?",Fp="(?:"+rp+"(?:"+[js,Vu,Ks].join("|")+")"+Fs+gs+")*",ip="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ln=Fs+gs+Fp,wn="(?:"+[zu,Vu,Ks].join("|")+")"+ln,Pn="(?:"+[js+Jo+"?",Jo,Vu,Ks,Eu].join("|")+")",zn=RegExp(is,"g"),sr=RegExp(Jo,"g"),jn=RegExp(ds+"(?="+ds+")|"+Pn+ln,"g"),Jn=RegExp([Wu+"?"+fu+"+"+Yl+"(?="+[np,Wu,"$"].join("|")+")",Js+"+"+El+"(?="+[np,Wu+jp,"$"].join("|")+")",Wu+"?"+jp+"+"+Yl,Wu+"+"+El,zt,ip,Uu,wn].join("|"),"g"),Tr=RegExp("["+rp+bs+ga+po+"]"),Cr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ko=-1,go={};go[Bs]=go[cs]=go[Zl]=go[Vl]=go[zs]=go[vs]=go[uu]=go[No]=go[tu]=!0,go[vn]=go[un]=go[Io]=go[It]=go[as]=go[Dt]=go[gn]=go[hn]=go[Mn]=go[qn]=go[_i]=go[Gr]=go[Yr]=go[to]=go[Vo]=!1;var To={};To[vn]=To[un]=To[Io]=To[as]=To[It]=To[Dt]=To[Bs]=To[cs]=To[Zl]=To[Vl]=To[zs]=To[Mn]=To[qn]=To[_i]=To[Gr]=To[Yr]=To[to]=To[Ro]=To[vs]=To[uu]=To[No]=To[tu]=!0,To[gn]=To[hn]=To[Vo]=!1;var $o={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Xo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ru=parseFloat,Rm=parseInt,Gu=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,e_=typeof self=="object"&&self&&self.Object===Object&&self,Sl=Gu||e_||Function("return this")(),Ey=o&&!o.nodeType&&o,_p=Ey&&!0&&i&&!i.nodeType&&i,op=_p&&_p.exports===Ey,t_=op&&Gu.process,du=function(){try{var Rr=_p&&_p.require&&_p.require("util").types;return Rr||t_&&t_.binding&&t_.binding("util")}catch{}}(),sv=du&&du.isArrayBuffer,n_=du&&du.isDate,av=du&&du.isMap,r_=du&&du.isRegExp,i_=du&&du.isSet,rm=du&&du.isTypedArray;function gu(Rr,Xr,zr){switch(zr.length){case 0:return Rr.call(Xr);case 1:return Rr.call(Xr,zr[0]);case 2:return Rr.call(Xr,zr[0],zr[1]);case 3:return Rr.call(Xr,zr[0],zr[1],zr[2])}return Rr.apply(Xr,zr)}function lv(Rr,Xr,zr,jo){for(var hs=-1,Ds=Rr==null?0:Rr.length;++hs<Ds;){var Cl=Rr[hs];Xr(jo,Cl,zr(Cl),Rr)}return jo}function pu(Rr,Xr){for(var zr=-1,jo=Rr==null?0:Rr.length;++zr<jo&&Xr(Rr[zr],zr,Rr)!==!1;);return Rr}function uv(Rr,Xr){for(var zr=Rr==null?0:Rr.length;zr--&&Xr(Rr[zr],zr,Rr)!==!1;);return Rr}function sp(Rr,Xr){for(var zr=-1,jo=Rr==null?0:Rr.length;++zr<jo;)if(!Xr(Rr[zr],zr,Rr))return!1;return!0}function ms(Rr,Xr){for(var zr=-1,jo=Rr==null?0:Rr.length,hs=0,Ds=[];++zr<jo;){var Cl=Rr[zr];Xr(Cl,zr,Rr)&&(Ds[hs++]=Cl)}return Ds}function im(Rr,Xr){var zr=Rr==null?0:Rr.length;return!!zr&&lp(Rr,Xr,0)>-1}function $m(Rr,Xr,zr){for(var jo=-1,hs=Rr==null?0:Rr.length;++jo<hs;)if(zr(Xr,Rr[jo]))return!0;return!1}function Qs(Rr,Xr){for(var zr=-1,jo=Rr==null?0:Rr.length,hs=Array(jo);++zr<jo;)hs[zr]=Xr(Rr[zr],zr,Rr);return hs}function ap(Rr,Xr){for(var zr=-1,jo=Xr.length,hs=Rr.length;++zr<jo;)Rr[hs+zr]=Xr[zr];return Rr}function o_(Rr,Xr,zr,jo){var hs=-1,Ds=Rr==null?0:Rr.length;for(jo&&Ds&&(zr=Rr[++hs]);++hs<Ds;)zr=Xr(zr,Rr[hs],hs,Rr);return zr}function s_(Rr,Xr,zr,jo){var hs=Rr==null?0:Rr.length;for(jo&&hs&&(zr=Rr[--hs]);hs--;)zr=Xr(zr,Rr[hs],hs,Rr);return zr}function Ty(Rr,Xr){for(var zr=-1,jo=Rr==null?0:Rr.length;++zr<jo;)if(Xr(Rr[zr],zr,Rr))return!0;return!1}var a_=qm("length");function Cy(Rr){return Rr.split("")}function om(Rr){return Rr.match(hr)||[]}function Im(Rr,Xr,zr){var jo;return zr(Rr,function(hs,Ds,Cl){if(Xr(hs,Ds,Cl))return jo=Ds,!1}),jo}function Ss(Rr,Xr,zr,jo){for(var hs=Rr.length,Ds=zr+(jo?1:-1);jo?Ds--:++Ds<hs;)if(Xr(Rr[Ds],Ds,Rr))return Ds;return-1}function lp(Rr,Xr,zr){return Xr===Xr?a0(Rr,Xr,zr):Ss(Rr,hv,zr)}function cv(Rr,Xr,zr,jo){for(var hs=zr-1,Ds=Rr.length;++hs<Ds;)if(jo(Rr[hs],Xr))return hs;return-1}function hv(Rr){return Rr!==Rr}function fv(Rr,Xr){var zr=Rr==null?0:Rr.length;return zr?Ry(Rr,Xr)/zr:St}function qm(Rr){return function(Xr){return Xr==null?s:Xr[Rr]}}function l_(Rr){return function(Xr){return Rr==null?s:Rr[Xr]}}function dv(Rr,Xr,zr,jo,hs){return hs(Rr,function(Ds,Cl,Xs){zr=jo?(jo=!1,Ds):Xr(zr,Ds,Cl,Xs)}),zr}function o0(Rr,Xr){var zr=Rr.length;for(Rr.sort(Xr);zr--;)Rr[zr]=Rr[zr].value;return Rr}function Ry(Rr,Xr){for(var zr,jo=-1,hs=Rr.length;++jo<hs;){var Ds=Xr(Rr[jo]);Ds!==s&&(zr=zr===s?Ds:zr+Ds)}return zr}function Zm(Rr,Xr){for(var zr=-1,jo=Array(Rr);++zr<Rr;)jo[zr]=Xr(zr);return jo}function gv(Rr,Xr){return Qs(Xr,function(zr){return[zr,Rr[zr]]})}function Iy(Rr){return Rr&&Rr.slice(0,l0(Rr)+1).replace(Hn,"")}function mu(Rr){return function(Xr){return Rr(Xr)}}function u_(Rr,Xr){return Qs(Xr,function(zr){return Rr[zr]})}function Oy(Rr,Xr){return Rr.has(Xr)}function Ym(Rr,Xr){for(var zr=-1,jo=Rr.length;++zr<jo&&lp(Xr,Rr[zr],0)>-1;);return zr}function Km(Rr,Xr){for(var zr=Rr.length;zr--&&lp(Xr,Rr[zr],0)>-1;);return zr}function s0(Rr,Xr){for(var zr=Rr.length,jo=0;zr--;)Rr[zr]===Xr&&++jo;return jo}var c_=l_($o),h_=l_(Xo);function vp(Rr){return"\\"+xl[Rr]}function pv(Rr,Xr){return Rr==null?s:Rr[Xr]}function Om(Rr){return Tr.test(Rr)}function mv(Rr){return Cr.test(Rr)}function yv(Rr){for(var Xr,zr=[];!(Xr=Rr.next()).done;)zr.push(Xr.value);return zr}function Xm(Rr){var Xr=-1,zr=Array(Rr.size);return Rr.forEach(function(jo,hs){zr[++Xr]=[hs,jo]}),zr}function _v(Rr,Xr){return function(zr){return Rr(Xr(zr))}}function bp(Rr,Xr){for(var zr=-1,jo=Rr.length,hs=0,Ds=[];++zr<jo;){var Cl=Rr[zr];(Cl===Xr||Cl===ht)&&(Rr[zr]=ht,Ds[hs++]=zr)}return Ds}function f_(Rr){var Xr=-1,zr=Array(Rr.size);return Rr.forEach(function(jo){zr[++Xr]=jo}),zr}function My(Rr){var Xr=-1,zr=Array(Rr.size);return Rr.forEach(function(jo){zr[++Xr]=[jo,jo]}),zr}function a0(Rr,Xr,zr){for(var jo=zr-1,hs=Rr.length;++jo<hs;)if(Rr[jo]===Xr)return jo;return-1}function d_(Rr,Xr,zr){for(var jo=zr+1;jo--;)if(Rr[jo]===Xr)return jo;return jo}function Jm(Rr){return Om(Rr)?p_(Rr):a_(Rr)}function Pu(Rr){return Om(Rr)?vv(Rr):Cy(Rr)}function l0(Rr){for(var Xr=Rr.length;Xr--&&Qn.test(Rr.charAt(Xr)););return Xr}var g_=l_(xo);function p_(Rr){for(var Xr=jn.lastIndex=0;jn.test(Rr);)++Xr;return Xr}function vv(Rr){return Rr.match(jn)||[]}function bv(Rr){return Rr.match(Jn)||[]}var Qm=function Rr(Xr){Xr=Xr==null?Sl:ey.defaults(Sl.Object(),Xr,ey.pick(Sl,Vr));var zr=Xr.Array,jo=Xr.Date,hs=Xr.Error,Ds=Xr.Function,Cl=Xr.Math,Xs=Xr.Object,m_=Xr.RegExp,u0=Xr.String,Tu=Xr.TypeError,wp=zr.prototype,ty=Ds.prototype,sm=Xs.prototype,Hu=Xr["__core-js_shared__"],Np=ty.toString,Ws=sm.hasOwnProperty,Sp=0,Cs=function(){var mt=/[^.]+$/.exec(Hu&&Hu.keys&&Hu.keys.IE_PROTO||"");return mt?"Symbol(src)_1."+mt:""}(),$u=sm.toString,E1=Np.call(Xs),c0=Sl._,ny=m_("^"+Np.call(Ws).replace(En,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y_=op?Xr.Buffer:s,xp=Xr.Symbol,ry=Xr.Uint8Array,__=y_?y_.allocUnsafe:s,am=_v(Xs.getPrototypeOf,Xs),iy=Xs.create,lm=sm.propertyIsEnumerable,Mm=wp.splice,Py=xp?xp.isConcatSpreadable:s,Up=xp?xp.iterator:s,yu=xp?xp.toStringTag:s,um=function(){try{var mt=Lu(Xs,"defineProperty");return mt({},"",{}),mt}catch{}}(),wo=Xr.clearTimeout!==Sl.clearTimeout&&Xr.clearTimeout,ku=jo&&jo.now!==Sl.Date.now&&jo.now,wv=Xr.setTimeout!==Sl.setTimeout&&Xr.setTimeout,ky=Cl.ceil,oy=Cl.floor,up=Xs.getOwnPropertySymbols,h0=y_?y_.isBuffer:s,Dy=Xr.isFinite,Sv=wp.join,v_=_v(Xs.keys,Xs),Pl=Cl.max,Dl=Cl.min,zp=jo.now,Du=Xr.parseInt,Ly=Cl.random,f0=wp.reverse,sy=Lu(Xr,"DataView"),Pm=Lu(Xr,"Map"),b_=Lu(Xr,"Promise"),Vp=Lu(Xr,"Set"),cm=Lu(Xr,"WeakMap"),Wp=Lu(Xs,"create"),By=cm&&new cm,km={},w_=Qp(sy),d0=Qp(Pm),xv=Qp(b_),Dm=Qp(Vp),g0=Qp(cm),Lm=xp?xp.prototype:s,Gp=Lm?Lm.valueOf:s,S_=Lm?Lm.toString:s;function Wn(mt){if(Nl(mt)&&!ys(mt)&&!(mt instanceof Es)){if(mt instanceof Cu)return mt;if(Ws.call(mt,"__wrapped__"))return bm(mt)}return new Cu(mt)}var hm=function(){function mt(){}return function(Ct){if(!Il(Ct))return{};if(iy)return iy(Ct);mt.prototype=Ct;var Qt=new mt;return mt.prototype=s,Qt}}();function Wl(){}function Cu(mt,Ct){this.__wrapped__=mt,this.__actions__=[],this.__chain__=!!Ct,this.__index__=0,this.__values__=s}Wn.templateSettings={escape:ar,evaluate:nr,interpolate:$n,variable:"",imports:{_:Wn}},Wn.prototype=Wl.prototype,Wn.prototype.constructor=Wn,Cu.prototype=hm(Wl.prototype),Cu.prototype.constructor=Cu;function Es(mt){this.__wrapped__=mt,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zt,this.__views__=[]}function T1(){var mt=new Es(this.__wrapped__);return mt.__actions__=Ku(this.__actions__),mt.__dir__=this.__dir__,mt.__filtered__=this.__filtered__,mt.__iteratees__=Ku(this.__iteratees__),mt.__takeCount__=this.__takeCount__,mt.__views__=Ku(this.__views__),mt}function C1(){if(this.__filtered__){var mt=new Es(this);mt.__dir__=-1,mt.__filtered__=!0}else mt=this.clone(),mt.__dir__*=-1;return mt}function Hp(){var mt=this.__wrapped__.value(),Ct=this.__dir__,Qt=ys(mt),bn=Ct<0,Dn=Qt?mt.length:0,Kn=Ww(0,Dn,this.__views__),yr=Kn.start,xr=Kn.end,Mr=xr-yr,no=bn?xr:yr-1,Jr=this.__iteratees__,so=Jr.length,Co=0,Fo=Dl(Mr,this.__takeCount__);if(!Qt||!bn&&Dn==Mr&&Fo==Mr)return M1(mt,this.__actions__);var Zo=[];e:for(;Mr--&&Co<Fo;){no+=Ct;for(var _s=-1,ss=mt[no];++_s<so;){var Rs=Jr[_s],Ps=Rs.iteratee,ju=Rs.type,Fu=Ps(ss);if(ju==Gt)ss=Fu;else if(!Fu){if(ju==Xt)continue e;break e}}Zo[Co++]=ss}return Zo}Es.prototype=hm(Wl.prototype),Es.prototype.constructor=Es;function $p(mt){var Ct=-1,Qt=mt==null?0:mt.length;for(this.clear();++Ct<Qt;){var bn=mt[Ct];this.set(bn[0],bn[1])}}function ay(){this.__data__=Wp?Wp(null):{},this.size=0}function Ap(mt){var Ct=this.has(mt)&&delete this.__data__[mt];return this.size-=Ct?1:0,Ct}function x_(mt){var Ct=this.__data__;if(Wp){var Qt=Ct[mt];return Qt===it?s:Qt}return Ws.call(Ct,mt)?Ct[mt]:s}function Ao(mt){var Ct=this.__data__;return Wp?Ct[mt]!==s:Ws.call(Ct,mt)}function p0(mt,Ct){var Qt=this.__data__;return this.size+=this.has(mt)?0:1,Qt[mt]=Wp&&Ct===s?it:Ct,this}$p.prototype.clear=ay,$p.prototype.delete=Ap,$p.prototype.get=x_,$p.prototype.has=Ao,$p.prototype.set=p0;function Ep(mt){var Ct=-1,Qt=mt==null?0:mt.length;for(this.clear();++Ct<Qt;){var bn=mt[Ct];this.set(bn[0],bn[1])}}function jy(){this.__data__=[],this.size=0}function fm(mt){var Ct=this.__data__,Qt=Bm(Ct,mt);if(Qt<0)return!1;var bn=Ct.length-1;return Qt==bn?Ct.pop():Mm.call(Ct,Qt,1),--this.size,!0}function m0(mt){var Ct=this.__data__,Qt=Bm(Ct,mt);return Qt<0?s:Ct[Qt][1]}function y0(mt){return Bm(this.__data__,mt)>-1}function Fy(mt,Ct){var Qt=this.__data__,bn=Bm(Qt,mt);return bn<0?(++this.size,Qt.push([mt,Ct])):Qt[bn][1]=Ct,this}Ep.prototype.clear=jy,Ep.prototype.delete=fm,Ep.prototype.get=m0,Ep.prototype.has=y0,Ep.prototype.set=Fy;function Tp(mt){var Ct=-1,Qt=mt==null?0:mt.length;for(this.clear();++Ct<Qt;){var bn=mt[Ct];this.set(bn[0],bn[1])}}function Av(){this.size=0,this.__data__={hash:new $p,map:new(Pm||Ep),string:new $p}}function _0(mt){var Ct=Bv(this,mt).delete(mt);return this.size-=Ct?1:0,Ct}function Ev(mt){return Bv(this,mt).get(mt)}function Ny(mt){return Bv(this,mt).has(mt)}function A_(mt,Ct){var Qt=Bv(this,mt),bn=Qt.size;return Qt.set(mt,Ct),this.size+=Qt.size==bn?0:1,this}Tp.prototype.clear=Av,Tp.prototype.delete=_0,Tp.prototype.get=Ev,Tp.prototype.has=Ny,Tp.prototype.set=A_;function cp(mt){var Ct=-1,Qt=mt==null?0:mt.length;for(this.__data__=new Tp;++Ct<Qt;)this.add(mt[Ct])}function E_(mt){return this.__data__.set(mt,it),this}function T_(mt){return this.__data__.has(mt)}cp.prototype.add=cp.prototype.push=E_,cp.prototype.has=T_;function qu(mt){var Ct=this.__data__=new Ep(mt);this.size=Ct.size}function v0(){this.__data__=new Ep,this.size=0}function Tv(mt){var Ct=this.__data__,Qt=Ct.delete(mt);return this.size=Ct.size,Qt}function b0(mt){return this.__data__.get(mt)}function w0(mt){return this.__data__.has(mt)}function Cv(mt,Ct){var Qt=this.__data__;if(Qt instanceof Ep){var bn=Qt.__data__;if(!Pm||bn.length<$-1)return bn.push([mt,Ct]),this.size=++Qt.size,this;Qt=this.__data__=new Tp(bn)}return Qt.set(mt,Ct),this.size=Qt.size,this}qu.prototype.clear=v0,qu.prototype.delete=Tv,qu.prototype.get=b0,qu.prototype.has=w0,qu.prototype.set=Cv;function Uy(mt,Ct){var Qt=ys(mt),bn=!Qt&&yy(mt),Dn=!Qt&&!bn&&_y(mt),Kn=!Qt&&!bn&&!Dn&&q_(mt),yr=Qt||bn||Dn||Kn,xr=yr?Zm(mt.length,u0):[],Mr=xr.length;for(var no in mt)(Ct||Ws.call(mt,no))&&!(yr&&(no=="length"||Dn&&(no=="offset"||no=="parent")||Kn&&(no=="buffer"||no=="byteLength"||no=="byteOffset")||vm(no,Mr)))&&xr.push(no);return xr}function Rv(mt){var Ct=mt.length;return Ct?mt[Xl(0,Ct-1)]:s}function S0(mt,Ct){return N0(Ku(mt),kt(Ct,0,mt.length))}function x0(mt){return N0(Ku(mt))}function zy(mt,Ct,Qt){(Qt!==s&&!_h(mt[Ct],Qt)||Qt===s&&!(Ct in mt))&&lt(mt,Ct,Qt)}function ly(mt,Ct,Qt){var bn=mt[Ct];(!(Ws.call(mt,Ct)&&_h(bn,Qt))||Qt===s&&!(Ct in mt))&&lt(mt,Ct,Qt)}function Bm(mt,Ct){for(var Qt=mt.length;Qt--;)if(_h(mt[Qt][0],Ct))return Qt;return-1}function Vy(mt,Ct,Qt,bn){return Sn(mt,function(Dn,Kn,yr){Ct(bn,Dn,Qt(Dn),yr)}),bn}function dt(mt,Ct){return mt&&pm(Ct,Ql(Ct),mt)}function ot(mt,Ct){return mt&&pm(Ct,Bu(Ct),mt)}function lt(mt,Ct,Qt){Ct=="__proto__"&&um?um(mt,Ct,{configurable:!0,enumerable:!0,value:Qt,writable:!0}):mt[Ct]=Qt}function bt(mt,Ct){for(var Qt=-1,bn=Ct.length,Dn=zr(bn),Kn=mt==null;++Qt<bn;)Dn[Qt]=Kn?s:o1(mt,Ct[Qt]);return Dn}function kt(mt,Ct,Qt){return mt===mt&&(Qt!==s&&(mt=mt<=Qt?mt:Qt),Ct!==s&&(mt=mt>=Ct?mt:Ct)),mt}function jt(mt,Ct,Qt,bn,Dn,Kn){var yr,xr=Ct&_t,Mr=Ct&gt,no=Ct&ft;if(Qt&&(yr=Dn?Qt(mt,bn,Dn,Kn):Qt(mt)),yr!==s)return yr;if(!Il(mt))return mt;var Jr=ys(mt);if(Jr){if(yr=px(mt),!xr)return Ku(mt,yr)}else{var so=au(mt),Co=so==hn||so==xn;if(_y(mt))return L1(mt,xr);if(so==_i||so==vn||Co&&!Dn){if(yr=Mr||Co?{}:D0(mt),!xr)return Mr?U1(mt,ot(yr,mt)):fx(mt,dt(yr,mt))}else{if(!To[so])return Dn?mt:{};yr=mx(mt,so,xr)}}Kn||(Kn=new qu);var Fo=Kn.get(mt);if(Fo)return Fo;Kn.set(mt,yr),DS(mt)?mt.forEach(function(ss){yr.add(jt(ss,Ct,Qt,ss,mt,Kn))}):$_(mt)&&mt.forEach(function(ss,Rs){yr.set(Rs,jt(ss,Ct,Qt,Rs,mt,Kn))});var Zo=no?Mr?Lv:dy:Mr?Bu:Ql,_s=Jr?s:Zo(mt);return pu(_s||mt,function(ss,Rs){_s&&(Rs=ss,ss=mt[Rs]),ly(yr,Rs,jt(ss,Ct,Qt,Rs,mt,Kn))}),yr}function Jt(mt){var Ct=Ql(mt);return function(Qt){return an(Qt,mt,Ct)}}function an(mt,Ct,Qt){var bn=Qt.length;if(mt==null)return!bn;for(mt=Xs(mt);bn--;){var Dn=Qt[bn],Kn=Ct[Dn],yr=mt[Dn];if(yr===s&&!(Dn in mt)||!Kn(yr))return!1}return!0}function cn(mt,Ct,Qt){if(typeof mt!="function")throw new Tu(tt);return Hy(function(){mt.apply(s,Qt)},Ct)}function _n(mt,Ct,Qt,bn){var Dn=-1,Kn=im,yr=!0,xr=mt.length,Mr=[],no=Ct.length;if(!xr)return Mr;Qt&&(Ct=Qs(Ct,mu(Qt))),bn?(Kn=$m,yr=!1):Ct.length>=$&&(Kn=Oy,yr=!1,Ct=new cp(Ct));e:for(;++Dn<xr;){var Jr=mt[Dn],so=Qt==null?Jr:Qt(Jr);if(Jr=bn||Jr!==0?Jr:0,yr&&so===so){for(var Co=no;Co--;)if(Ct[Co]===so)continue e;Mr.push(Jr)}else Kn(Ct,so,bn)||Mr.push(Jr)}return Mr}var Sn=mm(Zn),In=mm(fr,!0);function Bn(mt,Ct){var Qt=!0;return Sn(mt,function(bn,Dn,Kn){return Qt=!!Ct(bn,Dn,Kn),Qt}),Qt}function Yn(mt,Ct,Qt){for(var bn=-1,Dn=mt.length;++bn<Dn;){var Kn=mt[bn],yr=Ct(Kn);if(yr!=null&&(xr===s?yr===yr&&!mp(yr):Qt(yr,xr)))var xr=yr,Mr=Kn}return Mr}function Gn(mt,Ct,Qt,bn){var Dn=mt.length;for(Qt=xs(Qt),Qt<0&&(Qt=-Qt>Dn?0:Dn+Qt),bn=bn===s||bn>Dn?Dn:xs(bn),bn<0&&(bn+=Dn),bn=Qt>bn?0:LS(bn);Qt<bn;)mt[Qt++]=Ct;return mt}function Xn(mt,Ct){var Qt=[];return Sn(mt,function(bn,Dn,Kn){Ct(bn,Dn,Kn)&&Qt.push(bn)}),Qt}function Un(mt,Ct,Qt,bn,Dn){var Kn=-1,yr=mt.length;for(Qt||(Qt=Gw),Dn||(Dn=[]);++Kn<yr;){var xr=mt[Kn];Ct>0&&Qt(xr)?Ct>1?Un(xr,Ct-1,Qt,bn,Dn):ap(Dn,xr):bn||(Dn[Dn.length]=xr)}return Dn}var Nn=Ip(),er=Ip(!0);function Zn(mt,Ct){return mt&&Nn(mt,Ct,Ql)}function fr(mt,Ct){return mt&&er(mt,Ct,Ql)}function pr(mt,Ct){return ms(Ct,function(Qt){return zm(mt[Qt])})}function tr(mt,Ct){Ct=cy(Ct,mt);for(var Qt=0,bn=Ct.length;mt!=null&&Qt<bn;)mt=mt[Jp(Ct[Qt++])];return Qt&&Qt==bn?mt:s}function vr(mt,Ct,Qt){var bn=Ct(mt);return ys(mt)?bn:ap(bn,Qt(mt))}function Er(mt){return mt==null?mt===s?Mo:Ir:yu&&yu in Xs(mt)?Wy(mt):Yw(mt)}function Lr(mt,Ct){return mt>Ct}function kr(mt,Ct){return mt!=null&&Ws.call(mt,Ct)}function io(mt,Ct){return mt!=null&&Ct in Xs(mt)}function Ar(mt,Ct,Qt){return mt>=Dl(Ct,Qt)&&mt<Pl(Ct,Qt)}function $r(mt,Ct,Qt){for(var bn=Qt?$m:im,Dn=mt[0].length,Kn=mt.length,yr=Kn,xr=zr(Kn),Mr=1/0,no=[];yr--;){var Jr=mt[yr];yr&&Ct&&(Jr=Qs(Jr,mu(Ct))),Mr=Dl(Jr.length,Mr),xr[yr]=!Qt&&(Ct||Dn>=120&&Jr.length>=120)?new cp(yr&&Jr):s}Jr=mt[0];var so=-1,Co=xr[0];e:for(;++so<Dn&&no.length<Mr;){var Fo=Jr[so],Zo=Ct?Ct(Fo):Fo;if(Fo=Qt||Fo!==0?Fo:0,!(Co?Oy(Co,Zo):bn(no,Zo,Qt))){for(yr=Kn;--yr;){var _s=xr[yr];if(!(_s?Oy(_s,Zo):bn(mt[yr],Zo,Qt)))continue e}Co&&Co.push(Zo),no.push(Fo)}}return no}function qr(mt,Ct,Qt,bn){return Zn(mt,function(Dn,Kn,yr){Ct(bn,Qt(Dn),Kn,yr)}),bn}function Or(mt,Ct,Qt){Ct=cy(Ct,mt),mt=F0(mt,Ct);var bn=mt==null?mt:mt[Jp(Qu(Ct))];return bn==null?s:gu(bn,mt,Qt)}function Sr(mt){return Nl(mt)&&Er(mt)==vn}function mo(mt){return Nl(mt)&&Er(mt)==Io}function lo(mt){return Nl(mt)&&Er(mt)==Dt}function ho(mt,Ct,Qt,bn,Dn){return mt===Ct?!0:mt==null||Ct==null||!Nl(mt)&&!Nl(Ct)?mt!==mt&&Ct!==Ct:uo(mt,Ct,Qt,bn,ho,Dn)}function uo(mt,Ct,Qt,bn,Dn,Kn){var yr=ys(mt),xr=ys(Ct),Mr=yr?un:au(mt),no=xr?un:au(Ct);Mr=Mr==vn?_i:Mr,no=no==vn?_i:no;var Jr=Mr==_i,so=no==_i,Co=Mr==no;if(Co&&_y(mt)){if(!_y(Ct))return!1;yr=!0,Jr=!1}if(Co&&!Jr)return Kn||(Kn=new qu),yr||q_(mt)?Jl(mt,Ct,Qt,bn,Dn,Kn):Vw(mt,Ct,Mr,Qt,bn,Dn,Kn);if(!(Qt&ut)){var Fo=Jr&&Ws.call(mt,"__wrapped__"),Zo=so&&Ws.call(Ct,"__wrapped__");if(Fo||Zo){var _s=Fo?mt.value():mt,ss=Zo?Ct.value():Ct;return Kn||(Kn=new qu),Dn(_s,ss,Qt,bn,Kn)}}return Co?(Kn||(Kn=new qu),ym(mt,Ct,Qt,bn,Dn,Kn)):!1}function Po(mt){return Nl(mt)&&au(mt)==Mn}function zo(mt,Ct,Qt,bn){var Dn=Qt.length,Kn=Dn,yr=!bn;if(mt==null)return!Kn;for(mt=Xs(mt);Dn--;){var xr=Qt[Dn];if(yr&&xr[2]?xr[1]!==mt[xr[0]]:!(xr[0]in mt))return!1}for(;++Dn<Kn;){xr=Qt[Dn];var Mr=xr[0],no=mt[Mr],Jr=xr[1];if(yr&&xr[2]){if(no===s&&!(Mr in mt))return!1}else{var so=new qu;if(bn)var Co=bn(no,Jr,Mr,mt,Ct,so);if(!(Co===s?ho(Jr,no,ut|yt,bn,so):Co))return!1}}return!0}function Uo(mt){if(!Il(mt)||B0(mt))return!1;var Ct=zm(mt)?ny:Oo;return Ct.test(Qp(mt))}function Bo(mt){return Nl(mt)&&Er(mt)==Gr}function co(mt){return Nl(mt)&&au(mt)==Yr}function Yo(mt){return Nl(mt)&&vy(mt.length)&&!!go[Er(mt)]}function ls(mt){return typeof mt=="function"?mt:mt==null?_d:typeof mt=="object"?ys(mt)?hp(mt[0],mt[1]):iu(mt):ox(mt)}function Ls(mt){if(!k_(mt))return v_(mt);var Ct=[];for(var Qt in Xs(mt))Ws.call(mt,Qt)&&Qt!="constructor"&&Ct.push(Qt);return Ct}function Ns(mt){if(!Il(mt))return Zw(mt);var Ct=k_(mt),Qt=[];for(var bn in mt)bn=="constructor"&&(Ct||!Ws.call(mt,bn))||Qt.push(bn);return Qt}function Os(mt,Ct){return mt<Ct}function Ll(mt,Ct){var Qt=-1,bn=_f(mt)?zr(mt.length):[];return Sn(mt,function(Dn,Kn,yr){bn[++Qt]=Ct(Dn,Kn,yr)}),bn}function iu(mt){var Ct=V1(mt);return Ct.length==1&&Ct[0][2]?qw(Ct[0][0],Ct[0][1]):function(Qt){return Qt===mt||zo(Qt,mt,Ct)}}function hp(mt,Ct){return L0(mt)&&$w(Ct)?qw(Jp(mt),Ct):function(Qt){var bn=o1(Qt,mt);return bn===s&&bn===Ct?s1(Qt,mt):ho(Ct,bn,ut|yt)}}function Us(mt,Ct,Qt,bn,Dn){mt!==Ct&&Nn(Ct,function(Kn,yr){if(Dn||(Dn=new qu),Il(Kn))xa(mt,Ct,yr,Qt,Us,bn,Dn);else{var xr=bn?bn(Gy(mt,yr),Kn,yr+"",mt,Ct,Dn):s;xr===s&&(xr=Kn),zy(mt,yr,xr)}},Bu)}function xa(mt,Ct,Qt,bn,Dn,Kn,yr){var xr=Gy(mt,Qt),Mr=Gy(Ct,Qt),no=yr.get(Mr);if(no){zy(mt,Qt,no);return}var Jr=Kn?Kn(xr,Mr,Qt+"",mt,Ct,yr):s,so=Jr===s;if(so){var Co=ys(Mr),Fo=!Co&&_y(Mr),Zo=!Co&&!Fo&&q_(Mr);Jr=Mr,Co||Fo||Zo?ys(xr)?Jr=xr:Hl(xr)?Jr=Ku(xr):Fo?(so=!1,Jr=L1(Mr,!0)):Zo?(so=!1,Jr=Ov(Mr,!0)):Jr=[]:xm(Mr)||yy(Mr)?(Jr=xr,yy(xr)?Jr=r1(xr):(!Il(xr)||zm(xr))&&(Jr=D0(Mr))):so=!1}so&&(yr.set(Mr,Jr),Dn(Jr,Mr,bn,Kn,yr),yr.delete(Mr)),zy(mt,Qt,Jr)}function Ms(mt,Ct){var Qt=mt.length;if(Qt)return Ct+=Ct<0?Qt:0,vm(Ct,Qt)?mt[Ct]:s}function Tl(mt,Ct,Qt){Ct.length?Ct=Qs(Ct,function(Kn){return ys(Kn)?function(yr){return tr(yr,Kn.length===1?Kn[0]:Kn)}:Kn}):Ct=[_d];var bn=-1;Ct=Qs(Ct,mu(es()));var Dn=Ll(mt,function(Kn,yr,xr){var Mr=Qs(Ct,function(no){return no(Kn)});return{criteria:Mr,index:++bn,value:Kn}});return o0(Dn,function(Kn,yr){return O0(Kn,yr,Qt)})}function ou(mt,Ct){return Gs(mt,Ct,function(Qt,bn){return s1(mt,bn)})}function Gs(mt,Ct,Qt){for(var bn=-1,Dn=Ct.length,Kn={};++bn<Dn;){var yr=Ct[bn],xr=tr(mt,yr);Qt(xr,yr)&&_u(Kn,cy(yr,mt),xr)}return Kn}function Ru(mt){return function(Ct){return tr(Ct,mt)}}function qp(mt,Ct,Qt,bn){var Dn=bn?cv:lp,Kn=-1,yr=Ct.length,xr=mt;for(mt===Ct&&(Ct=Ku(Ct)),Qt&&(xr=Qs(mt,mu(Qt)));++Kn<yr;)for(var Mr=0,no=Ct[Kn],Jr=Qt?Qt(no):no;(Mr=Dn(xr,Jr,Mr,bn))>-1;)xr!==mt&&Mm.call(xr,Mr,1),Mm.call(mt,Mr,1);return mt}function Zu(mt,Ct){for(var Qt=mt?Ct.length:0,bn=Qt-1;Qt--;){var Dn=Ct[Qt];if(Qt==bn||Dn!==Kn){var Kn=Dn;vm(Dn)?Mm.call(mt,Dn,1):T0(mt,Dn)}}return mt}function Xl(mt,Ct){return mt+oy(Ly()*(Ct-mt+1))}function uy(mt,Ct,Qt,bn){for(var Dn=-1,Kn=Pl(ky((Ct-mt)/(Qt||1)),0),yr=zr(Kn);Kn--;)yr[bn?Kn:++Dn]=mt,mt+=Qt;return yr}function Cp(mt,Ct){var Qt="";if(!mt||Ct<1||Ct>qt)return Qt;do Ct%2&&(Qt+=mt),Ct=oy(Ct/2),Ct&&(mt+=mt);while(Ct);return Qt}function qo(mt,Ct){return L_(Xp(mt,Ct,_d),mt+"")}function Rp(mt){return Rv(X_(mt))}function dm(mt,Ct){var Qt=X_(mt);return N0(Qt,kt(Ct,0,Qt.length))}function _u(mt,Ct,Qt,bn){if(!Il(mt))return mt;Ct=cy(Ct,mt);for(var Dn=-1,Kn=Ct.length,yr=Kn-1,xr=mt;xr!=null&&++Dn<Kn;){var Mr=Jp(Ct[Dn]),no=Qt;if(Mr==="__proto__"||Mr==="constructor"||Mr==="prototype")return mt;if(Dn!=yr){var Jr=xr[Mr];no=bn?bn(Jr,Mr,xr):s,no===s&&(no=Il(Jr)?Jr:vm(Ct[Dn+1])?[]:{})}ly(xr,Mr,no),xr=xr[Mr]}return mt}var C_=By?function(mt,Ct){return By.set(mt,Ct),mt}:_d,A0=um?function(mt,Ct){return um(mt,"toString",{configurable:!0,enumerable:!1,value:g1(Ct),writable:!0})}:_d;function Bw(mt){return N0(X_(mt))}function fp(mt,Ct,Qt){var bn=-1,Dn=mt.length;Ct<0&&(Ct=-Ct>Dn?0:Dn+Ct),Qt=Qt>Dn?Dn:Qt,Qt<0&&(Qt+=Dn),Dn=Ct>Qt?0:Qt-Ct>>>0,Ct>>>=0;for(var Kn=zr(Dn);++bn<Dn;)Kn[bn]=mt[bn+Ct];return Kn}function jw(mt,Ct){var Qt;return Sn(mt,function(bn,Dn,Kn){return Qt=Ct(bn,Dn,Kn),!Qt}),!!Qt}function R_(mt,Ct,Qt){var bn=0,Dn=mt==null?bn:mt.length;if(typeof Ct=="number"&&Ct===Ct&&Dn<=mn){for(;bn<Dn;){var Kn=bn+Dn>>>1,yr=mt[Kn];yr!==null&&!mp(yr)&&(Qt?yr<=Ct:yr<Ct)?bn=Kn+1:Dn=Kn}return Dn}return E0(mt,Ct,_d,Qt)}function E0(mt,Ct,Qt,bn){var Dn=0,Kn=mt==null?0:mt.length;if(Kn===0)return 0;Ct=Qt(Ct);for(var yr=Ct!==Ct,xr=Ct===null,Mr=mp(Ct),no=Ct===s;Dn<Kn;){var Jr=oy((Dn+Kn)/2),so=Qt(mt[Jr]),Co=so!==s,Fo=so===null,Zo=so===so,_s=mp(so);if(yr)var ss=bn||Zo;else no?ss=Zo&&(bn||Co):xr?ss=Zo&&Co&&(bn||!Fo):Mr?ss=Zo&&Co&&!Fo&&(bn||!_s):Fo||_s?ss=!1:ss=bn?so<=Ct:so<Ct;ss?Dn=Jr+1:Kn=Jr}return Dl(Kn,tn)}function R1(mt,Ct){for(var Qt=-1,bn=mt.length,Dn=0,Kn=[];++Qt<bn;){var yr=mt[Qt],xr=Ct?Ct(yr):yr;if(!Qt||!_h(xr,Mr)){var Mr=xr;Kn[Dn++]=yr===0?0:yr}}return Kn}function I1(mt){return typeof mt=="number"?mt:mp(mt)?St:+mt}function Yu(mt){if(typeof mt=="string")return mt;if(ys(mt))return Qs(mt,Yu)+"";if(mp(mt))return S_?S_.call(mt):"";var Ct=mt+"";return Ct=="0"&&1/mt==-Ht?"-0":Ct}function jm(mt,Ct,Qt){var bn=-1,Dn=im,Kn=mt.length,yr=!0,xr=[],Mr=xr;if(Qt)yr=!1,Dn=$m;else if(Kn>=$){var no=Ct?null:zw(mt);if(no)return f_(no);yr=!1,Dn=Oy,Mr=new cp}else Mr=Ct?[]:xr;e:for(;++bn<Kn;){var Jr=mt[bn],so=Ct?Ct(Jr):Jr;if(Jr=Qt||Jr!==0?Jr:0,yr&&so===so){for(var Co=Mr.length;Co--;)if(Mr[Co]===so)continue e;Ct&&Mr.push(so),xr.push(Jr)}else Dn(Mr,so,Qt)||(Mr!==xr&&Mr.push(so),xr.push(Jr))}return xr}function T0(mt,Ct){return Ct=cy(Ct,mt),mt=F0(mt,Ct),mt==null||delete mt[Jp(Qu(Ct))]}function O1(mt,Ct,Qt,bn){return _u(mt,Ct,Qt(tr(mt,Ct)),bn)}function Iv(mt,Ct,Qt,bn){for(var Dn=mt.length,Kn=bn?Dn:-1;(bn?Kn--:++Kn<Dn)&&Ct(mt[Kn],Kn,mt););return Qt?fp(mt,bn?0:Kn,bn?Kn+1:Dn):fp(mt,bn?Kn+1:0,bn?Dn:Kn)}function M1(mt,Ct){var Qt=mt;return Qt instanceof Es&&(Qt=Qt.value()),o_(Ct,function(bn,Dn){return Dn.func.apply(Dn.thisArg,ap([bn],Dn.args))},Qt)}function C0(mt,Ct,Qt){var bn=mt.length;if(bn<2)return bn?jm(mt[0]):[];for(var Dn=-1,Kn=zr(bn);++Dn<bn;)for(var yr=mt[Dn],xr=-1;++xr<bn;)xr!=Dn&&(Kn[Dn]=_n(Kn[Dn]||yr,mt[xr],Ct,Qt));return jm(Un(Kn,1),Ct,Qt)}function P1(mt,Ct,Qt){for(var bn=-1,Dn=mt.length,Kn=Ct.length,yr={};++bn<Dn;){var xr=bn<Kn?Ct[bn]:s;Qt(yr,mt[bn],xr)}return yr}function R0(mt){return Hl(mt)?mt:[]}function k1(mt){return typeof mt=="function"?mt:_d}function cy(mt,Ct){return ys(mt)?mt:L0(mt,Ct)?[mt]:U0(qs(mt))}var I_=qo;function Fm(mt,Ct,Qt){var bn=mt.length;return Qt=Qt===s?bn:Qt,!Ct&&Qt>=bn?mt:fp(mt,Ct,Qt)}var D1=wo||function(mt){return Sl.clearTimeout(mt)};function L1(mt,Ct){if(Ct)return mt.slice();var Qt=mt.length,bn=__?__(Qt):new mt.constructor(Qt);return mt.copy(bn),bn}function B1(mt){var Ct=new mt.constructor(mt.byteLength);return new ry(Ct).set(new ry(mt)),Ct}function I0(mt,Ct){var Qt=Ct?B1(mt.buffer):mt.buffer;return new mt.constructor(Qt,mt.byteOffset,mt.byteLength)}function Fw(mt){var Ct=new mt.constructor(mt.source,Hr.exec(mt));return Ct.lastIndex=mt.lastIndex,Ct}function j1(mt){return Gp?Xs(Gp.call(mt)):{}}function Ov(mt,Ct){var Qt=Ct?B1(mt.buffer):mt.buffer;return new mt.constructor(Qt,mt.byteOffset,mt.length)}function gm(mt,Ct){if(mt!==Ct){var Qt=mt!==s,bn=mt===null,Dn=mt===mt,Kn=mp(mt),yr=Ct!==s,xr=Ct===null,Mr=Ct===Ct,no=mp(Ct);if(!xr&&!no&&!Kn&&mt>Ct||Kn&&yr&&Mr&&!xr&&!no||bn&&yr&&Mr||!Qt&&Mr||!Dn)return 1;if(!bn&&!Kn&&!no&&mt<Ct||no&&Qt&&Dn&&!bn&&!Kn||xr&&Qt&&Dn||!yr&&Dn||!Mr)return-1}return 0}function O0(mt,Ct,Qt){for(var bn=-1,Dn=mt.criteria,Kn=Ct.criteria,yr=Dn.length,xr=Qt.length;++bn<yr;){var Mr=gm(Dn[bn],Kn[bn]);if(Mr){if(bn>=xr)return Mr;var no=Qt[bn];return Mr*(no=="desc"?-1:1)}}return mt.index-Ct.index}function F1(mt,Ct,Qt,bn){for(var Dn=-1,Kn=mt.length,yr=Qt.length,xr=-1,Mr=Ct.length,no=Pl(Kn-yr,0),Jr=zr(Mr+no),so=!bn;++xr<Mr;)Jr[xr]=Ct[xr];for(;++Dn<yr;)(so||Dn<Kn)&&(Jr[Qt[Dn]]=mt[Dn]);for(;no--;)Jr[xr++]=mt[Dn++];return Jr}function N1(mt,Ct,Qt,bn){for(var Dn=-1,Kn=mt.length,yr=-1,xr=Qt.length,Mr=-1,no=Ct.length,Jr=Pl(Kn-xr,0),so=zr(Jr+no),Co=!bn;++Dn<Jr;)so[Dn]=mt[Dn];for(var Fo=Dn;++Mr<no;)so[Fo+Mr]=Ct[Mr];for(;++yr<xr;)(Co||Dn<Kn)&&(so[Fo+Qt[yr]]=mt[Dn++]);return so}function Ku(mt,Ct){var Qt=-1,bn=mt.length;for(Ct||(Ct=zr(bn));++Qt<bn;)Ct[Qt]=mt[Qt];return Ct}function pm(mt,Ct,Qt,bn){var Dn=!Qt;Qt||(Qt={});for(var Kn=-1,yr=Ct.length;++Kn<yr;){var xr=Ct[Kn],Mr=bn?bn(Qt[xr],mt[xr],xr,Qt,mt):s;Mr===s&&(Mr=mt[xr]),Dn?lt(Qt,xr,Mr):ly(Qt,xr,Mr)}return Qt}function fx(mt,Ct){return pm(mt,P_(mt),Ct)}function U1(mt,Ct){return pm(mt,jv(mt),Ct)}function hy(mt,Ct){return function(Qt,bn){var Dn=ys(Qt)?lv:Vy,Kn=Ct?Ct():{};return Dn(Qt,mt,es(bn,2),Kn)}}function Zp(mt){return qo(function(Ct,Qt){var bn=-1,Dn=Qt.length,Kn=Dn>1?Qt[Dn-1]:s,yr=Dn>2?Qt[2]:s;for(Kn=mt.length>3&&typeof Kn=="function"?(Dn--,Kn):s,yr&&Gl(Qt[0],Qt[1],yr)&&(Kn=Dn<3?s:Kn,Dn=1),Ct=Xs(Ct);++bn<Dn;){var xr=Qt[bn];xr&&mt(Ct,xr,bn,Kn)}return Ct})}function mm(mt,Ct){return function(Qt,bn){if(Qt==null)return Qt;if(!_f(Qt))return mt(Qt,bn);for(var Dn=Qt.length,Kn=Ct?Dn:-1,yr=Xs(Qt);(Ct?Kn--:++Kn<Dn)&&bn(yr[Kn],Kn,yr)!==!1;);return Qt}}function Ip(mt){return function(Ct,Qt,bn){for(var Dn=-1,Kn=Xs(Ct),yr=bn(Ct),xr=yr.length;xr--;){var Mr=yr[mt?xr:++Dn];if(Qt(Kn[Mr],Mr,Kn)===!1)break}return Ct}}function fy(mt,Ct,Qt){var bn=Ct&Et,Dn=Mv(mt);function Kn(){var yr=this&&this!==Sl&&this instanceof Kn?Dn:mt;return yr.apply(bn?Qt:this,arguments)}return Kn}function Nm(mt){return function(Ct){Ct=qs(Ct);var Qt=Om(Ct)?Pu(Ct):s,bn=Qt?Qt[0]:Ct.charAt(0),Dn=Qt?Fm(Qt,1).join(""):Ct.slice(1);return bn[mt]()+Dn}}function Op(mt){return function(Ct){return o_(tv(bw(Ct).replace(zn,"")),mt,"")}}function Mv(mt){return function(){var Ct=arguments;switch(Ct.length){case 0:return new mt;case 1:return new mt(Ct[0]);case 2:return new mt(Ct[0],Ct[1]);case 3:return new mt(Ct[0],Ct[1],Ct[2]);case 4:return new mt(Ct[0],Ct[1],Ct[2],Ct[3]);case 5:return new mt(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4]);case 6:return new mt(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4],Ct[5]);case 7:return new mt(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4],Ct[5],Ct[6])}var Qt=hm(mt.prototype),bn=mt.apply(Qt,Ct);return Il(bn)?bn:Qt}}function dx(mt,Ct,Qt){var bn=Mv(mt);function Dn(){for(var Kn=arguments.length,yr=zr(Kn),xr=Kn,Mr=M_(Dn);xr--;)yr[xr]=arguments[xr];var no=Kn<3&&yr[0]!==Mr&&yr[Kn-1]!==Mr?[]:bp(yr,Mr);if(Kn-=no.length,Kn<Qt)return Dv(mt,Ct,Pv,Dn.placeholder,s,yr,no,s,s,Qt-Kn);var Jr=this&&this!==Sl&&this instanceof Dn?bn:mt;return gu(Jr,this,yr)}return Dn}function Nw(mt){return function(Ct,Qt,bn){var Dn=Xs(Ct);if(!_f(Ct)){var Kn=es(Qt,3);Ct=Ql(Ct),Qt=function(xr){return Kn(Dn[xr],xr,Dn)}}var yr=mt(Ct,Qt,bn);return yr>-1?Dn[Kn?Ct[yr]:yr]:s}}function Uw(mt){return _m(function(Ct){var Qt=Ct.length,bn=Qt,Dn=Cu.prototype.thru;for(mt&&Ct.reverse();bn--;){var Kn=Ct[bn];if(typeof Kn!="function")throw new Tu(tt);if(Dn&&!yr&&O_(Kn)=="wrapper")var yr=new Cu([],!0)}for(bn=yr?bn:Qt;++bn<Qt;){Kn=Ct[bn];var xr=O_(Kn),Mr=xr=="wrapper"?k0(Kn):s;Mr&&gy(Mr[0])&&Mr[1]==(nn|Rt|pt|on)&&!Mr[4].length&&Mr[9]==1?yr=yr[O_(Mr[0])].apply(yr,Mr[3]):yr=Kn.length==1&&gy(Kn)?yr[xr]():yr.thru(Kn)}return function(){var no=arguments,Jr=no[0];if(yr&&no.length==1&&ys(Jr))return yr.plant(Jr).value();for(var so=0,Co=Qt?Ct[so].apply(this,no):Jr;++so<Qt;)Co=Ct[so].call(this,Co);return Co}})}function Pv(mt,Ct,Qt,bn,Dn,Kn,yr,xr,Mr,no){var Jr=Ct&nn,so=Ct&Et,Co=Ct&Mt,Fo=Ct&(Rt|Ot),Zo=Ct&wt,_s=Co?s:Mv(mt);function ss(){for(var Rs=arguments.length,Ps=zr(Rs),ju=Rs;ju--;)Ps[ju]=arguments[ju];if(Fo)var Fu=M_(ss),_g=s0(Ps,Fu);if(bn&&(Ps=F1(Ps,bn,Dn,Fo)),Kn&&(Ps=N1(Ps,Kn,yr,Fo)),Rs-=_g,Fo&&Rs<no){var Ul=bp(Ps,Fu);return Dv(mt,Ct,Pv,ss.placeholder,Qt,Ps,Ul,xr,Mr,no-Rs)}var Dp=so?Qt:this,Tm=Co?Dp[mt]:mt;return Rs=Ps.length,xr?Ps=D_(Ps,xr):Zo&&Rs>1&&Ps.reverse(),Jr&&Mr<Rs&&(Ps.length=Mr),this&&this!==Sl&&this instanceof ss&&(Tm=_s||Mv(Tm)),Tm.apply(Dp,Ps)}return ss}function kv(mt,Ct){return function(Qt,bn){return qr(Qt,mt,Ct(bn),{})}}function Xu(mt,Ct){return function(Qt,bn){var Dn;if(Qt===s&&bn===s)return Ct;if(Qt!==s&&(Dn=Qt),bn!==s){if(Dn===s)return bn;typeof Qt=="string"||typeof bn=="string"?(Qt=Yu(Qt),bn=Yu(bn)):(Qt=I1(Qt),bn=I1(bn)),Dn=mt(Qt,bn)}return Dn}}function z1(mt){return _m(function(Ct){return Ct=Qs(Ct,mu(es())),qo(function(Qt){var bn=this;return mt(Ct,function(Dn){return gu(Dn,bn,Qt)})})})}function M0(mt,Ct){Ct=Ct===s?" ":Yu(Ct);var Qt=Ct.length;if(Qt<2)return Qt?Cp(Ct,mt):Ct;var bn=Cp(Ct,ky(mt/Jm(Ct)));return Om(Ct)?Fm(Pu(bn),0,mt).join(""):bn.slice(0,mt)}function Bl(mt,Ct,Qt,bn){var Dn=Ct&Et,Kn=Mv(mt);function yr(){for(var xr=-1,Mr=arguments.length,no=-1,Jr=bn.length,so=zr(Jr+Mr),Co=this&&this!==Sl&&this instanceof yr?Kn:mt;++no<Jr;)so[no]=bn[no];for(;Mr--;)so[no++]=arguments[++xr];return gu(Co,Dn?Qt:this,so)}return yr}function Go(mt){return function(Ct,Qt,bn){return bn&&typeof bn!="number"&&Gl(Ct,Qt,bn)&&(Qt=bn=s),Ct=Am(Ct),Qt===s?(Qt=Ct,Ct=0):Qt=Am(Qt),bn=bn===s?Ct<Qt?1:-1:Am(bn),uy(Ct,Qt,bn,mt)}}function Yp(mt){return function(Ct,Qt){return typeof Ct=="string"&&typeof Qt=="string"||(Ct=kp(Ct),Qt=kp(Qt)),mt(Ct,Qt)}}function Dv(mt,Ct,Qt,bn,Dn,Kn,yr,xr,Mr,no){var Jr=Ct&Rt,so=Jr?yr:s,Co=Jr?s:yr,Fo=Jr?Kn:s,Zo=Jr?s:Kn;Ct|=Jr?pt:Lt,Ct&=~(Jr?Lt:pt),Ct&Ft||(Ct&=~(Et|Mt));var _s=[mt,Ct,Dn,Fo,so,Zo,Co,xr,Mr,no],ss=Qt.apply(s,_s);return gy(mt)&&py(ss,_s),ss.placeholder=bn,H1(ss,mt,Ct)}function Ts(mt){var Ct=Cl[mt];return function(Qt,bn){if(Qt=kp(Qt),bn=bn==null?0:Dl(xs(bn),292),bn&&Dy(Qt)){var Dn=(qs(Qt)+"e").split("e"),Kn=Ct(Dn[0]+"e"+(+Dn[1]+bn));return Dn=(qs(Kn)+"e").split("e"),+(Dn[0]+"e"+(+Dn[1]-bn))}return Ct(Qt)}}var zw=Vp&&1/f_(new Vp([,-0]))[1]==Ht?function(mt){return new Vp(mt)}:Jy;function P0(mt){return function(Ct){var Qt=au(Ct);return Qt==Mn?Xm(Ct):Qt==Yr?My(Ct):gv(Ct,mt(Ct))}}function su(mt,Ct,Qt,bn,Dn,Kn,yr,xr){var Mr=Ct&Mt;if(!Mr&&typeof mt!="function")throw new Tu(tt);var no=bn?bn.length:0;if(no||(Ct&=~(pt|Lt),bn=Dn=s),yr=yr===s?yr:Pl(xs(yr),0),xr=xr===s?xr:xs(xr),no-=Dn?Dn.length:0,Ct&Lt){var Jr=bn,so=Dn;bn=Dn=s}var Co=Mr?s:k0(mt),Fo=[mt,Ct,Qt,bn,Dn,Jr,so,Kn,yr,xr];if(Co&&Ju(Fo,Co),mt=Fo[0],Ct=Fo[1],Qt=Fo[2],bn=Fo[3],Dn=Fo[4],xr=Fo[9]=Fo[9]===s?Mr?0:mt.length:Pl(Fo[9]-no,0),!xr&&Ct&(Rt|Ot)&&(Ct&=~(Rt|Ot)),!Ct||Ct==Et)var Zo=fy(mt,Ct,Qt);else Ct==Rt||Ct==Ot?Zo=dx(mt,Ct,xr):(Ct==pt||Ct==(Et|pt))&&!Dn.length?Zo=Bl(mt,Ct,Qt,bn):Zo=Pv.apply(s,Fo);var _s=Co?C_:py;return H1(_s(Zo,Fo),mt,Ct)}function Kp(mt,Ct,Qt,bn){return mt===s||_h(mt,sm[Qt])&&!Ws.call(bn,Qt)?Ct:mt}function dp(mt,Ct,Qt,bn,Dn,Kn){return Il(mt)&&Il(Ct)&&(Kn.set(Ct,mt),Us(mt,Ct,s,dp,Kn),Kn.delete(Ct)),mt}function gp(mt){return xm(mt)?s:mt}function Jl(mt,Ct,Qt,bn,Dn,Kn){var yr=Qt&ut,xr=mt.length,Mr=Ct.length;if(xr!=Mr&&!(yr&&Mr>xr))return!1;var no=Kn.get(mt),Jr=Kn.get(Ct);if(no&&Jr)return no==Ct&&Jr==mt;var so=-1,Co=!0,Fo=Qt&yt?new cp:s;for(Kn.set(mt,Ct),Kn.set(Ct,mt);++so<xr;){var Zo=mt[so],_s=Ct[so];if(bn)var ss=yr?bn(_s,Zo,so,Ct,mt,Kn):bn(Zo,_s,so,mt,Ct,Kn);if(ss!==s){if(ss)continue;Co=!1;break}if(Fo){if(!Ty(Ct,function(Rs,Ps){if(!Oy(Fo,Ps)&&(Zo===Rs||Dn(Zo,Rs,Qt,bn,Kn)))return Fo.push(Ps)})){Co=!1;break}}else if(!(Zo===_s||Dn(Zo,_s,Qt,bn,Kn))){Co=!1;break}}return Kn.delete(mt),Kn.delete(Ct),Co}function Vw(mt,Ct,Qt,bn,Dn,Kn,yr){switch(Qt){case as:if(mt.byteLength!=Ct.byteLength||mt.byteOffset!=Ct.byteOffset)return!1;mt=mt.buffer,Ct=Ct.buffer;case Io:return!(mt.byteLength!=Ct.byteLength||!Kn(new ry(mt),new ry(Ct)));case It:case Dt:case qn:return _h(+mt,+Ct);case gn:return mt.name==Ct.name&&mt.message==Ct.message;case Gr:case to:return mt==Ct+"";case Mn:var xr=Xm;case Yr:var Mr=bn&ut;if(xr||(xr=f_),mt.size!=Ct.size&&!Mr)return!1;var no=yr.get(mt);if(no)return no==Ct;bn|=yt,yr.set(mt,Ct);var Jr=Jl(xr(mt),xr(Ct),bn,Dn,Kn,yr);return yr.delete(mt),Jr;case Ro:if(Gp)return Gp.call(mt)==Gp.call(Ct)}return!1}function ym(mt,Ct,Qt,bn,Dn,Kn){var yr=Qt&ut,xr=dy(mt),Mr=xr.length,no=dy(Ct),Jr=no.length;if(Mr!=Jr&&!yr)return!1;for(var so=Mr;so--;){var Co=xr[so];if(!(yr?Co in Ct:Ws.call(Ct,Co)))return!1}var Fo=Kn.get(mt),Zo=Kn.get(Ct);if(Fo&&Zo)return Fo==Ct&&Zo==mt;var _s=!0;Kn.set(mt,Ct),Kn.set(Ct,mt);for(var ss=yr;++so<Mr;){Co=xr[so];var Rs=mt[Co],Ps=Ct[Co];if(bn)var ju=yr?bn(Ps,Rs,Co,Ct,mt,Kn):bn(Rs,Ps,Co,mt,Ct,Kn);if(!(ju===s?Rs===Ps||Dn(Rs,Ps,Qt,bn,Kn):ju)){_s=!1;break}ss||(ss=Co=="constructor")}if(_s&&!ss){var Fu=mt.constructor,_g=Ct.constructor;Fu!=_g&&"constructor"in mt&&"constructor"in Ct&&!(typeof Fu=="function"&&Fu instanceof Fu&&typeof _g=="function"&&_g instanceof _g)&&(_s=!1)}return Kn.delete(mt),Kn.delete(Ct),_s}function _m(mt){return L_(Xp(mt,s,Jw),mt+"")}function dy(mt){return vr(mt,Ql,P_)}function Lv(mt){return vr(mt,Bu,jv)}var k0=By?function(mt){return By.get(mt)}:Jy;function O_(mt){for(var Ct=mt.name+"",Qt=km[Ct],bn=Ws.call(km,Ct)?Qt.length:0;bn--;){var Dn=Qt[bn],Kn=Dn.func;if(Kn==null||Kn==mt)return Dn.name}return Ct}function M_(mt){var Ct=Ws.call(Wn,"placeholder")?Wn:mt;return Ct.placeholder}function es(){var mt=Wn.iteratee||Tw;return mt=mt===Tw?ls:mt,arguments.length?mt(arguments[0],arguments[1]):mt}function Bv(mt,Ct){var Qt=mt.__data__;return yx(Ct)?Qt[typeof Ct=="string"?"string":"hash"]:Qt.map}function V1(mt){for(var Ct=Ql(mt),Qt=Ct.length;Qt--;){var bn=Ct[Qt],Dn=mt[bn];Ct[Qt]=[bn,Dn,$w(Dn)]}return Ct}function Lu(mt,Ct){var Qt=pv(mt,Ct);return Uo(Qt)?Qt:s}function Wy(mt){var Ct=Ws.call(mt,yu),Qt=mt[yu];try{mt[yu]=s;var bn=!0}catch{}var Dn=$u.call(mt);return bn&&(Ct?mt[yu]=Qt:delete mt[yu]),Dn}var P_=up?function(mt){return mt==null?[]:(mt=Xs(mt),ms(up(mt),function(Ct){return lm.call(mt,Ct)}))}:y1,jv=up?function(mt){for(var Ct=[];mt;)ap(Ct,P_(mt)),mt=am(mt);return Ct}:y1,au=Er;(sy&&au(new sy(new ArrayBuffer(1)))!=as||Pm&&au(new Pm)!=Mn||b_&&au(b_.resolve())!=Ur||Vp&&au(new Vp)!=Yr||cm&&au(new cm)!=Vo)&&(au=function(mt){var Ct=Er(mt),Qt=Ct==_i?mt.constructor:s,bn=Qt?Qp(Qt):"";if(bn)switch(bn){case w_:return as;case d0:return Mn;case xv:return Ur;case Dm:return Yr;case g0:return Vo}return Ct});function Ww(mt,Ct,Qt){for(var bn=-1,Dn=Qt.length;++bn<Dn;){var Kn=Qt[bn],yr=Kn.size;switch(Kn.type){case"drop":mt+=yr;break;case"dropRight":Ct-=yr;break;case"take":Ct=Dl(Ct,mt+yr);break;case"takeRight":mt=Pl(mt,Ct-yr);break}}return{start:mt,end:Ct}}function gx(mt){var Ct=mt.match(ur);return Ct?Ct[1].split(mr):[]}function W1(mt,Ct,Qt){Ct=cy(Ct,mt);for(var bn=-1,Dn=Ct.length,Kn=!1;++bn<Dn;){var yr=Jp(Ct[bn]);if(!(Kn=mt!=null&&Qt(mt,yr)))break;mt=mt[yr]}return Kn||++bn!=Dn?Kn:(Dn=mt==null?0:mt.length,!!Dn&&vy(Dn)&&vm(yr,Dn)&&(ys(mt)||yy(mt)))}function px(mt){var Ct=mt.length,Qt=new mt.constructor(Ct);return Ct&&typeof mt[0]=="string"&&Ws.call(mt,"index")&&(Qt.index=mt.index,Qt.input=mt.input),Qt}function D0(mt){return typeof mt.constructor=="function"&&!k_(mt)?hm(am(mt)):{}}function mx(mt,Ct,Qt){var bn=mt.constructor;switch(Ct){case Io:return B1(mt);case It:case Dt:return new bn(+mt);case as:return I0(mt,Qt);case Bs:case cs:case Zl:case Vl:case zs:case vs:case uu:case No:case tu:return Ov(mt,Qt);case Mn:return new bn;case qn:case to:return new bn(mt);case Gr:return Fw(mt);case Yr:return new bn;case Ro:return j1(mt)}}function G1(mt,Ct){var Qt=Ct.length;if(!Qt)return mt;var bn=Qt-1;return Ct[bn]=(Qt>1?"& ":"")+Ct[bn],Ct=Ct.join(Qt>2?", ":" "),mt.replace(lr,`{
/* [wrapped with `+Ct+`] */
`)}function Gw(mt){return ys(mt)||yy(mt)||!!(Py&&mt&&mt[Py])}function vm(mt,Ct){var Qt=typeof mt;return Ct=Ct??qt,!!Ct&&(Qt=="number"||Qt!="symbol"&&Ko.test(mt))&&mt>-1&&mt%1==0&&mt<Ct}function Gl(mt,Ct,Qt){if(!Il(Qt))return!1;var bn=typeof Ct;return(bn=="number"?_f(Qt)&&vm(Ct,Qt.length):bn=="string"&&Ct in Qt)?_h(Qt[Ct],mt):!1}function L0(mt,Ct){if(ys(mt))return!1;var Qt=typeof mt;return Qt=="number"||Qt=="symbol"||Qt=="boolean"||mt==null||mp(mt)?!0:ro.test(mt)||!Fn.test(mt)||Ct!=null&&mt in Xs(Ct)}function yx(mt){var Ct=typeof mt;return Ct=="string"||Ct=="number"||Ct=="symbol"||Ct=="boolean"?mt!=="__proto__":mt===null}function gy(mt){var Ct=O_(mt),Qt=Wn[Ct];if(typeof Qt!="function"||!(Ct in Es.prototype))return!1;if(mt===Qt)return!0;var bn=k0(Qt);return!!bn&&mt===bn[0]}function B0(mt){return!!Cs&&Cs in mt}var Hw=Hu?zm:_1;function k_(mt){var Ct=mt&&mt.constructor,Qt=typeof Ct=="function"&&Ct.prototype||sm;return mt===Qt}function $w(mt){return mt===mt&&!Il(mt)}function qw(mt,Ct){return function(Qt){return Qt==null?!1:Qt[mt]===Ct&&(Ct!==s||mt in Xs(Qt))}}function j0(mt){var Ct=qv(mt,function(bn){return Qt.size===st&&Qt.clear(),bn}),Qt=Ct.cache;return Ct}function Ju(mt,Ct){var Qt=mt[1],bn=Ct[1],Dn=Qt|bn,Kn=Dn<(Et|Mt|nn),yr=bn==nn&&Qt==Rt||bn==nn&&Qt==on&&mt[7].length<=Ct[8]||bn==(nn|on)&&Ct[7].length<=Ct[8]&&Qt==Rt;if(!(Kn||yr))return mt;bn&Et&&(mt[2]=Ct[2],Dn|=Qt&Et?0:Ft);var xr=Ct[3];if(xr){var Mr=mt[3];mt[3]=Mr?F1(Mr,xr,Ct[4]):xr,mt[4]=Mr?bp(mt[3],ht):Ct[4]}return xr=Ct[5],xr&&(Mr=mt[5],mt[5]=Mr?N1(Mr,xr,Ct[6]):xr,mt[6]=Mr?bp(mt[5],ht):Ct[6]),xr=Ct[7],xr&&(mt[7]=xr),bn&nn&&(mt[8]=mt[8]==null?Ct[8]:Dl(mt[8],Ct[8])),mt[9]==null&&(mt[9]=Ct[9]),mt[0]=Ct[0],mt[1]=Dn,mt}function Zw(mt){var Ct=[];if(mt!=null)for(var Qt in Xs(mt))Ct.push(Qt);return Ct}function Yw(mt){return $u.call(mt)}function Xp(mt,Ct,Qt){return Ct=Pl(Ct===s?mt.length-1:Ct,0),function(){for(var bn=arguments,Dn=-1,Kn=Pl(bn.length-Ct,0),yr=zr(Kn);++Dn<Kn;)yr[Dn]=bn[Ct+Dn];Dn=-1;for(var xr=zr(Ct+1);++Dn<Ct;)xr[Dn]=bn[Dn];return xr[Ct]=Qt(yr),gu(mt,this,xr)}}function F0(mt,Ct){return Ct.length<2?mt:tr(mt,fp(Ct,0,-1))}function D_(mt,Ct){for(var Qt=mt.length,bn=Dl(Ct.length,Qt),Dn=Ku(mt);bn--;){var Kn=Ct[bn];mt[bn]=vm(Kn,Qt)?Dn[Kn]:s}return mt}function Gy(mt,Ct){if(!(Ct==="constructor"&&typeof mt[Ct]=="function")&&Ct!="__proto__")return mt[Ct]}var py=$1(C_),Hy=wv||function(mt,Ct){return Sl.setTimeout(mt,Ct)},L_=$1(A0);function H1(mt,Ct,Qt){var bn=Ct+"";return L_(mt,G1(bn,B_(gx(bn),Qt)))}function $1(mt){var Ct=0,Qt=0;return function(){var bn=zp(),Dn=Vt-(bn-Qt);if(Qt=bn,Dn>0){if(++Ct>=Tt)return arguments[0]}else Ct=0;return mt.apply(s,arguments)}}function N0(mt,Ct){var Qt=-1,bn=mt.length,Dn=bn-1;for(Ct=Ct===s?bn:Ct;++Qt<Ct;){var Kn=Xl(Qt,Dn),yr=mt[Kn];mt[Kn]=mt[Qt],mt[Qt]=yr}return mt.length=Ct,mt}var U0=j0(function(mt){var Ct=[];return mt.charCodeAt(0)===46&&Ct.push(""),mt.replace(Ln,function(Qt,bn,Dn,Kn){Ct.push(Dn?Kn.replace(Br,"$1"):bn||Qt)}),Ct});function Jp(mt){if(typeof mt=="string"||mp(mt))return mt;var Ct=mt+"";return Ct=="0"&&1/mt==-Ht?"-0":Ct}function Qp(mt){if(mt!=null){try{return Np.call(mt)}catch{}try{return mt+""}catch{}}return""}function B_(mt,Ct){return pu(yn,function(Qt){var bn="_."+Qt[0];Ct&Qt[1]&&!im(mt,bn)&&mt.push(bn)}),mt.sort()}function bm(mt){if(mt instanceof Es)return mt.clone();var Ct=new Cu(mt.__wrapped__,mt.__chain__);return Ct.__actions__=Ku(mt.__actions__),Ct.__index__=mt.__index__,Ct.__values__=mt.__values__,Ct}function q1(mt,Ct,Qt){(Qt?Gl(mt,Ct,Qt):Ct===s)?Ct=1:Ct=Pl(xs(Ct),0);var bn=mt==null?0:mt.length;if(!bn||Ct<1)return[];for(var Dn=0,Kn=0,yr=zr(ky(bn/Ct));Dn<bn;)yr[Kn++]=fp(mt,Dn,Dn+=Ct);return yr}function Kw(mt){for(var Ct=-1,Qt=mt==null?0:mt.length,bn=0,Dn=[];++Ct<Qt;){var Kn=mt[Ct];Kn&&(Dn[bn++]=Kn)}return Dn}function Fv(){var mt=arguments.length;if(!mt)return[];for(var Ct=zr(mt-1),Qt=arguments[0],bn=mt;bn--;)Ct[bn-1]=arguments[bn];return ap(ys(Qt)?Ku(Qt):[Qt],Un(Ct,1))}var Nv=qo(function(mt,Ct){return Hl(mt)?_n(mt,Un(Ct,1,Hl,!0)):[]}),pp=qo(function(mt,Ct){var Qt=Qu(Ct);return Hl(Qt)&&(Qt=s),Hl(mt)?_n(mt,Un(Ct,1,Hl,!0),es(Qt,2)):[]}),Uv=qo(function(mt,Ct){var Qt=Qu(Ct);return Hl(Qt)&&(Qt=s),Hl(mt)?_n(mt,Un(Ct,1,Hl,!0),s,Qt):[]});function Iu(mt,Ct,Qt){var bn=mt==null?0:mt.length;return bn?(Ct=Qt||Ct===s?1:xs(Ct),fp(mt,Ct<0?0:Ct,bn)):[]}function Mp(mt,Ct,Qt){var bn=mt==null?0:mt.length;return bn?(Ct=Qt||Ct===s?1:xs(Ct),Ct=bn-Ct,fp(mt,0,Ct<0?0:Ct)):[]}function Z1(mt,Ct){return mt&&mt.length?Iv(mt,es(Ct,3),!0,!0):[]}function Fl(mt,Ct){return mt&&mt.length?Iv(mt,es(Ct,3),!0):[]}function Xw(mt,Ct,Qt,bn){var Dn=mt==null?0:mt.length;return Dn?(Qt&&typeof Qt!="number"&&Gl(mt,Ct,Qt)&&(Qt=0,bn=Dn),Gn(mt,Ct,Qt,bn)):[]}function j_(mt,Ct,Qt){var bn=mt==null?0:mt.length;if(!bn)return-1;var Dn=Qt==null?0:xs(Qt);return Dn<0&&(Dn=Pl(bn+Dn,0)),Ss(mt,es(Ct,3),Dn)}function Pp(mt,Ct,Qt){var bn=mt==null?0:mt.length;if(!bn)return-1;var Dn=bn-1;return Qt!==s&&(Dn=xs(Qt),Dn=Qt<0?Pl(bn+Dn,0):Dl(Dn,bn-1)),Ss(mt,es(Ct,3),Dn,!0)}function Jw(mt){var Ct=mt==null?0:mt.length;return Ct?Un(mt,1):[]}function _x(mt){var Ct=mt==null?0:mt.length;return Ct?Un(mt,Ht):[]}function Qw(mt,Ct){var Qt=mt==null?0:mt.length;return Qt?(Ct=Ct===s?1:xs(Ct),Un(mt,Ct)):[]}function eS(mt){for(var Ct=-1,Qt=mt==null?0:mt.length,bn={};++Ct<Qt;){var Dn=mt[Ct];bn[Dn[0]]=Dn[1]}return bn}function my(mt){return mt&&mt.length?mt[0]:s}function tS(mt,Ct,Qt){var bn=mt==null?0:mt.length;if(!bn)return-1;var Dn=Qt==null?0:xs(Qt);return Dn<0&&(Dn=Pl(bn+Dn,0)),lp(mt,Ct,Dn)}function nS(mt){var Ct=mt==null?0:mt.length;return Ct?fp(mt,0,-1):[]}var rS=qo(function(mt){var Ct=Qs(mt,R0);return Ct.length&&Ct[0]===mt[0]?$r(Ct):[]}),iS=qo(function(mt){var Ct=Qu(mt),Qt=Qs(mt,R0);return Ct===Qu(Qt)?Ct=s:Qt.pop(),Qt.length&&Qt[0]===mt[0]?$r(Qt,es(Ct,2)):[]}),vx=qo(function(mt){var Ct=Qu(mt),Qt=Qs(mt,R0);return Ct=typeof Ct=="function"?Ct:s,Ct&&Qt.pop(),Qt.length&&Qt[0]===mt[0]?$r(Qt,s,Ct):[]});function Y1(mt,Ct){return mt==null?"":Sv.call(mt,Ct)}function Qu(mt){var Ct=mt==null?0:mt.length;return Ct?mt[Ct-1]:s}function K1(mt,Ct,Qt){var bn=mt==null?0:mt.length;if(!bn)return-1;var Dn=bn;return Qt!==s&&(Dn=xs(Qt),Dn=Dn<0?Pl(bn+Dn,0):Dl(Dn,bn-1)),Ct===Ct?d_(mt,Ct,Dn):Ss(mt,hv,Dn,!0)}function Ou(mt,Ct){return mt&&mt.length?Ms(mt,xs(Ct)):s}var oS=qo(sS);function sS(mt,Ct){return mt&&mt.length&&Ct&&Ct.length?qp(mt,Ct):mt}function aS(mt,Ct,Qt){return mt&&mt.length&&Ct&&Ct.length?qp(mt,Ct,es(Qt,2)):mt}function bx(mt,Ct,Qt){return mt&&mt.length&&Ct&&Ct.length?qp(mt,Ct,s,Qt):mt}var wx=_m(function(mt,Ct){var Qt=mt==null?0:mt.length,bn=bt(mt,Ct);return Zu(mt,Qs(Ct,function(Dn){return vm(Dn,Qt)?+Dn:Dn}).sort(gm)),bn});function lS(mt,Ct){var Qt=[];if(!(mt&&mt.length))return Qt;var bn=-1,Dn=[],Kn=mt.length;for(Ct=es(Ct,3);++bn<Kn;){var yr=mt[bn];Ct(yr,bn,mt)&&(Qt.push(yr),Dn.push(bn))}return Zu(mt,Dn),Qt}function z0(mt){return mt==null?mt:f0.call(mt)}function uS(mt,Ct,Qt){var bn=mt==null?0:mt.length;return bn?(Qt&&typeof Qt!="number"&&Gl(mt,Ct,Qt)?(Ct=0,Qt=bn):(Ct=Ct==null?0:xs(Ct),Qt=Qt===s?bn:xs(Qt)),fp(mt,Ct,Qt)):[]}function X1(mt,Ct){return R_(mt,Ct)}function Um(mt,Ct,Qt){return E0(mt,Ct,es(Qt,2))}function _c(mt,Ct){var Qt=mt==null?0:mt.length;if(Qt){var bn=R_(mt,Ct);if(bn<Qt&&_h(mt[bn],Ct))return bn}return-1}function Sx(mt,Ct){return R_(mt,Ct,!0)}function J1(mt,Ct,Qt){return E0(mt,Ct,es(Qt,2),!0)}function xx(mt,Ct){var Qt=mt==null?0:mt.length;if(Qt){var bn=R_(mt,Ct,!0)-1;if(_h(mt[bn],Ct))return bn}return-1}function Ax(mt){return mt&&mt.length?R1(mt):[]}function Ex(mt,Ct){return mt&&mt.length?R1(mt,es(Ct,2)):[]}function zv(mt){var Ct=mt==null?0:mt.length;return Ct?fp(mt,1,Ct):[]}function V0(mt,Ct,Qt){return mt&&mt.length?(Ct=Qt||Ct===s?1:xs(Ct),fp(mt,0,Ct<0?0:Ct)):[]}function cS(mt,Ct,Qt){var bn=mt==null?0:mt.length;return bn?(Ct=Qt||Ct===s?1:xs(Ct),Ct=bn-Ct,fp(mt,Ct<0?0:Ct,bn)):[]}function $y(mt,Ct){return mt&&mt.length?Iv(mt,es(Ct,3),!1,!0):[]}function Vv(mt,Ct){return mt&&mt.length?Iv(mt,es(Ct,3)):[]}var Tx=qo(function(mt){return jm(Un(mt,1,Hl,!0))}),Cx=qo(function(mt){var Ct=Qu(mt);return Hl(Ct)&&(Ct=s),jm(Un(mt,1,Hl,!0),es(Ct,2))}),Rx=qo(function(mt){var Ct=Qu(mt);return Ct=typeof Ct=="function"?Ct:s,jm(Un(mt,1,Hl,!0),s,Ct)});function Ix(mt){return mt&&mt.length?jm(mt):[]}function Ox(mt,Ct){return mt&&mt.length?jm(mt,es(Ct,2)):[]}function Mx(mt,Ct){return Ct=typeof Ct=="function"?Ct:s,mt&&mt.length?jm(mt,s,Ct):[]}function Q1(mt){if(!(mt&&mt.length))return[];var Ct=0;return mt=ms(mt,function(Qt){if(Hl(Qt))return Ct=Pl(Qt.length,Ct),!0}),Zm(Ct,function(Qt){return Qs(mt,qm(Qt))})}function W0(mt,Ct){if(!(mt&&mt.length))return[];var Qt=Q1(mt);return Ct==null?Qt:Qs(Qt,function(bn){return gu(Ct,s,bn)})}var Px=qo(function(mt,Ct){return Hl(mt)?_n(mt,Ct):[]}),F_=qo(function(mt){return C0(ms(mt,Hl))}),kx=qo(function(mt){var Ct=Qu(mt);return Hl(Ct)&&(Ct=s),C0(ms(mt,Hl),es(Ct,2))}),Rl=qo(function(mt){var Ct=Qu(mt);return Ct=typeof Ct=="function"?Ct:s,C0(ms(mt,Hl),s,Ct)}),G0=qo(Q1);function hS(mt,Ct){return P1(mt||[],Ct||[],ly)}function H0(mt,Ct){return P1(mt||[],Ct||[],_u)}var $0=qo(function(mt){var Ct=mt.length,Qt=Ct>1?mt[Ct-1]:s;return Qt=typeof Qt=="function"?(mt.pop(),Qt):s,W0(mt,Qt)});function N_(mt){var Ct=Wn(mt);return Ct.__chain__=!0,Ct}function fS(mt,Ct){return Ct(mt),mt}function Wv(mt,Ct){return Ct(mt)}var Gv=_m(function(mt){var Ct=mt.length,Qt=Ct?mt[0]:0,bn=this.__wrapped__,Dn=function(Kn){return bt(Kn,mt)};return Ct>1||this.__actions__.length||!(bn instanceof Es)||!vm(Qt)?this.thru(Dn):(bn=bn.slice(Qt,+Qt+(Ct?1:0)),bn.__actions__.push({func:Wv,args:[Dn],thisArg:s}),new Cu(bn,this.__chain__).thru(function(Kn){return Ct&&!Kn.length&&Kn.push(s),Kn}))});function ew(){return N_(this)}function tw(){return new Cu(this.value(),this.__chain__)}function Dx(){this.__values__===s&&(this.__values__=Zy(this.value()));var mt=this.__index__>=this.__values__.length,Ct=mt?s:this.__values__[this.__index__++];return{done:mt,value:Ct}}function dS(){return this}function Hv(mt){for(var Ct,Qt=this;Qt instanceof Wl;){var bn=bm(Qt);bn.__index__=0,bn.__values__=s,Ct?Dn.__wrapped__=bn:Ct=bn;var Dn=bn;Qt=Qt.__wrapped__}return Dn.__wrapped__=mt,Ct}function Lx(){var mt=this.__wrapped__;if(mt instanceof Es){var Ct=mt;return this.__actions__.length&&(Ct=new Es(this)),Ct=Ct.reverse(),Ct.__actions__.push({func:Wv,args:[z0],thisArg:s}),new Cu(Ct,this.__chain__)}return this.thru(z0)}function nw(){return M1(this.__wrapped__,this.__actions__)}var Bx=hy(function(mt,Ct,Qt){Ws.call(mt,Qt)?++mt[Qt]:lt(mt,Qt,1)});function rw(mt,Ct,Qt){var bn=ys(mt)?sp:Bn;return Qt&&Gl(mt,Ct,Qt)&&(Ct=s),bn(mt,es(Ct,3))}function iw(mt,Ct){var Qt=ys(mt)?ms:Xn;return Qt(mt,es(Ct,3))}var q0=Nw(j_),jx=Nw(Pp);function Fx(mt,Ct){return Un(Y0(mt,Ct),1)}function Nx(mt,Ct){return Un(Y0(mt,Ct),Ht)}function Ux(mt,Ct,Qt){return Qt=Qt===s?1:xs(Qt),Un(Y0(mt,Ct),Qt)}function gS(mt,Ct){var Qt=ys(mt)?pu:Sn;return Qt(mt,es(Ct,3))}function pS(mt,Ct){var Qt=ys(mt)?uv:In;return Qt(mt,es(Ct,3))}var Z0=hy(function(mt,Ct,Qt){Ws.call(mt,Qt)?mt[Qt].push(Ct):lt(mt,Qt,[Ct])});function zx(mt,Ct,Qt,bn){mt=_f(mt)?mt:X_(mt),Qt=Qt&&!bn?xs(Qt):0;var Dn=mt.length;return Qt<0&&(Qt=Pl(Dn+Qt,0)),t1(mt)?Qt<=Dn&&mt.indexOf(Ct,Qt)>-1:!!Dn&&lp(mt,Ct,Qt)>-1}var mS=qo(function(mt,Ct,Qt){var bn=-1,Dn=typeof Ct=="function",Kn=_f(mt)?zr(mt.length):[];return Sn(mt,function(yr){Kn[++bn]=Dn?gu(Ct,yr,Qt):Or(yr,Ct,Qt)}),Kn}),U_=hy(function(mt,Ct,Qt){lt(mt,Qt,Ct)});function Y0(mt,Ct){var Qt=ys(mt)?Qs:Ll;return Qt(mt,es(Ct,3))}function Vx(mt,Ct,Qt,bn){return mt==null?[]:(ys(Ct)||(Ct=Ct==null?[]:[Ct]),Qt=bn?s:Qt,ys(Qt)||(Qt=Qt==null?[]:[Qt]),Tl(mt,Ct,Qt))}var Wx=hy(function(mt,Ct,Qt){mt[Qt?0:1].push(Ct)},function(){return[[],[]]});function yS(mt,Ct,Qt){var bn=ys(mt)?o_:dv,Dn=arguments.length<3;return bn(mt,es(Ct,4),Qt,Dn,Sn)}function _S(mt,Ct,Qt){var bn=ys(mt)?s_:dv,Dn=arguments.length<3;return bn(mt,es(Ct,4),Qt,Dn,In)}function Gx(mt,Ct){var Qt=ys(mt)?ms:Xn;return Qt(mt,Q0(es(Ct,3)))}function Hx(mt){var Ct=ys(mt)?Rv:Rp;return Ct(mt)}function $x(mt,Ct,Qt){(Qt?Gl(mt,Ct,Qt):Ct===s)?Ct=1:Ct=xs(Ct);var bn=ys(mt)?S0:dm;return bn(mt,Ct)}function ow(mt){var Ct=ys(mt)?x0:Bw;return Ct(mt)}function K0(mt){if(mt==null)return 0;if(_f(mt))return t1(mt)?Jm(mt):mt.length;var Ct=au(mt);return Ct==Mn||Ct==Yr?mt.size:Ls(mt).length}function X0(mt,Ct,Qt){var bn=ys(mt)?Ty:jw;return Qt&&Gl(mt,Ct,Qt)&&(Ct=s),bn(mt,es(Ct,3))}var qx=qo(function(mt,Ct){if(mt==null)return[];var Qt=Ct.length;return Qt>1&&Gl(mt,Ct[0],Ct[1])?Ct=[]:Qt>2&&Gl(Ct[0],Ct[1],Ct[2])&&(Ct=[Ct[0]]),Tl(mt,Un(Ct,1),[])}),J0=ku||function(){return Sl.Date.now()};function $v(mt,Ct){if(typeof Ct!="function")throw new Tu(tt);return mt=xs(mt),function(){if(--mt<1)return Ct.apply(this,arguments)}}function z_(mt,Ct,Qt){return Ct=Qt?s:Ct,Ct=mt&&Ct==null?mt.length:Ct,su(mt,nn,s,s,s,s,Ct)}function sw(mt,Ct){var Qt;if(typeof Ct!="function")throw new Tu(tt);return mt=xs(mt),function(){return--mt>0&&(Qt=Ct.apply(this,arguments)),mt<=1&&(Ct=s),Qt}}var qy=qo(function(mt,Ct,Qt){var bn=Et;if(Qt.length){var Dn=bp(Qt,M_(qy));bn|=pt}return su(mt,bn,Ct,Qt,Dn)}),aw=qo(function(mt,Ct,Qt){var bn=Et|Mt;if(Qt.length){var Dn=bp(Qt,M_(aw));bn|=pt}return su(Ct,bn,mt,Qt,Dn)});function vS(mt,Ct,Qt){Ct=Qt?s:Ct;var bn=su(mt,Rt,s,s,s,s,s,Ct);return bn.placeholder=vS.placeholder,bn}function lw(mt,Ct,Qt){Ct=Qt?s:Ct;var bn=su(mt,Ot,s,s,s,s,s,Ct);return bn.placeholder=lw.placeholder,bn}function uw(mt,Ct,Qt){var bn,Dn,Kn,yr,xr,Mr,no=0,Jr=!1,so=!1,Co=!0;if(typeof mt!="function")throw new Tu(tt);Ct=kp(Ct)||0,Il(Qt)&&(Jr=!!Qt.leading,so="maxWait"in Qt,Kn=so?Pl(kp(Qt.maxWait)||0,Ct):Kn,Co="trailing"in Qt?!!Qt.trailing:Co);function Fo(Ul){var Dp=bn,Tm=Dn;return bn=Dn=s,no=Ul,yr=mt.apply(Tm,Dp),yr}function Zo(Ul){return no=Ul,xr=Hy(Rs,Ct),Jr?Fo(Ul):yr}function _s(Ul){var Dp=Ul-Mr,Tm=Ul-no,Mw=Ct-Dp;return so?Dl(Mw,Kn-Tm):Mw}function ss(Ul){var Dp=Ul-Mr,Tm=Ul-no;return Mr===s||Dp>=Ct||Dp<0||so&&Tm>=Kn}function Rs(){var Ul=J0();if(ss(Ul))return Ps(Ul);xr=Hy(Rs,_s(Ul))}function Ps(Ul){return xr=s,Co&&bn?Fo(Ul):(bn=Dn=s,yr)}function ju(){xr!==s&&D1(xr),no=0,bn=Mr=Dn=xr=s}function Fu(){return xr===s?yr:Ps(J0())}function _g(){var Ul=J0(),Dp=ss(Ul);if(bn=arguments,Dn=this,Mr=Ul,Dp){if(xr===s)return Zo(Mr);if(so)return D1(xr),xr=Hy(Rs,Ct),Fo(Mr)}return xr===s&&(xr=Hy(Rs,Ct)),yr}return _g.cancel=ju,_g.flush=Fu,_g}var bS=qo(function(mt,Ct){return cn(mt,1,Ct)}),wS=qo(function(mt,Ct,Qt){return cn(mt,kp(Ct)||0,Qt)});function SS(mt){return su(mt,wt)}function qv(mt,Ct){if(typeof mt!="function"||Ct!=null&&typeof Ct!="function")throw new Tu(tt);var Qt=function(){var bn=arguments,Dn=Ct?Ct.apply(this,bn):bn[0],Kn=Qt.cache;if(Kn.has(Dn))return Kn.get(Dn);var yr=mt.apply(this,bn);return Qt.cache=Kn.set(Dn,yr)||Kn,yr};return Qt.cache=new(qv.Cache||Tp),Qt}qv.Cache=Tp;function Q0(mt){if(typeof mt!="function")throw new Tu(tt);return function(){var Ct=arguments;switch(Ct.length){case 0:return!mt.call(this);case 1:return!mt.call(this,Ct[0]);case 2:return!mt.call(this,Ct[0],Ct[1]);case 3:return!mt.call(this,Ct[0],Ct[1],Ct[2])}return!mt.apply(this,Ct)}}function Zx(mt){return sw(2,mt)}var xS=I_(function(mt,Ct){Ct=Ct.length==1&&ys(Ct[0])?Qs(Ct[0],mu(es())):Qs(Un(Ct,1),mu(es()));var Qt=Ct.length;return qo(function(bn){for(var Dn=-1,Kn=Dl(bn.length,Qt);++Dn<Kn;)bn[Dn]=Ct[Dn].call(this,bn[Dn]);return gu(mt,this,bn)})}),V_=qo(function(mt,Ct){var Qt=bp(Ct,M_(V_));return su(mt,pt,s,Ct,Qt)}),cw=qo(function(mt,Ct){var Qt=bp(Ct,M_(cw));return su(mt,Lt,s,Ct,Qt)}),Mu=_m(function(mt,Ct){return su(mt,on,s,s,s,Ct)});function Zv(mt,Ct){if(typeof mt!="function")throw new Tu(tt);return Ct=Ct===s?Ct:xs(Ct),qo(mt,Ct)}function W_(mt,Ct){if(typeof mt!="function")throw new Tu(tt);return Ct=Ct==null?0:Pl(xs(Ct),0),qo(function(Qt){var bn=Qt[Ct],Dn=Fm(Qt,0,Ct);return bn&&ap(Dn,bn),gu(mt,this,Dn)})}function Yv(mt,Ct,Qt){var bn=!0,Dn=!0;if(typeof mt!="function")throw new Tu(tt);return Il(Qt)&&(bn="leading"in Qt?!!Qt.leading:bn,Dn="trailing"in Qt?!!Qt.trailing:Dn),uw(mt,Ct,{leading:bn,maxWait:Ct,trailing:Dn})}function AS(mt){return z_(mt,1)}function ES(mt,Ct){return V_(k1(Ct),mt)}function Yx(){if(!arguments.length)return[];var mt=arguments[0];return ys(mt)?mt:[mt]}function Kx(mt){return jt(mt,ft)}function Xx(mt,Ct){return Ct=typeof Ct=="function"?Ct:s,jt(mt,ft,Ct)}function Jx(mt){return jt(mt,_t|ft)}function Qx(mt,Ct){return Ct=typeof Ct=="function"?Ct:s,jt(mt,_t|ft,Ct)}function eA(mt,Ct){return Ct==null||an(mt,Ct,Ql(Ct))}function _h(mt,Ct){return mt===Ct||mt!==mt&&Ct!==Ct}var tA=Yp(Lr),TS=Yp(function(mt,Ct){return mt>=Ct}),yy=Sr(function(){return arguments}())?Sr:function(mt){return Nl(mt)&&Ws.call(mt,"callee")&&!lm.call(mt,"callee")},ys=zr.isArray,nA=sv?mu(sv):mo;function _f(mt){return mt!=null&&vy(mt.length)&&!zm(mt)}function Hl(mt){return Nl(mt)&&_f(mt)}function rA(mt){return mt===!0||mt===!1||Nl(mt)&&Er(mt)==It}var _y=h0||_1,CS=n_?mu(n_):lo;function iA(mt){return Nl(mt)&&mt.nodeType===1&&!xm(mt)}function lu(mt){if(mt==null)return!0;if(_f(mt)&&(ys(mt)||typeof mt=="string"||typeof mt.splice=="function"||_y(mt)||q_(mt)||yy(mt)))return!mt.length;var Ct=au(mt);if(Ct==Mn||Ct==Yr)return!mt.size;if(k_(mt))return!Ls(mt).length;for(var Qt in mt)if(Ws.call(mt,Qt))return!1;return!0}function wm(mt,Ct){return ho(mt,Ct)}function hw(mt,Ct,Qt){Qt=typeof Qt=="function"?Qt:s;var bn=Qt?Qt(mt,Ct):s;return bn===s?ho(mt,Ct,s,Qt):!!bn}function G_(mt){if(!Nl(mt))return!1;var Ct=Er(mt);return Ct==gn||Ct==Kt||typeof mt.message=="string"&&typeof mt.name=="string"&&!xm(mt)}function H_(mt){return typeof mt=="number"&&Dy(mt)}function zm(mt){if(!Il(mt))return!1;var Ct=Er(mt);return Ct==hn||Ct==xn||Ct==rn||Ct==fo}function RS(mt){return typeof mt=="number"&&mt==xs(mt)}function vy(mt){return typeof mt=="number"&&mt>-1&&mt%1==0&&mt<=qt}function Il(mt){var Ct=typeof mt;return mt!=null&&(Ct=="object"||Ct=="function")}function Nl(mt){return mt!=null&&typeof mt=="object"}var $_=av?mu(av):Po;function IS(mt,Ct){return mt===Ct||zo(mt,Ct,V1(Ct))}function OS(mt,Ct,Qt){return Qt=typeof Qt=="function"?Qt:s,zo(mt,Ct,V1(Ct),Qt)}function $s(mt){return Sm(mt)&&mt!=+mt}function fw(mt){if(Hw(mt))throw new hs(et);return Uo(mt)}function PS(mt){return mt===null}function kS(mt){return mt==null}function Sm(mt){return typeof mt=="number"||Nl(mt)&&Er(mt)==qn}function xm(mt){if(!Nl(mt)||Er(mt)!=_i)return!1;var Ct=am(mt);if(Ct===null)return!0;var Qt=Ws.call(Ct,"constructor")&&Ct.constructor;return typeof Qt=="function"&&Qt instanceof Qt&&Np.call(Qt)==E1}var e1=r_?mu(r_):Bo;function oA(mt){return RS(mt)&&mt>=-qt&&mt<=qt}var DS=i_?mu(i_):co;function t1(mt){return typeof mt=="string"||!ys(mt)&&Nl(mt)&&Er(mt)==to}function mp(mt){return typeof mt=="symbol"||Nl(mt)&&Er(mt)==Ro}var q_=rm?mu(rm):Yo;function sA(mt){return mt===s}function aA(mt){return Nl(mt)&&au(mt)==Vo}function lA(mt){return Nl(mt)&&Er(mt)==Qo}var uA=Yp(Os),n1=Yp(function(mt,Ct){return mt<=Ct});function Zy(mt){if(!mt)return[];if(_f(mt))return t1(mt)?Pu(mt):Ku(mt);if(Up&&mt[Up])return yv(mt[Up]());var Ct=au(mt),Qt=Ct==Mn?Xm:Ct==Yr?f_:X_;return Qt(mt)}function Am(mt){if(!mt)return mt===0?mt:0;if(mt=kp(mt),mt===Ht||mt===-Ht){var Ct=mt<0?-1:1;return Ct*Pt}return mt===mt?mt:0}function xs(mt){var Ct=Am(mt),Qt=Ct%1;return Ct===Ct?Qt?Ct-Qt:Ct:0}function LS(mt){return mt?kt(xs(mt),0,Zt):0}function kp(mt){if(typeof mt=="number")return mt;if(mp(mt))return St;if(Il(mt)){var Ct=typeof mt.valueOf=="function"?mt.valueOf():mt;mt=Il(Ct)?Ct+"":Ct}if(typeof mt!="string")return mt===0?mt:+mt;mt=Iy(mt);var Qt=Eo.test(mt);return Qt||Lo.test(mt)?Rm(mt.slice(2),Qt?2:8):So.test(mt)?St:+mt}function r1(mt){return pm(mt,Bu(mt))}function dw(mt){return mt?kt(xs(mt),-qt,qt):mt===0?mt:0}function qs(mt){return mt==null?"":Yu(mt)}var yp=Zp(function(mt,Ct){if(k_(Ct)||_f(Ct)){pm(Ct,Ql(Ct),mt);return}for(var Qt in Ct)Ws.call(Ct,Qt)&&ly(mt,Qt,Ct[Qt])}),Z_=Zp(function(mt,Ct){pm(Ct,Bu(Ct),mt)}),Vm=Zp(function(mt,Ct,Qt,bn){pm(Ct,Bu(Ct),mt,bn)}),gw=Zp(function(mt,Ct,Qt,bn){pm(Ct,Ql(Ct),mt,bn)}),i1=_m(bt);function cA(mt,Ct){var Qt=hm(mt);return Ct==null?Qt:dt(Qt,Ct)}var BS=qo(function(mt,Ct){mt=Xs(mt);var Qt=-1,bn=Ct.length,Dn=bn>2?Ct[2]:s;for(Dn&&Gl(Ct[0],Ct[1],Dn)&&(bn=1);++Qt<bn;)for(var Kn=Ct[Qt],yr=Bu(Kn),xr=-1,Mr=yr.length;++xr<Mr;){var no=yr[xr],Jr=mt[no];(Jr===s||_h(Jr,sm[no])&&!Ws.call(mt,no))&&(mt[no]=Kn[no])}return mt}),jS=qo(function(mt){return mt.push(s,dp),gu(a1,s,mt)});function hA(mt,Ct){return Im(mt,es(Ct,3),Zn)}function FS(mt,Ct){return Im(mt,es(Ct,3),fr)}function NS(mt,Ct){return mt==null?mt:Nn(mt,es(Ct,3),Bu)}function pw(mt,Ct){return mt==null?mt:er(mt,es(Ct,3),Bu)}function US(mt,Ct){return mt&&Zn(mt,es(Ct,3))}function fA(mt,Ct){return mt&&fr(mt,es(Ct,3))}function zS(mt){return mt==null?[]:pr(mt,Ql(mt))}function Wm(mt){return mt==null?[]:pr(mt,Bu(mt))}function o1(mt,Ct,Qt){var bn=mt==null?s:tr(mt,Ct);return bn===s?Qt:bn}function VS(mt,Ct){return mt!=null&&W1(mt,Ct,kr)}function s1(mt,Ct){return mt!=null&&W1(mt,Ct,io)}var WS=kv(function(mt,Ct,Qt){Ct!=null&&typeof Ct.toString!="function"&&(Ct=$u.call(Ct)),mt[Ct]=Qt},g1(_d)),dA=kv(function(mt,Ct,Qt){Ct!=null&&typeof Ct.toString!="function"&&(Ct=$u.call(Ct)),Ws.call(mt,Ct)?mt[Ct].push(Qt):mt[Ct]=[Qt]},es),gA=qo(Or);function Ql(mt){return _f(mt)?Uy(mt):Ls(mt)}function Bu(mt){return _f(mt)?Uy(mt,!0):Ns(mt)}function Kv(mt,Ct){var Qt={};return Ct=es(Ct,3),Zn(mt,function(bn,Dn,Kn){lt(Qt,Ct(bn,Dn,Kn),bn)}),Qt}function GS(mt,Ct){var Qt={};return Ct=es(Ct,3),Zn(mt,function(bn,Dn,Kn){lt(Qt,Dn,Ct(bn,Dn,Kn))}),Qt}var HS=Zp(function(mt,Ct,Qt){Us(mt,Ct,Qt)}),a1=Zp(function(mt,Ct,Qt,bn){Us(mt,Ct,Qt,bn)}),Y_=_m(function(mt,Ct){var Qt={};if(mt==null)return Qt;var bn=!1;Ct=Qs(Ct,function(Kn){return Kn=cy(Kn,mt),bn||(bn=Kn.length>1),Kn}),pm(mt,Lv(mt),Qt),bn&&(Qt=jt(Qt,_t|gt|ft,gp));for(var Dn=Ct.length;Dn--;)T0(Qt,Ct[Dn]);return Qt});function $S(mt,Ct){return mw(mt,Q0(es(Ct)))}var l1=_m(function(mt,Ct){return mt==null?{}:ou(mt,Ct)});function mw(mt,Ct){if(mt==null)return{};var Qt=Qs(Lv(mt),function(bn){return[bn]});return Ct=es(Ct),Gs(mt,Qt,function(bn,Dn){return Ct(bn,Dn[0])})}function u1(mt,Ct,Qt){Ct=cy(Ct,mt);var bn=-1,Dn=Ct.length;for(Dn||(Dn=1,mt=s);++bn<Dn;){var Kn=mt==null?s:mt[Jp(Ct[bn])];Kn===s&&(bn=Dn,Kn=Qt),mt=zm(Kn)?Kn.call(mt):Kn}return mt}function c1(mt,Ct,Qt){return mt==null?mt:_u(mt,Ct,Qt)}function pA(mt,Ct,Qt,bn){return bn=typeof bn=="function"?bn:s,mt==null?mt:_u(mt,Ct,Qt,bn)}var qS=P0(Ql),ZS=P0(Bu);function mA(mt,Ct,Qt){var bn=ys(mt),Dn=bn||_y(mt)||q_(mt);if(Ct=es(Ct,4),Qt==null){var Kn=mt&&mt.constructor;Dn?Qt=bn?new Kn:[]:Il(mt)?Qt=zm(Kn)?hm(am(mt)):{}:Qt={}}return(Dn?pu:Zn)(mt,function(yr,xr,Mr){return Ct(Qt,yr,xr,Mr)}),Qt}function yA(mt,Ct){return mt==null?!0:T0(mt,Ct)}function K_(mt,Ct,Qt){return mt==null?mt:O1(mt,Ct,k1(Qt))}function yw(mt,Ct,Qt,bn){return bn=typeof bn=="function"?bn:s,mt==null?mt:O1(mt,Ct,k1(Qt),bn)}function X_(mt){return mt==null?[]:u_(mt,Ql(mt))}function YS(mt){return mt==null?[]:u_(mt,Bu(mt))}function _A(mt,Ct,Qt){return Qt===s&&(Qt=Ct,Ct=s),Qt!==s&&(Qt=kp(Qt),Qt=Qt===Qt?Qt:0),Ct!==s&&(Ct=kp(Ct),Ct=Ct===Ct?Ct:0),kt(kp(mt),Ct,Qt)}function _w(mt,Ct,Qt){return Ct=Am(Ct),Qt===s?(Qt=Ct,Ct=0):Qt=Am(Qt),mt=kp(mt),Ar(mt,Ct,Qt)}function vA(mt,Ct,Qt){if(Qt&&typeof Qt!="boolean"&&Gl(mt,Ct,Qt)&&(Ct=Qt=s),Qt===s&&(typeof Ct=="boolean"?(Qt=Ct,Ct=s):typeof mt=="boolean"&&(Qt=mt,mt=s)),mt===s&&Ct===s?(mt=0,Ct=1):(mt=Am(mt),Ct===s?(Ct=mt,mt=0):Ct=Am(Ct)),mt>Ct){var bn=mt;mt=Ct,Ct=bn}if(Qt||mt%1||Ct%1){var Dn=Ly();return Dl(mt+Dn*(Ct-mt+ru("1e-"+((Dn+"").length-1))),Ct)}return Xl(mt,Ct)}var by=Op(function(mt,Ct,Qt){return Ct=Ct.toLowerCase(),mt+(Qt?vw(Ct):Ct)});function vw(mt){return Ky(qs(mt).toLowerCase())}function bw(mt){return mt=qs(mt),mt&&mt.replace(fs,c_).replace(sr,"")}function f1(mt,Ct,Qt){mt=qs(mt),Ct=Yu(Ct);var bn=mt.length;Qt=Qt===s?bn:kt(xs(Qt),0,bn);var Dn=Qt;return Qt-=Ct.length,Qt>=0&&mt.slice(Qt,Dn)==Ct}function ww(mt){return mt=qs(mt),mt&&or.test(mt)?mt.replace(Cn,h_):mt}function bA(mt){return mt=qs(mt),mt&&Rn.test(mt)?mt.replace(En,"\\$&"):mt}var wA=Op(function(mt,Ct,Qt){return mt+(Qt?"-":"")+Ct.toLowerCase()}),KS=Op(function(mt,Ct,Qt){return mt+(Qt?" ":"")+Ct.toLowerCase()}),XS=Nm("toLowerCase");function Xv(mt,Ct,Qt){mt=qs(mt),Ct=xs(Ct);var bn=Ct?Jm(mt):0;if(!Ct||bn>=Ct)return mt;var Dn=(Ct-bn)/2;return M0(oy(Dn),Qt)+mt+M0(ky(Dn),Qt)}function Gm(mt,Ct,Qt){mt=qs(mt),Ct=xs(Ct);var bn=Ct?Jm(mt):0;return Ct&&bn<Ct?mt+M0(Ct-bn,Qt):mt}function Sw(mt,Ct,Qt){mt=qs(mt),Ct=xs(Ct);var bn=Ct?Jm(mt):0;return Ct&&bn<Ct?M0(Ct-bn,Qt)+mt:mt}function J_(mt,Ct,Qt){return Qt||Ct==null?Ct=0:Ct&&(Ct=+Ct),Du(qs(mt).replace(Hn,""),Ct||0)}function Q_(mt,Ct,Qt){return(Qt?Gl(mt,Ct,Qt):Ct===s)?Ct=1:Ct=xs(Ct),Cp(qs(mt),Ct)}function em(){var mt=arguments,Ct=qs(mt[0]);return mt.length<3?Ct:Ct.replace(mt[1],mt[2])}var tm=Op(function(mt,Ct,Qt){return mt+(Qt?"_":"")+Ct.toLowerCase()});function SA(mt,Ct,Qt){return Qt&&typeof Qt!="number"&&Gl(mt,Ct,Qt)&&(Ct=Qt=s),Qt=Qt===s?Zt:Qt>>>0,Qt?(mt=qs(mt),mt&&(typeof Ct=="string"||Ct!=null&&!e1(Ct))&&(Ct=Yu(Ct),!Ct&&Om(mt))?Fm(Pu(mt),0,Qt):mt.split(Ct,Qt)):[]}var JS=Op(function(mt,Ct,Qt){return mt+(Qt?" ":"")+Ky(Ct)});function xA(mt,Ct,Qt){return mt=qs(mt),Qt=Qt==null?0:kt(xs(Qt),0,mt.length),Ct=Yu(Ct),mt.slice(Qt,Qt+Ct.length)==Ct}function xw(mt,Ct,Qt){var bn=Wn.templateSettings;Qt&&Gl(mt,Ct,Qt)&&(Ct=s),mt=qs(mt),Ct=Vm({},Ct,bn,Kp);var Dn=Vm({},Ct.imports,bn.imports,Kp),Kn=Ql(Dn),yr=u_(Dn,Kn),xr,Mr,no=0,Jr=Ct.interpolate||vo,so="__p += '",Co=m_((Ct.escape||vo).source+"|"+Jr.source+"|"+(Jr===$n?Qr:vo).source+"|"+(Ct.evaluate||vo).source+"|$","g"),Fo="//# sourceURL="+(Ws.call(Ct,"sourceURL")?(Ct.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ko+"]")+`
`;mt.replace(Co,function(ss,Rs,Ps,ju,Fu,_g){return Ps||(Ps=ju),so+=mt.slice(no,_g).replace(As,vp),Rs&&(xr=!0,so+=`' +
__e(`+Rs+`) +
'`),Fu&&(Mr=!0,so+=`';
`+Fu+`;
__p += '`),Ps&&(so+=`' +
((__t = (`+Ps+`)) == null ? '' : __t) +
'`),no=_g+ss.length,ss}),so+=`';
`;var Zo=Ws.call(Ct,"variable")&&Ct.variable;if(!Zo)so=`with (obj) {
`+so+`
}
`;else if(wr.test(Zo))throw new hs(j);so=(Mr?so.replace(cr,""):so).replace($t,"$1").replace(en,"$1;"),so="function("+(Zo||"obj")+`) {
`+(Zo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(xr?", __e = _.escape":"")+(Mr?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+so+`return __p
}`;var _s=Jv(function(){return Ds(Kn,Fo+"return "+so).apply(s,yr)});if(_s.source=so,G_(_s))throw _s;return _s}function Em(mt){return qs(mt).toLowerCase()}function Yy(mt){return qs(mt).toUpperCase()}function QS(mt,Ct,Qt){if(mt=qs(mt),mt&&(Qt||Ct===s))return Iy(mt);if(!mt||!(Ct=Yu(Ct)))return mt;var bn=Pu(mt),Dn=Pu(Ct),Kn=Ym(bn,Dn),yr=Km(bn,Dn)+1;return Fm(bn,Kn,yr).join("")}function ex(mt,Ct,Qt){if(mt=qs(mt),mt&&(Qt||Ct===s))return mt.slice(0,l0(mt)+1);if(!mt||!(Ct=Yu(Ct)))return mt;var bn=Pu(mt),Dn=Km(bn,Pu(Ct))+1;return Fm(bn,0,Dn).join("")}function AA(mt,Ct,Qt){if(mt=qs(mt),mt&&(Qt||Ct===s))return mt.replace(Hn,"");if(!mt||!(Ct=Yu(Ct)))return mt;var bn=Pu(mt),Dn=Ym(bn,Pu(Ct));return Fm(bn,Dn).join("")}function d1(mt,Ct){var Qt=xt,bn=Nt;if(Il(Ct)){var Dn="separator"in Ct?Ct.separator:Dn;Qt="length"in Ct?xs(Ct.length):Qt,bn="omission"in Ct?Yu(Ct.omission):bn}mt=qs(mt);var Kn=mt.length;if(Om(mt)){var yr=Pu(mt);Kn=yr.length}if(Qt>=Kn)return mt;var xr=Qt-Jm(bn);if(xr<1)return bn;var Mr=yr?Fm(yr,0,xr).join(""):mt.slice(0,xr);if(Dn===s)return Mr+bn;if(yr&&(xr+=Mr.length-xr),e1(Dn)){if(mt.slice(xr).search(Dn)){var no,Jr=Mr;for(Dn.global||(Dn=m_(Dn.source,qs(Hr.exec(Dn))+"g")),Dn.lastIndex=0;no=Dn.exec(Jr);)var so=no.index;Mr=Mr.slice(0,so===s?xr:so)}}else if(mt.indexOf(Yu(Dn),xr)!=xr){var Co=Mr.lastIndexOf(Dn);Co>-1&&(Mr=Mr.slice(0,Co))}return Mr+bn}function Aw(mt){return mt=qs(mt),mt&&On.test(mt)?mt.replace(dn,g_):mt}var ev=Op(function(mt,Ct,Qt){return mt+(Qt?" ":"")+Ct.toUpperCase()}),Ky=Nm("toUpperCase");function tv(mt,Ct,Qt){return mt=qs(mt),Ct=Qt?s:Ct,Ct===s?mv(mt)?bv(mt):om(mt):mt.match(Ct)||[]}var Jv=qo(function(mt,Ct){try{return gu(mt,s,Ct)}catch(Qt){return G_(Qt)?Qt:new hs(Qt)}}),tx=_m(function(mt,Ct){return pu(Ct,function(Qt){Qt=Jp(Qt),lt(mt,Qt,qy(mt[Qt],mt))}),mt});function Qv(mt){var Ct=mt==null?0:mt.length,Qt=es();return mt=Ct?Qs(mt,function(bn){if(typeof bn[1]!="function")throw new Tu(tt);return[Qt(bn[0]),bn[1]]}):[],qo(function(bn){for(var Dn=-1;++Dn<Ct;){var Kn=mt[Dn];if(gu(Kn[0],this,bn))return gu(Kn[1],this,bn)}})}function Ew(mt){return Jt(jt(mt,_t))}function g1(mt){return function(){return mt}}function nv(mt,Ct){return mt==null||mt!==mt?Ct:mt}var nx=Uw(),rx=Uw(!0);function _d(mt){return mt}function Tw(mt){return ls(typeof mt=="function"?mt:jt(mt,_t))}function ix(mt){return iu(jt(mt,_t))}function Xy(mt,Ct){return hp(mt,jt(Ct,_t))}var EA=qo(function(mt,Ct){return function(Qt){return Or(Qt,mt,Ct)}}),wy=qo(function(mt,Ct){return function(Qt){return Or(mt,Qt,Ct)}});function Cw(mt,Ct,Qt){var bn=Ql(Ct),Dn=pr(Ct,bn);Qt==null&&!(Il(Ct)&&(Dn.length||!bn.length))&&(Qt=Ct,Ct=mt,mt=this,Dn=pr(Ct,Ql(Ct)));var Kn=!(Il(Qt)&&"chain"in Qt)||!!Qt.chain,yr=zm(mt);return pu(Dn,function(xr){var Mr=Ct[xr];mt[xr]=Mr,yr&&(mt.prototype[xr]=function(){var no=this.__chain__;if(Kn||no){var Jr=mt(this.__wrapped__),so=Jr.__actions__=Ku(this.__actions__);return so.push({func:Mr,args:arguments,thisArg:mt}),Jr.__chain__=no,Jr}return Mr.apply(mt,ap([this.value()],arguments))})}),mt}function _b(){return Sl._===this&&(Sl._=c0),this}function Jy(){}function e0(mt){return mt=xs(mt),qo(function(Ct){return Ms(Ct,mt)})}var t0=z1(Qs),p1=z1(sp),TA=z1(Ty);function ox(mt){return L0(mt)?qm(Jp(mt)):Ru(mt)}function rv(mt){return function(Ct){return mt==null?s:tr(mt,Ct)}}var m1=Go(),CA=Go(!0);function y1(){return[]}function _1(){return!1}function RA(){return{}}function sx(){return""}function IA(){return!0}function ax(mt,Ct){if(mt=xs(mt),mt<1||mt>qt)return[];var Qt=Zt,bn=Dl(mt,Zt);Ct=es(Ct),mt-=Zt;for(var Dn=Zm(bn,Ct);++Qt<mt;)Ct(Qt);return Dn}function OA(mt){return ys(mt)?Qs(mt,Jp):mp(mt)?[mt]:Ku(U0(qs(mt)))}function lx(mt){var Ct=++Sp;return qs(mt)+Ct}var MA=Xu(function(mt,Ct){return mt+Ct},0),PA=Ts("ceil"),v1=Xu(function(mt,Ct){return mt/Ct},1),b1=Ts("floor");function w1(mt){return mt&&mt.length?Yn(mt,_d,Lr):s}function kA(mt,Ct){return mt&&mt.length?Yn(mt,es(Ct,2),Lr):s}function Rw(mt){return fv(mt,_d)}function Iw(mt,Ct){return fv(mt,es(Ct,2))}function Sy(mt){return mt&&mt.length?Yn(mt,_d,Os):s}function DA(mt,Ct){return mt&&mt.length?Yn(mt,es(Ct,2),Os):s}var Ow=Xu(function(mt,Ct){return mt*Ct},1),ux=Ts("round"),S1=Xu(function(mt,Ct){return mt-Ct},0);function LA(mt){return mt&&mt.length?Ry(mt,_d):0}function BA(mt,Ct){return mt&&mt.length?Ry(mt,es(Ct,2)):0}return Wn.after=$v,Wn.ary=z_,Wn.assign=yp,Wn.assignIn=Z_,Wn.assignInWith=Vm,Wn.assignWith=gw,Wn.at=i1,Wn.before=sw,Wn.bind=qy,Wn.bindAll=tx,Wn.bindKey=aw,Wn.castArray=Yx,Wn.chain=N_,Wn.chunk=q1,Wn.compact=Kw,Wn.concat=Fv,Wn.cond=Qv,Wn.conforms=Ew,Wn.constant=g1,Wn.countBy=Bx,Wn.create=cA,Wn.curry=vS,Wn.curryRight=lw,Wn.debounce=uw,Wn.defaults=BS,Wn.defaultsDeep=jS,Wn.defer=bS,Wn.delay=wS,Wn.difference=Nv,Wn.differenceBy=pp,Wn.differenceWith=Uv,Wn.drop=Iu,Wn.dropRight=Mp,Wn.dropRightWhile=Z1,Wn.dropWhile=Fl,Wn.fill=Xw,Wn.filter=iw,Wn.flatMap=Fx,Wn.flatMapDeep=Nx,Wn.flatMapDepth=Ux,Wn.flatten=Jw,Wn.flattenDeep=_x,Wn.flattenDepth=Qw,Wn.flip=SS,Wn.flow=nx,Wn.flowRight=rx,Wn.fromPairs=eS,Wn.functions=zS,Wn.functionsIn=Wm,Wn.groupBy=Z0,Wn.initial=nS,Wn.intersection=rS,Wn.intersectionBy=iS,Wn.intersectionWith=vx,Wn.invert=WS,Wn.invertBy=dA,Wn.invokeMap=mS,Wn.iteratee=Tw,Wn.keyBy=U_,Wn.keys=Ql,Wn.keysIn=Bu,Wn.map=Y0,Wn.mapKeys=Kv,Wn.mapValues=GS,Wn.matches=ix,Wn.matchesProperty=Xy,Wn.memoize=qv,Wn.merge=HS,Wn.mergeWith=a1,Wn.method=EA,Wn.methodOf=wy,Wn.mixin=Cw,Wn.negate=Q0,Wn.nthArg=e0,Wn.omit=Y_,Wn.omitBy=$S,Wn.once=Zx,Wn.orderBy=Vx,Wn.over=t0,Wn.overArgs=xS,Wn.overEvery=p1,Wn.overSome=TA,Wn.partial=V_,Wn.partialRight=cw,Wn.partition=Wx,Wn.pick=l1,Wn.pickBy=mw,Wn.property=ox,Wn.propertyOf=rv,Wn.pull=oS,Wn.pullAll=sS,Wn.pullAllBy=aS,Wn.pullAllWith=bx,Wn.pullAt=wx,Wn.range=m1,Wn.rangeRight=CA,Wn.rearg=Mu,Wn.reject=Gx,Wn.remove=lS,Wn.rest=Zv,Wn.reverse=z0,Wn.sampleSize=$x,Wn.set=c1,Wn.setWith=pA,Wn.shuffle=ow,Wn.slice=uS,Wn.sortBy=qx,Wn.sortedUniq=Ax,Wn.sortedUniqBy=Ex,Wn.split=SA,Wn.spread=W_,Wn.tail=zv,Wn.take=V0,Wn.takeRight=cS,Wn.takeRightWhile=$y,Wn.takeWhile=Vv,Wn.tap=fS,Wn.throttle=Yv,Wn.thru=Wv,Wn.toArray=Zy,Wn.toPairs=qS,Wn.toPairsIn=ZS,Wn.toPath=OA,Wn.toPlainObject=r1,Wn.transform=mA,Wn.unary=AS,Wn.union=Tx,Wn.unionBy=Cx,Wn.unionWith=Rx,Wn.uniq=Ix,Wn.uniqBy=Ox,Wn.uniqWith=Mx,Wn.unset=yA,Wn.unzip=Q1,Wn.unzipWith=W0,Wn.update=K_,Wn.updateWith=yw,Wn.values=X_,Wn.valuesIn=YS,Wn.without=Px,Wn.words=tv,Wn.wrap=ES,Wn.xor=F_,Wn.xorBy=kx,Wn.xorWith=Rl,Wn.zip=G0,Wn.zipObject=hS,Wn.zipObjectDeep=H0,Wn.zipWith=$0,Wn.entries=qS,Wn.entriesIn=ZS,Wn.extend=Z_,Wn.extendWith=Vm,Cw(Wn,Wn),Wn.add=MA,Wn.attempt=Jv,Wn.camelCase=by,Wn.capitalize=vw,Wn.ceil=PA,Wn.clamp=_A,Wn.clone=Kx,Wn.cloneDeep=Jx,Wn.cloneDeepWith=Qx,Wn.cloneWith=Xx,Wn.conformsTo=eA,Wn.deburr=bw,Wn.defaultTo=nv,Wn.divide=v1,Wn.endsWith=f1,Wn.eq=_h,Wn.escape=ww,Wn.escapeRegExp=bA,Wn.every=rw,Wn.find=q0,Wn.findIndex=j_,Wn.findKey=hA,Wn.findLast=jx,Wn.findLastIndex=Pp,Wn.findLastKey=FS,Wn.floor=b1,Wn.forEach=gS,Wn.forEachRight=pS,Wn.forIn=NS,Wn.forInRight=pw,Wn.forOwn=US,Wn.forOwnRight=fA,Wn.get=o1,Wn.gt=tA,Wn.gte=TS,Wn.has=VS,Wn.hasIn=s1,Wn.head=my,Wn.identity=_d,Wn.includes=zx,Wn.indexOf=tS,Wn.inRange=_w,Wn.invoke=gA,Wn.isArguments=yy,Wn.isArray=ys,Wn.isArrayBuffer=nA,Wn.isArrayLike=_f,Wn.isArrayLikeObject=Hl,Wn.isBoolean=rA,Wn.isBuffer=_y,Wn.isDate=CS,Wn.isElement=iA,Wn.isEmpty=lu,Wn.isEqual=wm,Wn.isEqualWith=hw,Wn.isError=G_,Wn.isFinite=H_,Wn.isFunction=zm,Wn.isInteger=RS,Wn.isLength=vy,Wn.isMap=$_,Wn.isMatch=IS,Wn.isMatchWith=OS,Wn.isNaN=$s,Wn.isNative=fw,Wn.isNil=kS,Wn.isNull=PS,Wn.isNumber=Sm,Wn.isObject=Il,Wn.isObjectLike=Nl,Wn.isPlainObject=xm,Wn.isRegExp=e1,Wn.isSafeInteger=oA,Wn.isSet=DS,Wn.isString=t1,Wn.isSymbol=mp,Wn.isTypedArray=q_,Wn.isUndefined=sA,Wn.isWeakMap=aA,Wn.isWeakSet=lA,Wn.join=Y1,Wn.kebabCase=wA,Wn.last=Qu,Wn.lastIndexOf=K1,Wn.lowerCase=KS,Wn.lowerFirst=XS,Wn.lt=uA,Wn.lte=n1,Wn.max=w1,Wn.maxBy=kA,Wn.mean=Rw,Wn.meanBy=Iw,Wn.min=Sy,Wn.minBy=DA,Wn.stubArray=y1,Wn.stubFalse=_1,Wn.stubObject=RA,Wn.stubString=sx,Wn.stubTrue=IA,Wn.multiply=Ow,Wn.nth=Ou,Wn.noConflict=_b,Wn.noop=Jy,Wn.now=J0,Wn.pad=Xv,Wn.padEnd=Gm,Wn.padStart=Sw,Wn.parseInt=J_,Wn.random=vA,Wn.reduce=yS,Wn.reduceRight=_S,Wn.repeat=Q_,Wn.replace=em,Wn.result=u1,Wn.round=ux,Wn.runInContext=Rr,Wn.sample=Hx,Wn.size=K0,Wn.snakeCase=tm,Wn.some=X0,Wn.sortedIndex=X1,Wn.sortedIndexBy=Um,Wn.sortedIndexOf=_c,Wn.sortedLastIndex=Sx,Wn.sortedLastIndexBy=J1,Wn.sortedLastIndexOf=xx,Wn.startCase=JS,Wn.startsWith=xA,Wn.subtract=S1,Wn.sum=LA,Wn.sumBy=BA,Wn.template=xw,Wn.times=ax,Wn.toFinite=Am,Wn.toInteger=xs,Wn.toLength=LS,Wn.toLower=Em,Wn.toNumber=kp,Wn.toSafeInteger=dw,Wn.toString=qs,Wn.toUpper=Yy,Wn.trim=QS,Wn.trimEnd=ex,Wn.trimStart=AA,Wn.truncate=d1,Wn.unescape=Aw,Wn.uniqueId=lx,Wn.upperCase=ev,Wn.upperFirst=Ky,Wn.each=gS,Wn.eachRight=pS,Wn.first=my,Cw(Wn,function(){var mt={};return Zn(Wn,function(Ct,Qt){Ws.call(Wn.prototype,Qt)||(mt[Qt]=Ct)}),mt}(),{chain:!1}),Wn.VERSION=_,pu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(mt){Wn[mt].placeholder=Wn}),pu(["drop","take"],function(mt,Ct){Es.prototype[mt]=function(Qt){Qt=Qt===s?1:Pl(xs(Qt),0);var bn=this.__filtered__&&!Ct?new Es(this):this.clone();return bn.__filtered__?bn.__takeCount__=Dl(Qt,bn.__takeCount__):bn.__views__.push({size:Dl(Qt,Zt),type:mt+(bn.__dir__<0?"Right":"")}),bn},Es.prototype[mt+"Right"]=function(Qt){return this.reverse()[mt](Qt).reverse()}}),pu(["filter","map","takeWhile"],function(mt,Ct){var Qt=Ct+1,bn=Qt==Xt||Qt==Ut;Es.prototype[mt]=function(Dn){var Kn=this.clone();return Kn.__iteratees__.push({iteratee:es(Dn,3),type:Qt}),Kn.__filtered__=Kn.__filtered__||bn,Kn}}),pu(["head","last"],function(mt,Ct){var Qt="take"+(Ct?"Right":"");Es.prototype[mt]=function(){return this[Qt](1).value()[0]}}),pu(["initial","tail"],function(mt,Ct){var Qt="drop"+(Ct?"":"Right");Es.prototype[mt]=function(){return this.__filtered__?new Es(this):this[Qt](1)}}),Es.prototype.compact=function(){return this.filter(_d)},Es.prototype.find=function(mt){return this.filter(mt).head()},Es.prototype.findLast=function(mt){return this.reverse().find(mt)},Es.prototype.invokeMap=qo(function(mt,Ct){return typeof mt=="function"?new Es(this):this.map(function(Qt){return Or(Qt,mt,Ct)})}),Es.prototype.reject=function(mt){return this.filter(Q0(es(mt)))},Es.prototype.slice=function(mt,Ct){mt=xs(mt);var Qt=this;return Qt.__filtered__&&(mt>0||Ct<0)?new Es(Qt):(mt<0?Qt=Qt.takeRight(-mt):mt&&(Qt=Qt.drop(mt)),Ct!==s&&(Ct=xs(Ct),Qt=Ct<0?Qt.dropRight(-Ct):Qt.take(Ct-mt)),Qt)},Es.prototype.takeRightWhile=function(mt){return this.reverse().takeWhile(mt).reverse()},Es.prototype.toArray=function(){return this.take(Zt)},Zn(Es.prototype,function(mt,Ct){var Qt=/^(?:filter|find|map|reject)|While$/.test(Ct),bn=/^(?:head|last)$/.test(Ct),Dn=Wn[bn?"take"+(Ct=="last"?"Right":""):Ct],Kn=bn||/^find/.test(Ct);Dn&&(Wn.prototype[Ct]=function(){var yr=this.__wrapped__,xr=bn?[1]:arguments,Mr=yr instanceof Es,no=xr[0],Jr=Mr||ys(yr),so=function(Rs){var Ps=Dn.apply(Wn,ap([Rs],xr));return bn&&Co?Ps[0]:Ps};Jr&&Qt&&typeof no=="function"&&no.length!=1&&(Mr=Jr=!1);var Co=this.__chain__,Fo=!!this.__actions__.length,Zo=Kn&&!Co,_s=Mr&&!Fo;if(!Kn&&Jr){yr=_s?yr:new Es(this);var ss=mt.apply(yr,xr);return ss.__actions__.push({func:Wv,args:[so],thisArg:s}),new Cu(ss,Co)}return Zo&&_s?mt.apply(this,xr):(ss=this.thru(so),Zo?bn?ss.value()[0]:ss.value():ss)})}),pu(["pop","push","shift","sort","splice","unshift"],function(mt){var Ct=wp[mt],Qt=/^(?:push|sort|unshift)$/.test(mt)?"tap":"thru",bn=/^(?:pop|shift)$/.test(mt);Wn.prototype[mt]=function(){var Dn=arguments;if(bn&&!this.__chain__){var Kn=this.value();return Ct.apply(ys(Kn)?Kn:[],Dn)}return this[Qt](function(yr){return Ct.apply(ys(yr)?yr:[],Dn)})}}),Zn(Es.prototype,function(mt,Ct){var Qt=Wn[Ct];if(Qt){var bn=Qt.name+"";Ws.call(km,bn)||(km[bn]=[]),km[bn].push({name:Ct,func:Qt})}}),km[Pv(s,Mt).name]=[{name:"wrapper",func:s}],Es.prototype.clone=T1,Es.prototype.reverse=C1,Es.prototype.value=Hp,Wn.prototype.at=Gv,Wn.prototype.chain=ew,Wn.prototype.commit=tw,Wn.prototype.next=Dx,Wn.prototype.plant=Hv,Wn.prototype.reverse=Lx,Wn.prototype.toJSON=Wn.prototype.valueOf=Wn.prototype.value=nw,Wn.prototype.first=Wn.prototype.head,Up&&(Wn.prototype[Up]=dS),Wn},ey=Qm();_p?((_p.exports=ey)._=ey,Ey._=ey):Sl._=ey}).call(commonjsGlobal)})(lodash,lodash.exports);var lib={},uaParser_min={exports:{}};(function(i,o){(function(s,_){var $="1.0.2",et="",tt="?",j="function",it="undefined",st="object",ht="string",_t="major",gt="model",ft="name",ut="type",yt="vendor",Et="version",Mt="architecture",Ft="console",Rt="mobile",Ot="tablet",pt="smarttv",Lt="wearable",nn="embedded",on=255,wt="Amazon",xt="Apple",Nt="ASUS",Tt="BlackBerry",Vt="Browser",Xt="Chrome",Gt="Edge",Ut="Firefox",Ht="Google",qt="Huawei",Pt="LG",St="Microsoft",Zt="Motorola",tn="Opera",mn="Samsung",yn="Sony",vn="Xiaomi",un="Zebra",rn="Facebook",It=function(to,Ro){var Mo={};for(var Vo in to)Ro[Vo]&&Ro[Vo].length%2===0?Mo[Vo]=Ro[Vo].concat(to[Vo]):Mo[Vo]=to[Vo];return Mo},Dt=function(to){for(var Ro={},Mo=0;Mo<to.length;Mo++)Ro[to[Mo].toUpperCase()]=to[Mo];return Ro},Kt=function(to,Ro){return typeof to===ht?gn(Ro).indexOf(gn(to))!==-1:!1},gn=function(to){return to.toLowerCase()},hn=function(to){return typeof to===ht?to.replace(/[^\d\.]/g,et).split(".")[0]:_},xn=function(to,Ro){if(typeof to===ht)return to=to.replace(/^\s\s*/,et).replace(/\s\s*$/,et),typeof Ro===it?to:to.substring(0,on)},Mn=function(to,Ro){for(var Mo=0,Vo,Qo,Io,as,Bs,cs;Mo<Ro.length&&!Bs;){var Zl=Ro[Mo],Vl=Ro[Mo+1];for(Vo=Qo=0;Vo<Zl.length&&!Bs;)if(Bs=Zl[Vo++].exec(to),Bs)for(Io=0;Io<Vl.length;Io++)cs=Bs[++Qo],as=Vl[Io],typeof as===st&&as.length>0?as.length===2?typeof as[1]==j?this[as[0]]=as[1].call(this,cs):this[as[0]]=as[1]:as.length===3?typeof as[1]===j&&!(as[1].exec&&as[1].test)?this[as[0]]=cs?as[1].call(this,cs,as[2]):_:this[as[0]]=cs?cs.replace(as[1],as[2]):_:as.length===4&&(this[as[0]]=cs?as[3].call(this,cs.replace(as[1],as[2])):_):this[as]=cs||_;Mo+=2}},qn=function(to,Ro){for(var Mo in Ro)if(typeof Ro[Mo]===st&&Ro[Mo].length>0){for(var Vo=0;Vo<Ro[Mo].length;Vo++)if(Kt(Ro[Mo][Vo],to))return Mo===tt?_:Mo}else if(Kt(Ro[Mo],to))return Mo===tt?_:Mo;return to},Ir={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},_i={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ur={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Et,[ft,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Et,[ft,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[ft,Et],[/opios[\/ ]+([\w\.]+)/i],[Et,[ft,tn+" Mini"]],[/\bopr\/([\w\.]+)/i],[Et,[ft,tn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[ft,Et],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Et,[ft,"UC"+Vt]],[/\bqbcore\/([\w\.]+)/i],[Et,[ft,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[Et,[ft,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Et,[ft,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Et,[ft,"IE"]],[/yabrowser\/([\w\.]+)/i],[Et,[ft,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[ft,/(.+)/,"$1 Secure "+Vt],Et],[/\bfocus\/([\w\.]+)/i],[Et,[ft,Ut+" Focus"]],[/\bopt\/([\w\.]+)/i],[Et,[ft,tn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Et,[ft,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Et,[ft,"Dolphin"]],[/coast\/([\w\.]+)/i],[Et,[ft,tn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Et,[ft,"MIUI "+Vt]],[/fxios\/([-\w\.]+)/i],[Et,[ft,Ut]],[/\bqihu|(qi?ho?o?|360)browser/i],[[ft,"360 "+Vt]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[ft,/(.+)/,"$1 "+Vt],Et],[/(comodo_dragon)\/([\w\.]+)/i],[[ft,/_/g," "],Et],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[ft,Et],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[ft],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[ft,rn],Et],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[ft,Et],[/\bgsa\/([\w\.]+) .*safari\//i],[Et,[ft,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Et,[ft,Xt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[ft,Xt+" WebView"],Et],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Et,[ft,"Android "+Vt]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[ft,Et],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[Et,[ft,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[Et,ft],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[ft,[Et,qn,Ir]],[/(webkit|khtml)\/([\w\.]+)/i],[ft,Et],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[ft,"Netscape"],Et],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Et,[ft,Ut+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[ft,Et]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Mt,"amd64"]],[/(ia32(?=;))/i],[[Mt,gn]],[/((?:i[346]|x)86)[;\)]/i],[[Mt,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Mt,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Mt,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Mt,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Mt,/ower/,et,gn]],[/(sun4\w)[;\)]/i],[[Mt,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Mt,gn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[gt,[yt,mn],[ut,Ot]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[gt,[yt,mn],[ut,Rt]],[/\((ip(?:hone|od)[\w ]*);/i],[gt,[yt,xt],[ut,Rt]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[gt,[yt,xt],[ut,Ot]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[gt,[yt,qt],[ut,Ot]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[gt,[yt,qt],[ut,Rt]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[gt,/_/g," "],[yt,vn],[ut,Rt]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[gt,/_/g," "],[yt,vn],[ut,Ot]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[gt,[yt,"OPPO"],[ut,Rt]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[gt,[yt,"Vivo"],[ut,Rt]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[gt,[yt,"Realme"],[ut,Rt]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[gt,[yt,Zt],[ut,Rt]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[gt,[yt,Zt],[ut,Ot]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[gt,[yt,Pt],[ut,Ot]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[gt,[yt,Pt],[ut,Rt]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[gt,[yt,"Lenovo"],[ut,Ot]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[gt,/_/g," "],[yt,"Nokia"],[ut,Rt]],[/(pixel c)\b/i],[gt,[yt,Ht],[ut,Ot]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[gt,[yt,Ht],[ut,Rt]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[gt,[yt,yn],[ut,Rt]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[gt,"Xperia Tablet"],[yt,yn],[ut,Ot]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[gt,[yt,"OnePlus"],[ut,Rt]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[gt,[yt,wt],[ut,Ot]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[gt,/(.+)/g,"Fire Phone $1"],[yt,wt],[ut,Rt]],[/(playbook);[-\w\),; ]+(rim)/i],[gt,yt,[ut,Ot]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[gt,[yt,Tt],[ut,Rt]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[gt,[yt,Nt],[ut,Ot]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[gt,[yt,Nt],[ut,Rt]],[/(nexus 9)/i],[gt,[yt,"HTC"],[ut,Ot]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[yt,[gt,/_/g," "],[ut,Rt]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[gt,[yt,"Acer"],[ut,Ot]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[gt,[yt,"Meizu"],[ut,Rt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[gt,[yt,"Sharp"],[ut,Rt]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[yt,gt,[ut,Rt]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[yt,gt,[ut,Ot]],[/(surface duo)/i],[gt,[yt,St],[ut,Ot]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[gt,[yt,"Fairphone"],[ut,Rt]],[/(u304aa)/i],[gt,[yt,"AT&T"],[ut,Rt]],[/\bsie-(\w*)/i],[gt,[yt,"Siemens"],[ut,Rt]],[/\b(rct\w+) b/i],[gt,[yt,"RCA"],[ut,Ot]],[/\b(venue[\d ]{2,7}) b/i],[gt,[yt,"Dell"],[ut,Ot]],[/\b(q(?:mv|ta)\w+) b/i],[gt,[yt,"Verizon"],[ut,Ot]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[gt,[yt,"Barnes & Noble"],[ut,Ot]],[/\b(tm\d{3}\w+) b/i],[gt,[yt,"NuVision"],[ut,Ot]],[/\b(k88) b/i],[gt,[yt,"ZTE"],[ut,Ot]],[/\b(nx\d{3}j) b/i],[gt,[yt,"ZTE"],[ut,Rt]],[/\b(gen\d{3}) b.+49h/i],[gt,[yt,"Swiss"],[ut,Rt]],[/\b(zur\d{3}) b/i],[gt,[yt,"Swiss"],[ut,Ot]],[/\b((zeki)?tb.*\b) b/i],[gt,[yt,"Zeki"],[ut,Ot]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[yt,"Dragon Touch"],gt,[ut,Ot]],[/\b(ns-?\w{0,9}) b/i],[gt,[yt,"Insignia"],[ut,Ot]],[/\b((nxa|next)-?\w{0,9}) b/i],[gt,[yt,"NextBook"],[ut,Ot]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[yt,"Voice"],gt,[ut,Rt]],[/\b(lvtel\-)?(v1[12]) b/i],[[yt,"LvTel"],gt,[ut,Rt]],[/\b(ph-1) /i],[gt,[yt,"Essential"],[ut,Rt]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[gt,[yt,"Envizen"],[ut,Ot]],[/\b(trio[-\w\. ]+) b/i],[gt,[yt,"MachSpeed"],[ut,Ot]],[/\btu_(1491) b/i],[gt,[yt,"Rotor"],[ut,Ot]],[/(shield[\w ]+) b/i],[gt,[yt,"Nvidia"],[ut,Ot]],[/(sprint) (\w+)/i],[yt,gt,[ut,Rt]],[/(kin\.[onetw]{3})/i],[[gt,/\./g," "],[yt,St],[ut,Rt]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[gt,[yt,un],[ut,Ot]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[gt,[yt,un],[ut,Rt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[yt,gt,[ut,Ft]],[/droid.+; (shield) bui/i],[gt,[yt,"Nvidia"],[ut,Ft]],[/(playstation [345portablevi]+)/i],[gt,[yt,yn],[ut,Ft]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[gt,[yt,St],[ut,Ft]],[/smart-tv.+(samsung)/i],[yt,[ut,pt]],[/hbbtv.+maple;(\d+)/i],[[gt,/^/,"SmartTV"],[yt,mn],[ut,pt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[yt,Pt],[ut,pt]],[/(apple) ?tv/i],[yt,[gt,xt+" TV"],[ut,pt]],[/crkey/i],[[gt,Xt+"cast"],[yt,Ht],[ut,pt]],[/droid.+aft(\w)( bui|\))/i],[gt,[yt,wt],[ut,pt]],[/\(dtv[\);].+(aquos)/i],[gt,[yt,"Sharp"],[ut,pt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[yt,xn],[gt,xn],[ut,pt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[ut,pt]],[/((pebble))app/i],[yt,gt,[ut,Lt]],[/droid.+; (glass) \d/i],[gt,[yt,Ht],[ut,Lt]],[/droid.+; (wt63?0{2,3})\)/i],[gt,[yt,un],[ut,Lt]],[/(quest( 2)?)/i],[gt,[yt,rn],[ut,Lt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[yt,[ut,nn]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[gt,[ut,Rt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[gt,[ut,Ot]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[ut,Ot]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[ut,Rt]],[/(android[-\w\. ]{0,9});.+buil/i],[gt,[yt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Et,[ft,Gt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Et,[ft,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[ft,Et],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Et,ft]],os:[[/microsoft (windows) (vista|xp)/i],[ft,Et],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[ft,[Et,qn,_i]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[ft,"Windows"],[Et,qn,_i]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[Et,/_/g,"."],[ft,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[ft,"Mac OS"],[Et,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[Et,ft],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[ft,Et],[/\(bb(10);/i],[Et,[ft,Tt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Et,[ft,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Et,[ft,Ut+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Et,[ft,"webOS"]],[/crkey\/([\d\.]+)/i],[Et,[ft,Xt+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[ft,"Chromium OS"],Et],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[ft,Et],[/(sunos) ?([\w\.\d]*)/i],[[ft,"Solaris"],Et],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[ft,Et]]},fo=function(to,Ro){if(typeof to===st&&(Ro=to,to=_),!(this instanceof fo))return new fo(to,Ro).getResult();var Mo=to||(typeof s!==it&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:et),Vo=Ro?It(Ur,Ro):Ur;return this.getBrowser=function(){var Qo={};return Qo[ft]=_,Qo[Et]=_,Mn.call(Qo,Mo,Vo.browser),Qo.major=hn(Qo.version),Qo},this.getCPU=function(){var Qo={};return Qo[Mt]=_,Mn.call(Qo,Mo,Vo.cpu),Qo},this.getDevice=function(){var Qo={};return Qo[yt]=_,Qo[gt]=_,Qo[ut]=_,Mn.call(Qo,Mo,Vo.device),Qo},this.getEngine=function(){var Qo={};return Qo[ft]=_,Qo[Et]=_,Mn.call(Qo,Mo,Vo.engine),Qo},this.getOS=function(){var Qo={};return Qo[ft]=_,Qo[Et]=_,Mn.call(Qo,Mo,Vo.os),Qo},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mo},this.setUA=function(Qo){return Mo=typeof Qo===ht&&Qo.length>on?xn(Qo,on):Qo,this},this.setUA(Mo),this};fo.VERSION=$,fo.BROWSER=Dt([ft,Et,_t]),fo.CPU=Dt([Mt]),fo.DEVICE=Dt([gt,yt,ut,Ft,Rt,pt,Ot,Lt,nn]),fo.ENGINE=fo.OS=Dt([ft,Et]),i.exports&&(o=i.exports=fo),o.UAParser=fo;var Gr=typeof s!==it&&(s.jQuery||s.Zepto);if(Gr&&!Gr.ua){var Yr=new fo;Gr.ua=Yr.getResult(),Gr.ua.get=function(){return Yr.getUA()},Gr.ua.set=function(to){Yr.setUA(to);var Ro=Yr.getResult();for(var Mo in Ro)Gr.ua[Mo]=Ro[Mo]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);Object.defineProperty(lib,"__esModule",{value:!0});function _interopDefault(i){return i&&typeof i=="object"&&"default"in i?i.default:i}var React=React$1,React__default=_interopDefault(React),UAParser=uaParser_min.exports,ClientUAInstance=new UAParser,browser=ClientUAInstance.getBrowser(),cpu=ClientUAInstance.getCPU(),device=ClientUAInstance.getDevice(),engine=ClientUAInstance.getEngine(),os=ClientUAInstance.getOS(),ua=ClientUAInstance.getUA(),setUa=function i(o){return ClientUAInstance.setUA(o)},parseUserAgent=function i(o){if(!o){console.error("No userAgent string was provided");return}var s=new UAParser(o);return{UA:s,browser:s.getBrowser(),cpu:s.getCPU(),device:s.getDevice(),engine:s.getEngine(),os:s.getOS(),ua:s.getUA(),setUserAgent:function($){return s.setUA($)}}},UAHelper=Object.freeze({ClientUAInstance,browser,cpu,device,engine,os,ua,setUa,parseUserAgent});function ownKeys(i,o){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(i);o&&(_=_.filter(function($){return Object.getOwnPropertyDescriptor(i,$).enumerable})),s.push.apply(s,_)}return s}function _objectSpread2(i){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(s),!0).forEach(function(_){_defineProperty(i,_,s[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(_){Object.defineProperty(i,_,Object.getOwnPropertyDescriptor(s,_))})}return i}function _typeof(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(o){return typeof o}:_typeof=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(i)}function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var s=0;s<o.length;s++){var _=o[s];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}function _createClass(i,o,s){return o&&_defineProperties(i.prototype,o),s&&_defineProperties(i,s),i}function _defineProperty(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}function _extends(){return _extends=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(i[_]=s[_])}return i},_extends.apply(this,arguments)}function _inherits(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf(i)}function _setPrototypeOf(i,o){return _setPrototypeOf=Object.setPrototypeOf||function(_,$){return _.__proto__=$,_},_setPrototypeOf(i,o)}function _objectWithoutPropertiesLoose(i,o){if(i==null)return{};var s={},_=Object.keys(i),$,et;for(et=0;et<_.length;et++)$=_[et],!(o.indexOf($)>=0)&&(s[$]=i[$]);return s}function _objectWithoutProperties(i,o){if(i==null)return{};var s=_objectWithoutPropertiesLoose(i,o),_,$;if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(i);for($=0;$<et.length;$++)_=et[$],!(o.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(i,_)&&(s[_]=i[_])}return s}function _assertThisInitialized(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _possibleConstructorReturn(i,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}function _slicedToArray(i,o){return _arrayWithHoles(i)||_iterableToArrayLimit(i,o)||_unsupportedIterableToArray(i,o)||_nonIterableRest()}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _iterableToArrayLimit(i,o){var s=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(s!=null){var _=[],$=!0,et=!1,tt,j;try{for(s=s.call(i);!($=(tt=s.next()).done)&&(_.push(tt.value),!(o&&_.length===o));$=!0);}catch(it){et=!0,j=it}finally{try{!$&&s.return!=null&&s.return()}finally{if(et)throw j}}return _}}function _unsupportedIterableToArray(i,o){if(i){if(typeof i=="string")return _arrayLikeToArray(i,o);var s=Object.prototype.toString.call(i).slice(8,-1);if(s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set")return Array.from(i);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(i,o)}}function _arrayLikeToArray(i,o){(o==null||o>i.length)&&(o=i.length);for(var s=0,_=new Array(o);s<o;s++)_[s]=i[s];return _}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},InitialDeviceTypes={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkDeviceType=function i(o){switch(o){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};case DeviceTypes.Embedded:return{isEmbedded:!0};default:return InitialDeviceTypes}},setUserAgent=function i(o){return setUa(o)},setDefaults=function i(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return o||s},getNavigatorInstance=function i(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function i(o){var s=getNavigatorInstance();return s&&s.platform&&(s.platform.indexOf(o)!==-1||s.platform==="MacIntel"&&s.maxTouchPoints>1&&!window.MSStream)},browserPayload=function i(o,s,_,$,et){return{isBrowser:o,browserMajorVersion:setDefaults(s.major),browserFullVersion:setDefaults(s.version),browserName:setDefaults(s.name),engineName:setDefaults(_.name),engineVersion:setDefaults(_.version),osName:setDefaults($.name),osVersion:setDefaults($.version),userAgent:setDefaults(et)}},mobilePayload=function i(o,s,_,$){return _objectSpread2({},o,{vendor:setDefaults(s.vendor),model:setDefaults(s.model),os:setDefaults(_.name),osVersion:setDefaults(_.version),ua:setDefaults($)})},smartTvPayload=function i(o,s,_,$){return{isSmartTV:o,engineName:setDefaults(s.name),engineVersion:setDefaults(s.version),osName:setDefaults(_.name),osVersion:setDefaults(_.version),userAgent:setDefaults($)}},consolePayload=function i(o,s,_,$){return{isConsole:o,engineName:setDefaults(s.name),engineVersion:setDefaults(s.version),osName:setDefaults(_.name),osVersion:setDefaults(_.version),userAgent:setDefaults($)}},wearablePayload=function i(o,s,_,$){return{isWearable:o,engineName:setDefaults(s.name),engineVersion:setDefaults(s.version),osName:setDefaults(_.name),osVersion:setDefaults(_.version),userAgent:setDefaults($)}},embeddedPayload=function i(o,s,_,$,et){return{isEmbedded:o,vendor:setDefaults(s.vendor),model:setDefaults(s.model),engineName:setDefaults(_.name),engineVersion:setDefaults(_.version),osName:setDefaults($.name),osVersion:setDefaults($.version),userAgent:setDefaults(et)}};function deviceDetect(i){var o=i?parseUserAgent(i):UAHelper,s=o.device,_=o.browser,$=o.engine,et=o.os,tt=o.ua,j=checkDeviceType(s.type),it=j.isBrowser,st=j.isMobile,ht=j.isTablet,_t=j.isSmartTV,gt=j.isConsole,ft=j.isWearable,ut=j.isEmbedded;if(it)return browserPayload(it,_,$,et,tt);if(_t)return smartTvPayload(_t,$,et,tt);if(gt)return consolePayload(gt,$,et,tt);if(st||ht)return mobilePayload(j,s,et,tt);if(ft)return wearablePayload(ft,$,et,tt);if(ut)return embeddedPayload(ut,s,$,et,tt)}var isMobileType=function i(o){var s=o.type;return s===DeviceTypes.Mobile},isTabletType=function i(o){var s=o.type;return s===DeviceTypes.Tablet},isMobileAndTabletType=function i(o){var s=o.type;return s===DeviceTypes.Mobile||s===DeviceTypes.Tablet},isSmartTVType=function i(o){var s=o.type;return s===DeviceTypes.SmartTv},isBrowserType=function i(o){var s=o.type;return s===DeviceTypes.Browser},isWearableType=function i(o){var s=o.type;return s===DeviceTypes.Wearable},isConsoleType=function i(o){var s=o.type;return s===DeviceTypes.Console},isEmbeddedType=function i(o){var s=o.type;return s===DeviceTypes.Embedded},getMobileVendor=function i(o){var s=o.vendor;return setDefaults(s)},getMobileModel=function i(o){var s=o.model;return setDefaults(s)},getDeviceType=function i(o){var s=o.type;return setDefaults(s,"browser")},isAndroidType=function i(o){var s=o.name;return s===OsTypes.Android},isWindowsType=function i(o){var s=o.name;return s===OsTypes.Windows},isMacOsType=function i(o){var s=o.name;return s===OsTypes.MAC_OS},isWinPhoneType=function i(o){var s=o.name;return s===OsTypes.WindowsPhone},isIOSType=function i(o){var s=o.name;return s===OsTypes.IOS},getOsVersion=function i(o){var s=o.version;return setDefaults(s)},getOsName=function i(o){var s=o.name;return setDefaults(s)},isChromeType=function i(o){var s=o.name;return s===BrowserTypes.Chrome},isFirefoxType=function i(o){var s=o.name;return s===BrowserTypes.Firefox},isChromiumType=function i(o){var s=o.name;return s===BrowserTypes.Chromium},isEdgeType=function i(o){var s=o.name;return s===BrowserTypes.Edge},isYandexType=function i(o){var s=o.name;return s===BrowserTypes.Yandex},isSafariType=function i(o){var s=o.name;return s===BrowserTypes.Safari||s===BrowserTypes.MobileSafari},isMobileSafariType=function i(o){var s=o.name;return s===BrowserTypes.MobileSafari},isOperaType=function i(o){var s=o.name;return s===BrowserTypes.Opera},isIEType=function i(o){var s=o.name;return s===BrowserTypes.InternetExplorer||s===BrowserTypes.Ie},isMIUIType=function i(o){var s=o.name;return s===BrowserTypes.MIUI},isSamsungBrowserType=function i(o){var s=o.name;return s===BrowserTypes.SamsungBrowser},getBrowserFullVersion=function i(o){var s=o.version;return setDefaults(s)},getBrowserVersion=function i(o){var s=o.major;return setDefaults(s)},getBrowserName=function i(o){var s=o.name;return setDefaults(s)},getEngineName=function i(o){var s=o.name;return setDefaults(s)},getEngineVersion=function i(o){var s=o.version;return setDefaults(s)},isElectronType=function i(){var o=getNavigatorInstance(),s=o&&o.userAgent&&o.userAgent.toLowerCase();return typeof s=="string"?/electron/.test(s):!1},isEdgeChromiumType=function i(o){return typeof o=="string"&&o.indexOf("Edg/")!==-1},getIOS13=function i(){var o=getNavigatorInstance();return o&&(/iPad|iPhone|iPod/.test(o.platform)||o.platform==="MacIntel"&&o.maxTouchPoints>1)&&!window.MSStream},getIPad13=function i(){return isIOS13Check("iPad")},getIphone13=function i(){return isIOS13Check("iPhone")},getIPod13=function i(){return isIOS13Check("iPod")},getUseragent=function i(o){return setDefaults(o)};function buildSelectorsObject(i){var o=i||UAHelper,s=o.device,_=o.browser,$=o.os,et=o.engine,tt=o.ua;return{isSmartTV:isSmartTVType(s),isConsole:isConsoleType(s),isWearable:isWearableType(s),isEmbedded:isEmbeddedType(s),isMobileSafari:isMobileSafariType(_)||getIPad13(),isChromium:isChromiumType(_),isMobile:isMobileAndTabletType(s)||getIPad13(),isMobileOnly:isMobileType(s),isTablet:isTabletType(s)||getIPad13(),isBrowser:isBrowserType(s),isDesktop:isBrowserType(s),isAndroid:isAndroidType($),isWinPhone:isWinPhoneType($),isIOS:isIOSType($)||getIPad13(),isChrome:isChromeType(_),isFirefox:isFirefoxType(_),isSafari:isSafariType(_),isOpera:isOperaType(_),isIE:isIEType(_),osVersion:getOsVersion($),osName:getOsName($),fullBrowserVersion:getBrowserFullVersion(_),browserVersion:getBrowserVersion(_),browserName:getBrowserName(_),mobileVendor:getMobileVendor(s),mobileModel:getMobileModel(s),engineName:getEngineName(et),engineVersion:getEngineVersion(et),getUA:getUseragent(tt),isEdge:isEdgeType(_)||isEdgeChromiumType(tt),isYandex:isYandexType(_),deviceType:getDeviceType(s),isIOS13:getIOS13(),isIPad13:getIPad13(),isIPhone13:getIphone13(),isIPod13:getIPod13(),isElectron:isElectronType(),isEdgeChromium:isEdgeChromiumType(tt),isLegacyEdge:isEdgeType(_)&&!isEdgeChromiumType(tt),isWindows:isWindowsType($),isMacOs:isMacOsType($),isMIUI:isMIUIType(_),isSamsungBrowser:isSamsungBrowserType(_)}}var isSmartTV=isSmartTVType(device),isConsole=isConsoleType(device),isWearable=isWearableType(device),isEmbedded=isEmbeddedType(device),isMobileSafari=isMobileSafariType(browser)||getIPad13(),isChromium=isChromiumType(browser),isMobile=isMobileAndTabletType(device)||getIPad13(),isMobileOnly=isMobileType(device),isTablet=isTabletType(device)||getIPad13(),isBrowser=isBrowserType(device),isDesktop=isBrowserType(device),isAndroid=isAndroidType(os),isWinPhone=isWinPhoneType(os),isIOS=isIOSType(os)||getIPad13(),isChrome=isChromeType(browser),isFirefox=isFirefoxType(browser),isSafari=isSafariType(browser),isOpera=isOperaType(browser),isIE=isIEType(browser),osVersion=getOsVersion(os),osName=getOsName(os),fullBrowserVersion=getBrowserFullVersion(browser),browserVersion=getBrowserVersion(browser),browserName=getBrowserName(browser),mobileVendor=getMobileVendor(device),mobileModel=getMobileModel(device),engineName=getEngineName(engine),engineVersion=getEngineVersion(engine),getUA=getUseragent(ua),isEdge=isEdgeType(browser)||isEdgeChromiumType(ua),isYandex=isYandexType(browser),deviceType=getDeviceType(device),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(ua),isLegacyEdge=isEdgeType(browser)&&!isEdgeChromiumType(ua),isWindows=isWindowsType(os),isMacOs=isMacOsType(os),isMIUI=isMIUIType(browser),isSamsungBrowser=isSamsungBrowserType(browser),getSelectorsByUserAgent=function i(o){if(!o||typeof o!="string"){console.error("No valid user agent string was provided");return}var s=parseUserAgent(o),_=s.device,$=s.browser,et=s.os,tt=s.engine,j=s.ua;return buildSelectorsObject({device:_,browser:$,os:et,engine:tt,ua:j})},AndroidView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isAndroid?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},BrowserView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isBrowser?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},IEView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIE?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},IOSView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIOS?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},MobileView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isMobile?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},TabletView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isTablet?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},WinPhoneView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWinPhone?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},MobileOnlyView=function i(o){var s=o.renderWithFragment,_=o.children;o.viewClassName,o.style;var $=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},SmartTVView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isSmartTV?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},ConsoleView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isConsole?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},WearableView=function i(o){var s=o.renderWithFragment,_=o.children,$=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWearable?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",$,_):null},CustomView=function i(o){var s=o.renderWithFragment,_=o.children;o.viewClassName,o.style;var $=o.condition,et=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style","condition"]);return $?s?React__default.createElement(React.Fragment,null,_):React__default.createElement("div",et,_):null};function withOrientationChange(i){return function(o){_inherits(s,o);function s(_){var $;return _classCallCheck(this,s),$=_possibleConstructorReturn(this,_getPrototypeOf(s).call(this,_)),$.isEventListenerAdded=!1,$.handleOrientationChange=$.handleOrientationChange.bind(_assertThisInitialized($)),$.onOrientationChange=$.onOrientationChange.bind(_assertThisInitialized($)),$.onPageLoad=$.onPageLoad.bind(_assertThisInitialized($)),$.state={isLandscape:!1,isPortrait:!1},$}return _createClass(s,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var $=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:$===0,isLandscape:$===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(i,_extends({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),s}(React__default.Component)}function useMobileOrientation(){var i=React.useState(function(){var et=window.innerWidth>window.innerHeight?90:0;return{isPortrait:et===0,isLandscape:et===90,orientation:et===0?"portrait":"landscape"}}),o=_slicedToArray(i,2),s=o[0],_=o[1],$=React.useCallback(function(){var et=window.innerWidth>window.innerHeight?90:0,tt={isPortrait:et===0,isLandscape:et===90,orientation:et===0?"portrait":"landscape"};s.orientation!==tt.orientation&&_(tt)},[s.orientation]);return React.useEffect(function(){return(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&($(),window.addEventListener("load",$,!1),window.addEventListener("resize",$,!1)),function(){window.removeEventListener("resize",$,!1),window.removeEventListener("load",$,!1)}},[$]),s}function useDeviceData(i){var o=i||window.navigator.userAgent;return parseUserAgent(o)}function useDeviceSelectors(i){var o=i||window.navigator.userAgent,s=useDeviceData(o),_=buildSelectorsObject(s);return[_,s]}lib.AndroidView=AndroidView;lib.BrowserTypes=BrowserTypes;lib.BrowserView=BrowserView;lib.ConsoleView=ConsoleView;lib.CustomView=CustomView;lib.IEView=IEView;lib.IOSView=IOSView;lib.MobileOnlyView=MobileOnlyView;lib.MobileView=MobileView;lib.OsTypes=OsTypes;lib.SmartTVView=SmartTVView;lib.TabletView=TabletView;lib.WearableView=WearableView;lib.WinPhoneView=WinPhoneView;lib.browserName=browserName;lib.browserVersion=browserVersion;lib.deviceDetect=deviceDetect;lib.deviceType=deviceType;lib.engineName=engineName;lib.engineVersion=engineVersion;lib.fullBrowserVersion=fullBrowserVersion;lib.getSelectorsByUserAgent=getSelectorsByUserAgent;lib.getUA=getUA;lib.isAndroid=isAndroid;lib.isBrowser=isBrowser;lib.isChrome=isChrome;lib.isChromium=isChromium;lib.isConsole=isConsole;lib.isDesktop=isDesktop;lib.isEdge=isEdge;lib.isEdgeChromium=isEdgeChromium;lib.isElectron=isElectron;lib.isEmbedded=isEmbedded;lib.isFirefox=isFirefox;lib.isIE=isIE;lib.isIOS=isIOS;lib.isIOS13=isIOS13;lib.isIPad13=isIPad13;lib.isIPhone13=isIPhone13;lib.isIPod13=isIPod13;lib.isLegacyEdge=isLegacyEdge;lib.isMIUI=isMIUI;lib.isMacOs=isMacOs;lib.isMobile=isMobile;lib.isMobileOnly=isMobileOnly;lib.isMobileSafari=isMobileSafari;lib.isOpera=isOpera;lib.isSafari=isSafari;lib.isSamsungBrowser=isSamsungBrowser;lib.isSmartTV=isSmartTV;lib.isTablet=isTablet;lib.isWearable=isWearable;lib.isWinPhone=isWinPhone;lib.isWindows=isWindows;lib.isYandex=isYandex;lib.mobileModel=mobileModel;lib.mobileVendor=mobileVendor;lib.osName=osName;lib.osVersion=osVersion;lib.parseUserAgent=parseUserAgent;lib.setUserAgent=setUserAgent;lib.useDeviceData=useDeviceData;lib.useDeviceSelectors=useDeviceSelectors;lib.useMobileOrientation=useMobileOrientation;lib.withOrientationChange=withOrientationChange;/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const requestAnimFrame=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function throttled(i,o,s){const _=s||(tt=>Array.prototype.slice.call(tt));let $=!1,et=[];return function(...tt){et=_(tt),$||($=!0,requestAnimFrame.call(window,()=>{$=!1,i.apply(o,et)}))}}function debounce(i,o){let s;return function(..._){return o?(clearTimeout(s),s=setTimeout(i,o,_)):i.apply(this,_),o}}const _toLeftRightCenter=i=>i==="start"?"left":i==="end"?"right":"center",_alignStartEnd=(i,o,s)=>i==="start"?o:i==="end"?s:(o+s)/2,_textX=(i,o,s,_)=>i===(_?"left":"right")?s:i==="center"?(o+s)/2:o;function noop$1(){}const uid=function(){let i=0;return function(){return i++}}();function isNullOrUndef(i){return i===null||typeof i>"u"}function isArray(i){if(Array.isArray&&Array.isArray(i))return!0;const o=Object.prototype.toString.call(i);return o.substr(0,7)==="[object"&&o.substr(-6)==="Array]"}function isObject(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}const isNumberFinite=i=>(typeof i=="number"||i instanceof Number)&&isFinite(+i);function finiteOrDefault(i,o){return isNumberFinite(i)?i:o}function valueOrDefault(i,o){return typeof i>"u"?o:i}const toPercentage=(i,o)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:i/o,toDimension=(i,o)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*o:+i;function callback(i,o,s){if(i&&typeof i.call=="function")return i.apply(s,o)}function each(i,o,s,_){let $,et,tt;if(isArray(i))if(et=i.length,_)for($=et-1;$>=0;$--)o.call(s,i[$],$);else for($=0;$<et;$++)o.call(s,i[$],$);else if(isObject(i))for(tt=Object.keys(i),et=tt.length,$=0;$<et;$++)o.call(s,i[tt[$]],tt[$])}function _elementsEqual(i,o){let s,_,$,et;if(!i||!o||i.length!==o.length)return!1;for(s=0,_=i.length;s<_;++s)if($=i[s],et=o[s],$.datasetIndex!==et.datasetIndex||$.index!==et.index)return!1;return!0}function clone$1(i){if(isArray(i))return i.map(clone$1);if(isObject(i)){const o=Object.create(null),s=Object.keys(i),_=s.length;let $=0;for(;$<_;++$)o[s[$]]=clone$1(i[s[$]]);return o}return i}function isValidKey(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function _merger(i,o,s,_){if(!isValidKey(i))return;const $=o[i],et=s[i];isObject($)&&isObject(et)?merge($,et,_):o[i]=clone$1(et)}function merge(i,o,s){const _=isArray(o)?o:[o],$=_.length;if(!isObject(i))return i;s=s||{};const et=s.merger||_merger;for(let tt=0;tt<$;++tt){if(o=_[tt],!isObject(o))continue;const j=Object.keys(o);for(let it=0,st=j.length;it<st;++it)et(j[it],i,o,s)}return i}function mergeIf(i,o){return merge(i,o,{merger:_mergerIf})}function _mergerIf(i,o,s){if(!isValidKey(i))return;const _=o[i],$=s[i];isObject(_)&&isObject($)?mergeIf(_,$):Object.prototype.hasOwnProperty.call(o,i)||(o[i]=clone$1($))}const emptyString="",dot=".";function indexOfDotOrLength(i,o){const s=i.indexOf(dot,o);return s===-1?i.length:s}function resolveObjectKey(i,o){if(o===emptyString)return i;let s=0,_=indexOfDotOrLength(o,s);for(;i&&_>s;)i=i[o.substr(s,_-s)],s=_+1,_=indexOfDotOrLength(o,s);return i}function _capitalize(i){return i.charAt(0).toUpperCase()+i.slice(1)}const defined$2=i=>typeof i<"u",isFunction=i=>typeof i=="function",setsEqual=(i,o)=>{if(i.size!==o.size)return!1;for(const s of i)if(!o.has(s))return!1;return!0};function _isClickEvent(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function niceNum(i){const o=Math.round(i);i=almostEquals(i,o,i/1e3)?o:i;const s=Math.pow(10,Math.floor(log10(i))),_=i/s;return(_<=1?1:_<=2?2:_<=5?5:10)*s}function _factorize(i){const o=[],s=Math.sqrt(i);let _;for(_=1;_<s;_++)i%_===0&&(o.push(_),o.push(i/_));return s===(s|0)&&o.push(s),o.sort(($,et)=>$-et).pop(),o}function isNumber(i){return!isNaN(parseFloat(i))&&isFinite(i)}function almostEquals(i,o,s){return Math.abs(i-o)<s}function almostWhole(i,o){const s=Math.round(i);return s-o<=i&&s+o>=i}function _setMinAndMaxByKey(i,o,s){let _,$,et;for(_=0,$=i.length;_<$;_++)et=i[_][s],isNaN(et)||(o.min=Math.min(o.min,et),o.max=Math.max(o.max,et))}function toRadians(i){return i*(PI/180)}function toDegrees(i){return i*(180/PI)}function _decimalPlaces(i){if(!isNumberFinite(i))return;let o=1,s=0;for(;Math.round(i*o)/o!==i;)o*=10,s++;return s}function getAngleFromPoint(i,o){const s=o.x-i.x,_=o.y-i.y,$=Math.sqrt(s*s+_*_);let et=Math.atan2(_,s);return et<-.5*PI&&(et+=TAU),{angle:et,distance:$}}function distanceBetweenPoints(i,o){return Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))}function _angleDiff(i,o){return(i-o+PITAU)%TAU-PI}function _normalizeAngle(i){return(i%TAU+TAU)%TAU}function _angleBetween(i,o,s,_){const $=_normalizeAngle(i),et=_normalizeAngle(o),tt=_normalizeAngle(s),j=_normalizeAngle(et-$),it=_normalizeAngle(tt-$),st=_normalizeAngle($-et),ht=_normalizeAngle($-tt);return $===et||$===tt||_&&et===tt||j>it&&st<ht}function _limitValue(i,o,s){return Math.max(o,Math.min(s,i))}function _int16Range(i){return _limitValue(i,-32768,32767)}function _isBetween(i,o,s,_=1e-6){return i>=Math.min(o,s)-_&&i<=Math.max(o,s)+_}const atEdge=i=>i===0||i===1,elasticIn=(i,o,s)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-o)*TAU/s)),elasticOut=(i,o,s)=>Math.pow(2,-10*i)*Math.sin((i-o)*TAU/s)+1,effects={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*HALF_PI)+1,easeOutSine:i=>Math.sin(i*HALF_PI),easeInOutSine:i=>-.5*(Math.cos(PI*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>atEdge(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>atEdge(i)?i:elasticIn(i,.075,.3),easeOutElastic:i=>atEdge(i)?i:elasticOut(i,.075,.3),easeInOutElastic(i){return atEdge(i)?i:i<.5?.5*elasticIn(i*2,.1125,.45):.5+.5*elasticOut(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let o=1.70158;return(i/=.5)<1?.5*(i*i*(((o*=1.525)+1)*i-o)):.5*((i-=2)*i*(((o*=1.525)+1)*i+o)+2)},easeInBounce:i=>1-effects.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?effects.easeInBounce(i*2)*.5:effects.easeOutBounce(i*2-1)*.5+.5};/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex="0123456789ABCDEF",h1=i=>hex[i&15],h2=i=>hex[(i&240)>>4]+hex[i&15],eq=i=>(i&240)>>4===(i&15);function isShort(i){return eq(i.r)&&eq(i.g)&&eq(i.b)&&eq(i.a)}function hexParse(i){var o=i.length,s;return i[0]==="#"&&(o===4||o===5?s={r:255&map$1[i[1]]*17,g:255&map$1[i[2]]*17,b:255&map$1[i[3]]*17,a:o===5?map$1[i[4]]*17:255}:(o===7||o===9)&&(s={r:map$1[i[1]]<<4|map$1[i[2]],g:map$1[i[3]]<<4|map$1[i[4]],b:map$1[i[5]]<<4|map$1[i[6]],a:o===9?map$1[i[7]]<<4|map$1[i[8]]:255})),s}function hexString(i){var o=isShort(i)?h1:h2;return i&&"#"+o(i.r)+o(i.g)+o(i.b)+(i.a<255?o(i.a):"")}function round(i){return i+.5|0}const lim=(i,o,s)=>Math.max(Math.min(i,s),o);function p2b(i){return lim(round(i*2.55),0,255)}function n2b(i){return lim(round(i*255),0,255)}function b2n(i){return lim(round(i/2.55)/100,0,1)}function n2p(i){return lim(round(i*100),0,100)}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(i){const o=RGB_RE.exec(i);let s=255,_,$,et;if(o){if(o[7]!==_){const tt=+o[7];s=255&(o[8]?p2b(tt):tt*255)}return _=+o[1],$=+o[3],et=+o[5],_=255&(o[2]?p2b(_):_),$=255&(o[4]?p2b($):$),et=255&(o[6]?p2b(et):et),{r:_,g:$,b:et,a:s}}}function rgbString(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${b2n(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(i,o,s){const _=o*Math.min(s,1-s),$=(et,tt=(et+i/30)%12)=>s-_*Math.max(Math.min(tt-3,9-tt,1),-1);return[$(0),$(8),$(4)]}function hsv2rgbn(i,o,s){const _=($,et=($+i/60)%6)=>s-s*o*Math.max(Math.min(et,4-et,1),0);return[_(5),_(3),_(1)]}function hwb2rgbn(i,o,s){const _=hsl2rgbn(i,1,.5);let $;for(o+s>1&&($=1/(o+s),o*=$,s*=$),$=0;$<3;$++)_[$]*=1-o-s,_[$]+=o;return _}function rgb2hsl(i){const s=i.r/255,_=i.g/255,$=i.b/255,et=Math.max(s,_,$),tt=Math.min(s,_,$),j=(et+tt)/2;let it,st,ht;return et!==tt&&(ht=et-tt,st=j>.5?ht/(2-et-tt):ht/(et+tt),it=et===s?(_-$)/ht+(_<$?6:0):et===_?($-s)/ht+2:(s-_)/ht+4,it=it*60+.5),[it|0,st||0,j]}function calln(i,o,s,_){return(Array.isArray(o)?i(o[0],o[1],o[2]):i(o,s,_)).map(n2b)}function hsl2rgb(i,o,s){return calln(hsl2rgbn,i,o,s)}function hwb2rgb(i,o,s){return calln(hwb2rgbn,i,o,s)}function hsv2rgb(i,o,s){return calln(hsv2rgbn,i,o,s)}function hue(i){return(i%360+360)%360}function hueParse(i){const o=HUE_RE.exec(i);let s=255,_;if(!o)return;o[5]!==_&&(s=o[6]?p2b(+o[5]):n2b(+o[5]));const $=hue(+o[2]),et=+o[3]/100,tt=+o[4]/100;return o[1]==="hwb"?_=hwb2rgb($,et,tt):o[1]==="hsv"?_=hsv2rgb($,et,tt):_=hsl2rgb($,et,tt),{r:_[0],g:_[1],b:_[2],a:s}}function rotate(i,o){var s=rgb2hsl(i);s[0]=hue(s[0]+o),s=hsl2rgb(s),i.r=s[0],i.g=s[1],i.b=s[2]}function hslString(i){if(!i)return;const o=rgb2hsl(i),s=o[0],_=n2p(o[1]),$=n2p(o[2]);return i.a<255?`hsla(${s}, ${_}%, ${$}%, ${b2n(i.a)})`:`hsl(${s}, ${_}%, ${$}%)`}const map$1$1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const i={},o=Object.keys(names),s=Object.keys(map$1$1);let _,$,et,tt,j;for(_=0;_<o.length;_++){for(tt=j=o[_],$=0;$<s.length;$++)et=s[$],j=j.replace(et,map$1$1[et]);et=parseInt(names[tt],16),i[j]=[et>>16&255,et>>8&255,et&255]}return i}let names$1;function nameParse(i){names$1||(names$1=unpack(),names$1.transparent=[0,0,0,0]);const o=names$1[i.toLowerCase()];return o&&{r:o[0],g:o[1],b:o[2],a:o.length===4?o[3]:255}}function modHSL(i,o,s){if(i){let _=rgb2hsl(i);_[o]=Math.max(0,Math.min(_[o]+_[o]*s,o===0?360:1)),_=hsl2rgb(_),i.r=_[0],i.g=_[1],i.b=_[2]}}function clone(i,o){return i&&Object.assign(o||{},i)}function fromObject(i){var o={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(o={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(o.a=n2b(i[3]))):(o=clone(i,{r:0,g:0,b:0,a:1}),o.a=n2b(o.a)),o}function functionParse(i){return i.charAt(0)==="r"?rgbParse(i):hueParse(i)}class Color{constructor(o){if(o instanceof Color)return o;const s=typeof o;let _;s==="object"?_=fromObject(o):s==="string"&&(_=hexParse(o)||nameParse(o)||functionParse(o)),this._rgb=_,this._valid=!!_}get valid(){return this._valid}get rgb(){var o=clone(this._rgb);return o&&(o.a=b2n(o.a)),o}set rgb(o){this._rgb=fromObject(o)}rgbString(){return this._valid?rgbString(this._rgb):this._rgb}hexString(){return this._valid?hexString(this._rgb):this._rgb}hslString(){return this._valid?hslString(this._rgb):this._rgb}mix(o,s){const _=this;if(o){const $=_.rgb,et=o.rgb;let tt;const j=s===tt?.5:s,it=2*j-1,st=$.a-et.a,ht=((it*st===-1?it:(it+st)/(1+it*st))+1)/2;tt=1-ht,$.r=255&ht*$.r+tt*et.r+.5,$.g=255&ht*$.g+tt*et.g+.5,$.b=255&ht*$.b+tt*et.b+.5,$.a=j*$.a+(1-j)*et.a,_.rgb=$}return _}clone(){return new Color(this.rgb)}alpha(o){return this._rgb.a=n2b(o),this}clearer(o){const s=this._rgb;return s.a*=1-o,this}greyscale(){const o=this._rgb,s=round(o.r*.3+o.g*.59+o.b*.11);return o.r=o.g=o.b=s,this}opaquer(o){const s=this._rgb;return s.a*=1+o,this}negate(){const o=this._rgb;return o.r=255-o.r,o.g=255-o.g,o.b=255-o.b,this}lighten(o){return modHSL(this._rgb,2,o),this}darken(o){return modHSL(this._rgb,2,-o),this}saturate(o){return modHSL(this._rgb,1,o),this}desaturate(o){return modHSL(this._rgb,1,-o),this}rotate(o){return rotate(this._rgb,o),this}}function index_esm(i){return new Color(i)}const isPatternOrGradient=i=>i instanceof CanvasGradient||i instanceof CanvasPattern;function color(i){return isPatternOrGradient(i)?i:index_esm(i)}function getHoverColor(i){return isPatternOrGradient(i)?i:index_esm(i).saturate(.5).darken(.1).hexString()}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(i,o){if(!o)return i;const s=o.split(".");for(let _=0,$=s.length;_<$;++_){const et=s[_];i=i[et]||(i[et]=Object.create(null))}return i}function set(i,o,s){return typeof o=="string"?merge(getScope$1(i,o),s):merge(getScope$1(i,""),o)}class Defaults{constructor(o){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,_)=>getHoverColor(_.backgroundColor),this.hoverBorderColor=(s,_)=>getHoverColor(_.borderColor),this.hoverColor=(s,_)=>getHoverColor(_.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(o)}set(o,s){return set(this,o,s)}get(o){return getScope$1(this,o)}describe(o,s){return set(descriptors,o,s)}override(o,s){return set(overrides,o,s)}route(o,s,_,$){const et=getScope$1(this,o),tt=getScope$1(this,_),j="_"+s;Object.defineProperties(et,{[j]:{value:et[s],writable:!0},[s]:{enumerable:!0,get(){const it=this[j],st=tt[$];return isObject(it)?Object.assign({},st,it):valueOrDefault(it,st)},set(it){this[j]=it}}})}}var defaults=new Defaults({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function toFontString(i){return!i||isNullOrUndef(i.size)||isNullOrUndef(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function _measureText(i,o,s,_,$){let et=o[$];return et||(et=o[$]=i.measureText($).width,s.push($)),et>_&&(_=et),_}function _longestText(i,o,s,_){_=_||{};let $=_.data=_.data||{},et=_.garbageCollect=_.garbageCollect||[];_.font!==o&&($=_.data={},et=_.garbageCollect=[],_.font=o),i.save(),i.font=o;let tt=0;const j=s.length;let it,st,ht,_t,gt;for(it=0;it<j;it++)if(_t=s[it],_t!=null&&isArray(_t)!==!0)tt=_measureText(i,$,et,tt,_t);else if(isArray(_t))for(st=0,ht=_t.length;st<ht;st++)gt=_t[st],gt!=null&&!isArray(gt)&&(tt=_measureText(i,$,et,tt,gt));i.restore();const ft=et.length/2;if(ft>s.length){for(it=0;it<ft;it++)delete $[et[it]];et.splice(0,ft)}return tt}function _alignPixel(i,o,s){const _=i.currentDevicePixelRatio,$=s!==0?Math.max(s/2,.5):0;return Math.round((o-$)*_)/_+$}function clearCanvas(i,o){o=o||i.getContext("2d"),o.save(),o.resetTransform(),o.clearRect(0,0,i.width,i.height),o.restore()}function drawPoint(i,o,s,_){let $,et,tt,j,it;const st=o.pointStyle,ht=o.rotation,_t=o.radius;let gt=(ht||0)*RAD_PER_DEG;if(st&&typeof st=="object"&&($=st.toString(),$==="[object HTMLImageElement]"||$==="[object HTMLCanvasElement]")){i.save(),i.translate(s,_),i.rotate(gt),i.drawImage(st,-st.width/2,-st.height/2,st.width,st.height),i.restore();return}if(!(isNaN(_t)||_t<=0)){switch(i.beginPath(),st){default:i.arc(s,_,_t,0,TAU),i.closePath();break;case"triangle":i.moveTo(s+Math.sin(gt)*_t,_-Math.cos(gt)*_t),gt+=TWO_THIRDS_PI,i.lineTo(s+Math.sin(gt)*_t,_-Math.cos(gt)*_t),gt+=TWO_THIRDS_PI,i.lineTo(s+Math.sin(gt)*_t,_-Math.cos(gt)*_t),i.closePath();break;case"rectRounded":it=_t*.516,j=_t-it,et=Math.cos(gt+QUARTER_PI)*j,tt=Math.sin(gt+QUARTER_PI)*j,i.arc(s-et,_-tt,it,gt-PI,gt-HALF_PI),i.arc(s+tt,_-et,it,gt-HALF_PI,gt),i.arc(s+et,_+tt,it,gt,gt+HALF_PI),i.arc(s-tt,_+et,it,gt+HALF_PI,gt+PI),i.closePath();break;case"rect":if(!ht){j=Math.SQRT1_2*_t,i.rect(s-j,_-j,2*j,2*j);break}gt+=QUARTER_PI;case"rectRot":et=Math.cos(gt)*_t,tt=Math.sin(gt)*_t,i.moveTo(s-et,_-tt),i.lineTo(s+tt,_-et),i.lineTo(s+et,_+tt),i.lineTo(s-tt,_+et),i.closePath();break;case"crossRot":gt+=QUARTER_PI;case"cross":et=Math.cos(gt)*_t,tt=Math.sin(gt)*_t,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt),i.moveTo(s+tt,_-et),i.lineTo(s-tt,_+et);break;case"star":et=Math.cos(gt)*_t,tt=Math.sin(gt)*_t,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt),i.moveTo(s+tt,_-et),i.lineTo(s-tt,_+et),gt+=QUARTER_PI,et=Math.cos(gt)*_t,tt=Math.sin(gt)*_t,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt),i.moveTo(s+tt,_-et),i.lineTo(s-tt,_+et);break;case"line":et=Math.cos(gt)*_t,tt=Math.sin(gt)*_t,i.moveTo(s-et,_-tt),i.lineTo(s+et,_+tt);break;case"dash":i.moveTo(s,_),i.lineTo(s+Math.cos(gt)*_t,_+Math.sin(gt)*_t);break}i.fill(),o.borderWidth>0&&i.stroke()}}function _isPointInArea(i,o,s){return s=s||.5,!o||i&&i.x>o.left-s&&i.x<o.right+s&&i.y>o.top-s&&i.y<o.bottom+s}function clipArea(i,o){i.save(),i.beginPath(),i.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),i.clip()}function unclipArea(i){i.restore()}function _steppedLineTo(i,o,s,_,$){if(!o)return i.lineTo(s.x,s.y);if($==="middle"){const et=(o.x+s.x)/2;i.lineTo(et,o.y),i.lineTo(et,s.y)}else $==="after"!=!!_?i.lineTo(o.x,s.y):i.lineTo(s.x,o.y);i.lineTo(s.x,s.y)}function _bezierCurveTo(i,o,s,_){if(!o)return i.lineTo(s.x,s.y);i.bezierCurveTo(_?o.cp1x:o.cp2x,_?o.cp1y:o.cp2y,_?s.cp2x:s.cp1x,_?s.cp2y:s.cp1y,s.x,s.y)}function renderText(i,o,s,_,$,et={}){const tt=isArray(o)?o:[o],j=et.strokeWidth>0&&et.strokeColor!=="";let it,st;for(i.save(),i.font=$.string,setRenderOpts(i,et),it=0;it<tt.length;++it)st=tt[it],j&&(et.strokeColor&&(i.strokeStyle=et.strokeColor),isNullOrUndef(et.strokeWidth)||(i.lineWidth=et.strokeWidth),i.strokeText(st,s,_,et.maxWidth)),i.fillText(st,s,_,et.maxWidth),decorateText(i,s,_,st,et),_+=$.lineHeight;i.restore()}function setRenderOpts(i,o){o.translation&&i.translate(o.translation[0],o.translation[1]),isNullOrUndef(o.rotation)||i.rotate(o.rotation),o.color&&(i.fillStyle=o.color),o.textAlign&&(i.textAlign=o.textAlign),o.textBaseline&&(i.textBaseline=o.textBaseline)}function decorateText(i,o,s,_,$){if($.strikethrough||$.underline){const et=i.measureText(_),tt=o-et.actualBoundingBoxLeft,j=o+et.actualBoundingBoxRight,it=s-et.actualBoundingBoxAscent,st=s+et.actualBoundingBoxDescent,ht=$.strikethrough?(it+st)/2:st;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=$.decorationWidth||2,i.moveTo(tt,ht),i.lineTo(j,ht),i.stroke()}}function addRoundedRectPath(i,o){const{x:s,y:_,w:$,h:et,radius:tt}=o;i.arc(s+tt.topLeft,_+tt.topLeft,tt.topLeft,-HALF_PI,PI,!0),i.lineTo(s,_+et-tt.bottomLeft),i.arc(s+tt.bottomLeft,_+et-tt.bottomLeft,tt.bottomLeft,PI,HALF_PI,!0),i.lineTo(s+$-tt.bottomRight,_+et),i.arc(s+$-tt.bottomRight,_+et-tt.bottomRight,tt.bottomRight,HALF_PI,0,!0),i.lineTo(s+$,_+tt.topRight),i.arc(s+$-tt.topRight,_+tt.topRight,tt.topRight,0,-HALF_PI,!0),i.lineTo(s+tt.topLeft,_)}const LINE_HEIGHT=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),FONT_STYLE=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(i,o){const s=(""+i).match(LINE_HEIGHT);if(!s||s[1]==="normal")return o*1.2;switch(i=+s[2],s[3]){case"px":return i;case"%":i/=100;break}return o*i}const numberOrZero=i=>+i||0;function _readValueToProps(i,o){const s={},_=isObject(o),$=_?Object.keys(o):o,et=isObject(i)?_?tt=>valueOrDefault(i[tt],i[o[tt]]):tt=>i[tt]:()=>i;for(const tt of $)s[tt]=numberOrZero(et(tt));return s}function toTRBL(i){return _readValueToProps(i,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(i){return _readValueToProps(i,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(i){const o=toTRBL(i);return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function toFont(i,o){i=i||{},o=o||defaults.font;let s=valueOrDefault(i.size,o.size);typeof s=="string"&&(s=parseInt(s,10));let _=valueOrDefault(i.style,o.style);_&&!(""+_).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+_+'"'),_="");const $={family:valueOrDefault(i.family,o.family),lineHeight:toLineHeight(valueOrDefault(i.lineHeight,o.lineHeight),s),size:s,style:_,weight:valueOrDefault(i.weight,o.weight),string:""};return $.string=toFontString($),$}function resolve(i,o,s,_){let $=!0,et,tt,j;for(et=0,tt=i.length;et<tt;++et)if(j=i[et],j!==void 0&&(o!==void 0&&typeof j=="function"&&(j=j(o),$=!1),s!==void 0&&isArray(j)&&(j=j[s%j.length],$=!1),j!==void 0))return _&&!$&&(_.cacheable=!1),j}function _addGrace(i,o,s){const{min:_,max:$}=i,et=toDimension(o,($-_)/2),tt=(j,it)=>s&&j===0?0:j+it;return{min:tt(_,-Math.abs(et)),max:tt($,et)}}function createContext(i,o){return Object.assign(Object.create(i),o)}function _lookup(i,o,s){s=s||(tt=>i[tt]<o);let _=i.length-1,$=0,et;for(;_-$>1;)et=$+_>>1,s(et)?$=et:_=et;return{lo:$,hi:_}}const _lookupByKey=(i,o,s)=>_lookup(i,s,_=>i[_][o]<s),_rlookupByKey=(i,o,s)=>_lookup(i,s,_=>i[_][o]>=s);function _filterBetween(i,o,s){let _=0,$=i.length;for(;_<$&&i[_]<o;)_++;for(;$>_&&i[$-1]>s;)$--;return _>0||$<i.length?i.slice(_,$):i}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(i,o){if(i._chartjs){i._chartjs.listeners.push(o);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),arrayEvents.forEach(s=>{const _="_onData"+_capitalize(s),$=i[s];Object.defineProperty(i,s,{configurable:!0,enumerable:!1,value(...et){const tt=$.apply(this,et);return i._chartjs.listeners.forEach(j=>{typeof j[_]=="function"&&j[_](...et)}),tt}})})}function unlistenArrayEvents(i,o){const s=i._chartjs;if(!s)return;const _=s.listeners,$=_.indexOf(o);$!==-1&&_.splice($,1),!(_.length>0)&&(arrayEvents.forEach(et=>{delete i[et]}),delete i._chartjs)}function _arrayUnique(i){const o=new Set;let s,_;for(s=0,_=i.length;s<_;++s)o.add(i[s]);return o.size===_?i:Array.from(o)}function _createResolver(i,o=[""],s=i,_,$=()=>i[0]){defined$2(_)||(_=_resolve("_fallback",i));const et={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:_,_getTarget:$,override:tt=>_createResolver([tt,...i],o,s,_)};return new Proxy(et,{deleteProperty(tt,j){return delete tt[j],delete tt._keys,delete i[0][j],!0},get(tt,j){return _cached(tt,j,()=>_resolveWithPrefixes(j,o,i,tt))},getOwnPropertyDescriptor(tt,j){return Reflect.getOwnPropertyDescriptor(tt._scopes[0],j)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(tt,j){return getKeysFromAllScopes(tt).includes(j)},ownKeys(tt){return getKeysFromAllScopes(tt)},set(tt,j,it){const st=tt._storage||(tt._storage=$());return tt[j]=st[j]=it,delete tt._keys,!0}})}function _attachContext(i,o,s,_){const $={_cacheable:!1,_proxy:i,_context:o,_subProxy:s,_stack:new Set,_descriptors:_descriptors(i,_),setContext:et=>_attachContext(i,et,s,_),override:et=>_attachContext(i.override(et),o,s,_)};return new Proxy($,{deleteProperty(et,tt){return delete et[tt],delete i[tt],!0},get(et,tt,j){return _cached(et,tt,()=>_resolveWithContext(et,tt,j))},getOwnPropertyDescriptor(et,tt){return et._descriptors.allKeys?Reflect.has(i,tt)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,tt)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(et,tt){return Reflect.has(i,tt)},ownKeys(){return Reflect.ownKeys(i)},set(et,tt,j){return i[tt]=j,delete et[tt],!0}})}function _descriptors(i,o={scriptable:!0,indexable:!0}){const{_scriptable:s=o.scriptable,_indexable:_=o.indexable,_allKeys:$=o.allKeys}=i;return{allKeys:$,scriptable:s,indexable:_,isScriptable:isFunction(s)?s:()=>s,isIndexable:isFunction(_)?_:()=>_}}const readKey=(i,o)=>i?i+_capitalize(o):o,needsSubResolver=(i,o)=>isObject(o)&&i!=="adapters"&&(Object.getPrototypeOf(o)===null||o.constructor===Object);function _cached(i,o,s){if(Object.prototype.hasOwnProperty.call(i,o))return i[o];const _=s();return i[o]=_,_}function _resolveWithContext(i,o,s){const{_proxy:_,_context:$,_subProxy:et,_descriptors:tt}=i;let j=_[o];return isFunction(j)&&tt.isScriptable(o)&&(j=_resolveScriptable(o,j,i,s)),isArray(j)&&j.length&&(j=_resolveArray(o,j,i,tt.isIndexable)),needsSubResolver(o,j)&&(j=_attachContext(j,$,et&&et[o],tt)),j}function _resolveScriptable(i,o,s,_){const{_proxy:$,_context:et,_subProxy:tt,_stack:j}=s;if(j.has(i))throw new Error("Recursion detected: "+Array.from(j).join("->")+"->"+i);return j.add(i),o=o(et,tt||_),j.delete(i),needsSubResolver(i,o)&&(o=createSubResolver($._scopes,$,i,o)),o}function _resolveArray(i,o,s,_){const{_proxy:$,_context:et,_subProxy:tt,_descriptors:j}=s;if(defined$2(et.index)&&_(i))o=o[et.index%o.length];else if(isObject(o[0])){const it=o,st=$._scopes.filter(ht=>ht!==it);o=[];for(const ht of it){const _t=createSubResolver(st,$,i,ht);o.push(_attachContext(_t,et,tt&&tt[i],j))}}return o}function resolveFallback(i,o,s){return isFunction(i)?i(o,s):i}const getScope=(i,o)=>i===!0?o:typeof i=="string"?resolveObjectKey(o,i):void 0;function addScopes(i,o,s,_,$){for(const et of o){const tt=getScope(s,et);if(tt){i.add(tt);const j=resolveFallback(tt._fallback,s,$);if(defined$2(j)&&j!==s&&j!==_)return j}else if(tt===!1&&defined$2(_)&&s!==_)return null}return!1}function createSubResolver(i,o,s,_){const $=o._rootScopes,et=resolveFallback(o._fallback,s,_),tt=[...i,...$],j=new Set;j.add(_);let it=addScopesFromKey(j,tt,s,et||s,_);return it===null||defined$2(et)&&et!==s&&(it=addScopesFromKey(j,tt,et,it,_),it===null)?!1:_createResolver(Array.from(j),[""],$,et,()=>subGetTarget(o,s,_))}function addScopesFromKey(i,o,s,_,$){for(;s;)s=addScopes(i,o,s,_,$);return s}function subGetTarget(i,o,s){const _=i._getTarget();o in _||(_[o]={});const $=_[o];return isArray($)&&isObject(s)?s:$}function _resolveWithPrefixes(i,o,s,_){let $;for(const et of o)if($=_resolve(readKey(et,i),s),defined$2($))return needsSubResolver(i,$)?createSubResolver(s,_,i,$):$}function _resolve(i,o){for(const s of o){if(!s)continue;const _=s[i];if(defined$2(_))return _}}function getKeysFromAllScopes(i){let o=i._keys;return o||(o=i._keys=resolveKeysFromAllScopes(i._scopes)),o}function resolveKeysFromAllScopes(i){const o=new Set;for(const s of i)for(const _ of Object.keys(s).filter($=>!$.startsWith("_")))o.add(_);return Array.from(o)}const EPSILON=Number.EPSILON||1e-14,getPoint=(i,o)=>o<i.length&&!i[o].skip&&i[o],getValueAxis=i=>i==="x"?"y":"x";function splineCurve(i,o,s,_){const $=i.skip?o:i,et=o,tt=s.skip?o:s,j=distanceBetweenPoints(et,$),it=distanceBetweenPoints(tt,et);let st=j/(j+it),ht=it/(j+it);st=isNaN(st)?0:st,ht=isNaN(ht)?0:ht;const _t=_*st,gt=_*ht;return{previous:{x:et.x-_t*(tt.x-$.x),y:et.y-_t*(tt.y-$.y)},next:{x:et.x+gt*(tt.x-$.x),y:et.y+gt*(tt.y-$.y)}}}function monotoneAdjust(i,o,s){const _=i.length;let $,et,tt,j,it,st=getPoint(i,0);for(let ht=0;ht<_-1;++ht)if(it=st,st=getPoint(i,ht+1),!(!it||!st)){if(almostEquals(o[ht],0,EPSILON)){s[ht]=s[ht+1]=0;continue}$=s[ht]/o[ht],et=s[ht+1]/o[ht],j=Math.pow($,2)+Math.pow(et,2),!(j<=9)&&(tt=3/Math.sqrt(j),s[ht]=$*tt*o[ht],s[ht+1]=et*tt*o[ht])}}function monotoneCompute(i,o,s="x"){const _=getValueAxis(s),$=i.length;let et,tt,j,it=getPoint(i,0);for(let st=0;st<$;++st){if(tt=j,j=it,it=getPoint(i,st+1),!j)continue;const ht=j[s],_t=j[_];tt&&(et=(ht-tt[s])/3,j[`cp1${s}`]=ht-et,j[`cp1${_}`]=_t-et*o[st]),it&&(et=(it[s]-ht)/3,j[`cp2${s}`]=ht+et,j[`cp2${_}`]=_t+et*o[st])}}function splineCurveMonotone(i,o="x"){const s=getValueAxis(o),_=i.length,$=Array(_).fill(0),et=Array(_);let tt,j,it,st=getPoint(i,0);for(tt=0;tt<_;++tt)if(j=it,it=st,st=getPoint(i,tt+1),!!it){if(st){const ht=st[o]-it[o];$[tt]=ht!==0?(st[s]-it[s])/ht:0}et[tt]=j?st?sign($[tt-1])!==sign($[tt])?0:($[tt-1]+$[tt])/2:$[tt-1]:$[tt]}monotoneAdjust(i,$,et),monotoneCompute(i,et,o)}function capControlPoint(i,o,s){return Math.max(Math.min(i,s),o)}function capBezierPoints(i,o){let s,_,$,et,tt,j=_isPointInArea(i[0],o);for(s=0,_=i.length;s<_;++s)tt=et,et=j,j=s<_-1&&_isPointInArea(i[s+1],o),et&&($=i[s],tt&&($.cp1x=capControlPoint($.cp1x,o.left,o.right),$.cp1y=capControlPoint($.cp1y,o.top,o.bottom)),j&&($.cp2x=capControlPoint($.cp2x,o.left,o.right),$.cp2y=capControlPoint($.cp2y,o.top,o.bottom)))}function _updateBezierControlPoints(i,o,s,_,$){let et,tt,j,it;if(o.spanGaps&&(i=i.filter(st=>!st.skip)),o.cubicInterpolationMode==="monotone")splineCurveMonotone(i,$);else{let st=_?i[i.length-1]:i[0];for(et=0,tt=i.length;et<tt;++et)j=i[et],it=splineCurve(st,j,i[Math.min(et+1,tt-(_?0:1))%tt],o.tension),j.cp1x=it.previous.x,j.cp1y=it.previous.y,j.cp2x=it.next.x,j.cp2y=it.next.y,st=j}o.capBezierPoints&&capBezierPoints(i,s)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(i){let o=i.parentNode;return o&&o.toString()==="[object ShadowRoot]"&&(o=o.host),o}function parseMaxStyle(i,o,s){let _;return typeof i=="string"?(_=parseInt(i,10),i.indexOf("%")!==-1&&(_=_/100*o.parentNode[s])):_=i,_}const getComputedStyle=i=>window.getComputedStyle(i,null);function getStyle(i,o){return getComputedStyle(i).getPropertyValue(o)}const positions=["top","right","bottom","left"];function getPositionedStyle(i,o,s){const _={};s=s?"-"+s:"";for(let $=0;$<4;$++){const et=positions[$];_[et]=parseFloat(i[o+"-"+et+s])||0}return _.width=_.left+_.right,_.height=_.top+_.bottom,_}const useOffsetPos=(i,o,s)=>(i>0||o>0)&&(!s||!s.shadowRoot);function getCanvasPosition(i,o){const s=i.native||i,_=s.touches,$=_&&_.length?_[0]:s,{offsetX:et,offsetY:tt}=$;let j=!1,it,st;if(useOffsetPos(et,tt,s.target))it=et,st=tt;else{const ht=o.getBoundingClientRect();it=$.clientX-ht.left,st=$.clientY-ht.top,j=!0}return{x:it,y:st,box:j}}function getRelativePosition$1(i,o){const{canvas:s,currentDevicePixelRatio:_}=o,$=getComputedStyle(s),et=$.boxSizing==="border-box",tt=getPositionedStyle($,"padding"),j=getPositionedStyle($,"border","width"),{x:it,y:st,box:ht}=getCanvasPosition(i,s),_t=tt.left+(ht&&j.left),gt=tt.top+(ht&&j.top);let{width:ft,height:ut}=o;return et&&(ft-=tt.width+j.width,ut-=tt.height+j.height),{x:Math.round((it-_t)/ft*s.width/_),y:Math.round((st-gt)/ut*s.height/_)}}function getContainerSize(i,o,s){let _,$;if(o===void 0||s===void 0){const et=_getParentNode(i);if(!et)o=i.clientWidth,s=i.clientHeight;else{const tt=et.getBoundingClientRect(),j=getComputedStyle(et),it=getPositionedStyle(j,"border","width"),st=getPositionedStyle(j,"padding");o=tt.width-st.width-it.width,s=tt.height-st.height-it.height,_=parseMaxStyle(j.maxWidth,et,"clientWidth"),$=parseMaxStyle(j.maxHeight,et,"clientHeight")}}return{width:o,height:s,maxWidth:_||INFINITY,maxHeight:$||INFINITY}}const round1=i=>Math.round(i*10)/10;function getMaximumSize(i,o,s,_){const $=getComputedStyle(i),et=getPositionedStyle($,"margin"),tt=parseMaxStyle($.maxWidth,i,"clientWidth")||INFINITY,j=parseMaxStyle($.maxHeight,i,"clientHeight")||INFINITY,it=getContainerSize(i,o,s);let{width:st,height:ht}=it;if($.boxSizing==="content-box"){const _t=getPositionedStyle($,"border","width"),gt=getPositionedStyle($,"padding");st-=gt.width+_t.width,ht-=gt.height+_t.height}return st=Math.max(0,st-et.width),ht=Math.max(0,_?Math.floor(st/_):ht-et.height),st=round1(Math.min(st,tt,it.maxWidth)),ht=round1(Math.min(ht,j,it.maxHeight)),st&&!ht&&(ht=round1(st/2)),{width:st,height:ht}}function retinaScale(i,o,s){const _=o||1,$=Math.floor(i.height*_),et=Math.floor(i.width*_);i.height=$/_,i.width=et/_;const tt=i.canvas;return tt.style&&(s||!tt.style.height&&!tt.style.width)&&(tt.style.height=`${i.height}px`,tt.style.width=`${i.width}px`),i.currentDevicePixelRatio!==_||tt.height!==$||tt.width!==et?(i.currentDevicePixelRatio=_,tt.height=$,tt.width=et,i.ctx.setTransform(_,0,0,_,0,0),!0):!1}const supportsEventListenerOptions=function(){let i=!1;try{const o={get passive(){return i=!0,!1}};window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{}return i}();function readUsedSize(i,o){const s=getStyle(i,o),_=s&&s.match(/^(\d+)(\.\d+)?px$/);return _?+_[1]:void 0}function _pointInLine(i,o,s,_){return{x:i.x+s*(o.x-i.x),y:i.y+s*(o.y-i.y)}}function _steppedInterpolation(i,o,s,_){return{x:i.x+s*(o.x-i.x),y:_==="middle"?s<.5?i.y:o.y:_==="after"?s<1?i.y:o.y:s>0?o.y:i.y}}function _bezierInterpolation(i,o,s,_){const $={x:i.cp2x,y:i.cp2y},et={x:o.cp1x,y:o.cp1y},tt=_pointInLine(i,$,s),j=_pointInLine($,et,s),it=_pointInLine(et,o,s),st=_pointInLine(tt,j,s),ht=_pointInLine(j,it,s);return _pointInLine(st,ht,s)}const intlCache=new Map;function getNumberFormat(i,o){o=o||{};const s=i+JSON.stringify(o);let _=intlCache.get(s);return _||(_=new Intl.NumberFormat(i,o),intlCache.set(s,_)),_}function formatNumber(i,o,s){return getNumberFormat(o,s).format(i)}const getRightToLeftAdapter=function(i,o){return{x(s){return i+i+o-s},setWidth(s){o=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,_){return s-_},leftForLtr(s,_){return s-_}}},getLeftToRightAdapter=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,o){return i+o},leftForLtr(i,o){return i}}};function getRtlAdapter(i,o,s){return i?getRightToLeftAdapter(o,s):getLeftToRightAdapter()}function overrideTextDirection(i,o){let s,_;(o==="ltr"||o==="rtl")&&(s=i.canvas.style,_=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",o,"important"),i.prevTextDirection=_)}function restoreTextDirection(i,o){o!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",o[0],o[1]))}function propertyFn(i){return i==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(o,s)=>o-s,normalize:o=>o}}function normalizeSegment({start:i,end:o,count:s,loop:_,style:$}){return{start:i%s,end:o%s,loop:_&&(o-i+1)%s===0,style:$}}function getSegment(i,o,s){const{property:_,start:$,end:et}=s,{between:tt,normalize:j}=propertyFn(_),it=o.length;let{start:st,end:ht,loop:_t}=i,gt,ft;if(_t){for(st+=it,ht+=it,gt=0,ft=it;gt<ft&&tt(j(o[st%it][_]),$,et);++gt)st--,ht--;st%=it,ht%=it}return ht<st&&(ht+=it),{start:st,end:ht,loop:_t,style:i.style}}function _boundSegment(i,o,s){if(!s)return[i];const{property:_,start:$,end:et}=s,tt=o.length,{compare:j,between:it,normalize:st}=propertyFn(_),{start:ht,end:_t,loop:gt,style:ft}=getSegment(i,o,s),ut=[];let yt=!1,Et=null,Mt,Ft,Rt;const Ot=()=>it($,Rt,Mt)&&j($,Rt)!==0,pt=()=>j(et,Mt)===0||it(et,Rt,Mt),Lt=()=>yt||Ot(),nn=()=>!yt||pt();for(let on=ht,wt=ht;on<=_t;++on)Ft=o[on%tt],!Ft.skip&&(Mt=st(Ft[_]),Mt!==Rt&&(yt=it(Mt,$,et),Et===null&&Lt()&&(Et=j(Mt,$)===0?on:wt),Et!==null&&nn()&&(ut.push(normalizeSegment({start:Et,end:on,loop:gt,count:tt,style:ft})),Et=null),wt=on,Rt=Mt));return Et!==null&&ut.push(normalizeSegment({start:Et,end:_t,loop:gt,count:tt,style:ft})),ut}function _boundSegments(i,o){const s=[],_=i.segments;for(let $=0;$<_.length;$++){const et=_boundSegment(_[$],i.points,o);et.length&&s.push(...et)}return s}function findStartAndEnd(i,o,s,_){let $=0,et=o-1;if(s&&!_)for(;$<o&&!i[$].skip;)$++;for(;$<o&&i[$].skip;)$++;for($%=o,s&&(et+=$);et>$&&i[et%o].skip;)et--;return et%=o,{start:$,end:et}}function solidSegments(i,o,s,_){const $=i.length,et=[];let tt=o,j=i[o],it;for(it=o+1;it<=s;++it){const st=i[it%$];st.skip||st.stop?j.skip||(_=!1,et.push({start:o%$,end:(it-1)%$,loop:_}),o=tt=st.stop?it:null):(tt=it,j.skip&&(o=it)),j=st}return tt!==null&&et.push({start:o%$,end:tt%$,loop:_}),et}function _computeSegments(i,o){const s=i.points,_=i.options.spanGaps,$=s.length;if(!$)return[];const et=!!i._loop,{start:tt,end:j}=findStartAndEnd(s,$,et,_);if(_===!0)return splitByStyles(i,[{start:tt,end:j,loop:et}],s,o);const it=j<tt?j+$:j,st=!!i._fullLoop&&tt===0&&j===$-1;return splitByStyles(i,solidSegments(s,tt,it,st),s,o)}function splitByStyles(i,o,s,_){return!_||!_.setContext||!s?o:doSplitByStyles(i,o,s,_)}function doSplitByStyles(i,o,s,_){const $=i._chart.getContext(),et=readStyle(i.options),{_datasetIndex:tt,options:{spanGaps:j}}=i,it=s.length,st=[];let ht=et,_t=o[0].start,gt=_t;function ft(ut,yt,Et,Mt){const Ft=j?-1:1;if(ut!==yt){for(ut+=it;s[ut%it].skip;)ut-=Ft;for(;s[yt%it].skip;)yt+=Ft;ut%it!==yt%it&&(st.push({start:ut%it,end:yt%it,loop:Et,style:Mt}),ht=Mt,_t=yt%it)}}for(const ut of o){_t=j?_t:ut.start;let yt=s[_t%it],Et;for(gt=_t+1;gt<=ut.end;gt++){const Mt=s[gt%it];Et=readStyle(_.setContext(createContext($,{type:"segment",p0:yt,p1:Mt,p0DataIndex:(gt-1)%it,p1DataIndex:gt%it,datasetIndex:tt}))),styleChanged(Et,ht)&&ft(_t,gt-1,ut.loop,ht),yt=Mt,ht=Et}_t<gt-1&&ft(_t,gt-1,ut.loop,ht)}return st}function readStyle(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function styleChanged(i,o){return o&&JSON.stringify(i)!==JSON.stringify(o)}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(o,s,_,$){const et=s.listeners[$],tt=s.duration;et.forEach(j=>j({chart:o,initial:s.initial,numSteps:tt,currentStep:Math.min(_-s.start,tt)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(o=Date.now()){let s=0;this._charts.forEach((_,$)=>{if(!_.running||!_.items.length)return;const et=_.items;let tt=et.length-1,j=!1,it;for(;tt>=0;--tt)it=et[tt],it._active?(it._total>_.duration&&(_.duration=it._total),it.tick(o),j=!0):(et[tt]=et[et.length-1],et.pop());j&&($.draw(),this._notify($,_,o,"progress")),et.length||(_.running=!1,this._notify($,_,o,"complete"),_.initial=!1),s+=et.length}),this._lastDate=o,s===0&&(this._running=!1)}_getAnims(o){const s=this._charts;let _=s.get(o);return _||(_={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(o,_)),_}listen(o,s,_){this._getAnims(o).listeners[s].push(_)}add(o,s){!s||!s.length||this._getAnims(o).items.push(...s)}has(o){return this._getAnims(o).items.length>0}start(o){const s=this._charts.get(o);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((_,$)=>Math.max(_,$._duration),0),this._refresh())}running(o){if(!this._running)return!1;const s=this._charts.get(o);return!(!s||!s.running||!s.items.length)}stop(o){const s=this._charts.get(o);if(!s||!s.items.length)return;const _=s.items;let $=_.length-1;for(;$>=0;--$)_[$].cancel();s.items=[],this._notify(o,s,Date.now(),"complete")}remove(o){return this._charts.delete(o)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(i,o,s){return s>.5?o:i},color(i,o,s){const _=color(i||transparent),$=_.valid&&color(o||transparent);return $&&$.valid?$.mix(_,s).hexString():o},number(i,o,s){return i+(o-i)*s}};class Animation{constructor(o,s,_,$){const et=s[_];$=resolve([o.to,$,et,o.from]);const tt=resolve([o.from,et,$]);this._active=!0,this._fn=o.fn||interpolators[o.type||typeof tt],this._easing=effects[o.easing]||effects.linear,this._start=Math.floor(Date.now()+(o.delay||0)),this._duration=this._total=Math.floor(o.duration),this._loop=!!o.loop,this._target=s,this._prop=_,this._from=tt,this._to=$,this._promises=void 0}active(){return this._active}update(o,s,_){if(this._active){this._notify(!1);const $=this._target[this._prop],et=_-this._start,tt=this._duration-et;this._start=_,this._duration=Math.floor(Math.max(tt,o.duration)),this._total+=et,this._loop=!!o.loop,this._to=resolve([o.to,s,$,o.from]),this._from=resolve([o.from,$,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(o){const s=o-this._start,_=this._duration,$=this._prop,et=this._from,tt=this._loop,j=this._to;let it;if(this._active=et!==j&&(tt||s<_),!this._active){this._target[$]=j,this._notify(!0);return}if(s<0){this._target[$]=et;return}it=s/_%2,it=tt&&it>1?2-it:it,it=this._easing(Math.min(1,Math.max(0,it))),this._target[$]=this._fn(et,j,it)}wait(){const o=this._promises||(this._promises=[]);return new Promise((s,_)=>{o.push({res:s,rej:_})})}_notify(o){const s=o?"res":"rej",_=this._promises||[];for(let $=0;$<_.length;$++)_[$][s]()}}const numbers=["x","y","borderWidth","radius","tension"],colors$1=["color","borderColor","backgroundColor"];defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const animationOptions=Object.keys(defaults.animation);defaults.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>i!=="onProgress"&&i!=="onComplete"&&i!=="fn"});defaults.set("animations",{colors:{type:"color",properties:colors$1},numbers:{type:"number",properties:numbers}});defaults.describe("animations",{_fallback:"animation"});defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>i|0}}}});class Animations{constructor(o,s){this._chart=o,this._properties=new Map,this.configure(s)}configure(o){if(!isObject(o))return;const s=this._properties;Object.getOwnPropertyNames(o).forEach(_=>{const $=o[_];if(!isObject($))return;const et={};for(const tt of animationOptions)et[tt]=$[tt];(isArray($.properties)&&$.properties||[_]).forEach(tt=>{(tt===_||!s.has(tt))&&s.set(tt,et)})})}_animateOptions(o,s){const _=s.options,$=resolveTargetOptions(o,_);if(!$)return[];const et=this._createAnimations($,_);return _.$shared&&awaitAll(o.options.$animations,_).then(()=>{o.options=_},()=>{}),et}_createAnimations(o,s){const _=this._properties,$=[],et=o.$animations||(o.$animations={}),tt=Object.keys(s),j=Date.now();let it;for(it=tt.length-1;it>=0;--it){const st=tt[it];if(st.charAt(0)==="$")continue;if(st==="options"){$.push(...this._animateOptions(o,s));continue}const ht=s[st];let _t=et[st];const gt=_.get(st);if(_t)if(gt&&_t.active()){_t.update(gt,ht,j);continue}else _t.cancel();if(!gt||!gt.duration){o[st]=ht;continue}et[st]=_t=new Animation(gt,o,st,ht),$.push(_t)}return $}update(o,s){if(this._properties.size===0){Object.assign(o,s);return}const _=this._createAnimations(o,s);if(_.length)return animator.add(this._chart,_),!0}}function awaitAll(i,o){const s=[],_=Object.keys(o);for(let $=0;$<_.length;$++){const et=i[_[$]];et&&et.active()&&s.push(et.wait())}return Promise.all(s)}function resolveTargetOptions(i,o){if(!o)return;let s=i.options;if(!s){i.options=o;return}return s.$shared&&(i.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function scaleClip(i,o){const s=i&&i.options||{},_=s.reverse,$=s.min===void 0?o:0,et=s.max===void 0?o:0;return{start:_?et:$,end:_?$:et}}function defaultClip(i,o,s){if(s===!1)return!1;const _=scaleClip(i,s),$=scaleClip(o,s);return{top:$.end,right:_.end,bottom:$.start,left:_.start}}function toClip(i){let o,s,_,$;return isObject(i)?(o=i.top,s=i.right,_=i.bottom,$=i.left):o=s=_=$=i,{top:o,right:s,bottom:_,left:$,disabled:i===!1}}function getSortedDatasetIndices(i,o){const s=[],_=i._getSortedDatasetMetas(o);let $,et;for($=0,et=_.length;$<et;++$)s.push(_[$].index);return s}function applyStack(i,o,s,_={}){const $=i.keys,et=_.mode==="single";let tt,j,it,st;if(o!==null){for(tt=0,j=$.length;tt<j;++tt){if(it=+$[tt],it===s){if(_.all)continue;break}st=i.values[it],isNumberFinite(st)&&(et||o===0||sign(o)===sign(st))&&(o+=st)}return o}}function convertObjectDataToArray(i){const o=Object.keys(i),s=new Array(o.length);let _,$,et;for(_=0,$=o.length;_<$;++_)et=o[_],s[_]={x:et,y:i[et]};return s}function isStacked(i,o){const s=i&&i.options.stacked;return s||s===void 0&&o.stack!==void 0}function getStackKey(i,o,s){return`${i.id}.${o.id}.${s.stack||s.type}`}function getUserBounds(i){const{min:o,max:s,minDefined:_,maxDefined:$}=i.getUserBounds();return{min:_?o:Number.NEGATIVE_INFINITY,max:$?s:Number.POSITIVE_INFINITY}}function getOrCreateStack(i,o,s){const _=i[o]||(i[o]={});return _[s]||(_[s]={})}function getLastIndexInStack(i,o,s,_){for(const $ of o.getMatchingVisibleMetas(_).reverse()){const et=i[$.index];if(s&&et>0||!s&&et<0)return $.index}return null}function updateStacks(i,o){const{chart:s,_cachedMeta:_}=i,$=s._stacks||(s._stacks={}),{iScale:et,vScale:tt,index:j}=_,it=et.axis,st=tt.axis,ht=getStackKey(et,tt,_),_t=o.length;let gt;for(let ft=0;ft<_t;++ft){const ut=o[ft],{[it]:yt,[st]:Et}=ut,Mt=ut._stacks||(ut._stacks={});gt=Mt[st]=getOrCreateStack($,ht,yt),gt[j]=Et,gt._top=getLastIndexInStack(gt,tt,!0,_.type),gt._bottom=getLastIndexInStack(gt,tt,!1,_.type)}}function getFirstScaleId(i,o){const s=i.scales;return Object.keys(s).filter(_=>s[_].axis===o).shift()}function createDatasetContext(i,o){return createContext(i,{active:!1,dataset:void 0,datasetIndex:o,index:o,mode:"default",type:"dataset"})}function createDataContext(i,o,s){return createContext(i,{active:!1,dataIndex:o,parsed:void 0,raw:void 0,element:s,index:o,mode:"default",type:"data"})}function clearStacks(i,o){const s=i.controller.index,_=i.vScale&&i.vScale.axis;if(_){o=o||i._parsed;for(const $ of o){const et=$._stacks;if(!et||et[_]===void 0||et[_][s]===void 0)return;delete et[_][s]}}}const isDirectUpdateMode=i=>i==="reset"||i==="none",cloneIfNotShared=(i,o)=>o?i:Object.assign({},i),createStack=(i,o,s)=>i&&!o.hidden&&o._stacked&&{keys:getSortedDatasetIndices(s,!0),values:null};class DatasetController{constructor(o,s){this.chart=o,this._ctx=o.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const o=this._cachedMeta;this.configure(),this.linkScales(),o._stacked=isStacked(o.vScale,o),this.addElements()}updateIndex(o){this.index!==o&&clearStacks(this._cachedMeta),this.index=o}linkScales(){const o=this.chart,s=this._cachedMeta,_=this.getDataset(),$=(_t,gt,ft,ut)=>_t==="x"?gt:_t==="r"?ut:ft,et=s.xAxisID=valueOrDefault(_.xAxisID,getFirstScaleId(o,"x")),tt=s.yAxisID=valueOrDefault(_.yAxisID,getFirstScaleId(o,"y")),j=s.rAxisID=valueOrDefault(_.rAxisID,getFirstScaleId(o,"r")),it=s.indexAxis,st=s.iAxisID=$(it,et,tt,j),ht=s.vAxisID=$(it,tt,et,j);s.xScale=this.getScaleForId(et),s.yScale=this.getScaleForId(tt),s.rScale=this.getScaleForId(j),s.iScale=this.getScaleForId(st),s.vScale=this.getScaleForId(ht)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(o){return this.chart.scales[o]}_getOtherScale(o){const s=this._cachedMeta;return o===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const o=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),o._stacked&&clearStacks(o)}_dataCheck(){const o=this.getDataset(),s=o.data||(o.data=[]),_=this._data;if(isObject(s))this._data=convertObjectDataToArray(s);else if(_!==s){if(_){unlistenArrayEvents(_,this);const $=this._cachedMeta;clearStacks($),$._parsed=[]}s&&Object.isExtensible(s)&&listenArrayEvents(s,this),this._syncList=[],this._data=s}}addElements(){const o=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(o.dataset=new this.datasetElementType)}buildOrUpdateElements(o){const s=this._cachedMeta,_=this.getDataset();let $=!1;this._dataCheck();const et=s._stacked;s._stacked=isStacked(s.vScale,s),s.stack!==_.stack&&($=!0,clearStacks(s),s.stack=_.stack),this._resyncElements(o),($||et!==s._stacked)&&updateStacks(this,s._parsed)}configure(){const o=this.chart.config,s=o.datasetScopeKeys(this._type),_=o.getOptionScopes(this.getDataset(),s,!0);this.options=o.createResolver(_,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(o,s){const{_cachedMeta:_,_data:$}=this,{iScale:et,_stacked:tt}=_,j=et.axis;let it=o===0&&s===$.length?!0:_._sorted,st=o>0&&_._parsed[o-1],ht,_t,gt;if(this._parsing===!1)_._parsed=$,_._sorted=!0,gt=$;else{isArray($[o])?gt=this.parseArrayData(_,$,o,s):isObject($[o])?gt=this.parseObjectData(_,$,o,s):gt=this.parsePrimitiveData(_,$,o,s);const ft=()=>_t[j]===null||st&&_t[j]<st[j];for(ht=0;ht<s;++ht)_._parsed[ht+o]=_t=gt[ht],it&&(ft()&&(it=!1),st=_t);_._sorted=it}tt&&updateStacks(this,gt)}parsePrimitiveData(o,s,_,$){const{iScale:et,vScale:tt}=o,j=et.axis,it=tt.axis,st=et.getLabels(),ht=et===tt,_t=new Array($);let gt,ft,ut;for(gt=0,ft=$;gt<ft;++gt)ut=gt+_,_t[gt]={[j]:ht||et.parse(st[ut],ut),[it]:tt.parse(s[ut],ut)};return _t}parseArrayData(o,s,_,$){const{xScale:et,yScale:tt}=o,j=new Array($);let it,st,ht,_t;for(it=0,st=$;it<st;++it)ht=it+_,_t=s[ht],j[it]={x:et.parse(_t[0],ht),y:tt.parse(_t[1],ht)};return j}parseObjectData(o,s,_,$){const{xScale:et,yScale:tt}=o,{xAxisKey:j="x",yAxisKey:it="y"}=this._parsing,st=new Array($);let ht,_t,gt,ft;for(ht=0,_t=$;ht<_t;++ht)gt=ht+_,ft=s[gt],st[ht]={x:et.parse(resolveObjectKey(ft,j),gt),y:tt.parse(resolveObjectKey(ft,it),gt)};return st}getParsed(o){return this._cachedMeta._parsed[o]}getDataElement(o){return this._cachedMeta.data[o]}applyStack(o,s,_){const $=this.chart,et=this._cachedMeta,tt=s[o.axis],j={keys:getSortedDatasetIndices($,!0),values:s._stacks[o.axis]};return applyStack(j,tt,et.index,{mode:_})}updateRangeFromParsed(o,s,_,$){const et=_[s.axis];let tt=et===null?NaN:et;const j=$&&_._stacks[s.axis];$&&j&&($.values=j,tt=applyStack($,et,this._cachedMeta.index)),o.min=Math.min(o.min,tt),o.max=Math.max(o.max,tt)}getMinMax(o,s){const _=this._cachedMeta,$=_._parsed,et=_._sorted&&o===_.iScale,tt=$.length,j=this._getOtherScale(o),it=createStack(s,_,this.chart),st={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ht,max:_t}=getUserBounds(j);let gt,ft;function ut(){ft=$[gt];const yt=ft[j.axis];return!isNumberFinite(ft[o.axis])||ht>yt||_t<yt}for(gt=0;gt<tt&&!(!ut()&&(this.updateRangeFromParsed(st,o,ft,it),et));++gt);if(et){for(gt=tt-1;gt>=0;--gt)if(!ut()){this.updateRangeFromParsed(st,o,ft,it);break}}return st}getAllParsedValues(o){const s=this._cachedMeta._parsed,_=[];let $,et,tt;for($=0,et=s.length;$<et;++$)tt=s[$][o.axis],isNumberFinite(tt)&&_.push(tt);return _}getMaxOverflow(){return!1}getLabelAndValue(o){const s=this._cachedMeta,_=s.iScale,$=s.vScale,et=this.getParsed(o);return{label:_?""+_.getLabelForValue(et[_.axis]):"",value:$?""+$.getLabelForValue(et[$.axis]):""}}_update(o){const s=this._cachedMeta;this.update(o||"default"),s._clip=toClip(valueOrDefault(this.options.clip,defaultClip(s.xScale,s.yScale,this.getMaxOverflow())))}update(o){}draw(){const o=this._ctx,s=this.chart,_=this._cachedMeta,$=_.data||[],et=s.chartArea,tt=[],j=this._drawStart||0,it=this._drawCount||$.length-j,st=this.options.drawActiveElementsOnTop;let ht;for(_.dataset&&_.dataset.draw(o,et,j,it),ht=j;ht<j+it;++ht){const _t=$[ht];_t.hidden||(_t.active&&st?tt.push(_t):_t.draw(o,et))}for(ht=0;ht<tt.length;++ht)tt[ht].draw(o,et)}getStyle(o,s){const _=s?"active":"default";return o===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(_):this.resolveDataElementOptions(o||0,_)}getContext(o,s,_){const $=this.getDataset();let et;if(o>=0&&o<this._cachedMeta.data.length){const tt=this._cachedMeta.data[o];et=tt.$context||(tt.$context=createDataContext(this.getContext(),o,tt)),et.parsed=this.getParsed(o),et.raw=$.data[o],et.index=et.dataIndex=o}else et=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),et.dataset=$,et.index=et.datasetIndex=this.index;return et.active=!!s,et.mode=_,et}resolveDatasetElementOptions(o){return this._resolveElementOptions(this.datasetElementType.id,o)}resolveDataElementOptions(o,s){return this._resolveElementOptions(this.dataElementType.id,s,o)}_resolveElementOptions(o,s="default",_){const $=s==="active",et=this._cachedDataOpts,tt=o+"-"+s,j=et[tt],it=this.enableOptionSharing&&defined$2(_);if(j)return cloneIfNotShared(j,it);const st=this.chart.config,ht=st.datasetElementScopeKeys(this._type,o),_t=$?[`${o}Hover`,"hover",o,""]:[o,""],gt=st.getOptionScopes(this.getDataset(),ht),ft=Object.keys(defaults.elements[o]),ut=()=>this.getContext(_,$),yt=st.resolveNamedOptions(gt,ft,ut,_t);return yt.$shared&&(yt.$shared=it,et[tt]=Object.freeze(cloneIfNotShared(yt,it))),yt}_resolveAnimations(o,s,_){const $=this.chart,et=this._cachedDataOpts,tt=`animation-${s}`,j=et[tt];if(j)return j;let it;if($.options.animation!==!1){const ht=this.chart.config,_t=ht.datasetAnimationScopeKeys(this._type,s),gt=ht.getOptionScopes(this.getDataset(),_t);it=ht.createResolver(gt,this.getContext(o,_,s))}const st=new Animations($,it&&it.animations);return it&&it._cacheable&&(et[tt]=Object.freeze(st)),st}getSharedOptions(o){if(o.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},o))}includeOptions(o,s){return!s||isDirectUpdateMode(o)||this.chart._animationsDisabled}updateElement(o,s,_,$){isDirectUpdateMode($)?Object.assign(o,_):this._resolveAnimations(s,$).update(o,_)}updateSharedOptions(o,s,_){o&&!isDirectUpdateMode(s)&&this._resolveAnimations(void 0,s).update(o,_)}_setStyle(o,s,_,$){o.active=$;const et=this.getStyle(s,$);this._resolveAnimations(s,_,$).update(o,{options:!$&&this.getSharedOptions(et)||et})}removeHoverStyle(o,s,_){this._setStyle(o,_,"active",!1)}setHoverStyle(o,s,_){this._setStyle(o,_,"active",!0)}_removeDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!1)}_setDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!0)}_resyncElements(o){const s=this._data,_=this._cachedMeta.data;for(const[j,it,st]of this._syncList)this[j](it,st);this._syncList=[];const $=_.length,et=s.length,tt=Math.min(et,$);tt&&this.parse(0,tt),et>$?this._insertElements($,et-$,o):et<$&&this._removeElements(et,$-et)}_insertElements(o,s,_=!0){const $=this._cachedMeta,et=$.data,tt=o+s;let j;const it=st=>{for(st.length+=s,j=st.length-1;j>=tt;j--)st[j]=st[j-s]};for(it(et),j=o;j<tt;++j)et[j]=new this.dataElementType;this._parsing&&it($._parsed),this.parse(o,s),_&&this.updateElements(et,o,s,"reset")}updateElements(o,s,_,$){}_removeElements(o,s){const _=this._cachedMeta;if(this._parsing){const $=_._parsed.splice(o,s);_._stacked&&clearStacks(_,$)}_.data.splice(o,s)}_sync(o){if(this._parsing)this._syncList.push(o);else{const[s,_,$]=o;this[s](_,$)}this.chart._dataChanges.push([this.index,...o])}_onDataPush(){const o=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-o,o])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(o,s){s&&this._sync(["_removeElements",o,s]);const _=arguments.length-2;_&&this._sync(["_insertElements",o,_])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}DatasetController.defaults={};DatasetController.prototype.datasetElementType=null;DatasetController.prototype.dataElementType=null;function getAllScaleValues(i,o){if(!i._cache.$bar){const s=i.getMatchingVisibleMetas(o);let _=[];for(let $=0,et=s.length;$<et;$++)_=_.concat(s[$].controller.getAllParsedValues(i));i._cache.$bar=_arrayUnique(_.sort(($,et)=>$-et))}return i._cache.$bar}function computeMinSampleSize(i){const o=i.iScale,s=getAllScaleValues(o,i.type);let _=o._length,$,et,tt,j;const it=()=>{tt===32767||tt===-32768||(defined$2(j)&&(_=Math.min(_,Math.abs(tt-j)||_)),j=tt)};for($=0,et=s.length;$<et;++$)tt=o.getPixelForValue(s[$]),it();for(j=void 0,$=0,et=o.ticks.length;$<et;++$)tt=o.getPixelForTick($),it();return _}function computeFitCategoryTraits(i,o,s,_){const $=s.barThickness;let et,tt;return isNullOrUndef($)?(et=o.min*s.categoryPercentage,tt=s.barPercentage):(et=$*_,tt=1),{chunk:et/_,ratio:tt,start:o.pixels[i]-et/2}}function computeFlexCategoryTraits(i,o,s,_){const $=o.pixels,et=$[i];let tt=i>0?$[i-1]:null,j=i<$.length-1?$[i+1]:null;const it=s.categoryPercentage;tt===null&&(tt=et-(j===null?o.end-o.start:j-et)),j===null&&(j=et+et-tt);const st=et-(et-Math.min(tt,j))/2*it;return{chunk:Math.abs(j-tt)/2*it/_,ratio:s.barPercentage,start:st}}function parseFloatBar(i,o,s,_){const $=s.parse(i[0],_),et=s.parse(i[1],_),tt=Math.min($,et),j=Math.max($,et);let it=tt,st=j;Math.abs(tt)>Math.abs(j)&&(it=j,st=tt),o[s.axis]=st,o._custom={barStart:it,barEnd:st,start:$,end:et,min:tt,max:j}}function parseValue(i,o,s,_){return isArray(i)?parseFloatBar(i,o,s,_):o[s.axis]=s.parse(i,_),o}function parseArrayOrPrimitive(i,o,s,_){const $=i.iScale,et=i.vScale,tt=$.getLabels(),j=$===et,it=[];let st,ht,_t,gt;for(st=s,ht=s+_;st<ht;++st)gt=o[st],_t={},_t[$.axis]=j||$.parse(tt[st],st),it.push(parseValue(gt,_t,et,st));return it}function isFloatBar(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function barSign(i,o,s){return i!==0?sign(i):(o.isHorizontal()?1:-1)*(o.min>=s?1:-1)}function borderProps(i){let o,s,_,$,et;return i.horizontal?(o=i.base>i.x,s="left",_="right"):(o=i.base<i.y,s="bottom",_="top"),o?($="end",et="start"):($="start",et="end"),{start:s,end:_,reverse:o,top:$,bottom:et}}function setBorderSkipped(i,o,s,_){let $=o.borderSkipped;const et={};if(!$){i.borderSkipped=et;return}const{start:tt,end:j,reverse:it,top:st,bottom:ht}=borderProps(i);$==="middle"&&s&&(i.enableBorderRadius=!0,(s._top||0)===_?$=st:(s._bottom||0)===_?$=ht:(et[parseEdge(ht,tt,j,it)]=!0,$=st)),et[parseEdge($,tt,j,it)]=!0,i.borderSkipped=et}function parseEdge(i,o,s,_){return _?(i=swap(i,o,s),i=startEnd(i,s,o)):i=startEnd(i,o,s),i}function swap(i,o,s){return i===o?s:i===s?o:i}function startEnd(i,o,s){return i==="start"?o:i==="end"?s:i}function setInflateAmount(i,{inflateAmount:o},s){i.inflateAmount=o==="auto"?s===1?.33:0:o}class BarController extends DatasetController{parsePrimitiveData(o,s,_,$){return parseArrayOrPrimitive(o,s,_,$)}parseArrayData(o,s,_,$){return parseArrayOrPrimitive(o,s,_,$)}parseObjectData(o,s,_,$){const{iScale:et,vScale:tt}=o,{xAxisKey:j="x",yAxisKey:it="y"}=this._parsing,st=et.axis==="x"?j:it,ht=tt.axis==="x"?j:it,_t=[];let gt,ft,ut,yt;for(gt=_,ft=_+$;gt<ft;++gt)yt=s[gt],ut={},ut[et.axis]=et.parse(resolveObjectKey(yt,st),gt),_t.push(parseValue(resolveObjectKey(yt,ht),ut,tt,gt));return _t}updateRangeFromParsed(o,s,_,$){super.updateRangeFromParsed(o,s,_,$);const et=_._custom;et&&s===this._cachedMeta.vScale&&(o.min=Math.min(o.min,et.min),o.max=Math.max(o.max,et.max))}getMaxOverflow(){return 0}getLabelAndValue(o){const s=this._cachedMeta,{iScale:_,vScale:$}=s,et=this.getParsed(o),tt=et._custom,j=isFloatBar(tt)?"["+tt.start+", "+tt.end+"]":""+$.getLabelForValue(et[$.axis]);return{label:""+_.getLabelForValue(et[_.axis]),value:j}}initialize(){this.enableOptionSharing=!0,super.initialize();const o=this._cachedMeta;o.stack=this.getDataset().stack}update(o){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,o)}updateElements(o,s,_,$){const et=$==="reset",{index:tt,_cachedMeta:{vScale:j}}=this,it=j.getBasePixel(),st=j.isHorizontal(),ht=this._getRuler(),_t=this.resolveDataElementOptions(s,$),gt=this.getSharedOptions(_t),ft=this.includeOptions($,gt);this.updateSharedOptions(gt,$,_t);for(let ut=s;ut<s+_;ut++){const yt=this.getParsed(ut),Et=et||isNullOrUndef(yt[j.axis])?{base:it,head:it}:this._calculateBarValuePixels(ut),Mt=this._calculateBarIndexPixels(ut,ht),Ft=(yt._stacks||{})[j.axis],Rt={horizontal:st,base:Et.base,enableBorderRadius:!Ft||isFloatBar(yt._custom)||tt===Ft._top||tt===Ft._bottom,x:st?Et.head:Mt.center,y:st?Mt.center:Et.head,height:st?Mt.size:Math.abs(Et.size),width:st?Math.abs(Et.size):Mt.size};ft&&(Rt.options=gt||this.resolveDataElementOptions(ut,o[ut].active?"active":$));const Ot=Rt.options||o[ut].options;setBorderSkipped(Rt,Ot,Ft,tt),setInflateAmount(Rt,Ot,ht.ratio),this.updateElement(o[ut],ut,Rt,$)}}_getStacks(o,s){const $=this._cachedMeta.iScale,et=$.getMatchingVisibleMetas(this._type),tt=$.options.stacked,j=et.length,it=[];let st,ht;for(st=0;st<j;++st)if(ht=et[st],!!ht.controller.options.grouped){if(typeof s<"u"){const _t=ht.controller.getParsed(s)[ht.controller._cachedMeta.vScale.axis];if(isNullOrUndef(_t)||isNaN(_t))continue}if((tt===!1||it.indexOf(ht.stack)===-1||tt===void 0&&ht.stack===void 0)&&it.push(ht.stack),ht.index===o)break}return it.length||it.push(void 0),it}_getStackCount(o){return this._getStacks(void 0,o).length}_getStackIndex(o,s,_){const $=this._getStacks(o,_),et=s!==void 0?$.indexOf(s):-1;return et===-1?$.length-1:et}_getRuler(){const o=this.options,s=this._cachedMeta,_=s.iScale,$=[];let et,tt;for(et=0,tt=s.data.length;et<tt;++et)$.push(_.getPixelForValue(this.getParsed(et)[_.axis],et));const j=o.barThickness;return{min:j||computeMinSampleSize(s),pixels:$,start:_._startPixel,end:_._endPixel,stackCount:this._getStackCount(),scale:_,grouped:o.grouped,ratio:j?1:o.categoryPercentage*o.barPercentage}}_calculateBarValuePixels(o){const{_cachedMeta:{vScale:s,_stacked:_},options:{base:$,minBarLength:et}}=this,tt=$||0,j=this.getParsed(o),it=j._custom,st=isFloatBar(it);let ht=j[s.axis],_t=0,gt=_?this.applyStack(s,j,_):ht,ft,ut;gt!==ht&&(_t=gt-ht,gt=ht),st&&(ht=it.barStart,gt=it.barEnd-it.barStart,ht!==0&&sign(ht)!==sign(it.barEnd)&&(_t=0),_t+=ht);const yt=!isNullOrUndef($)&&!st?$:_t;let Et=s.getPixelForValue(yt);if(this.chart.getDataVisibility(o)?ft=s.getPixelForValue(_t+gt):ft=Et,ut=ft-Et,Math.abs(ut)<et&&(ut=barSign(ut,s,tt)*et,ht===tt&&(Et-=ut/2),ft=Et+ut),Et===s.getPixelForValue(tt)){const Mt=sign(ut)*s.getLineWidthForValue(tt)/2;Et+=Mt,ut-=Mt}return{size:ut,base:Et,head:ft,center:ft+ut/2}}_calculateBarIndexPixels(o,s){const _=s.scale,$=this.options,et=$.skipNull,tt=valueOrDefault($.maxBarThickness,1/0);let j,it;if(s.grouped){const st=et?this._getStackCount(o):s.stackCount,ht=$.barThickness==="flex"?computeFlexCategoryTraits(o,s,$,st):computeFitCategoryTraits(o,s,$,st),_t=this._getStackIndex(this.index,this._cachedMeta.stack,et?o:void 0);j=ht.start+ht.chunk*_t+ht.chunk/2,it=Math.min(tt,ht.chunk*ht.ratio)}else j=_.getPixelForValue(this.getParsed(o)[_.axis],o),it=Math.min(tt,s.min*s.ratio);return{base:j-it/2,head:j+it/2,center:j,size:it}}draw(){const o=this._cachedMeta,s=o.vScale,_=o.data,$=_.length;let et=0;for(;et<$;++et)this.getParsed(et)[s.axis]!==null&&_[et].draw(this._ctx)}}BarController.id="bar";BarController.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};BarController.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(o,s,_,$){const et=super.parsePrimitiveData(o,s,_,$);for(let tt=0;tt<et.length;tt++)et[tt]._custom=this.resolveDataElementOptions(tt+_).radius;return et}parseArrayData(o,s,_,$){const et=super.parseArrayData(o,s,_,$);for(let tt=0;tt<et.length;tt++){const j=s[_+tt];et[tt]._custom=valueOrDefault(j[2],this.resolveDataElementOptions(tt+_).radius)}return et}parseObjectData(o,s,_,$){const et=super.parseObjectData(o,s,_,$);for(let tt=0;tt<et.length;tt++){const j=s[_+tt];et[tt]._custom=valueOrDefault(j&&j.r&&+j.r,this.resolveDataElementOptions(tt+_).radius)}return et}getMaxOverflow(){const o=this._cachedMeta.data;let s=0;for(let _=o.length-1;_>=0;--_)s=Math.max(s,o[_].size(this.resolveDataElementOptions(_))/2);return s>0&&s}getLabelAndValue(o){const s=this._cachedMeta,{xScale:_,yScale:$}=s,et=this.getParsed(o),tt=_.getLabelForValue(et.x),j=$.getLabelForValue(et.y),it=et._custom;return{label:s.label,value:"("+tt+", "+j+(it?", "+it:"")+")"}}update(o){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,o)}updateElements(o,s,_,$){const et=$==="reset",{iScale:tt,vScale:j}=this._cachedMeta,it=this.resolveDataElementOptions(s,$),st=this.getSharedOptions(it),ht=this.includeOptions($,st),_t=tt.axis,gt=j.axis;for(let ft=s;ft<s+_;ft++){const ut=o[ft],yt=!et&&this.getParsed(ft),Et={},Mt=Et[_t]=et?tt.getPixelForDecimal(.5):tt.getPixelForValue(yt[_t]),Ft=Et[gt]=et?j.getBasePixel():j.getPixelForValue(yt[gt]);Et.skip=isNaN(Mt)||isNaN(Ft),ht&&(Et.options=this.resolveDataElementOptions(ft,ut.active?"active":$),et&&(Et.options.radius=0)),this.updateElement(ut,ft,Et,$)}this.updateSharedOptions(st,$,it)}resolveDataElementOptions(o,s){const _=this.getParsed(o);let $=super.resolveDataElementOptions(o,s);$.$shared&&($=Object.assign({},$,{$shared:!1}));const et=$.radius;return s!=="active"&&($.radius=0),$.radius+=valueOrDefault(_&&_._custom,et),$}}BubbleController.id="bubble";BubbleController.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function getRatioAndOffset(i,o,s){let _=1,$=1,et=0,tt=0;if(o<TAU){const j=i,it=j+o,st=Math.cos(j),ht=Math.sin(j),_t=Math.cos(it),gt=Math.sin(it),ft=(Rt,Ot,pt)=>_angleBetween(Rt,j,it,!0)?1:Math.max(Ot,Ot*s,pt,pt*s),ut=(Rt,Ot,pt)=>_angleBetween(Rt,j,it,!0)?-1:Math.min(Ot,Ot*s,pt,pt*s),yt=ft(0,st,_t),Et=ft(HALF_PI,ht,gt),Mt=ut(PI,st,_t),Ft=ut(PI+HALF_PI,ht,gt);_=(yt-Mt)/2,$=(Et-Ft)/2,et=-(yt+Mt)/2,tt=-(Et+Ft)/2}return{ratioX:_,ratioY:$,offsetX:et,offsetY:tt}}class DoughnutController extends DatasetController{constructor(o,s){super(o,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(o,s){const _=this.getDataset().data,$=this._cachedMeta;if(this._parsing===!1)$._parsed=_;else{let et=it=>+_[it];if(isObject(_[o])){const{key:it="value"}=this._parsing;et=st=>+resolveObjectKey(_[st],it)}let tt,j;for(tt=o,j=o+s;tt<j;++tt)$._parsed[tt]=et(tt)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let o=TAU,s=-TAU;for(let _=0;_<this.chart.data.datasets.length;++_)if(this.chart.isDatasetVisible(_)){const $=this.chart.getDatasetMeta(_).controller,et=$._getRotation(),tt=$._getCircumference();o=Math.min(o,et),s=Math.max(s,et+tt)}return{rotation:o,circumference:s-o}}update(o){const s=this.chart,{chartArea:_}=s,$=this._cachedMeta,et=$.data,tt=this.getMaxBorderWidth()+this.getMaxOffset(et)+this.options.spacing,j=Math.max((Math.min(_.width,_.height)-tt)/2,0),it=Math.min(toPercentage(this.options.cutout,j),1),st=this._getRingWeight(this.index),{circumference:ht,rotation:_t}=this._getRotationExtents(),{ratioX:gt,ratioY:ft,offsetX:ut,offsetY:yt}=getRatioAndOffset(_t,ht,it),Et=(_.width-tt)/gt,Mt=(_.height-tt)/ft,Ft=Math.max(Math.min(Et,Mt)/2,0),Rt=toDimension(this.options.radius,Ft),Ot=Math.max(Rt*it,0),pt=(Rt-Ot)/this._getVisibleDatasetWeightTotal();this.offsetX=ut*Rt,this.offsetY=yt*Rt,$.total=this.calculateTotal(),this.outerRadius=Rt-pt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-pt*st,0),this.updateElements(et,0,et.length,o)}_circumference(o,s){const _=this.options,$=this._cachedMeta,et=this._getCircumference();return s&&_.animation.animateRotate||!this.chart.getDataVisibility(o)||$._parsed[o]===null||$.data[o].hidden?0:this.calculateCircumference($._parsed[o]*et/TAU)}updateElements(o,s,_,$){const et=$==="reset",tt=this.chart,j=tt.chartArea,st=tt.options.animation,ht=(j.left+j.right)/2,_t=(j.top+j.bottom)/2,gt=et&&st.animateScale,ft=gt?0:this.innerRadius,ut=gt?0:this.outerRadius,yt=this.resolveDataElementOptions(s,$),Et=this.getSharedOptions(yt),Mt=this.includeOptions($,Et);let Ft=this._getRotation(),Rt;for(Rt=0;Rt<s;++Rt)Ft+=this._circumference(Rt,et);for(Rt=s;Rt<s+_;++Rt){const Ot=this._circumference(Rt,et),pt=o[Rt],Lt={x:ht+this.offsetX,y:_t+this.offsetY,startAngle:Ft,endAngle:Ft+Ot,circumference:Ot,outerRadius:ut,innerRadius:ft};Mt&&(Lt.options=Et||this.resolveDataElementOptions(Rt,pt.active?"active":$)),Ft+=Ot,this.updateElement(pt,Rt,Lt,$)}this.updateSharedOptions(Et,$,yt)}calculateTotal(){const o=this._cachedMeta,s=o.data;let _=0,$;for($=0;$<s.length;$++){const et=o._parsed[$];et!==null&&!isNaN(et)&&this.chart.getDataVisibility($)&&!s[$].hidden&&(_+=Math.abs(et))}return _}calculateCircumference(o){const s=this._cachedMeta.total;return s>0&&!isNaN(o)?TAU*(Math.abs(o)/s):0}getLabelAndValue(o){const s=this._cachedMeta,_=this.chart,$=_.data.labels||[],et=formatNumber(s._parsed[o],_.options.locale);return{label:$[o]||"",value:et}}getMaxBorderWidth(o){let s=0;const _=this.chart;let $,et,tt,j,it;if(!o){for($=0,et=_.data.datasets.length;$<et;++$)if(_.isDatasetVisible($)){tt=_.getDatasetMeta($),o=tt.data,j=tt.controller;break}}if(!o)return 0;for($=0,et=o.length;$<et;++$)it=j.resolveDataElementOptions($),it.borderAlign!=="inner"&&(s=Math.max(s,it.borderWidth||0,it.hoverBorderWidth||0));return s}getMaxOffset(o){let s=0;for(let _=0,$=o.length;_<$;++_){const et=this.resolveDataElementOptions(_);s=Math.max(s,et.offset||0,et.hoverOffset||0)}return s}_getRingWeightOffset(o){let s=0;for(let _=0;_<o;++_)this.chart.isDatasetVisible(_)&&(s+=this._getRingWeight(_));return s}_getRingWeight(o){return Math.max(valueOrDefault(this.chart.data.datasets[o].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}DoughnutController.id="doughnut";DoughnutController.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};DoughnutController.descriptors={_scriptable:i=>i!=="spacing",_indexable:i=>i!=="spacing"};DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const o=i.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:s}}=i.legend.options;return o.labels.map((_,$)=>{const tt=i.getDatasetMeta(0).controller.getStyle($);return{text:_,fillStyle:tt.backgroundColor,strokeStyle:tt.borderColor,lineWidth:tt.borderWidth,pointStyle:s,hidden:!i.getDataVisibility($),index:$}})}return[]}},onClick(i,o,s){s.chart.toggleDataVisibility(o.index),s.chart.update()}},tooltip:{callbacks:{title(){return""},label(i){let o=i.label;const s=": "+i.formattedValue;return isArray(o)?(o=o.slice(),o[0]+=s):o+=s,o}}}}};class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}update(o){const s=this._cachedMeta,{dataset:_,data:$=[],_dataset:et}=s,tt=this.chart._animationsDisabled;let{start:j,count:it}=getStartAndCountOfVisiblePoints(s,$,tt);this._drawStart=j,this._drawCount=it,scaleRangesChanged(s)&&(j=0,it=$.length),_._chart=this.chart,_._datasetIndex=this.index,_._decimated=!!et._decimated,_.points=$;const st=this.resolveDatasetElementOptions(o);this.options.showLine||(st.borderWidth=0),st.segment=this.options.segment,this.updateElement(_,void 0,{animated:!tt,options:st},o),this.updateElements($,j,it,o)}updateElements(o,s,_,$){const et=$==="reset",{iScale:tt,vScale:j,_stacked:it,_dataset:st}=this._cachedMeta,ht=this.resolveDataElementOptions(s,$),_t=this.getSharedOptions(ht),gt=this.includeOptions($,_t),ft=tt.axis,ut=j.axis,{spanGaps:yt,segment:Et}=this.options,Mt=isNumber(yt)?yt:Number.POSITIVE_INFINITY,Ft=this.chart._animationsDisabled||et||$==="none";let Rt=s>0&&this.getParsed(s-1);for(let Ot=s;Ot<s+_;++Ot){const pt=o[Ot],Lt=this.getParsed(Ot),nn=Ft?pt:{},on=isNullOrUndef(Lt[ut]),wt=nn[ft]=tt.getPixelForValue(Lt[ft],Ot),xt=nn[ut]=et||on?j.getBasePixel():j.getPixelForValue(it?this.applyStack(j,Lt,it):Lt[ut],Ot);nn.skip=isNaN(wt)||isNaN(xt)||on,nn.stop=Ot>0&&Lt[ft]-Rt[ft]>Mt,Et&&(nn.parsed=Lt,nn.raw=st.data[Ot]),gt&&(nn.options=_t||this.resolveDataElementOptions(Ot,pt.active?"active":$)),Ft||this.updateElement(pt,Ot,nn,$),Rt=Lt}this.updateSharedOptions(_t,$,ht)}getMaxOverflow(){const o=this._cachedMeta,s=o.dataset,_=s.options&&s.options.borderWidth||0,$=o.data||[];if(!$.length)return _;const et=$[0].size(this.resolveDataElementOptions(0)),tt=$[$.length-1].size(this.resolveDataElementOptions($.length-1));return Math.max(_,et,tt)/2}draw(){const o=this._cachedMeta;o.dataset.updateControlPoints(this.chart.chartArea,o.iScale.axis),super.draw()}}LineController.id="line";LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function getStartAndCountOfVisiblePoints(i,o,s){const _=o.length;let $=0,et=_;if(i._sorted){const{iScale:tt,_parsed:j}=i,it=tt.axis,{min:st,max:ht,minDefined:_t,maxDefined:gt}=tt.getUserBounds();_t&&($=_limitValue(Math.min(_lookupByKey(j,tt.axis,st).lo,s?_:_lookupByKey(o,it,tt.getPixelForValue(st)).lo),0,_-1)),gt?et=_limitValue(Math.max(_lookupByKey(j,tt.axis,ht).hi+1,s?0:_lookupByKey(o,it,tt.getPixelForValue(ht)).hi+1),$,_)-$:et=_-$}return{start:$,count:et}}function scaleRangesChanged(i){const{xScale:o,yScale:s,_scaleRanges:_}=i,$={xmin:o.min,xmax:o.max,ymin:s.min,ymax:s.max};if(!_)return i._scaleRanges=$,!0;const et=_.xmin!==o.min||_.xmax!==o.max||_.ymin!==s.min||_.ymax!==s.max;return Object.assign(_,$),et}class PolarAreaController extends DatasetController{constructor(o,s){super(o,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(o){const s=this._cachedMeta,_=this.chart,$=_.data.labels||[],et=formatNumber(s._parsed[o].r,_.options.locale);return{label:$[o]||"",value:et}}update(o){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,o)}_updateRadius(){const o=this.chart,s=o.chartArea,_=o.options,$=Math.min(s.right-s.left,s.bottom-s.top),et=Math.max($/2,0),tt=Math.max(_.cutoutPercentage?et/100*_.cutoutPercentage:1,0),j=(et-tt)/o.getVisibleDatasetCount();this.outerRadius=et-j*this.index,this.innerRadius=this.outerRadius-j}updateElements(o,s,_,$){const et=$==="reset",tt=this.chart,j=this.getDataset(),st=tt.options.animation,ht=this._cachedMeta.rScale,_t=ht.xCenter,gt=ht.yCenter,ft=ht.getIndexAngle(0)-.5*PI;let ut=ft,yt;const Et=360/this.countVisibleElements();for(yt=0;yt<s;++yt)ut+=this._computeAngle(yt,$,Et);for(yt=s;yt<s+_;yt++){const Mt=o[yt];let Ft=ut,Rt=ut+this._computeAngle(yt,$,Et),Ot=tt.getDataVisibility(yt)?ht.getDistanceFromCenterForValue(j.data[yt]):0;ut=Rt,et&&(st.animateScale&&(Ot=0),st.animateRotate&&(Ft=Rt=ft));const pt={x:_t,y:gt,innerRadius:0,outerRadius:Ot,startAngle:Ft,endAngle:Rt,options:this.resolveDataElementOptions(yt,Mt.active?"active":$)};this.updateElement(Mt,yt,pt,$)}}countVisibleElements(){const o=this.getDataset(),s=this._cachedMeta;let _=0;return s.data.forEach(($,et)=>{!isNaN(o.data[et])&&this.chart.getDataVisibility(et)&&_++}),_}_computeAngle(o,s,_){return this.chart.getDataVisibility(o)?toRadians(this.resolveDataElementOptions(o,s).angle||_):0}}PolarAreaController.id="polarArea";PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const o=i.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:s}}=i.legend.options;return o.labels.map((_,$)=>{const tt=i.getDatasetMeta(0).controller.getStyle($);return{text:_,fillStyle:tt.backgroundColor,strokeStyle:tt.borderColor,lineWidth:tt.borderWidth,pointStyle:s,hidden:!i.getDataVisibility($),index:$}})}return[]}},onClick(i,o,s){s.chart.toggleDataVisibility(o.index),s.chart.update()}},tooltip:{callbacks:{title(){return""},label(i){return i.chart.data.labels[i.dataIndex]+": "+i.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class PieController extends DoughnutController{}PieController.id="pie";PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class RadarController extends DatasetController{getLabelAndValue(o){const s=this._cachedMeta.vScale,_=this.getParsed(o);return{label:s.getLabels()[o],value:""+s.getLabelForValue(_[s.axis])}}update(o){const s=this._cachedMeta,_=s.dataset,$=s.data||[],et=s.iScale.getLabels();if(_.points=$,o!=="resize"){const tt=this.resolveDatasetElementOptions(o);this.options.showLine||(tt.borderWidth=0);const j={_loop:!0,_fullLoop:et.length===$.length,options:tt};this.updateElement(_,void 0,j,o)}this.updateElements($,0,$.length,o)}updateElements(o,s,_,$){const et=this.getDataset(),tt=this._cachedMeta.rScale,j=$==="reset";for(let it=s;it<s+_;it++){const st=o[it],ht=this.resolveDataElementOptions(it,st.active?"active":$),_t=tt.getPointPositionForValue(it,et.data[it]),gt=j?tt.xCenter:_t.x,ft=j?tt.yCenter:_t.y,ut={x:gt,y:ft,angle:_t.angle,skip:isNaN(gt)||isNaN(ft),options:ht};this.updateElement(st,it,ut,$)}}}RadarController.id="radar";RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class ScatterController extends LineController{}ScatterController.id="scatter";ScatterController.defaults={showLine:!1,fill:!1};ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(i){return"("+i.label+", "+i.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var controllers=Object.freeze({__proto__:null,BarController,BubbleController,DoughnutController,LineController,PolarAreaController,PieController,RadarController,ScatterController});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapter{constructor(o){this.options=o||{}}formats(){return abstract()}parse(o,s){return abstract()}format(o,s){return abstract()}add(o,s,_){return abstract()}diff(o,s,_){return abstract()}startOf(o,s,_){return abstract()}endOf(o,s){return abstract()}}DateAdapter.override=function(i){Object.assign(DateAdapter.prototype,i)};var adapters={_date:DateAdapter};function getRelativePosition(i,o){return"native"in i?{x:i.x,y:i.y}:getRelativePosition$1(i,o)}function evaluateAllVisibleItems(i,o){const s=i.getSortedVisibleDatasetMetas();let _,$,et;for(let tt=0,j=s.length;tt<j;++tt){({index:_,data:$}=s[tt]);for(let it=0,st=$.length;it<st;++it)et=$[it],et.skip||o(et,_,it)}}function binarySearch(i,o,s,_){const{controller:$,data:et,_sorted:tt}=i,j=$._cachedMeta.iScale;if(j&&o===j.axis&&o!=="r"&&tt&&et.length){const it=j._reversePixels?_rlookupByKey:_lookupByKey;if(_){if($._sharedOptions){const st=et[0],ht=typeof st.getRange=="function"&&st.getRange(o);if(ht){const _t=it(et,o,s-ht),gt=it(et,o,s+ht);return{lo:_t.lo,hi:gt.hi}}}}else return it(et,o,s)}return{lo:0,hi:et.length-1}}function optimizedEvaluateItems(i,o,s,_,$){const et=i.getSortedVisibleDatasetMetas(),tt=s[o];for(let j=0,it=et.length;j<it;++j){const{index:st,data:ht}=et[j],{lo:_t,hi:gt}=binarySearch(et[j],o,tt,$);for(let ft=_t;ft<=gt;++ft){const ut=ht[ft];ut.skip||_(ut,st,ft)}}}function getDistanceMetricForAxis(i){const o=i.indexOf("x")!==-1,s=i.indexOf("y")!==-1;return function(_,$){const et=o?Math.abs(_.x-$.x):0,tt=s?Math.abs(_.y-$.y):0;return Math.sqrt(Math.pow(et,2)+Math.pow(tt,2))}}function getIntersectItems(i,o,s,_){const $=[];return _isPointInArea(o,i.chartArea,i._minPadding)&&optimizedEvaluateItems(i,s,o,function(tt,j,it){tt.inRange(o.x,o.y,_)&&$.push({element:tt,datasetIndex:j,index:it})},!0),$}function getNearestRadialItems(i,o,s,_){let $=[];function et(tt,j,it){const{startAngle:st,endAngle:ht}=tt.getProps(["startAngle","endAngle"],_),{angle:_t}=getAngleFromPoint(tt,{x:o.x,y:o.y});_angleBetween(_t,st,ht)&&$.push({element:tt,datasetIndex:j,index:it})}return optimizedEvaluateItems(i,s,o,et),$}function getNearestCartesianItems(i,o,s,_,$){let et=[];const tt=getDistanceMetricForAxis(s);let j=Number.POSITIVE_INFINITY;function it(st,ht,_t){const gt=st.inRange(o.x,o.y,$);if(_&&!gt)return;const ft=st.getCenterPoint($);if(!_isPointInArea(ft,i.chartArea,i._minPadding)&&!gt)return;const yt=tt(o,ft);yt<j?(et=[{element:st,datasetIndex:ht,index:_t}],j=yt):yt===j&&et.push({element:st,datasetIndex:ht,index:_t})}return optimizedEvaluateItems(i,s,o,it),et}function getNearestItems(i,o,s,_,$){return _isPointInArea(o,i.chartArea,i._minPadding)?s==="r"&&!_?getNearestRadialItems(i,o,s,$):getNearestCartesianItems(i,o,s,_,$):[]}function getAxisItems(i,o,s,_){const $=getRelativePosition(o,i),et=[],tt=s.axis,j=tt==="x"?"inXRange":"inYRange";let it=!1;return evaluateAllVisibleItems(i,(st,ht,_t)=>{st[j]($[tt],_)&&et.push({element:st,datasetIndex:ht,index:_t}),st.inRange($.x,$.y,_)&&(it=!0)}),s.intersect&&!it?[]:et}var Interaction={modes:{index(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"x",tt=s.intersect?getIntersectItems(i,$,et,_):getNearestItems(i,$,et,!1,_),j=[];return tt.length?(i.getSortedVisibleDatasetMetas().forEach(it=>{const st=tt[0].index,ht=it.data[st];ht&&!ht.skip&&j.push({element:ht,datasetIndex:it.index,index:st})}),j):[]},dataset(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"xy";let tt=s.intersect?getIntersectItems(i,$,et,_):getNearestItems(i,$,et,!1,_);if(tt.length>0){const j=tt[0].datasetIndex,it=i.getDatasetMeta(j).data;tt=[];for(let st=0;st<it.length;++st)tt.push({element:it[st],datasetIndex:j,index:st})}return tt},point(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"xy";return getIntersectItems(i,$,et,_)},nearest(i,o,s,_){const $=getRelativePosition(o,i),et=s.axis||"xy";return getNearestItems(i,$,et,s.intersect,_)},x(i,o,s,_){return getAxisItems(i,o,{axis:"x",intersect:s.intersect},_)},y(i,o,s,_){return getAxisItems(i,o,{axis:"y",intersect:s.intersect},_)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(i,o){return i.filter(s=>s.pos===o)}function filterDynamicPositionByAxis(i,o){return i.filter(s=>STATIC_POSITIONS.indexOf(s.pos)===-1&&s.box.axis===o)}function sortByWeight(i,o){return i.sort((s,_)=>{const $=o?_:s,et=o?s:_;return $.weight===et.weight?$.index-et.index:$.weight-et.weight})}function wrapBoxes(i){const o=[];let s,_,$,et,tt,j;for(s=0,_=(i||[]).length;s<_;++s)$=i[s],{position:et,options:{stack:tt,stackWeight:j=1}}=$,o.push({index:s,box:$,pos:et,horizontal:$.isHorizontal(),weight:$.weight,stack:tt&&et+tt,stackWeight:j});return o}function buildStacks(i){const o={};for(const s of i){const{stack:_,pos:$,stackWeight:et}=s;if(!_||!STATIC_POSITIONS.includes($))continue;const tt=o[_]||(o[_]={count:0,placed:0,weight:0,size:0});tt.count++,tt.weight+=et}return o}function setLayoutDims(i,o){const s=buildStacks(i),{vBoxMaxWidth:_,hBoxMaxHeight:$}=o;let et,tt,j;for(et=0,tt=i.length;et<tt;++et){j=i[et];const{fullSize:it}=j.box,st=s[j.stack],ht=st&&j.stackWeight/st.weight;j.horizontal?(j.width=ht?ht*_:it&&o.availableWidth,j.height=$):(j.width=_,j.height=ht?ht*$:it&&o.availableHeight)}return s}function buildLayoutBoxes(i){const o=wrapBoxes(i),s=sortByWeight(o.filter(st=>st.box.fullSize),!0),_=sortByWeight(filterByPosition(o,"left"),!0),$=sortByWeight(filterByPosition(o,"right")),et=sortByWeight(filterByPosition(o,"top"),!0),tt=sortByWeight(filterByPosition(o,"bottom")),j=filterDynamicPositionByAxis(o,"x"),it=filterDynamicPositionByAxis(o,"y");return{fullSize:s,leftAndTop:_.concat(et),rightAndBottom:$.concat(it).concat(tt).concat(j),chartArea:filterByPosition(o,"chartArea"),vertical:_.concat($).concat(it),horizontal:et.concat(tt).concat(j)}}function getCombinedMax(i,o,s,_){return Math.max(i[s],o[s])+Math.max(i[_],o[_])}function updateMaxPadding(i,o){i.top=Math.max(i.top,o.top),i.left=Math.max(i.left,o.left),i.bottom=Math.max(i.bottom,o.bottom),i.right=Math.max(i.right,o.right)}function updateDims(i,o,s,_){const{pos:$,box:et}=s,tt=i.maxPadding;if(!isObject($)){s.size&&(i[$]-=s.size);const _t=_[s.stack]||{size:0,count:1};_t.size=Math.max(_t.size,s.horizontal?et.height:et.width),s.size=_t.size/_t.count,i[$]+=s.size}et.getPadding&&updateMaxPadding(tt,et.getPadding());const j=Math.max(0,o.outerWidth-getCombinedMax(tt,i,"left","right")),it=Math.max(0,o.outerHeight-getCombinedMax(tt,i,"top","bottom")),st=j!==i.w,ht=it!==i.h;return i.w=j,i.h=it,s.horizontal?{same:st,other:ht}:{same:ht,other:st}}function handleMaxPadding(i){const o=i.maxPadding;function s(_){const $=Math.max(o[_]-i[_],0);return i[_]+=$,$}i.y+=s("top"),i.x+=s("left"),s("right"),s("bottom")}function getMargins(i,o){const s=o.maxPadding;function _($){const et={left:0,top:0,right:0,bottom:0};return $.forEach(tt=>{et[tt]=Math.max(o[tt],s[tt])}),et}return _(i?["left","right"]:["top","bottom"])}function fitBoxes(i,o,s,_){const $=[];let et,tt,j,it,st,ht;for(et=0,tt=i.length,st=0;et<tt;++et){j=i[et],it=j.box,it.update(j.width||o.w,j.height||o.h,getMargins(j.horizontal,o));const{same:_t,other:gt}=updateDims(o,s,j,_);st|=_t&&$.length,ht=ht||gt,it.fullSize||$.push(j)}return st&&fitBoxes($,o,s,_)||ht}function setBoxDims(i,o,s,_,$){i.top=s,i.left=o,i.right=o+_,i.bottom=s+$,i.width=_,i.height=$}function placeBoxes(i,o,s,_){const $=s.padding;let{x:et,y:tt}=o;for(const j of i){const it=j.box,st=_[j.stack]||{count:1,placed:0,weight:1},ht=j.stackWeight/st.weight||1;if(j.horizontal){const _t=o.w*ht,gt=st.size||it.height;defined$2(st.start)&&(tt=st.start),it.fullSize?setBoxDims(it,$.left,tt,s.outerWidth-$.right-$.left,gt):setBoxDims(it,o.left+st.placed,tt,_t,gt),st.start=tt,st.placed+=_t,tt=it.bottom}else{const _t=o.h*ht,gt=st.size||it.width;defined$2(st.start)&&(et=st.start),it.fullSize?setBoxDims(it,et,$.top,gt,s.outerHeight-$.bottom-$.top):setBoxDims(it,et,o.top+st.placed,gt,_t),st.start=et,st.placed+=_t,et=it.right}}o.x=et,o.y=tt}defaults.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var layouts={addBox(i,o){i.boxes||(i.boxes=[]),o.fullSize=o.fullSize||!1,o.position=o.position||"top",o.weight=o.weight||0,o._layers=o._layers||function(){return[{z:0,draw(s){o.draw(s)}}]},i.boxes.push(o)},removeBox(i,o){const s=i.boxes?i.boxes.indexOf(o):-1;s!==-1&&i.boxes.splice(s,1)},configure(i,o,s){o.fullSize=s.fullSize,o.position=s.position,o.weight=s.weight},update(i,o,s,_){if(!i)return;const $=toPadding(i.options.layout.padding),et=Math.max(o-$.width,0),tt=Math.max(s-$.height,0),j=buildLayoutBoxes(i.boxes),it=j.vertical,st=j.horizontal;each(i.boxes,yt=>{typeof yt.beforeLayout=="function"&&yt.beforeLayout()});const ht=it.reduce((yt,Et)=>Et.box.options&&Et.box.options.display===!1?yt:yt+1,0)||1,_t=Object.freeze({outerWidth:o,outerHeight:s,padding:$,availableWidth:et,availableHeight:tt,vBoxMaxWidth:et/2/ht,hBoxMaxHeight:tt/2}),gt=Object.assign({},$);updateMaxPadding(gt,toPadding(_));const ft=Object.assign({maxPadding:gt,w:et,h:tt,x:$.left,y:$.top},$),ut=setLayoutDims(it.concat(st),_t);fitBoxes(j.fullSize,ft,_t,ut),fitBoxes(it,ft,_t,ut),fitBoxes(st,ft,_t,ut)&&fitBoxes(it,ft,_t,ut),handleMaxPadding(ft),placeBoxes(j.leftAndTop,ft,_t,ut),ft.x+=ft.w,ft.y+=ft.h,placeBoxes(j.rightAndBottom,ft,_t,ut),i.chartArea={left:ft.left,top:ft.top,right:ft.left+ft.w,bottom:ft.top+ft.h,height:ft.h,width:ft.w},each(j.chartArea,yt=>{const Et=yt.box;Object.assign(Et,i.chartArea),Et.update(ft.w,ft.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(o,s){}releaseContext(o){return!1}addEventListener(o,s,_){}removeEventListener(o,s,_){}getDevicePixelRatio(){return 1}getMaximumSize(o,s,_,$){return s=Math.max(0,s||o.width),_=_||o.height,{width:s,height:Math.max(0,$?Math.floor(s/$):_)}}isAttached(o){return!0}updateConfig(o){}}class BasicPlatform extends BasePlatform{acquireContext(o){return o&&o.getContext&&o.getContext("2d")||null}updateConfig(o){o.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=i=>i===null||i==="";function initCanvas(i,o){const s=i.style,_=i.getAttribute("height"),$=i.getAttribute("width");if(i[EXPANDO_KEY]={initial:{height:_,width:$,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",isNullOrEmpty($)){const et=readUsedSize(i,"width");et!==void 0&&(i.width=et)}if(isNullOrEmpty(_))if(i.style.height==="")i.height=i.width/(o||2);else{const et=readUsedSize(i,"height");et!==void 0&&(i.height=et)}return i}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(i,o,s){i.addEventListener(o,s,eventListenerOptions)}function removeListener(i,o,s){i.canvas.removeEventListener(o,s,eventListenerOptions)}function fromNativeEvent(i,o){const s=EVENT_TYPES[i.type]||i.type,{x:_,y:$}=getRelativePosition$1(i,o);return{type:s,chart:o,native:i,x:_!==void 0?_:null,y:$!==void 0?$:null}}function nodeListContains(i,o){for(const s of i)if(s===o||s.contains(o))return!0}function createAttachObserver(i,o,s){const _=i.canvas,$=new MutationObserver(et=>{let tt=!1;for(const j of et)tt=tt||nodeListContains(j.addedNodes,_),tt=tt&&!nodeListContains(j.removedNodes,_);tt&&s()});return $.observe(document,{childList:!0,subtree:!0}),$}function createDetachObserver(i,o,s){const _=i.canvas,$=new MutationObserver(et=>{let tt=!1;for(const j of et)tt=tt||nodeListContains(j.removedNodes,_),tt=tt&&!nodeListContains(j.addedNodes,_);tt&&s()});return $.observe(document,{childList:!0,subtree:!0}),$}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const i=window.devicePixelRatio;i!==oldDevicePixelRatio&&(oldDevicePixelRatio=i,drpListeningCharts.forEach((o,s)=>{s.currentDevicePixelRatio!==i&&o()}))}function listenDevicePixelRatioChanges(i,o){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(i,o)}function unlistenDevicePixelRatioChanges(i){drpListeningCharts.delete(i),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(i,o,s){const _=i.canvas,$=_&&_getParentNode(_);if(!$)return;const et=throttled((j,it)=>{const st=$.clientWidth;s(j,it),st<$.clientWidth&&s()},window),tt=new ResizeObserver(j=>{const it=j[0],st=it.contentRect.width,ht=it.contentRect.height;st===0&&ht===0||et(st,ht)});return tt.observe($),listenDevicePixelRatioChanges(i,et),tt}function releaseObserver(i,o,s){s&&s.disconnect(),o==="resize"&&unlistenDevicePixelRatioChanges(i)}function createProxyAndListen(i,o,s){const _=i.canvas,$=throttled(et=>{i.ctx!==null&&s(fromNativeEvent(et,i))},i,et=>{const tt=et[0];return[tt,tt.offsetX,tt.offsetY]});return addListener(_,o,$),$}class DomPlatform extends BasePlatform{acquireContext(o,s){const _=o&&o.getContext&&o.getContext("2d");return _&&_.canvas===o?(initCanvas(o,s),_):null}releaseContext(o){const s=o.canvas;if(!s[EXPANDO_KEY])return!1;const _=s[EXPANDO_KEY].initial;["height","width"].forEach(et=>{const tt=_[et];isNullOrUndef(tt)?s.removeAttribute(et):s.setAttribute(et,tt)});const $=_.style||{};return Object.keys($).forEach(et=>{s.style[et]=$[et]}),s.width=s.width,delete s[EXPANDO_KEY],!0}addEventListener(o,s,_){this.removeEventListener(o,s);const $=o.$proxies||(o.$proxies={}),tt={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[s]||createProxyAndListen;$[s]=tt(o,s,_)}removeEventListener(o,s){const _=o.$proxies||(o.$proxies={}),$=_[s];if(!$)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[s]||removeListener)(o,s,$),_[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(o,s,_,$){return getMaximumSize(o,s,_,$)}isAttached(o){const s=_getParentNode(o);return!!(s&&s.isConnected)}}function _detectPlatform(i){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?BasicPlatform:DomPlatform}class Element{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(o){const{x:s,y:_}=this.getProps(["x","y"],o);return{x:s,y:_}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(o,s){const _=this.$animations;if(!s||!_)return this;const $={};return o.forEach(et=>{$[et]=_[et]&&_[et].active()?_[et]._to:this[et]}),$}}Element.defaults={};Element.defaultRoutes=void 0;const formatters={values(i){return isArray(i)?i:""+i},numeric(i,o,s){if(i===0)return"0";const _=this.chart.options.locale;let $,et=i;if(s.length>1){const st=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(st<1e-4||st>1e15)&&($="scientific"),et=calculateDelta(i,s)}const tt=log10(Math.abs(et)),j=Math.max(Math.min(-1*Math.floor(tt),20),0),it={notation:$,minimumFractionDigits:j,maximumFractionDigits:j};return Object.assign(it,this.options.ticks.format),formatNumber(i,_,it)},logarithmic(i,o,s){if(i===0)return"0";const _=i/Math.pow(10,Math.floor(log10(i)));return _===1||_===2||_===5?formatters.numeric.call(this,i,o,s):""}};function calculateDelta(i,o){let s=o.length>3?o[2].value-o[1].value:o[1].value-o[0].value;return Math.abs(s)>=1&&i!==Math.floor(i)&&(s=i-Math.floor(i)),s}var Ticks={formatters};defaults.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,o)=>o.lineWidth,tickColor:(i,o)=>o.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});defaults.route("scale.ticks","color","","color");defaults.route("scale.grid","color","","borderColor");defaults.route("scale.grid","borderColor","","borderColor");defaults.route("scale.title","color","","color");defaults.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&i!=="callback"&&i!=="parser",_indexable:i=>i!=="borderDash"&&i!=="tickBorderDash"});defaults.describe("scales",{_fallback:"scale"});defaults.describe("scale.ticks",{_scriptable:i=>i!=="backdropPadding"&&i!=="callback",_indexable:i=>i!=="backdropPadding"});function autoSkip(i,o){const s=i.options.ticks,_=s.maxTicksLimit||determineMaxTicks(i),$=s.major.enabled?getMajorIndices(o):[],et=$.length,tt=$[0],j=$[et-1],it=[];if(et>_)return skipMajors(o,it,$,et/_),it;const st=calculateSpacing($,o,_);if(et>0){let ht,_t;const gt=et>1?Math.round((j-tt)/(et-1)):null;for(skip(o,it,st,isNullOrUndef(gt)?0:tt-gt,tt),ht=0,_t=et-1;ht<_t;ht++)skip(o,it,st,$[ht],$[ht+1]);return skip(o,it,st,j,isNullOrUndef(gt)?o.length:j+gt),it}return skip(o,it,st),it}function determineMaxTicks(i){const o=i.options.offset,s=i._tickSize(),_=i._length/s+(o?0:1),$=i._maxLength/s;return Math.floor(Math.min(_,$))}function calculateSpacing(i,o,s){const _=getEvenSpacing(i),$=o.length/s;if(!_)return Math.max($,1);const et=_factorize(_);for(let tt=0,j=et.length-1;tt<j;tt++){const it=et[tt];if(it>$)return it}return Math.max($,1)}function getMajorIndices(i){const o=[];let s,_;for(s=0,_=i.length;s<_;s++)i[s].major&&o.push(s);return o}function skipMajors(i,o,s,_){let $=0,et=s[0],tt;for(_=Math.ceil(_),tt=0;tt<i.length;tt++)tt===et&&(o.push(i[tt]),$++,et=s[$*_])}function skip(i,o,s,_,$){const et=valueOrDefault(_,0),tt=Math.min(valueOrDefault($,i.length),i.length);let j=0,it,st,ht;for(s=Math.ceil(s),$&&(it=$-_,s=it/Math.floor(it/s)),ht=et;ht<0;)j++,ht=Math.round(et+j*s);for(st=Math.max(et,0);st<tt;st++)st===ht&&(o.push(i[st]),j++,ht=Math.round(et+j*s))}function getEvenSpacing(i){const o=i.length;let s,_;if(o<2)return!1;for(_=i[0],s=1;s<o;++s)if(i[s]-i[s-1]!==_)return!1;return _}const reverseAlign=i=>i==="left"?"right":i==="right"?"left":i,offsetFromEdge=(i,o,s)=>o==="top"||o==="left"?i[o]+s:i[o]-s;function sample(i,o){const s=[],_=i.length/o,$=i.length;let et=0;for(;et<$;et+=_)s.push(i[Math.floor(et)]);return s}function getPixelForGridLine(i,o,s){const _=i.ticks.length,$=Math.min(o,_-1),et=i._startPixel,tt=i._endPixel,j=1e-6;let it=i.getPixelForTick($),st;if(!(s&&(_===1?st=Math.max(it-et,tt-it):o===0?st=(i.getPixelForTick(1)-it)/2:st=(it-i.getPixelForTick($-1))/2,it+=$<o?st:-st,it<et-j||it>tt+j)))return it}function garbageCollect(i,o){each(i,s=>{const _=s.gc,$=_.length/2;let et;if($>o){for(et=0;et<$;++et)delete s.data[_[et]];_.splice(0,$)}})}function getTickMarkLength(i){return i.drawTicks?i.tickLength:0}function getTitleHeight(i,o){if(!i.display)return 0;const s=toFont(i.font,o),_=toPadding(i.padding);return(isArray(i.text)?i.text.length:1)*s.lineHeight+_.height}function createScaleContext(i,o){return createContext(i,{scale:o,type:"scale"})}function createTickContext(i,o,s){return createContext(i,{tick:s,index:o,type:"tick"})}function titleAlign(i,o,s){let _=_toLeftRightCenter(i);return(s&&o!=="right"||!s&&o==="right")&&(_=reverseAlign(_)),_}function titleArgs(i,o,s,_){const{top:$,left:et,bottom:tt,right:j,chart:it}=i,{chartArea:st,scales:ht}=it;let _t=0,gt,ft,ut;const yt=tt-$,Et=j-et;if(i.isHorizontal()){if(ft=_alignStartEnd(_,et,j),isObject(s)){const Mt=Object.keys(s)[0],Ft=s[Mt];ut=ht[Mt].getPixelForValue(Ft)+yt-o}else s==="center"?ut=(st.bottom+st.top)/2+yt-o:ut=offsetFromEdge(i,s,o);gt=j-et}else{if(isObject(s)){const Mt=Object.keys(s)[0],Ft=s[Mt];ft=ht[Mt].getPixelForValue(Ft)-Et+o}else s==="center"?ft=(st.left+st.right)/2-Et+o:ft=offsetFromEdge(i,s,o);ut=_alignStartEnd(_,tt,$),_t=s==="left"?-HALF_PI:HALF_PI}return{titleX:ft,titleY:ut,maxWidth:gt,rotation:_t}}class Scale extends Element{constructor(o){super(),this.id=o.id,this.type=o.type,this.options=void 0,this.ctx=o.ctx,this.chart=o.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(o){this.options=o.setContext(this.getContext()),this.axis=o.axis,this._userMin=this.parse(o.min),this._userMax=this.parse(o.max),this._suggestedMin=this.parse(o.suggestedMin),this._suggestedMax=this.parse(o.suggestedMax)}parse(o,s){return o}getUserBounds(){let{_userMin:o,_userMax:s,_suggestedMin:_,_suggestedMax:$}=this;return o=finiteOrDefault(o,Number.POSITIVE_INFINITY),s=finiteOrDefault(s,Number.NEGATIVE_INFINITY),_=finiteOrDefault(_,Number.POSITIVE_INFINITY),$=finiteOrDefault($,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(o,_),max:finiteOrDefault(s,$),minDefined:isNumberFinite(o),maxDefined:isNumberFinite(s)}}getMinMax(o){let{min:s,max:_,minDefined:$,maxDefined:et}=this.getUserBounds(),tt;if($&&et)return{min:s,max:_};const j=this.getMatchingVisibleMetas();for(let it=0,st=j.length;it<st;++it)tt=j[it].controller.getMinMax(this,o),$||(s=Math.min(s,tt.min)),et||(_=Math.max(_,tt.max));return s=et&&s>_?_:s,_=$&&s>_?s:_,{min:finiteOrDefault(s,finiteOrDefault(_,s)),max:finiteOrDefault(_,finiteOrDefault(s,_))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const o=this.chart.data;return this.options.labels||(this.isHorizontal()?o.xLabels:o.yLabels)||o.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(o,s,_){const{beginAtZero:$,grace:et,ticks:tt}=this.options,j=tt.sampleSize;this.beforeUpdate(),this.maxWidth=o,this.maxHeight=s,this._margins=_=Object.assign({left:0,right:0,top:0,bottom:0},_),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+_.left+_.right:this.height+_.top+_.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,et,$),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const it=j<this.ticks.length;this._convertTicksToLabels(it?sample(this.ticks,j):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),tt.display&&(tt.autoSkip||tt.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null),it&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let o=this.options.reverse,s,_;this.isHorizontal()?(s=this.left,_=this.right):(s=this.top,_=this.bottom,o=!o),this._startPixel=s,this._endPixel=_,this._reversePixels=o,this._length=_-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(o){this.chart.notifyPlugins(o,this.getContext()),callback(this.options[o],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(o){const s=this.options.ticks;let _,$,et;for(_=0,$=o.length;_<$;_++)et=o[_],et.label=callback(s.callback,[et.value,_,o],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const o=this.options,s=o.ticks,_=this.ticks.length,$=s.minRotation||0,et=s.maxRotation;let tt=$,j,it,st;if(!this._isVisible()||!s.display||$>=et||_<=1||!this.isHorizontal()){this.labelRotation=$;return}const ht=this._getLabelSizes(),_t=ht.widest.width,gt=ht.highest.height,ft=_limitValue(this.chart.width-_t,0,this.maxWidth);j=o.offset?this.maxWidth/_:ft/(_-1),_t+6>j&&(j=ft/(_-(o.offset?.5:1)),it=this.maxHeight-getTickMarkLength(o.grid)-s.padding-getTitleHeight(o.title,this.chart.options.font),st=Math.sqrt(_t*_t+gt*gt),tt=toDegrees(Math.min(Math.asin(_limitValue((ht.highest.height+6)/j,-1,1)),Math.asin(_limitValue(it/st,-1,1))-Math.asin(_limitValue(gt/st,-1,1)))),tt=Math.max($,Math.min(et,tt))),this.labelRotation=tt}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const o={width:0,height:0},{chart:s,options:{ticks:_,title:$,grid:et}}=this,tt=this._isVisible(),j=this.isHorizontal();if(tt){const it=getTitleHeight($,s.options.font);if(j?(o.width=this.maxWidth,o.height=getTickMarkLength(et)+it):(o.height=this.maxHeight,o.width=getTickMarkLength(et)+it),_.display&&this.ticks.length){const{first:st,last:ht,widest:_t,highest:gt}=this._getLabelSizes(),ft=_.padding*2,ut=toRadians(this.labelRotation),yt=Math.cos(ut),Et=Math.sin(ut);if(j){const Mt=_.mirror?0:Et*_t.width+yt*gt.height;o.height=Math.min(this.maxHeight,o.height+Mt+ft)}else{const Mt=_.mirror?0:yt*_t.width+Et*gt.height;o.width=Math.min(this.maxWidth,o.width+Mt+ft)}this._calculatePadding(st,ht,Et,yt)}}this._handleMargins(),j?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=o.height):(this.width=o.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(o,s,_,$){const{ticks:{align:et,padding:tt},position:j}=this.options,it=this.labelRotation!==0,st=j!=="top"&&this.axis==="x";if(this.isHorizontal()){const ht=this.getPixelForTick(0)-this.left,_t=this.right-this.getPixelForTick(this.ticks.length-1);let gt=0,ft=0;it?st?(gt=$*o.width,ft=_*s.height):(gt=_*o.height,ft=$*s.width):et==="start"?ft=s.width:et==="end"?gt=o.width:(gt=o.width/2,ft=s.width/2),this.paddingLeft=Math.max((gt-ht+tt)*this.width/(this.width-ht),0),this.paddingRight=Math.max((ft-_t+tt)*this.width/(this.width-_t),0)}else{let ht=s.height/2,_t=o.height/2;et==="start"?(ht=0,_t=o.height):et==="end"&&(ht=s.height,_t=0),this.paddingTop=ht+tt,this.paddingBottom=_t+tt}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:o,position:s}=this.options;return s==="top"||s==="bottom"||o==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(o){this.beforeTickToLabelConversion(),this.generateTickLabels(o);let s,_;for(s=0,_=o.length;s<_;s++)isNullOrUndef(o[s].label)&&(o.splice(s,1),_--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let o=this._labelSizes;if(!o){const s=this.options.ticks.sampleSize;let _=this.ticks;s<_.length&&(_=sample(_,s)),this._labelSizes=o=this._computeLabelSizes(_,_.length)}return o}_computeLabelSizes(o,s){const{ctx:_,_longestTextCache:$}=this,et=[],tt=[];let j=0,it=0,st,ht,_t,gt,ft,ut,yt,Et,Mt,Ft,Rt;for(st=0;st<s;++st){if(gt=o[st].label,ft=this._resolveTickFontOptions(st),_.font=ut=ft.string,yt=$[ut]=$[ut]||{data:{},gc:[]},Et=ft.lineHeight,Mt=Ft=0,!isNullOrUndef(gt)&&!isArray(gt))Mt=_measureText(_,yt.data,yt.gc,Mt,gt),Ft=Et;else if(isArray(gt))for(ht=0,_t=gt.length;ht<_t;++ht)Rt=gt[ht],!isNullOrUndef(Rt)&&!isArray(Rt)&&(Mt=_measureText(_,yt.data,yt.gc,Mt,Rt),Ft+=Et);et.push(Mt),tt.push(Ft),j=Math.max(Mt,j),it=Math.max(Ft,it)}garbageCollect($,s);const Ot=et.indexOf(j),pt=tt.indexOf(it),Lt=nn=>({width:et[nn]||0,height:tt[nn]||0});return{first:Lt(0),last:Lt(s-1),widest:Lt(Ot),highest:Lt(pt),widths:et,heights:tt}}getLabelForValue(o){return o}getPixelForValue(o,s){return NaN}getValueForPixel(o){}getPixelForTick(o){const s=this.ticks;return o<0||o>s.length-1?null:this.getPixelForValue(s[o].value)}getPixelForDecimal(o){this._reversePixels&&(o=1-o);const s=this._startPixel+o*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,s,0):s)}getDecimalForPixel(o){const s=(o-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:o,max:s}=this;return o<0&&s<0?s:o>0&&s>0?o:0}getContext(o){const s=this.ticks||[];if(o>=0&&o<s.length){const _=s[o];return _.$context||(_.$context=createTickContext(this.getContext(),o,_))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const o=this.options.ticks,s=toRadians(this.labelRotation),_=Math.abs(Math.cos(s)),$=Math.abs(Math.sin(s)),et=this._getLabelSizes(),tt=o.autoSkipPadding||0,j=et?et.widest.width+tt:0,it=et?et.highest.height+tt:0;return this.isHorizontal()?it*_>j*$?j/_:it/$:it*$<j*_?it/_:j/$}_isVisible(){const o=this.options.display;return o!=="auto"?!!o:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(o){const s=this.axis,_=this.chart,$=this.options,{grid:et,position:tt}=$,j=et.offset,it=this.isHorizontal(),ht=this.ticks.length+(j?1:0),_t=getTickMarkLength(et),gt=[],ft=et.setContext(this.getContext()),ut=ft.drawBorder?ft.borderWidth:0,yt=ut/2,Et=function(Gt){return _alignPixel(_,Gt,ut)};let Mt,Ft,Rt,Ot,pt,Lt,nn,on,wt,xt,Nt,Tt;if(tt==="top")Mt=Et(this.bottom),Lt=this.bottom-_t,on=Mt-yt,xt=Et(o.top)+yt,Tt=o.bottom;else if(tt==="bottom")Mt=Et(this.top),xt=o.top,Tt=Et(o.bottom)-yt,Lt=Mt+yt,on=this.top+_t;else if(tt==="left")Mt=Et(this.right),pt=this.right-_t,nn=Mt-yt,wt=Et(o.left)+yt,Nt=o.right;else if(tt==="right")Mt=Et(this.left),wt=o.left,Nt=Et(o.right)-yt,pt=Mt+yt,nn=this.left+_t;else if(s==="x"){if(tt==="center")Mt=Et((o.top+o.bottom)/2+.5);else if(isObject(tt)){const Gt=Object.keys(tt)[0],Ut=tt[Gt];Mt=Et(this.chart.scales[Gt].getPixelForValue(Ut))}xt=o.top,Tt=o.bottom,Lt=Mt+yt,on=Lt+_t}else if(s==="y"){if(tt==="center")Mt=Et((o.left+o.right)/2);else if(isObject(tt)){const Gt=Object.keys(tt)[0],Ut=tt[Gt];Mt=Et(this.chart.scales[Gt].getPixelForValue(Ut))}pt=Mt-yt,nn=pt-_t,wt=o.left,Nt=o.right}const Vt=valueOrDefault($.ticks.maxTicksLimit,ht),Xt=Math.max(1,Math.ceil(ht/Vt));for(Ft=0;Ft<ht;Ft+=Xt){const Gt=et.setContext(this.getContext(Ft)),Ut=Gt.lineWidth,Ht=Gt.color,qt=et.borderDash||[],Pt=Gt.borderDashOffset,St=Gt.tickWidth,Zt=Gt.tickColor,tn=Gt.tickBorderDash||[],mn=Gt.tickBorderDashOffset;Rt=getPixelForGridLine(this,Ft,j),Rt!==void 0&&(Ot=_alignPixel(_,Rt,Ut),it?pt=nn=wt=Nt=Ot:Lt=on=xt=Tt=Ot,gt.push({tx1:pt,ty1:Lt,tx2:nn,ty2:on,x1:wt,y1:xt,x2:Nt,y2:Tt,width:Ut,color:Ht,borderDash:qt,borderDashOffset:Pt,tickWidth:St,tickColor:Zt,tickBorderDash:tn,tickBorderDashOffset:mn}))}return this._ticksLength=ht,this._borderValue=Mt,gt}_computeLabelItems(o){const s=this.axis,_=this.options,{position:$,ticks:et}=_,tt=this.isHorizontal(),j=this.ticks,{align:it,crossAlign:st,padding:ht,mirror:_t}=et,gt=getTickMarkLength(_.grid),ft=gt+ht,ut=_t?-ht:ft,yt=-toRadians(this.labelRotation),Et=[];let Mt,Ft,Rt,Ot,pt,Lt,nn,on,wt,xt,Nt,Tt,Vt="middle";if($==="top")Lt=this.bottom-ut,nn=this._getXAxisLabelAlignment();else if($==="bottom")Lt=this.top+ut,nn=this._getXAxisLabelAlignment();else if($==="left"){const Gt=this._getYAxisLabelAlignment(gt);nn=Gt.textAlign,pt=Gt.x}else if($==="right"){const Gt=this._getYAxisLabelAlignment(gt);nn=Gt.textAlign,pt=Gt.x}else if(s==="x"){if($==="center")Lt=(o.top+o.bottom)/2+ft;else if(isObject($)){const Gt=Object.keys($)[0],Ut=$[Gt];Lt=this.chart.scales[Gt].getPixelForValue(Ut)+ft}nn=this._getXAxisLabelAlignment()}else if(s==="y"){if($==="center")pt=(o.left+o.right)/2-ft;else if(isObject($)){const Gt=Object.keys($)[0],Ut=$[Gt];pt=this.chart.scales[Gt].getPixelForValue(Ut)}nn=this._getYAxisLabelAlignment(gt).textAlign}s==="y"&&(it==="start"?Vt="top":it==="end"&&(Vt="bottom"));const Xt=this._getLabelSizes();for(Mt=0,Ft=j.length;Mt<Ft;++Mt){Rt=j[Mt],Ot=Rt.label;const Gt=et.setContext(this.getContext(Mt));on=this.getPixelForTick(Mt)+et.labelOffset,wt=this._resolveTickFontOptions(Mt),xt=wt.lineHeight,Nt=isArray(Ot)?Ot.length:1;const Ut=Nt/2,Ht=Gt.color,qt=Gt.textStrokeColor,Pt=Gt.textStrokeWidth;tt?(pt=on,$==="top"?st==="near"||yt!==0?Tt=-Nt*xt+xt/2:st==="center"?Tt=-Xt.highest.height/2-Ut*xt+xt:Tt=-Xt.highest.height+xt/2:st==="near"||yt!==0?Tt=xt/2:st==="center"?Tt=Xt.highest.height/2-Ut*xt:Tt=Xt.highest.height-Nt*xt,_t&&(Tt*=-1)):(Lt=on,Tt=(1-Nt)*xt/2);let St;if(Gt.showLabelBackdrop){const Zt=toPadding(Gt.backdropPadding),tn=Xt.heights[Mt],mn=Xt.widths[Mt];let yn=Lt+Tt-Zt.top,vn=pt-Zt.left;switch(Vt){case"middle":yn-=tn/2;break;case"bottom":yn-=tn;break}switch(nn){case"center":vn-=mn/2;break;case"right":vn-=mn;break}St={left:vn,top:yn,width:mn+Zt.width,height:tn+Zt.height,color:Gt.backdropColor}}Et.push({rotation:yt,label:Ot,font:wt,color:Ht,strokeColor:qt,strokeWidth:Pt,textOffset:Tt,textAlign:nn,textBaseline:Vt,translation:[pt,Lt],backdrop:St})}return Et}_getXAxisLabelAlignment(){const{position:o,ticks:s}=this.options;if(-toRadians(this.labelRotation))return o==="top"?"left":"right";let $="center";return s.align==="start"?$="left":s.align==="end"&&($="right"),$}_getYAxisLabelAlignment(o){const{position:s,ticks:{crossAlign:_,mirror:$,padding:et}}=this.options,tt=this._getLabelSizes(),j=o+et,it=tt.widest.width;let st,ht;return s==="left"?$?(ht=this.right+et,_==="near"?st="left":_==="center"?(st="center",ht+=it/2):(st="right",ht+=it)):(ht=this.right-j,_==="near"?st="right":_==="center"?(st="center",ht-=it/2):(st="left",ht=this.left)):s==="right"?$?(ht=this.left+et,_==="near"?st="right":_==="center"?(st="center",ht-=it/2):(st="left",ht-=it)):(ht=this.left+j,_==="near"?st="left":_==="center"?(st="center",ht+=it/2):(st="right",ht=this.right)):st="right",{textAlign:st,x:ht}}_computeLabelArea(){if(this.options.ticks.mirror)return;const o=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:o.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:o.width}}drawBackground(){const{ctx:o,options:{backgroundColor:s},left:_,top:$,width:et,height:tt}=this;s&&(o.save(),o.fillStyle=s,o.fillRect(_,$,et,tt),o.restore())}getLineWidthForValue(o){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const $=this.ticks.findIndex(et=>et.value===o);return $>=0?s.setContext(this.getContext($)).lineWidth:0}drawGrid(o){const s=this.options.grid,_=this.ctx,$=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(o));let et,tt;const j=(it,st,ht)=>{!ht.width||!ht.color||(_.save(),_.lineWidth=ht.width,_.strokeStyle=ht.color,_.setLineDash(ht.borderDash||[]),_.lineDashOffset=ht.borderDashOffset,_.beginPath(),_.moveTo(it.x,it.y),_.lineTo(st.x,st.y),_.stroke(),_.restore())};if(s.display)for(et=0,tt=$.length;et<tt;++et){const it=$[et];s.drawOnChartArea&&j({x:it.x1,y:it.y1},{x:it.x2,y:it.y2},it),s.drawTicks&&j({x:it.tx1,y:it.ty1},{x:it.tx2,y:it.ty2},{color:it.tickColor,width:it.tickWidth,borderDash:it.tickBorderDash,borderDashOffset:it.tickBorderDashOffset})}}drawBorder(){const{chart:o,ctx:s,options:{grid:_}}=this,$=_.setContext(this.getContext()),et=_.drawBorder?$.borderWidth:0;if(!et)return;const tt=_.setContext(this.getContext(0)).lineWidth,j=this._borderValue;let it,st,ht,_t;this.isHorizontal()?(it=_alignPixel(o,this.left,et)-et/2,st=_alignPixel(o,this.right,tt)+tt/2,ht=_t=j):(ht=_alignPixel(o,this.top,et)-et/2,_t=_alignPixel(o,this.bottom,tt)+tt/2,it=st=j),s.save(),s.lineWidth=$.borderWidth,s.strokeStyle=$.borderColor,s.beginPath(),s.moveTo(it,ht),s.lineTo(st,_t),s.stroke(),s.restore()}drawLabels(o){if(!this.options.ticks.display)return;const _=this.ctx,$=this._computeLabelArea();$&&clipArea(_,$);const et=this._labelItems||(this._labelItems=this._computeLabelItems(o));let tt,j;for(tt=0,j=et.length;tt<j;++tt){const it=et[tt],st=it.font,ht=it.label;it.backdrop&&(_.fillStyle=it.backdrop.color,_.fillRect(it.backdrop.left,it.backdrop.top,it.backdrop.width,it.backdrop.height));let _t=it.textOffset;renderText(_,ht,0,_t,st,it)}$&&unclipArea(_)}drawTitle(){const{ctx:o,options:{position:s,title:_,reverse:$}}=this;if(!_.display)return;const et=toFont(_.font),tt=toPadding(_.padding),j=_.align;let it=et.lineHeight/2;s==="bottom"||s==="center"||isObject(s)?(it+=tt.bottom,isArray(_.text)&&(it+=et.lineHeight*(_.text.length-1))):it+=tt.top;const{titleX:st,titleY:ht,maxWidth:_t,rotation:gt}=titleArgs(this,it,s,j);renderText(o,_.text,0,0,et,{color:_.color,maxWidth:_t,rotation:gt,textAlign:titleAlign(j,s,$),textBaseline:"middle",translation:[st,ht]})}draw(o){this._isVisible()&&(this.drawBackground(),this.drawGrid(o),this.drawBorder(),this.drawTitle(),this.drawLabels(o))}_layers(){const o=this.options,s=o.ticks&&o.ticks.z||0,_=valueOrDefault(o.grid&&o.grid.z,-1);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:s,draw:$=>{this.draw($)}}]:[{z:_,draw:$=>{this.drawBackground(),this.drawGrid($),this.drawTitle()}},{z:_+1,draw:()=>{this.drawBorder()}},{z:s,draw:$=>{this.drawLabels($)}}]}getMatchingVisibleMetas(o){const s=this.chart.getSortedVisibleDatasetMetas(),_=this.axis+"AxisID",$=[];let et,tt;for(et=0,tt=s.length;et<tt;++et){const j=s[et];j[_]===this.id&&(!o||j.type===o)&&$.push(j)}return $}_resolveTickFontOptions(o){const s=this.options.ticks.setContext(this.getContext(o));return toFont(s.font)}_maxDigits(){const o=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/o}}class TypedRegistry{constructor(o,s,_){this.type=o,this.scope=s,this.override=_,this.items=Object.create(null)}isForType(o){return Object.prototype.isPrototypeOf.call(this.type.prototype,o.prototype)}register(o){const s=Object.getPrototypeOf(o);let _;isIChartComponent(s)&&(_=this.register(s));const $=this.items,et=o.id,tt=this.scope+"."+et;if(!et)throw new Error("class does not have id: "+o);return et in $||($[et]=o,registerDefaults(o,tt,_),this.override&&defaults.override(o.id,o.overrides)),tt}get(o){return this.items[o]}unregister(o){const s=this.items,_=o.id,$=this.scope;_ in s&&delete s[_],$&&_ in defaults[$]&&(delete defaults[$][_],this.override&&delete overrides[_])}}function registerDefaults(i,o,s){const _=merge(Object.create(null),[s?defaults.get(s):{},defaults.get(o),i.defaults]);defaults.set(o,_),i.defaultRoutes&&routeDefaults(o,i.defaultRoutes),i.descriptors&&defaults.describe(o,i.descriptors)}function routeDefaults(i,o){Object.keys(o).forEach(s=>{const _=s.split("."),$=_.pop(),et=[i].concat(_).join("."),tt=o[s].split("."),j=tt.pop(),it=tt.join(".");defaults.route(et,$,it,j)})}function isIChartComponent(i){return"id"in i&&"defaults"in i}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...o){this._each("register",o)}remove(...o){this._each("unregister",o)}addControllers(...o){this._each("register",o,this.controllers)}addElements(...o){this._each("register",o,this.elements)}addPlugins(...o){this._each("register",o,this.plugins)}addScales(...o){this._each("register",o,this.scales)}getController(o){return this._get(o,this.controllers,"controller")}getElement(o){return this._get(o,this.elements,"element")}getPlugin(o){return this._get(o,this.plugins,"plugin")}getScale(o){return this._get(o,this.scales,"scale")}removeControllers(...o){this._each("unregister",o,this.controllers)}removeElements(...o){this._each("unregister",o,this.elements)}removePlugins(...o){this._each("unregister",o,this.plugins)}removeScales(...o){this._each("unregister",o,this.scales)}_each(o,s,_){[...s].forEach($=>{const et=_||this._getRegistryForType($);_||et.isForType($)||et===this.plugins&&$.id?this._exec(o,et,$):each($,tt=>{const j=_||this._getRegistryForType(tt);this._exec(o,j,tt)})})}_exec(o,s,_){const $=_capitalize(o);callback(_["before"+$],[],_),s[o](_),callback(_["after"+$],[],_)}_getRegistryForType(o){for(let s=0;s<this._typedRegistries.length;s++){const _=this._typedRegistries[s];if(_.isForType(o))return _}return this.plugins}_get(o,s,_){const $=s.get(o);if($===void 0)throw new Error('"'+o+'" is not a registered '+_+".");return $}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(o,s,_,$){s==="beforeInit"&&(this._init=this._createDescriptors(o,!0),this._notify(this._init,o,"install"));const et=$?this._descriptors(o).filter($):this._descriptors(o),tt=this._notify(et,o,s,_);return s==="afterDestroy"&&(this._notify(et,o,"stop"),this._notify(this._init,o,"uninstall")),tt}_notify(o,s,_,$){$=$||{};for(const et of o){const tt=et.plugin,j=tt[_],it=[s,$,et.options];if(callback(j,it,tt)===!1&&$.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(o){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(o);return this._notifyStateChanges(o),s}_createDescriptors(o,s){const _=o&&o.config,$=valueOrDefault(_.options&&_.options.plugins,{}),et=allPlugins(_);return $===!1&&!s?[]:createDescriptors(o,et,$,s)}_notifyStateChanges(o){const s=this._oldCache||[],_=this._cache,$=(et,tt)=>et.filter(j=>!tt.some(it=>j.plugin.id===it.plugin.id));this._notify($(s,_),o,"stop"),this._notify($(_,s),o,"start")}}function allPlugins(i){const o=[],s=Object.keys(registry.plugins.items);for(let $=0;$<s.length;$++)o.push(registry.getPlugin(s[$]));const _=i.plugins||[];for(let $=0;$<_.length;$++){const et=_[$];o.indexOf(et)===-1&&o.push(et)}return o}function getOpts(i,o){return!o&&i===!1?null:i===!0?{}:i}function createDescriptors(i,o,s,_){const $=[],et=i.getContext();for(let tt=0;tt<o.length;tt++){const j=o[tt],it=j.id,st=getOpts(s[it],_);st!==null&&$.push({plugin:j,options:pluginOpts(i.config,j,st,et)})}return $}function pluginOpts(i,o,s,_){const $=i.pluginScopeKeys(o),et=i.getOptionScopes(s,$);return i.createResolver(et,_,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(i,o){const s=defaults.datasets[i]||{};return((o.datasets||{})[i]||{}).indexAxis||o.indexAxis||s.indexAxis||"x"}function getAxisFromDefaultScaleID(i,o){let s=i;return i==="_index_"?s=o:i==="_value_"&&(s=o==="x"?"y":"x"),s}function getDefaultScaleIDFromAxis(i,o){return i===o?"_index_":"_value_"}function axisFromPosition(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function determineAxis(i,o){return i==="x"||i==="y"?i:o.axis||axisFromPosition(o.position)||i.charAt(0).toLowerCase()}function mergeScaleConfig(i,o){const s=overrides[i.type]||{scales:{}},_=o.scales||{},$=getIndexAxis(i.type,o),et=Object.create(null),tt=Object.create(null);return Object.keys(_).forEach(j=>{const it=_[j];if(!isObject(it))return console.error(`Invalid scale configuration for scale: ${j}`);if(it._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${j}`);const st=determineAxis(j,it),ht=getDefaultScaleIDFromAxis(st,$),_t=s.scales||{};et[st]=et[st]||j,tt[j]=mergeIf(Object.create(null),[{axis:st},it,_t[st],_t[ht]])}),i.data.datasets.forEach(j=>{const it=j.type||i.type,st=j.indexAxis||getIndexAxis(it,o),_t=(overrides[it]||{}).scales||{};Object.keys(_t).forEach(gt=>{const ft=getAxisFromDefaultScaleID(gt,st),ut=j[ft+"AxisID"]||et[ft]||ft;tt[ut]=tt[ut]||Object.create(null),mergeIf(tt[ut],[{axis:ft},_[ut],_t[gt]])})}),Object.keys(tt).forEach(j=>{const it=tt[j];mergeIf(it,[defaults.scales[it.type],defaults.scale])}),tt}function initOptions(i){const o=i.options||(i.options={});o.plugins=valueOrDefault(o.plugins,{}),o.scales=mergeScaleConfig(i,o)}function initData(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function initConfig(i){return i=i||{},i.data=initData(i.data),initOptions(i),i}const keyCache=new Map,keysCached=new Set;function cachedKeys(i,o){let s=keyCache.get(i);return s||(s=o(),keyCache.set(i,s),keysCached.add(s)),s}const addIfFound=(i,o,s)=>{const _=resolveObjectKey(o,s);_!==void 0&&i.add(_)};class Config{constructor(o){this._config=initConfig(o),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(o){this._config.type=o}get data(){return this._config.data}set data(o){this._config.data=initData(o)}get options(){return this._config.options}set options(o){this._config.options=o}get plugins(){return this._config.plugins}update(){const o=this._config;this.clearCache(),initOptions(o)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(o){return cachedKeys(o,()=>[[`datasets.${o}`,""]])}datasetAnimationScopeKeys(o,s){return cachedKeys(`${o}.transition.${s}`,()=>[[`datasets.${o}.transitions.${s}`,`transitions.${s}`],[`datasets.${o}`,""]])}datasetElementScopeKeys(o,s){return cachedKeys(`${o}-${s}`,()=>[[`datasets.${o}.elements.${s}`,`datasets.${o}`,`elements.${s}`,""]])}pluginScopeKeys(o){const s=o.id,_=this.type;return cachedKeys(`${_}-plugin-${s}`,()=>[[`plugins.${s}`,...o.additionalOptionScopes||[]]])}_cachedScopes(o,s){const _=this._scopeCache;let $=_.get(o);return(!$||s)&&($=new Map,_.set(o,$)),$}getOptionScopes(o,s,_){const{options:$,type:et}=this,tt=this._cachedScopes(o,_),j=tt.get(s);if(j)return j;const it=new Set;s.forEach(ht=>{o&&(it.add(o),ht.forEach(_t=>addIfFound(it,o,_t))),ht.forEach(_t=>addIfFound(it,$,_t)),ht.forEach(_t=>addIfFound(it,overrides[et]||{},_t)),ht.forEach(_t=>addIfFound(it,defaults,_t)),ht.forEach(_t=>addIfFound(it,descriptors,_t))});const st=Array.from(it);return st.length===0&&st.push(Object.create(null)),keysCached.has(s)&&tt.set(s,st),st}chartOptionScopes(){const{options:o,type:s}=this;return[o,overrides[s]||{},defaults.datasets[s]||{},{type:s},defaults,descriptors]}resolveNamedOptions(o,s,_,$=[""]){const et={$shared:!0},{resolver:tt,subPrefixes:j}=getResolver(this._resolverCache,o,$);let it=tt;if(needContext(tt,s)){et.$shared=!1,_=isFunction(_)?_():_;const st=this.createResolver(o,_,j);it=_attachContext(tt,_,st)}for(const st of s)et[st]=it[st];return et}createResolver(o,s,_=[""],$){const{resolver:et}=getResolver(this._resolverCache,o,_);return isObject(s)?_attachContext(et,s,void 0,$):et}}function getResolver(i,o,s){let _=i.get(o);_||(_=new Map,i.set(o,_));const $=s.join();let et=_.get($);return et||(et={resolver:_createResolver(o,s),subPrefixes:s.filter(j=>!j.toLowerCase().includes("hover"))},_.set($,et)),et}const hasFunction=i=>isObject(i)&&Object.getOwnPropertyNames(i).reduce((o,s)=>o||isFunction(i[s]),!1);function needContext(i,o){const{isScriptable:s,isIndexable:_}=_descriptors(i);for(const $ of o){const et=s($),tt=_($),j=(tt||et)&&i[$];if(et&&(isFunction(j)||hasFunction(j))||tt&&isArray(j))return!0}return!1}var version="3.7.1";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(i,o){return i==="top"||i==="bottom"||KNOWN_POSITIONS.indexOf(i)===-1&&o==="x"}function compare2Level(i,o){return function(s,_){return s[i]===_[i]?s[o]-_[o]:s[i]-_[i]}}function onAnimationsComplete(i){const o=i.chart,s=o.options.animation;o.notifyPlugins("afterRender"),callback(s&&s.onComplete,[i],o)}function onAnimationProgress(i){const o=i.chart,s=o.options.animation;callback(s&&s.onProgress,[i],o)}function getCanvas(i){return _isDomSupported()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const instances={},getChart=i=>{const o=getCanvas(i);return Object.values(instances).filter(s=>s.canvas===o).pop()};function moveNumericKeys(i,o,s){const _=Object.keys(i);for(const $ of _){const et=+$;if(et>=o){const tt=i[$];delete i[$],(s>0||et>o)&&(i[et+s]=tt)}}}function determineLastEvent(i,o,s,_){return!s||i.type==="mouseout"?null:_?o:i}class Chart$1{constructor(o,s){const _=this.config=new Config(s),$=getCanvas(o),et=getChart($);if(et)throw new Error("Canvas is already in use. Chart with ID '"+et.id+"' must be destroyed before the canvas can be reused.");const tt=_.createResolver(_.chartOptionScopes(),this.getContext());this.platform=new(_.platform||_detectPlatform($)),this.platform.updateConfig(_);const j=this.platform.acquireContext($,tt.aspectRatio),it=j&&j.canvas,st=it&&it.height,ht=it&&it.width;if(this.id=uid(),this.ctx=j,this.canvas=it,this.width=ht,this.height=st,this._options=tt,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(_t=>this.update(_t),tt.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!j||!it){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:o,maintainAspectRatio:s},width:_,height:$,_aspectRatio:et}=this;return isNullOrUndef(o)?s&&et?et:$?_/$:null:o}get data(){return this.config.data}set data(o){this.config.data=o}get options(){return this._options}set options(o){this.config.options=o}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(o,s){animator.running(this)?this._resizeBeforeDraw={width:o,height:s}:this._resize(o,s)}_resize(o,s){const _=this.options,$=this.canvas,et=_.maintainAspectRatio&&this.aspectRatio,tt=this.platform.getMaximumSize($,o,s,et),j=_.devicePixelRatio||this.platform.getDevicePixelRatio(),it=this.width?"resize":"attach";this.width=tt.width,this.height=tt.height,this._aspectRatio=this.aspectRatio,retinaScale(this,j,!0)&&(this.notifyPlugins("resize",{size:tt}),callback(_.onResize,[this,tt],this),this.attached&&this._doResize(it)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};each(s,(_,$)=>{_.id=$})}buildOrUpdateScales(){const o=this.options,s=o.scales,_=this.scales,$=Object.keys(_).reduce((tt,j)=>(tt[j]=!1,tt),{});let et=[];s&&(et=et.concat(Object.keys(s).map(tt=>{const j=s[tt],it=determineAxis(tt,j),st=it==="r",ht=it==="x";return{options:j,dposition:st?"chartArea":ht?"bottom":"left",dtype:st?"radialLinear":ht?"category":"linear"}}))),each(et,tt=>{const j=tt.options,it=j.id,st=determineAxis(it,j),ht=valueOrDefault(j.type,tt.dtype);(j.position===void 0||positionIsHorizontal(j.position,st)!==positionIsHorizontal(tt.dposition))&&(j.position=tt.dposition),$[it]=!0;let _t=null;if(it in _&&_[it].type===ht)_t=_[it];else{const gt=registry.getScale(ht);_t=new gt({id:it,type:ht,ctx:this.ctx,chart:this}),_[_t.id]=_t}_t.init(j,o)}),each($,(tt,j)=>{tt||delete _[j]}),each(_,tt=>{layouts.configure(this,tt,tt.options),layouts.addBox(this,tt)})}_updateMetasets(){const o=this._metasets,s=this.data.datasets.length,_=o.length;if(o.sort(($,et)=>$.index-et.index),_>s){for(let $=s;$<_;++$)this._destroyDatasetMeta($);o.splice(s,_-s)}this._sortedMetasets=o.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:o,data:{datasets:s}}=this;o.length>s.length&&delete this._stacks,o.forEach((_,$)=>{s.filter(et=>et===_._dataset).length===0&&this._destroyDatasetMeta($)})}buildOrUpdateControllers(){const o=[],s=this.data.datasets;let _,$;for(this._removeUnreferencedMetasets(),_=0,$=s.length;_<$;_++){const et=s[_];let tt=this.getDatasetMeta(_);const j=et.type||this.config.type;if(tt.type&&tt.type!==j&&(this._destroyDatasetMeta(_),tt=this.getDatasetMeta(_)),tt.type=j,tt.indexAxis=et.indexAxis||getIndexAxis(j,this.options),tt.order=et.order||0,tt.index=_,tt.label=""+et.label,tt.visible=this.isDatasetVisible(_),tt.controller)tt.controller.updateIndex(_),tt.controller.linkScales();else{const it=registry.getController(j),{datasetElementType:st,dataElementType:ht}=defaults.datasets[j];Object.assign(it.prototype,{dataElementType:registry.getElement(ht),datasetElementType:st&&registry.getElement(st)}),tt.controller=new it(this,_),o.push(tt.controller)}}return this._updateMetasets(),o}_resetElements(){each(this.data.datasets,(o,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(o){const s=this.config;s.update();const _=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),$=this._animationsDisabled=!_.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:o,cancelable:!0})===!1)return;const et=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let tt=0;for(let st=0,ht=this.data.datasets.length;st<ht;st++){const{controller:_t}=this.getDatasetMeta(st),gt=!$&&et.indexOf(_t)===-1;_t.buildOrUpdateElements(gt),tt=Math.max(+_t.getMaxOverflow(),tt)}tt=this._minPadding=_.layout.autoPadding?tt:0,this._updateLayout(tt),$||each(et,st=>{st.reset()}),this._updateDatasets(o),this.notifyPlugins("afterUpdate",{mode:o}),this._layers.sort(compare2Level("z","_idx"));const{_active:j,_lastEvent:it}=this;it?this._eventHandler(it,!0):j.length&&this._updateHoverStyles(j,j,!0),this.render()}_updateScales(){each(this.scales,o=>{layouts.removeBox(this,o)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const o=this.options,s=new Set(Object.keys(this._listeners)),_=new Set(o.events);(!setsEqual(s,_)||!!this._responsiveListeners!==o.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:o}=this,s=this._getUniformDataChanges()||[];for(const{method:_,start:$,count:et}of s){const tt=_==="_removeElements"?-et:et;moveNumericKeys(o,$,tt)}}_getUniformDataChanges(){const o=this._dataChanges;if(!o||!o.length)return;this._dataChanges=[];const s=this.data.datasets.length,_=et=>new Set(o.filter(tt=>tt[0]===et).map((tt,j)=>j+","+tt.splice(1).join(","))),$=_(0);for(let et=1;et<s;et++)if(!setsEqual($,_(et)))return;return Array.from($).map(et=>et.split(",")).map(et=>({method:et[1],start:+et[2],count:+et[3]}))}_updateLayout(o){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,o);const s=this.chartArea,_=s.width<=0||s.height<=0;this._layers=[],each(this.boxes,$=>{_&&$.position==="chartArea"||($.configure&&$.configure(),this._layers.push(...$._layers()))},this),this._layers.forEach(($,et)=>{$._idx=et}),this.notifyPlugins("afterLayout")}_updateDatasets(o){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:o,cancelable:!0})!==!1){for(let s=0,_=this.data.datasets.length;s<_;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,_=this.data.datasets.length;s<_;++s)this._updateDataset(s,isFunction(o)?o({datasetIndex:s}):o);this.notifyPlugins("afterDatasetsUpdate",{mode:o})}}_updateDataset(o,s){const _=this.getDatasetMeta(o),$={meta:_,index:o,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",$)!==!1&&(_.controller._update(s),$.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",$))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let o;if(this._resizeBeforeDraw){const{width:_,height:$}=this._resizeBeforeDraw;this._resize(_,$),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(o=0;o<s.length&&s[o].z<=0;++o)s[o].draw(this.chartArea);for(this._drawDatasets();o<s.length;++o)s[o].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(o){const s=this._sortedMetasets,_=[];let $,et;for($=0,et=s.length;$<et;++$){const tt=s[$];(!o||tt.visible)&&_.push(tt)}return _}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const o=this.getSortedVisibleDatasetMetas();for(let s=o.length-1;s>=0;--s)this._drawDataset(o[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(o){const s=this.ctx,_=o._clip,$=!_.disabled,et=this.chartArea,tt={meta:o,index:o.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",tt)!==!1&&($&&clipArea(s,{left:_.left===!1?0:et.left-_.left,right:_.right===!1?this.width:et.right+_.right,top:_.top===!1?0:et.top-_.top,bottom:_.bottom===!1?this.height:et.bottom+_.bottom}),o.controller.draw(),$&&unclipArea(s),tt.cancelable=!1,this.notifyPlugins("afterDatasetDraw",tt))}getElementsAtEventForMode(o,s,_,$){const et=Interaction.modes[s];return typeof et=="function"?et(this,o,_,$):[]}getDatasetMeta(o){const s=this.data.datasets[o],_=this._metasets;let $=_.filter(et=>et&&et._dataset===s).pop();return $||($={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:o,_dataset:s,_parsed:[],_sorted:!1},_.push($)),$}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(o){const s=this.data.datasets[o];if(!s)return!1;const _=this.getDatasetMeta(o);return typeof _.hidden=="boolean"?!_.hidden:!s.hidden}setDatasetVisibility(o,s){const _=this.getDatasetMeta(o);_.hidden=!s}toggleDataVisibility(o){this._hiddenIndices[o]=!this._hiddenIndices[o]}getDataVisibility(o){return!this._hiddenIndices[o]}_updateVisibility(o,s,_){const $=_?"show":"hide",et=this.getDatasetMeta(o),tt=et.controller._resolveAnimations(void 0,$);defined$2(s)?(et.data[s].hidden=!_,this.update()):(this.setDatasetVisibility(o,_),tt.update(et,{visible:_}),this.update(j=>j.datasetIndex===o?$:void 0))}hide(o,s){this._updateVisibility(o,s,!1)}show(o,s){this._updateVisibility(o,s,!0)}_destroyDatasetMeta(o){const s=this._metasets[o];s&&s.controller&&s.controller._destroy(),delete this._metasets[o]}_stop(){let o,s;for(this.stop(),animator.remove(this),o=0,s=this.data.datasets.length;o<s;++o)this._destroyDatasetMeta(o)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:o,ctx:s}=this;this._stop(),this.config.clearCache(),o&&(this.unbindEvents(),clearCanvas(o,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...o){return this.canvas.toDataURL(...o)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const o=this._listeners,s=this.platform,_=(et,tt)=>{s.addEventListener(this,et,tt),o[et]=tt},$=(et,tt,j)=>{et.offsetX=tt,et.offsetY=j,this._eventHandler(et)};each(this.options.events,et=>_(et,$))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const o=this._responsiveListeners,s=this.platform,_=(it,st)=>{s.addEventListener(this,it,st),o[it]=st},$=(it,st)=>{o[it]&&(s.removeEventListener(this,it,st),delete o[it])},et=(it,st)=>{this.canvas&&this.resize(it,st)};let tt;const j=()=>{$("attach",j),this.attached=!0,this.resize(),_("resize",et),_("detach",tt)};tt=()=>{this.attached=!1,$("resize",et),this._stop(),this._resize(0,0),_("attach",j)},s.isAttached(this.canvas)?j():tt()}unbindEvents(){each(this._listeners,(o,s)=>{this.platform.removeEventListener(this,s,o)}),this._listeners={},each(this._responsiveListeners,(o,s)=>{this.platform.removeEventListener(this,s,o)}),this._responsiveListeners=void 0}updateHoverStyle(o,s,_){const $=_?"set":"remove";let et,tt,j,it;for(s==="dataset"&&(et=this.getDatasetMeta(o[0].datasetIndex),et.controller["_"+$+"DatasetHoverStyle"]()),j=0,it=o.length;j<it;++j){tt=o[j];const st=tt&&this.getDatasetMeta(tt.datasetIndex).controller;st&&st[$+"HoverStyle"](tt.element,tt.datasetIndex,tt.index)}}getActiveElements(){return this._active||[]}setActiveElements(o){const s=this._active||[],_=o.map(({datasetIndex:et,index:tt})=>{const j=this.getDatasetMeta(et);if(!j)throw new Error("No dataset found at index "+et);return{datasetIndex:et,element:j.data[tt],index:tt}});!_elementsEqual(_,s)&&(this._active=_,this._lastEvent=null,this._updateHoverStyles(_,s))}notifyPlugins(o,s,_){return this._plugins.notify(this,o,s,_)}_updateHoverStyles(o,s,_){const $=this.options.hover,et=(it,st)=>it.filter(ht=>!st.some(_t=>ht.datasetIndex===_t.datasetIndex&&ht.index===_t.index)),tt=et(s,o),j=_?o:et(o,s);tt.length&&this.updateHoverStyle(tt,$.mode,!1),j.length&&$.mode&&this.updateHoverStyle(j,$.mode,!0)}_eventHandler(o,s){const _={event:o,replay:s,cancelable:!0,inChartArea:_isPointInArea(o,this.chartArea,this._minPadding)},$=tt=>(tt.options.events||this.options.events).includes(o.native.type);if(this.notifyPlugins("beforeEvent",_,$)===!1)return;const et=this._handleEvent(o,s,_.inChartArea);return _.cancelable=!1,this.notifyPlugins("afterEvent",_,$),(et||_.changed)&&this.render(),this}_handleEvent(o,s,_){const{_active:$=[],options:et}=this,tt=s,j=this._getActiveElements(o,$,_,tt),it=_isClickEvent(o),st=determineLastEvent(o,this._lastEvent,_,it);_&&(this._lastEvent=null,callback(et.onHover,[o,j,this],this),it&&callback(et.onClick,[o,j,this],this));const ht=!_elementsEqual(j,$);return(ht||s)&&(this._active=j,this._updateHoverStyles(j,$,s)),this._lastEvent=st,ht}_getActiveElements(o,s,_,$){if(o.type==="mouseout")return[];if(!_)return s;const et=this.options.hover;return this.getElementsAtEventForMode(o,et.mode,et,$)}}const invalidatePlugins=()=>each(Chart$1.instances,i=>i._plugins.invalidate()),enumerable=!0;Object.defineProperties(Chart$1,{defaults:{enumerable,value:defaults},instances:{enumerable,value:instances},overrides:{enumerable,value:overrides},registry:{enumerable,value:registry},version:{enumerable,value:version},getChart:{enumerable,value:getChart},register:{enumerable,value:(...i)=>{registry.add(...i),invalidatePlugins()}},unregister:{enumerable,value:(...i)=>{registry.remove(...i),invalidatePlugins()}}});function clipArc(i,o,s){const{startAngle:_,pixelMargin:$,x:et,y:tt,outerRadius:j,innerRadius:it}=o;let st=$/j;i.beginPath(),i.arc(et,tt,j,_-st,s+st),it>$?(st=$/it,i.arc(et,tt,it,s+st,_-st,!0)):i.arc(et,tt,$,s+HALF_PI,_-HALF_PI),i.closePath(),i.clip()}function toRadiusCorners(i){return _readValueToProps(i,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(i,o,s,_){const $=toRadiusCorners(i.options.borderRadius),et=(s-o)/2,tt=Math.min(et,_*o/2),j=it=>{const st=(s-Math.min(et,it))*_/2;return _limitValue(it,0,Math.min(et,st))};return{outerStart:j($.outerStart),outerEnd:j($.outerEnd),innerStart:_limitValue($.innerStart,0,tt),innerEnd:_limitValue($.innerEnd,0,tt)}}function rThetaToXY(i,o,s,_){return{x:s+i*Math.cos(o),y:_+i*Math.sin(o)}}function pathArc(i,o,s,_,$){const{x:et,y:tt,startAngle:j,pixelMargin:it,innerRadius:st}=o,ht=Math.max(o.outerRadius+_+s-it,0),_t=st>0?st+_+s+it:0;let gt=0;const ft=$-j;if(_){const Ut=st>0?st-_:0,Ht=ht>0?ht-_:0,qt=(Ut+Ht)/2,Pt=qt!==0?ft*qt/(qt+_):ft;gt=(ft-Pt)/2}const ut=Math.max(.001,ft*ht-s/PI)/ht,yt=(ft-ut)/2,Et=j+yt+gt,Mt=$-yt-gt,{outerStart:Ft,outerEnd:Rt,innerStart:Ot,innerEnd:pt}=parseBorderRadius$1(o,_t,ht,Mt-Et),Lt=ht-Ft,nn=ht-Rt,on=Et+Ft/Lt,wt=Mt-Rt/nn,xt=_t+Ot,Nt=_t+pt,Tt=Et+Ot/xt,Vt=Mt-pt/Nt;if(i.beginPath(),i.arc(et,tt,ht,on,wt),Rt>0){const Ut=rThetaToXY(nn,wt,et,tt);i.arc(Ut.x,Ut.y,Rt,wt,Mt+HALF_PI)}const Xt=rThetaToXY(Nt,Mt,et,tt);if(i.lineTo(Xt.x,Xt.y),pt>0){const Ut=rThetaToXY(Nt,Vt,et,tt);i.arc(Ut.x,Ut.y,pt,Mt+HALF_PI,Vt+Math.PI)}if(i.arc(et,tt,_t,Mt-pt/_t,Et+Ot/_t,!0),Ot>0){const Ut=rThetaToXY(xt,Tt,et,tt);i.arc(Ut.x,Ut.y,Ot,Tt+Math.PI,Et-HALF_PI)}const Gt=rThetaToXY(Lt,Et,et,tt);if(i.lineTo(Gt.x,Gt.y),Ft>0){const Ut=rThetaToXY(Lt,on,et,tt);i.arc(Ut.x,Ut.y,Ft,Et-HALF_PI,on)}i.closePath()}function drawArc(i,o,s,_){const{fullCircles:$,startAngle:et,circumference:tt}=o;let j=o.endAngle;if($){pathArc(i,o,s,_,et+TAU);for(let it=0;it<$;++it)i.fill();isNaN(tt)||(j=et+tt%TAU,tt%TAU===0&&(j+=TAU))}return pathArc(i,o,s,_,j),i.fill(),j}function drawFullCircleBorders(i,o,s){const{x:_,y:$,startAngle:et,pixelMargin:tt,fullCircles:j}=o,it=Math.max(o.outerRadius-tt,0),st=o.innerRadius+tt;let ht;for(s&&clipArc(i,o,et+TAU),i.beginPath(),i.arc(_,$,st,et+TAU,et,!0),ht=0;ht<j;++ht)i.stroke();for(i.beginPath(),i.arc(_,$,it,et,et+TAU),ht=0;ht<j;++ht)i.stroke()}function drawBorder(i,o,s,_,$){const{options:et}=o,{borderWidth:tt,borderJoinStyle:j}=et,it=et.borderAlign==="inner";tt&&(it?(i.lineWidth=tt*2,i.lineJoin=j||"round"):(i.lineWidth=tt,i.lineJoin=j||"bevel"),o.fullCircles&&drawFullCircleBorders(i,o,it),it&&clipArc(i,o,$),pathArc(i,o,s,_,$),i.stroke())}class ArcElement extends Element{constructor(o){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,o&&Object.assign(this,o)}inRange(o,s,_){const $=this.getProps(["x","y"],_),{angle:et,distance:tt}=getAngleFromPoint($,{x:o,y:s}),{startAngle:j,endAngle:it,innerRadius:st,outerRadius:ht,circumference:_t}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],_),gt=this.options.spacing/2,ut=valueOrDefault(_t,it-j)>=TAU||_angleBetween(et,j,it),yt=_isBetween(tt,st+gt,ht+gt);return ut&&yt}getCenterPoint(o){const{x:s,y:_,startAngle:$,endAngle:et,innerRadius:tt,outerRadius:j}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],o),{offset:it,spacing:st}=this.options,ht=($+et)/2,_t=(tt+j+st+it)/2;return{x:s+Math.cos(ht)*_t,y:_+Math.sin(ht)*_t}}tooltipPosition(o){return this.getCenterPoint(o)}draw(o){const{options:s,circumference:_}=this,$=(s.offset||0)/2,et=(s.spacing||0)/2;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=_>TAU?Math.floor(_/TAU):0,_===0||this.innerRadius<0||this.outerRadius<0)return;o.save();let tt=0;if($){tt=$/2;const it=(this.startAngle+this.endAngle)/2;o.translate(Math.cos(it)*tt,Math.sin(it)*tt),this.circumference>=PI&&(tt=$)}o.fillStyle=s.backgroundColor,o.strokeStyle=s.borderColor;const j=drawArc(o,this,tt,et);drawBorder(o,this,tt,et,j),o.restore()}}ArcElement.id="arc";ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};function setStyle(i,o,s=o){i.lineCap=valueOrDefault(s.borderCapStyle,o.borderCapStyle),i.setLineDash(valueOrDefault(s.borderDash,o.borderDash)),i.lineDashOffset=valueOrDefault(s.borderDashOffset,o.borderDashOffset),i.lineJoin=valueOrDefault(s.borderJoinStyle,o.borderJoinStyle),i.lineWidth=valueOrDefault(s.borderWidth,o.borderWidth),i.strokeStyle=valueOrDefault(s.borderColor,o.borderColor)}function lineTo(i,o,s){i.lineTo(s.x,s.y)}function getLineMethod(i){return i.stepped?_steppedLineTo:i.tension||i.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(i,o,s={}){const _=i.length,{start:$=0,end:et=_-1}=s,{start:tt,end:j}=o,it=Math.max($,tt),st=Math.min(et,j),ht=$<tt&&et<tt||$>j&&et>j;return{count:_,start:it,loop:o.loop,ilen:st<it&&!ht?_+st-it:st-it}}function pathSegment(i,o,s,_){const{points:$,options:et}=o,{count:tt,start:j,loop:it,ilen:st}=pathVars($,s,_),ht=getLineMethod(et);let{move:_t=!0,reverse:gt}=_||{},ft,ut,yt;for(ft=0;ft<=st;++ft)ut=$[(j+(gt?st-ft:ft))%tt],!ut.skip&&(_t?(i.moveTo(ut.x,ut.y),_t=!1):ht(i,yt,ut,gt,et.stepped),yt=ut);return it&&(ut=$[(j+(gt?st:0))%tt],ht(i,yt,ut,gt,et.stepped)),!!it}function fastPathSegment(i,o,s,_){const $=o.points,{count:et,start:tt,ilen:j}=pathVars($,s,_),{move:it=!0,reverse:st}=_||{};let ht=0,_t=0,gt,ft,ut,yt,Et,Mt;const Ft=Ot=>(tt+(st?j-Ot:Ot))%et,Rt=()=>{yt!==Et&&(i.lineTo(ht,Et),i.lineTo(ht,yt),i.lineTo(ht,Mt))};for(it&&(ft=$[Ft(0)],i.moveTo(ft.x,ft.y)),gt=0;gt<=j;++gt){if(ft=$[Ft(gt)],ft.skip)continue;const Ot=ft.x,pt=ft.y,Lt=Ot|0;Lt===ut?(pt<yt?yt=pt:pt>Et&&(Et=pt),ht=(_t*ht+Ot)/++_t):(Rt(),i.lineTo(Ot,pt),ut=Lt,_t=0,yt=Et=pt),Mt=pt}Rt()}function _getSegmentMethod(i){const o=i.options,s=o.borderDash&&o.borderDash.length;return!i._decimated&&!i._loop&&!o.tension&&o.cubicInterpolationMode!=="monotone"&&!o.stepped&&!s?fastPathSegment:pathSegment}function _getInterpolationMethod(i){return i.stepped?_steppedInterpolation:i.tension||i.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(i,o,s,_){let $=o._path;$||($=o._path=new Path2D,o.path($,s,_)&&$.closePath()),setStyle(i,o.options),i.stroke($)}function strokePathDirect(i,o,s,_){const{segments:$,options:et}=o,tt=_getSegmentMethod(o);for(const j of $)setStyle(i,et,j.style),i.beginPath(),tt(i,o,j,{start:s,end:s+_-1})&&i.closePath(),i.stroke()}const usePath2D=typeof Path2D=="function";function draw(i,o,s,_){usePath2D&&!o.options.segment?strokePathWithCache(i,o,s,_):strokePathDirect(i,o,s,_)}class LineElement extends Element{constructor(o){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,o&&Object.assign(this,o)}updateControlPoints(o,s){const _=this.options;if((_.tension||_.cubicInterpolationMode==="monotone")&&!_.stepped&&!this._pointsUpdated){const $=_.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,_,o,$,s),this._pointsUpdated=!0}}set points(o){this._points=o,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const o=this.segments,s=this.points;return o.length&&s[o[0].start]}last(){const o=this.segments,s=this.points,_=o.length;return _&&s[o[_-1].end]}interpolate(o,s){const _=this.options,$=o[s],et=this.points,tt=_boundSegments(this,{property:s,start:$,end:$});if(!tt.length)return;const j=[],it=_getInterpolationMethod(_);let st,ht;for(st=0,ht=tt.length;st<ht;++st){const{start:_t,end:gt}=tt[st],ft=et[_t],ut=et[gt];if(ft===ut){j.push(ft);continue}const yt=Math.abs(($-ft[s])/(ut[s]-ft[s])),Et=it(ft,ut,yt,_.stepped);Et[s]=o[s],j.push(Et)}return j.length===1?j[0]:j}pathSegment(o,s,_){return _getSegmentMethod(this)(o,this,s,_)}path(o,s,_){const $=this.segments,et=_getSegmentMethod(this);let tt=this._loop;s=s||0,_=_||this.points.length-s;for(const j of $)tt&=et(o,this,j,{start:s,end:s+_-1});return!!tt}draw(o,s,_,$){const et=this.options||{};(this.points||[]).length&&et.borderWidth&&(o.save(),draw(o,this,_,$),o.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}LineElement.id="line";LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};LineElement.descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"&&i!=="fill"};function inRange$1(i,o,s,_){const $=i.options,{[s]:et}=i.getProps([s],_);return Math.abs(o-et)<$.radius+$.hitRadius}class PointElement extends Element{constructor(o){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,o&&Object.assign(this,o)}inRange(o,s,_){const $=this.options,{x:et,y:tt}=this.getProps(["x","y"],_);return Math.pow(o-et,2)+Math.pow(s-tt,2)<Math.pow($.hitRadius+$.radius,2)}inXRange(o,s){return inRange$1(this,o,"x",s)}inYRange(o,s){return inRange$1(this,o,"y",s)}getCenterPoint(o){const{x:s,y:_}=this.getProps(["x","y"],o);return{x:s,y:_}}size(o){o=o||this.options||{};let s=o.radius||0;s=Math.max(s,s&&o.hoverRadius||0);const _=s&&o.borderWidth||0;return(s+_)*2}draw(o,s){const _=this.options;this.skip||_.radius<.1||!_isPointInArea(this,s,this.size(_)/2)||(o.strokeStyle=_.borderColor,o.lineWidth=_.borderWidth,o.fillStyle=_.backgroundColor,drawPoint(o,_,this.x,this.y))}getRange(){const o=this.options||{};return o.radius+o.hitRadius}}PointElement.id="point";PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function getBarBounds(i,o){const{x:s,y:_,base:$,width:et,height:tt}=i.getProps(["x","y","base","width","height"],o);let j,it,st,ht,_t;return i.horizontal?(_t=tt/2,j=Math.min(s,$),it=Math.max(s,$),st=_-_t,ht=_+_t):(_t=et/2,j=s-_t,it=s+_t,st=Math.min(_,$),ht=Math.max(_,$)),{left:j,top:st,right:it,bottom:ht}}function skipOrLimit(i,o,s,_){return i?0:_limitValue(o,s,_)}function parseBorderWidth(i,o,s){const _=i.options.borderWidth,$=i.borderSkipped,et=toTRBL(_);return{t:skipOrLimit($.top,et.top,0,s),r:skipOrLimit($.right,et.right,0,o),b:skipOrLimit($.bottom,et.bottom,0,s),l:skipOrLimit($.left,et.left,0,o)}}function parseBorderRadius(i,o,s){const{enableBorderRadius:_}=i.getProps(["enableBorderRadius"]),$=i.options.borderRadius,et=toTRBLCorners($),tt=Math.min(o,s),j=i.borderSkipped,it=_||isObject($);return{topLeft:skipOrLimit(!it||j.top||j.left,et.topLeft,0,tt),topRight:skipOrLimit(!it||j.top||j.right,et.topRight,0,tt),bottomLeft:skipOrLimit(!it||j.bottom||j.left,et.bottomLeft,0,tt),bottomRight:skipOrLimit(!it||j.bottom||j.right,et.bottomRight,0,tt)}}function boundingRects(i){const o=getBarBounds(i),s=o.right-o.left,_=o.bottom-o.top,$=parseBorderWidth(i,s/2,_/2),et=parseBorderRadius(i,s/2,_/2);return{outer:{x:o.left,y:o.top,w:s,h:_,radius:et},inner:{x:o.left+$.l,y:o.top+$.t,w:s-$.l-$.r,h:_-$.t-$.b,radius:{topLeft:Math.max(0,et.topLeft-Math.max($.t,$.l)),topRight:Math.max(0,et.topRight-Math.max($.t,$.r)),bottomLeft:Math.max(0,et.bottomLeft-Math.max($.b,$.l)),bottomRight:Math.max(0,et.bottomRight-Math.max($.b,$.r))}}}}function inRange(i,o,s,_){const $=o===null,et=s===null,j=i&&!($&&et)&&getBarBounds(i,_);return j&&($||_isBetween(o,j.left,j.right))&&(et||_isBetween(s,j.top,j.bottom))}function hasRadius(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function addNormalRectPath(i,o){i.rect(o.x,o.y,o.w,o.h)}function inflateRect(i,o,s={}){const _=i.x!==s.x?-o:0,$=i.y!==s.y?-o:0,et=(i.x+i.w!==s.x+s.w?o:0)-_,tt=(i.y+i.h!==s.y+s.h?o:0)-$;return{x:i.x+_,y:i.y+$,w:i.w+et,h:i.h+tt,radius:i.radius}}class BarElement extends Element{constructor(o){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,o&&Object.assign(this,o)}draw(o){const{inflateAmount:s,options:{borderColor:_,backgroundColor:$}}=this,{inner:et,outer:tt}=boundingRects(this),j=hasRadius(tt.radius)?addRoundedRectPath:addNormalRectPath;o.save(),(tt.w!==et.w||tt.h!==et.h)&&(o.beginPath(),j(o,inflateRect(tt,s,et)),o.clip(),j(o,inflateRect(et,-s,tt)),o.fillStyle=_,o.fill("evenodd")),o.beginPath(),j(o,inflateRect(et,s)),o.fillStyle=$,o.fill(),o.restore()}inRange(o,s,_){return inRange(this,o,s,_)}inXRange(o,s){return inRange(this,o,null,s)}inYRange(o,s){return inRange(this,null,o,s)}getCenterPoint(o){const{x:s,y:_,base:$,horizontal:et}=this.getProps(["x","y","base","horizontal"],o);return{x:et?(s+$)/2:s,y:et?_:(_+$)/2}}getRange(o){return o==="x"?this.width/2:this.height/2}}BarElement.id="bar";BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var elements=Object.freeze({__proto__:null,ArcElement,LineElement,PointElement,BarElement});function lttbDecimation(i,o,s,_,$){const et=$.samples||_;if(et>=s)return i.slice(o,o+s);const tt=[],j=(s-2)/(et-2);let it=0;const st=o+s-1;let ht=o,_t,gt,ft,ut,yt;for(tt[it++]=i[ht],_t=0;_t<et-2;_t++){let Et=0,Mt=0,Ft;const Rt=Math.floor((_t+1)*j)+1+o,Ot=Math.min(Math.floor((_t+2)*j)+1,s)+o,pt=Ot-Rt;for(Ft=Rt;Ft<Ot;Ft++)Et+=i[Ft].x,Mt+=i[Ft].y;Et/=pt,Mt/=pt;const Lt=Math.floor(_t*j)+1+o,nn=Math.min(Math.floor((_t+1)*j)+1,s)+o,{x:on,y:wt}=i[ht];for(ft=ut=-1,Ft=Lt;Ft<nn;Ft++)ut=.5*Math.abs((on-Et)*(i[Ft].y-wt)-(on-i[Ft].x)*(Mt-wt)),ut>ft&&(ft=ut,gt=i[Ft],yt=Ft);tt[it++]=gt,ht=yt}return tt[it++]=i[st],tt}function minMaxDecimation(i,o,s,_){let $=0,et=0,tt,j,it,st,ht,_t,gt,ft,ut,yt;const Et=[],Mt=o+s-1,Ft=i[o].x,Ot=i[Mt].x-Ft;for(tt=o;tt<o+s;++tt){j=i[tt],it=(j.x-Ft)/Ot*_,st=j.y;const pt=it|0;if(pt===ht)st<ut?(ut=st,_t=tt):st>yt&&(yt=st,gt=tt),$=(et*$+j.x)/++et;else{const Lt=tt-1;if(!isNullOrUndef(_t)&&!isNullOrUndef(gt)){const nn=Math.min(_t,gt),on=Math.max(_t,gt);nn!==ft&&nn!==Lt&&Et.push(__spreadProps(__spreadValues({},i[nn]),{x:$})),on!==ft&&on!==Lt&&Et.push(__spreadProps(__spreadValues({},i[on]),{x:$}))}tt>0&&Lt!==ft&&Et.push(i[Lt]),Et.push(j),ht=pt,et=0,ut=yt=st,_t=gt=ft=tt}}return Et}function cleanDecimatedDataset(i){if(i._decimated){const o=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:o})}}function cleanDecimatedData(i){i.data.datasets.forEach(o=>{cleanDecimatedDataset(o)})}function getStartAndCountOfVisiblePointsSimplified(i,o){const s=o.length;let _=0,$;const{iScale:et}=i,{min:tt,max:j,minDefined:it,maxDefined:st}=et.getUserBounds();return it&&(_=_limitValue(_lookupByKey(o,et.axis,tt).lo,0,s-1)),st?$=_limitValue(_lookupByKey(o,et.axis,j).hi+1,_,s)-_:$=s-_,{start:_,count:$}}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,o,s)=>{if(!s.enabled){cleanDecimatedData(i);return}const _=i.width;i.data.datasets.forEach(($,et)=>{const{_data:tt,indexAxis:j}=$,it=i.getDatasetMeta(et),st=tt||$.data;if(resolve([j,i.options.indexAxis])==="y"||it.type!=="line")return;const ht=i.scales[it.xAxisID];if(ht.type!=="linear"&&ht.type!=="time"||i.options.parsing)return;let{start:_t,count:gt}=getStartAndCountOfVisiblePointsSimplified(it,st);const ft=s.threshold||4*_;if(gt<=ft){cleanDecimatedDataset($);return}isNullOrUndef(tt)&&($._data=st,delete $.data,Object.defineProperty($,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(yt){this._data=yt}}));let ut;switch(s.algorithm){case"lttb":ut=lttbDecimation(st,_t,gt,_,s);break;case"min-max":ut=minMaxDecimation(st,_t,gt,_);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}$._decimated=ut})},destroy(i){cleanDecimatedData(i)}};function getLineByIndex(i,o){const s=i.getDatasetMeta(o);return s&&i.isDatasetVisible(o)?s.dataset:null}function parseFillOption(i){const o=i.options,s=o.fill;let _=valueOrDefault(s&&s.target,s);return _===void 0&&(_=!!o.backgroundColor),_===!1||_===null?!1:_===!0?"origin":_}function decodeFill(i,o,s){const _=parseFillOption(i);if(isObject(_))return isNaN(_.value)?!1:_;let $=parseFloat(_);return isNumberFinite($)&&Math.floor($)===$?((_[0]==="-"||_[0]==="+")&&($=o+$),$===o||$<0||$>=s?!1:$):["origin","start","end","stack","shape"].indexOf(_)>=0&&_}function computeLinearBoundary(i){const{scale:o={},fill:s}=i;let _=null,$;return s==="start"?_=o.bottom:s==="end"?_=o.top:isObject(s)?_=o.getPixelForValue(s.value):o.getBasePixel&&(_=o.getBasePixel()),isNumberFinite(_)?($=o.isHorizontal(),{x:$?_:null,y:$?null:_}):null}class simpleArc{constructor(o){this.x=o.x,this.y=o.y,this.radius=o.radius}pathSegment(o,s,_){const{x:$,y:et,radius:tt}=this;return s=s||{start:0,end:TAU},o.arc($,et,tt,s.end,s.start,!0),!_.bounds}interpolate(o){const{x:s,y:_,radius:$}=this,et=o.angle;return{x:s+Math.cos(et)*$,y:_+Math.sin(et)*$,angle:et}}}function computeCircularBoundary(i){const{scale:o,fill:s}=i,_=o.options,$=o.getLabels().length,et=[],tt=_.reverse?o.max:o.min,j=_.reverse?o.min:o.max;let it,st,ht;if(s==="start"?ht=tt:s==="end"?ht=j:isObject(s)?ht=s.value:ht=o.getBaseValue(),_.grid.circular)return st=o.getPointPositionForValue(0,tt),new simpleArc({x:st.x,y:st.y,radius:o.getDistanceFromCenterForValue(ht)});for(it=0;it<$;++it)et.push(o.getPointPositionForValue(it,ht));return et}function computeBoundary(i){return(i.scale||{}).getPointPositionForValue?computeCircularBoundary(i):computeLinearBoundary(i)}function findSegmentEnd(i,o,s){for(;o>i;o--){const _=s[o];if(!isNaN(_.x)&&!isNaN(_.y))break}return o}function pointsFromSegments(i,o){const{x:s=null,y:_=null}=i||{},$=o.points,et=[];return o.segments.forEach(({start:tt,end:j})=>{j=findSegmentEnd(tt,j,$);const it=$[tt],st=$[j];_!==null?(et.push({x:it.x,y:_}),et.push({x:st.x,y:_})):s!==null&&(et.push({x:s,y:it.y}),et.push({x:s,y:st.y}))}),et}function buildStackLine(i){const{scale:o,index:s,line:_}=i,$=[],et=_.segments,tt=_.points,j=getLinesBelow(o,s);j.push(createBoundaryLine({x:null,y:o.bottom},_));for(let it=0;it<et.length;it++){const st=et[it];for(let ht=st.start;ht<=st.end;ht++)addPointsBelow($,tt[ht],j)}return new LineElement({points:$,options:{}})}function getLinesBelow(i,o){const s=[],_=i.getMatchingVisibleMetas("line");for(let $=0;$<_.length;$++){const et=_[$];if(et.index===o)break;et.hidden||s.unshift(et.dataset)}return s}function addPointsBelow(i,o,s){const _=[];for(let $=0;$<s.length;$++){const et=s[$],{first:tt,last:j,point:it}=findPoint(et,o,"x");if(!(!it||tt&&j)){if(tt)_.unshift(it);else if(i.push(it),!j)break}}i.push(..._)}function findPoint(i,o,s){const _=i.interpolate(o,s);if(!_)return{};const $=_[s],et=i.segments,tt=i.points;let j=!1,it=!1;for(let st=0;st<et.length;st++){const ht=et[st],_t=tt[ht.start][s],gt=tt[ht.end][s];if(_isBetween($,_t,gt)){j=$===_t,it=$===gt;break}}return{first:j,last:it,point:_}}function getTarget(i){const{chart:o,fill:s,line:_}=i;if(isNumberFinite(s))return getLineByIndex(o,s);if(s==="stack")return buildStackLine(i);if(s==="shape")return!0;const $=computeBoundary(i);return $ instanceof simpleArc?$:createBoundaryLine($,_)}function createBoundaryLine(i,o){let s=[],_=!1;return isArray(i)?(_=!0,s=i):s=pointsFromSegments(i,o),s.length?new LineElement({points:s,options:{tension:0},_loop:_,_fullLoop:_}):null}function resolveTarget(i,o,s){let $=i[o].fill;const et=[o];let tt;if(!s)return $;for(;$!==!1&&et.indexOf($)===-1;){if(!isNumberFinite($))return $;if(tt=i[$],!tt)return!1;if(tt.visible)return $;et.push($),$=tt.fill}return!1}function _clip(i,o,s){const{segments:_,points:$}=o;let et=!0,tt=!1;i.beginPath();for(const j of _){const{start:it,end:st}=j,ht=$[it],_t=$[findSegmentEnd(it,st,$)];et?(i.moveTo(ht.x,ht.y),et=!1):(i.lineTo(ht.x,s),i.lineTo(ht.x,ht.y)),tt=!!o.pathSegment(i,j,{move:tt}),tt?i.closePath():i.lineTo(_t.x,s)}i.lineTo(o.first().x,s),i.closePath(),i.clip()}function getBounds(i,o,s,_){if(_)return;let $=o[i],et=s[i];return i==="angle"&&($=_normalizeAngle($),et=_normalizeAngle(et)),{property:i,start:$,end:et}}function _getEdge(i,o,s,_){return i&&o?_(i[s],o[s]):i?i[s]:o?o[s]:0}function _segments(i,o,s){const _=i.segments,$=i.points,et=o.points,tt=[];for(const j of _){let{start:it,end:st}=j;st=findSegmentEnd(it,st,$);const ht=getBounds(s,$[it],$[st],j.loop);if(!o.segments){tt.push({source:j,target:ht,start:$[it],end:$[st]});continue}const _t=_boundSegments(o,ht);for(const gt of _t){const ft=getBounds(s,et[gt.start],et[gt.end],gt.loop),ut=_boundSegment(j,$,ft);for(const yt of ut)tt.push({source:yt,target:gt,start:{[s]:_getEdge(ht,ft,"start",Math.max)},end:{[s]:_getEdge(ht,ft,"end",Math.min)}})}}return tt}function clipBounds(i,o,s){const{top:_,bottom:$}=o.chart.chartArea,{property:et,start:tt,end:j}=s||{};et==="x"&&(i.beginPath(),i.rect(tt,_,j-tt,$-_),i.clip())}function interpolatedLineTo(i,o,s,_){const $=o.interpolate(s,_);$&&i.lineTo($.x,$.y)}function _fill(i,o){const{line:s,target:_,property:$,color:et,scale:tt}=o,j=_segments(s,_,$);for(const{source:it,target:st,start:ht,end:_t}of j){const{style:{backgroundColor:gt=et}={}}=it,ft=_!==!0;i.save(),i.fillStyle=gt,clipBounds(i,tt,ft&&getBounds($,ht,_t)),i.beginPath();const ut=!!s.pathSegment(i,it);let yt;if(ft){ut?i.closePath():interpolatedLineTo(i,_,_t,$);const Et=!!_.pathSegment(i,st,{move:ut,reverse:!0});yt=ut&&Et,yt||interpolatedLineTo(i,_,ht,$)}i.closePath(),i.fill(yt?"evenodd":"nonzero"),i.restore()}}function doFill(i,o){const{line:s,target:_,above:$,below:et,area:tt,scale:j}=o,it=s._loop?"angle":o.axis;i.save(),it==="x"&&et!==$&&(_clip(i,_,tt.top),_fill(i,{line:s,target:_,color:$,scale:j,property:it}),i.restore(),i.save(),_clip(i,_,tt.bottom)),_fill(i,{line:s,target:_,color:et,scale:j,property:it}),i.restore()}function drawfill(i,o,s){const _=getTarget(o),{line:$,scale:et,axis:tt}=o,j=$.options,it=j.fill,st=j.backgroundColor,{above:ht=st,below:_t=st}=it||{};_&&$.points.length&&(clipArea(i,s),doFill(i,{line:$,target:_,above:ht,below:_t,area:s,scale:et,axis:tt}),unclipArea(i))}var plugin_filler={id:"filler",afterDatasetsUpdate(i,o,s){const _=(i.data.datasets||[]).length,$=[];let et,tt,j,it;for(tt=0;tt<_;++tt)et=i.getDatasetMeta(tt),j=et.dataset,it=null,j&&j.options&&j instanceof LineElement&&(it={visible:i.isDatasetVisible(tt),index:tt,fill:decodeFill(j,tt,_),chart:i,axis:et.controller.options.indexAxis,scale:et.vScale,line:j}),et.$filler=it,$.push(it);for(tt=0;tt<_;++tt)it=$[tt],!(!it||it.fill===!1)&&(it.fill=resolveTarget($,tt,s.propagate))},beforeDraw(i,o,s){const _=s.drawTime==="beforeDraw",$=i.getSortedVisibleDatasetMetas(),et=i.chartArea;for(let tt=$.length-1;tt>=0;--tt){const j=$[tt].$filler;j&&(j.line.updateControlPoints(et,j.axis),_&&drawfill(i.ctx,j,et))}},beforeDatasetsDraw(i,o,s){if(s.drawTime!=="beforeDatasetsDraw")return;const _=i.getSortedVisibleDatasetMetas();for(let $=_.length-1;$>=0;--$){const et=_[$].$filler;et&&drawfill(i.ctx,et,i.chartArea)}},beforeDatasetDraw(i,o,s){const _=o.meta.$filler;!_||_.fill===!1||s.drawTime!=="beforeDatasetDraw"||drawfill(i.ctx,_,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(i,o)=>{let{boxHeight:s=o,boxWidth:_=o}=i;return i.usePointStyle&&(s=Math.min(s,o),_=Math.min(_,o)),{boxWidth:_,boxHeight:s,itemHeight:Math.max(o,s)}},itemsEqual=(i,o)=>i!==null&&o!==null&&i.datasetIndex===o.datasetIndex&&i.index===o.index;class Legend extends Element{constructor(o){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,s,_){this.maxWidth=o,this.maxHeight=s,this._margins=_,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const o=this.options.labels||{};let s=callback(o.generateLabels,[this.chart],this)||[];o.filter&&(s=s.filter(_=>o.filter(_,this.chart.data))),o.sort&&(s=s.sort((_,$)=>o.sort(_,$,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:o,ctx:s}=this;if(!o.display){this.width=this.height=0;return}const _=o.labels,$=toFont(_.font),et=$.size,tt=this._computeTitleHeight(),{boxWidth:j,itemHeight:it}=getBoxSize(_,et);let st,ht;s.font=$.string,this.isHorizontal()?(st=this.maxWidth,ht=this._fitRows(tt,et,j,it)+10):(ht=this.maxHeight,st=this._fitCols(tt,et,j,it)+10),this.width=Math.min(st,o.maxWidth||this.maxWidth),this.height=Math.min(ht,o.maxHeight||this.maxHeight)}_fitRows(o,s,_,$){const{ctx:et,maxWidth:tt,options:{labels:{padding:j}}}=this,it=this.legendHitBoxes=[],st=this.lineWidths=[0],ht=$+j;let _t=o;et.textAlign="left",et.textBaseline="middle";let gt=-1,ft=-ht;return this.legendItems.forEach((ut,yt)=>{const Et=_+s/2+et.measureText(ut.text).width;(yt===0||st[st.length-1]+Et+2*j>tt)&&(_t+=ht,st[st.length-(yt>0?0:1)]=0,ft+=ht,gt++),it[yt]={left:0,top:ft,row:gt,width:Et,height:$},st[st.length-1]+=Et+j}),_t}_fitCols(o,s,_,$){const{ctx:et,maxHeight:tt,options:{labels:{padding:j}}}=this,it=this.legendHitBoxes=[],st=this.columnSizes=[],ht=tt-o;let _t=j,gt=0,ft=0,ut=0,yt=0;return this.legendItems.forEach((Et,Mt)=>{const Ft=_+s/2+et.measureText(Et.text).width;Mt>0&&ft+$+2*j>ht&&(_t+=gt+j,st.push({width:gt,height:ft}),ut+=gt+j,yt++,gt=ft=0),it[Mt]={left:ut,top:ft,col:yt,width:Ft,height:$},gt=Math.max(gt,Ft),ft+=$+j}),_t+=gt,st.push({width:gt,height:ft}),_t}adjustHitBoxes(){if(!this.options.display)return;const o=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:_,labels:{padding:$},rtl:et}}=this,tt=getRtlAdapter(et,this.left,this.width);if(this.isHorizontal()){let j=0,it=_alignStartEnd(_,this.left+$,this.right-this.lineWidths[j]);for(const st of s)j!==st.row&&(j=st.row,it=_alignStartEnd(_,this.left+$,this.right-this.lineWidths[j])),st.top+=this.top+o+$,st.left=tt.leftForLtr(tt.x(it),st.width),it+=st.width+$}else{let j=0,it=_alignStartEnd(_,this.top+o+$,this.bottom-this.columnSizes[j].height);for(const st of s)st.col!==j&&(j=st.col,it=_alignStartEnd(_,this.top+o+$,this.bottom-this.columnSizes[j].height)),st.top=it,st.left+=this.left+$,st.left=tt.leftForLtr(tt.x(st.left),st.width),it+=st.height+$}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const o=this.ctx;clipArea(o,this),this._draw(),unclipArea(o)}}_draw(){const{options:o,columnSizes:s,lineWidths:_,ctx:$}=this,{align:et,labels:tt}=o,j=defaults.color,it=getRtlAdapter(o.rtl,this.left,this.width),st=toFont(tt.font),{color:ht,padding:_t}=tt,gt=st.size,ft=gt/2;let ut;this.drawTitle(),$.textAlign=it.textAlign("left"),$.textBaseline="middle",$.lineWidth=.5,$.font=st.string;const{boxWidth:yt,boxHeight:Et,itemHeight:Mt}=getBoxSize(tt,gt),Ft=function(nn,on,wt){if(isNaN(yt)||yt<=0||isNaN(Et)||Et<0)return;$.save();const xt=valueOrDefault(wt.lineWidth,1);if($.fillStyle=valueOrDefault(wt.fillStyle,j),$.lineCap=valueOrDefault(wt.lineCap,"butt"),$.lineDashOffset=valueOrDefault(wt.lineDashOffset,0),$.lineJoin=valueOrDefault(wt.lineJoin,"miter"),$.lineWidth=xt,$.strokeStyle=valueOrDefault(wt.strokeStyle,j),$.setLineDash(valueOrDefault(wt.lineDash,[])),tt.usePointStyle){const Nt={radius:yt*Math.SQRT2/2,pointStyle:wt.pointStyle,rotation:wt.rotation,borderWidth:xt},Tt=it.xPlus(nn,yt/2),Vt=on+ft;drawPoint($,Nt,Tt,Vt)}else{const Nt=on+Math.max((gt-Et)/2,0),Tt=it.leftForLtr(nn,yt),Vt=toTRBLCorners(wt.borderRadius);$.beginPath(),Object.values(Vt).some(Xt=>Xt!==0)?addRoundedRectPath($,{x:Tt,y:Nt,w:yt,h:Et,radius:Vt}):$.rect(Tt,Nt,yt,Et),$.fill(),xt!==0&&$.stroke()}$.restore()},Rt=function(nn,on,wt){renderText($,wt.text,nn,on+Mt/2,st,{strikethrough:wt.hidden,textAlign:it.textAlign(wt.textAlign)})},Ot=this.isHorizontal(),pt=this._computeTitleHeight();Ot?ut={x:_alignStartEnd(et,this.left+_t,this.right-_[0]),y:this.top+_t+pt,line:0}:ut={x:this.left+_t,y:_alignStartEnd(et,this.top+pt+_t,this.bottom-s[0].height),line:0},overrideTextDirection(this.ctx,o.textDirection);const Lt=Mt+_t;this.legendItems.forEach((nn,on)=>{$.strokeStyle=nn.fontColor||ht,$.fillStyle=nn.fontColor||ht;const wt=$.measureText(nn.text).width,xt=it.textAlign(nn.textAlign||(nn.textAlign=tt.textAlign)),Nt=yt+ft+wt;let Tt=ut.x,Vt=ut.y;it.setWidth(this.width),Ot?on>0&&Tt+Nt+_t>this.right&&(Vt=ut.y+=Lt,ut.line++,Tt=ut.x=_alignStartEnd(et,this.left+_t,this.right-_[ut.line])):on>0&&Vt+Lt>this.bottom&&(Tt=ut.x=Tt+s[ut.line].width+_t,ut.line++,Vt=ut.y=_alignStartEnd(et,this.top+pt+_t,this.bottom-s[ut.line].height));const Xt=it.x(Tt);Ft(Xt,Vt,nn),Tt=_textX(xt,Tt+yt+ft,Ot?Tt+Nt:this.right,o.rtl),Rt(it.x(Tt),Vt,nn),Ot?ut.x+=Nt+_t:ut.y+=Lt}),restoreTextDirection(this.ctx,o.textDirection)}drawTitle(){const o=this.options,s=o.title,_=toFont(s.font),$=toPadding(s.padding);if(!s.display)return;const et=getRtlAdapter(o.rtl,this.left,this.width),tt=this.ctx,j=s.position,it=_.size/2,st=$.top+it;let ht,_t=this.left,gt=this.width;if(this.isHorizontal())gt=Math.max(...this.lineWidths),ht=this.top+st,_t=_alignStartEnd(o.align,_t,this.right-gt);else{const ut=this.columnSizes.reduce((yt,Et)=>Math.max(yt,Et.height),0);ht=st+_alignStartEnd(o.align,this.top,this.bottom-ut-o.labels.padding-this._computeTitleHeight())}const ft=_alignStartEnd(j,_t,_t+gt);tt.textAlign=et.textAlign(_toLeftRightCenter(j)),tt.textBaseline="middle",tt.strokeStyle=s.color,tt.fillStyle=s.color,tt.font=_.string,renderText(tt,s.text,ft,ht,_)}_computeTitleHeight(){const o=this.options.title,s=toFont(o.font),_=toPadding(o.padding);return o.display?s.lineHeight+_.height:0}_getLegendItemAt(o,s){let _,$,et;if(_isBetween(o,this.left,this.right)&&_isBetween(s,this.top,this.bottom)){for(et=this.legendHitBoxes,_=0;_<et.length;++_)if($=et[_],_isBetween(o,$.left,$.left+$.width)&&_isBetween(s,$.top,$.top+$.height))return this.legendItems[_]}return null}handleEvent(o){const s=this.options;if(!isListened(o.type,s))return;const _=this._getLegendItemAt(o.x,o.y);if(o.type==="mousemove"){const $=this._hoveredItem,et=itemsEqual($,_);$&&!et&&callback(s.onLeave,[o,$,this],this),this._hoveredItem=_,_&&!et&&callback(s.onHover,[o,_,this],this)}else _&&callback(s.onClick,[o,_,this],this)}}function isListened(i,o){return!!(i==="mousemove"&&(o.onHover||o.onLeave)||o.onClick&&(i==="click"||i==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(i,o,s){const _=i.legend=new Legend({ctx:i.ctx,options:s,chart:i});layouts.configure(i,_,s),layouts.addBox(i,_)},stop(i){layouts.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,o,s){const _=i.legend;layouts.configure(i,_,s),_.options=s},afterUpdate(i){const o=i.legend;o.buildLabels(),o.adjustHitBoxes()},afterEvent(i,o){o.replay||i.legend.handleEvent(o.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,o,s){const _=o.datasetIndex,$=s.chart;$.isDatasetVisible(_)?($.hide(_),o.hidden=!0):($.show(_),o.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const o=i.data.datasets,{labels:{usePointStyle:s,pointStyle:_,textAlign:$,color:et}}=i.legend.options;return i._getSortedDatasetMetas().map(tt=>{const j=tt.controller.getStyle(s?0:void 0),it=toPadding(j.borderWidth);return{text:o[tt.index].label,fillStyle:j.backgroundColor,fontColor:et,hidden:!tt.visible,lineCap:j.borderCapStyle,lineDash:j.borderDash,lineDashOffset:j.borderDashOffset,lineJoin:j.borderJoinStyle,lineWidth:(it.width+it.height)/4,strokeStyle:j.borderColor,pointStyle:_||j.pointStyle,rotation:j.rotation,textAlign:$||j.textAlign,borderRadius:0,datasetIndex:tt.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Title extends Element{constructor(o){super(),this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,s){const _=this.options;if(this.left=0,this.top=0,!_.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=o,this.height=this.bottom=s;const $=isArray(_.text)?_.text.length:1;this._padding=toPadding(_.padding);const et=$*toFont(_.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=et:this.width=et}isHorizontal(){const o=this.options.position;return o==="top"||o==="bottom"}_drawArgs(o){const{top:s,left:_,bottom:$,right:et,options:tt}=this,j=tt.align;let it=0,st,ht,_t;return this.isHorizontal()?(ht=_alignStartEnd(j,_,et),_t=s+o,st=et-_):(tt.position==="left"?(ht=_+o,_t=_alignStartEnd(j,$,s),it=PI*-.5):(ht=et-o,_t=_alignStartEnd(j,s,$),it=PI*.5),st=$-s),{titleX:ht,titleY:_t,maxWidth:st,rotation:it}}draw(){const o=this.ctx,s=this.options;if(!s.display)return;const _=toFont(s.font),et=_.lineHeight/2+this._padding.top,{titleX:tt,titleY:j,maxWidth:it,rotation:st}=this._drawArgs(et);renderText(o,s.text,0,0,_,{color:s.color,maxWidth:it,rotation:st,textAlign:_toLeftRightCenter(s.align),textBaseline:"middle",translation:[tt,j]})}}function createTitle(i,o){const s=new Title({ctx:i.ctx,options:o,chart:i});layouts.configure(i,s,o),layouts.addBox(i,s),i.titleBlock=s}var plugin_title={id:"title",_element:Title,start(i,o,s){createTitle(i,s)},stop(i){const o=i.titleBlock;layouts.removeBox(i,o),delete i.titleBlock},beforeUpdate(i,o,s){const _=i.titleBlock;layouts.configure(i,_,s),_.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const map=new WeakMap;var plugin_subtitle={id:"subtitle",start(i,o,s){const _=new Title({ctx:i.ctx,options:s,chart:i});layouts.configure(i,_,s),layouts.addBox(i,_),map.set(i,_)},stop(i){layouts.removeBox(i,map.get(i)),map.delete(i)},beforeUpdate(i,o,s){const _=map.get(i);layouts.configure(i,_,s),_.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(i){if(!i.length)return!1;let o,s,_=0,$=0,et=0;for(o=0,s=i.length;o<s;++o){const tt=i[o].element;if(tt&&tt.hasValue()){const j=tt.tooltipPosition();_+=j.x,$+=j.y,++et}}return{x:_/et,y:$/et}},nearest(i,o){if(!i.length)return!1;let s=o.x,_=o.y,$=Number.POSITIVE_INFINITY,et,tt,j;for(et=0,tt=i.length;et<tt;++et){const it=i[et].element;if(it&&it.hasValue()){const st=it.getCenterPoint(),ht=distanceBetweenPoints(o,st);ht<$&&($=ht,j=it)}}if(j){const it=j.tooltipPosition();s=it.x,_=it.y}return{x:s,y:_}}};function pushOrConcat(i,o){return o&&(isArray(o)?Array.prototype.push.apply(i,o):i.push(o)),i}function splitNewlines(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function createTooltipItem(i,o){const{element:s,datasetIndex:_,index:$}=o,et=i.getDatasetMeta(_).controller,{label:tt,value:j}=et.getLabelAndValue($);return{chart:i,label:tt,parsed:et.getParsed($),raw:i.data.datasets[_].data[$],formattedValue:j,dataset:et.getDataset(),dataIndex:$,datasetIndex:_,element:s}}function getTooltipSize(i,o){const s=i.chart.ctx,{body:_,footer:$,title:et}=i,{boxWidth:tt,boxHeight:j}=o,it=toFont(o.bodyFont),st=toFont(o.titleFont),ht=toFont(o.footerFont),_t=et.length,gt=$.length,ft=_.length,ut=toPadding(o.padding);let yt=ut.height,Et=0,Mt=_.reduce((Ot,pt)=>Ot+pt.before.length+pt.lines.length+pt.after.length,0);if(Mt+=i.beforeBody.length+i.afterBody.length,_t&&(yt+=_t*st.lineHeight+(_t-1)*o.titleSpacing+o.titleMarginBottom),Mt){const Ot=o.displayColors?Math.max(j,it.lineHeight):it.lineHeight;yt+=ft*Ot+(Mt-ft)*it.lineHeight+(Mt-1)*o.bodySpacing}gt&&(yt+=o.footerMarginTop+gt*ht.lineHeight+(gt-1)*o.footerSpacing);let Ft=0;const Rt=function(Ot){Et=Math.max(Et,s.measureText(Ot).width+Ft)};return s.save(),s.font=st.string,each(i.title,Rt),s.font=it.string,each(i.beforeBody.concat(i.afterBody),Rt),Ft=o.displayColors?tt+2+o.boxPadding:0,each(_,Ot=>{each(Ot.before,Rt),each(Ot.lines,Rt),each(Ot.after,Rt)}),Ft=0,s.font=ht.string,each(i.footer,Rt),s.restore(),Et+=ut.width,{width:Et,height:yt}}function determineYAlign(i,o){const{y:s,height:_}=o;return s<_/2?"top":s>i.height-_/2?"bottom":"center"}function doesNotFitWithAlign(i,o,s,_){const{x:$,width:et}=_,tt=s.caretSize+s.caretPadding;if(i==="left"&&$+et+tt>o.width||i==="right"&&$-et-tt<0)return!0}function determineXAlign(i,o,s,_){const{x:$,width:et}=s,{width:tt,chartArea:{left:j,right:it}}=i;let st="center";return _==="center"?st=$<=(j+it)/2?"left":"right":$<=et/2?st="left":$>=tt-et/2&&(st="right"),doesNotFitWithAlign(st,i,o,s)&&(st="center"),st}function determineAlignment(i,o,s){const _=s.yAlign||o.yAlign||determineYAlign(i,s);return{xAlign:s.xAlign||o.xAlign||determineXAlign(i,o,s,_),yAlign:_}}function alignX(i,o){let{x:s,width:_}=i;return o==="right"?s-=_:o==="center"&&(s-=_/2),s}function alignY(i,o,s){let{y:_,height:$}=i;return o==="top"?_+=s:o==="bottom"?_-=$+s:_-=$/2,_}function getBackgroundPoint(i,o,s,_){const{caretSize:$,caretPadding:et,cornerRadius:tt}=i,{xAlign:j,yAlign:it}=s,st=$+et,{topLeft:ht,topRight:_t,bottomLeft:gt,bottomRight:ft}=toTRBLCorners(tt);let ut=alignX(o,j);const yt=alignY(o,it,st);return it==="center"?j==="left"?ut+=st:j==="right"&&(ut-=st):j==="left"?ut-=Math.max(ht,gt)+$:j==="right"&&(ut+=Math.max(_t,ft)+$),{x:_limitValue(ut,0,_.width-o.width),y:_limitValue(yt,0,_.height-o.height)}}function getAlignedX(i,o,s){const _=toPadding(s.padding);return o==="center"?i.x+i.width/2:o==="right"?i.x+i.width-_.right:i.x+_.left}function getBeforeAfterBodyLines(i){return pushOrConcat([],splitNewlines(i))}function createTooltipContext(i,o,s){return createContext(i,{tooltip:o,tooltipItems:s,type:"tooltip"})}function overrideCallbacks(i,o){const s=o&&o.dataset&&o.dataset.tooltip&&o.dataset.tooltip.callbacks;return s?i.override(s):i}class Tooltip extends Element{constructor(o){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=o.chart||o._chart,this._chart=this.chart,this.options=o.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(o){this.options=o,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const o=this._cachedAnimations;if(o)return o;const s=this.chart,_=this.options.setContext(this.getContext()),$=_.enabled&&s.options.animation&&_.animations,et=new Animations(this.chart,$);return $._cacheable&&(this._cachedAnimations=Object.freeze(et)),et}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(o,s){const{callbacks:_}=s,$=_.beforeTitle.apply(this,[o]),et=_.title.apply(this,[o]),tt=_.afterTitle.apply(this,[o]);let j=[];return j=pushOrConcat(j,splitNewlines($)),j=pushOrConcat(j,splitNewlines(et)),j=pushOrConcat(j,splitNewlines(tt)),j}getBeforeBody(o,s){return getBeforeAfterBodyLines(s.callbacks.beforeBody.apply(this,[o]))}getBody(o,s){const{callbacks:_}=s,$=[];return each(o,et=>{const tt={before:[],lines:[],after:[]},j=overrideCallbacks(_,et);pushOrConcat(tt.before,splitNewlines(j.beforeLabel.call(this,et))),pushOrConcat(tt.lines,j.label.call(this,et)),pushOrConcat(tt.after,splitNewlines(j.afterLabel.call(this,et))),$.push(tt)}),$}getAfterBody(o,s){return getBeforeAfterBodyLines(s.callbacks.afterBody.apply(this,[o]))}getFooter(o,s){const{callbacks:_}=s,$=_.beforeFooter.apply(this,[o]),et=_.footer.apply(this,[o]),tt=_.afterFooter.apply(this,[o]);let j=[];return j=pushOrConcat(j,splitNewlines($)),j=pushOrConcat(j,splitNewlines(et)),j=pushOrConcat(j,splitNewlines(tt)),j}_createItems(o){const s=this._active,_=this.chart.data,$=[],et=[],tt=[];let j=[],it,st;for(it=0,st=s.length;it<st;++it)j.push(createTooltipItem(this.chart,s[it]));return o.filter&&(j=j.filter((ht,_t,gt)=>o.filter(ht,_t,gt,_))),o.itemSort&&(j=j.sort((ht,_t)=>o.itemSort(ht,_t,_))),each(j,ht=>{const _t=overrideCallbacks(o.callbacks,ht);$.push(_t.labelColor.call(this,ht)),et.push(_t.labelPointStyle.call(this,ht)),tt.push(_t.labelTextColor.call(this,ht))}),this.labelColors=$,this.labelPointStyles=et,this.labelTextColors=tt,this.dataPoints=j,j}update(o,s){const _=this.options.setContext(this.getContext()),$=this._active;let et,tt=[];if(!$.length)this.opacity!==0&&(et={opacity:0});else{const j=positioners[_.position].call(this,$,this._eventPosition);tt=this._createItems(_),this.title=this.getTitle(tt,_),this.beforeBody=this.getBeforeBody(tt,_),this.body=this.getBody(tt,_),this.afterBody=this.getAfterBody(tt,_),this.footer=this.getFooter(tt,_);const it=this._size=getTooltipSize(this,_),st=Object.assign({},j,it),ht=determineAlignment(this.chart,_,st),_t=getBackgroundPoint(_,st,ht,this.chart);this.xAlign=ht.xAlign,this.yAlign=ht.yAlign,et={opacity:1,x:_t.x,y:_t.y,width:it.width,height:it.height,caretX:j.x,caretY:j.y}}this._tooltipItems=tt,this.$context=void 0,et&&this._resolveAnimations().update(this,et),o&&_.external&&_.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(o,s,_,$){const et=this.getCaretPosition(o,_,$);s.lineTo(et.x1,et.y1),s.lineTo(et.x2,et.y2),s.lineTo(et.x3,et.y3)}getCaretPosition(o,s,_){const{xAlign:$,yAlign:et}=this,{caretSize:tt,cornerRadius:j}=_,{topLeft:it,topRight:st,bottomLeft:ht,bottomRight:_t}=toTRBLCorners(j),{x:gt,y:ft}=o,{width:ut,height:yt}=s;let Et,Mt,Ft,Rt,Ot,pt;return et==="center"?(Ot=ft+yt/2,$==="left"?(Et=gt,Mt=Et-tt,Rt=Ot+tt,pt=Ot-tt):(Et=gt+ut,Mt=Et+tt,Rt=Ot-tt,pt=Ot+tt),Ft=Et):($==="left"?Mt=gt+Math.max(it,ht)+tt:$==="right"?Mt=gt+ut-Math.max(st,_t)-tt:Mt=this.caretX,et==="top"?(Rt=ft,Ot=Rt-tt,Et=Mt-tt,Ft=Mt+tt):(Rt=ft+yt,Ot=Rt+tt,Et=Mt+tt,Ft=Mt-tt),pt=Rt),{x1:Et,x2:Mt,x3:Ft,y1:Rt,y2:Ot,y3:pt}}drawTitle(o,s,_){const $=this.title,et=$.length;let tt,j,it;if(et){const st=getRtlAdapter(_.rtl,this.x,this.width);for(o.x=getAlignedX(this,_.titleAlign,_),s.textAlign=st.textAlign(_.titleAlign),s.textBaseline="middle",tt=toFont(_.titleFont),j=_.titleSpacing,s.fillStyle=_.titleColor,s.font=tt.string,it=0;it<et;++it)s.fillText($[it],st.x(o.x),o.y+tt.lineHeight/2),o.y+=tt.lineHeight+j,it+1===et&&(o.y+=_.titleMarginBottom-j)}}_drawColorBox(o,s,_,$,et){const tt=this.labelColors[_],j=this.labelPointStyles[_],{boxHeight:it,boxWidth:st,boxPadding:ht}=et,_t=toFont(et.bodyFont),gt=getAlignedX(this,"left",et),ft=$.x(gt),ut=it<_t.lineHeight?(_t.lineHeight-it)/2:0,yt=s.y+ut;if(et.usePointStyle){const Et={radius:Math.min(st,it)/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:1},Mt=$.leftForLtr(ft,st)+st/2,Ft=yt+it/2;o.strokeStyle=et.multiKeyBackground,o.fillStyle=et.multiKeyBackground,drawPoint(o,Et,Mt,Ft),o.strokeStyle=tt.borderColor,o.fillStyle=tt.backgroundColor,drawPoint(o,Et,Mt,Ft)}else{o.lineWidth=tt.borderWidth||1,o.strokeStyle=tt.borderColor,o.setLineDash(tt.borderDash||[]),o.lineDashOffset=tt.borderDashOffset||0;const Et=$.leftForLtr(ft,st-ht),Mt=$.leftForLtr($.xPlus(ft,1),st-ht-2),Ft=toTRBLCorners(tt.borderRadius);Object.values(Ft).some(Rt=>Rt!==0)?(o.beginPath(),o.fillStyle=et.multiKeyBackground,addRoundedRectPath(o,{x:Et,y:yt,w:st,h:it,radius:Ft}),o.fill(),o.stroke(),o.fillStyle=tt.backgroundColor,o.beginPath(),addRoundedRectPath(o,{x:Mt,y:yt+1,w:st-2,h:it-2,radius:Ft}),o.fill()):(o.fillStyle=et.multiKeyBackground,o.fillRect(Et,yt,st,it),o.strokeRect(Et,yt,st,it),o.fillStyle=tt.backgroundColor,o.fillRect(Mt,yt+1,st-2,it-2))}o.fillStyle=this.labelTextColors[_]}drawBody(o,s,_){const{body:$}=this,{bodySpacing:et,bodyAlign:tt,displayColors:j,boxHeight:it,boxWidth:st,boxPadding:ht}=_,_t=toFont(_.bodyFont);let gt=_t.lineHeight,ft=0;const ut=getRtlAdapter(_.rtl,this.x,this.width),yt=function(on){s.fillText(on,ut.x(o.x+ft),o.y+gt/2),o.y+=gt+et},Et=ut.textAlign(tt);let Mt,Ft,Rt,Ot,pt,Lt,nn;for(s.textAlign=tt,s.textBaseline="middle",s.font=_t.string,o.x=getAlignedX(this,Et,_),s.fillStyle=_.bodyColor,each(this.beforeBody,yt),ft=j&&Et!=="right"?tt==="center"?st/2+ht:st+2+ht:0,Ot=0,Lt=$.length;Ot<Lt;++Ot){for(Mt=$[Ot],Ft=this.labelTextColors[Ot],s.fillStyle=Ft,each(Mt.before,yt),Rt=Mt.lines,j&&Rt.length&&(this._drawColorBox(s,o,Ot,ut,_),gt=Math.max(_t.lineHeight,it)),pt=0,nn=Rt.length;pt<nn;++pt)yt(Rt[pt]),gt=_t.lineHeight;each(Mt.after,yt)}ft=0,gt=_t.lineHeight,each(this.afterBody,yt),o.y-=et}drawFooter(o,s,_){const $=this.footer,et=$.length;let tt,j;if(et){const it=getRtlAdapter(_.rtl,this.x,this.width);for(o.x=getAlignedX(this,_.footerAlign,_),o.y+=_.footerMarginTop,s.textAlign=it.textAlign(_.footerAlign),s.textBaseline="middle",tt=toFont(_.footerFont),s.fillStyle=_.footerColor,s.font=tt.string,j=0;j<et;++j)s.fillText($[j],it.x(o.x),o.y+tt.lineHeight/2),o.y+=tt.lineHeight+_.footerSpacing}}drawBackground(o,s,_,$){const{xAlign:et,yAlign:tt}=this,{x:j,y:it}=o,{width:st,height:ht}=_,{topLeft:_t,topRight:gt,bottomLeft:ft,bottomRight:ut}=toTRBLCorners($.cornerRadius);s.fillStyle=$.backgroundColor,s.strokeStyle=$.borderColor,s.lineWidth=$.borderWidth,s.beginPath(),s.moveTo(j+_t,it),tt==="top"&&this.drawCaret(o,s,_,$),s.lineTo(j+st-gt,it),s.quadraticCurveTo(j+st,it,j+st,it+gt),tt==="center"&&et==="right"&&this.drawCaret(o,s,_,$),s.lineTo(j+st,it+ht-ut),s.quadraticCurveTo(j+st,it+ht,j+st-ut,it+ht),tt==="bottom"&&this.drawCaret(o,s,_,$),s.lineTo(j+ft,it+ht),s.quadraticCurveTo(j,it+ht,j,it+ht-ft),tt==="center"&&et==="left"&&this.drawCaret(o,s,_,$),s.lineTo(j,it+_t),s.quadraticCurveTo(j,it,j+_t,it),s.closePath(),s.fill(),$.borderWidth>0&&s.stroke()}_updateAnimationTarget(o){const s=this.chart,_=this.$animations,$=_&&_.x,et=_&&_.y;if($||et){const tt=positioners[o.position].call(this,this._active,this._eventPosition);if(!tt)return;const j=this._size=getTooltipSize(this,o),it=Object.assign({},tt,this._size),st=determineAlignment(s,o,it),ht=getBackgroundPoint(o,it,st,s);($._to!==ht.x||et._to!==ht.y)&&(this.xAlign=st.xAlign,this.yAlign=st.yAlign,this.width=j.width,this.height=j.height,this.caretX=tt.x,this.caretY=tt.y,this._resolveAnimations().update(this,ht))}}draw(o){const s=this.options.setContext(this.getContext());let _=this.opacity;if(!_)return;this._updateAnimationTarget(s);const $={width:this.width,height:this.height},et={x:this.x,y:this.y};_=Math.abs(_)<.001?0:_;const tt=toPadding(s.padding),j=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&j&&(o.save(),o.globalAlpha=_,this.drawBackground(et,o,$,s),overrideTextDirection(o,s.textDirection),et.y+=tt.top,this.drawTitle(et,o,s),this.drawBody(et,o,s),this.drawFooter(et,o,s),restoreTextDirection(o,s.textDirection),o.restore())}getActiveElements(){return this._active||[]}setActiveElements(o,s){const _=this._active,$=o.map(({datasetIndex:j,index:it})=>{const st=this.chart.getDatasetMeta(j);if(!st)throw new Error("Cannot find a dataset at index "+j);return{datasetIndex:j,element:st.data[it],index:it}}),et=!_elementsEqual(_,$),tt=this._positionChanged($,s);(et||tt)&&(this._active=$,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(o,s,_=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const $=this.options,et=this._active||[],tt=this._getActiveElements(o,et,s,_),j=this._positionChanged(tt,o),it=s||!_elementsEqual(tt,et)||j;return it&&(this._active=tt,($.enabled||$.external)&&(this._eventPosition={x:o.x,y:o.y},this.update(!0,s))),it}_getActiveElements(o,s,_,$){const et=this.options;if(o.type==="mouseout")return[];if(!$)return s;const tt=this.chart.getElementsAtEventForMode(o,et.mode,et,_);return et.reverse&&tt.reverse(),tt}_positionChanged(o,s){const{caretX:_,caretY:$,options:et}=this,tt=positioners[et.position].call(this,o,s);return tt!==!1&&(_!==tt.x||$!==tt.y)}}Tooltip.positioners=positioners;var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(i,o,s){s&&(i.tooltip=new Tooltip({chart:i,options:s}))},beforeUpdate(i,o,s){i.tooltip&&i.tooltip.initialize(s)},reset(i,o,s){i.tooltip&&i.tooltip.initialize(s)},afterDraw(i){const o=i.tooltip,s={tooltip:o};i.notifyPlugins("beforeTooltipDraw",s)!==!1&&(o&&o.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",s))},afterEvent(i,o){if(i.tooltip){const s=o.replay;i.tooltip.handleEvent(o.event,s,o.inChartArea)&&(o.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,o)=>o.bodyFont.size,boxWidth:(i,o)=>o.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop$1,title(i){if(i.length>0){const o=i[0],s=o.chart.data.labels,_=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return o.dataset.label||"";if(o.label)return o.label;if(_>0&&o.dataIndex<_)return s[o.dataIndex]}return""},afterTitle:noop$1,beforeBody:noop$1,beforeLabel:noop$1,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let o=i.dataset.label||"";o&&(o+=": ");const s=i.formattedValue;return isNullOrUndef(s)||(o+=s),o},labelColor(i){const s=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const s=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:noop$1,afterBody:noop$1,beforeFooter:noop$1,footer:noop$1,afterFooter:noop$1}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Decimation:plugin_decimation,Filler:plugin_filler,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});const addIfString=(i,o,s,_)=>(typeof o=="string"?(s=i.push(o)-1,_.unshift({index:s,label:o})):isNaN(o)&&(s=null),s);function findOrAddLabel(i,o,s,_){const $=i.indexOf(o);if($===-1)return addIfString(i,o,s,_);const et=i.lastIndexOf(o);return $!==et?s:$}const validIndex=(i,o)=>i===null?null:_limitValue(Math.round(i),0,o);class CategoryScale extends Scale{constructor(o){super(o),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(o){const s=this._addedLabels;if(s.length){const _=this.getLabels();for(const{index:$,label:et}of s)_[$]===et&&_.splice($,1);this._addedLabels=[]}super.init(o)}parse(o,s){if(isNullOrUndef(o))return null;const _=this.getLabels();return s=isFinite(s)&&_[s]===o?s:findOrAddLabel(_,o,valueOrDefault(s,o),this._addedLabels),validIndex(s,_.length-1)}determineDataLimits(){const{minDefined:o,maxDefined:s}=this.getUserBounds();let{min:_,max:$}=this.getMinMax(!0);this.options.bounds==="ticks"&&(o||(_=0),s||($=this.getLabels().length-1)),this.min=_,this.max=$}buildTicks(){const o=this.min,s=this.max,_=this.options.offset,$=[];let et=this.getLabels();et=o===0&&s===et.length-1?et:et.slice(o,s+1),this._valueRange=Math.max(et.length-(_?0:1),1),this._startValue=this.min-(_?.5:0);for(let tt=o;tt<=s;tt++)$.push({value:tt});return $}getLabelForValue(o){const s=this.getLabels();return o>=0&&o<s.length?s[o]:o}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(o){return typeof o!="number"&&(o=this.parse(o)),o===null?NaN:this.getPixelForDecimal((o-this._startValue)/this._valueRange)}getPixelForTick(o){const s=this.ticks;return o<0||o>s.length-1?null:this.getPixelForValue(s[o].value)}getValueForPixel(o){return Math.round(this._startValue+this.getDecimalForPixel(o)*this._valueRange)}getBasePixel(){return this.bottom}}CategoryScale.id="category";CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};function generateTicks$1(i,o){const s=[],{bounds:$,step:et,min:tt,max:j,precision:it,count:st,maxTicks:ht,maxDigits:_t,includeBounds:gt}=i,ft=et||1,ut=ht-1,{min:yt,max:Et}=o,Mt=!isNullOrUndef(tt),Ft=!isNullOrUndef(j),Rt=!isNullOrUndef(st),Ot=(Et-yt)/(_t+1);let pt=niceNum((Et-yt)/ut/ft)*ft,Lt,nn,on,wt;if(pt<1e-14&&!Mt&&!Ft)return[{value:yt},{value:Et}];wt=Math.ceil(Et/pt)-Math.floor(yt/pt),wt>ut&&(pt=niceNum(wt*pt/ut/ft)*ft),isNullOrUndef(it)||(Lt=Math.pow(10,it),pt=Math.ceil(pt*Lt)/Lt),$==="ticks"?(nn=Math.floor(yt/pt)*pt,on=Math.ceil(Et/pt)*pt):(nn=yt,on=Et),Mt&&Ft&&et&&almostWhole((j-tt)/et,pt/1e3)?(wt=Math.round(Math.min((j-tt)/pt,ht)),pt=(j-tt)/wt,nn=tt,on=j):Rt?(nn=Mt?tt:nn,on=Ft?j:on,wt=st-1,pt=(on-nn)/wt):(wt=(on-nn)/pt,almostEquals(wt,Math.round(wt),pt/1e3)?wt=Math.round(wt):wt=Math.ceil(wt));const xt=Math.max(_decimalPlaces(pt),_decimalPlaces(nn));Lt=Math.pow(10,isNullOrUndef(it)?xt:it),nn=Math.round(nn*Lt)/Lt,on=Math.round(on*Lt)/Lt;let Nt=0;for(Mt&&(gt&&nn!==tt?(s.push({value:tt}),nn<tt&&Nt++,almostEquals(Math.round((nn+Nt*pt)*Lt)/Lt,tt,relativeLabelSize(tt,Ot,i))&&Nt++):nn<tt&&Nt++);Nt<wt;++Nt)s.push({value:Math.round((nn+Nt*pt)*Lt)/Lt});return Ft&&gt&&on!==j?s.length&&almostEquals(s[s.length-1].value,j,relativeLabelSize(j,Ot,i))?s[s.length-1].value=j:s.push({value:j}):(!Ft||on===j)&&s.push({value:on}),s}function relativeLabelSize(i,o,{horizontal:s,minRotation:_}){const $=toRadians(_),et=(s?Math.sin($):Math.cos($))||.001,tt=.75*o*(""+i).length;return Math.min(o/et,tt)}class LinearScaleBase extends Scale{constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(o,s){return isNullOrUndef(o)||(typeof o=="number"||o instanceof Number)&&!isFinite(+o)?null:+o}handleTickRangeOptions(){const{beginAtZero:o}=this.options,{minDefined:s,maxDefined:_}=this.getUserBounds();let{min:$,max:et}=this;const tt=it=>$=s?$:it,j=it=>et=_?et:it;if(o){const it=sign($),st=sign(et);it<0&&st<0?j(0):it>0&&st>0&&tt(0)}if($===et){let it=1;(et>=Number.MAX_SAFE_INTEGER||$<=Number.MIN_SAFE_INTEGER)&&(it=Math.abs(et*.05)),j(et+it),o||tt($-it)}this.min=$,this.max=et}getTickLimit(){const o=this.options.ticks;let{maxTicksLimit:s,stepSize:_}=o,$;return _?($=Math.ceil(this.max/_)-Math.floor(this.min/_)+1,$>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${_} would result generating up to ${$} ticks. Limiting to 1000.`),$=1e3)):($=this.computeTickLimit(),s=s||11),s&&($=Math.min(s,$)),$}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const o=this.options,s=o.ticks;let _=this.getTickLimit();_=Math.max(2,_);const $={maxTicks:_,bounds:o.bounds,min:o.min,max:o.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},et=this._range||this,tt=generateTicks$1($,et);return o.bounds==="ticks"&&_setMinAndMaxByKey(tt,this,"value"),o.reverse?(tt.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),tt}configure(){const o=this.ticks;let s=this.min,_=this.max;if(super.configure(),this.options.offset&&o.length){const $=(_-s)/Math.max(o.length-1,1)/2;s-=$,_+=$}this._startValue=s,this._endValue=_,this._valueRange=_-s}getLabelForValue(o){return formatNumber(o,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:o,max:s}=this.getMinMax(!0);this.min=isNumberFinite(o)?o:0,this.max=isNumberFinite(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const o=this.isHorizontal(),s=o?this.width:this.height,_=toRadians(this.options.ticks.minRotation),$=(o?Math.sin(_):Math.cos(_))||.001,et=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,et.lineHeight/$))}getPixelForValue(o){return o===null?NaN:this.getPixelForDecimal((o-this._startValue)/this._valueRange)}getValueForPixel(o){return this._startValue+this.getDecimalForPixel(o)*this._valueRange}}LinearScale.id="linear";LinearScale.defaults={ticks:{callback:Ticks.formatters.numeric}};function isMajor(i){return i/Math.pow(10,Math.floor(log10(i)))===1}function generateTicks(i,o){const s=Math.floor(log10(o.max)),_=Math.ceil(o.max/Math.pow(10,s)),$=[];let et=finiteOrDefault(i.min,Math.pow(10,Math.floor(log10(o.min)))),tt=Math.floor(log10(et)),j=Math.floor(et/Math.pow(10,tt)),it=tt<0?Math.pow(10,Math.abs(tt)):1;do $.push({value:et,major:isMajor(et)}),++j,j===10&&(j=1,++tt,it=tt>=0?1:it),et=Math.round(j*Math.pow(10,tt)*it)/it;while(tt<s||tt===s&&j<_);const st=finiteOrDefault(i.max,et);return $.push({value:st,major:isMajor(et)}),$}class LogarithmicScale extends Scale{constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(o,s){const _=LinearScaleBase.prototype.parse.apply(this,[o,s]);if(_===0){this._zero=!0;return}return isNumberFinite(_)&&_>0?_:null}determineDataLimits(){const{min:o,max:s}=this.getMinMax(!0);this.min=isNumberFinite(o)?Math.max(0,o):null,this.max=isNumberFinite(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:o,maxDefined:s}=this.getUserBounds();let _=this.min,$=this.max;const et=it=>_=o?_:it,tt=it=>$=s?$:it,j=(it,st)=>Math.pow(10,Math.floor(log10(it))+st);_===$&&(_<=0?(et(1),tt(10)):(et(j(_,-1)),tt(j($,1)))),_<=0&&et(j($,-1)),$<=0&&tt(j(_,1)),this._zero&&this.min!==this._suggestedMin&&_===j(this.min,0)&&et(j(_,-1)),this.min=_,this.max=$}buildTicks(){const o=this.options,s={min:this._userMin,max:this._userMax},_=generateTicks(s,this);return o.bounds==="ticks"&&_setMinAndMaxByKey(_,this,"value"),o.reverse?(_.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),_}getLabelForValue(o){return o===void 0?"0":formatNumber(o,this.chart.options.locale,this.options.ticks.format)}configure(){const o=this.min;super.configure(),this._startValue=log10(o),this._valueRange=log10(this.max)-log10(o)}getPixelForValue(o){return(o===void 0||o===0)&&(o=this.min),o===null||isNaN(o)?NaN:this.getPixelForDecimal(o===this.min?0:(log10(o)-this._startValue)/this._valueRange)}getValueForPixel(o){const s=this.getDecimalForPixel(o);return Math.pow(10,this._startValue+s*this._valueRange)}}LogarithmicScale.id="logarithmic";LogarithmicScale.defaults={ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}};function getTickBackdropHeight(i){const o=i.ticks;if(o.display&&i.display){const s=toPadding(o.backdropPadding);return valueOrDefault(o.font&&o.font.size,defaults.font.size)+s.height}return 0}function measureLabelSize(i,o,s){return s=isArray(s)?s:[s],{w:_longestText(i,o.string,s),h:s.length*o.lineHeight}}function determineLimits(i,o,s,_,$){return i===_||i===$?{start:o-s/2,end:o+s/2}:i<_||i>$?{start:o-s,end:o}:{start:o,end:o+s}}function fitWithPointLabels(i){const o={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},s=Object.assign({},o),_=[],$=[],et=i._pointLabels.length,tt=i.options.pointLabels,j=tt.centerPointLabels?PI/et:0;for(let it=0;it<et;it++){const st=tt.setContext(i.getPointLabelContext(it));$[it]=st.padding;const ht=i.getPointPosition(it,i.drawingArea+$[it],j),_t=toFont(st.font),gt=measureLabelSize(i.ctx,_t,i._pointLabels[it]);_[it]=gt;const ft=_normalizeAngle(i.getIndexAngle(it)+j),ut=Math.round(toDegrees(ft)),yt=determineLimits(ut,ht.x,gt.w,0,180),Et=determineLimits(ut,ht.y,gt.h,90,270);updateLimits(s,o,ft,yt,Et)}i.setCenterPoint(o.l-s.l,s.r-o.r,o.t-s.t,s.b-o.b),i._pointLabelItems=buildPointLabelItems(i,_,$)}function updateLimits(i,o,s,_,$){const et=Math.abs(Math.sin(s)),tt=Math.abs(Math.cos(s));let j=0,it=0;_.start<o.l?(j=(o.l-_.start)/et,i.l=Math.min(i.l,o.l-j)):_.end>o.r&&(j=(_.end-o.r)/et,i.r=Math.max(i.r,o.r+j)),$.start<o.t?(it=(o.t-$.start)/tt,i.t=Math.min(i.t,o.t-it)):$.end>o.b&&(it=($.end-o.b)/tt,i.b=Math.max(i.b,o.b+it))}function buildPointLabelItems(i,o,s){const _=[],$=i._pointLabels.length,et=i.options,tt=getTickBackdropHeight(et)/2,j=i.drawingArea,it=et.pointLabels.centerPointLabels?PI/$:0;for(let st=0;st<$;st++){const ht=i.getPointPosition(st,j+tt+s[st],it),_t=Math.round(toDegrees(_normalizeAngle(ht.angle+HALF_PI))),gt=o[st],ft=yForAngle(ht.y,gt.h,_t),ut=getTextAlignForAngle(_t),yt=leftForTextAlign(ht.x,gt.w,ut);_.push({x:ht.x,y:ft,textAlign:ut,left:yt,top:ft,right:yt+gt.w,bottom:ft+gt.h})}return _}function getTextAlignForAngle(i){return i===0||i===180?"center":i<180?"left":"right"}function leftForTextAlign(i,o,s){return s==="right"?i-=o:s==="center"&&(i-=o/2),i}function yForAngle(i,o,s){return s===90||s===270?i-=o/2:(s>270||s<90)&&(i-=o),i}function drawPointLabels(i,o){const{ctx:s,options:{pointLabels:_}}=i;for(let $=o-1;$>=0;$--){const et=_.setContext(i.getPointLabelContext($)),tt=toFont(et.font),{x:j,y:it,textAlign:st,left:ht,top:_t,right:gt,bottom:ft}=i._pointLabelItems[$],{backdropColor:ut}=et;if(!isNullOrUndef(ut)){const yt=toPadding(et.backdropPadding);s.fillStyle=ut,s.fillRect(ht-yt.left,_t-yt.top,gt-ht+yt.width,ft-_t+yt.height)}renderText(s,i._pointLabels[$],j,it+tt.lineHeight/2,tt,{color:et.color,textAlign:st,textBaseline:"middle"})}}function pathRadiusLine(i,o,s,_){const{ctx:$}=i;if(s)$.arc(i.xCenter,i.yCenter,o,0,TAU);else{let et=i.getPointPosition(0,o);$.moveTo(et.x,et.y);for(let tt=1;tt<_;tt++)et=i.getPointPosition(tt,o),$.lineTo(et.x,et.y)}}function drawRadiusLine(i,o,s,_){const $=i.ctx,et=o.circular,{color:tt,lineWidth:j}=o;!et&&!_||!tt||!j||s<0||($.save(),$.strokeStyle=tt,$.lineWidth=j,$.setLineDash(o.borderDash),$.lineDashOffset=o.borderDashOffset,$.beginPath(),pathRadiusLine(i,s,et,_),$.closePath(),$.stroke(),$.restore())}function createPointLabelContext(i,o,s){return createContext(i,{label:s,index:o,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(o){super(o),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const o=this._padding=toPadding(getTickBackdropHeight(this.options)/2),s=this.width=this.maxWidth-o.width,_=this.height=this.maxHeight-o.height;this.xCenter=Math.floor(this.left+s/2+o.left),this.yCenter=Math.floor(this.top+_/2+o.top),this.drawingArea=Math.floor(Math.min(s,_)/2)}determineDataLimits(){const{min:o,max:s}=this.getMinMax(!1);this.min=isNumberFinite(o)&&!isNaN(o)?o:0,this.max=isNumberFinite(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(o){LinearScaleBase.prototype.generateTickLabels.call(this,o),this._pointLabels=this.getLabels().map((s,_)=>{const $=callback(this.options.pointLabels.callback,[s,_],this);return $||$===0?$:""}).filter((s,_)=>this.chart.getDataVisibility(_))}fit(){const o=this.options;o.display&&o.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(o,s,_,$){this.xCenter+=Math.floor((o-s)/2),this.yCenter+=Math.floor((_-$)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(o,s,_,$))}getIndexAngle(o){const s=TAU/(this._pointLabels.length||1),_=this.options.startAngle||0;return _normalizeAngle(o*s+toRadians(_))}getDistanceFromCenterForValue(o){if(isNullOrUndef(o))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-o)*s:(o-this.min)*s}getValueForDistanceFromCenter(o){if(isNullOrUndef(o))return NaN;const s=o/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(o){const s=this._pointLabels||[];if(o>=0&&o<s.length){const _=s[o];return createPointLabelContext(this.getContext(),o,_)}}getPointPosition(o,s,_=0){const $=this.getIndexAngle(o)-HALF_PI+_;return{x:Math.cos($)*s+this.xCenter,y:Math.sin($)*s+this.yCenter,angle:$}}getPointPositionForValue(o,s){return this.getPointPosition(o,this.getDistanceFromCenterForValue(s))}getBasePosition(o){return this.getPointPositionForValue(o||0,this.getBaseValue())}getPointLabelPosition(o){const{left:s,top:_,right:$,bottom:et}=this._pointLabelItems[o];return{left:s,top:_,right:$,bottom:et}}drawBackground(){const{backgroundColor:o,grid:{circular:s}}=this.options;if(o){const _=this.ctx;_.save(),_.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),_.closePath(),_.fillStyle=o,_.fill(),_.restore()}}drawGrid(){const o=this.ctx,s=this.options,{angleLines:_,grid:$}=s,et=this._pointLabels.length;let tt,j,it;if(s.pointLabels.display&&drawPointLabels(this,et),$.display&&this.ticks.forEach((st,ht)=>{if(ht!==0){j=this.getDistanceFromCenterForValue(st.value);const _t=$.setContext(this.getContext(ht-1));drawRadiusLine(this,_t,j,et)}}),_.display){for(o.save(),tt=et-1;tt>=0;tt--){const st=_.setContext(this.getPointLabelContext(tt)),{color:ht,lineWidth:_t}=st;!_t||!ht||(o.lineWidth=_t,o.strokeStyle=ht,o.setLineDash(st.borderDash),o.lineDashOffset=st.borderDashOffset,j=this.getDistanceFromCenterForValue(s.ticks.reverse?this.min:this.max),it=this.getPointPosition(tt,j),o.beginPath(),o.moveTo(this.xCenter,this.yCenter),o.lineTo(it.x,it.y),o.stroke())}o.restore()}}drawBorder(){}drawLabels(){const o=this.ctx,s=this.options,_=s.ticks;if(!_.display)return;const $=this.getIndexAngle(0);let et,tt;o.save(),o.translate(this.xCenter,this.yCenter),o.rotate($),o.textAlign="center",o.textBaseline="middle",this.ticks.forEach((j,it)=>{if(it===0&&!s.reverse)return;const st=_.setContext(this.getContext(it)),ht=toFont(st.font);if(et=this.getDistanceFromCenterForValue(this.ticks[it].value),st.showLabelBackdrop){o.font=ht.string,tt=o.measureText(j.label).width,o.fillStyle=st.backdropColor;const _t=toPadding(st.backdropPadding);o.fillRect(-tt/2-_t.left,-et-ht.size/2-_t.top,tt+_t.width,ht.size+_t.height)}renderText(o,j.label,0,-et,ht,{color:st.color})}),o.restore()}drawTitle(){}}RadialLinearScale.id="radialLinear";RadialLinearScale.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(i){return i},padding:5,centerPointLabels:!1}};RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(i,o){return i-o}function parse(i,o){if(isNullOrUndef(o))return null;const s=i._adapter,{parser:_,round:$,isoWeekday:et}=i._parseOpts;let tt=o;return typeof _=="function"&&(tt=_(tt)),isNumberFinite(tt)||(tt=typeof _=="string"?s.parse(tt,_):s.parse(tt)),tt===null?null:($&&(tt=$==="week"&&(isNumber(et)||et===!0)?s.startOf(tt,"isoWeek",et):s.startOf(tt,$)),+tt)}function determineUnitForAutoTicks(i,o,s,_){const $=UNITS.length;for(let et=UNITS.indexOf(i);et<$-1;++et){const tt=INTERVALS[UNITS[et]],j=tt.steps?tt.steps:Number.MAX_SAFE_INTEGER;if(tt.common&&Math.ceil((s-o)/(j*tt.size))<=_)return UNITS[et]}return UNITS[$-1]}function determineUnitForFormatting(i,o,s,_,$){for(let et=UNITS.length-1;et>=UNITS.indexOf(s);et--){const tt=UNITS[et];if(INTERVALS[tt].common&&i._adapter.diff($,_,tt)>=o-1)return tt}return UNITS[s?UNITS.indexOf(s):0]}function determineMajorUnit(i){for(let o=UNITS.indexOf(i)+1,s=UNITS.length;o<s;++o)if(INTERVALS[UNITS[o]].common)return UNITS[o]}function addTick(i,o,s){if(!s)i[o]=!0;else if(s.length){const{lo:_,hi:$}=_lookup(s,o),et=s[_]>=o?s[_]:s[$];i[et]=!0}}function setMajorTicks(i,o,s,_){const $=i._adapter,et=+$.startOf(o[0].value,_),tt=o[o.length-1].value;let j,it;for(j=et;j<=tt;j=+$.add(j,1,_))it=s[j],it>=0&&(o[it].major=!0);return o}function ticksFromTimestamps(i,o,s){const _=[],$={},et=o.length;let tt,j;for(tt=0;tt<et;++tt)j=o[tt],$[j]=tt,_.push({value:j,major:!1});return et===0||!s?_:setMajorTicks(i,_,$,s)}class TimeScale extends Scale{constructor(o){super(o),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(o,s){const _=o.time||(o.time={}),$=this._adapter=new adapters._date(o.adapters.date);mergeIf(_.displayFormats,$.formats()),this._parseOpts={parser:_.parser,round:_.round,isoWeekday:_.isoWeekday},super.init(o),this._normalized=s.normalized}parse(o,s){return o===void 0?null:parse(this,o)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const o=this.options,s=this._adapter,_=o.time.unit||"day";let{min:$,max:et,minDefined:tt,maxDefined:j}=this.getUserBounds();function it(st){!tt&&!isNaN(st.min)&&($=Math.min($,st.min)),!j&&!isNaN(st.max)&&(et=Math.max(et,st.max))}(!tt||!j)&&(it(this._getLabelBounds()),(o.bounds!=="ticks"||o.ticks.source!=="labels")&&it(this.getMinMax(!1))),$=isNumberFinite($)&&!isNaN($)?$:+s.startOf(Date.now(),_),et=isNumberFinite(et)&&!isNaN(et)?et:+s.endOf(Date.now(),_)+1,this.min=Math.min($,et-1),this.max=Math.max($+1,et)}_getLabelBounds(){const o=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY;return o.length&&(s=o[0],_=o[o.length-1]),{min:s,max:_}}buildTicks(){const o=this.options,s=o.time,_=o.ticks,$=_.source==="labels"?this.getLabelTimestamps():this._generate();o.bounds==="ticks"&&$.length&&(this.min=this._userMin||$[0],this.max=this._userMax||$[$.length-1]);const et=this.min,tt=this.max,j=_filterBetween($,et,tt);return this._unit=s.unit||(_.autoSkip?determineUnitForAutoTicks(s.minUnit,this.min,this.max,this._getLabelCapacity(et)):determineUnitForFormatting(this,j.length,s.minUnit,this.min,this.max)),this._majorUnit=!_.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets($),o.reverse&&j.reverse(),ticksFromTimestamps(this,j,this._majorUnit)}initOffsets(o){let s=0,_=0,$,et;this.options.offset&&o.length&&($=this.getDecimalForValue(o[0]),o.length===1?s=1-$:s=(this.getDecimalForValue(o[1])-$)/2,et=this.getDecimalForValue(o[o.length-1]),o.length===1?_=et:_=(et-this.getDecimalForValue(o[o.length-2]))/2);const tt=o.length<3?.5:.25;s=_limitValue(s,0,tt),_=_limitValue(_,0,tt),this._offsets={start:s,end:_,factor:1/(s+1+_)}}_generate(){const o=this._adapter,s=this.min,_=this.max,$=this.options,et=$.time,tt=et.unit||determineUnitForAutoTicks(et.minUnit,s,_,this._getLabelCapacity(s)),j=valueOrDefault(et.stepSize,1),it=tt==="week"?et.isoWeekday:!1,st=isNumber(it)||it===!0,ht={};let _t=s,gt,ft;if(st&&(_t=+o.startOf(_t,"isoWeek",it)),_t=+o.startOf(_t,st?"day":tt),o.diff(_,s,tt)>1e5*j)throw new Error(s+" and "+_+" are too far apart with stepSize of "+j+" "+tt);const ut=$.ticks.source==="data"&&this.getDataTimestamps();for(gt=_t,ft=0;gt<_;gt=+o.add(gt,j,tt),ft++)addTick(ht,gt,ut);return(gt===_||$.bounds==="ticks"||ft===1)&&addTick(ht,gt,ut),Object.keys(ht).sort((yt,Et)=>yt-Et).map(yt=>+yt)}getLabelForValue(o){const s=this._adapter,_=this.options.time;return _.tooltipFormat?s.format(o,_.tooltipFormat):s.format(o,_.displayFormats.datetime)}_tickFormatFunction(o,s,_,$){const et=this.options,tt=et.time.displayFormats,j=this._unit,it=this._majorUnit,st=j&&tt[j],ht=it&&tt[it],_t=_[s],gt=it&&ht&&_t&&_t.major,ft=this._adapter.format(o,$||(gt?ht:st)),ut=et.ticks.callback;return ut?callback(ut,[ft,s,_],this):ft}generateTickLabels(o){let s,_,$;for(s=0,_=o.length;s<_;++s)$=o[s],$.label=this._tickFormatFunction($.value,s,o)}getDecimalForValue(o){return o===null?NaN:(o-this.min)/(this.max-this.min)}getPixelForValue(o){const s=this._offsets,_=this.getDecimalForValue(o);return this.getPixelForDecimal((s.start+_)*s.factor)}getValueForPixel(o){const s=this._offsets,_=this.getDecimalForPixel(o)/s.factor-s.end;return this.min+_*(this.max-this.min)}_getLabelSize(o){const s=this.options.ticks,_=this.ctx.measureText(o).width,$=toRadians(this.isHorizontal()?s.maxRotation:s.minRotation),et=Math.cos($),tt=Math.sin($),j=this._resolveTickFontOptions(0).size;return{w:_*et+j*tt,h:_*tt+j*et}}_getLabelCapacity(o){const s=this.options.time,_=s.displayFormats,$=_[s.unit]||_.millisecond,et=this._tickFormatFunction(o,0,ticksFromTimestamps(this,[o],this._majorUnit),$),tt=this._getLabelSize(et),j=Math.floor(this.isHorizontal()?this.width/tt.w:this.height/tt.h)-1;return j>0?j:1}getDataTimestamps(){let o=this._cache.data||[],s,_;if(o.length)return o;const $=this.getMatchingVisibleMetas();if(this._normalized&&$.length)return this._cache.data=$[0].controller.getAllParsedValues(this);for(s=0,_=$.length;s<_;++s)o=o.concat($[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(o)}getLabelTimestamps(){const o=this._cache.labels||[];let s,_;if(o.length)return o;const $=this.getLabels();for(s=0,_=$.length;s<_;++s)o.push(parse(this,$[s]));return this._cache.labels=this._normalized?o:this.normalize(o)}normalize(o){return _arrayUnique(o.sort(sorter))}}TimeScale.id="time";TimeScale.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function interpolate(i,o,s){let _=0,$=i.length-1,et,tt,j,it;s?(o>=i[_].pos&&o<=i[$].pos&&({lo:_,hi:$}=_lookupByKey(i,"pos",o)),{pos:et,time:j}=i[_],{pos:tt,time:it}=i[$]):(o>=i[_].time&&o<=i[$].time&&({lo:_,hi:$}=_lookupByKey(i,"time",o)),{time:et,pos:j}=i[_],{time:tt,pos:it}=i[$]);const st=tt-et;return st?j+(it-j)*(o-et)/st:j}class TimeSeriesScale extends TimeScale{constructor(o){super(o),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const o=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(o);this._minPos=interpolate(s,this.min),this._tableRange=interpolate(s,this.max)-this._minPos,super.initOffsets(o)}buildLookupTable(o){const{min:s,max:_}=this,$=[],et=[];let tt,j,it,st,ht;for(tt=0,j=o.length;tt<j;++tt)st=o[tt],st>=s&&st<=_&&$.push(st);if($.length<2)return[{time:s,pos:0},{time:_,pos:1}];for(tt=0,j=$.length;tt<j;++tt)ht=$[tt+1],it=$[tt-1],st=$[tt],Math.round((ht+it)/2)!==st&&et.push({time:st,pos:tt/(j-1)});return et}_getTimestampsForTable(){let o=this._cache.all||[];if(o.length)return o;const s=this.getDataTimestamps(),_=this.getLabelTimestamps();return s.length&&_.length?o=this.normalize(s.concat(_)):o=s.length?s:_,o=this._cache.all=o,o}getDecimalForValue(o){return(interpolate(this._table,o)-this._minPos)/this._tableRange}getValueForPixel(o){const s=this._offsets,_=this.getDecimalForPixel(o)/s.factor-s.end;return interpolate(this._table,_*this._tableRange+this._minPos,!0)}}TimeSeriesScale.id="timeseries";TimeSeriesScale.defaults=TimeScale.defaults;var scales=Object.freeze({__proto__:null,CategoryScale,LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale});const registerables=[controllers,elements,plugins,scales];Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);Chart$1.register(...registerables);var loading="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACGFjVEwAAAAwAAAAAChseJYAAAAaZmNUTAAAAAAAAAAwAAAAMAAAAAAAAAAAAAQAZAAAR67u9QAAAK9JREFUaN7t0zEKwkAQheEVCxvPYGFla+UFbD1CwNY6ra23sPEAxgRNNKBpLWITA6IsBCV6A/txV1svsPB/8GCYah/LKAUA/4hI4xQWAxs7O/X4JNGtY1BkeXCWX4pMm50zBUZx5U3WWmbRVRbhRQ6rUvJl6bnzBbun397W0kvuMowrGZsy0+jmu1Ng/+iaEm8TsWmaubMxO7cO4dVXaT3/xs4AAAAAAAAAAAAAYH0AgOhTVFHYG+UAAAAaZmNUTAAAAAEAAAALAAAADwAAABUAAAAGAAQAZAAAZ7Lt7AAAAWFmZEFUAAAAAmjefZG/S0JxFMXPveKv7wu0paBcAh0iaHYKHGsIJBD6LyQS2qopsCGClpZoaWp6BZo0uDcIEUE/ECG33veJkz6R926DT9OUDlwuX/icA+d+qVT6DBuOU1aQDAAAUo1H1GZqK9XDH7Hu9XOaOGMTowsCQJm209nHDLFmWrCJoImgidEihgM+qJm1pSn4G0FTE/c1sW8gaKI5yw2d/IUJAPbuPs4UJG+IQEGgRGBAJCpIZ7NrT6NkAGi5wWObWA/SGfZgk010LiI0AV9nV9oW4XAIj036wnzbnYABgDrJS030Ml7WJobNXDytPBsT8G2OXIsD+d/UgckiWracSGFUcFzrpYapBNuGX1RBYIh0oxxYnYITD81kxPNeDUjIv4pv8q5o1k/Nl5tFBSlMwqjPhPFYj4Xd8Lsh3qIC/Lt797NhAKh8bUD4JgJJREVqMbg7+FdHwqg24sPnD+oal8W6KwosAAAAGmZjVEwAAAADAAAAEQAAABkAAAAVAAAABQAEAGQAALMDT1sAAAImZmRBVAAAAARo3p3UPWgUQRQH8FUEbcQvLPRACxVRiU2QJGDwNKD4BRHR4oIYJIpK1OJSKBI5gqASBY1E8AOSIim8Yr9mdu4M5FIIKiJiuK/dzO3ebQ4EwUrSqJjn2xyrG6sZH/xhmeK3b94woyhYALDkrT7d8gETfCuyxRhfnlULuUktD6/VPLxTp3Mc16SQtFY6o2pFIFoBXmFyDeymFDKqlZNjehFeYjTEaAObmySfYsLIkMa3PNNLP0b0EowjlF7ACkD1/JhUN4+M8oNhowzPERr9i83rerFdGLln2CsHDfszYvBkMfYxlYKlwtAAcXruGDbcx0SxEaN4ThgJ/thvOu8HTBv+wb48TburhKE+wtuum848YhDFHuvlQakhXyUz40lzBhCDELtr2N8fGvZ2YeQicWKXCJ9DDELsFua26UxIddNNK/09hANiEGB9iN1AKEWcI+LIVHVFgrreWVKBALuMudbA+BWZe9VpuSdP0QokMN2InQ8x6iSltnWUuhOd1IXTCHUtYDzAvl3IljYII/uzfNdBy/t5DKETUYzyF1Ld7LW84QOWB4cwEexXl+nuEUaaqL+mlVW/tltVWIx5bxSZV7CJ1XqbWQ1aEfqDUQ+OW25CGIlPwbIdrJbfjVAzIiHWYXn1wzJHvinjd2xlPiAGIdaGiZNqXGrIGzOz6maEolgL83dKIetIPbY+M1tBDAJsG/OHlP8qnMFqVt+3NtLBb68GzUQnZ+QFAAAAGmZjVEwAAAAFAAAAFgAAACIAAAAVAAAABQAEAGQAAAaksUUAAALMZmRBVAAAAAZo3q3WW0gUYRTAcQu6EUQPUZAVZQhGF6noRkJiYWiKRVgYGEuJSWQkFsUuxYqaUVQqRkp2sSxSY+c+m5BW9JhBsM7uzM7szmw+JD1E0I2k9nRGZ2va19PAgWUe/r8z3zzMZmTgBQDThlllyysc+3fG/7hkWZ8lBUaHB5lReMaE4EUgNGzfI4f7mXAlwyjAY1jCsYGhQMhHDvcySv1jVoEBHAajNiAzo1+GhLeZpPA9JrSyhw1PPMSwDTz5AygPyFt3M8rVO2wY7uO4gGQgoOSRwu2yPu8mF3l/C8NuoI9R3vj9MJ0Ub+Mj1R1cBDpxbOBuCmAUDylsb3aNi7xuw3AaMN6LT0SKX+TU7Zc5NYkA2MANB7jNKi3kF9nIq30tnApXcFIAPsGPTiGcTQr7WGOpn1e/NvEquIF2LsySt/bxWsN5XoMGnCYMX3KAVjaymxSu6x+bc47XLC+GL7gBXg13dY3MIMVP8dGKej4KZzHqBpr5SC35SE7w0ZcIwGkH8E0C0Y9+QVtACtdw+vrjgv6rVoiCG/ByWgd56ypR764WdEAAbKBuCvjp5dR1pHBlwFjoEYxPRzF8zAFOTgL6EHnrCsk4UykY4MHov4C2jxQu71dmHhANrUI0IAVUTQExz3NzNileJsRL94sxQAAOuQFR95KPpESIyWUYTwM+H+HUxaRwoWDmFInxiRIM73WAgzYgGT3krQvk2PVCKQ4IgAtIlgsx2mcsnzHn75DiHwowngJKp4AR8mdsq2TW5EkmIAA7HaAY4yWCcZh2HrjZJskc2YbxNGC8iPoZyw0m8jbIVhIBSAH5NiDGm8kvcrVsDeTKFiAAm/8C33eJiSxSOCdoLs+RrW8IQBrQSt56hfSuMVtOAAKwxgE2StYjcnjR4PjcZcGEkYVxG1iF5742aBX/l//YS4SxzEx5rBWB3qyn1h773m+SXYWCYYXpgQAAABpmY1RMAAAABwAAABsAAAArAAAAFQAAAAUABABkAACqa+X8AAADYGZkQVQAAAAIaN612GlIFVEUB3CLKCgqqA8RFQmStBethPEorGglizLbLJFKLLV9p16FFZK2K9FitFhJvlnuzJgUBkVfwqLSmTfvzbx572W0QH1opYU8nZtvcPTzvRcODPPlx/9yuPdwk5JwAUCnOlGfXI9Fv5N4LU2zuimBpnpNaII6rPuBxnr6jwtWIxirBUEHCSEF6z8aaNzHBasS9G3Vog53sQSEEuhXQl4MYI5dFRpTbor671uIeVFZ0K9xSXdVNMquiQYgCi5aI+gtgYA+lTl2Q7N6XRaNd4iCi95uRRv8fujMHKwQ9Q0XEbqCRdHrCfSO1LSGOUYTlMvBhguIdEDf0+TMwbOSmXZOCraUS0HwopVisJhLs5yUgtWnEUMUXPSSaPyqJMYQ5lipaA8qlczviIKLVlBUMGq4pDsqmUdKJBNOYFH0TAI9T4Kz2DcLaeheLJnxY4hRtLQN1f0PH3ZhD0rmqsOyCYjCcQ9aJhv57PcSr5oDcuixXw7BES8qm5/OBYJ9mXt7iTVunxz6iyh0QE9xaZZdcrhyD0KIggf9U6wYI5ljRZLTb7sc/rxTDoMXPSSHHnBJt5mE9mxBDFHYiRBF91OUWAuYY0ur9a6bSDhcRMLgorsoSkJ2AY8RIo/Yi/KJBQUIUnRrAt1Nwju4bOc6YtXlIdgB/bK5xujPHMsRreG5xPqDKHjRQmJd5JIuW4mcX4sIouCiG4n1t0gOTWTfLPea+6xU7I/ZxAYXXd+KPkniMeBmqnbhcsWGlQhSNMdNqthZzLFpePIvUSKvMhGk6Ko2tHl13csezMEMEklfpEQAUVjWDrX8XJplvmJLCxFb3B79sUJ1BjPH5mhWylwl8nMBQl40S7GruKSboTolsxUHEAUvmqmGfcyxNMnsma46b2eqDnjRDOI85zJN+5RY7jTEEAUXnfcfdXLZ7yUmSFOjT31qFFx0FkWJ82HG/Uhv5t4kEpsyRY22TEXQh9D0NrSES7NMUKNVkxFDFDzor3Q1ksocG629GThOi31DFNqhmiNxSTeyNn5wjBYDRKEDOps5Np687T5ci8VHIeaiE1vRF1zSpda+zhqKCKJA0bEJlM/jCt5rKWr80RAtDhQd0Yo2c3vMSa6NJidr8WcpCKZq8eZhquP7ByfqQHlEWABmAAAAGmZjVEwAAAAJAAAAMAAAACUAAAAAAAAACwAEAGQAAKmGMjkAAANYZmRBVAAAAApo3tXYaUgUYRgH8C2kKDuwqOy+sMNOpAMzFsOSLumgzNKskFLssKL73AorJLtLwsqgg1qoZuadmd2lwA/Rl5CoaHdn59rdRjqgPhSdSD49kw6Osn6M7X3h//35vc/zMMPrcPyjc0tUelxjAu9uMAG4ibnN+OEuxs3461wu6Oig4VQx/uJqLP46xg65x75eQwXAvOnLXLDuChbeBvLe7BAViAuslHGRDTZeZoNgh9QwwXIHLecMG3SfQwBCwIJcZQK/akgghQpAJaMOrmSlbwgBC1JlQh4G7lPTheOsdKyCleAUxoScb4ZcIsFsOhaa1HUtZ6XoCQSYkMoWiN9VW5tAB4KVCo5yEiAETtogp7lAKR1zBNDhEBd64uJCcMwO4aRPFx8Ee1Nh2EeUtP1c6DdCoA3kLDULvZuTa/Zi8QgBG6ShnA+MpwJQxur9dnDy512cDHbIES70mJoubCWhvdsQgBDYhcWbkAMmhCg5VACWu/2dNhFZLiMyWJDdJoSE1M2i0pkKRAlRl5QSBTYjwoRsb4bsIfJOakZpPVF8JYhoA/my9X6gPxWAdYySWkSUBoSAHbKFKNXUdKGQ1y6txcIRAhZkI1F+l3GhqXQstNfolc+rHwuJChZkQxPkqfn1pgKRK6hbVvIq5CPChKyzOsKreVQAMvGPdBmvvcpFhAkpaIEYq30vE6lALCZa1hJeA4TAilYQxUXNQi/kVXYRApa2hnxfJehDqQDME5WR83ntZw4Wb4fk8eodarowW9Ar5vI6IATskFxBdlIByGCl7lmC/naOoIMdspjoz6l51XPykaJMBCAELMiCvxC9iI45wpvOEMLPnEIYLEi2CSH6h9mPtJ5UGKaRSHq6EG6ciQgnFj+rBVJBzUJPEcJ3piMAIWCD/MoStFFUACaK9YPSxMhXhEAriKiz/82sJ3vfHBzgMYKDPVFtmBjVhmNSMKMxqWJEmyBGfkwSI4AQsENmiHr8X/V6euqLe3veQB9MMmYgBiGAEBiBQQiMwcIRAggBCzK1CfLCMZOPJsUTkOgx3D08BiRhTEjfGJCRMSCTmyF/WxhPQCefcbiL14BuCGgPMiQGZFwTxIj/DvjeJyZ469nOXqOxPUj/GJBRYtQYK+jOP0moWT95E2zZAAAAGmZjVEwAAAALAAAADgAAAAUAAAAVAAAAKwAEAGQAAH1y1dMAAAB5ZmRBVAAAAAxo3n3MsQ3CQAxG4c93qZmAOeip2IE9WINpKLJBJmCCjBGIKe4UoQhh6cmy/fsFGOcrcYt0KKhSwYCykSobYZxPxNTvIPpQe7hkC++l5+8nSLyxCitKZOvZdhWDiKf0sxIvxE6wJsXl+MAdC/8Fi2gEHzF0I+cJ3N4OAAAAGmZjVEwAAAANAAAAJgAAACsAAAAKAAAABQAEAGQAAHinmB8AAAQvZmRBVAAAAA5o3sWYXYhVVRTHf/9976iZZfmgYL2kTOaYhigZJcFQWI2pZWZICX1ARUWTfSmIcDFRQ/xAqpcQ66UHH2oUHbGQiR56yAStRHQaxFQsSCGl6c7Z557Vw73n3jNnxmAg716wH849m3t++7/W2nvtJUZoZqaje3+6F2DOklk/SDKug2kkk7u7e0dPKPcfFGp3VcyeW8aMfay1o3Xg/wZzI5k8dqC83OPaPcIDFdR+udz/7vVQbERgMUz0Ai+owgmPW/P9nmO3BQWLoMsj76nBCWIxLm4pbAoK1vHkzD5vfNRQq+rSCJ7r+fLE/GBgAG7M6JIXv3ugOoRHisSOUslcMLCOjtYrHpVStRrD5sybdWJlMDCAE8faPvXiqJfwyrhUfNjd3XtzMLBSSUmsQqcHaySC8NKkcjla3fQNNm+fd53cI+xpAQ7DVVcaFQq6e9mitt6mK5ZahfgdD/2ZJMDDqIGYzUFcmdqLT8w858W2wUkgvFj62VcnFwQDA5Dr3+Sl3xqJUAWsyLaXenqKwcBeWTS3P0Zr64qlgFLb5L8mvRwk+LOl0NZ9p75z2HxX+1MHSFwm5s43lk6/1HTFACTZgEs6PUqyR1VsTKgUbF0wxVLb0HVqt5M9nypWG3GxkMzufLztl6Yrllq/WtZ46Uq1LKqPYjl2O4K4MrWNS6b84Y3N1S0jHeDFQxu6Ti4KBgZQHIi3etQ7eF8TlYLbvrO7d3QwsNLyGVEsWz2k+jCm/lmxN4MEf9be2nf6kIMFje3DcHBVvjJt41NtF5uuWP0cTbTKi7iRCMKjm+KWlvVBFQN4dX/vx854TY3KA2ckDrtv6+JpR4IoBuCL0boILg26IwgXiR2YKRjYrkdnXPZo/ZDqA3f/6wf6ngkGBnB23LlPKujnfJZGZltWHjp+YzCwb9vb4witqpffjbP09pZo7HtBgj9ry/b/utfB4mz14Yx/Rjk3fdfCKWebrli9veDsbY8GstWHFzeULdkUxJWpdXW09nnTTl/tgdRdGsGK5QdOPxgMDMAl0QceXcxnaZQUh9zimwq2b8ldVyNYl0sCYtnso3PPvBAMDODwj3fsjuBIvZ1Vg4yNjQ9/0zc+GBglJVHiOj2yxgUGvGOii7S26dtF3uYdOPNFAVakZ2jtPI0cNvPwwqmnXSgwFL/v4e9cO2uUl9vSUOzrCw+Q2GaMyYM2QIzcxaJeWwkoZOYW6rFhOGvESCGjSHa+qmNyAcY4G/wdyR4R+8/eSrFwBhg/3F6ShXSALA9qOejcOxvu3bUWDDXI40WKxTlg44dTO6k3T8Ch9BLb6OwYqPZ7HrL6LJwyMPVFaeiC02cJwT1FxCmMGPjPPkOSAU0hnTIwOcihqqi2qKGQufIbB+erMXbwwkso2QYaUTdQ14pHu0YYDOe6mrsz785jevZfJmHP8r30AXEAAAAaZmNUTAAAAA8AAAAwAAAAKgAAAAAAAAAGAAQAZAAAcRPiHgAABDJmZEFUAAAAEGje1ZlvaFV1GMc/z+9e3TSt6IWC+cZkmbMVli9EJBiK1WxaVqtRUb2ooMhhWRPG4GLgjLUc9udFIb4L8UXN4VYSMojozQomNsStYX8Ui9CW4vXu/M45Ty/uufeec3YnBS5+PvB7cQ6/+/x+n/M83/M893eEWbDxwfGayUL+S5DG4h0durV2/sN1TXVT13stMxsAk1cLLZXNA0jjZCG/czbWmhUADxb5QAhoBWLXd4dHbr8hAAqGPotYi1AcEMCCzBzpuiEANjzWMGHRD62AFSiDqHn2289H1zsPADBVOy/nifxuiSCKQwIJezWnxnmApqa6Sz6Sq6RRcXhw//F7Rp9zHgBgeKT+Ux/5wQKVIfjCu4OD4zc7D5DLSWiNtllES2KOxuKw4LVfjzWE/8EO9Y0eNvCkRAsaBUG9bGDubn6iftzZCJRMCd+0kC9HQMCKzC1k2Ot0CpWs9dGG36zK+/G6UATRbYe+OLnJeQCAqWy+y8KvJSGXh2T2DQ0NZZ0HeKV5Td4T05F8I4GF+p//Xvyy0yIua0FVPug/9U0GWV8RtCJwsSaUO5/ftvKCsxEAEBENDG0WwooOBCtyWz6jnc5HoGTv9Z0+iOgLgmKiTQj4ZHR12yP1PzobgbKgxdtl4VKqzcgGvul1OoVK1rG14Q8f3VvsVGND2NDdd6rZeQCAYCrssZjxSAPljtUT2bd/cLzGeYBcyyrPE22PN3nFuiDL/wp0u9Mijlt7/9gx0E0SPc1I0JdDG6zY83j9eWcjUDI/lB0W8ZOCZiFzMrtviAgAbD96+iNUXi12qVGBg1DRtT1bVgw7HQGAK1m/0yIX4mK2ggmFXlTFeYADD626aNHd6UbPw6x7bWDsKecBAJYuOPexhZPpZs9X073z2ImbnAfINTb6HmZHSsxYWDrpzX/LaRHH7emjPx0R2GIA0bKgr2aNWXlg8x2/OBuBkhWMvmGRqdR50ryChl1Op1DJ+prqJqzK/iqp1NoyMPaA8wAAGnrv+HA+3Wb4YbY3lzrVcxKgf+tdly3SmTpLwoquHllz5kXnAQDWfr/soBWGy91qqTao7tn49cQtzgPkchL6oWmzoAlBG1lkPOlw9jWatnUDZz4z0Frskcp/QT2DNhzfvHzMuA4QiP+2hSupNmOuJ6a7GIEjfy6kxusBbUQxJhaWDBrvDsv5luzdNXEd6+mnz9G478o8idaiio/oeomo1k7zL/qg8NW5T0BfmqlMJzeTBIpVyth9rfK76UDx1vlaPgwzzFPFwIkswsbYl7jk+5jKR7oAECTpRDTlFEw059qbEYzEN5YEivuo+uCKZ0wYuDdLoKMYlv2rAhONsByh6UBJmMqc9GaST1wQicFMi67MlLZns0jmdQiWAPf954pZBagCk0onrbYZrZImkQ9JRVCTERQ4KyrP/APT7dIdHNFWEAAAABpmY1RMAAAAEQAAACwAAAAMAAAAAAAAACEABABkAgD8ivGfAAACBmZkQVQAAAASaN7Flb1rFEEYh5/f3AWDhQSCEBRJYnIgNiI2MYUggpADPwoRxT9B1CaxCcoJ2gSLQFoh2NhLNKeNH4WIeJWIFjkS9UBRG5EouZvdfS12b+/2ONvNDwZm2HdmnnfejxX/0eTq2o7dFKci3M835dEP5KBLK2snHXoqwAHCSOaVe6dKtwDUb+OhlcZeVwhfCiacGUhLtfLY1TygLzyqPxScdoCMNvBfF3Jg+exkw/XbFBTCRQ8THvASAVw5vPr5YB7A3jTrUSu+Ox07fZGFvi88Wf101JleCeSSkAiQ7Pj7mfEXeUCfWVlfcLK59t0Jh5npWPaFzRSgux7kAY/a4+uWBa/JSa1CeNvD95gh5VAkFjPAI0++nPNo2ktxKJINAXajXi418wKulku/AzQfg3Y4WnCkA1yrDQSmOxmvJLz0bn1z9D45a6o2vuzF24QhjXYKvOvHyGUvlXq98sYc5xXmDVypKAoid82DdRegAIaebww1m8W6jGHXLrK4nTz7NbPvBNuo6ccbDxxcVNKXHcDmVnHeo+E0d+MRtczNss0KFVz38KedpqL6bQyFH4FB0j8MCLwza3S9dpo/ythZZt0ToayNdfpooctOQAHrc3a63iOzQQFFFN5swwJEHecGJO3PXm5ZGAMlhdDTM3ugFc/VcSCyLFSY2PSekZ6t+Ps/kTTHxalO1YsAAAAaZmNUTAAAABMAAAAnAAAAFQAAAAAAAAAYAAQAZAIAtADR+wAAAwVmZEFUAAAAFGjexZZNaBVXFMd/5848Y56hxSCI+IXGBCXdCFnUjRBdNJoYhFJRsKtCLYJBrREJ2EZLm42gNigoSLtrURdqYlT8WkpBFyIVk/hJWosFIyjSvrkzc7qYybyZmNQYX5I/nMUMh3P+93/OufcI74CvunrnGpxWIZxlhF86m2rOM07s7+rdI6odRkGIzABGtbl1/bIu4n9jwueXbs8o8/K3DVTFwdTBNB1ZV9UzHnLbevrLZvrhXQOLo3iKAUTpt4Xgo/YNtZ4ZazDx8q0+UmWB2MQT3Txe5TrXVhc8YVcxnkQmUm2m51rGrNxnXb1zc+L0CeQlW4bDP69bsp33wO5zfVcEXT1U1jj2y1BzNWNSLjC5HzwkbwEriXn/ONrJe8KGwQ6L+IlyCBY+ULHfv1W55p7+5YTmpoBJnQxBD5xuWtJKCdDS3XsEla3DhiN8q3KF0DlkEZPqNTwYFLesgxLhtevvtchzK5KujPlfcvXnH3zqCysjZ4kMIRD55lTD/MFSkTvRUDto0f2ZwUAYlVztyd+nWUxH3ANF1YR7z2YPHqfEmFfx51ELd9K5RiVXkS9vsVA9/DS+MV/fqquzpSbXXl/ve5gd6VwjDkTtxYHKaWHQL1BpVJMmdeDajcZFq5lAbOy+f1ag2YyqXBjss1AZXR0yZIGHu50Jxr9Gd1qkMGJZay49WmqRLRbBz0yonrjVOP/ORJM7s7b6gVX5ccSBsL45YCE3rNdeoXzLJEFD7zsf/sr03Oyex6tcMVeThzi+FI3S9rBxYQeTiIbuh1+4yddJdQIZOKjJCyAYAYEBDdzDTDI+vrnop0S5Dy/88SXoMROrluxXsOnZmgW/MgWIyF3/u6K8UOgTZU76/XSE3158Mm8FIjoV5FwA1/PaLDJHBAzJvaaq4a6pIhYpd/npAsLwHko52Z0qMKpPMit0Su6in2a+08q/4aPFBdLJbDjgoG/EdgnCdoiIAYRF4o6ILM4m0mxijQcnQ0gzSU08XAJDA4aghJolF8Q+6Rj/AQB4LsR2B2nNAAAAGmZjVEwAAAAVAAAAIgAAAB4AAAAAAAAADwAEAGQAACn7SAcAAAOxZmRBVAAAABZo3r1XT2gcZRT//b7ZLc1APfRqttSmEDSkHgKBiJdSikibiGxJQYh/DlLwYPEQO2CkkZYQuhZXRA+C1autpqlbElAQFL15CWiT7aLm0Cw0h/6xSZudb+Z7PUxmdmbapLubrA++wwxv3veb3/d+772P2KJ9dWVhF8Sct4CDBK8Zwcm3Xn12Me7z7fRflwgcIwACUAIoyprvm558/sA/AKC2CkTDfOEBb7vAfg0ZMpDv0z73RY1q4IEGoAFoAi6406hMIfThVkB8Oj3/giJ+I0Cu/xUBGEvvfufogdtx328uXztDYizwE4TsQOHQa0M9P7fMiIjQU/xEA4z+NFhLy3/03k37K1tPusBS4MNo+YbFixfFahnIxJXrI1rQHw+qQbjAR+PjNGn/1196flVTOSnQ0EDv6o75Ey0dzXipalPuLShIjgAo60kIzO2rdfcND9PfiMXPfpj/1QJfrCeugMCtlhjxsOJoIBcxwWDVYEY3AgEAJMVXOKkBU09cQpO7m2bk/ZlKJzwpE2KHybnOxtSZoe58IzE+ni5/DcqbhEQJ3jQjNV8KGrBTueGu0XcajkHX0cB/8RhNATlRqgx44HHNoBZoBvR6RLEw+Fyl0TgfvNJ704NMht/rphgRoQ8UA7nG2CCXV3ZaE80y69fMeQ1VCfOrYSBvXP17xAP70/JzwbEvD3fdbVp5wz2uSznVFCODpartKpwNqIznBubuPOi60GotmhzsvuyBPzYMJMs1RwtzYZ8Il6es0UubyLWhUmD4nga9J8r35ZlKZ9aoMoGEXAlMfXe0K49tsHevlj/PPDFHjSpo0I5rnoBrBA62yVYz3oebMnKotDgAZX5PdFcBSDk3e6TrFLbR1GZyrSkpajDZXYllvQMT2Gbb8Gj6Z/8d0WB/cByMyrCijP3SglxbAtJXqtoa+iwpYXeMumtu5ZkLaIM9Fsia5ToEcgSgyAiIJdyyXDfszOkX+2dudFrwywDs+EhHwdSfR/bm0SbLPDpreAUftIOjiNhwLaMctNESQJ6evTGgYY4HmwtUffIqXh/MVdoJRCXkClOsD8Ph5KWWkfUm0GaLGHlqdmlEM5Sr1OUqGFtqg1wfn6ylqt2R9RcoyKXGv7k79zr70CalPMJIJmscDebI5OVH0Yz+HyACRn6q7oExCxB0IHZbI2CUyGKMnSihmPCTxHOK0aSP1OuFlezkyMD3TwPsCJHFbkaK5L5kUEluIkH5T24uiQ0SLYJ1YEaSQB4CgnuSISYCxzkAAAAaZmNUTAAAABcAAAAhAAAAIwAAAAEAAAAHAAQAZAAApfNfPQAABAtmZEFUAAAAGGjetVddaBxVFP6+u5u0a2IffBGbkGgVEhNrS6VarYp5UMTmpw1tqI1FwScJKIltU4mBQLtNlPQnWPsgiogUyqJ2w6apCBKQIEKfRLPNpmDEbYSqhBqSmJ07M8eH3UxmNj/sJjsHDiyzc8/97nfOd88ZosB245ufuwCe9j6V93c37wivtoaFBDA6OL5VWUaCQKnKBM9sMKtNu/qZlp1TK61ThQShbeOMBks1iCUHLKA0UMRe35n49uv4roCybhBQzJyOACjObwHU88821476woSI0FL2BQ2qbBY0HadF+4L0iPIFRDQ6dlgDz2kAXqfHDeCJ7x8fO1rwdEQiyZBdPHMzAFR66Zd4hoQd7iJVwJ+bNKvqWmpnC8aEUTx73AQqndNndjaJDlOhTYPipCbtW+eCeK9gTHwRS5RZlpUgUOI5LTHU2lTTAABXomMRBRxy/hOAECNoqccaDtbc2jATC5b0aqAkqxb0AtQxp2hhv6uBeS9TLF4IoG/D6bgYi+8yKK2ahMeBi282VScW33t1//akFp7zKAaApjRfufrLS+sGISJM2WpAA8rDAjE9Z8jp7PdTwfleDfyxTDEMnB8ZGQmuqybC0ZtHAuRleqsepN3W0VhzaaU1lwbHX1Nif6my1wBteTNxLpIMmUqdcS4hhwmJz9x755PV1r3VWHXZIEazUgcNnMobxD+h+RMaqFyiNO2pADp66urMVfsDKZbCOxqwl9JHaPK+vNLRHkuUFQkThHglCYmdaqxuzCVGfzTxOShvEOL0l/yYEPSlJekuLmozIMdyDZGicVIDM+4YOYNouzbxlEHV6mpI0AAMmx/17nt0Itc4XU3b75iQPnc9qRw1yZTwrAaYxcI0NxnhfOvKStlnNdStxXrKCcTrQ78dMYV7s7ukCek6/3LtdL4gelpqDYPSmTMThyLJkKakJellIf5A6dSn671x+xqqrprgdzmBkJDRaYAVWQMKtEj7WpLMxUyb7Ro015RofSxRphhc1iUJDn5Vv21/IQait4cSHwfXRMqiDwiUuDVNwAhQThRqNp0Lmt2rMvHC8OSegMiPBOjc8wIQ6L9ev+14Iad0tZokTZF+DdKtBoP4+z/NMApsK6Zj97XJVk3uTaeA7o7X/cOBh+76DuLpSDK0oKxwehQTd9uNb77n98/ggy0DMVNqniRYkZ4V6QJht/+0QUnm9AX2yPDtcgVrPC1JcUkS0V9fefAAfDIPE6aYH5IsSZ/cYcFQEuiEj+aAuH/49h5N+3B6Y8mM5gAFA5P7yif8BKEWJWnRHkh3SbgmJvUXi80wfLYgAGy5PnVUk09mPt8cSSrY3VMvPvyv3yCISDIU2oJxCiqyJuGxu5vLd6KOpt8g/gfmUtaG5klergAAABpmY1RMAAAAGQAAAB8AAAAjAAAADwAAAAcABABkAAC7TR7vAAADymZkQVQAAAAaaN61V11sFFUU/r47C1ipUR8koiGSWLBLRZO69UFsDG8KJUvAWGLE6IM2UQnUStDU2JXUoobKopLYxpioMUoNv21Rn4xBTQho1MTWtStEEGOr1loxdefO3OPDzuzPQGF3s3OS83Jzz3z3O/c795whZrHj+7/tBNhdtCh8sGn98ndRJVMXWvz80A/XafBpB4ABIN46gQWookUutKiN3aPAWnqnIwBCNCLqUKjgH+8baXTgbiSzoHlw7Lkr3pCuJnhR2kWErjJJDSoNIu+Y1DKnG1W2IuYHD36/gUAz82yzpxM+t3pd9M/QwAcGztRkOL3D8oHFT7mMjv/+Xz9CsBy4PffcVgA3GB+cWXAFtLe1xXQY4ASAtwdT17uumyIwv0BgIGT4gbUNLYUB7x8YXRyh2a0EyyzKp2SkIx6v/6di5jPG9BCYH1C3FlodwQADs88BGhUBF6wj3BoAGytinjycarLEHGM204V1nWyLL2sv3Pze0HdXO05kMrtP/EOKRWlujd/8Rdml5ookNUANwHcb+MO1nO3BzWMnlv9tA2ez+3KlSFvU7kRCVNngGrijuKYJh9L1WMstfwU3JxI0GkgUHtTz2xbfOvpw+eAENAs/JCPTV4zPWloT30TfssnjmkTOAdhkT9/AT1eWydxj7H0oY+HJxMqVzmwBiQSNFmzRgOQOTEITC9x5mc5y055j7UAGu1qin1wqqGNt9EsN7PWe3gLn5tf3jy6thLl2LHmq1EDjRLZq4N+AXubaFnrLu3MAtuFrO1ZHfyw1cNv6Jb/YkJ3FegE02LLzcOqe0pmTk5xnv1CuWqcytS9p8Oe8+LLizYi80td3Yk5Jd+5AOnfd3TBZLviu+xbN2MS2Atb+FdaPL6x9vIS0c2Rh7dk3K20OL665aa8GPwvWvg12PXNk7JqLg4u0X6y0SjHbwhYNuoEB5Cpqd/slu1o1bNPgWD8hjygpGkSMKHV7b0vdVyVPr5WY1nxWg1OFwtOEco1JQoShgr+xrm5Ck92BpgNN3vnEcPreUMEBQF079aoGU+c1HkHvo4O/Xh4qeH8sprVRmwLCgwYWGZ7rCE1whdY6lB5WwCrlDaKe+GYErH9nzY2nQ2Gee/ddbNZgJtvxcl5jaHpCS7tvH8br0g6xJ5h+G7x/w9DJ5lDBASBD87wGfgs8vbQhSX/kCg38o1VLpm2orvN7Phq/jp18KDTB5aceUUebTh0jECsSn8iEfRmWhgoOAM1H0iuUqKPKG8398VxBXg4dHABWDJ/6gECr9z/g/xvY/wMSR7zfnh0m2AAAABpmY1RMAAAAGwAAACcAAAAdAAAACQAAAA8ABABkAACQMqAdAAADhWZkQVQAAAAcaN7FmF1oHFUUx///u8nqdpFCHwStobRpNVp8qAgigtiHomaThvpQjClSEPTBB9102ypRWdQ0taUmLXlSFMWPhwpq2AbrB6QK+qI+CBLcxYRiqqJGUUp2mzkz9/iwXzOTzTbNx/TAebgzw8zvno//vXeIJvZ2Lr/R87w8gaQBwIob4kxfz23dWGNraXbzkqdDAJIE4IMThckgAlsUbjQ3eYdjtY8gAnCqo0/0dOSjgDONLqoq5605KYARADUn/plz9GVEZLFGF+M7Hn5EybQFUXUFYamZ/oe2fxUV3IK0vnp6JnHRFI9YaCWNlSaATl667o/XEKEtgJtNFA8ZxSZTqTWyDAej/dmdO90o4egfpHP5ja3KPKFB6YDmXtrdsRsRWzByiqMCJAnWu5OQmLEZXAWrwT05XrjLsexjpdZMtd5UR4+lbi0s9wODY4WUge0lMBs3PN7ffcuvVyYlqpy3HBaAAqLm5Kx68ReXC5bN5Ttdak6IPpd4qmT1y+Of/pC8IrhHz0z3uuDdAU0r69oLI3s2/7tcOFHsC0yYbC86icNLhuvO/bZOjB4VAv6oOeCPNyYvvL6SmnHJPxdMWDUzMD65aUlwraZ0UJRtlUj5nOmVSodDnBJwPlAqQMJ6sWNLgnMVB8uz8r/AjL3f1f7FSrttuOvmaQFGylmpOiHg3gNjhXsvCydgMhR6x6MeWi05mFM7KDC/CxnIjEuMZLNqmsOVU1j28qxOfZRqL6wW3Js9HRcd6nPh7Ljkjr/v/Hn/ZSJXj5pD/FUSDq62mLZ9t/UtgX4bbg5HMfT451Prm6W1Phvw+XMrkI5F9S5LKzRPC6i+xoAA13sl++xSIjdp1p1/Y62Wone7tn4jBqdrdVdPb3p/bmrbIjVXqTdq+twa7zocakbAYki24kJ9pVnkPv6+c8tna72Qf9i57YIDngjpHgTY0zs+vatRzTmuthxGRHZNsXVIgF9Cuod51eH7JiZagnCKkz+lbipEBffB3raSCw74olb17euLbY8F4Bh3BxGxnU1tfs8hvg7pK0R55P6zMxtqcNO72v+LfBdJqgMeEECDzcEN8GSg4TY9artn/Pw7hO4rHwe0uvsWGNw+8eCWvLmacNbGnhFgLrS0tboWJwCA134yM2V8p+vgrwcNjIOHntAzWk9DzPccAcSgDd5dG99A1cSCe4oH/geA/qt59cXVmAAAABpmY1RMAAAAHQAAACkAAAAOAAAABAAAABgABABkAADVd96AAAABxGZkQVQAAAAeaN7N1E1PE0EAxvE1mhg9Ga/GBF+KaSkB1AIK2k0LKqRo0VaBKm0VtLE06Dfo3XjxM8ClB8DOS/XEhS+gCQc7s7tdqx5IuOGhl47PgjUYE4+bmeR32jn8D7OPYfznFFl9qEhEe4nUVQmW4VUV3ou3hhZHqSMLVGw9J0K9gAK8BETvvv6wfVqLxiyxMjkiVR5hT+EZLO4H1wtaBKYrzRNzVLoZKtVjhD6BechRuV3e3DymRWSKWOUUtdRDRD6CGZiFDBG3tAhMkC9n7lJr7x4ip+E+PIAUtTcMXc4daq9MUFtNIiwBU4Do1jSzurUINLkzHGd2e4zZahxuA6IVot9oMzmjzN66yRwVRZwJsQM75rpzSovGCG9khhB4Da7DCNw44Nvk5DdEKF8V0RIXx//5eIX8ODnAG83LvKGuIiwCgzDMnM/pijrqRyDm7l1n7rJEynn8wH9dCDOnHEZgL/RBPwx4am7cl13mInR47ua8uaNy7c+FCx+/n73E3Z+ggggLQY+n5vo2OUkizMNzl0akFz3LZWz/Qhf/unoOgefhIgSgm7utIGkG/IqcwBvE3H37PXcq2dloZn3yntsv5ZpZTXufdM4AAAAaZmNUTAAAAB8AAAAvAAAADAAAAAEAAAAhAAQAZAAAQRf7KAAAAX9mZEFUAAAAIGjezZUxa1NhFIaf9yRIYiS4FUoIiv0BLpZ2M0OXZnITrLuT4GQXoUsWt44OTt261EFau3bqD2hLcLCF3CxO1UFK7809DrnJvUluO38vfHDPx7mH57x8nCNK9OL7ry2T9gxQdrLvdyfdp18IRNX5i/X9Qf3GRj0B5l6Ev6g9vPpKQFqA//so2RZqCzCpAJ9+OO10kpDgVQxWDqOWMeoLGkbuuuDb2eaTVwSmGecTTz5Laoydnrp+a175SICawi8dRmux0tdjYMc8c93Zvey2foYIbwC4a6R0NwbFQIyIJWLZbz1IegSqKkDzaPg2llYtc30yGo3003Dj2Z9Q4cX+oF5v0pfTnpvr59e11nM6SkKFt2qT7Ri1x8+E6Ulc70MEf3lw+Zgdt7Hzx9E/nDr5FkWQmvtVcbtaYbbmeT4Tl2zkPMfzuVwp5Amo4CW1C/FkWYqaOctCkZG+ET8iv2sBzIL4XMEyYC/5b7GZ6STj/hqljWTNGIr+A3aWb1YDMT8GAAAAGmZjVEwAAAAhAAAAMAAAACgAAAAAAAAACAAEAGQBAH8nJFcAAAQ9ZmRBVAAAACJo3s2ZT2gcVRzHv9/frKnrxnhvNGlpDq1BsGmwleAhoCht2pqqEBN6qJd6EUmJbaW0eGhSK1aM1oNFBS8eFgoJadeDnkoFT0XBxmyotrBpQYvRRpRk3sz8PMzs7OxmTTfJ/pkvPBbmzbx5n/f7895vlqiyrk1e2+i6iSyA5uh1Kke6X3riXLXfJ9UecMlNjHklkwdgmJBJ1ECJag525eKPXQ54kAAECglWiMQnO/Z33qgFQNUsoKq0xfrQEGIIGDDf5j194DRqpKpZIDNxfUCAZwQEoRD6q2MpT/Uc2PZHrQCqYoF0Opc0wBkDwG/h6v+curt4ATVUdSzQtPCWAdtFA5/P+z8x3H2429QSgOsd4MupbGvCdbIEUvmgFQBQXnq5//G9qLHWbQHHdc8omGI4eYUAxhIZQR20LoBPp6a7HBdDXmBKH4AQ4Pyr+7dm6wGw5iBWVS55GDekGBKGDAIY87atp1EnWWt9sHn7wKCSwwpAAXgAlIQnGHn9QOeVegGsyYU+SOeSi/hnLBq0hILA9MLDv11AHbUmgL+T/x6Fsl2gKKROAqpH3untdeoJsOo0emIq2wpFVoCizANg6tS+rftQZ63aAkuKdwVMie8ywYZFY4k3ggZoVQBvXp7daTwM+W7DEICefnx277bZRgBUnkZVuaQ8Z0AaAmED5u0NzigapIot8NqlG4MG6IlsVr4FqCfOv9A5H2uAV9K5pMHSWJlCZbo1dfszNFAVATC5eMyQbcyvvuYPbDpc77S56jTaN5VtbWIiyzBthhaY/Kqv40U0WPe1gDJx1g6Oyiz4v50gjiIGWhHg2czNXbbqoAAQLRQqFvSji3s6ZuMAICulTVv1fQPQwE+ZDgkD3qWxRhET/a8Fdl6+OeSQPSWFCoQ8OdG/+a9YAzydziVtOqNlCpXpxEO3PkeMVBZgodk5boFtYeBqfvV1+GqD0+Z902hHZu5RC+6MQCOZBxBg4ofdm/oRMy2zgKPOex6ZKjouQG1V9xhiqCKA1szcLkNvoLhQAagc/2XPltk4Akg0bRp64w5Ag6BIJ2ETv2uTM4qYKrRAy9e3D9rkU0WFit9O/vrclntxBfCDOJ1LJlswI4q24sDV6/MPPvYkeunE2gLSwrcN0CbUQuAqkBAdjvPkfQt8c6cNnjcDRTIsEf3V90RxS4quhX0ovZ7frRmem/yPTvl+K+iL3g8AlkbGUt6B8Pj3u9u/qxwgM/cFBIfK+Vb0m084SV2hr9j9lt1bugDL+nyYextUNl/ta/+zIheioFfLneUAuEFjsCcEu3HhxRrtK50UIYxMWKMALA9PQoBHHAs7AHxbEYB6+AmCTSvWBBGY6NeIEEZL6uRlLsbwHxtGYIrGKmQ/hzTZyoOY1huAuxFAVyUPeMGvG11JRiwQgSnvYgUYgQb3hzALFvVI9vmOXKUA/wHPJ3pHqnUMtAAAABpmY1RMAAAAIwAAABsAAAAoAAAAAAAAAAgABABkAAAH2SvHAAADw2ZkQVQAAAAkaN6t1n2IFHUcx/ExlbpQz8cyT82uy/OhujxFvRCpRDMtkkCs6zCCMEsKQ3ugUE+xIktFCPEBQzqT2Lyd55k9jBa74+jsfLrd2b19mN2d2yUpuL86Ag/uvn3GnTnX88R/vgPvf+fFb/jMMILAfF2WL8/4M9j1L6LSOpsjO7gt4WKw6/RwCPVfkq0qVqiz+VotbjxwByZ2HWaFiGgUTvX7CKfq7QjGp7BirWL0jXbc/I87sW2sUHugvew3MZK7IEaoNRghF+0oQrHO451jWTEjaO1uEaP0KzCgdAFgm4ueu/oiK6SqVysUMdqnATORj4bFiMo+9YBk/dgsWiQCAUoe2m/K16pZoSY1VvuTZA38LFkElIbQYPQQ+9RPybHW01KMmhBQctFfJKs3ELAms2JHpXj9MSAn0Q/IR89KsfdZoUOBfNkRKZ77Xo7TUXT8FmqFw+ExrNg3cmLPd3I3HQZ0BPnoCSnOO/X9aqJiv9zd9zWwA2gIVeIK+9R3KYmmPUqC9ind9CUgD+0/GIzPZYV2SsllnymJwc+BAaVGD/1Kjh8UmLc+aruSatuhJOljBJS+KKK9jSHmqW9VU29uU5P0IdoOzEU/cVE1uZUV2oipv6OmnC1qit5DPvqRkrQauafeoKYa31LT9DYgoOSjH6ipNbynwtQ3aXZfvZamBoBDqJaS2Kf+qmafeU2zaSOwTchDb2zWbd6pv2Rkl6/T7MFXgG1APvq6lv6Wfeov6Jm21XqG1moZWg/IQ//ZIGYnslrPapmGlXqWnge2Cq3x0HV6+l1WqA5TX6pnnTpgK9BKQEXUtp7jnnqNkd27yMjREkDL0BBqZHinXmUUZi4wcn1PAqtBtbdQkX3qlXru7BOGQ9UIKD1VRG/UcE+9wigsn2U6g3MAVSIXnQdsoZ47wD71h8yejulmD1UgoOSijxvO35Xn7XJWa4JR2DzJzNMUQEDJR2ebzhbmP818WVko74wDNgGVoFEhTLxTvy9U2DcmVKD7Q3kCSj46ucVZzXuq83/NFloK/wnAgFIJOgDULkeTzB57KnoYPYJmIjxe+zHDsavQXITl2gvR0+gZtFjP2vgw2HhlrqzQc/VFLJQ/5UKluehYD33QO2m5e1I8WqAElIASUHoUIwJKQAkozcd63XcUKPkfBqADdWpmKbBCejh2N3T8COiMm6hzG1pdgtZ46GIt+6kgmAXlbthw9AEXNW9Hp42AVpagC3xUd14Gdn0ObnjpXqDb6BHQiSXodA+dVYLiw9A/z8zd/NX7HzEvJHngoXNkAAAAGmZjVEwAAAAlAAAADgAAAAUAAAANAAAAKwAEAGQBAJ/K/NgAAABTZmRBVAAAACZo3mOQ2f74uvyOB7UMDf+ZGEgB4tsf/ZcEYuntD9NJ0igE1CQCxOLbH68iSSPv9sf/+YFYaPvjepI0cux4/I9r+5ON4jtfcJOiDwCu9COhqRjjzAAAABpmY1RMAAAAJwAAAA0AAAAFAAAAAAAAACsABABkAQAanuSfAAAAYGZkQVQAAAAoaN5jYNj2RIZhx5OvQPyfCYhZgJh9x+P/nDsfr2PACXY8ngvSgIyBmn8ANarg0fTkDromhp2Puxjwgu1PNqFpesGw+y4/AU3PFYAKz0I1PGbY+ciOgQAAAF9eSoCTwHWxAAAAGmZjVEwAAAApAAAAGgAAACMAAAABAAAACAAEAGQAACJuQm4AAAK1ZmRBVAAAACpo3u3VW0gUYRTA8cmNLqggGmSJYCYUCUKBoBTZBQJNIioqhCipEIokySCwixRZgd2IioouqGRsOLNz25nNaCkwNAV1173O7s6us0ZFPRRhkeTpTO7m4vPpqQ78nwa+H99whmEYwnltHcrr73J97WddkNpAl/sYpcPgoe0zEezHAOdeSob0sa5yPHRyJvSGG24lQ5qbIe0l6+7rYd3Qm4qwrveD3GAWGaTaPLXdnBteYK8QM8G+KeggGcLz/kyeG3krcSOgYiboxPCGg1ar1UIGddq8F602D7CcBxCEJPiMdVWQIQ+6goWPbN7v7TYvdCKWBAXO84R0nW/xPv4OIvcxBKEDIQTHOzlfARlyWQxsvMr74AaGINxNgA85TzPdOjuds1t4v+sS74dWLAne5n1Gm2M4nQxqEoP1p4UAnBX8cB6hJHid9+4mQxpUT3ajEPx4AqEm7EwCvMD7ewBgFhl0SNJu1otBaBCCcBwzwZNC4OcpIVBKhtTatBUHRG2iTtTgMDYNavdI17lGDjv2iCHYhwiCkAC/HFW9i8iQLVJ423YpDDulENRgJliL0H4h1EiGVNq1uZVSJFiN0FbMBHdNgaEj+IwMWitFmjbIEdiEIQhJcIccriZDSmU9t0zWP6+WdahAKAlWSZFu0gUoUaJtK+1RQBAQhDVT4MR6VSsmQ4rsetkye2yyGKESbFUCLJf1K3RXwa88X432LrHHoAhbjkgC/FSuGtlkTo4S27tQGYXFWL4Sgz+gotfR3cb5ISNDMcayFANyEJoGR4cYK9D9ntMc8ZY5qgHzsUzETHABQrmKsY7uNs9jhYwa/4aBBUsBn5KuMwLXTCQ1iyM+Pk/RC4gh4/FMiHHEzzHkoxhVePhkChRiHO/Smb8yanwzo4x1/H6NopHH/J9/Yn4ByYxYN7/uQDkAAAAaZmNUTAAAACsAAAAVAAAAHgAAAAUAAAAJAAQAZAEAs3ud4wAAAfBmZEFUAAAALGje7dRPSBRhGMfx8Q9pggUZFoqBEQgSgQSCZbSQXhQURA8S5GE7FJUHFfKgsHkxaS9FeglBUC97mNnZd+Yd96Kgl7IlaLfR3XF23d1xV7xIFyFEfXpGZmnxEjx63B98rx/emRdeQTjHvonhhe9iGM50SAY1MdyyLEVO1sQIfM1D16WfXhLo8UCxJOnrivQLghji4OB7IV/oKgmdkzbci34dfJiEaA5fkSJuEjglRyun5c3sF/8GzGF5+A/7C0jopBzzfpCj8FHehBnMwU/m/fojEjgqm3fGArE/7wIxmETY6+B48gXyjb9mhjoUMOAtouPYRCBq4wfvmX6LBA4o8U4324IX2BtmwDDiozbOjDES2OfTL/WyeLRfMeEZM8HGX2KDzEh5WLaChLYpiZEOJQ7dWC9m4wOIP1eMHhL4IGhWt6rbv11qAtqxHN6nxJfJl9PIk7NNPAnN6jY8xBz8qEtO3COBNTzZVM9Txw08BXcR/ocnPtOOCFB0TUuv3tDSUKel4DbCDr5/n2Wvk8ySoPW0fMmCSs2CKoRvOni9mnxFOyXfKhOWdiwMSrDLiF+xcZ6OCCtQSnwsLZcN5leKlWs7T+hPOt9tPIsKwYwonHta5lMeagrMqhUuZPaJufX49B8XVlhh/99fDnKESFU/MpsAAAAaZmNUTAAAAC0AAAALAAAADQAAABAAAAAIAAQAZAEA9UdUDgAAAThmZEFUAAAALmjefZBPK0RhFMZ/58wted+ZspYssFCWslBKFkpZsGEhn0EpCwsLyp+NBWXFN7DRlBQb38ByjJpYkJKbycJcZsY9FjNu103z1Ls4T7/zvKdHyOiqWO4tfNfvAsinfTFZC7Jw1Zp7X6J5j+HMyLXshgRa/APvn92OhsKyx4gwHEZ76WhsbqSiCWkmrzk9CEU1FCX13qrN3DZAkrx0fr8Uik60UsEBHiGCjYXF4bcEHj997H7Vxq4zTb53rVNKXYXnk9/AAKCaj9c/0f7srZ/Y6vHUVDNppPviqc9JXHaY92Y4wJnhseLl7MB8uoAgUtuKUB/9SaVe0++1bK0ByCRADaEmgjejJvFhODNUycKKUUobHyIvYdDc4R8p5FaAm/b8hMSLTA++01HXDz1smnZCfgAx7nr6AIqbTAAAABpmY1RMAAAALwAAAAYAAAAEAAAAFQAAAAcABABkAADHjO1dAAAAQGZkQVQAAAAwaN5jOL32cuzpdZf+o2CgGMOZtZeL0SVAYgyn115SAuIvCNVANlCMAQROr7lgeHrtxTlgDGSDxAAF5EHBroZQLgAAABpmY1RMAAAAMQAAAA8AAAAJAAAAFQAAAAUABABkAACeX6S1AAABHWZkQVQAAAAyaN6Nj0ErRGEYhZ/3u/d+N5ntWFpM2ZgNo252UhaSYiFlMT/BD7DzF+QPyMKsJKXLykZJjVm4UmpCMigsxuY2zL3zWhjCqJlnc+qczqkjAKoqld0oaCkZJzXP4jVfCnOFB7og1bDq1xvxPsjkn+xVIRLkSFvpVrAwctFRLm+fFxHdpDsVQdf7EreUX8y/A5hD1x04djxOHY/IuFwal2vjUBPDkxjqIsQICYwpshG76U1552wJQKb2bnMeaWTRfotiAattRbH6qf5vX63qrAAQ3o9ao8u+as6iWR8GrWrme6BjULFQkn/fraphvJYDMw1aBIKfsQF8dE3ohYO7AFgBmW87VzR1orfyF+HjMCRZaJwwM/T2AQyzafxz+v/6AAAAGmZjVEwAAAAzAAAAFgAAAA8AAAAVAAAABgAEAGQAAK3aH+QAAAHSZmRBVAAAADRo3q2Sv2uTURSGn3PviSVEu0h1cwhULEG0igHHDoI/0IBWQaEKXcRBSgfBRcg/UEUUXIMFhThUqSZxdq2KFQcbRDEZFFOhQ0oa/b7jkDb9Uqsl2hcul3Pv5TnvuedIoVDu6WssFkGG6NSCwawgLywMHqSH97+jC8mzqbcjHrnvMRTwBorhAdf59qVgd+I/9WHqXKq5Edh9Q3fURKiJ+219F8eCCHURGsjBH0iursHHmak3V/L5vP+r41tP55ISBLMKCQ+otdwq0K4ich65e+UCLg8N751ZFwxw40l50Etw1UNSzfoU2eWxrauQPyZsaMjFzOnUo3XBa5XNmmsMfkjGCI6qMOLN0u0ERBKYoRCqyNilzMDdDcFrNT79Pu1DuaZiZzxI27W1v8YUxscye253BV7R6HT5cAzuKezrBBseTJHR7Kndua7BAMcK5Z7e0E167GwLHGkwVt/iggM3TwzMuW7BxeP9S+Fi8vy8SK4mwvzyaC7via9hLIeZdO14tcPm0oc+TSpc6Ghqq4oj/w4Gdj7/kugNll4r1h8dSzWu/xcYYHvpc8Ybj9uuDWLGSTZDrlSdiJWqzXip0txWrE6wqcpX4uQr8ZXwF/buq2nt8Lx5AAAAGmZjVEwAAAA1AAAAGQAAABkAAAAVAAAABQAEAGQAAFT/qnAAAAKNZmRBVAAAADZo3q2UT0iUURTFz3nvUxOFKKyFRgvD0PzXTDLYrhZhRFJqDrWwRUHQosIoajm7Ni3KJLdmYDAFkxgTQUTQpiIxLbUU0ijaJIHZ92b8M99tMc44M/ZHne/AXbzN+3HPvecSAESEL/uGfVpQqGPqO3MWpr1HvN/gkhgOT+TlRqOPNbFfC6ABaAg0MCPAMMEX4sR6fcd2j6wbEgqNtmk4PfHPk4B4yfKbwAAht/IXrXuV/sr5tUCUDdlqSBgSBhnF5YqCe+bBbtuKTb4JDZ0NBoN61ZB5JydkQDv+KZAOxAqgTRYbUbdLrIrXrx68q1uVXQDQ0TfiyaU6p0RKtWCLBrZroPBv1iVtJaLKkZP7mmvu/xeSqUBA1DbPaCmgDmqRNg34/gF0LPDCgabKzjVBMtUV+uiz6FzWkBYN8A9A0ZD2xqbqm+uGJNTZP7ZXO+jSIrXLtiW7EktwqqWpsjsrCAB0hCfynIXFuxpojXeSOifYuQ69x5srxtO2a62Q84fK5ornyk/Yoroz19yQBbNK7gQCorKCAIDfz1j07c7ThuhNzxZgyPoiz5g/K7tSdenJUEHeXP6ghpQlZxNfhFEzWF4dCNBZdycJXW+otW3yTFpwSRiqXdrz4WhWdqXqRmPZ8wj5bMVporriGgQAZqmu2SBsEDaT58nX/nCs2jVIz+EdTw04mOgiAYzonHrXIABgk/0Z6wwD1ACA5RYkQgxr4VL6GQ8nWeUuRPG9coi0cyNSlXVOUtUaFP2pYOqXBjak3rSY6M2uQQCgIjz1VQMlKZ3A0SxWbkIMOJlxYn6iaHraVUgEuGrImaXtWjTExYG6ugVX7QKAjY8+b4KGVytr/EdDyRcA+A3D0hL1rKSxAAAAABpmY1RMAAAANwAAABkAAAAiAAAAFQAAAAUABABkAACrOn62AAADL2ZkQVQAAAA4aN6t1llIVFEcx3FLWqAeCgLDoEXKAsnQ9oVWi6IgKgwLRSEKFNswKorKQikyipKixcwsra7jXeYu0+KWWWpOonM9M+M4zThD9dJLkNBLzb+fmS2itHgOfGFA8MOZ//9eJiwMh4iGVMlsfq3UuqrBYsbWKc2RYTyPYXSMsIltVY+kNqqQTKpGtaJJz0XzQ4PoqG0SzdyXlpaYQSHlkjNFAmBFOnqIngCqQk+B1aF60UFNosNuF1tTmcCG/zNSKrGsBzIjC5Ik1j8m/cReio63dqk1XRCE8L9GCss9UcWys6sEyH1UhkRgChAN2dBjVAmoBj0D9qIHe9VoMef8NVSgsLhC2VV4W3HW3JUZuyezjwKwcmAyABUZqJ+5fWoUHYn/NafsbBp6R2FT7yssE1jjH7AvdZIjc9AbWCKxeZhbGeYWGmBJQpjbXi7rXiq6FuJ2Lf3PzQxVSo40LtAlPFdYEmGAJemqEF3RXCBBoPAimd3CkhCWhH5bEtms754pF6j7HxXKrKRIdtIdVAqo93kTxbYkbq+k4keto65LTs9NIH0wxu023Sdfci2/orjoGoACdAvh4aYSxdzM9SV7QXFVXgJ0GV0FcKMHa+SK5MmehHOKm4DRD+zb7VwzuUI5iqv5DKA8dB7AxR5sJ1fkhLX95ClrO+UC+QXL54octnq2HAVyHJ1EOVY3nba6q7kiexX39ANWDx0CcAQdQ9nW9vdckUS8Bfaonk/7Af2KHdYcY7lCu9SOtxlqB+1WPbQPUBY6qLj5/ihJU73vdgABRukoE1gmTySt2j9yu+b9nKJ6CRh9x0IZAhvNDdmk+mZt0V7TVs1L21AyoFTVG+T6Va3VfMkbgGxEm1EioCTNa+OKJBi+vDW6j9ZpPurFcLuz3IDZdvuwJbo/sAzISrQa4Wa0HrfjhsTbAslzdT8tQIvRUiArdN8XgJO4AJOxVTFGp3+W0UnxqBdbpPslbreYogdSphkBmgEAGMWiODTHCCzmhkx4GMyaaAvQFEBT0XQUo3dqXLcqQgtEjbcFuybYgvQd64rS30SH8T5jjM64cbZgQQSKxOe+f/8KwVMMQUzpBO4AAAAaZmNUTAAAADkAAAAZAAAAKQAAABUAAAAFAAQAZAAAmL3pFAAAA+1mZEFUAAAAOmjerddrbFNlHMfx6jKQiC5DvOEUMycacUNAmQuKI6BGYzQi4I0Fb4iYEYKXKF5ivRAFJBIVvOEmOHAetnO/tCIdDpAVq1l7+uy0Xdv17AzemBiMBF4o+/sbQ6yAyVifk3xfrp895/88zzqfDw8RnRWSWXVIis5qb7GrdiuJcT6ej2l2j9TFeMiS4vQd2iHZtBPtFu2DP4qx9rBor9zX0jmxIESQuupEiZECQEeDmH0C2yXaBIzCYiwSEaMLmcBGnDGyVWLPfyszakESABUZKIC2AwmhH8RjK6O9wPaJsf0RKbpEEISiISMNranyJpkd+gaIgFqxKhmAhkwURN8DakPtgPagDmA/ibGfwy32jUOGNips8ibZafhaYTu3yowB+2OI2JGIGJs3rDn5/XS2oLAKVI95hf87r/jJ8zoalmL1Be9AQWLTRJFtw7z6T5nX4E7s75Ciy7hsd0F0arA5Ov9nc/TvkWKPcTtXrTLGdvp5Hdoldk7gsyKBirDlG089X8Bkey9hplyggc3RLLMt27DtT8aCYvwhblfS5mD0XBzm1GkOM/PzWs3A0yg5tU1yF504zPLg+dJFew7XS7ZBcnZsAoSbg/JujjBX5HO5a/ZGII1oM9oCpPkY5lRyhTYozi+fAcjHmpT4Iq7IOtV582PFoU8QVkZfoq8k9hFXZK3qPPABgA/RevQp+kLuauOKvK0krlmlJOh9lIf9yhUZuAXeURJH3gWyGq0Fsg5t0GOlXKE31OT+t9QErQTyHlqDVvH+UrJCSx54TU0SMPoH44r423rOeUFN/fUSgFfQ68ivJvv9AhvNDVmqJSct01L0nJqiF9HLQF5Vk71cX9VivXvBEq2b6gH9iyUtrsjjemrNU0AWo2fRUkDLldRqbsDTkUjxAi3tLtTS9ASAReiZgVVhddyQuVrm0fl6mh5GwOg4dvRJIzue21/Ie/UMu1/P0Fz0IKBHUJ2Wlrit4k4jW3eXnqV7ANyH5qB5aL6Zns4FqDW7y2qN7G+zjCzdgfKwEBdg6vZMyc1GT3i60UMz0EwgsxFWRncb2RkFA5W6WzrJzHVMMXN0EwBgdAu6DQCw5oKBci1zxQTTjV8HoBLdgKYCmIZqjJxXE/DGDPvDK/DN8TLLXTHedH8vN126Gl0LYCKqQpPN3OEpevbW4f/6+J/yAssNXWT10qWozHIJGOVhh6833NsLekWjDK/6fMujUgBj0cVoHLoc2JWme/AqPTez4DkUB73qUQGPRgMqQWMAXIgusXq9Msur4nPi8LqKAn2hEYCOY3+WWH3rz9MOjOV6y/oweF+gr6442Ld8ZMCrOJMf/RuAQ7maj2/maQAAABpmY1RMAAAAOwAAABkAAAArAAAAFQAAAAUABABkAADdrYtsAAAEPmZkQVQAAAA8aN6tl01oXFUUx//nnjdNUlMkgl2EGtqhak2aSWvbMYW6iAjmo9Km1QErqVAholJEQQKCMAvBjS7EqktThYijJq2RaWnVVLPQSkQz6aS0oYSQGBctxZSkybyPe1y8eW8+Mm2TybvwmDswc3/vfP3vOQQAIkLnTo9HQ2JXG466rkKhG/sObJtFQIuSyYkKZylzhgktDIAhYAAsmGNQSkGGWTt90ed2pMuGJAbGuwzIF/7h/uPDvP2fDPm4yja+aog1mKuBKBuy0SLAIoIF5D3Z7+TtaZcF6l0wnMmRgdFXE4kErxiypEMDFrDgHki5w30QuaAcrNYW+nSLse2Pi9+O7V6RuwDg5On0Tog6bpAOs+BBBupYUF3owrx9zoVLDBzdfSjyzT0hxSseF1W/czysgFbW0sVAtHSsAIZog/DGns7IiVVBitfAQDpKIm8z4TADVAImTPrN5s6mj8qGeKu///JeJuczBppKuFAMkmN7OyO9a4IAQDI5UWGamS+V4PllLtRYUOQ8/uShHVcLsmu1kPb2hzOm2fCCBepdloUK99mKT0pc1JogABCLkTM2Wv+yTdS3LOUFzT9F0rE1Q9wMJH27yu42gYnCQibYhHfjedaotQjf0WeaFizo7hKFXP9E5NLBQCAA0NXZeMES9bMvQR6MqCcwCADYJO/7wc/CTKLoqVOpxsAgxw7W/2gBfxUIK4AMqebAIABgKRosTmlbUwQAjKAgJpAyiKABaBH3k2h7oJCM0CWBf7gH2l6WrNxpJRLCUxVX5hlSmX/DClsPBBaTWIwcC7hZkGUAHGddVWDuygaftAi0ABpufNYFmV3xoclKS7AxW4ieJaIyzq3ALLk1bz4aAlgDueBDZl6PNcwHBnFINcJL3WyWOaB0oClsQZo0Za0QNx5K9FhgFd89MhKyhGIFLRQAG5wKzJLb/9bEDEid5yYNgibRJvNwIJbE46IckndyzZ+vX99/0hGeCsSSv/dMvshC9QyBplw8ROODsruV/NWWnNiktEoxUFPUuQz17d/6lPe7si15+vy1+02TvmNCjVvhuXgIOfH835YF2ffDVM2iqc8wENWem5BVXqKv+zse+XVNkF2D1+oWoZMMNPiZlJP4GYdDrxX/Z+WQhPBjG6ZeWRK8x0BNweXkiuGiI3Lkl9aHbq66Ta0dnF3PbL+kIG8ZwNZlPTAAFllUkAMXO8LnV9ZwJ6arqtc7m1mpCBNaGXKYQRv8w2XZyDenNDpH928euvvocHb6CEA9BIQZecOPlBiA3Df39v8octqvtIVTdx+Czk5HAfotv/pV/psKSk1bwoTPqyyj5+qztTfu5XIDQEuxvPh3gqtBWWUFNEg05BxExWfbNv2+0pwxQJSG3OGOyGXOfxqSEI0Tcx11Y6ue492YzHwI4DiAUFbfrgO4DGAMIsOotJNo2bJUrjr8DzgKCvJ3CR9TAAAAGmZjVEwAAAA9AAAAIgAAACsAAAAMAAAABQAEAGQAAHrt1WoAAAS9ZmRBVAAAAD5o3r2Yb2iVZRjGf/f9nunmZrbAPoiKDu2Pc5t/h4J+MKJsM3SaByxUMDCKIgoi6NP5EAQRQWT1yVADo1M2TZuW2aQRWExkm1NKzcbUCEUU57Zz3vM+dx/On51zXDVl573h4cB77ufl4rru+3qf5xbGGGYmJw90Nzqjygv0qpT51xatXXSFcQoZS1Jb27mJ1cODhxVZpYV/3TToFqTDXLC38ZkFvSUFcry1Z7MaexRQjPTvqJtPCvZhRSryeW20Nnk3QHQsSUl40BfwBXwkt1KAK0xdbMiuwUhwsbO168V4PO6NLxBnrT5y20fIASoABQFgI1ummcnHsyOP/PrLVz1Lxk0agAMHehdGAveKitZ42FTBZipUKaBGTq586TIxLLBlyfr6L8cFSHHEYqbLFp6p8VywWpDNCo2FoApqySG8urSlfse4AymOI629jWrBG57IBgUZhSUTsdcaWxo+KCmQbBz+unu5J/KJQkMOyAhLJsK25S31u0oOJOs7kkx8psbGfInUQI3bSLBo5foFv99119xtNDXNTdxKntnkw678zvIFfKUyUG+3xUxLDgQgGo0GnV21z6dgr0+h//jGsmP1vdGSS5Mfe77rqqwajJxSbO5I8YLCmRNdtXWxmLiSMpKNLU823E7gtvuSJ1F6zVtSf3pdyaXJj00tdcd948e0IwtZUCmRN0MFAuCLvFPAiEBKpHH//rN1oQLZum7eDz6cSn8s0x9MH0hIsCxUIAAp7GAqVyMZeZzUA0TCBJJQ7Y4YqI2YXCAyP3Qggclpw1CRPLe1+aH4SH7E4+b1T/xtQLHyfE8Rz38g1BqJRiXw4XqB7QNBMKEiVGkAfEXUZdlIS5QIW5pY+8Vydys5oODlzimGJRPBfaEyMjSQfHgERIYR4VIsWjsQKhDfaZ2KFR8le0Nv36RnDZ5lT2zp+hBzPaE66/bOzrKUSbTgSgKk8LpDZST115SowMz8blHB4XkdoTESi5kmRd4q9g8fvvmouaYvNEZ6l55/Tk3mqWRtPc0IjvdCOyqubzs33TntVqgu6pb2vWvmPJbNKykjjx+9MGU4IfsEqy7wDsCTIJafWzIgKw71VbtkcDgpNCqSadk0GyLyxcHmh34qOZAVBy/MNFybj9TmpJAcG5fwyl4q3hMBmHKor8Y8b60K1264oThNcxP3AmBj3Lw/Jve9kHD2tuRqQvLvwEOe8eyx1TOu33HlLGu7vFDVdShUZu6o59Xs/cogsvvK09MGxwJg8cErkwa9xFZFXleYk3foyb/HDCm29ufmmqOjX8KP9O9UZFvxKEGNW4rsE3NHIs51Vwx6f16KzhgCmB7vr/AmBbOcar1ntlqFDQqT73jHyLopjpaTa2a1//tY4kj/TpBt2V6+Y+BSMF5gIPO8SotzjVEAGAqXRVzT6adquv97dOV0B8IQmdFTUHTKLhxVUeUjVUXumMnLrtxz89FP/WDCgv8DMWJoh/vrEX0X7IlikxsDS8VymMD3YkHsctPsE/c23vy2vw6VlxGiwP2jTf5GqaVse95QI17m2PF384ye8Zmztl8sZzjShMhKoA54FJgKlGU2+QpXFc4qrkdNOobKU22smj18r97zD55t9cK/Y9FxAAAAGmZjVEwAAAA/AAAAKAAAACoAAAAFAAAABgAEAGQAABkw4gcAAAUQZmRBVAAAAEBo3s3Ye0yVdRzH8ccbitc0BS+EhCh5AWaa6PA6pcuareFMVzKrpYU6rbTbWo1yrmY1ui1npdSapUd5nnN4riiCl0oOUIPznEeQA+f2HPynDZk43Fzy7fPAOXm42JDg8Py293Z2+D0Pr/34nd+eA8P8z+GSXCMr2OqSCtZBXWouZx0XKlj1QPmpqvnMYI2yAjW7vDuupyor2eqtmkWLiijwYoG69zdWpUtAlKFeYBsrueoci8UyLCLA4gJH4jlOvXEByIvIwP7eO+wf9lPq4oggz9i0hWdZ9WgJp54DVjvPqi29xN6sZB0bI74vc3NpaKlNSyrlHLuAtXfF2jsjb1dgHjOY4yynLTnHOk4C22Zgf+2ObSvnqvcwgz2KWccybIOqUk6l88E9G4YF0vH8oCMlnJunrU5LMZDAUidsgXrDzlbNGXSkccTInDO/iHPSaQA7Ya3qJcIeHnSk8UHiOecxEUhgKRxbzDo3M2YYRUXVYzjOWVcInIBCWIVzarlmWEVjnOTU1QWcRhyyAmdgeQPMqlmMWcYJTjtrsWp0EoVh7aYB/mi9vO4YcD+j4yiEtVprUkyD/MF6+U9A6ScUwp6wObeZBvitVfvge+COImCpHctpX5kGeKiwZsMhWw0dBuw7FMSWmgb4ua02+UsAv0bfoCD2L9MALRYa9pmt5mYeYF+gEJYx0/jYVtt40FZLnyJgKc9swP187dUDwH2EgCUDaxpcbqln1PuFV/7OLbxCH6L9hbUEbJtpgG/xV9LeAexd9B4CloD1mwb4us215Y3COnoTvQ1cECubBrhbqPvkVb6OXgNwL9pnYG11B02B215ZOSKHd/l28i7aBeRutAcZq9oxg2hIquhJX4SM15EGvsi7nnsJuO3oZQQs7eBdt3eK7plMEr4jzJO9JfMlL6WgNLw23ovkk3W2UK9t5evpBcCAJQO7jXdx7ROSRF/2bMlHc9BDAM5DC0TPK5ECbhZd2ZuFenoWbQEyGxnYrbb6jPYJMyXvvgTgHkSzUBDblCQF4gYalyW54jYIDU2INgK4CQWxJf9Omi55F86Q/RQn+ygehbBYWXvimYYJA4Vbh3s/KTTY1wP3FHoaZSED+4xYt7LT5Cmy/5dYIKehcCxWtyxe8E3sb9xy3DNTdJc9KrrpccFNTwAFLBnY9aL7eLcLxiv6pEmyX58MXAwKYae3Y/1OrGR8v+H4hvhVgse5Grg1aC1ah4JY/TFYerxwnOJfMUHWWyfKOgFLXbBNwO5g8EjUV9hGXPuI4N2RLnqalokeykDL0Uq0qgPbulZwr/jPm4wp8mWOBXIckMBSOHZKB9Y1VfLnTOevju4tbBHmpkqenDTJ61qIE+JhtBioJQhYCmJbM0R3Zq9uOEoJrIlW9ObRik7AUgh7Xyes7zpWNz9W8m+aJnjnxln06ND1xuuZeG8WfjZb9OUnS77rc0PHV+isRWHY5nTBu+ae/hxRsp46vCgQGAnkKGRgx/SAvf/OytJU2d+CbdCCPUsPtH/AOk6ERONECB5fyeFnbQc2sEB2p/Zt0/BXJw9V9CPDlEDbCCVAUfeGbf+Azbg7ti1Z8h+Zg9/RD/8vCyxllEZlCKDA0t2w43vAxnTHtsVLPiVB8izt/5NV1FMYOXCYUQLXgKWu2OgesBNDWMV/LUbWD8ca9xjwgUdzRtazAM1DxcA2Antr+B3sLWAbgS0eq/jzAM1KMK7p4/gHhfht8rs3/k0AAAAaZmNUTAAAAEEAAAArAAAAKQAAAAIAAAAHAAQAZAAAz3myWAAABXlmZEFUAAAAQmjezZhtTJVlGMf///s5xwAxZFM+kJKedL4Qh0wF23JFs0zAEp3HmlqrNluu1mpzbs4P50Nf2lxby16/qLWsKCIlEULFjbVpUY5DUFMZAidaL5NShMPzdvXhwHl5eBEQOefant3bc5499++5z/++7uv6E1MYP1Y07wTl43E8+hMh76Sars9yfbn6eN+vphJWB7JMADYAGfvRlQIe7nNZ7Y2VTS+Vl5dr0w5rQyoN4Q0DhAHCBGCNDZ4twvcWupb+cP6r5lU3ez8xxVF3rGWFZtmvaISHgrkEchSQTgjU4ISjrFCIwDOrNnu/nDZYZ/j9oh5a0erRbOtxCncSKFCQCDTjIWwQr64u8x5MCKwzTle2FGhi7VHgFgUwDB0HL0J5raAs/+2Eww7Fqa8DD2jk+wTylSAGVqAAUcTzBWXew0kBCwDV1ZfumKEPfEKRrRFYiYw33LTuL9x838Xbkg0mGsXFiweu6q1PG+DhcAYBDA5eCjND0I6IX1RSwAKAz+ezzjXlvqADR4dSXgz4mtPeFl9SyCA2amubZob6tAsEFsemOAKt55py8/x+2ipZYNevz7+hQ3ZFVjV6LV/l/WVTUsggNraW5Z01gTMGCZNDpyBhknuTSgZD8ek3resAqXNIAW4or0o22O2blp8ywAtxGw3AAK01SQcbrt6kKqrZMLRu0+tKRlhLqYAtACWm+CHvdQHArqrutD7071GQZZqg/tDGez4CKQmDNdEsGkAyplKTXAUAPew7alL8BrFNV/hgx4m2/Ylc2SxzaZsBhOJTGOeqrXVtGSb4hEPQOxJ7qtEywKvOTeYa6HPPtDWD0eUmCMxKtG4NBdIeSl1hOahrd16/ZoDiODmyHq5vT0kUqL++PcUUZhlktLABRJ0tyu3ViWD4JsMXqKX3ypJEwfb36kt0QItNXQYZVABggi1xYiYwQOQlTAK2ynPq1QBaVDgJs3lYeaaQnyhYU5N856FgCJsVABhiBxxpAobQt7Kx0T3doLsaG92G0BenVwImGFAAIESDQdpRzQIGkOP+a45v2lf1jwyfAeTErSpoD7i0BgUAF0o8HSZwPKrZMLQO7ENMWzEdbbtF7huhpj3+bomnIwJigAdGKnzzV3duny7Y31Zf3q4Dy8OpirFFzIFh9aznZMcZJShytMU9Lri8geJ5wdsJurn60jzaKkAg0+He1B8tXfTIsE7BsOkfttHAzJBYFZ66tozbBbquri1Dt1WFDmQ6tAqTtn/UhjG7pvNzCrZFXBIZsnjkvGlzQ2fp3T1TCVrybUemTuukAgrDnkHUnQH5RVWJ56lRW/FecLcBBGNOjnDqIAup0OCpasuZKtAHq9pyemE3GEBh1DOInKJBXXPvvqkjk1nTuVYJagmkOnshBfQQ2N91ff6H8NGaVGNYLlpnWseLpLyhgEzHHgGBfiVYf7rU0zAu+yijtuNR2OqYAlKdduXgeJmCt8RyHenemN03HsiVVd1phjbwrAJfV8CiuE4gOvYD8uT3JZ66CRlz6TXBIohUEsiIqdgdL5frCqyAoMZt2wGrT7sS9M3vB4B55V2pqWnWAirlhcjjirJFAbMccIN7Q0DgP01Ydr50Qf2kLM8ZJ7u8SqFaCe6KmGbD/zbn2Dv4e3q8Qxj3kc77v7toF/+8wRO4NTO5qnuO2229SeC5iKcqN508MkY+bGRw0SCHLGvG3osbs/8ZC2NiJkd1cI2m6CfkMQWJdhcjQoy66kMfJkrwHWD7rxQvPDee6SfnyJzoylOKL5PwEZg9DG6sVSf+pbAcNg7+WTK/eSLT3pp9VN+egpCrWJFrBcjTgGUE5iqIexDOoOBvDfgVlGYlbJidYlZfKVoYmsx0/wMN5mfvJKM07gAAABpmY1RMAAAAQwAAACsAAAAMAAAAAgAAAA8ABABkAACqQq/DAAABy2ZkQVQAAABEaN7Flb9rFEEYhp939k7QQhC0sbQwel4uihYRIRCIpL0IHng2VmlFUayELQOp7O1EkUsTibExqKUIGjgTA0YL/4FgYSB7s7ufxW72stff3QvDwvxgHmaeb1YMZHl1px1IjwU4s+X7zYuvGGI6nU5wslp7LrjnMAQ4yL7G55lu/YZCpeR9RZbe/Jwx0o8OXL4odamuP1yY+DJM4DA0d3Vq+0UA7T6s4QBMd+Zu1V+T9xcLIuyZF84LPODBRYHNMuSEodJjJ5JFD7v5vniER8TiaRiaK8FGV3abXlw+nOQlvCDGthlB5uen9nvYYrY/R1vtWmOrWYKNxaOBSXjc1+TbhXeMKLcXJj/F8MFLxMpPFhFLTwpnH6zvTFoSdAuxD51JdXOpeX6DEebl6o85sPdlFqjiGg4gSqvTXlC0zJnNUYMC3G3WNjzaLHTMbzlSMu0APNboD2a+xs7WGFN62NpgofVSNSoZLPXBY3epuuOCTZzrpgYy6/NI9UpWXLokK/taCYLv44KNTFsBhqQjPwiru/bbP6d6cKbsrA7+7p/7PS7Ys9HELw8HpZdJOu3+JTpe8hXwYm+lpWRcsK2WEo/2BovsP/LZyUqNvyewAAAAGmZjVEwAAABFAAAADQAAAAwAAAAFAAAACAAEAGQAABBMi7MAAAFBZmRBVAAAAEZo3n2STSuEURiGr/vxamws/QKbySTEwlYWVlNGGSULRWyUhY2NmrK0kI+yQ8LGYhpZSfIPSIMiSxtsKd5557GYDzMac+p06vRc57rPeY5oMtxdF9l8CmPMnHeCaG042fui/4Cz7G2/S9vmGhRggOA5isUSDaGT3N24OQdy2gynBqIFHwr+Ake5u4XQ2TAwCQyVIAfhFGSvddBe7n4xdNYFKp3sVYMJQFsTo4n7aryd04dpK/qugWrjlNe8ebQ0leo+p7zPZvap06xwDbRXi90rsXJR8Dk5nxz4rAiCTMbt2x4PDdrrDBJy9jvC+Gw6paj2Gtba95gO8cEQ8TuhII7fbuIz6XQ9ABAUxErV4BWTnoqxr7lMRsVGLQlC6BIqFQsMR/K55ZGej/8aH4T1r4Shy9Vk/KrZ9/oBXY1omw5NKvUAAAAaZmNUTAAAAEcAAAAgAAAAKQAAAAsAAAAFAAQAZAAAZJZ0ogAABJ5mZEFUAAAASGjexVhdbFRVEP6+ubtY/mxqJCYVGmwEhA1bfrdoNBpDFIuEtOBNwKiJJBBJfNCEF+PDPpj4QGJCJDH6QEpIUBZL25QAK5ImEuVHLG1xG40U+an1AUJCKOz2nnvv+LA/7K5tLbRcJzm5D+ec+31nZs6cmSHGKV3tXdVqwo97lj8LACxPrjNsbixbv2wQExCONnH22+4Ixdqs0BcIRAFUjrL0lgK9BE+q7+2PbVySemACqURqyo2QbhLo+wIsJxSSWyTj/+cvhH4+1Q19HbEjzrgIJBIJqyq8cCugHwtYnQekooiAFohwLNXdk0FSP7lkfv/Ktm1vVALt7RdWiI8vBVxWDFAO+F+ExnIf3+e2+o2Lz41IoKUtlaaiYkTAwlchwBCBqwJcz5GZRaBGgBnjMFWGwNsrmqIHyydCBqggAQGzP9ACIAicJbgvLDz20/lFl+Jx+sWb43GVF5f21Vq+t4bKtwjERjFVhQLf/Nza+8TKxujuEg3sa+vTshMogRYodtqNkbP349EnWlMxS70dAm4QgCOYSpX6QayxbleBwJ62Pi0sIHtCHt7b3LTw1ETu9veHep+1yC8I1GU1WmJKFeLdWGO0GQDEADAAjKI9LXeemyg4AKxuip5KP1JR75IHDYHCAGFAOj53nznUPT9LgIQBmx81CzdsW7fiLiZJGhrmDd90+jYZsDkLXEREMD0Da6/GVcQl9l/vfmaLbdPDJItt297pnsgWB9ifOz2KyKw6EU3Z3Jnsmb7j1bo7eIiSTPZMz9y1zhOYV3bN+4iA5GDrhZcE0vkAEXXy5EBr6gSJl/PxRu7vjZm4uOSnBoBb5JCBagAAmtv6ugRYmg9SEjQBB9pRiD0gQkET8ER6fQWo2dMHTmBY+asFBcngnRAAqocXXDRAJm+GwAnYNj0D3sxHxcBNAABGQPrjyqYmX+Kdf1bgtjMEwPpfnDA95CywACsfjgMnYHxZ7FMLiW3gBFxL63w//yIy2Fuw9dy5sFHahiy8BYFqwP270vazqTyIgANRPK7ikR8VMqLcCEwDv628+CaVi0hAlIWkRKJHBmY/bPCmI3/MNiq7/pWcEp2SUa+l9nh/5cMCX328v9LxpcUBqvJPcH649ONiiBiMlaw5fKVqssHXHr5SRYdJQ8bKbe+QBxJr5/8ghoBL1lNwsrajv2aywJ/v6K8Zgn/SAPX31E7k6pABxwpvz1VGOZWQEScU7p5z9Op2JNR6UOA3EmrVH7683RXpNkSkpBbIjrQBNifXzLkJAHzs6FUdoSS/SMVn6oX2Dq6rHle1tLxjcJqxht8R8EMBns5nPGX/TQO6/se1tccLxenMo9d09KaE3hawBYpjYd/v9e5alwfsOWkAmJ24NnXqNG8uRaJQXSPUDQLMHLHHoAoCtyxl45nX53aWlOcVyWsDoniytPtR0iMo/w7l5meUVr5jdlf+CtFv6Hqttrdcc5JxrCUG2GMIvVfFll6XYu81wIzsyDqUm4vrbm7eze11s3vVA/ZkvClLRgIv7ZIdGVhlCeOEviJQFiKVjtqyGev0KorvAD9+ueGp02P5zj9F+PJVVhzSogAAABpmY1RMAAAASQAAAA0AAAAJAAAAGAAAAAUABABkAAAnmz+BAAAAvWZkQVQAAABKaN5jOLPhovn///8ZGUgBp9dd+n963cV9t7fdZidRExCvvRxLtKZTUE1n1l4uRpc7tuqC9Jl1lyecWXdpyal1l4Pg3ji67vL/42svfTm99pISsgaQc4GG3YG7BIiBFhw/u/6SMcOBdZfnHVxz1RDdluPrLzsga0DC33E6+9CGq1rHgIqOA/FJiC1wjXj9e2j95UmHgM4/AsRgbwA1nCCkCQT2rr/stn/95csH1l/+DzLgMBADAOTpoMvneFgUAAAAGmZjVEwAAABLAAAADQAAAAwAAAAeAAAACAAEAGQBAGnzyCEAAAB4ZmRBVAAAAExo3u3OoQ3CUACE4f+uzENQtaQz4NiDKVAsQepKXRMGAE1SdgHxDlH/cCh+fV9y8O/H6dvgennsm+ggwCXH7W59rqJpmNuQm8EiGIqcblVDb6Uj2IAQBqvoVEWvktkyJghYMJvqvSTqx+e9gVaAs8APAjUhlh67PNsAAAAaZmNUTAAAAE0AAAATAAAAHAAAABsAAAARAAQAZAEAxHV91wAAAgZmZEFUAAAATmje7ZQ9aJNRFIaf935plUgt2bVoKREsouLP5KI4tKbiH1bQwa0FR0dxCOIiOrjo6CgqOLSVOhQJKA5CcYhIK1okpeomiNGafF/ucciPSe3fl7kHLme55+U57zn3wkZsxLKhdorMTPfHZkfkdFRmM879uj168uDvRDtid8dnriPdcGYIcD65HzjdFtmtsdkPgrQDhOHASqXOVFtkoaNLHqpiwoG0KdwSmyyb+7yZn+UiEDTIDAtLla2xyRaL5V0BBKKJTCxkh/uLscVC7/Z41YynnnkPEFssCmyv99REVM3GO2qk646R6emO0DQcSoSicSKUj00Wfese9tDTNEUEPkoEr2KRZbPmKtK1EBFC8xm/l+ktxCKbPfTpkky7JXCmuvHguRPrbZ6d/LhN3uUFqdrG18VyD4f6jtXvrUl2fGquu1ziqSC1xCsCVbLNd1cVyzwrpMrlyvNQHJa17BVIjycy6ZfrEjsyMddTxE8K+h0gtezVggUdV5bW/Cd2/okF88nCaCS76SH1r62GV4sOLr4Y2P59xc/xwMTXZBiULjt01UGfrMXoel4EO/U60zu17E+bnpy/gNmAk51z0LWkuNaWIfgRmM68GdqRW8maRBl75NQ6pWajBTjpS0L+xPTgzvxqA3P1dxbVNrqaRYQIkVXgwZ9K5763g735tdboL3R+tcS6Adb4AAAAGmZjVEwAAABPAAAAKAAAACkAAAADAAAABwAEAGQBAFnJ6ywAAAUEZmRBVAAAAFBo3s2YW2xUVRiF1/rPmdISSJ0IPFSug1EotIRbig8kNlGRUmILMgZMVKKBKBCjkfiCySSaGKPBeEkML6KihgypTa29IEo1jREJiLYpJC0FWgaMYqiGXpieOef3YWbOXCvl0nZWcjInM3Nyvqz97/3vvYibUEewI6/P1M2A7hLocgFAADLSA8qnVm4sOYDbkDmaPwWDQcPrWbjtD9h7BCwiAFEiAajIBktgBm5TNwSsq2tfYTjYZ4HLiCiUQEEiAZUGG/0OAwKtHVPAQ3UdmyKKzxxofrJDArr3hEKisP0C9BK8QsU5U+WDsscXnbtdQI70wxd1HTtF8R4BkTiMZgzncQEPiKD52Knic4EAHdxhZQXcX3f6RSreFYBZakwJ1JiKt6urFx3HGCsD8KOvzzxjOPoxAbrOxT/J3w0bz2/ZsPBnjJNSAN+v7ZovEjlFYKpbbxoteirqbHNwy/b1KwYxjnInSSCgMiydnwswNWVCkBDFJ3dbC57zV9PGOMtdtjxLO/0R6CoLROICLOLLP39b8KzfP/5w7hAHAipc1tku0OLoTHUd7JL88NLda5YMYIJkAkB4aVeVARQLmLQAK2jrttcmEM4FjBCvOOkzFjz6evWCHzDBMl9qOFNi2XhAkNauHL6JHJAZdjyrSAep3YKn9lbd911OAFrQ0sQmACAVQq1Hjsi0wMWMtbJY7UEctOUMYIRYBE1yEArTMNpzBnAYmB5fWqI1yOv9A77uXBripH2egsTVQxPUNUYATF7/CP7PHnEiJBapbt+NXjMebDmfnzOAw0DIImCR0Qs0pvTr/TkDGAE7ktyDRSBMlOSQg2zP2GIJluRODarTluIgCEvpX37ihCcnAJVotUgnWn8u6GzPX9P8406jym0NnWU7GjrLoEp3w7q48UItgKq0Q9Lpk8fnlGAMjpLZtKuxa9KAjSYC5TGGlkkG1gqiw/pO2lIDCyhesrL3yfEy76otWy2wPGkulA9G4HcXZV9Tz1FRlz4eYfSZMEvbKmaGxhJuQ2PXTNNhmwBeJm37DMVu99BkOQxkTBbQG1a7xneku3Cs4DYd6S60HamxQG/aYQ1hU79PaWtFzb0HRfEEoRBNzmL0l2GHa3sr5/TdSbh13/R4HdhNhJZlhATAwa8q529Oifb6wReGgZAFJjoLAQssE0Grr7579p2Ce6i+e/YQnFaLKIt1MCTNg5Bh5u3IGn14m3tXi+KwAAUJB9267BNwT8+1WftwizueTUE1Lk3u2S7UNwh43bgu8Z4hUaw5XOlrHTE8Kjzc8zAdqSO0IN362P1ZUey1bfPTy+uLRhWFLK+/PBlG+Gk4fFmo96YNZ7yUhgA89uM635Ebxm9TmkPlVK0lUOjmgBl1otcErBFFszhOmz1oXAj5Zw0BwMzgxYKCyfZcU7SUKo+SulGSMx8A1JTU7F9DWf1T5dyWUeWDAJDXdLHUEDSKg3tSHdRsrsZd6I8lrFOylMgIz+AS6FT8utbXNuoA01X95Wl5HvstAlsFYPLszpZPpzkcS8iyDicYzRr3F9h5r55cX/T3TSWsGWoMrTKFAYHziJsd3gA2q+vR7EcF+JZwAmcr5h27pQh4RDVcLBHhTiH8AtyV9uLsDsa/I/4RZZAOPgytmzWqk+Otnz9azufjulkh5GoBSgAsNKDTBfDEYC0CVwQ4Y1DbqWydmh9pvFA+7/rNvOY/L9Lne0Dh1moAAAAaZmNUTAAAAFEAAAAiAAAAKQAAAAIAAAAHAAQAZAEACVOYiAAABG5mZEFUAAAAUmjexZhdTFxFFMf/58xdCtiKKO0DSqtoVBahUkqkMTzw4AdtSYrVNdZE22hqNBgToyYaHvZNjUbjx0t9INYa06yhZEUoVdPW8GBsGlE2iIFCC2yIESOmLCwwe+/x4S67e7fAbgl7Pclks7tzZ35z7pnzPzOE67TBwGDeVSP2FINeZqA24wNCz9QdrDqRqZuRLUAgEFC3eCqOTsNsY+FSBsAQ2J8ArfIcAduyGT8rkO5gaDdbOBYD7bIAMNmTs1ACJBUq6Q3MCaRzQ0BOnRp8Qot8wUC+PVHK5JScPA4VYciEAqYJGCOxPql7/P6xbEBorT9PBgdbSfARA8ziXHVKu8CwThisen/s9475/WRhHbYqyPHg76+Q4EOG0DWTC4RFOhTRe80tlRewAbYiyGedQ4eJpJ2BNAgBE35TJr/oe6ziJ2ygXQPycefIncyxfga22KtP2RmC4JIxf+iF5t3z2GBzBKvfL6x5+MsEBAAmikNYn9+svc8faSETOTDHbvPUDPs0pF6DYDdAA1gifPXnr97nfL7cQDhejd8vTLuGQwzx2jsk0UaQv1jz+iM755BDS7yaxZqRAwrwMiiesAQsgLLk6Js5hnCAxAivWY4dQmDC2baWe8/DBTMAoLV7qEqb2OPImhAYFr0Nl8wAAMvy1GuSZOYUgEH97xy4+wdXQTSkmlJ1hASKpAsumgEAS6D7nDpCiFkYcB1EEyqTkm4DKaVCroIc+na8WENvTdQYILBgYXaufNRVkIhJBawoXdj++TqHWXRFkCiAvPT8kaFOyYnW6Btnr2oiSdUWDWw7fO5yvqsg5xsrIxoIawI0LYsdqb8jco+rIHYeocGEN8hui4Sq/wMklJT++Cti7HQfhGkgJT6gQYgJ+WovXvS4ChK1zD5NZNkxkgDa7vmrxOcqyNC+8nENfGPHCCWbyFvwC7sGAgAm6P20LYwYkbembuJpN0Aciav89PhZFjSmHSFnGEb1wN7bwq54BAC0Rf7UgI23Yi1mR+33o0WueQQASnsnTrLIk8kCKaFBP2+yqCm0f8dMzj0CABHQS0ugsMZy0MbjBfRAlNFX3jW63RWPAEBx70SDEpxRQIFDlW0PzSiitkuzZcewToVu6hnZFBPlI0iJR4xg9/4dY6uqbNGZ8YeURUF2wCShSHBJgT5YMI3jU82lWR1Ba7umCgvV4rNk0atM1l3x8eZA3LCm3G/uDTcqkU4Gila+khCwYFYJOoioly1rIDqvroR9ZVEA2BOYLFgsNG8HSzUJP8qwDjqOs4kxqD1j3XHD6clqAnoYuDX9ZmgFqOXvkfhvm1fsK5J+zdGeVQG0pWuqxPSY75LgiPOqQjIBYc2+NlDUIHrwuioxT0+4XrH4GXiYJRPQalCJvsKg7wwy3/ilqXxgXSVhXvdkFTFameBjwU0ZV+4E+peBgBL+9I99ZaGs7tAy2rnL+XkLxl4iaWBQlRJUMLCVAU8cSDMwzaAhRRIioT4jP9ZzpfGOhfSh/gMVwbrySbrr8QAAABpmY1RMAAAAUwAAABkAAAApAAAAAgAAAAcABABkAABi76wSAAAD82ZkQVQAAABUaN6tl19oW3UUx7/nd25qx+i2yLqHyWqpaFlqMtturnvYQxEVVwKraEAHMlEGSsUHFYbsIS8iQ1F0T/NB1MnASC2x3daqbMMJwzGpa4kdq22Xtfig4sD+W/O7+R0ffkmam9k2ae6B30O4uefD+Z7f+XMJFVoqkapZdNznBPQagPY1XxB6wSnXeSKR4B2B5iPzkj1GoO3lvkfANirnj98lR3c7BidZ0MYAGAK2DtaIAvMAImtGMvBN6llX5AsBag0JDAAjBFMEK7I5Am4J8BeASYg5seeZRyZXhSSSqZ6MwUcsUAaAgXVeArvCJKccxYNtw6FJipMp9bMi5FTyt9ddkQ+FQAYEIznHFiZZMb1M/N5j3S1XysjL3fZJ39hhh+RTBigvCQNgARzINSXmlejTkcsVJN9rH/eNP+Aod5hF6grO8/oLkhudxeej0d0LlVx7j1zxuChXXf9SgDpDOf2XZfosoEMvR7spW2ltqeIfgdYbMQ3q0CBowB4iZBSdvvlr6KVYrHKAR654XBS13RhlkZBHImBc12Za33py1zzWaQW5llrHDzIQsjIJjOSurJEj1QA8EE14s+iKwhBgIOePdu+8iCrNAYCeM2NhbbAvX8kGNtkw6l34YA4AuCbQYSC2kqVQ2cPvHHzoB98gS5CIU5Ap3zKkHz6ZjQT0sEDg6U/AiK8QTWix/Wk5Hy7zqG+QroF0UMOttzkpdNY7C/NNE75BOEsbNN/Vxv/5ep3V/b+QRQAOqCCThQnBR1N60+y/miCefgXadvjCVK1vkIudLXMamNFkm2EOxn/PSbNvkNwVThUiycFcQthXiAaN5mQqSOYq7PIVsqRopCgf9ghi7VevBnyDZEz2kiYyNicFWMPGP7fGfIOMdTWlNfBtfhLmYRmRtxEX5QsEADKg90vHrgZCe/dMHaoW4im6pnPp8yzodIrXIOB2ADry84EHZ6qOBAC0obhbnHwbVXBJanrbv5/Y7Atkuqvhx4yir7w3DdAkj2rNQ+GBdLBqiNWPXtVEtgN4o9oLJZfa+ycaqspJ3uoHb+1nwRADG3KbY/EmedshHGuevf9kuZ16xW5771D6ccdQ0oIAFkHJPvY7Qz4IZO/5/Jfo9oV1QQBgy+BMpyOmj4HNRftwKWyWhXqZzGCNoRFa4JuXYzsWy4YAQPDcdIQgZxm4r2T5LoUtH4M5Jplk0PGfuhpPlzWc6vr/2MqB7HEWedF+TuQ/JWRlkH1mlJF9FU3ATWdnOpgkzpAnlmGrR+UYObquMRs8Mx0mhR4mibFgy2owJRStapY3Xpiqnb3jHFAk+1ko7EB2skg9AwEGNJOcuP5U4xv/AaU65cQdibPpAAAAGmZjVEwAAABVAAAAGQAAACcAAAACAAAACQAEAGQAADJpvUAAAAOJZmRBVAAAAFZo3t2WS2hcZRiGn+//T0wKtiWg4iKNEK9M2tTEFuNCMbiwTRxsREfQjaAUFMGNLhQXs/KCoqgg6EK8IVKsYazSeKEpZCENhWhCFBKTknQ2XrBQc5tz+T8X58zNVJPMnJUvHGZz5n/O+36Xc4Qt6JvC9AHreMdCn1WwKBYwm/1RWQF6vM3uK3w+80Cg+qGDNofiBJwKjipMqrcvCywp/A4soO6tg/ffvPCfkGOFmSdDxxuqGAc44sOdaPwbwyY80Y88Y0f7JjMLkhf3z3Pk3wAfFH56yqq+bkEsUBuTBbXKcU/klbuGuyc2S+OSkHdHfn7EiL5XAVQPxyo/tmj0ePa+nu/ZojZA3hyZu9aYcNLCTqs1hwOeauFyb+2hbPbAKttQXU3yeTXrZvZjD3ZawIokT69Y9P3WIPNYdlgitqm6LjS9s7kQ7Q8Q4gsCwDfyyfkfMo/mctsH1MWVz6txfbPTFjIWTQoNHsxFbaXeZ+7ev0KDqsS12jt3xEAmzl+wEscUOT36bBOAOogvPG3Lc0AyByKnnh++6TRNygM4+tX8vsC52xyK0/LQKTh5kRTkAYRO+7USU9K2KpMvH7nhu/Qg0BPHVF0datwJUpKX1GOvRZKo4nqok6l0IUi3ReOOQrAKvjXTqUGGvlxsDwivdLWdJayHK13zqUH8SHYYKzVLUPDQPz9rcLovCVkFWiUpeKUmIqQo07Lrr4sBogEQCAQiBMhVd46da0sNcnqge9mHoo8QX+ALtnVZb0wNAhAYmSlv3PL2LQn7UoX4julAJIkqBkXG7E/byZQPSVRxZCXV3C1nz7ak6CQaDxBXiSx21Wl+uyKXGuTcUNdigH6x4Y0Iz5FXkwokWS2v+pJEVu20zN6DSw83C6kbuqtPLp6yyEDt69fChVZsz9RgR7FpJwCRk3yljSudRvuaRse7vp3fnYoTgPbR4qdG3YPV762yKz0TOjm8dM81F5pyAhChT/hIsW4442671RjGu07MdzbtBKBtdOl2T+VrCzvqPlFjZxc9x0tG/Nd+Gby+1JATgPVDneOBcff6hrW6nRZ33q6SkRd8uewkqtKwk8p7YLQ4YNERC7ur3VbjzEl/cWjPmYaclBUe6hgrKXf4SDGQ2gVaHdiG46rT4T1TYWB6fZG3fZGwPLAlZOzXwY6JpuPaoNHz1xmRrFX+CNzaMbZY+P+P/gZjNJnGDOT1EQAAABpmY1RMAAAAVwAAABMAAAAmAAAAAgAAAAgABABkAQCkfZTAAAACtmZkQVQAAABYaN7tlF1oT3EYxz/P7zn/mYtdSEYWeSkzMwu74I4bJMqUv+JGWZMoJa642J28lCgXSigvabI1TJJQklqrsTVqa5mQi2kXspdz5n8eF+f/Nm32P3O7b/3q/OqcT8/zPd/nEQpUY2OjliXK69XktMLCid6RQkDPWrpqXMhVhXVqoIBi6F/v6VSgpqbuPaHwKEQWhQihEB2EMF2L5J1Jdael+6galxRcVJHhMb4yhTbFbjmnTyeFXWv5cEyNiwqS9yFpqKnxwBM5v622su2fnl1++PGAGtcVRC0PhKHCe025w8ndFW+n/AHnmnuXO5fqUKwkBwE1Q42WMW9436GdNcMTFeHlXxoazI1oz23PKFHkL2/kZunYyrpkraQms8blX0bW9iQD2OCL4IvgAz6CL3L3x7uVB5PJyUHjotHQYG5k4eA9Q+YZYICJYOJ6i2aN7jhVtyCYKkbZNr/X9O7yTFYphlquxYSk6k9urR4qJNxZWGByIhV5g0raK3Mvzu4sf1XoyHkA+1v7qgKzjZlgpg3HOTtDDHkAw6FsUAEViyoz8LCOGztWPI8NCyRc4xCycRDjNzwipjwA37nVaulgZn2TzunBTCqjUZHs/AnWFRtW9fjzHJ9w3rjEC6Nzh5b1xYZ5RTI7+C25+YuiMXh/irRPCBtOz1RkfBYqTENuMFH800fMJzOL4IuUbnr5qTg2bGBz6a9A5GsABEj6oAO+lceGEVXTnd0Ukt4UplXTggVIV7ZFMutHqqdbWWeuRSEAAiO5vr09ERs2GuprXyT0hVybIov7B+bvjQPLReDpl2aQXfmr2pn0DxWPVbB56WjBlUVP7gJAKu+vjoktKfYTe2K1CcCWsjdAa+aag1IaHxYRjgP5K3oo9FLN8T3L6Mm3tWh4JIK7K2wv62BGM/o//QFuzQanlLTaOQAAABpmY1RMAAAAWQAAABQAAAAWAAAAAgAAAAgABABkAQDPl48GAAAB/2ZkQVQAAABaaN6dlL9rU2EUhp/zna/SpYOgi0UcioGmVlHuUP8ClxZUMIOToBQFQRAFB4dsDgri2EXEFikRkagVBREHQSnYUIMorYmIOAgVUdqbSJsch+ZHbzBtcl84cO/H5eE953vPFTpUJpPR/p7BcWd2VWGXtPlOOoHNZPOBqzKhcEgBBdRAMRRw3QCnsx9OOOOuGr11QLOsFb68KXAi+/G8N7ul4CIAQK3xPKvIJI5nb3PJYlvgjeynCx67qSAtABTMYw+8cT11bGh2yxmmHy2cUqq31WqwDe48zLsK584eH3zT0aVcfrg4IGo5xfoiMAOFbNktn0yPBWG7znzEWdrcD/95SqFPkTpkvYQ7C+XEmfspqWw29403TiEopEJkJEQIEUIRQoFQ5F7PXOL0VrBIy+m0ufmgmPdYsiVri2vbwoOTRw6sdJLZRsuvg+JRjyQjORPwZuPTHcIiwJJzl9ajIU13Zi+fju19RRfyAMMz34ZDKodb3Sl2jS7lAUKpjnikBmlsQu7d6MCLWMASsl/FUJMG0Is9JoZqDmVfs81akKvyPjawJAy5liA7NB8P+OTr9r/ITgDXnGG5vNJfiAf01lt/qdZqVeQnHWzF/1dvx9IS2J/IqfGFmHIEwSrmLgJrtbPfOLkSF9j8fT3/vpuqJahU5hjd8ysu8B/6h7Fbz1BUNQAAABpmY1RMAAAAWwAAABUAAAANAAAABQAAAAgABABkAQBGTvCFAAABdmZkQVQAAABcaN6tkcsrrVEYh593rfdzGVBmcimlk8gIfwIx2RNlIspIKWXCzMDEhHLSGZ2JtJXBV9KXS+r8Aaf2RAaKhHIZyOiULdvlew32pYNNmzy1Wq3eelq/3yt8QBiGviZoHQ2waW9SpxgeED7m3XkyOujy8dNvFTo8oJYVekABj6GWf2dnABjpotK56GBAsaSHCs2LctKCEPAGit14OAuQa2fxSZl3v95IJ6PDcSeyqJgrSCwnyf9KLBWYrATEOxe7bSczMxK/G39o43jCYz8VkyIxzRtr6mx+NtGSKqnTnq3TEW+25DF58ats9D2BsWTix19KQADat8+alXhXzape96YQlccVgxuJultKxGMm7vjfZkak+Q4hI8KdZO8Mbrk+3TS03l99zycQ3bnsFuyPYrltFnpcvUo1DvNqCaWgj8SdIDwg/zUsRzgd/YoQwCGyXyTAFL21ab6Io7dhE1gAHnJngb76iG8hPK8kPK/8DtUztGqCyuea2MoAAAAaZmNUTAAAAF0AAAAPAAAABgAAAAwAAAAIAAQAZAAAeXELuwAAAMFmZEFUAAAAXmjejY4xTgJRGIS/yXv7HlcQsDK21FyAxNBQk3AMD2BHY6VH8AIGjJBY2e4BoCBsAR3barbZ3d9iSTRbqF8zyZ+Z+UcAD4vtNBr3iVk3YAQg2FkxgjXq+EamW41W+3FS8RJAP42xFWwVfrrSDfybwsx56RcjoeYjyA4JlkeUeZWPq8l15kGnCigQhQB03kUKeoJ6TdrPuFNNC7E89kj0Dlw1J3sG5txcpvxB8+Z1F6EzBJ8zvtjwT74AljFC6d2II+4AAAASdEVYdFNvZnR3YXJlAGV6Z2lmLmNvbaDDs1gAAAAxdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIGV6Z2lmLmNvbSBBbmltYXRlZCBQTkcgbWFrZXKphWVeAAAAAElFTkSuQmCC";const LoadingIndicator=()=>React$1.createElement("div",{className:"formant-loading-indicator"},React$1.createElement("img",{src:loading}));var __defProp=Object.defineProperty,__defNormalProp=(i,o,s)=>o in i?__defProp(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s,__publicField=(i,o,s)=>(__defNormalProp(i,typeof o!="symbol"?o+"":o,s),s),dist={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(module,exports){(function(i,o){module.exports=o()})(window,function(){return function(i){function o(st){for(var ht,_t,gt=st[0],ft=st[1],ut=0,yt=[];ut<gt.length;ut++)_t=gt[ut],Object.prototype.hasOwnProperty.call(_,_t)&&_[_t]&&yt.push(_[_t][0]),_[_t]=0;for(ht in ft)Object.prototype.hasOwnProperty.call(ft,ht)&&(i[ht]=ft[ht]);for(it&&it(st);yt.length;)yt.shift()()}var s={},_={0:0};function $(st){if(s[st])return s[st].exports;var ht=s[st]={i:st,l:!1,exports:{}};return i[st].call(ht.exports,ht,ht.exports,$),ht.l=!0,ht.exports}$.e=function(){return Promise.resolve()},$.m=i,$.c=s,$.d=function(st,ht,_t){$.o(st,ht)||Object.defineProperty(st,ht,{enumerable:!0,get:_t})},$.r=function(st){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(st,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(st,"__esModule",{value:!0})},$.t=function(st,ht){if(1&ht&&(st=$(st)),8&ht||4&ht&&typeof st=="object"&&st&&st.__esModule)return st;var _t=Object.create(null);if($.r(_t),Object.defineProperty(_t,"default",{enumerable:!0,value:st}),2&ht&&typeof st!="string")for(var gt in st)$.d(_t,gt,function(ft){return st[ft]}.bind(null,gt));return _t},$.n=function(st){var ht=st&&st.__esModule?function(){return st.default}:function(){return st};return $.d(ht,"a",ht),ht},$.o=function(st,ht){return Object.prototype.hasOwnProperty.call(st,ht)},$.p="",$.oe=function(st){throw console.error(st),st};var et=window.webpackJsonpFormantRealtimeSDK=window.webpackJsonpFormantRealtimeSDK||[],tt=et.push.bind(et);et.push=o,et=et.slice();for(var j=0;j<et.length;j++)o(et[j]);var it=tt;return $($.s=228)}([function(i,o,s){s.d(o,"a",function(){return rn});var _=s(14),$=s.n(_),et=s(18),tt=s(56),j=s(19);const it=Math.pow(2,20),st=it;function ht(Dt,Kt){if(Kt.length<Dt)throw new TypeError(Dt+" argument"+(Dt>1?"s":"")+" required, but only "+Kt.length+" present")}function _t(Dt){if(Dt===null||Dt===!0||Dt===!1)return NaN;var Kt=Number(Dt);return isNaN(Kt)?Kt:Kt<0?Math.ceil(Kt):Math.floor(Kt)}var gt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ft=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ut=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,yt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Et(Dt){var Kt,gn={},hn=Dt.split(gt.dateTimeDelimiter);if(hn.length>2)return gn;if(/:/.test(hn[0])?Kt=hn[0]:(gn.date=hn[0],Kt=hn[1],gt.timeZoneDelimiter.test(gn.date)&&(gn.date=Dt.split(gt.timeZoneDelimiter)[0],Kt=Dt.substr(gn.date.length,Dt.length))),Kt){var xn=gt.timezone.exec(Kt);xn?(gn.time=Kt.replace(xn[1],""),gn.timezone=xn[1]):gn.time=Kt}return gn}function Mt(Dt,Kt){var gn=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+Kt)+"})|(\\d{2}|[+-]\\d{"+(2+Kt)+"})$)"),hn=Dt.match(gn);if(!hn)return{year:NaN,restDateString:""};var xn=hn[1]?parseInt(hn[1]):null,Mn=hn[2]?parseInt(hn[2]):null;return{year:Mn===null?xn:100*Mn,restDateString:Dt.slice((hn[1]||hn[2]).length)}}function Ft(Dt,Kt){if(Kt===null)return new Date(NaN);var gn=Dt.match(ft);if(!gn)return new Date(NaN);var hn=!!gn[4],xn=Rt(gn[1]),Mn=Rt(gn[2])-1,qn=Rt(gn[3]),Ir=Rt(gn[4]),_i=Rt(gn[5])-1;if(hn)return function(fo,Gr,Yr){return Gr>=1&&Gr<=53&&Yr>=0&&Yr<=6}(0,Ir,_i)?function(fo,Gr,Yr){var to=new Date(0);to.setUTCFullYear(fo,0,4);var Ro=to.getUTCDay()||7,Mo=7*(Gr-1)+Yr+1-Ro;return to.setUTCDate(to.getUTCDate()+Mo),to}(Kt,Ir,_i):new Date(NaN);var Ur=new Date(0);return function(fo,Gr,Yr){return Gr>=0&&Gr<=11&&Yr>=1&&Yr<=(nn[Gr]||(on(fo)?29:28))}(Kt,Mn,qn)&&function(fo,Gr){return Gr>=1&&Gr<=(on(fo)?366:365)}(Kt,xn)?(Ur.setUTCFullYear(Kt,Mn,Math.max(xn,qn)),Ur):new Date(NaN)}function Rt(Dt){return Dt?parseInt(Dt):1}function Ot(Dt){var Kt=Dt.match(ut);if(!Kt)return NaN;var gn=pt(Kt[1]),hn=pt(Kt[2]),xn=pt(Kt[3]);return function(Mn,qn,Ir){return Mn===24?qn===0&&Ir===0:Ir>=0&&Ir<60&&qn>=0&&qn<60&&Mn>=0&&Mn<25}(gn,hn,xn)?36e5*gn+6e4*hn+1e3*xn:NaN}function pt(Dt){return Dt&&parseFloat(Dt.replace(",","."))||0}function Lt(Dt){if(Dt==="Z")return 0;var Kt=Dt.match(yt);if(!Kt)return 0;var gn=Kt[1]==="+"?-1:1,hn=parseInt(Kt[2]),xn=Kt[3]&&parseInt(Kt[3])||0;return function(Mn,qn){return qn>=0&&qn<=59}(0,xn)?gn*(36e5*hn+6e4*xn):NaN}var nn=[31,null,31,30,31,30,31,31,30,31,30,31];function on(Dt){return Dt%400==0||Dt%4==0&&Dt%100!=0}function wt(Dt){return ht(1,arguments),Dt instanceof Date||typeof Dt=="object"&&Object.prototype.toString.call(Dt)==="[object Date]"}function xt(Dt){ht(1,arguments);var Kt=Object.prototype.toString.call(Dt);return Dt instanceof Date||typeof Dt=="object"&&Kt==="[object Date]"?new Date(Dt.getTime()):typeof Dt=="number"||Kt==="[object Number]"?new Date(Dt):(typeof Dt!="string"&&Kt!=="[object String]"||typeof console>"u"||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Nt(Dt){const Kt=function(gn,hn){var xn;ht(1,arguments);var Mn=_t((xn=hn==null?void 0:hn.additionalDigits)!==null&&xn!==void 0?xn:2);if(Mn!==2&&Mn!==1&&Mn!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(typeof gn!="string"&&Object.prototype.toString.call(gn)!=="[object String]")return new Date(NaN);var qn,Ir=Et(gn);if(Ir.date){var _i=Mt(Ir.date,Mn);qn=Ft(_i.restDateString,_i.year)}if(!qn||isNaN(qn.getTime()))return new Date(NaN);var Ur,fo=qn.getTime(),Gr=0;if(Ir.time&&(Gr=Ot(Ir.time),isNaN(Gr)))return new Date(NaN);if(!Ir.timezone){var Yr=new Date(fo+Gr),to=new Date(0);return to.setFullYear(Yr.getUTCFullYear(),Yr.getUTCMonth(),Yr.getUTCDate()),to.setHours(Yr.getUTCHours(),Yr.getUTCMinutes(),Yr.getUTCSeconds(),Yr.getUTCMilliseconds()),to}return Ur=Lt(Ir.timezone),isNaN(Ur)?new Date(NaN):new Date(fo+Gr+Ur)}(Dt);if(!function(gn){if(ht(1,arguments),!wt(gn)&&typeof gn!="number")return!1;var hn=xt(gn);return!isNaN(Number(hn))}(Kt))throw new Error(`Invalid ISO 8601 date string (${Dt})`);return Kt}var Tt=s(4),Vt=s(34);function Xt(Dt){return $()(Dt,{cycles:!0})}var Gt=function(Dt,Kt){var gn={};for(var hn in Dt)Object.prototype.hasOwnProperty.call(Dt,hn)&&Kt.indexOf(hn)<0&&(gn[hn]=Dt[hn]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function"){var xn=0;for(hn=Object.getOwnPropertySymbols(Dt);xn<hn.length;xn++)Kt.indexOf(hn[xn])<0&&Object.prototype.propertyIsEnumerable.call(Dt,hn[xn])&&(gn[hn[xn]]=Dt[hn[xn]])}return gn};function Ut(Dt,Kt={}){const gn=Ir=>Kt.redacted!==!1?Object(Vt.a)(Ir):Ir;if(!Dt.stack)return{message:Xt(gn(Dt))};const{name:hn,message:xn,stack:Mn}=Dt,qn=Gt(Dt,["name","message","stack"]);return{name:hn,message:xn!==void 0?xn:Xt(gn(Dt)),stack:Mn,meta:qn&&Object.keys(qn).length===0?void 0:gn(qn)}}function Ht(Dt,Kt={}){const{message:gn,stack:hn,meta:xn}=Ut(Dt,Kt);return`${hn||gn||""}${xn&&Object.keys(xn).length>0?` -- ${Xt(xn)}`:""}`}var qt=s(39),Pt=s(103),St=s.n(Pt),Zt=function(Dt,Kt,gn,hn){return new(gn||(gn=Promise))(function(xn,Mn){function qn(Ur){try{_i(hn.next(Ur))}catch(fo){Mn(fo)}}function Ir(Ur){try{_i(hn.throw(Ur))}catch(fo){Mn(fo)}}function _i(Ur){var fo;Ur.done?xn(Ur.value):(fo=Ur.value,fo instanceof gn?fo:new gn(function(Gr){Gr(fo)})).then(qn,Ir)}_i((hn=hn.apply(Dt,Kt||[])).next())})},tn=function(Dt,Kt){var gn={};for(var hn in Dt)Object.prototype.hasOwnProperty.call(Dt,hn)&&Kt.indexOf(hn)<0&&(gn[hn]=Dt[hn]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function"){var xn=0;for(hn=Object.getOwnPropertySymbols(Dt);xn<hn.length;xn++)Kt.indexOf(hn[xn])<0&&Object.prototype.propertyIsEnumerable.call(Dt,hn[xn])&&(gn[hn[xn]]=Dt[hn[xn]])}return gn};class mn extends St.a{constructor(Kt,gn){super(),this.endpoint=Kt,this.metadata=gn,this.logClient=this.getLogClient()}getLogClient(){return Zt(this,void 0,void 0,function*(){const{LogClient:Kt}=yield Promise.resolve().then(s.bind(null,231));return new Kt(this.endpoint)})}log(Kt,gn){return Zt(this,void 0,void 0,function*(){const{level:hn,message:xn,error:Mn}=Kt,qn=tn(Kt,["level","message","error"]);this.emit("logged");try{yield(yield this.logClient).log([{timestamp:new Date().toISOString(),level:hn,message:`${xn}`.substring(0,1e3),error:Mn!==void 0?Ut(Mn):void 0,meta:Object.assign(Object.assign({},qn),this.metadata)}])}catch(Ir){console.error(`Failed to log to log-api: ${Ht(Ir)}`)}gn()})}}var yn=function(Dt,Kt){var gn={};for(var hn in Dt)Object.prototype.hasOwnProperty.call(Dt,hn)&&Kt.indexOf(hn)<0&&(gn[hn]=Dt[hn]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function"){var xn=0;for(hn=Object.getOwnPropertySymbols(Dt);xn<hn.length;xn++)Kt.indexOf(hn[xn])<0&&Object.prototype.propertyIsEnumerable.call(Dt,hn[xn])&&(gn[hn[xn]]=Dt[hn[xn]])}return gn};const vn={app:Tt.a,namespace:Tt.i,buildTag:Tt.b,instanceId:qt.a},un=Tt.e?j.format.printf(Dt=>{var{timestamp:Kt,level:gn,message:hn,error:xn}=Dt,Mn=yn(Dt,["timestamp","level","message","error"]);const qn=Object.assign(Object.assign({timestamp:Kt?Nt(Kt).getTime():new Date().getTime(),level:gn.toUpperCase(),message:hn},xn?{error:Ut(xn)}:{}),{meta:Object.assign(Object.assign({},vn),Mn)});return $()(qn,{cycles:!0})}):j.format.printf(Dt=>{var{timestamp:Kt,level:gn,message:hn,error:xn}=Dt,Mn=yn(Dt,["timestamp","level","message","error"]);let qn=`${Kt||new Date().toISOString()} ${gn.toUpperCase()}: ${hn} `;return Object.keys(Mn).length>0&&(qn+=$()(Mn,{cycles:!0})),xn&&(qn+=`
${Ht(xn)}`),qn}),rn=Object(j.createLogger)({level:Tt.f});if(Tt.g&&rn.add(new j.transports.Console({format:un,level:"debug"})),Tt.d&&rn.add(new mn(Tt.d,vn)),Tt.h){const Dt=tt.resolve(et.tmpdir(),`silly-${Tt.a}.log`);rn.debug("Logging silly logs to file",{filename:Dt}),rn.add(new j.transports.File({filename:Dt,maxsize:1*st,maxFiles:10,format:j.format.combine((It="silly",Object(j.format)(Kt=>Kt.level===It&&Kt)()),un),level:"silly"}))}var It},function(i,o,s){s.d(o,"a",function(){return _});const _={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}},function(i,o){var s,_,$=i.exports={};function et(){throw new Error("setTimeout has not been defined")}function tt(){throw new Error("clearTimeout has not been defined")}function j(Et){if(s===setTimeout)return setTimeout(Et,0);if((s===et||!s)&&setTimeout)return s=setTimeout,setTimeout(Et,0);try{return s(Et,0)}catch{try{return s.call(null,Et,0)}catch{return s.call(this,Et,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:et}catch{s=et}try{_=typeof clearTimeout=="function"?clearTimeout:tt}catch{_=tt}})();var it,st=[],ht=!1,_t=-1;function gt(){ht&&it&&(ht=!1,it.length?st=it.concat(st):_t=-1,st.length&&ft())}function ft(){if(!ht){var Et=j(gt);ht=!0;for(var Mt=st.length;Mt;){for(it=st,st=[];++_t<Mt;)it&&it[_t].run();_t=-1,Mt=st.length}it=null,ht=!1,function(Ft){if(_===clearTimeout)return clearTimeout(Ft);if((_===tt||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(Ft);try{_(Ft)}catch{try{return _.call(null,Ft)}catch{return _.call(this,Ft)}}}(Et)}}function ut(Et,Mt){this.fun=Et,this.array=Mt}function yt(){}$.nextTick=function(Et){var Mt=new Array(arguments.length-1);if(arguments.length>1)for(var Ft=1;Ft<arguments.length;Ft++)Mt[Ft-1]=arguments[Ft];st.push(new ut(Et,Mt)),st.length!==1||ht||j(ft)},ut.prototype.run=function(){this.fun.apply(null,this.array)},$.title="browser",$.browser=!0,$.env={},$.argv=[],$.version="",$.versions={},$.on=yt,$.addListener=yt,$.once=yt,$.off=yt,$.removeListener=yt,$.removeAllListeners=yt,$.emit=yt,$.prependListener=yt,$.prependOnceListener=yt,$.listeners=function(Et){return[]},$.binding=function(Et){throw new Error("process.binding is not supported")},$.cwd=function(){return"/"},$.chdir=function(Et){throw new Error("process.chdir is not supported")},$.umask=function(){return 0}},function(i,o,s){Object.defineProperty(o,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(o,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(o,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(o,"configs",{value:s(118)})},function(i,o,s){(function(_){s.d(o,"a",function(){return tt}),s.d(o,"i",function(){return j}),s.d(o,"j",function(){return it}),s.d(o,"b",function(){return st}),s.d(o,"f",function(){return ht}),s.d(o,"e",function(){return _t}),s.d(o,"g",function(){return gt}),s.d(o,"d",function(){return ft}),s.d(o,"c",function(){return ut}),s.d(o,"h",function(){return yt});var $=s(102);const et=$.from({ENVIRONMENT:_.env.ENV,API_ENDPOINT:_.env.API_ENDPOINT,APP:"realtime-sdk",APP_PATH:_.env.APP_PATH,BUILD_TAG:_.env.BUILD_TAG,ENABLE_SELF_SERVE:_.env.ENABLE_SELF_SERVE,ENABLE_SENTRY:_.env.ENABLE_SENTRY,ENABLE_SENTRY_PROFILING:_.env.ENABLE_SENTRY_PROFILING,GIT_COMMIT:_.env.GIT_COMMIT,JEST_WORKER_ID:_.env.JEST_WORKER_ID,LOG_API_ENDPOINT:_.env.LOG_API_ENDPOINT,LOG_JSON:"false",LOG_LEVEL:_.env.LOG_LEVEL,LOG_TO_CONSOLE:_.env.LOG_TO_CONSOLE,LOG_TO_FILE:_.env.LOG_TO_FILE,NAMESPACE:"production",SENTRY_DSN:_.env.SENTRY_DSN,SHEET_EXPORT_MAX_ROW_COUNT:_.env.SHEET_EXPORT_MAX_ROW_COUNT,STABLE_AGENT_VERSION:_.env.STABLE_AGENT_VERSION,VERSION:_.env.VERSION}),tt=(et.get("ENVIRONMENT").default("").asString(),et.get("APP").default("").asString()),j=(et.get("APP_PATH").default("").asString(),et.get("API_ENDPOINT").default("").asString(),et.get("NAMESPACE").default("").asString()),it=et.get("VERSION").default("").asString(),st=et.get("BUILD_TAG").default("").asString(),ht=(et.get("GIT_COMMIT").default("").asString(),et.get("ENABLE_SENTRY").default("false").asBool(),et.get("ENABLE_SENTRY_PROFILING").default("false").asBool(),et.get("SENTRY_DSN").default("").asString(),et.get("LOG_LEVEL").default("debug").asString()),_t=et.get("LOG_JSON").default("true").asBool(),gt=et.get("LOG_TO_CONSOLE").default("true").asBool(),ft=(et.get("STABLE_AGENT_VERSION").default("").asString(),et.get("LOG_API_ENDPOINT").asString()),ut=et.get("JEST_WORKER_ID").asString(),yt=(et.get("SHEET_EXPORT_MAX_ROW_COUNT").default("10000").asIntPositive(),et.get("LOG_TO_FILE").default("false").asBoolStrict());et.get("ENABLE_SELF_SERVE").default("true").asBoolStrict()}).call(this,s(2))},function(i,o,s){(function(_){var $=s(126),et=s(127),tt=s(42);function j(){return st.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function it(It,Dt){if(j()<Dt)throw new RangeError("Invalid typed array length");return st.TYPED_ARRAY_SUPPORT?(It=new Uint8Array(Dt)).__proto__=st.prototype:(It===null&&(It=new st(Dt)),It.length=Dt),It}function st(It,Dt,Kt){if(!(st.TYPED_ARRAY_SUPPORT||this instanceof st))return new st(It,Dt,Kt);if(typeof It=="number"){if(typeof Dt=="string")throw new Error("If encoding is specified then the first argument must be a string");return gt(this,It)}return ht(this,It,Dt,Kt)}function ht(It,Dt,Kt,gn){if(typeof Dt=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&Dt instanceof ArrayBuffer?function(hn,xn,Mn,qn){if(xn.byteLength,Mn<0||xn.byteLength<Mn)throw new RangeError("'offset' is out of bounds");if(xn.byteLength<Mn+(qn||0))throw new RangeError("'length' is out of bounds");return xn=Mn===void 0&&qn===void 0?new Uint8Array(xn):qn===void 0?new Uint8Array(xn,Mn):new Uint8Array(xn,Mn,qn),st.TYPED_ARRAY_SUPPORT?(hn=xn).__proto__=st.prototype:hn=ft(hn,xn),hn}(It,Dt,Kt,gn):typeof Dt=="string"?function(hn,xn,Mn){if(typeof Mn=="string"&&Mn!==""||(Mn="utf8"),!st.isEncoding(Mn))throw new TypeError('"encoding" must be a valid string encoding');var qn=0|yt(xn,Mn),Ir=(hn=it(hn,qn)).write(xn,Mn);return Ir!==qn&&(hn=hn.slice(0,Ir)),hn}(It,Dt,Kt):function(hn,xn){if(st.isBuffer(xn)){var Mn=0|ut(xn.length);return(hn=it(hn,Mn)).length===0||xn.copy(hn,0,0,Mn),hn}if(xn){if(typeof ArrayBuffer<"u"&&xn.buffer instanceof ArrayBuffer||"length"in xn)return typeof xn.length!="number"||(qn=xn.length)!=qn?it(hn,0):ft(hn,xn);if(xn.type==="Buffer"&&tt(xn.data))return ft(hn,xn.data)}var qn;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(It,Dt)}function _t(It){if(typeof It!="number")throw new TypeError('"size" argument must be a number');if(It<0)throw new RangeError('"size" argument must not be negative')}function gt(It,Dt){if(_t(Dt),It=it(It,Dt<0?0:0|ut(Dt)),!st.TYPED_ARRAY_SUPPORT)for(var Kt=0;Kt<Dt;++Kt)It[Kt]=0;return It}function ft(It,Dt){var Kt=Dt.length<0?0:0|ut(Dt.length);It=it(It,Kt);for(var gn=0;gn<Kt;gn+=1)It[gn]=255&Dt[gn];return It}function ut(It){if(It>=j())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j().toString(16)+" bytes");return 0|It}function yt(It,Dt){if(st.isBuffer(It))return It.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(It)||It instanceof ArrayBuffer))return It.byteLength;typeof It!="string"&&(It=""+It);var Kt=It.length;if(Kt===0)return 0;for(var gn=!1;;)switch(Dt){case"ascii":case"latin1":case"binary":return Kt;case"utf8":case"utf-8":case void 0:return vn(It).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Kt;case"hex":return Kt>>>1;case"base64":return un(It).length;default:if(gn)return vn(It).length;Dt=(""+Dt).toLowerCase(),gn=!0}}function Et(It,Dt,Kt){var gn=!1;if((Dt===void 0||Dt<0)&&(Dt=0),Dt>this.length||((Kt===void 0||Kt>this.length)&&(Kt=this.length),Kt<=0)||(Kt>>>=0)<=(Dt>>>=0))return"";for(It||(It="utf8");;)switch(It){case"hex":return Xt(this,Dt,Kt);case"utf8":case"utf-8":return Nt(this,Dt,Kt);case"ascii":return Tt(this,Dt,Kt);case"latin1":case"binary":return Vt(this,Dt,Kt);case"base64":return xt(this,Dt,Kt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,Dt,Kt);default:if(gn)throw new TypeError("Unknown encoding: "+It);It=(It+"").toLowerCase(),gn=!0}}function Mt(It,Dt,Kt){var gn=It[Dt];It[Dt]=It[Kt],It[Kt]=gn}function Ft(It,Dt,Kt,gn,hn){if(It.length===0)return-1;if(typeof Kt=="string"?(gn=Kt,Kt=0):Kt>2147483647?Kt=2147483647:Kt<-2147483648&&(Kt=-2147483648),Kt=+Kt,isNaN(Kt)&&(Kt=hn?0:It.length-1),Kt<0&&(Kt=It.length+Kt),Kt>=It.length){if(hn)return-1;Kt=It.length-1}else if(Kt<0){if(!hn)return-1;Kt=0}if(typeof Dt=="string"&&(Dt=st.from(Dt,gn)),st.isBuffer(Dt))return Dt.length===0?-1:Rt(It,Dt,Kt,gn,hn);if(typeof Dt=="number")return Dt&=255,st.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?hn?Uint8Array.prototype.indexOf.call(It,Dt,Kt):Uint8Array.prototype.lastIndexOf.call(It,Dt,Kt):Rt(It,[Dt],Kt,gn,hn);throw new TypeError("val must be string, number or Buffer")}function Rt(It,Dt,Kt,gn,hn){var xn,Mn=1,qn=It.length,Ir=Dt.length;if(gn!==void 0&&((gn=String(gn).toLowerCase())==="ucs2"||gn==="ucs-2"||gn==="utf16le"||gn==="utf-16le")){if(It.length<2||Dt.length<2)return-1;Mn=2,qn/=2,Ir/=2,Kt/=2}function _i(Yr,to){return Mn===1?Yr[to]:Yr.readUInt16BE(to*Mn)}if(hn){var Ur=-1;for(xn=Kt;xn<qn;xn++)if(_i(It,xn)===_i(Dt,Ur===-1?0:xn-Ur)){if(Ur===-1&&(Ur=xn),xn-Ur+1===Ir)return Ur*Mn}else Ur!==-1&&(xn-=xn-Ur),Ur=-1}else for(Kt+Ir>qn&&(Kt=qn-Ir),xn=Kt;xn>=0;xn--){for(var fo=!0,Gr=0;Gr<Ir;Gr++)if(_i(It,xn+Gr)!==_i(Dt,Gr)){fo=!1;break}if(fo)return xn}return-1}function Ot(It,Dt,Kt,gn){Kt=Number(Kt)||0;var hn=It.length-Kt;gn?(gn=Number(gn))>hn&&(gn=hn):gn=hn;var xn=Dt.length;if(xn%2!=0)throw new TypeError("Invalid hex string");gn>xn/2&&(gn=xn/2);for(var Mn=0;Mn<gn;++Mn){var qn=parseInt(Dt.substr(2*Mn,2),16);if(isNaN(qn))return Mn;It[Kt+Mn]=qn}return Mn}function pt(It,Dt,Kt,gn){return rn(vn(Dt,It.length-Kt),It,Kt,gn)}function Lt(It,Dt,Kt,gn){return rn(function(hn){for(var xn=[],Mn=0;Mn<hn.length;++Mn)xn.push(255&hn.charCodeAt(Mn));return xn}(Dt),It,Kt,gn)}function nn(It,Dt,Kt,gn){return Lt(It,Dt,Kt,gn)}function on(It,Dt,Kt,gn){return rn(un(Dt),It,Kt,gn)}function wt(It,Dt,Kt,gn){return rn(function(hn,xn){for(var Mn,qn,Ir,_i=[],Ur=0;Ur<hn.length&&!((xn-=2)<0);++Ur)Mn=hn.charCodeAt(Ur),qn=Mn>>8,Ir=Mn%256,_i.push(Ir),_i.push(qn);return _i}(Dt,It.length-Kt),It,Kt,gn)}function xt(It,Dt,Kt){return Dt===0&&Kt===It.length?$.fromByteArray(It):$.fromByteArray(It.slice(Dt,Kt))}function Nt(It,Dt,Kt){Kt=Math.min(It.length,Kt);for(var gn=[],hn=Dt;hn<Kt;){var xn,Mn,qn,Ir,_i=It[hn],Ur=null,fo=_i>239?4:_i>223?3:_i>191?2:1;if(hn+fo<=Kt)switch(fo){case 1:_i<128&&(Ur=_i);break;case 2:(192&(xn=It[hn+1]))==128&&(Ir=(31&_i)<<6|63&xn)>127&&(Ur=Ir);break;case 3:xn=It[hn+1],Mn=It[hn+2],(192&xn)==128&&(192&Mn)==128&&(Ir=(15&_i)<<12|(63&xn)<<6|63&Mn)>2047&&(Ir<55296||Ir>57343)&&(Ur=Ir);break;case 4:xn=It[hn+1],Mn=It[hn+2],qn=It[hn+3],(192&xn)==128&&(192&Mn)==128&&(192&qn)==128&&(Ir=(15&_i)<<18|(63&xn)<<12|(63&Mn)<<6|63&qn)>65535&&Ir<1114112&&(Ur=Ir)}Ur===null?(Ur=65533,fo=1):Ur>65535&&(Ur-=65536,gn.push(Ur>>>10&1023|55296),Ur=56320|1023&Ur),gn.push(Ur),hn+=fo}return function(Gr){var Yr=Gr.length;if(Yr<=4096)return String.fromCharCode.apply(String,Gr);for(var to="",Ro=0;Ro<Yr;)to+=String.fromCharCode.apply(String,Gr.slice(Ro,Ro+=4096));return to}(gn)}o.Buffer=st,o.SlowBuffer=function(It){return+It!=It&&(It=0),st.alloc(+It)},o.INSPECT_MAX_BYTES=50,st.TYPED_ARRAY_SUPPORT=_.TYPED_ARRAY_SUPPORT!==void 0?_.TYPED_ARRAY_SUPPORT:function(){try{var It=new Uint8Array(1);return It.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},It.foo()===42&&typeof It.subarray=="function"&&It.subarray(1,1).byteLength===0}catch{return!1}}(),o.kMaxLength=j(),st.poolSize=8192,st._augment=function(It){return It.__proto__=st.prototype,It},st.from=function(It,Dt,Kt){return ht(null,It,Dt,Kt)},st.TYPED_ARRAY_SUPPORT&&(st.prototype.__proto__=Uint8Array.prototype,st.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&st[Symbol.species]===st&&Object.defineProperty(st,Symbol.species,{value:null,configurable:!0})),st.alloc=function(It,Dt,Kt){return function(gn,hn,xn,Mn){return _t(hn),hn<=0?it(gn,hn):xn!==void 0?typeof Mn=="string"?it(gn,hn).fill(xn,Mn):it(gn,hn).fill(xn):it(gn,hn)}(null,It,Dt,Kt)},st.allocUnsafe=function(It){return gt(null,It)},st.allocUnsafeSlow=function(It){return gt(null,It)},st.isBuffer=function(It){return!(It==null||!It._isBuffer)},st.compare=function(It,Dt){if(!st.isBuffer(It)||!st.isBuffer(Dt))throw new TypeError("Arguments must be Buffers");if(It===Dt)return 0;for(var Kt=It.length,gn=Dt.length,hn=0,xn=Math.min(Kt,gn);hn<xn;++hn)if(It[hn]!==Dt[hn]){Kt=It[hn],gn=Dt[hn];break}return Kt<gn?-1:gn<Kt?1:0},st.isEncoding=function(It){switch(String(It).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},st.concat=function(It,Dt){if(!tt(It))throw new TypeError('"list" argument must be an Array of Buffers');if(It.length===0)return st.alloc(0);var Kt;if(Dt===void 0)for(Dt=0,Kt=0;Kt<It.length;++Kt)Dt+=It[Kt].length;var gn=st.allocUnsafe(Dt),hn=0;for(Kt=0;Kt<It.length;++Kt){var xn=It[Kt];if(!st.isBuffer(xn))throw new TypeError('"list" argument must be an Array of Buffers');xn.copy(gn,hn),hn+=xn.length}return gn},st.byteLength=yt,st.prototype._isBuffer=!0,st.prototype.swap16=function(){var It=this.length;if(It%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Dt=0;Dt<It;Dt+=2)Mt(this,Dt,Dt+1);return this},st.prototype.swap32=function(){var It=this.length;if(It%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Dt=0;Dt<It;Dt+=4)Mt(this,Dt,Dt+3),Mt(this,Dt+1,Dt+2);return this},st.prototype.swap64=function(){var It=this.length;if(It%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Dt=0;Dt<It;Dt+=8)Mt(this,Dt,Dt+7),Mt(this,Dt+1,Dt+6),Mt(this,Dt+2,Dt+5),Mt(this,Dt+3,Dt+4);return this},st.prototype.toString=function(){var It=0|this.length;return It===0?"":arguments.length===0?Nt(this,0,It):Et.apply(this,arguments)},st.prototype.equals=function(It){if(!st.isBuffer(It))throw new TypeError("Argument must be a Buffer");return this===It||st.compare(this,It)===0},st.prototype.inspect=function(){var It="",Dt=o.INSPECT_MAX_BYTES;return this.length>0&&(It=this.toString("hex",0,Dt).match(/.{2}/g).join(" "),this.length>Dt&&(It+=" ... ")),"<Buffer "+It+">"},st.prototype.compare=function(It,Dt,Kt,gn,hn){if(!st.isBuffer(It))throw new TypeError("Argument must be a Buffer");if(Dt===void 0&&(Dt=0),Kt===void 0&&(Kt=It?It.length:0),gn===void 0&&(gn=0),hn===void 0&&(hn=this.length),Dt<0||Kt>It.length||gn<0||hn>this.length)throw new RangeError("out of range index");if(gn>=hn&&Dt>=Kt)return 0;if(gn>=hn)return-1;if(Dt>=Kt)return 1;if(this===It)return 0;for(var xn=(hn>>>=0)-(gn>>>=0),Mn=(Kt>>>=0)-(Dt>>>=0),qn=Math.min(xn,Mn),Ir=this.slice(gn,hn),_i=It.slice(Dt,Kt),Ur=0;Ur<qn;++Ur)if(Ir[Ur]!==_i[Ur]){xn=Ir[Ur],Mn=_i[Ur];break}return xn<Mn?-1:Mn<xn?1:0},st.prototype.includes=function(It,Dt,Kt){return this.indexOf(It,Dt,Kt)!==-1},st.prototype.indexOf=function(It,Dt,Kt){return Ft(this,It,Dt,Kt,!0)},st.prototype.lastIndexOf=function(It,Dt,Kt){return Ft(this,It,Dt,Kt,!1)},st.prototype.write=function(It,Dt,Kt,gn){if(Dt===void 0)gn="utf8",Kt=this.length,Dt=0;else if(Kt===void 0&&typeof Dt=="string")gn=Dt,Kt=this.length,Dt=0;else{if(!isFinite(Dt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Dt|=0,isFinite(Kt)?(Kt|=0,gn===void 0&&(gn="utf8")):(gn=Kt,Kt=void 0)}var hn=this.length-Dt;if((Kt===void 0||Kt>hn)&&(Kt=hn),It.length>0&&(Kt<0||Dt<0)||Dt>this.length)throw new RangeError("Attempt to write outside buffer bounds");gn||(gn="utf8");for(var xn=!1;;)switch(gn){case"hex":return Ot(this,It,Dt,Kt);case"utf8":case"utf-8":return pt(this,It,Dt,Kt);case"ascii":return Lt(this,It,Dt,Kt);case"latin1":case"binary":return nn(this,It,Dt,Kt);case"base64":return on(this,It,Dt,Kt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wt(this,It,Dt,Kt);default:if(xn)throw new TypeError("Unknown encoding: "+gn);gn=(""+gn).toLowerCase(),xn=!0}},st.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Tt(It,Dt,Kt){var gn="";Kt=Math.min(It.length,Kt);for(var hn=Dt;hn<Kt;++hn)gn+=String.fromCharCode(127&It[hn]);return gn}function Vt(It,Dt,Kt){var gn="";Kt=Math.min(It.length,Kt);for(var hn=Dt;hn<Kt;++hn)gn+=String.fromCharCode(It[hn]);return gn}function Xt(It,Dt,Kt){var gn=It.length;(!Dt||Dt<0)&&(Dt=0),(!Kt||Kt<0||Kt>gn)&&(Kt=gn);for(var hn="",xn=Dt;xn<Kt;++xn)hn+=yn(It[xn]);return hn}function Gt(It,Dt,Kt){for(var gn=It.slice(Dt,Kt),hn="",xn=0;xn<gn.length;xn+=2)hn+=String.fromCharCode(gn[xn]+256*gn[xn+1]);return hn}function Ut(It,Dt,Kt){if(It%1!=0||It<0)throw new RangeError("offset is not uint");if(It+Dt>Kt)throw new RangeError("Trying to access beyond buffer length")}function Ht(It,Dt,Kt,gn,hn,xn){if(!st.isBuffer(It))throw new TypeError('"buffer" argument must be a Buffer instance');if(Dt>hn||Dt<xn)throw new RangeError('"value" argument is out of bounds');if(Kt+gn>It.length)throw new RangeError("Index out of range")}function qt(It,Dt,Kt,gn){Dt<0&&(Dt=65535+Dt+1);for(var hn=0,xn=Math.min(It.length-Kt,2);hn<xn;++hn)It[Kt+hn]=(Dt&255<<8*(gn?hn:1-hn))>>>8*(gn?hn:1-hn)}function Pt(It,Dt,Kt,gn){Dt<0&&(Dt=4294967295+Dt+1);for(var hn=0,xn=Math.min(It.length-Kt,4);hn<xn;++hn)It[Kt+hn]=Dt>>>8*(gn?hn:3-hn)&255}function St(It,Dt,Kt,gn,hn,xn){if(Kt+gn>It.length)throw new RangeError("Index out of range");if(Kt<0)throw new RangeError("Index out of range")}function Zt(It,Dt,Kt,gn,hn){return hn||St(It,0,Kt,4),et.write(It,Dt,Kt,gn,23,4),Kt+4}function tn(It,Dt,Kt,gn,hn){return hn||St(It,0,Kt,8),et.write(It,Dt,Kt,gn,52,8),Kt+8}st.prototype.slice=function(It,Dt){var Kt,gn=this.length;if((It=~~It)<0?(It+=gn)<0&&(It=0):It>gn&&(It=gn),(Dt=Dt===void 0?gn:~~Dt)<0?(Dt+=gn)<0&&(Dt=0):Dt>gn&&(Dt=gn),Dt<It&&(Dt=It),st.TYPED_ARRAY_SUPPORT)(Kt=this.subarray(It,Dt)).__proto__=st.prototype;else{var hn=Dt-It;Kt=new st(hn,void 0);for(var xn=0;xn<hn;++xn)Kt[xn]=this[xn+It]}return Kt},st.prototype.readUIntLE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=this[It],hn=1,xn=0;++xn<Dt&&(hn*=256);)gn+=this[It+xn]*hn;return gn},st.prototype.readUIntBE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=this[It+--Dt],hn=1;Dt>0&&(hn*=256);)gn+=this[It+--Dt]*hn;return gn},st.prototype.readUInt8=function(It,Dt){return Dt||Ut(It,1,this.length),this[It]},st.prototype.readUInt16LE=function(It,Dt){return Dt||Ut(It,2,this.length),this[It]|this[It+1]<<8},st.prototype.readUInt16BE=function(It,Dt){return Dt||Ut(It,2,this.length),this[It]<<8|this[It+1]},st.prototype.readUInt32LE=function(It,Dt){return Dt||Ut(It,4,this.length),(this[It]|this[It+1]<<8|this[It+2]<<16)+16777216*this[It+3]},st.prototype.readUInt32BE=function(It,Dt){return Dt||Ut(It,4,this.length),16777216*this[It]+(this[It+1]<<16|this[It+2]<<8|this[It+3])},st.prototype.readIntLE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=this[It],hn=1,xn=0;++xn<Dt&&(hn*=256);)gn+=this[It+xn]*hn;return gn>=(hn*=128)&&(gn-=Math.pow(2,8*Dt)),gn},st.prototype.readIntBE=function(It,Dt,Kt){It|=0,Dt|=0,Kt||Ut(It,Dt,this.length);for(var gn=Dt,hn=1,xn=this[It+--gn];gn>0&&(hn*=256);)xn+=this[It+--gn]*hn;return xn>=(hn*=128)&&(xn-=Math.pow(2,8*Dt)),xn},st.prototype.readInt8=function(It,Dt){return Dt||Ut(It,1,this.length),128&this[It]?-1*(255-this[It]+1):this[It]},st.prototype.readInt16LE=function(It,Dt){Dt||Ut(It,2,this.length);var Kt=this[It]|this[It+1]<<8;return 32768&Kt?4294901760|Kt:Kt},st.prototype.readInt16BE=function(It,Dt){Dt||Ut(It,2,this.length);var Kt=this[It+1]|this[It]<<8;return 32768&Kt?4294901760|Kt:Kt},st.prototype.readInt32LE=function(It,Dt){return Dt||Ut(It,4,this.length),this[It]|this[It+1]<<8|this[It+2]<<16|this[It+3]<<24},st.prototype.readInt32BE=function(It,Dt){return Dt||Ut(It,4,this.length),this[It]<<24|this[It+1]<<16|this[It+2]<<8|this[It+3]},st.prototype.readFloatLE=function(It,Dt){return Dt||Ut(It,4,this.length),et.read(this,It,!0,23,4)},st.prototype.readFloatBE=function(It,Dt){return Dt||Ut(It,4,this.length),et.read(this,It,!1,23,4)},st.prototype.readDoubleLE=function(It,Dt){return Dt||Ut(It,8,this.length),et.read(this,It,!0,52,8)},st.prototype.readDoubleBE=function(It,Dt){return Dt||Ut(It,8,this.length),et.read(this,It,!1,52,8)},st.prototype.writeUIntLE=function(It,Dt,Kt,gn){It=+It,Dt|=0,Kt|=0,gn||Ht(this,It,Dt,Kt,Math.pow(2,8*Kt)-1,0);var hn=1,xn=0;for(this[Dt]=255&It;++xn<Kt&&(hn*=256);)this[Dt+xn]=It/hn&255;return Dt+Kt},st.prototype.writeUIntBE=function(It,Dt,Kt,gn){It=+It,Dt|=0,Kt|=0,gn||Ht(this,It,Dt,Kt,Math.pow(2,8*Kt)-1,0);var hn=Kt-1,xn=1;for(this[Dt+hn]=255&It;--hn>=0&&(xn*=256);)this[Dt+hn]=It/xn&255;return Dt+Kt},st.prototype.writeUInt8=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,1,255,0),st.TYPED_ARRAY_SUPPORT||(It=Math.floor(It)),this[Dt]=255&It,Dt+1},st.prototype.writeUInt16LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[Dt]=255&It,this[Dt+1]=It>>>8):qt(this,It,Dt,!0),Dt+2},st.prototype.writeUInt16BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,65535,0),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>8,this[Dt+1]=255&It):qt(this,It,Dt,!1),Dt+2},st.prototype.writeUInt32LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[Dt+3]=It>>>24,this[Dt+2]=It>>>16,this[Dt+1]=It>>>8,this[Dt]=255&It):Pt(this,It,Dt,!0),Dt+4},st.prototype.writeUInt32BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,4294967295,0),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>24,this[Dt+1]=It>>>16,this[Dt+2]=It>>>8,this[Dt+3]=255&It):Pt(this,It,Dt,!1),Dt+4},st.prototype.writeIntLE=function(It,Dt,Kt,gn){if(It=+It,Dt|=0,!gn){var hn=Math.pow(2,8*Kt-1);Ht(this,It,Dt,Kt,hn-1,-hn)}var xn=0,Mn=1,qn=0;for(this[Dt]=255&It;++xn<Kt&&(Mn*=256);)It<0&&qn===0&&this[Dt+xn-1]!==0&&(qn=1),this[Dt+xn]=(It/Mn>>0)-qn&255;return Dt+Kt},st.prototype.writeIntBE=function(It,Dt,Kt,gn){if(It=+It,Dt|=0,!gn){var hn=Math.pow(2,8*Kt-1);Ht(this,It,Dt,Kt,hn-1,-hn)}var xn=Kt-1,Mn=1,qn=0;for(this[Dt+xn]=255&It;--xn>=0&&(Mn*=256);)It<0&&qn===0&&this[Dt+xn+1]!==0&&(qn=1),this[Dt+xn]=(It/Mn>>0)-qn&255;return Dt+Kt},st.prototype.writeInt8=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,1,127,-128),st.TYPED_ARRAY_SUPPORT||(It=Math.floor(It)),It<0&&(It=255+It+1),this[Dt]=255&It,Dt+1},st.prototype.writeInt16LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[Dt]=255&It,this[Dt+1]=It>>>8):qt(this,It,Dt,!0),Dt+2},st.prototype.writeInt16BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,2,32767,-32768),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>8,this[Dt+1]=255&It):qt(this,It,Dt,!1),Dt+2},st.prototype.writeInt32LE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,2147483647,-2147483648),st.TYPED_ARRAY_SUPPORT?(this[Dt]=255&It,this[Dt+1]=It>>>8,this[Dt+2]=It>>>16,this[Dt+3]=It>>>24):Pt(this,It,Dt,!0),Dt+4},st.prototype.writeInt32BE=function(It,Dt,Kt){return It=+It,Dt|=0,Kt||Ht(this,It,Dt,4,2147483647,-2147483648),It<0&&(It=4294967295+It+1),st.TYPED_ARRAY_SUPPORT?(this[Dt]=It>>>24,this[Dt+1]=It>>>16,this[Dt+2]=It>>>8,this[Dt+3]=255&It):Pt(this,It,Dt,!1),Dt+4},st.prototype.writeFloatLE=function(It,Dt,Kt){return Zt(this,It,Dt,!0,Kt)},st.prototype.writeFloatBE=function(It,Dt,Kt){return Zt(this,It,Dt,!1,Kt)},st.prototype.writeDoubleLE=function(It,Dt,Kt){return tn(this,It,Dt,!0,Kt)},st.prototype.writeDoubleBE=function(It,Dt,Kt){return tn(this,It,Dt,!1,Kt)},st.prototype.copy=function(It,Dt,Kt,gn){if(Kt||(Kt=0),gn||gn===0||(gn=this.length),Dt>=It.length&&(Dt=It.length),Dt||(Dt=0),gn>0&&gn<Kt&&(gn=Kt),gn===Kt||It.length===0||this.length===0)return 0;if(Dt<0)throw new RangeError("targetStart out of bounds");if(Kt<0||Kt>=this.length)throw new RangeError("sourceStart out of bounds");if(gn<0)throw new RangeError("sourceEnd out of bounds");gn>this.length&&(gn=this.length),It.length-Dt<gn-Kt&&(gn=It.length-Dt+Kt);var hn,xn=gn-Kt;if(this===It&&Kt<Dt&&Dt<gn)for(hn=xn-1;hn>=0;--hn)It[hn+Dt]=this[hn+Kt];else if(xn<1e3||!st.TYPED_ARRAY_SUPPORT)for(hn=0;hn<xn;++hn)It[hn+Dt]=this[hn+Kt];else Uint8Array.prototype.set.call(It,this.subarray(Kt,Kt+xn),Dt);return xn},st.prototype.fill=function(It,Dt,Kt,gn){if(typeof It=="string"){if(typeof Dt=="string"?(gn=Dt,Dt=0,Kt=this.length):typeof Kt=="string"&&(gn=Kt,Kt=this.length),It.length===1){var hn=It.charCodeAt(0);hn<256&&(It=hn)}if(gn!==void 0&&typeof gn!="string")throw new TypeError("encoding must be a string");if(typeof gn=="string"&&!st.isEncoding(gn))throw new TypeError("Unknown encoding: "+gn)}else typeof It=="number"&&(It&=255);if(Dt<0||this.length<Dt||this.length<Kt)throw new RangeError("Out of range index");if(Kt<=Dt)return this;var xn;if(Dt>>>=0,Kt=Kt===void 0?this.length:Kt>>>0,It||(It=0),typeof It=="number")for(xn=Dt;xn<Kt;++xn)this[xn]=It;else{var Mn=st.isBuffer(It)?It:vn(new st(It,gn).toString()),qn=Mn.length;for(xn=0;xn<Kt-Dt;++xn)this[xn+Dt]=Mn[xn%qn]}return this};var mn=/[^+\/0-9A-Za-z-_]/g;function yn(It){return It<16?"0"+It.toString(16):It.toString(16)}function vn(It,Dt){var Kt;Dt=Dt||1/0;for(var gn=It.length,hn=null,xn=[],Mn=0;Mn<gn;++Mn){if((Kt=It.charCodeAt(Mn))>55295&&Kt<57344){if(!hn){if(Kt>56319){(Dt-=3)>-1&&xn.push(239,191,189);continue}if(Mn+1===gn){(Dt-=3)>-1&&xn.push(239,191,189);continue}hn=Kt;continue}if(Kt<56320){(Dt-=3)>-1&&xn.push(239,191,189),hn=Kt;continue}Kt=65536+(hn-55296<<10|Kt-56320)}else hn&&(Dt-=3)>-1&&xn.push(239,191,189);if(hn=null,Kt<128){if((Dt-=1)<0)break;xn.push(Kt)}else if(Kt<2048){if((Dt-=2)<0)break;xn.push(Kt>>6|192,63&Kt|128)}else if(Kt<65536){if((Dt-=3)<0)break;xn.push(Kt>>12|224,Kt>>6&63|128,63&Kt|128)}else{if(!(Kt<1114112))throw new Error("Invalid code point");if((Dt-=4)<0)break;xn.push(Kt>>18|240,Kt>>12&63|128,Kt>>6&63|128,63&Kt|128)}}return xn}function un(It){return $.toByteArray(function(Dt){if((Dt=function(Kt){return Kt.trim?Kt.trim():Kt.replace(/^\s+|\s+$/g,"")}(Dt).replace(mn,"")).length<2)return"";for(;Dt.length%4!=0;)Dt+="=";return Dt}(It))}function rn(It,Dt,Kt,gn){for(var hn=0;hn<gn&&!(hn+Kt>=Dt.length||hn>=It.length);++hn)Dt[hn+Kt]=It[hn];return hn}}).call(this,s(6))},function(i,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}i.exports=s},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){_&&(s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(s,_){if(_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}}},function(i,o,s){s.d(o,"a",function(){return _});const _=$=>new Promise(et=>setTimeout(et,$||0))},function(i,o,s){var _=s(99),$=_,et=Function("return this")(),tt=s(98);$.object.extend(proto,tt),$.exportSymbol("proto.v1.signaling.api.CreatePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.CreatePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.DeletePeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetHealthRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetHealthResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetIceServersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersRequest",null,et),$.exportSymbol("proto.v1.signaling.api.GetPeersResponse",null,et),$.exportSymbol("proto.v1.signaling.api.Peer",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamRequest",null,et),$.exportSymbol("proto.v1.signaling.api.ReceiveSignalStreamResponse",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerRequest",null,et),$.exportSymbol("proto.v1.signaling.api.RefreshPeerResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalRequest",null,et),$.exportSymbol("proto.v1.signaling.api.SendSignalResponse",null,et),$.exportSymbol("proto.v1.signaling.api.SessionType",null,et),$.exportSymbol("proto.v1.signaling.api.Signal",null,et),proto.v1.signaling.api.Peer=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.Peer.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.Peer,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Peer.displayName="proto.v1.signaling.api.Peer"),proto.v1.signaling.api.Signal=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.Signal,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.Signal.displayName="proto.v1.signaling.api.Signal"),proto.v1.signaling.api.GetHealthRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetHealthRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetHealthRequest.displayName="proto.v1.signaling.api.GetHealthRequest"),proto.v1.signaling.api.GetHealthResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetHealthResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetHealthResponse.displayName="proto.v1.signaling.api.GetHealthResponse"),proto.v1.signaling.api.CreatePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerRequest.displayName="proto.v1.signaling.api.CreatePeerRequest"),proto.v1.signaling.api.CreatePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.CreatePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.CreatePeerResponse.displayName="proto.v1.signaling.api.CreatePeerResponse"),proto.v1.signaling.api.DeletePeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerRequest.displayName="proto.v1.signaling.api.DeletePeerRequest"),proto.v1.signaling.api.DeletePeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.DeletePeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.DeletePeerResponse.displayName="proto.v1.signaling.api.DeletePeerResponse"),proto.v1.signaling.api.RefreshPeerRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerRequest.displayName="proto.v1.signaling.api.RefreshPeerRequest"),proto.v1.signaling.api.RefreshPeerResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.RefreshPeerResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.RefreshPeerResponse.displayName="proto.v1.signaling.api.RefreshPeerResponse"),proto.v1.signaling.api.GetPeersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetPeersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersRequest.displayName="proto.v1.signaling.api.GetPeersRequest"),proto.v1.signaling.api.GetPeersResponse=function(j){_.Message.initialize(this,j,0,-1,proto.v1.signaling.api.GetPeersResponse.repeatedFields_,null)},$.inherits(proto.v1.signaling.api.GetPeersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetPeersResponse.displayName="proto.v1.signaling.api.GetPeersResponse"),proto.v1.signaling.api.GetIceServersRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersRequest.displayName="proto.v1.signaling.api.GetIceServersRequest"),proto.v1.signaling.api.GetIceServersResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.GetIceServersResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.GetIceServersResponse.displayName="proto.v1.signaling.api.GetIceServersResponse"),proto.v1.signaling.api.SendSignalRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalRequest.displayName="proto.v1.signaling.api.SendSignalRequest"),proto.v1.signaling.api.SendSignalResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.SendSignalResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.SendSignalResponse.displayName="proto.v1.signaling.api.SendSignalResponse"),proto.v1.signaling.api.ReceiveSignalStreamRequest=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamRequest,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.displayName="proto.v1.signaling.api.ReceiveSignalStreamRequest"),proto.v1.signaling.api.ReceiveSignalStreamResponse=function(j){_.Message.initialize(this,j,0,-1,null,null)},$.inherits(proto.v1.signaling.api.ReceiveSignalStreamResponse,_.Message),$.DEBUG&&!COMPILED&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.displayName="proto.v1.signaling.api.ReceiveSignalStreamResponse"),proto.v1.signaling.api.Peer.repeatedFields_=[5],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Peer.prototype.toObject=function(j){return proto.v1.signaling.api.Peer.toObject(j,this)},proto.v1.signaling.api.Peer.toObject=function(j,it){var st,ht={peerId:_.Message.getFieldWithDefault(it,1,""),organizationId:_.Message.getFieldWithDefault(it,2,""),userId:(st=it.getUserId())&&tt.StringValue.toObject(j,st),deviceId:(st=it.getDeviceId())&&tt.StringValue.toObject(j,st),sessionIdsList:(st=_.Message.getRepeatedField(it,5))==null?void 0:st,peerCreatedTimestamp:(st=it.getPeerCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Peer.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Peer;return proto.v1.signaling.api.Peer.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Peer.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;case 2:st=it.readString(),j.setOrganizationId(st);break;case 3:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setUserId(st);break;case 4:st=new tt.StringValue,it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setDeviceId(st);break;case 5:st=it.readString(),j.addSessionIds(st);break;case 6:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setPeerCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Peer.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Peer.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Peer.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getPeerId()).length>0&&it.writeString(1,st),(st=j.getOrganizationId()).length>0&&it.writeString(2,st),(st=j.getUserId())!=null&&it.writeMessage(3,st,tt.StringValue.serializeBinaryToWriter),(st=j.getDeviceId())!=null&&it.writeMessage(4,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionIdsList()).length>0&&it.writeRepeatedString(5,st),(st=j.getPeerCreatedTimestamp())!=null&&it.writeMessage(6,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.Peer.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.Peer.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},proto.v1.signaling.api.Peer.prototype.getOrganizationId=function(){return _.Message.getFieldWithDefault(this,2,"")},proto.v1.signaling.api.Peer.prototype.setOrganizationId=function(j){return _.Message.setProto3StringField(this,2,j)},proto.v1.signaling.api.Peer.prototype.getUserId=function(){return _.Message.getWrapperField(this,tt.StringValue,3)},proto.v1.signaling.api.Peer.prototype.setUserId=function(j){return _.Message.setWrapperField(this,3,j)},proto.v1.signaling.api.Peer.prototype.clearUserId=function(){return this.setUserId(void 0)},proto.v1.signaling.api.Peer.prototype.hasUserId=function(){return _.Message.getField(this,3)!=null},proto.v1.signaling.api.Peer.prototype.getDeviceId=function(){return _.Message.getWrapperField(this,tt.StringValue,4)},proto.v1.signaling.api.Peer.prototype.setDeviceId=function(j){return _.Message.setWrapperField(this,4,j)},proto.v1.signaling.api.Peer.prototype.clearDeviceId=function(){return this.setDeviceId(void 0)},proto.v1.signaling.api.Peer.prototype.hasDeviceId=function(){return _.Message.getField(this,4)!=null},proto.v1.signaling.api.Peer.prototype.getSessionIdsList=function(){return _.Message.getRepeatedField(this,5)},proto.v1.signaling.api.Peer.prototype.setSessionIdsList=function(j){return _.Message.setField(this,5,j||[])},proto.v1.signaling.api.Peer.prototype.addSessionIds=function(j,it){return _.Message.addToRepeatedField(this,5,j,it)},proto.v1.signaling.api.Peer.prototype.clearSessionIdsList=function(){return this.setSessionIdsList([])},proto.v1.signaling.api.Peer.prototype.getPeerCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,6)},proto.v1.signaling.api.Peer.prototype.setPeerCreatedTimestamp=function(j){return _.Message.setWrapperField(this,6,j)},proto.v1.signaling.api.Peer.prototype.clearPeerCreatedTimestamp=function(){return this.setPeerCreatedTimestamp(void 0)},proto.v1.signaling.api.Peer.prototype.hasPeerCreatedTimestamp=function(){return _.Message.getField(this,6)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.Signal.prototype.toObject=function(j){return proto.v1.signaling.api.Signal.toObject(j,this)},proto.v1.signaling.api.Signal.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st),senderId:_.Message.getFieldWithDefault(it,3,""),receiverId:_.Message.getFieldWithDefault(it,4,""),payload:_.Message.getFieldWithDefault(it,5,""),iceServers:_.Message.getFieldWithDefault(it,6,""),iceTransportPolicy:_.Message.getFieldWithDefault(it,7,""),sessionType:_.Message.getFieldWithDefault(it,8,0)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.Signal.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.Signal;return proto.v1.signaling.api.Signal.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.Signal.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;case 3:st=it.readString(),j.setSenderId(st);break;case 4:st=it.readString(),j.setReceiverId(st);break;case 5:st=it.readString(),j.setPayload(st);break;case 6:st=it.readString(),j.setIceServers(st);break;case 7:st=it.readString(),j.setIceTransportPolicy(st);break;case 8:st=it.readEnum(),j.setSessionType(st);break;default:it.skipField()}return j},proto.v1.signaling.api.Signal.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.Signal.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.Signal.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter),(st=j.getSenderId()).length>0&&it.writeString(3,st),(st=j.getReceiverId()).length>0&&it.writeString(4,st),(st=j.getPayload()).length>0&&it.writeString(5,st),(st=j.getIceServers()).length>0&&it.writeString(6,st),(st=j.getIceTransportPolicy()).length>0&&it.writeString(7,st),(st=j.getSessionType())!==0&&it.writeEnum(8,st)},proto.v1.signaling.api.Signal.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.Signal.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.Signal.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.Signal.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.Signal.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.Signal.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.Signal.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},proto.v1.signaling.api.Signal.prototype.getSenderId=function(){return _.Message.getFieldWithDefault(this,3,"")},proto.v1.signaling.api.Signal.prototype.setSenderId=function(j){return _.Message.setProto3StringField(this,3,j)},proto.v1.signaling.api.Signal.prototype.getReceiverId=function(){return _.Message.getFieldWithDefault(this,4,"")},proto.v1.signaling.api.Signal.prototype.setReceiverId=function(j){return _.Message.setProto3StringField(this,4,j)},proto.v1.signaling.api.Signal.prototype.getPayload=function(){return _.Message.getFieldWithDefault(this,5,"")},proto.v1.signaling.api.Signal.prototype.setPayload=function(j){return _.Message.setProto3StringField(this,5,j)},proto.v1.signaling.api.Signal.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,6,"")},proto.v1.signaling.api.Signal.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,6,j)},proto.v1.signaling.api.Signal.prototype.getIceTransportPolicy=function(){return _.Message.getFieldWithDefault(this,7,"")},proto.v1.signaling.api.Signal.prototype.setIceTransportPolicy=function(j){return _.Message.setProto3StringField(this,7,j)},proto.v1.signaling.api.Signal.prototype.getSessionType=function(){return _.Message.getFieldWithDefault(this,8,0)},proto.v1.signaling.api.Signal.prototype.setSessionType=function(j){return _.Message.setProto3EnumField(this,8,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetHealthRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetHealthRequest.toObject(j,this)},proto.v1.signaling.api.GetHealthRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetHealthRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetHealthRequest;return proto.v1.signaling.api.GetHealthRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetHealthRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetHealthRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetHealthRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetHealthRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetHealthResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetHealthResponse.toObject(j,this)},proto.v1.signaling.api.GetHealthResponse.toObject=function(j,it){var st={version:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetHealthResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetHealthResponse;return proto.v1.signaling.api.GetHealthResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetHealthResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setVersion(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetHealthResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetHealthResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetHealthResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getVersion()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.GetHealthResponse.prototype.getVersion=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.GetHealthResponse.prototype.setVersion=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerRequest.toObject(j,this)},proto.v1.signaling.api.CreatePeerRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.CreatePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerRequest;return proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.CreatePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.CreatePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.CreatePeerResponse.toObject(j,this)},proto.v1.signaling.api.CreatePeerResponse.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.CreatePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.CreatePeerResponse;return proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.CreatePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.CreatePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.CreatePeerResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.CreatePeerResponse.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.CreatePeerResponse.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.CreatePeerResponse.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.CreatePeerResponse.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerRequest.toObject(j,this)},proto.v1.signaling.api.DeletePeerRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerRequest;return proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.DeletePeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.DeletePeerRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.DeletePeerRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.DeletePeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.DeletePeerResponse.toObject(j,this)},proto.v1.signaling.api.DeletePeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.DeletePeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.DeletePeerResponse;return proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.DeletePeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.DeletePeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.DeletePeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerRequest.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerRequest.toObject(j,this)},proto.v1.signaling.api.RefreshPeerRequest.toObject=function(j,it){var st,ht={peer:(st=it.getPeer())&&proto.v1.signaling.api.Peer.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.RefreshPeerRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerRequest;return proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.setPeer(st);break;default:it.skipField()}return j},proto.v1.signaling.api.RefreshPeerRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeer())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.RefreshPeerRequest.prototype.getPeer=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.RefreshPeerRequest.prototype.setPeer=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.RefreshPeerRequest.prototype.clearPeer=function(){return this.setPeer(void 0)},proto.v1.signaling.api.RefreshPeerRequest.prototype.hasPeer=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.RefreshPeerResponse.prototype.toObject=function(j){return proto.v1.signaling.api.RefreshPeerResponse.toObject(j,this)},proto.v1.signaling.api.RefreshPeerResponse.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.RefreshPeerResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.RefreshPeerResponse;return proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.RefreshPeerResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.RefreshPeerResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.RefreshPeerResponse.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersRequest.toObject(j,this)},proto.v1.signaling.api.GetPeersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersRequest;return proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetPeersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersRequest.serializeBinaryToWriter=function(j,it){},proto.v1.signaling.api.GetPeersResponse.repeatedFields_=[1],_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetPeersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetPeersResponse.toObject(j,this)},proto.v1.signaling.api.GetPeersResponse.toObject=function(j,it){var st={peersList:_.Message.toObjectList(it.getPeersList(),proto.v1.signaling.api.Peer.toObject,j)};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetPeersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetPeersResponse;return proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetPeersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Peer;it.readMessage(st,proto.v1.signaling.api.Peer.deserializeBinaryFromReader),j.addPeers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetPeersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetPeersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeersList()).length>0&&it.writeRepeatedMessage(1,st,proto.v1.signaling.api.Peer.serializeBinaryToWriter)},proto.v1.signaling.api.GetPeersResponse.prototype.getPeersList=function(){return _.Message.getRepeatedWrapperField(this,proto.v1.signaling.api.Peer,1)},proto.v1.signaling.api.GetPeersResponse.prototype.setPeersList=function(j){return _.Message.setRepeatedWrapperField(this,1,j)},proto.v1.signaling.api.GetPeersResponse.prototype.addPeers=function(j,it){return _.Message.addToRepeatedWrapperField(this,1,j,proto.v1.signaling.api.Peer,it)},proto.v1.signaling.api.GetPeersResponse.prototype.clearPeersList=function(){return this.setPeersList([])},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersRequest.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersRequest.toObject(j,this)},proto.v1.signaling.api.GetIceServersRequest.toObject=function(j,it){var st={};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersRequest;return proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)it.getFieldNumber(),it.skipField();return j},proto.v1.signaling.api.GetIceServersRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersRequest.serializeBinaryToWriter=function(j,it){},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.GetIceServersResponse.prototype.toObject=function(j){return proto.v1.signaling.api.GetIceServersResponse.toObject(j,this)},proto.v1.signaling.api.GetIceServersResponse.toObject=function(j,it){var st={iceServers:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.GetIceServersResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.GetIceServersResponse;return proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.GetIceServersResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setIceServers(st);break;default:it.skipField()}return j},proto.v1.signaling.api.GetIceServersResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.GetIceServersResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getIceServers()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.GetIceServersResponse.prototype.getIceServers=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.GetIceServersResponse.prototype.setIceServers=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalRequest.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalRequest.toObject(j,this)},proto.v1.signaling.api.SendSignalRequest.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalRequest;return proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalRequest.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.SendSignalRequest.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalRequest.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.SendSignalRequest.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.SendSignalResponse.prototype.toObject=function(j){return proto.v1.signaling.api.SendSignalResponse.toObject(j,this)},proto.v1.signaling.api.SendSignalResponse.toObject=function(j,it){var st,ht={sessionId:(st=it.getSessionId())&&tt.StringValue.toObject(j,st),sessionCreatedTimestamp:(st=it.getSessionCreatedTimestamp())&&tt.Int64Value.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.SendSignalResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.SendSignalResponse;return proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.SendSignalResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new tt.StringValue;it.readMessage(st,tt.StringValue.deserializeBinaryFromReader),j.setSessionId(st);break;case 2:st=new tt.Int64Value,it.readMessage(st,tt.Int64Value.deserializeBinaryFromReader),j.setSessionCreatedTimestamp(st);break;default:it.skipField()}return j},proto.v1.signaling.api.SendSignalResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.SendSignalResponse.serializeBinaryToWriter=function(j,it){var st=void 0;(st=j.getSessionId())!=null&&it.writeMessage(1,st,tt.StringValue.serializeBinaryToWriter),(st=j.getSessionCreatedTimestamp())!=null&&it.writeMessage(2,st,tt.Int64Value.serializeBinaryToWriter)},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionId=function(){return _.Message.getWrapperField(this,tt.StringValue,1)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionId=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionId=function(){return this.setSessionId(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionId=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SendSignalResponse.prototype.getSessionCreatedTimestamp=function(){return _.Message.getWrapperField(this,tt.Int64Value,2)},proto.v1.signaling.api.SendSignalResponse.prototype.setSessionCreatedTimestamp=function(j){return _.Message.setWrapperField(this,2,j)},proto.v1.signaling.api.SendSignalResponse.prototype.clearSessionCreatedTimestamp=function(){return this.setSessionCreatedTimestamp(void 0)},proto.v1.signaling.api.SendSignalResponse.prototype.hasSessionCreatedTimestamp=function(){return _.Message.getField(this,2)!=null},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamRequest.toObject=function(j,it){var st={peerId:_.Message.getFieldWithDefault(it,1,"")};return j&&(st.$jspbMessageInstance=it),st}),proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamRequest;return proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamRequest.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=it.readString();j.setPeerId(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamRequest.serializeBinaryToWriter=function(j,it){var st;(st=j.getPeerId()).length>0&&it.writeString(1,st)},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.getPeerId=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.v1.signaling.api.ReceiveSignalStreamRequest.prototype.setPeerId=function(j){return _.Message.setProto3StringField(this,1,j)},_.Message.GENERATE_TO_OBJECT&&(proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.toObject=function(j){return proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject(j,this)},proto.v1.signaling.api.ReceiveSignalStreamResponse.toObject=function(j,it){var st,ht={signal:(st=it.getSignal())&&proto.v1.signaling.api.Signal.toObject(j,st)};return j&&(ht.$jspbMessageInstance=it),ht}),proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary=function(j){var it=new _.BinaryReader(j),st=new proto.v1.signaling.api.ReceiveSignalStreamResponse;return proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader(st,it)},proto.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinaryFromReader=function(j,it){for(;it.nextField()&&!it.isEndGroup();)switch(it.getFieldNumber()){case 1:var st=new proto.v1.signaling.api.Signal;it.readMessage(st,proto.v1.signaling.api.Signal.deserializeBinaryFromReader),j.setSignal(st);break;default:it.skipField()}return j},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.serializeBinary=function(){var j=new _.BinaryWriter;return proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.v1.signaling.api.ReceiveSignalStreamResponse.serializeBinaryToWriter=function(j,it){var st;(st=j.getSignal())!=null&&it.writeMessage(1,st,proto.v1.signaling.api.Signal.serializeBinaryToWriter)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.getSignal=function(){return _.Message.getWrapperField(this,proto.v1.signaling.api.Signal,1)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.setSignal=function(j){return _.Message.setWrapperField(this,1,j)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.clearSignal=function(){return this.setSignal(void 0)},proto.v1.signaling.api.ReceiveSignalStreamResponse.prototype.hasSignal=function(){return _.Message.getField(this,1)!=null},proto.v1.signaling.api.SessionType={UNKNOWN:0,TELEOP:1,PORT_FORWARD:2,OBSERVE:3},$.object.extend(o,proto.v1.signaling.api)},function(i,o,s){function _($,et,tt=()=>!0){if($ instanceof et&&tt($))return $;throw $}s.d(o,"a",function(){return _})},function(i,o,s){s.d(o,"a",function(){return $});var _=s(34);class $ extends Error{constructor(tt,j,it,st,ht={},_t){super(`Unexpected response (${it}) for ${tt} ${j}: ${JSON.stringify(_t?Object(_.a)([..._t.entries()].reduce((gt,[ft,ut])=>(gt[ft]=ut,gt),{})):{})} -- ${JSON.stringify(Object(_.a)(st))}`),this.method=tt,this.url=j,this.statusCode=it,this.body=st,this.validationErrors=ht,this.headers=_t}}},function(i,o,s){function _(gt){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft})(gt)}function $(gt,ft){return!ft||_(ft)!=="object"&&typeof ft!="function"?et(gt):ft}function et(gt){if(gt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt}function tt(gt){var ft=typeof Map=="function"?new Map:void 0;return(tt=function(ut){if(ut===null||(yt=ut,Function.toString.call(yt).indexOf("[native code]")===-1))return ut;var yt;if(typeof ut!="function")throw new TypeError("Super expression must either be null or a function");if(ft!==void 0){if(ft.has(ut))return ft.get(ut);ft.set(ut,Et)}function Et(){return j(ut,arguments,ht(this).constructor)}return Et.prototype=Object.create(ut.prototype,{constructor:{value:Et,enumerable:!1,writable:!0,configurable:!0}}),st(Et,ut)})(gt)}function j(gt,ft,ut){return(j=it()?Reflect.construct:function(yt,Et,Mt){var Ft=[null];Ft.push.apply(Ft,Et);var Rt=new(Function.bind.apply(yt,Ft));return Mt&&st(Rt,Mt.prototype),Rt}).apply(null,arguments)}function it(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function st(gt,ft){return(st=Object.setPrototypeOf||function(ut,yt){return ut.__proto__=yt,ut})(gt,ft)}function ht(gt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(ft){return ft.__proto__||Object.getPrototypeOf(ft)})(gt)}var _t=function(gt){(function(Mt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Ft&&st(Mt,Ft)})(Et,gt);var ft,ut,yt=(ft=Et,ut=it(),function(){var Mt,Ft=ht(ft);if(ut){var Rt=ht(this).constructor;Mt=Reflect.construct(Ft,arguments,Rt)}else Mt=Ft.apply(this,arguments);return $(this,Mt)});function Et(Mt){var Ft;return function(Rt,Ot){if(!(Rt instanceof Ot))throw new TypeError("Cannot call a class as a function")}(this,Et),Ft=yt.call(this,`Format functions must be synchronous taking a two arguments: (info, opts)
Found: `.concat(Mt.toString().split(`
`)[0],`
`)),Error.captureStackTrace(et(Ft),Et),Ft}return Et}(tt(Error));i.exports=function(gt){if(gt.length>2)throw new _t(gt);function ft(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=yt}function ut(yt){return new ft(yt)}return ft.prototype.transform=gt,ut.Format=ft,ut}},function(i,o,s){(function(_){var $=Object.getOwnPropertyDescriptors||function(Ut){for(var Ht=Object.keys(Ut),qt={},Pt=0;Pt<Ht.length;Pt++)qt[Ht[Pt]]=Object.getOwnPropertyDescriptor(Ut,Ht[Pt]);return qt},et=/%[sdj%]/g;o.format=function(Ut){if(!Ft(Ut)){for(var Ht=[],qt=0;qt<arguments.length;qt++)Ht.push(it(arguments[qt]));return Ht.join(" ")}qt=1;for(var Pt=arguments,St=Pt.length,Zt=String(Ut).replace(et,function(mn){if(mn==="%%")return"%";if(qt>=St)return mn;switch(mn){case"%s":return String(Pt[qt++]);case"%d":return Number(Pt[qt++]);case"%j":try{return JSON.stringify(Pt[qt++])}catch{return"[Circular]"}default:return mn}}),tn=Pt[qt];qt<St;tn=Pt[++qt])Et(tn)||!pt(tn)?Zt+=" "+tn:Zt+=" "+it(tn);return Zt},o.deprecate=function(Ut,Ht){if(_!==void 0&&_.noDeprecation===!0)return Ut;if(_===void 0)return function(){return o.deprecate(Ut,Ht).apply(this,arguments)};var qt=!1;return function(){if(!qt){if(_.throwDeprecation)throw new Error(Ht);_.traceDeprecation?console.trace(Ht):console.error(Ht),qt=!0}return Ut.apply(this,arguments)}};var tt,j={};function it(Ut,Ht){var qt={seen:[],stylize:ht};return arguments.length>=3&&(qt.depth=arguments[2]),arguments.length>=4&&(qt.colors=arguments[3]),yt(Ht)?qt.showHidden=Ht:Ht&&o._extend(qt,Ht),Rt(qt.showHidden)&&(qt.showHidden=!1),Rt(qt.depth)&&(qt.depth=2),Rt(qt.colors)&&(qt.colors=!1),Rt(qt.customInspect)&&(qt.customInspect=!0),qt.colors&&(qt.stylize=st),_t(qt,Ut,qt.depth)}function st(Ut,Ht){var qt=it.styles[Ht];return qt?"\x1B["+it.colors[qt][0]+"m"+Ut+"\x1B["+it.colors[qt][1]+"m":Ut}function ht(Ut,Ht){return Ut}function _t(Ut,Ht,qt){if(Ut.customInspect&&Ht&&on(Ht.inspect)&&Ht.inspect!==o.inspect&&(!Ht.constructor||Ht.constructor.prototype!==Ht)){var Pt=Ht.inspect(qt,Ut);return Ft(Pt)||(Pt=_t(Ut,Pt,qt)),Pt}var St=function(It,Dt){if(Rt(Dt))return It.stylize("undefined","undefined");if(Ft(Dt)){var Kt="'"+JSON.stringify(Dt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return It.stylize(Kt,"string")}if(Mt(Dt))return It.stylize(""+Dt,"number");if(yt(Dt))return It.stylize(""+Dt,"boolean");if(Et(Dt))return It.stylize("null","null")}(Ut,Ht);if(St)return St;var Zt=Object.keys(Ht),tn=function(It){var Dt={};return It.forEach(function(Kt,gn){Dt[Kt]=!0}),Dt}(Zt);if(Ut.showHidden&&(Zt=Object.getOwnPropertyNames(Ht)),nn(Ht)&&(Zt.indexOf("message")>=0||Zt.indexOf("description")>=0))return gt(Ht);if(Zt.length===0){if(on(Ht)){var mn=Ht.name?": "+Ht.name:"";return Ut.stylize("[Function"+mn+"]","special")}if(Ot(Ht))return Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp");if(Lt(Ht))return Ut.stylize(Date.prototype.toString.call(Ht),"date");if(nn(Ht))return gt(Ht)}var yn,vn="",un=!1,rn=["{","}"];return ut(Ht)&&(un=!0,rn=["[","]"]),on(Ht)&&(vn=" [Function"+(Ht.name?": "+Ht.name:"")+"]"),Ot(Ht)&&(vn=" "+RegExp.prototype.toString.call(Ht)),Lt(Ht)&&(vn=" "+Date.prototype.toUTCString.call(Ht)),nn(Ht)&&(vn=" "+gt(Ht)),Zt.length!==0||un&&Ht.length!=0?qt<0?Ot(Ht)?Ut.stylize(RegExp.prototype.toString.call(Ht),"regexp"):Ut.stylize("[Object]","special"):(Ut.seen.push(Ht),yn=un?function(It,Dt,Kt,gn,hn){for(var xn=[],Mn=0,qn=Dt.length;Mn<qn;++Mn)Vt(Dt,String(Mn))?xn.push(ft(It,Dt,Kt,gn,String(Mn),!0)):xn.push("");return hn.forEach(function(Ir){Ir.match(/^\d+$/)||xn.push(ft(It,Dt,Kt,gn,Ir,!0))}),xn}(Ut,Ht,qt,tn,Zt):Zt.map(function(It){return ft(Ut,Ht,qt,tn,It,un)}),Ut.seen.pop(),function(It,Dt,Kt){return It.reduce(function(gn,hn){return hn.indexOf(`
`)>=0,gn+hn.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Kt[0]+(Dt===""?"":Dt+`
 `)+" "+It.join(`,
  `)+" "+Kt[1]:Kt[0]+Dt+" "+It.join(", ")+" "+Kt[1]}(yn,vn,rn)):rn[0]+vn+rn[1]}function gt(Ut){return"["+Error.prototype.toString.call(Ut)+"]"}function ft(Ut,Ht,qt,Pt,St,Zt){var tn,mn,yn;if((yn=Object.getOwnPropertyDescriptor(Ht,St)||{value:Ht[St]}).get?mn=yn.set?Ut.stylize("[Getter/Setter]","special"):Ut.stylize("[Getter]","special"):yn.set&&(mn=Ut.stylize("[Setter]","special")),Vt(Pt,St)||(tn="["+St+"]"),mn||(Ut.seen.indexOf(yn.value)<0?(mn=Et(qt)?_t(Ut,yn.value,null):_t(Ut,yn.value,qt-1)).indexOf(`
`)>-1&&(mn=Zt?mn.split(`
`).map(function(vn){return"  "+vn}).join(`
`).substr(2):`
`+mn.split(`
`).map(function(vn){return"   "+vn}).join(`
`)):mn=Ut.stylize("[Circular]","special")),Rt(tn)){if(Zt&&St.match(/^\d+$/))return mn;(tn=JSON.stringify(""+St)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(tn=tn.substr(1,tn.length-2),tn=Ut.stylize(tn,"name")):(tn=tn.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),tn=Ut.stylize(tn,"string"))}return tn+": "+mn}function ut(Ut){return Array.isArray(Ut)}function yt(Ut){return typeof Ut=="boolean"}function Et(Ut){return Ut===null}function Mt(Ut){return typeof Ut=="number"}function Ft(Ut){return typeof Ut=="string"}function Rt(Ut){return Ut===void 0}function Ot(Ut){return pt(Ut)&&wt(Ut)==="[object RegExp]"}function pt(Ut){return typeof Ut=="object"&&Ut!==null}function Lt(Ut){return pt(Ut)&&wt(Ut)==="[object Date]"}function nn(Ut){return pt(Ut)&&(wt(Ut)==="[object Error]"||Ut instanceof Error)}function on(Ut){return typeof Ut=="function"}function wt(Ut){return Object.prototype.toString.call(Ut)}function xt(Ut){return Ut<10?"0"+Ut.toString(10):Ut.toString(10)}o.debuglog=function(Ut){if(Rt(tt)&&(tt=_.env.NODE_DEBUG||""),Ut=Ut.toUpperCase(),!j[Ut])if(new RegExp("\\b"+Ut+"\\b","i").test(tt)){var Ht=_.pid;j[Ut]=function(){var qt=o.format.apply(o,arguments);console.error("%s %d: %s",Ut,Ht,qt)}}else j[Ut]=function(){};return j[Ut]},o.inspect=it,it.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},it.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=ut,o.isBoolean=yt,o.isNull=Et,o.isNullOrUndefined=function(Ut){return Ut==null},o.isNumber=Mt,o.isString=Ft,o.isSymbol=function(Ut){return typeof Ut=="symbol"},o.isUndefined=Rt,o.isRegExp=Ot,o.isObject=pt,o.isDate=Lt,o.isError=nn,o.isFunction=on,o.isPrimitive=function(Ut){return Ut===null||typeof Ut=="boolean"||typeof Ut=="number"||typeof Ut=="string"||typeof Ut=="symbol"||Ut===void 0},o.isBuffer=s(107);var Nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Tt(){var Ut=new Date,Ht=[xt(Ut.getHours()),xt(Ut.getMinutes()),xt(Ut.getSeconds())].join(":");return[Ut.getDate(),Nt[Ut.getMonth()],Ht].join(" ")}function Vt(Ut,Ht){return Object.prototype.hasOwnProperty.call(Ut,Ht)}o.log=function(){console.log("%s - %s",Tt(),o.format.apply(o,arguments))},o.inherits=s(108),o._extend=function(Ut,Ht){if(!Ht||!pt(Ht))return Ut;for(var qt=Object.keys(Ht),Pt=qt.length;Pt--;)Ut[qt[Pt]]=Ht[qt[Pt]];return Ut};var Xt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Gt(Ut,Ht){if(!Ut){var qt=new Error("Promise was rejected with a falsy value");qt.reason=Ut,Ut=qt}return Ht(Ut)}o.promisify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');if(Xt&&Ut[Xt]){var Ht;if(typeof(Ht=Ut[Xt])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ht,Xt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Ht}function Ht(){for(var qt,Pt,St=new Promise(function(mn,yn){qt=mn,Pt=yn}),Zt=[],tn=0;tn<arguments.length;tn++)Zt.push(arguments[tn]);Zt.push(function(mn,yn){mn?Pt(mn):qt(yn)});try{Ut.apply(this,Zt)}catch(mn){Pt(mn)}return St}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Xt&&Object.defineProperty(Ht,Xt,{value:Ht,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ht,$(Ut))},o.promisify.custom=Xt,o.callbackify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');function Ht(){for(var qt=[],Pt=0;Pt<arguments.length;Pt++)qt.push(arguments[Pt]);var St=qt.pop();if(typeof St!="function")throw new TypeError("The last argument must be of type Function");var Zt=this,tn=function(){return St.apply(Zt,arguments)};Ut.apply(this,qt).then(function(mn){_.nextTick(tn,null,mn)},function(mn){_.nextTick(Gt,mn,tn)})}return Object.setPrototypeOf(Ht,Object.getPrototypeOf(Ut)),Object.defineProperties(Ht,$(Ut)),Ht}}).call(this,s(2))},function(i,o,s){i.exports=function(_,$){$||($={}),typeof $=="function"&&($={cmp:$});var et,tt=typeof $.cycles=="boolean"&&$.cycles,j=$.cmp&&(et=$.cmp,function(st){return function(ht,_t){var gt={key:ht,value:st[ht]},ft={key:_t,value:st[_t]};return et(gt,ft)}}),it=[];return function st(ht){if(ht&&ht.toJSON&&typeof ht.toJSON=="function"&&(ht=ht.toJSON()),ht!==void 0){if(typeof ht=="number")return isFinite(ht)?""+ht:"null";if(typeof ht!="object")return JSON.stringify(ht);var _t,gt;if(Array.isArray(ht)){for(gt="[",_t=0;_t<ht.length;_t++)_t&&(gt+=","),gt+=st(ht[_t])||"null";return gt+"]"}if(ht===null)return"null";if(it.indexOf(ht)!==-1){if(tt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var ft=it.push(ht)-1,ut=Object.keys(ht).sort(j&&j(ht));for(gt="",_t=0;_t<ut.length;_t++){var yt=ut[_t],Et=st(ht[yt]);Et&&(gt&&(gt+=","),gt+=JSON.stringify(yt)+":"+Et)}return it.splice(ft,1),"{"+gt+"}"}}(_)}},function(i,o,s){(function(_){var $=_!==void 0&&_||typeof self<"u"&&self||window,et=Function.prototype.apply;function tt(j,it){this._id=j,this._clearFn=it}o.setTimeout=function(){return new tt(et.call(setTimeout,$,arguments),clearTimeout)},o.setInterval=function(){return new tt(et.call(setInterval,$,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(j){j&&j.close()},tt.prototype.unref=tt.prototype.ref=function(){},tt.prototype.close=function(){this._clearFn.call($,this._id)},o.enroll=function(j,it){clearTimeout(j._idleTimeoutId),j._idleTimeout=it},o.unenroll=function(j){clearTimeout(j._idleTimeoutId),j._idleTimeout=-1},o._unrefActive=o.active=function(j){clearTimeout(j._idleTimeoutId);var it=j._idleTimeout;it>=0&&(j._idleTimeoutId=setTimeout(function(){j._onTimeout&&j._onTimeout()},it))},s(141),o.setImmediate=typeof self<"u"&&self.setImmediate||_!==void 0&&_.setImmediate||this&&this.setImmediate,o.clearImmediate=typeof self<"u"&&self.clearImmediate||_!==void 0&&_.clearImmediate||this&&this.clearImmediate}).call(this,s(6))},function(i,o,s){(function(_){_===void 0||!_.version||_.version.indexOf("v0.")===0||_.version.indexOf("v1.")===0&&_.version.indexOf("v1.8.")!==0?i.exports={nextTick:function($,et,tt,j){if(typeof $!="function")throw new TypeError('"callback" argument must be a function');var it,st,ht=arguments.length;switch(ht){case 0:case 1:return _.nextTick($);case 2:return _.nextTick(function(){$.call(null,et)});case 3:return _.nextTick(function(){$.call(null,et,tt)});case 4:return _.nextTick(function(){$.call(null,et,tt,j)});default:for(it=new Array(ht-1),st=0;st<it.length;)it[st++]=arguments[st];return _.nextTick(function(){$.apply(null,it)})}}}:i.exports=_}).call(this,s(2))},function(i,o,s){(function(_){function $(et){return Object.prototype.toString.call(et)}o.isArray=function(et){return Array.isArray?Array.isArray(et):$(et)==="[object Array]"},o.isBoolean=function(et){return typeof et=="boolean"},o.isNull=function(et){return et===null},o.isNullOrUndefined=function(et){return et==null},o.isNumber=function(et){return typeof et=="number"},o.isString=function(et){return typeof et=="string"},o.isSymbol=function(et){return typeof et=="symbol"},o.isUndefined=function(et){return et===void 0},o.isRegExp=function(et){return $(et)==="[object RegExp]"},o.isObject=function(et){return typeof et=="object"&&et!==null},o.isDate=function(et){return $(et)==="[object Date]"},o.isError=function(et){return $(et)==="[object Error]"||et instanceof Error},o.isFunction=function(et){return typeof et=="function"},o.isPrimitive=function(et){return et===null||typeof et=="boolean"||typeof et=="number"||typeof et=="string"||typeof et=="symbol"||et===void 0},o.isBuffer=_.isBuffer}).call(this,s(5).Buffer)},function(i,o){o.endianness=function(){return"LE"},o.hostname=function(){return typeof location<"u"?location.hostname:""},o.loadavg=function(){return[]},o.uptime=function(){return 0},o.freemem=function(){return Number.MAX_VALUE},o.totalmem=function(){return Number.MAX_VALUE},o.cpus=function(){return[]},o.type=function(){return"Browser"},o.release=function(){return typeof navigator<"u"?navigator.appVersion:""},o.networkInterfaces=o.getNetworkInterfaces=function(){return{}},o.arch=function(){return"javascript"},o.platform=function(){return"browser"},o.tmpdir=o.tmpDir=function(){return"/tmp"},o.EOL=`
`,o.homedir=function(){return"/"}},function(i,o,s){var _=s(58),$=s(61).warn,et=o;et.version=s(138).version,et.transports=s(139),et.config=s(50),et.addColors=_.levels,et.format=_.format,et.createLogger=s(88),et.ExceptionHandler=s(89),et.RejectionHandler=s(93),et.Container=s(210),et.Transport=s(20),et.loggers=new et.Container;var tt=et.createLogger();Object.keys(et.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(function(j){return et[j]=function(){return tt[j].apply(tt,arguments)}}),Object.defineProperty(et,"level",{get:function(){return tt.level},set:function(j){tt.level=j}}),Object.defineProperty(et,"exceptions",{get:function(){return tt.exceptions}}),["exitOnError"].forEach(function(j){Object.defineProperty(et,j,{get:function(){return tt[j]},set:function(it){tt[j]=it}})}),Object.defineProperty(et,"default",{get:function(){return{exceptionHandlers:tt.exceptionHandlers,rejectionHandlers:tt.rejectionHandlers,transports:tt.transports}}}),$.deprecated(et,"setLevels"),$.forFunctions(et,"useFormat",["cli"]),$.forProperties(et,"useFormat",["padLevels","stripColors"]),$.forFunctions(et,"deprecated",["addRewriter","addFilter","clone","extend"]),$.forProperties(et,"deprecated",["emitErrs","levelLength"]),$.moved(et,"createLogger","Logger")},function(i,o,s){var _=s(13),$=s(142),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.handleRejections=it.handleRejections,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(st(),_t)throw _t;return}return this.log(gt,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(j[ht].callback(),_t)throw it(null),_t}else this.log(gt,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){},i.exports.LegacyTransportStream=s(148)},function(i,o,s){var _,$=typeof Reflect=="object"?Reflect:null,et=$&&typeof $.apply=="function"?$.apply:function(Et,Mt,Ft){return Function.prototype.apply.call(Et,Mt,Ft)};_=$&&typeof $.ownKeys=="function"?$.ownKeys:Object.getOwnPropertySymbols?function(Et){return Object.getOwnPropertyNames(Et).concat(Object.getOwnPropertySymbols(Et))}:function(Et){return Object.getOwnPropertyNames(Et)};var tt=Number.isNaN||function(Et){return Et!=Et};function j(){j.init.call(this)}i.exports=j,j.EventEmitter=j,j.prototype._events=void 0,j.prototype._eventsCount=0,j.prototype._maxListeners=void 0;var it=10;function st(Et){return Et._maxListeners===void 0?j.defaultMaxListeners:Et._maxListeners}function ht(Et,Mt,Ft,Rt){var Ot,pt,Lt,nn;if(typeof Ft!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ft);if((pt=Et._events)===void 0?(pt=Et._events=Object.create(null),Et._eventsCount=0):(pt.newListener!==void 0&&(Et.emit("newListener",Mt,Ft.listener?Ft.listener:Ft),pt=Et._events),Lt=pt[Mt]),Lt===void 0)Lt=pt[Mt]=Ft,++Et._eventsCount;else if(typeof Lt=="function"?Lt=pt[Mt]=Rt?[Ft,Lt]:[Lt,Ft]:Rt?Lt.unshift(Ft):Lt.push(Ft),(Ot=st(Et))>0&&Lt.length>Ot&&!Lt.warned){Lt.warned=!0;var on=new Error("Possible EventEmitter memory leak detected. "+Lt.length+" "+String(Mt)+" listeners added. Use emitter.setMaxListeners() to increase limit");on.name="MaxListenersExceededWarning",on.emitter=Et,on.type=Mt,on.count=Lt.length,nn=on,console&&console.warn&&console.warn(nn)}return Et}function _t(){for(var Et=[],Mt=0;Mt<arguments.length;Mt++)Et.push(arguments[Mt]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,et(this.listener,this.target,Et))}function gt(Et,Mt,Ft){var Rt={fired:!1,wrapFn:void 0,target:Et,type:Mt,listener:Ft},Ot=_t.bind(Rt);return Ot.listener=Ft,Rt.wrapFn=Ot,Ot}function ft(Et,Mt,Ft){var Rt=Et._events;if(Rt===void 0)return[];var Ot=Rt[Mt];return Ot===void 0?[]:typeof Ot=="function"?Ft?[Ot.listener||Ot]:[Ot]:Ft?function(pt){for(var Lt=new Array(pt.length),nn=0;nn<Lt.length;++nn)Lt[nn]=pt[nn].listener||pt[nn];return Lt}(Ot):yt(Ot,Ot.length)}function ut(Et){var Mt=this._events;if(Mt!==void 0){var Ft=Mt[Et];if(typeof Ft=="function")return 1;if(Ft!==void 0)return Ft.length}return 0}function yt(Et,Mt){for(var Ft=new Array(Mt),Rt=0;Rt<Mt;++Rt)Ft[Rt]=Et[Rt];return Ft}Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return it},set:function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Et+".");it=Et}}),j.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},j.prototype.setMaxListeners=function(Et){if(typeof Et!="number"||Et<0||tt(Et))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Et+".");return this._maxListeners=Et,this},j.prototype.getMaxListeners=function(){return st(this)},j.prototype.emit=function(Et){for(var Mt=[],Ft=1;Ft<arguments.length;Ft++)Mt.push(arguments[Ft]);var Rt=Et==="error",Ot=this._events;if(Ot!==void 0)Rt=Rt&&Ot.error===void 0;else if(!Rt)return!1;if(Rt){var pt;if(Mt.length>0&&(pt=Mt[0]),pt instanceof Error)throw pt;var Lt=new Error("Unhandled error."+(pt?" ("+pt.message+")":""));throw Lt.context=pt,Lt}var nn=Ot[Et];if(nn===void 0)return!1;if(typeof nn=="function")et(nn,this,Mt);else{var on=nn.length,wt=yt(nn,on);for(Ft=0;Ft<on;++Ft)et(wt[Ft],this,Mt)}return!0},j.prototype.addListener=function(Et,Mt){return ht(this,Et,Mt,!1)},j.prototype.on=j.prototype.addListener,j.prototype.prependListener=function(Et,Mt){return ht(this,Et,Mt,!0)},j.prototype.once=function(Et,Mt){if(typeof Mt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Mt);return this.on(Et,gt(this,Et,Mt)),this},j.prototype.prependOnceListener=function(Et,Mt){if(typeof Mt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Mt);return this.prependListener(Et,gt(this,Et,Mt)),this},j.prototype.removeListener=function(Et,Mt){var Ft,Rt,Ot,pt,Lt;if(typeof Mt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Mt);if((Rt=this._events)===void 0)return this;if((Ft=Rt[Et])===void 0)return this;if(Ft===Mt||Ft.listener===Mt)--this._eventsCount==0?this._events=Object.create(null):(delete Rt[Et],Rt.removeListener&&this.emit("removeListener",Et,Ft.listener||Mt));else if(typeof Ft!="function"){for(Ot=-1,pt=Ft.length-1;pt>=0;pt--)if(Ft[pt]===Mt||Ft[pt].listener===Mt){Lt=Ft[pt].listener,Ot=pt;break}if(Ot<0)return this;Ot===0?Ft.shift():function(nn,on){for(;on+1<nn.length;on++)nn[on]=nn[on+1];nn.pop()}(Ft,Ot),Ft.length===1&&(Rt[Et]=Ft[0]),Rt.removeListener!==void 0&&this.emit("removeListener",Et,Lt||Mt)}return this},j.prototype.off=j.prototype.removeListener,j.prototype.removeAllListeners=function(Et){var Mt,Ft,Rt;if((Ft=this._events)===void 0)return this;if(Ft.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Ft[Et]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Ft[Et]),this;if(arguments.length===0){var Ot,pt=Object.keys(Ft);for(Rt=0;Rt<pt.length;++Rt)(Ot=pt[Rt])!=="removeListener"&&this.removeAllListeners(Ot);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Mt=Ft[Et])=="function")this.removeListener(Et,Mt);else if(Mt!==void 0)for(Rt=Mt.length-1;Rt>=0;Rt--)this.removeListener(Et,Mt[Rt]);return this},j.prototype.listeners=function(Et){return ft(this,Et,!0)},j.prototype.rawListeners=function(Et){return ft(this,Et,!1)},j.listenerCount=function(Et,Mt){return typeof Et.listenerCount=="function"?Et.listenerCount(Mt):ut.call(Et,Mt)},j.prototype.listenerCount=ut,j.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]}},function(i,o,s){var _=s(147).Buffer,$=_.isEncoding||function(ut){switch((ut=""+ut)&&ut.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function et(ut){var yt;switch(this.encoding=function(Et){var Mt=function(Ft){if(!Ft)return"utf8";for(var Rt;;)switch(Ft){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Ft;default:if(Rt)return;Ft=(""+Ft).toLowerCase(),Rt=!0}}(Et);if(typeof Mt!="string"&&(_.isEncoding===$||!$(Et)))throw new Error("Unknown encoding: "+Et);return Mt||Et}(ut),this.encoding){case"utf16le":this.text=it,this.end=st,yt=4;break;case"utf8":this.fillLast=j,yt=4;break;case"base64":this.text=ht,this.end=_t,yt=3;break;default:return this.write=gt,void(this.end=ft)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(yt)}function tt(ut){return ut<=127?0:ut>>5==6?2:ut>>4==14?3:ut>>3==30?4:ut>>6==2?-1:-2}function j(ut){var yt=this.lastTotal-this.lastNeed,Et=function(Mt,Ft,Rt){if((192&Ft[0])!=128)return Mt.lastNeed=0,"�";if(Mt.lastNeed>1&&Ft.length>1){if((192&Ft[1])!=128)return Mt.lastNeed=1,"�";if(Mt.lastNeed>2&&Ft.length>2&&(192&Ft[2])!=128)return Mt.lastNeed=2,"�"}}(this,ut);return Et!==void 0?Et:this.lastNeed<=ut.length?(ut.copy(this.lastChar,yt,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ut.copy(this.lastChar,yt,0,ut.length),void(this.lastNeed-=ut.length))}function it(ut,yt){if((ut.length-yt)%2==0){var Et=ut.toString("utf16le",yt);if(Et){var Mt=Et.charCodeAt(Et.length-1);if(Mt>=55296&&Mt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ut[ut.length-2],this.lastChar[1]=ut[ut.length-1],Et.slice(0,-1)}return Et}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ut[ut.length-1],ut.toString("utf16le",yt,ut.length-1)}function st(ut){var yt=ut&&ut.length?this.write(ut):"";if(this.lastNeed){var Et=this.lastTotal-this.lastNeed;return yt+this.lastChar.toString("utf16le",0,Et)}return yt}function ht(ut,yt){var Et=(ut.length-yt)%3;return Et===0?ut.toString("base64",yt):(this.lastNeed=3-Et,this.lastTotal=3,Et===1?this.lastChar[0]=ut[ut.length-1]:(this.lastChar[0]=ut[ut.length-2],this.lastChar[1]=ut[ut.length-1]),ut.toString("base64",yt,ut.length-Et))}function _t(ut){var yt=ut&&ut.length?this.write(ut):"";return this.lastNeed?yt+this.lastChar.toString("base64",0,3-this.lastNeed):yt}function gt(ut){return ut.toString(this.encoding)}function ft(ut){return ut&&ut.length?this.write(ut):""}o.StringDecoder=et,et.prototype.write=function(ut){if(ut.length===0)return"";var yt,Et;if(this.lastNeed){if((yt=this.fillLast(ut))===void 0)return"";Et=this.lastNeed,this.lastNeed=0}else Et=0;return Et<ut.length?yt?yt+this.text(ut,Et):this.text(ut,Et):yt||""},et.prototype.end=function(ut){var yt=ut&&ut.length?this.write(ut):"";return this.lastNeed?yt+"�":yt},et.prototype.text=function(ut,yt){var Et=function(Ft,Rt,Ot){var pt=Rt.length-1;if(pt<Ot)return 0;var Lt=tt(Rt[pt]);return Lt>=0?(Lt>0&&(Ft.lastNeed=Lt-1),Lt):--pt<Ot||Lt===-2?0:(Lt=tt(Rt[pt]))>=0?(Lt>0&&(Ft.lastNeed=Lt-2),Lt):--pt<Ot||Lt===-2?0:(Lt=tt(Rt[pt]))>=0?(Lt>0&&(Lt===2?Lt=0:Ft.lastNeed=Lt-3),Lt):0}(this,ut,yt);if(!this.lastNeed)return ut.toString("utf8",yt);this.lastTotal=Et;var Mt=ut.length-(Et-this.lastNeed);return ut.copy(this.lastChar,0,Mt),ut.toString("utf8",yt,Mt)},et.prototype.fillLast=function(ut){if(this.lastNeed<=ut.length)return ut.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ut.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ut.length),this.lastNeed-=ut.length}},function(i,o,s){var _=s(16),$=Object.keys||function(ut){var yt=[];for(var Et in ut)yt.push(Et);return yt};i.exports=_t;var et=s(17);et.inherits=s(7);var tt=s(69),j=s(48);et.inherits(_t,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];_t.prototype[ht]||(_t.prototype[ht]=j.prototype[ht])}function _t(ut){if(!(this instanceof _t))return new _t(ut);tt.call(this,ut),j.call(this,ut),ut&&ut.readable===!1&&(this.readable=!1),ut&&ut.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ut&&ut.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",gt)}function gt(){this.allowHalfOpen||this._writableState.ended||_.nextTick(ft,this)}function ft(ut){ut.end()}Object.defineProperty(_t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_t.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ut){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ut,this._writableState.destroyed=ut)}}),_t.prototype._destroy=function(ut,yt){this.push(null),this.end(),_.nextTick(yt,ut)}},function(i,o,s){(function(_){function $(zt){var ln=0;return function(){return ln<zt.length?{done:!1,value:zt[ln++]}:{done:!0}}}var et=typeof Object.defineProperties=="function"?Object.defineProperty:function(zt,ln,wn){zt!=Array.prototype&&zt!=Object.prototype&&(zt[ln]=wn.value)},tt=function(zt){zt=[typeof window=="object"&&window,typeof self=="object"&&self,typeof _=="object"&&_,zt];for(var ln=0;ln<zt.length;++ln){var wn=zt[ln];if(wn&&wn.Math==Math)return wn}throw Error("Cannot find global object")}(this);function j(zt,ln){if(ln){var wn=tt;zt=zt.split(".");for(var Pn=0;Pn<zt.length-1;Pn++){var zn=zt[Pn];zn in wn||(wn[zn]={}),wn=wn[zn]}(ln=ln(Pn=wn[zt=zt[zt.length-1]]))!=Pn&&ln!=null&&et(wn,zt,{configurable:!0,writable:!0,value:ln})}}function it(zt){var ln=typeof Symbol<"u"&&Symbol.iterator&&zt[Symbol.iterator];return ln?ln.call(zt):{next:$(zt)}}j("Object.is",function(zt){return zt||function(ln,wn){return ln===wn?ln!==0||1/ln==1/wn:ln!=ln&&wn!=wn}}),j("Array.prototype.includes",function(zt){return zt||function(ln,wn){var Pn=this;Pn instanceof String&&(Pn=String(Pn));var zn=Pn.length;for(0>(wn=wn||0)&&(wn=Math.max(wn+zn,0));wn<zn;wn++){var sr=Pn[wn];if(sr===ln||Object.is(sr,ln))return!0}return!1}}),j("Promise",function(zt){function ln(jn){this.b=0,this.c=void 0,this.a=[];var Jn=this.f();try{jn(Jn.resolve,Jn.reject)}catch(Tr){Jn.reject(Tr)}}function wn(){this.a=null}function Pn(jn){return jn instanceof ln?jn:new ln(function(Jn){Jn(jn)})}if(zt)return zt;wn.prototype.b=function(jn){if(this.a==null){this.a=[];var Jn=this;this.c(function(){Jn.g()})}this.a.push(jn)};var zn=tt.setTimeout;wn.prototype.c=function(jn){zn(jn,0)},wn.prototype.g=function(){for(;this.a&&this.a.length;){var jn=this.a;this.a=[];for(var Jn=0;Jn<jn.length;++Jn){var Tr=jn[Jn];jn[Jn]=null;try{Tr()}catch(Cr){this.f(Cr)}}}this.a=null},wn.prototype.f=function(jn){this.c(function(){throw jn})},ln.prototype.f=function(){function jn(Cr){return function(Vr){Tr||(Tr=!0,Cr.call(Jn,Vr))}}var Jn=this,Tr=!1;return{resolve:jn(this.m),reject:jn(this.g)}},ln.prototype.m=function(jn){if(jn===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(jn instanceof ln)this.o(jn);else{e:switch(typeof jn){case"object":var Jn=jn!=null;break e;case"function":Jn=!0;break e;default:Jn=!1}Jn?this.l(jn):this.h(jn)}},ln.prototype.l=function(jn){var Jn=void 0;try{Jn=jn.then}catch(Tr){return void this.g(Tr)}typeof Jn=="function"?this.u(Jn,jn):this.h(jn)},ln.prototype.g=function(jn){this.i(2,jn)},ln.prototype.h=function(jn){this.i(1,jn)},ln.prototype.i=function(jn,Jn){if(this.b!=0)throw Error("Cannot settle("+jn+", "+Jn+"): Promise already settled in state"+this.b);this.b=jn,this.c=Jn,this.j()},ln.prototype.j=function(){if(this.a!=null){for(var jn=0;jn<this.a.length;++jn)sr.b(this.a[jn]);this.a=null}};var sr=new wn;return ln.prototype.o=function(jn){var Jn=this.f();jn.w(Jn.resolve,Jn.reject)},ln.prototype.u=function(jn,Jn){var Tr=this.f();try{jn.call(Jn,Tr.resolve,Tr.reject)}catch(Cr){Tr.reject(Cr)}},ln.prototype.then=function(jn,Jn){function Tr(go,To){return typeof go=="function"?function($o){try{Cr(go($o))}catch(Xo){Vr(Xo)}}:To}var Cr,Vr,ko=new ln(function(go,To){Cr=go,Vr=To});return this.w(Tr(jn,Cr),Tr(Jn,Vr)),ko},ln.prototype.catch=function(jn){return this.then(void 0,jn)},ln.prototype.w=function(jn,Jn){function Tr(){switch(Cr.b){case 1:jn(Cr.c);break;case 2:Jn(Cr.c);break;default:throw Error("Unexpected state: "+Cr.b)}}var Cr=this;this.a==null?sr.b(Tr):this.a.push(Tr)},ln.resolve=Pn,ln.reject=function(jn){return new ln(function(Jn,Tr){Tr(jn)})},ln.race=function(jn){return new ln(function(Jn,Tr){for(var Cr=it(jn),Vr=Cr.next();!Vr.done;Vr=Cr.next())Pn(Vr.value).w(Jn,Tr)})},ln.all=function(jn){var Jn=it(jn),Tr=Jn.next();return Tr.done?Pn([]):new ln(function(Cr,Vr){function ko($o){return function(Xo){go[$o]=Xo,--To==0&&Cr(go)}}var go=[],To=0;do go.push(void 0),To++,Pn(Tr.value).w(ko(go.length-1),Vr),Tr=Jn.next();while(!Tr.done)})},ln});var st=st||{},ht=this||self;function _t(zt,ln){zt=zt.split("."),ln=ln||ht;for(var wn=0;wn<zt.length;wn++)if((ln=ln[zt[wn]])==null)return null;return ln}function gt(){}function ft(zt){var ln=typeof zt;if(ln=="object"){if(!zt)return"null";if(zt instanceof Array)return"array";if(zt instanceof Object)return ln;var wn=Object.prototype.toString.call(zt);if(wn=="[object Window]")return"object";if(wn=="[object Array]"||typeof zt.length=="number"&&zt.splice!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("splice"))return"array";if(wn=="[object Function]"||zt.call!==void 0&&zt.propertyIsEnumerable!==void 0&&!zt.propertyIsEnumerable("call"))return"function"}else if(ln=="function"&&zt.call===void 0)return"object";return ln}function ut(zt){var ln=typeof zt;return ln=="object"&&zt!=null||ln=="function"}function yt(zt,ln,wn){return zt.call.apply(zt.bind,arguments)}function Et(zt,ln,wn){if(!zt)throw Error();if(2<arguments.length){var Pn=Array.prototype.slice.call(arguments,2);return function(){var zn=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(zn,Pn),zt.apply(ln,zn)}}return function(){return zt.apply(ln,arguments)}}function Mt(zt,ln,wn){return(Mt=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yt:Et).apply(null,arguments)}function Ft(zt,ln){function wn(){}wn.prototype=ln.prototype,zt.S=ln.prototype,zt.prototype=new wn,zt.prototype.constructor=zt}function Rt(){this.a={}}function Ot(zt,ln,wn,Pn){this.f=zt,this.c=ln,this.b=wn,this.a=Pn}function pt(zt,ln,wn,Pn){wn=wn===void 0?{}:wn,this.c=zt,this.a=wn,this.b=ln,this.f=Pn===void 0?null:Pn}function Lt(zt,ln,wn,Pn,zn,sr){this.name=zt,this.a=zn,this.b=sr}function nn(zt,ln,wn){wn=wn===void 0?{}:wn;var Pn=Pn===void 0?new Rt:Pn;return new Ot(ln,zt,wn,Pn)}function on(zt,ln,wn,Pn){return Pn instanceof Lt?Pn:new Lt(zt,wn,Pn.b||ln.constructor,Pn.f,Pn.a,Pn.c)}function wt(zt){this.a=zt}function xt(zt){switch(zt){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}}function Nt(zt){if(Error.captureStackTrace)Error.captureStackTrace(this,Nt);else{var ln=Error().stack;ln&&(this.stack=ln)}zt&&(this.message=String(zt))}function Tt(zt,ln){for(var wn="",Pn=(zt=zt.split("%s")).length-1,zn=0;zn<Pn;zn++)wn+=zt[zn]+(zn<ln.length?ln[zn]:"%s");Nt.call(this,wn+zt[Pn])}function Vt(){this.j=null,this.i=[],this.l=0,this.b=Xt,this.f=this.a=this.h=0,this.c=null,this.g=0}Rt.prototype.get=function(zt){return this.a[zt]},Rt.prototype.f=function(){return Object.keys(this.a)},Ot.prototype.getRequestMessage=function(){return this.f},Ot.prototype.getMethodDescriptor=function(){return this.c},Ot.prototype.getMetadata=function(){return this.b},Ot.prototype.getCallOptions=function(){return this.a},pt.prototype.getResponseMessage=function(){return this.c},pt.prototype.getMetadata=function(){return this.a},pt.prototype.getMethodDescriptor=function(){return this.b},pt.prototype.getStatus=function(){return this.f},wt.prototype.on=function(zt,ln){return zt=="data"||zt=="error"?this:this.a.on(zt,ln)},wt.prototype.removeListener=function(zt,ln){return this.a.removeListener(zt,ln)},wt.prototype.cancel=function(){this.a.cancel()},Ft(Nt,Error),Nt.prototype.name="CustomError",Ft(Tt,Nt),Tt.prototype.name="AssertionError";var Xt=0,Gt=1,Ut=2,Ht=3,qt=0,Pt=128;function St(zt,ln,wn,Pn){throw zt.b=Ht,zt.j="The stream is broken @"+zt.l+"/"+wn+". Error: "+Pn+`. With input:
`+ln,Error(zt.j)}var Zt=Array.prototype.indexOf?function(zt,ln){return Array.prototype.indexOf.call(zt,ln,void 0)}:function(zt,ln){if(typeof zt=="string")return typeof ln!="string"||ln.length!=1?-1:zt.indexOf(ln,0);for(var wn=0;wn<zt.length;wn++)if(wn in zt&&zt[wn]===ln)return wn;return-1},tn,mn=String.prototype.trim?function(zt){return zt.trim()}:function(zt){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(zt)[1]};function yn(zt,ln){return zt.indexOf(ln)!=-1}function vn(zt,ln){return zt<ln?-1:zt>ln?1:0}e:{var un=ht.navigator;if(un){var rn=un.userAgent;if(rn){tn=rn;break e}}tn=""}var It="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dt(zt){var ln=1;zt=zt.split(":");for(var wn=[];0<ln&&zt.length;)wn.push(zt.shift()),ln--;return zt.length&&wn.push(zt.join(":")),wn}function Kt(zt){return Kt[" "](zt),zt}Kt[" "]=gt;var gn,hn,xn=yn(tn,"Opera"),Mn=yn(tn,"Trident")||yn(tn,"MSIE"),qn=yn(tn,"Edge"),Ir=yn(tn,"Gecko")&&!(yn(tn.toLowerCase(),"webkit")&&!yn(tn,"Edge"))&&!(yn(tn,"Trident")||yn(tn,"MSIE"))&&!yn(tn,"Edge"),_i=yn(tn.toLowerCase(),"webkit")&&!yn(tn,"Edge");function Ur(){var zt=ht.document;return zt?zt.documentMode:void 0}e:{var fo="",Gr=(hn=tn,Ir?/rv:([^\);]+)(\)|;)/.exec(hn):qn?/Edge\/([\d\.]+)/.exec(hn):Mn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hn):_i?/WebKit\/(\S+)/.exec(hn):xn?/(?:Version)[ \/]?(\S+)/.exec(hn):void 0);if(Gr&&(fo=Gr?Gr[1]:""),Mn){var Yr=Ur();if(Yr!=null&&Yr>parseFloat(fo)){gn=String(Yr);break e}}gn=fo}var to,Ro={};function Mo(zt){return function(ln,wn){var Pn=Ro;return Object.prototype.hasOwnProperty.call(Pn,ln)?Pn[ln]:Pn[ln]=wn(ln)}(zt,function(){for(var ln=0,wn=mn(String(gn)).split("."),Pn=mn(String(zt)).split("."),zn=Math.max(wn.length,Pn.length),sr=0;ln==0&&sr<zn;sr++){var jn=wn[sr]||"",Jn=Pn[sr]||"";do{if(jn=/(\d*)(\D*)(.*)/.exec(jn)||["","","",""],Jn=/(\d*)(\D*)(.*)/.exec(Jn)||["","","",""],jn[0].length==0&&Jn[0].length==0)break;ln=vn(jn[1].length==0?0:parseInt(jn[1],10),Jn[1].length==0?0:parseInt(Jn[1],10))||vn(jn[2].length==0,Jn[2].length==0)||vn(jn[2],Jn[2]),jn=jn[3],Jn=Jn[3]}while(ln==0)}return 0<=ln})}if(ht.document&&Mn){var Vo=Ur();to=Vo||parseInt(gn,10)||void 0}else to=void 0;var Qo=to;function Io(){this.F=this.F}Io.prototype.F=!1;var as,Bs=Object.freeze||function(zt){return zt};(as=!Mn)||(as=9<=Number(Qo));var cs=as,Zl=Mn&&!Mo("9"),Vl=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var zt=!1,ln=Object.defineProperty({},"passive",{get:function(){zt=!0}});try{ht.addEventListener("test",gt,ln),ht.removeEventListener("test",gt,ln)}catch{}return zt}();function zs(zt,ln){this.type=zt,this.a=this.target=ln,this.defaultPrevented=!1}function vs(zt,ln){if(zs.call(this,zt?zt.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,zt){var wn=this.type=zt.type,Pn=zt.changedTouches&&zt.changedTouches.length?zt.changedTouches[0]:null;if(this.target=zt.target||zt.srcElement,this.a=ln,ln=zt.relatedTarget){if(Ir){e:{try{Kt(ln.nodeName);var zn=!0;break e}catch{}zn=!1}zn||(ln=null)}}else wn=="mouseover"?ln=zt.fromElement:wn=="mouseout"&&(ln=zt.toElement);this.relatedTarget=ln,Pn?(this.clientX=Pn.clientX!==void 0?Pn.clientX:Pn.pageX,this.clientY=Pn.clientY!==void 0?Pn.clientY:Pn.pageY,this.screenX=Pn.screenX||0,this.screenY=Pn.screenY||0):(this.clientX=zt.clientX!==void 0?zt.clientX:zt.pageX,this.clientY=zt.clientY!==void 0?zt.clientY:zt.pageY,this.screenX=zt.screenX||0,this.screenY=zt.screenY||0),this.button=zt.button,this.key=zt.key||"",this.ctrlKey=zt.ctrlKey,this.altKey=zt.altKey,this.shiftKey=zt.shiftKey,this.metaKey=zt.metaKey,this.pointerId=zt.pointerId||0,this.pointerType=typeof zt.pointerType=="string"?zt.pointerType:uu[zt.pointerType]||"",this.c=zt,zt.defaultPrevented&&this.b()}}zs.prototype.b=function(){this.defaultPrevented=!0},Ft(vs,zs);var uu=Bs({2:"touch",3:"pen",4:"mouse"});vs.prototype.b=function(){vs.S.b.call(this);var zt=this.c;if(zt.preventDefault)zt.preventDefault();else if(zt.returnValue=!1,Zl)try{(zt.ctrlKey||112<=zt.keyCode&&123>=zt.keyCode)&&(zt.keyCode=-1)}catch{}};var No="closure_listenable_"+(1e6*Math.random()|0),tu=0;function cr(zt,ln,wn,Pn,zn){this.listener=zt,this.proxy=null,this.src=ln,this.type=wn,this.capture=!!Pn,this.A=zn,this.key=++tu,this.s=this.v=!1}function $t(zt){zt.s=!0,zt.listener=null,zt.proxy=null,zt.src=null,zt.A=null}function en(zt){this.src=zt,this.a={},this.b=0}function dn(zt,ln){var wn=ln.type;if(wn in zt.a){var Pn,zn=zt.a[wn],sr=Zt(zn,ln);(Pn=0<=sr)&&Array.prototype.splice.call(zn,sr,1),Pn&&($t(ln),zt.a[wn].length==0&&(delete zt.a[wn],zt.b--))}}function Cn(zt,ln,wn,Pn){for(var zn=0;zn<zt.length;++zn){var sr=zt[zn];if(!sr.s&&sr.listener==ln&&sr.capture==!!wn&&sr.A==Pn)return zn}return-1}en.prototype.add=function(zt,ln,wn,Pn,zn){var sr=zt.toString();(zt=this.a[sr])||(zt=this.a[sr]=[],this.b++);var jn=Cn(zt,ln,Pn,zn);return-1<jn?(ln=zt[jn],wn||(ln.v=!1)):((ln=new cr(ln,this.src,sr,!!Pn,zn)).v=wn,zt.push(ln)),ln};var On="closure_lm_"+(1e6*Math.random()|0),or={};function ar(zt,ln,wn,Pn,zn){if(Pn&&Pn.once)(function jn(Jn,Tr,Cr,Vr,ko){if(Array.isArray(Tr))for(var go=0;go<Tr.length;go++)jn(Jn,Tr[go],Cr,Vr,ko);else Cr=Qn(Cr),Jn&&Jn[No]?Jn.f.add(String(Tr),Cr,!0,ut(Vr)?!!Vr.capture:!!Vr,ko):nr(Jn,Tr,Cr,!0,Vr,ko)})(zt,ln,wn,Pn,zn);else if(Array.isArray(ln))for(var sr=0;sr<ln.length;sr++)ar(zt,ln[sr],wn,Pn,zn);else wn=Qn(wn),zt&&zt[No]?zt.f.add(String(ln),wn,!1,ut(Pn)?!!Pn.capture:!!Pn,zn):nr(zt,ln,wn,!1,Pn,zn)}function nr(zt,ln,wn,Pn,zn,sr){if(!ln)throw Error("Invalid event type");var jn=ut(zn)?!!zn.capture:!!zn,Jn=Rn(zt);if(Jn||(zt[On]=Jn=new en(zt)),!(wn=Jn.add(ln,wn,Pn,jn,sr)).proxy)if(Pn=function(){var Tr=En,Cr=cs?function(Vr){return Tr.call(Cr.src,Cr.listener,Vr)}:function(Vr){if(!(Vr=Tr.call(Cr.src,Cr.listener,Vr)))return Vr};return Cr}(),wn.proxy=Pn,Pn.src=zt,Pn.listener=wn,zt.addEventListener)Vl||(zn=jn),zn===void 0&&(zn=!1),zt.addEventListener(ln.toString(),Pn,zn);else if(zt.attachEvent)zt.attachEvent(Fn(ln.toString()),Pn);else{if(!zt.addListener||!zt.removeListener)throw Error("addEventListener and attachEvent are unavailable.");zt.addListener(Pn)}}function $n(zt){if(typeof zt!="number"&&zt&&!zt.s){var ln=zt.src;if(ln&&ln[No])dn(ln.f,zt);else{var wn=zt.type,Pn=zt.proxy;ln.removeEventListener?ln.removeEventListener(wn,Pn,zt.capture):ln.detachEvent?ln.detachEvent(Fn(wn),Pn):ln.addListener&&ln.removeListener&&ln.removeListener(Pn),(wn=Rn(ln))?(dn(wn,zt),wn.b==0&&(wn.src=null,ln[On]=null)):$t(zt)}}}function Fn(zt){return zt in or?or[zt]:or[zt]="on"+zt}function ro(zt,ln,wn,Pn){var zn=!0;if((zt=Rn(zt))&&(ln=zt.a[ln.toString()]))for(ln=ln.concat(),zt=0;zt<ln.length;zt++){var sr=ln[zt];sr&&sr.capture==wn&&!sr.s&&(sr=Ln(sr,Pn),zn=zn&&sr!==!1)}return zn}function Ln(zt,ln){var wn=zt.listener,Pn=zt.A||zt.src;return zt.v&&$n(zt),wn.call(Pn,ln)}function En(zt,ln){if(zt.s)return!0;if(!cs){var wn=ln||_t("window.event");ln=new vs(wn,this);var Pn=!0;if(!(0>wn.keyCode||wn.returnValue!=null)){e:{var zn=!1;if(wn.keyCode==0)try{wn.keyCode=-1;break e}catch{zn=!0}(zn||wn.returnValue==null)&&(wn.returnValue=!0)}for(wn=[],zn=ln.a;zn;zn=zn.parentNode)wn.push(zn);for(zt=zt.type,zn=wn.length-1;0<=zn;zn--){ln.a=wn[zn];var sr=ro(wn[zn],zt,!0,ln);Pn=Pn&&sr}for(zn=0;zn<wn.length;zn++)ln.a=wn[zn],sr=ro(wn[zn],zt,!1,ln),Pn=Pn&&sr}return Pn}return Ln(zt,new vs(ln,this))}function Rn(zt){return(zt=zt[On])instanceof en?zt:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qn(zt){return ft(zt)=="function"?zt:(zt[Hn]||(zt[Hn]=function(ln){return zt.handleEvent(ln)}),zt[Hn])}function lr(){Io.call(this),this.f=new en(this),this.N=this}function ur(zt,ln){zt=zt.N;var wn=ln.type||ln;if(typeof ln=="string")ln=new zs(ln,zt);else if(ln instanceof zs)ln.target=ln.target||zt;else{var Pn=ln;(function(zn,sr){for(var jn,Jn,Tr=1;Tr<arguments.length;Tr++){for(jn in Jn=arguments[Tr])zn[jn]=Jn[jn];for(var Cr=0;Cr<It.length;Cr++)jn=It[Cr],Object.prototype.hasOwnProperty.call(Jn,jn)&&(zn[jn]=Jn[jn])}})(ln=new zs(wn,zt),Pn)}mr(zt=ln.a=zt,wn,!0,ln),mr(zt,wn,!1,ln)}function mr(zt,ln,wn,Pn){if(ln=zt.f.a[String(ln)]){ln=ln.concat();for(var zn=!0,sr=0;sr<ln.length;++sr){var jn=ln[sr];if(jn&&!jn.s&&jn.capture==wn){var Jn=jn.listener,Tr=jn.A||jn.src;jn.v&&dn(zt.f,jn),zn=Jn.call(Tr,Pn)!==!1&&zn}}}}function hr(zt,ln,wn){if(ft(zt)=="function")wn&&(zt=Mt(zt,wn));else{if(!zt||typeof zt.handleEvent!="function")throw Error("Invalid listener argument");zt=Mt(zt.handleEvent,zt)}return 2147483647<Number(ln)?-1:ht.setTimeout(zt,ln||0)}function wr(zt,ln,wn){this.reset(zt,ln,wn,void 0,void 0)}Ft(lr,Io),lr.prototype[No]=!0,lr.prototype.addEventListener=function(zt,ln,wn,Pn){ar(this,zt,ln,wn,Pn)},lr.prototype.removeEventListener=function(zt,ln,wn,Pn){(function zn(sr,jn,Jn,Tr,Cr){if(Array.isArray(jn))for(var Vr=0;Vr<jn.length;Vr++)zn(sr,jn[Vr],Jn,Tr,Cr);else Tr=ut(Tr)?!!Tr.capture:!!Tr,Jn=Qn(Jn),sr&&sr[No]?(sr=sr.f,(jn=String(jn).toString())in sr.a&&-1<(Jn=Cn(Vr=sr.a[jn],Jn,Tr,Cr))&&($t(Vr[Jn]),Array.prototype.splice.call(Vr,Jn,1),Vr.length==0&&(delete sr.a[jn],sr.b--))):sr&&(sr=Rn(sr))&&(jn=sr.a[jn.toString()],sr=-1,jn&&(sr=Cn(jn,Jn,Tr,Cr)),(Jn=-1<sr?jn[sr]:null)&&$n(Jn))})(this,zt,ln,wn,Pn)},wr.prototype.a=null;function Br(zt){this.f=zt,this.b=this.c=this.a=null}function Qr(zt,ln){this.name=zt,this.value=ln}wr.prototype.reset=function(zt,ln,wn,Pn,zn){delete this.a},Qr.prototype.toString=function(){return this.name};var Hr=new Qr("SEVERE",1e3),So=new Qr("CONFIG",700),Eo=new Qr("FINE",500);function Oo(zt){return zt.c?zt.c:zt.a?Oo(zt.a):(function(ln,wn){throw new Tt("Failure"+(ln?": "+ln:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)}Br.prototype.log=function(zt,ln,wn){if(zt.value>=Oo(this).value)for(ft(ln)=="function"&&(ln=ln()),zt=new wr(zt,String(ln),this.f),wn&&(zt.a=wn),wn=this;wn;)wn=wn.a};var Lo,Ko={},fs=null;function vo(zt,ln){zt&&zt.log(Eo,ln,void 0)}function As(){}function bs(zt){var ln;return(ln=zt.a)||(ln={},Nr(zt)&&(ln[0]=!0,ln[1]=!0),ln=zt.a=ln),ln}function xu(){}function cu(zt){return(zt=Nr(zt))?new ActiveXObject(zt):new XMLHttpRequest}function Nr(zt){if(!zt.b&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var ln=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],wn=0;wn<ln.length;wn++){var Pn=ln[wn];try{return new ActiveXObject(Pn),zt.b=Pn}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return zt.b}function ga(zt,ln){this.b={},this.a=[],this.c=0;var wn=arguments.length;if(1<wn){if(wn%2)throw Error("Uneven number of arguments");for(var Pn=0;Pn<wn;Pn+=2)this.set(arguments[Pn],arguments[Pn+1])}else zt&&hu(this,zt)}function Vs(zt){if(zt.c!=zt.a.length){for(var ln=0,wn=0;ln<zt.a.length;){var Pn=zt.a[ln];nu(zt.b,Pn)&&(zt.a[wn++]=Pn),ln++}zt.a.length=wn}if(zt.c!=zt.a.length){var zn={};for(wn=ln=0;ln<zt.a.length;)nu(zn,Pn=zt.a[ln])||(zt.a[wn++]=Pn,zn[Pn]=1),ln++;zt.a.length=wn}}function hu(zt,ln){if(ln instanceof ga)for(var wn=ln.f(),Pn=0;Pn<wn.length;Pn++)zt.set(wn[Pn],ln.get(wn[Pn]));else for(wn in ln)zt.set(wn,ln[wn])}function nu(zt,ln){return Object.prototype.hasOwnProperty.call(zt,ln)}As.prototype.a=null,Ft(xu,As),Lo=new xu,ga.prototype.f=function(){return Vs(this),this.a.concat()},ga.prototype.get=function(zt,ln){return nu(this.b,zt)?this.b[zt]:ln},ga.prototype.set=function(zt,ln){nu(this.b,zt)||(this.c++,this.a.push(zt)),this.b[zt]=ln},ga.prototype.forEach=function(zt,ln){for(var wn=this.f(),Pn=0;Pn<wn.length;Pn++){var zn=wn[Pn],sr=this.get(zn);zt.call(ln,sr,zn,this)}};var Au=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _l(zt){lr.call(this),this.headers=new ga,this.D=zt||null,this.c=!1,this.C=this.a=null,this.J=this.o="",this.g=0,this.i="",this.h=this.I=this.m=this.G=!1,this.l=0,this.u=null,this.j=nm,this.B=this.H=!1}Ft(_l,lr);var nm="",tp=_l.prototype,po=function zt(ln){var wn;if(fs||(fs=new Br(""),Ko[""]=fs,fs.c=So),!(wn=Ko[ln])){wn=new Br(ln);var Pn=ln.lastIndexOf("."),zn=ln.substr(Pn+1);(Pn=zt(ln.substr(0,Pn))).b||(Pn.b={}),Pn.b[zn]=wn,wn.a=Pn,Ko[ln]=wn}return wn}("goog.net.XhrIo");tp.b=po;var ns=/^https?$/i,is=["POST","PUT"];function Eu(zt,ln,wn){if(zt.a)throw Error("[goog.net.XhrIo] Object is active with another request="+zt.o+"; newUri="+ln);zt.o=ln,zt.i="",zt.g=0,zt.J="POST",zt.G=!1,zt.c=!0,zt.a=zt.D?cu(zt.D):cu(Lo),zt.C=zt.D?bs(zt.D):bs(Lo),zt.a.onreadystatechange=Mt(zt.K,zt);try{vo(zt.b,js(zt,"Opening Xhr")),zt.I=!0,zt.a.open("POST",String(ln),!0),zt.I=!1}catch(sr){return vo(zt.b,js(zt,"Error opening Xhr: "+sr.message)),void Jo(zt,sr)}ln=wn||"";var Pn=function(sr){e:{for(var jn=np,Jn=sr.length,Tr=typeof sr=="string"?sr.split(""):sr,Cr=0;Cr<Jn;Cr++)if(Cr in Tr&&jn.call(void 0,Tr[Cr],Cr,sr)){jn=Cr;break e}jn=-1}return 0>jn?null:typeof sr=="string"?sr.charAt(jn):sr[jn]}((wn=new ga(zt.headers)).f()),zn=ht.FormData&&ln instanceof ht.FormData;!(0<=Zt(is,"POST"))||Pn||zn||wn.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),wn.forEach(function(sr,jn){this.a.setRequestHeader(jn,sr)},zt),zt.j&&(zt.a.responseType=zt.j),"withCredentials"in zt.a&&zt.a.withCredentials!==zt.H&&(zt.a.withCredentials=zt.H);try{Ml(zt),0<zt.l&&(zt.B=function(sr){return Mn&&Mo(9)&&typeof sr.timeout=="number"&&sr.ontimeout!==void 0}(zt.a),vo(zt.b,js(zt,"Will abort after "+zt.l+"ms if incomplete, xhr2 "+zt.B)),zt.B?(zt.a.timeout=zt.l,zt.a.ontimeout=Mt(zt.L,zt)):zt.u=hr(zt.L,zt.l,zt)),vo(zt.b,js(zt,"Sending request")),zt.m=!0,zt.a.send(ln),zt.m=!1}catch(sr){vo(zt.b,js(zt,"Send error: "+sr.message)),Jo(zt,sr)}}function np(zt){return zt.toLowerCase()=="content-type"}function Jo(zt,ln){zt.c=!1,zt.a&&(zt.h=!0,zt.a.abort(),zt.h=!1),zt.i=ln,zt.g=5,Uu(zt),fu(zt)}function Uu(zt){zt.G||(zt.G=!0,ur(zt,"complete"),ur(zt,"error"))}function zu(zt){if(zt.c&&st!==void 0){if(zt.C[1]&&ds(zt)==4&&zt.getStatus()==2)vo(zt.b,js(zt,"Local request error detected and ignored"));else if(zt.m&&ds(zt)==4)hr(zt.K,0,zt);else if(ur(zt,"readystatechange"),ds(zt)==4){vo(zt.b,js(zt,"Request complete")),zt.c=!1;try{var ln,wn=zt.getStatus();e:switch(wn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Pn=!0;break e;default:Pn=!1}if(!(ln=Pn)){var zn;if(zn=wn===0){var sr=String(zt.o).match(Au)[1]||null;if(!sr&&ht.self&&ht.self.location){var jn=ht.self.location.protocol;sr=jn.substr(0,jn.length-1)}zn=!ns.test(sr?sr.toLowerCase():"")}ln=zn}if(ln)ur(zt,"complete"),ur(zt,"success");else{zt.g=6;try{var Jn=2<ds(zt)?zt.a.statusText:""}catch(Tr){vo(zt.b,"Can not get status: "+Tr.message),Jn=""}zt.i=Jn+" ["+zt.getStatus()+"]",Uu(zt)}}finally{fu(zt)}}}}function fu(zt){if(zt.a){Ml(zt);var ln=zt.a,wn=zt.C[0]?gt:null;zt.a=null,zt.C=null,ur(zt,"ready");try{ln.onreadystatechange=wn}catch(Pn){(zt=zt.b)&&zt.log(Hr,"Problem encountered resetting onreadystatechange: "+Pn.message,void 0)}}}function Ml(zt){zt.a&&zt.B&&(zt.a.ontimeout=null),zt.u&&(ht.clearTimeout(zt.u),zt.u=null)}function ds(zt){return zt.a?zt.a.readyState:0}function Cm(zt,ln){if(zt.a&&ds(zt)==4)return(zt=zt.a.getResponseHeader(ln))===null?void 0:zt}function js(zt,ln){return ln+" ["+zt.J+" "+zt.o+" "+zt.getStatus()+"]"}_l.prototype.L=function(){st!==void 0&&this.a&&(this.i="Timed out after "+this.l+"ms, aborting",this.g=8,vo(this.b,js(this,this.i)),ur(this,"timeout"),this.abort(8))},_l.prototype.abort=function(zt){this.a&&this.c&&(vo(this.b,js(this,"Aborting")),this.c=!1,this.h=!0,this.a.abort(),this.h=!1,this.g=zt||7,ur(this,"complete"),ur(this,"abort"),fu(this))},_l.prototype.K=function(){this.F||(this.I||this.m||this.h?zu(this):this.O())},_l.prototype.O=function(){zu(this)},_l.prototype.getStatus=function(){try{return 2<ds(this)?this.a.status:-1}catch{return-1}};var Vu={},Ks=null;function Wu(zt){var ln=zt.length,wn=3*ln/4;wn%3?wn=Math.floor(wn):yn("=.",zt[ln-1])&&(wn=yn("=.",zt[ln-2])?wn-2:wn-1);var Pn=new Uint8Array(wn),zn=0;return function(sr,jn){function Jn(To){for(;Tr<sr.length;){var $o=sr.charAt(Tr++),Xo=Ks[$o];if(Xo!=null)return Xo;if(!/^[\s\xa0]*$/.test($o))throw Error("Unknown base64 encoding at char: "+$o)}return To}rp();for(var Tr=0;;){var Cr=Jn(-1),Vr=Jn(0),ko=Jn(64),go=Jn(64);if(go===64&&Cr===-1)break;jn(Cr<<2|Vr>>4),ko!=64&&(jn(Vr<<4&240|ko>>2),go!=64&&jn(ko<<6&192|go))}}(zt,function(sr){Pn[zn++]=sr}),Pn.subarray(0,zn)}function rp(){if(!Ks){Ks={};for(var zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ln=["+/=","+/","-_=","-_.","-_"],wn=0;5>wn;wn++){var Pn=zt.concat(ln[wn].split(""));Vu[wn]=Pn;for(var zn=0;zn<Pn.length;zn++){var sr=Pn[zn];Ks[sr]===void 0&&(Ks[sr]=zn)}}}}var jp=["content-type","grpc-status","grpc-message"];function Js(zt){this.a=zt.T,this.l=null,this.b=[],this.h=[],this.g=[],this.f=[],this.c=[],this.j=!1,this.i=0,this.m=new Vt;var ln=this;ar(this.a,"readystatechange",function(){var wn=ln.a;if(wn=wn.a?wn.a.getResponseHeader("Content-Type"):null){if((wn=wn.toLowerCase()).lastIndexOf("application/grpc-web-text",0)==0){wn=ln.a;try{var Pn=wn.a?wn.a.responseText:""}catch(Cr){vo(wn.b,"Can not get responseText: "+Cr.message),Pn=""}if(Pn=(wn=Pn||"").length-wn.length%4,(wn=wn.substr(ln.i,Pn-ln.i)).length==0)return;ln.i=Pn,wn=Wu(wn)}else{if(wn.lastIndexOf("application/grpc",0)!=0)return void El(ln,{code:2,message:"Unknown Content-type received.",metadata:{}});wn=new Uint8Array(function(Cr){try{if(!Cr.a)return null;if("response"in Cr.a)return Cr.a.response;switch(Cr.j){case nm:case"text":return Cr.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Cr.a)return Cr.a.mozResponseArrayBuffer}var Vr=Cr.b;return Vr&&Vr.log(Hr,"Response type "+Cr.j+" is not supported on this browser",void 0),null}catch(ko){return vo(Cr.b,"Can not get response: "+ko.message),null}}(ln.a))}Pn=null;try{Pn=function(Cr,Vr){function ko(ru){xo.f++,xo.a=(xo.a<<8)+ru,xo.f==4&&(xo.b=Ut,xo.g=0,typeof Uint8Array<"u"?xo.c=new Uint8Array(xo.a):xo.c=Array(xo.a),xo.a==0&&To())}function go(ru){xo.c[xo.g++]=ru,xo.g==xo.a&&To()}function To(){var ru={};ru[xo.h]=xo.c,xo.i.push(ru),xo.b=Xt}var $o,Xo,xo=Cr,xl=0;for($o=Vr instanceof Uint8Array||Vr instanceof Array?Vr:new Uint8Array(Vr);xl<$o.length;){switch(xo.b){case Ht:St(xo,$o,xl,"stream already broken");break;case Xt:(Xo=$o[xl])==qt||Xo==Pt?xo.h=Xo:St(xo,$o,xl,"invalid frame byte"),xo.b=Gt,xo.a=0,xo.f=0;break;case Gt:ko($o[xl]);break;case Ut:go($o[xl]);break;default:throw Error("unexpected parser state: "+xo.b)}xo.l++,xl++}return Cr=xo.i,xo.i=[],0<Cr.length?Cr:null}(ln.m,wn)}catch{El(ln,{code:2,message:"Error in parsing response body",metadata:{}})}if(Pn)for(wn=0;wn<Pn.length;wn++){if(qt in Pn[wn]){var zn=Pn[wn][qt];if(zn)try{var sr=ln.l(zn);if(sr){zn=ln;for(var jn=sr,Jn=0;Jn<zn.b.length;Jn++)zn.b[Jn](jn)}}catch{El(ln,{code:2,message:"Error in response deserializer function.",metadata:{}})}}if(Pt in Pn[wn]&&0<Pn[wn][Pt].length){for(zn="",jn=0;jn<Pn[wn][Pt].length;jn++)zn+=String.fromCharCode(Pn[wn][Pt][jn]);for(zn=zn.trim().split(`\r
`),jn={},Jn=0;Jn<zn.length;Jn++){var Tr=zn[Jn].indexOf(":");jn[zn[Jn].substring(0,Tr).trim()]=zn[Jn].substring(Tr+1).trim()}zn=jn,jn=0,Jn="","grpc-status"in zn&&(jn=zn["grpc-status"],delete zn["grpc-status"]),"grpc-message"in zn&&(Jn=zn["grpc-message"],delete zn["grpc-message"]),El(ln,{code:Number(jn),message:Jn,metadata:zn})}}}}),ar(this.a,"complete",function(){var wn=ln.a.g,Pn="",zn={},sr=function(Jn){var Tr={};Jn=(Jn.a&&ds(Jn)==4&&Jn.a.getAllResponseHeaders()||"").split(`\r
`);for(var Cr=0;Cr<Jn.length;Cr++)if(!/^[\s\xa0]*$/.test(Jn[Cr])){var Vr=Dt(Jn[Cr]),ko=Vr[0];if(typeof(Vr=Vr[1])=="string"){Vr=Vr.trim();var go=Tr[ko]||[];Tr[ko]=go,go.push(Vr)}}return function(To,$o){var Xo,xo={};for(Xo in To)xo[Xo]=$o.call(void 0,To[Xo],Xo,To);return xo}(Tr,function(To){return To.join(", ")})}(ln.a);if(Object.keys(sr).forEach(function(Jn){jp.includes(Jn)||(zn[Jn]=sr[Jn])}),function(Jn,Tr){for(var Cr=0;Cr<Jn.g.length;Cr++)Jn.g[Cr](Tr)}(ln,zn),wn!=0){switch(wn){case 7:var jn=10;break;case 8:jn=4;break;case 6:jn=function(Jn){switch(Jn){case 200:return 0;case 400:return 3;case 401:return 16;case 403:return 7;case 404:return 5;case 409:return 10;case 412:return 9;case 429:return 8;case 499:return 1;case 500:return 2;case 501:return 12;case 503:return 14;case 504:return 4;default:return 2}}(ln.a.getStatus());break;default:jn=14}jn==10&&ln.j||El(ln,{code:jn,message:xt(wn),metadata:{}})}else wn=!1,"grpc-status"in sr&&(jn=Cm(ln.a,"grpc-status"),"grpc-message"in sr&&(Pn=Cm(ln.a,"grpc-message")),Number(jn)!=0&&(El(ln,{code:Number(jn),message:Pn,metadata:sr}),wn=!0)),wn||function(Jn){for(var Tr=0;Tr<Jn.c.length;Tr++)Jn.c[Tr]()}(ln)})}function Yl(zt,ln){-1<(ln=zt.indexOf(ln))&&zt.splice(ln,1)}function El(zt,ln){if(ln.code!=0)for(var wn={code:ln.code,message:decodeURIComponent(ln.message||""),metadata:ln.metadata},Pn=0;Pn<zt.f.length;Pn++)zt.f[Pn](wn);for(ln={code:ln.code,details:decodeURIComponent(ln.message||""),metadata:ln.metadata},wn=0;wn<zt.h.length;wn++)zt.h[wn](ln)}function gs(zt){this.a=_t("format",zt)||"text",this.f=_t("suppressCorsPreflight",zt)||!1,this.c=_t("withCredentials",zt)||!1,this.b=_t("streamInterceptors",zt)||[],this.g=_t("unaryInterceptors",zt)||[]}function Fs(zt,ln,wn){var Pn=ln.getMethodDescriptor(),zn=wn+Pn.name;(wn=new _l).H=zt.c;var sr=new Js({T:wn});if(sr.l=Pn.b,hu(wn.headers,ln.getMetadata()),zt.a=="text"?(wn.headers.set("Content-Type","application/grpc-web-text"),wn.headers.set("Accept","application/grpc-web-text")):wn.headers.set("Content-Type","application/grpc-web+proto"),wn.headers.set("X-User-Agent","grpc-web-javascript/0.1"),wn.headers.set("X-Grpc-Web","1"),nu(wn.headers.b,"deadline")){var jn=wn.headers.get("deadline");jn=Math.round(jn-new Date().getTime());var Jn=wn.headers;nu(Jn.b,"deadline")&&(delete Jn.b.deadline,Jn.c--,Jn.a.length>2*Jn.c&&Vs(Jn)),1/0===jn&&(jn=0),0<jn&&wn.headers.set("grpc-timeout",jn+"m")}if(zt.f){Vs(Jn=wn.headers),jn={};for(var Tr=0;Tr<Jn.a.length;Tr++){var Cr=Jn.a[Tr];jn[Cr]=Jn.b[Cr]}(Jn=wn.headers).b={},Jn.a.length=0,Jn.c=0;e:{for(Vr in jn){var Vr=!1;break e}Vr=!0}Vr||(jn=function(To){var $o="";return function(Xo,xo){for(var xl in Xo)xo.call(void 0,Xo[xl],xl,Xo)}(To,function(Xo,xo){$o+=xo,$o+=":",$o+=Xo,$o+=`\r
`}),$o}(jn),typeof zn=="string"?(Vr=encodeURIComponent("$httpHeaders"),(Vr+=jn=jn!=null?"="+encodeURIComponent(String(jn)):"")&&(0>(jn=zn.indexOf("#"))&&(jn=zn.length),0>(Jn=zn.indexOf("?"))||Jn>jn?(Jn=jn,Tr=""):Tr=zn.substring(Jn+1,jn),jn=(zn=[zn.substr(0,Jn),Tr,zn.substr(jn)])[1],zn[1]=Vr?jn?jn+"&"+Vr:Vr:jn,zn=zn[0]+(zn[1]?"?"+zn[1]:"")+zn[2])):zn.a("$httpHeaders",jn))}for(Pn=(ln=(0,Pn.a)(ln.getRequestMessage())).length,Vr=[0,0,0,0],jn=new Uint8Array(5+Pn),Jn=3;0<=Jn;Jn--)Vr[Jn]=Pn%256,Pn>>>=8;if(jn.set(new Uint8Array(Vr),1),jn.set(ln,5),ln=jn,zt.a=="text"){var ko;for(zt=ln,ko===void 0&&(ko=0),rp(),ko=Vu[ko],ln=[],Pn=0;Pn<zt.length;Pn+=3){Cr=zt[Pn];var go=(Vr=Pn+1<zt.length)?zt[Pn+1]:0;Jn=Cr>>2,Cr=(3&Cr)<<4|go>>4,go=(15&go)<<2|(Tr=(jn=Pn+2<zt.length)?zt[Pn+2]:0)>>6,Tr&=63,jn||(Tr=64,Vr||(go=64)),ln.push(ko[Jn],ko[Cr],ko[go]||"",ko[Tr]||"")}ln=ln.join("")}else zt.a=="binary"&&(wn.j="arraybuffer");return Eu(wn,zn,ln),sr}function Fp(zt,ln,wn){var Pn=null,zn=!1;zt.on("data",function(sr){Pn=sr}),zt.on("error",function(sr){sr.code==0||zn||(zn=!0,ln(sr,null))}),zt.on("status",function(sr){sr.code==0||zn?wn&&ln(null,null,sr):(zn=!0,ln({code:sr.code,message:sr.details,metadata:sr.metadata},null))}),wn&&zt.on("metadata",function(sr){ln(null,null,null,sr)}),zt.on("end",function(){zn||(Pn==null?ln({code:2,message:"Incomplete response"}):ln(null,Pn)),wn&&ln(null,null)})}function ip(zt,ln){var wn=zt;return ln.forEach(function(Pn){var zn=wn;wn=function(sr){return Pn.intercept(sr,zn)}}),wn}Js.prototype.on=function(zt,ln){return zt=="data"?this.b.push(ln):zt=="status"?this.h.push(ln):zt=="metadata"?this.g.push(ln):zt=="end"?this.c.push(ln):zt=="error"&&this.f.push(ln),this},Js.prototype.removeListener=function(zt,ln){return zt=="data"?Yl(this.b,ln):zt=="status"?Yl(this.h,ln):zt=="metadata"?Yl(this.g,ln):zt=="end"?Yl(this.c,ln):zt=="error"&&Yl(this.f,ln),this},Js.prototype.cancel=function(){this.j=!0,this.a.abort()},Js.prototype.cancel=Js.prototype.cancel,Js.prototype.removeListener=Js.prototype.removeListener,Js.prototype.on=Js.prototype.on,gs.prototype.P=function(zt,ln,wn,Pn,zn){var sr=this;Pn=on(zt,ln,"unary",Pn);var jn=zt.substr(0,zt.length-Pn.name.length);return Fp(zt=ip(function(Jn){return Fs(sr,Jn,jn)},this.b).call(this,nn(Pn,ln,wn)),zn,!1),new wt(zt)},gs.prototype.M=function(zt,ln,wn,Pn){var zn=this;Pn=on(zt,ln,"unary",Pn);var sr=zt.substr(0,zt.length-Pn.name.length);return ip(function(jn){return new Promise(function(Jn,Tr){var Cr,Vr,ko;Fp(Fs(zn,jn,sr),function(go,To,$o,Xo){go?Tr(go):To?ko=To:$o?Vr=$o:Xo?Cr=Xo:(go=jn.getMethodDescriptor(),Jn(new pt(ko,go,To=(To=Cr)===void 0?{}:To,Vr===void 0?null:Vr)))},!0)})},this.g).call(this,nn(Pn,ln,wn)).then(function(jn){return jn.getResponseMessage()})},gs.prototype.unaryCall=function(zt,ln,wn,Pn){return this.M(zt,ln,wn,Pn)},gs.prototype.R=function(zt,ln,wn,Pn){var zn=this;Pn=on(zt,ln,"server_streaming",Pn);var sr=zt.substr(0,zt.length-Pn.name.length);return ip(function(jn){return Fs(zn,jn,sr)},this.b).call(this,nn(Pn,ln,wn))},gs.prototype.serverStreaming=gs.prototype.R,gs.prototype.unaryCall=gs.prototype.unaryCall,gs.prototype.thenableCall=gs.prototype.M,gs.prototype.rpcCall=gs.prototype.P,i.exports.AbstractClientBase={MethodInfo:function(zt,ln,wn,Pn,zn){this.name=Pn,this.b=zn,this.f=zt,this.a=ln,this.c=wn}},i.exports.GrpcWebClientBase=gs,i.exports.StatusCode={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,UNAUTHENTICATED:16,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15},i.exports.MethodDescriptor=Lt,i.exports.MethodType={UNARY:"unary",SERVER_STREAMING:"server_streaming"}}).call(this,s(6))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.isAsyncIterable=o.isAsyncGenerator=o.isAsync=void 0;var _,$=s(152),et=(_=$)&&_.__esModule?_:{default:_};function tt(j){return j[Symbol.toStringTag]==="AsyncFunction"}o.default=function(j){if(typeof j!="function")throw new Error("expected a function");return tt(j)?(0,et.default)(j):j},o.isAsync=tt,o.isAsyncGenerator=function(j){return j[Symbol.toStringTag]==="AsyncGenerator"},o.isAsyncIterable=function(j){return typeof j[Symbol.asyncIterator]=="function"}},function(i,o,s){var _={};function $(tt,j,it){it||(it=Error);var st=function(ht){var _t,gt;function ft(ut,yt,Et){return ht.call(this,function(Mt,Ft,Rt){return typeof j=="string"?j:j(Mt,Ft,Rt)}(ut,yt,Et))||this}return gt=ht,(_t=ft).prototype=Object.create(gt.prototype),_t.prototype.constructor=_t,_t.__proto__=gt,ft}(it);st.prototype.name=it.name,st.prototype.code=tt,_[tt]=st}function et(tt,j){if(Array.isArray(tt)){var it=tt.length;return tt=tt.map(function(st){return String(st)}),it>2?"one of ".concat(j," ").concat(tt.slice(0,it-1).join(", "),", or ")+tt[it-1]:it===2?"one of ".concat(j," ").concat(tt[0]," or ").concat(tt[1]):"of ".concat(j," ").concat(tt[0])}return"of ".concat(j," ").concat(String(tt))}$("ERR_INVALID_OPT_VALUE",function(tt,j){return'The value "'+j+'" is invalid for option "'+tt+'"'},TypeError),$("ERR_INVALID_ARG_TYPE",function(tt,j,it){var st,ht,_t;if(typeof j=="string"&&(ht="not ",j.substr(0,ht.length)===ht)?(st="must not be",j=j.replace(/^not /,"")):st="must be",function(ft,ut,yt){return(yt===void 0||yt>ft.length)&&(yt=ft.length),ft.substring(yt-ut.length,yt)===ut}(tt," argument"))_t="The ".concat(tt," ").concat(st," ").concat(et(j,"type"));else{var gt=function(ft,ut,yt){return typeof yt!="number"&&(yt=0),!(yt+ut.length>ft.length)&&ft.indexOf(ut,yt)!==-1}(tt,".")?"property":"argument";_t='The "'.concat(tt,'" ').concat(gt," ").concat(st," ").concat(et(j,"type"))}return _t+=". Received type ".concat(typeof it)},TypeError),$("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),$("ERR_METHOD_NOT_IMPLEMENTED",function(tt){return"The "+tt+" method is not implemented"}),$("ERR_STREAM_PREMATURE_CLOSE","Premature close"),$("ERR_STREAM_DESTROYED",function(tt){return"Cannot call "+tt+" after a stream was destroyed"}),$("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),$("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),$("ERR_STREAM_WRITE_AFTER_END","write after end"),$("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),$("ERR_UNKNOWN_ENCODING",function(tt){return"Unknown encoding: "+tt},TypeError),$("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=_},function(i,o,s){(function(_){var $=Object.keys||function(ft){var ut=[];for(var yt in ft)ut.push(yt);return ut};i.exports=ht;var et=s(77),tt=s(81);s(7)(ht,et);for(var j=$(tt.prototype),it=0;it<j.length;it++){var st=j[it];ht.prototype[st]||(ht.prototype[st]=tt.prototype[st])}function ht(ft){if(!(this instanceof ht))return new ht(ft);et.call(this,ft),tt.call(this,ft),this.allowHalfOpen=!0,ft&&(ft.readable===!1&&(this.readable=!1),ft.writable===!1&&(this.writable=!1),ft.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",_t)))}function _t(){this._writableState.ended||_.nextTick(gt,this)}function gt(ft){ft.end()}Object.defineProperty(ht.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(ht.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ht.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ht.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ft){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ft,this._writableState.destroyed=ft)}})}).call(this,s(2))},function(i,o,s){s.d(o,"a",function(){return tt});var _=s(40),$=s(4);const et={"app-id":["app-id must match formant/*"]};class tt extends _.a{constructor(it,st={}){super(it,Object.assign({validateHeaders:ht=>`${ht.get("app-id")}`.startsWith("formant/")?{}:et},st)),this.endpoint=it}getHeaders(){return Object.assign(Object.assign({},tt.headers),{"App-ID":`formant/${$.a}`,"App-Version":$.j})}}tt.headers={}},function(i,o,s){s(227),i.exports={encode:_=>new TextEncoder().encode(_),decode:_=>new TextDecoder().decode(_)}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_,$=_.length){if(!$)throw new Error("arity is undefined");return function(...et){return typeof et[$-1]=="function"?_.apply(this,et):new Promise((tt,j)=>{et[$-1]=(it,...st)=>{if(it)return j(it);tt(st.length>1?st:st[0])},_.apply(this,et)})}},i.exports=o.default},function(i,o,s){(o=i.exports=s(69)).Stream=o,o.Readable=o,o.Writable=s(48),o.Duplex=s(23),o.Transform=s(72),o.PassThrough=s(165)},function(i,o,s){(o=i.exports=s(77)).Stream=o,o.Readable=o,o.Writable=s(81),o.Duplex=s(27),o.Transform=s(82),o.PassThrough=s(184),o.finished=s(49),o.pipeline=s(185)},function(i,o,s){i.exports=function(_){return _}},function(i,o,s){s.d(o,"a",function(){return $});const _=["password","secret","token","key","buffer"];function $(et,tt=new Set){return tt.has(et)?"[ RECURSIVE ]":!(j=et)||typeof j!="object"&&typeof j!="function"?et:(tt.add(et),Object.keys(et).reduce((it,st)=>(it[st]=_.some(ht=>st.toLowerCase().includes(ht.toLowerCase()))?"[ REDACTED ]":$(et[st],tt),it),{}));var j}},function(i,o){i.exports=_,_.default=_,_.stable=et,_.stableStringify=et;var s=[];function _(tt,j,it){(function _t(gt,ft,ut,yt){var Et;if(typeof gt=="object"&&gt!==null){for(Et=0;Et<ut.length;Et++)if(ut[Et]===gt)return yt[ft]="[Circular]",void s.push([yt,ft,gt]);if(ut.push(gt),Array.isArray(gt))for(Et=0;Et<gt.length;Et++)_t(gt[Et],Et,ut,gt);else{var Mt=Object.keys(gt);for(Et=0;Et<Mt.length;Et++){var Ft=Mt[Et];_t(gt[Ft],Ft,ut,gt)}}ut.pop()}})(tt,"",[],void 0);for(var st=JSON.stringify(tt,j,it);s.length!==0;){var ht=s.pop();ht[0][ht[1]]=ht[2]}return st}function $(tt,j){return tt<j?-1:tt>j?1:0}function et(tt,j,it){for(var st=function gt(ft,ut,yt,Et){var Mt;if(typeof ft=="object"&&ft!==null){for(Mt=0;Mt<yt.length;Mt++)if(yt[Mt]===ft)return Et[ut]="[Circular]",void s.push([Et,ut,ft]);if(typeof ft.toJSON=="function")return;if(yt.push(ft),Array.isArray(ft))for(Mt=0;Mt<ft.length;Mt++)gt(ft[Mt],Mt,yt,ft);else{var Ft={},Rt=Object.keys(ft).sort($);for(Mt=0;Mt<Rt.length;Mt++){var Ot=Rt[Mt];gt(ft[Ot],Ot,yt,ft),Ft[Ot]=ft[Ot]}if(Et===void 0)return Ft;s.push([Et,ut,ft]),Et[ut]=Ft}yt.pop()}}(tt,"",[],void 0)||tt,ht=JSON.stringify(st,j,it);s.length!==0;){var _t=s.pop();_t[0][_t[1]]=_t[2]}return ht}},function(i,o,s){var _=s(16),$=Object.keys||function(ut){var yt=[];for(var Et in ut)yt.push(Et);return yt};i.exports=_t;var et=Object.create(s(17));et.inherits=s(7);var tt=s(143),j=s(62);et.inherits(_t,tt);for(var it=$(j.prototype),st=0;st<it.length;st++){var ht=it[st];_t.prototype[ht]||(_t.prototype[ht]=j.prototype[ht])}function _t(ut){if(!(this instanceof _t))return new _t(ut);tt.call(this,ut),j.call(this,ut),ut&&ut.readable===!1&&(this.readable=!1),ut&&ut.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ut&&ut.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",gt)}function gt(){this.allowHalfOpen||this._writableState.ended||_.nextTick(ft,this)}function ft(ut){ut.end()}Object.defineProperty(_t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_t.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ut){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=ut,this._writableState.destroyed=ut)}}),_t.prototype._destroy=function(ut,yt){this.push(null),this.end(),_.nextTick(yt,ut)}},function(i,o,s){var _=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function $(j,it){return Object.prototype.hasOwnProperty.call(j,it)}o.assign=function(j){for(var it=Array.prototype.slice.call(arguments,1);it.length;){var st=it.shift();if(st){if(typeof st!="object")throw new TypeError(st+"must be non-object");for(var ht in st)$(st,ht)&&(j[ht]=st[ht])}}return j},o.shrinkBuf=function(j,it){return j.length===it?j:j.subarray?j.subarray(0,it):(j.length=it,j)};var et={arraySet:function(j,it,st,ht,_t){if(it.subarray&&j.subarray)j.set(it.subarray(st,st+ht),_t);else for(var gt=0;gt<ht;gt++)j[_t+gt]=it[st+gt]},flattenChunks:function(j){var it,st,ht,_t,gt,ft;for(ht=0,it=0,st=j.length;it<st;it++)ht+=j[it].length;for(ft=new Uint8Array(ht),_t=0,it=0,st=j.length;it<st;it++)gt=j[it],ft.set(gt,_t),_t+=gt.length;return ft}},tt={arraySet:function(j,it,st,ht,_t){for(var gt=0;gt<ht;gt++)j[_t+gt]=it[st+gt]},flattenChunks:function(j){return[].concat.apply([],j)}};o.setTyped=function(j){j?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,et)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,tt))},o.setTyped(_)},function(i,o,s){i.exports=s(186)},function(i,o,s){s.d(o,"a",function(){return $});var _=s(229);const $=Object(_.a)()},function(i,o,s){s.d(o,"a",function(){return Mt});var _=s(1),$=s(100),et=s.n($),tt=s(101),j=s.n(tt);class it extends Error{constructor(Rt,Ot,pt){super(`Connection failure: ${Rt.message}`),this.cause=Rt,this.url=Ot,this.retryable=pt}}var st=s(8),ht=s(0),_t=s(10),gt=s(11);class ft extends Error{constructor(Rt,Ot){super(`Invalid headers (${JSON.stringify(Rt)}) for response: ${Ot.message}`),this.validationErrors=Rt,this.responseError=Ot}}var ut=function(Ft,Rt,Ot,pt){return new(Ot||(Ot=Promise))(function(Lt,nn){function on(Nt){try{xt(pt.next(Nt))}catch(Tt){nn(Tt)}}function wt(Nt){try{xt(pt.throw(Nt))}catch(Tt){nn(Tt)}}function xt(Nt){var Tt;Nt.done?Lt(Nt.value):(Tt=Nt.value,Tt instanceof Ot?Tt:new Ot(function(Vt){Vt(Tt)})).then(on,wt)}xt((pt=pt.apply(Ft,Rt||[])).next())})},yt=function(Ft,Rt){var Ot={};for(var pt in Ft)Object.prototype.hasOwnProperty.call(Ft,pt)&&Rt.indexOf(pt)<0&&(Ot[pt]=Ft[pt]);if(Ft!=null&&typeof Object.getOwnPropertySymbols=="function"){var Lt=0;for(pt=Object.getOwnPropertySymbols(Ft);Lt<pt.length;Lt++)Rt.indexOf(pt[Lt])<0&&Object.prototype.propertyIsEnumerable.call(Ft,pt[Lt])&&(Ot[pt[Lt]]=Ft[pt[Lt]])}return Ot};const Et=new Set(["GET","HEAD","PUT","QUERY","DELETE","OPTIONS","TRACE"]);class Mt{constructor(Rt,Ot={}){if(this.endpoint=Rt,this.validateHeaders=pt=>Ot.validateHeaders?Ot.validateHeaders(pt):{},this.verbose=Ot.verbose!==!1,Ot.retries!==void 0&&!(Ot.retries>=0))throw new Error("retries must be positive or zero");if(this.configuredRetries=Ot.retries,Ot.timeoutMs!==void 0&&!(Ot.timeoutMs>0))throw new Error("timeoutMs must be positive");if(this.timeoutMs=Ot.timeoutMs,Ot.maxBackoffDelayMs!==void 0&&!(Ot.maxBackoffDelayMs>0))throw new Error("maxBackoffDelayMs must be positive");this.maxBackoffDelayMs=Ot.maxBackoffDelayMs||30*_.a.second}getRetries(){return this.configuredRetries!==void 0?this.configuredRetries:this.getConstructor().retries}getHeaders(){return{}}fetch(Rt,Ot={}){return ut(this,void 0,void 0,function*(){return(yield this.fetchVerbose(Rt,Ot)).body})}fetchVerbose(Rt,Ot={}){return ut(this,void 0,void 0,function*(){let pt=100*_.a.millisecond,Lt=0;const nn=this.timeoutMs!==void 0?new Date().getTime()+this.timeoutMs:void 0,on=nn?()=>Math.max(nn-new Date().getTime(),0):void 0;for(;;)try{return yield this.doFetch(Rt,Ot,on)}catch(wt){const xt=Object(_t.a)(wt,it);if((on==null?void 0:on())===0||Lt===this.getRetries()||!xt.retryable)throw xt;Lt++,pt=Math.min(...on?[on()]:[],pt*(2+.1*(Math.random()-.5)),this.maxBackoffDelayMs),yield Object(st.a)(pt),this.verbose&&ht.a.warn(`Connection failure, retrying. Error: ${wt.cause.message}`,{url:wt.url,error:wt.cause,attempt:Lt})}})}doFetch(Rt,Ot,pt){return ut(this,void 0,void 0,function*(){const{token:Lt,json:nn,allowUnsafeRetries:on}=Ot,wt=yt(Ot,["token","json","allowUnsafeRetries"]),xt=(wt.method||"GET").toUpperCase(),Nt=this.endpoint!==void 0?`${this.endpoint}${Rt?`/${Rt}`:""}`:Rt,Tt=new et.a;let Vt;if(pt){const Xt=pt();Xt>0?Vt=setTimeout(()=>{Tt.abort()},Xt):Tt.abort()}try{let Xt;yield Promise.race([this.getConstructor().waitForConnectivity(),new Promise(Zt=>{Xt=setTimeout(Zt,pt?Math.min(_.a.minute,pt()):_.a.minute)})]),Xt&&clearTimeout(Xt);const Gt=yield j()(Nt,Object.assign(Object.assign({},wt),{headers:Object.assign(Object.assign(Object.assign(Object.assign({},nn!==!1?{"Content-Type":"application/json"}:{}),this.getHeaders()),wt.headers||{}),Lt!==void 0?{Authorization:`Bearer ${Lt}`}:{}),signal:Tt.signal})),Ut=Gt.headers.get("content-type")||"",Ht=Ut&&Ut.startsWith("application/json"),qt=Ht?yield Gt.json():yield Gt.text(),Pt=()=>new gt.a(xt,Nt,Gt.status,qt,qt&&qt.validationErrors||{},Gt.headers);if(!Gt.ok)throw this.verbose&&ht.a[Gt.status>=500?"warn":"info"]("Response error",{method:xt,url:Nt,statusCode:Gt.status}),Pt();const St=this.validateHeaders(Gt.headers);if(Object.keys(St).length!==0)throw new ft(St,Pt());if(Gt.status===204)return{body:void 0,headers:Gt.headers};if(nn&&!Ht)throw new Error(`Response is not JSON: ${JSON.stringify(qt)}`);return{body:qt,headers:Gt.headers}}catch(Xt){const Gt=on||Et.has(xt);if(Xt.message==="Network request failed")throw new it(Xt,Nt,Gt);if(Xt.type==="system"&&["EAI_AGAIN","ECONNREFUSED","EHOSTUNREACH","ENOTFOUND"].find(Pt=>Pt===Xt.code))throw new it(Xt,Nt,!0);if(Xt.type==="system"&&["ETIMEDOUT","ECONNRESET","ESOCKETTIMEDOUT","EPIPE"].find(Pt=>Pt===Xt.code))throw new it(Xt,Nt,Gt);if(Xt.name==="AbortError")throw new it(Xt,Nt,Gt);const Ut=Object(_t.a)(Xt,gt.a),{statusCode:Ht}=Ut;if(Ht===408||Ht===429||Ht===502||Ht===503||Ht===504)throw this.verbose&&!Gt&&ht.a.warn("Potentially unsafe retry"),new it(Xt,Nt,!0);const qt=this.validateHeaders(Ut.headers);throw Object.keys(qt).length!==0?new ft(qt,Ut):(yield this.getConstructor().onResponseError(Ut),Xt)}finally{Vt&&clearTimeout(Vt)}})}getConstructor(){return Object.getPrototypeOf(this).constructor}}Mt.retries=8,Mt.waitForConnectivity=()=>ut(void 0,void 0,void 0,function*(){}),Mt.onResponseError=()=>ut(void 0,void 0,void 0,function*(){})},function(i,o,s){function _(_t,gt){if(!(_t instanceof gt))throw new TypeError("Cannot call a class as a function")}function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(59),tt=s(3),j=tt.LEVEL,it=tt.MESSAGE;et.enabled=!0;var st=/\s+/,ht=function(){function _t(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,_t),yt.colors&&this.addColors(yt.colors),this.options=yt}var gt,ft,ut;return gt=_t,ut=[{key:"addColors",value:function(yt){var Et=Object.keys(yt).reduce(function(Mt,Ft){return Mt[Ft]=st.test(yt[Ft])?yt[Ft].split(st):yt[Ft],Mt},{});return _t.allColors=Object.assign({},_t.allColors||{},Et),_t.allColors}}],(ft=[{key:"addColors",value:function(yt){return _t.addColors(yt)}},{key:"colorize",value:function(yt,Et,Mt){if(Mt===void 0&&(Mt=Et),!Array.isArray(_t.allColors[yt]))return et[_t.allColors[yt]](Mt);for(var Ft=0,Rt=_t.allColors[yt].length;Ft<Rt;Ft++)Mt=et[_t.allColors[yt][Ft]](Mt);return Mt}},{key:"transform",value:function(yt,Et){return Et.all&&typeof yt[it]=="string"&&(yt[it]=this.colorize(yt[j],yt.level,yt[it])),(Et.level||Et.all||!Et.message)&&(yt.level=this.colorize(yt[j],yt.level)),(Et.all||Et.message)&&(yt.message=this.colorize(yt[j],yt.level,yt.message)),yt}}])&&$(gt.prototype,ft),ut&&$(gt,ut),_t}();i.exports=function(_t){return new ht(_t)},i.exports.Colorizer=i.exports.Format=ht},function(i,o){var s={}.toString;i.exports=Array.isArray||function(_){return s.call(_)=="[object Array]"}},function(i,o,s){(function(_){function $(et){try{if(!_.localStorage)return!1}catch{return!1}var tt=_.localStorage[et];return tt!=null&&String(tt).toLowerCase()==="true"}i.exports=function(et,tt){if($("noDeprecation"))return et;var j=!1;return function(){if(!j){if($("throwDeprecation"))throw new Error(tt);$("traceDeprecation")?console.trace(tt):console.warn(tt),j=!0}return et.apply(this,arguments)}}}).call(this,s(6))},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _&&typeof _.length=="number"&&_.length>=0&&_.length%1==0},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default={},i.exports=o.default},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){(function(_,$,et){var tt=s(16);function j(xt){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Tt,Vt,Xt){var Gt=Tt.entry;for(Tt.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Xt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Tt:Vt.corkedRequestsFree=Tt})(Nt,xt)}}i.exports=Rt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Rt.WritableState=Ft;var ht=s(17);ht.inherits=s(7);var _t={deprecate:s(43)},gt=s(70),ft=s(47).Buffer,ut=et.Uint8Array||function(){},yt,Et=s(71);function Mt(){}function Ft(xt,Nt){it=it||s(23),xt=xt||{};var Tt=Nt instanceof it;this.objectMode=!!xt.objectMode,Tt&&(this.objectMode=this.objectMode||!!xt.writableObjectMode);var Vt=xt.highWaterMark,Xt=xt.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Tt&&(Xt||Xt===0)?Xt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=xt.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=xt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var St=qt._writableState,Zt=St.sync,tn=St.writecb;if(function(yn){yn.writing=!1,yn.writecb=null,yn.length-=yn.writelen,yn.writelen=0}(St),Pt)(function(yn,vn,un,rn,It){--vn.pendingcb,un?(tt.nextTick(It,rn),tt.nextTick(wt,yn,vn),yn._writableState.errorEmitted=!0,yn.emit("error",rn)):(It(rn),yn._writableState.errorEmitted=!0,yn.emit("error",rn),wt(yn,vn))})(qt,St,Zt,Pt,tn);else{var mn=nn(St);mn||St.corked||St.bufferProcessing||!St.bufferedRequest||Lt(qt,St),Zt?st(pt,qt,St,mn,tn):pt(qt,St,mn,tn)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Rt(xt){if(it=it||s(23),!(yt.call(Rt,this)||this instanceof it))return new Rt(xt);this._writableState=new Ft(xt,this),this.writable=!0,xt&&(typeof xt.write=="function"&&(this._write=xt.write),typeof xt.writev=="function"&&(this._writev=xt.writev),typeof xt.destroy=="function"&&(this._destroy=xt.destroy),typeof xt.final=="function"&&(this._final=xt.final)),gt.call(this)}function Ot(xt,Nt,Tt,Vt,Xt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Tt?xt._writev(Xt,Nt.onwrite):xt._write(Xt,Gt,Nt.onwrite),Nt.sync=!1}function pt(xt,Nt,Tt,Vt){Tt||function(Xt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Xt.emit("drain"))}(xt,Nt),Nt.pendingcb--,Vt(),wt(xt,Nt)}function Lt(xt,Nt){Nt.bufferProcessing=!0;var Tt=Nt.bufferedRequest;if(xt._writev&&Tt&&Tt.next){var Vt=Nt.bufferedRequestCount,Xt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Tt;for(var Ut=0,Ht=!0;Tt;)Xt[Ut]=Tt,Tt.isBuf||(Ht=!1),Tt=Tt.next,Ut+=1;Xt.allBuffers=Ht,Ot(xt,Nt,!0,Nt.length,Xt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Tt;){var qt=Tt.chunk,Pt=Tt.encoding,St=Tt.callback;if(Ot(xt,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,St),Tt=Tt.next,Nt.bufferedRequestCount--,Nt.writing)break}Tt===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Tt,Nt.bufferProcessing=!1}function nn(xt){return xt.ending&&xt.length===0&&xt.bufferedRequest===null&&!xt.finished&&!xt.writing}function on(xt,Nt){xt._final(function(Tt){Nt.pendingcb--,Tt&&xt.emit("error",Tt),Nt.prefinished=!0,xt.emit("prefinish"),wt(xt,Nt)})}function wt(xt,Nt){var Tt=nn(Nt);return Tt&&(function(Vt,Xt){Xt.prefinished||Xt.finalCalled||(typeof Vt._final=="function"?(Xt.pendingcb++,Xt.finalCalled=!0,tt.nextTick(on,Vt,Xt)):(Xt.prefinished=!0,Vt.emit("prefinish")))}(xt,Nt),Nt.pendingcb===0&&(Nt.finished=!0,xt.emit("finish"))),Tt}ht.inherits(Rt,gt),Ft.prototype.getBuffer=function(){for(var xt=this.bufferedRequest,Nt=[];xt;)Nt.push(xt),xt=xt.next;return Nt},function(){try{Object.defineProperty(Ft.prototype,"buffer",{get:_t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Rt,Symbol.hasInstance,{value:function(xt){return!!yt.call(this,xt)||this===Rt&&xt&&xt._writableState instanceof Ft}})):yt=function(xt){return xt instanceof this},Rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Rt.prototype.write=function(xt,Nt,Tt){var Vt,Xt=this._writableState,Gt=!1,Ut=!Xt.objectMode&&(Vt=xt,ft.isBuffer(Vt)||Vt instanceof ut);return Ut&&!ft.isBuffer(xt)&&(xt=function(Ht){return ft.from(Ht)}(xt)),typeof Nt=="function"&&(Tt=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Xt.defaultEncoding),typeof Tt!="function"&&(Tt=Mt),Xt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Tt):(Ut||function(Ht,qt,Pt,St){var Zt=!0,tn=!1;return Pt===null?tn=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(tn=new TypeError("Invalid non-string/buffer chunk")),tn&&(Ht.emit("error",tn),tt.nextTick(St,tn),Zt=!1),Zt}(this,Xt,xt,Tt))&&(Xt.pendingcb++,Gt=function(Ht,qt,Pt,St,Zt,tn){if(!Pt){var mn=function(rn,It,Dt){return rn.objectMode||rn.decodeStrings===!1||typeof It!="string"||(It=ft.from(It,Dt)),It}(qt,St,Zt);St!==mn&&(Pt=!0,Zt="buffer",St=mn)}var yn=qt.objectMode?1:St.length;qt.length+=yn;var vn=qt.length<qt.highWaterMark;if(vn||(qt.needDrain=!0),qt.writing||qt.corked){var un=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:St,encoding:Zt,isBuf:Pt,callback:tn,next:null},un?un.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else Ot(Ht,qt,!1,yn,St,Zt,tn);return vn}(this,Xt,Ut,xt,Nt,Tt)),Gt},Rt.prototype.cork=function(){this._writableState.corked++},Rt.prototype.uncork=function(){var xt=this._writableState;xt.corked&&(xt.corked--,xt.writing||xt.corked||xt.finished||xt.bufferProcessing||!xt.bufferedRequest||Lt(this,xt))},Rt.prototype.setDefaultEncoding=function(xt){if(typeof xt=="string"&&(xt=xt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((xt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+xt);return this._writableState.defaultEncoding=xt,this},Object.defineProperty(Rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Rt.prototype._write=function(xt,Nt,Tt){Tt(new Error("_write() is not implemented"))},Rt.prototype._writev=null,Rt.prototype.end=function(xt,Nt,Tt){var Vt=this._writableState;typeof xt=="function"?(Tt=xt,xt=null,Nt=null):typeof Nt=="function"&&(Tt=Nt,Nt=null),xt!=null&&this.write(xt,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Xt,Gt,Ut){Gt.ending=!0,wt(Xt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Xt.once("finish",Ut)),Gt.ended=!0,Xt.writable=!1}(this,Vt,Tt)},Object.defineProperty(Rt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(xt){this._writableState&&(this._writableState.destroyed=xt)}}),Rt.prototype.destroy=Et.destroy,Rt.prototype._undestroy=Et.undestroy,Rt.prototype._destroy=function(xt,Nt){this.end(),Nt(xt)}}).call(this,s(2),s(15).setImmediate,s(6))},function(i,o,s){var _=s(26).codes.ERR_STREAM_PREMATURE_CLOSE;function $(){}i.exports=function et(tt,j,it){if(typeof j=="function")return et(tt,null,j);j||(j={}),it=function(Rt){var Ot=!1;return function(){if(!Ot){Ot=!0;for(var pt=arguments.length,Lt=new Array(pt),nn=0;nn<pt;nn++)Lt[nn]=arguments[nn];Rt.apply(this,Lt)}}}(it||$);var st=j.readable||j.readable!==!1&&tt.readable,ht=j.writable||j.writable!==!1&&tt.writable,_t=function(){tt.writable||ft()},gt=tt._writableState&&tt._writableState.finished,ft=function(){ht=!1,gt=!0,st||it.call(tt)},ut=tt._readableState&&tt._readableState.endEmitted,yt=function(){st=!1,ut=!0,ht||it.call(tt)},Et=function(Rt){it.call(tt,Rt)},Mt=function(){var Rt;return st&&!ut?(tt._readableState&&tt._readableState.ended||(Rt=new _),it.call(tt,Rt)):ht&&!gt?(tt._writableState&&tt._writableState.ended||(Rt=new _),it.call(tt,Rt)):void 0},Ft=function(){tt.req.on("finish",ft)};return function(Rt){return Rt.setHeader&&typeof Rt.abort=="function"}(tt)?(tt.on("complete",ft),tt.on("abort",Mt),tt.req?Ft():tt.on("request",Ft)):ht&&!tt._writableState&&(tt.on("end",_t),tt.on("close",_t)),tt.on("end",yt),tt.on("finish",ft),j.error!==!1&&tt.on("error",Et),tt.on("close",Mt),function(){tt.removeListener("complete",ft),tt.removeListener("abort",Mt),tt.removeListener("request",Ft),tt.req&&tt.req.removeListener("finish",ft),tt.removeListener("end",_t),tt.removeListener("close",_t),tt.removeListener("finish",ft),tt.removeListener("end",yt),tt.removeListener("error",Et),tt.removeListener("close",Mt)}}},function(i,o,s){var _=s(58),$=s(3).configs;o.cli=_.levels($.cli),o.npm=_.levels($.npm),o.syslog=_.levels($.syslog),o.addColors=_.levels},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=j(s(203)),$=j(s(204)),et=j(s(25)),tt=j(s(30));function j(it){return it&&it.__esModule?it:{default:it}}o.default=(0,tt.default)(function(it,st,ht){return(0,_.default)(it,(0,$.default)((0,et.default)(st)),ht)},3),i.exports=o.default},function(i,o,s){class _ extends Error{constructor(et,...tt){super(`env-var: ${et}`,...tt),Error.captureStackTrace&&Error.captureStackTrace(this,_),this.name="EnvVarError"}}i.exports=_},function(i,o,s){i.exports=function(_){const $=parseInt(_,10);if(isNaN($)||$.toString(10)!==_)throw new Error("should be a valid integer");return $}},function(i,o,s){i.exports=function(_){const $=parseFloat(_);if(isNaN($)||$.toString()!==_)throw new Error("should be a valid float");return $}},function(i,o,s){i.exports=function(_){try{return JSON.parse(_)}catch{throw new Error("should be valid (parseable) JSON")}}},function(i,o,s){(function(_){function $(j,it){for(var st=0,ht=j.length-1;ht>=0;ht--){var _t=j[ht];_t==="."?j.splice(ht,1):_t===".."?(j.splice(ht,1),st++):st&&(j.splice(ht,1),st--)}if(it)for(;st--;st)j.unshift("..");return j}function et(j,it){if(j.filter)return j.filter(it);for(var st=[],ht=0;ht<j.length;ht++)it(j[ht],ht,j)&&st.push(j[ht]);return st}o.resolve=function(){for(var j="",it=!1,st=arguments.length-1;st>=-1&&!it;st--){var ht=st>=0?arguments[st]:_.cwd();if(typeof ht!="string")throw new TypeError("Arguments to path.resolve must be strings");ht&&(j=ht+"/"+j,it=ht.charAt(0)==="/")}return(it?"/":"")+(j=$(et(j.split("/"),function(_t){return!!_t}),!it).join("/"))||"."},o.normalize=function(j){var it=o.isAbsolute(j),st=tt(j,-1)==="/";return(j=$(et(j.split("/"),function(ht){return!!ht}),!it).join("/"))||it||(j="."),j&&st&&(j+="/"),(it?"/":"")+j},o.isAbsolute=function(j){return j.charAt(0)==="/"},o.join=function(){var j=Array.prototype.slice.call(arguments,0);return o.normalize(et(j,function(it,st){if(typeof it!="string")throw new TypeError("Arguments to path.join must be strings");return it}).join("/"))},o.relative=function(j,it){function st(Et){for(var Mt=0;Mt<Et.length&&Et[Mt]==="";Mt++);for(var Ft=Et.length-1;Ft>=0&&Et[Ft]==="";Ft--);return Mt>Ft?[]:Et.slice(Mt,Ft-Mt+1)}j=o.resolve(j).substr(1),it=o.resolve(it).substr(1);for(var ht=st(j.split("/")),_t=st(it.split("/")),gt=Math.min(ht.length,_t.length),ft=gt,ut=0;ut<gt;ut++)if(ht[ut]!==_t[ut]){ft=ut;break}var yt=[];for(ut=ft;ut<ht.length;ut++)yt.push("..");return(yt=yt.concat(_t.slice(ft))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(j){if(typeof j!="string"&&(j+=""),j.length===0)return".";for(var it=j.charCodeAt(0),st=it===47,ht=-1,_t=!0,gt=j.length-1;gt>=1;--gt)if((it=j.charCodeAt(gt))===47){if(!_t){ht=gt;break}}else _t=!1;return ht===-1?st?"/":".":st&&ht===1?"/":j.slice(0,ht)},o.basename=function(j,it){var st=function(ht){typeof ht!="string"&&(ht+="");var _t,gt=0,ft=-1,ut=!0;for(_t=ht.length-1;_t>=0;--_t)if(ht.charCodeAt(_t)===47){if(!ut){gt=_t+1;break}}else ft===-1&&(ut=!1,ft=_t+1);return ft===-1?"":ht.slice(gt,ft)}(j);return it&&st.substr(-1*it.length)===it&&(st=st.substr(0,st.length-it.length)),st},o.extname=function(j){typeof j!="string"&&(j+="");for(var it=-1,st=0,ht=-1,_t=!0,gt=0,ft=j.length-1;ft>=0;--ft){var ut=j.charCodeAt(ft);if(ut!==47)ht===-1&&(_t=!1,ht=ft+1),ut===46?it===-1?it=ft:gt!==1&&(gt=1):it!==-1&&(gt=-1);else if(!_t){st=ft+1;break}}return it===-1||ht===-1||gt===0||gt===1&&it===ht-1&&it===st+1?"":j.slice(it,ht)};var tt="ab".substr(-1)==="b"?function(j,it,st){return j.substr(it,st)}:function(j,it,st){return it<0&&(it=j.length+it),j.substr(it,st)}}).call(this,s(2))},,function(i,o,s){var _=o.format=s(12);o.levels=s(105),Object.defineProperty(_,"align",{value:s(122)}),Object.defineProperty(_,"cli",{value:s(123)}),Object.defineProperty(_,"combine",{value:s(124)}),Object.defineProperty(_,"colorize",{value:s(41)}),Object.defineProperty(_,"json",{value:s(125)}),Object.defineProperty(_,"label",{value:s(128)}),Object.defineProperty(_,"logstash",{value:s(129)}),Object.defineProperty(_,"metadata",{value:s(130)}),Object.defineProperty(_,"padLevels",{value:s(60)}),Object.defineProperty(_,"prettyPrint",{value:s(131)}),Object.defineProperty(_,"printf",{value:s(132)}),Object.defineProperty(_,"simple",{value:s(133)}),Object.defineProperty(_,"splat",{value:s(134)}),Object.defineProperty(_,"timestamp",{value:s(135)}),Object.defineProperty(_,"uncolorize",{value:s(137)})},function(i,o,s){var _=s(106);i.exports=_},function(i,o,s){function _(gt){return function(ft){if(Array.isArray(ft))return $(ft)}(gt)||function(ft){if(typeof Symbol<"u"&&Symbol.iterator in Object(ft))return Array.from(ft)}(gt)||function(ft,ut){if(ft){if(typeof ft=="string")return $(ft,ut);var yt=Object.prototype.toString.call(ft).slice(8,-1);if(yt==="Object"&&ft.constructor&&(yt=ft.constructor.name),yt==="Map"||yt==="Set")return Array.from(ft);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return $(ft,ut)}}(gt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(gt,ft){(ft==null||ft>gt.length)&&(ft=gt.length);for(var ut=0,yt=new Array(ft);ut<ft;ut++)yt[ut]=gt[ut];return yt}function et(gt,ft){if(!(gt instanceof ft))throw new TypeError("Cannot call a class as a function")}function tt(gt,ft){for(var ut=0;ut<ft.length;ut++){var yt=ft[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(gt,yt.key,yt)}}var j=s(3),it=j.configs,st=j.LEVEL,ht=j.MESSAGE,_t=function(){function gt(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{levels:it.npm.levels};et(this,gt),this.paddings=gt.paddingForLevels(Et.levels,Et.filler),this.options=Et}var ft,ut,yt;return ft=gt,yt=[{key:"getLongestLevel",value:function(Et){var Mt=Object.keys(Et).map(function(Ft){return Ft.length});return Math.max.apply(Math,_(Mt))}},{key:"paddingForLevel",value:function(Et,Mt,Ft){var Rt=Ft+1-Et.length,Ot=Math.floor(Rt/Mt.length);return"".concat(Mt).concat(Mt.repeat(Ot)).slice(0,Rt)}},{key:"paddingForLevels",value:function(Et){var Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",Ft=gt.getLongestLevel(Et);return Object.keys(Et).reduce(function(Rt,Ot){return Rt[Ot]=gt.paddingForLevel(Ot,Mt,Ft),Rt},{})}}],(ut=[{key:"transform",value:function(Et,Mt){return Et.message="".concat(this.paddings[Et[st]]).concat(Et.message),Et[ht]&&(Et[ht]="".concat(this.paddings[Et[st]]).concat(Et[ht])),Et}}])&&tt(ft.prototype,ut),yt&&tt(ft,yt),gt}();i.exports=function(gt){return new _t(gt)},i.exports.Padder=i.exports.Format=_t},function(i,o,s){var _=s(13).format;o.warn={deprecated:function($){return function(){throw new Error(_("{ %s } was removed in winston@3.0.0.",$))}},useFormat:function($){return function(){throw new Error([_("{ %s } was removed in winston@3.0.0.",$),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions:function($,et,tt){tt.forEach(function(j){$[j]=o.warn[et](j)})},moved:function($,et,tt){function j(){return function(){throw new Error([_("winston.%s was moved in winston@3.0.0.",tt),_("Use a winston.%s instead.",et)].join(`
`))}}Object.defineProperty($,tt,{get:j,set:j})},forProperties:function($,et,tt){tt.forEach(function(j){var it=o.warn[et](j);Object.defineProperty($,j,{get:it,set:it})})}}},function(i,o,s){(function(_,$,et){var tt=s(16);function j(xt){var Nt=this;this.next=null,this.entry=null,this.finish=function(){(function(Tt,Vt,Xt){var Gt=Tt.entry;for(Tt.entry=null;Gt;){var Ut=Gt.callback;Vt.pendingcb--,Ut(Xt),Gt=Gt.next}Vt.corkedRequestsFree?Vt.corkedRequestsFree.next=Tt:Vt.corkedRequestsFree=Tt})(Nt,xt)}}i.exports=Rt;var it,st=!_.browser&&["v0.10","v0.9."].indexOf(_.version.slice(0,5))>-1?$:tt.nextTick;Rt.WritableState=Ft;var ht=Object.create(s(17));ht.inherits=s(7);var _t={deprecate:s(43)},gt=s(63),ft=s(44).Buffer,ut=et.Uint8Array||function(){},yt,Et=s(64);function Mt(){}function Ft(xt,Nt){it=it||s(36),xt=xt||{};var Tt=Nt instanceof it;this.objectMode=!!xt.objectMode,Tt&&(this.objectMode=this.objectMode||!!xt.writableObjectMode);var Vt=xt.highWaterMark,Xt=xt.writableHighWaterMark,Gt=this.objectMode?16:16384;this.highWaterMark=Vt||Vt===0?Vt:Tt&&(Xt||Xt===0)?Xt:Gt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ut=xt.decodeStrings===!1;this.decodeStrings=!Ut,this.defaultEncoding=xt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ht){(function(qt,Pt){var St=qt._writableState,Zt=St.sync,tn=St.writecb;if(function(yn){yn.writing=!1,yn.writecb=null,yn.length-=yn.writelen,yn.writelen=0}(St),Pt)(function(yn,vn,un,rn,It){--vn.pendingcb,un?(tt.nextTick(It,rn),tt.nextTick(wt,yn,vn),yn._writableState.errorEmitted=!0,yn.emit("error",rn)):(It(rn),yn._writableState.errorEmitted=!0,yn.emit("error",rn),wt(yn,vn))})(qt,St,Zt,Pt,tn);else{var mn=nn(St);mn||St.corked||St.bufferProcessing||!St.bufferedRequest||Lt(qt,St),Zt?st(pt,qt,St,mn,tn):pt(qt,St,mn,tn)}})(Nt,Ht)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new j(this)}function Rt(xt){if(it=it||s(36),!(yt.call(Rt,this)||this instanceof it))return new Rt(xt);this._writableState=new Ft(xt,this),this.writable=!0,xt&&(typeof xt.write=="function"&&(this._write=xt.write),typeof xt.writev=="function"&&(this._writev=xt.writev),typeof xt.destroy=="function"&&(this._destroy=xt.destroy),typeof xt.final=="function"&&(this._final=xt.final)),gt.call(this)}function Ot(xt,Nt,Tt,Vt,Xt,Gt,Ut){Nt.writelen=Vt,Nt.writecb=Ut,Nt.writing=!0,Nt.sync=!0,Tt?xt._writev(Xt,Nt.onwrite):xt._write(Xt,Gt,Nt.onwrite),Nt.sync=!1}function pt(xt,Nt,Tt,Vt){Tt||function(Xt,Gt){Gt.length===0&&Gt.needDrain&&(Gt.needDrain=!1,Xt.emit("drain"))}(xt,Nt),Nt.pendingcb--,Vt(),wt(xt,Nt)}function Lt(xt,Nt){Nt.bufferProcessing=!0;var Tt=Nt.bufferedRequest;if(xt._writev&&Tt&&Tt.next){var Vt=Nt.bufferedRequestCount,Xt=new Array(Vt),Gt=Nt.corkedRequestsFree;Gt.entry=Tt;for(var Ut=0,Ht=!0;Tt;)Xt[Ut]=Tt,Tt.isBuf||(Ht=!1),Tt=Tt.next,Ut+=1;Xt.allBuffers=Ht,Ot(xt,Nt,!0,Nt.length,Xt,"",Gt.finish),Nt.pendingcb++,Nt.lastBufferedRequest=null,Gt.next?(Nt.corkedRequestsFree=Gt.next,Gt.next=null):Nt.corkedRequestsFree=new j(Nt),Nt.bufferedRequestCount=0}else{for(;Tt;){var qt=Tt.chunk,Pt=Tt.encoding,St=Tt.callback;if(Ot(xt,Nt,!1,Nt.objectMode?1:qt.length,qt,Pt,St),Tt=Tt.next,Nt.bufferedRequestCount--,Nt.writing)break}Tt===null&&(Nt.lastBufferedRequest=null)}Nt.bufferedRequest=Tt,Nt.bufferProcessing=!1}function nn(xt){return xt.ending&&xt.length===0&&xt.bufferedRequest===null&&!xt.finished&&!xt.writing}function on(xt,Nt){xt._final(function(Tt){Nt.pendingcb--,Tt&&xt.emit("error",Tt),Nt.prefinished=!0,xt.emit("prefinish"),wt(xt,Nt)})}function wt(xt,Nt){var Tt=nn(Nt);return Tt&&(function(Vt,Xt){Xt.prefinished||Xt.finalCalled||(typeof Vt._final=="function"?(Xt.pendingcb++,Xt.finalCalled=!0,tt.nextTick(on,Vt,Xt)):(Xt.prefinished=!0,Vt.emit("prefinish")))}(xt,Nt),Nt.pendingcb===0&&(Nt.finished=!0,xt.emit("finish"))),Tt}ht.inherits(Rt,gt),Ft.prototype.getBuffer=function(){for(var xt=this.bufferedRequest,Nt=[];xt;)Nt.push(xt),xt=xt.next;return Nt},function(){try{Object.defineProperty(Ft.prototype,"buffer",{get:_t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Rt,Symbol.hasInstance,{value:function(xt){return!!yt.call(this,xt)||this===Rt&&xt&&xt._writableState instanceof Ft}})):yt=function(xt){return xt instanceof this},Rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Rt.prototype.write=function(xt,Nt,Tt){var Vt,Xt=this._writableState,Gt=!1,Ut=!Xt.objectMode&&(Vt=xt,ft.isBuffer(Vt)||Vt instanceof ut);return Ut&&!ft.isBuffer(xt)&&(xt=function(Ht){return ft.from(Ht)}(xt)),typeof Nt=="function"&&(Tt=Nt,Nt=null),Ut?Nt="buffer":Nt||(Nt=Xt.defaultEncoding),typeof Tt!="function"&&(Tt=Mt),Xt.ended?function(Ht,qt){var Pt=new Error("write after end");Ht.emit("error",Pt),tt.nextTick(qt,Pt)}(this,Tt):(Ut||function(Ht,qt,Pt,St){var Zt=!0,tn=!1;return Pt===null?tn=new TypeError("May not write null values to stream"):typeof Pt=="string"||Pt===void 0||qt.objectMode||(tn=new TypeError("Invalid non-string/buffer chunk")),tn&&(Ht.emit("error",tn),tt.nextTick(St,tn),Zt=!1),Zt}(this,Xt,xt,Tt))&&(Xt.pendingcb++,Gt=function(Ht,qt,Pt,St,Zt,tn){if(!Pt){var mn=function(rn,It,Dt){return rn.objectMode||rn.decodeStrings===!1||typeof It!="string"||(It=ft.from(It,Dt)),It}(qt,St,Zt);St!==mn&&(Pt=!0,Zt="buffer",St=mn)}var yn=qt.objectMode?1:St.length;qt.length+=yn;var vn=qt.length<qt.highWaterMark;if(vn||(qt.needDrain=!0),qt.writing||qt.corked){var un=qt.lastBufferedRequest;qt.lastBufferedRequest={chunk:St,encoding:Zt,isBuf:Pt,callback:tn,next:null},un?un.next=qt.lastBufferedRequest:qt.bufferedRequest=qt.lastBufferedRequest,qt.bufferedRequestCount+=1}else Ot(Ht,qt,!1,yn,St,Zt,tn);return vn}(this,Xt,Ut,xt,Nt,Tt)),Gt},Rt.prototype.cork=function(){this._writableState.corked++},Rt.prototype.uncork=function(){var xt=this._writableState;xt.corked&&(xt.corked--,xt.writing||xt.corked||xt.finished||xt.bufferProcessing||!xt.bufferedRequest||Lt(this,xt))},Rt.prototype.setDefaultEncoding=function(xt){if(typeof xt=="string"&&(xt=xt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((xt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+xt);return this._writableState.defaultEncoding=xt,this},Object.defineProperty(Rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Rt.prototype._write=function(xt,Nt,Tt){Tt(new Error("_write() is not implemented"))},Rt.prototype._writev=null,Rt.prototype.end=function(xt,Nt,Tt){var Vt=this._writableState;typeof xt=="function"?(Tt=xt,xt=null,Nt=null):typeof Nt=="function"&&(Tt=Nt,Nt=null),xt!=null&&this.write(xt,Nt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||Vt.finished||function(Xt,Gt,Ut){Gt.ending=!0,wt(Xt,Gt),Ut&&(Gt.finished?tt.nextTick(Ut):Xt.once("finish",Ut)),Gt.ended=!0,Xt.writable=!1}(this,Vt,Tt)},Object.defineProperty(Rt.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(xt){this._writableState&&(this._writableState.destroyed=xt)}}),Rt.prototype.destroy=Et.destroy,Rt.prototype._undestroy=Et.undestroy,Rt.prototype._destroy=function(xt,Nt){this.end(),Nt(xt)}}).call(this,s(2),s(15).setImmediate,s(6))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){var _=s(16);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o){},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(156)),$=tt(s(25)),et=tt(s(30));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)(function(j,it,st,ht){return(0,_.default)(it)(j,(0,$.default)(st),ht)},4),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){function $(...et){if(_!==null){var tt=_;_=null,tt.apply(this,et)}}return Object.assign($,_),$},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){if(_===null)throw new Error("Callback was already called.");var et=_;_=null,et.apply(this,$)}},i.exports=o.default},function(i,o,s){(function(_,$){var et=s(16);i.exports=Ot;var tt,j=s(42);Ot.ReadableState=Rt,s(21).EventEmitter;var it=function(Pt,St){return Pt.listeners(St).length},st=s(70),ht=s(47).Buffer,_t=_.Uint8Array||function(){},gt=s(17);gt.inherits=s(7);var ft=s(162),ut=void 0;ut=ft&&ft.debuglog?ft.debuglog("stream"):function(){};var yt,Et=s(163),Mt=s(71);gt.inherits(Ot,st);var Ft=["error","close","destroy","pause","resume"];function Rt(Pt,St){Pt=Pt||{};var Zt=St instanceof(tt=tt||s(23));this.objectMode=!!Pt.objectMode,Zt&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var tn=Pt.highWaterMark,mn=Pt.readableHighWaterMark,yn=this.objectMode?16:16384;this.highWaterMark=tn||tn===0?tn:Zt&&(mn||mn===0)?mn:yn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(22).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function Ot(Pt){if(tt=tt||s(23),!(this instanceof Ot))return new Ot(Pt);this._readableState=new Rt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function pt(Pt,St,Zt,tn,mn){var yn,vn=Pt._readableState;return St===null?(vn.reading=!1,function(un,rn){if(!rn.ended){if(rn.decoder){var It=rn.decoder.end();It&&It.length&&(rn.buffer.push(It),rn.length+=rn.objectMode?1:It.length)}rn.ended=!0,on(un)}}(Pt,vn)):(mn||(yn=function(un,rn){var It;Dt=rn,ht.isBuffer(Dt)||Dt instanceof _t||typeof rn=="string"||rn===void 0||un.objectMode||(It=new TypeError("Invalid non-string/buffer chunk"));var Dt;return It}(vn,St)),yn?Pt.emit("error",yn):vn.objectMode||St&&St.length>0?(typeof St=="string"||vn.objectMode||Object.getPrototypeOf(St)===ht.prototype||(St=function(un){return ht.from(un)}(St)),tn?vn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Lt(Pt,vn,St,!0):vn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(vn.reading=!1,vn.decoder&&!Zt?(St=vn.decoder.write(St),vn.objectMode||St.length!==0?Lt(Pt,vn,St,!1):xt(Pt,vn)):Lt(Pt,vn,St,!1))):tn||(vn.reading=!1)),function(un){return!un.ended&&(un.needReadable||un.length<un.highWaterMark||un.length===0)}(vn)}function Lt(Pt,St,Zt,tn){St.flowing&&St.length===0&&!St.sync?(Pt.emit("data",Zt),Pt.read(0)):(St.length+=St.objectMode?1:Zt.length,tn?St.buffer.unshift(Zt):St.buffer.push(Zt),St.needReadable&&on(Pt)),xt(Pt,St)}Object.defineProperty(Ot.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),Ot.prototype.destroy=Mt.destroy,Ot.prototype._undestroy=Mt.undestroy,Ot.prototype._destroy=function(Pt,St){this.push(null),St(Pt)},Ot.prototype.push=function(Pt,St){var Zt,tn=this._readableState;return tn.objectMode?Zt=!0:typeof Pt=="string"&&((St=St||tn.defaultEncoding)!==tn.encoding&&(Pt=ht.from(Pt,St),St=""),Zt=!0),pt(this,Pt,St,!1,Zt)},Ot.prototype.unshift=function(Pt){return pt(this,Pt,null,!0,!1)},Ot.prototype.isPaused=function(){return this._readableState.flowing===!1},Ot.prototype.setEncoding=function(Pt){return yt||(yt=s(22).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,St){return Pt<=0||St.length===0&&St.ended?0:St.objectMode?1:Pt!=Pt?St.flowing&&St.length?St.buffer.head.data.length:St.length:(Pt>St.highWaterMark&&(St.highWaterMark=function(Zt){return Zt>=8388608?Zt=8388608:(Zt--,Zt|=Zt>>>1,Zt|=Zt>>>2,Zt|=Zt>>>4,Zt|=Zt>>>8,Zt|=Zt>>>16,Zt++),Zt}(Pt)),Pt<=St.length?Pt:St.ended?St.length:(St.needReadable=!0,0))}function on(Pt){var St=Pt._readableState;St.needReadable=!1,St.emittedReadable||(ut("emitReadable",St.flowing),St.emittedReadable=!0,St.sync?et.nextTick(wt,Pt):wt(Pt))}function wt(Pt){ut("emit readable"),Pt.emit("readable"),Xt(Pt)}function xt(Pt,St){St.readingMore||(St.readingMore=!0,et.nextTick(Nt,Pt,St))}function Nt(Pt,St){for(var Zt=St.length;!St.reading&&!St.flowing&&!St.ended&&St.length<St.highWaterMark&&(ut("maybeReadMore read 0"),Pt.read(0),Zt!==St.length);)Zt=St.length;St.readingMore=!1}function Tt(Pt){ut("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,St){St.reading||(ut("resume read 0"),Pt.read(0)),St.resumeScheduled=!1,St.awaitDrain=0,Pt.emit("resume"),Xt(Pt),St.flowing&&!St.reading&&Pt.read(0)}function Xt(Pt){var St=Pt._readableState;for(ut("flow",St.flowing);St.flowing&&Pt.read()!==null;);}function Gt(Pt,St){return St.length===0?null:(St.objectMode?Zt=St.buffer.shift():!Pt||Pt>=St.length?(Zt=St.decoder?St.buffer.join(""):St.buffer.length===1?St.buffer.head.data:St.buffer.concat(St.length),St.buffer.clear()):Zt=function(tn,mn,yn){var vn;return tn<mn.head.data.length?(vn=mn.head.data.slice(0,tn),mn.head.data=mn.head.data.slice(tn)):vn=tn===mn.head.data.length?mn.shift():yn?function(un,rn){var It=rn.head,Dt=1,Kt=It.data;for(un-=Kt.length;It=It.next;){var gn=It.data,hn=un>gn.length?gn.length:un;if(hn===gn.length?Kt+=gn:Kt+=gn.slice(0,un),(un-=hn)===0){hn===gn.length?(++Dt,It.next?rn.head=It.next:rn.head=rn.tail=null):(rn.head=It,It.data=gn.slice(hn));break}++Dt}return rn.length-=Dt,Kt}(tn,mn):function(un,rn){var It=ht.allocUnsafe(un),Dt=rn.head,Kt=1;for(Dt.data.copy(It),un-=Dt.data.length;Dt=Dt.next;){var gn=Dt.data,hn=un>gn.length?gn.length:un;if(gn.copy(It,It.length-un,0,hn),(un-=hn)===0){hn===gn.length?(++Kt,Dt.next?rn.head=Dt.next:rn.head=rn.tail=null):(rn.head=Dt,Dt.data=gn.slice(hn));break}++Kt}return rn.length-=Kt,It}(tn,mn),vn}(Pt,St.buffer,St.decoder),Zt);var Zt}function Ut(Pt){var St=Pt._readableState;if(St.length>0)throw new Error('"endReadable()" called on non-empty stream');St.endEmitted||(St.ended=!0,et.nextTick(Ht,St,Pt))}function Ht(Pt,St){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,St.readable=!1,St.emit("end"))}function qt(Pt,St){for(var Zt=0,tn=Pt.length;Zt<tn;Zt++)if(Pt[Zt]===St)return Zt;return-1}Ot.prototype.read=function(Pt){ut("read",Pt),Pt=parseInt(Pt,10);var St=this._readableState,Zt=Pt;if(Pt!==0&&(St.emittedReadable=!1),Pt===0&&St.needReadable&&(St.length>=St.highWaterMark||St.ended))return ut("read: emitReadable",St.length,St.ended),St.length===0&&St.ended?Ut(this):on(this),null;if((Pt=nn(Pt,St))===0&&St.ended)return St.length===0&&Ut(this),null;var tn,mn=St.needReadable;return ut("need readable",mn),(St.length===0||St.length-Pt<St.highWaterMark)&&ut("length less than watermark",mn=!0),St.ended||St.reading?ut("reading or ended",mn=!1):mn&&(ut("do read"),St.reading=!0,St.sync=!0,St.length===0&&(St.needReadable=!0),this._read(St.highWaterMark),St.sync=!1,St.reading||(Pt=nn(Zt,St))),(tn=Pt>0?Gt(Pt,St):null)===null?(St.needReadable=!0,Pt=0):St.length-=Pt,St.length===0&&(St.ended||(St.needReadable=!0),Zt!==Pt&&St.ended&&Ut(this)),tn!==null&&this.emit("data",tn),tn},Ot.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},Ot.prototype.pipe=function(Pt,St){var Zt=this,tn=this._readableState;switch(tn.pipesCount){case 0:tn.pipes=Pt;break;case 1:tn.pipes=[tn.pipes,Pt];break;default:tn.pipes.push(Pt)}tn.pipesCount+=1,ut("pipe count=%d opts=%j",tn.pipesCount,St);var mn=(!St||St.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?vn:xn;function yn(Mn,qn){ut("onunpipe"),Mn===Zt&&qn&&qn.hasUnpiped===!1&&(qn.hasUnpiped=!0,ut("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",un),Pt.removeListener("error",Kt),Pt.removeListener("unpipe",yn),Zt.removeListener("end",vn),Zt.removeListener("end",xn),Zt.removeListener("data",Dt),rn=!0,!tn.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||un())}function vn(){ut("onend"),Pt.end()}tn.endEmitted?et.nextTick(mn):Zt.once("end",mn),Pt.on("unpipe",yn);var un=function(Mn){return function(){var qn=Mn._readableState;ut("pipeOnDrain",qn.awaitDrain),qn.awaitDrain&&qn.awaitDrain--,qn.awaitDrain===0&&it(Mn,"data")&&(qn.flowing=!0,Xt(Mn))}}(Zt);Pt.on("drain",un);var rn=!1,It=!1;function Dt(Mn){ut("ondata"),It=!1,Pt.write(Mn)!==!1||It||((tn.pipesCount===1&&tn.pipes===Pt||tn.pipesCount>1&&qt(tn.pipes,Pt)!==-1)&&!rn&&(ut("false write response, pause",Zt._readableState.awaitDrain),Zt._readableState.awaitDrain++,It=!0),Zt.pause())}function Kt(Mn){ut("onerror",Mn),xn(),Pt.removeListener("error",Kt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),xn()}function hn(){ut("onfinish"),Pt.removeListener("close",gn),xn()}function xn(){ut("unpipe"),Zt.unpipe(Pt)}return Zt.on("data",Dt),function(Mn,qn,Ir){if(typeof Mn.prependListener=="function")return Mn.prependListener(qn,Ir);Mn._events&&Mn._events[qn]?j(Mn._events[qn])?Mn._events[qn].unshift(Ir):Mn._events[qn]=[Ir,Mn._events[qn]]:Mn.on(qn,Ir)}(Pt,"error",Kt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",Zt),tn.flowing||(ut("pipe resume"),Zt.resume()),Pt},Ot.prototype.unpipe=function(Pt){var St=this._readableState,Zt={hasUnpiped:!1};if(St.pipesCount===0)return this;if(St.pipesCount===1)return Pt&&Pt!==St.pipes||(Pt||(Pt=St.pipes),St.pipes=null,St.pipesCount=0,St.flowing=!1,Pt&&Pt.emit("unpipe",this,Zt)),this;if(!Pt){var tn=St.pipes,mn=St.pipesCount;St.pipes=null,St.pipesCount=0,St.flowing=!1;for(var yn=0;yn<mn;yn++)tn[yn].emit("unpipe",this,Zt);return this}var vn=qt(St.pipes,Pt);return vn===-1||(St.pipes.splice(vn,1),St.pipesCount-=1,St.pipesCount===1&&(St.pipes=St.pipes[0]),Pt.emit("unpipe",this,Zt)),this},Ot.prototype.on=function(Pt,St){var Zt=st.prototype.on.call(this,Pt,St);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var tn=this._readableState;tn.endEmitted||tn.readableListening||(tn.readableListening=tn.needReadable=!0,tn.emittedReadable=!1,tn.reading?tn.length&&on(this):et.nextTick(Tt,this))}return Zt},Ot.prototype.addListener=Ot.prototype.on,Ot.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ut("resume"),Pt.flowing=!0,function(St,Zt){Zt.resumeScheduled||(Zt.resumeScheduled=!0,et.nextTick(Vt,St,Zt))}(this,Pt)),this},Ot.prototype.pause=function(){return ut("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ut("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ot.prototype.wrap=function(Pt){var St=this,Zt=this._readableState,tn=!1;for(var mn in Pt.on("end",function(){if(ut("wrapped end"),Zt.decoder&&!Zt.ended){var vn=Zt.decoder.end();vn&&vn.length&&St.push(vn)}St.push(null)}),Pt.on("data",function(vn){ut("wrapped data"),Zt.decoder&&(vn=Zt.decoder.write(vn)),Zt.objectMode&&vn==null||(Zt.objectMode||vn&&vn.length)&&(St.push(vn)||(tn=!0,Pt.pause()))}),Pt)this[mn]===void 0&&typeof Pt[mn]=="function"&&(this[mn]=function(vn){return function(){return Pt[vn].apply(Pt,arguments)}}(mn));for(var yn=0;yn<Ft.length;yn++)Pt.on(Ft[yn],this.emit.bind(this,Ft[yn]));return this._read=function(vn){ut("wrapped _read",vn),tn&&(tn=!1,Pt.resume())},this},Object.defineProperty(Ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Ot._fromList=Gt}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){var _=s(16);function $(et,tt){et.emit("error",tt)}i.exports={destroy:function(et,tt){var j=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(tt?tt(et):!et||this._writableState&&this._writableState.errorEmitted||_.nextTick($,this,et),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(ht){!tt&&ht?(_.nextTick($,j,ht),j._writableState&&(j._writableState.errorEmitted=!0)):tt&&tt(ht)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(i,o,s){i.exports=tt;var _=s(23),$=s(17);function et(st,ht){var _t=this._transformState;_t.transforming=!1;var gt=_t.writecb;if(!gt)return this.emit("error",new Error("write callback called multiple times"));_t.writechunk=null,_t.writecb=null,ht!=null&&this.push(ht),gt(st);var ft=this._readableState;ft.reading=!1,(ft.needReadable||ft.length<ft.highWaterMark)&&this._read(ft.highWaterMark)}function tt(st){if(!(this instanceof tt))return new tt(st);_.call(this,st),this._transformState={afterTransform:et.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,st&&(typeof st.transform=="function"&&(this._transform=st.transform),typeof st.flush=="function"&&(this._flush=st.flush)),this.on("prefinish",j)}function j(){var st=this;typeof this._flush=="function"?this._flush(function(ht,_t){it(st,ht,_t)}):it(this,null,null)}function it(st,ht,_t){if(ht)return st.emit("error",ht);if(_t!=null&&st.push(_t),st._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(st._transformState.transforming)throw new Error("Calling transform done when still transforming");return st.push(null)}$.inherits=s(7),$.inherits(tt,_),tt.prototype.push=function(st,ht){return this._transformState.needTransform=!1,_.prototype.push.call(this,st,ht)},tt.prototype._transform=function(st,ht,_t){throw new Error("_transform() is not implemented")},tt.prototype._write=function(st,ht,_t){var gt=this._transformState;if(gt.writecb=_t,gt.writechunk=st,gt.writeencoding=ht,!gt.transforming){var ft=this._readableState;(gt.needTransform||ft.needReadable||ft.length<ft.highWaterMark)&&this._read(ft.highWaterMark)}},tt.prototype._read=function(st){var ht=this._transformState;ht.writechunk!==null&&ht.writecb&&!ht.transforming?(ht.transforming=!0,this._transform(ht.writechunk,ht.writeencoding,ht.afterTransform)):ht.needTransform=!0},tt.prototype._destroy=function(st,ht){var _t=this;_.prototype._destroy.call(this,st,function(gt){ht(gt),_t.emit("close")})}},function(i,o,s){i.exports=s(48)},function(i,o,s){(function(_){var $=s(170);function et(wt,xt){if(wt===xt)return 0;for(var Nt=wt.length,Tt=xt.length,Vt=0,Xt=Math.min(Nt,Tt);Vt<Xt;++Vt)if(wt[Vt]!==xt[Vt]){Nt=wt[Vt],Tt=xt[Vt];break}return Nt<Tt?-1:Tt<Nt?1:0}function tt(wt){return _.Buffer&&typeof _.Buffer.isBuffer=="function"?_.Buffer.isBuffer(wt):!(wt==null||!wt._isBuffer)}var j=s(13),it=Object.prototype.hasOwnProperty,st=Array.prototype.slice,ht=function(){}.name==="foo";function _t(wt){return Object.prototype.toString.call(wt)}function gt(wt){return!tt(wt)&&typeof _.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(wt):!!wt&&(wt instanceof DataView||!!(wt.buffer&&wt.buffer instanceof ArrayBuffer)))}var ft=i.exports=Rt,ut=/\s*function\s+([^\(\s]*)\s*/;function yt(wt){if(j.isFunction(wt)){if(ht)return wt.name;var xt=wt.toString().match(ut);return xt&&xt[1]}}function Et(wt,xt){return typeof wt=="string"?wt.length<xt?wt:wt.slice(0,xt):wt}function Mt(wt){if(ht||!j.isFunction(wt))return j.inspect(wt);var xt=yt(wt);return"[Function"+(xt?": "+xt:"")+"]"}function Ft(wt,xt,Nt,Tt,Vt){throw new ft.AssertionError({message:Nt,actual:wt,expected:xt,operator:Tt,stackStartFunction:Vt})}function Rt(wt,xt){wt||Ft(wt,!0,xt,"==",ft.ok)}function Ot(wt,xt,Nt,Tt){if(wt===xt)return!0;if(tt(wt)&&tt(xt))return et(wt,xt)===0;if(j.isDate(wt)&&j.isDate(xt))return wt.getTime()===xt.getTime();if(j.isRegExp(wt)&&j.isRegExp(xt))return wt.source===xt.source&&wt.global===xt.global&&wt.multiline===xt.multiline&&wt.lastIndex===xt.lastIndex&&wt.ignoreCase===xt.ignoreCase;if(wt!==null&&typeof wt=="object"||xt!==null&&typeof xt=="object"){if(gt(wt)&&gt(xt)&&_t(wt)===_t(xt)&&!(wt instanceof Float32Array||wt instanceof Float64Array))return et(new Uint8Array(wt.buffer),new Uint8Array(xt.buffer))===0;if(tt(wt)!==tt(xt))return!1;var Vt=(Tt=Tt||{actual:[],expected:[]}).actual.indexOf(wt);return Vt!==-1&&Vt===Tt.expected.indexOf(xt)||(Tt.actual.push(wt),Tt.expected.push(xt),function(Xt,Gt,Ut,Ht){if(Xt==null||Gt==null)return!1;if(j.isPrimitive(Xt)||j.isPrimitive(Gt))return Xt===Gt;if(Ut&&Object.getPrototypeOf(Xt)!==Object.getPrototypeOf(Gt))return!1;var qt=pt(Xt),Pt=pt(Gt);if(qt&&!Pt||!qt&&Pt)return!1;if(qt)return Xt=st.call(Xt),Gt=st.call(Gt),Ot(Xt,Gt,Ut);var St,Zt,tn=on(Xt),mn=on(Gt);if(tn.length!==mn.length)return!1;for(tn.sort(),mn.sort(),Zt=tn.length-1;Zt>=0;Zt--)if(tn[Zt]!==mn[Zt])return!1;for(Zt=tn.length-1;Zt>=0;Zt--)if(St=tn[Zt],!Ot(Xt[St],Gt[St],Ut,Ht))return!1;return!0}(wt,xt,Nt,Tt))}return Nt?wt===xt:wt==xt}function pt(wt){return Object.prototype.toString.call(wt)=="[object Arguments]"}function Lt(wt,xt){if(!wt||!xt)return!1;if(Object.prototype.toString.call(xt)=="[object RegExp]")return xt.test(wt);try{if(wt instanceof xt)return!0}catch{}return!Error.isPrototypeOf(xt)&&xt.call({},wt)===!0}function nn(wt,xt,Nt,Tt){var Vt;if(typeof xt!="function")throw new TypeError('"block" argument must be a function');typeof Nt=="string"&&(Tt=Nt,Nt=null),Vt=function(Ut){var Ht;try{Ut()}catch(qt){Ht=qt}return Ht}(xt),Tt=(Nt&&Nt.name?" ("+Nt.name+").":".")+(Tt?" "+Tt:"."),wt&&!Vt&&Ft(Vt,Nt,"Missing expected exception"+Tt);var Xt=typeof Tt=="string",Gt=!wt&&Vt&&!Nt;if((!wt&&j.isError(Vt)&&Xt&&Lt(Vt,Nt)||Gt)&&Ft(Vt,Nt,"Got unwanted exception"+Tt),wt&&Vt&&Nt&&!Lt(Vt,Nt)||!wt&&Vt)throw Vt}ft.AssertionError=function(wt){this.name="AssertionError",this.actual=wt.actual,this.expected=wt.expected,this.operator=wt.operator,wt.message?(this.message=wt.message,this.generatedMessage=!1):(this.message=function(Ut){return Et(Mt(Ut.actual),128)+" "+Ut.operator+" "+Et(Mt(Ut.expected),128)}(this),this.generatedMessage=!0);var xt=wt.stackStartFunction||Ft;if(Error.captureStackTrace)Error.captureStackTrace(this,xt);else{var Nt=new Error;if(Nt.stack){var Tt=Nt.stack,Vt=yt(xt),Xt=Tt.indexOf(`
`+Vt);if(Xt>=0){var Gt=Tt.indexOf(`
`,Xt+1);Tt=Tt.substring(Gt+1)}this.stack=Tt}}},j.inherits(ft.AssertionError,Error),ft.fail=Ft,ft.ok=Rt,ft.equal=function(wt,xt,Nt){wt!=xt&&Ft(wt,xt,Nt,"==",ft.equal)},ft.notEqual=function(wt,xt,Nt){wt==xt&&Ft(wt,xt,Nt,"!=",ft.notEqual)},ft.deepEqual=function(wt,xt,Nt){Ot(wt,xt,!1)||Ft(wt,xt,Nt,"deepEqual",ft.deepEqual)},ft.deepStrictEqual=function(wt,xt,Nt){Ot(wt,xt,!0)||Ft(wt,xt,Nt,"deepStrictEqual",ft.deepStrictEqual)},ft.notDeepEqual=function(wt,xt,Nt){Ot(wt,xt,!1)&&Ft(wt,xt,Nt,"notDeepEqual",ft.notDeepEqual)},ft.notDeepStrictEqual=function wt(xt,Nt,Tt){Ot(xt,Nt,!0)&&Ft(xt,Nt,Tt,"notDeepStrictEqual",wt)},ft.strictEqual=function(wt,xt,Nt){wt!==xt&&Ft(wt,xt,Nt,"===",ft.strictEqual)},ft.notStrictEqual=function(wt,xt,Nt){wt===xt&&Ft(wt,xt,Nt,"!==",ft.notStrictEqual)},ft.throws=function(wt,xt,Nt){nn(!0,wt,xt,Nt)},ft.doesNotThrow=function(wt,xt,Nt){nn(!1,wt,xt,Nt)},ft.ifError=function(wt){if(wt)throw wt},ft.strict=$(function wt(xt,Nt){xt||Ft(xt,!0,Nt,"==",wt)},ft,{equal:ft.strictEqual,deepEqual:ft.deepStrictEqual,notEqual:ft.notStrictEqual,notDeepEqual:ft.notDeepStrictEqual}),ft.strict.strict=ft.strict;var on=Object.keys||function(wt){var xt=[];for(var Nt in wt)it.call(wt,Nt)&&xt.push(Nt);return xt}}).call(this,s(6))},function(i,o,s){i.exports=function(_,$,et,tt){for(var j=65535&_|0,it=_>>>16&65535|0,st=0;et!==0;){et-=st=et>2e3?2e3:et;do it=it+(j=j+$[tt++]|0)|0;while(--st);j%=65521,it%=65521}return j|it<<16|0}},function(i,o,s){var _=function(){for(var $,et=[],tt=0;tt<256;tt++){$=tt;for(var j=0;j<8;j++)$=1&$?3988292384^$>>>1:$>>>1;et[tt]=$}return et}();i.exports=function($,et,tt,j){var it=_,st=j+tt;$^=-1;for(var ht=j;ht<st;ht++)$=$>>>8^it[255&($^et[ht])];return-1^$}},function(i,o,s){(function(_,$){var et;i.exports=xt,xt.ReadableState=wt,s(21).EventEmitter;var tt=function(un,rn){return un.listeners(rn).length},j=s(78),it=s(5).Buffer,st=_.Uint8Array||function(){},ht,_t=s(179);ht=_t&&_t.debuglog?_t.debuglog("stream"):function(){};var gt,ft,ut,yt=s(180),Et=s(79),Mt=s(80).getHighWaterMark,Ft=s(26).codes,Rt=Ft.ERR_INVALID_ARG_TYPE,Ot=Ft.ERR_STREAM_PUSH_AFTER_EOF,pt=Ft.ERR_METHOD_NOT_IMPLEMENTED,Lt=Ft.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s(7)(xt,j);var nn=Et.errorOrDestroy,on=["error","close","destroy","pause","resume"];function wt(un,rn,It){et=et||s(27),un=un||{},typeof It!="boolean"&&(It=rn instanceof et),this.objectMode=!!un.objectMode,It&&(this.objectMode=this.objectMode||!!un.readableObjectMode),this.highWaterMark=Mt(this,un,"readableHighWaterMark",It),this.buffer=new yt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=un.emitClose!==!1,this.autoDestroy=!!un.autoDestroy,this.destroyed=!1,this.defaultEncoding=un.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,un.encoding&&(gt||(gt=s(22).StringDecoder),this.decoder=new gt(un.encoding),this.encoding=un.encoding)}function xt(un){if(et=et||s(27),!(this instanceof xt))return new xt(un);var rn=this instanceof et;this._readableState=new wt(un,this,rn),this.readable=!0,un&&(typeof un.read=="function"&&(this._read=un.read),typeof un.destroy=="function"&&(this._destroy=un.destroy)),j.call(this)}function Nt(un,rn,It,Dt,Kt){ht("readableAddChunk",rn);var gn,hn=un._readableState;if(rn===null)hn.reading=!1,function(xn,Mn){if(ht("onEofChunk"),!Mn.ended){if(Mn.decoder){var qn=Mn.decoder.end();qn&&qn.length&&(Mn.buffer.push(qn),Mn.length+=Mn.objectMode?1:qn.length)}Mn.ended=!0,Mn.sync?Xt(xn):(Mn.needReadable=!1,Mn.emittedReadable||(Mn.emittedReadable=!0,Gt(xn)))}}(un,hn);else if(Kt||(gn=function(xn,Mn){var qn;Ir=Mn,it.isBuffer(Ir)||Ir instanceof st||typeof Mn=="string"||Mn===void 0||xn.objectMode||(qn=new Rt("chunk",["string","Buffer","Uint8Array"],Mn));var Ir;return qn}(hn,rn)),gn)nn(un,gn);else if(hn.objectMode||rn&&rn.length>0)if(typeof rn=="string"||hn.objectMode||Object.getPrototypeOf(rn)===it.prototype||(rn=function(xn){return it.from(xn)}(rn)),Dt)hn.endEmitted?nn(un,new Lt):Tt(un,hn,rn,!0);else if(hn.ended)nn(un,new Ot);else{if(hn.destroyed)return!1;hn.reading=!1,hn.decoder&&!It?(rn=hn.decoder.write(rn),hn.objectMode||rn.length!==0?Tt(un,hn,rn,!1):Ut(un,hn)):Tt(un,hn,rn,!1)}else Dt||(hn.reading=!1,Ut(un,hn));return!hn.ended&&(hn.length<hn.highWaterMark||hn.length===0)}function Tt(un,rn,It,Dt){rn.flowing&&rn.length===0&&!rn.sync?(rn.awaitDrain=0,un.emit("data",It)):(rn.length+=rn.objectMode?1:It.length,Dt?rn.buffer.unshift(It):rn.buffer.push(It),rn.needReadable&&Xt(un)),Ut(un,rn)}Object.defineProperty(xt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(un){this._readableState&&(this._readableState.destroyed=un)}}),xt.prototype.destroy=Et.destroy,xt.prototype._undestroy=Et.undestroy,xt.prototype._destroy=function(un,rn){rn(un)},xt.prototype.push=function(un,rn){var It,Dt=this._readableState;return Dt.objectMode?It=!0:typeof un=="string"&&((rn=rn||Dt.defaultEncoding)!==Dt.encoding&&(un=it.from(un,rn),rn=""),It=!0),Nt(this,un,rn,!1,It)},xt.prototype.unshift=function(un){return Nt(this,un,null,!0,!1)},xt.prototype.isPaused=function(){return this._readableState.flowing===!1},xt.prototype.setEncoding=function(un){gt||(gt=s(22).StringDecoder);var rn=new gt(un);this._readableState.decoder=rn,this._readableState.encoding=this._readableState.decoder.encoding;for(var It=this._readableState.buffer.head,Dt="";It!==null;)Dt+=rn.write(It.data),It=It.next;return this._readableState.buffer.clear(),Dt!==""&&this._readableState.buffer.push(Dt),this._readableState.length=Dt.length,this};function Vt(un,rn){return un<=0||rn.length===0&&rn.ended?0:rn.objectMode?1:un!=un?rn.flowing&&rn.length?rn.buffer.head.data.length:rn.length:(un>rn.highWaterMark&&(rn.highWaterMark=function(It){return It>=1073741824?It=1073741824:(It--,It|=It>>>1,It|=It>>>2,It|=It>>>4,It|=It>>>8,It|=It>>>16,It++),It}(un)),un<=rn.length?un:rn.ended?rn.length:(rn.needReadable=!0,0))}function Xt(un){var rn=un._readableState;ht("emitReadable",rn.needReadable,rn.emittedReadable),rn.needReadable=!1,rn.emittedReadable||(ht("emitReadable",rn.flowing),rn.emittedReadable=!0,$.nextTick(Gt,un))}function Gt(un){var rn=un._readableState;ht("emitReadable_",rn.destroyed,rn.length,rn.ended),rn.destroyed||!rn.length&&!rn.ended||(un.emit("readable"),rn.emittedReadable=!1),rn.needReadable=!rn.flowing&&!rn.ended&&rn.length<=rn.highWaterMark,Zt(un)}function Ut(un,rn){rn.readingMore||(rn.readingMore=!0,$.nextTick(Ht,un,rn))}function Ht(un,rn){for(;!rn.reading&&!rn.ended&&(rn.length<rn.highWaterMark||rn.flowing&&rn.length===0);){var It=rn.length;if(ht("maybeReadMore read 0"),un.read(0),It===rn.length)break}rn.readingMore=!1}function qt(un){var rn=un._readableState;rn.readableListening=un.listenerCount("readable")>0,rn.resumeScheduled&&!rn.paused?rn.flowing=!0:un.listenerCount("data")>0&&un.resume()}function Pt(un){ht("readable nexttick read 0"),un.read(0)}function St(un,rn){ht("resume",rn.reading),rn.reading||un.read(0),rn.resumeScheduled=!1,un.emit("resume"),Zt(un),rn.flowing&&!rn.reading&&un.read(0)}function Zt(un){var rn=un._readableState;for(ht("flow",rn.flowing);rn.flowing&&un.read()!==null;);}function tn(un,rn){return rn.length===0?null:(rn.objectMode?It=rn.buffer.shift():!un||un>=rn.length?(It=rn.decoder?rn.buffer.join(""):rn.buffer.length===1?rn.buffer.first():rn.buffer.concat(rn.length),rn.buffer.clear()):It=rn.buffer.consume(un,rn.decoder),It);var It}function mn(un){var rn=un._readableState;ht("endReadable",rn.endEmitted),rn.endEmitted||(rn.ended=!0,$.nextTick(yn,rn,un))}function yn(un,rn){if(ht("endReadableNT",un.endEmitted,un.length),!un.endEmitted&&un.length===0&&(un.endEmitted=!0,rn.readable=!1,rn.emit("end"),un.autoDestroy)){var It=rn._writableState;(!It||It.autoDestroy&&It.finished)&&rn.destroy()}}function vn(un,rn){for(var It=0,Dt=un.length;It<Dt;It++)if(un[It]===rn)return It;return-1}xt.prototype.read=function(un){ht("read",un),un=parseInt(un,10);var rn=this._readableState,It=un;if(un!==0&&(rn.emittedReadable=!1),un===0&&rn.needReadable&&((rn.highWaterMark!==0?rn.length>=rn.highWaterMark:rn.length>0)||rn.ended))return ht("read: emitReadable",rn.length,rn.ended),rn.length===0&&rn.ended?mn(this):Xt(this),null;if((un=Vt(un,rn))===0&&rn.ended)return rn.length===0&&mn(this),null;var Dt,Kt=rn.needReadable;return ht("need readable",Kt),(rn.length===0||rn.length-un<rn.highWaterMark)&&ht("length less than watermark",Kt=!0),rn.ended||rn.reading?ht("reading or ended",Kt=!1):Kt&&(ht("do read"),rn.reading=!0,rn.sync=!0,rn.length===0&&(rn.needReadable=!0),this._read(rn.highWaterMark),rn.sync=!1,rn.reading||(un=Vt(It,rn))),(Dt=un>0?tn(un,rn):null)===null?(rn.needReadable=rn.length<=rn.highWaterMark,un=0):(rn.length-=un,rn.awaitDrain=0),rn.length===0&&(rn.ended||(rn.needReadable=!0),It!==un&&rn.ended&&mn(this)),Dt!==null&&this.emit("data",Dt),Dt},xt.prototype._read=function(un){nn(this,new pt("_read()"))},xt.prototype.pipe=function(un,rn){var It=this,Dt=this._readableState;switch(Dt.pipesCount){case 0:Dt.pipes=un;break;case 1:Dt.pipes=[Dt.pipes,un];break;default:Dt.pipes.push(un)}Dt.pipesCount+=1,ht("pipe count=%d opts=%j",Dt.pipesCount,rn);var Kt=(!rn||rn.end!==!1)&&un!==$.stdout&&un!==$.stderr?hn:fo;function gn(Gr,Yr){ht("onunpipe"),Gr===It&&Yr&&Yr.hasUnpiped===!1&&(Yr.hasUnpiped=!0,ht("cleanup"),un.removeListener("close",_i),un.removeListener("finish",Ur),un.removeListener("drain",xn),un.removeListener("error",Ir),un.removeListener("unpipe",gn),It.removeListener("end",hn),It.removeListener("end",fo),It.removeListener("data",qn),Mn=!0,!Dt.awaitDrain||un._writableState&&!un._writableState.needDrain||xn())}function hn(){ht("onend"),un.end()}Dt.endEmitted?$.nextTick(Kt):It.once("end",Kt),un.on("unpipe",gn);var xn=function(Gr){return function(){var Yr=Gr._readableState;ht("pipeOnDrain",Yr.awaitDrain),Yr.awaitDrain&&Yr.awaitDrain--,Yr.awaitDrain===0&&tt(Gr,"data")&&(Yr.flowing=!0,Zt(Gr))}}(It);un.on("drain",xn);var Mn=!1;function qn(Gr){ht("ondata");var Yr=un.write(Gr);ht("dest.write",Yr),Yr===!1&&((Dt.pipesCount===1&&Dt.pipes===un||Dt.pipesCount>1&&vn(Dt.pipes,un)!==-1)&&!Mn&&(ht("false write response, pause",Dt.awaitDrain),Dt.awaitDrain++),It.pause())}function Ir(Gr){ht("onerror",Gr),fo(),un.removeListener("error",Ir),tt(un,"error")===0&&nn(un,Gr)}function _i(){un.removeListener("finish",Ur),fo()}function Ur(){ht("onfinish"),un.removeListener("close",_i),fo()}function fo(){ht("unpipe"),It.unpipe(un)}return It.on("data",qn),function(Gr,Yr,to){if(typeof Gr.prependListener=="function")return Gr.prependListener(Yr,to);Gr._events&&Gr._events[Yr]?Array.isArray(Gr._events[Yr])?Gr._events[Yr].unshift(to):Gr._events[Yr]=[to,Gr._events[Yr]]:Gr.on(Yr,to)}(un,"error",Ir),un.once("close",_i),un.once("finish",Ur),un.emit("pipe",It),Dt.flowing||(ht("pipe resume"),It.resume()),un},xt.prototype.unpipe=function(un){var rn=this._readableState,It={hasUnpiped:!1};if(rn.pipesCount===0)return this;if(rn.pipesCount===1)return un&&un!==rn.pipes||(un||(un=rn.pipes),rn.pipes=null,rn.pipesCount=0,rn.flowing=!1,un&&un.emit("unpipe",this,It)),this;if(!un){var Dt=rn.pipes,Kt=rn.pipesCount;rn.pipes=null,rn.pipesCount=0,rn.flowing=!1;for(var gn=0;gn<Kt;gn++)Dt[gn].emit("unpipe",this,{hasUnpiped:!1});return this}var hn=vn(rn.pipes,un);return hn===-1||(rn.pipes.splice(hn,1),rn.pipesCount-=1,rn.pipesCount===1&&(rn.pipes=rn.pipes[0]),un.emit("unpipe",this,It)),this},xt.prototype.on=function(un,rn){var It=j.prototype.on.call(this,un,rn),Dt=this._readableState;return un==="data"?(Dt.readableListening=this.listenerCount("readable")>0,Dt.flowing!==!1&&this.resume()):un==="readable"&&(Dt.endEmitted||Dt.readableListening||(Dt.readableListening=Dt.needReadable=!0,Dt.flowing=!1,Dt.emittedReadable=!1,ht("on readable",Dt.length,Dt.reading),Dt.length?Xt(this):Dt.reading||$.nextTick(Pt,this))),It},xt.prototype.addListener=xt.prototype.on,xt.prototype.removeListener=function(un,rn){var It=j.prototype.removeListener.call(this,un,rn);return un==="readable"&&$.nextTick(qt,this),It},xt.prototype.removeAllListeners=function(un){var rn=j.prototype.removeAllListeners.apply(this,arguments);return un!=="readable"&&un!==void 0||$.nextTick(qt,this),rn},xt.prototype.resume=function(){var un=this._readableState;return un.flowing||(ht("resume"),un.flowing=!un.readableListening,function(rn,It){It.resumeScheduled||(It.resumeScheduled=!0,$.nextTick(St,rn,It))}(this,un)),un.paused=!1,this},xt.prototype.pause=function(){return ht("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ht("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},xt.prototype.wrap=function(un){var rn=this,It=this._readableState,Dt=!1;for(var Kt in un.on("end",function(){if(ht("wrapped end"),It.decoder&&!It.ended){var hn=It.decoder.end();hn&&hn.length&&rn.push(hn)}rn.push(null)}),un.on("data",function(hn){ht("wrapped data"),It.decoder&&(hn=It.decoder.write(hn)),It.objectMode&&hn==null||(It.objectMode||hn&&hn.length)&&(rn.push(hn)||(Dt=!0,un.pause()))}),un)this[Kt]===void 0&&typeof un[Kt]=="function"&&(this[Kt]=function(hn){return function(){return un[hn].apply(un,arguments)}}(Kt));for(var gn=0;gn<on.length;gn++)un.on(on[gn],this.emit.bind(this,on[gn]));return this._read=function(hn){ht("wrapped _read",hn),Dt&&(Dt=!1,un.resume())},this},typeof Symbol=="function"&&(xt.prototype[Symbol.asyncIterator]=function(){return ft===void 0&&(ft=s(182)),ft(this)}),Object.defineProperty(xt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(xt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(xt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(un){this._readableState&&(this._readableState.flowing=un)}}),xt._fromList=tn,Object.defineProperty(xt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(xt.from=function(un,rn){return ut===void 0&&(ut=s(183)),ut(xt,un,rn)})}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(21).EventEmitter},function(i,o,s){(function(_){function $(j,it){tt(j,it),et(j)}function et(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function tt(j,it){j.emit("error",it)}i.exports={destroy:function(j,it){var st=this,ht=this._readableState&&this._readableState.destroyed,_t=this._writableState&&this._writableState.destroyed;return ht||_t?(it?it(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(tt,this,j)):_.nextTick(tt,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(gt){!it&&gt?st._writableState?st._writableState.errorEmitted?_.nextTick(et,st):(st._writableState.errorEmitted=!0,_.nextTick($,st,gt)):_.nextTick($,st,gt):it?(_.nextTick(et,st),it(gt)):_.nextTick(et,st)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(j,it){var st=j._readableState,ht=j._writableState;st&&st.autoDestroy||ht&&ht.autoDestroy?j.destroy(it):j.emit("error",it)}}}).call(this,s(2))},function(i,o,s){var _=s(26).codes.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function($,et,tt,j){var it=function(st,ht,_t){return st.highWaterMark!=null?st.highWaterMark:ht?st[_t]:null}(et,j,tt);if(it!=null){if(!isFinite(it)||Math.floor(it)!==it||it<0)throw new _(j?tt:"highWaterMark",it);return Math.floor(it)}return $.objectMode?16:16384}}},function(i,o,s){(function(_,$){function et(Ht){var qt=this;this.next=null,this.entry=null,this.finish=function(){(function(Pt,St,Zt){var tn=Pt.entry;for(Pt.entry=null;tn;){var mn=tn.callback;St.pendingcb--,mn(Zt),tn=tn.next}St.corkedRequestsFree.next=Pt})(qt,Ht)}}var tt;i.exports=xt,xt.WritableState=wt;var j={deprecate:s(43)},it=s(78),st=s(5).Buffer,ht=_.Uint8Array||function(){},_t,gt=s(79),ft=s(80).getHighWaterMark,ut=s(26).codes,yt=ut.ERR_INVALID_ARG_TYPE,Et=ut.ERR_METHOD_NOT_IMPLEMENTED,Mt=ut.ERR_MULTIPLE_CALLBACK,Ft=ut.ERR_STREAM_CANNOT_PIPE,Rt=ut.ERR_STREAM_DESTROYED,Ot=ut.ERR_STREAM_NULL_VALUES,pt=ut.ERR_STREAM_WRITE_AFTER_END,Lt=ut.ERR_UNKNOWN_ENCODING,nn=gt.errorOrDestroy;function on(){}function wt(Ht,qt,Pt){tt=tt||s(27),Ht=Ht||{},typeof Pt!="boolean"&&(Pt=qt instanceof tt),this.objectMode=!!Ht.objectMode,Pt&&(this.objectMode=this.objectMode||!!Ht.writableObjectMode),this.highWaterMark=ft(this,Ht,"writableHighWaterMark",Pt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var St=Ht.decodeStrings===!1;this.decodeStrings=!St,this.defaultEncoding=Ht.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Zt){(function(tn,mn){var yn=tn._writableState,vn=yn.sync,un=yn.writecb;if(typeof un!="function")throw new Mt;if(function(It){It.writing=!1,It.writecb=null,It.length-=It.writelen,It.writelen=0}(yn),mn)(function(It,Dt,Kt,gn,hn){--Dt.pendingcb,Kt?($.nextTick(hn,gn),$.nextTick(Ut,It,Dt),It._writableState.errorEmitted=!0,nn(It,gn)):(hn(gn),It._writableState.errorEmitted=!0,nn(It,gn),Ut(It,Dt))})(tn,yn,vn,mn,un);else{var rn=Xt(yn)||tn.destroyed;rn||yn.corked||yn.bufferProcessing||!yn.bufferedRequest||Vt(tn,yn),vn?$.nextTick(Tt,tn,yn,rn,un):Tt(tn,yn,rn,un)}})(qt,Zt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ht.emitClose!==!1,this.autoDestroy=!!Ht.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new et(this)}function xt(Ht){var qt=this instanceof(tt=tt||s(27));if(!qt&&!_t.call(xt,this))return new xt(Ht);this._writableState=new wt(Ht,this,qt),this.writable=!0,Ht&&(typeof Ht.write=="function"&&(this._write=Ht.write),typeof Ht.writev=="function"&&(this._writev=Ht.writev),typeof Ht.destroy=="function"&&(this._destroy=Ht.destroy),typeof Ht.final=="function"&&(this._final=Ht.final)),it.call(this)}function Nt(Ht,qt,Pt,St,Zt,tn,mn){qt.writelen=St,qt.writecb=mn,qt.writing=!0,qt.sync=!0,qt.destroyed?qt.onwrite(new Rt("write")):Pt?Ht._writev(Zt,qt.onwrite):Ht._write(Zt,tn,qt.onwrite),qt.sync=!1}function Tt(Ht,qt,Pt,St){Pt||function(Zt,tn){tn.length===0&&tn.needDrain&&(tn.needDrain=!1,Zt.emit("drain"))}(Ht,qt),qt.pendingcb--,St(),Ut(Ht,qt)}function Vt(Ht,qt){qt.bufferProcessing=!0;var Pt=qt.bufferedRequest;if(Ht._writev&&Pt&&Pt.next){var St=qt.bufferedRequestCount,Zt=new Array(St),tn=qt.corkedRequestsFree;tn.entry=Pt;for(var mn=0,yn=!0;Pt;)Zt[mn]=Pt,Pt.isBuf||(yn=!1),Pt=Pt.next,mn+=1;Zt.allBuffers=yn,Nt(Ht,qt,!0,qt.length,Zt,"",tn.finish),qt.pendingcb++,qt.lastBufferedRequest=null,tn.next?(qt.corkedRequestsFree=tn.next,tn.next=null):qt.corkedRequestsFree=new et(qt),qt.bufferedRequestCount=0}else{for(;Pt;){var vn=Pt.chunk,un=Pt.encoding,rn=Pt.callback;if(Nt(Ht,qt,!1,qt.objectMode?1:vn.length,vn,un,rn),Pt=Pt.next,qt.bufferedRequestCount--,qt.writing)break}Pt===null&&(qt.lastBufferedRequest=null)}qt.bufferedRequest=Pt,qt.bufferProcessing=!1}function Xt(Ht){return Ht.ending&&Ht.length===0&&Ht.bufferedRequest===null&&!Ht.finished&&!Ht.writing}function Gt(Ht,qt){Ht._final(function(Pt){qt.pendingcb--,Pt&&nn(Ht,Pt),qt.prefinished=!0,Ht.emit("prefinish"),Ut(Ht,qt)})}function Ut(Ht,qt){var Pt=Xt(qt);if(Pt&&(function(Zt,tn){tn.prefinished||tn.finalCalled||(typeof Zt._final!="function"||tn.destroyed?(tn.prefinished=!0,Zt.emit("prefinish")):(tn.pendingcb++,tn.finalCalled=!0,$.nextTick(Gt,Zt,tn)))}(Ht,qt),qt.pendingcb===0&&(qt.finished=!0,Ht.emit("finish"),qt.autoDestroy))){var St=Ht._readableState;(!St||St.autoDestroy&&St.endEmitted)&&Ht.destroy()}return Pt}s(7)(xt,it),wt.prototype.getBuffer=function(){for(var Ht=this.bufferedRequest,qt=[];Ht;)qt.push(Ht),Ht=Ht.next;return qt},function(){try{Object.defineProperty(wt.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_t=Function.prototype[Symbol.hasInstance],Object.defineProperty(xt,Symbol.hasInstance,{value:function(Ht){return!!_t.call(this,Ht)||this===xt&&Ht&&Ht._writableState instanceof wt}})):_t=function(Ht){return Ht instanceof this},xt.prototype.pipe=function(){nn(this,new Ft)},xt.prototype.write=function(Ht,qt,Pt){var St,Zt=this._writableState,tn=!1,mn=!Zt.objectMode&&(St=Ht,st.isBuffer(St)||St instanceof ht);return mn&&!st.isBuffer(Ht)&&(Ht=function(yn){return st.from(yn)}(Ht)),typeof qt=="function"&&(Pt=qt,qt=null),mn?qt="buffer":qt||(qt=Zt.defaultEncoding),typeof Pt!="function"&&(Pt=on),Zt.ending?function(yn,vn){var un=new pt;nn(yn,un),$.nextTick(vn,un)}(this,Pt):(mn||function(yn,vn,un,rn){var It;return un===null?It=new Ot:typeof un=="string"||vn.objectMode||(It=new yt("chunk",["string","Buffer"],un)),!It||(nn(yn,It),$.nextTick(rn,It),!1)}(this,Zt,Ht,Pt))&&(Zt.pendingcb++,tn=function(yn,vn,un,rn,It,Dt){if(!un){var Kt=function(Mn,qn,Ir){return Mn.objectMode||Mn.decodeStrings===!1||typeof qn!="string"||(qn=st.from(qn,Ir)),qn}(vn,rn,It);rn!==Kt&&(un=!0,It="buffer",rn=Kt)}var gn=vn.objectMode?1:rn.length;vn.length+=gn;var hn=vn.length<vn.highWaterMark;if(hn||(vn.needDrain=!0),vn.writing||vn.corked){var xn=vn.lastBufferedRequest;vn.lastBufferedRequest={chunk:rn,encoding:It,isBuf:un,callback:Dt,next:null},xn?xn.next=vn.lastBufferedRequest:vn.bufferedRequest=vn.lastBufferedRequest,vn.bufferedRequestCount+=1}else Nt(yn,vn,!1,gn,rn,It,Dt);return hn}(this,Zt,mn,Ht,qt,Pt)),tn},xt.prototype.cork=function(){this._writableState.corked++},xt.prototype.uncork=function(){var Ht=this._writableState;Ht.corked&&(Ht.corked--,Ht.writing||Ht.corked||Ht.bufferProcessing||!Ht.bufferedRequest||Vt(this,Ht))},xt.prototype.setDefaultEncoding=function(Ht){if(typeof Ht=="string"&&(Ht=Ht.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ht+"").toLowerCase())>-1))throw new Lt(Ht);return this._writableState.defaultEncoding=Ht,this},Object.defineProperty(xt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(xt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),xt.prototype._write=function(Ht,qt,Pt){Pt(new Et("_write()"))},xt.prototype._writev=null,xt.prototype.end=function(Ht,qt,Pt){var St=this._writableState;return typeof Ht=="function"?(Pt=Ht,Ht=null,qt=null):typeof qt=="function"&&(Pt=qt,qt=null),Ht!=null&&this.write(Ht,qt),St.corked&&(St.corked=1,this.uncork()),St.ending||function(Zt,tn,mn){tn.ending=!0,Ut(Zt,tn),mn&&(tn.finished?$.nextTick(mn):Zt.once("finish",mn)),tn.ended=!0,Zt.writable=!1}(this,St,Pt),this},Object.defineProperty(xt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(xt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ht){this._writableState&&(this._writableState.destroyed=Ht)}}),xt.prototype.destroy=gt.destroy,xt.prototype._undestroy=gt.undestroy,xt.prototype._destroy=function(Ht,qt){qt(Ht)}}).call(this,s(6),s(2))},function(i,o,s){i.exports=ht;var _=s(26).codes,$=_.ERR_METHOD_NOT_IMPLEMENTED,et=_.ERR_MULTIPLE_CALLBACK,tt=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=_.ERR_TRANSFORM_WITH_LENGTH_0,it=s(27);function st(ft,ut){var yt=this._transformState;yt.transforming=!1;var Et=yt.writecb;if(Et===null)return this.emit("error",new et);yt.writechunk=null,yt.writecb=null,ut!=null&&this.push(ut),Et(ft);var Mt=this._readableState;Mt.reading=!1,(Mt.needReadable||Mt.length<Mt.highWaterMark)&&this._read(Mt.highWaterMark)}function ht(ft){if(!(this instanceof ht))return new ht(ft);it.call(this,ft),this._transformState={afterTransform:st.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,ft&&(typeof ft.transform=="function"&&(this._transform=ft.transform),typeof ft.flush=="function"&&(this._flush=ft.flush)),this.on("prefinish",_t)}function _t(){var ft=this;typeof this._flush!="function"||this._readableState.destroyed?gt(this,null,null):this._flush(function(ut,yt){gt(ft,ut,yt)})}function gt(ft,ut,yt){if(ut)return ft.emit("error",ut);if(yt!=null&&ft.push(yt),ft._writableState.length)throw new j;if(ft._transformState.transforming)throw new tt;return ft.push(null)}s(7)(ht,it),ht.prototype.push=function(ft,ut){return this._transformState.needTransform=!1,it.prototype.push.call(this,ft,ut)},ht.prototype._transform=function(ft,ut,yt){yt(new $("_transform()"))},ht.prototype._write=function(ft,ut,yt){var Et=this._transformState;if(Et.writecb=yt,Et.writechunk=ft,Et.writeencoding=ut,!Et.transforming){var Mt=this._readableState;(Et.needTransform||Mt.needReadable||Mt.length<Mt.highWaterMark)&&this._read(Mt.highWaterMark)}},ht.prototype._read=function(ft){var ut=this._transformState;ut.writechunk===null||ut.transforming?ut.needTransform=!0:(ut.transforming=!0,this._transform(ut.writechunk,ut.writeencoding,ut.afterTransform))},ht.prototype._destroy=function(ft,ut){it.prototype._destroy.call(this,ft,function(yt){ut(yt)})}},function(i,o,s){(function(_){var $=s(190),et=s(85),tt=s(192),j=s(193),it=s(86),st=o;st.request=function(ht,_t){ht=typeof ht=="string"?it.parse(ht):tt(ht);var gt=_.location.protocol.search(/^https?:$/)===-1?"http:":"",ft=ht.protocol||gt,ut=ht.hostname||ht.host,yt=ht.port,Et=ht.path||"/";ut&&ut.indexOf(":")!==-1&&(ut="["+ut+"]"),ht.url=(ut?ft+"//"+ut:"")+(yt?":"+yt:"")+Et,ht.method=(ht.method||"GET").toUpperCase(),ht.headers=ht.headers||{};var Mt=new $(ht);return _t&&Mt.on("response",_t),Mt},st.get=function(ht,_t){var gt=st.request(ht,_t);return gt.end(),gt},st.ClientRequest=$,st.IncomingMessage=et.IncomingMessage,st.Agent=function(){},st.Agent.defaultMaxSockets=4,st.globalAgent=new st.Agent,st.STATUS_CODES=j,st.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,s(6))},function(i,o,s){(function(_){o.fetch=st(_.fetch)&&st(_.ReadableStream),o.writableStream=st(_.WritableStream),o.abortController=st(_.AbortController),o.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),o.blobConstructor=!0}catch{}var $;function et(){if($!==void 0)return $;if(_.XMLHttpRequest){$=new _.XMLHttpRequest;try{$.open("GET",_.XDomainRequest?"/":"https://example.com")}catch{$=null}}else $=null;return $}function tt(ht){var _t=et();if(!_t)return!1;try{return _t.responseType=ht,_t.responseType===ht}catch{}return!1}var j=_.ArrayBuffer!==void 0,it=j&&st(_.ArrayBuffer.prototype.slice);function st(ht){return typeof ht=="function"}o.arraybuffer=o.fetch||j&&tt("arraybuffer"),o.msstream=!o.fetch&&it&&tt("ms-stream"),o.mozchunkedarraybuffer=!o.fetch&&j&&tt("moz-chunked-arraybuffer"),o.overrideMimeType=o.fetch||!!et()&&st(et().overrideMimeType),o.vbArray=st(_.VBArray),$=null}).call(this,s(6))},function(i,o,s){(function(_,$,et){var tt=s(84),j=s(7),it=s(31),st=o.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ht=o.IncomingMessage=function(_t,gt,ft,ut){var yt=this;if(it.Readable.call(yt),yt._mode=ft,yt.headers={},yt.rawHeaders=[],yt.trailers={},yt.rawTrailers=[],yt.on("end",function(){_.nextTick(function(){yt.emit("close")})}),ft==="fetch"){if(yt._fetchResponse=gt,yt.url=gt.url,yt.statusCode=gt.status,yt.statusMessage=gt.statusText,gt.headers.forEach(function(Ot,pt){yt.headers[pt.toLowerCase()]=Ot,yt.rawHeaders.push(pt,Ot)}),tt.writableStream){var Et=new WritableStream({write:function(Ot){return new Promise(function(pt,Lt){yt._destroyed?Lt():yt.push(new $(Ot))?pt():yt._resumeFetch=pt})},close:function(){et.clearTimeout(ut),yt._destroyed||yt.push(null)},abort:function(Ot){yt._destroyed||yt.emit("error",Ot)}});try{return void gt.body.pipeTo(Et).catch(function(Ot){et.clearTimeout(ut),yt._destroyed||yt.emit("error",Ot)})}catch{}}var Mt=gt.body.getReader();(function Ot(){Mt.read().then(function(pt){if(!yt._destroyed){if(pt.done)return et.clearTimeout(ut),void yt.push(null);yt.push(new $(pt.value)),Ot()}}).catch(function(pt){et.clearTimeout(ut),yt._destroyed||yt.emit("error",pt)})})()}else if(yt._xhr=_t,yt._pos=0,yt.url=_t.responseURL,yt.statusCode=_t.status,yt.statusMessage=_t.statusText,_t.getAllResponseHeaders().split(/\r?\n/).forEach(function(Ot){var pt=Ot.match(/^([^:]+):\s*(.*)/);if(pt){var Lt=pt[1].toLowerCase();Lt==="set-cookie"?(yt.headers[Lt]===void 0&&(yt.headers[Lt]=[]),yt.headers[Lt].push(pt[2])):yt.headers[Lt]!==void 0?yt.headers[Lt]+=", "+pt[2]:yt.headers[Lt]=pt[2],yt.rawHeaders.push(pt[1],pt[2])}}),yt._charset="x-user-defined",!tt.overrideMimeType){var Ft=yt.rawHeaders["mime-type"];if(Ft){var Rt=Ft.match(/;\s*charset=([^;])(;|$)/);Rt&&(yt._charset=Rt[1].toLowerCase())}yt._charset||(yt._charset="utf-8")}};j(ht,it.Readable),ht.prototype._read=function(){var _t=this._resumeFetch;_t&&(this._resumeFetch=null,_t())},ht.prototype._onXHRProgress=function(){var _t=this,gt=_t._xhr,ft=null;switch(_t._mode){case"text:vbarray":if(gt.readyState!==st.DONE)break;try{ft=new et.VBArray(gt.responseBody).toArray()}catch{}if(ft!==null){_t.push(new $(ft));break}case"text":try{ft=gt.responseText}catch{_t._mode="text:vbarray";break}if(ft.length>_t._pos){var ut=ft.substr(_t._pos);if(_t._charset==="x-user-defined"){for(var yt=new $(ut.length),Et=0;Et<ut.length;Et++)yt[Et]=255&ut.charCodeAt(Et);_t.push(yt)}else _t.push(ut,_t._charset);_t._pos=ft.length}break;case"arraybuffer":if(gt.readyState!==st.DONE||!gt.response)break;ft=gt.response,_t.push(new $(new Uint8Array(ft)));break;case"moz-chunked-arraybuffer":if(ft=gt.response,gt.readyState!==st.LOADING||!ft)break;_t.push(new $(new Uint8Array(ft)));break;case"ms-stream":if(ft=gt.response,gt.readyState!==st.LOADING)break;var Mt=new et.MSStreamReader;Mt.onprogress=function(){Mt.result.byteLength>_t._pos&&(_t.push(new $(new Uint8Array(Mt.result.slice(_t._pos)))),_t._pos=Mt.result.byteLength)},Mt.onload=function(){_t.push(null)},Mt.readAsArrayBuffer(ft)}_t._xhr.readyState===st.DONE&&_t._mode!=="ms-stream"&&_t.push(null)}}).call(this,s(2),s(5).Buffer,s(6))},function(i,o,s){var _=s(194),$=s(196);function et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}o.parse=Rt,o.resolve=function(Ot,pt){return Rt(Ot,!1,!0).resolve(pt)},o.resolveObject=function(Ot,pt){return Ot?Rt(Ot,!1,!0).resolveObject(pt):pt},o.format=function(Ot){return $.isString(Ot)&&(Ot=Rt(Ot)),Ot instanceof et?Ot.format():et.prototype.format.call(Ot)},o.Url=et;var tt=/^([a-z0-9.+-]+:)/i,j=/:[0-9]*$/,it=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,st=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),ht=["'"].concat(st),_t=["%","/","?",";","#"].concat(ht),gt=["/","?","#"],ft=/^[+a-z0-9A-Z_-]{0,63}$/,ut=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yt={javascript:!0,"javascript:":!0},Et={javascript:!0,"javascript:":!0},Mt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ft=s(197);function Rt(Ot,pt,Lt){if(Ot&&$.isObject(Ot)&&Ot instanceof et)return Ot;var nn=new et;return nn.parse(Ot,pt,Lt),nn}et.prototype.parse=function(Ot,pt,Lt){if(!$.isString(Ot))throw new TypeError("Parameter 'url' must be a string, not "+typeof Ot);var nn=Ot.indexOf("?"),on=nn!==-1&&nn<Ot.indexOf("#")?"?":"#",wt=Ot.split(on);wt[0]=wt[0].replace(/\\/g,"/");var xt=Ot=wt.join(on);if(xt=xt.trim(),!Lt&&Ot.split("#").length===1){var Nt=it.exec(xt);if(Nt)return this.path=xt,this.href=xt,this.pathname=Nt[1],Nt[2]?(this.search=Nt[2],this.query=pt?Ft.parse(this.search.substr(1)):this.search.substr(1)):pt&&(this.search="",this.query={}),this}var Tt=tt.exec(xt);if(Tt){var Vt=(Tt=Tt[0]).toLowerCase();this.protocol=Vt,xt=xt.substr(Tt.length)}if(Lt||Tt||xt.match(/^\/\/[^@\/]+@[^@\/]+/)){var Xt=xt.substr(0,2)==="//";!Xt||Tt&&Et[Tt]||(xt=xt.substr(2),this.slashes=!0)}if(!Et[Tt]&&(Xt||Tt&&!Mt[Tt])){for(var Gt,Ut,Ht=-1,qt=0;qt<gt.length;qt++)(Pt=xt.indexOf(gt[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt);for((Ut=Ht===-1?xt.lastIndexOf("@"):xt.lastIndexOf("@",Ht))!==-1&&(Gt=xt.slice(0,Ut),xt=xt.slice(Ut+1),this.auth=decodeURIComponent(Gt)),Ht=-1,qt=0;qt<_t.length;qt++){var Pt;(Pt=xt.indexOf(_t[qt]))!==-1&&(Ht===-1||Pt<Ht)&&(Ht=Pt)}Ht===-1&&(Ht=xt.length),this.host=xt.slice(0,Ht),xt=xt.slice(Ht),this.parseHost(),this.hostname=this.hostname||"";var St=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!St)for(var Zt=this.hostname.split(/\./),tn=(qt=0,Zt.length);qt<tn;qt++){var mn=Zt[qt];if(mn&&!mn.match(ft)){for(var yn="",vn=0,un=mn.length;vn<un;vn++)mn.charCodeAt(vn)>127?yn+="x":yn+=mn[vn];if(!yn.match(ft)){var rn=Zt.slice(0,qt),It=Zt.slice(qt+1),Dt=mn.match(ut);Dt&&(rn.push(Dt[1]),It.unshift(Dt[2])),It.length&&(xt="/"+It.join(".")+xt),this.hostname=rn.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),St||(this.hostname=_.toASCII(this.hostname));var Kt=this.port?":"+this.port:"",gn=this.hostname||"";this.host=gn+Kt,this.href+=this.host,St&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),xt[0]!=="/"&&(xt="/"+xt))}if(!yt[Vt])for(qt=0,tn=ht.length;qt<tn;qt++){var hn=ht[qt];if(xt.indexOf(hn)!==-1){var xn=encodeURIComponent(hn);xn===hn&&(xn=escape(hn)),xt=xt.split(hn).join(xn)}}var Mn=xt.indexOf("#");Mn!==-1&&(this.hash=xt.substr(Mn),xt=xt.slice(0,Mn));var qn=xt.indexOf("?");if(qn!==-1?(this.search=xt.substr(qn),this.query=xt.substr(qn+1),pt&&(this.query=Ft.parse(this.query)),xt=xt.slice(0,qn)):pt&&(this.search="",this.query={}),xt&&(this.pathname=xt),Mt[Vt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Kt=this.pathname||"";var Ir=this.search||"";this.path=Kt+Ir}return this.href=this.format(),this},et.prototype.format=function(){var Ot=this.auth||"";Ot&&(Ot=(Ot=encodeURIComponent(Ot)).replace(/%3A/i,":"),Ot+="@");var pt=this.protocol||"",Lt=this.pathname||"",nn=this.hash||"",on=!1,wt="";this.host?on=Ot+this.host:this.hostname&&(on=Ot+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(on+=":"+this.port)),this.query&&$.isObject(this.query)&&Object.keys(this.query).length&&(wt=Ft.stringify(this.query));var xt=this.search||wt&&"?"+wt||"";return pt&&pt.substr(-1)!==":"&&(pt+=":"),this.slashes||(!pt||Mt[pt])&&on!==!1?(on="//"+(on||""),Lt&&Lt.charAt(0)!=="/"&&(Lt="/"+Lt)):on||(on=""),nn&&nn.charAt(0)!=="#"&&(nn="#"+nn),xt&&xt.charAt(0)!=="?"&&(xt="?"+xt),pt+on+(Lt=Lt.replace(/[?#]/g,function(Nt){return encodeURIComponent(Nt)}))+(xt=xt.replace("#","%23"))+nn},et.prototype.resolve=function(Ot){return this.resolveObject(Rt(Ot,!1,!0)).format()},et.prototype.resolveObject=function(Ot){if($.isString(Ot)){var pt=new et;pt.parse(Ot,!1,!0),Ot=pt}for(var Lt=new et,nn=Object.keys(this),on=0;on<nn.length;on++){var wt=nn[on];Lt[wt]=this[wt]}if(Lt.hash=Ot.hash,Ot.href==="")return Lt.href=Lt.format(),Lt;if(Ot.slashes&&!Ot.protocol){for(var xt=Object.keys(Ot),Nt=0;Nt<xt.length;Nt++){var Tt=xt[Nt];Tt!=="protocol"&&(Lt[Tt]=Ot[Tt])}return Mt[Lt.protocol]&&Lt.hostname&&!Lt.pathname&&(Lt.path=Lt.pathname="/"),Lt.href=Lt.format(),Lt}if(Ot.protocol&&Ot.protocol!==Lt.protocol){if(!Mt[Ot.protocol]){for(var Vt=Object.keys(Ot),Xt=0;Xt<Vt.length;Xt++){var Gt=Vt[Xt];Lt[Gt]=Ot[Gt]}return Lt.href=Lt.format(),Lt}if(Lt.protocol=Ot.protocol,Ot.host||Et[Ot.protocol])Lt.pathname=Ot.pathname;else{for(var Ut=(Ot.pathname||"").split("/");Ut.length&&!(Ot.host=Ut.shift()););Ot.host||(Ot.host=""),Ot.hostname||(Ot.hostname=""),Ut[0]!==""&&Ut.unshift(""),Ut.length<2&&Ut.unshift(""),Lt.pathname=Ut.join("/")}if(Lt.search=Ot.search,Lt.query=Ot.query,Lt.host=Ot.host||"",Lt.auth=Ot.auth,Lt.hostname=Ot.hostname||Ot.host,Lt.port=Ot.port,Lt.pathname||Lt.search){var Ht=Lt.pathname||"",qt=Lt.search||"";Lt.path=Ht+qt}return Lt.slashes=Lt.slashes||Ot.slashes,Lt.href=Lt.format(),Lt}var Pt=Lt.pathname&&Lt.pathname.charAt(0)==="/",St=Ot.host||Ot.pathname&&Ot.pathname.charAt(0)==="/",Zt=St||Pt||Lt.host&&Ot.pathname,tn=Zt,mn=Lt.pathname&&Lt.pathname.split("/")||[],yn=(Ut=Ot.pathname&&Ot.pathname.split("/")||[],Lt.protocol&&!Mt[Lt.protocol]);if(yn&&(Lt.hostname="",Lt.port=null,Lt.host&&(mn[0]===""?mn[0]=Lt.host:mn.unshift(Lt.host)),Lt.host="",Ot.protocol&&(Ot.hostname=null,Ot.port=null,Ot.host&&(Ut[0]===""?Ut[0]=Ot.host:Ut.unshift(Ot.host)),Ot.host=null),Zt=Zt&&(Ut[0]===""||mn[0]==="")),St)Lt.host=Ot.host||Ot.host===""?Ot.host:Lt.host,Lt.hostname=Ot.hostname||Ot.hostname===""?Ot.hostname:Lt.hostname,Lt.search=Ot.search,Lt.query=Ot.query,mn=Ut;else if(Ut.length)mn||(mn=[]),mn.pop(),mn=mn.concat(Ut),Lt.search=Ot.search,Lt.query=Ot.query;else if(!$.isNullOrUndefined(Ot.search))return yn&&(Lt.hostname=Lt.host=mn.shift(),(Dt=!!(Lt.host&&Lt.host.indexOf("@")>0)&&Lt.host.split("@"))&&(Lt.auth=Dt.shift(),Lt.host=Lt.hostname=Dt.shift())),Lt.search=Ot.search,Lt.query=Ot.query,$.isNull(Lt.pathname)&&$.isNull(Lt.search)||(Lt.path=(Lt.pathname?Lt.pathname:"")+(Lt.search?Lt.search:"")),Lt.href=Lt.format(),Lt;if(!mn.length)return Lt.pathname=null,Lt.search?Lt.path="/"+Lt.search:Lt.path=null,Lt.href=Lt.format(),Lt;for(var vn=mn.slice(-1)[0],un=(Lt.host||Ot.host||mn.length>1)&&(vn==="."||vn==="..")||vn==="",rn=0,It=mn.length;It>=0;It--)(vn=mn[It])==="."?mn.splice(It,1):vn===".."?(mn.splice(It,1),rn++):rn&&(mn.splice(It,1),rn--);if(!Zt&&!tn)for(;rn--;rn)mn.unshift("..");!Zt||mn[0]===""||mn[0]&&mn[0].charAt(0)==="/"||mn.unshift(""),un&&mn.join("/").substr(-1)!=="/"&&mn.push("");var Dt,Kt=mn[0]===""||mn[0]&&mn[0].charAt(0)==="/";return yn&&(Lt.hostname=Lt.host=Kt?"":mn.length?mn.shift():"",(Dt=!!(Lt.host&&Lt.host.indexOf("@")>0)&&Lt.host.split("@"))&&(Lt.auth=Dt.shift(),Lt.host=Lt.hostname=Dt.shift())),(Zt=Zt||Lt.host&&mn.length)&&!Kt&&mn.unshift(""),mn.length?Lt.pathname=mn.join("/"):(Lt.pathname=null,Lt.path=null),$.isNull(Lt.pathname)&&$.isNull(Lt.search)||(Lt.path=(Lt.pathname?Lt.pathname:"")+(Lt.search?Lt.search:"")),Lt.auth=Ot.auth||Lt.auth,Lt.slashes=Lt.slashes||Ot.slashes,Lt.href=Lt.format(),Lt},et.prototype.parseHost=function(){var Ot=this.host,pt=j.exec(Ot);pt&&((pt=pt[0])!==":"&&(this.port=pt.substr(1)),Ot=Ot.substr(0,Ot.length-pt.length)),Ot&&(this.hostname=Ot)}},function(i,o,s){const _=$=>$!==null&&typeof $=="object"&&typeof $.pipe=="function";_.writable=$=>_($)&&$.writable!==!1&&typeof $._write=="function"&&typeof $._writableState=="object",_.readable=$=>_($)&&$.readable!==!1&&typeof $._read=="function"&&typeof $._readableState=="object",_.duplex=$=>_.writable($)&&_.readable($),_.transform=$=>_.duplex($)&&typeof $._transform=="function"&&typeof $._transformState=="object",i.exports=_},function(i,o,s){function _(yt){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function $(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function et(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&tt(yt,Et)}function tt(yt,Et){return(tt=Object.setPrototypeOf||function(Mt,Ft){return Mt.__proto__=Ft,Mt})(yt,Et)}function j(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Mt,Ft=st(yt);if(Et){var Rt=st(this).constructor;Mt=Reflect.construct(Ft,arguments,Rt)}else Mt=Ft.apply(this,arguments);return it(this,Mt)}}function it(yt,Et){return!Et||_(Et)!=="object"&&typeof Et!="function"?function(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}(yt):Et}function st(yt){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var ht=s(3).LEVEL,_t=s(50),gt=s(202),ft=s(38)("winston:create-logger");function ut(yt){return"is"+yt.charAt(0).toUpperCase()+yt.slice(1)+"Enabled"}i.exports=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt.levels=yt.levels||_t.npm.levels;var Et=function(Ft){et(Ot,Ft);var Rt=j(Ot);function Ot(pt){return $(this,Ot),Rt.call(this,pt)}return Ot}(gt),Mt=new Et(yt);return Object.keys(yt.levels).forEach(function(Ft){ft('Define prototype method for "%s"',Ft),Ft!=="log"?(Et.prototype[Ft]=function(){for(var Rt=this||Mt,Ot=arguments.length,pt=new Array(Ot),Lt=0;Lt<Ot;Lt++)pt[Lt]=arguments[Lt];if(pt.length===1){var nn=pt[0],on=nn&&nn.message&&nn||{message:nn};return on.level=on[ht]=Ft,Rt._addDefaultMeta(on),Rt.write(on),this||Mt}return pt.length===0?(Rt.log(Ft,""),Rt):Rt.log.apply(Rt,[Ft].concat(pt))},Et.prototype[ut(Ft)]=function(){return(this||Mt).isLevelEnabled(Ft)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')}),Mt}},function(i,o,s){(function(_){function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(18),tt=s(51),j=s(38)("winston:exception"),it=s(90),st=s(91),ht=s(92);i.exports=function(){function _t(ut){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,_t),!ut)throw new Error("Logger is required to handle exceptions");this.logger=ut,this.handlers=new Map}var gt,ft;return gt=_t,(ft=[{key:"handle",value:function(){for(var ut=this,yt=arguments.length,Et=new Array(yt),Mt=0;Mt<yt;Mt++)Et[Mt]=arguments[Mt];Et.forEach(function(Ft){if(Array.isArray(Ft))return Ft.forEach(function(Rt){return ut._addHandler(Rt)});ut._addHandler(Ft)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),_.on("uncaughtException",this.catcher))}},{key:"unhandle",value:function(){var ut=this;this.catcher&&(_.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ut.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ut){var yt=ut.message;return yt||typeof ut!="string"||(yt=ut),{error:ut,level:"error",message:["uncaughtException: ".concat(yt||"(no error message)"),ut.stack||"  No stack trace"].join(`
`),stack:ut.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ut)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ut){return(ut?st.parse(ut):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ut){if(!this.handlers.has(ut)){ut.handleExceptions=!0;var yt=new ht(ut);this.handlers.set(ut,yt),this.logger.pipe(yt)}}},{key:"_uncaughtException",value:function(ut){var yt,Et=this.getAllInfo(ut),Mt=this._getExceptionHandlers(),Ft=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ut):this.logger.exitOnError;function Rt(){j("doExit",Ft),j("process._exiting",_._exiting),Ft&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Mt.length&&Ft&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),Ft=!1),!Mt||Mt.length===0)return _.nextTick(Rt);tt(Mt,function(Ot,pt){var Lt=it(pt),nn=Ot.transport||Ot;function on(wt){return function(){j(wt),Lt()}}nn._ending=!0,nn.once("finish",on("finished")),nn.once("error",on("error"))},function(){return Ft&&Rt()}),this.logger.log(Et),Ft&&(yt=setTimeout(Rt,3e3))}},{key:"_getExceptionHandlers",value:function(){return this.logger.transports.filter(function(ut){return(ut.transport||ut).handleExceptions})}}])&&$(gt.prototype,ft),_t}()}).call(this,s(2))},function(i,o,s){var _=s(205);i.exports=function($){var et,tt=0;function j(){return tt||(tt=1,et=$.apply(this,arguments),$=null),et}return j.displayName=_($),j}},function(i,o){function s(_){for(var $ in _)this[$]=_[$]}o.get=function(_){var $=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var et={},tt=Error.prepareStackTrace;Error.prepareStackTrace=function(it,st){return st},Error.captureStackTrace(et,_||o.get);var j=et.stack;return Error.prepareStackTrace=tt,Error.stackTraceLimit=$,j},o.parse=function(_){if(!_.stack)return[];var $=this;return _.stack.split(`
`).slice(1).map(function(et){if(et.match(/^\s*[-]{4,}$/))return $._createParsedCallSite({fileName:et,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var tt=et.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(tt){var j=null,it=null,st=null,ht=null,_t=null,gt=tt[5]==="native";if(tt[1]){var ft=(st=tt[1]).lastIndexOf(".");if(st[ft-1]=="."&&ft--,ft>0){j=st.substr(0,ft),it=st.substr(ft+1);var ut=j.indexOf(".Module");ut>0&&(st=st.substr(ut+1),j=j.substr(0,ut))}ht=null}it&&(ht=j,_t=it),it==="<anonymous>"&&(_t=null,st=null);var yt={fileName:tt[2]||null,lineNumber:parseInt(tt[3],10)||null,functionName:st,typeName:ht,methodName:_t,columnNumber:parseInt(tt[4],10)||null,native:gt};return $._createParsedCallSite(yt)}}).filter(function(et){return!!et})},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach(function(_){s.prototype[_]=null,s.prototype["get"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),["topLevel","eval","native","constructor"].forEach(function(_){s.prototype[_]=!1,s.prototype["is"+_[0].toUpperCase()+_.substr(1)]=function(){return this[_]}}),o._createParsedCallSite=function(_){return new s(_)}},function(i,o,s){function _(ht){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_t){return typeof _t}:function(_t){return _t&&typeof Symbol=="function"&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t})(ht)}function $(ht,_t){for(var gt=0;gt<_t.length;gt++){var ft=_t[gt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(ht,ft.key,ft)}}function et(ht,_t){return(et=Object.setPrototypeOf||function(gt,ft){return gt.__proto__=ft,gt})(ht,_t)}function tt(ht){var _t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var gt,ft=it(ht);if(_t){var ut=it(this).constructor;gt=Reflect.construct(ft,arguments,ut)}else gt=ft.apply(this,arguments);return j(this,gt)}}function j(ht,_t){return!_t||_(_t)!=="object"&&typeof _t!="function"?function(gt){if(gt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt}(ht):_t}function it(ht){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(_t){return _t.__proto__||Object.getPrototypeOf(_t)})(ht)}var st=s(32).Writable;i.exports=function(ht){(function(yt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),Et&&et(yt,Et)})(ut,ht);var _t,gt,ft=tt(ut);function ut(yt){var Et;if(function(Mt,Ft){if(!(Mt instanceof Ft))throw new TypeError("Cannot call a class as a function")}(this,ut),Et=ft.call(this,{objectMode:!0}),!yt)throw new Error("ExceptionStream requires a TransportStream instance.");return Et.handleExceptions=!0,Et.transport=yt,Et}return _t=ut,(gt=[{key:"_write",value:function(yt,Et,Mt){return yt.exception?this.transport.log(yt,Mt):(Mt(),!0)}}])&&$(_t.prototype,gt),ut}(st)},function(i,o,s){(function(_){function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(18),tt=s(51),j=s(38)("winston:rejection"),it=s(90),st=s(91),ht=s(92);i.exports=function(){function _t(ut){if(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,_t),!ut)throw new Error("Logger is required to handle rejections");this.logger=ut,this.handlers=new Map}var gt,ft;return gt=_t,(ft=[{key:"handle",value:function(){for(var ut=this,yt=arguments.length,Et=new Array(yt),Mt=0;Mt<yt;Mt++)Et[Mt]=arguments[Mt];Et.forEach(function(Ft){if(Array.isArray(Ft))return Ft.forEach(function(Rt){return ut._addHandler(Rt)});ut._addHandler(Ft)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),_.on("unhandledRejection",this.catcher))}},{key:"unhandle",value:function(){var ut=this;this.catcher&&(_.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(yt){return ut.logger.unpipe(yt)}))}},{key:"getAllInfo",value:function(ut){var yt=ut.message;return yt||typeof ut!="string"||(yt=ut),{error:ut,level:"error",message:["unhandledRejection: ".concat(yt||"(no error message)"),ut.stack||"  No stack trace"].join(`
`),stack:ut.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(ut)}}},{key:"getProcessInfo",value:function(){return{pid:_.pid,uid:_.getuid?_.getuid():null,gid:_.getgid?_.getgid():null,cwd:_.cwd(),execPath:_.execPath,version:_.version,argv:_.argv,memoryUsage:_.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:et.loadavg(),uptime:et.uptime()}}},{key:"getTrace",value:function(ut){return(ut?st.parse(ut):st.get()).map(function(yt){return{column:yt.getColumnNumber(),file:yt.getFileName(),function:yt.getFunctionName(),line:yt.getLineNumber(),method:yt.getMethodName(),native:yt.isNative()}})}},{key:"_addHandler",value:function(ut){if(!this.handlers.has(ut)){ut.handleRejections=!0;var yt=new ht(ut);this.handlers.set(ut,yt),this.logger.pipe(yt)}}},{key:"_unhandledRejection",value:function(ut){var yt,Et=this.getAllInfo(ut),Mt=this._getRejectionHandlers(),Ft=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(ut):this.logger.exitOnError;function Rt(){j("doExit",Ft),j("process._exiting",_._exiting),Ft&&!_._exiting&&(yt&&clearTimeout(yt),_.exit(1))}if(!Mt.length&&Ft&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),Ft=!1),!Mt||Mt.length===0)return _.nextTick(Rt);tt(Mt,function(Ot,pt){var Lt=it(pt),nn=Ot.transport||Ot;function on(wt){return function(){j(wt),Lt()}}nn._ending=!0,nn.once("finish",on("finished")),nn.once("error",on("error"))},function(){return Ft&&Rt()}),this.logger.log(Et),Ft&&(yt=setTimeout(Rt,3e3))}},{key:"_getRejectionHandlers",value:function(){return this.logger.transports.filter(function(ut){return(ut.transport||ut).handleRejections})}}])&&$(gt.prototype,ft),_t}()}).call(this,s(2))},function(i,o,s){i.exports={asArray:s(212),asBoolStrict:s(213),asBool:s(214),asPortNumber:s(215),asEnum:s(216),asFloatNegative:s(217),asFloatPositive:s(218),asFloat:s(54),asIntNegative:s(219),asIntPositive:s(95),asInt:s(53),asJsonArray:s(220),asJsonObject:s(221),asJson:s(55),asRegExp:s(222),asString:s(33),asUrlObject:s(96),asUrlString:s(223),asEmailString:s(224)}},function(i,o,s){const _=s(53);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive integer");return et}},function(i,o,s){const _=s(33);i.exports=function($){const et=_($);try{return new URL(et)}catch{throw new Error("should be a valid URL")}}},function(i,o,s){const _={};_.web=s(24),s(98);const $={v1:{}};$.v1.signaling={},$.v1.signaling.api=s(9),$.v1.signaling.api.SignalingClient=function(ft,ut,yt){yt||(yt={}),yt.format="text",this.client_=new _.web.GrpcWebClientBase(yt),this.hostname_=ft},$.v1.signaling.api.SignalingPromiseClient=function(ft,ut,yt){yt||(yt={}),yt.format="text",this.client_=new _.web.GrpcWebClientBase(yt),this.hostname_=ft};const et=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetHealth",_.web.MethodType.UNARY,$.v1.signaling.api.GetHealthRequest,$.v1.signaling.api.GetHealthResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetHealthResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetHealthResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetHealthResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getHealth=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetHealth",ft,ut||{},et,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getHealth=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetHealth",ft,ut||{},et)};const tt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/CreatePeer",_.web.MethodType.UNARY,$.v1.signaling.api.CreatePeerRequest,$.v1.signaling.api.CreatePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.CreatePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.CreatePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.createPeer=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",ft,ut||{},tt,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.createPeer=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/CreatePeer",ft,ut||{},tt)};const j=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/DeletePeer",_.web.MethodType.UNARY,$.v1.signaling.api.DeletePeerRequest,$.v1.signaling.api.DeletePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.DeletePeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.DeletePeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.deletePeer=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",ft,ut||{},j,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.deletePeer=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/DeletePeer",ft,ut||{},j)};const it=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/RefreshPeer",_.web.MethodType.UNARY,$.v1.signaling.api.RefreshPeerRequest,$.v1.signaling.api.RefreshPeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.RefreshPeerResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.RefreshPeerResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.refreshPeer=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",ft,ut||{},it,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.refreshPeer=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/RefreshPeer",ft,ut||{},it)};const st=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetPeers",_.web.MethodType.UNARY,$.v1.signaling.api.GetPeersRequest,$.v1.signaling.api.GetPeersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetPeersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetPeersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getPeers=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",ft,ut||{},st,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getPeers=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetPeers",ft,ut||{},st)};const ht=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/GetIceServers",_.web.MethodType.UNARY,$.v1.signaling.api.GetIceServersRequest,$.v1.signaling.api.GetIceServersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.GetIceServersResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.GetIceServersResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.getIceServers=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",ft,ut||{},ht,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.getIceServers=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/GetIceServers",ft,ut||{},ht)};const _t=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/SendSignal",_.web.MethodType.UNARY,$.v1.signaling.api.SendSignalRequest,$.v1.signaling.api.SendSignalResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.SendSignalResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.SendSignalResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.sendSignal=function(ft,ut,yt){return this.client_.rpcCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",ft,ut||{},_t,yt)},$.v1.signaling.api.SignalingPromiseClient.prototype.sendSignal=function(ft,ut){return this.client_.unaryCall(this.hostname_+"/v1.signaling.api.Signaling/SendSignal",ft,ut||{},_t)};const gt=new _.web.MethodDescriptor("/v1.signaling.api.Signaling/ReceiveSignalStream",_.web.MethodType.SERVER_STREAMING,$.v1.signaling.api.ReceiveSignalStreamRequest,$.v1.signaling.api.ReceiveSignalStreamResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary);new _.web.AbstractClientBase.MethodInfo($.v1.signaling.api.ReceiveSignalStreamResponse,function(ft){return ft.serializeBinary()},$.v1.signaling.api.ReceiveSignalStreamResponse.deserializeBinary),$.v1.signaling.api.SignalingClient.prototype.receiveSignalStream=function(ft,ut){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",ft,ut||{},gt)},$.v1.signaling.api.SignalingPromiseClient.prototype.receiveSignalStream=function(ft,ut){return this.client_.serverStreaming(this.hostname_+"/v1.signaling.api.Signaling/ReceiveSignalStream",ft,ut||{},gt)},i.exports=$.v1.signaling.api},function(i,o,s){var _=s(99),$=_,et=Function("return this")();$.exportSymbol("proto.google.protobuf.BoolValue",null,et),$.exportSymbol("proto.google.protobuf.BytesValue",null,et),$.exportSymbol("proto.google.protobuf.DoubleValue",null,et),$.exportSymbol("proto.google.protobuf.FloatValue",null,et),$.exportSymbol("proto.google.protobuf.Int32Value",null,et),$.exportSymbol("proto.google.protobuf.Int64Value",null,et),$.exportSymbol("proto.google.protobuf.StringValue",null,et),$.exportSymbol("proto.google.protobuf.UInt32Value",null,et),$.exportSymbol("proto.google.protobuf.UInt64Value",null,et),proto.google.protobuf.DoubleValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.DoubleValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.DoubleValue.displayName="proto.google.protobuf.DoubleValue"),proto.google.protobuf.FloatValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.FloatValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.FloatValue.displayName="proto.google.protobuf.FloatValue"),proto.google.protobuf.Int64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int64Value.displayName="proto.google.protobuf.Int64Value"),proto.google.protobuf.UInt64Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt64Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt64Value.displayName="proto.google.protobuf.UInt64Value"),proto.google.protobuf.Int32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.Int32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.Int32Value.displayName="proto.google.protobuf.Int32Value"),proto.google.protobuf.UInt32Value=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.UInt32Value,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.UInt32Value.displayName="proto.google.protobuf.UInt32Value"),proto.google.protobuf.BoolValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BoolValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BoolValue.displayName="proto.google.protobuf.BoolValue"),proto.google.protobuf.StringValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.StringValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.StringValue.displayName="proto.google.protobuf.StringValue"),proto.google.protobuf.BytesValue=function(tt){_.Message.initialize(this,tt,0,-1,null,null)},$.inherits(proto.google.protobuf.BytesValue,_.Message),$.DEBUG&&!COMPILED&&(proto.google.protobuf.BytesValue.displayName="proto.google.protobuf.BytesValue"),_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.DoubleValue.prototype.toObject=function(tt){return proto.google.protobuf.DoubleValue.toObject(tt,this)},proto.google.protobuf.DoubleValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.DoubleValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.DoubleValue;return proto.google.protobuf.DoubleValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.DoubleValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readDouble();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.DoubleValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.DoubleValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.DoubleValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeDouble(1,it)},proto.google.protobuf.DoubleValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.DoubleValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.FloatValue.prototype.toObject=function(tt){return proto.google.protobuf.FloatValue.toObject(tt,this)},proto.google.protobuf.FloatValue.toObject=function(tt,j){var it={value:_.Message.getFloatingPointFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.FloatValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.FloatValue;return proto.google.protobuf.FloatValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.FloatValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readFloat();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.FloatValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.FloatValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.FloatValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeFloat(1,it)},proto.google.protobuf.FloatValue.prototype.getValue=function(){return _.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.google.protobuf.FloatValue.prototype.setValue=function(tt){return _.Message.setProto3FloatField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int64Value.prototype.toObject=function(tt){return proto.google.protobuf.Int64Value.toObject(tt,this)},proto.google.protobuf.Int64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int64Value;return proto.google.protobuf.Int64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt64(1,it)},proto.google.protobuf.Int64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt64Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt64Value.toObject(tt,this)},proto.google.protobuf.UInt64Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt64Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt64Value;return proto.google.protobuf.UInt64Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt64Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint64();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt64Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt64Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt64Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint64(1,it)},proto.google.protobuf.UInt64Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt64Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Int32Value.prototype.toObject=function(tt){return proto.google.protobuf.Int32Value.toObject(tt,this)},proto.google.protobuf.Int32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.Int32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.Int32Value;return proto.google.protobuf.Int32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.Int32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readInt32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.Int32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.Int32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.Int32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeInt32(1,it)},proto.google.protobuf.Int32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.Int32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.UInt32Value.prototype.toObject=function(tt){return proto.google.protobuf.UInt32Value.toObject(tt,this)},proto.google.protobuf.UInt32Value.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,0)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.UInt32Value.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.UInt32Value;return proto.google.protobuf.UInt32Value.deserializeBinaryFromReader(it,j)},proto.google.protobuf.UInt32Value.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readUint32();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.UInt32Value.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.UInt32Value.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.UInt32Value.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())!==0&&j.writeUint32(1,it)},proto.google.protobuf.UInt32Value.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,0)},proto.google.protobuf.UInt32Value.prototype.setValue=function(tt){return _.Message.setProto3IntField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BoolValue.prototype.toObject=function(tt){return proto.google.protobuf.BoolValue.toObject(tt,this)},proto.google.protobuf.BoolValue.toObject=function(tt,j){var it={value:_.Message.getBooleanFieldWithDefault(j,1,!1)};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BoolValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BoolValue;return proto.google.protobuf.BoolValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BoolValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBool();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BoolValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BoolValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BoolValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue())&&j.writeBool(1,it)},proto.google.protobuf.BoolValue.prototype.getValue=function(){return _.Message.getBooleanFieldWithDefault(this,1,!1)},proto.google.protobuf.BoolValue.prototype.setValue=function(tt){return _.Message.setProto3BooleanField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.StringValue.prototype.toObject=function(tt){return proto.google.protobuf.StringValue.toObject(tt,this)},proto.google.protobuf.StringValue.toObject=function(tt,j){var it={value:_.Message.getFieldWithDefault(j,1,"")};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.StringValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.StringValue;return proto.google.protobuf.StringValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.StringValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readString();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.StringValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.StringValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.StringValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue()).length>0&&j.writeString(1,it)},proto.google.protobuf.StringValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.StringValue.prototype.setValue=function(tt){return _.Message.setProto3StringField(this,1,tt)},_.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.BytesValue.prototype.toObject=function(tt){return proto.google.protobuf.BytesValue.toObject(tt,this)},proto.google.protobuf.BytesValue.toObject=function(tt,j){var it={value:j.getValue_asB64()};return tt&&(it.$jspbMessageInstance=j),it}),proto.google.protobuf.BytesValue.deserializeBinary=function(tt){var j=new _.BinaryReader(tt),it=new proto.google.protobuf.BytesValue;return proto.google.protobuf.BytesValue.deserializeBinaryFromReader(it,j)},proto.google.protobuf.BytesValue.deserializeBinaryFromReader=function(tt,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var it=j.readBytes();tt.setValue(it);break;default:j.skipField()}return tt},proto.google.protobuf.BytesValue.prototype.serializeBinary=function(){var tt=new _.BinaryWriter;return proto.google.protobuf.BytesValue.serializeBinaryToWriter(this,tt),tt.getResultBuffer()},proto.google.protobuf.BytesValue.serializeBinaryToWriter=function(tt,j){var it;(it=tt.getValue_asU8()).length>0&&j.writeBytes(1,it)},proto.google.protobuf.BytesValue.prototype.getValue=function(){return _.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.BytesValue.prototype.getValue_asB64=function(){return _.Message.bytesAsB64(this.getValue())},proto.google.protobuf.BytesValue.prototype.getValue_asU8=function(){return _.Message.bytesAsU8(this.getValue())},proto.google.protobuf.BytesValue.prototype.setValue=function(tt){return _.Message.setProto3BytesField(this,1,tt)},$.object.extend(o,proto.google.protobuf)},function(module,exports,__webpack_require__){(function(global,Buffer){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(i,o,s){i instanceof String&&(i=String(i));for(var _=i.length,$=0;$<_;$++){var et=i[$];if(o.call(s,et,$,i))return{i:$,v:et}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,o,s){i!=Array.prototype&&i!=Object.prototype&&(i[o]=s.value)},$jscomp.getGlobal=function(i){return typeof window<"u"&&window===i?i:global!==void 0&&global!=null?global:i},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,o,s,_){if(o){for(s=$jscomp.global,i=i.split("."),_=0;_<i.length-1;_++){var $=i[_];$ in s||(s[$]={}),s=s[$]}(o=o(_=s[i=i[i.length-1]]))!=_&&o!=null&&$jscomp.defineProperty(s,i,{configurable:!0,writable:!0,value:o})}},$jscomp.polyfill("Array.prototype.findIndex",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).i}},"es6","es3"),$jscomp.checkStringArgs=function(i,o,s){if(i==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(o instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return i+""},$jscomp.polyfill("String.prototype.endsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"endsWith");o+="",s===void 0&&(s=_.length),s=Math.max(0,Math.min(0|s,_.length));for(var $=o.length;0<$&&0<s;)if(_[--s]!=o[--$])return!1;return 0>=$}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(i){return i||function(o,s){return $jscomp.findInternal(this,o,s).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(i){return i||function(o,s){var _=$jscomp.checkStringArgs(this,o,"startsWith");o+="";var $=_.length,et=o.length;s=Math.max(0,Math.min(0|s,_.length));for(var tt=0;tt<et&&s<$;)if(_[s++]!=o[tt++])return!1;return tt>=et}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(i){return i||function(o){var s=$jscomp.checkStringArgs(this,null,"repeat");if(0>o||1342177279<o)throw new RangeError("Invalid count value");o|=0;for(var _="";o;)1&o&&(_+=s),(o>>>=1)&&(s+=s);return _}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.isDef=function(i){return i!==void 0},goog.isString=function(i){return typeof i=="string"},goog.isBoolean=function(i){return typeof i=="boolean"},goog.isNumber=function(i){return typeof i=="number"},goog.exportPath_=function(i,o,s){i=i.split("."),s=s||goog.global,i[0]in s||s.execScript===void 0||s.execScript("var "+i[0]);for(var _;i.length&&(_=i.shift());)!i.length&&goog.isDef(o)?s[_]=o:s=s[_]&&s[_]!==Object.prototype[_]?s[_]:s[_]={}},goog.define=function(i,o){return o},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(i){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(i)},goog.constructNamespace_=function(i,o){goog.exportPath_(i,o)},goog.getScriptNonce=function(i){return i&&i!=goog.global?goog.getScriptNonce_(i.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(i)?i:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(i){if(!goog.isString(i)||!i||i.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+i+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=i},goog.module.get=function(i){return goog.module.getInternal_(i)},goog.module.getInternal_=function(i){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var i=goog.global.$jscomp;return!!i&&typeof i.getCurrentModulePath=="function"&&!!i.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(i){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=i;else{var o=goog.global.$jscomp;if(!o||typeof o.getCurrentModulePath!="function")throw Error('Module with namespace "'+i+'" has been loaded incorrectly.');o=o.require(o.getCurrentModulePath()),goog.loadedModules_[i]={exports:o,type:goog.ModuleType.ES6,moduleId:i}}},goog.setTestOnly=function(i){if(goog.DISALLOW_TEST_ONLY_CODE)throw i=i||"",Error("Importing test-only code into non-debug environment"+(i?": "+i:"."))},goog.forwardDeclare=function(i){},goog.getObjectByName=function(i,o){i=i.split("."),o=o||goog.global;for(var s=0;s<i.length;s++)if(o=o[i[s]],!goog.isDefAndNotNull(o))return null;return o},goog.globalize=function(i,o){for(var s in o=o||goog.global,i)o[s]=i[s]},goog.addDependency=function(i,o,s,_){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(i){goog.global.console&&goog.global.console.error(i)},goog.require=function(i){},goog.requireType=function(i){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(i){i.instance_=void 0,i.getInstance=function(){return i.instance_?i.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=i),i.instance_=new i)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(i){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(i){return"(function(){"+i+`
;})();
`},goog.loadModule=function(i){var o=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(i))var s=i.call(void 0,{});else{if(!goog.isString(i))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(i=goog.workaroundSafari10EvalBug(i)),s=goog.loadModuleFromSource_.call(void 0,i)}var _=goog.moduleLoaderState_.moduleName;if(!goog.isString(_)||!_)throw Error('Invalid module name "'+_+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(_,s):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof s=="object"&&s!=null&&Object.seal(s),goog.loadedModules_[_]={exports:s,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=o}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(i){i=i.split("/");for(var o=0;o<i.length;)i[o]=="."?i.splice(o,1):o&&i[o]==".."&&i[o-1]&&i[o-1]!=".."?i.splice(--o,2):o++;return i.join("/")},goog.loadFileSync_=function(i){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(i);try{var o=new goog.global.XMLHttpRequest;return o.open("get",i,!1),o.send(),o.status==0||o.status==200?o.responseText:null}catch{return null}},goog.transpile_=function(i,o,s){var _=goog.global.$jscomp;_||(goog.global.$jscomp=_={});var $=_.transpile;if(!$){var et=goog.basePath+goog.TRANSPILER,tt=goog.loadFileSync_(et);if(tt){if(function(){(0,eval)(tt+`
//# sourceURL=`+et)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,$=(_=goog.global.$jscomp).transpile}}return $||($=_.transpile=function(j,it){return goog.logToConsole_(it+" requires transpilation but no transpiler was found."),j}),$(i,o,s)},goog.typeOf=function(i){var o=typeof i;if(o=="object"){if(!i)return"null";if(i instanceof Array)return"array";if(i instanceof Object)return o;var s=Object.prototype.toString.call(i);if(s=="[object Window]")return"object";if(s=="[object Array]"||typeof i.length=="number"&&i.splice!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("splice"))return"array";if(s=="[object Function]"||i.call!==void 0&&i.propertyIsEnumerable!==void 0&&!i.propertyIsEnumerable("call"))return"function"}else if(o=="function"&&i.call===void 0)return"object";return o},goog.isNull=function(i){return i===null},goog.isDefAndNotNull=function(i){return i!=null},goog.isArray=function(i){return goog.typeOf(i)=="array"},goog.isArrayLike=function(i){var o=goog.typeOf(i);return o=="array"||o=="object"&&typeof i.length=="number"},goog.isDateLike=function(i){return goog.isObject(i)&&typeof i.getFullYear=="function"},goog.isFunction=function(i){return goog.typeOf(i)=="function"},goog.isObject=function(i){var o=typeof i;return o=="object"&&i!=null||o=="function"},goog.getUid=function(i){return i[goog.UID_PROPERTY_]||(i[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(i){return!!i[goog.UID_PROPERTY_]},goog.removeUid=function(i){i!==null&&"removeAttribute"in i&&i.removeAttribute(goog.UID_PROPERTY_);try{delete i[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(typeof i.clone=="function")return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.cloneObject(i[s]);return o}return i},goog.bindNative_=function(i,o,s){return i.call.apply(i.bind,arguments)},goog.bindJs_=function(i,o,s){if(!i)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,_),i.apply(o,$)}}return function(){return i.apply(o,arguments)}},goog.bind=function(i,o,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=s.slice();return _.push.apply(_,arguments),i.apply(this,_)}},goog.mixin=function(i,o){for(var s in o)i[s]=o[s]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(i){if(goog.global.execScript)goog.global.execScript(i,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(i);else{var o=goog.global.document,s=o.createElement("SCRIPT");s.type="text/javascript",s.defer=!1,s.appendChild(o.createTextNode(i)),o.head.appendChild(s),o.head.removeChild(s)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(i,o){if(String(i).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+i);var s=function($){return goog.cssNameMapping_[$]||$},_=function($){$=$.split("-");for(var et=[],tt=0;tt<$.length;tt++)et.push(s($[tt]));return et.join("-")};return _=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?s:_:function($){return $},i=o?i+"-"+_(o):_(i),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(i):i},goog.setCssNameMapping=function(i,o){goog.cssNameMapping_=i,goog.cssNameMappingStyle_=o},goog.getMsg=function(i,o,s){return s&&s.html&&(i=i.replace(/</g,"&lt;")),o&&(i=i.replace(/\{\$([^}]+)}/g,function(_,$){return o!=null&&$ in o?o[$]:_})),i},goog.getMsgWithFallback=function(i,o){return i},goog.exportSymbol=function(i,o,s){goog.exportPath_(i,o,s)},goog.exportProperty=function(i,o,s){i[o]=s},goog.inherits=function(i,o){function s(){}s.prototype=o.prototype,i.superClass_=o.prototype,i.prototype=new s,i.prototype.constructor=i,i.base=function(_,$,et){for(var tt=Array(arguments.length-2),j=2;j<arguments.length;j++)tt[j-2]=arguments[j];return o.prototype[$].apply(_,tt)}},goog.base=function(i,o,s){var _=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!_)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(_.superClass_!==void 0){for(var $=Array(arguments.length-1),et=1;et<arguments.length;et++)$[et-1]=arguments[et];return _.superClass_.constructor.apply(i,$)}if(typeof o!="string"&&typeof o!="symbol")throw Error("method names provided to goog.base must be a string or a symbol");for($=Array(arguments.length-2),et=2;et<arguments.length;et++)$[et-2]=arguments[et];et=!1;for(var tt=i.constructor.prototype;tt;tt=Object.getPrototypeOf(tt))if(tt[o]===_)et=!0;else if(et)return tt[o].apply(i,$);if(i[o]===_)return i.constructor.prototype[o].apply(i,$);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(i){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");i.call(goog.global)},goog.defineClass=function(i,o){var s=o.constructor,_=o.statics;return s&&s!=Object.prototype.constructor||(s=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),s=goog.defineClass.createSealingConstructor_(s,i),i&&goog.inherits(s,i),delete o.constructor,delete o.statics,goog.defineClass.applyProperties_(s.prototype,o),_!=null&&(_ instanceof Function?_(s):goog.defineClass.applyProperties_(s,_)),s},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(i,o){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return i;var s=!goog.defineClass.isUnsealable_(o),_=function(){var $=i.apply(this,arguments)||this;return $[goog.UID_PROPERTY_]=$[goog.UID_PROPERTY_],this.constructor===_&&s&&Object.seal instanceof Function&&Object.seal($),$};return _},goog.defineClass.isUnsealable_=function(i){return i&&i.prototype&&i.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s]);for(var _=0;_<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;_++)s=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[_],Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},goog.tagUnsealableClass=function(i){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(i){return i},goog.createTrustedTypesPolicy=function(i){var o=null;if(typeof TrustedTypes>"u"||!TrustedTypes.createPolicy)return o;try{o=TrustedTypes.createPolicy(i,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(s){goog.logToConsole_(s.message)}return o},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(i){var o=jspb.BinaryConstants.FieldType,s=jspb.BinaryConstants.WireType;switch(i){case o.INT32:case o.INT64:case o.UINT32:case o.UINT64:case o.SINT32:case o.SINT64:case o.BOOL:case o.ENUM:case o.VHASH64:return s.VARINT;case o.DOUBLE:case o.FIXED64:case o.SFIXED64:case o.FHASH64:return s.FIXED64;case o.STRING:case o.MESSAGE:case o.BYTES:return s.DELIMITED;case o.FLOAT:case o.FIXED32:case o.SFIXED32:return s.FIXED32;default:return s.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(i){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var o=Error().stack;o&&(this.stack=o)}i&&(this.message=String(i)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(i,o){goog.debug.Error.call(this,goog.asserts.subs_(i,o)),this.messagePattern=i},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(i){throw i},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(i,o){for(var s="",_=(i=i.split("%s")).length-1,$=0;$<_;$++)s+=i[$]+($<o.length?o[$]:"%s");return s+i[_]},goog.asserts.doAssertFailure_=function(i,o,s,_){var $="Assertion failed";if(s){$+=": "+s;var et=_}else i&&($+=": "+i,et=o);i=new goog.asserts.AssertionError(""+$,et||[]),goog.asserts.errorHandler_(i)},goog.asserts.setErrorHandler=function(i){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=i)},goog.asserts.assert=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!i&&goog.asserts.doAssertFailure_("",null,o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertExists=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&i==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.fail=function(i,o){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(i)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertString=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(i)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertFunction=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(i)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObject=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(i)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertArray=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(i)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertBoolean=function(i,o,s){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(i)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertElement=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(i)&&i.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(i),i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertInstanceof=function(i,o,s,_){return!goog.asserts.ENABLE_ASSERTS||i instanceof o||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(o),goog.asserts.getType_(i)],s,Array.prototype.slice.call(arguments,3)),i},goog.asserts.assertFinite=function(i,o,s){return!goog.asserts.ENABLE_ASSERTS||typeof i=="number"&&isFinite(i)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[i],o,Array.prototype.slice.call(arguments,2)),i},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var i in Object.prototype)goog.asserts.fail(i+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(i){return i[i.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.indexOf.call(i,o,s)}:function(i,o,s){if(s=s==null?0:0>s?Math.max(0,i.length+s):s,goog.isString(i))return goog.isString(o)&&o.length==1?i.indexOf(o,s):-1;for(;s<i.length;s++)if(s in i&&i[s]===o)return s;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.lastIndexOf.call(i,o,s??i.length-1)}:function(i,o,s){if(0>(s=s??i.length-1)&&(s=Math.max(0,i.length+s)),goog.isString(i))return goog.isString(o)&&o.length==1?i.lastIndexOf(o,s):-1;for(;0<=s;s--)if(s in i&&i[s]===o)return s;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(i,o,s){goog.asserts.assert(i.length!=null),Array.prototype.forEach.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)et in $&&o.call(s,$[et],et,i)},goog.array.forEachRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;--_)_ in $&&o.call(s,$[_],_,i)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.filter.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=[],et=0,tt=goog.isString(i)?i.split(""):i,j=0;j<_;j++)if(j in tt){var it=tt[j];o.call(s,it,j,i)&&($[et++]=it)}return $},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.map.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=Array(_),et=goog.isString(i)?i.split(""):i,tt=0;tt<_;tt++)tt in et&&($[tt]=o.call(s,et[tt],tt,i));return $},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduce.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEach(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(i,o,s,_){return goog.asserts.assert(i.length!=null),goog.asserts.assert(o!=null),_&&(o=goog.bind(o,_)),Array.prototype.reduceRight.call(i,o,s)}:function(i,o,s,_){var $=s;return goog.array.forEachRight(i,function(et,tt){$=o.call(_,$,et,tt,i)}),$},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.some.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(i,o,s){return goog.asserts.assert(i.length!=null),Array.prototype.every.call(i,o,s)}:function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&!o.call(s,$[et],et,i))return!1;return!0},goog.array.count=function(i,o,s){var _=0;return goog.array.forEach(i,function($,et,tt){o.call(s,$,et,tt)&&++_},s),_},goog.array.find=function(i,o,s){return 0>(o=goog.array.findIndex(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndex=function(i,o,s){for(var _=i.length,$=goog.isString(i)?i.split(""):i,et=0;et<_;et++)if(et in $&&o.call(s,$[et],et,i))return et;return-1},goog.array.findRight=function(i,o,s){return 0>(o=goog.array.findIndexRight(i,o,s))?null:goog.isString(i)?i.charAt(o):i[o]},goog.array.findIndexRight=function(i,o,s){var _=i.length,$=goog.isString(i)?i.split(""):i;for(--_;0<=_;_--)if(_ in $&&o.call(s,$[_],_,i))return _;return-1},goog.array.contains=function(i,o){return 0<=goog.array.indexOf(i,o)},goog.array.isEmpty=function(i){return i.length==0},goog.array.clear=function(i){if(!goog.isArray(i))for(var o=i.length-1;0<=o;o--)delete i[o];i.length=0},goog.array.insert=function(i,o){goog.array.contains(i,o)||i.push(o)},goog.array.insertAt=function(i,o,s){goog.array.splice(i,s,0,o)},goog.array.insertArrayAt=function(i,o,s){goog.partial(goog.array.splice,i,s,0).apply(null,o)},goog.array.insertBefore=function(i,o,s){var _;arguments.length==2||0>(_=goog.array.indexOf(i,s))?i.push(o):goog.array.insertAt(i,o,_)},goog.array.remove=function(i,o){var s;return(s=0<=(o=goog.array.indexOf(i,o)))&&goog.array.removeAt(i,o),s},goog.array.removeLast=function(i,o){return 0<=(o=goog.array.lastIndexOf(i,o))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAt=function(i,o){return goog.asserts.assert(i.length!=null),Array.prototype.splice.call(i,o,1).length==1},goog.array.removeIf=function(i,o,s){return 0<=(o=goog.array.findIndex(i,o,s))&&(goog.array.removeAt(i,o),!0)},goog.array.removeAllIf=function(i,o,s){var _=0;return goog.array.forEachRight(i,function($,et){o.call(s,$,et,i)&&goog.array.removeAt(i,et)&&_++}),_},goog.array.concat=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(i){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(i){var o=i.length;if(0<o){for(var s=Array(o),_=0;_<o;_++)s[_]=i[_];return s}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(i,o){for(var s=1;s<arguments.length;s++){var _=arguments[s];if(goog.isArrayLike(_)){var $=i.length||0,et=_.length||0;i.length=$+et;for(var tt=0;tt<et;tt++)i[$+tt]=_[tt]}else i.push(_)}},goog.array.splice=function(i,o,s,_){return goog.asserts.assert(i.length!=null),Array.prototype.splice.apply(i,goog.array.slice(arguments,1))},goog.array.slice=function(i,o,s){return goog.asserts.assert(i.length!=null),2>=arguments.length?Array.prototype.slice.call(i,o):Array.prototype.slice.call(i,o,s)},goog.array.removeDuplicates=function(i,o,s){o=o||i;var _=function(it){return goog.isObject(it)?"o"+goog.getUid(it):(typeof it).charAt(0)+it};s=s||_,_={};for(var $=0,et=0;et<i.length;){var tt=i[et++],j=s(tt);Object.prototype.hasOwnProperty.call(_,j)||(_[j]=!0,o[$++]=tt)}o.length=$},goog.array.binarySearch=function(i,o,s){return goog.array.binarySearch_(i,s||goog.array.defaultCompare,!1,o)},goog.array.binarySelect=function(i,o,s){return goog.array.binarySearch_(i,o,!0,void 0,s)},goog.array.binarySearch_=function(i,o,s,_,$){for(var et,tt=0,j=i.length;tt<j;){var it=tt+j>>1,st=s?o.call($,i[it],it,i):o(_,i[it]);0<st?tt=it+1:(j=it,et=!st)}return et?tt:~tt},goog.array.sort=function(i,o){i.sort(o||goog.array.defaultCompare)},goog.array.stableSort=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]={index:_,value:i[_]};var $=o||goog.array.defaultCompare;for(goog.array.sort(s,function(et,tt){return $(et.value,tt.value)||et.index-tt.index}),_=0;_<i.length;_++)i[_]=s[_].value},goog.array.sortByKey=function(i,o,s){var _=s||goog.array.defaultCompare;goog.array.sort(i,function($,et){return _(o($),o(et))})},goog.array.sortObjectsByKey=function(i,o,s){goog.array.sortByKey(i,function(_){return _[o]},s)},goog.array.isSorted=function(i,o,s){o=o||goog.array.defaultCompare;for(var _=1;_<i.length;_++){var $=o(i[_-1],i[_]);if(0<$||$==0&&s)return!1}return!0},goog.array.equals=function(i,o,s){if(!goog.isArrayLike(i)||!goog.isArrayLike(o)||i.length!=o.length)return!1;var _=i.length;s=s||goog.array.defaultCompareEquality;for(var $=0;$<_;$++)if(!s(i[$],o[$]))return!1;return!0},goog.array.compare3=function(i,o,s){s=s||goog.array.defaultCompare;for(var _=Math.min(i.length,o.length),$=0;$<_;$++){var et=s(i[$],o[$]);if(et!=0)return et}return goog.array.defaultCompare(i.length,o.length)},goog.array.defaultCompare=function(i,o){return i>o?1:i<o?-1:0},goog.array.inverseDefaultCompare=function(i,o){return-goog.array.defaultCompare(i,o)},goog.array.defaultCompareEquality=function(i,o){return i===o},goog.array.binaryInsert=function(i,o,s){return 0>(s=goog.array.binarySearch(i,o,s))&&(goog.array.insertAt(i,o,-(s+1)),!0)},goog.array.binaryRemove=function(i,o,s){return 0<=(o=goog.array.binarySearch(i,o,s))&&goog.array.removeAt(i,o)},goog.array.bucket=function(i,o,s){for(var _={},$=0;$<i.length;$++){var et=i[$],tt=o.call(s,et,$,i);goog.isDef(tt)&&(_[tt]||(_[tt]=[])).push(et)}return _},goog.array.toObject=function(i,o,s){var _={};return goog.array.forEach(i,function($,et){_[o.call(s,$,et,i)]=$}),_},goog.array.range=function(i,o,s){var _=[],$=0,et=i;if(o!==void 0&&($=i,et=o),0>(s=s||1)*(et-$))return[];if(0<s)for(i=$;i<et;i+=s)_.push(i);else for(i=$;i>et;i+=s)_.push(i);return _},goog.array.repeat=function(i,o){for(var s=[],_=0;_<o;_++)s[_]=i;return s},goog.array.flatten=function(i){for(var o=[],s=0;s<arguments.length;s++){var _=arguments[s];if(goog.isArray(_))for(var $=0;$<_.length;$+=8192){var et=goog.array.slice(_,$,$+8192);et=goog.array.flatten.apply(null,et);for(var tt=0;tt<et.length;tt++)o.push(et[tt])}else o.push(_)}return o},goog.array.rotate=function(i,o){return goog.asserts.assert(i.length!=null),i.length&&(0<(o%=i.length)?Array.prototype.unshift.apply(i,i.splice(-o,o)):0>o&&Array.prototype.push.apply(i,i.splice(0,-o))),i},goog.array.moveItem=function(i,o,s){goog.asserts.assert(0<=o&&o<i.length),goog.asserts.assert(0<=s&&s<i.length),o=Array.prototype.splice.call(i,o,1),Array.prototype.splice.call(i,s,0,o[0])},goog.array.zip=function(i){if(!arguments.length)return[];for(var o=[],s=arguments[0].length,_=1;_<arguments.length;_++)arguments[_].length<s&&(s=arguments[_].length);for(_=0;_<s;_++){for(var $=[],et=0;et<arguments.length;et++)$.push(arguments[et][_]);o.push($)}return o},goog.array.shuffle=function(i,o){o=o||Math.random;for(var s=i.length-1;0<s;s--){var _=Math.floor(o()*(s+1)),$=i[s];i[s]=i[_],i[_]=$}},goog.array.copyByIndex=function(i,o){var s=[];return goog.array.forEach(o,function(_){s.push(i[_])}),s},goog.array.concatMap=function(i,o,s){return goog.array.concat.apply([],goog.array.map(i,o,s))},goog.crypt={},goog.crypt.stringToByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);255<$&&(o[s++]=255&$,$>>=8),o[s++]=$}return o},goog.crypt.byteArrayToString=function(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var o="",s=0;s<i.length;s+=8192){var _=goog.array.slice(i,s,s+8192);o+=String.fromCharCode.apply(null,_)}return o},goog.crypt.byteArrayToHex=function(i,o){return goog.array.map(i,function(s){return 1<(s=s.toString(16)).length?s:"0"+s}).join(o||"")},goog.crypt.hexToByteArray=function(i){goog.asserts.assert(i.length%2==0,"Key string length must be multiple of 2");for(var o=[],s=0;s<i.length;s+=2)o.push(parseInt(i.substring(s,s+2),16));return o},goog.crypt.stringToUtf8ByteArray=function(i){for(var o=[],s=0,_=0;_<i.length;_++){var $=i.charCodeAt(_);128>$?o[s++]=$:(2048>$?o[s++]=$>>6|192:((64512&$)==55296&&_+1<i.length&&(64512&i.charCodeAt(_+1))==56320?($=65536+((1023&$)<<10)+(1023&i.charCodeAt(++_)),o[s++]=$>>18|240,o[s++]=$>>12&63|128):o[s++]=$>>12|224,o[s++]=$>>6&63|128),o[s++]=63&$|128)}return o},goog.crypt.utf8ByteArrayToString=function(i){for(var o=[],s=0,_=0;s<i.length;){var $=i[s++];if(128>$)o[_++]=String.fromCharCode($);else if(191<$&&224>$){var et=i[s++];o[_++]=String.fromCharCode((31&$)<<6|63&et)}else if(239<$&&365>$){et=i[s++];var tt=i[s++];$=((7&$)<<18|(63&et)<<12|(63&tt)<<6|63&i[s++])-65536,o[_++]=String.fromCharCode(55296+($>>10)),o[_++]=String.fromCharCode(56320+(1023&$))}else et=i[s++],tt=i[s++],o[_++]=String.fromCharCode((15&$)<<12|(63&et)<<6|63&tt)}return o.join("")},goog.crypt.xorByteArray=function(i,o){goog.asserts.assert(i.length==o.length,"XOR array lengths must match");for(var s=[],_=0;_<i.length;_++)s.push(i[_]^o[_]);return s},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(i,o){return i.lastIndexOf(o,0)==0},goog.string.internal.endsWith=function(i,o){var s=i.length-o.length;return 0<=s&&i.indexOf(o,s)==s},goog.string.internal.caseInsensitiveStartsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(0,o.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(i,o){return goog.string.internal.caseInsensitiveCompare(o,i.substr(i.length-o.length,o.length))==0},goog.string.internal.caseInsensitiveEquals=function(i,o){return i.toLowerCase()==o.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(i){return/^[\s\xa0]*$/.test(i)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},goog.string.internal.caseInsensitiveCompare=function(i,o){return(i=String(i).toLowerCase())<(o=String(o).toLowerCase())?-1:i==o?0:1},goog.string.internal.newLineToBr=function(i,o){return i.replace(/(\r\n|\r|\n)/g,o?"<br />":"<br>")},goog.string.internal.htmlEscape=function(i,o){if(o)i=i.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(i))return i;i.indexOf("&")!=-1&&(i=i.replace(goog.string.internal.AMP_RE_,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace(goog.string.internal.LT_RE_,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(goog.string.internal.GT_RE_,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(goog.string.internal.QUOT_RE_,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(goog.string.internal.NULL_RE_,"&#0;"))}return i},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(i,o){return goog.string.internal.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.internal.contains=function(i,o){return i.indexOf(o)!=-1},goog.string.internal.caseInsensitiveContains=function(i,o){return goog.string.internal.contains(i.toLowerCase(),o.toLowerCase())},goog.string.internal.compareVersions=function(i,o){var s=0;i=goog.string.internal.trim(String(i)).split("."),o=goog.string.internal.trim(String(o)).split(".");for(var _=Math.max(i.length,o.length),$=0;s==0&&$<_;$++){var et=i[$]||"",tt=o[$]||"";do{if(et=/(\d*)(\D*)(.*)/.exec(et)||["","","",""],tt=/(\d*)(\D*)(.*)/.exec(tt)||["","","",""],et[0].length==0&&tt[0].length==0)break;s=et[1].length==0?0:parseInt(et[1],10);var j=tt[1].length==0?0:parseInt(tt[1],10);s=goog.string.internal.compareElements_(s,j)||goog.string.internal.compareElements_(et[2].length==0,tt[2].length==0)||goog.string.internal.compareElements_(et[2],tt[2]),et=et[3],tt=tt[3]}while(s==0)}return s},goog.string.internal.compareElements_=function(i,o){return i<o?-1:i>o?1:0},goog.string.TypedString=function(){},goog.string.Const=function(i,o){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=i===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&o||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(i){return i instanceof goog.string.Const&&i.constructor===goog.string.Const&&i.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?i.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+i+"'"),"type_error:Const")},goog.string.Const.from=function(i){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,i)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(i){return goog.fs.url.getUrlObject_().createObjectURL(i)},goog.fs.url.revokeObjectUrl=function(i){goog.fs.url.getUrlObject_().revokeObjectURL(i)},goog.fs.url.getUrlObject_=function(){var i=goog.fs.url.findUrlObject_();if(i!=null)return i;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(i,o){return typeof i=="number"?0<i?goog.i18n.bidi.Dir.LTR:0>i?goog.i18n.bidi.Dir.RTL:o?null:goog.i18n.bidi.Dir.NEUTRAL:i==null?null:i?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\uD801\uD804-\uD839\uD83C-\uDBFF豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\uD802-\uD803\uD83A-\uD83Bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(i,o){return o?i.replace(goog.i18n.bidi.htmlSkipReg_,""):i},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(i,o){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(i,o){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(i){return goog.i18n.bidi.rtlRe_.test(i)},goog.i18n.bidi.isLtrChar=function(i){return goog.i18n.bidi.ltrRe_.test(i)},goog.i18n.bidi.isNeutralChar=function(i){return!goog.i18n.bidi.isLtrChar(i)&&!goog.i18n.bidi.isRtlChar(i)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(i,o){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(i,o){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(i,o){return i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o),goog.i18n.bidi.isRequiredLtrRe_.test(i)||!goog.i18n.bidi.hasAnyLtr(i)&&!goog.i18n.bidi.hasAnyRtl(i)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(i,o){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(i,o){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(i,o))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(i){return goog.i18n.bidi.rtlLocalesRe_.test(i)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(i,o){return o=(o===void 0?goog.i18n.bidi.hasAnyRtl(i):o)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,i.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+i+"</span>"},goog.i18n.bidi.enforceRtlInText=function(i){return goog.i18n.bidi.Format.RLE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(i){return i.charAt(0)=="<"?i.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+i+"</span>"},goog.i18n.bidi.enforceLtrInText=function(i){return goog.i18n.bidi.Format.LRE+i+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(i){return i.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(i){return i.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(i,o){var s=0,_=0,$=!1;for(i=goog.i18n.bidi.stripHtmlIfNeeded_(i,o).split(goog.i18n.bidi.wordSeparatorRe_),o=0;o<i.length;o++){var et=i[o];goog.i18n.bidi.startsWithRtl(et)?(s++,_++):goog.i18n.bidi.isRequiredLtrRe_.test(et)?$=!0:goog.i18n.bidi.hasAnyLtr(et)?_++:goog.i18n.bidi.hasNumeralsRe_.test(et)&&($=!0)}return _==0?$?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:s/_>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(i,o){return goog.i18n.bidi.estimateDirection(i,o)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(i,o){i&&(o=goog.i18n.bidi.toDir(o))&&(i.style.textAlign=o==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,i.dir=o==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(i,o){switch(goog.i18n.bidi.estimateDirection(o)){case goog.i18n.bidi.Dir.LTR:i.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:i.dir="rtl";break;default:i.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.trustedURL_=null,this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(i,o){var s=goog.html.TrustedResourceUrl.unwrap(this),_=(s=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(s))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(s[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",s[2]||"",i)+goog.html.TrustedResourceUrl.stringifyParams_("#",_,o))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(i){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(i){return i instanceof goog.html.TrustedResourceUrl&&i.constructor===goog.html.TrustedResourceUrl&&i.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.unwrapTrustedURL=function(i){return i.trustedURL_?i.trustedURL_:goog.html.TrustedResourceUrl.unwrap(i)},goog.html.TrustedResourceUrl.format=function(i,o){var s=goog.string.Const.unwrap(i);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(s))throw Error("Invalid TrustedResourceUrl format: "+s);return i=s.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(_,$){if(!Object.prototype.hasOwnProperty.call(o,$))throw Error('Found marker, "'+$+'", in format string, "'+s+'", but no valid label mapping found in args: '+JSON.stringify(o));return(_=o[$])instanceof goog.string.Const?goog.string.Const.unwrap(_):encodeURIComponent(String(_))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(i,o,s,_){return goog.html.TrustedResourceUrl.format(i,o).cloneWithParams(s,_)},goog.html.TrustedResourceUrl.fromConstant=function(i){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.TrustedResourceUrl.fromConstants=function(i){for(var o="",s=0;s<i.length;s++)o+=goog.string.Const.unwrap(i[s]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.TrustedResourceUrl;return o.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(i):i,goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY&&(o.trustedURL_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i)),o},goog.html.TrustedResourceUrl.stringifyParams_=function(i,o,s){if(s==null)return o;if(goog.isString(s))return s?i+encodeURIComponent(s):"";for(var _ in s){var $=s[_];$=goog.isArray($)?$:[$];for(var et=0;et<$.length;et++){var tt=$[et];tt!=null&&(o||(o=i),o+=(o.length>i.length?"&":"")+encodeURIComponent(_)+"="+encodeURIComponent(String(tt)))}}return o},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeUrlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(i){return goog.html.SafeUrl.unwrapTrustedURL(i).toString()},goog.html.SafeUrl.unwrapTrustedURL=function(i){return i instanceof goog.html.SafeUrl&&i.constructor===goog.html.SafeUrl&&i.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(i))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(i){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(i)},goog.html.SafeUrl.fromBlob=function(i){return i=goog.html.SAFE_MIME_TYPE_PATTERN_.test(i.type)?goog.fs.url.createObjectUrl(i):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.DATA_URL_PATTERN_=/^data:([^,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(i){var o=(i=i.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return o=o&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(o[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o?i:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"tel:")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(i){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(i))||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"fb-messenger://share")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromWhatsAppUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"whatsapp://send")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromSmsUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(i){var o=i.indexOf("#");if(0<o&&(i=i.substring(0,o)),!(o=i.match(/[?&]body=/gi)))return!0;if(1<o.length)return!1;if(!(i=i.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(i)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(i)},goog.html.SafeUrl.fromSshUrl=function(i){return goog.string.internal.caseInsensitiveStartsWith(i,"ssh://")||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(i,o){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,i,o)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(i,o,s){return(i=i.exec(o))?(i=i[1],(s instanceof goog.string.Const?[goog.string.Const.unwrap(s)]:s.map(function(_){return goog.string.Const.unwrap(_)})).indexOf(i)==-1&&(o=goog.html.SafeUrl.INNOCUOUS_STRING)):o=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.fromTrustedResourceUrl=function(i){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(i))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(i){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SAFE_URL_PATTERN_.test(i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(i,o){return i instanceof goog.html.SafeUrl?i:(i=typeof i=="object"&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),o&&/^data:/i.test(i)&&(o=goog.html.SafeUrl.fromDataUrl(i)).getTypedStringValue()==i?o:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(i),"%s does not match the safe URL pattern",i)||(i=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(i){var o=new goog.html.SafeUrl;return o.privateDoNotAccessOrElseSafeUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(i):i,o},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(i,";"),"Last character of style string is not ';': "+i),goog.asserts.assert(goog.string.internal.contains(i,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+i),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(i){return i instanceof goog.html.SafeStyle&&i.constructor===goog.html.SafeStyle&&i.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=i,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(i){var o,s="";for(o in i){if(!/^[-_a-zA-Z0-9]+$/.test(o))throw Error("Name allows only [-_a-zA-Z0-9], got: "+o);var _=i[o];_!=null&&(s+=o+":"+(_=goog.isArray(_)?goog.array.map(_,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(_))+";")}return s?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(s):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(i){if(i instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(i).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(i=i instanceof goog.string.Const?goog.string.Const.unwrap(i):goog.html.SafeStyle.sanitizePropertyValueString_(String(i)),/[{;}]/.test(i))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[i]);return i},goog.html.SafeStyle.sanitizePropertyValueString_=function(i){var o=i.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(o)?goog.html.SafeStyle.COMMENT_RE_.test(i)?(goog.asserts.fail("String value disallows comments, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(i)?goog.html.SafeStyle.hasBalancedSquareBrackets_(i)?goog.html.SafeStyle.sanitizeUrl_(i):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+i),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(i){for(var o=!0,s=!0,_=0;_<i.length;_++){var $=i.charAt(_);$=="'"&&s?o=!o:$=='"'&&o&&(s=!s)}return o&&s},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(i){for(var o=!0,s=/^[-_a-zA-Z0-9]$/,_=0;_<i.length;_++){var $=i.charAt(_);if($=="]"){if(o)return!1;o=!0}else if($=="["){if(!o)return!1;o=!1}else if(!o&&!s.test($))return!1}return o},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.FUNCTIONS_RE_=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(i){return i.replace(goog.html.SafeStyle.URL_RE_,function(o,s,_,$){var et="";return _=_.replace(/^(['"])(.*)\1$/,function(tt,j,it){return et=j,it}),o=goog.html.SafeUrl.sanitize(_).getTypedStringValue(),s+et+o+et+$})},goog.html.SafeStyle.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyle.unwrap(_)};return goog.array.forEach(arguments,s),o?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o):goog.html.SafeStyle.EMPTY},goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeScript.fromConstantAndArgs=function(i,o){for(var s=[],_=1;_<arguments.length;_++)s.push(goog.html.SafeScript.stringify_(arguments[_]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(i)+")("+s.join(", ")+");")},goog.html.SafeScript.fromJson=function(i){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(i))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(i){return goog.html.SafeScript.unwrapTrustedScript(i).toString()},goog.html.SafeScript.unwrapTrustedScript=function(i){return i instanceof goog.html.SafeScript&&i.constructor===goog.html.SafeScript&&i.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(i){return JSON.stringify(i).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(i):i,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.object={},goog.object.is=function(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o},goog.object.forEach=function(i,o,s){for(var _ in i)o.call(s,i[_],_,i)},goog.object.filter=function(i,o,s){var _,$={};for(_ in i)o.call(s,i[_],_,i)&&($[_]=i[_]);return $},goog.object.map=function(i,o,s){var _,$={};for(_ in i)$[_]=o.call(s,i[_],_,i);return $},goog.object.some=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return!0;return!1},goog.object.every=function(i,o,s){for(var _ in i)if(!o.call(s,i[_],_,i))return!1;return!0},goog.object.getCount=function(i){var o,s=0;for(o in i)s++;return s},goog.object.getAnyKey=function(i){for(var o in i)return o},goog.object.getAnyValue=function(i){for(var o in i)return i[o]},goog.object.contains=function(i,o){return goog.object.containsValue(i,o)},goog.object.getValues=function(i){var o,s=[],_=0;for(o in i)s[_++]=i[o];return s},goog.object.getKeys=function(i){var o,s=[],_=0;for(o in i)s[_++]=o;return s},goog.object.getValueByKeys=function(i,o){var s=goog.isArrayLike(o),_=s?o:arguments;for(s=s?0:1;s<_.length;s++){if(i==null)return;i=i[_[s]]}return i},goog.object.containsKey=function(i,o){return i!==null&&o in i},goog.object.containsValue=function(i,o){for(var s in i)if(i[s]==o)return!0;return!1},goog.object.findKey=function(i,o,s){for(var _ in i)if(o.call(s,i[_],_,i))return _},goog.object.findValue=function(i,o,s){return(o=goog.object.findKey(i,o,s))&&i[o]},goog.object.isEmpty=function(i){for(var o in i)return!1;return!0},goog.object.clear=function(i){for(var o in i)delete i[o]},goog.object.remove=function(i,o){var s;return(s=o in i)&&delete i[o],s},goog.object.add=function(i,o,s){if(i!==null&&o in i)throw Error('The object already contains the key "'+o+'"');goog.object.set(i,o,s)},goog.object.get=function(i,o,s){return i!==null&&o in i?i[o]:s},goog.object.set=function(i,o,s){i[o]=s},goog.object.setIfUndefined=function(i,o,s){return o in i?i[o]:i[o]=s},goog.object.setWithReturnValueIfNotSet=function(i,o,s){return o in i?i[o]:(s=s(),i[o]=s)},goog.object.equals=function(i,o){for(var s in i)if(!(s in o)||i[s]!==o[s])return!1;for(var _ in o)if(!(_ in i))return!1;return!0},goog.object.clone=function(i){var o,s={};for(o in i)s[o]=i[o];return s},goog.object.unsafeClone=function(i){var o=goog.typeOf(i);if(o=="object"||o=="array"){if(goog.isFunction(i.clone))return i.clone();for(var s in o=o=="array"?[]:{},i)o[s]=goog.object.unsafeClone(i[s]);return o}return i},goog.object.transpose=function(i){var o,s={};for(o in i)s[i[o]]=o;return s},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(i,o){for(var s,_,$=1;$<arguments.length;$++){for(s in _=arguments[$])i[s]=_[s];for(var et=0;et<goog.object.PROTOTYPE_FIELDS_.length;et++)s=goog.object.PROTOTYPE_FIELDS_[et],Object.prototype.hasOwnProperty.call(_,s)&&(i[s]=_[s])}},goog.object.create=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(o%2)throw Error("Uneven number of arguments");for(var s={},_=0;_<o;_+=2)s[arguments[_]]=arguments[_+1];return s},goog.object.createSet=function(i){var o=arguments.length;if(o==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var s={},_=0;_<o;_++)s[arguments[_]]=!0;return s},goog.object.createImmutableView=function(i){var o=i;return Object.isFrozen&&!Object.isFrozen(i)&&(o=Object.create(i),Object.freeze(o)),o},goog.object.isImmutableView=function(i){return!!Object.isFrozen&&Object.isFrozen(i)},goog.object.getAllPropertyNames=function(i,o,s){if(!i)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(i);for(var _={};i&&(i!==Object.prototype||o)&&(i!==Function.prototype||s);){for(var $=Object.getOwnPropertyNames(i),et=0;et<$.length;et++)_[$[et]]=!0;i=Object.getPrototypeOf(i)}return goog.object.getKeys(_)},goog.object.getSuperClass=function(i){return(i=Object.getPrototypeOf(i.prototype))&&i.constructor},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(i,o){if(goog.string.internal.contains(i,"<"))throw Error("Selector does not allow '<', got: "+i);var s=i.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(s))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+i);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(s))throw Error("() and [] in selector must be balanced, got: "+i);return o instanceof goog.html.SafeStyle||(o=goog.html.SafeStyle.create(o)),i=i+"{"+goog.html.SafeStyle.unwrap(o).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(i){for(var o={"(":")","[":"]"},s=[],_=0;_<i.length;_++){var $=i[_];if(o[$])s.push(o[$]);else if(goog.object.contains(o,$)&&s.pop()!=$)return!1}return s.length==0},goog.html.SafeStyleSheet.concat=function(i){var o="",s=function(_){goog.isArray(_)?goog.array.forEach(_,s):o+=goog.html.SafeStyleSheet.unwrap(_)};return goog.array.forEach(arguments,s),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeStyleSheet.fromConstant=function(i){return(i=goog.string.Const.unwrap(i)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(i,"<"),"Forbidden '<' character in style sheet string: "+i),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(i){return i instanceof goog.html.SafeStyleSheet&&i.constructor===goog.html.SafeStyleSheet&&i.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(i){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(i)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=i,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(i){return goog.dom.tags.VOID_TAGS_[i]===!0},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(i){this.tagName_=i},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var i=goog.labs.userAgent.util.getNavigator_();return i&&(i=i.userAgent)?i:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(i){goog.labs.userAgent.util.userAgent_=i||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(o,i)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(i){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(o,i)},goog.labs.userAgent.util.extractVersionTuples=function(i){for(var o,s=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,_=[];o=s.exec(i);)_.push([o[1],o[2],o[3]||void 0]);return _},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function i($){return $=goog.array.find($,_),s[$]||""}var o=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(o);o=goog.labs.userAgent.util.extractVersionTuples(o);var s={};goog.array.forEach(o,function($){s[$[0]]=$[1]});var _=goog.partial(goog.object.containsKey,s);return goog.labs.userAgent.browser.isOpera()?i(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?i(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?i(["Edg"]):goog.labs.userAgent.browser.isChrome()?i(["Chrome","CriOS"]):(o=o[2])&&o[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(i){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),i)},goog.labs.userAgent.browser.getIEVersion_=function(i){var o=/rv: *([\d\.]*)/.exec(i);if(o&&o[1])return o[1];o="";var s=/MSIE +([\d\.]+)/.exec(i);if(s&&s[1])if(i=/Trident\/(\d.\d)/.exec(i),s[1]=="7.0")if(i&&i[1])switch(i[1]){case"4.0":o="8.0";break;case"5.0":o="9.0";break;case"6.0":o="10.0";break;case"7.0":o="11.0"}else o="7.0";else o=s[1];return o},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(i){return goog.html.SafeHtml.unwrapTrustedHTML(i).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(i){return i instanceof goog.html.SafeHtml&&i.constructor===goog.html.SafeHtml&&i.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?i.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+i+"' of type "+goog.typeOf(i)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(i){if(i instanceof goog.html.SafeHtml)return i;var o=typeof i=="object",s=null;return o&&i.implementsGoogI18nBidiDirectionalString&&(s=i.getDirection()),i=o&&i.implementsGoogStringTypedString?i.getTypedStringValue():String(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(i),s)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(i){return i instanceof goog.html.SafeHtml?i:(i=goog.html.SafeHtml.htmlEscape(i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(i)),i.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(i,o,s){return goog.html.SafeHtml.verifyTagName(String(i)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(i),o,s)},goog.html.SafeHtml.verifyTagName=function(i){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(i))throw Error("Invalid tag name <"+i+">.");if(i.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+i+"> is not allowed for SafeHtml.")},goog.html.SafeHtml.createIframe=function(i,o,s,_){i&&goog.html.TrustedResourceUrl.unwrap(i);var $={};return $.src=i||null,$.srcdoc=o&&goog.html.SafeHtml.unwrap(o),i=goog.html.SafeHtml.combineAttributes($,{sandbox:""},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.createSandboxIframe=function(i,o,s,_){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var $={};return $.src=i?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)):null,$.srcdoc=o||null,$.sandbox="",i=goog.html.SafeHtml.combineAttributes($,{},s),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",i,_)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(i,o){return goog.html.TrustedResourceUrl.unwrap(i),i=goog.html.SafeHtml.combineAttributes({src:i},{},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",i)},goog.html.SafeHtml.createScript=function(i,o){for(var s in o){var _=s.toLowerCase();if(_=="language"||_=="src"||_=="text"||_=="type")throw Error('Cannot set "'+_+'" attribute')}for(s="",i=goog.array.concat(i),_=0;_<i.length;_++)s+=goog.html.SafeScript.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",o,i)},goog.html.SafeHtml.createStyle=function(i,o){o=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},o);var s="";i=goog.array.concat(i);for(var _=0;_<i.length;_++)s+=goog.html.SafeStyleSheet.unwrap(i[_]);return i=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",o,i)},goog.html.SafeHtml.createMetaRefresh=function(i,o){return i=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(i)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(o||0)+"; url="+i})},goog.html.SafeHtml.getAttrNameAndValue_=function(i,o,s){if(s instanceof goog.string.Const)s=goog.string.Const.unwrap(s);else if(o.toLowerCase()=="style")s=goog.html.SafeHtml.getStyleValue_(s);else{if(/^on/i.test(o))throw Error('Attribute "'+o+'" requires goog.string.Const value, "'+s+'" given.');if(o.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(s instanceof goog.html.TrustedResourceUrl)s=goog.html.TrustedResourceUrl.unwrap(s);else if(s instanceof goog.html.SafeUrl)s=goog.html.SafeUrl.unwrap(s);else{if(!goog.isString(s))throw Error('Attribute "'+o+'" on tag "'+i+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+s+'" given.');s=goog.html.SafeUrl.sanitize(s).getTypedStringValue()}}return s.implementsGoogStringTypedString&&(s=s.getTypedStringValue()),goog.asserts.assert(goog.isString(s)||goog.isNumber(s),"String or number value expected, got "+typeof s+" with value: "+s),o+'="'+goog.string.internal.htmlEscape(String(s))+'"'},goog.html.SafeHtml.getStyleValue_=function(i){if(!goog.isObject(i))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof i+" given: "+i);return i instanceof goog.html.SafeStyle||(i=goog.html.SafeStyle.create(i)),goog.html.SafeStyle.unwrap(i)},goog.html.SafeHtml.createWithDir=function(i,o,s,_){return(o=goog.html.SafeHtml.create(o,s,_)).dir_=i,o},goog.html.SafeHtml.join=function(i,o){var s=(i=goog.html.SafeHtml.htmlEscape(i)).getDirection(),_=[],$=function(et){goog.isArray(et)?goog.array.forEach(et,$):(et=goog.html.SafeHtml.htmlEscape(et),_.push(goog.html.SafeHtml.unwrap(et)),et=et.getDirection(),s==goog.i18n.bidi.Dir.NEUTRAL?s=et:et!=goog.i18n.bidi.Dir.NEUTRAL&&s!=et&&(s=null))};return goog.array.forEach(o,$),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(_.join(goog.html.SafeHtml.unwrap(i)),s)},goog.html.SafeHtml.concat=function(i){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(i,o){var s=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return s.dir_=i,s},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(i,o){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(i,o)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(i,o){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(i):i,this.dir_=o,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(i,o,s){var _=null,$="<"+i+goog.html.SafeHtml.stringifyAttributes(i,o);return goog.isDefAndNotNull(s)?goog.isArray(s)||(s=[s]):s=[],goog.dom.tags.isVoidTag(i.toLowerCase())?(goog.asserts.assert(!s.length,"Void tag <"+i+"> does not allow content."),$+=">"):(_=goog.html.SafeHtml.concat(s),$+=">"+goog.html.SafeHtml.unwrap(_)+"</"+i+">",_=_.getDirection()),(i=o&&o.dir)&&(_=/^(ltr|rtl|auto)$/i.test(i)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse($,_)},goog.html.SafeHtml.stringifyAttributes=function(i,o){var s="";if(o)for(var _ in o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(_))throw Error('Invalid attribute name "'+_+'".');var $=o[_];goog.isDefAndNotNull($)&&(s+=" "+goog.html.SafeHtml.getAttrNameAndValue_(i,_,$))}return s},goog.html.SafeHtml.combineAttributes=function(i,o,s){var _,$={};for(_ in i)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=i[_];for(_ in o)goog.asserts.assert(_.toLowerCase()==_,"Must be lower case"),$[_]=o[_];for(_ in s){var et=_.toLowerCase();if(et in i)throw Error('Cannot override "'+et+'" attribute, got "'+_+'" with value "'+s[_]+'"');et in o&&delete $[et],$[_]=s[_]}return $},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(i,o,s){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,s||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(i,o){return goog.asserts.assertString(goog.string.Const.unwrap(i),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(i)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(i){if(goog.asserts.ENABLE_ASSERTS){var o=goog.dom.asserts.getWindow_(i);o&&(!i||!(i instanceof o.Location)&&i instanceof o.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(i))}return i},goog.dom.asserts.assertIsElementType_=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=goog.dom.asserts.getWindow_(i);s&&s[o]!==void 0&&(i&&(i instanceof s[o]||!(i instanceof s.Location||i instanceof s.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",o,goog.dom.asserts.debugStringForType_(i)))}return i},goog.dom.asserts.assertIsHTMLAnchorElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(i){return goog.dom.asserts.assertIsElementType_(i,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(i){if(!goog.isObject(i))return i===void 0?"undefined":i===null?"null":typeof i;try{return i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch{return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(i){try{var o=i&&i.ownerDocument,s=o&&(o.defaultView||o.parentWindow);if((s=s||goog.global).Element&&s.Location)return s}catch{}return null},goog.functions={},goog.functions.constant=function(i){return function(){return i}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(i,o){return i},goog.functions.error=function(i){return function(){throw Error(i)}},goog.functions.fail=function(i){return function(){throw i}},goog.functions.lock=function(i,o){return o=o||0,function(){return i.apply(this,Array.prototype.slice.call(arguments,0,o))}},goog.functions.nth=function(i){return function(){return arguments[i]}},goog.functions.partialRight=function(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _=Array.prototype.slice.call(arguments);return _.push.apply(_,s),i.apply(this,_)}},goog.functions.withReturnValue=function(i,o){return goog.functions.sequence(i,goog.functions.constant(o))},goog.functions.equalTo=function(i,o){return function(s){return o?i==s:i===s}},goog.functions.compose=function(i,o){var s=arguments,_=s.length;return function(){var $;_&&($=s[_-1].apply(this,arguments));for(var et=_-2;0<=et;et--)$=s[et].call(this,$);return $}},goog.functions.sequence=function(i){var o=arguments,s=o.length;return function(){for(var _,$=0;$<s;$++)_=o[$].apply(this,arguments);return _}},goog.functions.and=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(!o[_].apply(this,arguments))return!1;return!0}},goog.functions.or=function(i){var o=arguments,s=o.length;return function(){for(var _=0;_<s;_++)if(o[_].apply(this,arguments))return!0;return!1}},goog.functions.not=function(i){return function(){return!i.apply(this,arguments)}},goog.functions.create=function(i,o){var s=function(){};return s.prototype=i.prototype,s=new s,i.apply(s,Array.prototype.slice.call(arguments,1)),s},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(i){var o,s=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(s||(o=i(),s=!0),o):i()}},goog.functions.once=function(i){var o=i;return function(){if(o){var s=o;o=null,s()}}},goog.functions.debounce=function(i,o,s){var _=0;return function($){goog.global.clearTimeout(_);var et=arguments;_=goog.global.setTimeout(function(){i.apply(s,et)},o)}},goog.functions.throttle=function(i,o,s){var _=0,$=!1,et=[],tt=function(){_=0,$&&($=!1,j())},j=function(){_=goog.global.setTimeout(tt,o),i.apply(s,et)};return function(it){et=arguments,_?$=!0:j()}},goog.functions.rateLimit=function(i,o,s){var _=0,$=function(){_=0};return function(et){_||(_=goog.global.setTimeout($,o),i.apply(s,arguments))}},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(i,o,s){i.insertAdjacentHTML(o,goog.html.SafeHtml.unwrapTrustedHTML(s))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var i=document.createElement("div"),o=document.createElement("div");return o.appendChild(document.createElement("div")),i.appendChild(o),!(goog.DEBUG&&!i.firstChild)&&(o=i.firstChild.firstChild,i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!o.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(i,o){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;i.lastChild;)i.removeChild(i.lastChild);i.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setInnerHtml=function(i,o){if(goog.asserts.ENABLE_ASSERTS){var s=i.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[s])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+i.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(i,o)},goog.dom.safe.setOuterHtml=function(i,o){i.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setFormElementAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLFormElement(i).action=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setButtonFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLButtonElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setInputFormAction=function(i,o){o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),goog.dom.asserts.assertIsHTMLInputElement(i).formAction=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setStyle=function(i,o){i.style.cssText=goog.html.SafeStyle.unwrap(o)},goog.dom.safe.documentWrite=function(i,o){i.write(goog.html.SafeHtml.unwrapTrustedHTML(o))},goog.dom.safe.setAnchorHref=function(i,o){goog.dom.asserts.assertIsHTMLAnchorElement(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setImageSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLImageElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:image\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setAudioSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLAudioElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:audio\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setVideoSrc=function(i,o){if(goog.dom.asserts.assertIsHTMLVideoElement(i),!(o instanceof goog.html.SafeUrl)){var s=/^data:video\//i.test(o);o=goog.html.SafeUrl.sanitizeAssertUnchanged(o,s)}i.src=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.setEmbedSrc=function(i,o){goog.dom.asserts.assertIsHTMLEmbedElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setFrameSrc=function(i,o){goog.dom.asserts.assertIsHTMLFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)},goog.dom.safe.setIframeSrcdoc=function(i,o){goog.dom.asserts.assertIsHTMLIFrameElement(i),i.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(o)},goog.dom.safe.setLinkHrefAndRel=function(i,o,s){goog.dom.asserts.assertIsHTMLLinkElement(i),i.rel=s,goog.string.internal.caseInsensitiveContains(s,"stylesheet")?(goog.asserts.assert(o instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),i.href=goog.html.TrustedResourceUrl.unwrapTrustedURL(o)):i.href=o instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrapTrustedURL(o):o instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrapTrustedURL(o):goog.html.SafeUrl.unwrapTrustedURL(goog.html.SafeUrl.sanitizeAssertUnchanged(o))},goog.dom.safe.setObjectData=function(i,o){goog.dom.asserts.assertIsHTMLObjectElement(i),i.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o)},goog.dom.safe.setScriptSrc=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setScriptContent=function(i,o){goog.dom.asserts.assertIsHTMLScriptElement(i),i.text=goog.html.SafeScript.unwrapTrustedScript(o),(o=goog.getScriptNonce())&&i.setAttribute("nonce",o)},goog.dom.safe.setLocationHref=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.href=goog.html.SafeUrl.unwrapTrustedURL(o)},goog.dom.safe.assignLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.assign(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.replaceLocation=function(i,o){goog.dom.asserts.assertIsLocation(i),o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i.replace(goog.html.SafeUrl.unwrapTrustedURL(o))},goog.dom.safe.openInWindow=function(i,o,s,_,$){return i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),(o||goog.global).open(goog.html.SafeUrl.unwrapTrustedURL(i),s?goog.string.Const.unwrap(s):"",_,$)},goog.dom.safe.parseFromStringHtml=function(i,o){return goog.dom.safe.parseFromString(i,o,"text/html")},goog.dom.safe.parseFromString=function(i,o,s){return i.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(o),s)},goog.dom.safe.createImageFromBlob=function(i){if(!/^image\/.*/g.test(i.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var o=goog.global.URL.createObjectURL(i);return(i=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(o)},goog.dom.safe.setImageSrc(i,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),o)),i},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(i,o){for(var s=i.split("%s"),_="",$=Array.prototype.slice.call(arguments,1);$.length&&1<s.length;)_+=s.shift()+$.shift();return _+s.join("%s")},goog.string.collapseWhitespace=function(i){return i.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(i){return i.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(i){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(i))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(i){return!/[^\t\n\r ]/.test(i)},goog.string.isAlpha=function(i){return!/[^a-zA-Z]/.test(i)},goog.string.isNumeric=function(i){return!/[^0-9]/.test(i)},goog.string.isAlphaNumeric=function(i){return!/[^a-zA-Z0-9]/.test(i)},goog.string.isSpace=function(i){return i==" "},goog.string.isUnicodeChar=function(i){return i.length==1&&" "<=i&&"~">=i||""<=i&&"�">=i},goog.string.stripNewlines=function(i){return i.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(i){return i.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(i){return i.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(i){return i.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(i){return i.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(i){return i.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(i){return i.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(i,o,s){if(i==o)return 0;if(!i)return-1;if(!o)return 1;for(var _=i.toLowerCase().match(s),$=o.toLowerCase().match(s),et=Math.min(_.length,$.length),tt=0;tt<et;tt++){s=_[tt];var j=$[tt];if(s!=j)return i=parseInt(s,10),!isNaN(i)&&(o=parseInt(j,10),!isNaN(o)&&i-o)?i-o:s<j?-1:1}return _.length!=$.length?_.length-$.length:i<o?-1:1},goog.string.intAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\D+/g)},goog.string.floatAwareCompare=function(i,o){return goog.string.numberAwareCompare_(i,o,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(i){return encodeURIComponent(String(i))},goog.string.urlDecode=function(i){return decodeURIComponent(i.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(i,o){return i=goog.string.internal.htmlEscape(i,o),goog.string.DETECT_DOUBLE_ESCAPING&&(i=i.replace(goog.string.E_RE_,"&#101;")),i},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(i){return goog.string.contains(i,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(i):goog.string.unescapePureXmlEntities_(i):i},goog.string.unescapeEntitiesWithDocument=function(i,o){return goog.string.contains(i,"&")?goog.string.unescapeEntitiesUsingDom_(i,o):i},goog.string.unescapeEntitiesUsingDom_=function(i,o){var s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},_=o?o.createElement("div"):goog.global.document.createElement("div");return i.replace(goog.string.HTML_ENTITY_PATTERN_,function($,et){var tt=s[$];return tt||(et.charAt(0)=="#"&&(et=Number("0"+et.substr(1)),isNaN(et)||(tt=String.fromCharCode(et))),tt||(goog.dom.safe.setInnerHtml(_,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),$+" ")),tt=_.firstChild.nodeValue.slice(0,-1)),s[$]=tt)})},goog.string.unescapePureXmlEntities_=function(i){return i.replace(/&([^;]+);/g,function(o,s){switch(s){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return s.charAt(0)!="#"||(s=Number("0"+s.substr(1)),isNaN(s))?o:String.fromCharCode(s)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(i,o){return goog.string.newLineToBr(i.replace(/  /g," &#160;"),o)},goog.string.preserveSpaces=function(i){return i.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(i,o){for(var s=o.length,_=0;_<s;_++){var $=s==1?o:o.charAt(_);if(i.charAt(0)==$&&i.charAt(i.length-1)==$)return i.substring(1,i.length-1)}return i},goog.string.truncate=function(i,o,s){return s&&(i=goog.string.unescapeEntities(i)),i.length>o&&(i=i.substring(0,o-3)+"..."),s&&(i=goog.string.htmlEscape(i)),i},goog.string.truncateMiddle=function(i,o,s,_){if(s&&(i=goog.string.unescapeEntities(i)),_&&i.length>o){_>o&&(_=o);var $=i.length-_;i=i.substring(0,o-_)+"..."+i.substring($)}else i.length>o&&(_=Math.floor(o/2),$=i.length-_,i=i.substring(0,_+o%2)+"..."+i.substring($));return s&&(i=goog.string.htmlEscape(i)),i},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(i){i=String(i);for(var o=['"'],s=0;s<i.length;s++){var _=i.charAt(s),$=_.charCodeAt(0);o[s+1]=goog.string.specialEscapeChars_[_]||(31<$&&127>$?_:goog.string.escapeChar(_))}return o.push('"'),o.join("")},goog.string.escapeString=function(i){for(var o=[],s=0;s<i.length;s++)o[s]=goog.string.escapeChar(i.charAt(s));return o.join("")},goog.string.escapeChar=function(i){if(i in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[i];if(i in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[i]=goog.string.specialEscapeChars_[i];var o=i.charCodeAt(0);if(31<o&&127>o)var s=i;else 256>o?(s="\\x",(16>o||256<o)&&(s+="0")):(s="\\u",4096>o&&(s+="0")),s+=o.toString(16).toUpperCase();return goog.string.jsEscapeCache_[i]=s},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(i,o){return i&&o?i.split(o).length-1:0},goog.string.removeAt=function(i,o,s){var _=i;return 0<=o&&o<i.length&&0<s&&(_=i.substr(0,o)+i.substr(o+s,i.length-o-s)),_},goog.string.remove=function(i,o){return i.replace(o,"")},goog.string.removeAll=function(i,o){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,"")},goog.string.replaceAll=function(i,o,s){return o=new RegExp(goog.string.regExpEscape(o),"g"),i.replace(o,s.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(i){return String(i).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(i,o){return i.repeat(o)}:function(i,o){return Array(o+1).join(i)},goog.string.padNumber=function(i,o,s){return(s=(i=goog.isDef(s)?i.toFixed(s):String(i)).indexOf("."))==-1&&(s=i.length),goog.string.repeat("0",Math.max(0,o-s))+i},goog.string.makeSafe=function(i){return i==null?"":String(i)},goog.string.buildString=function(i){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(i){for(var o=0,s=0;s<i.length;++s)o=31*o+i.charCodeAt(s)>>>0;return o},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(i){var o=Number(i);return o==0&&goog.string.isEmptyOrWhitespace(i)?NaN:o},goog.string.isLowerCamelCase=function(i){return/^[a-z]+([A-Z][a-z]*)*$/.test(i)},goog.string.isUpperCamelCase=function(i){return/^([A-Z][a-z]*)+$/.test(i)},goog.string.toCamelCase=function(i){return String(i).replace(/\-([a-z])/g,function(o,s){return s.toUpperCase()})},goog.string.toSelectorCase=function(i){return String(i).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(i,o){return o=goog.isString(o)?goog.string.regExpEscape(o):"\\s",i.replace(new RegExp("(^"+(o?"|["+o+"]+":"")+")([a-z])","g"),function(s,_,$){return _+$.toUpperCase()})},goog.string.capitalize=function(i){return String(i.charAt(0)).toUpperCase()+String(i.substr(1)).toLowerCase()},goog.string.parseInt=function(i){return isFinite(i)&&(i=String(i)),goog.isString(i)?/^\s*-?0x/i.test(i)?parseInt(i,16):parseInt(i,10):NaN},goog.string.splitLimit=function(i,o,s){i=i.split(o);for(var _=[];0<s&&i.length;)_.push(i.shift()),s--;return i.length&&_.push(i.join(o)),_},goog.string.lastComponent=function(i,o){if(!o)return i;typeof o=="string"&&(o=[o]);for(var s=-1,_=0;_<o.length;_++)if(o[_]!=""){var $=i.lastIndexOf(o[_]);$>s&&(s=$)}return s==-1?i:i.slice(s+1)},goog.string.editDistance=function(i,o){var s=[],_=[];if(i==o)return 0;if(!i.length||!o.length)return Math.max(i.length,o.length);for(var $=0;$<o.length+1;$++)s[$]=$;for($=0;$<i.length;$++){_[0]=$+1;for(var et=0;et<o.length;et++)_[et+1]=Math.min(_[et]+1,s[et+1]+1,s[et]+Number(i[$]!=o[et]));for(et=0;et<s.length;et++)s[et]=_[et]}return _[o.length]},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent(),o="";return goog.labs.userAgent.platform.isWindows()?o=(i=(o=/Windows (?:NT|Phone) ([0-9.]+)/).exec(i))?i[1]:"0.0":goog.labs.userAgent.platform.isIos()?o=(i=(o=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(i))&&i[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?o=(i=(o=/Mac OS X ([0-9_.]+)/).exec(i))?i[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?o=(i=(o=/(?:KaiOS)\/(\S+)/i).exec(i))&&i[1]:goog.labs.userAgent.platform.isAndroid()?o=(i=(o=/Android\s+([^\);]+)(\)|;)/).exec(i))&&i[1]:goog.labs.userAgent.platform.isChromeOS()&&(o=(i=(o=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(i))&&i[1]),o||""},goog.labs.userAgent.platform.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),i)},goog.reflect={},goog.reflect.object=function(i,o){return o},goog.reflect.objectProperty=function(i,o){return i},goog.reflect.sinkValue=function(i){return goog.reflect.sinkValue[" "](i),i},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(i,o){try{return goog.reflect.sinkValue(i[o]),!0}catch{}return!1},goog.reflect.cache=function(i,o,s,_){return _=_?_(o):o,Object.prototype.hasOwnProperty.call(i,_)?i[_]:i[_]=s(o)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var i=goog.labs.userAgent.util.getUserAgent();if(i){i=goog.labs.userAgent.util.extractVersionTuples(i);var o,s=goog.labs.userAgent.engine.getEngineTuple_(i);if(s)return s[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(i,"Firefox"):s[1];if((i=i[0])&&(o=i[2])&&(o=/Trident\/([^\s;]+)/.exec(o)))return o[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(i){if(!goog.labs.userAgent.engine.isEdge())return i[1];for(var o=0;o<i.length;o++){var s=i[o];if(s[0]=="Edge")return s}},goog.labs.userAgent.engine.isVersionOrHigher=function(i){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),i)},goog.labs.userAgent.engine.getVersionForKey_=function(i,o){return(i=goog.array.find(i,function(s){return o==s[0]}))&&i[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var i=goog.userAgent.getNavigatorTyped();return i&&i.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var i=goog.userAgent.getNavigatorTyped();return!!i&&goog.string.contains(i.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var i="",o=goog.userAgent.getVersionRegexResult_();return o&&(i=o?o[1]:""),goog.userAgent.IE&&(o=goog.userAgent.getDocumentMode_())!=null&&o>parseFloat(i)?String(o):i},goog.userAgent.getVersionRegexResult_=function(){var i=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(i):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(i):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(i):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(i):void 0},goog.userAgent.getDocumentMode_=function(){var i=goog.global.document;return i?i.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(i,o){return goog.string.compareVersions(i,o)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(i){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,i,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,i)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(i){return Number(goog.userAgent.DOCUMENT_MODE)>=i},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(i){return goog.string.contains(goog.crypt.base64.paddingChars_,i)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(i,o){goog.asserts.assert(goog.isArrayLike(i),"encodeByteArray takes an array as a parameter"),o===void 0&&(o=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),o=goog.crypt.base64.byteToCharMaps_[o];for(var s=[],_=0;_<i.length;_+=3){var $=i[_],et=_+1<i.length,tt=et?i[_+1]:0,j=_+2<i.length,it=j?i[_+2]:0,st=$>>2;$=(3&$)<<4|tt>>4,tt=(15&tt)<<2|it>>6,it&=63,j||(it=64,et||(tt=64)),s.push(o[st],o[$],o[tt]||"",o[it]||"")}return s.join("")},goog.crypt.base64.encodeString=function(i,o){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!o?goog.global.btoa(i):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(i),o)},goog.crypt.base64.decodeString=function(i,o){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!o)return goog.global.atob(i);var s="";return goog.crypt.base64.decodeStringInternal_(i,function(_){s+=String.fromCharCode(_)}),s},goog.crypt.base64.decodeStringToByteArray=function(i,o){var s=[];return goog.crypt.base64.decodeStringInternal_(i,function(_){s.push(_)}),s},goog.crypt.base64.decodeStringToUint8Array=function(i){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var o=i.length,s=3*o/4;s%3?s=Math.floor(s):goog.crypt.base64.isPadding_(i[o-1])&&(s=goog.crypt.base64.isPadding_(i[o-2])?s-2:s-1);var _=new Uint8Array(s),$=0;return goog.crypt.base64.decodeStringInternal_(i,function(et){_[$++]=et}),_.subarray(0,$)},goog.crypt.base64.decodeStringInternal_=function(i,o){function s(it){for(;_<i.length;){var st=i.charAt(_++),ht=goog.crypt.base64.charToByteMap_[st];if(ht!=null)return ht;if(!goog.string.isEmptyOrWhitespace(st))throw Error("Unknown base64 encoding at char: "+st)}return it}goog.crypt.base64.init_();for(var _=0;;){var $=s(-1),et=s(0),tt=s(64),j=s(64);if(j===64&&$===-1)break;o($<<2|et>>4),tt!=64&&(o(et<<4&240|tt>>2),j!=64&&o(tt<<6&192|j))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var i=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),o=["+/=","+/","-_=","-_.","-_"],s=0;5>s;s++){var _=i.concat(o[s].split(""));goog.crypt.base64.byteToCharMaps_[s]=_;for(var $=0;$<_.length;$++){var et=_[$],tt=goog.crypt.base64.charToByteMap_[et];tt===void 0?goog.crypt.base64.charToByteMap_[et]=$:goog.asserts.assert(tt===$)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(i){var o=i>>>0;i=Math.floor((i-o)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=o,jspb.utils.split64High=i},jspb.utils.splitInt64=function(i){var o=0>i,s=(i=Math.abs(i))>>>0;i=Math.floor((i-s)/jspb.BinaryConstants.TWO_TO_32),i>>>=0,o&&(i=~i>>>0,4294967295<(s=1+(~s>>>0))&&(s=0,4294967295<++i&&(i=0))),jspb.utils.split64Low=s,jspb.utils.split64High=i},jspb.utils.splitZigzag64=function(i){var o=0>i;i=2*Math.abs(i),jspb.utils.splitUint64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;o&&(i==0?s==0?s=i=4294967295:(s--,i=4294967295):i--),jspb.utils.split64Low=i,jspb.utils.split64High=s},jspb.utils.splitFloat32=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)0<1/i?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(i))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(i>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|2139095040)>>>0;else if(i<jspb.BinaryConstants.FLOAT32_MIN)i=Math.round(i/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|i)>>>0;else{var s=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-s),i=8388607&Math.round(i*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(o<<31|s+127<<23|i)>>>0}},jspb.utils.splitFloat64=function(i){var o=0>i?1:0;if((i=o?-i:i)===0)jspb.utils.split64High=0<1/i?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(i))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(i>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(o<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(i<jspb.BinaryConstants.FLOAT64_MIN){var s=i/Math.pow(2,-1074);i=s/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(o<<31|i)>>>0,jspb.utils.split64Low=s>>>0}else{var _=0;if(2<=(s=i))for(;2<=s&&1023>_;)_++,s/=2;else for(;1>s&&-1022<_;)s*=2,_--;i=(s=i*Math.pow(2,-_))*jspb.BinaryConstants.TWO_TO_20&1048575,s=s*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(o<<31|_+1023<<20|i)>>>0,jspb.utils.split64Low=s}},jspb.utils.splitHash64=function(i){var o=i.charCodeAt(0),s=i.charCodeAt(1),_=i.charCodeAt(2),$=i.charCodeAt(3),et=i.charCodeAt(4),tt=i.charCodeAt(5),j=i.charCodeAt(6);i=i.charCodeAt(7),jspb.utils.split64Low=o+(s<<8)+(_<<16)+($<<24)>>>0,jspb.utils.split64High=et+(tt<<8)+(j<<16)+(i<<24)>>>0},jspb.utils.joinUint64=function(i,o){return o*jspb.BinaryConstants.TWO_TO_32+(i>>>0)},jspb.utils.joinInt64=function(i,o){var s=2147483648&o;return s&&(o=~o>>>0,(i=1+~i>>>0)==0&&(o=o+1>>>0)),i=jspb.utils.joinUint64(i,o),s?-i:i},jspb.utils.toZigzag64=function(i,o,s){var _=o>>31;return s(i<<1^_,(o<<1|i>>>31)^_)},jspb.utils.joinZigzag64=function(i,o){return jspb.utils.fromZigzag64(i,o,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(i,o,s){var _=-(1&i);return s((i>>>1|o<<31)^_,o>>>1^_)},jspb.utils.joinFloat32=function(i,o){o=2*(i>>31)+1;var s=i>>>23&255;return i&=8388607,s==255?i?NaN:1/0*o:s==0?o*Math.pow(2,-149)*i:o*Math.pow(2,s-150)*(i+Math.pow(2,23))},jspb.utils.joinFloat64=function(i,o){var s=2*(o>>31)+1,_=o>>>20&2047;return i=jspb.BinaryConstants.TWO_TO_32*(1048575&o)+i,_==2047?i?NaN:1/0*s:_==0?s*Math.pow(2,-1074)*i:s*Math.pow(2,_-1075)*(i+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(i,o){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,o>>>0&255,o>>>8&255,o>>>16&255,o>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(i,o){function s($,et){return $=$?String($):"",et?"0000000".slice($.length)+$:$}if(2097151>=o)return""+(jspb.BinaryConstants.TWO_TO_32*o+i);var _=(i>>>24|o<<8)>>>0&16777215;return i=(16777215&i)+6777216*_+6710656*(o=o>>16&65535),_+=8147497*o,o*=2,1e7<=i&&(_+=Math.floor(i/1e7),i%=1e7),1e7<=_&&(o+=Math.floor(_/1e7),_%=1e7),s(o,0)+s(_,o)+s(i,1)},jspb.utils.joinSignedDecimalString=function(i,o){var s=2147483648&o;return s&&(o=~o+((i=1+~i>>>0)==0?1:0)>>>0),i=jspb.utils.joinUnsignedDecimalString(i,o),s?"-"+i:i},jspb.utils.hash64ToDecimalString=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinSignedDecimalString(i,s):jspb.utils.joinUnsignedDecimalString(i,s)},jspb.utils.hash64ArrayToDecimalStrings=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]=jspb.utils.hash64ToDecimalString(i[_],o);return s},jspb.utils.decimalStringToHash64=function(i){function o(et,tt){for(var j=0;8>j&&(et!==1||0<tt);j++)tt=et*_[j]+tt,_[j]=255&tt,tt>>>=8}goog.asserts.assert(0<i.length);var s=!1;i[0]==="-"&&(s=!0,i=i.slice(1));for(var _=[0,0,0,0,0,0,0,0],$=0;$<i.length;$++)o(10,i.charCodeAt($)-jspb.utils.ZERO_CHAR_CODE_);return s&&(function(){for(var et=0;8>et;et++)_[et]=255&~_[et]}(),o(1,1)),goog.crypt.byteArrayToString(_)},jspb.utils.splitDecimalString=function(i){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i))},jspb.utils.toHexDigit_=function(i){return String.fromCharCode(10>i?jspb.utils.ZERO_CHAR_CODE_+i:jspb.utils.A_CHAR_CODE_-10+i)},jspb.utils.fromHexCharCode_=function(i){return i>=jspb.utils.A_CHAR_CODE_?i-jspb.utils.A_CHAR_CODE_+10:i-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(i){var o=Array(18);o[0]="0",o[1]="x";for(var s=0;8>s;s++){var _=i.charCodeAt(7-s);o[2*s+2]=jspb.utils.toHexDigit_(_>>4),o[2*s+3]=jspb.utils.toHexDigit_(15&_)}return o.join("")},jspb.utils.hexStringToHash64=function(i){i=i.toLowerCase(),goog.asserts.assert(i.length==18),goog.asserts.assert(i[0]=="0"),goog.asserts.assert(i[1]=="x");for(var o="",s=0;8>s;s++){var _=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+2)),$=jspb.utils.fromHexCharCode_(i.charCodeAt(2*s+3));o=String.fromCharCode(16*_+$)+o}return o},jspb.utils.hash64ToNumber=function(i,o){jspb.utils.splitHash64(i),i=jspb.utils.split64Low;var s=jspb.utils.split64High;return o?jspb.utils.joinInt64(i,s):jspb.utils.joinUint64(i,s)},jspb.utils.numberToHash64=function(i){return jspb.utils.splitInt64(i),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(i,o,s){for(var _=0,$=o;$<s;$++)_+=i[$]>>7;return s-o-_},jspb.utils.countVarintFields=function(i,o,s,_){var $=0;if(128>(_=8*_+jspb.BinaryConstants.WireType.VARINT))for(;o<s&&i[o++]==_;)for($++;;){var et=i[o++];if(!(128&et))break}else for(;o<s;){for(et=_;128<et;){if(i[o]!=(127&et|128))return $;o++,et>>=7}if(i[o++]!=et)break;for($++;128&(et=i[o++]););}return $},jspb.utils.countFixedFields_=function(i,o,s,_,$){var et=0;if(128>_)for(;o<s&&i[o++]==_;)et++,o+=$;else for(;o<s;){for(var tt=_;128<tt;){if(i[o++]!=(127&tt|128))return et;tt>>=7}if(i[o++]!=tt)break;et++,o+=$}return et},jspb.utils.countFixed32Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(i,o,s,_){return jspb.utils.countFixedFields_(i,o,s,8*_+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(i,o,s,_){var $=0;for(_=8*_+jspb.BinaryConstants.WireType.DELIMITED;o<s;){for(var et=_;128<et;){if(i[o++]!=(127&et|128))return $;et>>=7}if(i[o++]!=et)break;$++;for(var tt=0,j=1;tt+=(127&(et=i[o++]))*j,j*=128,(128&et)!=0;);o+=tt}return $},jspb.utils.debugBytesToTextFormat=function(i){var o='"';if(i){i=jspb.utils.byteSourceToUint8Array(i);for(var s=0;s<i.length;s++)o+="\\x",16>i[s]&&(o+="0"),o+=i[s].toString(16)}return o+'"'},jspb.utils.debugScalarToTextFormat=function(i){return typeof i=="string"?goog.string.quote(i):i.toString()},jspb.utils.stringToByteArray=function(i){for(var o=new Uint8Array(i.length),s=0;s<i.length;s++){var _=i.charCodeAt(s);if(255<_)throw Error("Conversion error: string contains codepoint outside of byte range");o[s]=_}return o},jspb.utils.byteSourceToUint8Array=function(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer||Buffer!==void 0&&i.constructor===Buffer||i.constructor===Array?new Uint8Array(i):i.constructor===String?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(i,o,s){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,i&&this.setBlock(i,o,s)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(i,o,s){if(jspb.BinaryDecoder.instanceCache_.length){var _=jspb.BinaryDecoder.instanceCache_.pop();return i&&_.setBlock(i,o,s),_}return new jspb.BinaryDecoder(i,o,s)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(i,o,s){this.bytes_=jspb.utils.byteSourceToUint8Array(i),this.start_=o!==void 0?o:0,this.end_=s!==void 0?this.start_+s:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(i){this.end_=i},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(i){this.cursor_=i},jspb.BinaryDecoder.prototype.advance=function(i){this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(i){for(var o=128,s=0,_=0,$=0;4>$&&128<=o;$++)s|=(127&(o=this.bytes_[this.cursor_++]))<<7*$;if(128<=o&&(s|=(127&(o=this.bytes_[this.cursor_++]))<<28,_|=(127&o)>>4),128<=o)for($=0;5>$&&128<=o;$++)_|=(127&(o=this.bytes_[this.cursor_++]))<<7*$+3;if(128>o)return i(s>>>0,_>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(i){return this.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(i){var o=this.bytes_,s=this.cursor_;this.cursor_+=8;for(var _=0,$=0,et=s+7;et>=s;et--)_=_<<8|o[et],$=$<<8|o[et+4];return i(_,$)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(i){for(;128<i;)this.cursor_--,i>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var i=this.bytes_,o=i[this.cursor_+0],s=127&o;return 128>o?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+1]))<<7,128>o?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+2]))<<14,128>o?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(127&(o=i[this.cursor_+3]))<<21,128>o?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),s):(s|=(15&(o=i[this.cursor_+4]))<<28,128>o?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),s>>>0):(this.cursor_+=5,128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&128<=i[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),s)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var i=this.readUnsignedVarint32();return i>>>1^-(1&i)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i},jspb.BinaryDecoder.prototype.readUint16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8|s<<16|_<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUint64(i,o)},jspb.BinaryDecoder.prototype.readUint64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinUnsignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readInt8=function(){var i=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),i<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(i<<0|o<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var i=this.bytes_[this.cursor_+0],o=this.bytes_[this.cursor_+1],s=this.bytes_[this.cursor_+2],_=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),i<<0|o<<8|s<<16|_<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinInt64(i,o)},jspb.BinaryDecoder.prototype.readInt64String=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinSignedDecimalString(i,o)},jspb.BinaryDecoder.prototype.readFloat=function(){var i=this.readUint32();return jspb.utils.joinFloat32(i,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var i=this.readUint32(),o=this.readUint32();return jspb.utils.joinFloat64(i,o)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(i){var o=this.bytes_,s=this.cursor_;i=s+i;for(var _=[],$="";s<i;){var et=o[s++];if(128>et)_.push(et);else{if(192>et)continue;if(224>et){var tt=o[s++];_.push((31&et)<<6|63&tt)}else if(240>et){tt=o[s++];var j=o[s++];_.push((15&et)<<12|(63&tt)<<6|63&j)}else 248>et&&(et=(7&et)<<18|(63&(tt=o[s++]))<<12|(63&(j=o[s++]))<<6|63&o[s++],et-=65536,_.push(55296+(et>>10&1023),56320+(1023&et)))}8192<=_.length&&($+=String.fromCharCode.apply(null,_),_.length=0)}return $+=goog.crypt.byteArrayToString(_),this.cursor_=s,$},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var i=this.readUnsignedVarint32();return this.readString(i)},jspb.BinaryDecoder.prototype.readBytes=function(i){if(0>i||this.cursor_+i>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var o=this.bytes_.subarray(this.cursor_,this.cursor_+i);return this.cursor_+=i,goog.asserts.assert(this.cursor_<=this.end_),o},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var i=this.bytes_,o=this.cursor_,s=i[o+0],_=i[o+1],$=i[o+2],et=i[o+3],tt=i[o+4],j=i[o+5],it=i[o+6];return i=i[o+7],this.cursor_+=8,String.fromCharCode(s,_,$,et,tt,j,it,i)},jspb.BinaryReader=function(i,o,s){this.decoder_=jspb.BinaryDecoder.alloc(i,o,s),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(i,o,s){if(jspb.BinaryReader.instanceCache_.length){var _=jspb.BinaryReader.instanceCache_.pop();return i&&_.decoder_.setBlock(i,o,s),_}return new jspb.BinaryReader(i,o,s)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(i,o,s){this.decoder_.setBlock(i,o,s),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(i){this.decoder_.advance(i)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var i=this.decoder_.readUnsignedVarint32(),o=i>>>3;return(i&=7)!=jspb.BinaryConstants.WireType.VARINT&&i!=jspb.BinaryConstants.WireType.FIXED32&&i!=jspb.BinaryConstants.WireType.FIXED64&&i!=jspb.BinaryConstants.WireType.DELIMITED&&i!=jspb.BinaryConstants.WireType.START_GROUP&&i!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",i,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=o,this.nextWireType_=i,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var i=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==i;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var i=this.decoder_.readUnsignedVarint32();this.decoder_.advance(i)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var i=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=i&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(i,o){this.readCallbacks_===null&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[i]),this.readCallbacks_[i]=o},jspb.BinaryReader.prototype.runReadCallback=function(i){return goog.asserts.assert(this.readCallbacks_!==null),i=this.readCallbacks_[i],goog.asserts.assert(i),i(this)},jspb.BinaryReader.prototype.readAny=function(i){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(i);var o=jspb.BinaryConstants.FieldType;switch(i){case o.DOUBLE:return this.readDouble();case o.FLOAT:return this.readFloat();case o.INT64:return this.readInt64();case o.UINT64:return this.readUint64();case o.INT32:return this.readInt32();case o.FIXED64:return this.readFixed64();case o.FIXED32:return this.readFixed32();case o.BOOL:return this.readBool();case o.STRING:return this.readString();case o.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case o.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case o.BYTES:return this.readBytes();case o.UINT32:return this.readUint32();case o.ENUM:return this.readEnum();case o.SFIXED32:return this.readSfixed32();case o.SFIXED64:return this.readSfixed64();case o.SINT32:return this.readSint32();case o.SINT64:return this.readSint64();case o.FHASH64:return this.readFixedHash64();case o.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(i,o){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var s=this.decoder_.getEnd(),_=this.decoder_.readUnsignedVarint32();_=this.decoder_.getCursor()+_,this.decoder_.setEnd(_),o(i,this),this.decoder_.setCursor(_),this.decoder_.setEnd(s)},jspb.BinaryReader.prototype.readGroup=function(i,o,s){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==i),s(o,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32(),o=this.decoder_.getCursor(),s=o+i;return i=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),o,i),this.decoder_.setCursor(s),i},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(i)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var i=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(i)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(i)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(o,s){return jspb.utils.fromZigzag64(o,s,i)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(i){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(i)},jspb.BinaryReader.prototype.readPackedField_=function(i){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var o=this.decoder_.readUnsignedVarint32();o=this.decoder_.getCursor()+o;for(var s=[];this.decoder_.getCursor()<o;)s.push(i.call(this.decoder_));return s},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(i,o){this.arr_=i,this.valueCtor_=o,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},jspb.Map.prototype.loadFromArray_=function(){for(var i=0;i<this.arr_.length;i++){var o=this.arr_[i],s=o[0];this.map_[s.toString()]=new jspb.Map.Entry_(s,o[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var i,o=this.map_;for(i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var s=o[i].valueWrapper;s&&s.toArray()}}}else{for(this.arr_.length=0,(o=this.stringKeys_()).sort(),i=0;i<o.length;i++){var _=this.map_[o[i]];(s=_.valueWrapper)&&s.toArray(),this.arr_.push([_.key,_.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(i,o){for(var s=this.toArray(),_=[],$=0;$<s.length;$++){var et=this.map_[s[$][0].toString()];this.wrapEntry_(et);var tt=et.valueWrapper;tt?(goog.asserts.assert(o),_.push([et.key,o(i,tt)])):_.push([et.key,et.value])}return _},jspb.Map.fromObject=function(i,o,s){o=new jspb.Map([],o);for(var _=0;_<i.length;_++){var $=i[_][0],et=s(i[_][1]);o.set($,et)}return o},jspb.Map.ArrayIteratorIterable_=function(i){this.idx_=0,this.arr_=i},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(i){i=i.toString();var o=this.map_.hasOwnProperty(i);return delete this.map_[i],this.arrClean=!1,o},jspb.Map.prototype.getEntryList=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,_.value])}return i},jspb.Map.prototype.entries=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var _=this.map_[o[s]];i.push([_.key,this.wrapEntry_(_)])}return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.keys=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.map_[o[s]].key);return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.values=function(){var i=[],o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++)i.push(this.wrapEntry_(this.map_[o[s]]));return new jspb.Map.ArrayIteratorIterable_(i)},jspb.Map.prototype.forEach=function(i,o){var s=this.stringKeys_();s.sort();for(var _=0;_<s.length;_++){var $=this.map_[s[_]];i.call(o,this.wrapEntry_($),$.key,this)}},jspb.Map.prototype.set=function(i,o){var s=new jspb.Map.Entry_(i);return this.valueCtor_?(s.valueWrapper=o,s.value=o.toArray()):s.value=o,this.map_[i.toString()]=s,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(i){return this.valueCtor_?(i.valueWrapper||(i.valueWrapper=new this.valueCtor_(i.value)),i.valueWrapper):i.value},jspb.Map.prototype.get=function(i){if(i=this.map_[i.toString()])return this.wrapEntry_(i)},jspb.Map.prototype.has=function(i){return i.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(i,o,s,_,$){var et=this.stringKeys_();et.sort();for(var tt=0;tt<et.length;tt++){var j=this.map_[et[tt]];o.beginSubMessage(i),s.call(o,1,j.key),this.valueCtor_?_.call(o,2,this.wrapEntry_(j),$):_.call(o,2,j.value),o.endSubMessage()}},jspb.Map.deserializeBinary=function(i,o,s,_,$,et,tt){for(;o.nextField()&&!o.isEndGroup();){var j=o.getFieldNumber();j==1?et=s.call(o):j==2&&(i.valueCtor_?(goog.asserts.assert($),tt||(tt=new i.valueCtor_),_.call(o,tt,$)):tt=_.call(o))}goog.asserts.assert(et!=null),goog.asserts.assert(tt!=null),i.set(et,tt)},jspb.Map.prototype.stringKeys_=function(){var i,o=this.map_,s=[];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},jspb.Map.Entry_=function(i,o){this.key=i,this.value=o,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(i,o,s,_,$){this.fieldIndex=i,this.fieldName=o,this.ctor=s,this.toObjectFn=_,this.isRepeated=$},jspb.ExtensionFieldBinaryInfo=function(i,o,s,_,$,et){this.fieldInfo=i,this.binaryReaderFn=o,this.binaryWriterFn=s,this.binaryMessageSerializeFn=_,this.binaryMessageDeserializeFn=$,this.isPacked=et},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(i,o){return o+i.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(i,o){return o-i.arrayIndexOffset_},jspb.Message.initialize=function(i,o,s,_,$,et){if(i.wrappers_=null,o||(o=s?[s]:[]),i.messageId_=s?String(s):void 0,i.arrayIndexOffset_=s===0?-1:0,i.array=o,jspb.Message.initPivotAndExtensionObject_(i,_),i.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(i.repeatedFields=$),$)for(o=0;o<$.length;o++)(s=$[o])<i.pivot_?(s=jspb.Message.getIndex_(i,s),i.array[s]=i.array[s]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[s]=i.extensionObject_[s]||jspb.Message.EMPTY_LIST_SENTINEL_);if(et&&et.length)for(o=0;o<et.length;o++)jspb.Message.computeOneofCase(i,et[o])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(i){return jspb.Message.ASSUME_LOCAL_ARRAYS?i instanceof Array:Array.isArray(i)},jspb.Message.isExtensionObject_=function(i){return!(i===null||typeof i!="object"||jspb.Message.isArray_(i)||jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(i,o){var s=i.array.length,_=-1;if(s&&(_=s-1,s=i.array[_],jspb.Message.isExtensionObject_(s)))return i.pivot_=jspb.Message.getFieldNumber_(i,_),void(i.extensionObject_=s);-1<o?(i.pivot_=Math.max(o,jspb.Message.getFieldNumber_(i,_+1)),i.extensionObject_=null):i.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(i){var o=jspb.Message.getIndex_(i,i.pivot_);i.array[o]||(i.extensionObject_=i.array[o]={})},jspb.Message.toObjectList=function(i,o,s){for(var _=[],$=0;$<i.length;$++)_[$]=o.call(i[$],s,i[$]);return _},jspb.Message.toObjectExtension=function(i,o,s,_,$){for(var et in s){var tt=s[et],j=_.call(i,tt);if(j!=null){for(var it in tt.fieldName)if(tt.fieldName.hasOwnProperty(it))break;o[it]=tt.toObjectFn?tt.isRepeated?jspb.Message.toObjectList(j,tt.toObjectFn,$):tt.toObjectFn($,j):j}}},jspb.Message.serializeBinaryExtensions=function(i,o,s,_){for(var $ in s){var et=s[$],tt=et.fieldInfo;if(!et.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var j=_.call(i,tt);if(j!=null)if(tt.isMessageType()){if(!et.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");et.binaryWriterFn.call(o,tt.fieldIndex,j,et.binaryMessageSerializeFn)}else et.binaryWriterFn.call(o,tt.fieldIndex,j)}},jspb.Message.readBinaryExtension=function(i,o,s,_,$){var et=s[o.getFieldNumber()];if(et){if(s=et.fieldInfo,!et.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(s.isMessageType()){var tt=new s.ctor;et.binaryReaderFn.call(o,tt,et.binaryMessageDeserializeFn)}else tt=et.binaryReaderFn.call(o);s.isRepeated&&!et.isPacked?(o=_.call(i,s))?o.push(tt):$.call(i,s,[tt]):$.call(i,s,tt)}else o.skipField()},jspb.Message.getField=function(i,o){if(o<i.pivot_){o=jspb.Message.getIndex_(i,o);var s=i.array[o];return s===jspb.Message.EMPTY_LIST_SENTINEL_?i.array[o]=[]:s}if(i.extensionObject_)return(s=i.extensionObject_[o])===jspb.Message.EMPTY_LIST_SENTINEL_?i.extensionObject_[o]=[]:s},jspb.Message.getRepeatedField=function(i,o){return jspb.Message.getField(i,o)},jspb.Message.getOptionalFloatingPointField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:+i},jspb.Message.getBooleanField=function(i,o){return(i=jspb.Message.getField(i,o))==null?i:!!i},jspb.Message.getRepeatedFloatingPointField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=+s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.getRepeatedBooleanField=function(i,o){var s=jspb.Message.getRepeatedField(i,o);if(i.convertedPrimitiveFields_||(i.convertedPrimitiveFields_={}),!i.convertedPrimitiveFields_[o]){for(var _=0;_<s.length;_++)s[_]=!!s[_];i.convertedPrimitiveFields_[o]=!0}return s},jspb.Message.bytesAsB64=function(i){return i==null||typeof i=="string"?i:jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array?goog.crypt.base64.encodeByteArray(i):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(i)),null)},jspb.Message.bytesAsU8=function(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?goog.crypt.base64.decodeStringToUint8Array(i):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(i)),null)},jspb.Message.bytesListAsB64=function(i){return jspb.Message.assertConsistentTypes_(i),i.length&&typeof i[0]!="string"?goog.array.map(i,jspb.Message.bytesAsB64):i},jspb.Message.bytesListAsU8=function(i){return jspb.Message.assertConsistentTypes_(i),!i.length||i[0]instanceof Uint8Array?i:goog.array.map(i,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(i){if(goog.DEBUG&&i&&1<i.length){var o=goog.typeOf(i[0]);goog.array.forEach(i,function(s){goog.typeOf(s)!=o&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(s)+" expected "+o)})}},jspb.Message.getFieldWithDefault=function(i,o,s){return(i=jspb.Message.getField(i,o))==null?s:i},jspb.Message.getBooleanFieldWithDefault=function(i,o,s){return(i=jspb.Message.getBooleanField(i,o))==null?s:i},jspb.Message.getFloatingPointFieldWithDefault=function(i,o,s){return(i=jspb.Message.getOptionalFloatingPointField(i,o))==null?s:i},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),o in i.wrappers_)return i.wrappers_[o];var $=jspb.Message.getField(i,o);if(!$){if(s)return;$=[],jspb.Message.setField(i,o,$)}return i.wrappers_[o]=new jspb.Map($,_)},jspb.Message.setField=function(i,o,s){return goog.asserts.assertInstanceof(i,jspb.Message),o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=s:(jspb.Message.maybeInitEmptyExtensionObject_(i),i.extensionObject_[o]=s),i},jspb.Message.setProto3IntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3FloatField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3BooleanField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,!1)},jspb.Message.setProto3StringField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3BytesField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"")},jspb.Message.setProto3EnumField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,0)},jspb.Message.setProto3StringIntField=function(i,o,s){return jspb.Message.setFieldIgnoringDefault_(i,o,s,"0")},jspb.Message.setFieldIgnoringDefault_=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),s!==_?jspb.Message.setField(i,o,s):o<i.pivot_?i.array[jspb.Message.getIndex_(i,o)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(i),delete i.extensionObject_[o]),i},jspb.Message.addToRepeatedField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),o=jspb.Message.getRepeatedField(i,o),_!=null?o.splice(_,0,s):o.push(s),i},jspb.Message.setOneofField=function(i,o,s,_){return goog.asserts.assertInstanceof(i,jspb.Message),(s=jspb.Message.computeOneofCase(i,s))&&s!==o&&_!==void 0&&(i.wrappers_&&s in i.wrappers_&&(i.wrappers_[s]=void 0),jspb.Message.setField(i,s,void 0)),jspb.Message.setField(i,o,_)},jspb.Message.computeOneofCase=function(i,o){for(var s,_,$=0;$<o.length;$++){var et=o[$],tt=jspb.Message.getField(i,et);tt!=null&&(s=et,_=tt,jspb.Message.setField(i,et,void 0))}return s?(jspb.Message.setField(i,s,_),s):0},jspb.Message.getWrapperField=function(i,o,s,_){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){var $=jspb.Message.getField(i,s);(_||$)&&(i.wrappers_[s]=new o($))}return i.wrappers_[s]},jspb.Message.getRepeatedWrapperField=function(i,o,s){return jspb.Message.wrapRepeatedField_(i,o,s),(o=i.wrappers_[s])==jspb.Message.EMPTY_LIST_SENTINEL_&&(o=i.wrappers_[s]=[]),o},jspb.Message.wrapRepeatedField_=function(i,o,s){if(i.wrappers_||(i.wrappers_={}),!i.wrappers_[s]){for(var _=jspb.Message.getRepeatedField(i,s),$=[],et=0;et<_.length;et++)$[et]=new o(_[et]);i.wrappers_[s]=$}},jspb.Message.setWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var _=s&&s.toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.setOneofWrapperField=function(i,o,s,_){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={});var $=_&&_.toArray();return i.wrappers_[o]=_,jspb.Message.setOneofField(i,o,s,$)},jspb.Message.setRepeatedWrapperField=function(i,o,s){goog.asserts.assertInstanceof(i,jspb.Message),i.wrappers_||(i.wrappers_={}),s=s||[];for(var _=[],$=0;$<s.length;$++)_[$]=s[$].toArray();return i.wrappers_[o]=s,jspb.Message.setField(i,o,_)},jspb.Message.addToRepeatedWrapperField=function(i,o,s,_,$){jspb.Message.wrapRepeatedField_(i,_,o);var et=i.wrappers_[o];return et||(et=i.wrappers_[o]=[]),s=s||new _,i=jspb.Message.getRepeatedField(i,o),$!=null?(et.splice($,0,s),i.splice($,0,s.toArray())):(et.push(s),i.push(s.toArray())),s},jspb.Message.toMap=function(i,o,s,_){for(var $={},et=0;et<i.length;et++)$[o.call(i[et])]=s?s.call(i[et],_,i[et]):i[et];return $},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var i in this.wrappers_){var o=this.wrappers_[i];if(Array.isArray(o))for(var s=0;s<o.length;s++)o[s]&&o[s].toArray();else o&&o.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(i){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var o=i.fieldIndex;if(i.isRepeated){if(i.isMessageType())return this.wrappers_[o]||(this.wrappers_[o]=goog.array.map(this.extensionObject_[o]||[],function(s){return new i.ctor(s)})),this.wrappers_[o]}else if(i.isMessageType())return!this.wrappers_[o]&&this.extensionObject_[o]&&(this.wrappers_[o]=new i.ctor(this.extensionObject_[o])),this.wrappers_[o];return this.extensionObject_[o]}},jspb.Message.prototype.setExtension=function(i,o){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var s=i.fieldIndex;return i.isRepeated?(o=o||[],i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=goog.array.map(o,function(_){return _.toArray()})):this.extensionObject_[s]=o):i.isMessageType()?(this.wrappers_[s]=o,this.extensionObject_[s]=o&&o.toArray()):this.extensionObject_[s]=o,this},jspb.Message.difference=function(i,o){if(!(i instanceof o.constructor))throw Error("Messages have different types.");var s=i.toArray();o=o.toArray();var _=[],$=0,et=s.length>o.length?s.length:o.length;for(i.getJsPbMessageId()&&(_[0]=i.getJsPbMessageId(),$=1);$<et;$++)jspb.Message.compareFields(s[$],o[$])||(_[$]=o[$]);return new i.constructor(_)},jspb.Message.equals=function(i,o){return i==o||!(!i||!o)&&i instanceof o.constructor&&jspb.Message.compareFields(i.toArray(),o.toArray())},jspb.Message.compareExtensions=function(i,o){i=i||{},o=o||{};var s,_={};for(s in i)_[s]=0;for(s in o)_[s]=0;for(s in _)if(!jspb.Message.compareFields(i[s],o[s]))return!1;return!0},jspb.Message.compareFields=function(i,o){if(i==o)return!0;if(!goog.isObject(i)||!goog.isObject(o))return!!(typeof i=="number"&&isNaN(i)||typeof o=="number"&&isNaN(o))&&String(i)==String(o);if(i.constructor!=o.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i.constructor===Uint8Array){if(i.length!=o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!=o[s])return!1;return!0}if(i.constructor===Array){var _=void 0,$=void 0,et=Math.max(i.length,o.length);for(s=0;s<et;s++){var tt=i[s],j=o[s];if(tt&&tt.constructor==Object&&(goog.asserts.assert(_===void 0),goog.asserts.assert(s===i.length-1),_=tt,tt=void 0),j&&j.constructor==Object&&(goog.asserts.assert($===void 0),goog.asserts.assert(s===o.length-1),$=j,j=void 0),!jspb.Message.compareFields(tt,j))return!1}return!_&&!$||(_=_||{},$=$||{},jspb.Message.compareExtensions(_,$))}if(i.constructor===Object)return jspb.Message.compareExtensions(i,o);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(i){return jspb.Message.cloneMessage(i)},jspb.Message.cloneMessage=function(i){return new i.constructor(jspb.Message.clone_(i.toArray()))},jspb.Message.copyInto=function(i,o){goog.asserts.assertInstanceof(i,jspb.Message),goog.asserts.assertInstanceof(o,jspb.Message),goog.asserts.assert(i.constructor==o.constructor,"Copy source and target message should have the same type."),i=jspb.Message.clone(i);for(var s=o.toArray(),_=i.toArray(),$=s.length=0;$<_.length;$++)s[$]=_[$];o.wrappers_=i.wrappers_,o.extensionObject_=i.extensionObject_},jspb.Message.clone_=function(i){if(Array.isArray(i)){for(var o=Array(i.length),s=0;s<i.length;s++){var _=i[s];_!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_)}return o}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&i instanceof Uint8Array)return new Uint8Array(i);for(s in o={},i)(_=i[s])!=null&&(o[s]=typeof _=="object"?jspb.Message.clone_(goog.asserts.assert(_)):_);return o},jspb.Message.registerMessageType=function(i,o){o.messageId=i},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(i,o){this.lo=i,this.hi=o},jspb.arith.UInt64.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(i){return new jspb.arith.UInt64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(i){return new jspb.arith.UInt64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(i,o){var s=65535&i,_=65535&o,$=o>>>16;for(o=s*_+65536*(s*$&65535)+65536*((i>>>=16)*_&65535),s=i*$+(s*$>>>16)+(i*_>>>16);4294967296<=o;)o-=4294967296,s+=1;return new jspb.arith.UInt64(o>>>0,s>>>0)},jspb.arith.UInt64.prototype.mul=function(i){var o=jspb.arith.UInt64.mul32x32(this.lo,i);return(i=jspb.arith.UInt64.mul32x32(this.hi,i)).hi=i.lo,i.lo=0,o.add(i)},jspb.arith.UInt64.prototype.div=function(i){if(i==0)return[];var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(this.lo,this.hi);i=new jspb.arith.UInt64(i,0);for(var _=new jspb.arith.UInt64(1,0);!i.msb();)i=i.leftShift(),_=_.leftShift();for(;!_.zero();)0>=i.cmp(s)&&(o=o.add(_),s=s.sub(i)),i=i.rightShift(),_=_.rightShift();return[o,s]},jspb.arith.UInt64.prototype.toString=function(){for(var i="",o=this;!o.zero();){var s=(o=o.div(10))[0];i=o[1].lo+i,o=s}return i==""&&(i="0"),i},jspb.arith.UInt64.fromString=function(i){for(var o=new jspb.arith.UInt64(0,0),s=new jspb.arith.UInt64(0,0),_=0;_<i.length;_++){if("0">i[_]||"9"<i[_])return null;var $=parseInt(i[_],10);s.lo=$,o=o.mul(10).add(s)}return o},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(i,o){this.lo=i,this.hi=o},jspb.arith.Int64.prototype.add=function(i){return new jspb.arith.Int64((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(i){return new jspb.arith.Int64((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var i=(2147483648&this.hi)!=0,o=new jspb.arith.UInt64(this.lo,this.hi);return i&&(o=new jspb.arith.UInt64(0,0).sub(o)),(i?"-":"")+o.toString()},jspb.arith.Int64.fromString=function(i){var o=0<i.length&&i[0]=="-";return o&&(i=i.substring(1)),(i=jspb.arith.UInt64.fromString(i))===null?null:(o&&(i=new jspb.arith.UInt64(0,0).sub(i)),new jspb.arith.Int64(i.lo,i.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var i=this.buffer_;return this.buffer_=[],i},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(i,o){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32);0<o||127<i;)this.buffer_.push(127&i|128),i=(i>>>7|o<<25)>>>0,o>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(i,o){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(o==Math.floor(o)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(i),this.writeUint32(o)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(i){for(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32);127<i;)this.buffer_.push(127&i|128),i>>>=7;this.buffer_.push(i)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(i){if(goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),0<=i)this.writeUnsignedVarint32(i);else{for(var o=0;9>o;o++)this.buffer_.push(127&i|128),i>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((i<<1^i>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(i){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(i))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(i){var o=this;jspb.utils.splitHash64(i),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(s,_){o.writeSplitVarint64(s>>>0,_>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&256>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&65536>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(0<=i&&i<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-128<=i&&128>i),this.buffer_.push(i>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(-32768<=i&&32768>i),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(i>>>0&255),this.buffer_.push(i>>>8&255),this.buffer_.push(i>>>16&255),this.buffer_.push(i>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_63&&i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(i),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(+i>=-jspb.BinaryConstants.TWO_TO_63&&+i<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(i)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT32_MAX&&i<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(i),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(i){goog.asserts.assert(1/0===i||-1/0===i||isNaN(i)||i>=-jspb.BinaryConstants.FLOAT64_MAX&&i<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(i){goog.asserts.assert(typeof i=="boolean"||typeof i=="number"),this.buffer_.push(i?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(i){goog.asserts.assert(i==Math.floor(i)),goog.asserts.assert(i>=-jspb.BinaryConstants.TWO_TO_31&&i<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(i)},jspb.BinaryEncoder.prototype.writeBytes=function(i){this.buffer_.push.apply(this.buffer_,i)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(i){jspb.utils.splitHash64(i),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(i){jspb.utils.splitHash64(i),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(i){for(var o=this.buffer_.length,s=0;s<i.length;s++){var _=i.charCodeAt(s);if(128>_)this.buffer_.push(_);else if(2048>_)this.buffer_.push(_>>6|192),this.buffer_.push(63&_|128);else if(65536>_)if(55296<=_&&56319>=_&&s+1<i.length){var $=i.charCodeAt(s+1);56320<=$&&57343>=$&&(_=1024*(_-55296)+$-56320+65536,this.buffer_.push(_>>18|240),this.buffer_.push(_>>12&63|128),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128),s++)}else this.buffer_.push(_>>12|224),this.buffer_.push(_>>6&63|128),this.buffer_.push(63&_|128)}return this.buffer_.length-o},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(i){var o=this.encoder_.end();this.blocks_.push(o),this.blocks_.push(i),this.totalLength_+=o.length+i.length},jspb.BinaryWriter.prototype.beginDelimited_=function(i){return this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),i=this.encoder_.end(),this.blocks_.push(i),this.totalLength_+=i.length,i.push(this.totalLength_),i},jspb.BinaryWriter.prototype.endDelimited_=function(i){var o=i.pop();for(o=this.totalLength_+this.encoder_.length()-o,goog.asserts.assert(0<=o);127<o;)i.push(127&o|128),o>>>=7,this.totalLength_++;i.push(o),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(i,o,s){this.appendUint8Array_(i.subarray(o,s))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(i,o,s){i!=null&&o!=null&&s!=null&&this.writeSerializedMessage(i,o,s)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(this.bookmarks_.length==0);for(var i=new Uint8Array(this.totalLength_+this.encoder_.length()),o=this.blocks_,s=o.length,_=0,$=0;$<s;$++){var et=o[$];i.set(et,_),_+=et.length}return o=this.encoder_.end(),i.set(o,_),_+=o.length,goog.asserts.assert(_==i.length),this.blocks_=[i],i},jspb.BinaryWriter.prototype.getResultBase64String=function(i){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),i)},jspb.BinaryWriter.prototype.beginSubMessage=function(i){this.bookmarks_.push(this.beginDelimited_(i))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(i,o){goog.asserts.assert(1<=i&&i==Math.floor(i)),this.encoder_.writeUnsignedVarint32(8*i+o)},jspb.BinaryWriter.prototype.writeAny=function(i,o,s){var _=jspb.BinaryConstants.FieldType;switch(i){case _.DOUBLE:this.writeDouble(o,s);break;case _.FLOAT:this.writeFloat(o,s);break;case _.INT64:this.writeInt64(o,s);break;case _.UINT64:this.writeUint64(o,s);break;case _.INT32:this.writeInt32(o,s);break;case _.FIXED64:this.writeFixed64(o,s);break;case _.FIXED32:this.writeFixed32(o,s);break;case _.BOOL:this.writeBool(o,s);break;case _.STRING:this.writeString(o,s);break;case _.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case _.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case _.BYTES:this.writeBytes(o,s);break;case _.UINT32:this.writeUint32(o,s);break;case _.ENUM:this.writeEnum(o,s);break;case _.SFIXED32:this.writeSfixed32(o,s);break;case _.SFIXED64:this.writeSfixed64(o,s);break;case _.SINT32:this.writeSint32(o,s);break;case _.SINT64:this.writeSint64(o,s);break;case _.FHASH64:this.writeFixedHash64(o,s);break;case _.VHASH64:this.writeVarintHash64(o,s);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(o))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(o))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(o))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(o))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(o))},jspb.BinaryWriter.prototype.writeInt32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeInt64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeInt64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeUint32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint32String=function(i,o){o!=null&&(o=parseInt(o,10),goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(i,o))},jspb.BinaryWriter.prototype.writeUint64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(i,o))},jspb.BinaryWriter.prototype.writeUint64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSint32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(i,o))},jspb.BinaryWriter.prototype.writeSint64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(i,o))},jspb.BinaryWriter.prototype.writeSintHash64=function(i,o){o!=null&&this.writeZigzagVarintHash64_(i,o)},jspb.BinaryWriter.prototype.writeSint64String=function(i,o){o!=null&&this.writeZigzagVarint64String_(i,o)},jspb.BinaryWriter.prototype.writeFixed32=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(o))},jspb.BinaryWriter.prototype.writeFixed64=function(i,o){o!=null&&(goog.asserts.assert(0<=o&&o<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(o))},jspb.BinaryWriter.prototype.writeFixed64String=function(i,o){o!=null&&(o=jspb.arith.UInt64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(o))},jspb.BinaryWriter.prototype.writeSfixed64=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_63&&o<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(o))},jspb.BinaryWriter.prototype.writeSfixed64String=function(i,o){o!=null&&(o=jspb.arith.Int64.fromString(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o.lo,o.hi))},jspb.BinaryWriter.prototype.writeFloat=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(o))},jspb.BinaryWriter.prototype.writeDouble=function(i,o){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(o))},jspb.BinaryWriter.prototype.writeBool=function(i,o){o!=null&&(goog.asserts.assert(typeof o=="boolean"||typeof o=="number"),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(o))},jspb.BinaryWriter.prototype.writeEnum=function(i,o){o!=null&&(goog.asserts.assert(o>=-jspb.BinaryConstants.TWO_TO_31&&o<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(o))},jspb.BinaryWriter.prototype.writeString=function(i,o){o!=null&&(i=this.beginDelimited_(i),this.encoder_.writeString(o),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeBytes=function(i,o){o!=null&&(o=jspb.utils.byteSourceToUint8Array(o),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),this.appendUint8Array_(o))},jspb.BinaryWriter.prototype.writeMessage=function(i,o,s){o!=null&&(i=this.beginDelimited_(i),s(o,this),this.endDelimited_(i))},jspb.BinaryWriter.prototype.writeMessageSet=function(i,o,s){o!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(i),i=this.beginDelimited_(3),s(o,this),this.endDelimited_(i),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(i,o,s){o!=null&&(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o,this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(o))},jspb.BinaryWriter.prototype.writeVarintHash64=function(i,o){o!=null&&(goog.asserts.assert(o.length==8),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(o))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(o,s)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(o,s)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(i,o,s){this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.VARINT);var _=this.encoder_;jspb.utils.toZigzag64(o,s,function($,et){_.writeSplitVarint64($>>>0,et>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitFixed64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(i,o,s,_){if(o!=null)for(var $=0;$<o.length;$++)this.writeSplitZigzagVarint64(i,s(o[$]),_(o[$]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeInt64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint32String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUnsignedVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeUint64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint32_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarint64String_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeZigzagVarintHash64_(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed32(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeSfixed64String(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFloat(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeDouble(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBool(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeEnum(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedString=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeString(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeBytes(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++){var $=this.beginDelimited_(i);s(o[_],this),this.endDelimited_($)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(i,o,s){if(o!=null)for(var _=0;_<o.length;_++)this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.START_GROUP),s(o[_],this),this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeFixedHash64(i,o[s])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(i,o){if(o!=null)for(var s=0;s<o.length;s++)this.writeVarintHash64(i,o[s])},jspb.BinaryWriter.prototype.writePackedInt32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeSignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitFixed64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=0;$<o.length;$++)this.encoder_.writeSplitVarint64(s(o[$]),_(o[$]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(i,o,s,_){if(o!=null){i=this.beginDelimited_(i);for(var $=this.encoder_,et=0;et<o.length;et++)jspb.utils.toZigzag64(s(o[et]),_(o[et]),function(tt,j){$.writeSplitVarint64(tt>>>0,j>>>0)});this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.Int64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint32(parseInt(o[s],10));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeUnsignedVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++){var _=jspb.arith.UInt64.fromString(o[s]);this.encoder_.writeSplitVarint64(_.lo,_.hi)}this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint32=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint32(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarint64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(o[s]));this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeZigzagVarintHash64(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeUint32(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeUint64(o[i])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++){var s=jspb.arith.UInt64.fromString(o[i]);this.encoder_.writeSplitFixed64(s.lo,s.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeInt32(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64(o[i])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeInt64String(o[i])},jspb.BinaryWriter.prototype.writePackedFloat=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*o.length),i=0;i<o.length;i++)this.encoder_.writeFloat(o[i])},jspb.BinaryWriter.prototype.writePackedDouble=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeDouble(o[i])},jspb.BinaryWriter.prototype.writePackedBool=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(o.length),i=0;i<o.length;i++)this.encoder_.writeBool(o[i])},jspb.BinaryWriter.prototype.writePackedEnum=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeEnum(o[s]);this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(i,o){if(o!=null&&o.length)for(this.writeFieldHeader_(i,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*o.length),i=0;i<o.length;i++)this.encoder_.writeFixedHash64(o[i])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(i,o){if(o!=null&&o.length){i=this.beginDelimited_(i);for(var s=0;s<o.length;s++)this.encoder_.writeVarintHash64(o[s]);this.endDelimited_(i)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(this,__webpack_require__(6),__webpack_require__(5).Buffer)},function(i,o,s){const{AbortController:_,AbortSignal:$}=typeof self<"u"?self:typeof window<"u"?window:void 0;i.exports=_,i.exports.AbortSignal=$,i.exports.default=_},function(i,o){var s=function(_){function $(){this.fetch=!1,this.DOMException=_.DOMException}return $.prototype=_,new $}(typeof self<"u"?self:this);(function(_){(function($){var et="URLSearchParams"in _,tt="Symbol"in _&&"iterator"in Symbol,j="FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch{return!1}}(),it="FormData"in _,st="ArrayBuffer"in _;if(st)var ht=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_t=ArrayBuffer.isView||function(Nt){return Nt&&ht.indexOf(Object.prototype.toString.call(Nt))>-1};function gt(Nt){if(typeof Nt!="string"&&(Nt=String(Nt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Nt))throw new TypeError("Invalid character in header field name");return Nt.toLowerCase()}function ft(Nt){return typeof Nt!="string"&&(Nt=String(Nt)),Nt}function ut(Nt){var Tt={next:function(){var Vt=Nt.shift();return{done:Vt===void 0,value:Vt}}};return tt&&(Tt[Symbol.iterator]=function(){return Tt}),Tt}function yt(Nt){this.map={},Nt instanceof yt?Nt.forEach(function(Tt,Vt){this.append(Vt,Tt)},this):Array.isArray(Nt)?Nt.forEach(function(Tt){this.append(Tt[0],Tt[1])},this):Nt&&Object.getOwnPropertyNames(Nt).forEach(function(Tt){this.append(Tt,Nt[Tt])},this)}function Et(Nt){if(Nt.bodyUsed)return Promise.reject(new TypeError("Already read"));Nt.bodyUsed=!0}function Mt(Nt){return new Promise(function(Tt,Vt){Nt.onload=function(){Tt(Nt.result)},Nt.onerror=function(){Vt(Nt.error)}})}function Ft(Nt){var Tt=new FileReader,Vt=Mt(Tt);return Tt.readAsArrayBuffer(Nt),Vt}function Rt(Nt){if(Nt.slice)return Nt.slice(0);var Tt=new Uint8Array(Nt.byteLength);return Tt.set(new Uint8Array(Nt)),Tt.buffer}function Ot(){return this.bodyUsed=!1,this._initBody=function(Nt){var Tt;this._bodyInit=Nt,Nt?typeof Nt=="string"?this._bodyText=Nt:j&&Blob.prototype.isPrototypeOf(Nt)?this._bodyBlob=Nt:it&&FormData.prototype.isPrototypeOf(Nt)?this._bodyFormData=Nt:et&&URLSearchParams.prototype.isPrototypeOf(Nt)?this._bodyText=Nt.toString():st&&j&&(Tt=Nt)&&DataView.prototype.isPrototypeOf(Tt)?(this._bodyArrayBuffer=Rt(Nt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):st&&(ArrayBuffer.prototype.isPrototypeOf(Nt)||_t(Nt))?this._bodyArrayBuffer=Rt(Nt):this._bodyText=Nt=Object.prototype.toString.call(Nt):this._bodyText="",this.headers.get("content-type")||(typeof Nt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):et&&URLSearchParams.prototype.isPrototypeOf(Nt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},j&&(this.blob=function(){var Nt=Et(this);if(Nt)return Nt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Et(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Ft)}),this.text=function(){var Nt,Tt,Vt,Xt=Et(this);if(Xt)return Xt;if(this._bodyBlob)return Nt=this._bodyBlob,Tt=new FileReader,Vt=Mt(Tt),Tt.readAsText(Nt),Vt;if(this._bodyArrayBuffer)return Promise.resolve(function(Gt){for(var Ut=new Uint8Array(Gt),Ht=new Array(Ut.length),qt=0;qt<Ut.length;qt++)Ht[qt]=String.fromCharCode(Ut[qt]);return Ht.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},it&&(this.formData=function(){return this.text().then(nn)}),this.json=function(){return this.text().then(JSON.parse)},this}yt.prototype.append=function(Nt,Tt){Nt=gt(Nt),Tt=ft(Tt);var Vt=this.map[Nt];this.map[Nt]=Vt?Vt+", "+Tt:Tt},yt.prototype.delete=function(Nt){delete this.map[gt(Nt)]},yt.prototype.get=function(Nt){return Nt=gt(Nt),this.has(Nt)?this.map[Nt]:null},yt.prototype.has=function(Nt){return this.map.hasOwnProperty(gt(Nt))},yt.prototype.set=function(Nt,Tt){this.map[gt(Nt)]=ft(Tt)},yt.prototype.forEach=function(Nt,Tt){for(var Vt in this.map)this.map.hasOwnProperty(Vt)&&Nt.call(Tt,this.map[Vt],Vt,this)},yt.prototype.keys=function(){var Nt=[];return this.forEach(function(Tt,Vt){Nt.push(Vt)}),ut(Nt)},yt.prototype.values=function(){var Nt=[];return this.forEach(function(Tt){Nt.push(Tt)}),ut(Nt)},yt.prototype.entries=function(){var Nt=[];return this.forEach(function(Tt,Vt){Nt.push([Vt,Tt])}),ut(Nt)},tt&&(yt.prototype[Symbol.iterator]=yt.prototype.entries);var pt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Lt(Nt,Tt){var Vt,Xt,Gt=(Tt=Tt||{}).body;if(Nt instanceof Lt){if(Nt.bodyUsed)throw new TypeError("Already read");this.url=Nt.url,this.credentials=Nt.credentials,Tt.headers||(this.headers=new yt(Nt.headers)),this.method=Nt.method,this.mode=Nt.mode,this.signal=Nt.signal,Gt||Nt._bodyInit==null||(Gt=Nt._bodyInit,Nt.bodyUsed=!0)}else this.url=String(Nt);if(this.credentials=Tt.credentials||this.credentials||"same-origin",!Tt.headers&&this.headers||(this.headers=new yt(Tt.headers)),this.method=(Vt=Tt.method||this.method||"GET",Xt=Vt.toUpperCase(),pt.indexOf(Xt)>-1?Xt:Vt),this.mode=Tt.mode||this.mode||null,this.signal=Tt.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Gt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Gt)}function nn(Nt){var Tt=new FormData;return Nt.trim().split("&").forEach(function(Vt){if(Vt){var Xt=Vt.split("="),Gt=Xt.shift().replace(/\+/g," "),Ut=Xt.join("=").replace(/\+/g," ");Tt.append(decodeURIComponent(Gt),decodeURIComponent(Ut))}}),Tt}function on(Nt,Tt){Tt||(Tt={}),this.type="default",this.status=Tt.status===void 0?200:Tt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Tt?Tt.statusText:"OK",this.headers=new yt(Tt.headers),this.url=Tt.url||"",this._initBody(Nt)}Lt.prototype.clone=function(){return new Lt(this,{body:this._bodyInit})},Ot.call(Lt.prototype),Ot.call(on.prototype),on.prototype.clone=function(){return new on(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new yt(this.headers),url:this.url})},on.error=function(){var Nt=new on(null,{status:0,statusText:""});return Nt.type="error",Nt};var wt=[301,302,303,307,308];on.redirect=function(Nt,Tt){if(wt.indexOf(Tt)===-1)throw new RangeError("Invalid status code");return new on(null,{status:Tt,headers:{location:Nt}})},$.DOMException=_.DOMException;try{new $.DOMException}catch{$.DOMException=function(Tt,Vt){this.message=Tt,this.name=Vt;var Xt=Error(Tt);this.stack=Xt.stack},$.DOMException.prototype=Object.create(Error.prototype),$.DOMException.prototype.constructor=$.DOMException}function xt(Nt,Tt){return new Promise(function(Vt,Xt){var Gt=new Lt(Nt,Tt);if(Gt.signal&&Gt.signal.aborted)return Xt(new $.DOMException("Aborted","AbortError"));var Ut=new XMLHttpRequest;function Ht(){Ut.abort()}Ut.onload=function(){var qt,Pt,St={status:Ut.status,statusText:Ut.statusText,headers:(qt=Ut.getAllResponseHeaders()||"",Pt=new yt,qt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(tn){var mn=tn.split(":"),yn=mn.shift().trim();if(yn){var vn=mn.join(":").trim();Pt.append(yn,vn)}}),Pt)};St.url="responseURL"in Ut?Ut.responseURL:St.headers.get("X-Request-URL");var Zt="response"in Ut?Ut.response:Ut.responseText;Vt(new on(Zt,St))},Ut.onerror=function(){Xt(new TypeError("Network request failed"))},Ut.ontimeout=function(){Xt(new TypeError("Network request failed"))},Ut.onabort=function(){Xt(new $.DOMException("Aborted","AbortError"))},Ut.open(Gt.method,Gt.url,!0),Gt.credentials==="include"?Ut.withCredentials=!0:Gt.credentials==="omit"&&(Ut.withCredentials=!1),"responseType"in Ut&&j&&(Ut.responseType="blob"),Gt.headers.forEach(function(qt,Pt){Ut.setRequestHeader(Pt,qt)}),Gt.signal&&(Gt.signal.addEventListener("abort",Ht),Ut.onreadystatechange=function(){Ut.readyState===4&&Gt.signal.removeEventListener("abort",Ht)}),Ut.send(Gt._bodyInit===void 0?null:Gt._bodyInit)})}xt.polyfill=!0,_.fetch||(_.fetch=xt,_.Headers=yt,_.Request=Lt,_.Response=on),$.Headers=yt,$.Request=Lt,$.Response=on,$.fetch=xt})({})})(s),delete s.fetch.polyfill,(o=s.fetch).default=s.fetch,o.fetch=s.fetch,o.Headers=s.Headers,o.Request=s.Request,o.Response=s.Response,i.exports=o},function(i,o,s){(function(_){const $=s(211),et=s(52),tt=(j,it,st)=>({from:tt,EnvVarError:s(52),get:function(ht){if(!ht)return j;if(arguments.length>1)throw new et("It looks like you passed more than one argument to env.get(). Since env-var@6.0.0 this is no longer supported. To set a default value use env.get(TARGET).default(DEFAULT)");return $(j,ht,it||{},st||function(){})},accessors:s(94),logger:s(225)(console.log,j.NODE_ENV)});i.exports=tt(_.env)}).call(this,s(2))},function(i,o,s){var _=s(13),$=s(73),et=s(3).LEVEL,tt=i.exports=function(){var j=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.call(this,{objectMode:!0,highWaterMark:it.highWaterMark}),this.format=it.format,this.level=it.level,this.handleExceptions=it.handleExceptions,this.silent=it.silent,it.log&&(this.log=it.log),it.logv&&(this.logv=it.logv),it.close&&(this.close=it.close),this.once("pipe",function(st){j.levels=st.levels,j.parent=st}),this.once("unpipe",function(st){st===j.parent&&(j.parent=null,j.close&&j.close())})};_.inherits(tt,$),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);var ht=this.level||this.parent&&this.parent.level;if(!ht||this.levels[ht]>=this.levels[j[et]]){if(j&&!this.format)return this.log(j,st);var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(st(),_t)throw _t;return}return this.log(gt,st)}return st(null)},tt.prototype._writev=function(j,it){if(this.logv){var st=j.filter(this._accept,this);return st.length?this.logv(st,it):it(null)}for(var ht=0;ht<j.length;ht++)if(this._accept(j[ht]))if(!j[ht].chunk||this.format){var _t=void 0,gt=void 0;try{gt=this.format.transform(Object.assign({},j[ht].chunk),this.format.options)}catch(ft){_t=ft}if(_t||!gt){if(j[ht].callback(),_t)throw it(null),_t}else this.log(gt,j[ht].callback)}else this.log(j[ht].chunk,j[ht].callback);return it(null)},tt.prototype._accept=function(j){var it=j.chunk;if(this.silent)return!1;var st=this.level||this.parent&&this.parent.level;return!(it.exception!==!0&&st&&!(this.levels[st]>=this.levels[it[et]])||!this.handleExceptions&&it.exception===!0)},tt.prototype._nop=function(){}},function(i,o,s){(function(_){const $=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,et=typeof AbortController=="function"?AbortController:class{constructor(){this.signal=new it}abort(){this.signal.dispatchEvent("abort")}},tt=typeof AbortSignal=="function",j=typeof et.AbortSignal=="function",it=tt?AbortSignal:j?et.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(Ot){if(Ot==="abort"){this.aborted=!0;const pt={type:Ot,target:this};this.onabort(pt),this._listeners.forEach(Lt=>Lt(pt),this)}}onabort(){}addEventListener(Ot,pt){Ot==="abort"&&this._listeners.push(pt)}removeEventListener(Ot,pt){Ot==="abort"&&(this._listeners=this._listeners.filter(Lt=>Lt!==pt))}},st=new Set,ht=(Ot,pt)=>{const Lt=`LRU_CACHE_OPTION_${Ot}`;ft(Lt)&&ut(Lt,`${Ot} option`,`options.${pt}`,Rt)},_t=(Ot,pt)=>{const Lt=`LRU_CACHE_METHOD_${Ot}`;if(ft(Lt)){const{prototype:nn}=Rt,{get:on}=Object.getOwnPropertyDescriptor(nn,Ot);ut(Lt,`${Ot} method`,`cache.${pt}()`,on)}},gt=(...Ot)=>{typeof _=="object"&&_&&typeof _.emitWarning=="function"?_.emitWarning(...Ot):console.error(...Ot)},ft=Ot=>!st.has(Ot),ut=(Ot,pt,Lt,nn)=>{st.add(Ot),gt(`The ${pt} is deprecated. Please use ${Lt} instead.`,"DeprecationWarning",Ot,nn)},yt=Ot=>Ot&&Ot===Math.floor(Ot)&&Ot>0&&isFinite(Ot),Et=Ot=>yt(Ot)?Ot<=Math.pow(2,8)?Uint8Array:Ot<=Math.pow(2,16)?Uint16Array:Ot<=Math.pow(2,32)?Uint32Array:Ot<=Number.MAX_SAFE_INTEGER?Mt:null:null;class Mt extends Array{constructor(pt){super(pt),this.fill(0)}}class Ft{constructor(pt){if(pt===0)return[];const Lt=Et(pt);this.heap=new Lt(pt),this.length=0}push(pt){this.heap[this.length++]=pt}pop(){return this.heap[--this.length]}}class Rt{constructor(pt={}){const{max:Lt=0,ttl:nn,ttlResolution:on=1,ttlAutopurge:wt,updateAgeOnGet:xt,updateAgeOnHas:Nt,allowStale:Tt,dispose:Vt,disposeAfter:Xt,noDisposeOnSet:Gt,noUpdateTTL:Ut,maxSize:Ht=0,maxEntrySize:qt=0,sizeCalculation:Pt,fetchMethod:St,fetchContext:Zt,noDeleteOnFetchRejection:tn,noDeleteOnStaleGet:mn}=pt,{length:yn,maxAge:vn,stale:un}=pt instanceof Rt?{}:pt;if(Lt!==0&&!yt(Lt))throw new TypeError("max option must be a nonnegative integer");const rn=Lt?Et(Lt):Array;if(!rn)throw new Error("invalid max value: "+Lt);if(this.max=Lt,this.maxSize=Ht,this.maxEntrySize=qt||this.maxSize,this.sizeCalculation=Pt||yn,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=St||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=Zt,!this.fetchMethod&&Zt!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(Lt).fill(null),this.valList=new Array(Lt).fill(null),this.next=new rn(Lt),this.prev=new rn(Lt),this.head=0,this.tail=0,this.free=new Ft(Lt),this.initialFill=1,this.size=0,typeof Vt=="function"&&(this.dispose=Vt),typeof Xt=="function"?(this.disposeAfter=Xt,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!Gt,this.noUpdateTTL=!!Ut,this.noDeleteOnFetchRejection=!!tn,this.maxEntrySize!==0){if(this.maxSize!==0&&!yt(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!yt(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!Tt||!!un,this.noDeleteOnStaleGet=!!mn,this.updateAgeOnGet=!!xt,this.updateAgeOnHas=!!Nt,this.ttlResolution=yt(on)||on===0?on:1,this.ttlAutopurge=!!wt,this.ttl=nn||vn||0,this.ttl){if(!yt(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const It="LRU_CACHE_UNBOUNDED";ft(It)&&(st.add(It),gt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",It,Rt))}un&&ht("stale","allowStale"),vn&&ht("maxAge","ttl"),yn&&ht("length","sizeCalculation")}getRemainingTTL(pt){return this.has(pt,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new Mt(this.max),this.starts=new Mt(this.max),this.setItemTTL=(nn,on,wt=$.now())=>{if(this.starts[nn]=on!==0?wt:0,this.ttls[nn]=on,on!==0&&this.ttlAutopurge){const xt=setTimeout(()=>{this.isStale(nn)&&this.delete(this.keyList[nn])},on+1);xt.unref&&xt.unref()}},this.updateItemAge=nn=>{this.starts[nn]=this.ttls[nn]!==0?$.now():0};let pt=0;const Lt=()=>{const nn=$.now();if(this.ttlResolution>0){pt=nn;const on=setTimeout(()=>pt=0,this.ttlResolution);on.unref&&on.unref()}return nn};this.getRemainingTTL=nn=>{const on=this.keyMap.get(nn);return on===void 0?0:this.ttls[on]===0||this.starts[on]===0?1/0:this.starts[on]+this.ttls[on]-(pt||Lt())},this.isStale=nn=>this.ttls[nn]!==0&&this.starts[nn]!==0&&(pt||Lt())-this.starts[nn]>this.ttls[nn]}updateItemAge(pt){}setItemTTL(pt,Lt,nn){}isStale(pt){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new Mt(this.max),this.removeItemSize=pt=>{this.calculatedSize-=this.sizes[pt],this.sizes[pt]=0},this.requireSize=(pt,Lt,nn,on)=>{if(!yt(nn)){if(!on)throw new TypeError("invalid size value (must be positive integer)");if(typeof on!="function")throw new TypeError("sizeCalculation must be a function");if(nn=on(Lt,pt),!yt(nn))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return nn},this.addItemSize=(pt,Lt)=>{this.sizes[pt]=Lt;const nn=this.maxSize-this.sizes[pt];for(;this.calculatedSize>nn;)this.evict(!0);this.calculatedSize+=this.sizes[pt]}}removeItemSize(pt){}addItemSize(pt,Lt){}requireSize(pt,Lt,nn,on){if(nn||on)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:pt=this.allowStale}={}){if(this.size)for(let Lt=this.tail;this.isValidIndex(Lt)&&(!pt&&this.isStale(Lt)||(yield Lt),Lt!==this.head);)Lt=this.prev[Lt]}*rindexes({allowStale:pt=this.allowStale}={}){if(this.size)for(let Lt=this.head;this.isValidIndex(Lt)&&(!pt&&this.isStale(Lt)||(yield Lt),Lt!==this.tail);)Lt=this.next[Lt]}isValidIndex(pt){return this.keyMap.get(this.keyList[pt])===pt}*entries(){for(const pt of this.indexes())yield[this.keyList[pt],this.valList[pt]]}*rentries(){for(const pt of this.rindexes())yield[this.keyList[pt],this.valList[pt]]}*keys(){for(const pt of this.indexes())yield this.keyList[pt]}*rkeys(){for(const pt of this.rindexes())yield this.keyList[pt]}*values(){for(const pt of this.indexes())yield this.valList[pt]}*rvalues(){for(const pt of this.rindexes())yield this.valList[pt]}[Symbol.iterator](){return this.entries()}find(pt,Lt={}){for(const nn of this.indexes())if(pt(this.valList[nn],this.keyList[nn],this))return this.get(this.keyList[nn],Lt)}forEach(pt,Lt=this){for(const nn of this.indexes())pt.call(Lt,this.valList[nn],this.keyList[nn],this)}rforEach(pt,Lt=this){for(const nn of this.rindexes())pt.call(Lt,this.valList[nn],this.keyList[nn],this)}get prune(){return _t("prune","purgeStale"),this.purgeStale}purgeStale(){let pt=!1;for(const Lt of this.rindexes({allowStale:!0}))this.isStale(Lt)&&(this.delete(this.keyList[Lt]),pt=!0);return pt}dump(){const pt=[];for(const Lt of this.indexes({allowStale:!0})){const nn=this.keyList[Lt],on=this.valList[Lt],wt={value:this.isBackgroundFetch(on)?on.__staleWhileFetching:on};if(this.ttls){wt.ttl=this.ttls[Lt];const xt=$.now()-this.starts[Lt];wt.start=Math.floor(Date.now()-xt)}this.sizes&&(wt.size=this.sizes[Lt]),pt.unshift([nn,wt])}return pt}load(pt){this.clear();for(const[Lt,nn]of pt){if(nn.start){const on=Date.now()-nn.start;nn.start=$.now()-on}this.set(Lt,nn.value,nn)}}dispose(pt,Lt,nn){}set(pt,Lt,{ttl:nn=this.ttl,start:on,noDisposeOnSet:wt=this.noDisposeOnSet,size:xt=0,sizeCalculation:Nt=this.sizeCalculation,noUpdateTTL:Tt=this.noUpdateTTL}={}){if(xt=this.requireSize(pt,Lt,xt,Nt),this.maxEntrySize&&xt>this.maxEntrySize)return this;let Vt=this.size===0?void 0:this.keyMap.get(pt);if(Vt===void 0)Vt=this.newIndex(),this.keyList[Vt]=pt,this.valList[Vt]=Lt,this.keyMap.set(pt,Vt),this.next[this.tail]=Vt,this.prev[Vt]=this.tail,this.tail=Vt,this.size++,this.addItemSize(Vt,xt),Tt=!1;else{const Xt=this.valList[Vt];Lt!==Xt&&(this.isBackgroundFetch(Xt)?Xt.__abortController.abort():wt||(this.dispose(Xt,pt,"set"),this.disposeAfter&&this.disposed.push([Xt,pt,"set"])),this.removeItemSize(Vt),this.valList[Vt]=Lt,this.addItemSize(Vt,xt)),this.moveToTail(Vt)}if(nn===0||this.ttl!==0||this.ttls||this.initializeTTLTracking(),Tt||this.setItemTTL(Vt,nn,on),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const pt=this.valList[this.head];return this.evict(!0),pt}}evict(pt){const Lt=this.head,nn=this.keyList[Lt],on=this.valList[Lt];return this.isBackgroundFetch(on)?on.__abortController.abort():(this.dispose(on,nn,"evict"),this.disposeAfter&&this.disposed.push([on,nn,"evict"])),this.removeItemSize(Lt),pt&&(this.keyList[Lt]=null,this.valList[Lt]=null,this.free.push(Lt)),this.head=this.next[Lt],this.keyMap.delete(nn),this.size--,Lt}has(pt,{updateAgeOnHas:Lt=this.updateAgeOnHas}={}){const nn=this.keyMap.get(pt);return nn!==void 0&&!this.isStale(nn)&&(Lt&&this.updateItemAge(nn),!0)}peek(pt,{allowStale:Lt=this.allowStale}={}){const nn=this.keyMap.get(pt);if(nn!==void 0&&(Lt||!this.isStale(nn))){const on=this.valList[nn];return this.isBackgroundFetch(on)?on.__staleWhileFetching:on}}backgroundFetch(pt,Lt,nn,on){const wt=Lt===void 0?void 0:this.valList[Lt];if(this.isBackgroundFetch(wt))return wt;const xt=new et,Nt={signal:xt.signal,options:nn,context:on},Tt=new Promise(Vt=>Vt(this.fetchMethod(pt,wt,Nt))).then(Vt=>(xt.signal.aborted||this.set(pt,Vt,Nt.options),Vt),Vt=>{if(this.valList[Lt]===Tt&&(!nn.noDeleteOnFetchRejection||Tt.__staleWhileFetching===void 0?this.delete(pt):this.valList[Lt]=Tt.__staleWhileFetching),Tt.__returned===Tt)throw Vt});return Tt.__abortController=xt,Tt.__staleWhileFetching=wt,Tt.__returned=null,Lt===void 0?(this.set(pt,Tt,Nt.options),Lt=this.keyMap.get(pt)):this.valList[Lt]=Tt,Tt}isBackgroundFetch(pt){return pt&&typeof pt=="object"&&typeof pt.then=="function"&&Object.prototype.hasOwnProperty.call(pt,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(pt,"__returned")&&(pt.__returned===pt||pt.__returned===null)}async fetch(pt,{allowStale:Lt=this.allowStale,updateAgeOnGet:nn=this.updateAgeOnGet,noDeleteOnStaleGet:on=this.noDeleteOnStaleGet,ttl:wt=this.ttl,noDisposeOnSet:xt=this.noDisposeOnSet,size:Nt=0,sizeCalculation:Tt=this.sizeCalculation,noUpdateTTL:Vt=this.noUpdateTTL,noDeleteOnFetchRejection:Xt=this.noDeleteOnFetchRejection,fetchContext:Gt=this.fetchContext,forceRefresh:Ut=!1}={}){if(!this.fetchMethod)return this.get(pt,{allowStale:Lt,updateAgeOnGet:nn,noDeleteOnStaleGet:on});const Ht={allowStale:Lt,updateAgeOnGet:nn,noDeleteOnStaleGet:on,ttl:wt,noDisposeOnSet:xt,size:Nt,sizeCalculation:Tt,noUpdateTTL:Vt,noDeleteOnFetchRejection:Xt};let qt=this.keyMap.get(pt);if(qt===void 0){const Pt=this.backgroundFetch(pt,qt,Ht,Gt);return Pt.__returned=Pt}{const Pt=this.valList[qt];if(this.isBackgroundFetch(Pt))return Lt&&Pt.__staleWhileFetching!==void 0?Pt.__staleWhileFetching:Pt.__returned=Pt;if(!Ut&&!this.isStale(qt))return this.moveToTail(qt),nn&&this.updateItemAge(qt),Pt;const St=this.backgroundFetch(pt,qt,Ht,Gt);return Lt&&St.__staleWhileFetching!==void 0?St.__staleWhileFetching:St.__returned=St}}get(pt,{allowStale:Lt=this.allowStale,updateAgeOnGet:nn=this.updateAgeOnGet,noDeleteOnStaleGet:on=this.noDeleteOnStaleGet}={}){const wt=this.keyMap.get(pt);if(wt!==void 0){const xt=this.valList[wt],Nt=this.isBackgroundFetch(xt);return this.isStale(wt)?Nt?Lt?xt.__staleWhileFetching:void 0:(on||this.delete(pt),Lt?xt:void 0):Nt?void 0:(this.moveToTail(wt),nn&&this.updateItemAge(wt),xt)}}connect(pt,Lt){this.prev[Lt]=pt,this.next[pt]=Lt}moveToTail(pt){pt!==this.tail&&(pt===this.head?this.head=this.next[pt]:this.connect(this.prev[pt],this.next[pt]),this.connect(this.tail,pt),this.tail=pt)}get del(){return _t("del","delete"),this.delete}delete(pt){let Lt=!1;if(this.size!==0){const nn=this.keyMap.get(pt);if(nn!==void 0)if(Lt=!0,this.size===1)this.clear();else{this.removeItemSize(nn);const on=this.valList[nn];this.isBackgroundFetch(on)?on.__abortController.abort():(this.dispose(on,pt,"delete"),this.disposeAfter&&this.disposed.push([on,pt,"delete"])),this.keyMap.delete(pt),this.keyList[nn]=null,this.valList[nn]=null,nn===this.tail?this.tail=this.prev[nn]:nn===this.head?this.head=this.next[nn]:(this.next[this.prev[nn]]=this.next[nn],this.prev[this.next[nn]]=this.prev[nn]),this.size--,this.free.push(nn)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return Lt}clear(){for(const pt of this.rindexes({allowStale:!0})){const Lt=this.valList[pt];if(this.isBackgroundFetch(Lt))Lt.__abortController.abort();else{const nn=this.keyList[pt];this.dispose(Lt,nn,"delete"),this.disposeAfter&&this.disposed.push([Lt,nn,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return _t("reset","clear"),this.clear}get length(){return((pt,Lt)=>{const nn=`LRU_CACHE_PROPERTY_${pt}`;if(ft(nn)){const{prototype:on}=Rt,{get:wt}=Object.getOwnPropertyDescriptor(on,pt);ut(nn,`${pt} property`,`cache.${Lt}`,wt)}})("length","size"),this.size}static get AbortController(){return et}static get AbortSignal(){return it}}i.exports=Rt}).call(this,s(2))},function(i,o,s){var _=s(41).Colorizer;i.exports=function($){return _.addColors($.colors||$),$}},function(i,o,s){var _={};i.exports=_,_.themes={};var $=s(13),et=_.styles=s(109),tt=Object.defineProperties,j=new RegExp(/[\r\n]+/g);_.supportsColor=s(110).supportsColor,_.enabled===void 0&&(_.enabled=_.supportsColor()!==!1),_.enable=function(){_.enabled=!0},_.disable=function(){_.enabled=!1},_.stripColors=_.strip=function(Et){return(""+Et).replace(/\x1B\[\d+m/g,"")},_.stylize=function(Et,Mt){return _.enabled?et[Mt].open+Et+et[Mt].close:Et+""};var it=/[|\\{}()[\]^$+*?.]/g;function st(Et){var Mt=function Ft(){return ft.apply(Ft,arguments)};return Mt._styles=Et,Mt.__proto__=gt,Mt}var ht,_t=(ht={},et.grey=et.gray,Object.keys(et).forEach(function(Et){et[Et].closeRe=new RegExp(function(Mt){if(typeof Mt!="string")throw new TypeError("Expected a string");return Mt.replace(it,"\\$&")}(et[Et].close),"g"),ht[Et]={get:function(){return st(this._styles.concat(Et))}}}),ht),gt=tt(function(){},_t);function ft(){var Et=Array.prototype.slice.call(arguments),Mt=Et.map(function(Lt){return Lt!==void 0&&Lt.constructor===String?Lt:$.inspect(Lt)}).join(" ");if(!_.enabled||!Mt)return Mt;for(var Ft=Mt.indexOf(`
`)!=-1,Rt=this._styles,Ot=Rt.length;Ot--;){var pt=et[Rt[Ot]];Mt=pt.open+Mt.replace(pt.closeRe,pt.open)+pt.close,Ft&&(Mt=Mt.replace(j,function(Lt){return pt.close+Lt+pt.open}))}return Mt}_.setTheme=function(Et){if(typeof Et!="string")for(var Mt in Et)(function(Ft){_[Ft]=function(Rt){if(typeof Et[Ft]=="object"){var Ot=Rt;for(var pt in Et[Ft])Ot=_[Et[Ft][pt]](Ot);return Ot}return _[Et[Ft]](Rt)}})(Mt);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var ut=function(Et,Mt){var Ft=Mt.split("");return(Ft=Ft.map(Et)).join("")};for(var yt in _.trap=s(112),_.zalgo=s(113),_.maps={},_.maps.america=s(114)(_),_.maps.zebra=s(115)(_),_.maps.rainbow=s(116)(_),_.maps.random=s(117)(_),_.maps)(function(Et){_[Et]=function(Mt){return ut(_.maps[Et],Mt)}})(yt);tt(_,function(){var Et={};return Object.keys(_t).forEach(function(Mt){Et[Mt]={get:function(){return st([Mt])}}}),Et}())},function(i,o){i.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},function(i,o){typeof Object.create=="function"?i.exports=function(s,_){s.super_=_,s.prototype=Object.create(_.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(s,_){s.super_=_;var $=function(){};$.prototype=_.prototype,s.prototype=new $,s.prototype.constructor=s}},function(i,o){var s={};i.exports=s;var _={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(_).forEach(function($){var et=_[$],tt=s[$]=[];tt.open="\x1B["+et[0]+"m",tt.close="\x1B["+et[1]+"m"})},function(i,o,s){(function(_){var $=s(18),et=s(111),tt=_.env,j=void 0;function it(st){return function(ht){return ht!==0&&{level:ht,hasBasic:!0,has256:ht>=2,has16m:ht>=3}}(function(ht){if(j===!1)return 0;if(et("color=16m")||et("color=full")||et("color=truecolor"))return 3;if(et("color=256"))return 2;if(ht&&!ht.isTTY&&j!==!0)return 0;var _t=j?1:0;if(_.platform==="win32"){var gt=$.release().split(".");return Number(_.versions.node.split(".")[0])>=8&&Number(gt[0])>=10&&Number(gt[2])>=10586?Number(gt[2])>=14931?3:2:1}return"CI"in tt?["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(ft){return ft in tt})||tt.CI_NAME==="codeship"?1:_t:"TEAMCITY_VERSION"in tt?/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(tt.TEAMCITY_VERSION)?1:0:"TERM_PROGRAM"in tt?(parseInt("445".split(".")[0],10),2):/-256(color)?$/i.test("xterm-256color")?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test("xterm-256color")||"COLORTERM"in tt?1:_t}(st))}et("no-color")||et("no-colors")||et("color=false")?j=!1:(et("color")||et("colors")||et("color=true")||et("color=always"))&&(j=!0),"FORCE_COLOR"in tt&&(j=tt.FORCE_COLOR.length===0||parseInt(tt.FORCE_COLOR,10)!==0),i.exports={supportsColor:it,stdout:it(_.stdout),stderr:it(_.stderr)}}).call(this,s(2))},function(i,o,s){(function(_){i.exports=function($,et){var tt=(et=et||_.argv).indexOf("--"),j=/^-{1,2}/.test($)?"":"--",it=et.indexOf(j+$);return it!==-1&&(tt===-1||it<tt)}}).call(this,s(2))},function(i,o){i.exports=function(s,_){var $="";s=(s=s||"Run the trap, drop the bass").split("");var et={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return s.forEach(function(tt){tt=tt.toLowerCase();var j=et[tt]||[" "],it=Math.floor(Math.random()*j.length);$+=et[tt]!==void 0?et[tt][it]:tt}),$}},function(i,o){i.exports=function(s,_){s=s||"   he is here   ";var $={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},et=[].concat($.up,$.down,$.mid);function tt(it){return Math.floor(Math.random()*it)}function j(it){var st=!1;return et.filter(function(ht){st=ht===it}),st}return function(it,st){var ht,_t,gt="";for(_t in(st=st||{}).up=st.up===void 0||st.up,st.mid=st.mid===void 0||st.mid,st.down=st.down===void 0||st.down,st.size=st.size!==void 0?st.size:"maxi",it=it.split(""))if(!j(_t)){switch(gt+=it[_t],ht={up:0,down:0,mid:0},st.size){case"mini":ht.up=tt(8),ht.mid=tt(2),ht.down=tt(8);break;case"maxi":ht.up=tt(16)+3,ht.mid=tt(4)+1,ht.down=tt(64)+3;break;default:ht.up=tt(8)+1,ht.mid=tt(6)/2,ht.down=tt(8)+1}var ft=["up","mid","down"];for(var ut in ft)for(var yt=ft[ut],Et=0;Et<=ht[yt];Et++)st[yt]&&(gt+=$[yt][tt($[yt].length)])}return gt}(s,_)}},function(i,o){i.exports=function(s){return function(_,$,et){if(_===" ")return _;switch($%3){case 0:return s.red(_);case 1:return s.white(_);case 2:return s.blue(_)}}}},function(i,o){i.exports=function(s){return function(_,$,et){return $%2==0?_:s.inverse(_)}}},function(i,o){i.exports=function(s){var _=["red","yellow","green","blue","magenta"];return function($,et,tt){return $===" "?$:s[_[et++%_.length]]($)}}},function(i,o){i.exports=function(s){var _=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta"];return function($,et,tt){return $===" "?$:s[_[Math.round(Math.random()*(_.length-2))]]($)}}},function(i,o,s){Object.defineProperty(o,"cli",{value:s(119)}),Object.defineProperty(o,"npm",{value:s(120)}),Object.defineProperty(o,"syslog",{value:s(121)})},function(i,o,s){o.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},o.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},function(i,o,s){o.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},o.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},function(i,o,s){o.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},o.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},function(i,o,s){var _=s(12);i.exports=_(function($){return $.message="	".concat($.message),$})},function(i,o,s){function _(_t,gt){if(!(_t instanceof gt))throw new TypeError("Cannot call a class as a function")}function $(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var et=s(41).Colorizer,tt=s(60).Padder,j=s(3),it=j.configs,st=j.MESSAGE,ht=function(){function _t(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,_t),ut.levels||(ut.levels=it.npm.levels),this.colorizer=new et(ut),this.padder=new tt(ut),this.options=ut}var gt,ft;return gt=_t,(ft=[{key:"transform",value:function(ut,yt){return this.colorizer.transform(this.padder.transform(ut,yt),yt),ut[st]="".concat(ut.level,":").concat(ut.message),ut}}])&&$(gt.prototype,ft),_t}();i.exports=function(_t){return new ht(_t)},i.exports.Format=ht},function(i,o,s){var _=s(12);function $(tt){if(tt.every(et))return function(j){for(var it=j,st=0;st<tt.length;st++)if(!(it=tt[st].transform(it,tt[st].options)))return!1;return it}}function et(tt){if(typeof tt.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}i.exports=function(){for(var tt=arguments.length,j=new Array(tt),it=0;it<tt;it++)j[it]=arguments[it];var st=_($(j)),ht=st();return ht.Format=st.Format,ht},i.exports.cascade=$},function(i,o,s){(function(_){var $=s(12),et=s(3).MESSAGE,tt=s(35);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$(function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it})}).call(this,s(5).Buffer)},function(i,o,s){o.byteLength=function(_t){var gt=st(_t),ft=gt[0],ut=gt[1];return 3*(ft+ut)/4-ut},o.toByteArray=function(_t){for(var gt,ft=st(_t),ut=ft[0],yt=ft[1],Et=new et(function(Ot,pt,Lt){return 3*(pt+Lt)/4-Lt}(0,ut,yt)),Mt=0,Ft=yt>0?ut-4:ut,Rt=0;Rt<Ft;Rt+=4)gt=$[_t.charCodeAt(Rt)]<<18|$[_t.charCodeAt(Rt+1)]<<12|$[_t.charCodeAt(Rt+2)]<<6|$[_t.charCodeAt(Rt+3)],Et[Mt++]=gt>>16&255,Et[Mt++]=gt>>8&255,Et[Mt++]=255&gt;return yt===2&&(gt=$[_t.charCodeAt(Rt)]<<2|$[_t.charCodeAt(Rt+1)]>>4,Et[Mt++]=255&gt),yt===1&&(gt=$[_t.charCodeAt(Rt)]<<10|$[_t.charCodeAt(Rt+1)]<<4|$[_t.charCodeAt(Rt+2)]>>2,Et[Mt++]=gt>>8&255,Et[Mt++]=255&gt),Et},o.fromByteArray=function(_t){for(var gt,ft=_t.length,ut=ft%3,yt=[],Et=0,Mt=ft-ut;Et<Mt;Et+=16383)yt.push(ht(_t,Et,Et+16383>Mt?Mt:Et+16383));return ut===1?(gt=_t[ft-1],yt.push(_[gt>>2]+_[gt<<4&63]+"==")):ut===2&&(gt=(_t[ft-2]<<8)+_t[ft-1],yt.push(_[gt>>10]+_[gt>>4&63]+_[gt<<2&63]+"=")),yt.join("")};for(var _=[],$=[],et=typeof Uint8Array<"u"?Uint8Array:Array,tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,it=tt.length;j<it;++j)_[j]=tt[j],$[tt.charCodeAt(j)]=j;function st(_t){var gt=_t.length;if(gt%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ft=_t.indexOf("=");return ft===-1&&(ft=gt),[ft,ft===gt?0:4-ft%4]}function ht(_t,gt,ft){for(var ut,yt,Et=[],Mt=gt;Mt<ft;Mt+=3)ut=(_t[Mt]<<16&16711680)+(_t[Mt+1]<<8&65280)+(255&_t[Mt+2]),Et.push(_[(yt=ut)>>18&63]+_[yt>>12&63]+_[yt>>6&63]+_[63&yt]);return Et.join("")}$["-".charCodeAt(0)]=62,$["_".charCodeAt(0)]=63},function(i,o){o.read=function(s,_,$,et,tt){var j,it,st=8*tt-et-1,ht=(1<<st)-1,_t=ht>>1,gt=-7,ft=$?tt-1:0,ut=$?-1:1,yt=s[_+ft];for(ft+=ut,j=yt&(1<<-gt)-1,yt>>=-gt,gt+=st;gt>0;j=256*j+s[_+ft],ft+=ut,gt-=8);for(it=j&(1<<-gt)-1,j>>=-gt,gt+=et;gt>0;it=256*it+s[_+ft],ft+=ut,gt-=8);if(j===0)j=1-_t;else{if(j===ht)return it?NaN:1/0*(yt?-1:1);it+=Math.pow(2,et),j-=_t}return(yt?-1:1)*it*Math.pow(2,j-et)},o.write=function(s,_,$,et,tt,j){var it,st,ht,_t=8*j-tt-1,gt=(1<<_t)-1,ft=gt>>1,ut=tt===23?Math.pow(2,-24)-Math.pow(2,-77):0,yt=et?0:j-1,Et=et?1:-1,Mt=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(st=isNaN(_)?1:0,it=gt):(it=Math.floor(Math.log(_)/Math.LN2),_*(ht=Math.pow(2,-it))<1&&(it--,ht*=2),(_+=it+ft>=1?ut/ht:ut*Math.pow(2,1-ft))*ht>=2&&(it++,ht/=2),it+ft>=gt?(st=0,it=gt):it+ft>=1?(st=(_*ht-1)*Math.pow(2,tt),it+=ft):(st=_*Math.pow(2,ft-1)*Math.pow(2,tt),it=0));tt>=8;s[$+yt]=255&st,yt+=Et,st/=256,tt-=8);for(it=it<<tt|st,_t+=tt;_t>0;s[$+yt]=255&it,yt+=Et,it/=256,_t-=8);s[$+yt-Et]|=128*Mt}},function(i,o,s){var _=s(12);i.exports=_(function($,et){return et.message?($.message="[".concat(et.label,"] ").concat($.message),$):($.label=et.label,$)})},function(i,o,s){var _=s(12),$=s(3).MESSAGE,et=s(35);i.exports=_(function(tt){var j={};return tt.message&&(j["@message"]=tt.message,delete tt.message),tt.timestamp&&(j["@timestamp"]=tt.timestamp,delete tt.timestamp),j["@fields"]=tt,tt[$]=et(j),tt})},function(i,o,s){var _=s(12);function $(tt,j,it){var st,ht,_t,gt=j.reduce(function(ut,yt){return ut[yt]=tt[yt],delete tt[yt],ut},{}),ft=Object.keys(tt).reduce(function(ut,yt){return ut[yt]=tt[yt],delete tt[yt],ut},{});return Object.assign(tt,gt,(_t=ft,(ht=it)in(st={})?Object.defineProperty(st,ht,{value:_t,enumerable:!0,configurable:!0,writable:!0}):st[ht]=_t,st)),tt}function et(tt,j,it){return tt[it]=j.reduce(function(st,ht){return st[ht]=tt[ht],delete tt[ht],st},{}),tt}i.exports=_(function(tt){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it="metadata";j.key&&(it=j.key);var st=[];return j.fillExcept||j.fillWith||(st.push("level"),st.push("message")),j.fillExcept&&(st=j.fillExcept),st.length>0?$(tt,st,it):j.fillWith?et(tt,j.fillWith,it):tt})},function(i,o,s){var _=s(13).inspect,$=s(12),et=s(3),tt=et.LEVEL,j=et.MESSAGE,it=et.SPLAT;i.exports=$(function(st){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_t=Object.assign({},st);return delete _t[tt],delete _t[j],delete _t[it],st[j]=_(_t,!1,ht.depth||null,ht.colorize),st})},function(i,o,s){function _(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var $=s(3).MESSAGE,et=function(){function tt(st){(function(ht,_t){if(!(ht instanceof _t))throw new TypeError("Cannot call a class as a function")})(this,tt),this.template=st}var j,it;return j=tt,(it=[{key:"transform",value:function(st){return st[$]=this.template(st),st}}])&&_(j.prototype,it),tt}();i.exports=function(tt){return new et(tt)},i.exports.Printf=i.exports.Format=et},function(i,o,s){var _=s(12),$=s(3).MESSAGE,et=s(35);i.exports=_(function(tt){var j=et(Object.assign({},tt,{level:void 0,message:void 0,splat:void 0})),it=tt.padding&&tt.padding[tt.level]||"";return tt[$]=j!=="{}"?"".concat(tt.level,":").concat(it," ").concat(tt.message," ").concat(j):"".concat(tt.level,":").concat(it," ").concat(tt.message),tt})},function(i,o,s){function _(_t){return function(gt){if(Array.isArray(gt))return $(gt)}(_t)||function(gt){if(typeof Symbol<"u"&&Symbol.iterator in Object(gt))return Array.from(gt)}(_t)||function(gt,ft){if(gt){if(typeof gt=="string")return $(gt,ft);var ut=Object.prototype.toString.call(gt).slice(8,-1);if(ut==="Object"&&gt.constructor&&(ut=gt.constructor.name),ut==="Map"||ut==="Set")return Array.from(gt);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return $(gt,ft)}}(_t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(_t,gt){(gt==null||gt>_t.length)&&(gt=_t.length);for(var ft=0,ut=new Array(gt);ft<gt;ft++)ut[ft]=_t[ft];return ut}function et(_t,gt){for(var ft=0;ft<gt.length;ft++){var ut=gt[ft];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(_t,ut.key,ut)}}var tt=s(13),j=s(3).SPLAT,it=/%[scdjifoO%]/g,st=/%%/g,ht=function(){function _t(ut){(function(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")})(this,_t),this.options=ut}var gt,ft;return gt=_t,(ft=[{key:"_splat",value:function(ut,yt){var Et=ut.message,Mt=ut[j]||ut.splat||[],Ft=Et.match(st),Rt=Ft&&Ft.length||0,Ot=yt.length-Rt-Mt.length,pt=Ot<0?Mt.splice(Ot,-1*Ot):[],Lt=pt.length;if(Lt)for(var nn=0;nn<Lt;nn++)Object.assign(ut,pt[nn]);return ut.message=tt.format.apply(tt,[Et].concat(_(Mt))),ut}},{key:"transform",value:function(ut){var yt=ut.message,Et=ut[j]||ut.splat;if(!Et||!Et.length)return ut;var Mt=yt&&yt.match&&yt.match(it);if(!Mt&&(Et||Et.length)){var Ft=Et.length>1?Et.splice(0):Et,Rt=Ft.length;if(Rt)for(var Ot=0;Ot<Rt;Ot++)Object.assign(ut,Ft[Ot]);return ut}return Mt?this._splat(ut,Mt):ut}}])&&et(gt.prototype,ft),_t}();i.exports=function(_t){return new ht(_t)}},function(i,o,s){var _=s(136),$=s(12);i.exports=$(function(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tt.format&&(et.timestamp=typeof tt.format=="function"?tt.format():_.format(new Date,tt.format)),et.timestamp||(et.timestamp=new Date().toISOString()),tt.alias&&(et[tt.alias]=et.timestamp),et})},function(i,o,s){s.r(o),s.d(o,"assign",function(){return it}),s.d(o,"format",function(){return xt}),s.d(o,"parse",function(){return Nt}),s.d(o,"defaultI18n",function(){return gt}),s.d(o,"setGlobalDateI18n",function(){return ut}),s.d(o,"setGlobalDateMasks",function(){return wt});var _=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$="[^\\s]+",et=/\[([^]*?)\]/gm;function tt(Vt,Xt){for(var Gt=[],Ut=0,Ht=Vt.length;Ut<Ht;Ut++)Gt.push(Vt[Ut].substr(0,Xt));return Gt}var j=function(Vt){return function(Xt,Gt){var Ut=Gt[Vt].map(function(Ht){return Ht.toLowerCase()}).indexOf(Xt.toLowerCase());return Ut>-1?Ut:null}};function it(Vt){for(var Xt=[],Gt=1;Gt<arguments.length;Gt++)Xt[Gt-1]=arguments[Gt];for(var Ut=0,Ht=Xt;Ut<Ht.length;Ut++){var qt=Ht[Ut];for(var Pt in qt)Vt[Pt]=qt[Pt]}return Vt}var st=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ht=["January","February","March","April","May","June","July","August","September","October","November","December"],_t=tt(ht,3),gt={dayNamesShort:tt(st,3),dayNames:st,monthNamesShort:_t,monthNames:ht,amPm:["am","pm"],DoFn:function(Vt){return Vt+["th","st","nd","rd"][Vt%10>3?0:(Vt-Vt%10!=10?1:0)*Vt%10]}},ft=it({},gt),ut=function(Vt){return ft=it(ft,Vt)},yt=function(Vt){return Vt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Et=function(Vt,Xt){for(Xt===void 0&&(Xt=2),Vt=String(Vt);Vt.length<Xt;)Vt="0"+Vt;return Vt},Mt={D:function(Vt){return String(Vt.getDate())},DD:function(Vt){return Et(Vt.getDate())},Do:function(Vt,Xt){return Xt.DoFn(Vt.getDate())},d:function(Vt){return String(Vt.getDay())},dd:function(Vt){return Et(Vt.getDay())},ddd:function(Vt,Xt){return Xt.dayNamesShort[Vt.getDay()]},dddd:function(Vt,Xt){return Xt.dayNames[Vt.getDay()]},M:function(Vt){return String(Vt.getMonth()+1)},MM:function(Vt){return Et(Vt.getMonth()+1)},MMM:function(Vt,Xt){return Xt.monthNamesShort[Vt.getMonth()]},MMMM:function(Vt,Xt){return Xt.monthNames[Vt.getMonth()]},YY:function(Vt){return Et(String(Vt.getFullYear()),4).substr(2)},YYYY:function(Vt){return Et(Vt.getFullYear(),4)},h:function(Vt){return String(Vt.getHours()%12||12)},hh:function(Vt){return Et(Vt.getHours()%12||12)},H:function(Vt){return String(Vt.getHours())},HH:function(Vt){return Et(Vt.getHours())},m:function(Vt){return String(Vt.getMinutes())},mm:function(Vt){return Et(Vt.getMinutes())},s:function(Vt){return String(Vt.getSeconds())},ss:function(Vt){return Et(Vt.getSeconds())},S:function(Vt){return String(Math.round(Vt.getMilliseconds()/100))},SS:function(Vt){return Et(Math.round(Vt.getMilliseconds()/10),2)},SSS:function(Vt){return Et(Vt.getMilliseconds(),3)},a:function(Vt,Xt){return Vt.getHours()<12?Xt.amPm[0]:Xt.amPm[1]},A:function(Vt,Xt){return Vt.getHours()<12?Xt.amPm[0].toUpperCase():Xt.amPm[1].toUpperCase()},ZZ:function(Vt){var Xt=Vt.getTimezoneOffset();return(Xt>0?"-":"+")+Et(100*Math.floor(Math.abs(Xt)/60)+Math.abs(Xt)%60,4)},Z:function(Vt){var Xt=Vt.getTimezoneOffset();return(Xt>0?"-":"+")+Et(Math.floor(Math.abs(Xt)/60),2)+":"+Et(Math.abs(Xt)%60,2)}},Ft=function(Vt){return+Vt-1},Rt=[null,"[1-9]\\d?"],Ot=[null,$],pt=["isPm",$,function(Vt,Xt){var Gt=Vt.toLowerCase();return Gt===Xt.amPm[0]?0:Gt===Xt.amPm[1]?1:null}],Lt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(Vt){var Xt=(Vt+"").match(/([+-]|\d\d)/gi);if(Xt){var Gt=60*+Xt[1]+parseInt(Xt[2],10);return Xt[0]==="+"?Gt:-Gt}return 0}],nn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+$,function(Vt){return parseInt(Vt,10)}],M:["month","[1-9]\\d?",Ft],MM:["month","\\d\\d",Ft],YY:["year","\\d\\d",function(Vt){var Xt=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+Vt>68?Xt-1:Xt)+Vt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(Vt){return 100*+Vt}],SS:["millisecond","\\d\\d",function(Vt){return 10*+Vt}],SSS:["millisecond","\\d{3}"],d:Rt,dd:Rt,ddd:Ot,dddd:Ot,MMM:["month",$,j("monthNamesShort")],MMMM:["month",$,j("monthNames")],a:pt,A:pt,ZZ:Lt,Z:Lt},on={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},wt=function(Vt){return it(on,Vt)},xt=function(Vt,Xt,Gt){if(Xt===void 0&&(Xt=on.default),Gt===void 0&&(Gt={}),typeof Vt=="number"&&(Vt=new Date(Vt)),Object.prototype.toString.call(Vt)!=="[object Date]"||isNaN(Vt.getTime()))throw new Error("Invalid Date pass to format");var Ut=[];Xt=(Xt=on[Xt]||Xt).replace(et,function(qt,Pt){return Ut.push(Pt),"@@@"});var Ht=it(it({},ft),Gt);return(Xt=Xt.replace(_,function(qt){return Mt[qt](Vt,Ht)})).replace(/@@@/g,function(){return Ut.shift()})};function Nt(Vt,Xt,Gt){if(Gt===void 0&&(Gt={}),typeof Xt!="string")throw new Error("Invalid format in fecha parse");if(Xt=on[Xt]||Xt,Vt.length>1e3)return null;var Ut={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Ht=[],qt=[],Pt=Xt.replace(et,function(hn,xn){return qt.push(yt(xn)),"@@@"}),St={},Zt={};Pt=yt(Pt).replace(_,function(hn){var xn=nn[hn],Mn=xn[0],qn=xn[1],Ir=xn[3];if(St[Mn])throw new Error("Invalid format. "+Mn+" specified twice in format");return St[Mn]=!0,Ir&&(Zt[Ir]=!0),Ht.push(xn),"("+qn+")"}),Object.keys(Zt).forEach(function(hn){if(!St[hn])throw new Error("Invalid format. "+hn+" is required in specified format")}),Pt=Pt.replace(/@@@/g,function(){return qt.shift()});var tn=Vt.match(new RegExp(Pt,"i"));if(!tn)return null;for(var mn=it(it({},ft),Gt),yn=1;yn<tn.length;yn++){var vn=Ht[yn-1],un=vn[0],rn=vn[2],It=rn?rn(tn[yn],mn):+tn[yn];if(It==null)return null;Ut[un]=It}Ut.isPm===1&&Ut.hour!=null&&+Ut.hour!=12?Ut.hour=+Ut.hour+12:Ut.isPm===0&&+Ut.hour==12&&(Ut.hour=0);for(var Dt=new Date(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute,Ut.second,Ut.millisecond),Kt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],gn=(yn=0,Kt.length);yn<gn;yn++)if(St[Kt[yn][0]]&&Ut[Kt[yn][0]]!==Dt[Kt[yn][1]]())return null;return Ut.timezoneOffset==null?Dt:new Date(Date.UTC(Ut.year,Ut.month,Ut.day,Ut.hour,Ut.minute-Ut.timezoneOffset,Ut.second,Ut.millisecond))}var Tt={format:xt,parse:Nt,defaultI18n:gt,setGlobalDateI18n:ut,setGlobalDateMasks:wt};o.default=Tt},function(i,o,s){var _=s(59),$=s(12),et=s(3).MESSAGE;i.exports=$(function(tt,j){return j.level!==!1&&(tt.level=_.strip(tt.level)),j.message!==!1&&(tt.message=_.strip(tt.message)),j.raw!==!1&&tt[et]&&(tt[et]=_.strip(tt[et])),tt})},function(i){i.exports=JSON.parse('{"name":"winston","description":"A logger for just about everything.","version":"3.3.3","author":"Charlie Robbins <charlie.robbins@gmail.com>","maintainers":["Jarrett Cruger <jcrugzz@gmail.com>","Chris Alderson <chrisalderson@protonmail.com>","David Hyde <dabh@stanford.edu>"],"repository":{"type":"git","url":"https://github.com/winstonjs/winston.git"},"keywords":["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],"dependencies":{"async":"^3.1.0","@dabh/diagnostics":"^2.0.2","is-stream":"^2.0.0","logform":"^2.2.0","one-time":"^1.0.0","readable-stream":"^3.4.0","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.4.0"},"devDependencies":{"@babel/cli":"^7.10.3","@babel/core":"^7.10.3","@babel/preset-env":"^7.10.3","@types/node":"^14.0.13","abstract-winston-transport":"^0.5.1","assume":"^2.2.0","colors":"^1.4.0","cross-spawn-async":"^2.2.5","eslint-config-populist":"^4.2.0","hock":"^1.4.1","mocha":"^8.0.1","nyc":"^15.1.0","rimraf":"^3.0.2","split2":"^3.1.1","std-mocks":"^1.0.1","through2":"^3.0.1","winston-compat":"^0.1.5"},"main":"./lib/winston","browser":"./dist/winston","types":"./index.d.ts","scripts":{"lint":"populist lib/*.js lib/winston/*.js lib/winston/**/*.js","pretest":"npm run lint","test":"nyc --reporter=text --reporter lcov npm run test:mocha","test:mocha":"mocha test/*.test.js test/**/*.test.js --exit","build":"./node_modules/.bin/rimraf dist && babel lib -d dist","prepublishOnly":"npm run build"},"engines":{"node":">= 6.4.0"},"license":"MIT"}')},function(i,o,s){Object.defineProperty(o,"Console",{configurable:!0,enumerable:!0,get:function(){return s(140)}}),Object.defineProperty(o,"File",{configurable:!0,enumerable:!0,get:function(){return s(149)}}),Object.defineProperty(o,"Http",{configurable:!0,enumerable:!0,get:function(){return s(189)}}),Object.defineProperty(o,"Stream",{configurable:!0,enumerable:!0,get:function(){return s(201)}})},function(i,o,s){(function(_){function $(Et){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Mt){return typeof Mt}:function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt})(Et)}function et(Et,Mt){if(!(Et instanceof Mt))throw new TypeError("Cannot call a class as a function")}function tt(Et,Mt){for(var Ft=0;Ft<Mt.length;Ft++){var Rt=Mt[Ft];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty(Et,Rt.key,Rt)}}function j(Et,Mt){return(j=Object.setPrototypeOf||function(Ft,Rt){return Ft.__proto__=Rt,Ft})(Et,Mt)}function it(Et){var Mt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Ft,Rt=ht(Et);if(Mt){var Ot=ht(this).constructor;Ft=Reflect.construct(Rt,arguments,Ot)}else Ft=Rt.apply(this,arguments);return st(this,Ft)}}function st(Et,Mt){return!Mt||$(Mt)!=="object"&&typeof Mt!="function"?function(Ft){if(Ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft}(Et):Mt}function ht(Et){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Mt){return Mt.__proto__||Object.getPrototypeOf(Mt)})(Et)}var _t=s(18),gt=s(3),ft=gt.LEVEL,ut=gt.MESSAGE,yt=s(20);i.exports=function(Et){(function(pt,Lt){if(typeof Lt!="function"&&Lt!==null)throw new TypeError("Super expression must either be null or a function");pt.prototype=Object.create(Lt&&Lt.prototype,{constructor:{value:pt,writable:!0,configurable:!0}}),Lt&&j(pt,Lt)})(Ot,Et);var Mt,Ft,Rt=it(Ot);function Ot(){var pt,Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return et(this,Ot),(pt=Rt.call(this,Lt)).name=Lt.name||"console",pt.stderrLevels=pt._stringArrayToSet(Lt.stderrLevels),pt.consoleWarnLevels=pt._stringArrayToSet(Lt.consoleWarnLevels),pt.eol=Lt.eol||_t.EOL,pt.setMaxListeners(30),pt}return Mt=Ot,(Ft=[{key:"log",value:function(pt,Lt){var nn=this;return _(function(){return nn.emit("logged",pt)}),this.stderrLevels[pt[ft]]?(console._stderr?console._stderr.write("".concat(pt[ut]).concat(this.eol)):console.error(pt[ut]),void(Lt&&Lt())):this.consoleWarnLevels[pt[ft]]?(console._stderr?console._stderr.write("".concat(pt[ut]).concat(this.eol)):console.warn(pt[ut]),void(Lt&&Lt())):(console._stdout?console._stdout.write("".concat(pt[ut]).concat(this.eol)):console.log(pt[ut]),void(Lt&&Lt()))}},{key:"_stringArrayToSet",value:function(pt,Lt){if(!pt)return{};if(Lt=Lt||"Cannot make set from type other than Array of string elements",!Array.isArray(pt))throw new Error(Lt);return pt.reduce(function(nn,on){if(typeof on!="string")throw new Error(Lt);return nn[on]=!0,nn},{})}}])&&tt(Mt.prototype,Ft),Ot}(yt)}).call(this,s(15).setImmediate)},function(i,o,s){(function(_,$){(function(et,tt){if(!et.setImmediate){var j,it,st,ht,_t,gt=1,ft={},ut=!1,yt=et.document,Et=Object.getPrototypeOf&&Object.getPrototypeOf(et);Et=Et&&Et.setTimeout?Et:et,{}.toString.call(et.process)==="[object process]"?j=function(Rt){$.nextTick(function(){Ft(Rt)})}:function(){if(et.postMessage&&!et.importScripts){var Rt=!0,Ot=et.onmessage;return et.onmessage=function(){Rt=!1},et.postMessage("","*"),et.onmessage=Ot,Rt}}()?(ht="setImmediate$"+Math.random()+"$",_t=function(Rt){Rt.source===et&&typeof Rt.data=="string"&&Rt.data.indexOf(ht)===0&&Ft(+Rt.data.slice(ht.length))},et.addEventListener?et.addEventListener("message",_t,!1):et.attachEvent("onmessage",_t),j=function(Rt){et.postMessage(ht+Rt,"*")}):et.MessageChannel?((st=new MessageChannel).port1.onmessage=function(Rt){Ft(Rt.data)},j=function(Rt){st.port2.postMessage(Rt)}):yt&&"onreadystatechange"in yt.createElement("script")?(it=yt.documentElement,j=function(Rt){var Ot=yt.createElement("script");Ot.onreadystatechange=function(){Ft(Rt),Ot.onreadystatechange=null,it.removeChild(Ot),Ot=null},it.appendChild(Ot)}):j=function(Rt){setTimeout(Ft,0,Rt)},Et.setImmediate=function(Rt){typeof Rt!="function"&&(Rt=new Function(""+Rt));for(var Ot=new Array(arguments.length-1),pt=0;pt<Ot.length;pt++)Ot[pt]=arguments[pt+1];var Lt={callback:Rt,args:Ot};return ft[gt]=Lt,j(gt),gt++},Et.clearImmediate=Mt}function Mt(Rt){delete ft[Rt]}function Ft(Rt){if(ut)setTimeout(Ft,0,Rt);else{var Ot=ft[Rt];if(Ot){ut=!0;try{(function(pt){var Lt=pt.callback,nn=pt.args;switch(nn.length){case 0:Lt();break;case 1:Lt(nn[0]);break;case 2:Lt(nn[0],nn[1]);break;case 3:Lt(nn[0],nn[1],nn[2]);break;default:Lt.apply(void 0,nn)}})(Ot)}finally{Mt(Rt),ut=!1}}}}})(typeof self>"u"?_===void 0?this:_:self)}).call(this,s(6),s(2))},function(i,o,s){i.exports=s(62)},function(i,o,s){(function(_,$){var et=s(16);i.exports=Ot;var tt,j=s(42);Ot.ReadableState=Rt,s(21).EventEmitter;var it=function(Pt,St){return Pt.listeners(St).length},st=s(63),ht=s(44).Buffer,_t=_.Uint8Array||function(){},gt=Object.create(s(17));gt.inherits=s(7);var ft=s(144),ut=void 0;ut=ft&&ft.debuglog?ft.debuglog("stream"):function(){};var yt,Et=s(145),Mt=s(64);gt.inherits(Ot,st);var Ft=["error","close","destroy","pause","resume"];function Rt(Pt,St){Pt=Pt||{};var Zt=St instanceof(tt=tt||s(36));this.objectMode=!!Pt.objectMode,Zt&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var tn=Pt.highWaterMark,mn=Pt.readableHighWaterMark,yn=this.objectMode?16:16384;this.highWaterMark=tn||tn===0?tn:Zt&&(mn||mn===0)?mn:yn,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(yt||(yt=s(22).StringDecoder),this.decoder=new yt(Pt.encoding),this.encoding=Pt.encoding)}function Ot(Pt){if(tt=tt||s(36),!(this instanceof Ot))return new Ot(Pt);this._readableState=new Rt(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),st.call(this)}function pt(Pt,St,Zt,tn,mn){var yn,vn=Pt._readableState;return St===null?(vn.reading=!1,function(un,rn){if(!rn.ended){if(rn.decoder){var It=rn.decoder.end();It&&It.length&&(rn.buffer.push(It),rn.length+=rn.objectMode?1:It.length)}rn.ended=!0,on(un)}}(Pt,vn)):(mn||(yn=function(un,rn){var It;Dt=rn,ht.isBuffer(Dt)||Dt instanceof _t||typeof rn=="string"||rn===void 0||un.objectMode||(It=new TypeError("Invalid non-string/buffer chunk"));var Dt;return It}(vn,St)),yn?Pt.emit("error",yn):vn.objectMode||St&&St.length>0?(typeof St=="string"||vn.objectMode||Object.getPrototypeOf(St)===ht.prototype||(St=function(un){return ht.from(un)}(St)),tn?vn.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Lt(Pt,vn,St,!0):vn.ended?Pt.emit("error",new Error("stream.push() after EOF")):(vn.reading=!1,vn.decoder&&!Zt?(St=vn.decoder.write(St),vn.objectMode||St.length!==0?Lt(Pt,vn,St,!1):xt(Pt,vn)):Lt(Pt,vn,St,!1))):tn||(vn.reading=!1)),function(un){return!un.ended&&(un.needReadable||un.length<un.highWaterMark||un.length===0)}(vn)}function Lt(Pt,St,Zt,tn){St.flowing&&St.length===0&&!St.sync?(Pt.emit("data",Zt),Pt.read(0)):(St.length+=St.objectMode?1:Zt.length,tn?St.buffer.unshift(Zt):St.buffer.push(Zt),St.needReadable&&on(Pt)),xt(Pt,St)}Object.defineProperty(Ot.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),Ot.prototype.destroy=Mt.destroy,Ot.prototype._undestroy=Mt.undestroy,Ot.prototype._destroy=function(Pt,St){this.push(null),St(Pt)},Ot.prototype.push=function(Pt,St){var Zt,tn=this._readableState;return tn.objectMode?Zt=!0:typeof Pt=="string"&&((St=St||tn.defaultEncoding)!==tn.encoding&&(Pt=ht.from(Pt,St),St=""),Zt=!0),pt(this,Pt,St,!1,Zt)},Ot.prototype.unshift=function(Pt){return pt(this,Pt,null,!0,!1)},Ot.prototype.isPaused=function(){return this._readableState.flowing===!1},Ot.prototype.setEncoding=function(Pt){return yt||(yt=s(22).StringDecoder),this._readableState.decoder=new yt(Pt),this._readableState.encoding=Pt,this};function nn(Pt,St){return Pt<=0||St.length===0&&St.ended?0:St.objectMode?1:Pt!=Pt?St.flowing&&St.length?St.buffer.head.data.length:St.length:(Pt>St.highWaterMark&&(St.highWaterMark=function(Zt){return Zt>=8388608?Zt=8388608:(Zt--,Zt|=Zt>>>1,Zt|=Zt>>>2,Zt|=Zt>>>4,Zt|=Zt>>>8,Zt|=Zt>>>16,Zt++),Zt}(Pt)),Pt<=St.length?Pt:St.ended?St.length:(St.needReadable=!0,0))}function on(Pt){var St=Pt._readableState;St.needReadable=!1,St.emittedReadable||(ut("emitReadable",St.flowing),St.emittedReadable=!0,St.sync?et.nextTick(wt,Pt):wt(Pt))}function wt(Pt){ut("emit readable"),Pt.emit("readable"),Xt(Pt)}function xt(Pt,St){St.readingMore||(St.readingMore=!0,et.nextTick(Nt,Pt,St))}function Nt(Pt,St){for(var Zt=St.length;!St.reading&&!St.flowing&&!St.ended&&St.length<St.highWaterMark&&(ut("maybeReadMore read 0"),Pt.read(0),Zt!==St.length);)Zt=St.length;St.readingMore=!1}function Tt(Pt){ut("readable nexttick read 0"),Pt.read(0)}function Vt(Pt,St){St.reading||(ut("resume read 0"),Pt.read(0)),St.resumeScheduled=!1,St.awaitDrain=0,Pt.emit("resume"),Xt(Pt),St.flowing&&!St.reading&&Pt.read(0)}function Xt(Pt){var St=Pt._readableState;for(ut("flow",St.flowing);St.flowing&&Pt.read()!==null;);}function Gt(Pt,St){return St.length===0?null:(St.objectMode?Zt=St.buffer.shift():!Pt||Pt>=St.length?(Zt=St.decoder?St.buffer.join(""):St.buffer.length===1?St.buffer.head.data:St.buffer.concat(St.length),St.buffer.clear()):Zt=function(tn,mn,yn){var vn;return tn<mn.head.data.length?(vn=mn.head.data.slice(0,tn),mn.head.data=mn.head.data.slice(tn)):vn=tn===mn.head.data.length?mn.shift():yn?function(un,rn){var It=rn.head,Dt=1,Kt=It.data;for(un-=Kt.length;It=It.next;){var gn=It.data,hn=un>gn.length?gn.length:un;if(hn===gn.length?Kt+=gn:Kt+=gn.slice(0,un),(un-=hn)===0){hn===gn.length?(++Dt,It.next?rn.head=It.next:rn.head=rn.tail=null):(rn.head=It,It.data=gn.slice(hn));break}++Dt}return rn.length-=Dt,Kt}(tn,mn):function(un,rn){var It=ht.allocUnsafe(un),Dt=rn.head,Kt=1;for(Dt.data.copy(It),un-=Dt.data.length;Dt=Dt.next;){var gn=Dt.data,hn=un>gn.length?gn.length:un;if(gn.copy(It,It.length-un,0,hn),(un-=hn)===0){hn===gn.length?(++Kt,Dt.next?rn.head=Dt.next:rn.head=rn.tail=null):(rn.head=Dt,Dt.data=gn.slice(hn));break}++Kt}return rn.length-=Kt,It}(tn,mn),vn}(Pt,St.buffer,St.decoder),Zt);var Zt}function Ut(Pt){var St=Pt._readableState;if(St.length>0)throw new Error('"endReadable()" called on non-empty stream');St.endEmitted||(St.ended=!0,et.nextTick(Ht,St,Pt))}function Ht(Pt,St){Pt.endEmitted||Pt.length!==0||(Pt.endEmitted=!0,St.readable=!1,St.emit("end"))}function qt(Pt,St){for(var Zt=0,tn=Pt.length;Zt<tn;Zt++)if(Pt[Zt]===St)return Zt;return-1}Ot.prototype.read=function(Pt){ut("read",Pt),Pt=parseInt(Pt,10);var St=this._readableState,Zt=Pt;if(Pt!==0&&(St.emittedReadable=!1),Pt===0&&St.needReadable&&(St.length>=St.highWaterMark||St.ended))return ut("read: emitReadable",St.length,St.ended),St.length===0&&St.ended?Ut(this):on(this),null;if((Pt=nn(Pt,St))===0&&St.ended)return St.length===0&&Ut(this),null;var tn,mn=St.needReadable;return ut("need readable",mn),(St.length===0||St.length-Pt<St.highWaterMark)&&ut("length less than watermark",mn=!0),St.ended||St.reading?ut("reading or ended",mn=!1):mn&&(ut("do read"),St.reading=!0,St.sync=!0,St.length===0&&(St.needReadable=!0),this._read(St.highWaterMark),St.sync=!1,St.reading||(Pt=nn(Zt,St))),(tn=Pt>0?Gt(Pt,St):null)===null?(St.needReadable=!0,Pt=0):St.length-=Pt,St.length===0&&(St.ended||(St.needReadable=!0),Zt!==Pt&&St.ended&&Ut(this)),tn!==null&&this.emit("data",tn),tn},Ot.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},Ot.prototype.pipe=function(Pt,St){var Zt=this,tn=this._readableState;switch(tn.pipesCount){case 0:tn.pipes=Pt;break;case 1:tn.pipes=[tn.pipes,Pt];break;default:tn.pipes.push(Pt)}tn.pipesCount+=1,ut("pipe count=%d opts=%j",tn.pipesCount,St);var mn=(!St||St.end!==!1)&&Pt!==$.stdout&&Pt!==$.stderr?vn:xn;function yn(Mn,qn){ut("onunpipe"),Mn===Zt&&qn&&qn.hasUnpiped===!1&&(qn.hasUnpiped=!0,ut("cleanup"),Pt.removeListener("close",gn),Pt.removeListener("finish",hn),Pt.removeListener("drain",un),Pt.removeListener("error",Kt),Pt.removeListener("unpipe",yn),Zt.removeListener("end",vn),Zt.removeListener("end",xn),Zt.removeListener("data",Dt),rn=!0,!tn.awaitDrain||Pt._writableState&&!Pt._writableState.needDrain||un())}function vn(){ut("onend"),Pt.end()}tn.endEmitted?et.nextTick(mn):Zt.once("end",mn),Pt.on("unpipe",yn);var un=function(Mn){return function(){var qn=Mn._readableState;ut("pipeOnDrain",qn.awaitDrain),qn.awaitDrain&&qn.awaitDrain--,qn.awaitDrain===0&&it(Mn,"data")&&(qn.flowing=!0,Xt(Mn))}}(Zt);Pt.on("drain",un);var rn=!1,It=!1;function Dt(Mn){ut("ondata"),It=!1,Pt.write(Mn)!==!1||It||((tn.pipesCount===1&&tn.pipes===Pt||tn.pipesCount>1&&qt(tn.pipes,Pt)!==-1)&&!rn&&(ut("false write response, pause",Zt._readableState.awaitDrain),Zt._readableState.awaitDrain++,It=!0),Zt.pause())}function Kt(Mn){ut("onerror",Mn),xn(),Pt.removeListener("error",Kt),it(Pt,"error")===0&&Pt.emit("error",Mn)}function gn(){Pt.removeListener("finish",hn),xn()}function hn(){ut("onfinish"),Pt.removeListener("close",gn),xn()}function xn(){ut("unpipe"),Zt.unpipe(Pt)}return Zt.on("data",Dt),function(Mn,qn,Ir){if(typeof Mn.prependListener=="function")return Mn.prependListener(qn,Ir);Mn._events&&Mn._events[qn]?j(Mn._events[qn])?Mn._events[qn].unshift(Ir):Mn._events[qn]=[Ir,Mn._events[qn]]:Mn.on(qn,Ir)}(Pt,"error",Kt),Pt.once("close",gn),Pt.once("finish",hn),Pt.emit("pipe",Zt),tn.flowing||(ut("pipe resume"),Zt.resume()),Pt},Ot.prototype.unpipe=function(Pt){var St=this._readableState,Zt={hasUnpiped:!1};if(St.pipesCount===0)return this;if(St.pipesCount===1)return Pt&&Pt!==St.pipes||(Pt||(Pt=St.pipes),St.pipes=null,St.pipesCount=0,St.flowing=!1,Pt&&Pt.emit("unpipe",this,Zt)),this;if(!Pt){var tn=St.pipes,mn=St.pipesCount;St.pipes=null,St.pipesCount=0,St.flowing=!1;for(var yn=0;yn<mn;yn++)tn[yn].emit("unpipe",this,Zt);return this}var vn=qt(St.pipes,Pt);return vn===-1||(St.pipes.splice(vn,1),St.pipesCount-=1,St.pipesCount===1&&(St.pipes=St.pipes[0]),Pt.emit("unpipe",this,Zt)),this},Ot.prototype.on=function(Pt,St){var Zt=st.prototype.on.call(this,Pt,St);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var tn=this._readableState;tn.endEmitted||tn.readableListening||(tn.readableListening=tn.needReadable=!0,tn.emittedReadable=!1,tn.reading?tn.length&&on(this):et.nextTick(Tt,this))}return Zt},Ot.prototype.addListener=Ot.prototype.on,Ot.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(ut("resume"),Pt.flowing=!0,function(St,Zt){Zt.resumeScheduled||(Zt.resumeScheduled=!0,et.nextTick(Vt,St,Zt))}(this,Pt)),this},Ot.prototype.pause=function(){return ut("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ut("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ot.prototype.wrap=function(Pt){var St=this,Zt=this._readableState,tn=!1;for(var mn in Pt.on("end",function(){if(ut("wrapped end"),Zt.decoder&&!Zt.ended){var vn=Zt.decoder.end();vn&&vn.length&&St.push(vn)}St.push(null)}),Pt.on("data",function(vn){ut("wrapped data"),Zt.decoder&&(vn=Zt.decoder.write(vn)),Zt.objectMode&&vn==null||(Zt.objectMode||vn&&vn.length)&&(St.push(vn)||(tn=!0,Pt.pause()))}),Pt)this[mn]===void 0&&typeof Pt[mn]=="function"&&(this[mn]=function(vn){return function(){return Pt[vn].apply(Pt,arguments)}}(mn));for(var yn=0;yn<Ft.length;yn++)Pt.on(Ft[yn],this.emit.bind(this,Ft[yn]));return this._read=function(vn){ut("wrapped _read",vn),tn&&(tn=!1,Pt.resume())},this},Object.defineProperty(Ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Ot._fromList=Gt}).call(this,s(6),s(2))},function(i,o){},function(i,o,s){var _=s(44).Buffer,$=s(146);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),_t=this.head,gt=0;_t;)j=_t.data,it=ht,st=gt,j.copy(it,st),gt+=_t.data.length,_t=_t.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){var _=s(5),$=_.Buffer;function et(j,it){for(var st in j)it[st]=j[st]}function tt(j,it,st){return $(j,it,st)}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?i.exports=_:(et(_,o),o.Buffer=tt),et($,tt),tt.from=function(j,it,st){if(typeof j=="number")throw new TypeError("Argument must not be a number");return $(j,it,st)},tt.alloc=function(j,it,st){if(typeof j!="number")throw new TypeError("Argument must be a number");var ht=$(j);return it!==void 0?typeof st=="string"?ht.fill(it,st):ht.fill(it):ht.fill(0),ht},tt.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return $(j)},tt.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(j)}},function(i,o,s){var _=s(13),$=s(3).LEVEL,et=s(20),tt=i.exports=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");function it(st){this.emit("error",st,this.transport)}this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=it.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(var st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([this.transport.name+" is a legacy winston transport. Consider upgrading: ","- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){(function(_,$){function et(wt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt})(wt)}function tt(wt,xt){if(!(wt instanceof xt))throw new TypeError("Cannot call a class as a function")}function j(wt,xt){for(var Nt=0;Nt<xt.length;Nt++){var Tt=xt[Nt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(wt,Tt.key,Tt)}}function it(wt,xt){return(it=Object.setPrototypeOf||function(Nt,Tt){return Nt.__proto__=Tt,Nt})(wt,xt)}function st(wt){var xt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Nt,Tt=gt(wt);if(xt){var Vt=gt(this).constructor;Nt=Reflect.construct(Tt,arguments,Vt)}else Nt=Tt.apply(this,arguments);return ht(this,Nt)}}function ht(wt,xt){return!xt||et(xt)!=="object"&&typeof xt!="function"?_t(wt):xt}function _t(wt){if(wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}function gt(wt){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(xt){return xt.__proto__||Object.getPrototypeOf(xt)})(wt)}var ft=s(65),ut=s(56),yt=s(150),Et=s(160),Mt=s(3).MESSAGE,Ft=s(32),Rt=Ft.Stream,Ot=Ft.PassThrough,pt=s(20),Lt=s(38)("winston:file"),nn=s(18),on=s(188);i.exports=function(wt){(function(Xt,Gt){if(typeof Gt!="function"&&Gt!==null)throw new TypeError("Super expression must either be null or a function");Xt.prototype=Object.create(Gt&&Gt.prototype,{constructor:{value:Xt,writable:!0,configurable:!0}}),Gt&&it(Xt,Gt)})(Vt,wt);var xt,Nt,Tt=st(Vt);function Vt(){var Xt,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function Ut(Ht){for(var qt=arguments.length,Pt=new Array(qt>1?qt-1:0),St=1;St<qt;St++)Pt[St-1]=arguments[St];Pt.slice(1).forEach(function(Zt){if(Gt[Zt])throw new Error("Cannot set ".concat(Zt," and ").concat(Ht," together"))})}if(tt(this,Vt),(Xt=Tt.call(this,Gt)).name=Gt.name||"file",Xt._stream=new Ot,Xt._stream.setMaxListeners(30),Xt._onError=Xt._onError.bind(_t(Xt)),Gt.filename||Gt.dirname)Ut("filename or dirname","stream"),Xt._basename=Xt.filename=Gt.filename?ut.basename(Gt.filename):"winston.log",Xt.dirname=Gt.dirname||ut.dirname(Gt.filename),Xt.options=Gt.options||{flags:"a"};else{if(!Gt.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),Ut("stream","filename","maxsize"),Xt._dest=Xt._stream.pipe(Xt._setupStream(Gt.stream)),Xt.dirname=ut.dirname(Xt._dest.path)}return Xt.maxsize=Gt.maxsize||null,Xt.rotationFormat=Gt.rotationFormat||!1,Xt.zippedArchive=Gt.zippedArchive||!1,Xt.maxFiles=Gt.maxFiles||null,Xt.eol=Gt.eol||nn.EOL,Xt.tailable=Gt.tailable||!1,Xt._size=0,Xt._pendingSize=0,Xt._created=0,Xt._drain=!1,Xt._opening=!1,Xt._ending=!1,Xt.dirname&&Xt._createLogDirIfNotExist(Xt.dirname),Xt.open(),Xt}return xt=Vt,(Nt=[{key:"finishIfEnding",value:function(){var Xt=this;this._ending&&(this._opening?this.once("open",function(){Xt._stream.once("finish",function(){return Xt.emit("finish")}),_(function(){return Xt._stream.end()})}):(this._stream.once("finish",function(){return Xt.emit("finish")}),_(function(){return Xt._stream.end()})))}},{key:"log",value:function(Xt){var Gt=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};if(this.silent)return Ut(),!0;if(this._drain)this._stream.once("drain",function(){Gt._drain=!1,Gt.log(Xt,Ut)});else{if(!this._rotate){var Ht="".concat(Xt[Mt]).concat(this.eol),qt=$.byteLength(Ht);this._pendingSize+=qt,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);var Pt=this._stream.write(Ht,St.bind(this));return Pt?Ut():(this._drain=!0,this._stream.once("drain",function(){Gt._drain=!1,Ut()})),Lt("written",Pt,this._drain),this.finishIfEnding(),Pt}this._stream.once("rotate",function(){Gt._rotate=!1,Gt.log(Xt,Ut)})}function St(){var Zt=this;this._size+=qt,this._pendingSize-=qt,Lt("logged %s %s",this._size,Ht),this.emit("logged",Xt),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream(function(){return Zt._rotateFile()}))}}},{key:"query",value:function(Xt,Gt){typeof Xt=="function"&&(Gt=Xt,Xt={}),Xt=function(tn){return(tn=tn||{}).rows=tn.rows||tn.limit||10,tn.start=tn.start||0,tn.until=tn.until||new Date,et(tn.until)!=="object"&&(tn.until=new Date(tn.until)),tn.from=tn.from||tn.until-864e5,et(tn.from)!=="object"&&(tn.from=new Date(tn.from)),tn.order=tn.order||"desc",tn}(Xt);var Ut=ut.join(this.dirname,this.filename),Ht="",qt=[],Pt=0,St=ft.createReadStream(Ut,{encoding:"utf8"});function Zt(tn,mn){try{var yn=JSON.parse(tn);(function(vn){if(vn&&et(vn)==="object"){var un=new Date(vn.timestamp);if(!(Xt.from&&un<Xt.from||Xt.until&&un>Xt.until||Xt.level&&Xt.level!==vn.level))return!0}})(yn)&&function(vn){Xt.rows&&qt.length>=Xt.rows&&Xt.order!=="desc"?St.readable&&St.destroy():(Xt.fields&&(vn=Xt.fields.reduce(function(un,rn){return un[rn]=vn[rn],un},{})),Xt.order==="desc"&&qt.length>=Xt.rows&&qt.shift(),qt.push(vn))}(yn)}catch(vn){mn||St.emit("error",vn)}}St.on("error",function(tn){if(St.readable&&St.destroy(),Gt)return tn.code!=="ENOENT"?Gt(tn):Gt(null,qt)}),St.on("data",function(tn){for(var mn=(tn=(Ht+tn).split(/\n+/)).length-1,yn=0;yn<mn;yn++)(!Xt.start||Pt>=Xt.start)&&Zt(tn[yn]),Pt++;Ht=tn[mn]}),St.on("close",function(){Ht&&Zt(Ht,!0),Xt.order==="desc"&&(qt=qt.reverse()),Gt&&Gt(null,qt)})}},{key:"stream",value:function(){var Xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Gt=ut.join(this.dirname,this.filename),Ut=new Rt,Ht={file:Gt,start:Xt.start};return Ut.destroy=on(Ht,function(qt,Pt){if(qt)return Ut.emit("error",qt);try{Ut.emit("data",Pt),Pt=JSON.parse(Pt),Ut.emit("log",Pt)}catch(St){Ut.emit("error",St)}}),Ut}},{key:"open",value:function(){var Xt=this;this.filename&&(this._opening||(this._opening=!0,this.stat(function(Gt,Ut){if(Gt)return Xt.emit("error",Gt);Lt("stat done: %s { size: %s }",Xt.filename,Ut),Xt._size=Ut,Xt._dest=Xt._createStream(Xt._stream),Xt._opening=!1,Xt.once("open",function(){Xt._stream.eventNames().includes("rotate")?Xt._stream.emit("rotate"):Xt._rotate=!1})})))}},{key:"stat",value:function(Xt){var Gt=this,Ut=this._getFile(),Ht=ut.join(this.dirname,Ut);ft.stat(Ht,function(qt,Pt){return qt&&qt.code==="ENOENT"?(Lt("ENOENT ok",Ht),Gt.filename=Ut,Xt(null,0)):qt?(Lt("err ".concat(qt.code," ").concat(Ht)),Xt(qt)):!Pt||Gt._needsNewFile(Pt.size)?Gt._incFile(function(){return Gt.stat(Xt)}):(Gt.filename=Ut,void Xt(null,Pt.size))})}},{key:"close",value:function(Xt){var Gt=this;this._stream&&this._stream.end(function(){Xt&&Xt(),Gt.emit("flush"),Gt.emit("closed")})}},{key:"_needsNewFile",value:function(Xt){return Xt=Xt||this._size,this.maxsize&&Xt>=this.maxsize}},{key:"_onError",value:function(Xt){this.emit("error",Xt)}},{key:"_setupStream",value:function(Xt){return Xt.on("error",this._onError),Xt}},{key:"_cleanupStream",value:function(Xt){return Xt.removeListener("error",this._onError),Xt}},{key:"_rotateFile",value:function(){var Xt=this;this._incFile(function(){return Xt.open()})}},{key:"_endStream",value:function(){var Xt=this,Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this._dest?(this._stream.unpipe(this._dest),this._dest.end(function(){Xt._cleanupStream(Xt._dest),Gt()})):Gt()}},{key:"_createStream",value:function(Xt){var Gt=this,Ut=ut.join(this.dirname,this.filename);Lt("create stream start",Ut,this.options);var Ht=ft.createWriteStream(Ut,this.options).on("error",function(Pt){return Lt(Pt)}).on("close",function(){return Lt("close",Ht.path,Ht.bytesWritten)}).on("open",function(){Lt("file open ok",Ut),Gt.emit("open",Ut),Xt.pipe(Ht),Gt.rotatedWhileOpening&&(Gt._stream=new Ot,Gt._stream.setMaxListeners(30),Gt._rotateFile(),Gt.rotatedWhileOpening=!1,Gt._cleanupStream(Ht),Xt.end())});if(Lt("create stream ok",Ut),this.zippedArchive){var qt=Et.createGzip();return qt.pipe(Ht),qt}return Ht}},{key:"_incFile",value:function(Xt){Lt("_incFile",this.filename);var Gt=ut.extname(this._basename),Ut=ut.basename(this._basename,Gt);this.tailable?this._checkMaxFilesTailable(Gt,Ut,Xt):(this._created+=1,this._checkMaxFilesIncrementing(Gt,Ut,Xt))}},{key:"_getFile",value:function(){var Xt=ut.extname(this._basename),Gt=ut.basename(this._basename,Xt),Ut=this.rotationFormat?this.rotationFormat():this._created,Ht=!this.tailable&&this._created?"".concat(Gt).concat(Ut).concat(Xt):"".concat(Gt).concat(Xt);return this.zippedArchive&&!this.tailable?"".concat(Ht,".gz"):Ht}},{key:"_checkMaxFilesIncrementing",value:function(Xt,Gt,Ut){if(!this.maxFiles||this._created<this.maxFiles)return _(Ut);var Ht=this._created-this.maxFiles,qt=Ht!==0?Ht:"",Pt=this.zippedArchive?".gz":"",St="".concat(Gt).concat(qt).concat(Xt).concat(Pt),Zt=ut.join(this.dirname,St);ft.unlink(Zt,Ut)}},{key:"_checkMaxFilesTailable",value:function(Xt,Gt,Ut){var Ht=this,qt=[];if(this.maxFiles){for(var Pt=this.zippedArchive?".gz":"",St=this.maxFiles-1;St>1;St--)qt.push(function(Zt,tn){var mn=this,yn="".concat(Gt).concat(Zt-1).concat(Xt).concat(Pt),vn=ut.join(this.dirname,yn);ft.exists(vn,function(un){if(!un)return tn(null);yn="".concat(Gt).concat(Zt).concat(Xt).concat(Pt),ft.rename(vn,ut.join(mn.dirname,yn),tn)})}.bind(this,St));yt(qt,function(){ft.rename(ut.join(Ht.dirname,"".concat(Gt).concat(Xt)),ut.join(Ht.dirname,"".concat(Gt,"1").concat(Xt).concat(Pt)),Ut)})}}},{key:"_createLogDirIfNotExist",value:function(Xt){ft.existsSync(Xt)||ft.mkdirSync(Xt,{recursive:!0})}}])&&j(xt.prototype,Nt),Vt}(pt)}).call(this,s(15).setImmediate,s(5).Buffer)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j){return(0,_.default)($.default,tt,j)};var _=et(s(151)),$=et(s(155));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=tt(s(45)),$=tt(s(25)),et=tt(s(30));function tt(j){return j&&j.__esModule?j:{default:j}}o.default=(0,et.default)((j,it,st)=>{var ht=(0,_.default)(it)?[]:{};j(it,(_t,gt,ft)=>{(0,$.default)(_t)((ut,...yt)=>{yt.length<2&&([yt]=yt),ht[gt]=yt,ft(ut)})},_t=>st(_t,ht))},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(st){return(0,et.isAsync)(st)?function(...ht){const _t=ht.pop();return j(st.apply(this,ht),_t)}:(0,_.default)(function(ht,_t){var gt;try{gt=st.apply(this,ht)}catch(ft){return _t(ft)}if(gt&&typeof gt.then=="function")return j(gt,_t);_t(null,gt)})};var _=tt(s(153)),$=tt(s(154)),et=s(25);function tt(st){return st&&st.__esModule?st:{default:st}}function j(st,ht){return st.then(_t=>{it(ht,null,_t)},_t=>{it(ht,_t&&_t.message?_t:new Error(_t))})}function it(st,ht,_t){try{st(ht,_t)}catch(gt){(0,$.default)(ft=>{throw ft},gt)}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return function(...$){var et=$.pop();return _.call(this,$,et)}},i.exports=o.default},function(i,o,s){(function(_,$){Object.defineProperty(o,"__esModule",{value:!0}),o.fallback=it,o.wrap=st;var et,tt=o.hasSetImmediate=typeof _=="function"&&_,j=o.hasNextTick=typeof $=="object"&&typeof $.nextTick=="function";function it(ht){setTimeout(ht,0)}function st(ht){return(_t,...gt)=>ht(()=>_t(...gt))}et=tt?_:j?$.nextTick:it,o.default=st(et)}).call(this,s(15).setImmediate,s(2))},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=et(s(66)),$=et(s(30));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}o.default=(0,$.default)(function(tt,j,it){return(0,_.default)(tt,1,j,it)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=st(s(67)),$=st(s(157)),et=st(s(68)),tt=s(25),j=st(s(159)),it=st(s(46));function st(ht){return ht&&ht.__esModule?ht:{default:ht}}o.default=ht=>(_t,gt,ft)=>{if(ft=(0,_.default)(ft),ht<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!_t)return ft(null);if((0,tt.isAsyncGenerator)(_t))return(0,j.default)(_t,ht,gt,ft);if((0,tt.isAsyncIterable)(_t))return(0,j.default)(_t[Symbol.asyncIterator](),ht,gt,ft);var ut=(0,$.default)(_t),yt=!1,Et=!1,Mt=0,Ft=!1;function Rt(pt,Lt){if(!Et)if(Mt-=1,pt)yt=!0,ft(pt);else if(pt===!1)yt=!0,Et=!0;else{if(Lt===it.default||yt&&Mt<=0)return yt=!0,ft(null);Ft||Ot()}}function Ot(){for(Ft=!0;Mt<ht&&!yt;){var pt=ut();if(pt===null)return yt=!0,void(Mt<=0&&ft(null));Mt+=1,gt(pt.value,pt.key,(0,et.default)(Rt))}Ft=!1}Ot()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt){if((0,_.default)(tt))return function(gt){var ft=-1,ut=gt.length;return function(){return++ft<ut?{value:gt[ft],key:ft}:null}}(tt);var j=(0,$.default)(tt);return j?function(gt){var ft=-1;return function(){var ut=gt.next();return ut.done?null:(ft++,{value:ut.value,key:ft})}}(j):(it=tt,st=it?Object.keys(it):[],ht=-1,_t=st.length,function(){var gt=st[++ht];return ht<_t?{value:it[gt],key:gt}:null});var it,st,ht,_t};var _=et(s(45)),$=et(s(158));function et(tt){return tt&&tt.__esModule?tt:{default:tt}}i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return _[Symbol.iterator]&&_[Symbol.iterator]()},i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(tt,j,it,st){let ht=!1,_t=!1,gt=!1,ft=0,ut=0;function yt(){ft>=j||gt||ht||(gt=!0,tt.next().then(({value:Ft,done:Rt})=>{if(!_t&&!ht){if(gt=!1,Rt)return ht=!0,void(ft<=0&&st(null));ft++,it(Ft,ut,Et),ut++,yt()}}).catch(Mt))}function Et(Ft,Rt){if(ft-=1,!_t)return Ft?Mt(Ft):Ft===!1?(ht=!0,void(_t=!0)):Rt===et.default||ht&&ft<=0?(ht=!0,st(null)):void yt()}function Mt(Ft){_t||(gt=!1,ht=!0,st(Ft))}yt()};var _,$=s(46),et=(_=$)&&_.__esModule?_:{default:_};i.exports=o.default},function(i,o,s){(function(_){var $=s(5).Buffer,et=s(161).Transform,tt=s(169),j=s(13),it=s(74).ok,st=s(5).kMaxLength,ht="Cannot create final Buffer. It would be larger than 0x"+st.toString(16)+" bytes";tt.Z_MIN_WINDOWBITS=8,tt.Z_MAX_WINDOWBITS=15,tt.Z_DEFAULT_WINDOWBITS=15,tt.Z_MIN_CHUNK=64,tt.Z_MAX_CHUNK=1/0,tt.Z_DEFAULT_CHUNK=16384,tt.Z_MIN_MEMLEVEL=1,tt.Z_MAX_MEMLEVEL=9,tt.Z_DEFAULT_MEMLEVEL=8,tt.Z_MIN_LEVEL=-1,tt.Z_MAX_LEVEL=9,tt.Z_DEFAULT_LEVEL=tt.Z_DEFAULT_COMPRESSION;for(var _t=Object.keys(tt),gt=0;gt<_t.length;gt++){var ft=_t[gt];ft.match(/^Z/)&&Object.defineProperty(o,ft,{enumerable:!0,value:tt[ft],writable:!1})}for(var ut={Z_OK:tt.Z_OK,Z_STREAM_END:tt.Z_STREAM_END,Z_NEED_DICT:tt.Z_NEED_DICT,Z_ERRNO:tt.Z_ERRNO,Z_STREAM_ERROR:tt.Z_STREAM_ERROR,Z_DATA_ERROR:tt.Z_DATA_ERROR,Z_MEM_ERROR:tt.Z_MEM_ERROR,Z_BUF_ERROR:tt.Z_BUF_ERROR,Z_VERSION_ERROR:tt.Z_VERSION_ERROR},yt=Object.keys(ut),Et=0;Et<yt.length;Et++){var Mt=yt[Et];ut[ut[Mt]]=Mt}function Ft(Gt,Ut,Ht){var qt=[],Pt=0;function St(){for(var tn;(tn=Gt.read())!==null;)qt.push(tn),Pt+=tn.length;Gt.once("readable",St)}function Zt(){var tn,mn=null;Pt>=st?mn=new RangeError(ht):tn=$.concat(qt,Pt),qt=[],Gt.close(),Ht(mn,tn)}Gt.on("error",function(tn){Gt.removeListener("end",Zt),Gt.removeListener("readable",St),Ht(tn)}),Gt.on("end",Zt),Gt.end(Ut),St()}function Rt(Gt,Ut){if(typeof Ut=="string"&&(Ut=$.from(Ut)),!$.isBuffer(Ut))throw new TypeError("Not a string or buffer");var Ht=Gt._finishFlushFlag;return Gt._processChunk(Ut,Ht)}function Ot(Gt){if(!(this instanceof Ot))return new Ot(Gt);Tt.call(this,Gt,tt.DEFLATE)}function pt(Gt){if(!(this instanceof pt))return new pt(Gt);Tt.call(this,Gt,tt.INFLATE)}function Lt(Gt){if(!(this instanceof Lt))return new Lt(Gt);Tt.call(this,Gt,tt.GZIP)}function nn(Gt){if(!(this instanceof nn))return new nn(Gt);Tt.call(this,Gt,tt.GUNZIP)}function on(Gt){if(!(this instanceof on))return new on(Gt);Tt.call(this,Gt,tt.DEFLATERAW)}function wt(Gt){if(!(this instanceof wt))return new wt(Gt);Tt.call(this,Gt,tt.INFLATERAW)}function xt(Gt){if(!(this instanceof xt))return new xt(Gt);Tt.call(this,Gt,tt.UNZIP)}function Nt(Gt){return Gt===tt.Z_NO_FLUSH||Gt===tt.Z_PARTIAL_FLUSH||Gt===tt.Z_SYNC_FLUSH||Gt===tt.Z_FULL_FLUSH||Gt===tt.Z_FINISH||Gt===tt.Z_BLOCK}function Tt(Gt,Ut){var Ht=this;if(this._opts=Gt=Gt||{},this._chunkSize=Gt.chunkSize||o.Z_DEFAULT_CHUNK,et.call(this,Gt),Gt.flush&&!Nt(Gt.flush))throw new Error("Invalid flush flag: "+Gt.flush);if(Gt.finishFlush&&!Nt(Gt.finishFlush))throw new Error("Invalid flush flag: "+Gt.finishFlush);if(this._flushFlag=Gt.flush||tt.Z_NO_FLUSH,this._finishFlushFlag=Gt.finishFlush!==void 0?Gt.finishFlush:tt.Z_FINISH,Gt.chunkSize&&(Gt.chunkSize<o.Z_MIN_CHUNK||Gt.chunkSize>o.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+Gt.chunkSize);if(Gt.windowBits&&(Gt.windowBits<o.Z_MIN_WINDOWBITS||Gt.windowBits>o.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+Gt.windowBits);if(Gt.level&&(Gt.level<o.Z_MIN_LEVEL||Gt.level>o.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+Gt.level);if(Gt.memLevel&&(Gt.memLevel<o.Z_MIN_MEMLEVEL||Gt.memLevel>o.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+Gt.memLevel);if(Gt.strategy&&Gt.strategy!=o.Z_FILTERED&&Gt.strategy!=o.Z_HUFFMAN_ONLY&&Gt.strategy!=o.Z_RLE&&Gt.strategy!=o.Z_FIXED&&Gt.strategy!=o.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+Gt.strategy);if(Gt.dictionary&&!$.isBuffer(Gt.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new tt.Zlib(Ut);var qt=this;this._hadError=!1,this._handle.onerror=function(Zt,tn){Vt(qt),qt._hadError=!0;var mn=new Error(Zt);mn.errno=tn,mn.code=o.codes[tn],qt.emit("error",mn)};var Pt=o.Z_DEFAULT_COMPRESSION;typeof Gt.level=="number"&&(Pt=Gt.level);var St=o.Z_DEFAULT_STRATEGY;typeof Gt.strategy=="number"&&(St=Gt.strategy),this._handle.init(Gt.windowBits||o.Z_DEFAULT_WINDOWBITS,Pt,Gt.memLevel||o.Z_DEFAULT_MEMLEVEL,St,Gt.dictionary),this._buffer=$.allocUnsafe(this._chunkSize),this._offset=0,this._level=Pt,this._strategy=St,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!Ht._handle},configurable:!0,enumerable:!0})}function Vt(Gt,Ut){Ut&&_.nextTick(Ut),Gt._handle&&(Gt._handle.close(),Gt._handle=null)}function Xt(Gt){Gt.emit("close")}Object.defineProperty(o,"codes",{enumerable:!0,value:Object.freeze(ut),writable:!1}),o.Deflate=Ot,o.Inflate=pt,o.Gzip=Lt,o.Gunzip=nn,o.DeflateRaw=on,o.InflateRaw=wt,o.Unzip=xt,o.createDeflate=function(Gt){return new Ot(Gt)},o.createInflate=function(Gt){return new pt(Gt)},o.createDeflateRaw=function(Gt){return new on(Gt)},o.createInflateRaw=function(Gt){return new wt(Gt)},o.createGzip=function(Gt){return new Lt(Gt)},o.createGunzip=function(Gt){return new nn(Gt)},o.createUnzip=function(Gt){return new xt(Gt)},o.deflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new Ot(Ut),Gt,Ht)},o.deflateSync=function(Gt,Ut){return Rt(new Ot(Ut),Gt)},o.gzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new Lt(Ut),Gt,Ht)},o.gzipSync=function(Gt,Ut){return Rt(new Lt(Ut),Gt)},o.deflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new on(Ut),Gt,Ht)},o.deflateRawSync=function(Gt,Ut){return Rt(new on(Ut),Gt)},o.unzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new xt(Ut),Gt,Ht)},o.unzipSync=function(Gt,Ut){return Rt(new xt(Ut),Gt)},o.inflate=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new pt(Ut),Gt,Ht)},o.inflateSync=function(Gt,Ut){return Rt(new pt(Ut),Gt)},o.gunzip=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new nn(Ut),Gt,Ht)},o.gunzipSync=function(Gt,Ut){return Rt(new nn(Ut),Gt)},o.inflateRaw=function(Gt,Ut,Ht){return typeof Ut=="function"&&(Ht=Ut,Ut={}),Ft(new wt(Ut),Gt,Ht)},o.inflateRawSync=function(Gt,Ut){return Rt(new wt(Ut),Gt)},j.inherits(Tt,et),Tt.prototype.params=function(Gt,Ut,Ht){if(Gt<o.Z_MIN_LEVEL||Gt>o.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+Gt);if(Ut!=o.Z_FILTERED&&Ut!=o.Z_HUFFMAN_ONLY&&Ut!=o.Z_RLE&&Ut!=o.Z_FIXED&&Ut!=o.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+Ut);if(this._level!==Gt||this._strategy!==Ut){var qt=this;this.flush(tt.Z_SYNC_FLUSH,function(){it(qt._handle,"zlib binding closed"),qt._handle.params(Gt,Ut),qt._hadError||(qt._level=Gt,qt._strategy=Ut,Ht&&Ht())})}else _.nextTick(Ht)},Tt.prototype.reset=function(){return it(this._handle,"zlib binding closed"),this._handle.reset()},Tt.prototype._flush=function(Gt){this._transform($.alloc(0),"",Gt)},Tt.prototype.flush=function(Gt,Ut){var Ht=this,qt=this._writableState;(typeof Gt=="function"||Gt===void 0&&!Ut)&&(Ut=Gt,Gt=tt.Z_FULL_FLUSH),qt.ended?Ut&&_.nextTick(Ut):qt.ending?Ut&&this.once("end",Ut):qt.needDrain?Ut&&this.once("drain",function(){return Ht.flush(Gt,Ut)}):(this._flushFlag=Gt,this.write($.alloc(0),"",Ut))},Tt.prototype.close=function(Gt){Vt(this,Gt),_.nextTick(Xt,this)},Tt.prototype._transform=function(Gt,Ut,Ht){var qt,Pt=this._writableState,St=(Pt.ending||Pt.ended)&&(!Gt||Pt.length===Gt.length);return Gt===null||$.isBuffer(Gt)?this._handle?(St?qt=this._finishFlushFlag:(qt=this._flushFlag,Gt.length>=Pt.length&&(this._flushFlag=this._opts.flush||tt.Z_NO_FLUSH)),void this._processChunk(Gt,qt,Ht)):Ht(new Error("zlib binding closed")):Ht(new Error("invalid input"))},Tt.prototype._processChunk=function(Gt,Ut,Ht){var qt=Gt&&Gt.length,Pt=this._chunkSize-this._offset,St=0,Zt=this,tn=typeof Ht=="function";if(!tn){var mn,yn=[],vn=0;this.on("error",function(Kt){mn=Kt}),it(this._handle,"zlib binding closed");do var un=this._handle.writeSync(Ut,Gt,St,qt,this._buffer,this._offset,Pt);while(!this._hadError&&Dt(un[0],un[1]));if(this._hadError)throw mn;if(vn>=st)throw Vt(this),new RangeError(ht);var rn=$.concat(yn,vn);return Vt(this),rn}it(this._handle,"zlib binding closed");var It=this._handle.write(Ut,Gt,St,qt,this._buffer,this._offset,Pt);function Dt(Kt,gn){if(this&&(this.buffer=null,this.callback=null),!Zt._hadError){var hn=Pt-gn;if(it(hn>=0,"have should not go down"),hn>0){var xn=Zt._buffer.slice(Zt._offset,Zt._offset+hn);Zt._offset+=hn,tn?Zt.push(xn):(yn.push(xn),vn+=xn.length)}if((gn===0||Zt._offset>=Zt._chunkSize)&&(Pt=Zt._chunkSize,Zt._offset=0,Zt._buffer=$.allocUnsafe(Zt._chunkSize)),gn===0){if(St+=qt-Kt,qt=Kt,!tn)return!0;var Mn=Zt._handle.write(Ut,Gt,St,qt,Zt._buffer,Zt._offset,Zt._chunkSize);return Mn.callback=Dt,void(Mn.buffer=Gt)}if(!tn)return!1;Ht()}}It.buffer=Gt,It.callback=Dt},j.inherits(Ot,Tt),j.inherits(pt,Tt),j.inherits(Lt,Tt),j.inherits(nn,Tt),j.inherits(on,Tt),j.inherits(wt,Tt),j.inherits(xt,Tt)}).call(this,s(2))},function(i,o,s){i.exports=$;var _=s(21).EventEmitter;function $(){_.call(this)}s(7)($,_),$.Readable=s(31),$.Writable=s(73),$.Duplex=s(166),$.Transform=s(167),$.PassThrough=s(168),$.Stream=$,$.prototype.pipe=function(et,tt){var j=this;function it(yt){et.writable&&et.write(yt)===!1&&j.pause&&j.pause()}function st(){j.readable&&j.resume&&j.resume()}j.on("data",it),et.on("drain",st),et._isStdio||tt&&tt.end===!1||(j.on("end",_t),j.on("close",gt));var ht=!1;function _t(){ht||(ht=!0,et.end())}function gt(){ht||(ht=!0,typeof et.destroy=="function"&&et.destroy())}function ft(yt){if(ut(),_.listenerCount(this,"error")===0)throw yt}function ut(){j.removeListener("data",it),et.removeListener("drain",st),j.removeListener("end",_t),j.removeListener("close",gt),j.removeListener("error",ft),et.removeListener("error",ft),j.removeListener("end",ut),j.removeListener("close",ut),et.removeListener("close",ut)}return j.on("error",ft),et.on("error",ft),j.on("end",ut),j.on("close",ut),et.on("close",ut),et.emit("pipe",j),et}},function(i,o){},function(i,o,s){var _=s(47).Buffer,$=s(164);i.exports=function(){function et(){(function(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")})(this,et),this.head=null,this.tail=null,this.length=0}return et.prototype.push=function(tt){var j={data:tt,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length},et.prototype.unshift=function(tt){var j={data:tt,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length},et.prototype.shift=function(){if(this.length!==0){var tt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,tt}},et.prototype.clear=function(){this.head=this.tail=null,this.length=0},et.prototype.join=function(tt){if(this.length===0)return"";for(var j=this.head,it=""+j.data;j=j.next;)it+=tt+j.data;return it},et.prototype.concat=function(tt){if(this.length===0)return _.alloc(0);if(this.length===1)return this.head.data;for(var j,it,st,ht=_.allocUnsafe(tt>>>0),_t=this.head,gt=0;_t;)j=_t.data,it=ht,st=gt,j.copy(it,st),gt+=_t.data.length,_t=_t.next;return ht},et}(),$&&$.inspect&&$.inspect.custom&&(i.exports.prototype[$.inspect.custom]=function(){var et=$.inspect({length:this.length});return this.constructor.name+" "+et})},function(i,o){},function(i,o,s){i.exports=et;var _=s(72),$=s(17);function et(tt){if(!(this instanceof et))return new et(tt);_.call(this,tt)}$.inherits=s(7),$.inherits(et,_),et.prototype._transform=function(tt,j,it){it(null,tt)}},function(i,o,s){i.exports=s(23)},function(i,o,s){i.exports=s(31).Transform},function(i,o,s){i.exports=s(31).PassThrough},function(i,o,s){(function(_,$){var et=s(74),tt=s(171),j=s(172),it=s(175),st=s(178);for(var ht in st)o[ht]=st[ht];o.NONE=0,o.DEFLATE=1,o.INFLATE=2,o.GZIP=3,o.GUNZIP=4,o.DEFLATERAW=5,o.INFLATERAW=6,o.UNZIP=7;function _t(gt){if(typeof gt!="number"||gt<o.DEFLATE||gt>o.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=gt,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}_t.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,et(this.init_done,"close before init"),et(this.mode<=o.UNZIP),this.mode===o.DEFLATE||this.mode===o.GZIP||this.mode===o.DEFLATERAW?j.deflateEnd(this.strm):this.mode!==o.INFLATE&&this.mode!==o.GUNZIP&&this.mode!==o.INFLATERAW&&this.mode!==o.UNZIP||it.inflateEnd(this.strm),this.mode=o.NONE,this.dictionary=null)},_t.prototype.write=function(gt,ft,ut,yt,Et,Mt,Ft){return this._write(!0,gt,ft,ut,yt,Et,Mt,Ft)},_t.prototype.writeSync=function(gt,ft,ut,yt,Et,Mt,Ft){return this._write(!1,gt,ft,ut,yt,Et,Mt,Ft)},_t.prototype._write=function(gt,ft,ut,yt,Et,Mt,Ft,Rt){if(et.equal(arguments.length,8),et(this.init_done,"write before init"),et(this.mode!==o.NONE,"already finalized"),et.equal(!1,this.write_in_progress,"write already in progress"),et.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,et.equal(!1,ft===void 0,"must provide flush value"),this.write_in_progress=!0,ft!==o.Z_NO_FLUSH&&ft!==o.Z_PARTIAL_FLUSH&&ft!==o.Z_SYNC_FLUSH&&ft!==o.Z_FULL_FLUSH&&ft!==o.Z_FINISH&&ft!==o.Z_BLOCK)throw new Error("Invalid flush value");if(ut==null&&(ut=_.alloc(0),Et=0,yt=0),this.strm.avail_in=Et,this.strm.input=ut,this.strm.next_in=yt,this.strm.avail_out=Rt,this.strm.output=Mt,this.strm.next_out=Ft,this.flush=ft,!gt)return this._process(),this._checkError()?this._afterSync():void 0;var Ot=this;return $.nextTick(function(){Ot._process(),Ot._after()}),this},_t.prototype._afterSync=function(){var gt=this.strm.avail_out,ft=this.strm.avail_in;return this.write_in_progress=!1,[ft,gt]},_t.prototype._process=function(){var gt=null;switch(this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflate(this.strm,this.flush);break;case o.UNZIP:switch(this.strm.avail_in>0&&(gt=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(gt===null)break;if(this.strm.input[gt]!==31){this.mode=o.INFLATE;break}if(this.gzip_id_bytes_read=1,gt++,this.strm.avail_in===1)break;case 1:if(gt===null)break;this.strm.input[gt]===139?(this.gzip_id_bytes_read=2,this.mode=o.GUNZIP):this.mode=o.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:for(this.err=it.inflate(this.strm,this.flush),this.err===o.Z_NEED_DICT&&this.dictionary&&(this.err=it.inflateSetDictionary(this.strm,this.dictionary),this.err===o.Z_OK?this.err=it.inflate(this.strm,this.flush):this.err===o.Z_DATA_ERROR&&(this.err=o.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===o.GUNZIP&&this.err===o.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=it.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},_t.prototype._checkError=function(){switch(this.err){case o.Z_OK:case o.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===o.Z_FINISH)return this._error("unexpected end of file"),!1;break;case o.Z_STREAM_END:break;case o.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},_t.prototype._after=function(){if(this._checkError()){var gt=this.strm.avail_out,ft=this.strm.avail_in;this.write_in_progress=!1,this.callback(ft,gt),this.pending_close&&this.close()}},_t.prototype._error=function(gt){this.strm.msg&&(gt=this.strm.msg),this.onerror(gt,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},_t.prototype.init=function(gt,ft,ut,yt,Et){et(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),et(gt>=8&&gt<=15,"invalid windowBits"),et(ft>=-1&&ft<=9,"invalid compression level"),et(ut>=1&&ut<=9,"invalid memlevel"),et(yt===o.Z_FILTERED||yt===o.Z_HUFFMAN_ONLY||yt===o.Z_RLE||yt===o.Z_FIXED||yt===o.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(ft,gt,ut,yt,Et),this._setDictionary()},_t.prototype.params=function(){throw new Error("deflateParams Not supported")},_t.prototype.reset=function(){this._reset(),this._setDictionary()},_t.prototype._init=function(gt,ft,ut,yt,Et){switch(this.level=gt,this.windowBits=ft,this.memLevel=ut,this.strategy=yt,this.flush=o.Z_NO_FLUSH,this.err=o.Z_OK,this.mode!==o.GZIP&&this.mode!==o.GUNZIP||(this.windowBits+=16),this.mode===o.UNZIP&&(this.windowBits+=32),this.mode!==o.DEFLATERAW&&this.mode!==o.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new tt,this.mode){case o.DEFLATE:case o.GZIP:case o.DEFLATERAW:this.err=j.deflateInit2(this.strm,this.level,o.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case o.INFLATE:case o.GUNZIP:case o.INFLATERAW:case o.UNZIP:this.err=it.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==o.Z_OK&&this._error("Init error"),this.dictionary=Et,this.write_in_progress=!1,this.init_done=!0},_t.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:this.err=j.deflateSetDictionary(this.strm,this.dictionary)}this.err!==o.Z_OK&&this._error("Failed to set dictionary")}},_t.prototype._reset=function(){switch(this.err=o.Z_OK,this.mode){case o.DEFLATE:case o.DEFLATERAW:case o.GZIP:this.err=j.deflateReset(this.strm);break;case o.INFLATE:case o.INFLATERAW:case o.GUNZIP:this.err=it.inflateReset(this.strm)}this.err!==o.Z_OK&&this._error("Failed to reset stream")},o.Zlib=_t}).call(this,s(5).Buffer,s(2))},function(i,o,s){var _=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;function tt(j){if(j==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(j)}i.exports=function(){try{if(!Object.assign)return!1;var j=new String("abc");if(j[5]="de",Object.getOwnPropertyNames(j)[0]==="5")return!1;for(var it={},st=0;st<10;st++)it["_"+String.fromCharCode(st)]=st;if(Object.getOwnPropertyNames(it).map(function(_t){return it[_t]}).join("")!=="0123456789")return!1;var ht={};return"abcdefghijklmnopqrst".split("").forEach(function(_t){ht[_t]=_t}),Object.keys(Object.assign({},ht)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(j,it){for(var st,ht,_t=tt(j),gt=1;gt<arguments.length;gt++){for(var ft in st=Object(arguments[gt]))$.call(st,ft)&&(_t[ft]=st[ft]);if(_){ht=_(st);for(var ut=0;ut<ht.length;ut++)et.call(st,ht[ut])&&(_t[ht[ut]]=st[ht[ut]])}}return _t}},function(i,o,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(i,o,s){var _,$=s(37),et=s(173),tt=s(75),j=s(76),it=s(174);function st(wt,xt){return wt.msg=it[xt],xt}function ht(wt){return(wt<<1)-(wt>4?9:0)}function _t(wt){for(var xt=wt.length;--xt>=0;)wt[xt]=0}function gt(wt){var xt=wt.state,Nt=xt.pending;Nt>wt.avail_out&&(Nt=wt.avail_out),Nt!==0&&($.arraySet(wt.output,xt.pending_buf,xt.pending_out,Nt,wt.next_out),wt.next_out+=Nt,xt.pending_out+=Nt,wt.total_out+=Nt,wt.avail_out-=Nt,xt.pending-=Nt,xt.pending===0&&(xt.pending_out=0))}function ft(wt,xt){et._tr_flush_block(wt,wt.block_start>=0?wt.block_start:-1,wt.strstart-wt.block_start,xt),wt.block_start=wt.strstart,gt(wt.strm)}function ut(wt,xt){wt.pending_buf[wt.pending++]=xt}function yt(wt,xt){wt.pending_buf[wt.pending++]=xt>>>8&255,wt.pending_buf[wt.pending++]=255&xt}function Et(wt,xt){var Nt,Tt,Vt=wt.max_chain_length,Xt=wt.strstart,Gt=wt.prev_length,Ut=wt.nice_match,Ht=wt.strstart>wt.w_size-262?wt.strstart-(wt.w_size-262):0,qt=wt.window,Pt=wt.w_mask,St=wt.prev,Zt=wt.strstart+258,tn=qt[Xt+Gt-1],mn=qt[Xt+Gt];wt.prev_length>=wt.good_match&&(Vt>>=2),Ut>wt.lookahead&&(Ut=wt.lookahead);do if(qt[(Nt=xt)+Gt]===mn&&qt[Nt+Gt-1]===tn&&qt[Nt]===qt[Xt]&&qt[++Nt]===qt[Xt+1]){Xt+=2,Nt++;do;while(qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&qt[++Xt]===qt[++Nt]&&Xt<Zt);if(Tt=258-(Zt-Xt),Xt=Zt-258,Tt>Gt){if(wt.match_start=xt,Gt=Tt,Tt>=Ut)break;tn=qt[Xt+Gt-1],mn=qt[Xt+Gt]}}while((xt=St[xt&Pt])>Ht&&--Vt!=0);return Gt<=wt.lookahead?Gt:wt.lookahead}function Mt(wt){var xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St=wt.w_size;do{if(Vt=wt.window_size-wt.lookahead-wt.strstart,wt.strstart>=St+(St-262)){$.arraySet(wt.window,wt.window,St,St,0),wt.match_start-=St,wt.strstart-=St,wt.block_start-=St,xt=Nt=wt.hash_size;do Tt=wt.head[--xt],wt.head[xt]=Tt>=St?Tt-St:0;while(--Nt);xt=Nt=St;do Tt=wt.prev[--xt],wt.prev[xt]=Tt>=St?Tt-St:0;while(--Nt);Vt+=St}if(wt.strm.avail_in===0)break;if(Gt=wt.strm,Ut=wt.window,Ht=wt.strstart+wt.lookahead,qt=Vt,Pt=void 0,(Pt=Gt.avail_in)>qt&&(Pt=qt),Nt=Pt===0?0:(Gt.avail_in-=Pt,$.arraySet(Ut,Gt.input,Gt.next_in,Pt,Ht),Gt.state.wrap===1?Gt.adler=tt(Gt.adler,Ut,Pt,Ht):Gt.state.wrap===2&&(Gt.adler=j(Gt.adler,Ut,Pt,Ht)),Gt.next_in+=Pt,Gt.total_in+=Pt,Pt),wt.lookahead+=Nt,wt.lookahead+wt.insert>=3)for(Xt=wt.strstart-wt.insert,wt.ins_h=wt.window[Xt],wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[Xt+1])&wt.hash_mask;wt.insert&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[Xt+3-1])&wt.hash_mask,wt.prev[Xt&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=Xt,Xt++,wt.insert--,!(wt.lookahead+wt.insert<3)););}while(wt.lookahead<262&&wt.strm.avail_in!==0)}function Ft(wt,xt){for(var Nt,Tt;;){if(wt.lookahead<262){if(Mt(wt),wt.lookahead<262&&xt===0)return 1;if(wt.lookahead===0)break}if(Nt=0,wt.lookahead>=3&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart),Nt!==0&&wt.strstart-Nt<=wt.w_size-262&&(wt.match_length=Et(wt,Nt)),wt.match_length>=3)if(Tt=et._tr_tally(wt,wt.strstart-wt.match_start,wt.match_length-3),wt.lookahead-=wt.match_length,wt.match_length<=wt.max_lazy_match&&wt.lookahead>=3){wt.match_length--;do wt.strstart++,wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart;while(--wt.match_length!=0);wt.strstart++}else wt.strstart+=wt.match_length,wt.match_length=0,wt.ins_h=wt.window[wt.strstart],wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+1])&wt.hash_mask;else Tt=et._tr_tally(wt,0,wt.window[wt.strstart]),wt.lookahead--,wt.strstart++;if(Tt&&(ft(wt,!1),wt.strm.avail_out===0))return 1}return wt.insert=wt.strstart<2?wt.strstart:2,xt===4?(ft(wt,!0),wt.strm.avail_out===0?3:4):wt.last_lit&&(ft(wt,!1),wt.strm.avail_out===0)?1:2}function Rt(wt,xt){for(var Nt,Tt,Vt;;){if(wt.lookahead<262){if(Mt(wt),wt.lookahead<262&&xt===0)return 1;if(wt.lookahead===0)break}if(Nt=0,wt.lookahead>=3&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart),wt.prev_length=wt.match_length,wt.prev_match=wt.match_start,wt.match_length=2,Nt!==0&&wt.prev_length<wt.max_lazy_match&&wt.strstart-Nt<=wt.w_size-262&&(wt.match_length=Et(wt,Nt),wt.match_length<=5&&(wt.strategy===1||wt.match_length===3&&wt.strstart-wt.match_start>4096)&&(wt.match_length=2)),wt.prev_length>=3&&wt.match_length<=wt.prev_length){Vt=wt.strstart+wt.lookahead-3,Tt=et._tr_tally(wt,wt.strstart-1-wt.prev_match,wt.prev_length-3),wt.lookahead-=wt.prev_length-1,wt.prev_length-=2;do++wt.strstart<=Vt&&(wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[wt.strstart+3-1])&wt.hash_mask,Nt=wt.prev[wt.strstart&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=wt.strstart);while(--wt.prev_length!=0);if(wt.match_available=0,wt.match_length=2,wt.strstart++,Tt&&(ft(wt,!1),wt.strm.avail_out===0))return 1}else if(wt.match_available){if((Tt=et._tr_tally(wt,0,wt.window[wt.strstart-1]))&&ft(wt,!1),wt.strstart++,wt.lookahead--,wt.strm.avail_out===0)return 1}else wt.match_available=1,wt.strstart++,wt.lookahead--}return wt.match_available&&(Tt=et._tr_tally(wt,0,wt.window[wt.strstart-1]),wt.match_available=0),wt.insert=wt.strstart<2?wt.strstart:2,xt===4?(ft(wt,!0),wt.strm.avail_out===0?3:4):wt.last_lit&&(ft(wt,!1),wt.strm.avail_out===0)?1:2}function Ot(wt,xt,Nt,Tt,Vt){this.good_length=wt,this.max_lazy=xt,this.nice_length=Nt,this.max_chain=Tt,this.func=Vt}function pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new $.Buf16(1146),this.dyn_dtree=new $.Buf16(122),this.bl_tree=new $.Buf16(78),_t(this.dyn_ltree),_t(this.dyn_dtree),_t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new $.Buf16(16),this.heap=new $.Buf16(573),_t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new $.Buf16(573),_t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Lt(wt){var xt;return wt&&wt.state?(wt.total_in=wt.total_out=0,wt.data_type=2,(xt=wt.state).pending=0,xt.pending_out=0,xt.wrap<0&&(xt.wrap=-xt.wrap),xt.status=xt.wrap?42:113,wt.adler=xt.wrap===2?0:1,xt.last_flush=0,et._tr_init(xt),0):st(wt,-2)}function nn(wt){var xt,Nt=Lt(wt);return Nt===0&&((xt=wt.state).window_size=2*xt.w_size,_t(xt.head),xt.max_lazy_match=_[xt.level].max_lazy,xt.good_match=_[xt.level].good_length,xt.nice_match=_[xt.level].nice_length,xt.max_chain_length=_[xt.level].max_chain,xt.strstart=0,xt.block_start=0,xt.lookahead=0,xt.insert=0,xt.match_length=xt.prev_length=2,xt.match_available=0,xt.ins_h=0),Nt}function on(wt,xt,Nt,Tt,Vt,Xt){if(!wt)return-2;var Gt=1;if(xt===-1&&(xt=6),Tt<0?(Gt=0,Tt=-Tt):Tt>15&&(Gt=2,Tt-=16),Vt<1||Vt>9||Nt!==8||Tt<8||Tt>15||xt<0||xt>9||Xt<0||Xt>4)return st(wt,-2);Tt===8&&(Tt=9);var Ut=new pt;return wt.state=Ut,Ut.strm=wt,Ut.wrap=Gt,Ut.gzhead=null,Ut.w_bits=Tt,Ut.w_size=1<<Ut.w_bits,Ut.w_mask=Ut.w_size-1,Ut.hash_bits=Vt+7,Ut.hash_size=1<<Ut.hash_bits,Ut.hash_mask=Ut.hash_size-1,Ut.hash_shift=~~((Ut.hash_bits+3-1)/3),Ut.window=new $.Buf8(2*Ut.w_size),Ut.head=new $.Buf16(Ut.hash_size),Ut.prev=new $.Buf16(Ut.w_size),Ut.lit_bufsize=1<<Vt+6,Ut.pending_buf_size=4*Ut.lit_bufsize,Ut.pending_buf=new $.Buf8(Ut.pending_buf_size),Ut.d_buf=1*Ut.lit_bufsize,Ut.l_buf=3*Ut.lit_bufsize,Ut.level=xt,Ut.strategy=Xt,Ut.method=Nt,nn(wt)}_=[new Ot(0,0,0,0,function(wt,xt){var Nt=65535;for(Nt>wt.pending_buf_size-5&&(Nt=wt.pending_buf_size-5);;){if(wt.lookahead<=1){if(Mt(wt),wt.lookahead===0&&xt===0)return 1;if(wt.lookahead===0)break}wt.strstart+=wt.lookahead,wt.lookahead=0;var Tt=wt.block_start+Nt;if((wt.strstart===0||wt.strstart>=Tt)&&(wt.lookahead=wt.strstart-Tt,wt.strstart=Tt,ft(wt,!1),wt.strm.avail_out===0)||wt.strstart-wt.block_start>=wt.w_size-262&&(ft(wt,!1),wt.strm.avail_out===0))return 1}return wt.insert=0,xt===4?(ft(wt,!0),wt.strm.avail_out===0?3:4):(wt.strstart>wt.block_start&&(ft(wt,!1),wt.strm.avail_out),1)}),new Ot(4,4,8,4,Ft),new Ot(4,5,16,8,Ft),new Ot(4,6,32,32,Ft),new Ot(4,4,16,16,Rt),new Ot(8,16,32,32,Rt),new Ot(8,16,128,128,Rt),new Ot(8,32,128,256,Rt),new Ot(32,128,258,1024,Rt),new Ot(32,258,258,4096,Rt)],o.deflateInit=function(wt,xt){return on(wt,xt,8,15,8,0)},o.deflateInit2=on,o.deflateReset=nn,o.deflateResetKeep=Lt,o.deflateSetHeader=function(wt,xt){return wt&&wt.state?wt.state.wrap!==2?-2:(wt.state.gzhead=xt,0):-2},o.deflate=function(wt,xt){var Nt,Tt,Vt,Xt;if(!wt||!wt.state||xt>5||xt<0)return wt?st(wt,-2):-2;if(Tt=wt.state,!wt.output||!wt.input&&wt.avail_in!==0||Tt.status===666&&xt!==4)return st(wt,wt.avail_out===0?-5:-2);if(Tt.strm=wt,Nt=Tt.last_flush,Tt.last_flush=xt,Tt.status===42)if(Tt.wrap===2)wt.adler=0,ut(Tt,31),ut(Tt,139),ut(Tt,8),Tt.gzhead?(ut(Tt,(Tt.gzhead.text?1:0)+(Tt.gzhead.hcrc?2:0)+(Tt.gzhead.extra?4:0)+(Tt.gzhead.name?8:0)+(Tt.gzhead.comment?16:0)),ut(Tt,255&Tt.gzhead.time),ut(Tt,Tt.gzhead.time>>8&255),ut(Tt,Tt.gzhead.time>>16&255),ut(Tt,Tt.gzhead.time>>24&255),ut(Tt,Tt.level===9?2:Tt.strategy>=2||Tt.level<2?4:0),ut(Tt,255&Tt.gzhead.os),Tt.gzhead.extra&&Tt.gzhead.extra.length&&(ut(Tt,255&Tt.gzhead.extra.length),ut(Tt,Tt.gzhead.extra.length>>8&255)),Tt.gzhead.hcrc&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending,0)),Tt.gzindex=0,Tt.status=69):(ut(Tt,0),ut(Tt,0),ut(Tt,0),ut(Tt,0),ut(Tt,0),ut(Tt,Tt.level===9?2:Tt.strategy>=2||Tt.level<2?4:0),ut(Tt,3),Tt.status=113);else{var Gt=8+(Tt.w_bits-8<<4)<<8;Gt|=(Tt.strategy>=2||Tt.level<2?0:Tt.level<6?1:Tt.level===6?2:3)<<6,Tt.strstart!==0&&(Gt|=32),Gt+=31-Gt%31,Tt.status=113,yt(Tt,Gt),Tt.strstart!==0&&(yt(Tt,wt.adler>>>16),yt(Tt,65535&wt.adler)),wt.adler=1}if(Tt.status===69)if(Tt.gzhead.extra){for(Vt=Tt.pending;Tt.gzindex<(65535&Tt.gzhead.extra.length)&&(Tt.pending!==Tt.pending_buf_size||(Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),gt(wt),Vt=Tt.pending,Tt.pending!==Tt.pending_buf_size));)ut(Tt,255&Tt.gzhead.extra[Tt.gzindex]),Tt.gzindex++;Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),Tt.gzindex===Tt.gzhead.extra.length&&(Tt.gzindex=0,Tt.status=73)}else Tt.status=73;if(Tt.status===73)if(Tt.gzhead.name){Vt=Tt.pending;do{if(Tt.pending===Tt.pending_buf_size&&(Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),gt(wt),Vt=Tt.pending,Tt.pending===Tt.pending_buf_size)){Xt=1;break}Xt=Tt.gzindex<Tt.gzhead.name.length?255&Tt.gzhead.name.charCodeAt(Tt.gzindex++):0,ut(Tt,Xt)}while(Xt!==0);Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),Xt===0&&(Tt.gzindex=0,Tt.status=91)}else Tt.status=91;if(Tt.status===91)if(Tt.gzhead.comment){Vt=Tt.pending;do{if(Tt.pending===Tt.pending_buf_size&&(Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),gt(wt),Vt=Tt.pending,Tt.pending===Tt.pending_buf_size)){Xt=1;break}Xt=Tt.gzindex<Tt.gzhead.comment.length?255&Tt.gzhead.comment.charCodeAt(Tt.gzindex++):0,ut(Tt,Xt)}while(Xt!==0);Tt.gzhead.hcrc&&Tt.pending>Vt&&(wt.adler=j(wt.adler,Tt.pending_buf,Tt.pending-Vt,Vt)),Xt===0&&(Tt.status=103)}else Tt.status=103;if(Tt.status===103&&(Tt.gzhead.hcrc?(Tt.pending+2>Tt.pending_buf_size&&gt(wt),Tt.pending+2<=Tt.pending_buf_size&&(ut(Tt,255&wt.adler),ut(Tt,wt.adler>>8&255),wt.adler=0,Tt.status=113)):Tt.status=113),Tt.pending!==0){if(gt(wt),wt.avail_out===0)return Tt.last_flush=-1,0}else if(wt.avail_in===0&&ht(xt)<=ht(Nt)&&xt!==4)return st(wt,-5);if(Tt.status===666&&wt.avail_in!==0)return st(wt,-5);if(wt.avail_in!==0||Tt.lookahead!==0||xt!==0&&Tt.status!==666){var Ut=Tt.strategy===2?function(Ht,qt){for(var Pt;;){if(Ht.lookahead===0&&(Mt(Ht),Ht.lookahead===0)){if(qt===0)return 1;break}if(Ht.match_length=0,Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++,Pt&&(ft(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(ft(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(ft(Ht,!1),Ht.strm.avail_out===0)?1:2}(Tt,xt):Tt.strategy===3?function(Ht,qt){for(var Pt,St,Zt,tn,mn=Ht.window;;){if(Ht.lookahead<=258){if(Mt(Ht),Ht.lookahead<=258&&qt===0)return 1;if(Ht.lookahead===0)break}if(Ht.match_length=0,Ht.lookahead>=3&&Ht.strstart>0&&(St=mn[Zt=Ht.strstart-1])===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]){tn=Ht.strstart+258;do;while(St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&St===mn[++Zt]&&Zt<tn);Ht.match_length=258-(tn-Zt),Ht.match_length>Ht.lookahead&&(Ht.match_length=Ht.lookahead)}if(Ht.match_length>=3?(Pt=et._tr_tally(Ht,1,Ht.match_length-3),Ht.lookahead-=Ht.match_length,Ht.strstart+=Ht.match_length,Ht.match_length=0):(Pt=et._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++),Pt&&(ft(Ht,!1),Ht.strm.avail_out===0))return 1}return Ht.insert=0,qt===4?(ft(Ht,!0),Ht.strm.avail_out===0?3:4):Ht.last_lit&&(ft(Ht,!1),Ht.strm.avail_out===0)?1:2}(Tt,xt):_[Tt.level].func(Tt,xt);if(Ut!==3&&Ut!==4||(Tt.status=666),Ut===1||Ut===3)return wt.avail_out===0&&(Tt.last_flush=-1),0;if(Ut===2&&(xt===1?et._tr_align(Tt):xt!==5&&(et._tr_stored_block(Tt,0,0,!1),xt===3&&(_t(Tt.head),Tt.lookahead===0&&(Tt.strstart=0,Tt.block_start=0,Tt.insert=0))),gt(wt),wt.avail_out===0))return Tt.last_flush=-1,0}return xt!==4?0:Tt.wrap<=0?1:(Tt.wrap===2?(ut(Tt,255&wt.adler),ut(Tt,wt.adler>>8&255),ut(Tt,wt.adler>>16&255),ut(Tt,wt.adler>>24&255),ut(Tt,255&wt.total_in),ut(Tt,wt.total_in>>8&255),ut(Tt,wt.total_in>>16&255),ut(Tt,wt.total_in>>24&255)):(yt(Tt,wt.adler>>>16),yt(Tt,65535&wt.adler)),gt(wt),Tt.wrap>0&&(Tt.wrap=-Tt.wrap),Tt.pending!==0?0:1)},o.deflateEnd=function(wt){var xt;return wt&&wt.state?(xt=wt.state.status)!==42&&xt!==69&&xt!==73&&xt!==91&&xt!==103&&xt!==113&&xt!==666?st(wt,-2):(wt.state=null,xt===113?st(wt,-3):0):-2},o.deflateSetDictionary=function(wt,xt){var Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt=xt.length;if(!wt||!wt.state||(Xt=(Nt=wt.state).wrap)===2||Xt===1&&Nt.status!==42||Nt.lookahead)return-2;for(Xt===1&&(wt.adler=tt(wt.adler,xt,Pt,0)),Nt.wrap=0,Pt>=Nt.w_size&&(Xt===0&&(_t(Nt.head),Nt.strstart=0,Nt.block_start=0,Nt.insert=0),qt=new $.Buf8(Nt.w_size),$.arraySet(qt,xt,Pt-Nt.w_size,Nt.w_size,0),xt=qt,Pt=Nt.w_size),Gt=wt.avail_in,Ut=wt.next_in,Ht=wt.input,wt.avail_in=Pt,wt.next_in=0,wt.input=xt,Mt(Nt);Nt.lookahead>=3;){Tt=Nt.strstart,Vt=Nt.lookahead-2;do Nt.ins_h=(Nt.ins_h<<Nt.hash_shift^Nt.window[Tt+3-1])&Nt.hash_mask,Nt.prev[Tt&Nt.w_mask]=Nt.head[Nt.ins_h],Nt.head[Nt.ins_h]=Tt,Tt++;while(--Vt);Nt.strstart=Tt,Nt.lookahead=2,Mt(Nt)}return Nt.strstart+=Nt.lookahead,Nt.block_start=Nt.strstart,Nt.insert=Nt.lookahead,Nt.lookahead=0,Nt.match_length=Nt.prev_length=2,Nt.match_available=0,wt.next_in=Ut,wt.input=Ht,wt.avail_in=Gt,Nt.wrap=Xt,0},o.deflateInfo="pako deflate (from Nodeca project)"},function(i,o,s){var _=s(37);function $(St){for(var Zt=St.length;--Zt>=0;)St[Zt]=0}var et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=new Array(576);$(st);var ht=new Array(60);$(ht);var _t=new Array(512);$(_t);var gt=new Array(256);$(gt);var ft=new Array(29);$(ft);var ut,yt,Et,Mt=new Array(30);function Ft(St,Zt,tn,mn,yn){this.static_tree=St,this.extra_bits=Zt,this.extra_base=tn,this.elems=mn,this.max_length=yn,this.has_stree=St&&St.length}function Rt(St,Zt){this.dyn_tree=St,this.max_code=0,this.stat_desc=Zt}function Ot(St){return St<256?_t[St]:_t[256+(St>>>7)]}function pt(St,Zt){St.pending_buf[St.pending++]=255&Zt,St.pending_buf[St.pending++]=Zt>>>8&255}function Lt(St,Zt,tn){St.bi_valid>16-tn?(St.bi_buf|=Zt<<St.bi_valid&65535,pt(St,St.bi_buf),St.bi_buf=Zt>>16-St.bi_valid,St.bi_valid+=tn-16):(St.bi_buf|=Zt<<St.bi_valid&65535,St.bi_valid+=tn)}function nn(St,Zt,tn){Lt(St,tn[2*Zt],tn[2*Zt+1])}function on(St,Zt){var tn=0;do tn|=1&St,St>>>=1,tn<<=1;while(--Zt>0);return tn>>>1}function wt(St,Zt,tn){var mn,yn,vn=new Array(16),un=0;for(mn=1;mn<=15;mn++)vn[mn]=un=un+tn[mn-1]<<1;for(yn=0;yn<=Zt;yn++){var rn=St[2*yn+1];rn!==0&&(St[2*yn]=on(vn[rn]++,rn))}}function xt(St){var Zt;for(Zt=0;Zt<286;Zt++)St.dyn_ltree[2*Zt]=0;for(Zt=0;Zt<30;Zt++)St.dyn_dtree[2*Zt]=0;for(Zt=0;Zt<19;Zt++)St.bl_tree[2*Zt]=0;St.dyn_ltree[512]=1,St.opt_len=St.static_len=0,St.last_lit=St.matches=0}function Nt(St){St.bi_valid>8?pt(St,St.bi_buf):St.bi_valid>0&&(St.pending_buf[St.pending++]=St.bi_buf),St.bi_buf=0,St.bi_valid=0}function Tt(St,Zt,tn,mn){var yn=2*Zt,vn=2*tn;return St[yn]<St[vn]||St[yn]===St[vn]&&mn[Zt]<=mn[tn]}function Vt(St,Zt,tn){for(var mn=St.heap[tn],yn=tn<<1;yn<=St.heap_len&&(yn<St.heap_len&&Tt(Zt,St.heap[yn+1],St.heap[yn],St.depth)&&yn++,!Tt(Zt,mn,St.heap[yn],St.depth));)St.heap[tn]=St.heap[yn],tn=yn,yn<<=1;St.heap[tn]=mn}function Xt(St,Zt,tn){var mn,yn,vn,un,rn=0;if(St.last_lit!==0)do mn=St.pending_buf[St.d_buf+2*rn]<<8|St.pending_buf[St.d_buf+2*rn+1],yn=St.pending_buf[St.l_buf+rn],rn++,mn===0?nn(St,yn,Zt):(nn(St,(vn=gt[yn])+256+1,Zt),(un=et[vn])!==0&&Lt(St,yn-=ft[vn],un),nn(St,vn=Ot(--mn),tn),(un=tt[vn])!==0&&Lt(St,mn-=Mt[vn],un));while(rn<St.last_lit);nn(St,256,Zt)}function Gt(St,Zt){var tn,mn,yn,vn=Zt.dyn_tree,un=Zt.stat_desc.static_tree,rn=Zt.stat_desc.has_stree,It=Zt.stat_desc.elems,Dt=-1;for(St.heap_len=0,St.heap_max=573,tn=0;tn<It;tn++)vn[2*tn]!==0?(St.heap[++St.heap_len]=Dt=tn,St.depth[tn]=0):vn[2*tn+1]=0;for(;St.heap_len<2;)vn[2*(yn=St.heap[++St.heap_len]=Dt<2?++Dt:0)]=1,St.depth[yn]=0,St.opt_len--,rn&&(St.static_len-=un[2*yn+1]);for(Zt.max_code=Dt,tn=St.heap_len>>1;tn>=1;tn--)Vt(St,vn,tn);yn=It;do tn=St.heap[1],St.heap[1]=St.heap[St.heap_len--],Vt(St,vn,1),mn=St.heap[1],St.heap[--St.heap_max]=tn,St.heap[--St.heap_max]=mn,vn[2*yn]=vn[2*tn]+vn[2*mn],St.depth[yn]=(St.depth[tn]>=St.depth[mn]?St.depth[tn]:St.depth[mn])+1,vn[2*tn+1]=vn[2*mn+1]=yn,St.heap[1]=yn++,Vt(St,vn,1);while(St.heap_len>=2);St.heap[--St.heap_max]=St.heap[1],function(Kt,gn){var hn,xn,Mn,qn,Ir,_i,Ur=gn.dyn_tree,fo=gn.max_code,Gr=gn.stat_desc.static_tree,Yr=gn.stat_desc.has_stree,to=gn.stat_desc.extra_bits,Ro=gn.stat_desc.extra_base,Mo=gn.stat_desc.max_length,Vo=0;for(qn=0;qn<=15;qn++)Kt.bl_count[qn]=0;for(Ur[2*Kt.heap[Kt.heap_max]+1]=0,hn=Kt.heap_max+1;hn<573;hn++)(qn=Ur[2*Ur[2*(xn=Kt.heap[hn])+1]+1]+1)>Mo&&(qn=Mo,Vo++),Ur[2*xn+1]=qn,xn>fo||(Kt.bl_count[qn]++,Ir=0,xn>=Ro&&(Ir=to[xn-Ro]),_i=Ur[2*xn],Kt.opt_len+=_i*(qn+Ir),Yr&&(Kt.static_len+=_i*(Gr[2*xn+1]+Ir)));if(Vo!==0){do{for(qn=Mo-1;Kt.bl_count[qn]===0;)qn--;Kt.bl_count[qn]--,Kt.bl_count[qn+1]+=2,Kt.bl_count[Mo]--,Vo-=2}while(Vo>0);for(qn=Mo;qn!==0;qn--)for(xn=Kt.bl_count[qn];xn!==0;)(Mn=Kt.heap[--hn])>fo||(Ur[2*Mn+1]!==qn&&(Kt.opt_len+=(qn-Ur[2*Mn+1])*Ur[2*Mn],Ur[2*Mn+1]=qn),xn--)}}(St,Zt),wt(vn,Dt,St.bl_count)}function Ut(St,Zt,tn){var mn,yn,vn=-1,un=Zt[1],rn=0,It=7,Dt=4;for(un===0&&(It=138,Dt=3),Zt[2*(tn+1)+1]=65535,mn=0;mn<=tn;mn++)yn=un,un=Zt[2*(mn+1)+1],++rn<It&&yn===un||(rn<Dt?St.bl_tree[2*yn]+=rn:yn!==0?(yn!==vn&&St.bl_tree[2*yn]++,St.bl_tree[32]++):rn<=10?St.bl_tree[34]++:St.bl_tree[36]++,rn=0,vn=yn,un===0?(It=138,Dt=3):yn===un?(It=6,Dt=3):(It=7,Dt=4))}function Ht(St,Zt,tn){var mn,yn,vn=-1,un=Zt[1],rn=0,It=7,Dt=4;for(un===0&&(It=138,Dt=3),mn=0;mn<=tn;mn++)if(yn=un,un=Zt[2*(mn+1)+1],!(++rn<It&&yn===un)){if(rn<Dt)do nn(St,yn,St.bl_tree);while(--rn!=0);else yn!==0?(yn!==vn&&(nn(St,yn,St.bl_tree),rn--),nn(St,16,St.bl_tree),Lt(St,rn-3,2)):rn<=10?(nn(St,17,St.bl_tree),Lt(St,rn-3,3)):(nn(St,18,St.bl_tree),Lt(St,rn-11,7));rn=0,vn=yn,un===0?(It=138,Dt=3):yn===un?(It=6,Dt=3):(It=7,Dt=4)}}$(Mt);var qt=!1;function Pt(St,Zt,tn,mn){Lt(St,0+(mn?1:0),3),function(yn,vn,un,rn){Nt(yn),rn&&(pt(yn,un),pt(yn,~un)),_.arraySet(yn.pending_buf,yn.window,vn,un,yn.pending),yn.pending+=un}(St,Zt,tn,!0)}o._tr_init=function(St){qt||(function(){var Zt,tn,mn,yn,vn,un=new Array(16);for(mn=0,yn=0;yn<28;yn++)for(ft[yn]=mn,Zt=0;Zt<1<<et[yn];Zt++)gt[mn++]=yn;for(gt[mn-1]=yn,vn=0,yn=0;yn<16;yn++)for(Mt[yn]=vn,Zt=0;Zt<1<<tt[yn];Zt++)_t[vn++]=yn;for(vn>>=7;yn<30;yn++)for(Mt[yn]=vn<<7,Zt=0;Zt<1<<tt[yn]-7;Zt++)_t[256+vn++]=yn;for(tn=0;tn<=15;tn++)un[tn]=0;for(Zt=0;Zt<=143;)st[2*Zt+1]=8,Zt++,un[8]++;for(;Zt<=255;)st[2*Zt+1]=9,Zt++,un[9]++;for(;Zt<=279;)st[2*Zt+1]=7,Zt++,un[7]++;for(;Zt<=287;)st[2*Zt+1]=8,Zt++,un[8]++;for(wt(st,287,un),Zt=0;Zt<30;Zt++)ht[2*Zt+1]=5,ht[2*Zt]=on(Zt,5);ut=new Ft(st,et,257,286,15),yt=new Ft(ht,tt,0,30,15),Et=new Ft(new Array(0),j,0,19,7)}(),qt=!0),St.l_desc=new Rt(St.dyn_ltree,ut),St.d_desc=new Rt(St.dyn_dtree,yt),St.bl_desc=new Rt(St.bl_tree,Et),St.bi_buf=0,St.bi_valid=0,xt(St)},o._tr_stored_block=Pt,o._tr_flush_block=function(St,Zt,tn,mn){var yn,vn,un=0;St.level>0?(St.strm.data_type===2&&(St.strm.data_type=function(rn){var It,Dt=4093624447;for(It=0;It<=31;It++,Dt>>>=1)if(1&Dt&&rn.dyn_ltree[2*It]!==0)return 0;if(rn.dyn_ltree[18]!==0||rn.dyn_ltree[20]!==0||rn.dyn_ltree[26]!==0)return 1;for(It=32;It<256;It++)if(rn.dyn_ltree[2*It]!==0)return 1;return 0}(St)),Gt(St,St.l_desc),Gt(St,St.d_desc),un=function(rn){var It;for(Ut(rn,rn.dyn_ltree,rn.l_desc.max_code),Ut(rn,rn.dyn_dtree,rn.d_desc.max_code),Gt(rn,rn.bl_desc),It=18;It>=3&&rn.bl_tree[2*it[It]+1]===0;It--);return rn.opt_len+=3*(It+1)+5+5+4,It}(St),yn=St.opt_len+3+7>>>3,(vn=St.static_len+3+7>>>3)<=yn&&(yn=vn)):yn=vn=tn+5,tn+4<=yn&&Zt!==-1?Pt(St,Zt,tn,mn):St.strategy===4||vn===yn?(Lt(St,2+(mn?1:0),3),Xt(St,st,ht)):(Lt(St,4+(mn?1:0),3),function(rn,It,Dt,Kt){var gn;for(Lt(rn,It-257,5),Lt(rn,Dt-1,5),Lt(rn,Kt-4,4),gn=0;gn<Kt;gn++)Lt(rn,rn.bl_tree[2*it[gn]+1],3);Ht(rn,rn.dyn_ltree,It-1),Ht(rn,rn.dyn_dtree,Dt-1)}(St,St.l_desc.max_code+1,St.d_desc.max_code+1,un+1),Xt(St,St.dyn_ltree,St.dyn_dtree)),xt(St),mn&&Nt(St)},o._tr_tally=function(St,Zt,tn){return St.pending_buf[St.d_buf+2*St.last_lit]=Zt>>>8&255,St.pending_buf[St.d_buf+2*St.last_lit+1]=255&Zt,St.pending_buf[St.l_buf+St.last_lit]=255&tn,St.last_lit++,Zt===0?St.dyn_ltree[2*tn]++:(St.matches++,Zt--,St.dyn_ltree[2*(gt[tn]+256+1)]++,St.dyn_dtree[2*Ot(Zt)]++),St.last_lit===St.lit_bufsize-1},o._tr_align=function(St){Lt(St,2,3),nn(St,256,st),function(Zt){Zt.bi_valid===16?(pt(Zt,Zt.bi_buf),Zt.bi_buf=0,Zt.bi_valid=0):Zt.bi_valid>=8&&(Zt.pending_buf[Zt.pending++]=255&Zt.bi_buf,Zt.bi_buf>>=8,Zt.bi_valid-=8)}(St)}},function(i,o,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(i,o,s){var _=s(37),$=s(75),et=s(76),tt=s(176),j=s(177);function it(Rt){return(Rt>>>24&255)+(Rt>>>8&65280)+((65280&Rt)<<8)+((255&Rt)<<24)}function st(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ht(Rt){var Ot;return Rt&&Rt.state?(Ot=Rt.state,Rt.total_in=Rt.total_out=Ot.total=0,Rt.msg="",Ot.wrap&&(Rt.adler=1&Ot.wrap),Ot.mode=1,Ot.last=0,Ot.havedict=0,Ot.dmax=32768,Ot.head=null,Ot.hold=0,Ot.bits=0,Ot.lencode=Ot.lendyn=new _.Buf32(852),Ot.distcode=Ot.distdyn=new _.Buf32(592),Ot.sane=1,Ot.back=-1,0):-2}function _t(Rt){var Ot;return Rt&&Rt.state?((Ot=Rt.state).wsize=0,Ot.whave=0,Ot.wnext=0,ht(Rt)):-2}function gt(Rt,Ot){var pt,Lt;return Rt&&Rt.state?(Lt=Rt.state,Ot<0?(pt=0,Ot=-Ot):(pt=1+(Ot>>4),Ot<48&&(Ot&=15)),Ot&&(Ot<8||Ot>15)?-2:(Lt.window!==null&&Lt.wbits!==Ot&&(Lt.window=null),Lt.wrap=pt,Lt.wbits=Ot,_t(Rt))):-2}function ft(Rt,Ot){var pt,Lt;return Rt?(Lt=new st,Rt.state=Lt,Lt.window=null,(pt=gt(Rt,Ot))!==0&&(Rt.state=null),pt):-2}var ut,yt,Et=!0;function Mt(Rt){if(Et){var Ot;for(ut=new _.Buf32(512),yt=new _.Buf32(32),Ot=0;Ot<144;)Rt.lens[Ot++]=8;for(;Ot<256;)Rt.lens[Ot++]=9;for(;Ot<280;)Rt.lens[Ot++]=7;for(;Ot<288;)Rt.lens[Ot++]=8;for(j(1,Rt.lens,0,288,ut,0,Rt.work,{bits:9}),Ot=0;Ot<32;)Rt.lens[Ot++]=5;j(2,Rt.lens,0,32,yt,0,Rt.work,{bits:5}),Et=!1}Rt.lencode=ut,Rt.lenbits=9,Rt.distcode=yt,Rt.distbits=5}function Ft(Rt,Ot,pt,Lt){var nn,on=Rt.state;return on.window===null&&(on.wsize=1<<on.wbits,on.wnext=0,on.whave=0,on.window=new _.Buf8(on.wsize)),Lt>=on.wsize?(_.arraySet(on.window,Ot,pt-on.wsize,on.wsize,0),on.wnext=0,on.whave=on.wsize):((nn=on.wsize-on.wnext)>Lt&&(nn=Lt),_.arraySet(on.window,Ot,pt-Lt,nn,on.wnext),(Lt-=nn)?(_.arraySet(on.window,Ot,pt-Lt,Lt,0),on.wnext=Lt,on.whave=on.wsize):(on.wnext+=nn,on.wnext===on.wsize&&(on.wnext=0),on.whave<on.wsize&&(on.whave+=nn))),0}o.inflateReset=_t,o.inflateReset2=gt,o.inflateResetKeep=ht,o.inflateInit=function(Rt){return ft(Rt,15)},o.inflateInit2=ft,o.inflate=function(Rt,Ot){var pt,Lt,nn,on,wt,xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St,Zt,tn,mn,yn,vn,un,rn,It,Dt=0,Kt=new _.Buf8(4),gn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Rt||!Rt.state||!Rt.output||!Rt.input&&Rt.avail_in!==0)return-2;(pt=Rt.state).mode===12&&(pt.mode=13),wt=Rt.next_out,nn=Rt.output,Nt=Rt.avail_out,on=Rt.next_in,Lt=Rt.input,xt=Rt.avail_in,Tt=pt.hold,Vt=pt.bits,Xt=xt,Gt=Nt,un=0;e:for(;;)switch(pt.mode){case 1:if(pt.wrap===0){pt.mode=13;break}for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(2&pt.wrap&&Tt===35615){pt.check=0,Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0),Tt=0,Vt=0,pt.mode=2;break}if(pt.flags=0,pt.head&&(pt.head.done=!1),!(1&pt.wrap)||(((255&Tt)<<8)+(Tt>>8))%31){Rt.msg="incorrect header check",pt.mode=30;break}if((15&Tt)!=8){Rt.msg="unknown compression method",pt.mode=30;break}if(Vt-=4,vn=8+(15&(Tt>>>=4)),pt.wbits===0)pt.wbits=vn;else if(vn>pt.wbits){Rt.msg="invalid window size",pt.mode=30;break}pt.dmax=1<<vn,Rt.adler=pt.check=1,pt.mode=512&Tt?10:12,Tt=0,Vt=0;break;case 2:for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(pt.flags=Tt,(255&pt.flags)!=8){Rt.msg="unknown compression method",pt.mode=30;break}if(57344&pt.flags){Rt.msg="unknown header flags set",pt.mode=30;break}pt.head&&(pt.head.text=Tt>>8&1),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0)),Tt=0,Vt=0,pt.mode=3;case 3:for(;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.head&&(pt.head.time=Tt),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,Kt[2]=Tt>>>16&255,Kt[3]=Tt>>>24&255,pt.check=et(pt.check,Kt,4,0)),Tt=0,Vt=0,pt.mode=4;case 4:for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.head&&(pt.head.xflags=255&Tt,pt.head.os=Tt>>8),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0)),Tt=0,Vt=0,pt.mode=5;case 5:if(1024&pt.flags){for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.length=Tt,pt.head&&(pt.head.extra_len=Tt),512&pt.flags&&(Kt[0]=255&Tt,Kt[1]=Tt>>>8&255,pt.check=et(pt.check,Kt,2,0)),Tt=0,Vt=0}else pt.head&&(pt.head.extra=null);pt.mode=6;case 6:if(1024&pt.flags&&((Ut=pt.length)>xt&&(Ut=xt),Ut&&(pt.head&&(vn=pt.head.extra_len-pt.length,pt.head.extra||(pt.head.extra=new Array(pt.head.extra_len)),_.arraySet(pt.head.extra,Lt,on,Ut,vn)),512&pt.flags&&(pt.check=et(pt.check,Lt,Ut,on)),xt-=Ut,on+=Ut,pt.length-=Ut),pt.length))break e;pt.length=0,pt.mode=7;case 7:if(2048&pt.flags){if(xt===0)break e;Ut=0;do vn=Lt[on+Ut++],pt.head&&vn&&pt.length<65536&&(pt.head.name+=String.fromCharCode(vn));while(vn&&Ut<xt);if(512&pt.flags&&(pt.check=et(pt.check,Lt,Ut,on)),xt-=Ut,on+=Ut,vn)break e}else pt.head&&(pt.head.name=null);pt.length=0,pt.mode=8;case 8:if(4096&pt.flags){if(xt===0)break e;Ut=0;do vn=Lt[on+Ut++],pt.head&&vn&&pt.length<65536&&(pt.head.comment+=String.fromCharCode(vn));while(vn&&Ut<xt);if(512&pt.flags&&(pt.check=et(pt.check,Lt,Ut,on)),xt-=Ut,on+=Ut,vn)break e}else pt.head&&(pt.head.comment=null);pt.mode=9;case 9:if(512&pt.flags){for(;Vt<16;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Tt!==(65535&pt.check)){Rt.msg="header crc mismatch",pt.mode=30;break}Tt=0,Vt=0}pt.head&&(pt.head.hcrc=pt.flags>>9&1,pt.head.done=!0),Rt.adler=pt.check=0,pt.mode=12;break;case 10:for(;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Rt.adler=pt.check=it(Tt),Tt=0,Vt=0,pt.mode=11;case 11:if(pt.havedict===0)return Rt.next_out=wt,Rt.avail_out=Nt,Rt.next_in=on,Rt.avail_in=xt,pt.hold=Tt,pt.bits=Vt,2;Rt.adler=pt.check=1,pt.mode=12;case 12:if(Ot===5||Ot===6)break e;case 13:if(pt.last){Tt>>>=7&Vt,Vt-=7&Vt,pt.mode=27;break}for(;Vt<3;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}switch(pt.last=1&Tt,Vt-=1,3&(Tt>>>=1)){case 0:pt.mode=14;break;case 1:if(Mt(pt),pt.mode=20,Ot===6){Tt>>>=2,Vt-=2;break e}break;case 2:pt.mode=17;break;case 3:Rt.msg="invalid block type",pt.mode=30}Tt>>>=2,Vt-=2;break;case 14:for(Tt>>>=7&Vt,Vt-=7&Vt;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if((65535&Tt)!=(Tt>>>16^65535)){Rt.msg="invalid stored block lengths",pt.mode=30;break}if(pt.length=65535&Tt,Tt=0,Vt=0,pt.mode=15,Ot===6)break e;case 15:pt.mode=16;case 16:if(Ut=pt.length){if(Ut>xt&&(Ut=xt),Ut>Nt&&(Ut=Nt),Ut===0)break e;_.arraySet(nn,Lt,on,Ut,wt),xt-=Ut,on+=Ut,Nt-=Ut,wt+=Ut,pt.length-=Ut;break}pt.mode=12;break;case 17:for(;Vt<14;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(pt.nlen=257+(31&Tt),Tt>>>=5,Vt-=5,pt.ndist=1+(31&Tt),Tt>>>=5,Vt-=5,pt.ncode=4+(15&Tt),Tt>>>=4,Vt-=4,pt.nlen>286||pt.ndist>30){Rt.msg="too many length or distance symbols",pt.mode=30;break}pt.have=0,pt.mode=18;case 18:for(;pt.have<pt.ncode;){for(;Vt<3;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.lens[gn[pt.have++]]=7&Tt,Tt>>>=3,Vt-=3}for(;pt.have<19;)pt.lens[gn[pt.have++]]=0;if(pt.lencode=pt.lendyn,pt.lenbits=7,rn={bits:pt.lenbits},un=j(0,pt.lens,0,19,pt.lencode,0,pt.work,rn),pt.lenbits=rn.bits,un){Rt.msg="invalid code lengths set",pt.mode=30;break}pt.have=0,pt.mode=19;case 19:for(;pt.have<pt.nlen+pt.ndist;){for(;St=(Dt=pt.lencode[Tt&(1<<pt.lenbits)-1])>>>16&255,Zt=65535&Dt,!((Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Zt<16)Tt>>>=Pt,Vt-=Pt,pt.lens[pt.have++]=Zt;else{if(Zt===16){for(It=Pt+2;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Tt>>>=Pt,Vt-=Pt,pt.have===0){Rt.msg="invalid bit length repeat",pt.mode=30;break}vn=pt.lens[pt.have-1],Ut=3+(3&Tt),Tt>>>=2,Vt-=2}else if(Zt===17){for(It=Pt+3;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Vt-=Pt,vn=0,Ut=3+(7&(Tt>>>=Pt)),Tt>>>=3,Vt-=3}else{for(It=Pt+7;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Vt-=Pt,vn=0,Ut=11+(127&(Tt>>>=Pt)),Tt>>>=7,Vt-=7}if(pt.have+Ut>pt.nlen+pt.ndist){Rt.msg="invalid bit length repeat",pt.mode=30;break}for(;Ut--;)pt.lens[pt.have++]=vn}}if(pt.mode===30)break;if(pt.lens[256]===0){Rt.msg="invalid code -- missing end-of-block",pt.mode=30;break}if(pt.lenbits=9,rn={bits:pt.lenbits},un=j(1,pt.lens,0,pt.nlen,pt.lencode,0,pt.work,rn),pt.lenbits=rn.bits,un){Rt.msg="invalid literal/lengths set",pt.mode=30;break}if(pt.distbits=6,pt.distcode=pt.distdyn,rn={bits:pt.distbits},un=j(2,pt.lens,pt.nlen,pt.ndist,pt.distcode,0,pt.work,rn),pt.distbits=rn.bits,un){Rt.msg="invalid distances set",pt.mode=30;break}if(pt.mode=20,Ot===6)break e;case 20:pt.mode=21;case 21:if(xt>=6&&Nt>=258){Rt.next_out=wt,Rt.avail_out=Nt,Rt.next_in=on,Rt.avail_in=xt,pt.hold=Tt,pt.bits=Vt,tt(Rt,Gt),wt=Rt.next_out,nn=Rt.output,Nt=Rt.avail_out,on=Rt.next_in,Lt=Rt.input,xt=Rt.avail_in,Tt=pt.hold,Vt=pt.bits,pt.mode===12&&(pt.back=-1);break}for(pt.back=0;St=(Dt=pt.lencode[Tt&(1<<pt.lenbits)-1])>>>16&255,Zt=65535&Dt,!((Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(St&&!(240&St)){for(tn=Pt,mn=St,yn=Zt;St=(Dt=pt.lencode[yn+((Tt&(1<<tn+mn)-1)>>tn)])>>>16&255,Zt=65535&Dt,!(tn+(Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Tt>>>=tn,Vt-=tn,pt.back+=tn}if(Tt>>>=Pt,Vt-=Pt,pt.back+=Pt,pt.length=Zt,St===0){pt.mode=26;break}if(32&St){pt.back=-1,pt.mode=12;break}if(64&St){Rt.msg="invalid literal/length code",pt.mode=30;break}pt.extra=15&St,pt.mode=22;case 22:if(pt.extra){for(It=pt.extra;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.length+=Tt&(1<<pt.extra)-1,Tt>>>=pt.extra,Vt-=pt.extra,pt.back+=pt.extra}pt.was=pt.length,pt.mode=23;case 23:for(;St=(Dt=pt.distcode[Tt&(1<<pt.distbits)-1])>>>16&255,Zt=65535&Dt,!((Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(!(240&St)){for(tn=Pt,mn=St,yn=Zt;St=(Dt=pt.distcode[yn+((Tt&(1<<tn+mn)-1)>>tn)])>>>16&255,Zt=65535&Dt,!(tn+(Pt=Dt>>>24)<=Vt);){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}Tt>>>=tn,Vt-=tn,pt.back+=tn}if(Tt>>>=Pt,Vt-=Pt,pt.back+=Pt,64&St){Rt.msg="invalid distance code",pt.mode=30;break}pt.offset=Zt,pt.extra=15&St,pt.mode=24;case 24:if(pt.extra){for(It=pt.extra;Vt<It;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}pt.offset+=Tt&(1<<pt.extra)-1,Tt>>>=pt.extra,Vt-=pt.extra,pt.back+=pt.extra}if(pt.offset>pt.dmax){Rt.msg="invalid distance too far back",pt.mode=30;break}pt.mode=25;case 25:if(Nt===0)break e;if(Ut=Gt-Nt,pt.offset>Ut){if((Ut=pt.offset-Ut)>pt.whave&&pt.sane){Rt.msg="invalid distance too far back",pt.mode=30;break}Ut>pt.wnext?(Ut-=pt.wnext,Ht=pt.wsize-Ut):Ht=pt.wnext-Ut,Ut>pt.length&&(Ut=pt.length),qt=pt.window}else qt=nn,Ht=wt-pt.offset,Ut=pt.length;Ut>Nt&&(Ut=Nt),Nt-=Ut,pt.length-=Ut;do nn[wt++]=qt[Ht++];while(--Ut);pt.length===0&&(pt.mode=21);break;case 26:if(Nt===0)break e;nn[wt++]=pt.length,Nt--,pt.mode=21;break;case 27:if(pt.wrap){for(;Vt<32;){if(xt===0)break e;xt--,Tt|=Lt[on++]<<Vt,Vt+=8}if(Gt-=Nt,Rt.total_out+=Gt,pt.total+=Gt,Gt&&(Rt.adler=pt.check=pt.flags?et(pt.check,nn,Gt,wt-Gt):$(pt.check,nn,Gt,wt-Gt)),Gt=Nt,(pt.flags?Tt:it(Tt))!==pt.check){Rt.msg="incorrect data check",pt.mode=30;break}Tt=0,Vt=0}pt.mode=28;case 28:if(pt.wrap&&pt.flags){for(;Vt<32;){if(xt===0)break e;xt--,Tt+=Lt[on++]<<Vt,Vt+=8}if(Tt!==(4294967295&pt.total)){Rt.msg="incorrect length check",pt.mode=30;break}Tt=0,Vt=0}pt.mode=29;case 29:un=1;break e;case 30:un=-3;break e;case 31:return-4;case 32:default:return-2}return Rt.next_out=wt,Rt.avail_out=Nt,Rt.next_in=on,Rt.avail_in=xt,pt.hold=Tt,pt.bits=Vt,(pt.wsize||Gt!==Rt.avail_out&&pt.mode<30&&(pt.mode<27||Ot!==4))&&Ft(Rt,Rt.output,Rt.next_out,Gt-Rt.avail_out)?(pt.mode=31,-4):(Xt-=Rt.avail_in,Gt-=Rt.avail_out,Rt.total_in+=Xt,Rt.total_out+=Gt,pt.total+=Gt,pt.wrap&&Gt&&(Rt.adler=pt.check=pt.flags?et(pt.check,nn,Gt,Rt.next_out-Gt):$(pt.check,nn,Gt,Rt.next_out-Gt)),Rt.data_type=pt.bits+(pt.last?64:0)+(pt.mode===12?128:0)+(pt.mode===20||pt.mode===15?256:0),(Xt===0&&Gt===0||Ot===4)&&un===0&&(un=-5),un)},o.inflateEnd=function(Rt){if(!Rt||!Rt.state)return-2;var Ot=Rt.state;return Ot.window&&(Ot.window=null),Rt.state=null,0},o.inflateGetHeader=function(Rt,Ot){var pt;return Rt&&Rt.state&&2&(pt=Rt.state).wrap?(pt.head=Ot,Ot.done=!1,0):-2},o.inflateSetDictionary=function(Rt,Ot){var pt,Lt=Ot.length;return Rt&&Rt.state?(pt=Rt.state).wrap!==0&&pt.mode!==11?-2:pt.mode===11&&$(1,Ot,Lt,0)!==pt.check?-3:Ft(Rt,Ot,Lt,Lt)?(pt.mode=31,-4):(pt.havedict=1,0):-2},o.inflateInfo="pako inflate (from Nodeca project)"},function(i,o,s){i.exports=function(_,$){var et,tt,j,it,st,ht,_t,gt,ft,ut,yt,Et,Mt,Ft,Rt,Ot,pt,Lt,nn,on,wt,xt,Nt,Tt,Vt;et=_.state,tt=_.next_in,Tt=_.input,j=tt+(_.avail_in-5),it=_.next_out,Vt=_.output,st=it-($-_.avail_out),ht=it+(_.avail_out-257),_t=et.dmax,gt=et.wsize,ft=et.whave,ut=et.wnext,yt=et.window,Et=et.hold,Mt=et.bits,Ft=et.lencode,Rt=et.distcode,Ot=(1<<et.lenbits)-1,pt=(1<<et.distbits)-1;e:do{Mt<15&&(Et+=Tt[tt++]<<Mt,Mt+=8,Et+=Tt[tt++]<<Mt,Mt+=8),Lt=Ft[Et&Ot];t:for(;;){if(Et>>>=nn=Lt>>>24,Mt-=nn,(nn=Lt>>>16&255)===0)Vt[it++]=65535&Lt;else{if(!(16&nn)){if(!(64&nn)){Lt=Ft[(65535&Lt)+(Et&(1<<nn)-1)];continue t}if(32&nn){et.mode=12;break e}_.msg="invalid literal/length code",et.mode=30;break e}on=65535&Lt,(nn&=15)&&(Mt<nn&&(Et+=Tt[tt++]<<Mt,Mt+=8),on+=Et&(1<<nn)-1,Et>>>=nn,Mt-=nn),Mt<15&&(Et+=Tt[tt++]<<Mt,Mt+=8,Et+=Tt[tt++]<<Mt,Mt+=8),Lt=Rt[Et&pt];n:for(;;){if(Et>>>=nn=Lt>>>24,Mt-=nn,!(16&(nn=Lt>>>16&255))){if(!(64&nn)){Lt=Rt[(65535&Lt)+(Et&(1<<nn)-1)];continue n}_.msg="invalid distance code",et.mode=30;break e}if(wt=65535&Lt,Mt<(nn&=15)&&(Et+=Tt[tt++]<<Mt,(Mt+=8)<nn&&(Et+=Tt[tt++]<<Mt,Mt+=8)),(wt+=Et&(1<<nn)-1)>_t){_.msg="invalid distance too far back",et.mode=30;break e}if(Et>>>=nn,Mt-=nn,wt>(nn=it-st)){if((nn=wt-nn)>ft&&et.sane){_.msg="invalid distance too far back",et.mode=30;break e}if(xt=0,Nt=yt,ut===0){if(xt+=gt-nn,nn<on){on-=nn;do Vt[it++]=yt[xt++];while(--nn);xt=it-wt,Nt=Vt}}else if(ut<nn){if(xt+=gt+ut-nn,(nn-=ut)<on){on-=nn;do Vt[it++]=yt[xt++];while(--nn);if(xt=0,ut<on){on-=nn=ut;do Vt[it++]=yt[xt++];while(--nn);xt=it-wt,Nt=Vt}}}else if(xt+=ut-nn,nn<on){on-=nn;do Vt[it++]=yt[xt++];while(--nn);xt=it-wt,Nt=Vt}for(;on>2;)Vt[it++]=Nt[xt++],Vt[it++]=Nt[xt++],Vt[it++]=Nt[xt++],on-=3;on&&(Vt[it++]=Nt[xt++],on>1&&(Vt[it++]=Nt[xt++]))}else{xt=it-wt;do Vt[it++]=Vt[xt++],Vt[it++]=Vt[xt++],Vt[it++]=Vt[xt++],on-=3;while(on>2);on&&(Vt[it++]=Vt[xt++],on>1&&(Vt[it++]=Vt[xt++]))}break}}break}}while(tt<j&&it<ht);tt-=on=Mt>>3,Et&=(1<<(Mt-=on<<3))-1,_.next_in=tt,_.next_out=it,_.avail_in=tt<j?j-tt+5:5-(tt-j),_.avail_out=it<ht?ht-it+257:257-(it-ht),et.hold=Et,et.bits=Mt}},function(i,o,s){var _=s(37),$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],j=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(it,st,ht,_t,gt,ft,ut,yt){var Et,Mt,Ft,Rt,Ot,pt,Lt,nn,on,wt=yt.bits,xt=0,Nt=0,Tt=0,Vt=0,Xt=0,Gt=0,Ut=0,Ht=0,qt=0,Pt=0,St=null,Zt=0,tn=new _.Buf16(16),mn=new _.Buf16(16),yn=null,vn=0;for(xt=0;xt<=15;xt++)tn[xt]=0;for(Nt=0;Nt<_t;Nt++)tn[st[ht+Nt]]++;for(Xt=wt,Vt=15;Vt>=1&&tn[Vt]===0;Vt--);if(Xt>Vt&&(Xt=Vt),Vt===0)return gt[ft++]=20971520,gt[ft++]=20971520,yt.bits=1,0;for(Tt=1;Tt<Vt&&tn[Tt]===0;Tt++);for(Xt<Tt&&(Xt=Tt),Ht=1,xt=1;xt<=15;xt++)if(Ht<<=1,(Ht-=tn[xt])<0)return-1;if(Ht>0&&(it===0||Vt!==1))return-1;for(mn[1]=0,xt=1;xt<15;xt++)mn[xt+1]=mn[xt]+tn[xt];for(Nt=0;Nt<_t;Nt++)st[ht+Nt]!==0&&(ut[mn[st[ht+Nt]]++]=Nt);if(it===0?(St=yn=ut,pt=19):it===1?(St=$,Zt-=257,yn=et,vn-=257,pt=256):(St=tt,yn=j,pt=-1),Pt=0,Nt=0,xt=Tt,Ot=ft,Gt=Xt,Ut=0,Ft=-1,Rt=(qt=1<<Xt)-1,it===1&&qt>852||it===2&&qt>592)return 1;for(;;){Lt=xt-Ut,ut[Nt]<pt?(nn=0,on=ut[Nt]):ut[Nt]>pt?(nn=yn[vn+ut[Nt]],on=St[Zt+ut[Nt]]):(nn=96,on=0),Et=1<<xt-Ut,Tt=Mt=1<<Gt;do gt[Ot+(Pt>>Ut)+(Mt-=Et)]=Lt<<24|nn<<16|on|0;while(Mt!==0);for(Et=1<<xt-1;Pt&Et;)Et>>=1;if(Et!==0?(Pt&=Et-1,Pt+=Et):Pt=0,Nt++,--tn[xt]==0){if(xt===Vt)break;xt=st[ht+ut[Nt]]}if(xt>Xt&&(Pt&Rt)!==Ft){for(Ut===0&&(Ut=Xt),Ot+=Tt,Ht=1<<(Gt=xt-Ut);Gt+Ut<Vt&&!((Ht-=tn[Gt+Ut])<=0);)Gt++,Ht<<=1;if(qt+=1<<Gt,it===1&&qt>852||it===2&&qt>592)return 1;gt[Ft=Pt&Rt]=Xt<<24|Gt<<16|Ot-ft|0}}return Pt!==0&&(gt[Ot+Pt]=xt-Ut<<24|64<<16|0),yt.bits=Xt,0}},function(i,o,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(i,o){},function(i,o,s){function _(st,ht){var _t=Object.keys(st);if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(st);ht&&(gt=gt.filter(function(ft){return Object.getOwnPropertyDescriptor(st,ft).enumerable})),_t.push.apply(_t,gt)}return _t}function $(st,ht,_t){return ht in st?Object.defineProperty(st,ht,{value:_t,enumerable:!0,configurable:!0,writable:!0}):st[ht]=_t,st}function et(st,ht){for(var _t=0;_t<ht.length;_t++){var gt=ht[_t];gt.enumerable=gt.enumerable||!1,gt.configurable=!0,"value"in gt&&(gt.writable=!0),Object.defineProperty(st,gt.key,gt)}}var tt=s(5).Buffer,j=s(181).inspect,it=j&&j.custom||"inspect";i.exports=function(){function st(){(function(gt,ft){if(!(gt instanceof ft))throw new TypeError("Cannot call a class as a function")})(this,st),this.head=null,this.tail=null,this.length=0}var ht,_t;return ht=st,(_t=[{key:"push",value:function(gt){var ft={data:gt,next:null};this.length>0?this.tail.next=ft:this.head=ft,this.tail=ft,++this.length}},{key:"unshift",value:function(gt){var ft={data:gt,next:this.head};this.length===0&&(this.tail=ft),this.head=ft,++this.length}},{key:"shift",value:function(){if(this.length!==0){var gt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,gt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(gt){if(this.length===0)return"";for(var ft=this.head,ut=""+ft.data;ft=ft.next;)ut+=gt+ft.data;return ut}},{key:"concat",value:function(gt){if(this.length===0)return tt.alloc(0);for(var ft,ut,yt,Et=tt.allocUnsafe(gt>>>0),Mt=this.head,Ft=0;Mt;)ft=Mt.data,ut=Et,yt=Ft,tt.prototype.copy.call(ft,ut,yt),Ft+=Mt.data.length,Mt=Mt.next;return Et}},{key:"consume",value:function(gt,ft){var ut;return gt<this.head.data.length?(ut=this.head.data.slice(0,gt),this.head.data=this.head.data.slice(gt)):ut=gt===this.head.data.length?this.shift():ft?this._getString(gt):this._getBuffer(gt),ut}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(gt){var ft=this.head,ut=1,yt=ft.data;for(gt-=yt.length;ft=ft.next;){var Et=ft.data,Mt=gt>Et.length?Et.length:gt;if(Mt===Et.length?yt+=Et:yt+=Et.slice(0,gt),(gt-=Mt)==0){Mt===Et.length?(++ut,ft.next?this.head=ft.next:this.head=this.tail=null):(this.head=ft,ft.data=Et.slice(Mt));break}++ut}return this.length-=ut,yt}},{key:"_getBuffer",value:function(gt){var ft=tt.allocUnsafe(gt),ut=this.head,yt=1;for(ut.data.copy(ft),gt-=ut.data.length;ut=ut.next;){var Et=ut.data,Mt=gt>Et.length?Et.length:gt;if(Et.copy(ft,ft.length-gt,0,Mt),(gt-=Mt)==0){Mt===Et.length?(++yt,ut.next?this.head=ut.next:this.head=this.tail=null):(this.head=ut,ut.data=Et.slice(Mt));break}++yt}return this.length-=yt,ft}},{key:it,value:function(gt,ft){return j(this,function(ut){for(var yt=1;yt<arguments.length;yt++){var Et=arguments[yt]!=null?arguments[yt]:{};yt%2?_(Object(Et),!0).forEach(function(Mt){$(ut,Mt,Et[Mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(Et)):_(Object(Et)).forEach(function(Mt){Object.defineProperty(ut,Mt,Object.getOwnPropertyDescriptor(Et,Mt))})}return ut}({},ft,{depth:0,customInspect:!1}))}}])&&et(ht.prototype,_t),st}()},function(i,o){},function(i,o,s){(function(_){var $;function et(Rt,Ot,pt){return Ot in Rt?Object.defineProperty(Rt,Ot,{value:pt,enumerable:!0,configurable:!0,writable:!0}):Rt[Ot]=pt,Rt}var tt=s(49),j=Symbol("lastResolve"),it=Symbol("lastReject"),st=Symbol("error"),ht=Symbol("ended"),_t=Symbol("lastPromise"),gt=Symbol("handlePromise"),ft=Symbol("stream");function ut(Rt,Ot){return{value:Rt,done:Ot}}function yt(Rt){var Ot=Rt[j];if(Ot!==null){var pt=Rt[ft].read();pt!==null&&(Rt[_t]=null,Rt[j]=null,Rt[it]=null,Ot(ut(pt,!1)))}}function Et(Rt){_.nextTick(yt,Rt)}var Mt=Object.getPrototypeOf(function(){}),Ft=Object.setPrototypeOf((et($={get stream(){return this[ft]},next:function(){var Rt=this,Ot=this[st];if(Ot!==null)return Promise.reject(Ot);if(this[ht])return Promise.resolve(ut(void 0,!0));if(this[ft].destroyed)return new Promise(function(on,wt){_.nextTick(function(){Rt[st]?wt(Rt[st]):on(ut(void 0,!0))})});var pt,Lt=this[_t];if(Lt)pt=new Promise(function(on,wt){return function(xt,Nt){on.then(function(){wt[ht]?xt(ut(void 0,!0)):wt[gt](xt,Nt)},Nt)}}(Lt,this));else{var nn=this[ft].read();if(nn!==null)return Promise.resolve(ut(nn,!1));pt=new Promise(this[gt])}return this[_t]=pt,pt}},Symbol.asyncIterator,function(){return this}),et($,"return",function(){var Rt=this;return new Promise(function(Ot,pt){Rt[ft].destroy(null,function(Lt){Lt?pt(Lt):Ot(ut(void 0,!0))})})}),$),Mt);i.exports=function(Rt){var Ot,pt=Object.create(Ft,(et(Ot={},ft,{value:Rt,writable:!0}),et(Ot,j,{value:null,writable:!0}),et(Ot,it,{value:null,writable:!0}),et(Ot,st,{value:null,writable:!0}),et(Ot,ht,{value:Rt._readableState.endEmitted,writable:!0}),et(Ot,gt,{value:function(Lt,nn){var on=pt[ft].read();on?(pt[_t]=null,pt[j]=null,pt[it]=null,Lt(ut(on,!1))):(pt[j]=Lt,pt[it]=nn)},writable:!0}),Ot));return pt[_t]=null,tt(Rt,function(Lt){if(Lt&&Lt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var nn=pt[it];return nn!==null&&(pt[_t]=null,pt[j]=null,pt[it]=null,nn(Lt)),void(pt[st]=Lt)}var on=pt[j];on!==null&&(pt[_t]=null,pt[j]=null,pt[it]=null,on(ut(void 0,!0))),pt[ht]=!0}),Rt.on("readable",Et.bind(null,pt)),pt}}).call(this,s(2))},function(i,o){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(i,o,s){i.exports=$;var _=s(82);function $(et){if(!(this instanceof $))return new $(et);_.call(this,et)}s(7)($,_),$.prototype._transform=function(et,tt,j){j(null,et)}},function(i,o,s){var _,$=s(26).codes,et=$.ERR_MISSING_ARGS,tt=$.ERR_STREAM_DESTROYED;function j(gt){if(gt)throw gt}function it(gt,ft,ut,yt){yt=function(Ft){var Rt=!1;return function(){Rt||(Rt=!0,Ft.apply(void 0,arguments))}}(yt);var Et=!1;gt.on("close",function(){Et=!0}),_===void 0&&(_=s(49)),_(gt,{readable:ft,writable:ut},function(Ft){if(Ft)return yt(Ft);Et=!0,yt()});var Mt=!1;return function(Ft){if(!Et&&!Mt)return Mt=!0,function(Rt){return Rt.setHeader&&typeof Rt.abort=="function"}(gt)?gt.abort():typeof gt.destroy=="function"?gt.destroy():void yt(Ft||new tt("pipe"))}}function st(gt){gt()}function ht(gt,ft){return gt.pipe(ft)}function _t(gt){return gt.length?typeof gt[gt.length-1]!="function"?j:gt.pop():j}i.exports=function(){for(var gt=arguments.length,ft=new Array(gt),ut=0;ut<gt;ut++)ft[ut]=arguments[ut];var yt,Et=_t(ft);if(Array.isArray(ft[0])&&(ft=ft[0]),ft.length<2)throw new et("streams");var Mt=ft.map(function(Ft,Rt){var Ot=Rt<ft.length-1;return it(Ft,Ot,Rt>0,function(pt){yt||(yt=pt),pt&&Mt.forEach(st),Ot||(Mt.forEach(st),Et(yt))})});return ft.reduce(ht)}},function(i,o,s){var _=s(187)(function $(et,tt){return(tt=tt||{}).namespace=et,tt.prod=!0,tt.dev=!1,tt.force||$.force?$.yep(tt):$.nope(tt)});i.exports=_},function(i,o){var s=[],_=[],$=function(){};function et(ut){return!~s.indexOf(ut)&&(s.push(ut),!0)}function tt(ut){$=ut}function j(ut){for(var yt=[],Et=0;Et<s.length;Et++)if(s[Et].async)yt.push(s[Et]);else if(s[Et](ut))return!0;return!!yt.length&&new Promise(function(Mt){Promise.all(yt.map(function(Ft){return Ft(ut)})).then(function(Ft){Mt(Ft.some(Boolean))})})}function it(ut){return!~_.indexOf(ut)&&(_.push(ut),!0)}function st(){$.apply($,arguments)}function ht(ut){for(var yt=0;yt<_.length;yt++)ut=_[yt].apply(_[yt],arguments);return ut}function _t(ut,yt){var Et=Object.prototype.hasOwnProperty;for(var Mt in yt)Et.call(yt,Mt)&&(ut[Mt]=yt[Mt]);return ut}function gt(ut){return ut.enabled=!1,ut.modify=it,ut.set=tt,ut.use=et,_t(function(){return!1},ut)}function ft(ut){return ut.enabled=!0,ut.modify=it,ut.set=tt,ut.use=et,_t(function(){var yt=Array.prototype.slice.call(arguments,0);return st.call(st,ut,ht(yt,ut)),!0},ut)}i.exports=function(ut){return ut.introduce=_t,ut.enabled=j,ut.process=ht,ut.modify=it,ut.write=st,ut.nope=gt,ut.yep=ft,ut.set=tt,ut.use=et,ut}},function(i,o,s){(function(_){var $=s(65),et=s(22).StringDecoder,tt=s(32).Stream;function j(){}i.exports=function(it,st){var ht=_.alloc(65536),_t=new et("utf8"),gt=new tt,ft="",ut=0,yt=0;return it.start===-1&&delete it.start,gt.readable=!0,gt.destroy=function(){gt.destroyed=!0,gt.emit("end"),gt.emit("close")},$.open(it.file,"a+","0644",function(Et,Mt){if(Et)return st?st(Et):gt.emit("error",Et),void gt.destroy();(function Ft(){if(!gt.destroyed)return $.read(Mt,ht,0,ht.length,ut,function(Rt,Ot){if(Rt)return st?st(Rt):gt.emit("error",Rt),void gt.destroy();if(!Ot)return ft&&((it.start==null||yt>it.start)&&(st?st(null,ft):gt.emit("line",ft)),yt++,ft=""),setTimeout(Ft,1e3);var pt=_t.write(ht.slice(0,Ot));st||gt.emit("data",pt);for(var Lt=(pt=(ft+pt).split(/\n+/)).length-1,nn=0;nn<Lt;nn++)(it.start==null||yt>it.start)&&(st?st(null,pt[nn]):gt.emit("line",pt[nn])),yt++;return ft=pt[Lt],ut+=Ot,Ft()});$.close(Mt,j)})()}),st?gt.destroy:gt}}).call(this,s(5).Buffer)},function(i,o,s){(function(_,$){function et(Rt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Rt)}function tt(Rt,Ot){var pt=Object.keys(Rt);if(Object.getOwnPropertySymbols){var Lt=Object.getOwnPropertySymbols(Rt);Ot&&(Lt=Lt.filter(function(nn){return Object.getOwnPropertyDescriptor(Rt,nn).enumerable})),pt.push.apply(pt,Lt)}return pt}function j(Rt){for(var Ot=1;Ot<arguments.length;Ot++){var pt=arguments[Ot]!=null?arguments[Ot]:{};Ot%2?tt(Object(pt),!0).forEach(function(Lt){it(Rt,Lt,pt[Lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Rt,Object.getOwnPropertyDescriptors(pt)):tt(Object(pt)).forEach(function(Lt){Object.defineProperty(Rt,Lt,Object.getOwnPropertyDescriptor(pt,Lt))})}return Rt}function it(Rt,Ot,pt){return Ot in Rt?Object.defineProperty(Rt,Ot,{value:pt,enumerable:!0,configurable:!0,writable:!0}):Rt[Ot]=pt,Rt}function st(Rt,Ot){if(!(Rt instanceof Ot))throw new TypeError("Cannot call a class as a function")}function ht(Rt,Ot){for(var pt=0;pt<Ot.length;pt++){var Lt=Ot[pt];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(Rt,Lt.key,Lt)}}function _t(Rt,Ot){return(_t=Object.setPrototypeOf||function(pt,Lt){return pt.__proto__=Lt,pt})(Rt,Ot)}function gt(Rt){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var pt,Lt=ut(Rt);if(Ot){var nn=ut(this).constructor;pt=Reflect.construct(Lt,arguments,nn)}else pt=Lt.apply(this,arguments);return ft(this,pt)}}function ft(Rt,Ot){return!Ot||et(Ot)!=="object"&&typeof Ot!="function"?function(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt}(Rt):Ot}function ut(Rt){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(Ot){return Ot.__proto__||Object.getPrototypeOf(Ot)})(Rt)}var yt=s(83),Et=s(200),Mt=s(32).Stream,Ft=s(20);i.exports=function(Rt){(function(on,wt){if(typeof wt!="function"&&wt!==null)throw new TypeError("Super expression must either be null or a function");on.prototype=Object.create(wt&&wt.prototype,{constructor:{value:on,writable:!0,configurable:!0}}),wt&&_t(on,wt)})(nn,Rt);var Ot,pt,Lt=gt(nn);function nn(){var on,wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,nn),(on=Lt.call(this,wt)).options=wt,on.name=wt.name||"http",on.ssl=!!wt.ssl,on.host=wt.host||"localhost",on.port=wt.port,on.auth=wt.auth,on.path=wt.path||"",on.agent=wt.agent,on.headers=wt.headers||{},on.headers["content-type"]="application/json",on.port||(on.port=on.ssl?443:80),on}return Ot=nn,(pt=[{key:"log",value:function(on,wt){var xt=this;this._request(on,function(Nt,Tt){Tt&&Tt.statusCode!==200&&(Nt=new Error("Invalid HTTP Status Code: ".concat(Tt.statusCode))),Nt?xt.emit("warn",Nt):xt.emit("logged",on)}),wt&&_(wt)}},{key:"query",value:function(on,wt){typeof on=="function"&&(wt=on,on={}),(on={method:"query",params:this.normalizeQuery(on)}).params.path&&(on.path=on.params.path,delete on.params.path),on.params.auth&&(on.auth=on.params.auth,delete on.params.auth),this._request(on,function(xt,Nt,Tt){if(Nt&&Nt.statusCode!==200&&(xt=new Error("Invalid HTTP Status Code: ".concat(Nt.statusCode))),xt)return wt(xt);if(typeof Tt=="string")try{Tt=JSON.parse(Tt)}catch(Vt){return wt(Vt)}wt(null,Tt)})}},{key:"stream",value:function(){var on=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},wt=new Mt;(on={method:"stream",params:on}).params.path&&(on.path=on.params.path,delete on.params.path),on.params.auth&&(on.auth=on.params.auth,delete on.params.auth);var xt="",Nt=this._request(on);return wt.destroy=function(){return Nt.destroy()},Nt.on("data",function(Tt){for(var Vt=(Tt=(xt+Tt).split(/\n+/)).length-1,Xt=0;Xt<Vt;Xt++)try{wt.emit("log",JSON.parse(Tt[Xt]))}catch(Gt){wt.emit("error",Gt)}xt=Tt[Vt]}),Nt.on("error",function(Tt){return wt.emit("error",Tt)}),wt}},{key:"_request",value:function(on,wt){var xt=(on=on||{}).auth||this.auth,Nt=on.path||this.path||"";delete on.auth,delete on.path;var Tt=Object.assign({},this.headers);xt&&xt.bearer&&(Tt.Authorization="Bearer ".concat(xt.bearer));var Vt=(this.ssl?Et:yt).request(j(j({},this.options),{},{method:"POST",host:this.host,port:this.port,path:"/".concat(Nt.replace(/^\//,"")),headers:Tt,auth:xt&&xt.username&&xt.password?"".concat(xt.username,":").concat(xt.password):"",agent:this.agent}));Vt.on("error",wt),Vt.on("response",function(Xt){return Xt.on("end",function(){return wt(null,Xt)}).resume()}),Vt.end($.from(JSON.stringify(on),"utf8"))}}])&&ht(Ot.prototype,pt),nn}(Ft)}).call(this,s(15).setImmediate,s(5).Buffer)},function(i,o,s){(function(_,$,et){var tt=s(84),j=s(7),it=s(85),st=s(31),ht=s(191),_t=it.IncomingMessage,gt=it.readyStates,ft=i.exports=function(yt){var Et,Mt=this;st.Writable.call(Mt),Mt._opts=yt,Mt._body=[],Mt._headers={},yt.auth&&Mt.setHeader("Authorization","Basic "+new _(yt.auth).toString("base64")),Object.keys(yt.headers).forEach(function(Rt){Mt.setHeader(Rt,yt.headers[Rt])});var Ft=!0;if(yt.mode==="disable-fetch"||"requestTimeout"in yt&&!tt.abortController)Ft=!1,Et=!0;else if(yt.mode==="prefer-streaming")Et=!1;else if(yt.mode==="allow-wrong-content-type")Et=!tt.overrideMimeType;else{if(yt.mode&&yt.mode!=="default"&&yt.mode!=="prefer-fast")throw new Error("Invalid value for opts.mode");Et=!0}Mt._mode=function(Rt,Ot){return tt.fetch&&Ot?"fetch":tt.mozchunkedarraybuffer?"moz-chunked-arraybuffer":tt.msstream?"ms-stream":tt.arraybuffer&&Rt?"arraybuffer":tt.vbArray&&Rt?"text:vbarray":"text"}(Et,Ft),Mt._fetchTimer=null,Mt.on("finish",function(){Mt._onFinish()})};j(ft,st.Writable),ft.prototype.setHeader=function(yt,Et){var Mt=yt.toLowerCase();ut.indexOf(Mt)===-1&&(this._headers[Mt]={name:yt,value:Et})},ft.prototype.getHeader=function(yt){var Et=this._headers[yt.toLowerCase()];return Et?Et.value:null},ft.prototype.removeHeader=function(yt){delete this._headers[yt.toLowerCase()]},ft.prototype._onFinish=function(){var yt=this;if(!yt._destroyed){var Et=yt._opts,Mt=yt._headers,Ft=null;Et.method!=="GET"&&Et.method!=="HEAD"&&(Ft=tt.arraybuffer?ht(_.concat(yt._body)):tt.blobConstructor?new $.Blob(yt._body.map(function(nn){return ht(nn)}),{type:(Mt["content-type"]||{}).value||""}):_.concat(yt._body).toString());var Rt=[];if(Object.keys(Mt).forEach(function(nn){var on=Mt[nn].name,wt=Mt[nn].value;Array.isArray(wt)?wt.forEach(function(xt){Rt.push([on,xt])}):Rt.push([on,wt])}),yt._mode==="fetch"){var Ot=null;if(tt.abortController){var pt=new AbortController;Ot=pt.signal,yt._fetchAbortController=pt,"requestTimeout"in Et&&Et.requestTimeout!==0&&(yt._fetchTimer=$.setTimeout(function(){yt.emit("requestTimeout"),yt._fetchAbortController&&yt._fetchAbortController.abort()},Et.requestTimeout))}$.fetch(yt._opts.url,{method:yt._opts.method,headers:Rt,body:Ft||void 0,mode:"cors",credentials:Et.withCredentials?"include":"same-origin",signal:Ot}).then(function(nn){yt._fetchResponse=nn,yt._connect()},function(nn){$.clearTimeout(yt._fetchTimer),yt._destroyed||yt.emit("error",nn)})}else{var Lt=yt._xhr=new $.XMLHttpRequest;try{Lt.open(yt._opts.method,yt._opts.url,!0)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}"responseType"in Lt&&(Lt.responseType=yt._mode.split(":")[0]),"withCredentials"in Lt&&(Lt.withCredentials=!!Et.withCredentials),yt._mode==="text"&&"overrideMimeType"in Lt&&Lt.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in Et&&(Lt.timeout=Et.requestTimeout,Lt.ontimeout=function(){yt.emit("requestTimeout")}),Rt.forEach(function(nn){Lt.setRequestHeader(nn[0],nn[1])}),yt._response=null,Lt.onreadystatechange=function(){switch(Lt.readyState){case gt.LOADING:case gt.DONE:yt._onXHRProgress()}},yt._mode==="moz-chunked-arraybuffer"&&(Lt.onprogress=function(){yt._onXHRProgress()}),Lt.onerror=function(){yt._destroyed||yt.emit("error",new Error("XHR error"))};try{Lt.send(Ft)}catch(nn){return void et.nextTick(function(){yt.emit("error",nn)})}}}},ft.prototype._onXHRProgress=function(){(function(yt){try{var Et=yt.status;return Et!==null&&Et!==0}catch{return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},ft.prototype._connect=function(){var yt=this;yt._destroyed||(yt._response=new _t(yt._xhr,yt._fetchResponse,yt._mode,yt._fetchTimer),yt._response.on("error",function(Et){yt.emit("error",Et)}),yt.emit("response",yt._response))},ft.prototype._write=function(yt,Et,Mt){this._body.push(yt),Mt()},ft.prototype.abort=ft.prototype.destroy=function(){this._destroyed=!0,$.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},ft.prototype.end=function(yt,Et,Mt){typeof yt=="function"&&(Mt=yt,yt=void 0),st.Writable.prototype.end.call(this,yt,Et,Mt)},ft.prototype.flushHeaders=function(){},ft.prototype.setTimeout=function(){},ft.prototype.setNoDelay=function(){},ft.prototype.setSocketKeepAlive=function(){};var ut=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,s(5).Buffer,s(6),s(2))},function(i,o,s){var _=s(5).Buffer;i.exports=function($){if($ instanceof Uint8Array){if($.byteOffset===0&&$.byteLength===$.buffer.byteLength)return $.buffer;if(typeof $.buffer.slice=="function")return $.buffer.slice($.byteOffset,$.byteOffset+$.byteLength)}if(_.isBuffer($)){for(var et=new Uint8Array($.length),tt=$.length,j=0;j<tt;j++)et[j]=$[j];return et.buffer}throw new Error("Argument must be a Buffer")}},function(i,o){i.exports=function(){for(var _={},$=0;$<arguments.length;$++){var et=arguments[$];for(var tt in et)s.call(et,tt)&&(_[tt]=et[tt])}return _};var s=Object.prototype.hasOwnProperty},function(i,o){i.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(i,o,s){(function(_,$){var et;(function(tt){o&&o.nodeType,_&&_.nodeType;var j=typeof $=="object"&&$;j.global!==j&&j.window!==j&&j.self;var it,st=2147483647,ht=/^xn--/,_t=/[^\x20-\x7E]/,gt=/[\x2E\u3002\uFF0E\uFF61]/g,ft={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ut=Math.floor,yt=String.fromCharCode;function Et(wt){throw new RangeError(ft[wt])}function Mt(wt,xt){for(var Nt=wt.length,Tt=[];Nt--;)Tt[Nt]=xt(wt[Nt]);return Tt}function Ft(wt,xt){var Nt=wt.split("@"),Tt="";return Nt.length>1&&(Tt=Nt[0]+"@",wt=Nt[1]),Tt+Mt((wt=wt.replace(gt,".")).split("."),xt).join(".")}function Rt(wt){for(var xt,Nt,Tt=[],Vt=0,Xt=wt.length;Vt<Xt;)(xt=wt.charCodeAt(Vt++))>=55296&&xt<=56319&&Vt<Xt?(64512&(Nt=wt.charCodeAt(Vt++)))==56320?Tt.push(((1023&xt)<<10)+(1023&Nt)+65536):(Tt.push(xt),Vt--):Tt.push(xt);return Tt}function Ot(wt){return Mt(wt,function(xt){var Nt="";return xt>65535&&(Nt+=yt((xt-=65536)>>>10&1023|55296),xt=56320|1023&xt),Nt+=yt(xt)}).join("")}function pt(wt,xt){return wt+22+75*(wt<26)-((xt!=0)<<5)}function Lt(wt,xt,Nt){var Tt=0;for(wt=Nt?ut(wt/700):wt>>1,wt+=ut(wt/xt);wt>455;Tt+=36)wt=ut(wt/35);return ut(Tt+36*wt/(wt+38))}function nn(wt){var xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St,Zt=[],tn=wt.length,mn=0,yn=128,vn=72;for((Nt=wt.lastIndexOf("-"))<0&&(Nt=0),Tt=0;Tt<Nt;++Tt)wt.charCodeAt(Tt)>=128&&Et("not-basic"),Zt.push(wt.charCodeAt(Tt));for(Vt=Nt>0?Nt+1:0;Vt<tn;){for(Xt=mn,Gt=1,Ut=36;Vt>=tn&&Et("invalid-input"),((Ht=(St=wt.charCodeAt(Vt++))-48<10?St-22:St-65<26?St-65:St-97<26?St-97:36)>=36||Ht>ut((st-mn)/Gt))&&Et("overflow"),mn+=Ht*Gt,!(Ht<(qt=Ut<=vn?1:Ut>=vn+26?26:Ut-vn));Ut+=36)Gt>ut(st/(Pt=36-qt))&&Et("overflow"),Gt*=Pt;vn=Lt(mn-Xt,xt=Zt.length+1,Xt==0),ut(mn/xt)>st-yn&&Et("overflow"),yn+=ut(mn/xt),mn%=xt,Zt.splice(mn++,0,yn)}return Ot(Zt)}function on(wt){var xt,Nt,Tt,Vt,Xt,Gt,Ut,Ht,qt,Pt,St,Zt,tn,mn,yn,vn=[];for(Zt=(wt=Rt(wt)).length,xt=128,Nt=0,Xt=72,Gt=0;Gt<Zt;++Gt)(St=wt[Gt])<128&&vn.push(yt(St));for(Tt=Vt=vn.length,Vt&&vn.push("-");Tt<Zt;){for(Ut=st,Gt=0;Gt<Zt;++Gt)(St=wt[Gt])>=xt&&St<Ut&&(Ut=St);for(Ut-xt>ut((st-Nt)/(tn=Tt+1))&&Et("overflow"),Nt+=(Ut-xt)*tn,xt=Ut,Gt=0;Gt<Zt;++Gt)if((St=wt[Gt])<xt&&++Nt>st&&Et("overflow"),St==xt){for(Ht=Nt,qt=36;!(Ht<(Pt=qt<=Xt?1:qt>=Xt+26?26:qt-Xt));qt+=36)yn=Ht-Pt,mn=36-Pt,vn.push(yt(pt(Pt+yn%mn,0))),Ht=ut(yn/mn);vn.push(yt(pt(Ht,0))),Xt=Lt(Nt,tn,Tt==Vt),Nt=0,++Tt}++Nt,++xt}return vn.join("")}it={version:"1.4.1",ucs2:{decode:Rt,encode:Ot},decode:nn,encode:on,toASCII:function(wt){return Ft(wt,function(xt){return _t.test(xt)?"xn--"+on(xt):xt})},toUnicode:function(wt){return Ft(wt,function(xt){return ht.test(xt)?nn(xt.slice(4).toLowerCase()):xt})}},(et=function(){return it}.call(o,s,o,_))===void 0||(_.exports=et)})()}).call(this,s(195)(i),s(6))},function(i,o){i.exports=function(s){return s.webpackPolyfill||(s.deprecate=function(){},s.paths=[],s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),s.webpackPolyfill=1),s}},function(i,o,s){i.exports={isString:function(_){return typeof _=="string"},isObject:function(_){return typeof _=="object"&&_!==null},isNull:function(_){return _===null},isNullOrUndefined:function(_){return _==null}}},function(i,o,s){o.decode=o.parse=s(198),o.encode=o.stringify=s(199)},function(i,o,s){function _(et,tt){return Object.prototype.hasOwnProperty.call(et,tt)}i.exports=function(et,tt,j,it){tt=tt||"&",j=j||"=";var st={};if(typeof et!="string"||et.length===0)return st;var ht=/\+/g;et=et.split(tt);var _t=1e3;it&&typeof it.maxKeys=="number"&&(_t=it.maxKeys);var gt=et.length;_t>0&&gt>_t&&(gt=_t);for(var ft=0;ft<gt;++ft){var ut,yt,Et,Mt,Ft=et[ft].replace(ht,"%20"),Rt=Ft.indexOf(j);Rt>=0?(ut=Ft.substr(0,Rt),yt=Ft.substr(Rt+1)):(ut=Ft,yt=""),Et=decodeURIComponent(ut),Mt=decodeURIComponent(yt),_(st,Et)?$(st[Et])?st[Et].push(Mt):st[Et]=[st[Et],Mt]:st[Et]=Mt}return st};var $=Array.isArray||function(et){return Object.prototype.toString.call(et)==="[object Array]"}},function(i,o,s){var _=function(j){switch(typeof j){case"string":return j;case"boolean":return j?"true":"false";case"number":return isFinite(j)?j:"";default:return""}};i.exports=function(j,it,st,ht){return it=it||"&",st=st||"=",j===null&&(j=void 0),typeof j=="object"?et(tt(j),function(_t){var gt=encodeURIComponent(_(_t))+st;return $(j[_t])?et(j[_t],function(ft){return gt+encodeURIComponent(_(ft))}).join(it):gt+encodeURIComponent(_(j[_t]))}).join(it):ht?encodeURIComponent(_(ht))+st+encodeURIComponent(_(j)):""};var $=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"};function et(j,it){if(j.map)return j.map(it);for(var st=[],ht=0;ht<j.length;ht++)st.push(it(j[ht],ht));return st}var tt=Object.keys||function(j){var it=[];for(var st in j)Object.prototype.hasOwnProperty.call(j,st)&&it.push(st);return it}},function(i,o,s){var _=s(83),$=s(86),et=i.exports;for(var tt in _)_.hasOwnProperty(tt)&&(et[tt]=_[tt]);function j(it){if(typeof it=="string"&&(it=$.parse(it)),it.protocol||(it.protocol="https:"),it.protocol!=="https:")throw new Error('Protocol "'+it.protocol+'" not supported. Expected "https:"');return it}et.request=function(it,st){return it=j(it),_.request.call(this,it,st)},et.get=function(it,st){return it=j(it),_.get.call(this,it,st)}},function(i,o,s){(function(_){function $(yt){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(yt)}function et(yt,Et){if(!(yt instanceof Et))throw new TypeError("Cannot call a class as a function")}function tt(yt,Et){for(var Mt=0;Mt<Et.length;Mt++){var Ft=Et[Mt];Ft.enumerable=Ft.enumerable||!1,Ft.configurable=!0,"value"in Ft&&(Ft.writable=!0),Object.defineProperty(yt,Ft.key,Ft)}}function j(yt,Et){return(j=Object.setPrototypeOf||function(Mt,Ft){return Mt.__proto__=Ft,Mt})(yt,Et)}function it(yt){var Et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Mt,Ft=ht(yt);if(Et){var Rt=ht(this).constructor;Mt=Reflect.construct(Ft,arguments,Rt)}else Mt=Ft.apply(this,arguments);return st(this,Mt)}}function st(yt,Et){return!Et||$(Et)!=="object"&&typeof Et!="function"?function(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}(yt):Et}function ht(yt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)})(yt)}var _t=s(87),gt=s(3).MESSAGE,ft=s(18),ut=s(20);i.exports=function(yt){(function(Ot,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(pt&&pt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),pt&&j(Ot,pt)})(Rt,yt);var Et,Mt,Ft=it(Rt);function Rt(){var Ot,pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(et(this,Rt),Ot=Ft.call(this,pt),!pt.stream||!_t(pt.stream))throw new Error("options.stream is required.");return Ot._stream=pt.stream,Ot._stream.setMaxListeners(1/0),Ot.isObjectMode=pt.stream._writableState.objectMode,Ot.eol=pt.eol||ft.EOL,Ot}return Et=Rt,(Mt=[{key:"log",value:function(Ot,pt){var Lt=this;if(_(function(){return Lt.emit("logged",Ot)}),this.isObjectMode)return this._stream.write(Ot),void(pt&&pt());this._stream.write("".concat(Ot[gt]).concat(this.eol)),pt&&pt()}}])&&tt(Et.prototype,Mt),Rt}(ut)}).call(this,s(15).setImmediate)},function(i,o,s){(function(_){function $(Tt,Vt,Xt){return Vt in Tt?Object.defineProperty(Tt,Vt,{value:Xt,enumerable:!0,configurable:!0,writable:!0}):Tt[Vt]=Xt,Tt}function et(Tt){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt})(Tt)}function tt(Tt,Vt){for(var Xt=0;Xt<Vt.length;Xt++){var Gt=Vt[Xt];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Tt,Gt.key,Gt)}}function j(Tt,Vt){return(j=Object.setPrototypeOf||function(Xt,Gt){return Xt.__proto__=Gt,Xt})(Tt,Vt)}function it(Tt){var Vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Xt,Gt=ht(Tt);if(Vt){var Ut=ht(this).constructor;Xt=Reflect.construct(Gt,arguments,Ut)}else Xt=Gt.apply(this,arguments);return st(this,Xt)}}function st(Tt,Vt){return!Vt||et(Vt)!=="object"&&typeof Vt!="function"?function(Xt){if(Xt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Xt}(Tt):Vt}function ht(Tt){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)})(Tt)}var _t=s(32),gt=_t.Stream,ft=_t.Transform,ut=s(51),yt=s(3),Et=yt.LEVEL,Mt=yt.SPLAT,Ft=s(87),Rt=s(89),Ot=s(93),pt=s(206),Lt=s(207),nn=s(61).warn,on=s(50),wt=/%[scdjifoO%]/g,xt=function(Tt){(function(Ht,qt){if(typeof qt!="function"&&qt!==null)throw new TypeError("Super expression must either be null or a function");Ht.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Ht,writable:!0,configurable:!0}}),qt&&j(Ht,qt)})(Ut,Tt);var Vt,Xt,Gt=it(Ut);function Ut(Ht){var qt;return function(Pt,St){if(!(Pt instanceof St))throw new TypeError("Cannot call a class as a function")}(this,Ut),(qt=Gt.call(this,{objectMode:!0})).configure(Ht),qt}return Vt=Ut,(Xt=[{key:"child",value:function(Ht){var qt=this;return Object.create(qt,{write:{value:function(Pt){var St=Object.assign({},Ht,Pt);Pt instanceof Error&&(St.stack=Pt.stack,St.message=Pt.message),qt.write(St)}}})}},{key:"configure",value:function(){var Ht=this,qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pt=qt.silent,St=qt.format,Zt=qt.defaultMeta,tn=qt.levels,mn=qt.level,yn=mn===void 0?"info":mn,vn=qt.exitOnError,un=vn===void 0||vn,rn=qt.transports,It=qt.colors,Dt=qt.emitErrs,Kt=qt.formatters,gn=qt.padLevels,hn=qt.rewriters,xn=qt.stripColors,Mn=qt.exceptionHandlers,qn=qt.rejectionHandlers;if(this.transports.length&&this.clear(),this.silent=Pt,this.format=St||this.format||s(208)(),this.defaultMeta=Zt||null,this.levels=tn||this.levels||on.npm.levels,this.level=yn,this.exceptions=new Rt(this),this.rejections=new Ot(this),this.profilers={},this.exitOnError=un,rn&&(rn=Array.isArray(rn)?rn:[rn]).forEach(function(Ir){return Ht.add(Ir)}),It||Dt||Kt||gn||hn||xn)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));Mn&&this.exceptions.handle(Mn),qn&&this.rejections.handle(qn)}},{key:"isLevelEnabled",value:function(Ht){var qt=this,Pt=Nt(this.levels,Ht);if(Pt===null)return!1;var St=Nt(this.levels,this.level);return St!==null&&(this.transports&&this.transports.length!==0?this.transports.findIndex(function(Zt){var tn=Nt(qt.levels,Zt.level);return tn===null&&(tn=St),tn>=Pt})!==-1:St>=Pt)}},{key:"log",value:function(Ht,qt){for(var Pt,St,Zt=arguments.length,tn=new Array(Zt>2?Zt-2:0),mn=2;mn<Zt;mn++)tn[mn-2]=arguments[mn];if(arguments.length===1)return Ht[Et]=Ht.level,this._addDefaultMeta(Ht),this.write(Ht),this;if(arguments.length===2)return qt&&et(qt)==="object"?(qt[Et]=qt.level=Ht,this._addDefaultMeta(qt),this.write(qt),this):(this.write(($(St={},Et,Ht),$(St,"level",Ht),$(St,"message",qt),St)),this);var yn=tn[0];if(et(yn)==="object"&&yn!==null){var vn=qt&&qt.match&&qt.match(wt);if(!vn){var un,rn=Object.assign({},this.defaultMeta,yn,($(un={},Et,Ht),$(un,Mt,tn),$(un,"level",Ht),$(un,"message",qt),un));return yn.message&&(rn.message="".concat(rn.message," ").concat(yn.message)),yn.stack&&(rn.stack=yn.stack),this.write(rn),this}}return this.write(Object.assign({},this.defaultMeta,($(Pt={},Et,Ht),$(Pt,Mt,tn),$(Pt,"level",Ht),$(Pt,"message",qt),Pt))),this}},{key:"_transform",value:function(Ht,qt,Pt){if(this.silent)return Pt();Ht[Et]||(Ht[Et]=Ht.level),this.levels[Ht[Et]]||this.levels[Ht[Et]]===0||console.error("[winston] Unknown logger level: %s",Ht[Et]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports %j",Ht);try{this.push(this.format.transform(Ht,this.format.options))}catch(St){throw St}finally{Pt()}}},{key:"_final",value:function(Ht){var qt=this.transports.slice();ut(qt,function(Pt,St){if(!Pt||Pt.finished)return _(St);Pt.once("finish",St),Pt.end()},Ht)}},{key:"add",value:function(Ht){var qt=!Ft(Ht)||Ht.log.length>2?new pt({transport:Ht}):Ht;if(!qt._writableState||!qt._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",qt),this._onEvent("warn",qt),this.pipe(qt),Ht.handleExceptions&&this.exceptions.handle(),Ht.handleRejections&&this.rejections.handle(),this}},{key:"remove",value:function(Ht){if(!Ht)return this;var qt=Ht;return(!Ft(Ht)||Ht.log.length>2)&&(qt=this.transports.filter(function(Pt){return Pt.transport===Ht})[0]),qt&&this.unpipe(qt),this}},{key:"clear",value:function(){return this.unpipe(),this}},{key:"close",value:function(){return this.clear(),this.emit("close"),this}},{key:"setLevels",value:function(){nn.deprecated("setLevels")}},{key:"query",value:function(Ht,qt){typeof Ht=="function"&&(qt=Ht,Ht={}),Ht=Ht||{};var Pt={},St=Object.assign({},Ht.query||{});ut(this.transports.filter(function(Zt){return!!Zt.query}),function(Zt,tn){(function(mn,yn){Ht.query&&typeof mn.formatQuery=="function"&&(Ht.query=mn.formatQuery(St)),mn.query(Ht,function(vn,un){if(vn)return yn(vn);typeof mn.formatResults=="function"&&(un=mn.formatResults(un,Ht.format)),yn(null,un)})})(Zt,function(mn,yn){tn&&((yn=mn||yn)&&(Pt[Zt.name]=yn),tn()),tn=null})},function(){return qt(null,Pt)})}},{key:"stream",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=new gt,Pt=[];return qt._streams=Pt,qt.destroy=function(){for(var St=Pt.length;St--;)Pt[St].destroy()},this.transports.filter(function(St){return!!St.stream}).forEach(function(St){var Zt=St.stream(Ht);Zt&&(Pt.push(Zt),Zt.on("log",function(tn){tn.transport=tn.transport||[],tn.transport.push(St.name),qt.emit("log",tn)}),Zt.on("error",function(tn){tn.transport=tn.transport||[],tn.transport.push(St.name),qt.emit("error",tn)}))}),qt}},{key:"startTimer",value:function(){return new Lt(this)}},{key:"profile",value:function(Ht){var qt=Date.now();if(this.profilers[Ht]){var Pt=this.profilers[Ht];delete this.profilers[Ht];for(var St=arguments.length,Zt=new Array(St>1?St-1:0),tn=1;tn<St;tn++)Zt[tn-1]=arguments[tn];typeof Zt[Zt.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),Zt.pop());var mn=et(Zt[Zt.length-1])==="object"?Zt.pop():{};return mn.level=mn.level||"info",mn.durationMs=qt-Pt,mn.message=mn.message||Ht,this.write(mn)}return this.profilers[Ht]=qt,this}},{key:"handleExceptions",value:function(){var Ht;console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),(Ht=this.exceptions).handle.apply(Ht,arguments)}},{key:"unhandleExceptions",value:function(){var Ht;console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),(Ht=this.exceptions).unhandle.apply(Ht,arguments)}},{key:"cli",value:function(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}},{key:"_onEvent",value:function(Ht,qt){qt["__winston"+Ht]||(qt["__winston"+Ht]=function(Pt){Ht!=="error"||this.transports.includes(qt)||this.add(qt),this.emit(Ht,Pt,qt)}.bind(this),qt.on(Ht,qt["__winston"+Ht]))}},{key:"_addDefaultMeta",value:function(Ht){this.defaultMeta&&Object.assign(Ht,this.defaultMeta)}}])&&tt(Vt.prototype,Xt),Ut}(ft);function Nt(Tt,Vt){var Xt=Tt[Vt];return Xt||Xt===0?Xt:null}Object.defineProperty(xt.prototype,"transports",{configurable:!1,enumerable:!0,get:function(){var Tt=this._readableState.pipes;return Array.isArray(Tt)?Tt:[Tt].filter(Boolean)}}),i.exports=xt}).call(this,s(15).setImmediate)},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0});var _=ht(s(45)),$=ht(s(46)),et=ht(s(66)),tt=ht(s(67)),j=ht(s(68)),it=ht(s(25)),st=ht(s(30));function ht(ft){return ft&&ft.__esModule?ft:{default:ft}}function _t(ft,ut,yt){yt=(0,tt.default)(yt);var Et=0,Mt=0,{length:Ft}=ft,Rt=!1;function Ot(pt,Lt){pt===!1&&(Rt=!0),Rt!==!0&&(pt?yt(pt):++Mt!==Ft&&Lt!==$.default||yt(null))}for(Ft===0&&yt(null);Et<Ft;Et++)ut(ft[Et],Et,(0,j.default)(Ot))}function gt(ft,ut,yt){return(0,et.default)(ft,1/0,ut,yt)}o.default=(0,st.default)(function(ft,ut,yt){return((0,_.default)(ft)?_t:gt)(ft,(0,it.default)(ut),yt)},3),i.exports=o.default},function(i,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(_){return($,et,tt)=>_($,tt)},i.exports=o.default},function(i,o,s){var _=Object.prototype.toString;i.exports=function($){if(typeof $.displayName=="string"&&$.constructor.name)return $.displayName;if(typeof $.name=="string"&&$.name)return $.name;if(typeof $=="object"&&$.constructor&&typeof $.constructor.name=="string")return $.constructor.name;var et=$.toString(),tt=_.call($).slice(8,-1);return(et=tt==="Function"?et.substring(et.indexOf("(")+1,et.indexOf(")")):tt)||"anonymous"}},function(i,o,s){const _=s(13),{LEVEL:$}=s(3),et=s(20),tt=i.exports=function(j={}){if(et.call(this,j),!j.transport||typeof j.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=j.transport,this.level=this.level||j.transport.level,this.handleExceptions=this.handleExceptions||j.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(it){this.emit("error",it,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};_.inherits(tt,et),tt.prototype._write=function(j,it,st){if(this.silent||j.exception===!0&&!this.handleExceptions)return st(null);(!this.level||this.levels[this.level]>=this.levels[j[$]])&&this.transport.log(j[$],j.message,j,this._nop),st(null)},tt.prototype._writev=function(j,it){for(let st=0;st<j.length;st++)this._accept(j[st])&&(this.transport.log(j[st].chunk[$],j[st].chunk.message,j[st].chunk,this._nop),j[st].callback());return it(null)},tt.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},tt.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(i,o,s){function _(et){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(et)}function $(et,tt){for(var j=0;j<tt.length;j++){var it=tt[j];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(et,it.key,it)}}i.exports=function(){function et(it){if(function(st,ht){if(!(st instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,et),!it)throw new Error("Logger is required for profiling.");this.logger=it,this.start=Date.now()}var tt,j;return tt=et,(j=[{key:"done",value:function(){for(var it=arguments.length,st=new Array(it),ht=0;ht<it;ht++)st[ht]=arguments[ht];typeof st[st.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),st.pop());var _t=_(st[st.length-1])==="object"?st.pop():{};return _t.level=_t.level||"info",_t.durationMs=Date.now()-this.start,this.logger.write(_t)}}])&&$(tt.prototype,j),et}()},function(i,o,s){(function(_){const $=s(209),{MESSAGE:et}=s(3),tt=s(35);function j(it,st){return st instanceof _?st.toString("base64"):typeof st=="bigint"?st.toString():st}i.exports=$((it,st={})=>(it[et]=(st.stable?tt.stableStringify:tt)(it,st.replacer||j,st.space),it))}).call(this,s(5).Buffer)},function(i,o,s){class _ extends Error{constructor(et){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${et.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,_)}}i.exports=$=>{if($.length>2)throw new _($);function et(j={}){this.options=j}function tt(j){return new et(j)}return et.prototype.transform=$,tt.Format=et,tt}},function(i,o,s){function _(tt,j){if(!(tt instanceof j))throw new TypeError("Cannot call a class as a function")}function $(tt,j){for(var it=0;it<j.length;it++){var st=j[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(tt,st.key,st)}}var et=s(88);i.exports=function(){function tt(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,tt),this.loggers=new Map,this.options=st}var j,it;return j=tt,(it=[{key:"add",value:function(st,ht){var _t=this;if(!this.loggers.has(st)){var gt=(ht=Object.assign({},ht||this.options)).transports||this.options.transports;ht.transports=gt?gt.slice():[];var ft=et(ht);ft.on("close",function(){return _t._delete(st)}),this.loggers.set(st,ft)}return this.loggers.get(st)}},{key:"get",value:function(st,ht){return this.add(st,ht)}},{key:"has",value:function(st){return!!this.loggers.has(st)}},{key:"close",value:function(st){var ht=this;if(st)return this._removeLogger(st);this.loggers.forEach(function(_t,gt){return ht._removeLogger(gt)})}},{key:"_removeLogger",value:function(st){this.loggers.has(st)&&(this.loggers.get(st).close(),this._delete(st))}},{key:"_delete",value:function(st){this.loggers.delete(st)}}])&&$(j.prototype,it),tt}()},function(i,o,s){(function(_){const $=s(52),et=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;i.exports=function(tt,j,it,st){let ht,_t,gt=!1,ft=!1;const ut=s(94);function yt(Ft){st(j,Ft)}function Et(Ft,Rt){let Ot=`"${j}" ${Rt}`;throw Ft&&(Ot=`${Ot}`),_t&&(Ot=`${Ot}. An example of a valid value would be: ${_t}`),new $(Ot)}const Mt={convertFromBase64:function(){return yt("marking for base64 conversion"),gt=!0,Mt},default:function(Ft){if(typeof Ft=="number")ht=Ft.toString();else if(Array.isArray(Ft)||typeof Ft=="object"&&Ft!==null)ht=JSON.stringify(Ft);else{if(typeof Ft!="string")throw new $("values passed to default() must be of Number, String, Array, or Object type");ht=Ft}return yt(`setting default value to "${ht}"`),Mt},required:function(Ft){return Ft===void 0?(yt("marked as required"),ft=!0):(yt(`setting required flag to ${Ft}`),ft=Ft),Mt},example:function(Ft){return _t=Ft,Mt}};return Object.entries({...ut,...it}).forEach(([Ft,Rt])=>{Mt[Ft]=function(Ot){return function(){let pt=tt[j];if(yt(`will be read from the environment using "${Ot.name}" accessor`),pt===void 0)if(ht===void 0&&ft)yt("was not found in the environment, but is required to be set"),Et(void 0,"is a required variable, but it was not set");else{if(ht===void 0)return void yt("was not found in the environment, but is not required. returning undefined");yt(`was not found in the environment, parsing default value "${ht}" instead`),pt=ht}ft&&(yt("verifying variable value is not an empty string"),pt.trim().length===0&&Et(void 0,"is a required variable, but its value was empty")),gt&&(yt("verifying variable is a valid base64 string"),pt.match(et)||Et(pt,"should be a valid base64 string if using convertFromBase64"),yt("converting from base64 to utf8 string"),pt=_.from(pt,"base64").toString());const Lt=[pt].concat(Array.prototype.slice.call(arguments));try{yt(`passing value "${pt}" to "${Ot.name}" accessor`);const nn=Ot.apply(Ot,Lt);return yt(`parsed successfully, returning ${nn}`),nn}catch(nn){Et(pt,nn.message)}}}(Rt)}),Mt}}).call(this,s(5).Buffer)},function(i,o,s){const _=s(33);i.exports=function($,et){return et=et||",",$.length?_($).split(et).filter(Boolean):[]}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if($!=="false"&&$!=="true")throw new Error('should be either "true", "false", "TRUE", or "FALSE"');return $!=="false"}},function(i,o,s){i.exports=function(_){const $=_.toLowerCase();if(["false","0","true","1"].indexOf($)===-1)throw new Error('should be either "true", "false", "TRUE", "FALSE", 1, or 0');return!($==="0"||$==="false")}},function(i,o,s){const _=s(95);i.exports=function($){var et=_($);if(et>65535)throw new Error("cannot assign a port number greater than 65535");return et}},function(i,o,s){const _=s(33);i.exports=function($,et){const tt=_($);if(et.indexOf(tt)<0)throw new Error(`should be one of [${et.join(", ")}]`);return tt}},function(i,o,s){const _=s(54);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative float");return et}},function(i,o,s){const _=s(54);i.exports=function($){const et=_($);if(et<0)throw new Error("should be a positive float");return et}},function(i,o,s){const _=s(53);i.exports=function($){const et=_($);if(et>0)throw new Error("should be a negative integer");return et}},function(i,o,s){const _=s(55);i.exports=function($){var et=_($);if(!Array.isArray(et))throw new Error("should be a parseable JSON Array");return et}},function(i,o,s){const _=s(55);i.exports=function($){var et=_($);if(Array.isArray(et))throw new Error("should be a parseable JSON Object");return et}},function(i,o,s){i.exports=function(_,$){try{RegExp(void 0,$)}catch{throw new Error("invalid regexp flags")}try{return new RegExp(_,$)}catch{throw new Error("should be a valid regexp")}}},function(i,o,s){const _=s(96);i.exports=function($){return _($).toString()}},function(i,o,s){const _=s(33),$=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021\u0023-\u005b\u005d-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021-\u005a\u0053-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])+)\])$/;i.exports=function(et){const tt=_(et);if(!$.test(tt))throw new Error("should be a valid email address");return tt}},function(i,o,s){i.exports=function(_,$){return function(et,tt){$&&$.match(/prod|production/)||_(`env-var (${et}): ${tt}`)}}},function(i,o,s){(function(_){(function(){var $,et,tt,j,it,st;typeof performance<"u"&&performance!==null&&performance.now?i.exports=function(){return performance.now()}:_!=null&&_.hrtime?(i.exports=function(){return($()-it)/1e6},et=_.hrtime,j=($=function(){var ht;return 1e9*(ht=et())[0]+ht[1]})(),st=1e9*_.uptime(),it=j-st):Date.now?(i.exports=function(){return Date.now()-tt},tt=Date.now()):(i.exports=function(){return new Date().getTime()-tt},tt=new Date().getTime())}).call(this)}).call(this,s(2))},function(i,o,s){(function(_){(function($){function et(j){if((j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextEncoder': The encoding label provided ('"+j+"') is invalid.")}function tt(j,it){if(it=it===void 0?{fatal:!1}:it,(j=j===void 0?"utf-8":j)!=="utf-8")throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+j+"') is invalid.");if(it.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}if($.TextEncoder&&$.TextDecoder)return!1;Object.defineProperty(et.prototype,"encoding",{value:"utf-8"}),et.prototype.encode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");it=0;for(var st=j.length,ht=0,_t=Math.max(32,st+(st>>1)+7),gt=new Uint8Array(_t>>3<<3);it<st;){var ft=j.charCodeAt(it++);if(55296<=ft&&56319>=ft){if(it<st){var ut=j.charCodeAt(it);(64512&ut)==56320&&(++it,ft=((1023&ft)<<10)+(1023&ut)+65536)}if(55296<=ft&&56319>=ft)continue}if(ht+4>gt.length&&(_t+=8,_t=(_t*=1+it/j.length*2)>>3<<3,(ut=new Uint8Array(_t)).set(gt),gt=ut),(4294967168&ft)==0)gt[ht++]=ft;else{if(!(4294965248&ft))gt[ht++]=ft>>6&31|192;else if(!(4294901760&ft))gt[ht++]=ft>>12&15|224,gt[ht++]=ft>>6&63|128;else{if(4292870144&ft)continue;gt[ht++]=ft>>18&7|240,gt[ht++]=ft>>12&63|128,gt[ht++]=ft>>6&63|128}gt[ht++]=63&ft|128}}return gt.slice(0,ht)},Object.defineProperty(tt.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(tt.prototype,"fatal",{value:!1}),Object.defineProperty(tt.prototype,"ignoreBOM",{value:!1}),tt.prototype.decode=function(j,it){if((it=it===void 0?{stream:!1}:it).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");it=0;for(var st=(j=new Uint8Array(j)).length,ht=[];it<st;){var _t=j[it++];if(_t===0)break;if(!(128&_t))ht.push(_t);else if((224&_t)==192){var gt=63&j[it++];ht.push((31&_t)<<6|gt)}else if((240&_t)==224){gt=63&j[it++];var ft=63&j[it++];ht.push((31&_t)<<12|gt<<6|ft)}else(248&_t)==240&&(65535<(_t=(7&_t)<<18|(gt=63&j[it++])<<12|(ft=63&j[it++])<<6|63&j[it++])&&(_t-=65536,ht.push(_t>>>10&1023|55296),_t=56320|1023&_t),ht.push(_t))}return String.fromCharCode.apply(null,ht)},$.TextEncoder=et,$.TextDecoder=tt})(typeof window<"u"?window:_!==void 0?_:this)}).call(this,s(6))},function(i,o,s){s.r(o),s.d(o,"AuthClient",function(){return et}),s.d(o,"RtcSignalingClient",function(){return j}),s.d(o,"Credentials",function(){return Vt}),s.d(o,"IRtcStream",function(){}),s.d(o,"SignalingPromiseClient",function(){return Xt.SignalingPromiseClient}),s.d(o,"IRtcClientConfigurationV1",function(){}),s.d(o,"IRtcClientConfiguration",function(){}),s.d(o,"IRtcConnectionStatsInfo",function(){}),s.d(o,"IRtcSendConfiguration",function(){}),s.d(o,"IRtcSessionMetricsMessageCounts",function(){}),s.d(o,"IRtcStreamMessage",function(){}),s.d(o,"IRtcStreamPayload",function(){}),s.d(o,"IStreamControl",function(){}),s.d(o,"RtcClient",function(){return as}),s.d(o,"RtcClientV1",function(){return tu}),s.d(o,"createRtcStreamMessage",function(){return Gr});var _=s(28),$=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class et extends _.a{adminSignup($t,en){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/admin-signup",{token:en,method:"POST",body:JSON.stringify($t)})})}login($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login",{method:"POST",body:JSON.stringify($t),allowUnsafeRetries:!0})})}loginWithGoogleToken($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/login-google",{method:"POST",body:JSON.stringify($t),allowUnsafeRetries:!0})})}refresh($t,en){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:$t,tokenExpirationSeconds:en}),allowUnsafeRetries:!0})})}respondToNewPasswordRequiredChallenge($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/respond-to-new-password-required-challenge",{method:"POST",body:JSON.stringify($t)})})}forgotPassword($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/forgot-password",{method:"POST",body:JSON.stringify({email:$t})})})}confirmForgotPassword($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/confirm-forgot-password",{method:"POST",body:JSON.stringify($t)})})}resendInvitation($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/resend-invitation",{method:"POST",body:JSON.stringify({email:$t})})})}changePassword({token:$t,refreshToken:en,currentPassword:dn,newPassword:Cn}){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/change-password",{token:$t,method:"POST",body:JSON.stringify({refreshToken:en,currentPassword:dn,newPassword:Cn})})})}getDeviceCredentials($t){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/device-credentials",{token:$t,method:"POST",allowUnsafeRetries:!0})})}impersonate($t,en){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/impersonate",{token:$t,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({userId:en})})})}createServiceAccount($t,en,dn,Cn){return $(this,void 0,void 0,function*(){return yield this.fetch("auth/service-account",{token:$t,method:"POST",allowUnsafeRetries:!0,body:JSON.stringify({name:en,roleId:dn,tags:Cn})})})}getFeatures($t){return $(this,void 0,void 0,function*(){return(yield this.fetch("auth/features",{token:$t})).features})}}var tt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class j extends _.a{createPeer($t,en){return tt(this,void 0,void 0,function*(){return yield this.fetch("peers",{token:$t,method:"POST",body:JSON.stringify(en)})})}getPeers($t){return tt(this,void 0,void 0,function*(){return(yield this.fetch("peers",{token:$t})).items})}refreshPeer($t,en){return tt(this,void 0,void 0,function*(){yield this.fetch(`peers/${en}/refresh`,{token:$t,method:"POST",allowUnsafeRetries:!0})})}createSession($t,en){return tt(this,void 0,void 0,function*(){return yield this.fetch("sessions",{token:$t,method:"POST",body:JSON.stringify(en)})})}refreshSession($t,en){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${en}/refresh`,{token:$t,method:"POST",allowUnsafeRetries:!0})})}deleteSession($t,en){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${en}`,{token:$t,method:"DELETE",allowUnsafeRetries:!0})})}getSessions($t){return tt(this,void 0,void 0,function*(){return(yield this.fetch("sessions",{token:$t})).items})}getIceServers($t){return tt(this,void 0,void 0,function*(){return(yield this.fetch("ice-servers",{token:$t})).items})}addSignals($t,en,dn){return tt(this,void 0,void 0,function*(){yield this.fetch(`sessions/${en}/add-signals`,{token:$t,method:"POST",body:JSON.stringify(dn)})})}takeSignals($t,en){return tt(this,void 0,void 0,function*(){return(yield this.fetch(`sessions/${en}/take-signals`,{token:$t,method:"POST"})).items})}}var it=s(1),st=s(8),ht=s(14),_t=s.n(ht),gt=s(104),ft=s.n(gt),ut=s(0),yt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Et{constructor($t){this.name="LogReporter",this.type="simple",this.message=$t}send($t){return yt(this,void 0,void 0,function*(){var en,dn;ut.a.info(this.message,(en=$t.reduce((Cn,On)=>Object.assign(Object.assign({},Cn),{[On.name]:On.stat}),{}),dn=Cn=>{const{sum:On,count:or}=Cn,ar=On/or;return Object.assign(Object.assign({},Cn),{average:ar})},Object.keys(en).reduce((Cn,On)=>Object.assign(Object.assign({},Cn),{[On]:dn(en[On])}),{})))})}}var Mt=s(4),Ft=s(39);function Rt(cr){return!!cr.match(/^[a-zA-Z0-9-_.,:?'"()@\/\\#$+ ]{1,255}$/)}var Ot=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};function pt({func:cr,delay:$t,immediate:en}){let dn=!1,Cn=setTimeout(function or(){return Ot(this,void 0,void 0,function*(){if(dn)return;const ar=new Date().getTime();try{On=cr(),yield On}finally{if(!dn){const nr=new Date().getTime();Cn=setTimeout(or,Math.max($t-(nr-ar),0))}}})},en?0:$t),On=Promise.resolve();return{stop(){return Ot(this,void 0,void 0,function*(){dn=!0,clearTimeout(Cn),yield On})}}}var Lt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};const nn=s(226),on=!!Mt.c,wt=new class{constructor(cr){this.samplePeriodSeconds=60,this.buffer={},this.reporters=[],this.flushInterval=pt({func:()=>this.flushStats(),delay:this.samplePeriodSeconds*it.a.second}),this.tags=this.filterTags((cr==null?void 0:cr.tags)||{app:Mt.a,version:Mt.j,namespace:Mt.i,instanceId:Ft.a})}shutdown(){return Lt(this,void 0,void 0,function*(){yield this.flushInterval.stop(),yield this.flushStats(),yield Object(st.a)(2*it.a.second)})}aggregate(cr,$t,en){this.addToBuffer(this.buffer,this.encodeKey({metric:cr,tags:this.filterTags(en||{})}),typeof $t=="number"?{min:$t,max:$t,sum:$t,count:1}:$t)}increment(cr,$t){this.aggregate(cr,1,$t)}timer(cr,$t,en){return Lt(this,void 0,void 0,function*(){const dn=nn(),Cn=yield $t(),On=nn();return this.aggregate(cr,On-dn,en),Cn})}registerStatsReporter(cr){this.reporters.push(cr)}setTag(cr,$t){const en=this.filterTags({[cr]:$t});this.tags=Object.assign(Object.assign({},this.tags),en)}addToBuffer(cr,$t,en){if(cr[$t]){const{min:dn,max:Cn,sum:On,count:or}=cr[$t];cr[$t]={min:Math.min(dn,en.min),max:Math.max(Cn,en.max),sum:On+en.sum,count:or+en.count}}else cr[$t]=en}write(cr){return Lt(this,void 0,void 0,function*(){yield Promise.all(this.reporters.map($t=>Lt(this,void 0,void 0,function*(){let en;const dn={};switch($t.type){case"simple":for(const[On,or]of Object.entries(cr)){const{metric:ar}=this.decodeKey(On);this.addToBuffer(dn,this.encodeKey({metric:ar}),or)}en=dn;break;case"tagged":en=cr;break;default:(function(On){throw new Error(`Unreachable type encountered (${On})`)})($t.type)}const Cn=Object.entries(en);if(Cn.length>0)return $t.send(Cn.map(([On,or])=>{const{metric:ar,tags:nr}=this.decodeKey(On);return{name:ar,tags:Object.assign(Object.assign({},nr),this.tags),stat:or}}),this.samplePeriodSeconds).catch(On=>{ut.a.debug(`Failed to write stats to ${$t.name}`,{error:On})})})))})}flushStats(){return Lt(this,void 0,void 0,function*(){yield this.write(this.buffer),this.buffer={}})}encodeKey(cr){return _t()(Object.assign(Object.assign({},cr),Object.keys(cr.tags||{}).length>0?{tags:cr.tags}:{}))}decodeKey(cr){return JSON.parse(cr)}filterTags(cr){return Object.entries(cr||{}).reduce(($t,[en,dn])=>(Rt(en)&&Rt(dn)&&($t[en]=dn),$t),{})}};on||["local","on-prem"].includes(Mt.i)||wt.registerStatsReporter(new Et("stats"));var xt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Nt extends class{constructor($t){this.options=$t,this.cache=new ft.a(Object.assign(Object.assign(Object.assign({},$t.dispose||$t.disposeAfter?{ttlAutopurge:!0}:{}),$t),{dispose:(...en)=>{var dn;en[2]==="evict"&&wt.increment("lru-eviction",{name:$t.name}),(dn=$t.dispose)===null||dn===void 0||dn.call($t,...en)},disposeAfter:(...en)=>{var dn;this.updateStats(),(dn=$t.disposeAfter)===null||dn===void 0||dn.call($t,...en)}})),this.stringify=$t.fastStringify?JSON.stringify:_t.a}set($t,en,dn){const Cn=this.stringify($t);if(!this.cache.set(Cn,en,{ttl:dn})){const On=this.cache.sizeCalculation?this.cache.sizeCalculation(en,Cn):"unknown";throw Error(`Value too large (${On} > ${this.cache.max})`)}this.updateStats()}get($t){const{name:en}=this.options,dn=this.stringify($t),Cn=this.cache.getRemainingTTL(dn);return Cn<=0?wt.increment("cache-miss",{name:en}):Cn!==1/0&&wt.aggregate("cache-item-ttl",Cn,{name:en}),this.cache.get(dn)}delete($t){this.cache.delete(this.stringify($t))}peek($t){return this.cache.peek(this.stringify($t))}size(){return this.cache.size}clear(){this.cache.clear()}forEach($t){this.cache.forEach($t)}purgeStale(){return this.cache.purgeStale()}updateStats(){const{name:$t}=this.options;wt.aggregate("cache-item-count",this.cache.size,{name:$t}),this.cache.calculatedSize!==void 0&&wt.aggregate("cache-length",this.cache.calculatedSize,{name:$t})}}{constructor($t){if(super($t),this.expireRejectedPromiseValues=$t.expireRejectedPromiseValues===void 0||$t.expireRejectedPromiseValues,this.rejectedPromiseValueTtl=$t.rejectedPromiseValueTtl!==void 0?$t.rejectedPromiseValueTtl:it.a.second,this.rejectedPromiseValueTtl<0)throw new Error("rejectedPromiseValueTtl must not be negative")}set($t,en,dn){super.set($t,en,dn),this.expireRejectedPromiseValues&&en.catch(()=>xt(this,void 0,void 0,function*(){yield Object(st.a)(this.rejectedPromiseValueTtl),this.peek($t)===en&&this.delete($t)}))}}var Tt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Vt{constructor($t,en,dn){this.authClient=$t,this.email=en,this.password=dn,this.tokenTtlMs=1*it.a.hour,this.tokenCache=new Nt({name:"Credentials-tokenCache",max:100,ttl:this.tokenTtlMs-5*it.a.minute,fastStringify:!0})}getToken(){return Tt(this,void 0,void 0,function*(){let $t=this.tokenCache.get(this.email);return $t||($t=(()=>Tt(this,void 0,void 0,function*(){const{authentication:en}=yield this.authClient.login({email:this.email,password:this.password,tokenExpirationSeconds:this.tokenTtlMs/it.a.second});if(!en)throw new Error("User account not verified.");return en.accessToken}))(),this.tokenCache.set(this.email,$t)),$t})}}var Xt=s(97),Gt=s(40),Ut=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Ht extends Gt.a{constructor($t){super($t)}postLanRtcOffer($t){return Ut(this,void 0,void 0,function*(){return yield this.fetch("v1/lan-rtc-offer",{method:"POST",body:JSON.stringify($t)})})}}var qt=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};function Pt(cr){return qt(this,void 0,void 0,function*(){return(yield Promise.all(cr.map($t=>$t.catch(en=>en)))).filter($t=>$t instanceof Error)})}function St(cr){if(cr!==void 0)return cr;throw new Error("Value is undefined")}function Zt(cr,$t){const en=cr.reduce((dn,Cn)=>[...dn,...Cn.urls],[]).filter(dn=>tn(dn,$t)).sort(dn=>mn(dn,"udp")?-1:0).shift();if(en)return Object.assign(Object.assign({},St(cr.find(dn=>dn.urls.includes(en)))),{urls:[en]})}function tn(cr,$t){switch($t){case"stun":return/^stuns?:/.test(cr);case"turn":return/^turns?:/.test(cr)}}function mn(cr,$t){return cr.endsWith(`transport=${$t}`)}var yn=s(9),vn=s(24),un=s(229),rn=s(29);const It={ordered:!1,maxPacketLifeTime:300*it.a.millisecond},Dt={ordered:!0},Kt={ordered:!0},gn={ordered:!1,maxRetransmits:0},hn={ordered:!1,maxRetransmits:0},xn=cr=>"received"in cr&&cr.received!==void 0,Mn=cr=>!("received"in cr)||cr.received===void 0,qn=2*it.a.second;function Ir(cr,$t={}){const en=Array.from(cr.values()),dn=en.filter(xn),Cn=dn.length>0,On=Math.max(...dn.map($n=>$n.received));let or;if(Cn){const $n=en.length,Fn=dn.length,ro=dn.map(ur=>ur.received-ur.sent),{standardDeviation:Ln,mean:En,jitter:Rn}=function(ur){const mr=ur.length;if(mr===0)return{mean:NaN,standardDeviation:-1,jitter:NaN};const hr=ur.reduce((Qr,Hr)=>Qr+Hr,0)/mr,wr=Math.sqrt(ur.map(Qr=>Math.pow(Qr-hr,2)).reduce((Qr,Hr)=>Qr+Hr)/mr);let Br=0;for(let Qr=1;Qr<mr;++Qr)Br+=Math.abs(ur[Qr]-ur[Qr-1]);return{mean:hr,standardDeviation:wr,jitter:Br/(mr-1)}}(ro),Hn=en.filter(ur=>ur.sent<On-qn),Qn=Hn.filter(Mn),lr=Qn.length===0?0:Qn.length/Hn.length;or={pingsSent:$n,pongsReceived:Fn,average:En,standardDeviation:Ln,jitter:Rn,max:Math.max(...ro),min:Math.min(...ro),loss:lr}}else or=null;const{temporalNow:ar=Date.now()}=$t,nr=(Cn?On:ar)-4*qn;return Array.from(cr.entries()).forEach($n=>{const[Fn,ro]=$n;ro.sent<nr&&cr.delete(Fn)}),or}function _i({entityId:cr,streamName:$t,streamType:en}){return`${cr}.${$t}.${en}`}var Ur=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class fo{constructor($t,en){this.sessionId=$t,this.connection=en,this.counts={localSent:new Map,localReceived:new Map,remoteSent:new Map,remoteReceived:new Map},this.sessionId=$t,this.connection=en}updateRemoteMessagesCounts($t){if($t.payload.streamsInfo){this.counts.remoteSent=new Map,this.counts.remoteReceived=new Map;for(const en of $t.payload.streamsInfo.items)this.counts.remoteSent.set(en.streamId,en.sentCount),this.counts.remoteReceived.set(en.streamId,en.receivedCount)}}getLocalStreamsInfo($t){const{localSent:en,localReceived:dn}=this.counts;return{items:[...new Set([...en.keys(),...dn.keys()])].map(Cn=>{var On,or;return{streamId:Cn,sentCount:(On=en.get(Cn))!==null&&On!==void 0?On:0,receivedCount:(or=dn.get(Cn))!==null&&or!==void 0?or:0}}),timestamp:$t}}incrementLocalSent($t){const{localSent:en}=this.counts,dn=_i($t.header.stream);en.set(dn,(en.get(dn)||0)+1)}incrementLocalReceived($t){const{localReceived:en}=this.counts,dn=_i($t.header.stream),Cn=en.get(dn)||0;if(Cn===0){const{streamName:On,streamType:or}=$t.header.stream;ut.a.debug("RTC client received first message for stream",{streamName:On,streamType:or})}en.set(dn,Cn+1)}uploadMetrics(){return Ur(this,void 0,void 0,function*(){const{sessionId:$t}=this,en=yield this.connection.peerConnection.getStats(),dn={};en.forEach($n=>dn[$n.id]=$n),ut.a.debug("rtc-stats",Object.assign(Object.assign({},dn),{sessionId:$t}));const{localSent:Cn,localReceived:On,remoteSent:or,remoteReceived:ar}=this.counts,nr=[...new Set([...Cn.keys(),...On.keys()])].reduce(($n,Fn)=>{const ro=Cn.get(Fn),Ln=On.get(Fn),En=or.get(Fn),Rn=ar.get(Fn);return Object.assign(Object.assign({},$n),{[`local-${Fn}-sent`]:ro,[`local-${Fn}-received`]:Ln,[`remote-${Fn}-sent`]:En,[`remote-${Fn}-received`]:Rn})},{sessionId:$t});ut.a.debug("rtc-message-report",Object.assign({deviceId:this.connection.getRemoteDeviceId()},nr))})}}function Gr(cr,$t,en){return{header:{stream:cr,created:Date.now(),frameId:en||""},payload:$t}}function Yr(cr){return new Set(["disconnected","failed","closed"]).has(cr.iceConnectionState)}function to(cr){switch(cr.header.stream.streamType){case"twist":{const{twist:$t}=cr.payload;if(!$t)throw Error("twist not in payload of RTC message with type twist");return{header:cr.header,payload:{twist:{linear:Object.assign({x:0,y:0,z:0},$t.linear),angular:Object.assign({x:0,y:0,z:0},$t.angular)}}}}case"pose":{const{pose:$t}=cr.payload;if(!$t)throw Error("pose not in payload of RTC message with type pose");return{header:cr.header,payload:{pose:{translation:Object.assign({x:0,y:0,z:0},$t.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},$t.rotation)}}}}case"pose-with-covariance":{const{poseWithCovariance:$t}=cr.payload;if(!$t)throw Error("poseWithCovariance not in payload of RTC message with type pose-with-covariance");const en=new Array(36).fill(0);return $t.covariance.forEach((dn,Cn)=>{if(Cn>=36)throw Error("covariance contains more than 36 elements");en[Cn]=dn}),{header:cr.header,payload:{poseWithCovariance:{pose:{translation:Object.assign({x:0,y:0,z:0},$t.pose.translation),rotation:Object.assign({x:0,y:0,z:0,w:0},$t.pose.rotation)},covariance:en}}}}case"point":{const{point:$t}=cr.payload;if(!$t)throw Error("point not in payload of RTC message with type point");return{header:cr.header,payload:{point:Object.assign({x:0,y:0,z:0},$t)}}}default:return cr}}var Ro=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Mo{constructor($t,en,dn){this.peerConnection=$t,this.config=en,this.dataChannelNotifier=dn,this.connectTimeoutMs=20*it.a.second,this.iceGatheringTimeoutMs=15*it.a.second,this.pingUpdateTimeoutMs=1*it.a.second,this.pingV2UpdateTimeoutMs=250*it.a.millisecond,this.pingV2MetricsGatherTimeoutMs=1*it.a.second,this.streamsInfoUpdateTimeoutMs=2*it.a.second,this.reassemblyTimeoutMs=500*it.a.millisecond,this.reassemblyTableCleanupMs=1*it.a.second,this.heartbeatTimeoutMs=20*it.a.millisecond,this.streamLatestTimestamp=new Map,this.reassemblyTable=new Map,this.reassemblyTableLastTimestamp=new Map,this.closeCalled=!1,this.gotOffer=!1,this.hasIceCandidate=!1,this.pingV2Map=new Map,this.sendPingV2=()=>{const{latestTryOnceStreamChannel:On}=this;if(!On)return;const or=new Date().getTime(),ar=Object(un.a)();this.sendSystemMessage(On,{type:"ping-v2",payload:{timestamp:or,id:ar}}),this.pingV2Map.set(ar,{sent:or})},this.gatherPingV2Metrics=()=>{const On=Ir(this.pingV2Map);On&&(this.pingInfo=On,wt.aggregate("rtc-ping-average",On.average),wt.aggregate("rtc-ping-loss",On.loss),wt.aggregate("rtc-jitter",On.jitter))};const{isOffer:Cn}=en.baseConfig;Cn?this.initializeChannels($t):$t.ondatachannel=On=>{switch(On.channel.label){case"stream.latest-ttl":this.latestTtlStreamChannel=On.channel;break;case"stream.reliable":this.reliableStreamChannel=On.channel;break;case"stream.latest-reliable":this.latestReliableStreamChannel=On.channel;break;case"stream.latest-try-once":this.latestTryOnceStreamChannel=On.channel;break;case"heartbeat":return void(this.heartbeatChannel=On.channel);default:return void this.dataChannelNotifier(On.channel)}this.setupChannel(On.channel)},this.pingUpdateTimeout=setInterval(()=>{const{reliableStreamChannel:On}=this;On&&this.sendSystemMessage(On,{type:"ping"})},this.pingUpdateTimeoutMs),this.pingV2UpdateTimeout=setInterval(this.sendPingV2,this.pingV2UpdateTimeoutMs),this.pingV2MetricsGatherTimeout=setInterval(this.gatherPingV2Metrics,this.pingV2MetricsGatherTimeoutMs),this.streamsInfoUpdateTimeout=setInterval(()=>{const{latestTtlStreamChannel:On}=this;On&&this.sendSystemMessage(On,{type:"streams-info"})},this.streamsInfoUpdateTimeoutMs),this.reassemblyTableCleanupTimeout=setInterval(()=>{const On=new Date().getTime();this.reassemblyTableLastTimestamp.forEach((or,ar,nr)=>{On>ar+this.reassemblyTimeoutMs&&this.reassemblyTable.delete(or)})},this.reassemblyTableCleanupMs),this.heartbeatTimeout=setInterval(()=>{const{heartbeatChannel:On}=this;On&&On.readyState==="open"&&On.send(new Uint8Array([1]))},this.heartbeatTimeoutMs)}handleSignal($t){return Ro(this,void 0,void 0,function*(){const{peerConnection:en}=this,{track:dn}=this.config.baseConfig,Cn=(()=>{try{return JSON.parse($t.getPayload())}catch{return}})();if(!Cn)return void ut.a.error("Received unparseable signal.");ut.a.debug("Handling signal",{description:Cn});const{sdp:On,type:or}=Cn;if(!On||!or)return void ut.a.warn("Received non-SDP signal");const{signalingState:ar,connectionState:nr}=en;if(ar!=="stable"||nr!=="connected")if(en.remoteDescription)ut.a.warn(`Received SDP after remote description was set: ${On}`);else{if(or==="offer"){if(ar!=="stable")return void ut.a.warn("Received offer SDP when signaling is ongoing.");yield en.setRemoteDescription(Cn);const $n=yield en.createAnswer();yield en.setLocalDescription($n);const Fn=$t.clone();return dn==null||dn("Answer Received",Fn),Fn.setPayload(JSON.stringify($n)),Fn.setReceiverId($t.getSenderId()),Fn.setSenderId($t.getReceiverId()),Fn}if(or==="answer"){if(ar==="stable")return void ut.a.warn("Received answer SDP when signaling hasn't started.");yield en.setRemoteDescription(Cn)}}else ut.a.warn(`Received SDP when already connected: ${On}`)})}send($t,en){const dn=this.getChannelFromLabel(en.channelLabel);dn?this.sendOnChannel(dn,$t):ut.a.warn("Send called with unexpected channel label",{channelLabel:en.channelLabel})}controlRemoteStream($t){this.sendSystemMessage(St(this.reliableStreamChannel),{type:"stream-control",streamControl:$t})}isActive(){return new Set(["new","checking","connected","completed"]).has(this.peerConnection.iceConnectionState)||this.isReady()}isReady(){const{reliableStreamChannel:$t,latestTtlStreamChannel:en,latestTryOnceStreamChannel:dn,latestReliableStreamChannel:Cn}=this;return($t==null?void 0:$t.readyState)==="open"&&(en==null?void 0:en.readyState)==="open"&&(dn==null?void 0:dn.readyState)==="open"&&(Cn==null?void 0:Cn.readyState)==="open"}close(){return Ro(this,void 0,void 0,function*(){if(this.closeCalled)return;this.closeCalled=!0,this.sessionMetrics&&(yield this.sessionMetrics.uploadMetrics()),Vo(this.pingUpdateTimeout),Vo(this.pingV2UpdateTimeout),Vo(this.pingV2MetricsGatherTimeout),Vo(this.reassemblyTableCleanupTimeout),Vo(this.streamsInfoUpdateTimeout),Vo(this.heartbeatTimeout);const{peerConnection:$t,reliableStreamChannel:en,latestTtlStreamChannel:dn,latestTryOnceStreamChannel:Cn,latestReliableStreamChannel:On}=this;$t.close(),en==null||en.close(),dn==null||dn.close(),Cn==null||Cn.close(),On==null||On.close()})}getPing(){return this.pingTimeMs}getPingInfo(){return this.pingInfo}getLastMessageTimestamp(){return this.lastMessageTimestamp}getSessionCreatedTimestamp(){var $t;return($t=this.config.remoteConfig)===null||$t===void 0?void 0:$t.sessionCreatedTimestamp}setSessionCreatedTimestamp($t){this.config.remoteConfig&&(this.config.remoteConfig.sessionCreatedTimestamp=$t)}getSessionId(){var $t;return($t=this.config.remoteConfig)===null||$t===void 0?void 0:$t.sessionId}setSessionId($t){this.config.remoteConfig&&(this.config.remoteConfig.sessionId=$t,this.sessionMetrics=new fo($t,this))}getRemotePeerId(){return this.config.baseConfig.remotePeerId}getRemoteDeviceId(){var $t;return($t=this.config.baseConfig)===null||$t===void 0?void 0:$t.remoteDeviceId}setRemoteDeviceId($t){this.config.baseConfig.remoteDeviceId=$t}getSessionMetricsMessageCounts(){var $t;return($t=this.sessionMetrics)===null||$t===void 0?void 0:$t.counts}getConnectionStatsInfo(){return Ro(this,void 0,void 0,function*(){const{peerConnection:$t}=this;if(!$t)return;const en=yield $t.getStats(null),dn=[];en.forEach(nr=>{dn.push(nr)});const Cn=dn.find(nr=>nr.type==="transport");if(!Cn)return;const On=dn.find(nr=>(nr.type==="candidate-pair"||nr.type==="candidatepair")&&nr.id===Cn.selectedCandidatePairId);if(!On)return;const or=dn.find(nr=>nr.id===On.localCandidateId),ar=dn.find(nr=>nr.id===On.remoteCandidateId);return or&&ar&&(or.address=or.address||or.ip,ar.address=ar.address||ar.ip,or.address!==void 0&&ar.address!==void 0)?{transport:Cn,localCandidate:or,remoteCandidate:ar}:void 0})}initializeChannels($t){this.heartbeatChannel=$t.createDataChannel("heartbeat",hn),this.heartbeatChannel.binaryType="arraybuffer",this.latestTtlStreamChannel=$t.createDataChannel("stream.latest-ttl",It),this.latestTtlStreamChannel.binaryType="arraybuffer",this.reliableStreamChannel=$t.createDataChannel("stream.reliable",Dt),this.reliableStreamChannel.binaryType="arraybuffer",this.latestReliableStreamChannel=$t.createDataChannel("stream.latest-reliable",Kt),this.latestReliableStreamChannel.binaryType="arraybuffer",this.latestTryOnceStreamChannel=$t.createDataChannel("stream.latest-try-once",gn),this.latestTryOnceStreamChannel.binaryType="arraybuffer",this.setupChannel(this.latestTtlStreamChannel),this.setupChannel(this.reliableStreamChannel),this.setupChannel(this.latestReliableStreamChannel),this.setupChannel(this.latestTryOnceStreamChannel)}getOffer(){var $t,en,dn;return Ro(this,void 0,void 0,function*(){const{gotOffer:Cn}=this,{peerConnection:On,config:or}=this;if(this.config.baseConfig.isLan)throw new Error('"getOffer" method can only be called with internet connections. LAN connections should call the "getLanOffer" method.');const ar=($t=this.config.remoteConfig)===null||$t===void 0?void 0:$t.sessionId;if(Cn)return void ut.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,Yr(this.peerConnection))return void ut.a.debug("Failed to generate offer because the peer connection was inactive.");const nr=or.baseConfig.track;On.onicecandidate=()=>{this.hasIceCandidate=!0},On.oniceconnectionstatechange=()=>Ro(this,void 0,void 0,function*(){const En=On.iceConnectionState;if(En==="connected"||En==="completed"){const Rn=yield this.getConnectionStatsInfo(),Hn=Rn?function(Qn){const lr=Qn.localCandidate.candidateType,ur=Qn.remoteCandidate.candidateType;return lr==="host"&&ur==="host"?"local":lr==="relay"||ur==="relay"?"TURN":"STUN"}(Rn):void 0;ut.a.info(`ICE connection state changed to ${En}`,{sessionId:ar,connectionStatsInfo:Rn,iceMode:Hn}),nr==null||nr("ICE connection state change",{iceConnectionState:En,sessionId:ar,connectionStatsInfo:Rn,iceMode:Hn})}}),yield On.setLocalDescription(yield On.createOffer());const $n=new Date().getTime();for(;;){const En=new Date().getTime()-$n;if(En>this.connectTimeoutMs)return void ut.a.debug("Failed to generate offer because ICE gathering timed out.");if(En>this.iceGatheringTimeoutMs&&this.hasIceCandidate){ut.a.debug("ICE gathering partially completed; proceeding",{iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En}),nr==null||nr("ICE gathering partially completed",{sessionId:ar,iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En});break}if(On.iceGatheringState==="complete"){ut.a.debug("ICE gathering complete",{iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En}),nr==null||nr("ICE gathering completed",{sessionId:ar,iceTransportPolicy:On.getConfiguration().iceTransportPolicy,waitTime:En});break}yield Object(st.a)(.1*it.a.second)}const Fn=(en=this.peerConnection.getConfiguration().iceServers)!==null&&en!==void 0?en:[];for(const En of Fn)En.credentialType=void 0;const ro=JSON.stringify(Fn),Ln=new yn.Signal;return Ln.setPayload(JSON.stringify(On.localDescription)),Ln.setSenderId(this.config.baseConfig.localPeerId),Ln.setReceiverId(this.config.baseConfig.remotePeerId),Ln.setIceServers(ro),Ln.setIceTransportPolicy((dn=this.peerConnection.getConfiguration().iceTransportPolicy)!==null&&dn!==void 0?dn:"all"),this.config.baseConfig.sessionType!==void 0?Ln.setSessionType(this.config.baseConfig.sessionType):Ln.setSessionType(yn.SessionType.TELEOP),ut.a.debug("Sending offer signal with description",{description:Ln.getPayload()}),Ln})}getLanOffer(){return Ro(this,void 0,void 0,function*(){const{peerConnection:$t,gotOffer:en}=this;if(!this.config.baseConfig.isLan)throw new Error('"getLanOffer" method can only be used with LAN connections. Internet connections should call the "getOffer" method.');if(en)return void ut.a.debug("Failed to generate offer because gotOffer was already called.");if(this.gotOffer=!0,Yr(this.peerConnection))return void ut.a.debug("Failed to generate offer because the peer connection was inactive.");yield $t.setLocalDescription(yield $t.createOffer());const dn=new Date().getTime();for(;;){if(new Date().getTime()-dn>this.iceGatheringTimeoutMs)return void ut.a.debug("Failed to generate offer because ICE gathering timed out.");if($t.iceGatheringState==="complete")break;yield Object(st.a)(.1*it.a.second)}const Cn=$t.localDescription;if(Cn)return ut.a.debug("Sending LAN offer signal with description",{description:Cn}),Cn;ut.a.error("Failed to generate LAN offer description")})}handleLanAnswer($t){return Ro(this,void 0,void 0,function*(){const{peerConnection:en}=this;if(!this.config.baseConfig.isLan)throw new Error('"handleLanAnswer" method can only be used with LAN connections. Internet connections should call the "handleSignal" method.');yield en.setRemoteDescription($t)})}getChannelFromLabel($t){switch($t){case"stream.latest-ttl":return this.latestTtlStreamChannel;case"stream.reliable":return this.reliableStreamChannel;case"stream.latest-reliable":return this.latestReliableStreamChannel;case"stream.latest-try-once":return this.latestTryOnceStreamChannel}}sendOnChannel($t,en){let dn;try{dn=Object(rn.encode)(JSON.stringify(en))}catch(Cn){return void ut.a.warn("Failed to encode RTC message",{error:Cn})}try{$t.send(dn),this.sessionMetrics&&this.sessionMetrics.incrementLocalSent(en)}catch(Cn){ut.a.warn("Failed to send message to channel",{error:Cn,channel:$t.label})}}channelNotRecognized($t){return $t!==this.latestTtlStreamChannel&&$t!==this.latestReliableStreamChannel&&$t!==this.latestTryOnceStreamChannel&&$t!==this.reliableStreamChannel}setupChannel($t){$t.onmessage=en=>{if(this.channelNotRecognized($t))return void ut.a.warn("Received message on unrecognized data channel.");let dn;try{dn=JSON.parse(Object(rn.decode)(en.data))}catch(Cn){return void ut.a.warn("Received unparseable message on RTC stream data channel",{error:Cn,channel:$t.label})}dn.communicationType==="message-chunk"?this.receiveChannelMessageChunk($t,dn):this.receiveChannelMessage($t,dn)},$t.onerror=en=>{ut.a.warn(`Channel error: ${en.error}`,{error:en.error,sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onopen=()=>{ut.a.debug("Channel opened",{sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onclose=()=>{const en={bufferedAmount:$t.bufferedAmount,sessionId:this.getSessionId(),channelLabel:$t.label};this.closeCalled===!1?ut.a.debug("Unexpected channel closed",en):ut.a.debug("Channel closed",en)}}receiveChannelMessage($t,en){const{config:dn}=this,{remotePeerId:Cn}=this.config.baseConfig;this.lastMessageTimestamp=new Date().getTime(),en=to(en),this.sessionMetrics&&this.sessionMetrics.incrementLocalReceived(en),this.handleSystemMessage($t,en)||($t===this.latestTryOnceStreamChannel||$t===this.latestTtlStreamChannel||$t===this.latestReliableStreamChannel)&&!this.isLatestMessage(en)||dn.baseConfig.receive(Cn,en)}receiveChannelMessageChunk($t,en){const dn=this.reassemblyTable.get(en.id)||[];if(dn.push(en),dn.length===en.total){const Cn=function(On){const or=On.sort((ar,nr)=>ar.seq<nr.seq?-1:1).map(ar=>ar.part).reduce((ar,nr)=>ar+nr);try{return JSON.parse(or)}catch{return void ut.a.warn("Could not reassemble RTC message chunks")}}(dn);return Cn&&this.receiveChannelMessage($t,Cn),void this.reassemblyTable.delete(en.id)}this.reassemblyTable.set(en.id,dn),this.reassemblyTableLastTimestamp.set(en.id,new Date().getTime())}handleSystemMessage($t,en){var dn,Cn;const{config:On}=this,{baseConfig:or}=On,{remotePeerId:ar}=or;switch(en.header.stream.streamType){case"ping":return this.sendSystemMessage($t,{type:"pong",timestamp:St(en.payload.ping)}),!0;case"pong":{const nr=new Date().getTime()-St(en.payload.pong);return this.pingTimeMs=nr,wt.aggregate("rtc-ping-time",nr),!0}case"ping-v2":return this.sendPingV2(),!0;case"pong-v2":{const nr=St(en.payload.pongV2),$n=this.pingV2Map.get(nr.id);return($n==null?void 0:$n.sent)!==nr.timestamp?(ut.a.warn("Pong timestamp doesn't match stored value",{currentEntry:$n,pong:nr}),!0):(this.pingV2Map.set(nr.id,{sent:nr.timestamp,received:new Date().getTime()}),!0)}case"streams-info":{const{sessionMetrics:nr}=this,$n=(dn=en.payload.streamsInfo)===null||dn===void 0?void 0:dn.timestamp;return!!$n&&(nr==null||nr.updateRemoteMessagesCounts(en),(Cn=or.onStreamsInfoUpdate)===null||Cn===void 0||Cn.call(or,ar,$n),!0)}case"stream-control":return!0;default:return!1}}sendSystemMessage($t,en){var dn;const{localUserId:Cn,localPeerId:On}=this.config.baseConfig;if($t.readyState!=="open")return;const or={entityId:Cn??On,streamName:`$.${en.type}`,streamType:en.type};let ar;switch(en.type){case"ping":ar={ping:new Date().getTime()};break;case"pong":ar={pong:en.timestamp};break;case"ping-v2":ar={pingV2:en.payload};break;case"pong-v2":ar={pongV2:en.payload};break;case"stream-control":ar={streamControl:en.streamControl};break;case"streams-info":ar={streamsInfo:(dn=this.sessionMetrics)===null||dn===void 0?void 0:dn.getLocalStreamsInfo(new Date().getTime())}}this.sendOnChannel($t,Gr(or,ar))}isLatestMessage($t){const en=_i($t.header.stream),dn=(this.streamLatestTimestamp.get(en)||0)<=$t.header.created;return dn&&this.streamLatestTimestamp.set(en,$t.header.created),dn}}function Vo(cr){cr&&clearInterval(cr)}function Qo(cr){var $t,en;return{userId:($t=cr.getUserId())===null||$t===void 0?void 0:$t.getValue(),deviceId:(en=cr.getDeviceId())===null||en===void 0?void 0:en.getValue(),organizationId:cr.getOrganizationId(),id:cr.getPeerId(),capabilities:[],capabilitySet:{}}}var Io=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class as{constructor($t){this.config=$t,this.grpcCallDeadline=5*it.a.second,this.refreshIntervalDelayMs=2*it.a.second,this.iceServersTtl=30*it.a.minute,this.connections=[],this.localConnections=[],this.isConnectionInitiator=new Map,this.isOutgoingConnection=new Map,this.peerDataChannelListeners=[];const{refreshIntervalDelayMs:en}=this;this.refreshInterval=pt({func:()=>Io(this,void 0,void 0,function*(){try{yield this.update()}catch(dn){ut.a.warn("RTC refresh failed",{error:dn})}}),delay:en,immediate:!0})}send($t,en,dn){const Cn=this.getActiveConnection($t);Cn?Cn.isReady()?Cn.send(en,dn):ut.a.warn("Send called with unready connection."):ut.a.warn("Send called with no connection.")}controlRemoteStream($t,en){const dn=this.getActiveConnection($t);dn?dn.isReady()?dn.controlRemoteStream(en):ut.a.warn("controlRemoteStream called with unready connection."):ut.a.warn("controlRemoteStream called with no connection.")}getLocalPeer(){return Io(this,void 0,void 0,function*(){for(;!this.localPeer;)yield Object(st.a)(.1*it.a.second);return Qo(this.localPeer)})}connect($t,en){var dn,Cn,On;return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode===!0)throw new Error("connect method called in local only mode.");const{track:or,signalingClient:ar}=this.config,{localPeer:nr,receiveSignalStream:$n,iceServers:Fn}=this;if(!nr||!$n||!Fn)return void ut.a.warn("Connect called prior to local peer, receiveSignalStream, and ICE servers ready");if(this.getActiveConnection($t))return void ut.a.warn("Connect called for peer with existing connection.");if(this.isOutgoingConnection.get($t))return void ut.a.warn("Connect called for peer with an existing outgoing connection offer.");this.isOutgoingConnection.set($t,!0);const ro=function(ur,mr,hr){const{rtcIceTransportPolicies:wr,rtcIceServerProtocol:Br,useAllServers:Qr}=mr||{},Hr=ur.map(So=>Object.assign(Object.assign({},So),{urls:So.urls.filter(Eo=>{const Oo=(wr===void 0||wr.some(Lo=>tn(Eo,Lo)))&&(Br===void 0||mn(Eo,Br));return Oo||ut.a.debug(`Ignoring ICE server: ${Eo}`,{organizationId:hr}),Oo})})).filter(({urls:So})=>So.filter(Eo=>Eo).length>0);return Qr?Hr:[Zt(Hr,"stun"),Zt(Hr,"turn")].filter(So=>So!==void 0).map(So=>St(So))}(Fn,en);ut.a.debug("Received ICE servers:",Fn),ut.a.debug("Using ICE servers:",ro);const Ln=new Mo(yield this.createRTCPeerConnection(ro),{baseConfig:{isOffer:!0,isLan:!1,receive:(ur,mr)=>this.config.receive(ur,mr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(ur,mr)=>{var hr,wr;return(wr=(hr=this.config).onStreamsInfoUpdate)===null||wr===void 0?void 0:wr.call(hr,ur,mr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(dn=nr.getUserId())===null||dn===void 0?void 0:dn.getValue(),localPeerId:nr.getPeerId(),remotePeerId:$t,sessionType:this.config.sessionType},remoteConfig:{}},ur=>this.onCustomDataChannel($t,ur)),En=yield Ln.getOffer();if(!En)return ut.a.error("Failed to generate offer."),void this.isOutgoingConnection.delete($t);ut.a.debug("Sending offer."),or==null||or("Sending offer",En);const Rn=new yn.SendSignalRequest;Rn.setSignal(En);const Hn=yield(()=>Io(this,void 0,void 0,function*(){try{return yield ar.sendSignal(Rn,yield this.getMetadata({}))}catch(ur){ut.a.warn("Error when sending signal",{error:ur})}}))();if(!this.isOutgoingConnection.get($t))return void ut.a.debug("No offer set after receiving offer signal response.");ut.a.debug("Offer sent.");const Qn=(Cn=Hn==null?void 0:Hn.getSessionId())===null||Cn===void 0?void 0:Cn.getValue(),lr=(On=Hn==null?void 0:Hn.getSessionCreatedTimestamp())===null||On===void 0?void 0:On.getValue();return Qn&&lr?(Ln.setSessionId(Qn),Ln.setSessionCreatedTimestamp(lr),this.isOutgoingConnection.delete($t),this.connections.push(Ln),this.isConnectionInitiator.set(Ln,!0),this.setupHandlers(Ln),Qn):(ut.a.warn("No session ID or no session created timestamp on send signal response."),void this.isOutgoingConnection.delete($t))})}connectLan($t){var en,dn;return Io(this,void 0,void 0,function*(){const Cn=new Ht($t),On=new Mo(yield this.createRTCPeerConnection([]),{baseConfig:{isOffer:!0,isLan:!0,receive:($n,Fn)=>this.config.receive($n,Fn),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?($n,Fn)=>{var ro,Ln;return(Ln=(ro=this.config).onStreamsInfoUpdate)===null||Ln===void 0?void 0:Ln.call(ro,$n,Fn)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localUserId:(dn=(en=this.localPeer)===null||en===void 0?void 0:en.getUserId())===null||dn===void 0?void 0:dn.getValue(),localPeerId:"lan_client",remotePeerId:$t}},$n=>this.onCustomDataChannel($t,$n)),or=yield On.getLanOffer();if(!or)return ut.a.warn("Could not generate LAN offer"),!1;const ar=yield Cn.postLanRtcOffer({offer:JSON.stringify(or)}),nr=new RTCSessionDescription(JSON.parse(ar.answer));return yield On.handleLanAnswer(nr),this.localConnections.push(On),this.isConnectionInitiator.set(On,!0),Object(un.a)()})}getConnections(){return[...this.connections,...this.localConnections]}createCustomDataChannel($t,en,dn,Cn,On){const or=this.getActiveConnection($t);if(or&&this.isConnectionInitiator.has(or)){const nr=or.peerConnection.createDataChannel("custom."+en,dn);return Cn&&(nr.binaryType="arraybuffer"),On($t,nr),()=>{}}const ar=(nr,$n)=>{$t===nr&&$n.label==="custom."+en&&On($t,$n)};return this.peerDataChannelListeners.push(ar),()=>{this.peerDataChannelListeners=this.peerDataChannelListeners.filter(nr=>nr!==ar)}}onCustomDataChannel($t,en){this.peerDataChannelListeners.forEach(dn=>dn($t,en))}getConnectionStatus($t){if(this.isOutgoingConnection.get($t))return"connecting";const en=this.getActiveConnection($t);return en?en.isReady()?"connected":"connecting":"disconnected"}getConnectionStatsInfo($t){return Io(this,void 0,void 0,function*(){const en=this.getActiveConnection($t);if(en)return yield en.getConnectionStatsInfo()})}disconnect($t){return Io(this,void 0,void 0,function*(){const en=this.getActiveConnection($t);en&&(yield en.close())})}getPeers(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,en=yield(()=>Io(this,void 0,void 0,function*(){try{return yield $t.getPeers(new yn.GetPeersRequest,yield this.getMetadata({}))}catch(On){ut.a.warn("Error when getting peers",{error:On})}}))();if(!en)return[];const dn=en.getPeersList();if(!dn)return[];const Cn=On=>{var or,ar;return(ar=(or=On.getPeerCreatedTimestamp())===null||or===void 0?void 0:or.getValue())!==null&&ar!==void 0?ar:0};return dn.sort((On,or)=>Cn(or)-Cn(On)).map(On=>Qo(On))})}getSessions(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getPeers method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,en=yield(()=>Io(this,void 0,void 0,function*(){try{return yield $t.getPeers(new yn.GetPeersRequest,yield this.getMetadata({}))}catch(On){ut.a.warn("Error when getting peers",{error:On})}}))();if(!en)return{};const dn=en.getPeersList(),Cn={};for(const On of dn)Cn[On.getPeerId()]=On.getSessionIdsList();return Cn})}getPing($t){const en=this.getActiveConnection($t);if(en)return en.getPing();ut.a.warn("Attempted to get ping time from inactive peer.")}getPingInfo($t){const en=this.getActiveConnection($t);if(en)return en.getPingInfo();ut.a.warn("Attempted to get ping time from inactive peer.")}getLastMessageTimestamp($t){const en=this.getActiveConnection($t);if(en)return en.getLastMessageTimestamp();ut.a.warn("Attempted to get last message time from inactive peer.")}getSessionMetricsMessageCounts($t){const en=this.getActiveConnection($t);if(en)return en.getSessionMetricsMessageCounts();ut.a.warn("Attempted to get session metrics counts from inactive peer.")}isReady(){if(this.config.lanOnlyMode)return!0;const{localPeer:$t,receiveSignalStream:en,iceServers:dn}=this;return!!($t&&en&&dn)}shutdown(){return Io(this,void 0,void 0,function*(){ut.a.info("Shutdown called on RTC client"),yield this.refreshInterval.stop(),this.receiveSignalStream&&this.receiveSignalStream.cancel();const $t=this.connections;this.connections=[],yield this.closeConnections($t);const{localPeer:en}=this;if(!en||this.config.lanOnlyMode)return;const{signalingClient:dn}=this.config;yield(()=>Io(this,void 0,void 0,function*(){try{const Cn=new yn.DeletePeerRequest;Cn.setPeerId(en.getPeerId()),yield dn.deletePeer(Cn,yield this.getMetadata({}))}catch(Cn){return void ut.a.warn("Error deleting local peer",{error:Cn})}}))()})}createPeer(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createPeer method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,en=yield(()=>Io(this,void 0,void 0,function*(){try{return yield $t.createPeer(new yn.CreatePeerRequest,yield this.getMetadata({}))}catch(Cn){throw new Error(`Was not able to create peer: ${JSON.stringify(Cn)}`)}}))(),dn=en==null?void 0:en.getPeer();if(!dn)throw new Error("Response did not provide peer.");return this.localPeer=dn})}createReceiveSignalStream(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("createReceiveSignalStream method cannot be used in local-only mode.");const{signalingClient:$t}=this.config,{localPeer:en,iceServers:dn}=this;if(!en||!dn)return;const{receiveSignalStream:Cn}=this;Cn&&Cn.cancel();const On=new yn.ReceiveSignalStreamRequest;On.setPeerId(en.getPeerId());const or=yield(()=>Io(this,void 0,void 0,function*(){try{return $t.receiveSignalStream(On,yield this.getMetadata({hasDeadline:!1}))}catch(ar){throw new Error(`Unable to create receive signal stream: ${JSON.stringify(ar)}`)}}))();if(!or)throw new Error("Response did not provide stream.");return or.on("data",ar=>Io(this,void 0,void 0,function*(){var nr,$n,Fn,ro;const Ln=ar.getSignal(),En=(nr=Ln==null?void 0:Ln.getSessionId())===null||nr===void 0?void 0:nr.getValue(),Rn=Ln==null?void 0:Ln.getSenderId(),Hn=Ln==null?void 0:Ln.getReceiverId(),Qn=($n=Ln==null?void 0:Ln.getSessionCreatedTimestamp())===null||$n===void 0?void 0:$n.getValue();if(!(Ln&&En&&Rn&&Hn&&Qn))return void ut.a.warn("Received signal with missing information.");const lr=this.getActiveConnection(Rn);if(lr)if(lr.getSessionId()!==En){if(ut.a.debug("Received signal: different session for a peer we're already connected to."),(lr.getSessionCreatedTimestamp()||0)>Qn)return;const ur=new Mo(yield this.createRTCPeerConnection(dn),{baseConfig:{isOffer:!1,isLan:!1,receive:(mr,hr)=>this.config.receive(mr,hr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(mr,hr)=>{var wr,Br;return(Br=(wr=this.config).onStreamsInfoUpdate)===null||Br===void 0?void 0:Br.call(wr,mr,hr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:en.getPeerId(),localUserId:(ro=en.getUserId())===null||ro===void 0?void 0:ro.getValue(),remotePeerId:Rn},remoteConfig:{sessionId:En,sessionCreatedTimestamp:Qn}},mr=>this.onCustomDataChannel(Rn,mr));yield ur.handleSignal(Ln),this.connections.push(ur)}else ut.a.debug("Received signal: for an existing connection."),yield lr.handleSignal(Ln);else{ut.a.debug("Received signal: new connection.");const ur=new Mo(yield this.createRTCPeerConnection(dn),{baseConfig:{isOffer:!1,isLan:!1,receive:(mr,hr)=>this.config.receive(mr,hr),onStreamsInfoUpdate:this.config.onStreamsInfoUpdate?(mr,hr)=>{var wr,Br;return(Br=(wr=this.config).onStreamsInfoUpdate)===null||Br===void 0?void 0:Br.call(wr,mr,hr)}:void 0,track:this.config.lanOnlyMode?void 0:this.config.track,localPeerId:en.getPeerId(),localUserId:(Fn=en.getUserId())===null||Fn===void 0?void 0:Fn.getValue(),remotePeerId:Rn},remoteConfig:{sessionId:En,sessionCreatedTimestamp:Qn}},mr=>this.onCustomDataChannel(Rn,mr));yield ur.handleSignal(Ln),this.connections.push(ur)}})),or.on("end",()=>{or.cancel(),this.receiveSignalStream=void 0}),or.on("error",ar=>{switch(ar.code){case vn.StatusCode.CANCELLED:case vn.StatusCode.UNAVAILABLE:case vn.StatusCode.UNKNOWN:ut.a.debug("Receive signal stream error",{error:ar});break;case vn.StatusCode.UNAUTHENTICATED:ut.a.warn("Receive signal stream error",{error:ar});break;default:ut.a.error("Receive signal stream error",{error:ar})}or.cancel(),this.receiveSignalStream=void 0}),this.receiveSignalStream=or})}createRTCPeerConnection($t){var en;return Io(this,void 0,void 0,function*(){const dn=(en=this.config.alternateRTCPeerConnection)!==null&&en!==void 0?en:window.RTCPeerConnection;if(!dn)throw function(){const{userAgent:Cn}=navigator;return Cn.includes("Firefox/")?"Firefox":Cn.includes("Edg/")?"Edge":Cn.includes("Chrome/")?"Chrome":Cn.includes("Safari/")?"Safari":Cn.includes("MSIE/")||Cn.includes("Trident/")?"IE":"Other"}()!=="Chrome"?new Error("WebRTC is not enabled. Please try again with the latest version of Google Chrome."):new Error("WebRTC is not enabled. Please ensure WebRTC is not disabled by ad blocking software.");return new dn({iceServers:$t})})}closeConnections($t){return Io(this,void 0,void 0,function*(){const en=yield Pt($t.map(dn=>Io(this,void 0,void 0,function*(){yield dn.close()})));for(const dn of en)ut.a.warn("Request to close session failed",{error:dn})})}getActiveConnection($t){return this.getConnections().find(en=>en.getRemotePeerId()===$t&&en.isActive())}update(){var $t;return Io(this,void 0,void 0,function*(){if(this.localConnections=this.localConnections.filter(ar=>ar.isActive()),this.config.lanOnlyMode)return;const{signalingClient:en}=this.config;if(!this.localPeer||!this.receiveSignalStream||!this.iceServers)return this.localPeer||(yield this.createPeer()),this.iceServers||(yield this.updateIceServers()),void(this.receiveSignalStream||(yield this.createReceiveSignalStream()));yield this.closeConnections(this.connections.filter(ar=>!ar.isActive())),this.connections=this.connections.filter(ar=>ar.isActive());const{localPeer:dn}=this,Cn=this.connections.filter(ar=>ar.getSessionId).map(ar=>St(ar.getSessionId()));dn.setSessionIdsList(Cn);const On=new yn.RefreshPeerRequest;On.setPeer(dn);try{yield en.refreshPeer(On,yield this.getMetadata({}))}catch(ar){ar.code===vn.StatusCode.NOT_FOUND?(ut.a.warn("Peer expired, creating new peer",{peerId:dn.getPeerId()}),yield this.reset()):ut.a.warn("Error calling RefreshPeer",{error:ar})}const or=yield this.getPeers();for(const ar of this.connections)ar.setRemoteDeviceId(($t=or.find(nr=>nr.id===ar.getRemotePeerId()))===null||$t===void 0?void 0:$t.deviceId)})}reset(){return Io(this,void 0,void 0,function*(){yield this.closeConnections(this.connections),this.connections=[],this.isOutgoingConnection=new Map,yield this.createPeer(),yield this.createReceiveSignalStream()})}updateIceServers(){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)return;const{iceServersLastUpdate:$t,iceServersTtl:en}=this,dn=new Date().getTime();if(!$t||dn-$t>en)try{const Cn=(yield this.config.signalingClient.getIceServers(new yn.GetIceServersRequest,yield this.getMetadata({}))).getIceServers();this.iceServers=JSON.parse(Cn),this.iceServersLastUpdate=dn}catch(Cn){ut.a.warn("Error in updateIceServers",{error:Cn})}})}setupHandlers($t){const{peerConnection:en}=$t,dn=$t.getSessionCreatedTimestamp();en.onconnectionstatechange=()=>Io(this,void 0,void 0,function*(){const Cn=en.connectionState;if(dn)switch(Cn){case"connected":wt.aggregate("rtc-connect-time",new Date().getTime()-dn);break;case"failed":wt.increment("rtc-connect-failed")}})}getMetadata($t){return Io(this,void 0,void 0,function*(){if(this.config.lanOnlyMode)throw new Error("getMetadata method cannot be called in local-only mode");const{getToken:en}=this.config,{grpcCallDeadline:dn}=this,{hasDeadline:Cn}=$t,On=Cn===!1?void 0:new Date().getTime()+dn;return{authorization:yield en(),deadline:On}})}}var Bs=s(10),cs=s(11),Zl=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class Vl{constructor($t,en){this.sessionId=$t,this.connection=en,this.sentMessagesCounts=new Map,this.receivedMessagesCounts=new Map,this.sessionId=$t,this.connection=en}incrementMessageSent($t){const en=_i($t.header.stream);this.sentMessagesCounts.set(en,(this.sentMessagesCounts.get(en)||0)+1)}incrementMessageReceived($t){const en=_i($t.header.stream);this.receivedMessagesCounts.set(en,(this.receivedMessagesCounts.get(en)||0)+1)}uploadMetrics(){return Zl(this,void 0,void 0,function*(){const{sessionId:$t}=this,en=yield this.connection.peerConnection.getStats(),dn={};en.forEach(On=>dn[On.id]=On),ut.a.debug("rtc-stats",Object.assign(Object.assign({},dn),{sessionId:$t}));const Cn=[...new Set(Array.from(this.sentMessagesCounts.keys()).concat(Array.from(this.receivedMessagesCounts.keys())))].reduce((On,or)=>{const ar=this.sentMessagesCounts.get(or),nr=this.receivedMessagesCounts.get(or);return Object.assign(Object.assign({},On),{[`${or}-sent`]:ar,[`${or}-received`]:nr})},{sessionId:$t});ut.a.debug("rtc-message-report",Cn)})}}function zs(cr,$t){return _i(cr)===_i($t)}var vs=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class uu{constructor($t,en){this.peerConnection=$t,this.config=en,this.connectTimeoutMs=10*it.a.second,this.gatherIceTimeoutMs=5*it.a.second,this.pingUpdateTimeoutMs=2*it.a.second,this.streamLatestTimestamp=new Map,this.closeCalled=!1,this.connectCalled=!1,this.sentOffer=!1,this.receivedIceCandidate=!1;const{isOffer:dn}=en;dn?this.initializeChannels($t):$t.ondatachannel=Cn=>{switch(Cn.channel.label){case"stream.latest-ttl":this.latestTtlStreamChannel=Cn.channel;break;case"stream.reliable":this.reliableStreamChannel=Cn.channel;break;case"stream.latest-reliable":this.latestReliableStreamChannel=Cn.channel;break;case"stream.latest-try-once":this.latestTryOnceStreamChannel=Cn.channel}this.setupChannel(Cn.channel)},this.sessionMetrics=new Vl(this.getSessionId(),this)}connect(){return vs(this,void 0,void 0,function*(){if(this.connectCalled)return;this.connectCalled=!0,this.pingUpdateTimeout=setInterval(()=>{const{reliableStreamChannel:Cn}=this;Cn&&this.sendSystemMessage(Cn,{type:"ping"})},this.pingUpdateTimeoutMs),this.connectTimeout=setTimeout(()=>vs(this,void 0,void 0,function*(){this.isReady()||(ut.a.warn("RTC connect timed out, closing connection"),yield this.close())}),this.connectTimeoutMs);const{peerConnection:$t,config:{isOffer:en,sessionId:dn}}=this;if(en){const Cn=yield $t.createOffer();yield $t.setLocalDescription(Cn)}en&&(this.gatherIceTimeout=setTimeout(()=>vs(this,void 0,void 0,function*(){this.sentOffer||(ut.a.warn("ICE gathering timed out"),this.receivedIceCandidate?(ut.a.warn("Attempting to connect with partial ICE candidate pool"),yield this.sendOffer()):yield this.close())}),this.gatherIceTimeoutMs),$t.onicecandidate=Cn=>vs(this,void 0,void 0,function*(){Cn.candidate?this.receivedIceCandidate=!0:yield this.sendOffer()}),$t.onicegatheringstatechange=()=>vs(this,void 0,void 0,function*(){$t.iceGatheringState==="complete"&&(yield this.sendOffer())}),$t.onnegotiationneeded=()=>{ut.a.debug("Negotiation needed",{sessionId:dn})})})}handleSignal($t){return vs(this,void 0,void 0,function*(){const{peerConnection:en,config:{sessionId:dn,sendSignal:Cn}}=this,{description:On}=JSON.parse($t.payload);if(ut.a.debug("Handling signal",{sessionId:dn,description:JSON.stringify(On)}),On)if(en.signalingState!=="stable"||en.connectionState!=="connected")if(en.remoteDescription)ut.a.warn(`Received SDP signal during negotiation when remote description is already set: ${JSON.stringify($t)}`);else if(On.type==="offer"){yield en.setRemoteDescription(On);const or=yield en.createAnswer();yield en.setLocalDescription(or),yield Cn({payload:JSON.stringify({description:or})})}else On.type==="answer"&&(yield en.setRemoteDescription(On));else ut.a.warn(`Received SDP signal when signaling is stable and connected: ${JSON.stringify($t)}`);else ut.a.warn(`Received non-SDP signal: ${JSON.stringify($t)}`)})}send($t,en){const dn=this.getChannelFromLabel(en.channelLabel);dn?this.sendOnChannel(dn,$t):ut.a.warn("Send called with unexpected channel label",{channelLabel:en.channelLabel})}controlRemoteStream($t){this.sendSystemMessage(St(this.reliableStreamChannel),{type:"stream-control",streamControl:$t})}isActive(){return new Set(["new","connecting","connected"]).has(this.peerConnection.connectionState)}isReady(){const{peerConnection:$t,latestTtlStreamChannel:en,reliableStreamChannel:dn,latestTryOnceStreamChannel:Cn}=this;return!!(dn&&en&&Cn)&&$t.connectionState==="connected"&&dn.readyState==="open"&&en.readyState==="open"&&Cn.readyState==="open"}isClosed(){const{peerConnection:$t,reliableStreamChannel:en,latestTryOnceStreamChannel:dn,latestTtlStreamChannel:Cn}=this;return!($t.connectionState!=="closed"||en!==void 0&&en.readyState!=="closed"||dn!==void 0&&dn.readyState!=="closed"||Cn!==void 0&&Cn.readyState!=="closed")}needsClosing(){const{peerConnection:$t,latestTtlStreamChannel:en,reliableStreamChannel:dn,latestTryOnceStreamChannel:Cn}=this;if(this.isClosed())return!1;const On=new Set(["closing","closed"]),or=ar=>ar&&On.has(ar.readyState);return Yr($t)||or(en)||or(dn)||or(Cn)}close(){return vs(this,void 0,void 0,function*(){this.closeCalled||(this.closeCalled=!0,yield this.sessionMetrics.uploadMetrics(),this.pingUpdateTimeout&&clearInterval(this.pingUpdateTimeout),this.connectTimeout&&clearTimeout(this.connectTimeout),this.gatherIceTimeout&&clearTimeout(this.gatherIceTimeout),this.peerConnection.close())})}getPing(){return this.pingTimeMs}getLastMessageTimestamp(){return this.lastMessageTimestamp}getSessionId(){return this.config.sessionId}getRemotePeer(){return this.config.remotePeer}initializeChannels($t){this.latestTtlStreamChannel=$t.createDataChannel("stream.latest-ttl",It),this.reliableStreamChannel=$t.createDataChannel("stream.reliable",Dt),this.latestReliableStreamChannel=$t.createDataChannel("stream.latest-reliable",Kt),this.latestTryOnceStreamChannel=$t.createDataChannel("stream.latest-try-once",gn),this.setupChannel(this.latestTtlStreamChannel),this.setupChannel(this.reliableStreamChannel),this.setupChannel(this.latestReliableStreamChannel),this.setupChannel(this.latestTryOnceStreamChannel)}sendOffer(){return vs(this,void 0,void 0,function*(){if(this.sentOffer||(this.sentOffer=!0,Yr(this.peerConnection)))return;const{peerConnection:$t,config:{sendSignal:en}}=this,dn=yield $t.createOffer();yield $t.setLocalDescription(dn);const Cn={payload:JSON.stringify({description:dn})};yield en(Cn)})}getChannelFromLabel($t){switch($t){case"stream.latest-ttl":return this.latestTtlStreamChannel;case"stream.reliable":return this.reliableStreamChannel;case"stream.latest-reliable":return this.latestReliableStreamChannel;case"stream.latest-try-once":return this.latestTryOnceStreamChannel}}sendOnChannel($t,en){let dn;try{dn=Object(rn.encode)(JSON.stringify(en))}catch(Cn){return void ut.a.warn("Failed to encode RTC message",{error:Cn})}try{$t.send(dn),this.sessionMetrics.incrementMessageSent(en)}catch(Cn){ut.a.warn("Failed to send message to channel",{error:Cn,channel:$t.label})}}channelNotRecognized($t){return $t!==this.latestTtlStreamChannel&&$t!==this.latestReliableStreamChannel&&$t!==this.latestTryOnceStreamChannel&&$t!==this.reliableStreamChannel}setupChannel($t){$t.onmessage=en=>{if(this.channelNotRecognized($t))return void ut.a.warn("Received message on unrecognized data channel.");let dn;try{dn=JSON.parse(Object(rn.decode)(en.data))}catch(Cn){return void ut.a.warn("Received unparseable RTC message",{error:Cn,channel:$t.label})}if(this.lastMessageTimestamp=new Date().getTime(),dn=to(dn),this.sessionMetrics.incrementMessageReceived(dn),!this.handleSystemMessage($t,dn)){if(!this.hasCapabilities(dn))return void ut.a.warn("Received RTC message that was not within the capability scope of the connection.");($t===this.latestTryOnceStreamChannel||$t===this.latestTtlStreamChannel||$t===this.latestReliableStreamChannel)&&!this.isLatestMessage(dn)||this.config.receive(this.config.remotePeer.id,dn)}},$t.onerror=en=>{ut.a.warn(`Channel error: ${en.error}`,{error:en.error,sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onopen=()=>{ut.a.debug("Channel opened",{sessionId:this.getSessionId(),channelLabel:$t.label})},$t.onclose=()=>{const en={bufferedAmount:$t.bufferedAmount,sessionId:this.getSessionId(),channelLabel:$t.label};this.closeCalled===!1?ut.a.debug("Unexpected channel closed",en):ut.a.debug("Channel closed",en)}}handleSystemMessage($t,en){switch(en.header.stream.streamType){case"ping":return this.sendSystemMessage($t,{type:"pong",timestamp:St(en.payload.ping)}),!0;case"pong":{const dn=new Date().getTime()-St(en.payload.pong);return this.pingTimeMs=dn,wt.aggregate("rtc-ping-time",dn),!0}case"stream-control":return!0;default:return!1}}sendSystemMessage($t,en){if($t.readyState!=="open")return;const dn={entityId:St(this.config.localPeer.deviceId||this.config.localPeer.userId),streamName:`$.${en.type}`,streamType:en.type};let Cn;switch(en.type){case"ping":Cn={ping:new Date().getTime()};break;case"pong":Cn={pong:en.timestamp};break;case"stream-control":Cn={streamControl:en.streamControl}}this.sendOnChannel($t,Gr(dn,Cn))}hasCapabilities($t){var en,dn;const{localPeer:Cn,remotePeer:On}=this.config,or=(en=Cn.capabilitySet.streaming)===null||en===void 0?void 0:en.streams,ar=or&&or.some(Fn=>Fn.receive&&zs(Fn.stream,$t.header.stream)),nr=(dn=On.capabilitySet.streaming)===null||dn===void 0?void 0:dn.streams,$n=nr&&nr.some(Fn=>Fn.send&&zs(Fn.stream,$t.header.stream));return ar||$n}isLatestMessage($t){const en=_i($t.header.stream),dn=(this.streamLatestTimestamp.get(en)||0)<=$t.header.created;return dn&&this.streamLatestTimestamp.set(en,$t.header.created),dn}}var No=function(cr,$t,en,dn){return new(en||(en=Promise))(function(Cn,On){function or($n){try{nr(dn.next($n))}catch(Fn){On(Fn)}}function ar($n){try{nr(dn.throw($n))}catch(Fn){On(Fn)}}function nr($n){var Fn;$n.done?Cn($n.value):(Fn=$n.value,Fn instanceof en?Fn:new en(function(ro){ro(Fn)})).then(or,ar)}nr((dn=dn.apply(cr,$t||[])).next())})};class tu{constructor($t){this.config=$t,this.connections=[],this.connectingSessions=new Map,this.updateInterval=pt({func:()=>No(this,void 0,void 0,function*(){try{yield this.update()}catch(en){ut.a.warn("RTC update failed",{error:en})}}),delay:250*it.a.millisecond,immediate:!0}),this.localPeer=this.createPeer()}send($t,en,dn){const Cn=this.getActiveConnection($t);Cn?Cn.isReady()?Cn.send(en,dn):ut.a.warn("Attempted to send with an active connection to that peer which was not yet ready."):ut.a.warn("Attempted to send with no active connection to that peer.")}controlRemoteStream($t,en){const dn=this.getActiveConnection($t);dn?dn.isReady()?dn.controlRemoteStream(en):ut.a.warn("Attempted to control remote stream with an active connection to that peer which was not yet ready."):ut.a.warn("Attempted to control remote stream with no active connection to that peer.")}connect($t){return No(this,void 0,void 0,function*(){const en=yield this.getLocalPeer();if(this.getActiveConnection($t))return void ut.a.warn("Attempted to connect to peer with an already active connection.");let dn;try{dn=yield this.config.signalingClient.createSession(yield this.config.getToken(),{offerPeerId:en.id,answerPeerId:$t})}catch(Cn){Object(Bs.a)(Cn,cs.a,On=>On.statusCode===404),ut.a.warn("Attempted to connect to peer that does not exist.")}if(dn)for(this.connectingSessions.set(dn.id,new Date().getTime()),yield this.connectToSession(dn);;)switch(yield Object(st.a)(.1),this.getConnectionStatus($t)){case"connecting":continue;case"connected":return dn.id;case"disconnected":return}})}getConnectionStatus($t){const en=this.getActiveConnection($t);return en?en.isReady()?"connected":"connecting":"disconnected"}getIceMode($t){const en=this.getActiveConnection($t);if(en)return en.iceMode}disconnect($t){return No(this,void 0,void 0,function*(){const en=this.getActiveConnection($t);en&&(yield this.closeConnection(en))})}getLocalPeer(){return No(this,void 0,void 0,function*(){return yield this.localPeer})}getPeers(){return No(this,void 0,void 0,function*(){return yield this.config.signalingClient.getPeers(yield this.config.getToken())})}getPing($t){const en=this.getActiveConnection($t);if(en)return en.getPing();ut.a.warn("Attempted to get ping time from inactive peer.")}getLastMessageTimestamp($t){const en=this.getActiveConnection($t);if(en)return en.getLastMessageTimestamp();ut.a.warn("Attempted to get ping time from inactive peer.")}shutdown(){return No(this,void 0,void 0,function*(){yield this.updateInterval.stop();const $t=this.connections;this.connections=[],yield this.closeConnections($t)})}closeConnection($t){return No(this,void 0,void 0,function*(){this.connectingSessions.delete($t.getSessionId()),yield $t.close();try{yield this.config.signalingClient.deleteSession(yield this.config.getToken(),$t.getSessionId())}catch(en){Object(Bs.a)(en,cs.a,dn=>dn.statusCode===404)}})}getSessions(){return No(this,void 0,void 0,function*(){const $t=yield this.getLocalPeer();return(yield this.config.signalingClient.getSessions(yield this.config.getToken())).filter(en=>en.offer.peer.id===$t.id||en.answer.peer.id===$t.id)})}createPeer(){return No(this,void 0,void 0,function*(){return yield this.config.signalingClient.createPeer(yield this.config.getToken(),{capabilitySet:this.config.capabilitySet||{}})})}createRTCPeerConnection($t={}){return No(this,void 0,void 0,function*(){return new(this.config.alternateRTCPeerConnection||RTCPeerConnection)(Object.assign({iceServers:yield this.config.signalingClient.getIceServers(yield this.config.getToken())},$t))})}closeConnections($t){return No(this,void 0,void 0,function*(){const en=yield Pt($t.map(dn=>No(this,void 0,void 0,function*(){yield this.closeConnection(dn)})));for(const dn of en)ut.a.warn("Request to close session failed",{error:dn})})}reset(){return No(this,void 0,void 0,function*(){yield this.closeConnections(this.connections),this.connections=[],this.connectingSessions=new Map,this.localPeer=this.createPeer(),yield this.localPeer})}getActiveConnection($t){return this.connections.find(en=>en.getRemotePeer().id===$t&&en.isActive())}update(){return No(this,void 0,void 0,function*(){const $t=yield this.getLocalPeer();try{yield this.config.signalingClient.refreshPeer(yield this.config.getToken(),$t.id)}catch(en){Object(Bs.a)(en,cs.a,dn=>dn.statusCode===404),ut.a.warn("Peer expired, creating new peer",{peerId:$t.id}),yield this.reset()}yield this.handleSessions(yield this.getSessions())})}handleSessions($t){return No(this,void 0,void 0,function*(){yield this.syncConnectionsAndSessions($t);const en=$t.map(dn=>({session:dn,connection:this.connections.find(Cn=>Cn.getSessionId()===dn.id)}));yield Promise.all(en.map(({session:dn,connection:Cn})=>No(this,void 0,void 0,function*(){return yield this.maintainConnection(dn,Cn)})))})}syncConnectionsAndSessions($t){return No(this,void 0,void 0,function*(){const en=new Set($t.map(On=>On.id)),dn=On=>en.has(On.getSessionId())||this.connectingSessions.has(On.getSessionId());this.connections=this.connections.filter(On=>dn(On));const Cn=this.connections.filter(On=>!dn(On)||On.needsClosing());yield Promise.all(Cn.map(On=>No(this,void 0,void 0,function*(){yield this.closeConnection(On)})))})}maintainConnection($t,en){return No(this,void 0,void 0,function*(){const dn=yield this.getLocalPeer(),Cn=$t.offer.peer.id===dn.id;if(en){if(en.isReady())try{yield this.config.signalingClient.refreshSession(yield this.config.getToken(),$t.id)}catch(On){Object(Bs.a)(On,cs.a,or=>or.statusCode===404),ut.a.debug("Refresh session not found",{sessionId:$t.id})}else if(en.isActive())try{yield this.consumeSignals(en)}catch(On){ut.a.warn("Failed to ingest signals, closing connection",{error:On}),yield this.closeConnection(en)}}else{if(Cn)return;yield this.connectToSession($t)}})}connectToSession($t){return No(this,void 0,void 0,function*(){const en=yield this.getLocalPeer(),dn=$t.offer.peer.id===en.id,Cn=yield this.createRTCPeerConnection(),On=new uu(Cn,{localPeer:dn?$t.offer.peer:$t.answer.peer,remotePeer:dn?$t.answer.peer:$t.offer.peer,sessionId:$t.id,isOffer:dn,sendSignal:or=>this.sendSignal($t.id,or),receive:(or,ar)=>this.config.receive(or,ar)});if(this.connections.find(or=>or.getSessionId()===$t.id))return ut.a.warn("connectToSession called on a session that already has a connection.",{sessionId:$t.id}),void(yield On.close());this.setupHandlers(On),this.connections.push(On);try{yield On.connect()}catch(or){ut.a.warn("Failed to handle negotiation, closing connection",{error:or}),yield this.closeConnection(On)}})}setupHandlers($t){const{peerConnection:en}=$t,dn=$t.getSessionId();en.onconnectionstatechange=()=>No(this,void 0,void 0,function*(){const Cn=this.connectingSessions.get(dn);if(Cn===void 0)return;const On=en.connectionState;switch(Yr(en)&&this.connectingSessions.delete(dn),On){case"connected":{this.connectingSessions.delete(dn);const or=new Date().getTime()-Cn;wt.aggregate("rtc-connect-time",or);break}case"failed":wt.increment("rtc-connect-failed"),yield this.closeConnection($t)}})}consumeSignals($t){return No(this,void 0,void 0,function*(){let en=[];try{en=yield this.config.signalingClient.takeSignals(yield this.config.getToken(),$t.getSessionId())}catch(dn){Object(Bs.a)(dn,cs.a,Cn=>Cn.statusCode===404)}for(const dn of en)yield $t.handleSignal(dn)})}sendSignal($t,en){return No(this,void 0,void 0,function*(){try{yield this.config.signalingClient.addSignals(yield this.config.getToken(),$t,{signals:[en]})}catch(dn){Object(Bs.a)(dn,cs.a,Cn=>Cn.statusCode===404)}})}}},function(i,o,s){var _={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let $;const et=new Uint8Array(16);function tt(){if(!$&&($=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $(et)}const j=[];for(let st=0;st<256;++st)j.push((st+256).toString(16).slice(1));function it(st,ht=0){return(j[st[ht+0]]+j[st[ht+1]]+j[st[ht+2]]+j[st[ht+3]]+"-"+j[st[ht+4]]+j[st[ht+5]]+"-"+j[st[ht+6]]+j[st[ht+7]]+"-"+j[st[ht+8]]+j[st[ht+9]]+"-"+j[st[ht+10]]+j[st[ht+11]]+j[st[ht+12]]+j[st[ht+13]]+j[st[ht+14]]+j[st[ht+15]]).toLowerCase()}o.a=function(st,ht,_t){if(_.randomUUID&&!ht&&!st)return _.randomUUID();const gt=(st=st||{}).random||(st.rng||tt)();if(gt[6]=15&gt[6]|64,gt[8]=63&gt[8]|128,ht){_t=_t||0;for(let ft=0;ft<16;++ft)ht[_t+ft]=gt[ft];return ht}return it(gt)}},,function(i,o,s){s.r(o),s.d(o,"LogClient",function(){return j});var _=s(28),$=s(10),et=s(11),tt=function(it,st,ht,_t){return new(ht||(ht=Promise))(function(gt,ft){function ut(Mt){try{Et(_t.next(Mt))}catch(Ft){ft(Ft)}}function yt(Mt){try{Et(_t.throw(Mt))}catch(Ft){ft(Ft)}}function Et(Mt){var Ft;Mt.done?gt(Mt.value):(Ft=Mt.value,Ft instanceof ht?Ft:new ht(function(Rt){Rt(Ft)})).then(ut,yt)}Et((_t=_t.apply(it,st||[])).next())})};class j extends _.a{log(st){return tt(this,void 0,void 0,function*(){const ht=j.token;try{yield this.fetch("logs",{token:ht,method:"POST",body:JSON.stringify({logs:st}),allowUnsafeRetries:!0})}catch(_t){Object($.a)(_t,et.a,gt=>gt.statusCode===401&&ht!==void 0),j.token===ht&&delete j.token,yield this.log(st)}})}}}])})})(dist);function defined(i,o){if(i!==void 0)return i;throw new Error(o||"Value is undefined")}let FORMANT_API_URL="https://api.formant.io";typeof window<"u"&&(FORMANT_API_URL=window.FORMANT_API_URL||FORMANT_API_URL);let urlParams$2=new URLSearchParams("");typeof window<"u"&&(urlParams$2=new URLSearchParams(window.location.search));const envDev=urlParams$2.get("formant_dev");envDev&&(FORMANT_API_URL="https://api-dev.formant.io");const envStage=urlParams$2.get("formant_stage");envStage&&(FORMANT_API_URL="https://api-stage.formant.io");const envLocal=urlParams$2.get("formant_local");envLocal&&(FORMANT_API_URL="https://api.formant.local");let App$1=class{static sendAppMessage(o){window.parent.postMessage(o,"*")}static getCurrentModuleContext(){let o=new URLSearchParams("");return typeof window<"u"&&(o=new URLSearchParams(window.location.search)),o.get("module")}static async getCurrentModuleConfiguration(){let o=new URLSearchParams("");typeof window<"u"&&(o=new URLSearchParams(window.location.search));const s=o.get("configuration");return s===null||s.trim()===""?void 0:(await(await fetch(`${FORMANT_API_URL}/v1/admin/module-configurations/`+s,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).configuration}static isModule(){return this.getCurrentModuleContext()!==null}static goToTime(o){this.sendAppMessage({type:"go_to_time",time:o.getTime()})}static goToDevice(o){this.sendAppMessage({type:"go_to_device",deviceId:o})}static showMessage(o){this.sendAppMessage({type:"show_message",message:o})}static requestModuleData(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"request_module_data",module:o})}static setModuleDateTimeRange(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"set_module_data_time_range",module:_,before:o,after:s||0})}static refreshAuthToken(){const o=this.getCurrentModuleContext();if(!o)throw new Error("No module context");this.sendAppMessage({type:"refresh_auth_token",module:o})}static sendChannelData(o,s){const _=this.getCurrentModuleContext();if(!_)throw new Error("No module context");this.sendAppMessage({type:"send_channel_data",source:_,channel:o,data:s})}static setupModuleMenus(o){const s=this.getCurrentModuleContext();if(!s)throw new Error("No module context");this.sendAppMessage({type:"setup_module_menus",module:s,menus:o})}static addMenuListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_menu_item_clicked"&&o(_.menu)})}static addAccessTokenRefreshListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="auth_token"&&o(_.token)})}static addModuleDataListener(o){const s=this.getCurrentModuleContext();s&&this.sendAppMessage({type:"request_module_data",module:s}),window.addEventListener("message",_=>{const $=_.data;$.type==="module_data"&&o({streams:$.streams,time:$.time,queryRange:$.queryRange})})}static addModuleConfigurationListener(o){window.addEventListener("message",s=>{const _=s.data;_.type==="module_configuration"&&o(_)})}static addChannelDataListener(o,s){window.addEventListener("message",_=>{const $=_.data;$.type==="channel_data"&&$.channel===o&&s({source:$.source,data:$.data})})}static requestOverviewDevices(o){this.sendAppMessage({type:"request_devices"}),window.addEventListener("message",s=>{const _=s.data;o(_)})}};const _Authentication=class{static async login(i,o){try{const s=await fetch(`${FORMANT_API_URL}/v1/admin/auth/login`,{method:"POST",body:JSON.stringify({email:i,password:o}),headers:{"Content-Type":"application/json"}}),_=await s.json();if(s.status!==200)throw new Error(_.message);return await _Authentication.loginWithToken(_.authentication.accessToken,_.authentication.refreshToken),_.authentication}catch(s){return _Authentication.waitingForAuth.forEach(_=>_(!1)),_Authentication.waitingForAuth=[],Promise.reject(s)}}static async loginWithToken(i,o){const s=JSON.parse(atob(i.split(".")[1]));try{let _;if(_Authentication.isShareToken=s["formant:claims"]&&s["formant:claims"].type=="share",s["formant:claims"]&&(_Authentication.currentOrganization=s["formant:claims"].organizationId),s["custom:organization_id"]&&(_Authentication.currentOrganization=s["custom:organization_id"]),_Authentication.isShareToken||(_=s.sub),s["formant:claims"]&&s["formant:claims"].userId&&(_=s["formant:claims"].userId),_){const $=await fetch(`${FORMANT_API_URL}/v1/admin/users/${_}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}}),et=await $.json();if($.status!==200)throw new Error(et.message);_Authentication.currentUser=et}_Authentication.token=i,_Authentication.waitingForAuth.forEach($=>$(!0))}catch(_){console.error(_),_Authentication.waitingForAuth.forEach($=>$(!1))}_Authentication.waitingForAuth=[],o&&(_Authentication.refreshToken=o,setInterval(async()=>{if(_Authentication.refreshToken){const $=await(await fetch(`${FORMANT_API_URL}/v1/admin/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:_Authentication.refreshToken})})).json();_Authentication.token=$.authentication.accessToken}},1e3*60*60))}static isAuthenticated(){return _Authentication.token!==void 0}static getCurrentUser(){return _Authentication.currentUser}static async waitTilAuthenticated(){return _Authentication.token!==void 0?!0:new Promise(i=>{_Authentication.waitingForAuth.push(function(o){i(o)})})}static async listenForRefresh(){App$1.addAccessTokenRefreshListener(i=>{this.loginWithToken(i)}),setInterval(async()=>{App$1.refreshAuthToken()},1e3*60*60)}};let Authentication=_Authentication;__publicField(Authentication,"token");__publicField(Authentication,"refreshToken");__publicField(Authentication,"currentUser");__publicField(Authentication,"currentOrganization");__publicField(Authentication,"isShareToken",!1);__publicField(Authentication,"defaultDeviceId");__publicField(Authentication,"waitingForAuth",[]);function delay(i){return new Promise(o=>setTimeout(o,i))}class DataChannel{constructor(o){__publicField(this,"ready",!1),__publicField(this,"listeners",[]),__publicField(this,"openListeners",[]),__publicField(this,"closeListeners",[]),__publicField(this,"errorListeners",[]),__publicField(this,"binaryListeners",[]),__publicField(this,"error"),__publicField(this,"decoder",new TextDecoder),this.dataChannel=o,this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=()=>{this.ready=!0,this.openListeners.forEach(s=>s())},this.dataChannel.onclose=()=>{this.ready=!1,this.closeListeners.forEach(s=>s())},this.dataChannel.onerror=s=>{console.error(s),this.error="An error occurred in DataChannel",this.errorListeners.forEach(_=>_(s))},this.dataChannel.onmessage=s=>{this.listeners.forEach(_=>{const $=new Uint8Array(s.data),et=this.decoder.decode($);_(et)}),this.binaryListeners.forEach(_=>{_(new Uint8Array(s.data))})}}addOpenListener(o){this.openListeners.push(o)}removeOpenListener(o){this.openListeners=this.openListeners.filter(s=>s!==o)}addCloseListener(o){this.closeListeners.push(o)}removeCloseListener(o){this.closeListeners=this.closeListeners.filter(s=>s!==o)}addErrorListener(o){this.errorListeners.push(o)}removeErrorListener(o){this.errorListeners=this.errorListeners.filter(s=>s!==o)}async waitTilReady(){return this.ready?!0:new Promise((s,_)=>{let $=window.setInterval(()=>{this.ready&&(window.clearInterval($),s(!0)),this.error&&_(this.error)},10)})}send(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}sendBinary(o){if(!this.ready)throw new Error("Connection has been closed");this.dataChannel.send(o)}addListener(o){this.listeners.push(o)}removeListener(o){const s=this.listeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.listeners.splice(s,1)}addBinaryListener(o){this.binaryListeners.push(o)}removeBinaryListener(o){const s=this.binaryListeners.indexOf(o);if(s===-1)throw new Error("Could not find data channel listener to remove");if(this.error)throw new Error(this.error);this.binaryListeners.splice(s,1)}}class CaptureStream{constructor(o){__publicField(this,"token"),this.captureSession=o}async ingestJSON(o){if(!this.token){const _=await(await fetch(`${FORMANT_API_URL}/v1/admin/capture-sessions/${this.captureSession.code}/authenticate`,{method:"POST"})).json();this.token=_.token}await fetch(`${FORMANT_API_URL}/v1/ingest`,{method:"POST",body:JSON.stringify({deviceId:this.captureSession.deviceId,name:this.captureSession.streamName,type:"json",points:[[Date.now(),JSON.stringify(o)]]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}})}}class Manipulator{constructor(o,s){__publicField(this,"currentListeners",[]),__publicField(this,"onRealtimeMessage",(_,$)=>{$.payload.jointState&&this.currentListeners.forEach(et=>{$.payload.jointState&&et($.payload.jointState)})}),this.device=o,this.config=s}async synchronize(){this.device.addRealtimeListener(this.onRealtimeMessage),this.device.startListeningToRealtimeDataStream(this.config.currentJointStateStream)}async desynchronize(){this.device.removeRealtimeListener(this.onRealtimeMessage),this.device.stopListeningToRealtimeDataStream(this.config.currentJointStateStream)}async addCurrentJointStateListener(o){this.currentListeners.push(o)}}class RequestDataChannel{constructor(o,s,_){__publicField(this,"channel"),__publicField(this,"requestIdToResponseMap",new Map),this.device=o,this.channel_name=s,this.timeout=_}addOpenListener(o){defined(this.channel,"channel not initalized").addOpenListener(o)}removeOpenListener(o){defined(this.channel,"channel not initalized").removeOpenListener(o)}addCloseListener(o){defined(this.channel,"channel not initalized").addCloseListener(o)}removeCloseListener(o){defined(this.channel,"channel not initalized").removeCloseListener(o)}addErrorListener(o){defined(this.channel,"channel not initalized").addErrorListener(o)}removeErrorListener(o){defined(this.channel,"channel not initalized").removeErrorListener(o)}}class BinaryRequestDataChannel extends RequestDataChannel{constructor(){super(...arguments),__publicField(this,"RESPONSE_SUCCESS_BYTE",0),__publicField(this,"decoder",new TextDecoder)}generateBinaryId(){const o=new Uint8Array(16);for(let s=0;s<o.length;s++)o[s]=Math.floor(Math.random()*256);return o}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addBinaryListener(o=>{const _=o.slice(0,16).toString();if(_.length===0)throw new Error("Invalid response");const $=o.slice(16);if($.length===0)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,$)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateBinaryId(),tt=et.toString();_.set(tt,!0),s.sendBinary(new Uint8Array([...et,...o]));const j=new Date().getTime();for(;new Date().getTime()<j+$;)if(await delay(50),_.has(tt)){const it=_.get(tt);if(it!==!0){_.delete(tt);const st=it[0]===this.RESPONSE_SUCCESS_BYTE,ht=it.slice(1);if(st)return ht;throw console.error({name:"AdapterError",message:this.decoder.decode(ht)}),new Error("Binary request datachannel adapter error")}}throw _.delete(tt),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Binary request data channel request timed out")}}class TextRequestDataChannel extends RequestDataChannel{generateTextId(){return Math.random().toString(36).substring(2)+"-"+Math.random().toString(36).substring(2)}async initialize(){this.channel=await this.device.createCustomDataChannel(this.channel_name),this.channel.addListener(o=>{const s=JSON.parse(o),{id:_,data:$,error:et}=s;if(!_)throw new Error("Invalid response");if(!$&&!et)throw new Error("Invalid response");this.requestIdToResponseMap.has(_)&&this.requestIdToResponseMap.set(_,s)})}async request(o){if(this.channel||await this.initialize(),!this.channel)throw new Error("Failed to create channel");const{channel:s,requestIdToResponseMap:_,timeout:$}=this;await s.waitTilReady();const et=this.generateTextId();_.set(et,!0),s.send(JSON.stringify({id:et,data:o}));const tt=new Date().getTime();for(;new Date().getTime()<tt+$;)if(await delay(50),_.has(et)){const j=_.get(et);if(j!==!0){_.delete(et);const{data:it,error:st}=j;if(it)return it;if(st)throw console.error({name:"AdapterError",message:st}),new Error("Text request datachannel adapter error")}}throw _.delete(et),console.error({name:"TimeoutError",message:`Request timed out after ${$/1e3} seconds`}),new Error("Text request datachannel request timed out")}}const urlParams$1=new URLSearchParams(window.location.search),rtcClientVersion=urlParams$1.get("rtc_client");class Device{constructor(o,s,_){__publicField(this,"rtcClient"),__publicField(this,"remoteDevicePeerId"),__publicField(this,"realtimeListeners",[]),__publicField(this,"handleMessage",($,et)=>{this.realtimeListeners.forEach(tt=>tt($,et))}),this.id=o,this.name=s,this.organizationId=_}async getLatestTelemetry(){return(await(await fetch(`${FORMANT_API_URL}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}async getConfiguration(){let o=await fetch(`${FORMANT_API_URL}/v1/admin/devices/${this.id}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}});const s=await o.json();if(!s.state.reportedConfiguration)throw new Error("Device has no configuration, has it ever been turned on?");const _=s.state.reportedConfiguration.version;return o=await fetch(`${FORMANT_API_URL}/v1/admin/devices/${this.id}/configurations/${_}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}}),(await o.json()).document}async getFileUrl(o){return(await(await fetch(`${FORMANT_API_URL}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[o]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).fileUrls}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{let s;if(rtcClientVersion==="1"?s=new dist.exports.RtcClientV1({signalingClient:new dist.exports.RtcSignalingClient(FORMANT_API_URL+"/v1/signaling"),getToken:async()=>defined(Authentication.token,"Realtime when user isn't authorized"),receive:this.handleMessage}):s=new dist.exports.RtcClient({signalingClient:new dist.exports.SignalingPromiseClient(FORMANT_API_URL,null,null),getToken:async()=>defined(Authentication.token,"Realtime when user isn't authorized"),receive:this.handleMessage,sessionType:o}),s.isReady)for(;!s.isReady();)await delay(100);const $=(await s.getPeers()).find(et=>et.deviceId===this.id);if(!$)throw new Error("Cannot find peer, is the robot offline?");for(this.remoteDevicePeerId=$.id,await s.connect(this.remoteDevicePeerId);s.getConnectionStatus(this.remoteDevicePeerId)!=="connected";)await delay(100);this.rtcClient=s}}async sendRealtimeMessage(o,s={channelLabel:"stream.reliable"}){const _=defined(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.send(defined($).id,o,s)}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeAudioStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="audio_common_msgs/AudioData"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="audio-chunk"&&it.push({name:st.name});return it}async getRealtimeVideoStreams(){var o,s,_,$,et,tt;const j=await this.getConfiguration(),it=[];for(const st of(s=(o=j.teleop)==null?void 0:o.hardwareStreams)!=null?s:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});for(const st of($=(_=j.teleop)==null?void 0:_.rosStreams)!=null?$:[])st.topicType=="formant/H264VideoFrame"&&it.push({name:st.topicName});for(const st of(tt=(et=j.teleop)==null?void 0:et.customStreams)!=null?tt:[])st.rtcStreamType==="h264-video-frame"&&it.push({name:st.name});return it}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async changeStreamAudioType(o,s){const _=defined(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer();_.controlRemoteStream(defined($).id,{streamName:o,setAudioFormat:s})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){const s=(await defined(this.rtcClient,"Realtime connection has not been started").getPeers()).find(_=>_.deviceId===this.id);return defined(s,"Could not find remote peer for device "+this.id)}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async isInRealtimeSession(){let o=await Fleet.getPeers(),s=await Fleet.getRealtimeSessions(),_=o.find($=>$.deviceId===this.id);return _?s[_.id].length>0:!1}async getAvailableCommands(){return(await(await fetch(`${FORMANT_API_URL}/v1/admin/command-templates/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items.map(_=>({name:_.name,id:_.id,command:_.command,description:_.description,parameterEnabled:_.parameterEnabled,parameterValue:_.parameterValue,parameterMeta:_.parameterMeta,enabled:_.enabled}))}async sendCommand(o,s,_,$){var et;const j=(await this.getAvailableCommands()).find(ht=>ht.name===o);if(!j)throw new Error(`Could not find command with name "${o}"`);let it;if(s===void 0)if(j.parameterEnabled&&j.parameterValue)it=j.parameterValue;else throw new Error("Command has no default parameter value, you must provide one");else it=s;let st={value:it,scrubberTime:(_||new Date).toISOString(),meta:{...j.parameterMeta,...$}};await fetch(`${FORMANT_API_URL}/v1/admin/commands`,{method:"POST",body:JSON.stringify({commandTemplateId:j.id,organizationId:this.organizationId,deviceId:this.id,command:j.command,parameter:st,userId:(et=Authentication.currentUser)==null?void 0:et.id}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})}async createCustomDataChannel(o,s){if(rtcClientVersion==="1")throw new Error("createCustomDataChannel is not supported in rtcClientVersion 1");const _=defined(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined($).id,o,{ordered:!0,...s},!1,(j,it)=>{const st=new DataChannel(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel(this,o,s)}async createCaptureStream(o){const _=await(await fetch(`${FORMANT_API_URL}/v1/admin/capture-sessions`,{method:"POST",body:JSON.stringify({deviceId:this.id,streamName:o,tags:{}}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json();return new CaptureStream(_)}async getTelemetry(o,s,_,$){return await Fleet.getTelemetry(this.id,o,s,_,$)}async getTelemetryStreams(){var o,s;const _=await this.getConfiguration(),$=await fetch(`${FORMANT_API_URL}/v1/queries/metadata/stream-names`,{method:"POST",body:JSON.stringify({deviceIds:[this.id]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}}),et=[],tt=[];return(s=(o=_.telemetry)==null?void 0:o.streams)==null||s.forEach(st=>{st.disabled!==!0&&et.push(st.name),st.onDemand===!0&&tt.push(st.name)}),console.log(tt),(await $.json()).items.filter(st=>!et.includes(st)).map(st=>({name:st,onDemand:tt.includes(st)}))}async createInterventionRequest(o,s,_,$){return await(await fetch(`${FORMANT_API_URL}/v1/admin/intervention-requests`,{method:"POST",body:JSON.stringify({message:o,interventionType:s,time:new Date().toISOString(),deviceId:this.id,tags:$,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()}async addInterventionResponse(o,s,_){return await(await fetch(`${FORMANT_API_URL}/v1/admin/intervention-responses`,{method:"POST",body:JSON.stringify({interventionId:o,interventionType:s,data:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()}}class PeerDevice{constructor(o){__publicField(this,"rtcClient"),__publicField(this,"remoteDevicePeerId"),__publicField(this,"realtimeListeners",[]),__publicField(this,"id"),__publicField(this,"handleMessage",(s,_)=>{this.realtimeListeners.forEach($=>$(s,_))}),this.peerUrl=o}async getLatestTelemetry(){const s=await(await fetch(`${this.peerUrl}/telemetry`)).json();return Object.entries(s).map(([$,et])=>({deviceId:this.id,streamName:$,streamType:"json",currentValue:et,currentValueTime:et.timestamp,tags:{}}))}async getDeviceId(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.id}async getConfiguration(){return(await(await fetch(`${this.peerUrl}/configuration`)).json()).agent_config.document}getRealtimeStatus(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getConnectionStatus(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}getRealtimePing(){if(this.rtcClient&&this.remoteDevicePeerId)return this.rtcClient.getPing(this.remoteDevicePeerId);throw new Error("Realtime connection hasn't been started")}async startRealtimeConnection(o){if(this.rtcClient)throw new Error(`Already created realtime connection to device ${this.id}`);{const s=new dist.exports.RtcClient({lanOnlyMode:!0,receive:this.handleMessage,sessionType:o});for(await s.connectLan(this.peerUrl);s.getConnectionStatus(this.peerUrl)!=="connected";)await delay(100);this.rtcClient=s}}addRealtimeListener(o){this.realtimeListeners.push(o)}removeRealtimeListener(o){const s=this.realtimeListeners.indexOf(o);if(s===-1)throw new Error("Could not find realtime listener to remove");this.realtimeListeners.splice(s,1)}async getRealtimeVideoStreams(){var o,s,_;const $=await this.getConfiguration(),et=[];for(const tt of(o=$.teleop.hardwareStreams)!=null?o:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});for(const tt of(s=$.teleop.rosStreams)!=null?s:[])tt.topicType=="formant/H264VideoFrame"&&et.push({name:tt.topicName});for(const tt of(_=$.teleop.customStreams)!=null?_:[])tt.rtcStreamType==="h264-video-frame"&&et.push({name:tt.name});return et}async getRealtimeManipulators(){var o;const s=await this.getConfiguration(),_=[];for(const $ of(o=s.teleop.rosStreams)!=null?o:[])$.topicType=="sensor_msgs/JointState"&&_.push(new Manipulator(this,{currentJointStateStream:{name:$.topicName},plannedJointStateStream:$.plannedTopic?{name:$.plannedTopic}:void 0,planValidStream:$.planValidTopic?{name:$.planValidTopic}:void 0,endEffectorStream:$.endEffectorTopic?{name:$.endEffectorTopic}:void 0,endEffectorLinkName:$.endEffectorLinkName,baseReferenceFrame:$.baseReferenceFrame,localFrame:$.localFrame}));return _}async startListeningToRealtimeVideo(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeVideo(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async startListeningToRealtimeDataStream(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!0,pipeline:"rtc"})}async stopListeningToRealtimeDataStream(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o.name,enable:!1,pipeline:"rtc"})}async enableRealtimeTelemetryPriorityIngestion(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o,enablePriorityUpload:!0,pipeline:"telemetry"})}async disableRealtimeTelemetryPriorityIngestion(o){const s=defined(this.rtcClient,"Realtime connection has not been started"),_=await this.getRemotePeer();s.controlRemoteStream(defined(_).id,{streamName:o,enablePriorityUpload:!1,pipeline:"telemetry"})}async getRemotePeer(){return{id:this.peerUrl,organizationId:"",deviceId:this.id,capabilities:[],capabilitySet:{}}}async stopRealtimeConnection(){if(this.rtcClient)await this.rtcClient.disconnect(this.id);else throw new Error(`Realtime connection hasn't been started for ${this.id}`)}async createCustomDataChannel(o,s){const _=defined(this.rtcClient,"Realtime connection has not been started"),$=await this.getRemotePeer(),et=await new Promise(tt=>{_.createCustomDataChannel(defined($).id,o,{ordered:!0,...s},!1,(j,it)=>{const st=new DataChannel(it);tt(st)})});return await et.waitTilReady(),et}createCustomRequestDataChannel(o,s=3e3){return new TextRequestDataChannel(this,o,s)}createCustomBinaryRequestDataChannel(o,s=3e3){return new BinaryRequestDataChannel(this,o,s)}}const _Fleet=class{static async setDefaultDevice(i){_Fleet.defaultDeviceId=i}static async getCurrentDevice(){if(!Authentication.token)throw new Error("Not authenticated");if(!_Fleet.defaultDeviceId)throw new Error("No known default device");const _=(await(await fetch(`${FORMANT_API_URL}/v1/admin/device-details/query`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items.find(et=>et.id===_Fleet.defaultDeviceId).name,$=new Device(_Fleet.defaultDeviceId,_,defined(Authentication.currentOrganization));return _Fleet.knownContext.push(new WeakRef($)),$}static async getPeerDevice(i){const o=new PeerDevice(i);return o.id=await o.getDeviceId(),o}static async getDevice(i){if(!Authentication.token)throw new Error("Not authenticated");const s=await(await fetch(`${FORMANT_API_URL}/v1/admin/devices/${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json(),_=s.name,$=new Device(i,_,s.organizationId);return _Fleet.knownContext.push(new WeakRef($)),$}static async getDevices(){if(!Authentication.token)throw new Error("Not authenticated");const o=await(await fetch(`${FORMANT_API_URL}/v1/admin/device-details/query`,{method:"POST",body:JSON.stringify({enabled:!0,type:"default"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json();return o.items,o.items.map(s=>new Device(s.id,s.name,s.organizationId))}static async queryDevices(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/admin/devices/query`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items.map(_=>new Device(_.id,_.name,_.organizationId))}static async getOnlineDevices(){if(!Authentication.token)throw new Error("Not authenticated");const s=(await(await fetch(`${FORMANT_API_URL}/v1/queries/online-devices`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items;return(await _Fleet.getDevices()).filter($=>s.includes($.id))}static async getPeers(){if(!Authentication.token)throw new Error("Not authenticated");return await new dist.exports.RtcClient({signalingClient:new dist.exports.SignalingPromiseClient(FORMANT_API_URL,null,null),getToken:async()=>defined(Authentication.token,"Realtime when user isn't authorized"),receive:()=>{}}).getPeers()}static async getRealtimeSessions(){if(!Authentication.token)throw new Error("Not authenticated");return await new dist.exports.RtcClient({signalingClient:new dist.exports.SignalingPromiseClient(FORMANT_API_URL,null,null),getToken:async()=>defined(Authentication.token,"Realtime when user isn't authorized"),receive:()=>{}}).getSessions()}static async getRealtimeDevices(){if(!Authentication.token)throw new Error("Not authenticated");const s=(await(await fetch(`${FORMANT_API_URL}/v1/signaling/peers`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items.map($=>$.deviceId);return(await _Fleet.getDevices()).filter($=>s.includes($.id))}static async getLatestTelemetry(i){let o=i;return i&&!Array.isArray(i)&&(i=[i]),(await(await fetch(`${FORMANT_API_URL}/v1/queries/stream-current-value`,{method:"POST",body:JSON.stringify({deviceIds:o}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getTelemetry(i,o,s,_,$){let et=i;Array.isArray(i)||(et=[i]);let tt=o;return Array.isArray(o)||(tt=[o]),(await(await fetch(`${FORMANT_API_URL}/v1/queries/queries`,{method:"POST",body:JSON.stringify({deviceIds:et,end:_.toISOString(),names:tt,start:s.toISOString(),tags:$}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getFileUrl(i){const s=await(await fetch(`${FORMANT_API_URL}/v1/admin/files/query`,{method:"POST",body:JSON.stringify({fileIds:[i]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json();if(s.fileUrls.length===0)throw new Error("File not found");return s.fileUrls[0]}static async queryTelemetry(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/queries/queries`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async aggregateTelemetry(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/queries/queries`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).aggregates}static async queryEvents(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/admin/events/query`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getEvent(i){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/admin/events/query/id=${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getInterventions(){if(!Authentication.token)throw new Error("Not authenticated");return(await(await fetch(`${FORMANT_API_URL}/v1/admin/intervention-requests`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}})).json()).items}static async getCurrentGroup(){if(!Authentication.token)throw new Error("Not authenticated");let i=new URLSearchParams("");typeof window<"u"&&(i=new URLSearchParams(window.location.search));const o=i.get("group");if(o===null||o.trim()==="")return;const s=await fetch(`${FORMANT_API_URL}/v1/admin/groups/`+o,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+Authentication.token}}),{tagKey:_,tagValue:$}=await s.json();return await this.queryDevices({tags:{[_]:[$]},enabled:!0,type:"default"})}};let Fleet=_Fleet;__publicField(Fleet,"defaultDeviceId");__publicField(Fleet,"knownContext",[]);let urlParams=new URLSearchParams("");typeof window<"u"&&(urlParams=new URLSearchParams(window.location.search));const urlDevice=urlParams.get("device");urlDevice&&Fleet.setDefaultDevice(urlDevice);const urlAuth=urlParams.get("auth");urlAuth&&Authentication.loginWithToken(urlAuth);const moduleName=urlParams.get("module");moduleName&&Authentication.listenForRefresh();dist.exports.IRtcSendConfiguration;dist.exports.IRtcStreamMessage;dist.exports.IRtcStreamPayload;const SECONDS$1=1e3,generateFeaturesObject=i=>({type:"FeatureCollection",features:i.map(o=>({type:"Feature",properties:{weight:o.weight??50},geometry:{type:"Point",coordinates:[o.longitude,o.latitude]}}))}),getEvents=async(i,o)=>{try{return await Authentication.waitTilAuthenticated()?await Fleet.queryEvents({names:[i],deviceIds:[o]}):[]}catch(s){throw s}},getDataPoints=async(i,o,s,_,$)=>{try{if(await Authentication.waitTilAuthenticated())return await Fleet.queryTelemetry({start:s,end:_,names:[i,$??""],deviceIds:[o]})}catch(et){console.log(et)}},generateStreamsMap=i=>i.reduce((o,s)=>s.type==="location"?(o.locationStream=s.points,o):(o.numericStream=s.points,o),{locationStream:[],numericStream:[]}),areDatapointsWithInValidRange=(i,o)=>Math.abs(i)>=o*SECONDS$1,updateDifference=(i,o)=>i<o?i:o,isoDateToMilliseconds=i=>new Date(i).getTime(),millisecondsToISODate=i=>new Date(i).toISOString(),SECONDS=1e3,MINUTES=60*SECONDS,HOURS=MINUTES*60,handleNumericStream=(i,o=MINUTES*1)=>{const s=generateStreamsMap(i),_=[];let $=0,et=0;return s.locationStream.forEach((tt,j)=>{const it=s.numericStream[$][0],st=tt[0],ht=it-st;areDatapointsWithInValidRange(ht,o)&&(ht<0&&(Math.abs(ht)<et?_.push({latitude:tt[1].latitude,longitude:tt[1].longitude,weight:s.numericStream[$][1]}):_.push({latitude:s.locationStream[j-1][1].latitude,longitude:s.locationStream[j-1][1].longitude,weight:s.numericStream[$][1]}),$+=1,$===s.numericStream.length&&($=s.numericStream.length-1),et=0),et=updateDifference(ht,et))}),_},handleConfiguration=async(i,o,s)=>{let _={start:"",end:""};const{start:$,end:et}=i;switch($.type){case"Event":const tt=await getEvents($.value,o);tt.length<1&&console.error("No events");const j=isoDateToMilliseconds(tt[0].createdAt);_.start=j;break;case"timeRange":_.start=s-HOURS*$.hours;break}switch(et.type){case"Annotation":let tt=await getEvents($.value,o);tt.length<1&&console.error("No events"),_.start=tt[0].createdAt,_.end=tt[0].endTime;break;case"Event":tt=await getEvents(et.value,o),tt.length<1&&console.error("No events"),_.end=isoDateToMilliseconds(tt[0].createdAt);break;case"scrubber":_.end=s;break;case"timeRange":_.end=_.start+HOURS*et.hours;break}return Number.isNaN(_.start)||!_.end?null:(_.start=millisecondsToISODate(_.start),_.end=millisecondsToISODate(_.end),_)},useDataPoints=()=>{const i=useDevice(),s=useFormant().configuration,_=useScruberTime(),[$,et]=reactExports.useState([]),[tt,j]=reactExports.useState(),[it,st]=reactExports.useState();return reactExports.useEffect(()=>{s&&(s.end.type==="scrubber"||!i||handleConfiguration(s,i.id).then(ht=>{ht!==null&&(j(ht.start),st(ht.end))}))},[s]),reactExports.useEffect(()=>{!s||s.end.type!=="scrubber"||!i||handleConfiguration(s,i.id,_).then(ht=>{ht!==null&&(j(ht.start),st(ht.end))})},[s,_,i]),reactExports.useEffect(()=>{if(!tt||!it||!s)return;const{locationStream:ht,numericStream:_t}=s;getDataPoints(ht,i.id,tt,it,_t).then(gt=>{if(gt===void 0){console.warn("No streams");return}if(gt.length===0){et([]);return}if(_t){const ft=handleNumericStream(gt,s.maxSecondsBetweenDatapoints);et(ft);return}et(gt[0].points.map(ft=>ft[1]))})},[i,tt,it]),$},useFeatures=i=>{const[o,s]=reactExports.useState({type:"FeatureCollection",features:[]});return reactExports.useEffect(()=>{i.length<1||s({...generateFeaturesObject(i)})},[i]),o},DEFAULT_DISTINCT_ZOOM_LEVEL=15,HeatmapLayer=({map:i,featureCollection:o,distinctZoomLevel:s,circleRadius:_})=>{const[$,et]=reactExports.useState(!1);return reactExports.useLayoutEffect(()=>{i&&(i.on("load",()=>{i.addSource("numeric",{type:"geojson",data:o}),i.addLayer({id:"numeric-heat",type:"heatmap",source:"numeric",maxzoom:24,paint:{"heatmap-weight":{property:"weight",type:"exponential",stops:[[1,0],[100,1]]},"heatmap-intensity":{stops:[[15,1]]},"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(236,222,239,0)",.2,"rgb(169,97,228)",.4,"rgb(46,196,149)",.6,"rgb(249,195,110)",.8,"rgb(234,113,157)"],"heatmap-radius":{stops:[[11,s??15],[15,s?s+2:20]]},"heatmap-opacity":{default:1,stops:[[s?s-1:DEFAULT_DISTINCT_ZOOM_LEVEL-1,1],[s??DEFAULT_DISTINCT_ZOOM_LEVEL+1,0]]}}},"waterway-label"),i.addLayer({id:"numeric-point",type:"circle",source:"numeric",minzoom:s?s-1:DEFAULT_DISTINCT_ZOOM_LEVEL-1,paint:{"circle-radius":{property:"weight",type:"exponential",stops:[[{zoom:DEFAULT_DISTINCT_ZOOM_LEVEL,value:1},_??5],[{zoom:22,value:100},_??20]]},"circle-color":{property:"weight",type:"exponential",stops:[[0,"rgba(236,222,239,0)"],[25,"rgb(169,97,228)"],[50,"rgb(46,196,149)"],[75,"rgb(249,195,110)"],[100,"rgb(234,113,157)"]]},"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":{stops:[[14,0],[15,1]]}}},"waterway-label")}),et(!0))},[i]),reactExports.useLayoutEffect(()=>{!i||o.features.length<1||!$||setTimeout(()=>{const tt=i.getSource("numeric");i.addLayer,tt&&(tt.setData(o),i.flyTo({center:o.features[0].geometry.coordinates,zoom:DEFAULT_DISTINCT_ZOOM_LEVEL-3,duration:5e3,essential:!0}))},3e3)},[JSON.stringify(o.features),$]),jsx(Fragment,{})},DetailsCard=({map:i})=>{const s=useFormant().configuration,[_,$]=reactExports.useState(1);return reactExports.useEffect(()=>{if(!i)return;const et=document.getElementById("card");setTimeout(()=>{i.on("mouseover","numeric-point",tt=>{const{x:j,y:it}=tt.point;if($(1),s.numericStream){const{weight:st}=tt.features[0].properties;$(st)}et.style.top=`${it}px`,et.style.left=`${j}px`,et.style.opacity="1",et.style.zIndex="2"}),i.on("mouseout","numeric-point",tt=>{et.style.opacity="0",et.style.zIndex="-1"})},6e3)},[i]),jsx("div",{id:"card",className:styles$1.card,children:jsx(Typography$1,{children:`${s.tooltipLabel??"Weight"}: ${_}`})})};function App(){const o=useFormant().configuration,s=useDataPoints(),_=useFeatures(s),$=reactExports.useRef(null),et=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{et.current||!o||(et.current=new mapboxgl.Map({accessToken:o.mapboxKey??"pk.eyJ1IjoiYWxlbmpkZXYiLCJhIjoiY2t3NWt5ZmExMTcxMDJvbW5kdDR2eGs1diJ9.aYT7nc_i5rp2hY4dt3CLrw",container:$.current,style:"mapbox://styles/alenjdev/ckwcflbv8201814n10hxbqz6q",center:[(o==null?void 0:o.longitude)??-77.47419738769531,(o==null?void 0:o.latitude)??39.043701171875],zoom:o.zoom&&o.latitude&&o.longitude?o.zoom:0}))},[o]),jsx("div",{className:styles$1.app,children:o?jsxs(Fragment,{children:[jsx("div",{ref:$,className:styles$1["map-container"]}),jsx(HeatmapLayer,{map:et.current,featureCollection:_,distinctZoomLevel:o.distinctZoomLevel,circleRadius:o.circleRadius}),jsx(DetailsCard,{map:et.current})]}):jsx(LoadingIndicator,{})})}var Subscribable=function(){function i(){this.listeners=[]}var o=i.prototype;return o.subscribe=function(_){var $=this,et=_||function(){};return this.listeners.push(et),this.onSubscribe(),function(){$.listeners=$.listeners.filter(function(tt){return tt!==et}),$.onUnsubscribe()}},o.hasListeners=function(){return this.listeners.length>0},o.onSubscribe=function(){},o.onUnsubscribe=function(){},i}(),isServer=typeof window>"u";function noop(){}function functionalUpdate(i,o){return typeof i=="function"?i(o):i}function isValidTimeout(i){return typeof i=="number"&&i>=0&&i!==1/0}function ensureQueryKeyArray(i){return Array.isArray(i)?i:[i]}function timeUntilStale(i,o){return Math.max(i+(o||0)-Date.now(),0)}function parseQueryArgs(i,o,s){return isQueryKey(i)?typeof o=="function"?_extends$1({},s,{queryKey:i,queryFn:o}):_extends$1({},o,{queryKey:i}):i}function parseFilterArgs(i,o,s){return isQueryKey(i)?[_extends$1({},o,{queryKey:i}),s]:[i||{},o]}function mapQueryStatusFilter(i,o){if(i===!0&&o===!0||i==null&&o==null)return"all";if(i===!1&&o===!1)return"none";var s=i??!o;return s?"active":"inactive"}function matchQuery(i,o){var s=i.active,_=i.exact,$=i.fetching,et=i.inactive,tt=i.predicate,j=i.queryKey,it=i.stale;if(isQueryKey(j)){if(_){if(o.queryHash!==hashQueryKeyByOptions(j,o.options))return!1}else if(!partialMatchKey(o.queryKey,j))return!1}var st=mapQueryStatusFilter(s,et);if(st==="none")return!1;if(st!=="all"){var ht=o.isActive();if(st==="active"&&!ht||st==="inactive"&&ht)return!1}return!(typeof it=="boolean"&&o.isStale()!==it||typeof $=="boolean"&&o.isFetching()!==$||tt&&!tt(o))}function matchMutation(i,o){var s=i.exact,_=i.fetching,$=i.predicate,et=i.mutationKey;if(isQueryKey(et)){if(!o.options.mutationKey)return!1;if(s){if(hashQueryKey(o.options.mutationKey)!==hashQueryKey(et))return!1}else if(!partialMatchKey(o.options.mutationKey,et))return!1}return!(typeof _=="boolean"&&o.state.status==="loading"!==_||$&&!$(o))}function hashQueryKeyByOptions(i,o){var s=(o==null?void 0:o.queryKeyHashFn)||hashQueryKey;return s(i)}function hashQueryKey(i){var o=ensureQueryKeyArray(i);return stableValueHash(o)}function stableValueHash(i){return JSON.stringify(i,function(o,s){return isPlainObject(s)?Object.keys(s).sort().reduce(function(_,$){return _[$]=s[$],_},{}):s})}function partialMatchKey(i,o){return partialDeepEqual(ensureQueryKeyArray(i),ensureQueryKeyArray(o))}function partialDeepEqual(i,o){return i===o?!0:typeof i!=typeof o?!1:i&&o&&typeof i=="object"&&typeof o=="object"?!Object.keys(o).some(function(s){return!partialDeepEqual(i[s],o[s])}):!1}function replaceEqualDeep(i,o){if(i===o)return i;var s=Array.isArray(i)&&Array.isArray(o);if(s||isPlainObject(i)&&isPlainObject(o)){for(var _=s?i.length:Object.keys(i).length,$=s?o:Object.keys(o),et=$.length,tt=s?[]:{},j=0,it=0;it<et;it++){var st=s?it:$[it];tt[st]=replaceEqualDeep(i[st],o[st]),tt[st]===i[st]&&j++}return _===et&&j===_?i:tt}return o}function isPlainObject(i){if(!hasObjectPrototype(i))return!1;var o=i.constructor;if(typeof o>"u")return!0;var s=o.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(i){return Object.prototype.toString.call(i)==="[object Object]"}function isQueryKey(i){return typeof i=="string"||Array.isArray(i)}function sleep(i){return new Promise(function(o){setTimeout(o,i)})}function scheduleMicrotask(i){Promise.resolve().then(i).catch(function(o){return setTimeout(function(){throw o})})}function getAbortController(){if(typeof AbortController=="function")return new AbortController}var FocusManager=function(i){_inheritsLoose(o,i);function o(){var _;return _=i.call(this)||this,_.setup=function($){var et;if(!isServer&&((et=window)!=null&&et.addEventListener)){var tt=function(){return $()};return window.addEventListener("visibilitychange",tt,!1),window.addEventListener("focus",tt,!1),function(){window.removeEventListener("visibilitychange",tt),window.removeEventListener("focus",tt)}}},_}var s=o.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){if(!this.hasListeners()){var $;($=this.cleanup)==null||$.call(this),this.cleanup=void 0}},s.setEventListener=function($){var et,tt=this;this.setup=$,(et=this.cleanup)==null||et.call(this),this.cleanup=$(function(j){typeof j=="boolean"?tt.setFocused(j):tt.onFocus()})},s.setFocused=function($){this.focused=$,$&&this.onFocus()},s.onFocus=function(){this.listeners.forEach(function($){$()})},s.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},o}(Subscribable),focusManager=new FocusManager,OnlineManager=function(i){_inheritsLoose(o,i);function o(){var _;return _=i.call(this)||this,_.setup=function($){var et;if(!isServer&&((et=window)!=null&&et.addEventListener)){var tt=function(){return $()};return window.addEventListener("online",tt,!1),window.addEventListener("offline",tt,!1),function(){window.removeEventListener("online",tt),window.removeEventListener("offline",tt)}}},_}var s=o.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){if(!this.hasListeners()){var $;($=this.cleanup)==null||$.call(this),this.cleanup=void 0}},s.setEventListener=function($){var et,tt=this;this.setup=$,(et=this.cleanup)==null||et.call(this),this.cleanup=$(function(j){typeof j=="boolean"?tt.setOnline(j):tt.onOnline()})},s.setOnline=function($){this.online=$,$&&this.onOnline()},s.onOnline=function(){this.listeners.forEach(function($){$()})},s.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},o}(Subscribable),onlineManager=new OnlineManager;function defaultRetryDelay(i){return Math.min(1e3*Math.pow(2,i),3e4)}function isCancelable(i){return typeof(i==null?void 0:i.cancel)=="function"}var CancelledError=function i(o){this.revert=o==null?void 0:o.revert,this.silent=o==null?void 0:o.silent};function isCancelledError(i){return i instanceof CancelledError}var Retryer=function i(o){var s=this,_=!1,$,et,tt,j;this.abort=o.abort,this.cancel=function(gt){return $==null?void 0:$(gt)},this.cancelRetry=function(){_=!0},this.continueRetry=function(){_=!1},this.continue=function(){return et==null?void 0:et()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(gt,ft){tt=gt,j=ft});var it=function(ft){s.isResolved||(s.isResolved=!0,o.onSuccess==null||o.onSuccess(ft),et==null||et(),tt(ft))},st=function(ft){s.isResolved||(s.isResolved=!0,o.onError==null||o.onError(ft),et==null||et(),j(ft))},ht=function(){return new Promise(function(ft){et=ft,s.isPaused=!0,o.onPause==null||o.onPause()}).then(function(){et=void 0,s.isPaused=!1,o.onContinue==null||o.onContinue()})},_t=function gt(){if(!s.isResolved){var ft;try{ft=o.fn()}catch(ut){ft=Promise.reject(ut)}$=function(yt){if(!s.isResolved&&(st(new CancelledError(yt)),s.abort==null||s.abort(),isCancelable(ft)))try{ft.cancel()}catch{}},s.isTransportCancelable=isCancelable(ft),Promise.resolve(ft).then(it).catch(function(ut){var yt,Et;if(!s.isResolved){var Mt=(yt=o.retry)!=null?yt:3,Ft=(Et=o.retryDelay)!=null?Et:defaultRetryDelay,Rt=typeof Ft=="function"?Ft(s.failureCount,ut):Ft,Ot=Mt===!0||typeof Mt=="number"&&s.failureCount<Mt||typeof Mt=="function"&&Mt(s.failureCount,ut);if(_||!Ot){st(ut);return}s.failureCount++,o.onFail==null||o.onFail(s.failureCount,ut),sleep(Rt).then(function(){if(!focusManager.isFocused()||!onlineManager.isOnline())return ht()}).then(function(){_?st(ut):gt()})}})}};_t()},NotifyManager=function(){function i(){this.queue=[],this.transactions=0,this.notifyFn=function(s){s()},this.batchNotifyFn=function(s){s()}}var o=i.prototype;return o.batch=function(_){var $;this.transactions++;try{$=_()}finally{this.transactions--,this.transactions||this.flush()}return $},o.schedule=function(_){var $=this;this.transactions?this.queue.push(_):scheduleMicrotask(function(){$.notifyFn(_)})},o.batchCalls=function(_){var $=this;return function(){for(var et=arguments.length,tt=new Array(et),j=0;j<et;j++)tt[j]=arguments[j];$.schedule(function(){_.apply(void 0,tt)})}},o.flush=function(){var _=this,$=this.queue;this.queue=[],$.length&&scheduleMicrotask(function(){_.batchNotifyFn(function(){$.forEach(function(et){_.notifyFn(et)})})})},o.setNotifyFunction=function(_){this.notifyFn=_},o.setBatchNotifyFunction=function(_){this.batchNotifyFn=_},i}(),notifyManager=new NotifyManager,logger$1=console;function getLogger(){return logger$1}function setLogger(i){logger$1=i}var Query=function(){function i(s){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.cache=s.cache,this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.initialState=s.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=s.meta,this.scheduleGc()}var o=i.prototype;return o.setOptions=function(_){var $;this.options=_extends$1({},this.defaultOptions,_),this.meta=_==null?void 0:_.meta,this.cacheTime=Math.max(this.cacheTime||0,($=this.options.cacheTime)!=null?$:5*60*1e3)},o.setDefaultOptions=function(_){this.defaultOptions=_},o.scheduleGc=function(){var _=this;this.clearGcTimeout(),isValidTimeout(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){_.optionalRemove()},this.cacheTime))},o.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},o.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},o.setData=function(_,$){var et,tt,j=this.state.data,it=functionalUpdate(_,j);return(et=(tt=this.options).isDataEqual)!=null&&et.call(tt,j,it)?it=j:this.options.structuralSharing!==!1&&(it=replaceEqualDeep(j,it)),this.dispatch({data:it,type:"success",dataUpdatedAt:$==null?void 0:$.updatedAt}),it},o.setState=function(_,$){this.dispatch({type:"setState",state:_,setStateOptions:$})},o.cancel=function(_){var $,et=this.promise;return($=this.retryer)==null||$.cancel(_),et?et.then(noop).catch(noop):Promise.resolve()},o.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},o.reset=function(){this.destroy(),this.setState(this.initialState)},o.isActive=function(){return this.observers.some(function(_){return _.options.enabled!==!1})},o.isFetching=function(){return this.state.isFetching},o.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(_){return _.getCurrentResult().isStale})},o.isStaleByTime=function(_){return _===void 0&&(_=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,_)},o.onFocus=function(){var _,$=this.observers.find(function(et){return et.shouldFetchOnWindowFocus()});$&&$.refetch(),(_=this.retryer)==null||_.continue()},o.onOnline=function(){var _,$=this.observers.find(function(et){return et.shouldFetchOnReconnect()});$&&$.refetch(),(_=this.retryer)==null||_.continue()},o.addObserver=function(_){this.observers.indexOf(_)===-1&&(this.observers.push(_),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:_}))},o.removeObserver=function(_){this.observers.indexOf(_)!==-1&&(this.observers=this.observers.filter(function($){return $!==_}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:_}))},o.getObserversCount=function(){return this.observers.length},o.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},o.fetch=function(_,$){var et=this,tt,j,it;if(this.state.isFetching){if(this.state.dataUpdatedAt&&($!=null&&$.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var st;return(st=this.retryer)==null||st.continueRetry(),this.promise}}if(_&&this.setOptions(_),!this.options.queryFn){var ht=this.observers.find(function(Ft){return Ft.options.queryFn});ht&&this.setOptions(ht.options)}var _t=ensureQueryKeyArray(this.queryKey),gt=getAbortController(),ft={queryKey:_t,pageParam:void 0,meta:this.meta};Object.defineProperty(ft,"signal",{enumerable:!0,get:function(){if(gt)return et.abortSignalConsumed=!0,gt.signal}});var ut=function(){return et.options.queryFn?(et.abortSignalConsumed=!1,et.options.queryFn(ft)):Promise.reject("Missing queryFn")},yt={fetchOptions:$,options:this.options,queryKey:_t,state:this.state,fetchFn:ut,meta:this.meta};if((tt=this.options.behavior)!=null&&tt.onFetch){var Et;(Et=this.options.behavior)==null||Et.onFetch(yt)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((j=yt.fetchOptions)==null?void 0:j.meta)){var Mt;this.dispatch({type:"fetch",meta:(Mt=yt.fetchOptions)==null?void 0:Mt.meta})}return this.retryer=new Retryer({fn:yt.fetchFn,abort:gt==null||(it=gt.abort)==null?void 0:it.bind(gt),onSuccess:function(Rt){et.setData(Rt),et.cache.config.onSuccess==null||et.cache.config.onSuccess(Rt,et),et.cacheTime===0&&et.optionalRemove()},onError:function(Rt){isCancelledError(Rt)&&Rt.silent||et.dispatch({type:"error",error:Rt}),isCancelledError(Rt)||(et.cache.config.onError==null||et.cache.config.onError(Rt,et),getLogger().error(Rt)),et.cacheTime===0&&et.optionalRemove()},onFail:function(){et.dispatch({type:"failed"})},onPause:function(){et.dispatch({type:"pause"})},onContinue:function(){et.dispatch({type:"continue"})},retry:yt.options.retry,retryDelay:yt.options.retryDelay}),this.promise=this.retryer.promise,this.promise},o.dispatch=function(_){var $=this;this.state=this.reducer(this.state,_),notifyManager.batch(function(){$.observers.forEach(function(et){et.onQueryUpdate(_)}),$.cache.notify({query:$,type:"queryUpdated",action:_})})},o.getDefaultState=function(_){var $=typeof _.initialData=="function"?_.initialData():_.initialData,et=typeof _.initialData<"u",tt=et?typeof _.initialDataUpdatedAt=="function"?_.initialDataUpdatedAt():_.initialDataUpdatedAt:0,j=typeof $<"u";return{data:$,dataUpdateCount:0,dataUpdatedAt:j?tt??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:j?"success":"idle"}},o.reducer=function(_,$){var et,tt;switch($.type){case"failed":return _extends$1({},_,{fetchFailureCount:_.fetchFailureCount+1});case"pause":return _extends$1({},_,{isPaused:!0});case"continue":return _extends$1({},_,{isPaused:!1});case"fetch":return _extends$1({},_,{fetchFailureCount:0,fetchMeta:(et=$.meta)!=null?et:null,isFetching:!0,isPaused:!1},!_.dataUpdatedAt&&{error:null,status:"loading"});case"success":return _extends$1({},_,{data:$.data,dataUpdateCount:_.dataUpdateCount+1,dataUpdatedAt:(tt=$.dataUpdatedAt)!=null?tt:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var j=$.error;return isCancelledError(j)&&j.revert&&this.revertState?_extends$1({},this.revertState):_extends$1({},_,{error:j,errorUpdateCount:_.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:_.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return _extends$1({},_,{isInvalidated:!0});case"setState":return _extends$1({},_,$.state);default:return _}},i}(),QueryCache=function(i){_inheritsLoose(o,i);function o(_){var $;return $=i.call(this)||this,$.config=_||{},$.queries=[],$.queriesMap={},$}var s=o.prototype;return s.build=function($,et,tt){var j,it=et.queryKey,st=(j=et.queryHash)!=null?j:hashQueryKeyByOptions(it,et),ht=this.get(st);return ht||(ht=new Query({cache:this,queryKey:it,queryHash:st,options:$.defaultQueryOptions(et),state:tt,defaultOptions:$.getQueryDefaults(it),meta:et.meta}),this.add(ht)),ht},s.add=function($){this.queriesMap[$.queryHash]||(this.queriesMap[$.queryHash]=$,this.queries.push($),this.notify({type:"queryAdded",query:$}))},s.remove=function($){var et=this.queriesMap[$.queryHash];et&&($.destroy(),this.queries=this.queries.filter(function(tt){return tt!==$}),et===$&&delete this.queriesMap[$.queryHash],this.notify({type:"queryRemoved",query:$}))},s.clear=function(){var $=this;notifyManager.batch(function(){$.queries.forEach(function(et){$.remove(et)})})},s.get=function($){return this.queriesMap[$]},s.getAll=function(){return this.queries},s.find=function($,et){var tt=parseFilterArgs($,et),j=tt[0];return typeof j.exact>"u"&&(j.exact=!0),this.queries.find(function(it){return matchQuery(j,it)})},s.findAll=function($,et){var tt=parseFilterArgs($,et),j=tt[0];return Object.keys(j).length>0?this.queries.filter(function(it){return matchQuery(j,it)}):this.queries},s.notify=function($){var et=this;notifyManager.batch(function(){et.listeners.forEach(function(tt){tt($)})})},s.onFocus=function(){var $=this;notifyManager.batch(function(){$.queries.forEach(function(et){et.onFocus()})})},s.onOnline=function(){var $=this;notifyManager.batch(function(){$.queries.forEach(function(et){et.onOnline()})})},o}(Subscribable),Mutation=function(){function i(s){this.options=_extends$1({},s.defaultOptions,s.options),this.mutationId=s.mutationId,this.mutationCache=s.mutationCache,this.observers=[],this.state=s.state||getDefaultState(),this.meta=s.meta}var o=i.prototype;return o.setState=function(_){this.dispatch({type:"setState",state:_})},o.addObserver=function(_){this.observers.indexOf(_)===-1&&this.observers.push(_)},o.removeObserver=function(_){this.observers=this.observers.filter(function($){return $!==_})},o.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(noop).catch(noop)):Promise.resolve()},o.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},o.execute=function(){var _=this,$,et=this.state.status==="loading",tt=Promise.resolve();return et||(this.dispatch({type:"loading",variables:this.options.variables}),tt=tt.then(function(){_.mutationCache.config.onMutate==null||_.mutationCache.config.onMutate(_.state.variables,_)}).then(function(){return _.options.onMutate==null?void 0:_.options.onMutate(_.state.variables)}).then(function(j){j!==_.state.context&&_.dispatch({type:"loading",context:j,variables:_.state.variables})})),tt.then(function(){return _.executeMutation()}).then(function(j){$=j,_.mutationCache.config.onSuccess==null||_.mutationCache.config.onSuccess($,_.state.variables,_.state.context,_)}).then(function(){return _.options.onSuccess==null?void 0:_.options.onSuccess($,_.state.variables,_.state.context)}).then(function(){return _.options.onSettled==null?void 0:_.options.onSettled($,null,_.state.variables,_.state.context)}).then(function(){return _.dispatch({type:"success",data:$}),$}).catch(function(j){return _.mutationCache.config.onError==null||_.mutationCache.config.onError(j,_.state.variables,_.state.context,_),getLogger().error(j),Promise.resolve().then(function(){return _.options.onError==null?void 0:_.options.onError(j,_.state.variables,_.state.context)}).then(function(){return _.options.onSettled==null?void 0:_.options.onSettled(void 0,j,_.state.variables,_.state.context)}).then(function(){throw _.dispatch({type:"error",error:j}),j})})},o.executeMutation=function(){var _=this,$;return this.retryer=new Retryer({fn:function(){return _.options.mutationFn?_.options.mutationFn(_.state.variables):Promise.reject("No mutationFn found")},onFail:function(){_.dispatch({type:"failed"})},onPause:function(){_.dispatch({type:"pause"})},onContinue:function(){_.dispatch({type:"continue"})},retry:($=this.options.retry)!=null?$:0,retryDelay:this.options.retryDelay}),this.retryer.promise},o.dispatch=function(_){var $=this;this.state=reducer(this.state,_),notifyManager.batch(function(){$.observers.forEach(function(et){et.onMutationUpdate(_)}),$.mutationCache.notify($)})},i}();function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function reducer(i,o){switch(o.type){case"failed":return _extends$1({},i,{failureCount:i.failureCount+1});case"pause":return _extends$1({},i,{isPaused:!0});case"continue":return _extends$1({},i,{isPaused:!1});case"loading":return _extends$1({},i,{context:o.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:o.variables});case"success":return _extends$1({},i,{data:o.data,error:null,status:"success",isPaused:!1});case"error":return _extends$1({},i,{data:void 0,error:o.error,failureCount:i.failureCount+1,isPaused:!1,status:"error"});case"setState":return _extends$1({},i,o.state);default:return i}}var MutationCache=function(i){_inheritsLoose(o,i);function o(_){var $;return $=i.call(this)||this,$.config=_||{},$.mutations=[],$.mutationId=0,$}var s=o.prototype;return s.build=function($,et,tt){var j=new Mutation({mutationCache:this,mutationId:++this.mutationId,options:$.defaultMutationOptions(et),state:tt,defaultOptions:et.mutationKey?$.getMutationDefaults(et.mutationKey):void 0,meta:et.meta});return this.add(j),j},s.add=function($){this.mutations.push($),this.notify($)},s.remove=function($){this.mutations=this.mutations.filter(function(et){return et!==$}),$.cancel(),this.notify($)},s.clear=function(){var $=this;notifyManager.batch(function(){$.mutations.forEach(function(et){$.remove(et)})})},s.getAll=function(){return this.mutations},s.find=function($){return typeof $.exact>"u"&&($.exact=!0),this.mutations.find(function(et){return matchMutation($,et)})},s.findAll=function($){return this.mutations.filter(function(et){return matchMutation($,et)})},s.notify=function($){var et=this;notifyManager.batch(function(){et.listeners.forEach(function(tt){tt($)})})},s.onFocus=function(){this.resumePausedMutations()},s.onOnline=function(){this.resumePausedMutations()},s.resumePausedMutations=function(){var $=this.mutations.filter(function(et){return et.state.isPaused});return notifyManager.batch(function(){return $.reduce(function(et,tt){return et.then(function(){return tt.continue().catch(noop)})},Promise.resolve())})},o}(Subscribable);function infiniteQueryBehavior(){return{onFetch:function(o){o.fetchFn=function(){var s,_,$,et,tt,j,it=(s=o.fetchOptions)==null||(_=s.meta)==null?void 0:_.refetchPage,st=($=o.fetchOptions)==null||(et=$.meta)==null?void 0:et.fetchMore,ht=st==null?void 0:st.pageParam,_t=(st==null?void 0:st.direction)==="forward",gt=(st==null?void 0:st.direction)==="backward",ft=((tt=o.state.data)==null?void 0:tt.pages)||[],ut=((j=o.state.data)==null?void 0:j.pageParams)||[],yt=getAbortController(),Et=yt==null?void 0:yt.signal,Mt=ut,Ft=!1,Rt=o.options.queryFn||function(){return Promise.reject("Missing queryFn")},Ot=function(Xt,Gt,Ut,Ht){return Mt=Ht?[Gt].concat(Mt):[].concat(Mt,[Gt]),Ht?[Ut].concat(Xt):[].concat(Xt,[Ut])},pt=function(Xt,Gt,Ut,Ht){if(Ft)return Promise.reject("Cancelled");if(typeof Ut>"u"&&!Gt&&Xt.length)return Promise.resolve(Xt);var qt={queryKey:o.queryKey,signal:Et,pageParam:Ut,meta:o.meta},Pt=Rt(qt),St=Promise.resolve(Pt).then(function(tn){return Ot(Xt,Ut,tn,Ht)});if(isCancelable(Pt)){var Zt=St;Zt.cancel=Pt.cancel}return St},Lt;if(!ft.length)Lt=pt([]);else if(_t){var nn=typeof ht<"u",on=nn?ht:getNextPageParam(o.options,ft);Lt=pt(ft,nn,on)}else if(gt){var wt=typeof ht<"u",xt=wt?ht:getPreviousPageParam(o.options,ft);Lt=pt(ft,wt,xt,!0)}else(function(){Mt=[];var Vt=typeof o.options.getNextPageParam>"u",Xt=it&&ft[0]?it(ft[0],0,ft):!0;Lt=Xt?pt([],Vt,ut[0]):Promise.resolve(Ot([],ut[0],ft[0]));for(var Gt=function(qt){Lt=Lt.then(function(Pt){var St=it&&ft[qt]?it(ft[qt],qt,ft):!0;if(St){var Zt=Vt?ut[qt]:getNextPageParam(o.options,Pt);return pt(Pt,Vt,Zt)}return Promise.resolve(Ot(Pt,ut[qt],ft[qt]))})},Ut=1;Ut<ft.length;Ut++)Gt(Ut)})();var Nt=Lt.then(function(Vt){return{pages:Vt,pageParams:Mt}}),Tt=Nt;return Tt.cancel=function(){Ft=!0,yt==null||yt.abort(),isCancelable(Lt)&&Lt.cancel()},Nt}}}}function getNextPageParam(i,o){return i.getNextPageParam==null?void 0:i.getNextPageParam(o[o.length-1],o)}function getPreviousPageParam(i,o){return i.getPreviousPageParam==null?void 0:i.getPreviousPageParam(o[0],o)}var QueryClient=function(){function i(s){s===void 0&&(s={}),this.queryCache=s.queryCache||new QueryCache,this.mutationCache=s.mutationCache||new MutationCache,this.defaultOptions=s.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var o=i.prototype;return o.mount=function(){var _=this;this.unsubscribeFocus=focusManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(_.mutationCache.onFocus(),_.queryCache.onFocus())}),this.unsubscribeOnline=onlineManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(_.mutationCache.onOnline(),_.queryCache.onOnline())})},o.unmount=function(){var _,$;(_=this.unsubscribeFocus)==null||_.call(this),($=this.unsubscribeOnline)==null||$.call(this)},o.isFetching=function(_,$){var et=parseFilterArgs(_,$),tt=et[0];return tt.fetching=!0,this.queryCache.findAll(tt).length},o.isMutating=function(_){return this.mutationCache.findAll(_extends$1({},_,{fetching:!0})).length},o.getQueryData=function(_,$){var et;return(et=this.queryCache.find(_,$))==null?void 0:et.state.data},o.getQueriesData=function(_){return this.getQueryCache().findAll(_).map(function($){var et=$.queryKey,tt=$.state,j=tt.data;return[et,j]})},o.setQueryData=function(_,$,et){var tt=parseQueryArgs(_),j=this.defaultQueryOptions(tt);return this.queryCache.build(this,j).setData($,et)},o.setQueriesData=function(_,$,et){var tt=this;return notifyManager.batch(function(){return tt.getQueryCache().findAll(_).map(function(j){var it=j.queryKey;return[it,tt.setQueryData(it,$,et)]})})},o.getQueryState=function(_,$){var et;return(et=this.queryCache.find(_,$))==null?void 0:et.state},o.removeQueries=function(_,$){var et=parseFilterArgs(_,$),tt=et[0],j=this.queryCache;notifyManager.batch(function(){j.findAll(tt).forEach(function(it){j.remove(it)})})},o.resetQueries=function(_,$,et){var tt=this,j=parseFilterArgs(_,$,et),it=j[0],st=j[1],ht=this.queryCache,_t=_extends$1({},it,{active:!0});return notifyManager.batch(function(){return ht.findAll(it).forEach(function(gt){gt.reset()}),tt.refetchQueries(_t,st)})},o.cancelQueries=function(_,$,et){var tt=this,j=parseFilterArgs(_,$,et),it=j[0],st=j[1],ht=st===void 0?{}:st;typeof ht.revert>"u"&&(ht.revert=!0);var _t=notifyManager.batch(function(){return tt.queryCache.findAll(it).map(function(gt){return gt.cancel(ht)})});return Promise.all(_t).then(noop).catch(noop)},o.invalidateQueries=function(_,$,et){var tt,j,it,st=this,ht=parseFilterArgs(_,$,et),_t=ht[0],gt=ht[1],ft=_extends$1({},_t,{active:(tt=(j=_t.refetchActive)!=null?j:_t.active)!=null?tt:!0,inactive:(it=_t.refetchInactive)!=null?it:!1});return notifyManager.batch(function(){return st.queryCache.findAll(_t).forEach(function(ut){ut.invalidate()}),st.refetchQueries(ft,gt)})},o.refetchQueries=function(_,$,et){var tt=this,j=parseFilterArgs(_,$,et),it=j[0],st=j[1],ht=notifyManager.batch(function(){return tt.queryCache.findAll(it).map(function(gt){return gt.fetch(void 0,_extends$1({},st,{meta:{refetchPage:it==null?void 0:it.refetchPage}}))})}),_t=Promise.all(ht).then(noop);return st!=null&&st.throwOnError||(_t=_t.catch(noop)),_t},o.fetchQuery=function(_,$,et){var tt=parseQueryArgs(_,$,et),j=this.defaultQueryOptions(tt);typeof j.retry>"u"&&(j.retry=!1);var it=this.queryCache.build(this,j);return it.isStaleByTime(j.staleTime)?it.fetch(j):Promise.resolve(it.state.data)},o.prefetchQuery=function(_,$,et){return this.fetchQuery(_,$,et).then(noop).catch(noop)},o.fetchInfiniteQuery=function(_,$,et){var tt=parseQueryArgs(_,$,et);return tt.behavior=infiniteQueryBehavior(),this.fetchQuery(tt)},o.prefetchInfiniteQuery=function(_,$,et){return this.fetchInfiniteQuery(_,$,et).then(noop).catch(noop)},o.cancelMutations=function(){var _=this,$=notifyManager.batch(function(){return _.mutationCache.getAll().map(function(et){return et.cancel()})});return Promise.all($).then(noop).catch(noop)},o.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},o.executeMutation=function(_){return this.mutationCache.build(this,_).execute()},o.getQueryCache=function(){return this.queryCache},o.getMutationCache=function(){return this.mutationCache},o.getDefaultOptions=function(){return this.defaultOptions},o.setDefaultOptions=function(_){this.defaultOptions=_},o.setQueryDefaults=function(_,$){var et=this.queryDefaults.find(function(tt){return hashQueryKey(_)===hashQueryKey(tt.queryKey)});et?et.defaultOptions=$:this.queryDefaults.push({queryKey:_,defaultOptions:$})},o.getQueryDefaults=function(_){var $;return _?($=this.queryDefaults.find(function(et){return partialMatchKey(_,et.queryKey)}))==null?void 0:$.defaultOptions:void 0},o.setMutationDefaults=function(_,$){var et=this.mutationDefaults.find(function(tt){return hashQueryKey(_)===hashQueryKey(tt.mutationKey)});et?et.defaultOptions=$:this.mutationDefaults.push({mutationKey:_,defaultOptions:$})},o.getMutationDefaults=function(_){var $;return _?($=this.mutationDefaults.find(function(et){return partialMatchKey(_,et.mutationKey)}))==null?void 0:$.defaultOptions:void 0},o.defaultQueryOptions=function(_){if(_!=null&&_._defaulted)return _;var $=_extends$1({},this.defaultOptions.queries,this.getQueryDefaults(_==null?void 0:_.queryKey),_,{_defaulted:!0});return!$.queryHash&&$.queryKey&&($.queryHash=hashQueryKeyByOptions($.queryKey,$)),$},o.defaultQueryObserverOptions=function(_){return this.defaultQueryOptions(_)},o.defaultMutationOptions=function(_){return _!=null&&_._defaulted?_:_extends$1({},this.defaultOptions.mutations,this.getMutationDefaults(_==null?void 0:_.mutationKey),_,{_defaulted:!0})},o.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},i}(),unstable_batchedUpdates=ReactDOM.unstable_batchedUpdates;notifyManager.setBatchNotifyFunction(unstable_batchedUpdates);var logger=console;setLogger(logger);var defaultContext=React$1.createContext(void 0),QueryClientSharingContext=React$1.createContext(!1);function getQueryClientContext(i){return i&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext}var QueryClientProvider=function i(o){var s=o.client,_=o.contextSharing,$=_===void 0?!1:_,et=o.children;React$1.useEffect(function(){return s.mount(),function(){s.unmount()}},[s]);var tt=getQueryClientContext($);return React$1.createElement(QueryClientSharingContext.Provider,{value:$},React$1.createElement(tt.Provider,{value:s},et))};const index_module={"mapboxgl-control-container":"_mapboxgl-control-container_1csz9_6","mapboxgl-ctrl":"_mapboxgl-ctrl_1csz9_10","mapboxgl-ctrl-bottom-left":"_mapboxgl-ctrl-bottom-left_1csz9_14","mapboxgl-ctrl-bottom-right":"_mapboxgl-ctrl-bottom-right_1csz9_18"},queryClient=new QueryClient;client.createRoot(document.getElementById("root")).render(jsx(FormantProvider,{parseConfiguration:!0,children:jsx(QueryClientProvider,{client:queryClient,children:jsx(React$1.StrictMode,{children:jsx(App,{})})})}));
