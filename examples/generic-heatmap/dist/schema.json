{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://formant.io/toolkit/examples/generic-heatmap/schema.json",
  "title": "Heatmap",
  "description": "Display location data over time as a heat map.",
  "type": "object",
  "properties": {
    "queryType": {
      "description": "Specifies what timeframe of data is shown in the heatmap",
      "title": "Query data by",
      "type": "string",
      "enum": ["Events", "Annotation", "Active Timeline point"]
    },
    "scrubber": {
      "description": "Use the scrubber's position in the timeline to specify the time range of data to show in the heatmap",
      "type": "object",
      "title": "Active Timeline point",
      "$formant.visible.when": ["queryType", "=", "Active Timeline point"],
      "properties": {
        "startFrom": {
          "description": "Query can start from some time before the active timeline point or the last event.End point will be active timeline point.",
          "type": "string",
          "enum": ["Time Delta", "Event"]
        },
        "hours": {
          "type": "integer",
          "$formant.visible.when": ["startFrom", "=", "Time Delta"]
        },
        "minutes": {
          "type": "integer",
          "$formant.visible.when": ["startFrom", "=", "Time Delta"]
        },
        "eventName": {
          "type": "string",
          "$formant.visible.when": ["startFrom", "=", "Event"]
        }
      }
    },

    "annotation": {
      "title": "Annotation Name",
      "description": "It will use annotation start, and end time to query data.",
      "type": "string",
      "$formant.visible.when": ["queryType", "=", "Annotation"]
    },
    "eventsQuery": {
      "description": "Use events to specify the timerange of data shown in the heatmap",
      "title": "Time Range",
      "type": "object",
      "$formant.visible.when": ["queryType", "=", "Events"],
      "properties": {
        "startFrom": {
          "description": "Choose either a time delta before the end event or another event to specify the start time of the data shown",
          "type": "string",
          "enum": ["Time Delta", "Event"]
        },
        "hours": {
          "type": "integer",
          "$formant.visible.when": ["startFrom", "=", "Time Delta"]
        },
        "minutes": {
          "type": "integer",
          "$formant.visible.when": ["startFrom", "=", "Time Delta"]
        },
        "startEvent": {
          "title": "Start Event Name",
          "type": "string",
          "$formant.visible.when": ["startFrom", "=", "Event"]
        },
        "endEvent": {
          "title": "End Event Name",
          "type": "string"
        }
      }
    },
    "locationStream": {
      "type": "string",
      "title": "Location data stream",
      "$formant.streams.byType": "location",
      "description": "Name of location stream in Formant to view as heatmap"
    },
    "advanceSettings": {
      "title": "Enable advance settings",
      "type": "boolean"
    },
    "mapboxKey": {
      "description": "To use the heatmap, you'll need a Mapbox access token.",
      "title": "Mapbox key",
      "type": "string",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "weightStream": {
      "title": "Weight",
      "type": "string",
      "$formant.streams.byType": "numeric",
      "description": "The size of the heatmap marker will scale to the value of the integer stream specified.",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "weightSearchWindow": {
      "title": "Weight Search Window (s)",
      "type": "integer",
      "description": "Max window around location timestamp to search for a corresponding weight value in the numeric stream",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },

    "longitude": {
      "description": "Optional center position of the map",
      "type": "number",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "latitude": {
      "description": "Optional center position of the map",
      "type": "number",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "defaultZoomLevel": {
      "range": "from 1 (farthest) to 20 (closest)",
      "type": "integer",
      "description": "Default zoom level. 1 is closest, 24 furthest away.",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "distinctPointZoomLevel": {
      "title": "Distinct zoom level",
      "type": "integer",
      "description": "At what zoom level to fade the heatmap and show individual locations.",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "heatmapIntensity": {
      "title": "Heatmap intensity",
      "description": "Integer between 1 - 20, it will make the map more dense based on the zoom lebel.",
      "type": "integer",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "circleRadius": {
      "title": "Circle heat radius (px)",
      "type": "integer",
      "$formant.visible.when": ["advanceSettings", "=", true]
    },
    "tooltipLabel": {
      "title": "Hover Tooltip Label",
      "type": "string",
      "$formant.visible.when": ["advanceSettings", "=", true]
    }
  }
}
