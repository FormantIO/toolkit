{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://formant.io/toolkit/examples/generic-heatmap/schema.json",
  "title": "Heatmap",
  "description": "Display location data over time as a heat map.",
  "type": "object",
  "properties": {
    "mapboxKey": {
      "title": "Mapbox key",
      "type": "string"
    },
    "locationStream": {
      "type": "string",
      "title": "Location data stream",
      "description": "Name of location stream in Formant to view as heatmap"
    },
    "weightStream": {
      "title": "Heat Weights",
      "type": "string",
      "description": "Name of a numeric stream in Formant. If timestamps are within the search window, the datapointâ€™s value will scale the size of the heat circle. If not, a value of 1 will be used."
    },
    "weightSearchWindow": {
      "title": "Weight Search Window (s)",
      "type": "integer",
      "description": "Max window around location timestamp to search for a corresponding weight value in the numeric stream"
    },

    "queryType": {
      "title": "Query data by",
      "type": "string",
      "enum": ["Events", "Annotation", "Active Timeline point"]
    },
    "annotationQuery": {
      "title": "Annotation",
      "$formant.visible.when": ["queryType", "=", "Annotation"],
      "type": "object",
      "properties": {
        "annotationName": {
          "type": "string"
        },
        "useEndTime": {
          "type": "boolean"
        },
        "timeDelta": {
          "type": "number",
          "$formant.visible.when": ["useEndTime", "=", "false"]
        }
      }
    },
    "eventQuery": {
      "type": "object",
      "properties": {
        "eventName": {
          "type": "string"
        }
      }
    },
    "start": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["timeDelta", "Event"]
        },
        "value": {
          "type": "string",
          "title": "Event Name",
          "$formant.visible.when": ["type", "=", "Event"]
        },
        "hours": {
          "type": "number",
          "$formant.visible.when": ["type", "=", "timeDelta"]
        }
      }
    },
    "end": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "title": "Event Name",
          "enum": ["timeDelta", "Event", "Annotation", "Active Timeline point"]
        },
        "value": {
          "type": "string",
          "$formant.visible.when": ["type", "=", "Event"]
        },
        "hours": {
          "type": "number",
          "$formant.visible.when": ["type", "=", "timeDelta"]
        }
      }
    },

    "longitude": {
      "type": "number"
    },
    "latitude": {
      "type": "number"
    },
    "defaultZoomLevel": {
      "range": "from 1 (farthest) to 20 (closest)",
      "type": "integer",
      "description": "Default zoom level. 1 is closest, 24 furthest away."
    },
    "distinctPointZoomLevel": {
      "title": "Distinct zoom level",
      "type": "integer",
      "description": "At what zoom level to fade the heatmap and show individual locations."
    },
    "circleRadius": {
      "title": "Circle heat radius (px)",
      "type": "integer"
    },
    "tooltipLabel": {
      "title": "Hover Tooltip Label",
      "type": "string"
    }
  }
}
